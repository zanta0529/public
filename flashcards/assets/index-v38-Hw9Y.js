(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var _w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Op={exports:{}},Gu={};var y_;function bw(){if(y_)return Gu;y_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var y in o)y!=="key"&&(u[y]=o[y])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:u}}return Gu.Fragment=e,Gu.jsx=n,Gu.jsxs=n,Gu}var v_;function Ew(){return v_||(v_=1,Op.exports=bw()),Op.exports}var H=Ew(),Dp={exports:{}},it={};var __;function Tw(){if(__)return it;__=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),M=Symbol.iterator;function X(F){return F===null||typeof F!="object"?null:(F=M&&F[M]||F["@@iterator"],typeof F=="function"?F:null)}var re={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pe=Object.assign,Ee={};function ke(F,me,xe){this.props=F,this.context=me,this.refs=Ee,this.updater=xe||re}ke.prototype.isReactComponent={},ke.prototype.setState=function(F,me){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,me,"setState")},ke.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function Be(){}Be.prototype=ke.prototype;function Ve(F,me,xe){this.props=F,this.context=me,this.refs=Ee,this.updater=xe||re}var rt=Ve.prototype=new Be;rt.constructor=Ve,pe(rt,ke.prototype),rt.isPureReactComponent=!0;var xt=Array.isArray;function Ge(){}var k={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function V(F,me,xe){var Le=xe.ref;return{$$typeof:i,type:F,key:me,ref:Le!==void 0?Le:null,props:xe}}function G(F,me){return V(F.type,me,F.props)}function z(F){return typeof F=="object"&&F!==null&&F.$$typeof===i}function Z(F){var me={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(xe){return me[xe]})}var P=/\/+/g;function Bt(F,me){return typeof F=="object"&&F!==null&&F.key!=null?Z(""+F.key):me.toString(36)}function Ft(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(Ge,Ge):(F.status="pending",F.then(function(me){F.status==="pending"&&(F.status="fulfilled",F.value=me)},function(me){F.status==="pending"&&(F.status="rejected",F.reason=me)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function le(F,me,xe,Le,Qe){var Je=typeof F;(Je==="undefined"||Je==="boolean")&&(F=null);var dt=!1;if(F===null)dt=!0;else switch(Je){case"bigint":case"string":case"number":dt=!0;break;case"object":switch(F.$$typeof){case i:case e:dt=!0;break;case R:return dt=F._init,le(dt(F._payload),me,xe,Le,Qe)}}if(dt)return Qe=Qe(F),dt=Le===""?"."+Bt(F,0):Le,xt(Qe)?(xe="",dt!=null&&(xe=dt.replace(P,"$&/")+"/"),le(Qe,me,xe,"",function(ns){return ns})):Qe!=null&&(z(Qe)&&(Qe=G(Qe,xe+(Qe.key==null||F&&F.key===Qe.key?"":(""+Qe.key).replace(P,"$&/")+"/")+dt)),me.push(Qe)),1;dt=0;var gn=Le===""?".":Le+":";if(xt(F))for(var Me=0;Me<F.length;Me++)Le=F[Me],Je=gn+Bt(Le,Me),dt+=le(Le,me,xe,Je,Qe);else if(Me=X(F),typeof Me=="function")for(F=Me.call(F),Me=0;!(Le=F.next()).done;)Le=Le.value,Je=gn+Bt(Le,Me++),dt+=le(Le,me,xe,Je,Qe);else if(Je==="object"){if(typeof F.then=="function")return le(Ft(F),me,xe,Le,Qe);throw me=String(F),Error("Objects are not valid as a React child (found: "+(me==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":me)+"). If you meant to render a collection of children, use an array instead.")}return dt}function _e(F,me,xe){if(F==null)return F;var Le=[],Qe=0;return le(F,Le,"","",function(Je){return me.call(xe,Je,Qe++)}),Le}function je(F){if(F._status===-1){var me=F._result;me=me(),me.then(function(xe){(F._status===0||F._status===-1)&&(F._status=1,F._result=xe)},function(xe){(F._status===0||F._status===-1)&&(F._status=2,F._result=xe)}),F._status===-1&&(F._status=0,F._result=me)}if(F._status===1)return F._result.default;throw F._result}var at=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var me=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(me))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},ft={map:_e,forEach:function(F,me,xe){_e(F,function(){me.apply(this,arguments)},xe)},count:function(F){var me=0;return _e(F,function(){me++}),me},toArray:function(F){return _e(F,function(me){return me})||[]},only:function(F){if(!z(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return it.Activity=x,it.Children=ft,it.Component=ke,it.Fragment=n,it.Profiler=o,it.PureComponent=Ve,it.StrictMode=s,it.Suspense=_,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,it.__COMPILER_RUNTIME={__proto__:null,c:function(F){return k.H.useMemoCache(F)}},it.cache=function(F){return function(){return F.apply(null,arguments)}},it.cacheSignal=function(){return null},it.cloneElement=function(F,me,xe){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var Le=pe({},F.props),Qe=F.key;if(me!=null)for(Je in me.key!==void 0&&(Qe=""+me.key),me)!D.call(me,Je)||Je==="key"||Je==="__self"||Je==="__source"||Je==="ref"&&me.ref===void 0||(Le[Je]=me[Je]);var Je=arguments.length-2;if(Je===1)Le.children=xe;else if(1<Je){for(var dt=Array(Je),gn=0;gn<Je;gn++)dt[gn]=arguments[gn+2];Le.children=dt}return V(F.type,Qe,Le)},it.createContext=function(F){return F={$$typeof:d,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:u,_context:F},F},it.createElement=function(F,me,xe){var Le,Qe={},Je=null;if(me!=null)for(Le in me.key!==void 0&&(Je=""+me.key),me)D.call(me,Le)&&Le!=="key"&&Le!=="__self"&&Le!=="__source"&&(Qe[Le]=me[Le]);var dt=arguments.length-2;if(dt===1)Qe.children=xe;else if(1<dt){for(var gn=Array(dt),Me=0;Me<dt;Me++)gn[Me]=arguments[Me+2];Qe.children=gn}if(F&&F.defaultProps)for(Le in dt=F.defaultProps,dt)Qe[Le]===void 0&&(Qe[Le]=dt[Le]);return V(F,Je,Qe)},it.createRef=function(){return{current:null}},it.forwardRef=function(F){return{$$typeof:y,render:F}},it.isValidElement=z,it.lazy=function(F){return{$$typeof:R,_payload:{_status:-1,_result:F},_init:je}},it.memo=function(F,me){return{$$typeof:E,type:F,compare:me===void 0?null:me}},it.startTransition=function(F){var me=k.T,xe={};k.T=xe;try{var Le=F(),Qe=k.S;Qe!==null&&Qe(xe,Le),typeof Le=="object"&&Le!==null&&typeof Le.then=="function"&&Le.then(Ge,at)}catch(Je){at(Je)}finally{me!==null&&xe.types!==null&&(me.types=xe.types),k.T=me}},it.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},it.use=function(F){return k.H.use(F)},it.useActionState=function(F,me,xe){return k.H.useActionState(F,me,xe)},it.useCallback=function(F,me){return k.H.useCallback(F,me)},it.useContext=function(F){return k.H.useContext(F)},it.useDebugValue=function(){},it.useDeferredValue=function(F,me){return k.H.useDeferredValue(F,me)},it.useEffect=function(F,me){return k.H.useEffect(F,me)},it.useEffectEvent=function(F){return k.H.useEffectEvent(F)},it.useId=function(){return k.H.useId()},it.useImperativeHandle=function(F,me,xe){return k.H.useImperativeHandle(F,me,xe)},it.useInsertionEffect=function(F,me){return k.H.useInsertionEffect(F,me)},it.useLayoutEffect=function(F,me){return k.H.useLayoutEffect(F,me)},it.useMemo=function(F,me){return k.H.useMemo(F,me)},it.useOptimistic=function(F,me){return k.H.useOptimistic(F,me)},it.useReducer=function(F,me,xe){return k.H.useReducer(F,me,xe)},it.useRef=function(F){return k.H.useRef(F)},it.useState=function(F){return k.H.useState(F)},it.useSyncExternalStore=function(F,me,xe){return k.H.useSyncExternalStore(F,me,xe)},it.useTransition=function(){return k.H.useTransition()},it.version="19.2.0",it}var b_;function wm(){return b_||(b_=1,Dp.exports=Tw()),Dp.exports}var Se=wm();const ww=Tm(Se);var Np={exports:{}},Yu={},Mp={exports:{}},kp={};var E_;function Sw(){return E_||(E_=1,(function(i){function e(le,_e){var je=le.length;le.push(_e);e:for(;0<je;){var at=je-1>>>1,ft=le[at];if(0<o(ft,_e))le[at]=_e,le[je]=ft,je=at;else break e}}function n(le){return le.length===0?null:le[0]}function s(le){if(le.length===0)return null;var _e=le[0],je=le.pop();if(je!==_e){le[0]=je;e:for(var at=0,ft=le.length,F=ft>>>1;at<F;){var me=2*(at+1)-1,xe=le[me],Le=me+1,Qe=le[Le];if(0>o(xe,je))Le<ft&&0>o(Qe,xe)?(le[at]=Qe,le[Le]=je,at=Le):(le[at]=xe,le[me]=je,at=me);else if(Le<ft&&0>o(Qe,je))le[at]=Qe,le[Le]=je,at=Le;else break e}}return _e}function o(le,_e){var je=le.sortIndex-_e.sortIndex;return je!==0?je:le.id-_e.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,y=d.now();i.unstable_now=function(){return d.now()-y}}var _=[],E=[],R=1,x=null,M=3,X=!1,re=!1,pe=!1,Ee=!1,ke=typeof setTimeout=="function"?setTimeout:null,Be=typeof clearTimeout=="function"?clearTimeout:null,Ve=typeof setImmediate<"u"?setImmediate:null;function rt(le){for(var _e=n(E);_e!==null;){if(_e.callback===null)s(E);else if(_e.startTime<=le)s(E),_e.sortIndex=_e.expirationTime,e(_,_e);else break;_e=n(E)}}function xt(le){if(pe=!1,rt(le),!re)if(n(_)!==null)re=!0,Ge||(Ge=!0,Z());else{var _e=n(E);_e!==null&&Ft(xt,_e.startTime-le)}}var Ge=!1,k=-1,D=5,V=-1;function G(){return Ee?!0:!(i.unstable_now()-V<D)}function z(){if(Ee=!1,Ge){var le=i.unstable_now();V=le;var _e=!0;try{e:{re=!1,pe&&(pe=!1,Be(k),k=-1),X=!0;var je=M;try{t:{for(rt(le),x=n(_);x!==null&&!(x.expirationTime>le&&G());){var at=x.callback;if(typeof at=="function"){x.callback=null,M=x.priorityLevel;var ft=at(x.expirationTime<=le);if(le=i.unstable_now(),typeof ft=="function"){x.callback=ft,rt(le),_e=!0;break t}x===n(_)&&s(_),rt(le)}else s(_);x=n(_)}if(x!==null)_e=!0;else{var F=n(E);F!==null&&Ft(xt,F.startTime-le),_e=!1}}break e}finally{x=null,M=je,X=!1}_e=void 0}}finally{_e?Z():Ge=!1}}}var Z;if(typeof Ve=="function")Z=function(){Ve(z)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Bt=P.port2;P.port1.onmessage=z,Z=function(){Bt.postMessage(null)}}else Z=function(){ke(z,0)};function Ft(le,_e){k=ke(function(){le(i.unstable_now())},_e)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(le){le.callback=null},i.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<le?Math.floor(1e3/le):5},i.unstable_getCurrentPriorityLevel=function(){return M},i.unstable_next=function(le){switch(M){case 1:case 2:case 3:var _e=3;break;default:_e=M}var je=M;M=_e;try{return le()}finally{M=je}},i.unstable_requestPaint=function(){Ee=!0},i.unstable_runWithPriority=function(le,_e){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var je=M;M=le;try{return _e()}finally{M=je}},i.unstable_scheduleCallback=function(le,_e,je){var at=i.unstable_now();switch(typeof je=="object"&&je!==null?(je=je.delay,je=typeof je=="number"&&0<je?at+je:at):je=at,le){case 1:var ft=-1;break;case 2:ft=250;break;case 5:ft=1073741823;break;case 4:ft=1e4;break;default:ft=5e3}return ft=je+ft,le={id:R++,callback:_e,priorityLevel:le,startTime:je,expirationTime:ft,sortIndex:-1},je>at?(le.sortIndex=je,e(E,le),n(_)===null&&le===n(E)&&(pe?(Be(k),k=-1):pe=!0,Ft(xt,je-at))):(le.sortIndex=ft,e(_,le),re||X||(re=!0,Ge||(Ge=!0,Z()))),le},i.unstable_shouldYield=G,i.unstable_wrapCallback=function(le){var _e=M;return function(){var je=M;M=_e;try{return le.apply(this,arguments)}finally{M=je}}}})(kp)),kp}var T_;function Aw(){return T_||(T_=1,Mp.exports=Sw()),Mp.exports}var Vp={exports:{}},fr={};var w_;function Cw(){if(w_)return fr;w_=1;var i=wm();function e(_){var E="https://react.dev/errors/"+_;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)E+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+_+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(_,E,R){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:_,containerInfo:E,implementation:R}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(_,E){if(_==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return fr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,fr.createPortal=function(_,E){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(e(299));return u(_,E,null,R)},fr.flushSync=function(_){var E=d.T,R=s.p;try{if(d.T=null,s.p=2,_)return _()}finally{d.T=E,s.p=R,s.d.f()}},fr.preconnect=function(_,E){typeof _=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,s.d.C(_,E))},fr.prefetchDNS=function(_){typeof _=="string"&&s.d.D(_)},fr.preinit=function(_,E){if(typeof _=="string"&&E&&typeof E.as=="string"){var R=E.as,x=y(R,E.crossOrigin),M=typeof E.integrity=="string"?E.integrity:void 0,X=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;R==="style"?s.d.S(_,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:x,integrity:M,fetchPriority:X}):R==="script"&&s.d.X(_,{crossOrigin:x,integrity:M,fetchPriority:X,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},fr.preinitModule=function(_,E){if(typeof _=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var R=y(E.as,E.crossOrigin);s.d.M(_,{crossOrigin:R,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&s.d.M(_)},fr.preload=function(_,E){if(typeof _=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var R=E.as,x=y(R,E.crossOrigin);s.d.L(_,R,{crossOrigin:x,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},fr.preloadModule=function(_,E){if(typeof _=="string")if(E){var R=y(E.as,E.crossOrigin);s.d.m(_,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:R,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else s.d.m(_)},fr.requestFormReset=function(_){s.d.r(_)},fr.unstable_batchedUpdates=function(_,E){return _(E)},fr.useFormState=function(_,E,R){return d.H.useFormState(_,E,R)},fr.useFormStatus=function(){return d.H.useHostTransitionStatus()},fr.version="19.2.0",fr}var S_;function Rw(){if(S_)return Vp.exports;S_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Vp.exports=Cw(),Vp.exports}var A_;function Iw(){if(A_)return Yu;A_=1;var i=Aw(),e=wm(),n=Rw();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function y(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function _(t){if(u(t)!==t)throw Error(s(188))}function E(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return _(h),t;if(m===l)return _(h),r;m=m.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=m;else{for(var T=!1,C=h.child;C;){if(C===a){T=!0,a=h,l=m;break}if(C===l){T=!0,l=h,a=m;break}C=C.sibling}if(!T){for(C=m.child;C;){if(C===a){T=!0,a=m,l=h;break}if(C===l){T=!0,l=m,a=h;break}C=C.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function R(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=R(t),r!==null)return r;t=t.sibling}return null}var x=Object.assign,M=Symbol.for("react.element"),X=Symbol.for("react.transitional.element"),re=Symbol.for("react.portal"),pe=Symbol.for("react.fragment"),Ee=Symbol.for("react.strict_mode"),ke=Symbol.for("react.profiler"),Be=Symbol.for("react.consumer"),Ve=Symbol.for("react.context"),rt=Symbol.for("react.forward_ref"),xt=Symbol.for("react.suspense"),Ge=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function Z(t){return t===null||typeof t!="object"?null:(t=z&&t[z]||t["@@iterator"],typeof t=="function"?t:null)}var P=Symbol.for("react.client.reference");function Bt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===P?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pe:return"Fragment";case ke:return"Profiler";case Ee:return"StrictMode";case xt:return"Suspense";case Ge:return"SuspenseList";case V:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case re:return"Portal";case Ve:return t.displayName||"Context";case Be:return(t._context.displayName||"Context")+".Consumer";case rt:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return r=t.displayName||null,r!==null?r:Bt(t.type)||"Memo";case D:r=t._payload,t=t._init;try{return Bt(t(r))}catch{}}return null}var Ft=Array.isArray,le=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,je={pending:!1,data:null,method:null,action:null},at=[],ft=-1;function F(t){return{current:t}}function me(t){0>ft||(t.current=at[ft],at[ft]=null,ft--)}function xe(t,r){ft++,at[ft]=t.current,t.current=r}var Le=F(null),Qe=F(null),Je=F(null),dt=F(null);function gn(t,r){switch(xe(Je,r),xe(Qe,t),xe(Le,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?zv(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=zv(r),t=Bv(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}me(Le),xe(Le,t)}function Me(){me(Le),me(Qe),me(Je)}function ns(t){t.memoizedState!==null&&xe(dt,t);var r=Le.current,a=Bv(r,t.type);r!==a&&(xe(Qe,t),xe(Le,a))}function zi(t){Qe.current===t&&(me(Le),me(Qe)),dt.current===t&&(me(dt),qu._currentValue=je)}var St,di;function pi(t){if(St===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);St=r&&r[1]||"",di=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+St+t+di}var Fr=!1;function xs(t,r){if(!t||Fr)return"";Fr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(ce){var oe=ce}Reflect.construct(t,[],ye)}else{try{ye.call()}catch(ce){oe=ce}t.call(ye.prototype)}}else{try{throw Error()}catch(ce){oe=ce}(ye=t())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(ce){if(ce&&oe&&typeof ce.stack=="string")return[ce.stack,oe.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),T=m[0],C=m[1];if(T&&C){var L=T.split(`
`),se=C.split(`
`);for(h=l=0;l<L.length&&!L[l].includes("DetermineComponentFrameRoot");)l++;for(;h<se.length&&!se[h].includes("DetermineComponentFrameRoot");)h++;if(l===L.length||h===se.length)for(l=L.length-1,h=se.length-1;1<=l&&0<=h&&L[l]!==se[h];)h--;for(;1<=l&&0<=h;l--,h--)if(L[l]!==se[h]){if(l!==1||h!==1)do if(l--,h--,0>h||L[l]!==se[h]){var he=`
`+L[l].replace(" at new "," at ");return t.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",t.displayName)),he}while(1<=l&&0<=h);break}}}finally{Fr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?pi(a):""}function Eo(t,r){switch(t.tag){case 26:case 27:case 5:return pi(t.type);case 16:return pi("Lazy");case 13:return t.child!==r&&r!==null?pi("Suspense Fallback"):pi("Suspense");case 19:return pi("SuspenseList");case 0:case 15:return xs(t.type,!1);case 11:return xs(t.type.render,!1);case 1:return xs(t.type,!0);case 31:return pi("Activity");default:return""}}function To(t){try{var r="",a=null;do r+=Eo(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var hn=Object.prototype.hasOwnProperty,nn=i.unstable_scheduleCallback,Pn=i.unstable_cancelCallback,ol=i.unstable_shouldYield,rs=i.unstable_requestPaint,qn=i.unstable_now,Gr=i.unstable_getCurrentPriorityLevel,Yr=i.unstable_ImmediatePriority,Qr=i.unstable_UserBlockingPriority,mi=i.unstable_NormalPriority,Os=i.unstable_LowPriority,ma=i.unstable_IdlePriority,Ds=i.log,gi=i.unstable_setDisableYieldValue,ar=null,yn=null;function vn(t){if(typeof Ds=="function"&&gi(t),yn&&typeof yn.setStrictMode=="function")try{yn.setStrictMode(ar,t)}catch{}}var Ne=Math.clz32?Math.clz32:Ns,is=Math.log,wr=Math.LN2;function Ns(t){return t>>>=0,t===0?32:31-(is(t)/wr|0)|0}var Ie=256,Bi=262144,rn=4194304;function Sr(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Xr(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var C=l&134217727;return C!==0?(l=C&~m,l!==0?h=Sr(l):(T&=C,T!==0?h=Sr(T):a||(a=C&~t,a!==0&&(h=Sr(a))))):(C=l&~m,C!==0?h=Sr(C):T!==0?h=Sr(T):a||(a=l&~t,a!==0&&(h=Sr(a)))),h===0?0:r!==0&&r!==h&&(r&m)===0&&(m=h&-h,a=r&-r,m>=a||m===32&&(a&4194048)!==0)?r:h}function yr(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function uu(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ll(){var t=rn;return rn<<=1,(rn&62914560)===0&&(rn=4194304),t}function $n(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Ar(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function wo(t,r,a,l,h,m){var T=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var C=t.entanglements,L=t.expirationTimes,se=t.hiddenUpdates;for(a=T&~a;0<a;){var he=31-Ne(a),ye=1<<he;C[he]=0,L[he]=-1;var oe=se[he];if(oe!==null)for(se[he]=null,he=0;he<oe.length;he++){var ce=oe[he];ce!==null&&(ce.lane&=-536870913)}a&=~ye}l!==0&&yi(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(T&~r))}function yi(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Ne(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function kt(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Ne(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function Wt(t,r){var a=r&-r;return a=(a&42)!==0?1:Ms(a),(a&(t.suspendedLanes|r))!==0?0:a}function Ms(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Cr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ks(){var t=_e.p;return t!==0?t:(t=window.event,t===void 0?32:c_(t.type))}function or(t,r){var a=_e.p;try{return _e.p=t,r()}finally{_e.p=a}}var $r=Math.random().toString(36).slice(2),Pt="__reactFiber$"+$r,Yt="__reactProps$"+$r,Ln="__reactContainer$"+$r,qi="__reactEvents$"+$r,cu="__reactListeners$"+$r,Jr="__reactHandles$"+$r,So="__reactResources$"+$r,Hn="__reactMarker$"+$r;function Vs(t){delete t[Pt],delete t[Yt],delete t[qi],delete t[cu],delete t[Jr]}function Rr(t){var r=t[Pt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Ln]||a[Pt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=Qv(t);t!==null;){if(a=t[Pt])return a;t=Qv(t)}return r}t=a,a=t.parentNode}return null}function Rt(t){if(t=t[Pt]||t[Ln]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function _n(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function Cn(t){var r=t[So];return r||(r=t[So]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function sn(t){t[Hn]=!0}var vi=new Set,ss={};function Ir(t,r){xr(t,r),xr(t+"Capture",r)}function xr(t,r){for(ss[t]=r,t=0;t<r.length;t++)vi.add(r[t])}var Wr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ga={},as={};function Ao(t){return hn.call(as,t)?!0:hn.call(ga,t)?!1:Wr.test(t)?as[t]=!0:(ga[t]=!0,!1)}function ot(t,r,a){if(Ao(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function lr(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function an(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function on(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Or(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ya(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,m=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(T){a=""+T,m.call(this,T)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(T){a=""+T},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ot(t){if(!t._valueTracker){var r=Or(t)?"checked":"value";t._valueTracker=ya(t,r,""+t[r])}}function os(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Or(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function mt(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Zr=/[\n"\\]/g;function Rn(t){return t.replace(Zr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ei(t,r,a,l,h,m,T,C){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),r!=null?T==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+on(r)):t.value!==""+on(r)&&(t.value=""+on(r)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),r!=null?Ps(t,T,on(r)):a!=null?Ps(t,T,on(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?t.name=""+on(C):t.removeAttribute("name")}function va(t,r,a,l,h,m,T,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Ot(t);return}a=a!=null?""+on(a):"",r=r!=null?""+on(r):a,C||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=C?t.checked:!!l,t.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),Ot(t)}function Ps(t,r,a){r==="number"&&mt(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ti(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+on(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function Co(t,r,a){if(r!=null&&(r=""+on(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+on(a):""}function ni(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Ft(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=on(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Ot(t)}function Jn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var ul=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pt(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||ul.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function _a(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&pt(t,h,l)}else for(var m in r)r.hasOwnProperty(m)&&pt(t,m,r[m])}function ba(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ri(t){return dn.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ur(){}var Dr=null;function vr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hi=null,Lt=null;function Kn(t){var r=Rt(t);if(r&&(t=r.stateNode)){var a=t[Yt]||null;e:switch(t=r.stateNode,r.type){case"input":if(ei(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Rn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[Yt]||null;if(!h)throw Error(s(90));ei(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&os(l)}break e;case"textarea":Co(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&ti(t,!!a.multiple,r,!1)}}}var _i=!1;function Nr(t,r,a){if(_i)return t(r,a);_i=!0;try{var l=t(r);return l}finally{if(_i=!1,(Hi!==null||Lt!==null)&&(hf(),Hi&&(r=Hi,t=Lt,Lt=Hi=null,Kn(r),t)))for(r=0;r<t.length;r++)Kn(t[r])}}function _r(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Yt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ls=!1;if(bn)try{var ht={};Object.defineProperty(ht,"passive",{get:function(){Ls=!0}}),window.addEventListener("test",ht,ht),window.removeEventListener("test",ht,ht)}catch{Ls=!1}var Mr=null,Ea=null,Ki=null;function Fi(){if(Ki)return Ki;var t,r=Ea,a=r.length,l,h="value"in Mr?Mr.value:Mr.textContent,m=h.length;for(t=0;t<a&&r[t]===h[t];t++);var T=a-t;for(l=1;l<=T&&r[a-l]===h[m-l];l++);return Ki=h.slice(t,1<l?1-l:void 0)}function Gi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function bi(){return!0}function ii(){return!1}function ln(t){function r(a,l,h,m,T){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=T,this.currentTarget=null;for(var C in t)t.hasOwnProperty(C)&&(a=t[C],this[C]=a?a(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?bi:ii,this.isPropagationStopped=ii,this}return x(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=bi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=bi)},persist:function(){},isPersistent:bi}),r}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=ln(Yi),si=x({},Yi,{view:0,detail:0}),ls=ln(si),Ti,Ta,wi,wa=x({},si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wi&&(wi&&t.type==="mousemove"?(Ti=t.screenX-wi.screenX,Ta=t.screenY-wi.screenY):Ta=Ti=0,wi=t),Ti)},movementY:function(t){return"movementY"in t?t.movementY:Ta}}),Us=ln(wa),Qi=x({},wa,{dataTransfer:0}),Ro=ln(Qi),js=x({},si,{relatedTarget:0}),Si=ln(js),us=x({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),Io=ln(us),Sa=x({},Yi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Xi=ln(Sa),Aa=x({},Yi,{data:0}),kr=ln(Aa),Ca={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ra={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cs(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=En[t])?!!r[t]:!1}function Vr(){return cs}var Fn=x({},si,{key:function(t){if(t.key){var r=Ca[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Gi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ra[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vr,charCode:function(t){return t.type==="keypress"?Gi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zs=ln(Fn),xo=x({},wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ai=ln(xo),c=x({},si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vr}),v=ln(c),w=x({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=ln(w),te=x({},wa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ue=ln(te),Ce=x({},Yi,{newState:0,oldState:0}),tt=ln(Ce),un=[9,13,27,32],At=bn&&"CompositionEvent"in window,Ut=null;bn&&"documentMode"in document&&(Ut=document.documentMode);var Pr=bn&&"TextEvent"in window&&!Ut,Lr=bn&&(!At||Ut&&8<Ut&&11>=Ut),br=" ",ai=!1;function fs(t,r){switch(t){case"keyup":return un.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ia(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bs=!1;function Dc(t,r){switch(t){case"compositionend":return Ia(r);case"keypress":return r.which!==32?null:(ai=!0,br);case"textInput":return t=r.data,t===br&&ai?null:t;default:return null}}function Kh(t,r){if(Bs)return t==="compositionend"||!At&&fs(t,r)?(t=Fi(),Ki=Ea=Mr=null,Bs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Lr&&r.locale!=="ko"?null:r.data;default:return null}}var Nc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fl(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Nc[t.type]:r==="textarea"}function fu(t,r,a,l){Hi?Lt?Lt.push(l):Lt=[l]:Hi=l,r=_f(r,"onChange"),0<r.length&&(a=new Ei("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var xa=null,Oo=null;function Fh(t){kv(t,0)}function hl(t){var r=_n(t);if(os(r))return t}function Do(t,r){if(t==="change")return r}var Ci=!1;if(bn){var Qt;if(bn){var Oa="oninput"in document;if(!Oa){var Er=document.createElement("div");Er.setAttribute("oninput","return;"),Oa=typeof Er.oninput=="function"}Qt=Oa}else Qt=!1;Ci=Qt&&(!document.documentMode||9<document.documentMode)}function Mc(){xa&&(xa.detachEvent("onpropertychange",dl),Oo=xa=null)}function dl(t){if(t.propertyName==="value"&&hl(Oo)){var r=[];fu(r,Oo,t,vr(t)),Nr(Fh,r)}}function kc(t,r,a){t==="focusin"?(Mc(),xa=r,Oo=a,xa.attachEvent("onpropertychange",dl)):t==="focusout"&&Mc()}function qs(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hl(Oo)}function hu(t,r){if(t==="click")return hl(r)}function Da(t,r){if(t==="input"||t==="change")return hl(r)}function hs(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var cr=typeof Object.is=="function"?Object.is:hs;function f(t,r){if(cr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!hn.call(r,h)||!cr(t[h],r[h]))return!1}return!0}function p(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g(t,r){var a=p(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=p(a)}}function b(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?b(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function S(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=mt(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=mt(t.document)}return r}function A(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var O=bn&&"documentMode"in document&&11>=document.documentMode,N=null,j=null,B=null,$=!1;function U(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;$||N==null||N!==mt(l)||(l=N,"selectionStart"in l&&A(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),B&&f(B,l)||(B=l,l=_f(j,"onSelect"),0<l.length&&(r=new Ei("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=N)))}function W(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var q={animationend:W("Animation","AnimationEnd"),animationiteration:W("Animation","AnimationIteration"),animationstart:W("Animation","AnimationStart"),transitionrun:W("Transition","TransitionRun"),transitionstart:W("Transition","TransitionStart"),transitioncancel:W("Transition","TransitionCancel"),transitionend:W("Transition","TransitionEnd")},Y={},Q={};bn&&(Q=document.createElement("div").style,"AnimationEvent"in window||(delete q.animationend.animation,delete q.animationiteration.animation,delete q.animationstart.animation),"TransitionEvent"in window||delete q.transitionend.transition);function J(t){if(Y[t])return Y[t];if(!q[t])return t;var r=q[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Q)return Y[t]=r[a];return t}var ne=J("animationend"),ae=J("animationiteration"),fe=J("animationstart"),ge=J("transitionrun"),Ae=J("transitionstart"),De=J("transitioncancel"),Te=J("transitionend"),Re=new Map,Oe="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Oe.push("scrollEnd");function we(t,r){Re.set(t,r),Ir(r,[t])}var Pe=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ke=[],Ze=0,lt=0;function Gn(){for(var t=Ze,r=lt=Ze=0;r<t;){var a=Ke[r];Ke[r++]=null;var l=Ke[r];Ke[r++]=null;var h=Ke[r];Ke[r++]=null;var m=Ke[r];if(Ke[r++]=null,l!==null&&h!==null){var T=l.pending;T===null?h.next=h:(h.next=T.next,T.next=h),l.pending=h}m!==0&&No(a,h,m)}}function We(t,r,a,l){Ke[Ze++]=t,Ke[Ze++]=r,Ke[Ze++]=a,Ke[Ze++]=l,lt|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function In(t,r,a,l){return We(t,r,a,l),xn(t)}function Zt(t,r){return We(t,null,null,r),xn(t)}function No(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&r!==null&&(h=31-Ne(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),m):null}function xn(t){if(50<Vu)throw Vu=0,ep=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ur={};function du(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(t,r,a,l){return new du(t,r,a,l)}function Gh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hs(t,r){var a=t.alternate;return a===null?(a=oi(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function gg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Vc(t,r,a,l,h,m){var T=0;if(l=t,typeof t=="function")Gh(t)&&(T=1);else if(typeof t=="string")T=ow(t,a,Le.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case V:return t=oi(31,a,r,h),t.elementType=V,t.lanes=m,t;case pe:return Mo(a.children,h,m,r);case Ee:T=8,h|=24;break;case ke:return t=oi(12,a,r,h|2),t.elementType=ke,t.lanes=m,t;case xt:return t=oi(13,a,r,h),t.elementType=xt,t.lanes=m,t;case Ge:return t=oi(19,a,r,h),t.elementType=Ge,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ve:T=10;break e;case Be:T=9;break e;case rt:T=11;break e;case k:T=14;break e;case D:T=16,l=null;break e}T=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=oi(T,a,r,h),r.elementType=t,r.type=l,r.lanes=m,r}function Mo(t,r,a,l){return t=oi(7,t,l,r),t.lanes=a,t}function Yh(t,r,a){return t=oi(6,t,null,r),t.lanes=a,t}function yg(t){var r=oi(18,null,null,0);return r.stateNode=t,r}function Qh(t,r,a){return r=oi(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var vg=new WeakMap;function Ri(t,r){if(typeof t=="object"&&t!==null){var a=vg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:To(r)},vg.set(t,r),r)}return{value:t,source:r,stack:To(r)}}var pl=[],ml=0,Pc=null,pu=0,Ii=[],xi=0,Na=null,ds=1,ps="";function Ks(t,r){pl[ml++]=pu,pl[ml++]=Pc,Pc=t,pu=r}function _g(t,r,a){Ii[xi++]=ds,Ii[xi++]=ps,Ii[xi++]=Na,Na=t;var l=ds;t=ps;var h=32-Ne(l)-1;l&=~(1<<h),a+=1;var m=32-Ne(r)+h;if(30<m){var T=h-h%5;m=(l&(1<<T)-1).toString(32),l>>=T,h-=T,ds=1<<32-Ne(r)+h|a<<h|l,ps=m+t}else ds=1<<m|a<<h|l,ps=t}function Xh(t){t.return!==null&&(Ks(t,1),_g(t,1,0))}function $h(t){for(;t===Pc;)Pc=pl[--ml],pl[ml]=null,pu=pl[--ml],pl[ml]=null;for(;t===Na;)Na=Ii[--xi],Ii[xi]=null,ps=Ii[--xi],Ii[xi]=null,ds=Ii[--xi],Ii[xi]=null}function bg(t,r){Ii[xi++]=ds,Ii[xi++]=ps,Ii[xi++]=Na,ds=r.id,ps=r.overflow,Na=t}var Wn=null,Xt=null,Ct=!1,Ma=null,Oi=!1,Jh=Error(s(519));function ka(t){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mu(Ri(r,t)),Jh}function Eg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Pt]=t,r[Yt]=l,a){case"dialog":yt("cancel",r),yt("close",r);break;case"iframe":case"object":case"embed":yt("load",r);break;case"video":case"audio":for(a=0;a<Lu.length;a++)yt(Lu[a],r);break;case"source":yt("error",r);break;case"img":case"image":case"link":yt("error",r),yt("load",r);break;case"details":yt("toggle",r);break;case"input":yt("invalid",r),va(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":yt("invalid",r);break;case"textarea":yt("invalid",r),ni(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||Uv(r.textContent,a)?(l.popover!=null&&(yt("beforetoggle",r),yt("toggle",r)),l.onScroll!=null&&yt("scroll",r),l.onScrollEnd!=null&&yt("scrollend",r),l.onClick!=null&&(r.onclick=ur),r=!0):r=!1,r||ka(t,!0)}function Tg(t){for(Wn=t.return;Wn;)switch(Wn.tag){case 5:case 31:case 13:Oi=!1;return;case 27:case 3:Oi=!0;return;default:Wn=Wn.return}}function gl(t){if(t!==Wn)return!1;if(!Ct)return Tg(t),Ct=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||mp(t.type,t.memoizedProps)),a=!a),a&&Xt&&ka(t),Tg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Xt=Yv(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Xt=Yv(t)}else r===27?(r=Xt,Qa(t.type)?(t=bp,bp=null,Xt=t):Xt=r):Xt=Wn?Ni(t.stateNode.nextSibling):null;return!0}function ko(){Xt=Wn=null,Ct=!1}function Wh(){var t=Ma;return t!==null&&(qr===null?qr=t:qr.push.apply(qr,t),Ma=null),t}function mu(t){Ma===null?Ma=[t]:Ma.push(t)}var Zh=F(null),Vo=null,Fs=null;function Va(t,r,a){xe(Zh,r._currentValue),r._currentValue=a}function Gs(t){t._currentValue=Zh.current,me(Zh)}function ed(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function td(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var T=h.child;m=m.firstContext;e:for(;m!==null;){var C=m;m=h;for(var L=0;L<r.length;L++)if(C.context===r[L]){m.lanes|=a,C=m.alternate,C!==null&&(C.lanes|=a),ed(m.return,a,t),l||(T=null);break e}m=C.next}}else if(h.tag===18){if(T=h.return,T===null)throw Error(s(341));T.lanes|=a,m=T.alternate,m!==null&&(m.lanes|=a),ed(T,a,t),T=null}else T=h.child;if(T!==null)T.return=h;else for(T=h;T!==null;){if(T===t){T=null;break}if(h=T.sibling,h!==null){h.return=T.return,T=h;break}T=T.return}h=T}}function yl(t,r,a,l){t=null;for(var h=r,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var T=h.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var C=h.type;cr(h.pendingProps.value,T.value)||(t!==null?t.push(C):t=[C])}}else if(h===dt.current){if(T=h.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(qu):t=[qu])}h=h.return}t!==null&&td(r,t,a,l),r.flags|=262144}function Lc(t){for(t=t.firstContext;t!==null;){if(!cr(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Po(t){Vo=t,Fs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Zn(t){return wg(Vo,t)}function Uc(t,r){return Vo===null&&Po(t),wg(t,r)}function wg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Fs===null){if(t===null)throw Error(s(308));Fs=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Fs=Fs.next=r;return a}var r1=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},i1=i.unstable_scheduleCallback,s1=i.unstable_NormalPriority,On={$$typeof:Ve,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nd(){return{controller:new r1,data:new Map,refCount:0}}function gu(t){t.refCount--,t.refCount===0&&i1(s1,function(){t.controller.abort()})}var yu=null,rd=0,vl=0,_l=null;function a1(t,r){if(yu===null){var a=yu=[];rd=0,vl=ap(),_l={status:"pending",value:void 0,then:function(l){a.push(l)}}}return rd++,r.then(Sg,Sg),r}function Sg(){if(--rd===0&&yu!==null){_l!==null&&(_l.status="fulfilled");var t=yu;yu=null,vl=0,_l=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function o1(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Ag=le.S;le.S=function(t,r){lv=qn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&a1(t,r),Ag!==null&&Ag(t,r)};var Lo=F(null);function id(){var t=Lo.current;return t!==null?t:Gt.pooledCache}function jc(t,r){r===null?xe(Lo,Lo.current):xe(Lo,r.pool)}function Cg(){var t=id();return t===null?null:{parent:On._currentValue,pool:t}}var bl=Error(s(460)),sd=Error(s(474)),zc=Error(s(542)),Bc={then:function(){}};function Rg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ig(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(ur,ur),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Og(t),t;default:if(typeof r.status=="string")r.then(ur,ur);else{if(t=Gt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Og(t),t}throw jo=r,bl}}function Uo(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(jo=a,bl):a}}var jo=null;function xg(){if(jo===null)throw Error(s(459));var t=jo;return jo=null,t}function Og(t){if(t===bl||t===zc)throw Error(s(483))}var El=null,vu=0;function qc(t){var r=vu;return vu+=1,El===null&&(El=[]),Ig(El,t,r)}function _u(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Hc(t,r){throw r.$$typeof===M?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Dg(t){function r(ee,K){if(t){var ie=ee.deletions;ie===null?(ee.deletions=[K],ee.flags|=16):ie.push(K)}}function a(ee,K){if(!t)return null;for(;K!==null;)r(ee,K),K=K.sibling;return null}function l(ee){for(var K=new Map;ee!==null;)ee.key!==null?K.set(ee.key,ee):K.set(ee.index,ee),ee=ee.sibling;return K}function h(ee,K){return ee=Hs(ee,K),ee.index=0,ee.sibling=null,ee}function m(ee,K,ie){return ee.index=ie,t?(ie=ee.alternate,ie!==null?(ie=ie.index,ie<K?(ee.flags|=67108866,K):ie):(ee.flags|=67108866,K)):(ee.flags|=1048576,K)}function T(ee){return t&&ee.alternate===null&&(ee.flags|=67108866),ee}function C(ee,K,ie,de){return K===null||K.tag!==6?(K=Yh(ie,ee.mode,de),K.return=ee,K):(K=h(K,ie),K.return=ee,K)}function L(ee,K,ie,de){var Fe=ie.type;return Fe===pe?he(ee,K,ie.props.children,de,ie.key):K!==null&&(K.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===D&&Uo(Fe)===K.type)?(K=h(K,ie.props),_u(K,ie),K.return=ee,K):(K=Vc(ie.type,ie.key,ie.props,null,ee.mode,de),_u(K,ie),K.return=ee,K)}function se(ee,K,ie,de){return K===null||K.tag!==4||K.stateNode.containerInfo!==ie.containerInfo||K.stateNode.implementation!==ie.implementation?(K=Qh(ie,ee.mode,de),K.return=ee,K):(K=h(K,ie.children||[]),K.return=ee,K)}function he(ee,K,ie,de,Fe){return K===null||K.tag!==7?(K=Mo(ie,ee.mode,de,Fe),K.return=ee,K):(K=h(K,ie),K.return=ee,K)}function ye(ee,K,ie){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Yh(""+K,ee.mode,ie),K.return=ee,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case X:return ie=Vc(K.type,K.key,K.props,null,ee.mode,ie),_u(ie,K),ie.return=ee,ie;case re:return K=Qh(K,ee.mode,ie),K.return=ee,K;case D:return K=Uo(K),ye(ee,K,ie)}if(Ft(K)||Z(K))return K=Mo(K,ee.mode,ie,null),K.return=ee,K;if(typeof K.then=="function")return ye(ee,qc(K),ie);if(K.$$typeof===Ve)return ye(ee,Uc(ee,K),ie);Hc(ee,K)}return null}function oe(ee,K,ie,de){var Fe=K!==null?K.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Fe!==null?null:C(ee,K,""+ie,de);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case X:return ie.key===Fe?L(ee,K,ie,de):null;case re:return ie.key===Fe?se(ee,K,ie,de):null;case D:return ie=Uo(ie),oe(ee,K,ie,de)}if(Ft(ie)||Z(ie))return Fe!==null?null:he(ee,K,ie,de,null);if(typeof ie.then=="function")return oe(ee,K,qc(ie),de);if(ie.$$typeof===Ve)return oe(ee,K,Uc(ee,ie),de);Hc(ee,ie)}return null}function ce(ee,K,ie,de,Fe){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return ee=ee.get(ie)||null,C(K,ee,""+de,Fe);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case X:return ee=ee.get(de.key===null?ie:de.key)||null,L(K,ee,de,Fe);case re:return ee=ee.get(de.key===null?ie:de.key)||null,se(K,ee,de,Fe);case D:return de=Uo(de),ce(ee,K,ie,de,Fe)}if(Ft(de)||Z(de))return ee=ee.get(ie)||null,he(K,ee,de,Fe,null);if(typeof de.then=="function")return ce(ee,K,ie,qc(de),Fe);if(de.$$typeof===Ve)return ce(ee,K,ie,Uc(K,de),Fe);Hc(K,de)}return null}function ze(ee,K,ie,de){for(var Fe=null,Dt=null,qe=K,ct=K=0,bt=null;qe!==null&&ct<ie.length;ct++){qe.index>ct?(bt=qe,qe=null):bt=qe.sibling;var Nt=oe(ee,qe,ie[ct],de);if(Nt===null){qe===null&&(qe=bt);break}t&&qe&&Nt.alternate===null&&r(ee,qe),K=m(Nt,K,ct),Dt===null?Fe=Nt:Dt.sibling=Nt,Dt=Nt,qe=bt}if(ct===ie.length)return a(ee,qe),Ct&&Ks(ee,ct),Fe;if(qe===null){for(;ct<ie.length;ct++)qe=ye(ee,ie[ct],de),qe!==null&&(K=m(qe,K,ct),Dt===null?Fe=qe:Dt.sibling=qe,Dt=qe);return Ct&&Ks(ee,ct),Fe}for(qe=l(qe);ct<ie.length;ct++)bt=ce(qe,ee,ct,ie[ct],de),bt!==null&&(t&&bt.alternate!==null&&qe.delete(bt.key===null?ct:bt.key),K=m(bt,K,ct),Dt===null?Fe=bt:Dt.sibling=bt,Dt=bt);return t&&qe.forEach(function(Za){return r(ee,Za)}),Ct&&Ks(ee,ct),Fe}function Xe(ee,K,ie,de){if(ie==null)throw Error(s(151));for(var Fe=null,Dt=null,qe=K,ct=K=0,bt=null,Nt=ie.next();qe!==null&&!Nt.done;ct++,Nt=ie.next()){qe.index>ct?(bt=qe,qe=null):bt=qe.sibling;var Za=oe(ee,qe,Nt.value,de);if(Za===null){qe===null&&(qe=bt);break}t&&qe&&Za.alternate===null&&r(ee,qe),K=m(Za,K,ct),Dt===null?Fe=Za:Dt.sibling=Za,Dt=Za,qe=bt}if(Nt.done)return a(ee,qe),Ct&&Ks(ee,ct),Fe;if(qe===null){for(;!Nt.done;ct++,Nt=ie.next())Nt=ye(ee,Nt.value,de),Nt!==null&&(K=m(Nt,K,ct),Dt===null?Fe=Nt:Dt.sibling=Nt,Dt=Nt);return Ct&&Ks(ee,ct),Fe}for(qe=l(qe);!Nt.done;ct++,Nt=ie.next())Nt=ce(qe,ee,ct,Nt.value,de),Nt!==null&&(t&&Nt.alternate!==null&&qe.delete(Nt.key===null?ct:Nt.key),K=m(Nt,K,ct),Dt===null?Fe=Nt:Dt.sibling=Nt,Dt=Nt);return t&&qe.forEach(function(vw){return r(ee,vw)}),Ct&&Ks(ee,ct),Fe}function Kt(ee,K,ie,de){if(typeof ie=="object"&&ie!==null&&ie.type===pe&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case X:e:{for(var Fe=ie.key;K!==null;){if(K.key===Fe){if(Fe=ie.type,Fe===pe){if(K.tag===7){a(ee,K.sibling),de=h(K,ie.props.children),de.return=ee,ee=de;break e}}else if(K.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===D&&Uo(Fe)===K.type){a(ee,K.sibling),de=h(K,ie.props),_u(de,ie),de.return=ee,ee=de;break e}a(ee,K);break}else r(ee,K);K=K.sibling}ie.type===pe?(de=Mo(ie.props.children,ee.mode,de,ie.key),de.return=ee,ee=de):(de=Vc(ie.type,ie.key,ie.props,null,ee.mode,de),_u(de,ie),de.return=ee,ee=de)}return T(ee);case re:e:{for(Fe=ie.key;K!==null;){if(K.key===Fe)if(K.tag===4&&K.stateNode.containerInfo===ie.containerInfo&&K.stateNode.implementation===ie.implementation){a(ee,K.sibling),de=h(K,ie.children||[]),de.return=ee,ee=de;break e}else{a(ee,K);break}else r(ee,K);K=K.sibling}de=Qh(ie,ee.mode,de),de.return=ee,ee=de}return T(ee);case D:return ie=Uo(ie),Kt(ee,K,ie,de)}if(Ft(ie))return ze(ee,K,ie,de);if(Z(ie)){if(Fe=Z(ie),typeof Fe!="function")throw Error(s(150));return ie=Fe.call(ie),Xe(ee,K,ie,de)}if(typeof ie.then=="function")return Kt(ee,K,qc(ie),de);if(ie.$$typeof===Ve)return Kt(ee,K,Uc(ee,ie),de);Hc(ee,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,K!==null&&K.tag===6?(a(ee,K.sibling),de=h(K,ie),de.return=ee,ee=de):(a(ee,K),de=Yh(ie,ee.mode,de),de.return=ee,ee=de),T(ee)):a(ee,K)}return function(ee,K,ie,de){try{vu=0;var Fe=Kt(ee,K,ie,de);return El=null,Fe}catch(qe){if(qe===bl||qe===zc)throw qe;var Dt=oi(29,qe,null,ee.mode);return Dt.lanes=de,Dt.return=ee,Dt}finally{}}}var zo=Dg(!0),Ng=Dg(!1),Pa=!1;function ad(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function od(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function La(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ua(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Mt&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=xn(t),No(t,null,a),r}return We(t,l,r,a),xn(t)}function bu(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,kt(t,a)}}function ld(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=T:m=m.next=T,a=a.next}while(a!==null);m===null?h=m=r:m=m.next=r}else h=m=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var ud=!1;function Eu(){if(ud){var t=_l;if(t!==null)throw t}}function Tu(t,r,a,l){ud=!1;var h=t.updateQueue;Pa=!1;var m=h.firstBaseUpdate,T=h.lastBaseUpdate,C=h.shared.pending;if(C!==null){h.shared.pending=null;var L=C,se=L.next;L.next=null,T===null?m=se:T.next=se,T=L;var he=t.alternate;he!==null&&(he=he.updateQueue,C=he.lastBaseUpdate,C!==T&&(C===null?he.firstBaseUpdate=se:C.next=se,he.lastBaseUpdate=L))}if(m!==null){var ye=h.baseState;T=0,he=se=L=null,C=m;do{var oe=C.lane&-536870913,ce=oe!==C.lane;if(ce?(_t&oe)===oe:(l&oe)===oe){oe!==0&&oe===vl&&(ud=!0),he!==null&&(he=he.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ze=t,Xe=C;oe=r;var Kt=a;switch(Xe.tag){case 1:if(ze=Xe.payload,typeof ze=="function"){ye=ze.call(Kt,ye,oe);break e}ye=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Xe.payload,oe=typeof ze=="function"?ze.call(Kt,ye,oe):ze,oe==null)break e;ye=x({},ye,oe);break e;case 2:Pa=!0}}oe=C.callback,oe!==null&&(t.flags|=64,ce&&(t.flags|=8192),ce=h.callbacks,ce===null?h.callbacks=[oe]:ce.push(oe))}else ce={lane:oe,tag:C.tag,payload:C.payload,callback:C.callback,next:null},he===null?(se=he=ce,L=ye):he=he.next=ce,T|=oe;if(C=C.next,C===null){if(C=h.shared.pending,C===null)break;ce=C,C=ce.next,ce.next=null,h.lastBaseUpdate=ce,h.shared.pending=null}}while(!0);he===null&&(L=ye),h.baseState=L,h.firstBaseUpdate=se,h.lastBaseUpdate=he,m===null&&(h.shared.lanes=0),Ha|=T,t.lanes=T,t.memoizedState=ye}}function Mg(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function kg(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Mg(a[t],r)}var Tl=F(null),Kc=F(0);function Vg(t,r){t=ta,xe(Kc,t),xe(Tl,r),ta=t|r.baseLanes}function cd(){xe(Kc,ta),xe(Tl,Tl.current)}function fd(){ta=Kc.current,me(Tl),me(Kc)}var li=F(null),Di=null;function ja(t){var r=t.alternate;xe(Tn,Tn.current&1),xe(li,t),Di===null&&(r===null||Tl.current!==null||r.memoizedState!==null)&&(Di=t)}function hd(t){xe(Tn,Tn.current),xe(li,t),Di===null&&(Di=t)}function Pg(t){t.tag===22?(xe(Tn,Tn.current),xe(li,t),Di===null&&(Di=t)):za()}function za(){xe(Tn,Tn.current),xe(li,li.current)}function ui(t){me(li),Di===t&&(Di=null),me(Tn)}var Tn=F(0);function Fc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||vp(a)||_p(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ys=0,ut=null,qt=null,Dn=null,Gc=!1,wl=!1,Bo=!1,Yc=0,wu=0,Sl=null,l1=0;function pn(){throw Error(s(321))}function dd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!cr(t[a],r[a]))return!1;return!0}function pd(t,r,a,l,h,m){return Ys=m,ut=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,le.H=t===null||t.memoizedState===null?_y:xd,Bo=!1,m=a(l,h),Bo=!1,wl&&(m=Ug(r,a,l,h)),Lg(t),m}function Lg(t){le.H=Cu;var r=qt!==null&&qt.next!==null;if(Ys=0,Dn=qt=ut=null,Gc=!1,wu=0,Sl=null,r)throw Error(s(300));t===null||Nn||(t=t.dependencies,t!==null&&Lc(t)&&(Nn=!0))}function Ug(t,r,a,l){ut=t;var h=0;do{if(wl&&(Sl=null),wu=0,wl=!1,25<=h)throw Error(s(301));if(h+=1,Dn=qt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}le.H=by,m=r(a,l)}while(wl);return m}function u1(){var t=le.H,r=t.useState()[0];return r=typeof r.then=="function"?Su(r):r,t=t.useState()[0],(qt!==null?qt.memoizedState:null)!==t&&(ut.flags|=1024),r}function md(){var t=Yc!==0;return Yc=0,t}function gd(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function yd(t){if(Gc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Gc=!1}Ys=0,Dn=qt=ut=null,wl=!1,wu=Yc=0,Sl=null}function Tr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?ut.memoizedState=Dn=t:Dn=Dn.next=t,Dn}function wn(){if(qt===null){var t=ut.alternate;t=t!==null?t.memoizedState:null}else t=qt.next;var r=Dn===null?ut.memoizedState:Dn.next;if(r!==null)Dn=r,qt=t;else{if(t===null)throw ut.alternate===null?Error(s(467)):Error(s(310));qt=t,t={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Dn===null?ut.memoizedState=Dn=t:Dn=Dn.next=t}return Dn}function Qc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Su(t){var r=wu;return wu+=1,Sl===null&&(Sl=[]),t=Ig(Sl,t,r),r=ut,(Dn===null?r.memoizedState:Dn.next)===null&&(r=r.alternate,le.H=r===null||r.memoizedState===null?_y:xd),t}function Xc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Su(t);if(t.$$typeof===Ve)return Zn(t)}throw Error(s(438,String(t)))}function vd(t){var r=null,a=ut.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=ut.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Qc(),ut.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=G;return r.index++,a}function Qs(t,r){return typeof r=="function"?r(t):r}function $c(t){var r=wn();return _d(r,qt,t)}function _d(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var T=h.next;h.next=m.next,m.next=T}r.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{r=h.next;var C=T=null,L=null,se=r,he=!1;do{var ye=se.lane&-536870913;if(ye!==se.lane?(_t&ye)===ye:(Ys&ye)===ye){var oe=se.revertLane;if(oe===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),ye===vl&&(he=!0);else if((Ys&oe)===oe){se=se.next,oe===vl&&(he=!0);continue}else ye={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},L===null?(C=L=ye,T=m):L=L.next=ye,ut.lanes|=oe,Ha|=oe;ye=se.action,Bo&&a(m,ye),m=se.hasEagerState?se.eagerState:a(m,ye)}else oe={lane:ye,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},L===null?(C=L=oe,T=m):L=L.next=oe,ut.lanes|=ye,Ha|=ye;se=se.next}while(se!==null&&se!==r);if(L===null?T=m:L.next=C,!cr(m,t.memoizedState)&&(Nn=!0,he&&(a=_l,a!==null)))throw a;t.memoizedState=m,t.baseState=T,t.baseQueue=L,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function bd(t){var r=wn(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=r.memoizedState;if(h!==null){a.pending=null;var T=h=h.next;do m=t(m,T.action),T=T.next;while(T!==h);cr(m,r.memoizedState)||(Nn=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,l]}function jg(t,r,a){var l=ut,h=wn(),m=Ct;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=r();var T=!cr((qt||h).memoizedState,a);if(T&&(h.memoizedState=a,Nn=!0),h=h.queue,wd(qg.bind(null,l,h,t),[t]),h.getSnapshot!==r||T||Dn!==null&&Dn.memoizedState.tag&1){if(l.flags|=2048,Al(9,{destroy:void 0},Bg.bind(null,l,h,a,r),null),Gt===null)throw Error(s(349));m||(Ys&127)!==0||zg(l,r,a)}return a}function zg(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=ut.updateQueue,r===null?(r=Qc(),ut.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Bg(t,r,a,l){r.value=a,r.getSnapshot=l,Hg(r)&&Kg(t)}function qg(t,r,a){return a(function(){Hg(r)&&Kg(t)})}function Hg(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!cr(t,a)}catch{return!0}}function Kg(t){var r=Zt(t,2);r!==null&&Hr(r,t,2)}function Ed(t){var r=Tr();if(typeof t=="function"){var a=t;if(t=a(),Bo){vn(!0);try{a()}finally{vn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:t},r}function Fg(t,r,a,l){return t.baseState=a,_d(t,qt,typeof l=="function"?l:Qs)}function c1(t,r,a,l,h){if(Zc(t))throw Error(s(485));if(t=r.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){m.listeners.push(T)}};le.T!==null?a(!0):m.isTransition=!1,l(m),a=r.pending,a===null?(m.next=r.pending=m,Gg(r,m)):(m.next=a.next,r.pending=a.next=m)}}function Gg(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var m=le.T,T={};le.T=T;try{var C=a(h,l),L=le.S;L!==null&&L(T,C),Yg(t,r,C)}catch(se){Td(t,r,se)}finally{m!==null&&T.types!==null&&(m.types=T.types),le.T=m}}else try{m=a(h,l),Yg(t,r,m)}catch(se){Td(t,r,se)}}function Yg(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Qg(t,r,l)},function(l){return Td(t,r,l)}):Qg(t,r,a)}function Qg(t,r,a){r.status="fulfilled",r.value=a,Xg(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Gg(t,a)))}function Td(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Xg(r),r=r.next;while(r!==l)}t.action=null}function Xg(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function $g(t,r){return r}function Jg(t,r){if(Ct){var a=Gt.formState;if(a!==null){e:{var l=ut;if(Ct){if(Xt){t:{for(var h=Xt,m=Oi;h.nodeType!==8;){if(!m){h=null;break t}if(h=Ni(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){Xt=Ni(h.nextSibling),l=h.data==="F!";break e}}ka(l)}l=!1}l&&(r=a[0])}}return a=Tr(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$g,lastRenderedState:r},a.queue=l,a=gy.bind(null,ut,l),l.dispatch=a,l=Ed(!1),m=Id.bind(null,ut,!1,l.queue),l=Tr(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=c1.bind(null,ut,h,m,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function Wg(t){var r=wn();return Zg(r,qt,t)}function Zg(t,r,a){if(r=_d(t,r,$g)[0],t=$c(Qs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Su(r)}catch(T){throw T===bl?zc:T}else l=r;r=wn();var h=r.queue,m=h.dispatch;return a!==r.memoizedState&&(ut.flags|=2048,Al(9,{destroy:void 0},f1.bind(null,h,a),null)),[l,m,t]}function f1(t,r){t.action=r}function ey(t){var r=wn(),a=qt;if(a!==null)return Zg(r,a,t);wn(),r=r.memoizedState,a=wn();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Al(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=ut.updateQueue,r===null&&(r=Qc(),ut.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function ty(){return wn().memoizedState}function Jc(t,r,a,l){var h=Tr();ut.flags|=t,h.memoizedState=Al(1|r,{destroy:void 0},a,l===void 0?null:l)}function Wc(t,r,a,l){var h=wn();l=l===void 0?null:l;var m=h.memoizedState.inst;qt!==null&&l!==null&&dd(l,qt.memoizedState.deps)?h.memoizedState=Al(r,m,a,l):(ut.flags|=t,h.memoizedState=Al(1|r,m,a,l))}function ny(t,r){Jc(8390656,8,t,r)}function wd(t,r){Wc(2048,8,t,r)}function h1(t){ut.flags|=4;var r=ut.updateQueue;if(r===null)r=Qc(),ut.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function ry(t){var r=wn().memoizedState;return h1({ref:r,nextImpl:t}),function(){if((Mt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function iy(t,r){return Wc(4,2,t,r)}function sy(t,r){return Wc(4,4,t,r)}function ay(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function oy(t,r,a){a=a!=null?a.concat([t]):null,Wc(4,4,ay.bind(null,r,t),a)}function Sd(){}function ly(t,r){var a=wn();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&dd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function uy(t,r){var a=wn();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&dd(r,l[1]))return l[0];if(l=t(),Bo){vn(!0);try{t()}finally{vn(!1)}}return a.memoizedState=[l,r],l}function Ad(t,r,a){return a===void 0||(Ys&1073741824)!==0&&(_t&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=cv(),ut.lanes|=t,Ha|=t,a)}function cy(t,r,a,l){return cr(a,r)?a:Tl.current!==null?(t=Ad(t,a,l),cr(t,r)||(Nn=!0),t):(Ys&42)===0||(Ys&1073741824)!==0&&(_t&261930)===0?(Nn=!0,t.memoizedState=a):(t=cv(),ut.lanes|=t,Ha|=t,r)}function fy(t,r,a,l,h){var m=_e.p;_e.p=m!==0&&8>m?m:8;var T=le.T,C={};le.T=C,Id(t,!1,r,a);try{var L=h(),se=le.S;if(se!==null&&se(C,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var he=o1(L,l);Au(t,r,he,hi(t))}else Au(t,r,l,hi(t))}catch(ye){Au(t,r,{then:function(){},status:"rejected",reason:ye},hi())}finally{_e.p=m,T!==null&&C.types!==null&&(T.types=C.types),le.T=T}}function d1(){}function Cd(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=hy(t).queue;fy(t,h,r,je,a===null?d1:function(){return dy(t),a(l)})}function hy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:je,baseState:je,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:je},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function dy(t){var r=hy(t);r.next===null&&(r=t.alternate.memoizedState),Au(t,r.next.queue,{},hi())}function Rd(){return Zn(qu)}function py(){return wn().memoizedState}function my(){return wn().memoizedState}function p1(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=hi();t=La(a);var l=Ua(r,t,a);l!==null&&(Hr(l,r,a),bu(l,r,a)),r={cache:nd()},t.payload=r;return}r=r.return}}function m1(t,r,a){var l=hi();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Zc(t)?yy(r,a):(a=In(t,r,a,l),a!==null&&(Hr(a,t,l),vy(a,r,l)))}function gy(t,r,a){var l=hi();Au(t,r,a,l)}function Au(t,r,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Zc(t))yy(r,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var T=r.lastRenderedState,C=m(T,a);if(h.hasEagerState=!0,h.eagerState=C,cr(C,T))return We(t,r,h,0),Gt===null&&Gn(),!1}catch{}finally{}if(a=In(t,r,h,l),a!==null)return Hr(a,t,l),vy(a,r,l),!0}return!1}function Id(t,r,a,l){if(l={lane:2,revertLane:ap(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Zc(t)){if(r)throw Error(s(479))}else r=In(t,a,l,2),r!==null&&Hr(r,t,2)}function Zc(t){var r=t.alternate;return t===ut||r!==null&&r===ut}function yy(t,r){wl=Gc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function vy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,kt(t,a)}}var Cu={readContext:Zn,use:Xc,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useLayoutEffect:pn,useInsertionEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useSyncExternalStore:pn,useId:pn,useHostTransitionStatus:pn,useFormState:pn,useActionState:pn,useOptimistic:pn,useMemoCache:pn,useCacheRefresh:pn};Cu.useEffectEvent=pn;var _y={readContext:Zn,use:Xc,useCallback:function(t,r){return Tr().memoizedState=[t,r===void 0?null:r],t},useContext:Zn,useEffect:ny,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Jc(4194308,4,ay.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Jc(4194308,4,t,r)},useInsertionEffect:function(t,r){Jc(4,2,t,r)},useMemo:function(t,r){var a=Tr();r=r===void 0?null:r;var l=t();if(Bo){vn(!0);try{t()}finally{vn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=Tr();if(a!==void 0){var h=a(r);if(Bo){vn(!0);try{a(r)}finally{vn(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=m1.bind(null,ut,t),[l.memoizedState,t]},useRef:function(t){var r=Tr();return t={current:t},r.memoizedState=t},useState:function(t){t=Ed(t);var r=t.queue,a=gy.bind(null,ut,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Sd,useDeferredValue:function(t,r){var a=Tr();return Ad(a,t,r)},useTransition:function(){var t=Ed(!1);return t=fy.bind(null,ut,t.queue,!0,!1),Tr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=ut,h=Tr();if(Ct){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),Gt===null)throw Error(s(349));(_t&127)!==0||zg(l,r,a)}h.memoizedState=a;var m={value:a,getSnapshot:r};return h.queue=m,ny(qg.bind(null,l,m,t),[t]),l.flags|=2048,Al(9,{destroy:void 0},Bg.bind(null,l,m,a,r),null),a},useId:function(){var t=Tr(),r=Gt.identifierPrefix;if(Ct){var a=ps,l=ds;a=(l&~(1<<32-Ne(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Yc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=l1++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Rd,useFormState:Jg,useActionState:Jg,useOptimistic:function(t){var r=Tr();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Id.bind(null,ut,!0,a),a.dispatch=r,[t,r]},useMemoCache:vd,useCacheRefresh:function(){return Tr().memoizedState=p1.bind(null,ut)},useEffectEvent:function(t){var r=Tr(),a={impl:t};return r.memoizedState=a,function(){if((Mt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},xd={readContext:Zn,use:Xc,useCallback:ly,useContext:Zn,useEffect:wd,useImperativeHandle:oy,useInsertionEffect:iy,useLayoutEffect:sy,useMemo:uy,useReducer:$c,useRef:ty,useState:function(){return $c(Qs)},useDebugValue:Sd,useDeferredValue:function(t,r){var a=wn();return cy(a,qt.memoizedState,t,r)},useTransition:function(){var t=$c(Qs)[0],r=wn().memoizedState;return[typeof t=="boolean"?t:Su(t),r]},useSyncExternalStore:jg,useId:py,useHostTransitionStatus:Rd,useFormState:Wg,useActionState:Wg,useOptimistic:function(t,r){var a=wn();return Fg(a,qt,t,r)},useMemoCache:vd,useCacheRefresh:my};xd.useEffectEvent=ry;var by={readContext:Zn,use:Xc,useCallback:ly,useContext:Zn,useEffect:wd,useImperativeHandle:oy,useInsertionEffect:iy,useLayoutEffect:sy,useMemo:uy,useReducer:bd,useRef:ty,useState:function(){return bd(Qs)},useDebugValue:Sd,useDeferredValue:function(t,r){var a=wn();return qt===null?Ad(a,t,r):cy(a,qt.memoizedState,t,r)},useTransition:function(){var t=bd(Qs)[0],r=wn().memoizedState;return[typeof t=="boolean"?t:Su(t),r]},useSyncExternalStore:jg,useId:py,useHostTransitionStatus:Rd,useFormState:ey,useActionState:ey,useOptimistic:function(t,r){var a=wn();return qt!==null?Fg(a,qt,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:vd,useCacheRefresh:my};by.useEffectEvent=ry;function Od(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:x({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Dd={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=hi(),h=La(l);h.payload=r,a!=null&&(h.callback=a),r=Ua(t,h,l),r!==null&&(Hr(r,t,l),bu(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=hi(),h=La(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Ua(t,h,l),r!==null&&(Hr(r,t,l),bu(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=hi(),l=La(a);l.tag=2,r!=null&&(l.callback=r),r=Ua(t,l,a),r!==null&&(Hr(r,t,a),bu(r,t,a))}};function Ey(t,r,a,l,h,m,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,T):r.prototype&&r.prototype.isPureReactComponent?!f(a,l)||!f(h,m):!0}function Ty(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&Dd.enqueueReplaceState(r,r.state,null)}function qo(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=x({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function wy(t){Pe(t)}function Sy(t){console.error(t)}function Ay(t){Pe(t)}function ef(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Cy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Nd(t,r,a){return a=La(a),a.tag=3,a.payload={element:null},a.callback=function(){ef(t,r)},a}function Ry(t){return t=La(t),t.tag=3,t}function Iy(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){Cy(r,a,l)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Cy(r,a,l),typeof h!="function"&&(Ka===null?Ka=new Set([this]):Ka.add(this));var C=l.stack;this.componentDidCatch(l.value,{componentStack:C!==null?C:""})})}function g1(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&yl(r,a,h,!0),a=li.current,a!==null){switch(a.tag){case 31:case 13:return Di===null?df():a.alternate===null&&mn===0&&(mn=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Bc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),rp(t,l,h)),!1;case 22:return a.flags|=65536,l===Bc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),rp(t,l,h)),!1}throw Error(s(435,a.tag))}return rp(t,l,h),df(),!1}if(Ct)return r=li.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Jh&&(t=Error(s(422),{cause:l}),mu(Ri(t,a)))):(l!==Jh&&(r=Error(s(423),{cause:l}),mu(Ri(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Ri(l,a),h=Nd(t.stateNode,l,h),ld(t,h),mn!==4&&(mn=2)),!1;var m=Error(s(520),{cause:l});if(m=Ri(m,a),ku===null?ku=[m]:ku.push(m),mn!==4&&(mn=2),r===null)return!0;l=Ri(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Nd(a.stateNode,l,t),ld(a,t),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ka===null||!Ka.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Ry(h),Iy(h,t,a,l),ld(a,h),!1}a=a.return}while(a!==null);return!1}var Md=Error(s(461)),Nn=!1;function er(t,r,a,l){r.child=t===null?Ng(r,null,a,l):zo(r,t.child,a,l)}function xy(t,r,a,l,h){a=a.render;var m=r.ref;if("ref"in l){var T={};for(var C in l)C!=="ref"&&(T[C]=l[C])}else T=l;return Po(r),l=pd(t,r,a,T,m,h),C=md(),t!==null&&!Nn?(gd(t,r,h),Xs(t,r,h)):(Ct&&C&&Xh(r),r.flags|=1,er(t,r,l,h),r.child)}function Oy(t,r,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!Gh(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,Dy(t,r,m,l,h)):(t=Vc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!Bd(t,h)){var T=m.memoizedProps;if(a=a.compare,a=a!==null?a:f,a(T,l)&&t.ref===r.ref)return Xs(t,r,h)}return r.flags|=1,t=Hs(m,l),t.ref=r.ref,t.return=r,r.child=t}function Dy(t,r,a,l,h){if(t!==null){var m=t.memoizedProps;if(f(m,l)&&t.ref===r.ref)if(Nn=!1,r.pendingProps=l=m,Bd(t,h))(t.flags&131072)!==0&&(Nn=!0);else return r.lanes=t.lanes,Xs(t,r,h)}return kd(t,r,a,l,h)}function Ny(t,r,a,l){var h=l.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=r.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~m}else l=0,r.child=null;return My(t,r,m,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&jc(r,m!==null?m.cachePool:null),m!==null?Vg(r,m):cd(),Pg(r);else return l=r.lanes=536870912,My(t,r,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(jc(r,m.cachePool),Vg(r,m),za(),r.memoizedState=null):(t!==null&&jc(r,null),cd(),za());return er(t,r,h,a),r.child}function Ru(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function My(t,r,a,l,h){var m=id();return m=m===null?null:{parent:On._currentValue,pool:m},r.memoizedState={baseLanes:a,cachePool:m},t!==null&&jc(r,null),cd(),Pg(r),t!==null&&yl(t,r,l,!0),r.childLanes=h,null}function tf(t,r){return r=rf({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function ky(t,r,a){return zo(r,t.child,null,a),t=tf(r,r.pendingProps),t.flags|=2,ui(r),r.memoizedState=null,t}function y1(t,r,a){var l=r.pendingProps,h=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Ct){if(l.mode==="hidden")return t=tf(r,l),r.lanes=536870912,Ru(null,t);if(hd(r),(t=Xt)?(t=Gv(t,Oi),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Na!==null?{id:ds,overflow:ps}:null,retryLane:536870912,hydrationErrors:null},a=yg(t),a.return=r,r.child=a,Wn=r,Xt=null)):t=null,t===null)throw ka(r);return r.lanes=536870912,null}return tf(r,l)}var m=t.memoizedState;if(m!==null){var T=m.dehydrated;if(hd(r),h)if(r.flags&256)r.flags&=-257,r=ky(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(s(558));else if(Nn||yl(t,r,a,!1),h=(a&t.childLanes)!==0,Nn||h){if(l=Gt,l!==null&&(T=Wt(l,a),T!==0&&T!==m.retryLane))throw m.retryLane=T,Zt(t,T),Hr(l,t,T),Md;df(),r=ky(t,r,a)}else t=m.treeContext,Xt=Ni(T.nextSibling),Wn=r,Ct=!0,Ma=null,Oi=!1,t!==null&&bg(r,t),r=tf(r,l),r.flags|=4096;return r}return t=Hs(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function nf(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function kd(t,r,a,l,h){return Po(r),a=pd(t,r,a,l,void 0,h),l=md(),t!==null&&!Nn?(gd(t,r,h),Xs(t,r,h)):(Ct&&l&&Xh(r),r.flags|=1,er(t,r,a,h),r.child)}function Vy(t,r,a,l,h,m){return Po(r),r.updateQueue=null,a=Ug(r,l,a,h),Lg(t),l=md(),t!==null&&!Nn?(gd(t,r,m),Xs(t,r,m)):(Ct&&l&&Xh(r),r.flags|=1,er(t,r,a,m),r.child)}function Py(t,r,a,l,h){if(Po(r),r.stateNode===null){var m=Ur,T=a.contextType;typeof T=="object"&&T!==null&&(m=Zn(T)),m=new a(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Dd,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},ad(r),T=a.contextType,m.context=typeof T=="object"&&T!==null?Zn(T):Ur,m.state=r.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(Od(r,a,T,l),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(T=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),T!==m.state&&Dd.enqueueReplaceState(m,m.state,null),Tu(r,l,m,h),Eu(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var C=r.memoizedProps,L=qo(a,C);m.props=L;var se=m.context,he=a.contextType;T=Ur,typeof he=="object"&&he!==null&&(T=Zn(he));var ye=a.getDerivedStateFromProps;he=typeof ye=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=r.pendingProps!==C,he||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||se!==T)&&Ty(r,m,l,T),Pa=!1;var oe=r.memoizedState;m.state=oe,Tu(r,l,m,h),Eu(),se=r.memoizedState,C||oe!==se||Pa?(typeof ye=="function"&&(Od(r,a,ye,l),se=r.memoizedState),(L=Pa||Ey(r,a,L,l,oe,se,T))?(he||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=se),m.props=l,m.state=se,m.context=T,l=L):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,od(t,r),T=r.memoizedProps,he=qo(a,T),m.props=he,ye=r.pendingProps,oe=m.context,se=a.contextType,L=Ur,typeof se=="object"&&se!==null&&(L=Zn(se)),C=a.getDerivedStateFromProps,(se=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T!==ye||oe!==L)&&Ty(r,m,l,L),Pa=!1,oe=r.memoizedState,m.state=oe,Tu(r,l,m,h),Eu();var ce=r.memoizedState;T!==ye||oe!==ce||Pa||t!==null&&t.dependencies!==null&&Lc(t.dependencies)?(typeof C=="function"&&(Od(r,a,C,l),ce=r.memoizedState),(he=Pa||Ey(r,a,he,l,oe,ce,L)||t!==null&&t.dependencies!==null&&Lc(t.dependencies))?(se||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ce,L),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ce,L)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||T===t.memoizedProps&&oe===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&oe===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=ce),m.props=l,m.state=ce,m.context=L,l=he):(typeof m.componentDidUpdate!="function"||T===t.memoizedProps&&oe===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&oe===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,nf(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=zo(r,t.child,null,h),r.child=zo(r,null,a,h)):er(t,r,a,h),r.memoizedState=m.state,t=r.child):t=Xs(t,r,h),t}function Ly(t,r,a,l){return ko(),r.flags|=256,er(t,r,a,l),r.child}var Vd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pd(t){return{baseLanes:t,cachePool:Cg()}}function Ld(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=fi),t}function Uy(t,r,a){var l=r.pendingProps,h=!1,m=(r.flags&128)!==0,T;if((T=m)||(T=t!==null&&t.memoizedState===null?!1:(Tn.current&2)!==0),T&&(h=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,t===null){if(Ct){if(h?ja(r):za(),(t=Xt)?(t=Gv(t,Oi),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Na!==null?{id:ds,overflow:ps}:null,retryLane:536870912,hydrationErrors:null},a=yg(t),a.return=r,r.child=a,Wn=r,Xt=null)):t=null,t===null)throw ka(r);return _p(t)?r.lanes=32:r.lanes=536870912,null}var C=l.children;return l=l.fallback,h?(za(),h=r.mode,C=rf({mode:"hidden",children:C},h),l=Mo(l,h,a,null),C.return=r,l.return=r,C.sibling=l,r.child=C,l=r.child,l.memoizedState=Pd(a),l.childLanes=Ld(t,T,a),r.memoizedState=Vd,Ru(null,l)):(ja(r),Ud(r,C))}var L=t.memoizedState;if(L!==null&&(C=L.dehydrated,C!==null)){if(m)r.flags&256?(ja(r),r.flags&=-257,r=jd(t,r,a)):r.memoizedState!==null?(za(),r.child=t.child,r.flags|=128,r=null):(za(),C=l.fallback,h=r.mode,l=rf({mode:"visible",children:l.children},h),C=Mo(C,h,a,null),C.flags|=2,l.return=r,C.return=r,l.sibling=C,r.child=l,zo(r,t.child,null,a),l=r.child,l.memoizedState=Pd(a),l.childLanes=Ld(t,T,a),r.memoizedState=Vd,r=Ru(null,l));else if(ja(r),_p(C)){if(T=C.nextSibling&&C.nextSibling.dataset,T)var se=T.dgst;T=se,l=Error(s(419)),l.stack="",l.digest=T,mu({value:l,source:null,stack:null}),r=jd(t,r,a)}else if(Nn||yl(t,r,a,!1),T=(a&t.childLanes)!==0,Nn||T){if(T=Gt,T!==null&&(l=Wt(T,a),l!==0&&l!==L.retryLane))throw L.retryLane=l,Zt(t,l),Hr(T,t,l),Md;vp(C)||df(),r=jd(t,r,a)}else vp(C)?(r.flags|=192,r.child=t.child,r=null):(t=L.treeContext,Xt=Ni(C.nextSibling),Wn=r,Ct=!0,Ma=null,Oi=!1,t!==null&&bg(r,t),r=Ud(r,l.children),r.flags|=4096);return r}return h?(za(),C=l.fallback,h=r.mode,L=t.child,se=L.sibling,l=Hs(L,{mode:"hidden",children:l.children}),l.subtreeFlags=L.subtreeFlags&65011712,se!==null?C=Hs(se,C):(C=Mo(C,h,a,null),C.flags|=2),C.return=r,l.return=r,l.sibling=C,r.child=l,Ru(null,l),l=r.child,C=t.child.memoizedState,C===null?C=Pd(a):(h=C.cachePool,h!==null?(L=On._currentValue,h=h.parent!==L?{parent:L,pool:L}:h):h=Cg(),C={baseLanes:C.baseLanes|a,cachePool:h}),l.memoizedState=C,l.childLanes=Ld(t,T,a),r.memoizedState=Vd,Ru(t.child,l)):(ja(r),a=t.child,t=a.sibling,a=Hs(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(T=r.deletions,T===null?(r.deletions=[t],r.flags|=16):T.push(t)),r.child=a,r.memoizedState=null,a)}function Ud(t,r){return r=rf({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function rf(t,r){return t=oi(22,t,null,r),t.lanes=0,t}function jd(t,r,a){return zo(r,t.child,null,a),t=Ud(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function jy(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),ed(t.return,r,a)}function zd(t,r,a,l,h,m){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:m}:(T.isBackwards=r,T.rendering=null,T.renderingStartTime=0,T.last=l,T.tail=a,T.tailMode=h,T.treeForkCount=m)}function zy(t,r,a){var l=r.pendingProps,h=l.revealOrder,m=l.tail;l=l.children;var T=Tn.current,C=(T&2)!==0;if(C?(T=T&1|2,r.flags|=128):T&=1,xe(Tn,T),er(t,r,l,a),l=Ct?pu:0,!C&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jy(t,a,r);else if(t.tag===19)jy(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&Fc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),zd(r,!1,h,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Fc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}zd(r,!0,a,null,m,l);break;case"together":zd(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function Xs(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Ha|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(yl(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=Hs(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Hs(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Bd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Lc(t)))}function v1(t,r,a){switch(r.tag){case 3:gn(r,r.stateNode.containerInfo),Va(r,On,t.memoizedState.cache),ko();break;case 27:case 5:ns(r);break;case 4:gn(r,r.stateNode.containerInfo);break;case 10:Va(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,hd(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(ja(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Uy(t,r,a):(ja(r),t=Xs(t,r,a),t!==null?t.sibling:null);ja(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(yl(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return zy(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),xe(Tn,Tn.current),l)break;return null;case 22:return r.lanes=0,Ny(t,r,a,r.pendingProps);case 24:Va(r,On,t.memoizedState.cache)}return Xs(t,r,a)}function By(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Nn=!0;else{if(!Bd(t,a)&&(r.flags&128)===0)return Nn=!1,v1(t,r,a);Nn=(t.flags&131072)!==0}else Nn=!1,Ct&&(r.flags&1048576)!==0&&_g(r,pu,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=Uo(r.elementType),r.type=t,typeof t=="function")Gh(t)?(l=qo(t,l),r.tag=1,r=Py(null,r,t,l,a)):(r.tag=0,r=kd(null,r,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===rt){r.tag=11,r=xy(null,r,t,l,a);break e}else if(h===k){r.tag=14,r=Oy(null,r,t,l,a);break e}}throw r=Bt(t)||t,Error(s(306,r,""))}}return r;case 0:return kd(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=qo(l,r.pendingProps),Py(t,r,l,h,a);case 3:e:{if(gn(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var m=r.memoizedState;h=m.element,od(t,r),Tu(r,l,null,a);var T=r.memoizedState;if(l=T.cache,Va(r,On,l),l!==m.cache&&td(r,[On],a,!0),Eu(),l=T.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Ly(t,r,l,a);break e}else if(l!==h){h=Ri(Error(s(424)),r),mu(h),r=Ly(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Xt=Ni(t.firstChild),Wn=r,Ct=!0,Ma=null,Oi=!0,a=Ng(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ko(),l===h){r=Xs(t,r,a);break e}er(t,r,l,a)}r=r.child}return r;case 26:return nf(t,r),t===null?(a=Wv(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ct||(a=r.type,t=r.pendingProps,l=bf(Je.current).createElement(a),l[Pt]=r,l[Yt]=t,tr(l,a,t),sn(l),r.stateNode=l):r.memoizedState=Wv(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return ns(r),t===null&&Ct&&(l=r.stateNode=Xv(r.type,r.pendingProps,Je.current),Wn=r,Oi=!0,h=Xt,Qa(r.type)?(bp=h,Xt=Ni(l.firstChild)):Xt=h),er(t,r,r.pendingProps.children,a),nf(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Ct&&((h=l=Xt)&&(l=Q1(l,r.type,r.pendingProps,Oi),l!==null?(r.stateNode=l,Wn=r,Xt=Ni(l.firstChild),Oi=!1,h=!0):h=!1),h||ka(r)),ns(r),h=r.type,m=r.pendingProps,T=t!==null?t.memoizedProps:null,l=m.children,mp(h,m)?l=null:T!==null&&mp(h,T)&&(r.flags|=32),r.memoizedState!==null&&(h=pd(t,r,u1,null,null,a),qu._currentValue=h),nf(t,r),er(t,r,l,a),r.child;case 6:return t===null&&Ct&&((t=a=Xt)&&(a=X1(a,r.pendingProps,Oi),a!==null?(r.stateNode=a,Wn=r,Xt=null,t=!0):t=!1),t||ka(r)),null;case 13:return Uy(t,r,a);case 4:return gn(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=zo(r,null,l,a):er(t,r,l,a),r.child;case 11:return xy(t,r,r.type,r.pendingProps,a);case 7:return er(t,r,r.pendingProps,a),r.child;case 8:return er(t,r,r.pendingProps.children,a),r.child;case 12:return er(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Va(r,r.type,l.value),er(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,Po(r),h=Zn(h),l=l(h),r.flags|=1,er(t,r,l,a),r.child;case 14:return Oy(t,r,r.type,r.pendingProps,a);case 15:return Dy(t,r,r.type,r.pendingProps,a);case 19:return zy(t,r,a);case 31:return y1(t,r,a);case 22:return Ny(t,r,a,r.pendingProps);case 24:return Po(r),l=Zn(On),t===null?(h=id(),h===null&&(h=Gt,m=nd(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),r.memoizedState={parent:l,cache:h},ad(r),Va(r,On,h)):((t.lanes&a)!==0&&(od(t,r),Tu(r,null,null,a),Eu()),h=t.memoizedState,m=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Va(r,On,l)):(l=m.cache,Va(r,On,l),l!==h.cache&&td(r,[On],a,!0))),er(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function $s(t){t.flags|=4}function qd(t,r,a,l,h){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(pv())t.flags|=8192;else throw jo=Bc,sd}else t.flags&=-16777217}function qy(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!r_(r))if(pv())t.flags|=8192;else throw jo=Bc,sd}function sf(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?ll():536870912,t.lanes|=r,xl|=r)}function Iu(t,r){if(!Ct)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function $t(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function _1(t,r,a){var l=r.pendingProps;switch($h(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(r),null;case 1:return $t(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Gs(On),Me(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(gl(r)?$s(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Wh())),$t(r),null;case 26:var h=r.type,m=r.memoizedState;return t===null?($s(r),m!==null?($t(r),qy(r,m)):($t(r),qd(r,h,null,l,a))):m?m!==t.memoizedState?($s(r),$t(r),qy(r,m)):($t(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&$s(r),$t(r),qd(r,h,t,l,a)),null;case 27:if(zi(r),a=Je.current,h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&$s(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return $t(r),null}t=Le.current,gl(r)?Eg(r):(t=Xv(h,l,a),r.stateNode=t,$s(r))}return $t(r),null;case 5:if(zi(r),h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&$s(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return $t(r),null}if(m=Le.current,gl(r))Eg(r);else{var T=bf(Je.current);switch(m){case 1:m=T.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=T.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=T.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=T.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=T.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?T.createElement("select",{is:l.is}):T.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?T.createElement(h,{is:l.is}):T.createElement(h)}}m[Pt]=r,m[Yt]=l;e:for(T=r.child;T!==null;){if(T.tag===5||T.tag===6)m.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===r)break e;for(;T.sibling===null;){if(T.return===null||T.return===r)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}r.stateNode=m;e:switch(tr(m,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&$s(r)}}return $t(r),qd(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&$s(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=Je.current,gl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=Wn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Pt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Uv(t.nodeValue,a)),t||ka(r,!0)}else t=bf(t).createTextNode(l),t[Pt]=r,r.stateNode=t}return $t(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=gl(r),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Pt]=r}else ko(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;$t(r),t=!1}else a=Wh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(ui(r),r):(ui(r),null);if((r.flags&128)!==0)throw Error(s(558))}return $t(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=gl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Pt]=r}else ko(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;$t(r),h=!1}else h=Wh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(ui(r),r):(ui(r),null)}return ui(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),sf(r,r.updateQueue),$t(r),null);case 4:return Me(),t===null&&cp(r.stateNode.containerInfo),$t(r),null;case 10:return Gs(r.type),$t(r),null;case 19:if(me(Tn),l=r.memoizedState,l===null)return $t(r),null;if(h=(r.flags&128)!==0,m=l.rendering,m===null)if(h)Iu(l,!1);else{if(mn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=Fc(t),m!==null){for(r.flags|=128,Iu(l,!1),t=m.updateQueue,r.updateQueue=t,sf(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)gg(a,t),a=a.sibling;return xe(Tn,Tn.current&1|2),Ct&&Ks(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&qn()>cf&&(r.flags|=128,h=!0,Iu(l,!1),r.lanes=4194304)}else{if(!h)if(t=Fc(m),t!==null){if(r.flags|=128,h=!0,t=t.updateQueue,r.updateQueue=t,sf(r,t),Iu(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Ct)return $t(r),null}else 2*qn()-l.renderingStartTime>cf&&a!==536870912&&(r.flags|=128,h=!0,Iu(l,!1),r.lanes=4194304);l.isBackwards?(m.sibling=r.child,r.child=m):(t=l.last,t!==null?t.sibling=m:r.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=qn(),t.sibling=null,a=Tn.current,xe(Tn,h?a&1|2:a&1),Ct&&Ks(r,l.treeForkCount),t):($t(r),null);case 22:case 23:return ui(r),fd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&($t(r),r.subtreeFlags&6&&(r.flags|=8192)):$t(r),a=r.updateQueue,a!==null&&sf(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&me(Lo),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Gs(On),$t(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function b1(t,r){switch($h(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Gs(On),Me(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return zi(r),null;case 31:if(r.memoizedState!==null){if(ui(r),r.alternate===null)throw Error(s(340));ko()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(ui(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));ko()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return me(Tn),null;case 4:return Me(),null;case 10:return Gs(r.type),null;case 22:case 23:return ui(r),fd(),t!==null&&me(Lo),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Gs(On),null;case 25:return null;default:return null}}function Hy(t,r){switch($h(r),r.tag){case 3:Gs(On),Me();break;case 26:case 27:case 5:zi(r);break;case 4:Me();break;case 31:r.memoizedState!==null&&ui(r);break;case 13:ui(r);break;case 19:me(Tn);break;case 10:Gs(r.type);break;case 22:case 23:ui(r),fd(),t!==null&&me(Lo);break;case 24:Gs(On)}}function xu(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,T=a.inst;l=m(),T.destroy=l}a=a.next}while(a!==h)}}catch(C){zt(r,r.return,C)}}function Ba(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var T=l.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,h=r;var L=a,se=C;try{se()}catch(he){zt(h,L,he)}}}l=l.next}while(l!==m)}}catch(he){zt(r,r.return,he)}}function Ky(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{kg(r,a)}catch(l){zt(t,t.return,l)}}}function Fy(t,r,a){a.props=qo(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){zt(t,r,l)}}function Ou(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){zt(t,r,h)}}function ms(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){zt(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){zt(t,r,h)}else a.current=null}function Gy(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){zt(t,t.return,h)}}function Hd(t,r,a){try{var l=t.stateNode;q1(l,t.type,a,r),l[Yt]=r}catch(h){zt(t,t.return,h)}}function Yy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Qa(t.type)||t.tag===4}function Kd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Yy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Qa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fd(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=ur));else if(l!==4&&(l===27&&Qa(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Fd(t,r,a),t=t.sibling;t!==null;)Fd(t,r,a),t=t.sibling}function af(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Qa(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(af(t,r,a),t=t.sibling;t!==null;)af(t,r,a),t=t.sibling}function Qy(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);tr(r,l,a),r[Pt]=t,r[Yt]=a}catch(m){zt(t,t.return,m)}}var Js=!1,Mn=!1,Gd=!1,Xy=typeof WeakSet=="function"?WeakSet:Set,Yn=null;function E1(t,r){if(t=t.containerInfo,dp=Rf,t=S(t),A(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var T=0,C=-1,L=-1,se=0,he=0,ye=t,oe=null;t:for(;;){for(var ce;ye!==a||h!==0&&ye.nodeType!==3||(C=T+h),ye!==m||l!==0&&ye.nodeType!==3||(L=T+l),ye.nodeType===3&&(T+=ye.nodeValue.length),(ce=ye.firstChild)!==null;)oe=ye,ye=ce;for(;;){if(ye===t)break t;if(oe===a&&++se===h&&(C=T),oe===m&&++he===l&&(L=T),(ce=ye.nextSibling)!==null)break;ye=oe,oe=ye.parentNode}ye=ce}a=C===-1||L===-1?null:{start:C,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(pp={focusedElem:t,selectionRange:a},Rf=!1,Yn=r;Yn!==null;)if(r=Yn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Yn=t;else for(;Yn!==null;){switch(r=Yn,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=r,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var ze=qo(a.type,h);t=l.getSnapshotBeforeUpdate(ze,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Xe){zt(a,a.return,Xe)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)yp(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":yp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Yn=t;break}Yn=r.return}}function $y(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Zs(t,a),l&4&&xu(5,a);break;case 1:if(Zs(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(T){zt(a,a.return,T)}else{var h=qo(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(T){zt(a,a.return,T)}}l&64&&Ky(a),l&512&&Ou(a,a.return);break;case 3:if(Zs(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{kg(t,r)}catch(T){zt(a,a.return,T)}}break;case 27:r===null&&l&4&&Qy(a);case 26:case 5:Zs(t,a),r===null&&l&4&&Gy(a),l&512&&Ou(a,a.return);break;case 12:Zs(t,a);break;case 31:Zs(t,a),l&4&&Zy(t,a);break;case 13:Zs(t,a),l&4&&ev(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=O1.bind(null,a),$1(t,a))));break;case 22:if(l=a.memoizedState!==null||Js,!l){r=r!==null&&r.memoizedState!==null||Mn,h=Js;var m=Mn;Js=l,(Mn=r)&&!m?ea(t,a,(a.subtreeFlags&8772)!==0):Zs(t,a),Js=h,Mn=m}break;case 30:break;default:Zs(t,a)}}function Jy(t){var r=t.alternate;r!==null&&(t.alternate=null,Jy(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Vs(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var en=null,jr=!1;function Ws(t,r,a){for(a=a.child;a!==null;)Wy(t,r,a),a=a.sibling}function Wy(t,r,a){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(ar,a)}catch{}switch(a.tag){case 26:Mn||ms(a,r),Ws(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Mn||ms(a,r);var l=en,h=jr;Qa(a.type)&&(en=a.stateNode,jr=!1),Ws(t,r,a),ju(a.stateNode),en=l,jr=h;break;case 5:Mn||ms(a,r);case 6:if(l=en,h=jr,en=null,Ws(t,r,a),en=l,jr=h,en!==null)if(jr)try{(en.nodeType===9?en.body:en.nodeName==="HTML"?en.ownerDocument.body:en).removeChild(a.stateNode)}catch(m){zt(a,r,m)}else try{en.removeChild(a.stateNode)}catch(m){zt(a,r,m)}break;case 18:en!==null&&(jr?(t=en,Kv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ll(t)):Kv(en,a.stateNode));break;case 4:l=en,h=jr,en=a.stateNode.containerInfo,jr=!0,Ws(t,r,a),en=l,jr=h;break;case 0:case 11:case 14:case 15:Ba(2,a,r),Mn||Ba(4,a,r),Ws(t,r,a);break;case 1:Mn||(ms(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Fy(a,r,l)),Ws(t,r,a);break;case 21:Ws(t,r,a);break;case 22:Mn=(l=Mn)||a.memoizedState!==null,Ws(t,r,a),Mn=l;break;default:Ws(t,r,a)}}function Zy(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ll(t)}catch(a){zt(r,r.return,a)}}}function ev(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ll(t)}catch(a){zt(r,r.return,a)}}function T1(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Xy),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Xy),r;default:throw Error(s(435,t.tag))}}function of(t,r){var a=T1(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var h=D1.bind(null,t,l);l.then(h,h)}})}function zr(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,T=r,C=T;e:for(;C!==null;){switch(C.tag){case 27:if(Qa(C.type)){en=C.stateNode,jr=!1;break e}break;case 5:en=C.stateNode,jr=!1;break e;case 3:case 4:en=C.stateNode.containerInfo,jr=!0;break e}C=C.return}if(en===null)throw Error(s(160));Wy(m,T,h),en=null,jr=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)tv(r,t),r=r.sibling}var $i=null;function tv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:zr(r,t),Br(t),l&4&&(Ba(3,t,t.return),xu(3,t),Ba(5,t,t.return));break;case 1:zr(r,t),Br(t),l&512&&(Mn||a===null||ms(a,a.return)),l&64&&Js&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=$i;if(zr(r,t),Br(t),l&512&&(Mn||a===null||ms(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Hn]||m[Pt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),tr(m,l,a),m[Pt]=t,sn(m),l=m;break e;case"link":var T=t_("link","href",h).get(l+(a.href||""));if(T){for(var C=0;C<T.length;C++)if(m=T[C],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(C,1);break t}}m=h.createElement(l),tr(m,l,a),h.head.appendChild(m);break;case"meta":if(T=t_("meta","content",h).get(l+(a.content||""))){for(C=0;C<T.length;C++)if(m=T[C],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(C,1);break t}}m=h.createElement(l),tr(m,l,a),h.head.appendChild(m);break;default:throw Error(s(468,l))}m[Pt]=t,sn(m),l=m}t.stateNode=l}else n_(h,t.type,t.stateNode);else t.stateNode=e_(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?n_(h,t.type,t.stateNode):e_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Hd(t,t.memoizedProps,a.memoizedProps)}break;case 27:zr(r,t),Br(t),l&512&&(Mn||a===null||ms(a,a.return)),a!==null&&l&4&&Hd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(zr(r,t),Br(t),l&512&&(Mn||a===null||ms(a,a.return)),t.flags&32){h=t.stateNode;try{Jn(h,"")}catch(ze){zt(t,t.return,ze)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Hd(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Gd=!0);break;case 6:if(zr(r,t),Br(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ze){zt(t,t.return,ze)}}break;case 3:if(wf=null,h=$i,$i=Ef(r.containerInfo),zr(r,t),$i=h,Br(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ll(r.containerInfo)}catch(ze){zt(t,t.return,ze)}Gd&&(Gd=!1,nv(t));break;case 4:l=$i,$i=Ef(t.stateNode.containerInfo),zr(r,t),Br(t),$i=l;break;case 12:zr(r,t),Br(t);break;case 31:zr(r,t),Br(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,of(t,l)));break;case 13:zr(r,t),Br(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uf=qn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,of(t,l)));break;case 22:h=t.memoizedState!==null;var L=a!==null&&a.memoizedState!==null,se=Js,he=Mn;if(Js=se||h,Mn=he||L,zr(r,t),Mn=he,Js=se,Br(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||L||Js||Mn||Ho(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){L=a=r;try{if(m=L.stateNode,h)T=m.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{C=L.stateNode;var ye=L.memoizedProps.style,oe=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;C.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(ze){zt(L,L.return,ze)}}}else if(r.tag===6){if(a===null){L=r;try{L.stateNode.nodeValue=h?"":L.memoizedProps}catch(ze){zt(L,L.return,ze)}}}else if(r.tag===18){if(a===null){L=r;try{var ce=L.stateNode;h?Fv(ce,!0):Fv(L.stateNode,!1)}catch(ze){zt(L,L.return,ze)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,of(t,a))));break;case 19:zr(r,t),Br(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,of(t,l)));break;case 30:break;case 21:break;default:zr(r,t),Br(t)}}function Br(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Yy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,m=Kd(t);af(t,m,h);break;case 5:var T=a.stateNode;a.flags&32&&(Jn(T,""),a.flags&=-33);var C=Kd(t);af(t,C,T);break;case 3:case 4:var L=a.stateNode.containerInfo,se=Kd(t);Fd(t,se,L);break;default:throw Error(s(161))}}catch(he){zt(t,t.return,he)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function nv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;nv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Zs(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)$y(t,r.alternate,r),r=r.sibling}function Ho(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Ba(4,r,r.return),Ho(r);break;case 1:ms(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Fy(r,r.return,a),Ho(r);break;case 27:ju(r.stateNode);case 26:case 5:ms(r,r.return),Ho(r);break;case 22:r.memoizedState===null&&Ho(r);break;case 30:Ho(r);break;default:Ho(r)}t=t.sibling}}function ea(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,m=r,T=m.flags;switch(m.tag){case 0:case 11:case 15:ea(h,m,a),xu(4,m);break;case 1:if(ea(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(se){zt(l,l.return,se)}if(l=m,h=l.updateQueue,h!==null){var C=l.stateNode;try{var L=h.shared.hiddenCallbacks;if(L!==null)for(h.shared.hiddenCallbacks=null,h=0;h<L.length;h++)Mg(L[h],C)}catch(se){zt(l,l.return,se)}}a&&T&64&&Ky(m),Ou(m,m.return);break;case 27:Qy(m);case 26:case 5:ea(h,m,a),a&&l===null&&T&4&&Gy(m),Ou(m,m.return);break;case 12:ea(h,m,a);break;case 31:ea(h,m,a),a&&T&4&&Zy(h,m);break;case 13:ea(h,m,a),a&&T&4&&ev(h,m);break;case 22:m.memoizedState===null&&ea(h,m,a),Ou(m,m.return);break;case 30:break;default:ea(h,m,a)}r=r.sibling}}function Yd(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&gu(a))}function Qd(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&gu(t))}function Ji(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)rv(t,r,a,l),r=r.sibling}function rv(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Ji(t,r,a,l),h&2048&&xu(9,r);break;case 1:Ji(t,r,a,l);break;case 3:Ji(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&gu(t)));break;case 12:if(h&2048){Ji(t,r,a,l),t=r.stateNode;try{var m=r.memoizedProps,T=m.id,C=m.onPostCommit;typeof C=="function"&&C(T,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(L){zt(r,r.return,L)}}else Ji(t,r,a,l);break;case 31:Ji(t,r,a,l);break;case 13:Ji(t,r,a,l);break;case 23:break;case 22:m=r.stateNode,T=r.alternate,r.memoizedState!==null?m._visibility&2?Ji(t,r,a,l):Du(t,r):m._visibility&2?Ji(t,r,a,l):(m._visibility|=2,Cl(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),h&2048&&Yd(T,r);break;case 24:Ji(t,r,a,l),h&2048&&Qd(r.alternate,r);break;default:Ji(t,r,a,l)}}function Cl(t,r,a,l,h){for(h=h&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,T=r,C=a,L=l,se=T.flags;switch(T.tag){case 0:case 11:case 15:Cl(m,T,C,L,h),xu(8,T);break;case 23:break;case 22:var he=T.stateNode;T.memoizedState!==null?he._visibility&2?Cl(m,T,C,L,h):Du(m,T):(he._visibility|=2,Cl(m,T,C,L,h)),h&&se&2048&&Yd(T.alternate,T);break;case 24:Cl(m,T,C,L,h),h&&se&2048&&Qd(T.alternate,T);break;default:Cl(m,T,C,L,h)}r=r.sibling}}function Du(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:Du(a,l),h&2048&&Yd(l.alternate,l);break;case 24:Du(a,l),h&2048&&Qd(l.alternate,l);break;default:Du(a,l)}r=r.sibling}}var Nu=8192;function Rl(t,r,a){if(t.subtreeFlags&Nu)for(t=t.child;t!==null;)iv(t,r,a),t=t.sibling}function iv(t,r,a){switch(t.tag){case 26:Rl(t,r,a),t.flags&Nu&&t.memoizedState!==null&&lw(a,$i,t.memoizedState,t.memoizedProps);break;case 5:Rl(t,r,a);break;case 3:case 4:var l=$i;$i=Ef(t.stateNode.containerInfo),Rl(t,r,a),$i=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Nu,Nu=16777216,Rl(t,r,a),Nu=l):Rl(t,r,a));break;default:Rl(t,r,a)}}function sv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Mu(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Yn=l,ov(l,t)}sv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)av(t),t=t.sibling}function av(t){switch(t.tag){case 0:case 11:case 15:Mu(t),t.flags&2048&&Ba(9,t,t.return);break;case 3:Mu(t);break;case 12:Mu(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,lf(t)):Mu(t);break;default:Mu(t)}}function lf(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Yn=l,ov(l,t)}sv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Ba(8,r,r.return),lf(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,lf(r));break;default:lf(r)}t=t.sibling}}function ov(t,r){for(;Yn!==null;){var a=Yn;switch(a.tag){case 0:case 11:case 15:Ba(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:gu(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Yn=l;else e:for(a=t;Yn!==null;){l=Yn;var h=l.sibling,m=l.return;if(Jy(l),l===a){Yn=null;break e}if(h!==null){h.return=m,Yn=h;break e}Yn=m}}}var w1={getCacheForType:function(t){var r=Zn(On),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return Zn(On).controller.signal}},S1=typeof WeakMap=="function"?WeakMap:Map,Mt=0,Gt=null,gt=null,_t=0,jt=0,ci=null,qa=!1,Il=!1,Xd=!1,ta=0,mn=0,Ha=0,Ko=0,$d=0,fi=0,xl=0,ku=null,qr=null,Jd=!1,uf=0,lv=0,cf=1/0,ff=null,Ka=null,Un=0,Fa=null,Ol=null,na=0,Wd=0,Zd=null,uv=null,Vu=0,ep=null;function hi(){return(Mt&2)!==0&&_t!==0?_t&-_t:le.T!==null?ap():ks()}function cv(){if(fi===0)if((_t&536870912)===0||Ct){var t=Bi;Bi<<=1,(Bi&3932160)===0&&(Bi=262144),fi=t}else fi=536870912;return t=li.current,t!==null&&(t.flags|=32),fi}function Hr(t,r,a){(t===Gt&&(jt===2||jt===9)||t.cancelPendingCommit!==null)&&(Dl(t,0),Ga(t,_t,fi,!1)),Ar(t,a),((Mt&2)===0||t!==Gt)&&(t===Gt&&((Mt&2)===0&&(Ko|=a),mn===4&&Ga(t,_t,fi,!1)),gs(t))}function fv(t,r,a){if((Mt&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||yr(t,r),h=l?R1(t,r):np(t,r,!0),m=l;do{if(h===0){Il&&!l&&Ga(t,r,0,!1);break}else{if(a=t.current.alternate,m&&!A1(a)){h=np(t,r,!1),m=!1;continue}if(h===2){if(m=r,t.errorRecoveryDisabledLanes&m)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;e:{var C=t;h=ku;var L=C.current.memoizedState.isDehydrated;if(L&&(Dl(C,T).flags|=256),T=np(C,T,!1),T!==2){if(Xd&&!L){C.errorRecoveryDisabledLanes|=m,Ko|=m,h=4;break e}m=qr,qr=h,m!==null&&(qr===null?qr=m:qr.push.apply(qr,m))}h=T}if(m=!1,h!==2)continue}}if(h===1){Dl(t,0),Ga(t,r,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Ga(l,r,fi,!qa);break e;case 2:qr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=uf+300-qn(),10<h)){if(Ga(l,r,fi,!qa),Xr(l,0,!0)!==0)break e;na=r,l.timeoutHandle=qv(hv.bind(null,l,a,qr,ff,Jd,r,fi,Ko,xl,qa,m,"Throttled",-0,0),h);break e}hv(l,a,qr,ff,Jd,r,fi,Ko,xl,qa,m,null,-0,0)}}break}while(!0);gs(t)}function hv(t,r,a,l,h,m,T,C,L,se,he,ye,oe,ce){if(t.timeoutHandle=-1,ye=r.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ur},iv(r,m,ye);var ze=(m&62914560)===m?uf-qn():(m&4194048)===m?lv-qn():0;if(ze=uw(ye,ze),ze!==null){na=m,t.cancelPendingCommit=ze(bv.bind(null,t,r,m,a,l,h,T,C,L,he,ye,null,oe,ce)),Ga(t,m,T,!se);return}}bv(t,r,m,a,l,h,T,C,L)}function A1(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!cr(m(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ga(t,r,a,l){r&=~$d,r&=~Ko,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var m=31-Ne(h),T=1<<m;l[m]=-1,h&=~T}a!==0&&yi(t,a,r)}function hf(){return(Mt&6)===0?(Pu(0),!1):!0}function tp(){if(gt!==null){if(jt===0)var t=gt.return;else t=gt,Fs=Vo=null,yd(t),El=null,vu=0,t=gt;for(;t!==null;)Hy(t.alternate,t),t=t.return;gt=null}}function Dl(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,F1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),na=0,tp(),Gt=t,gt=a=Hs(t.current,null),_t=r,jt=0,ci=null,qa=!1,Il=yr(t,r),Xd=!1,xl=fi=$d=Ko=Ha=mn=0,qr=ku=null,Jd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Ne(l),m=1<<h;r|=t[h],l&=~m}return ta=r,Gn(),a}function dv(t,r){ut=null,le.H=Cu,r===bl||r===zc?(r=xg(),jt=3):r===sd?(r=xg(),jt=4):jt=r===Md?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ci=r,gt===null&&(mn=1,ef(t,Ri(r,t.current)))}function pv(){var t=li.current;return t===null?!0:(_t&4194048)===_t?Di===null:(_t&62914560)===_t||(_t&536870912)!==0?t===Di:!1}function mv(){var t=le.H;return le.H=Cu,t===null?Cu:t}function gv(){var t=le.A;return le.A=w1,t}function df(){mn=4,qa||(_t&4194048)!==_t&&li.current!==null||(Il=!0),(Ha&134217727)===0&&(Ko&134217727)===0||Gt===null||Ga(Gt,_t,fi,!1)}function np(t,r,a){var l=Mt;Mt|=2;var h=mv(),m=gv();(Gt!==t||_t!==r)&&(ff=null,Dl(t,r)),r=!1;var T=mn;e:do try{if(jt!==0&&gt!==null){var C=gt,L=ci;switch(jt){case 8:tp(),T=6;break e;case 3:case 2:case 9:case 6:li.current===null&&(r=!0);var se=jt;if(jt=0,ci=null,Nl(t,C,L,se),a&&Il){T=0;break e}break;default:se=jt,jt=0,ci=null,Nl(t,C,L,se)}}C1(),T=mn;break}catch(he){dv(t,he)}while(!0);return r&&t.shellSuspendCounter++,Fs=Vo=null,Mt=l,le.H=h,le.A=m,gt===null&&(Gt=null,_t=0,Gn()),T}function C1(){for(;gt!==null;)yv(gt)}function R1(t,r){var a=Mt;Mt|=2;var l=mv(),h=gv();Gt!==t||_t!==r?(ff=null,cf=qn()+500,Dl(t,r)):Il=yr(t,r);e:do try{if(jt!==0&&gt!==null){r=gt;var m=ci;t:switch(jt){case 1:jt=0,ci=null,Nl(t,r,m,1);break;case 2:case 9:if(Rg(m)){jt=0,ci=null,vv(r);break}r=function(){jt!==2&&jt!==9||Gt!==t||(jt=7),gs(t)},m.then(r,r);break e;case 3:jt=7;break e;case 4:jt=5;break e;case 7:Rg(m)?(jt=0,ci=null,vv(r)):(jt=0,ci=null,Nl(t,r,m,7));break;case 5:var T=null;switch(gt.tag){case 26:T=gt.memoizedState;case 5:case 27:var C=gt;if(T?r_(T):C.stateNode.complete){jt=0,ci=null;var L=C.sibling;if(L!==null)gt=L;else{var se=C.return;se!==null?(gt=se,pf(se)):gt=null}break t}}jt=0,ci=null,Nl(t,r,m,5);break;case 6:jt=0,ci=null,Nl(t,r,m,6);break;case 8:tp(),mn=6;break e;default:throw Error(s(462))}}I1();break}catch(he){dv(t,he)}while(!0);return Fs=Vo=null,le.H=l,le.A=h,Mt=a,gt!==null?0:(Gt=null,_t=0,Gn(),mn)}function I1(){for(;gt!==null&&!ol();)yv(gt)}function yv(t){var r=By(t.alternate,t,ta);t.memoizedProps=t.pendingProps,r===null?pf(t):gt=r}function vv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=Vy(a,r,r.pendingProps,r.type,void 0,_t);break;case 11:r=Vy(a,r,r.pendingProps,r.type.render,r.ref,_t);break;case 5:yd(r);default:Hy(a,r),r=gt=gg(r,ta),r=By(a,r,ta)}t.memoizedProps=t.pendingProps,r===null?pf(t):gt=r}function Nl(t,r,a,l){Fs=Vo=null,yd(r),El=null,vu=0;var h=r.return;try{if(g1(t,h,r,a,_t)){mn=1,ef(t,Ri(a,t.current)),gt=null;return}}catch(m){if(h!==null)throw gt=h,m;mn=1,ef(t,Ri(a,t.current)),gt=null;return}r.flags&32768?(Ct||l===1?t=!0:Il||(_t&536870912)!==0?t=!1:(qa=t=!0,(l===2||l===9||l===3||l===6)&&(l=li.current,l!==null&&l.tag===13&&(l.flags|=16384))),_v(r,t)):pf(r)}function pf(t){var r=t;do{if((r.flags&32768)!==0){_v(r,qa);return}t=r.return;var a=_1(r.alternate,r,ta);if(a!==null){gt=a;return}if(r=r.sibling,r!==null){gt=r;return}gt=r=t}while(r!==null);mn===0&&(mn=5)}function _v(t,r){do{var a=b1(t.alternate,t);if(a!==null){a.flags&=32767,gt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){gt=t;return}gt=t=a}while(t!==null);mn=6,gt=null}function bv(t,r,a,l,h,m,T,C,L){t.cancelPendingCommit=null;do mf();while(Un!==0);if((Mt&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(m=r.lanes|r.childLanes,m|=lt,wo(t,a,m,T,C,L),t===Gt&&(gt=Gt=null,_t=0),Ol=r,Fa=t,na=a,Wd=m,Zd=h,uv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,N1(mi,function(){return Av(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=le.T,le.T=null,h=_e.p,_e.p=2,T=Mt,Mt|=4;try{E1(t,r,a)}finally{Mt=T,_e.p=h,le.T=l}}Un=1,Ev(),Tv(),wv()}}function Ev(){if(Un===1){Un=0;var t=Fa,r=Ol,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=le.T,le.T=null;var l=_e.p;_e.p=2;var h=Mt;Mt|=4;try{tv(r,t);var m=pp,T=S(t.containerInfo),C=m.focusedElem,L=m.selectionRange;if(T!==C&&C&&C.ownerDocument&&b(C.ownerDocument.documentElement,C)){if(L!==null&&A(C)){var se=L.start,he=L.end;if(he===void 0&&(he=se),"selectionStart"in C)C.selectionStart=se,C.selectionEnd=Math.min(he,C.value.length);else{var ye=C.ownerDocument||document,oe=ye&&ye.defaultView||window;if(oe.getSelection){var ce=oe.getSelection(),ze=C.textContent.length,Xe=Math.min(L.start,ze),Kt=L.end===void 0?Xe:Math.min(L.end,ze);!ce.extend&&Xe>Kt&&(T=Kt,Kt=Xe,Xe=T);var ee=g(C,Xe),K=g(C,Kt);if(ee&&K&&(ce.rangeCount!==1||ce.anchorNode!==ee.node||ce.anchorOffset!==ee.offset||ce.focusNode!==K.node||ce.focusOffset!==K.offset)){var ie=ye.createRange();ie.setStart(ee.node,ee.offset),ce.removeAllRanges(),Xe>Kt?(ce.addRange(ie),ce.extend(K.node,K.offset)):(ie.setEnd(K.node,K.offset),ce.addRange(ie))}}}}for(ye=[],ce=C;ce=ce.parentNode;)ce.nodeType===1&&ye.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<ye.length;C++){var de=ye[C];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Rf=!!dp,pp=dp=null}finally{Mt=h,_e.p=l,le.T=a}}t.current=r,Un=2}}function Tv(){if(Un===2){Un=0;var t=Fa,r=Ol,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=le.T,le.T=null;var l=_e.p;_e.p=2;var h=Mt;Mt|=4;try{$y(t,r.alternate,r)}finally{Mt=h,_e.p=l,le.T=a}}Un=3}}function wv(){if(Un===4||Un===3){Un=0,rs();var t=Fa,r=Ol,a=na,l=uv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Un=5:(Un=0,Ol=Fa=null,Sv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ka=null),Cr(a),r=r.stateNode,yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(ar,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=le.T,h=_e.p,_e.p=2,le.T=null;try{for(var m=t.onRecoverableError,T=0;T<l.length;T++){var C=l[T];m(C.value,{componentStack:C.stack})}}finally{le.T=r,_e.p=h}}(na&3)!==0&&mf(),gs(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===ep?Vu++:(Vu=0,ep=t):Vu=0,Pu(0)}}function Sv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,gu(r)))}function mf(){return Ev(),Tv(),wv(),Av()}function Av(){if(Un!==5)return!1;var t=Fa,r=Wd;Wd=0;var a=Cr(na),l=le.T,h=_e.p;try{_e.p=32>a?32:a,le.T=null,a=Zd,Zd=null;var m=Fa,T=na;if(Un=0,Ol=Fa=null,na=0,(Mt&6)!==0)throw Error(s(331));var C=Mt;if(Mt|=4,av(m.current),rv(m,m.current,T,a),Mt=C,Pu(0,!1),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(ar,m)}catch{}return!0}finally{_e.p=h,le.T=l,Sv(t,r)}}function Cv(t,r,a){r=Ri(a,r),r=Nd(t.stateNode,r,2),t=Ua(t,r,2),t!==null&&(Ar(t,2),gs(t))}function zt(t,r,a){if(t.tag===3)Cv(t,t,a);else for(;r!==null;){if(r.tag===3){Cv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ka===null||!Ka.has(l))){t=Ri(a,t),a=Ry(2),l=Ua(r,a,2),l!==null&&(Iy(a,l,r,t),Ar(l,2),gs(l));break}}r=r.return}}function rp(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new S1;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(Xd=!0,h.add(a),t=x1.bind(null,t,r,a),r.then(t,t))}function x1(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Gt===t&&(_t&a)===a&&(mn===4||mn===3&&(_t&62914560)===_t&&300>qn()-uf?(Mt&2)===0&&Dl(t,0):$d|=a,xl===_t&&(xl=0)),gs(t)}function Rv(t,r){r===0&&(r=ll()),t=Zt(t,r),t!==null&&(Ar(t,r),gs(t))}function O1(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Rv(t,a)}function D1(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),Rv(t,a)}function N1(t,r){return nn(t,r)}var gf=null,Ml=null,ip=!1,yf=!1,sp=!1,Ya=0;function gs(t){t!==Ml&&t.next===null&&(Ml===null?gf=Ml=t:Ml=Ml.next=t),yf=!0,ip||(ip=!0,k1())}function Pu(t,r){if(!sp&&yf){sp=!0;do for(var a=!1,l=gf;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var T=l.suspendedLanes,C=l.pingedLanes;m=(1<<31-Ne(42|t)+1)-1,m&=h&~(T&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Dv(l,m))}else m=_t,m=Xr(l,l===Gt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||yr(l,m)||(a=!0,Dv(l,m));l=l.next}while(a);sp=!1}}function M1(){Iv()}function Iv(){yf=ip=!1;var t=0;Ya!==0&&K1()&&(t=Ya);for(var r=qn(),a=null,l=gf;l!==null;){var h=l.next,m=xv(l,r);m===0?(l.next=null,a===null?gf=h:a.next=h,h===null&&(Ml=a)):(a=l,(t!==0||(m&3)!==0)&&(yf=!0)),l=h}Un!==0&&Un!==5||Pu(t),Ya!==0&&(Ya=0)}function xv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var T=31-Ne(m),C=1<<T,L=h[T];L===-1?((C&a)===0||(C&l)!==0)&&(h[T]=uu(C,r)):L<=r&&(t.expiredLanes|=C),m&=~C}if(r=Gt,a=_t,a=Xr(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(jt===2||jt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Pn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||yr(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Pn(l),Cr(a)){case 2:case 8:a=Qr;break;case 32:a=mi;break;case 268435456:a=ma;break;default:a=mi}return l=Ov.bind(null,t),a=nn(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Pn(l),t.callbackPriority=2,t.callbackNode=null,2}function Ov(t,r){if(Un!==0&&Un!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(mf()&&t.callbackNode!==a)return null;var l=_t;return l=Xr(t,t===Gt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(fv(t,l,r),xv(t,qn()),t.callbackNode!=null&&t.callbackNode===a?Ov.bind(null,t):null)}function Dv(t,r){if(mf())return null;fv(t,r,!0)}function k1(){G1(function(){(Mt&6)!==0?nn(Yr,M1):Iv()})}function ap(){if(Ya===0){var t=vl;t===0&&(t=Ie,Ie<<=1,(Ie&261888)===0&&(Ie=256)),Ya=t}return Ya}function Nv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ri(""+t)}function Mv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function V1(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var m=Nv((h[Yt]||null).action),T=l.submitter;T&&(r=(r=T[Yt]||null)?Nv(r.formAction):T.getAttribute("formAction"),r!==null&&(m=r,T=null));var C=new Ei("action","action",null,l,h);t.push({event:C,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ya!==0){var L=T?Mv(h,T):new FormData(h);Cd(a,{pending:!0,data:L,method:h.method,action:m},null,L)}}else typeof m=="function"&&(C.preventDefault(),L=T?Mv(h,T):new FormData(h),Cd(a,{pending:!0,data:L,method:h.method,action:m},m,L))},currentTarget:h}]})}}for(var op=0;op<Oe.length;op++){var lp=Oe[op],P1=lp.toLowerCase(),L1=lp[0].toUpperCase()+lp.slice(1);we(P1,"on"+L1)}we(ne,"onAnimationEnd"),we(ae,"onAnimationIteration"),we(fe,"onAnimationStart"),we("dblclick","onDoubleClick"),we("focusin","onFocus"),we("focusout","onBlur"),we(ge,"onTransitionRun"),we(Ae,"onTransitionStart"),we(De,"onTransitionCancel"),we(Te,"onTransitionEnd"),xr("onMouseEnter",["mouseout","mouseover"]),xr("onMouseLeave",["mouseout","mouseover"]),xr("onPointerEnter",["pointerout","pointerover"]),xr("onPointerLeave",["pointerout","pointerover"]),Ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function kv(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var T=l.length-1;0<=T;T--){var C=l[T],L=C.instance,se=C.currentTarget;if(C=C.listener,L!==m&&h.isPropagationStopped())break e;m=C,h.currentTarget=se;try{m(h)}catch(he){Pe(he)}h.currentTarget=null,m=L}else for(T=0;T<l.length;T++){if(C=l[T],L=C.instance,se=C.currentTarget,C=C.listener,L!==m&&h.isPropagationStopped())break e;m=C,h.currentTarget=se;try{m(h)}catch(he){Pe(he)}h.currentTarget=null,m=L}}}}function yt(t,r){var a=r[qi];a===void 0&&(a=r[qi]=new Set);var l=t+"__bubble";a.has(l)||(Vv(r,t,2,!1),a.add(l))}function up(t,r,a){var l=0;r&&(l|=4),Vv(a,t,l,r)}var vf="_reactListening"+Math.random().toString(36).slice(2);function cp(t){if(!t[vf]){t[vf]=!0,vi.forEach(function(a){a!=="selectionchange"&&(U1.has(a)||up(a,!1,t),up(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[vf]||(r[vf]=!0,up("selectionchange",!1,r))}}function Vv(t,r,a,l){switch(c_(r)){case 2:var h=hw;break;case 8:h=dw;break;default:h=Ap}a=h.bind(null,r,a,t),h=void 0,!Ls||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function fp(t,r,a,l,h){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var C=l.stateNode.containerInfo;if(C===h)break;if(T===4)for(T=l.return;T!==null;){var L=T.tag;if((L===3||L===4)&&T.stateNode.containerInfo===h)return;T=T.return}for(;C!==null;){if(T=Rr(C),T===null)return;if(L=T.tag,L===5||L===6||L===26||L===27){l=m=T;continue e}C=C.parentNode}}l=l.return}Nr(function(){var se=m,he=vr(a),ye=[];e:{var oe=Re.get(t);if(oe!==void 0){var ce=Ei,ze=t;switch(t){case"keypress":if(Gi(a)===0)break e;case"keydown":case"keyup":ce=zs;break;case"focusin":ze="focus",ce=Si;break;case"focusout":ze="blur",ce=Si;break;case"beforeblur":case"afterblur":ce=Si;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Us;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Ro;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=v;break;case ne:case ae:case fe:ce=Io;break;case Te:ce=I;break;case"scroll":case"scrollend":ce=ls;break;case"wheel":ce=ue;break;case"copy":case"cut":case"paste":ce=Xi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Ai;break;case"toggle":case"beforetoggle":ce=tt}var Xe=(r&4)!==0,Kt=!Xe&&(t==="scroll"||t==="scrollend"),ee=Xe?oe!==null?oe+"Capture":null:oe;Xe=[];for(var K=se,ie;K!==null;){var de=K;if(ie=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||ie===null||ee===null||(de=_r(K,ee),de!=null&&Xe.push(Uu(K,de,ie))),Kt)break;K=K.return}0<Xe.length&&(oe=new ce(oe,ze,null,a,he),ye.push({event:oe,listeners:Xe}))}}if((r&7)===0){e:{if(oe=t==="mouseover"||t==="pointerover",ce=t==="mouseout"||t==="pointerout",oe&&a!==Dr&&(ze=a.relatedTarget||a.fromElement)&&(Rr(ze)||ze[Ln]))break e;if((ce||oe)&&(oe=he.window===he?he:(oe=he.ownerDocument)?oe.defaultView||oe.parentWindow:window,ce?(ze=a.relatedTarget||a.toElement,ce=se,ze=ze?Rr(ze):null,ze!==null&&(Kt=u(ze),Xe=ze.tag,ze!==Kt||Xe!==5&&Xe!==27&&Xe!==6)&&(ze=null)):(ce=null,ze=se),ce!==ze)){if(Xe=Us,de="onMouseLeave",ee="onMouseEnter",K="mouse",(t==="pointerout"||t==="pointerover")&&(Xe=Ai,de="onPointerLeave",ee="onPointerEnter",K="pointer"),Kt=ce==null?oe:_n(ce),ie=ze==null?oe:_n(ze),oe=new Xe(de,K+"leave",ce,a,he),oe.target=Kt,oe.relatedTarget=ie,de=null,Rr(he)===se&&(Xe=new Xe(ee,K+"enter",ze,a,he),Xe.target=ie,Xe.relatedTarget=Kt,de=Xe),Kt=de,ce&&ze)t:{for(Xe=j1,ee=ce,K=ze,ie=0,de=ee;de;de=Xe(de))ie++;de=0;for(var Fe=K;Fe;Fe=Xe(Fe))de++;for(;0<ie-de;)ee=Xe(ee),ie--;for(;0<de-ie;)K=Xe(K),de--;for(;ie--;){if(ee===K||K!==null&&ee===K.alternate){Xe=ee;break t}ee=Xe(ee),K=Xe(K)}Xe=null}else Xe=null;ce!==null&&Pv(ye,oe,ce,Xe,!1),ze!==null&&Kt!==null&&Pv(ye,Kt,ze,Xe,!0)}}e:{if(oe=se?_n(se):window,ce=oe.nodeName&&oe.nodeName.toLowerCase(),ce==="select"||ce==="input"&&oe.type==="file")var Dt=Do;else if(fl(oe))if(Ci)Dt=Da;else{Dt=qs;var qe=kc}else ce=oe.nodeName,!ce||ce.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?se&&ba(se.elementType)&&(Dt=Do):Dt=hu;if(Dt&&(Dt=Dt(t,se))){fu(ye,Dt,a,he);break e}qe&&qe(t,oe,se),t==="focusout"&&se&&oe.type==="number"&&se.memoizedProps.value!=null&&Ps(oe,"number",oe.value)}switch(qe=se?_n(se):window,t){case"focusin":(fl(qe)||qe.contentEditable==="true")&&(N=qe,j=se,B=null);break;case"focusout":B=j=N=null;break;case"mousedown":$=!0;break;case"contextmenu":case"mouseup":case"dragend":$=!1,U(ye,a,he);break;case"selectionchange":if(O)break;case"keydown":case"keyup":U(ye,a,he)}var ct;if(At)e:{switch(t){case"compositionstart":var bt="onCompositionStart";break e;case"compositionend":bt="onCompositionEnd";break e;case"compositionupdate":bt="onCompositionUpdate";break e}bt=void 0}else Bs?fs(t,a)&&(bt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(bt="onCompositionStart");bt&&(Lr&&a.locale!=="ko"&&(Bs||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&Bs&&(ct=Fi()):(Mr=he,Ea="value"in Mr?Mr.value:Mr.textContent,Bs=!0)),qe=_f(se,bt),0<qe.length&&(bt=new kr(bt,t,null,a,he),ye.push({event:bt,listeners:qe}),ct?bt.data=ct:(ct=Ia(a),ct!==null&&(bt.data=ct)))),(ct=Pr?Dc(t,a):Kh(t,a))&&(bt=_f(se,"onBeforeInput"),0<bt.length&&(qe=new kr("onBeforeInput","beforeinput",null,a,he),ye.push({event:qe,listeners:bt}),qe.data=ct)),V1(ye,t,se,a,he)}kv(ye,r)})}function Uu(t,r,a){return{instance:t,listener:r,currentTarget:a}}function _f(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=_r(t,a),h!=null&&l.unshift(Uu(t,h,m)),h=_r(t,r),h!=null&&l.push(Uu(t,h,m))),t.tag===3)return l;t=t.return}return[]}function j1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Pv(t,r,a,l,h){for(var m=r._reactName,T=[];a!==null&&a!==l;){var C=a,L=C.alternate,se=C.stateNode;if(C=C.tag,L!==null&&L===l)break;C!==5&&C!==26&&C!==27||se===null||(L=se,h?(se=_r(a,m),se!=null&&T.unshift(Uu(a,se,L))):h||(se=_r(a,m),se!=null&&T.push(Uu(a,se,L)))),a=a.return}T.length!==0&&t.push({event:r,listeners:T})}var z1=/\r\n?/g,B1=/\u0000|\uFFFD/g;function Lv(t){return(typeof t=="string"?t:""+t).replace(z1,`
`).replace(B1,"")}function Uv(t,r){return r=Lv(r),Lv(t)===r}function Ht(t,r,a,l,h,m){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Jn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Jn(t,""+l);break;case"className":lr(t,"class",l);break;case"tabIndex":lr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":lr(t,a,l);break;case"style":_a(t,l,m);break;case"data":if(r!=="object"){lr(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ri(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&Ht(t,r,"name",h.name,h,null),Ht(t,r,"formEncType",h.formEncType,h,null),Ht(t,r,"formMethod",h.formMethod,h,null),Ht(t,r,"formTarget",h.formTarget,h,null)):(Ht(t,r,"encType",h.encType,h,null),Ht(t,r,"method",h.method,h,null),Ht(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ri(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ur);break;case"onScroll":l!=null&&yt("scroll",t);break;case"onScrollEnd":l!=null&&yt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ri(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":yt("beforetoggle",t),yt("toggle",t),ot(t,"popover",l);break;case"xlinkActuate":an(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":an(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":an(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":an(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":an(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":an(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":an(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":an(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":an(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ot(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=cl.get(a)||a,ot(t,a,l))}}function hp(t,r,a,l,h,m){switch(a){case"style":_a(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Jn(t,l):(typeof l=="number"||typeof l=="bigint")&&Jn(t,""+l);break;case"onScroll":l!=null&&yt("scroll",t);break;case"onScrollEnd":l!=null&&yt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ur);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ss.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),m=t[Yt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(r,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ot(t,a,l)}}}function tr(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",t),yt("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var T=a[m];if(T!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ht(t,r,m,T,a,null)}}h&&Ht(t,r,"srcSet",a.srcSet,a,null),l&&Ht(t,r,"src",a.src,a,null);return;case"input":yt("invalid",t);var C=m=T=h=null,L=null,se=null;for(l in a)if(a.hasOwnProperty(l)){var he=a[l];if(he!=null)switch(l){case"name":h=he;break;case"type":T=he;break;case"checked":L=he;break;case"defaultChecked":se=he;break;case"value":m=he;break;case"defaultValue":C=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(s(137,r));break;default:Ht(t,r,l,he,a,null)}}va(t,m,C,L,se,T,h,!1);return;case"select":yt("invalid",t),l=T=m=null;for(h in a)if(a.hasOwnProperty(h)&&(C=a[h],C!=null))switch(h){case"value":m=C;break;case"defaultValue":T=C;break;case"multiple":l=C;default:Ht(t,r,h,C,a,null)}r=m,a=T,t.multiple=!!l,r!=null?ti(t,!!l,r,!1):a!=null&&ti(t,!!l,a,!0);return;case"textarea":yt("invalid",t),m=h=l=null;for(T in a)if(a.hasOwnProperty(T)&&(C=a[T],C!=null))switch(T){case"value":l=C;break;case"defaultValue":h=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:Ht(t,r,T,C,a,null)}ni(t,l,h,m);return;case"option":for(L in a)if(a.hasOwnProperty(L)&&(l=a[L],l!=null))switch(L){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ht(t,r,L,l,a,null)}return;case"dialog":yt("beforetoggle",t),yt("toggle",t),yt("cancel",t),yt("close",t);break;case"iframe":case"object":yt("load",t);break;case"video":case"audio":for(l=0;l<Lu.length;l++)yt(Lu[l],t);break;case"image":yt("error",t),yt("load",t);break;case"details":yt("toggle",t);break;case"embed":case"source":case"link":yt("error",t),yt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in a)if(a.hasOwnProperty(se)&&(l=a[se],l!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ht(t,r,se,l,a,null)}return;default:if(ba(r)){for(he in a)a.hasOwnProperty(he)&&(l=a[he],l!==void 0&&hp(t,r,he,l,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(l=a[C],l!=null&&Ht(t,r,C,l,a,null))}function q1(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,T=null,C=null,L=null,se=null,he=null;for(ce in a){var ye=a[ce];if(a.hasOwnProperty(ce)&&ye!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":L=ye;default:l.hasOwnProperty(ce)||Ht(t,r,ce,null,l,ye)}}for(var oe in l){var ce=l[oe];if(ye=a[oe],l.hasOwnProperty(oe)&&(ce!=null||ye!=null))switch(oe){case"type":m=ce;break;case"name":h=ce;break;case"checked":se=ce;break;case"defaultChecked":he=ce;break;case"value":T=ce;break;case"defaultValue":C=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(s(137,r));break;default:ce!==ye&&Ht(t,r,oe,ce,l,ye)}}ei(t,T,C,L,se,he,m,h);return;case"select":ce=T=C=oe=null;for(m in a)if(L=a[m],a.hasOwnProperty(m)&&L!=null)switch(m){case"value":break;case"multiple":ce=L;default:l.hasOwnProperty(m)||Ht(t,r,m,null,l,L)}for(h in l)if(m=l[h],L=a[h],l.hasOwnProperty(h)&&(m!=null||L!=null))switch(h){case"value":oe=m;break;case"defaultValue":C=m;break;case"multiple":T=m;default:m!==L&&Ht(t,r,h,m,l,L)}r=C,a=T,l=ce,oe!=null?ti(t,!!a,oe,!1):!!l!=!!a&&(r!=null?ti(t,!!a,r,!0):ti(t,!!a,a?[]:"",!1));return;case"textarea":ce=oe=null;for(C in a)if(h=a[C],a.hasOwnProperty(C)&&h!=null&&!l.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Ht(t,r,C,null,l,h)}for(T in l)if(h=l[T],m=a[T],l.hasOwnProperty(T)&&(h!=null||m!=null))switch(T){case"value":oe=h;break;case"defaultValue":ce=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==m&&Ht(t,r,T,h,l,m)}Co(t,oe,ce);return;case"option":for(var ze in a)if(oe=a[ze],a.hasOwnProperty(ze)&&oe!=null&&!l.hasOwnProperty(ze))switch(ze){case"selected":t.selected=!1;break;default:Ht(t,r,ze,null,l,oe)}for(L in l)if(oe=l[L],ce=a[L],l.hasOwnProperty(L)&&oe!==ce&&(oe!=null||ce!=null))switch(L){case"selected":t.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:Ht(t,r,L,oe,l,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in a)oe=a[Xe],a.hasOwnProperty(Xe)&&oe!=null&&!l.hasOwnProperty(Xe)&&Ht(t,r,Xe,null,l,oe);for(se in l)if(oe=l[se],ce=a[se],l.hasOwnProperty(se)&&oe!==ce&&(oe!=null||ce!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(137,r));break;default:Ht(t,r,se,oe,l,ce)}return;default:if(ba(r)){for(var Kt in a)oe=a[Kt],a.hasOwnProperty(Kt)&&oe!==void 0&&!l.hasOwnProperty(Kt)&&hp(t,r,Kt,void 0,l,oe);for(he in l)oe=l[he],ce=a[he],!l.hasOwnProperty(he)||oe===ce||oe===void 0&&ce===void 0||hp(t,r,he,oe,l,ce);return}}for(var ee in a)oe=a[ee],a.hasOwnProperty(ee)&&oe!=null&&!l.hasOwnProperty(ee)&&Ht(t,r,ee,null,l,oe);for(ye in l)oe=l[ye],ce=a[ye],!l.hasOwnProperty(ye)||oe===ce||oe==null&&ce==null||Ht(t,r,ye,oe,l,ce)}function jv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function H1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],m=h.transferSize,T=h.initiatorType,C=h.duration;if(m&&C&&jv(T)){for(T=0,C=h.responseEnd,l+=1;l<a.length;l++){var L=a[l],se=L.startTime;if(se>C)break;var he=L.transferSize,ye=L.initiatorType;he&&jv(ye)&&(L=L.responseEnd,T+=he*(L<C?1:(C-se)/(L-se)))}if(--l,r+=8*(m+T)/(h.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var dp=null,pp=null;function bf(t){return t.nodeType===9?t:t.ownerDocument}function zv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bv(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function mp(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var gp=null;function K1(){var t=window.event;return t&&t.type==="popstate"?t===gp?!1:(gp=t,!0):(gp=null,!1)}var qv=typeof setTimeout=="function"?setTimeout:void 0,F1=typeof clearTimeout=="function"?clearTimeout:void 0,Hv=typeof Promise=="function"?Promise:void 0,G1=typeof queueMicrotask=="function"?queueMicrotask:typeof Hv<"u"?function(t){return Hv.resolve(null).then(t).catch(Y1)}:qv;function Y1(t){setTimeout(function(){throw t})}function Qa(t){return t==="head"}function Kv(t,r){var a=r,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),Ll(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")ju(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,ju(a);for(var m=a.firstChild;m;){var T=m.nextSibling,C=m.nodeName;m[Hn]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=T}}else a==="body"&&ju(t.ownerDocument.body);a=h}while(a);Ll(r)}function Fv(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function yp(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":yp(a),Vs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Q1(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Hn])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Ni(t.nextSibling),t===null)break}return null}function X1(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Ni(t.nextSibling),t===null))return null;return t}function Gv(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Ni(t.nextSibling),t===null))return null;return t}function vp(t){return t.data==="$?"||t.data==="$~"}function _p(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function $1(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Ni(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var bp=null;function Yv(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Ni(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function Qv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function Xv(t,r,a){switch(r=bf(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function ju(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Vs(t)}var Mi=new Map,$v=new Set;function Ef(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ra=_e.d;_e.d={f:J1,r:W1,D:Z1,C:ew,L:tw,m:nw,X:iw,S:rw,M:sw};function J1(){var t=ra.f(),r=hf();return t||r}function W1(t){var r=Rt(t);r!==null&&r.tag===5&&r.type==="form"?dy(r):ra.r(t)}var kl=typeof document>"u"?null:document;function Jv(t,r,a){var l=kl;if(l&&typeof r=="string"&&r){var h=Rn(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),$v.has(h)||($v.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),tr(r,"link",t),sn(r),l.head.appendChild(r)))}}function Z1(t){ra.D(t),Jv("dns-prefetch",t,null)}function ew(t,r){ra.C(t,r),Jv("preconnect",t,r)}function tw(t,r,a){ra.L(t,r,a);var l=kl;if(l&&t&&r){var h='link[rel="preload"][as="'+Rn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Rn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Rn(a.imageSizes)+'"]')):h+='[href="'+Rn(t)+'"]';var m=h;switch(r){case"style":m=Vl(t);break;case"script":m=Pl(t)}Mi.has(m)||(t=x({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Mi.set(m,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(zu(m))||r==="script"&&l.querySelector(Bu(m))||(r=l.createElement("link"),tr(r,"link",t),sn(r),l.head.appendChild(r)))}}function nw(t,r){ra.m(t,r);var a=kl;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+Rn(l)+'"][href="'+Rn(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Pl(t)}if(!Mi.has(m)&&(t=x({rel:"modulepreload",href:t},r),Mi.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Bu(m)))return}l=a.createElement("link"),tr(l,"link",t),sn(l),a.head.appendChild(l)}}}function rw(t,r,a){ra.S(t,r,a);var l=kl;if(l&&t){var h=Cn(l).hoistableStyles,m=Vl(t);r=r||"default";var T=h.get(m);if(!T){var C={loading:0,preload:null};if(T=l.querySelector(zu(m)))C.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Mi.get(m))&&Ep(t,a);var L=T=l.createElement("link");sn(L),tr(L,"link",t),L._p=new Promise(function(se,he){L.onload=se,L.onerror=he}),L.addEventListener("load",function(){C.loading|=1}),L.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Tf(T,r,l)}T={type:"stylesheet",instance:T,count:1,state:C},h.set(m,T)}}}function iw(t,r){ra.X(t,r);var a=kl;if(a&&t){var l=Cn(a).hoistableScripts,h=Pl(t),m=l.get(h);m||(m=a.querySelector(Bu(h)),m||(t=x({src:t,async:!0},r),(r=Mi.get(h))&&Tp(t,r),m=a.createElement("script"),sn(m),tr(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function sw(t,r){ra.M(t,r);var a=kl;if(a&&t){var l=Cn(a).hoistableScripts,h=Pl(t),m=l.get(h);m||(m=a.querySelector(Bu(h)),m||(t=x({src:t,async:!0,type:"module"},r),(r=Mi.get(h))&&Tp(t,r),m=a.createElement("script"),sn(m),tr(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Wv(t,r,a,l){var h=(h=Je.current)?Ef(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Vl(a.href),a=Cn(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Vl(a.href);var m=Cn(h).hoistableStyles,T=m.get(t);if(T||(h=h.ownerDocument||h,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,T),(m=h.querySelector(zu(t)))&&!m._p&&(T.instance=m,T.state.loading=5),Mi.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Mi.set(t,a),m||aw(h,t,a,T.state))),r&&l===null)throw Error(s(528,""));return T}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Pl(a),a=Cn(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Vl(t){return'href="'+Rn(t)+'"'}function zu(t){return'link[rel="stylesheet"]['+t+"]"}function Zv(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function aw(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),tr(r,"link",a),sn(r),t.head.appendChild(r))}function Pl(t){return'[src="'+Rn(t)+'"]'}function Bu(t){return"script[async]"+t}function e_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Rn(a.href)+'"]');if(l)return r.instance=l,sn(l),l;var h=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),sn(l),tr(l,"style",h),Tf(l,a.precedence,t),r.instance=l;case"stylesheet":h=Vl(a.href);var m=t.querySelector(zu(h));if(m)return r.state.loading|=4,r.instance=m,sn(m),m;l=Zv(a),(h=Mi.get(h))&&Ep(l,h),m=(t.ownerDocument||t).createElement("link"),sn(m);var T=m;return T._p=new Promise(function(C,L){T.onload=C,T.onerror=L}),tr(m,"link",l),r.state.loading|=4,Tf(m,a.precedence,t),r.instance=m;case"script":return m=Pl(a.src),(h=t.querySelector(Bu(m)))?(r.instance=h,sn(h),h):(l=a,(h=Mi.get(m))&&(l=x({},a),Tp(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),sn(h),tr(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Tf(l,a.precedence,t));return r.instance}function Tf(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,T=0;T<l.length;T++){var C=l[T];if(C.dataset.precedence===r)m=C;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function Ep(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Tp(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var wf=null;function t_(t,r,a){if(wf===null){var l=new Map,h=wf=new Map;h.set(a,l)}else h=wf,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Hn]||m[Pt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var T=m.getAttribute(r)||"";T=t+T;var C=l.get(T);C?C.push(m):l.set(T,[m])}}return l}function n_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function ow(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function r_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function lw(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Vl(l.href),m=r.querySelector(zu(h));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Sf.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=m,sn(m);return}m=r.ownerDocument||r,l=Zv(l),(h=Mi.get(h))&&Ep(l,h),m=m.createElement("link"),sn(m);var T=m;T._p=new Promise(function(C,L){T.onload=C,T.onerror=L}),tr(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Sf.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var wp=0;function uw(t,r){return t.stylesheets&&t.count===0&&Cf(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Cf(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&wp===0&&(wp=62500*H1());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Cf(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>wp?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Sf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Af=null;function Cf(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Af=new Map,r.forEach(cw,t),Af=null,Sf.call(t))}function cw(t,r){if(!(r.state.loading&4)){var a=Af.get(t);if(a)var l=a.get(null);else{a=new Map,Af.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var T=h[m];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),l=T)}l&&a.set(null,l)}h=r.instance,T=h.getAttribute("data-precedence"),m=a.get(T)||l,m===l&&a.set(null,h),a.set(T,h),this.count++,l=Sf.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var qu={$$typeof:Ve,Provider:null,Consumer:null,_currentValue:je,_currentValue2:je,_threadCount:0};function fw(t,r,a,l,h,m,T,C,L){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$n(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$n(0),this.hiddenUpdates=$n(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function i_(t,r,a,l,h,m,T,C,L,se,he,ye){return t=new fw(t,r,a,T,L,se,he,ye,C),r=1,m===!0&&(r|=24),m=oi(3,null,null,r),t.current=m,m.stateNode=t,r=nd(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:r},ad(m),t}function s_(t){return t?(t=Ur,t):Ur}function a_(t,r,a,l,h,m){h=s_(h),l.context===null?l.context=h:l.pendingContext=h,l=La(r),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Ua(t,l,r),a!==null&&(Hr(a,t,r),bu(a,t,r))}function o_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Sp(t,r){o_(t,r),(t=t.alternate)&&o_(t,r)}function l_(t){if(t.tag===13||t.tag===31){var r=Zt(t,67108864);r!==null&&Hr(r,t,67108864),Sp(t,67108864)}}function u_(t){if(t.tag===13||t.tag===31){var r=hi();r=Ms(r);var a=Zt(t,r);a!==null&&Hr(a,t,r),Sp(t,r)}}var Rf=!0;function hw(t,r,a,l){var h=le.T;le.T=null;var m=_e.p;try{_e.p=2,Ap(t,r,a,l)}finally{_e.p=m,le.T=h}}function dw(t,r,a,l){var h=le.T;le.T=null;var m=_e.p;try{_e.p=8,Ap(t,r,a,l)}finally{_e.p=m,le.T=h}}function Ap(t,r,a,l){if(Rf){var h=Cp(l);if(h===null)fp(t,r,l,If,a),f_(t,l);else if(mw(h,t,r,a,l))l.stopPropagation();else if(f_(t,l),r&4&&-1<pw.indexOf(t)){for(;h!==null;){var m=Rt(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var T=Sr(m.pendingLanes);if(T!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var L=1<<31-Ne(T);C.entanglements[1]|=L,T&=~L}gs(m),(Mt&6)===0&&(cf=qn()+500,Pu(0))}}break;case 31:case 13:C=Zt(m,2),C!==null&&Hr(C,m,2),hf(),Sp(m,2)}if(m=Cp(l),m===null&&fp(t,r,l,If,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else fp(t,r,l,null,a)}}function Cp(t){return t=vr(t),Rp(t)}var If=null;function Rp(t){if(If=null,t=Rr(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===31){if(t=y(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return If=t,null}function c_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gr()){case Yr:return 2;case Qr:return 8;case mi:case Os:return 32;case ma:return 268435456;default:return 32}default:return 32}}var Ip=!1,Xa=null,$a=null,Ja=null,Hu=new Map,Ku=new Map,Wa=[],pw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function f_(t,r){switch(t){case"focusin":case"focusout":Xa=null;break;case"dragenter":case"dragleave":$a=null;break;case"mouseover":case"mouseout":Ja=null;break;case"pointerover":case"pointerout":Hu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ku.delete(r.pointerId)}}function Fu(t,r,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},r!==null&&(r=Rt(r),r!==null&&l_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function mw(t,r,a,l,h){switch(r){case"focusin":return Xa=Fu(Xa,t,r,a,l,h),!0;case"dragenter":return $a=Fu($a,t,r,a,l,h),!0;case"mouseover":return Ja=Fu(Ja,t,r,a,l,h),!0;case"pointerover":var m=h.pointerId;return Hu.set(m,Fu(Hu.get(m)||null,t,r,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,Ku.set(m,Fu(Ku.get(m)||null,t,r,a,l,h)),!0}return!1}function h_(t){var r=Rr(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,or(t.priority,function(){u_(a)});return}}else if(r===31){if(r=y(a),r!==null){t.blockedOn=r,or(t.priority,function(){u_(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xf(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Cp(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Dr=l,a.target.dispatchEvent(l),Dr=null}else return r=Rt(a),r!==null&&l_(r),t.blockedOn=a,!1;r.shift()}return!0}function d_(t,r,a){xf(t)&&a.delete(r)}function gw(){Ip=!1,Xa!==null&&xf(Xa)&&(Xa=null),$a!==null&&xf($a)&&($a=null),Ja!==null&&xf(Ja)&&(Ja=null),Hu.forEach(d_),Ku.forEach(d_)}function Of(t,r){t.blockedOn===r&&(t.blockedOn=null,Ip||(Ip=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,gw)))}var Df=null;function p_(t){Df!==t&&(Df=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Df===t&&(Df=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(Rp(l||a)===null)continue;break}var m=Rt(a);m!==null&&(t.splice(r,3),r-=3,Cd(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Ll(t){function r(L){return Of(L,t)}Xa!==null&&Of(Xa,t),$a!==null&&Of($a,t),Ja!==null&&Of(Ja,t),Hu.forEach(r),Ku.forEach(r);for(var a=0;a<Wa.length;a++){var l=Wa[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Wa.length&&(a=Wa[0],a.blockedOn===null);)h_(a),a.blockedOn===null&&Wa.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],T=h[Yt]||null;if(typeof m=="function")T||p_(a);else if(T){var C=null;if(m&&m.hasAttribute("formAction")){if(h=m,T=m[Yt]||null)C=T.formAction;else if(Rp(h)!==null)continue}else C=T.action;typeof C=="function"?a[l+1]=C:(a.splice(l,3),l-=3),p_(a)}}}function m_(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(T){return h=T})},focusReset:"manual",scroll:"manual"})}function r(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),h!==null&&(h(),h=null)}}}function xp(t){this._internalRoot=t}Nf.prototype.render=xp.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=hi();a_(a,l,t,r,null,null)},Nf.prototype.unmount=xp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;a_(t.current,2,null,t,null,null),hf(),r[Ln]=null}};function Nf(t){this._internalRoot=t}Nf.prototype.unstable_scheduleHydration=function(t){if(t){var r=ks();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Wa.length&&r!==0&&r<Wa[a].priority;a++);Wa.splice(a,0,t),a===0&&h_(t)}};var g_=e.version;if(g_!=="19.2.0")throw Error(s(527,g_,"19.2.0"));_e.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=E(r),t=t!==null?R(t):null,t=t===null?null:t.stateNode,t};var yw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:le,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mf.isDisabled&&Mf.supportsFiber)try{ar=Mf.inject(yw),yn=Mf}catch{}}return Yu.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=wy,m=Sy,T=Ay;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError)),r=i_(t,1,!1,null,null,a,l,null,h,m,T,m_),t[Ln]=r.current,cp(t),new xp(r)},Yu.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",m=wy,T=Sy,C=Ay,L=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.formState!==void 0&&(L=a.formState)),r=i_(t,1,!0,r,a??null,l,h,L,m,T,C,m_),r.context=s_(null),a=r.current,l=hi(),l=Ms(l),h=La(l),h.callback=null,Ua(a,h,l),a=l,r.current.lanes=a,Ar(r,a),gs(r),t[Ln]=r.current,cp(t),new Nf(r)},Yu.version="19.2.0",Yu}var C_;function xw(){if(C_)return Np.exports;C_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Np.exports=Iw(),Np.exports}var Ow=xw();const Dw=Tm(Ow);var Ff={exports:{}},Nw=Ff.exports,R_;function Mw(){return R_||(R_=1,(function(i,e){(function(n,s){i.exports=s()})(Nw,function(){var n=function(f,p){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,b){g.__proto__=b}||function(g,b){for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(g[S]=b[S])})(f,p)},s=function(){return(s=Object.assign||function(f){for(var p,g=1,b=arguments.length;g<b;g++)for(var S in p=arguments[g])Object.prototype.hasOwnProperty.call(p,S)&&(f[S]=p[S]);return f}).apply(this,arguments)};function o(f,p,g){for(var b,S=0,A=p.length;S<A;S++)!b&&S in p||((b=b||Array.prototype.slice.call(p,0,S))[S]=p[S]);return f.concat(b||Array.prototype.slice.call(p))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:_w,d=Object.keys,y=Array.isArray;function _(f,p){return typeof p!="object"||d(p).forEach(function(g){f[g]=p[g]}),f}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var E=Object.getPrototypeOf,R={}.hasOwnProperty;function x(f,p){return R.call(f,p)}function M(f,p){typeof p=="function"&&(p=p(E(f))),(typeof Reflect>"u"?d:Reflect.ownKeys)(p).forEach(function(g){re(f,g,p[g])})}var X=Object.defineProperty;function re(f,p,g,b){X(f,p,_(g&&x(g,"get")&&typeof g.get=="function"?{get:g.get,set:g.set,configurable:!0}:{value:g,configurable:!0,writable:!0},b))}function pe(f){return{from:function(p){return f.prototype=Object.create(p.prototype),re(f.prototype,"constructor",f),{extend:M.bind(null,f.prototype)}}}}var Ee=Object.getOwnPropertyDescriptor,ke=[].slice;function Be(f,p,g){return ke.call(f,p,g)}function Ve(f,p){return p(f)}function rt(f){if(!f)throw new Error("Assertion Failed")}function xt(f){u.setImmediate?setImmediate(f):setTimeout(f,0)}function Ge(f,p){if(typeof p=="string"&&x(f,p))return f[p];if(!p)return f;if(typeof p!="string"){for(var g=[],b=0,S=p.length;b<S;++b){var A=Ge(f,p[b]);g.push(A)}return g}var O=p.indexOf(".");if(O!==-1){var N=f[p.substr(0,O)];return N==null?void 0:Ge(N,p.substr(O+1))}}function k(f,p,g){if(f&&p!==void 0&&!("isFrozen"in Object&&Object.isFrozen(f)))if(typeof p!="string"&&"length"in p){rt(typeof g!="string"&&"length"in g);for(var b=0,S=p.length;b<S;++b)k(f,p[b],g[b])}else{var A,O,N=p.indexOf(".");N!==-1?(A=p.substr(0,N),(O=p.substr(N+1))===""?g===void 0?y(f)&&!isNaN(parseInt(A))?f.splice(A,1):delete f[A]:f[A]=g:k(N=!(N=f[A])||!x(f,A)?f[A]={}:N,O,g)):g===void 0?y(f)&&!isNaN(parseInt(p))?f.splice(p,1):delete f[p]:f[p]=g}}function D(f){var p,g={};for(p in f)x(f,p)&&(g[p]=f[p]);return g}var V=[].concat;function G(f){return V.apply([],f)}var Yr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(G([8,16,32,64].map(function(f){return["Int","Uint","Float"].map(function(p){return p+f+"Array"})}))).filter(function(f){return u[f]}),z=new Set(Yr.map(function(f){return u[f]})),Z=null;function P(f){return Z=new WeakMap,f=(function p(g){if(!g||typeof g!="object")return g;var b=Z.get(g);if(b)return b;if(y(g)){b=[],Z.set(g,b);for(var S=0,A=g.length;S<A;++S)b.push(p(g[S]))}else if(z.has(g.constructor))b=g;else{var O,N=E(g);for(O in b=N===Object.prototype?{}:Object.create(N),Z.set(g,b),g)x(g,O)&&(b[O]=p(g[O]))}return b})(f),Z=null,f}var Bt={}.toString;function Ft(f){return Bt.call(f).slice(8,-1)}var le=typeof Symbol<"u"?Symbol.iterator:"@@iterator",_e=typeof le=="symbol"?function(f){var p;return f!=null&&(p=f[le])&&p.apply(f)}:function(){return null};function je(f,p){return p=f.indexOf(p),0<=p&&f.splice(p,1),0<=p}var at={};function ft(f){var p,g,b,S;if(arguments.length===1){if(y(f))return f.slice();if(this===at&&typeof f=="string")return[f];if(S=_e(f)){for(g=[];!(b=S.next()).done;)g.push(b.value);return g}if(f==null)return[f];if(typeof(p=f.length)!="number")return[f];for(g=new Array(p);p--;)g[p]=f[p];return g}for(p=arguments.length,g=new Array(p);p--;)g[p]=arguments[p];return g}var F=typeof Symbol<"u"?function(f){return f[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Gr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Er=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Gr),me={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function xe(f,p){this.name=f,this.message=p}function Le(f,p){return f+". Errors: "+Object.keys(p).map(function(g){return p[g].toString()}).filter(function(g,b,S){return S.indexOf(g)===b}).join(`
`)}function Qe(f,p,g,b){this.failures=p,this.failedKeys=b,this.successCount=g,this.message=Le(f,p)}function Je(f,p){this.name="BulkError",this.failures=Object.keys(p).map(function(g){return p[g]}),this.failuresByPos=p,this.message=Le(f,this.failures)}pe(xe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),pe(Qe).from(xe),pe(Je).from(xe);var dt=Er.reduce(function(f,p){return f[p]=p+"Error",f},{}),gn=xe,Me=Er.reduce(function(f,p){var g=p+"Error";function b(S,A){this.name=g,S?typeof S=="string"?(this.message="".concat(S).concat(A?`
 `+A:""),this.inner=A||null):typeof S=="object"&&(this.message="".concat(S.name," ").concat(S.message),this.inner=S):(this.message=me[p]||g,this.inner=null)}return pe(b).from(gn),f[p]=b,f},{});Me.Syntax=SyntaxError,Me.Type=TypeError,Me.Range=RangeError;var ns=Gr.reduce(function(f,p){return f[p+"Error"]=Me[p],f},{}),zi=Er.reduce(function(f,p){return["Syntax","Type","Range"].indexOf(p)===-1&&(f[p+"Error"]=Me[p]),f},{});function St(){}function di(f){return f}function pi(f,p){return f==null||f===di?p:function(g){return p(f(g))}}function Fr(f,p){return function(){f.apply(this,arguments),p.apply(this,arguments)}}function xs(f,p){return f===St?p:function(){var g=f.apply(this,arguments);g!==void 0&&(arguments[0]=g);var b=this.onsuccess,S=this.onerror;this.onsuccess=null,this.onerror=null;var A=p.apply(this,arguments);return b&&(this.onsuccess=this.onsuccess?Fr(b,this.onsuccess):b),S&&(this.onerror=this.onerror?Fr(S,this.onerror):S),A!==void 0?A:g}}function Eo(f,p){return f===St?p:function(){f.apply(this,arguments);var g=this.onsuccess,b=this.onerror;this.onsuccess=this.onerror=null,p.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?Fr(g,this.onsuccess):g),b&&(this.onerror=this.onerror?Fr(b,this.onerror):b)}}function To(f,p){return f===St?p:function(g){var b=f.apply(this,arguments);_(g,b);var S=this.onsuccess,A=this.onerror;return this.onsuccess=null,this.onerror=null,g=p.apply(this,arguments),S&&(this.onsuccess=this.onsuccess?Fr(S,this.onsuccess):S),A&&(this.onerror=this.onerror?Fr(A,this.onerror):A),b===void 0?g===void 0?void 0:g:_(b,g)}}function hn(f,p){return f===St?p:function(){return p.apply(this,arguments)!==!1&&f.apply(this,arguments)}}function nn(f,p){return f===St?p:function(){var g=f.apply(this,arguments);if(g&&typeof g.then=="function"){for(var b=this,S=arguments.length,A=new Array(S);S--;)A[S]=arguments[S];return g.then(function(){return p.apply(b,A)})}return p.apply(this,arguments)}}zi.ModifyError=Qe,zi.DexieError=xe,zi.BulkError=Je;var Pn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ol(f){Pn=f}var rs={},qn=100,Yr=typeof Promise>"u"?[]:(function(){var f=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[f,E(f),f];var p=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[p,E(p),f]})(),Gr=Yr[0],Er=Yr[1],Yr=Yr[2],Er=Er&&Er.then,Qr=Gr&&Gr.constructor,mi=!!Yr,Os=function(f,p){is.push([f,p]),Ds&&(queueMicrotask(ll),Ds=!1)},ma=!0,Ds=!0,gi=[],ar=[],yn=di,vn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:St,pgp:!1,env:{},finalize:St},Ne=vn,is=[],wr=0,Ns=[];function Ie(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var p=this._PSD=Ne;if(typeof f!="function"){if(f!==rs)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Sr(this,this._value))}this._state=null,this._value=null,++p.ref,(function g(b,S){try{S(function(A){if(b._state===null){if(A===b)throw new TypeError("A promise cannot be resolved with itself.");var O=b._lib&&$n();A&&typeof A.then=="function"?g(b,function(N,j){A instanceof Ie?A._then(N,j):A.then(N,j)}):(b._state=!0,b._value=A,Xr(b)),O&&Ar()}},Sr.bind(null,b))}catch(A){Sr(b,A)}})(this,f)}var Bi={get:function(){var f=Ne,p=or;function g(b,S){var A=this,O=!f.global&&(f!==Ne||p!==or),N=O&&!Ln(),j=new Ie(function(B,$){yr(A,new rn(Vs(b,f,O,N),Vs(S,f,O,N),B,$,f))});return this._consoleTask&&(j._consoleTask=this._consoleTask),j}return g.prototype=rs,g},set:function(f){re(this,"then",f&&f.prototype===rs?Bi:{get:function(){return f},set:Bi.set})}};function rn(f,p,g,b,S){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof p=="function"?p:null,this.resolve=g,this.reject=b,this.psd=S}function Sr(f,p){var g,b;ar.push(p),f._state===null&&(g=f._lib&&$n(),p=yn(p),f._state=!1,f._value=p,b=f,gi.some(function(S){return S._value===b._value})||gi.push(b),Xr(f),g&&Ar())}function Xr(f){var p=f._listeners;f._listeners=[];for(var g=0,b=p.length;g<b;++g)yr(f,p[g]);var S=f._PSD;--S.ref||S.finalize(),wr===0&&(++wr,Os(function(){--wr==0&&wo()},[]))}function yr(f,p){if(f._state!==null){var g=f._state?p.onFulfilled:p.onRejected;if(g===null)return(f._state?p.resolve:p.reject)(f._value);++p.psd.ref,++wr,Os(uu,[g,f,p])}else f._listeners.push(p)}function uu(f,p,g){try{var b,S=p._value;!p._state&&ar.length&&(ar=[]),b=Pn&&p._consoleTask?p._consoleTask.run(function(){return f(S)}):f(S),p._state||ar.indexOf(S)!==-1||(function(A){for(var O=gi.length;O;)if(gi[--O]._value===A._value)return gi.splice(O,1)})(p),g.resolve(b)}catch(A){g.reject(A)}finally{--wr==0&&wo(),--g.psd.ref||g.psd.finalize()}}function ll(){Hn(vn,function(){$n()&&Ar()})}function $n(){var f=ma;return Ds=ma=!1,f}function Ar(){var f,p,g;do for(;0<is.length;)for(f=is,is=[],g=f.length,p=0;p<g;++p){var b=f[p];b[0].apply(null,b[1])}while(0<is.length);Ds=ma=!0}function wo(){var f=gi;gi=[],f.forEach(function(b){b._PSD.onunhandled.call(null,b._value,b)});for(var p=Ns.slice(0),g=p.length;g;)p[--g]()}function yi(f){return new Ie(rs,!1,f)}function kt(f,p){var g=Ne;return function(){var b=$n(),S=Ne;try{return Jr(g,!0),f.apply(this,arguments)}catch(A){p&&p(A)}finally{Jr(S,!1),b&&Ar()}}}M(Ie.prototype,{then:Bi,_then:function(f,p){yr(this,new rn(null,null,f,p,Ne))},catch:function(f){if(arguments.length===1)return this.then(null,f);var p=f,g=arguments[1];return typeof p=="function"?this.then(null,function(b){return(b instanceof p?g:yi)(b)}):this.then(null,function(b){return(b&&b.name===p?g:yi)(b)})},finally:function(f){return this.then(function(p){return Ie.resolve(f()).then(function(){return p})},function(p){return Ie.resolve(f()).then(function(){return yi(p)})})},timeout:function(f,p){var g=this;return f<1/0?new Ie(function(b,S){var A=setTimeout(function(){return S(new Me.Timeout(p))},f);g.then(b,S).finally(clearTimeout.bind(null,A))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&re(Ie.prototype,Symbol.toStringTag,"Dexie.Promise"),vn.env=So(),M(Ie,{all:function(){var f=ft.apply(null,arguments).map(qi);return new Ie(function(p,g){f.length===0&&p([]);var b=f.length;f.forEach(function(S,A){return Ie.resolve(S).then(function(O){f[A]=O,--b||p(f)},g)})})},resolve:function(f){return f instanceof Ie?f:f&&typeof f.then=="function"?new Ie(function(p,g){f.then(p,g)}):new Ie(rs,!0,f)},reject:yi,race:function(){var f=ft.apply(null,arguments).map(qi);return new Ie(function(p,g){f.map(function(b){return Ie.resolve(b).then(p,g)})})},PSD:{get:function(){return Ne},set:function(f){return Ne=f}},totalEchoes:{get:function(){return or}},newPSD:Pt,usePSD:Hn,scheduler:{get:function(){return Os},set:function(f){Os=f}},rejectionMapper:{get:function(){return yn},set:function(f){yn=f}},follow:function(f,p){return new Ie(function(g,b){return Pt(function(S,A){var O=Ne;O.unhandleds=[],O.onunhandled=A,O.finalize=Fr(function(){var N,j=this;N=function(){j.unhandleds.length===0?S():A(j.unhandleds[0])},Ns.push(function B(){N(),Ns.splice(Ns.indexOf(B),1)}),++wr,Os(function(){--wr==0&&wo()},[])},O.finalize),f()},p,g,b)})}}),Qr&&(Qr.allSettled&&re(Ie,"allSettled",function(){var f=ft.apply(null,arguments).map(qi);return new Ie(function(p){f.length===0&&p([]);var g=f.length,b=new Array(g);f.forEach(function(S,A){return Ie.resolve(S).then(function(O){return b[A]={status:"fulfilled",value:O}},function(O){return b[A]={status:"rejected",reason:O}}).then(function(){return--g||p(b)})})})}),Qr.any&&typeof AggregateError<"u"&&re(Ie,"any",function(){var f=ft.apply(null,arguments).map(qi);return new Ie(function(p,g){f.length===0&&g(new AggregateError([]));var b=f.length,S=new Array(b);f.forEach(function(A,O){return Ie.resolve(A).then(function(N){return p(N)},function(N){S[O]=N,--b||g(new AggregateError(S))})})})}),Qr.withResolvers&&(Ie.withResolvers=Qr.withResolvers));var Wt={awaits:0,echoes:0,id:0},Ms=0,Cr=[],ks=0,or=0,$r=0;function Pt(f,p,g,b){var S=Ne,A=Object.create(S);return A.parent=S,A.ref=0,A.global=!1,A.id=++$r,vn.env,A.env=mi?{Promise:Ie,PromiseProp:{value:Ie,configurable:!0,writable:!0},all:Ie.all,race:Ie.race,allSettled:Ie.allSettled,any:Ie.any,resolve:Ie.resolve,reject:Ie.reject}:{},p&&_(A,p),++S.ref,A.finalize=function(){--this.parent.ref||this.parent.finalize()},b=Hn(A,f,g,b),A.ref===0&&A.finalize(),b}function Yt(){return Wt.id||(Wt.id=++Ms),++Wt.awaits,Wt.echoes+=qn,Wt.id}function Ln(){return!!Wt.awaits&&(--Wt.awaits==0&&(Wt.id=0),Wt.echoes=Wt.awaits*qn,!0)}function qi(f){return Wt.echoes&&f&&f.constructor===Qr?(Yt(),f.then(function(p){return Ln(),p},function(p){return Ln(),Rt(p)})):f}function cu(){var f=Cr[Cr.length-1];Cr.pop(),Jr(f,!1)}function Jr(f,p){var g,b=Ne;(p?!Wt.echoes||ks++&&f===Ne:!ks||--ks&&f===Ne)||queueMicrotask(p?(function(S){++or,Wt.echoes&&--Wt.echoes!=0||(Wt.echoes=Wt.awaits=Wt.id=0),Cr.push(Ne),Jr(S,!0)}).bind(null,f):cu),f!==Ne&&(Ne=f,b===vn&&(vn.env=So()),mi&&(g=vn.env.Promise,p=f.env,(b.global||f.global)&&(Object.defineProperty(u,"Promise",p.PromiseProp),g.all=p.all,g.race=p.race,g.resolve=p.resolve,g.reject=p.reject,p.allSettled&&(g.allSettled=p.allSettled),p.any&&(g.any=p.any))))}function So(){var f=u.Promise;return mi?{Promise:f,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:f.all,race:f.race,allSettled:f.allSettled,any:f.any,resolve:f.resolve,reject:f.reject}:{}}function Hn(f,p,g,b,S){var A=Ne;try{return Jr(f,!0),p(g,b,S)}finally{Jr(A,!1)}}function Vs(f,p,g,b){return typeof f!="function"?f:function(){var S=Ne;g&&Yt(),Jr(p,!0);try{return f.apply(this,arguments)}finally{Jr(S,!1),b&&queueMicrotask(Ln)}}}function Rr(f){Promise===Qr&&Wt.echoes===0?ks===0?f():enqueueNativeMicroTask(f):setTimeout(f,0)}(""+Er).indexOf("[native code]")===-1&&(Yt=Ln=St);var Rt=Ie.reject,_n="",Cn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",sn="String expected.",vi=[],ss="__dbnames",Ir="readonly",xr="readwrite";function Wr(f,p){return f?p?function(){return f.apply(this,arguments)&&p.apply(this,arguments)}:f:p}var ga={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function as(f){return typeof f!="string"||/\./.test(f)?function(p){return p}:function(p){return p[f]===void 0&&f in p&&delete(p=P(p))[f],p}}function Ao(){throw Me.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ot(f,p){try{var g=lr(f),b=lr(p);if(g!==b)return g==="Array"?1:b==="Array"?-1:g==="binary"?1:b==="binary"?-1:g==="string"?1:b==="string"?-1:g==="Date"?1:b!=="Date"?NaN:-1;switch(g){case"number":case"Date":case"string":return p<f?1:f<p?-1:0;case"binary":return(function(S,A){for(var O=S.length,N=A.length,j=O<N?O:N,B=0;B<j;++B)if(S[B]!==A[B])return S[B]<A[B]?-1:1;return O===N?0:O<N?-1:1})(an(f),an(p));case"Array":return(function(S,A){for(var O=S.length,N=A.length,j=O<N?O:N,B=0;B<j;++B){var $=ot(S[B],A[B]);if($!==0)return $}return O===N?0:O<N?-1:1})(f,p)}}catch{}return NaN}function lr(f){var p=typeof f;return p!="object"?p:ArrayBuffer.isView(f)?"binary":(f=Ft(f),f==="ArrayBuffer"?"binary":f)}function an(f){return f instanceof Uint8Array?f:ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(f)}function on(f,p,g){var b=f.schema.yProps;return b?(p&&0<g.numFailures&&(p=p.filter(function(S,A){return!g.failures[A]})),Promise.all(b.map(function(S){return S=S.updatesTable,p?f.db.table(S).where("k").anyOf(p).delete():f.db.table(S).clear()})).then(function(){return g})):g}var Or=(ya.prototype.execute=function(f){var p=this["@@propmod"];if(p.add!==void 0){var g=p.add;if(y(g))return o(o([],y(f)?f:[],!0),g).sort();if(typeof g=="number")return(Number(f)||0)+g;if(typeof g=="bigint")try{return BigInt(f)+g}catch{return BigInt(0)+g}throw new TypeError("Invalid term ".concat(g))}if(p.remove!==void 0){var b=p.remove;if(y(b))return y(f)?f.filter(function(S){return!b.includes(S)}).sort():[];if(typeof b=="number")return Number(f)-b;if(typeof b=="bigint")try{return BigInt(f)-b}catch{return BigInt(0)-b}throw new TypeError("Invalid subtrahend ".concat(b))}return g=(g=p.replacePrefix)===null||g===void 0?void 0:g[0],g&&typeof f=="string"&&f.startsWith(g)?p.replacePrefix[1]+f.substring(g.length):f},ya);function ya(f){this["@@propmod"]=f}function Ot(f,p){for(var g=d(p),b=g.length,S=!1,A=0;A<b;++A){var O=g[A],N=p[O],j=Ge(f,O);N instanceof Or?(k(f,O,N.execute(j)),S=!0):j!==N&&(k(f,O,N),S=!0)}return S}var os=(mt.prototype._trans=function(f,p,g){var b=this._tx||Ne.trans,S=this.name,A=Pn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(f==="readonly"?"read":"write"," ").concat(this.name));function O(B,$,U){if(!U.schema[S])throw new Me.NotFound("Table "+S+" not part of transaction");return p(U.idbtrans,U)}var N=$n();try{var j=b&&b.db._novip===this.db._novip?b===Ne.trans?b._promise(f,O,g):Pt(function(){return b._promise(f,O,g)},{trans:b,transless:Ne.transless||Ne}):(function B($,U,W,q){if($.idbdb&&($._state.openComplete||Ne.letThrough||$._vip)){var Y=$._createTransaction(U,W,$._dbSchema);try{Y.create(),$._state.PR1398_maxLoop=3}catch(Q){return Q.name===dt.InvalidState&&$.isOpen()&&0<--$._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),$.close({disableAutoOpen:!1}),$.open().then(function(){return B($,U,W,q)})):Rt(Q)}return Y._promise(U,function(Q,J){return Pt(function(){return Ne.trans=Y,q(Q,J,Y)})}).then(function(Q){if(U==="readwrite")try{Y.idbtrans.commit()}catch{}return U==="readonly"?Q:Y._completion.then(function(){return Q})})}if($._state.openComplete)return Rt(new Me.DatabaseClosed($._state.dbOpenError));if(!$._state.isBeingOpened){if(!$._state.autoOpen)return Rt(new Me.DatabaseClosed);$.open().catch(St)}return $._state.dbReadyPromise.then(function(){return B($,U,W,q)})})(this.db,f,[this.name],O);return A&&(j._consoleTask=A,j=j.catch(function(B){return console.trace(B),Rt(B)})),j}finally{N&&Ar()}},mt.prototype.get=function(f,p){var g=this;return f&&f.constructor===Object?this.where(f).first(p):f==null?Rt(new Me.Type("Invalid argument to Table.get()")):this._trans("readonly",function(b){return g.core.get({trans:b,key:f}).then(function(S){return g.hook.reading.fire(S)})}).then(p)},mt.prototype.where=function(f){if(typeof f=="string")return new this.db.WhereClause(this,f);if(y(f))return new this.db.WhereClause(this,"[".concat(f.join("+"),"]"));var p=d(f);if(p.length===1)return this.where(p[0]).equals(f[p[0]]);var g=this.schema.indexes.concat(this.schema.primKey).filter(function(N){if(N.compound&&p.every(function(B){return 0<=N.keyPath.indexOf(B)})){for(var j=0;j<p.length;++j)if(p.indexOf(N.keyPath[j])===-1)return!1;return!0}return!1}).sort(function(N,j){return N.keyPath.length-j.keyPath.length})[0];if(g&&this.db._maxKey!==_n){var A=g.keyPath.slice(0,p.length);return this.where(A).equals(A.map(function(j){return f[j]}))}!g&&Pn&&console.warn("The query ".concat(JSON.stringify(f)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(p.join("+"),"]"));var b=this.schema.idxByName;function S(N,j){return ot(N,j)===0}var O=p.reduce(function(U,j){var B=U[0],$=U[1],U=b[j],W=f[j];return[B||U,B||!U?Wr($,U&&U.multi?function(q){return q=Ge(q,j),y(q)&&q.some(function(Y){return S(W,Y)})}:function(q){return S(W,Ge(q,j))}):$]},[null,null]),A=O[0],O=O[1];return A?this.where(A.name).equals(f[A.keyPath]).filter(O):g?this.filter(O):this.where(p).equals("")},mt.prototype.filter=function(f){return this.toCollection().and(f)},mt.prototype.count=function(f){return this.toCollection().count(f)},mt.prototype.offset=function(f){return this.toCollection().offset(f)},mt.prototype.limit=function(f){return this.toCollection().limit(f)},mt.prototype.each=function(f){return this.toCollection().each(f)},mt.prototype.toArray=function(f){return this.toCollection().toArray(f)},mt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},mt.prototype.orderBy=function(f){return new this.db.Collection(new this.db.WhereClause(this,y(f)?"[".concat(f.join("+"),"]"):f))},mt.prototype.reverse=function(){return this.toCollection().reverse()},mt.prototype.mapToClass=function(f){var p,g=this.db,b=this.name;function S(){return p!==null&&p.apply(this,arguments)||this}(this.schema.mappedClass=f).prototype instanceof Ao&&((function(j,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function $(){this.constructor=j}n(j,B),j.prototype=B===null?Object.create(B):($.prototype=B.prototype,new $)})(S,p=f),Object.defineProperty(S.prototype,"db",{get:function(){return g},enumerable:!1,configurable:!0}),S.prototype.table=function(){return b},f=S);for(var A=new Set,O=f.prototype;O;O=E(O))Object.getOwnPropertyNames(O).forEach(function(j){return A.add(j)});function N(j){if(!j)return j;var B,$=Object.create(f.prototype);for(B in j)if(!A.has(B))try{$[B]=j[B]}catch{}return $}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=N,this.hook("reading",N),f},mt.prototype.defineClass=function(){return this.mapToClass(function(f){_(this,f)})},mt.prototype.add=function(f,p){var g=this,b=this.schema.primKey,S=b.auto,A=b.keyPath,O=f;return A&&S&&(O=as(A)(f)),this._trans("readwrite",function(N){return g.core.mutate({trans:N,type:"add",keys:p!=null?[p]:null,values:[O]})}).then(function(N){return N.numFailures?Ie.reject(N.failures[0]):N.lastResult}).then(function(N){if(A)try{k(f,A,N)}catch{}return N})},mt.prototype.upsert=function(f,p){var g=this,b=this.schema.primKey.keyPath;return this._trans("readwrite",function(S){return g.core.get({trans:S,key:f}).then(function(A){var O=A??{};return Ot(O,p),b&&k(O,b,f),g.core.mutate({trans:S,type:"put",values:[O],keys:[f],upsert:!0,updates:{keys:[f],changeSpecs:[p]}}).then(function(N){return N.numFailures?Ie.reject(N.failures[0]):!!A})})})},mt.prototype.update=function(f,p){return typeof f!="object"||y(f)?this.where(":id").equals(f).modify(p):(f=Ge(f,this.schema.primKey.keyPath),f===void 0?Rt(new Me.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(f).modify(p))},mt.prototype.put=function(f,p){var g=this,b=this.schema.primKey,S=b.auto,A=b.keyPath,O=f;return A&&S&&(O=as(A)(f)),this._trans("readwrite",function(N){return g.core.mutate({trans:N,type:"put",values:[O],keys:p!=null?[p]:null})}).then(function(N){return N.numFailures?Ie.reject(N.failures[0]):N.lastResult}).then(function(N){if(A)try{k(f,A,N)}catch{}return N})},mt.prototype.delete=function(f){var p=this;return this._trans("readwrite",function(g){return p.core.mutate({trans:g,type:"delete",keys:[f]}).then(function(b){return on(p,[f],b)}).then(function(b){return b.numFailures?Ie.reject(b.failures[0]):void 0})})},mt.prototype.clear=function(){var f=this;return this._trans("readwrite",function(p){return f.core.mutate({trans:p,type:"deleteRange",range:ga}).then(function(g){return on(f,null,g)})}).then(function(p){return p.numFailures?Ie.reject(p.failures[0]):void 0})},mt.prototype.bulkGet=function(f){var p=this;return this._trans("readonly",function(g){return p.core.getMany({keys:f,trans:g}).then(function(b){return b.map(function(S){return p.hook.reading.fire(S)})})})},mt.prototype.bulkAdd=function(f,p,g){var b=this,S=Array.isArray(p)?p:void 0,A=(g=g||(S?void 0:p))?g.allKeys:void 0;return this._trans("readwrite",function(O){var B=b.schema.primKey,N=B.auto,B=B.keyPath;if(B&&S)throw new Me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(S&&S.length!==f.length)throw new Me.InvalidArgument("Arguments objects and keys must have the same length");var j=f.length,B=B&&N?f.map(as(B)):f;return b.core.mutate({trans:O,type:"add",keys:S,values:B,wantResults:A}).then(function(Y){var U=Y.numFailures,W=Y.results,q=Y.lastResult,Y=Y.failures;if(U===0)return A?W:q;throw new Je("".concat(b.name,".bulkAdd(): ").concat(U," of ").concat(j," operations failed"),Y)})})},mt.prototype.bulkPut=function(f,p,g){var b=this,S=Array.isArray(p)?p:void 0,A=(g=g||(S?void 0:p))?g.allKeys:void 0;return this._trans("readwrite",function(O){var B=b.schema.primKey,N=B.auto,B=B.keyPath;if(B&&S)throw new Me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(S&&S.length!==f.length)throw new Me.InvalidArgument("Arguments objects and keys must have the same length");var j=f.length,B=B&&N?f.map(as(B)):f;return b.core.mutate({trans:O,type:"put",keys:S,values:B,wantResults:A}).then(function(Y){var U=Y.numFailures,W=Y.results,q=Y.lastResult,Y=Y.failures;if(U===0)return A?W:q;throw new Je("".concat(b.name,".bulkPut(): ").concat(U," of ").concat(j," operations failed"),Y)})})},mt.prototype.bulkUpdate=function(f){var p=this,g=this.core,b=f.map(function(O){return O.key}),S=f.map(function(O){return O.changes}),A=[];return this._trans("readwrite",function(O){return g.getMany({trans:O,keys:b,cache:"clone"}).then(function(N){var j=[],B=[];f.forEach(function(U,W){var q=U.key,Y=U.changes,Q=N[W];if(Q){for(var J=0,ne=Object.keys(Y);J<ne.length;J++){var ae=ne[J],fe=Y[ae];if(ae===p.schema.primKey.keyPath){if(ot(fe,q)!==0)throw new Me.Constraint("Cannot update primary key in bulkUpdate()")}else k(Q,ae,fe)}A.push(W),j.push(q),B.push(Q)}});var $=j.length;return g.mutate({trans:O,type:"put",keys:j,values:B,updates:{keys:b,changeSpecs:S}}).then(function(U){var W=U.numFailures,q=U.failures;if(W===0)return $;for(var Y=0,Q=Object.keys(q);Y<Q.length;Y++){var J,ne=Q[Y],ae=A[Number(ne)];ae!=null&&(J=q[ne],delete q[ne],q[ae]=J)}throw new Je("".concat(p.name,".bulkUpdate(): ").concat(W," of ").concat($," operations failed"),q)})})})},mt.prototype.bulkDelete=function(f){var p=this,g=f.length;return this._trans("readwrite",function(b){return p.core.mutate({trans:b,type:"delete",keys:f}).then(function(S){return on(p,f,S)})}).then(function(O){var S=O.numFailures,A=O.lastResult,O=O.failures;if(S===0)return A;throw new Je("".concat(p.name,".bulkDelete(): ").concat(S," of ").concat(g," operations failed"),O)})},mt);function mt(){}function Zr(f){function p(O,N){if(N){for(var j=arguments.length,B=new Array(j-1);--j;)B[j-1]=arguments[j];return g[O].subscribe.apply(null,B),f}if(typeof O=="string")return g[O]}var g={};p.addEventType=A;for(var b=1,S=arguments.length;b<S;++b)A(arguments[b]);return p;function A(O,N,j){if(typeof O!="object"){var B;N=N||hn;var $={subscribers:[],fire:j=j||St,subscribe:function(U){$.subscribers.indexOf(U)===-1&&($.subscribers.push(U),$.fire=N($.fire,U))},unsubscribe:function(U){$.subscribers=$.subscribers.filter(function(W){return W!==U}),$.fire=$.subscribers.reduce(N,j)}};return g[O]=p[O]=$}d(B=O).forEach(function(U){var W=B[U];if(y(W))A(U,B[U][0],B[U][1]);else{if(W!=="asap")throw new Me.InvalidArgument("Invalid event config");var q=A(U,di,function(){for(var Y=arguments.length,Q=new Array(Y);Y--;)Q[Y]=arguments[Y];q.subscribers.forEach(function(J){xt(function(){J.apply(null,Q)})})})}})}}function Rn(f,p){return pe(p).from({prototype:f}),p}function ei(f,p){return!(f.filter||f.algorithm||f.or)&&(p?f.justLimit:!f.replayFilter)}function va(f,p){f.filter=Wr(f.filter,p)}function Ps(f,p,g){var b=f.replayFilter;f.replayFilter=b?function(){return Wr(b(),p())}:p,f.justLimit=g&&!b}function ti(f,p){if(f.isPrimKey)return p.primaryKey;var g=p.getIndexByKeyPath(f.index);if(!g)throw new Me.Schema("KeyPath "+f.index+" on object store "+p.name+" is not indexed");return g}function Co(f,p,g){var b=ti(f,p.schema);return p.openCursor({trans:g,values:!f.keysOnly,reverse:f.dir==="prev",unique:!!f.unique,query:{index:b,range:f.range}})}function ni(f,p,g,b){var S=f.replayFilter?Wr(f.filter,f.replayFilter()):f.filter;if(f.or){var A={},O=function(N,j,B){var $,U;S&&!S(j,B,function(W){return j.stop(W)},function(W){return j.fail(W)})||((U=""+($=j.primaryKey))=="[object ArrayBuffer]"&&(U=""+new Uint8Array($)),x(A,U)||(A[U]=!0,p(N,j,B)))};return Promise.all([f.or._iterate(O,g),Jn(Co(f,b,g),f.algorithm,O,!f.keysOnly&&f.valueMapper)])}return Jn(Co(f,b,g),Wr(f.algorithm,S),p,!f.keysOnly&&f.valueMapper)}function Jn(f,p,g,b){var S=kt(b?function(A,O,N){return g(b(A),O,N)}:g);return f.then(function(A){if(A)return A.start(function(){var O=function(){return A.continue()};p&&!p(A,function(N){return O=N},function(N){A.stop(N),O=St},function(N){A.fail(N),O=St})||S(A.value,A,function(N){return O=N}),O()})})}var ul=(pt.prototype._read=function(f,p){var g=this._ctx;return g.error?g.table._trans(null,Rt.bind(null,g.error)):g.table._trans("readonly",f).then(p)},pt.prototype._write=function(f){var p=this._ctx;return p.error?p.table._trans(null,Rt.bind(null,p.error)):p.table._trans("readwrite",f,"locked")},pt.prototype._addAlgorithm=function(f){var p=this._ctx;p.algorithm=Wr(p.algorithm,f)},pt.prototype._iterate=function(f,p){return ni(this._ctx,f,p,this._ctx.table.core)},pt.prototype.clone=function(f){var p=Object.create(this.constructor.prototype),g=Object.create(this._ctx);return f&&_(g,f),p._ctx=g,p},pt.prototype.raw=function(){return this._ctx.valueMapper=null,this},pt.prototype.each=function(f){var p=this._ctx;return this._read(function(g){return ni(p,f,g,p.table.core)})},pt.prototype.count=function(f){var p=this;return this._read(function(g){var b=p._ctx,S=b.table.core;if(ei(b,!0))return S.count({trans:g,query:{index:ti(b,S.schema),range:b.range}}).then(function(O){return Math.min(O,b.limit)});var A=0;return ni(b,function(){return++A,!1},g,S).then(function(){return A})}).then(f)},pt.prototype.sortBy=function(f,p){var g=f.split(".").reverse(),b=g[0],S=g.length-1;function A(j,B){return B?A(j[g[B]],B-1):j[b]}var O=this._ctx.dir==="next"?1:-1;function N(j,B){return ot(A(j,S),A(B,S))*O}return this.toArray(function(j){return j.sort(N)}).then(p)},pt.prototype.toArray=function(f){var p=this;return this._read(function(g){var b=p._ctx;if(b.dir==="next"&&ei(b,!0)&&0<b.limit){var S=b.valueMapper,A=ti(b,b.table.core.schema);return b.table.core.query({trans:g,limit:b.limit,values:!0,query:{index:A,range:b.range}}).then(function(N){return N=N.result,S?N.map(S):N})}var O=[];return ni(b,function(N){return O.push(N)},g,b.table.core).then(function(){return O})},f)},pt.prototype.offset=function(f){var p=this._ctx;return f<=0||(p.offset+=f,ei(p)?Ps(p,function(){var g=f;return function(b,S){return g===0||(g===1?--g:S(function(){b.advance(g),g=0}),!1)}}):Ps(p,function(){var g=f;return function(){return--g<0}})),this},pt.prototype.limit=function(f){return this._ctx.limit=Math.min(this._ctx.limit,f),Ps(this._ctx,function(){var p=f;return function(g,b,S){return--p<=0&&b(S),0<=p}},!0),this},pt.prototype.until=function(f,p){return va(this._ctx,function(g,b,S){return!f(g.value)||(b(S),p)}),this},pt.prototype.first=function(f){return this.limit(1).toArray(function(p){return p[0]}).then(f)},pt.prototype.last=function(f){return this.reverse().first(f)},pt.prototype.filter=function(f){var p;return va(this._ctx,function(g){return f(g.value)}),(p=this._ctx).isMatch=Wr(p.isMatch,f),this},pt.prototype.and=function(f){return this.filter(f)},pt.prototype.or=function(f){return new this.db.WhereClause(this._ctx.table,f,this)},pt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},pt.prototype.desc=function(){return this.reverse()},pt.prototype.eachKey=function(f){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(g,b){f(b.key,b)})},pt.prototype.eachUniqueKey=function(f){return this._ctx.unique="unique",this.eachKey(f)},pt.prototype.eachPrimaryKey=function(f){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(g,b){f(b.primaryKey,b)})},pt.prototype.keys=function(f){var p=this._ctx;p.keysOnly=!p.isMatch;var g=[];return this.each(function(b,S){g.push(S.key)}).then(function(){return g}).then(f)},pt.prototype.primaryKeys=function(f){var p=this._ctx;if(p.dir==="next"&&ei(p,!0)&&0<p.limit)return this._read(function(b){var S=ti(p,p.table.core.schema);return p.table.core.query({trans:b,values:!1,limit:p.limit,query:{index:S,range:p.range}})}).then(function(b){return b.result}).then(f);p.keysOnly=!p.isMatch;var g=[];return this.each(function(b,S){g.push(S.primaryKey)}).then(function(){return g}).then(f)},pt.prototype.uniqueKeys=function(f){return this._ctx.unique="unique",this.keys(f)},pt.prototype.firstKey=function(f){return this.limit(1).keys(function(p){return p[0]}).then(f)},pt.prototype.lastKey=function(f){return this.reverse().firstKey(f)},pt.prototype.distinct=function(){var f=this._ctx,f=f.index&&f.table.schema.idxByName[f.index];if(!f||!f.multi)return this;var p={};return va(this._ctx,function(S){var b=S.primaryKey.toString(),S=x(p,b);return p[b]=!0,!S}),this},pt.prototype.modify=function(f){var p=this,g=this._ctx;return this._write(function(b){var S=typeof f=="function"?f:function(Q){return Ot(Q,f)},A=g.table.core,B=A.schema.primaryKey,O=B.outbound,N=B.extractKey,j=200,B=p.db._options.modifyChunkSize;B&&(j=typeof B=="object"?B[A.name]||B["*"]||200:B);function $(Q,ae){var ne=ae.failures,ae=ae.numFailures;W+=Q-ae;for(var fe=0,ge=d(ne);fe<ge.length;fe++){var Ae=ge[fe];U.push(ne[Ae])}}var U=[],W=0,q=[],Y=f===_a;return p.clone().primaryKeys().then(function(Q){function J(ae){var fe=Math.min(j,Q.length-ae),ge=Q.slice(ae,ae+fe);return(Y?Promise.resolve([]):A.getMany({trans:b,keys:ge,cache:"immutable"})).then(function(Ae){var De=[],Te=[],Re=O?[]:null,Oe=Y?ge:[];if(!Y)for(var we=0;we<fe;++we){var Pe=Ae[we],Ke={value:P(Pe),primKey:Q[ae+we]};S.call(Ke,Ke.value,Ke)!==!1&&(Ke.value==null?Oe.push(Q[ae+we]):O||ot(N(Pe),N(Ke.value))===0?(Te.push(Ke.value),O&&Re.push(Q[ae+we])):(Oe.push(Q[ae+we]),De.push(Ke.value)))}return Promise.resolve(0<De.length&&A.mutate({trans:b,type:"add",values:De}).then(function(Ze){for(var lt in Ze.failures)Oe.splice(parseInt(lt),1);$(De.length,Ze)})).then(function(){return(0<Te.length||ne&&typeof f=="object")&&A.mutate({trans:b,type:"put",keys:Re,values:Te,criteria:ne,changeSpec:typeof f!="function"&&f,isAdditionalChunk:0<ae}).then(function(Ze){return $(Te.length,Ze)})}).then(function(){return(0<Oe.length||ne&&Y)&&A.mutate({trans:b,type:"delete",keys:Oe,criteria:ne,isAdditionalChunk:0<ae}).then(function(Ze){return on(g.table,Oe,Ze)}).then(function(Ze){return $(Oe.length,Ze)})}).then(function(){return Q.length>ae+fe&&J(ae+j)})})}var ne=ei(g)&&g.limit===1/0&&(typeof f!="function"||Y)&&{index:g.index,range:g.range};return J(0).then(function(){if(0<U.length)throw new Qe("Error modifying one or more objects",U,W,q);return Q.length})})})},pt.prototype.delete=function(){var f=this._ctx,p=f.range;return!ei(f)||f.table.schema.yProps||!f.isPrimKey&&p.type!==3?this.modify(_a):this._write(function(g){var b=f.table.core.schema.primaryKey,S=p;return f.table.core.count({trans:g,query:{index:b,range:S}}).then(function(A){return f.table.core.mutate({trans:g,type:"deleteRange",range:S}).then(function(j){var N=j.failures,j=j.numFailures;if(j)throw new Qe("Could not delete some values",Object.keys(N).map(function(B){return N[B]}),A-j);return A-j})})})},pt);function pt(){}var _a=function(f,p){return p.value=null};function ba(f,p){return f<p?-1:f===p?0:1}function cl(f,p){return p<f?-1:f===p?0:1}function dn(f,p,g){return f=f instanceof Hi?new f.Collection(f):f,f._ctx.error=new(g||TypeError)(p),f}function ri(f){return new f.Collection(f,function(){return vr("")}).limit(0)}function ur(f,p,g,b){var S,A,O,N,j,B,$,U=g.length;if(!g.every(function(Y){return typeof Y=="string"}))return dn(f,sn);function W(Y){S=Y==="next"?function(J){return J.toUpperCase()}:function(J){return J.toLowerCase()},A=Y==="next"?function(J){return J.toLowerCase()}:function(J){return J.toUpperCase()},O=Y==="next"?ba:cl;var Q=g.map(function(J){return{lower:A(J),upper:S(J)}}).sort(function(J,ne){return O(J.lower,ne.lower)});N=Q.map(function(J){return J.upper}),j=Q.map(function(J){return J.lower}),$=(B=Y)==="next"?"":b}W("next"),f=new f.Collection(f,function(){return Dr(N[0],j[U-1]+b)}),f._ondirectionchange=function(Y){W(Y)};var q=0;return f._addAlgorithm(function(Y,Q,J){var ne=Y.key;if(typeof ne!="string")return!1;var ae=A(ne);if(p(ae,j,q))return!0;for(var fe=null,ge=q;ge<U;++ge){var Ae=(function(De,Te,Re,Oe,we,Pe){for(var Ke=Math.min(De.length,Oe.length),Ze=-1,lt=0;lt<Ke;++lt){var Gn=Te[lt];if(Gn!==Oe[lt])return we(De[lt],Re[lt])<0?De.substr(0,lt)+Re[lt]+Re.substr(lt+1):we(De[lt],Oe[lt])<0?De.substr(0,lt)+Oe[lt]+Re.substr(lt+1):0<=Ze?De.substr(0,Ze)+Te[Ze]+Re.substr(Ze+1):null;we(De[lt],Gn)<0&&(Ze=lt)}return Ke<Oe.length&&Pe==="next"?De+Re.substr(De.length):Ke<De.length&&Pe==="prev"?De.substr(0,Re.length):Ze<0?null:De.substr(0,Ze)+Oe[Ze]+Re.substr(Ze+1)})(ne,ae,N[ge],j[ge],O,B);Ae===null&&fe===null?q=ge+1:(fe===null||0<O(fe,Ae))&&(fe=Ae)}return Q(fe!==null?function(){Y.continue(fe+$)}:J),!1}),f}function Dr(f,p,g,b){return{type:2,lower:f,upper:p,lowerOpen:g,upperOpen:b}}function vr(f){return{type:1,lower:f,upper:f}}var Hi=(Object.defineProperty(Lt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Lt.prototype.between=function(f,p,g,b){g=g!==!1,b=b===!0;try{return 0<this._cmp(f,p)||this._cmp(f,p)===0&&(g||b)&&(!g||!b)?ri(this):new this.Collection(this,function(){return Dr(f,p,!g,!b)})}catch{return dn(this,Cn)}},Lt.prototype.equals=function(f){return f==null?dn(this,Cn):new this.Collection(this,function(){return vr(f)})},Lt.prototype.above=function(f){return f==null?dn(this,Cn):new this.Collection(this,function(){return Dr(f,void 0,!0)})},Lt.prototype.aboveOrEqual=function(f){return f==null?dn(this,Cn):new this.Collection(this,function(){return Dr(f,void 0,!1)})},Lt.prototype.below=function(f){return f==null?dn(this,Cn):new this.Collection(this,function(){return Dr(void 0,f,!1,!0)})},Lt.prototype.belowOrEqual=function(f){return f==null?dn(this,Cn):new this.Collection(this,function(){return Dr(void 0,f)})},Lt.prototype.startsWith=function(f){return typeof f!="string"?dn(this,sn):this.between(f,f+_n,!0,!0)},Lt.prototype.startsWithIgnoreCase=function(f){return f===""?this.startsWith(f):ur(this,function(p,g){return p.indexOf(g[0])===0},[f],_n)},Lt.prototype.equalsIgnoreCase=function(f){return ur(this,function(p,g){return p===g[0]},[f],"")},Lt.prototype.anyOfIgnoreCase=function(){var f=ft.apply(at,arguments);return f.length===0?ri(this):ur(this,function(p,g){return g.indexOf(p)!==-1},f,"")},Lt.prototype.startsWithAnyOfIgnoreCase=function(){var f=ft.apply(at,arguments);return f.length===0?ri(this):ur(this,function(p,g){return g.some(function(b){return p.indexOf(b)===0})},f,_n)},Lt.prototype.anyOf=function(){var f=this,p=ft.apply(at,arguments),g=this._cmp;try{p.sort(g)}catch{return dn(this,Cn)}if(p.length===0)return ri(this);var b=new this.Collection(this,function(){return Dr(p[0],p[p.length-1])});b._ondirectionchange=function(A){g=A==="next"?f._ascending:f._descending,p.sort(g)};var S=0;return b._addAlgorithm(function(A,O,N){for(var j=A.key;0<g(j,p[S]);)if(++S===p.length)return O(N),!1;return g(j,p[S])===0||(O(function(){A.continue(p[S])}),!1)}),b},Lt.prototype.notEqual=function(f){return this.inAnyRange([[-1/0,f],[f,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Lt.prototype.noneOf=function(){var f=ft.apply(at,arguments);if(f.length===0)return new this.Collection(this);try{f.sort(this._ascending)}catch{return dn(this,Cn)}var p=f.reduce(function(g,b){return g?g.concat([[g[g.length-1][1],b]]):[[-1/0,b]]},null);return p.push([f[f.length-1],this.db._maxKey]),this.inAnyRange(p,{includeLowers:!1,includeUppers:!1})},Lt.prototype.inAnyRange=function(ne,p){var g=this,b=this._cmp,S=this._ascending,A=this._descending,O=this._min,N=this._max;if(ne.length===0)return ri(this);if(!ne.every(function(ae){return ae[0]!==void 0&&ae[1]!==void 0&&S(ae[0],ae[1])<=0}))return dn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Me.InvalidArgument);var j=!p||p.includeLowers!==!1,B=p&&p.includeUppers===!0,$,U=S;function W(ae,fe){return U(ae[0],fe[0])}try{($=ne.reduce(function(ae,fe){for(var ge=0,Ae=ae.length;ge<Ae;++ge){var De=ae[ge];if(b(fe[0],De[1])<0&&0<b(fe[1],De[0])){De[0]=O(De[0],fe[0]),De[1]=N(De[1],fe[1]);break}}return ge===Ae&&ae.push(fe),ae},[])).sort(W)}catch{return dn(this,Cn)}var q=0,Y=B?function(ae){return 0<S(ae,$[q][1])}:function(ae){return 0<=S(ae,$[q][1])},Q=j?function(ae){return 0<A(ae,$[q][0])}:function(ae){return 0<=A(ae,$[q][0])},J=Y,ne=new this.Collection(this,function(){return Dr($[0][0],$[$.length-1][1],!j,!B)});return ne._ondirectionchange=function(ae){U=ae==="next"?(J=Y,S):(J=Q,A),$.sort(W)},ne._addAlgorithm(function(ae,fe,ge){for(var Ae,De=ae.key;J(De);)if(++q===$.length)return fe(ge),!1;return!Y(Ae=De)&&!Q(Ae)||(g._cmp(De,$[q][1])===0||g._cmp(De,$[q][0])===0||fe(function(){U===S?ae.continue($[q][0]):ae.continue($[q][1])}),!1)}),ne},Lt.prototype.startsWithAnyOf=function(){var f=ft.apply(at,arguments);return f.every(function(p){return typeof p=="string"})?f.length===0?ri(this):this.inAnyRange(f.map(function(p){return[p,p+_n]})):dn(this,"startsWithAnyOf() only works with strings")},Lt);function Lt(){}function Kn(f){return kt(function(p){return _i(p),f(p.target.error),!1})}function _i(f){f.stopPropagation&&f.stopPropagation(),f.preventDefault&&f.preventDefault()}var Nr="storagemutated",_r="x-storagemutated-1",bn=Zr(null,Nr),Ls=(ht.prototype._lock=function(){return rt(!Ne.global),++this._reculock,this._reculock!==1||Ne.global||(Ne.lockOwnerFor=this),this},ht.prototype._unlock=function(){if(rt(!Ne.global),--this._reculock==0)for(Ne.global||(Ne.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var f=this._blockedFuncs.shift();try{Hn(f[1],f[0])}catch{}}return this},ht.prototype._locked=function(){return this._reculock&&Ne.lockOwnerFor!==this},ht.prototype.create=function(f){var p=this;if(!this.mode)return this;var g=this.db.idbdb,b=this.db._state.dbOpenError;if(rt(!this.idbtrans),!f&&!g)switch(b&&b.name){case"DatabaseClosedError":throw new Me.DatabaseClosed(b);case"MissingAPIError":throw new Me.MissingAPI(b.message,b);default:throw new Me.OpenFailed(b)}if(!this.active)throw new Me.TransactionInactive;return rt(this._completion._state===null),(f=this.idbtrans=f||(this.db.core||g).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=kt(function(S){_i(S),p._reject(f.error)}),f.onabort=kt(function(S){_i(S),p.active&&p._reject(new Me.Abort(f.error)),p.active=!1,p.on("abort").fire(S)}),f.oncomplete=kt(function(){p.active=!1,p._resolve(),"mutatedParts"in f&&bn.storagemutated.fire(f.mutatedParts)}),this},ht.prototype._promise=function(f,p,g){var b=this;if(f==="readwrite"&&this.mode!=="readwrite")return Rt(new Me.ReadOnly("Transaction is readonly"));if(!this.active)return Rt(new Me.TransactionInactive);if(this._locked())return new Ie(function(A,O){b._blockedFuncs.push([function(){b._promise(f,p,g).then(A,O)},Ne])});if(g)return Pt(function(){var A=new Ie(function(O,N){b._lock();var j=p(O,N,b);j&&j.then&&j.then(O,N)});return A.finally(function(){return b._unlock()}),A._lib=!0,A});var S=new Ie(function(A,O){var N=p(A,O,b);N&&N.then&&N.then(A,O)});return S._lib=!0,S},ht.prototype._root=function(){return this.parent?this.parent._root():this},ht.prototype.waitFor=function(f){var p,g=this._root(),b=Ie.resolve(f);g._waitingFor?g._waitingFor=g._waitingFor.then(function(){return b}):(g._waitingFor=b,g._waitingQueue=[],p=g.idbtrans.objectStore(g.storeNames[0]),(function A(){for(++g._spinCount;g._waitingQueue.length;)g._waitingQueue.shift()();g._waitingFor&&(p.get(-1/0).onsuccess=A)})());var S=g._waitingFor;return new Ie(function(A,O){b.then(function(N){return g._waitingQueue.push(kt(A.bind(null,N)))},function(N){return g._waitingQueue.push(kt(O.bind(null,N)))}).finally(function(){g._waitingFor===S&&(g._waitingFor=null)})})},ht.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Me.Abort))},ht.prototype.table=function(f){var p=this._memoizedTables||(this._memoizedTables={});if(x(p,f))return p[f];var g=this.schema[f];if(!g)throw new Me.NotFound("Table "+f+" not part of transaction");return g=new this.db.Table(f,g,this),g.core=this.db.core.table(f),p[f]=g},ht);function ht(){}function Mr(f,p,g,b,S,A,O,N){return{name:f,keyPath:p,unique:g,multi:b,auto:S,compound:A,src:(g&&!O?"&":"")+(b?"*":"")+(S?"++":"")+Ea(p),type:N}}function Ea(f){return typeof f=="string"?f:f?"["+[].join.call(f,"+")+"]":""}function Ki(f,p,g){return{name:f,primKey:p,indexes:g,mappedClass:null,idxByName:(b=function(S){return[S.name,S]},g.reduce(function(S,A,O){return O=b(A,O),O&&(S[O[0]]=O[1]),S},{}))};var b}var Fi=function(f){try{return f.only([[]]),Fi=function(){return[[]]},[[]]}catch{return Fi=function(){return _n},_n}};function Gi(f){return f==null?function(){}:typeof f=="string"?(p=f).split(".").length===1?function(g){return g[p]}:function(g){return Ge(g,p)}:function(g){return Ge(g,f)};var p}function bi(f){return[].slice.call(f)}var ii=0;function ln(f){return f==null?":id":typeof f=="string"?f:"[".concat(f.join("+"),"]")}function Yi(f,p,j){function b(J){if(J.type===3)return null;if(J.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var q=J.lower,Y=J.upper,Q=J.lowerOpen,J=J.upperOpen;return q===void 0?Y===void 0?null:p.upperBound(Y,!!J):Y===void 0?p.lowerBound(q,!!Q):p.bound(q,Y,!!Q,!!J)}function S(W){var q,Y=W.name;return{name:Y,schema:W,mutate:function(Q){var J=Q.trans,ne=Q.type,ae=Q.keys,fe=Q.values,ge=Q.range;return new Promise(function(Ae,De){Ae=kt(Ae);var Te=J.objectStore(Y),Re=Te.keyPath==null,Oe=ne==="put"||ne==="add";if(!Oe&&ne!=="delete"&&ne!=="deleteRange")throw new Error("Invalid operation type: "+ne);var we,Pe=(ae||fe||{length:1}).length;if(ae&&fe&&ae.length!==fe.length)throw new Error("Given keys array must have same length as given values array.");if(Pe===0)return Ae({numFailures:0,failures:{},results:[],lastResult:void 0});function Ke(xn){++Gn,_i(xn)}var Ze=[],lt=[],Gn=0;if(ne==="deleteRange"){if(ge.type===4)return Ae({numFailures:Gn,failures:lt,results:[],lastResult:void 0});ge.type===3?Ze.push(we=Te.clear()):Ze.push(we=Te.delete(b(ge)))}else{var Re=Oe?Re?[fe,ae]:[fe,null]:[ae,null],We=Re[0],In=Re[1];if(Oe)for(var Zt=0;Zt<Pe;++Zt)Ze.push(we=In&&In[Zt]!==void 0?Te[ne](We[Zt],In[Zt]):Te[ne](We[Zt])),we.onerror=Ke;else for(Zt=0;Zt<Pe;++Zt)Ze.push(we=Te[ne](We[Zt])),we.onerror=Ke}function No(xn){xn=xn.target.result,Ze.forEach(function(Ur,du){return Ur.error!=null&&(lt[du]=Ur.error)}),Ae({numFailures:Gn,failures:lt,results:ne==="delete"?ae:Ze.map(function(Ur){return Ur.result}),lastResult:xn})}we.onerror=function(xn){Ke(xn),No(xn)},we.onsuccess=No})},getMany:function(Q){var J=Q.trans,ne=Q.keys;return new Promise(function(ae,fe){ae=kt(ae);for(var ge,Ae=J.objectStore(Y),De=ne.length,Te=new Array(De),Re=0,Oe=0,we=function(Ze){Ze=Ze.target,Te[Ze._pos]=Ze.result,++Oe===Re&&ae(Te)},Pe=Kn(fe),Ke=0;Ke<De;++Ke)ne[Ke]!=null&&((ge=Ae.get(ne[Ke]))._pos=Ke,ge.onsuccess=we,ge.onerror=Pe,++Re);Re===0&&ae(Te)})},get:function(Q){var J=Q.trans,ne=Q.key;return new Promise(function(ae,fe){ae=kt(ae);var ge=J.objectStore(Y).get(ne);ge.onsuccess=function(Ae){return ae(Ae.target.result)},ge.onerror=Kn(fe)})},query:(q=B,function(Q){return new Promise(function(J,ne){J=kt(J);var ae,fe,ge,Re=Q.trans,Ae=Q.values,De=Q.limit,we=Q.query,Te=De===1/0?void 0:De,Oe=we.index,we=we.range,Re=Re.objectStore(Y),Oe=Oe.isPrimaryKey?Re:Re.index(Oe.name),we=b(we);if(De===0)return J({result:[]});q?((Te=Ae?Oe.getAll(we,Te):Oe.getAllKeys(we,Te)).onsuccess=function(Pe){return J({result:Pe.target.result})},Te.onerror=Kn(ne)):(ae=0,fe=!Ae&&"openKeyCursor"in Oe?Oe.openKeyCursor(we):Oe.openCursor(we),ge=[],fe.onsuccess=function(Pe){var Ke=fe.result;return Ke?(ge.push(Ae?Ke.value:Ke.primaryKey),++ae===De?J({result:ge}):void Ke.continue()):J({result:ge})},fe.onerror=Kn(ne))})}),openCursor:function(Q){var J=Q.trans,ne=Q.values,ae=Q.query,fe=Q.reverse,ge=Q.unique;return new Promise(function(Ae,De){Ae=kt(Ae);var Oe=ae.index,Te=ae.range,Re=J.objectStore(Y),Re=Oe.isPrimaryKey?Re:Re.index(Oe.name),Oe=fe?ge?"prevunique":"prev":ge?"nextunique":"next",we=!ne&&"openKeyCursor"in Re?Re.openKeyCursor(b(Te),Oe):Re.openCursor(b(Te),Oe);we.onerror=Kn(De),we.onsuccess=kt(function(Pe){var Ke,Ze,lt,Gn,We=we.result;We?(We.___id=++ii,We.done=!1,Ke=We.continue.bind(We),Ze=(Ze=We.continuePrimaryKey)&&Ze.bind(We),lt=We.advance.bind(We),Gn=function(){throw new Error("Cursor not stopped")},We.trans=J,We.stop=We.continue=We.continuePrimaryKey=We.advance=function(){throw new Error("Cursor not started")},We.fail=kt(De),We.next=function(){var In=this,Zt=1;return this.start(function(){return Zt--?In.continue():In.stop()}).then(function(){return In})},We.start=function(In){function Zt(){if(we.result)try{In()}catch(xn){We.fail(xn)}else We.done=!0,We.start=function(){throw new Error("Cursor behind last entry")},We.stop()}var No=new Promise(function(xn,Ur){xn=kt(xn),we.onerror=Kn(Ur),We.fail=Ur,We.stop=function(du){We.stop=We.continue=We.continuePrimaryKey=We.advance=Gn,xn(du)}});return we.onsuccess=kt(function(xn){we.onsuccess=Zt,Zt()}),We.continue=Ke,We.continuePrimaryKey=Ze,We.advance=lt,Zt(),No},Ae(We)):Ae(null)},De)})},count:function(Q){var J=Q.query,ne=Q.trans,ae=J.index,fe=J.range;return new Promise(function(ge,Ae){var De=ne.objectStore(Y),Te=ae.isPrimaryKey?De:De.index(ae.name),De=b(fe),Te=De?Te.count(De):Te.count();Te.onsuccess=kt(function(Re){return ge(Re.target.result)}),Te.onerror=Kn(Ae)})}}}var A,O,N,$=(O=j,N=bi((A=f).objectStoreNames),{schema:{name:A.name,tables:N.map(function(W){return O.objectStore(W)}).map(function(W){var q=W.keyPath,J=W.autoIncrement,Y=y(q),Q={},J={name:W.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:q==null,compound:Y,keyPath:q,autoIncrement:J,unique:!0,extractKey:Gi(q)},indexes:bi(W.indexNames).map(function(ne){return W.index(ne)}).map(function(ge){var ae=ge.name,fe=ge.unique,Ae=ge.multiEntry,ge=ge.keyPath,Ae={name:ae,compound:y(ge),keyPath:ge,unique:fe,multiEntry:Ae,extractKey:Gi(ge)};return Q[ln(ge)]=Ae}),getIndexByKeyPath:function(ne){return Q[ln(ne)]}};return Q[":id"]=J.primaryKey,q!=null&&(Q[ln(q)]=J.primaryKey),J})},hasGetAll:0<N.length&&"getAll"in O.objectStore(N[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),j=$.schema,B=$.hasGetAll,$=j.tables.map(S),U={};return $.forEach(function(W){return U[W.name]=W}),{stack:"dbcore",transaction:f.transaction.bind(f),table:function(W){if(!U[W])throw new Error("Table '".concat(W,"' not found"));return U[W]},MIN_KEY:-1/0,MAX_KEY:Fi(p),schema:j}}function Ei(f,p,g,b){var S=g.IDBKeyRange;return g.indexedDB,{dbcore:(b=Yi(p,S,b),f.dbcore.reduce(function(A,O){return O=O.create,s(s({},A),O(A))},b))}}function si(f,b){var g=b.db,b=Ei(f._middlewares,g,f._deps,b);f.core=b.dbcore,f.tables.forEach(function(S){var A=S.name;f.core.schema.tables.some(function(O){return O.name===A})&&(S.core=f.core.table(A),f[A]instanceof f.Table&&(f[A].core=S.core))})}function ls(f,p,g,b){g.forEach(function(S){var A=b[S];p.forEach(function(O){var N=(function j(B,$){return Ee(B,$)||(B=E(B))&&j(B,$)})(O,S);(!N||"value"in N&&N.value===void 0)&&(O===f.Transaction.prototype||O instanceof f.Transaction?re(O,S,{get:function(){return this.table(S)},set:function(j){X(this,S,{value:j,writable:!0,configurable:!0,enumerable:!0})}}):O[S]=new f.Table(S,A))})})}function Ti(f,p){p.forEach(function(g){for(var b in g)g[b]instanceof f.Table&&delete g[b]})}function Ta(f,p){return f._cfg.version-p._cfg.version}function wi(f,p,g,b){var S=f._dbSchema;g.objectStoreNames.contains("$meta")&&!S.$meta&&(S.$meta=Ki("$meta",Io("")[0],[]),f._storeNames.push("$meta"));var A=f._createTransaction("readwrite",f._storeNames,S);A.create(g),A._completion.catch(b);var O=A._reject.bind(A),N=Ne.transless||Ne;Pt(function(){return Ne.trans=A,Ne.transless=N,p!==0?(si(f,g),B=p,((j=A).storeNames.includes("$meta")?j.table("$meta").get("version").then(function($){return $??B}):Ie.resolve(B)).then(function($){return W=$,q=A,Y=g,Q=[],$=(U=f)._versions,J=U._dbSchema=Si(0,U.idbdb,Y),($=$.filter(function(ne){return ne._cfg.version>=W})).length!==0?($.forEach(function(ne){Q.push(function(){var ae=J,fe=ne._cfg.dbschema;us(U,ae,Y),us(U,fe,Y),J=U._dbSchema=fe;var ge=Us(ae,fe);ge.add.forEach(function(Oe){Qi(Y,Oe[0],Oe[1].primKey,Oe[1].indexes)}),ge.change.forEach(function(Oe){if(Oe.recreate)throw new Me.Upgrade("Not yet support for changing primary key");var we=Y.objectStore(Oe.name);Oe.add.forEach(function(Pe){return js(we,Pe)}),Oe.change.forEach(function(Pe){we.deleteIndex(Pe.name),js(we,Pe)}),Oe.del.forEach(function(Pe){return we.deleteIndex(Pe)})});var Ae=ne._cfg.contentUpgrade;if(Ae&&ne._cfg.version>W){si(U,Y),q._memoizedTables={};var De=D(fe);ge.del.forEach(function(Oe){De[Oe]=ae[Oe]}),Ti(U,[U.Transaction.prototype]),ls(U,[U.Transaction.prototype],d(De),De),q.schema=De;var Te,Re=F(Ae);return Re&&Yt(),ge=Ie.follow(function(){var Oe;(Te=Ae(q))&&Re&&(Oe=Ln.bind(null,null),Te.then(Oe,Oe))}),Te&&typeof Te.then=="function"?Ie.resolve(Te):ge.then(function(){return Te})}}),Q.push(function(ae){var fe,ge,Ae=ne._cfg.dbschema;fe=Ae,ge=ae,[].slice.call(ge.db.objectStoreNames).forEach(function(De){return fe[De]==null&&ge.db.deleteObjectStore(De)}),Ti(U,[U.Transaction.prototype]),ls(U,[U.Transaction.prototype],U._storeNames,U._dbSchema),q.schema=U._dbSchema}),Q.push(function(ae){U.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(U.idbdb.version/10)===ne._cfg.version?(U.idbdb.deleteObjectStore("$meta"),delete U._dbSchema.$meta,U._storeNames=U._storeNames.filter(function(fe){return fe!=="$meta"})):ae.objectStore("$meta").put(ne._cfg.version,"version"))})}),(function ne(){return Q.length?Ie.resolve(Q.shift()(q.idbtrans)).then(ne):Ie.resolve()})().then(function(){Ro(J,Y)})):Ie.resolve();var U,W,q,Y,Q,J}).catch(O)):(d(S).forEach(function($){Qi(g,$,S[$].primKey,S[$].indexes)}),si(f,g),void Ie.follow(function(){return f.on.populate.fire(A)}).catch(O));var j,B})}function wa(f,p){Ro(f._dbSchema,p),p.db.version%10!=0||p.objectStoreNames.contains("$meta")||p.db.createObjectStore("$meta").add(Math.ceil(p.db.version/10-1),"version");var g=Si(0,f.idbdb,p);us(f,f._dbSchema,p);for(var b=0,S=Us(g,f._dbSchema).change;b<S.length;b++){var A=(function(O){if(O.change.length||O.recreate)return console.warn("Unable to patch indexes of table ".concat(O.name," because it has changes on the type of index or primary key.")),{value:void 0};var N=p.objectStore(O.name);O.add.forEach(function(j){Pn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(O.name,".").concat(j.src)),js(N,j)})})(S[b]);if(typeof A=="object")return A.value}}function Us(f,p){var g,b={del:[],add:[],change:[]};for(g in f)p[g]||b.del.push(g);for(g in p){var S=f[g],A=p[g];if(S){var O={name:g,def:A,recreate:!1,del:[],add:[],change:[]};if(""+(S.primKey.keyPath||"")!=""+(A.primKey.keyPath||"")||S.primKey.auto!==A.primKey.auto)O.recreate=!0,b.change.push(O);else{var N=S.idxByName,j=A.idxByName,B=void 0;for(B in N)j[B]||O.del.push(B);for(B in j){var $=N[B],U=j[B];$?$.src!==U.src&&O.change.push(U):O.add.push(U)}(0<O.del.length||0<O.add.length||0<O.change.length)&&b.change.push(O)}}else b.add.push([g,A])}return b}function Qi(f,p,g,b){var S=f.db.createObjectStore(p,g.keyPath?{keyPath:g.keyPath,autoIncrement:g.auto}:{autoIncrement:g.auto});return b.forEach(function(A){return js(S,A)}),S}function Ro(f,p){d(f).forEach(function(g){p.db.objectStoreNames.contains(g)||(Pn&&console.debug("Dexie: Creating missing table",g),Qi(p,g,f[g].primKey,f[g].indexes))})}function js(f,p){f.createIndex(p.name,p.keyPath,{unique:p.unique,multiEntry:p.multi})}function Si(f,p,g){var b={};return Be(p.objectStoreNames,0).forEach(function(S){for(var A=g.objectStore(S),O=Mr(Ea(B=A.keyPath),B||"",!0,!1,!!A.autoIncrement,B&&typeof B!="string",!0),N=[],j=0;j<A.indexNames.length;++j){var $=A.index(A.indexNames[j]),B=$.keyPath,$=Mr($.name,B,!!$.unique,!!$.multiEntry,!1,B&&typeof B!="string",!1);N.push($)}b[S]=Ki(S,O,N)}),b}function us(f,p,g){for(var b=g.db.objectStoreNames,S=0;S<b.length;++S){var A=b[S],O=g.objectStore(A);f._hasGetAll="getAll"in O;for(var N=0;N<O.indexNames.length;++N){var j=O.indexNames[N],B=O.index(j).keyPath,$=typeof B=="string"?B:"["+Be(B).join("+")+"]";!p[A]||(B=p[A].idxByName[$])&&(B.name=j,delete p[A].idxByName[$],p[A].idxByName[j]=B)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(f._hasGetAll=!1)}function Io(f){return f.split(",").map(function(p,g){var A=p.split(":"),b=(S=A[1])===null||S===void 0?void 0:S.trim(),S=(p=A[0].trim()).replace(/([&*]|\+\+)/g,""),A=/^\[/.test(S)?S.match(/^\[(.*)\]$/)[1].split("+"):S;return Mr(S,A||null,/\&/.test(p),/\*/.test(p),/\+\+/.test(p),y(A),g===0,b)})}var Sa=(Xi.prototype._createTableSchema=Ki,Xi.prototype._parseIndexSyntax=Io,Xi.prototype._parseStoresSpec=function(f,p){var g=this;d(f).forEach(function(b){if(f[b]!==null){var S=g._parseIndexSyntax(f[b]),A=S.shift();if(!A)throw new Me.Schema("Invalid schema for table "+b+": "+f[b]);if(A.unique=!0,A.multi)throw new Me.Schema("Primary key cannot be multiEntry*");S.forEach(function(O){if(O.auto)throw new Me.Schema("Only primary key can be marked as autoIncrement (++)");if(!O.keyPath)throw new Me.Schema("Index must have a name and cannot be an empty string")}),S=g._createTableSchema(b,A,S),p[b]=S}})},Xi.prototype.stores=function(g){var p=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,g):g;var g=p._versions,b={},S={};return g.forEach(function(A){_(b,A._cfg.storesSource),S=A._cfg.dbschema={},A._parseStoresSpec(b,S)}),p._dbSchema=S,Ti(p,[p._allTables,p,p.Transaction.prototype]),ls(p,[p._allTables,p,p.Transaction.prototype,this._cfg.tables],d(S),S),p._storeNames=d(S),this},Xi.prototype.upgrade=function(f){return this._cfg.contentUpgrade=nn(this._cfg.contentUpgrade||St,f),this},Xi);function Xi(){}function Aa(f,p){var g=f._dbNamesDB;return g||(g=f._dbNamesDB=new Ci(ss,{addons:[],indexedDB:f,IDBKeyRange:p})).version(1).stores({dbnames:"name"}),g.table("dbnames")}function kr(f){return f&&typeof f.databases=="function"}function Ca(f){return Pt(function(){return Ne.letThrough=!0,f()})}function Ra(f){return!("from"in f)}var En=function(f,p){if(!this){var g=new En;return f&&"d"in f&&_(g,f),g}_(this,arguments.length?{d:1,from:f,to:1<arguments.length?p:f}:{d:0})};function cs(f,p,g){var b=ot(p,g);if(!isNaN(b)){if(0<b)throw RangeError();if(Ra(f))return _(f,{from:p,to:g,d:1});var S=f.l,b=f.r;if(ot(g,f.from)<0)return S?cs(S,p,g):f.l={from:p,to:g,d:1,l:null,r:null},xo(f);if(0<ot(p,f.to))return b?cs(b,p,g):f.r={from:p,to:g,d:1,l:null,r:null},xo(f);ot(p,f.from)<0&&(f.from=p,f.l=null,f.d=b?b.d+1:1),0<ot(g,f.to)&&(f.to=g,f.r=null,f.d=f.l?f.l.d+1:1),g=!f.r,S&&!f.l&&Vr(f,S),b&&g&&Vr(f,b)}}function Vr(f,p){Ra(p)||(function g(b,j){var A=j.from,O=j.to,N=j.l,j=j.r;cs(b,A,O),N&&g(b,N),j&&g(b,j)})(f,p)}function Fn(f,p){var g=zs(p),b=g.next();if(b.done)return!1;for(var S=b.value,A=zs(f),O=A.next(S.from),N=O.value;!b.done&&!O.done;){if(ot(N.from,S.to)<=0&&0<=ot(N.to,S.from))return!0;ot(S.from,N.from)<0?S=(b=g.next(N.from)).value:N=(O=A.next(S.from)).value}return!1}function zs(f){var p=Ra(f)?null:{s:0,n:f};return{next:function(g){for(var b=0<arguments.length;p;)switch(p.s){case 0:if(p.s=1,b)for(;p.n.l&&ot(g,p.n.from)<0;)p={up:p,n:p.n.l,s:1};else for(;p.n.l;)p={up:p,n:p.n.l,s:1};case 1:if(p.s=2,!b||ot(g,p.n.to)<=0)return{value:p.n,done:!1};case 2:if(p.n.r){p.s=3,p={up:p,n:p.n.r,s:0};continue}case 3:p=p.up}return{done:!0}}}}function xo(f){var p,g,b=(((p=f.r)===null||p===void 0?void 0:p.d)||0)-(((g=f.l)===null||g===void 0?void 0:g.d)||0),S=1<b?"r":b<-1?"l":"";S&&(p=S=="r"?"l":"r",g=s({},f),b=f[S],f.from=b.from,f.to=b.to,f[S]=b[S],g[S]=b[p],(f[p]=g).d=Ai(g)),f.d=Ai(f)}function Ai(g){var p=g.r,g=g.l;return(p?g?Math.max(p.d,g.d):p.d:g?g.d:0)+1}function c(f,p){return d(p).forEach(function(g){f[g]?Vr(f[g],p[g]):f[g]=(function b(S){var A,O,N={};for(A in S)x(S,A)&&(O=S[A],N[A]=!O||typeof O!="object"||z.has(O.constructor)?O:b(O));return N})(p[g])}),f}function v(f,p){return f.all||p.all||Object.keys(f).some(function(g){return p[g]&&Fn(p[g],f[g])})}M(En.prototype,((Er={add:function(f){return Vr(this,f),this},addKey:function(f){return cs(this,f,f),this},addKeys:function(f){var p=this;return f.forEach(function(g){return cs(p,g,g)}),this},hasKey:function(f){var p=zs(this).next(f).value;return p&&ot(p.from,f)<=0&&0<=ot(p.to,f)}})[le]=function(){return zs(this)},Er));var w={},I={},te=!1;function ue(f){c(I,f),te||(te=!0,setTimeout(function(){te=!1,Ce(I,!(I={}))},0))}function Ce(f,p){p===void 0&&(p=!1);var g=new Set;if(f.all)for(var b=0,S=Object.values(w);b<S.length;b++)tt(O=S[b],f,g,p);else for(var A in f){var O,N=/^idb\:\/\/(.*)\/(.*)\//.exec(A);N&&(A=N[1],N=N[2],(O=w["idb://".concat(A,"/").concat(N)])&&tt(O,f,g,p))}g.forEach(function(j){return j()})}function tt(f,p,g,b){for(var S=[],A=0,O=Object.entries(f.queries.query);A<O.length;A++){for(var N=O[A],j=N[0],B=[],$=0,U=N[1];$<U.length;$++){var W=U[$];v(p,W.obsSet)?W.subscribers.forEach(function(J){return g.add(J)}):b&&B.push(W)}b&&S.push([j,B])}if(b)for(var q=0,Y=S;q<Y.length;q++){var Q=Y[q],j=Q[0],B=Q[1];f.queries.query[j]=B}}function un(f){var p=f._state,g=f._deps.indexedDB;if(p.isBeingOpened||f.idbdb)return p.dbReadyPromise.then(function(){return p.dbOpenError?Rt(p.dbOpenError):f});p.isBeingOpened=!0,p.dbOpenError=null,p.openComplete=!1;var b=p.openCanceller,S=Math.round(10*f.verno),A=!1;function O(){if(p.openCanceller!==b)throw new Me.DatabaseClosed("db.open() was cancelled")}function N(){return new Ie(function(W,q){if(O(),!g)throw new Me.MissingAPI;var Y=f.name,Q=p.autoSchema||!S?g.open(Y):g.open(Y,S);if(!Q)throw new Me.MissingAPI;Q.onerror=Kn(q),Q.onblocked=kt(f._fireOnBlocked),Q.onupgradeneeded=kt(function(J){var ne;$=Q.transaction,p.autoSchema&&!f._options.allowEmptyDB?(Q.onerror=_i,$.abort(),Q.result.close(),(ne=g.deleteDatabase(Y)).onsuccess=ne.onerror=kt(function(){q(new Me.NoSuchDatabase("Database ".concat(Y," doesnt exist")))})):($.onerror=Kn(q),J=J.oldVersion>Math.pow(2,62)?0:J.oldVersion,U=J<1,f.idbdb=Q.result,A&&wa(f,$),wi(f,J/10,$,q))},q),Q.onsuccess=kt(function(){$=null;var J,ne,ae,fe,ge,Ae=f.idbdb=Q.result,De=Be(Ae.objectStoreNames);if(0<De.length)try{var Te=Ae.transaction((fe=De).length===1?fe[0]:fe,"readonly");if(p.autoSchema)ne=Ae,ae=Te,(J=f).verno=ne.version/10,ae=J._dbSchema=Si(0,ne,ae),J._storeNames=Be(ne.objectStoreNames,0),ls(J,[J._allTables],d(ae),ae);else if(us(f,f._dbSchema,Te),((ge=Us(Si(0,(ge=f).idbdb,Te),ge._dbSchema)).add.length||ge.change.some(function(Re){return Re.add.length||Re.change.length}))&&!A)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ae.close(),S=Ae.version+1,A=!0,W(N());si(f,Te)}catch{}vi.push(f),Ae.onversionchange=kt(function(Re){p.vcFired=!0,f.on("versionchange").fire(Re)}),Ae.onclose=kt(function(){f.close({disableAutoOpen:!1})}),U&&(ge=f._deps,Te=Y,Ae=ge.indexedDB,ge=ge.IDBKeyRange,kr(Ae)||Te===ss||Aa(Ae,ge).put({name:Te}).catch(St)),W()},q)}).catch(function(W){switch(W?.name){case"UnknownError":if(0<p.PR1398_maxLoop)return p.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),N();break;case"VersionError":if(0<S)return S=0,N()}return Ie.reject(W)})}var j,B=p.dbReadyResolve,$=null,U=!1;return Ie.race([b,(typeof navigator>"u"?Ie.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(W){function q(){return indexedDB.databases().finally(W)}j=setInterval(q,100),q()}).finally(function(){return clearInterval(j)}):Promise.resolve()).then(N)]).then(function(){return O(),p.onReadyBeingFired=[],Ie.resolve(Ca(function(){return f.on.ready.fire(f.vip)})).then(function W(){if(0<p.onReadyBeingFired.length){var q=p.onReadyBeingFired.reduce(nn,St);return p.onReadyBeingFired=[],Ie.resolve(Ca(function(){return q(f.vip)})).then(W)}})}).finally(function(){p.openCanceller===b&&(p.onReadyBeingFired=null,p.isBeingOpened=!1)}).catch(function(W){p.dbOpenError=W;try{$&&$.abort()}catch{}return b===p.openCanceller&&f._close(),Rt(W)}).finally(function(){p.openComplete=!0,B()}).then(function(){var W;return U&&(W={},f.tables.forEach(function(q){q.schema.indexes.forEach(function(Y){Y.name&&(W["idb://".concat(f.name,"/").concat(q.name,"/").concat(Y.name)]=new En(-1/0,[[[]]]))}),W["idb://".concat(f.name,"/").concat(q.name,"/")]=W["idb://".concat(f.name,"/").concat(q.name,"/:dels")]=new En(-1/0,[[[]]])}),bn(Nr).fire(W),Ce(W,!0)),f})}function At(f){function p(A){return f.next(A)}var g=S(p),b=S(function(A){return f.throw(A)});function S(A){return function(j){var N=A(j),j=N.value;return N.done?j:j&&typeof j.then=="function"?j.then(g,b):y(j)?Promise.all(j).then(g,b):g(j)}}return S(p)()}function Ut(f,p,g){for(var b=y(f)?f.slice():[f],S=0;S<g;++S)b.push(p);return b}var Pr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(f){return s(s({},f),{table:function(p){var g=f.table(p),b=g.schema,S={},A=[];function O(U,W,q){var Y=ln(U),Q=S[Y]=S[Y]||[],J=U==null?0:typeof U=="string"?1:U.length,ne=0<W,ne=s(s({},q),{name:ne?"".concat(Y,"(virtual-from:").concat(q.name,")"):q.name,lowLevelIndex:q,isVirtual:ne,keyTail:W,keyLength:J,extractKey:Gi(U),unique:!ne&&q.unique});return Q.push(ne),ne.isPrimaryKey||A.push(ne),1<J&&O(J===2?U[0]:U.slice(0,J-1),W+1,q),Q.sort(function(ae,fe){return ae.keyTail-fe.keyTail}),ne}p=O(b.primaryKey.keyPath,0,b.primaryKey),S[":id"]=[p];for(var N=0,j=b.indexes;N<j.length;N++){var B=j[N];O(B.keyPath,0,B)}function $(U){var W,q=U.query.index;return q.isVirtual?s(s({},U),{query:{index:q.lowLevelIndex,range:(W=U.query.range,q=q.keyTail,{type:W.type===1?2:W.type,lower:Ut(W.lower,W.lowerOpen?f.MAX_KEY:f.MIN_KEY,q),lowerOpen:!0,upper:Ut(W.upper,W.upperOpen?f.MIN_KEY:f.MAX_KEY,q),upperOpen:!0})}}):U}return s(s({},g),{schema:s(s({},b),{primaryKey:p,indexes:A,getIndexByKeyPath:function(U){return(U=S[ln(U)])&&U[0]}}),count:function(U){return g.count($(U))},query:function(U){return g.query($(U))},openCursor:function(U){var W=U.query.index,q=W.keyTail,Y=W.isVirtual,Q=W.keyLength;return Y?g.openCursor($(U)).then(function(ne){return ne&&J(ne)}):g.openCursor(U);function J(ne){return Object.create(ne,{continue:{value:function(ae){ae!=null?ne.continue(Ut(ae,U.reverse?f.MAX_KEY:f.MIN_KEY,q)):U.unique?ne.continue(ne.key.slice(0,Q).concat(U.reverse?f.MIN_KEY:f.MAX_KEY,q)):ne.continue()}},continuePrimaryKey:{value:function(ae,fe){ne.continuePrimaryKey(Ut(ae,f.MAX_KEY,q),fe)}},primaryKey:{get:function(){return ne.primaryKey}},key:{get:function(){var ae=ne.key;return Q===1?ae[0]:ae.slice(0,Q)}},value:{get:function(){return ne.value}}})}}})}})}};function Lr(f,p,g,b){return g=g||{},b=b||"",d(f).forEach(function(S){var A,O,N;x(p,S)?(A=f[S],O=p[S],typeof A=="object"&&typeof O=="object"&&A&&O?(N=Ft(A))!==Ft(O)?g[b+S]=p[S]:N==="Object"?Lr(A,O,g,b+S+"."):A!==O&&(g[b+S]=p[S]):A!==O&&(g[b+S]=p[S])):g[b+S]=void 0}),d(p).forEach(function(S){x(f,S)||(g[b+S]=p[S])}),g}function br(f,p){return p.type==="delete"?p.keys:p.keys||p.values.map(f.extractKey)}var ai={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(f){return s(s({},f),{table:function(p){var g=f.table(p),b=g.schema.primaryKey;return s(s({},g),{mutate:function(S){var A=Ne.trans,O=A.table(p).hook,N=O.deleting,j=O.creating,B=O.updating;switch(S.type){case"add":if(j.fire===St)break;return A._promise("readwrite",function(){return $(S)},!0);case"put":if(j.fire===St&&B.fire===St)break;return A._promise("readwrite",function(){return $(S)},!0);case"delete":if(N.fire===St)break;return A._promise("readwrite",function(){return $(S)},!0);case"deleteRange":if(N.fire===St)break;return A._promise("readwrite",function(){return(function U(W,q,Y){return g.query({trans:W,values:!1,query:{index:b,range:q},limit:Y}).then(function(Q){var J=Q.result;return $({type:"delete",keys:J,trans:W}).then(function(ne){return 0<ne.numFailures?Promise.reject(ne.failures[0]):J.length<Y?{failures:[],numFailures:0,lastResult:void 0}:U(W,s(s({},q),{lower:J[J.length-1],lowerOpen:!0}),Y)})})})(S.trans,S.range,1e4)},!0)}return g.mutate(S);function $(U){var W,q,Y,Q=Ne.trans,J=U.keys||br(b,U);if(!J)throw new Error("Keys missing");return(U=U.type==="add"||U.type==="put"?s(s({},U),{keys:J}):s({},U)).type!=="delete"&&(U.values=o([],U.values)),U.keys&&(U.keys=o([],U.keys)),W=g,Y=J,((q=U).type==="add"?Promise.resolve([]):W.getMany({trans:q.trans,keys:Y,cache:"immutable"})).then(function(ne){var ae=J.map(function(fe,ge){var Ae,De,Te,Re=ne[ge],Oe={onerror:null,onsuccess:null};return U.type==="delete"?N.fire.call(Oe,fe,Re,Q):U.type==="add"||Re===void 0?(Ae=j.fire.call(Oe,fe,U.values[ge],Q),fe==null&&Ae!=null&&(U.keys[ge]=fe=Ae,b.outbound||k(U.values[ge],b.keyPath,fe))):(Ae=Lr(Re,U.values[ge]),(De=B.fire.call(Oe,Ae,fe,Re,Q))&&(Te=U.values[ge],Object.keys(De).forEach(function(we){x(Te,we)?Te[we]=De[we]:k(Te,we,De[we])}))),Oe});return g.mutate(U).then(function(fe){for(var ge=fe.failures,Ae=fe.results,De=fe.numFailures,fe=fe.lastResult,Te=0;Te<J.length;++Te){var Re=(Ae||J)[Te],Oe=ae[Te];Re==null?Oe.onerror&&Oe.onerror(ge[Te]):Oe.onsuccess&&Oe.onsuccess(U.type==="put"&&ne[Te]?U.values[Te]:Re)}return{failures:ge,results:Ae,numFailures:De,lastResult:fe}}).catch(function(fe){return ae.forEach(function(ge){return ge.onerror&&ge.onerror(fe)}),Promise.reject(fe)})})}}})}})}};function fs(f,p,g){try{if(!p||p.keys.length<f.length)return null;for(var b=[],S=0,A=0;S<p.keys.length&&A<f.length;++S)ot(p.keys[S],f[A])===0&&(b.push(g?P(p.values[S]):p.values[S]),++A);return b.length===f.length?b:null}catch{return null}}var Ia={stack:"dbcore",level:-1,create:function(f){return{table:function(p){var g=f.table(p);return s(s({},g),{getMany:function(b){if(!b.cache)return g.getMany(b);var S=fs(b.keys,b.trans._cache,b.cache==="clone");return S?Ie.resolve(S):g.getMany(b).then(function(A){return b.trans._cache={keys:b.keys,values:b.cache==="clone"?P(A):A},A})},mutate:function(b){return b.type!=="add"&&(b.trans._cache=null),g.mutate(b)}})}}}};function Bs(f,p){return f.trans.mode==="readonly"&&!!f.subscr&&!f.trans.explicit&&f.trans.db._options.cache!=="disabled"&&!p.schema.primaryKey.outbound}function Dc(f,p){switch(f){case"query":return p.values&&!p.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Kh={stack:"dbcore",level:0,name:"Observability",create:function(f){var p=f.schema.name,g=new En(f.MIN_KEY,f.MAX_KEY);return s(s({},f),{transaction:function(b,S,A){if(Ne.subscr&&S!=="readonly")throw new Me.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ne.querier));return f.transaction(b,S,A)},table:function(b){var S=f.table(b),A=S.schema,O=A.primaryKey,U=A.indexes,N=O.extractKey,j=O.outbound,B=O.autoIncrement&&U.filter(function(q){return q.compound&&q.keyPath.includes(O.keyPath)}),$=s(s({},S),{mutate:function(q){function Y(we){return we="idb://".concat(p,"/").concat(b,"/").concat(we),fe[we]||(fe[we]=new En)}var Q,J,ne,ae=q.trans,fe=q.mutatedParts||(q.mutatedParts={}),ge=Y(""),Ae=Y(":dels"),De=q.type,Oe=q.type==="deleteRange"?[q.range]:q.type==="delete"?[q.keys]:q.values.length<50?[br(O,q).filter(function(we){return we}),q.values]:[],Te=Oe[0],Re=Oe[1],Oe=q.trans._cache;return y(Te)?(ge.addKeys(Te),(Oe=De==="delete"||Te.length===Re.length?fs(Te,Oe):null)||Ae.addKeys(Te),(Oe||Re)&&(Q=Y,J=Oe,ne=Re,A.indexes.forEach(function(we){var Pe=Q(we.name||"");function Ke(lt){return lt!=null?we.extractKey(lt):null}function Ze(lt){return we.multiEntry&&y(lt)?lt.forEach(function(Gn){return Pe.addKey(Gn)}):Pe.addKey(lt)}(J||ne).forEach(function(lt,In){var We=J&&Ke(J[In]),In=ne&&Ke(ne[In]);ot(We,In)!==0&&(We!=null&&Ze(We),In!=null&&Ze(In))})}))):Te?(Re={from:(Re=Te.lower)!==null&&Re!==void 0?Re:f.MIN_KEY,to:(Re=Te.upper)!==null&&Re!==void 0?Re:f.MAX_KEY},Ae.add(Re),ge.add(Re)):(ge.add(g),Ae.add(g),A.indexes.forEach(function(we){return Y(we.name).add(g)})),S.mutate(q).then(function(we){return!Te||q.type!=="add"&&q.type!=="put"||(ge.addKeys(we.results),B&&B.forEach(function(Pe){for(var Ke=q.values.map(function(We){return Pe.extractKey(We)}),Ze=Pe.keyPath.findIndex(function(We){return We===O.keyPath}),lt=0,Gn=we.results.length;lt<Gn;++lt)Ke[lt][Ze]=we.results[lt];Y(Pe.name).addKeys(Ke)})),ae.mutatedParts=c(ae.mutatedParts||{},fe),we})}}),U=function(Y){var Q=Y.query,Y=Q.index,Q=Q.range;return[Y,new En((Y=Q.lower)!==null&&Y!==void 0?Y:f.MIN_KEY,(Q=Q.upper)!==null&&Q!==void 0?Q:f.MAX_KEY)]},W={get:function(q){return[O,new En(q.key)]},getMany:function(q){return[O,new En().addKeys(q.keys)]},count:U,query:U,openCursor:U};return d(W).forEach(function(q){$[q]=function(Y){var Q=Ne.subscr,J=!!Q,ne=Bs(Ne,S)&&Dc(q,Y)?Y.obsSet={}:Q;if(J){var ae=function(Re){return Re="idb://".concat(p,"/").concat(b,"/").concat(Re),ne[Re]||(ne[Re]=new En)},fe=ae(""),ge=ae(":dels"),Q=W[q](Y),J=Q[0],Q=Q[1];if((q==="query"&&J.isPrimaryKey&&!Y.values?ge:ae(J.name||"")).add(Q),!J.isPrimaryKey){if(q!=="count"){var Ae=q==="query"&&j&&Y.values&&S.query(s(s({},Y),{values:!1}));return S[q].apply(this,arguments).then(function(Re){if(q==="query"){if(j&&Y.values)return Ae.then(function(Ke){return Ke=Ke.result,fe.addKeys(Ke),Re});var Oe=Y.values?Re.result.map(N):Re.result;(Y.values?fe:ge).addKeys(Oe)}else if(q==="openCursor"){var we=Re,Pe=Y.values;return we&&Object.create(we,{key:{get:function(){return ge.addKey(we.primaryKey),we.key}},primaryKey:{get:function(){var Ke=we.primaryKey;return ge.addKey(Ke),Ke}},value:{get:function(){return Pe&&fe.addKey(we.primaryKey),we.value}}})}return Re})}ge.add(g)}}return S[q].apply(this,arguments)}}),$}})}};function Nc(f,p,g){if(g.numFailures===0)return p;if(p.type==="deleteRange")return null;var b=p.keys?p.keys.length:"values"in p&&p.values?p.values.length:1;return g.numFailures===b?null:(p=s({},p),y(p.keys)&&(p.keys=p.keys.filter(function(S,A){return!(A in g.failures)})),"values"in p&&y(p.values)&&(p.values=p.values.filter(function(S,A){return!(A in g.failures)})),p)}function fl(f,p){return g=f,((b=p).lower===void 0||(b.lowerOpen?0<ot(g,b.lower):0<=ot(g,b.lower)))&&(f=f,(p=p).upper===void 0||(p.upperOpen?ot(f,p.upper)<0:ot(f,p.upper)<=0));var g,b}function fu(f,p,W,b,S,A){if(!W||W.length===0)return f;var O=p.query.index,N=O.multiEntry,j=p.query.range,B=b.schema.primaryKey.extractKey,$=O.extractKey,U=(O.lowLevelIndex||O).extractKey,W=W.reduce(function(q,Y){var Q=q,J=[];if(Y.type==="add"||Y.type==="put")for(var ne=new En,ae=Y.values.length-1;0<=ae;--ae){var fe,ge=Y.values[ae],Ae=B(ge);ne.hasKey(Ae)||(fe=$(ge),(N&&y(fe)?fe.some(function(we){return fl(we,j)}):fl(fe,j))&&(ne.addKey(Ae),J.push(ge)))}switch(Y.type){case"add":var De=new En().addKeys(p.values?q.map(function(Pe){return B(Pe)}):q),Q=q.concat(p.values?J.filter(function(Pe){return Pe=B(Pe),!De.hasKey(Pe)&&(De.addKey(Pe),!0)}):J.map(function(Pe){return B(Pe)}).filter(function(Pe){return!De.hasKey(Pe)&&(De.addKey(Pe),!0)}));break;case"put":var Te=new En().addKeys(Y.values.map(function(Pe){return B(Pe)}));Q=q.filter(function(Pe){return!Te.hasKey(p.values?B(Pe):Pe)}).concat(p.values?J:J.map(function(Pe){return B(Pe)}));break;case"delete":var Re=new En().addKeys(Y.keys);Q=q.filter(function(Pe){return!Re.hasKey(p.values?B(Pe):Pe)});break;case"deleteRange":var Oe=Y.range;Q=q.filter(function(Pe){return!fl(B(Pe),Oe)})}return Q},f);return W===f?f:(W.sort(function(q,Y){return ot(U(q),U(Y))||ot(B(q),B(Y))}),p.limit&&p.limit<1/0&&(W.length>p.limit?W.length=p.limit:f.length===p.limit&&W.length<p.limit&&(S.dirty=!0)),A?Object.freeze(W):W)}function xa(f,p){return ot(f.lower,p.lower)===0&&ot(f.upper,p.upper)===0&&!!f.lowerOpen==!!p.lowerOpen&&!!f.upperOpen==!!p.upperOpen}function Oo(f,p){return(function(g,b,S,A){if(g===void 0)return b!==void 0?-1:0;if(b===void 0)return 1;if((b=ot(g,b))===0){if(S&&A)return 0;if(S)return 1;if(A)return-1}return b})(f.lower,p.lower,f.lowerOpen,p.lowerOpen)<=0&&0<=(function(g,b,S,A){if(g===void 0)return b!==void 0?1:0;if(b===void 0)return-1;if((b=ot(g,b))===0){if(S&&A)return 0;if(S)return-1;if(A)return 1}return b})(f.upper,p.upper,f.upperOpen,p.upperOpen)}function Fh(f,p,g,b){f.subscribers.add(g),b.addEventListener("abort",function(){var S,A;f.subscribers.delete(g),f.subscribers.size===0&&(S=f,A=p,setTimeout(function(){S.subscribers.size===0&&je(A,S)},3e3))})}var hl={stack:"dbcore",level:0,name:"Cache",create:function(f){var p=f.schema.name;return s(s({},f),{transaction:function(g,b,S){var A,O,N=f.transaction(g,b,S);return b==="readwrite"&&(O=(A=new AbortController).signal,S=function(j){return function(){if(A.abort(),b==="readwrite"){for(var B=new Set,$=0,U=g;$<U.length;$++){var W=U[$],q=w["idb://".concat(p,"/").concat(W)];if(q){var Y=f.table(W),Q=q.optimisticOps.filter(function(Pe){return Pe.trans===N});if(N._explicit&&j&&N.mutatedParts)for(var J=0,ne=Object.values(q.queries.query);J<ne.length;J++)for(var ae=0,fe=(De=ne[J]).slice();ae<fe.length;ae++)v((Te=fe[ae]).obsSet,N.mutatedParts)&&(je(De,Te),Te.subscribers.forEach(function(Pe){return B.add(Pe)}));else if(0<Q.length){q.optimisticOps=q.optimisticOps.filter(function(Pe){return Pe.trans!==N});for(var ge=0,Ae=Object.values(q.queries.query);ge<Ae.length;ge++)for(var De,Te,Re,Oe=0,we=(De=Ae[ge]).slice();Oe<we.length;Oe++)(Te=we[Oe]).res!=null&&N.mutatedParts&&(j&&!Te.dirty?(Re=Object.isFrozen(Te.res),Re=fu(Te.res,Te.req,Q,Y,Te,Re),Te.dirty?(je(De,Te),Te.subscribers.forEach(function(Pe){return B.add(Pe)})):Re!==Te.res&&(Te.res=Re,Te.promise=Ie.resolve({result:Re}))):(Te.dirty&&je(De,Te),Te.subscribers.forEach(function(Pe){return B.add(Pe)})))}}}B.forEach(function(Pe){return Pe()})}}},N.addEventListener("abort",S(!1),{signal:O}),N.addEventListener("error",S(!1),{signal:O}),N.addEventListener("complete",S(!0),{signal:O})),N},table:function(g){var b=f.table(g),S=b.schema.primaryKey;return s(s({},b),{mutate:function(A){var O=Ne.trans;if(S.outbound||O.db._options.cache==="disabled"||O.explicit||O.idbtrans.mode!=="readwrite")return b.mutate(A);var N=w["idb://".concat(p,"/").concat(g)];return N?(O=b.mutate(A),A.type!=="add"&&A.type!=="put"||!(50<=A.values.length||br(S,A).some(function(j){return j==null}))?(N.optimisticOps.push(A),A.mutatedParts&&ue(A.mutatedParts),O.then(function(j){0<j.numFailures&&(je(N.optimisticOps,A),(j=Nc(0,A,j))&&N.optimisticOps.push(j),A.mutatedParts&&ue(A.mutatedParts))}),O.catch(function(){je(N.optimisticOps,A),A.mutatedParts&&ue(A.mutatedParts)})):O.then(function(j){var B=Nc(0,s(s({},A),{values:A.values.map(function($,U){var W;return j.failures[U]?$:($=(W=S.keyPath)!==null&&W!==void 0&&W.includes(".")?P($):s({},$),k($,S.keyPath,j.results[U]),$)})}),j);N.optimisticOps.push(B),queueMicrotask(function(){return A.mutatedParts&&ue(A.mutatedParts)})}),O):b.mutate(A)},query:function(A){if(!Bs(Ne,b)||!Dc("query",A))return b.query(A);var O=((B=Ne.trans)===null||B===void 0?void 0:B.db._options.cache)==="immutable",U=Ne,N=U.requery,j=U.signal,B=(function(Y,Q,J,ne){var ae=w["idb://".concat(Y,"/").concat(Q)];if(!ae)return[];if(!(Q=ae.queries[J]))return[null,!1,ae,null];var fe=Q[(ne.query?ne.query.index.name:null)||""];if(!fe)return[null,!1,ae,null];switch(J){case"query":var ge=fe.find(function(Ae){return Ae.req.limit===ne.limit&&Ae.req.values===ne.values&&xa(Ae.req.query.range,ne.query.range)});return ge?[ge,!0,ae,fe]:[fe.find(function(Ae){return("limit"in Ae.req?Ae.req.limit:1/0)>=ne.limit&&(!ne.values||Ae.req.values)&&Oo(Ae.req.query.range,ne.query.range)}),!1,ae,fe];case"count":return ge=fe.find(function(Ae){return xa(Ae.req.query.range,ne.query.range)}),[ge,!!ge,ae,fe]}})(p,g,"query",A),$=B[0],U=B[1],W=B[2],q=B[3];return $&&U?$.obsSet=A.obsSet:(U=b.query(A).then(function(Y){var Q=Y.result;if($&&($.res=Q),O){for(var J=0,ne=Q.length;J<ne;++J)Object.freeze(Q[J]);Object.freeze(Q)}else Y.result=P(Q);return Y}).catch(function(Y){return q&&$&&je(q,$),Promise.reject(Y)}),$={obsSet:A.obsSet,promise:U,subscribers:new Set,type:"query",req:A,dirty:!1},q?q.push($):(q=[$],(W=W||(w["idb://".concat(p,"/").concat(g)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[A.query.index.name||""]=q)),Fh($,q,N,j),$.promise.then(function(Y){return{result:fu(Y.result,A,W?.optimisticOps,b,$,O)}})}})}})}};function Do(f,p){return new Proxy(f,{get:function(g,b,S){return b==="db"?p:Reflect.get(g,b,S)}})}var Ci=(Qt.prototype.version=function(f){if(isNaN(f)||f<.1)throw new Me.Type("Given version is not a positive number");if(f=Math.round(10*f)/10,this.idbdb||this._state.isBeingOpened)throw new Me.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,f);var p=this._versions,g=p.filter(function(b){return b._cfg.version===f})[0];return g||(g=new this.Version(f),p.push(g),p.sort(Ta),g.stores({}),this._state.autoSchema=!1,g)},Qt.prototype._whenReady=function(f){var p=this;return this.idbdb&&(this._state.openComplete||Ne.letThrough||this._vip)?f():new Ie(function(g,b){if(p._state.openComplete)return b(new Me.DatabaseClosed(p._state.dbOpenError));if(!p._state.isBeingOpened){if(!p._state.autoOpen)return void b(new Me.DatabaseClosed);p.open().catch(St)}p._state.dbReadyPromise.then(g,b)}).then(f)},Qt.prototype.use=function(f){var p=f.stack,g=f.create,b=f.level,S=f.name;return S&&this.unuse({stack:p,name:S}),f=this._middlewares[p]||(this._middlewares[p]=[]),f.push({stack:p,create:g,level:b??10,name:S}),f.sort(function(A,O){return A.level-O.level}),this},Qt.prototype.unuse=function(f){var p=f.stack,g=f.name,b=f.create;return p&&this._middlewares[p]&&(this._middlewares[p]=this._middlewares[p].filter(function(S){return b?S.create!==b:!!g&&S.name!==g})),this},Qt.prototype.open=function(){var f=this;return Hn(vn,function(){return un(f)})},Qt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var f=this._state,p=vi.indexOf(this);if(0<=p&&vi.splice(p,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}f.isBeingOpened||(f.dbReadyPromise=new Ie(function(g){f.dbReadyResolve=g}),f.openCanceller=new Ie(function(g,b){f.cancelOpen=b}))},Qt.prototype.close=function(g){var p=(g===void 0?{disableAutoOpen:!0}:g).disableAutoOpen,g=this._state;p?(g.isBeingOpened&&g.cancelOpen(new Me.DatabaseClosed),this._close(),g.autoOpen=!1,g.dbOpenError=new Me.DatabaseClosed):(this._close(),g.autoOpen=this._options.autoOpen||g.isBeingOpened,g.openComplete=!1,g.dbOpenError=null)},Qt.prototype.delete=function(f){var p=this;f===void 0&&(f={disableAutoOpen:!0});var g=0<arguments.length&&typeof arguments[0]!="object",b=this._state;return new Ie(function(S,A){function O(){p.close(f);var N=p._deps.indexedDB.deleteDatabase(p.name);N.onsuccess=kt(function(){var j,B,$;j=p._deps,B=p.name,$=j.indexedDB,j=j.IDBKeyRange,kr($)||B===ss||Aa($,j).delete(B).catch(St),S()}),N.onerror=Kn(A),N.onblocked=p._fireOnBlocked}if(g)throw new Me.InvalidArgument("Invalid closeOptions argument to db.delete()");b.isBeingOpened?b.dbReadyPromise.then(O):O()})},Qt.prototype.backendDB=function(){return this.idbdb},Qt.prototype.isOpen=function(){return this.idbdb!==null},Qt.prototype.hasBeenClosed=function(){var f=this._state.dbOpenError;return f&&f.name==="DatabaseClosed"},Qt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Qt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Qt.prototype,"tables",{get:function(){var f=this;return d(this._allTables).map(function(p){return f._allTables[p]})},enumerable:!1,configurable:!0}),Qt.prototype.transaction=function(){var f=(function(p,g,b){var S=arguments.length;if(S<2)throw new Me.InvalidArgument("Too few arguments");for(var A=new Array(S-1);--S;)A[S-1]=arguments[S];return b=A.pop(),[p,G(A),b]}).apply(this,arguments);return this._transaction.apply(this,f)},Qt.prototype._transaction=function(f,p,g){var b=this,S=Ne.trans;S&&S.db===this&&f.indexOf("!")===-1||(S=null);var A,O,N=f.indexOf("?")!==-1;f=f.replace("!","").replace("?","");try{if(O=p.map(function(B){if(B=B instanceof b.Table?B.name:B,typeof B!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return B}),f=="r"||f===Ir)A=Ir;else{if(f!="rw"&&f!=xr)throw new Me.InvalidArgument("Invalid transaction mode: "+f);A=xr}if(S){if(S.mode===Ir&&A===xr){if(!N)throw new Me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");S=null}S&&O.forEach(function(B){if(S&&S.storeNames.indexOf(B)===-1){if(!N)throw new Me.SubTransaction("Table "+B+" not included in parent transaction.");S=null}}),N&&S&&!S.active&&(S=null)}}catch(B){return S?S._promise(null,function($,U){U(B)}):Rt(B)}var j=(function B($,U,W,q,Y){return Ie.resolve().then(function(){var Q=Ne.transless||Ne,J=$._createTransaction(U,W,$._dbSchema,q);if(J.explicit=!0,Q={trans:J,transless:Q},q)J.idbtrans=q.idbtrans;else try{J.create(),J.idbtrans._explicit=!0,$._state.PR1398_maxLoop=3}catch(fe){return fe.name===dt.InvalidState&&$.isOpen()&&0<--$._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),$.close({disableAutoOpen:!1}),$.open().then(function(){return B($,U,W,null,Y)})):Rt(fe)}var ne,ae=F(Y);return ae&&Yt(),Q=Ie.follow(function(){var fe;(ne=Y.call(J,J))&&(ae?(fe=Ln.bind(null,null),ne.then(fe,fe)):typeof ne.next=="function"&&typeof ne.throw=="function"&&(ne=At(ne)))},Q),(ne&&typeof ne.then=="function"?Ie.resolve(ne).then(function(fe){return J.active?fe:Rt(new Me.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Q.then(function(){return ne})).then(function(fe){return q&&J._resolve(),J._completion.then(function(){return fe})}).catch(function(fe){return J._reject(fe),Rt(fe)})})}).bind(null,this,A,O,S,g);return S?S._promise(A,j,"lock"):Ne.trans?Hn(Ne.transless,function(){return b._whenReady(j)}):this._whenReady(j)},Qt.prototype.table=function(f){if(!x(this._allTables,f))throw new Me.InvalidTable("Table ".concat(f," does not exist"));return this._allTables[f]},Qt);function Qt(f,p){var g=this;this._middlewares={},this.verno=0;var b=Qt.dependencies;this._options=p=s({addons:Qt.addons,autoOpen:!0,indexedDB:b.indexedDB,IDBKeyRange:b.IDBKeyRange,cache:"cloned"},p),this._deps={indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},b=p.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var S,A,O,N,j,B={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:St,dbReadyPromise:null,cancelOpen:St,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:p.autoOpen};B.dbReadyPromise=new Ie(function(U){B.dbReadyResolve=U}),B.openCanceller=new Ie(function(U,W){B.cancelOpen=W}),this._state=B,this.name=f,this.on=Zr(this,"populate","blocked","versionchange","close",{ready:[nn,St]}),this.once=function(U,W){var q=function(){for(var Y=[],Q=0;Q<arguments.length;Q++)Y[Q]=arguments[Q];g.on(U).unsubscribe(q),W.apply(g,Y)};return g.on(U,q)},this.on.ready.subscribe=Ve(this.on.ready.subscribe,function(U){return function(W,q){Qt.vip(function(){var Y,Q=g._state;Q.openComplete?(Q.dbOpenError||Ie.resolve().then(W),q&&U(W)):Q.onReadyBeingFired?(Q.onReadyBeingFired.push(W),q&&U(W)):(U(W),Y=g,q||U(function J(){Y.on.ready.unsubscribe(W),Y.on.ready.unsubscribe(J)}))})}}),this.Collection=(S=this,Rn(ul.prototype,function(ne,J){this.db=S;var q=ga,Y=null;if(J)try{q=J()}catch(ae){Y=ae}var Q=ne._ctx,J=Q.table,ne=J.hook.reading.fire;this._ctx={table:J,index:Q.index,isPrimKey:!Q.index||J.schema.primKey.keyPath&&Q.index===J.schema.primKey.name,range:q,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Y,or:Q.or,valueMapper:ne!==di?ne:null}})),this.Table=(A=this,Rn(os.prototype,function(U,W,q){this.db=A,this._tx=q,this.name=U,this.schema=W,this.hook=A._allTables[U]?A._allTables[U].hook:Zr(null,{creating:[xs,St],reading:[pi,di],updating:[To,St],deleting:[Eo,St]})})),this.Transaction=(O=this,Rn(Ls.prototype,function(U,W,q,Y,Q){var J=this;U!=="readonly"&&W.forEach(function(ne){ne=(ne=q[ne])===null||ne===void 0?void 0:ne.yProps,ne&&(W=W.concat(ne.map(function(ae){return ae.updatesTable})))}),this.db=O,this.mode=U,this.storeNames=W,this.schema=q,this.chromeTransactionDurability=Y,this.idbtrans=null,this.on=Zr(this,"complete","error","abort"),this.parent=Q||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ie(function(ne,ae){J._resolve=ne,J._reject=ae}),this._completion.then(function(){J.active=!1,J.on.complete.fire()},function(ne){var ae=J.active;return J.active=!1,J.on.error.fire(ne),J.parent?J.parent._reject(ne):ae&&J.idbtrans&&J.idbtrans.abort(),Rt(ne)})})),this.Version=(N=this,Rn(Sa.prototype,function(U){this.db=N,this._cfg={version:U,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(j=this,Rn(Hi.prototype,function(U,W,q){if(this.db=j,this._ctx={table:U,index:W===":id"?null:W,or:q},this._cmp=this._ascending=ot,this._descending=function(Y,Q){return ot(Q,Y)},this._max=function(Y,Q){return 0<ot(Y,Q)?Y:Q},this._min=function(Y,Q){return ot(Y,Q)<0?Y:Q},this._IDBKeyRange=j._deps.IDBKeyRange,!this._IDBKeyRange)throw new Me.MissingAPI})),this.on("versionchange",function(U){0<U.newVersion?console.warn("Another connection wants to upgrade database '".concat(g.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(g.name,"'. Closing db now to resume the delete request.")),g.close({disableAutoOpen:!1})}),this.on("blocked",function(U){!U.newVersion||U.newVersion<U.oldVersion?console.warn("Dexie.delete('".concat(g.name,"') was blocked")):console.warn("Upgrade '".concat(g.name,"' blocked by other connection holding version ").concat(U.oldVersion/10))}),this._maxKey=Fi(p.IDBKeyRange),this._createTransaction=function(U,W,q,Y){return new g.Transaction(U,W,q,g._options.chromeTransactionDurability,Y)},this._fireOnBlocked=function(U){g.on("blocked").fire(U),vi.filter(function(W){return W.name===g.name&&W!==g&&!W._state.vcFired}).map(function(W){return W.on("versionchange").fire(U)})},this.use(Ia),this.use(hl),this.use(Kh),this.use(Pr),this.use(ai);var $=new Proxy(this,{get:function(U,W,q){if(W==="_vip")return!0;if(W==="table")return function(Q){return Do(g.table(Q),$)};var Y=Reflect.get(U,W,q);return Y instanceof os?Do(Y,$):W==="tables"?Y.map(function(Q){return Do(Q,$)}):W==="_createTransaction"?function(){return Do(Y.apply(this,arguments),$)}:Y}});this.vip=$,b.forEach(function(U){return U(g)})}var Oa,Er=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Mc=(dl.prototype.subscribe=function(f,p,g){return this._subscribe(f&&typeof f!="function"?f:{next:f,error:p,complete:g})},dl.prototype[Er]=function(){return this},dl);function dl(f){this._subscribe=f}try{Oa={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Oa={indexedDB:null,IDBKeyRange:null}}function kc(f){var p,g=!1,b=new Mc(function(S){var A=F(f),O,N=!1,j={},B={},$={get closed(){return N},unsubscribe:function(){N||(N=!0,O&&O.abort(),U&&bn.storagemutated.unsubscribe(q))}};S.start&&S.start($);var U=!1,W=function(){return Rr(Y)},q=function(Q){c(j,Q),v(B,j)&&W()},Y=function(){var Q,J,ne;!N&&Oa.indexedDB&&(j={},Q={},O&&O.abort(),O=new AbortController,ne=(function(ae){var fe=$n();try{A&&Yt();var ge=Pt(f,ae);return ge=A?ge.finally(Ln):ge}finally{fe&&Ar()}})(J={subscr:Q,signal:O.signal,requery:W,querier:f,trans:null}),Promise.resolve(ne).then(function(ae){g=!0,p=ae,N||J.signal.aborted||(j={},(function(fe){for(var ge in fe)if(x(fe,ge))return;return 1})(B=Q)||U||(bn(Nr,q),U=!0),Rr(function(){return!N&&S.next&&S.next(ae)}))},function(ae){g=!1,["DatabaseClosedError","AbortError"].includes(ae?.name)||N||Rr(function(){N||S.error&&S.error(ae)})}))};return setTimeout(W,0),$});return b.hasValue=function(){return g},b.getValue=function(){return p},b}var qs=Ci;function hu(f){var p=hs;try{hs=!0,bn.storagemutated.fire(f),Ce(f,!0)}finally{hs=p}}M(qs,s(s({},zi),{delete:function(f){return new qs(f,{addons:[]}).delete()},exists:function(f){return new qs(f,{addons:[]}).open().then(function(p){return p.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(f){try{return p=qs.dependencies,g=p.indexedDB,p=p.IDBKeyRange,(kr(g)?Promise.resolve(g.databases()).then(function(b){return b.map(function(S){return S.name}).filter(function(S){return S!==ss})}):Aa(g,p).toCollection().primaryKeys()).then(f)}catch{return Rt(new Me.MissingAPI)}var p,g},defineClass:function(){return function(f){_(this,f)}},ignoreTransaction:function(f){return Ne.trans?Hn(Ne.transless,f):f()},vip:Ca,async:function(f){return function(){try{var p=At(f.apply(this,arguments));return p&&typeof p.then=="function"?p:Ie.resolve(p)}catch(g){return Rt(g)}}},spawn:function(f,p,g){try{var b=At(f.apply(g,p||[]));return b&&typeof b.then=="function"?b:Ie.resolve(b)}catch(S){return Rt(S)}},currentTransaction:{get:function(){return Ne.trans||null}},waitFor:function(f,p){return p=Ie.resolve(typeof f=="function"?qs.ignoreTransaction(f):f).timeout(p||6e4),Ne.trans?Ne.trans.waitFor(p):p},Promise:Ie,debug:{get:function(){return Pn},set:function(f){ol(f)}},derive:pe,extend:_,props:M,override:Ve,Events:Zr,on:bn,liveQuery:kc,extendObservabilitySet:c,getByKeyPath:Ge,setByKeyPath:k,delByKeyPath:function(f,p){typeof p=="string"?k(f,p,void 0):"length"in p&&[].map.call(p,function(g){k(f,g,void 0)})},shallowClone:D,deepClone:P,getObjectDiff:Lr,cmp:ot,asap:xt,minKey:-1/0,addons:[],connections:vi,errnames:dt,dependencies:Oa,cache:w,semVer:"4.2.1",version:"4.2.1".split(".").map(function(f){return parseInt(f)}).reduce(function(f,p,g){return f+p/Math.pow(10,2*g)})})),qs.maxKey=Fi(qs.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(bn(Nr,function(f){hs||(f=new CustomEvent(_r,{detail:f}),hs=!0,dispatchEvent(f),hs=!1)}),addEventListener(_r,function(f){f=f.detail,hs||hu(f)}));var Da,hs=!1,cr=function(){};return typeof BroadcastChannel<"u"&&((cr=function(){(Da=new BroadcastChannel(_r)).onmessage=function(f){return f.data&&hu(f.data)}})(),typeof Da.unref=="function"&&Da.unref(),bn(Nr,function(f){hs||Da.postMessage(f)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(f){if(!Ci.disableBfCache&&f.persisted){Pn&&console.debug("Dexie: handling persisted pagehide"),Da?.close();for(var p=0,g=vi;p<g.length;p++)g[p].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(f){!Ci.disableBfCache&&f.persisted&&(Pn&&console.debug("Dexie: handling persisted pageshow"),cr(),hu({all:new En(-1/0,[[]])}))})),Ie.rejectionMapper=function(f,p){return!f||f instanceof xe||f instanceof TypeError||f instanceof SyntaxError||!f.name||!ns[f.name]?f:(p=new ns[f.name](p||f.message,f),"stack"in f&&re(p,"stack",{get:function(){return this.inner.stack}}),p)},ol(Pn),s(Ci,Object.freeze({__proto__:null,Dexie:Ci,liveQuery:kc,Entity:Ao,cmp:ot,PropModification:Or,replacePrefix:function(f,p){return new Or({replacePrefix:[f,p]})},add:function(f){return new Or({add:f})},remove:function(f){return new Or({remove:f})},default:Ci,RangeSet:En,mergeRanges:Vr,rangesOverlap:Fn}),{default:Ci}),Ci})})(Ff)),Ff.exports}var kw=Mw();const Xp=Tm(kw),I_=Symbol.for("Dexie"),ih=globalThis[I_]||(globalThis[I_]=Xp);if(Xp.semVer!==ih.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Xp.semVer} and ${ih.semVer}`);const{liveQuery:zD,mergeRanges:BD,rangesOverlap:qD,RangeSet:HD,cmp:KD,Entity:FD,PropModification:GD,replacePrefix:YD,add:QD,remove:XD,DexieYProvider:$D}=ih,nr=new ih("GeminiPodcastFlashcards");nr.version(2).stores({vocab:"id, word, status, nextReview, reviewCount, updatedAt"});async function Vw(){if(await nr.vocab.count()===0)try{const n="/public/flashcards/data.json".replace("//","/");console.log(`Fetching data from: ${n}`);const s=await fetch(n);if(!s.ok)throw new Error(`Failed to fetch data.json (${s.status})`);const u=(await s.json()).map(d=>({...d,status:d.status||"new",reviewCount:d.reviewCount||0,nextReview:d.nextReview||Date.now(),updatedAt:Date.now()}));await nr.vocab.bulkAdd(u),console.log(`Initialized DB with ${u.length} cards.`)}catch(e){console.error("Error initializing database:",e)}}const Pw=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Lw=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),x_=i=>{const e=Lw(i);return e.charAt(0).toUpperCase()+e.slice(1)},Tb=(...i)=>i.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),Uw=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var jw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const zw=Se.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:d,...y},_)=>Se.createElement("svg",{ref:_,...jw,width:e,height:e,stroke:i,strokeWidth:s?Number(n)*24/Number(e):n,className:Tb("lucide",o),...!u&&!Uw(y)&&{"aria-hidden":"true"},...y},[...d.map(([E,R])=>Se.createElement(E,R)),...Array.isArray(u)?u:[u]]));const nl=(i,e)=>{const n=Se.forwardRef(({className:s,...o},u)=>Se.createElement(zw,{ref:u,iconNode:e,className:Tb(`lucide-${Pw(x_(i))}`,`lucide-${i}`,s),...o}));return n.displayName=x_(i),n};const Bw=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],qw=nl("loader-circle",Bw);const Hw=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Kw=nl("mic",Hw);const Fw=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Gw=nl("play",Fw);const Yw=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],O_=nl("sparkles",Yw);const Qw=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Xw=nl("square",Qw);const $w=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Jw=nl("trash-2",$w);const Ww=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],kf=nl("volume-2",Ww);function wb(i,e){const n=Date.now(),s=60*1e3,o=1440*60*1e3,u=Number(e);if(isNaN(u)||u<0||u>5)throw new Error("Grade must be a number between 0 and 5");let{easeFactor:d=2.5,interval:y=0,reviewCount:_=0}=i;u>=3?(y===0?y=1:y===1?y=6:y=Math.round(y*d),_+=1):y=0;let E=d+(.1-(5-u)*(.08+(5-u)*.02));E<1.3&&(E=1.3);const R=y===0?n+10*s:n+y*o,x=u>=3?"review":"learning";return{easeFactor:parseFloat(E.toFixed(2)),interval:y,nextReview:R,status:x,reviewCount:_,updatedAt:n}}function Zw(){const[i,e]=Se.useState(!1),[n,s]=Se.useState(null),[o,u]=Se.useState(null),d=Se.useRef(null),y=Se.useRef([]);return Se.useEffect(()=>()=>{n&&URL.revokeObjectURL(n)},[n]),{isRecording:i,audioUrl:n,error:o,startRecording:async()=>{try{u(null);const x=await navigator.mediaDevices.getUserMedia({audio:!0});d.current=new MediaRecorder(x),y.current=[],d.current.ondataavailable=M=>{M.data.size>0&&y.current.push(M.data)},d.current.onstop=()=>{const M=new Blob(y.current,{type:"audio/webm"}),X=URL.createObjectURL(M);s(X),x.getTracks().forEach(re=>re.stop())},d.current.start(),e(!0)}catch(x){console.error("Error accessing microphone:",x),u("Microphone access denied. Please check your permissions.")}},stopRecording:()=>{d.current&&i&&(d.current.stop(),e(!1))},clearRecording:()=>{n&&(URL.revokeObjectURL(n),s(null)),e(!1),u(null)}}}var D_;(function(i){i.STRING="string",i.NUMBER="number",i.INTEGER="integer",i.BOOLEAN="boolean",i.ARRAY="array",i.OBJECT="object"})(D_||(D_={}));var N_;(function(i){i.LANGUAGE_UNSPECIFIED="language_unspecified",i.PYTHON="python"})(N_||(N_={}));var M_;(function(i){i.OUTCOME_UNSPECIFIED="outcome_unspecified",i.OUTCOME_OK="outcome_ok",i.OUTCOME_FAILED="outcome_failed",i.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(M_||(M_={}));const k_=["user","model","function","system"];var V_;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(V_||(V_={}));var P_;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(P_||(P_={}));var L_;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(L_||(L_={}));var U_;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER"})(U_||(U_={}));var Wu;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.OTHER="OTHER"})(Wu||(Wu={}));var j_;(function(i){i.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",i.RETRIEVAL_QUERY="RETRIEVAL_QUERY",i.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",i.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",i.CLASSIFICATION="CLASSIFICATION",i.CLUSTERING="CLUSTERING"})(j_||(j_={}));var z_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(z_||(z_={}));var B_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(B_||(B_={}));class mr extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Ul extends mr{constructor(e,n){super(e),this.response=n}}class Sb extends mr{constructor(e,n,s,o){super(e),this.status=n,this.statusText=s,this.errorDetails=o}}class oo extends mr{}class Ab extends mr{}const eS="https://generativelanguage.googleapis.com",tS="v1beta",nS="0.24.1",rS="genai-js";var $o;(function(i){i.GENERATE_CONTENT="generateContent",i.STREAM_GENERATE_CONTENT="streamGenerateContent",i.COUNT_TOKENS="countTokens",i.EMBED_CONTENT="embedContent",i.BATCH_EMBED_CONTENTS="batchEmbedContents"})($o||($o={}));class iS{constructor(e,n,s,o,u){this.model=e,this.task=n,this.apiKey=s,this.stream=o,this.requestOptions=u}toString(){var e,n;const s=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||tS;let u=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||eS}/${s}/${this.model}:${this.task}`;return this.stream&&(u+="?alt=sse"),u}}function sS(i){const e=[];return i?.apiClient&&e.push(i.apiClient),e.push(`${rS}/${nS}`),e.join(" ")}async function aS(i){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",sS(i.requestOptions)),n.append("x-goog-api-key",i.apiKey);let s=(e=i.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(o){throw new oo(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${o.message}`)}for(const[o,u]of s.entries()){if(o==="x-goog-api-key")throw new oo(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new oo(`Header name ${o} can only be set using the apiClient field`);n.append(o,u)}}return n}async function oS(i,e,n,s,o,u){const d=new iS(i,e,n,s,u);return{url:d.toString(),fetchOptions:Object.assign(Object.assign({},fS(u)),{method:"POST",headers:await aS(d),body:o})}}async function _c(i,e,n,s,o,u={},d=fetch){const{url:y,fetchOptions:_}=await oS(i,e,n,s,o,u);return lS(y,_,d)}async function lS(i,e,n=fetch){let s;try{s=await n(i,e)}catch(o){uS(o,i)}return s.ok||await cS(s,i),s}function uS(i,e){let n=i;throw n.name==="AbortError"?(n=new Ab(`Request aborted when fetching ${e.toString()}: ${i.message}`),n.stack=i.stack):i instanceof Sb||i instanceof oo||(n=new mr(`Error fetching from ${e.toString()}: ${i.message}`),n.stack=i.stack),n}async function cS(i,e){let n="",s;try{const o=await i.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,s=o.error.details)}catch{}throw new Sb(`Error fetching from ${e.toString()}: [${i.status} ${i.statusText}] ${n}`,i.status,i.statusText,s)}function fS(i){const e={};if(i?.signal!==void 0||i?.timeout>=0){const n=new AbortController;i?.timeout>=0&&setTimeout(()=>n.abort(),i.timeout),i?.signal&&i.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}function Sm(i){return i.text=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Gf(i.candidates[0]))throw new Ul(`${to(i)}`,i);return hS(i)}else if(i.promptFeedback)throw new Ul(`Text not available. ${to(i)}`,i);return""},i.functionCall=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Gf(i.candidates[0]))throw new Ul(`${to(i)}`,i);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),q_(i)[0]}else if(i.promptFeedback)throw new Ul(`Function call not available. ${to(i)}`,i)},i.functionCalls=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Gf(i.candidates[0]))throw new Ul(`${to(i)}`,i);return q_(i)}else if(i.promptFeedback)throw new Ul(`Function call not available. ${to(i)}`,i)},i}function hS(i){var e,n,s,o;const u=[];if(!((n=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const d of(o=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)d.text&&u.push(d.text),d.executableCode&&u.push("\n```"+d.executableCode.language+`
`+d.executableCode.code+"\n```\n"),d.codeExecutionResult&&u.push("\n```\n"+d.codeExecutionResult.output+"\n```\n");return u.length>0?u.join(""):""}function q_(i){var e,n,s,o;const u=[];if(!((n=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const d of(o=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)d.functionCall&&u.push(d.functionCall);if(u.length>0)return u}const dS=[Wu.RECITATION,Wu.SAFETY,Wu.LANGUAGE];function Gf(i){return!!i.finishReason&&dS.includes(i.finishReason)}function to(i){var e,n,s;let o="";if((!i.candidates||i.candidates.length===0)&&i.promptFeedback)o+="Response was blocked",!((e=i.promptFeedback)===null||e===void 0)&&e.blockReason&&(o+=` due to ${i.promptFeedback.blockReason}`),!((n=i.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${i.promptFeedback.blockReasonMessage}`);else if(!((s=i.candidates)===null||s===void 0)&&s[0]){const u=i.candidates[0];Gf(u)&&(o+=`Candidate was blocked due to ${u.finishReason}`,u.finishMessage&&(o+=`: ${u.finishMessage}`))}return o}function oc(i){return this instanceof oc?(this.v=i,this):new oc(i)}function pS(i,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(i,e||[]),o,u=[];return o={},d("next"),d("throw"),d("return"),o[Symbol.asyncIterator]=function(){return this},o;function d(M){s[M]&&(o[M]=function(X){return new Promise(function(re,pe){u.push([M,X,re,pe])>1||y(M,X)})})}function y(M,X){try{_(s[M](X))}catch(re){x(u[0][3],re)}}function _(M){M.value instanceof oc?Promise.resolve(M.value.v).then(E,R):x(u[0][2],M)}function E(M){y("next",M)}function R(M){y("throw",M)}function x(M,X){M(X),u.shift(),u.length&&y(u[0][0],u[0][1])}}const H_=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function mS(i){const e=i.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=vS(e),[s,o]=n.tee();return{stream:yS(s),response:gS(o)}}async function gS(i){const e=[],n=i.getReader();for(;;){const{done:s,value:o}=await n.read();if(s)return Sm(_S(e));e.push(o)}}function yS(i){return pS(this,arguments,function*(){const n=i.getReader();for(;;){const{value:s,done:o}=yield oc(n.read());if(o)break;yield yield oc(Sm(s))}})}function vS(i){const e=i.getReader();return new ReadableStream({start(s){let o="";return u();function u(){return e.read().then(({value:d,done:y})=>{if(y){if(o.trim()){s.error(new mr("Failed to parse stream"));return}s.close();return}o+=d;let _=o.match(H_),E;for(;_;){try{E=JSON.parse(_[1])}catch{s.error(new mr(`Error parsing JSON response: "${_[1]}"`));return}s.enqueue(E),o=o.substring(_[0].length),_=o.match(H_)}return u()}).catch(d=>{let y=d;throw y.stack=d.stack,y.name==="AbortError"?y=new Ab("Request aborted when reading from the stream"):y=new mr("Error reading from the stream"),y})}}})}function _S(i){const e=i[i.length-1],n={promptFeedback:e?.promptFeedback};for(const s of i){if(s.candidates){let o=0;for(const u of s.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=u.citationMetadata,n.candidates[o].groundingMetadata=u.groundingMetadata,n.candidates[o].finishReason=u.finishReason,n.candidates[o].finishMessage=u.finishMessage,n.candidates[o].safetyRatings=u.safetyRatings,u.content&&u.content.parts){n.candidates[o].content||(n.candidates[o].content={role:u.content.role||"user",parts:[]});const d={};for(const y of u.content.parts)y.text&&(d.text=y.text),y.functionCall&&(d.functionCall=y.functionCall),y.executableCode&&(d.executableCode=y.executableCode),y.codeExecutionResult&&(d.codeExecutionResult=y.codeExecutionResult),Object.keys(d).length===0&&(d.text=""),n.candidates[o].content.parts.push(d)}o++}s.usageMetadata&&(n.usageMetadata=s.usageMetadata)}return n}async function Cb(i,e,n,s){const o=await _c(e,$o.STREAM_GENERATE_CONTENT,i,!0,JSON.stringify(n),s);return mS(o)}async function Rb(i,e,n,s){const u=await(await _c(e,$o.GENERATE_CONTENT,i,!1,JSON.stringify(n),s)).json();return{response:Sm(u)}}function Ib(i){if(i!=null){if(typeof i=="string")return{role:"system",parts:[{text:i}]};if(i.text)return{role:"system",parts:[i]};if(i.parts)return i.role?i:{role:"system",parts:i.parts}}}function lc(i){let e=[];if(typeof i=="string")e=[{text:i}];else for(const n of i)typeof n=="string"?e.push({text:n}):e.push(n);return bS(e)}function bS(i){const e={role:"user",parts:[]},n={role:"function",parts:[]};let s=!1,o=!1;for(const u of i)"functionResponse"in u?(n.parts.push(u),o=!0):(e.parts.push(u),s=!0);if(s&&o)throw new mr("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!o)throw new mr("No content is provided for sending chat message.");return s?e:n}function ES(i,e){var n;let s={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(n=e?.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=i.generateContentRequest!=null;if(i.contents){if(o)throw new oo("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=i.contents}else if(o)s=Object.assign(Object.assign({},s),i.generateContentRequest);else{const u=lc(i);s.contents=[u]}return{generateContentRequest:s}}function K_(i){let e;return i.contents?e=i:e={contents:[lc(i)]},i.systemInstruction&&(e.systemInstruction=Ib(i.systemInstruction)),e}function TS(i){return typeof i=="string"||Array.isArray(i)?{content:lc(i)}:i}const F_=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],wS={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function SS(i){let e=!1;for(const n of i){const{role:s,parts:o}=n;if(!e&&s!=="user")throw new mr(`First content should be with role 'user', got ${s}`);if(!k_.includes(s))throw new mr(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(k_)}`);if(!Array.isArray(o))throw new mr("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new mr("Each Content should have at least one part");const u={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const y of o)for(const _ of F_)_ in y&&(u[_]+=1);const d=wS[s];for(const y of F_)if(!d.includes(y)&&u[y]>0)throw new mr(`Content with role '${s}' can't contain '${y}' part`);e=!0}}function G_(i){var e;if(i.candidates===void 0||i.candidates.length===0)return!1;const n=(e=i.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const s of n.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}const Y_="SILENT_ERROR";class AS{constructor(e,n,s,o={}){this.model=n,this.params=s,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,s?.history&&(SS(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var s,o,u,d,y,_;await this._sendPromise;const E=lc(e),R={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(y=this.params)===null||y===void 0?void 0:y.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,E]},x=Object.assign(Object.assign({},this._requestOptions),n);let M;return this._sendPromise=this._sendPromise.then(()=>Rb(this._apiKey,this.model,R,x)).then(X=>{var re;if(G_(X.response)){this._history.push(E);const pe=Object.assign({parts:[],role:"model"},(re=X.response.candidates)===null||re===void 0?void 0:re[0].content);this._history.push(pe)}else{const pe=to(X.response);pe&&console.warn(`sendMessage() was unsuccessful. ${pe}. Inspect response object for details.`)}M=X}).catch(X=>{throw this._sendPromise=Promise.resolve(),X}),await this._sendPromise,M}async sendMessageStream(e,n={}){var s,o,u,d,y,_;await this._sendPromise;const E=lc(e),R={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(y=this.params)===null||y===void 0?void 0:y.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,E]},x=Object.assign(Object.assign({},this._requestOptions),n),M=Cb(this._apiKey,this.model,R,x);return this._sendPromise=this._sendPromise.then(()=>M).catch(X=>{throw new Error(Y_)}).then(X=>X.response).then(X=>{if(G_(X)){this._history.push(E);const re=Object.assign({},X.candidates[0].content);re.role||(re.role="model"),this._history.push(re)}else{const re=to(X);re&&console.warn(`sendMessageStream() was unsuccessful. ${re}. Inspect response object for details.`)}}).catch(X=>{X.message!==Y_&&console.error(X)}),M}}async function CS(i,e,n,s){return(await _c(e,$o.COUNT_TOKENS,i,!1,JSON.stringify(n),s)).json()}async function RS(i,e,n,s){return(await _c(e,$o.EMBED_CONTENT,i,!1,JSON.stringify(n),s)).json()}async function IS(i,e,n,s){const o=n.requests.map(d=>Object.assign(Object.assign({},d),{model:e}));return(await _c(e,$o.BATCH_EMBED_CONTENTS,i,!1,JSON.stringify({requests:o}),s)).json()}class Q_{constructor(e,n,s={}){this.apiKey=e,this._requestOptions=s,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=Ib(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var s;const o=K_(e),u=Object.assign(Object.assign({},this._requestOptions),n);return Rb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),u)}async generateContentStream(e,n={}){var s;const o=K_(e),u=Object.assign(Object.assign({},this._requestOptions),n);return Cb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),u)}startChat(e){var n;return new AS(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const s=ES(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return CS(this.apiKey,this.model,s,o)}async embedContent(e,n={}){const s=TS(e),o=Object.assign(Object.assign({},this._requestOptions),n);return RS(this.apiKey,this.model,s,o)}async batchEmbedContents(e,n={}){const s=Object.assign(Object.assign({},this._requestOptions),n);return IS(this.apiKey,this.model,e,s)}}class Pp{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new mr("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Q_(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,s){if(!e.name)throw new oo("Cached content must contain a `name` field.");if(!e.model)throw new oo("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const d of o)if(n?.[d]&&e[d]&&n?.[d]!==e[d]){if(d==="model"){const y=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,_=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(y===_)continue}throw new oo(`Different value for "${d}" specified in modelParams (${n[d]}) and cachedContent (${e[d]})`)}const u=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Q_(this.apiKey,u,s)}}const xS={models:{default:"gemini-2.5-flash"}},OS={ai:xS};class DS{constructor(){this.apiKeyKey="gemini_api_key_byok",this.modelName=OS.ai?.models?.default}getApiKey(){return localStorage.getItem(this.apiKeyKey)||sessionStorage.getItem(this.apiKeyKey)}isPersistent(){return!!localStorage.getItem(this.apiKeyKey)}setApiKey(e,n=!1){n?(localStorage.setItem(this.apiKeyKey,e),sessionStorage.removeItem(this.apiKeyKey)):(sessionStorage.setItem(this.apiKeyKey,e),localStorage.removeItem(this.apiKeyKey))}removeApiKey(){sessionStorage.removeItem(this.apiKeyKey),localStorage.removeItem(this.apiKeyKey)}hasKey(){return!!this.getApiKey()}async getParaphrase(e,n){const s=this.getApiKey();if(!s)throw new Error("API Key not found. Please configure it in Settings.");const u=new Pp(s).getGenerativeModel({model:this.modelName}),d=`
      Role: English Language Tutor for B1/B2 learners.
      Task: Explain the word "${e}" in simple English.
      Context: "${n}"
      
      Constraints:
      1. Use simple vocabulary (CEFR B1 level).
      2. Keep it concise (under 30 words).
      3. Do NOT simply repeat the definition; explain it naturally.
      4. Output plain text only (no markdown).
    `;return this._callGemini(u,d,!1,!1)}async generateCardDetails(e){const n=this.getApiKey();if(!n)throw new Error("API Key not found in session. Please configure it in Settings again.");const o=new Pp(n).getGenerativeModel({model:this.modelName}),u=`
      You are an English vocabulary expert helping a Traditional Chinese (Taiwan) learner.
      Define the word: "${e}".
      
      Return ONLY a raw JSON object (no markdown formatting, no code blocks) with the following keys:
      - "definition": A clear, concise English definition suitable for a flashcard.
      - "ipa": The IPA phonetic transcription.
      - "context": A short, natural example sentence using the word (Keep this in English).
      - "translation": The Traditional Chinese (Taiwan) translation of the word. Ensure it is NOT Simplified Chinese.
    `;return this._callGemini(o,u)}async analyzeTranscript(e,n){const s=this.getApiKey();if(!s)throw new Error("API Key not found. Please configure it in Settings.");const u=new Pp(s).getGenerativeModel({model:this.modelName});let d="";n==="auto"?d="Select the most important and difficult vocabulary words (approximately 5 to 15 words depending on text length).":d=`Select strictly up to ${n} most important vocabulary words.`;const y=`
      You are an expert language tutor analyzing a podcast transcript for a Traditional Chinese (Taiwan) learner.
      
      Goal: Extract vocabulary words from the provided text.
      Constraint: ${d}
      
      For each word, provide:
      1. "word": The target word (lemma).
      2. "ipa": IPA phonetic transcription.
      3. "definition": A concise English definition relevant to the context in the transcript.
      4. "context": The exact sentence or a slightly simplified version from the text where the word appears (Keep in English).
      5. "translation": The Traditional Chinese (Taiwan) translation of the word. Strictly NO Simplified Chinese.

      Input Text:
      """
      ${e.substring(0,3e4)} 
      """
      (Note: Input truncated to first 30k chars to fit context window if necessary)

      Return ONLY a raw JSON array (no markdown, no code blocks) of objects.
      Example format:
      [
        { "word": "Serendipity", "ipa": "...", "definition": "...", "context": "...", "translation": "" }
      ]
    `;return this._callGemini(u,y,!0)}async _callGemini(e,n,s=!1,o=!0){try{console.log(`Calling AI Model: ${this.modelName}`);const _=(await(await e.generateContent(n)).response).text().replace(/```json|```/g,"").trim();if(!o)return _;let E;try{E=JSON.parse(_)}catch(x){const M=_.indexOf(s?"[":"{"),X=_.lastIndexOf(s?"]":"}")+1;if(M!==-1&&X!==-1)E=JSON.parse(_.substring(M,X));else throw x}const R=x=>{x.ipa&&(x.ipa=x.ipa.replace(new RegExp("^[/\\[]|[/\\]]$","g"),""))};return Array.isArray(E)?E.forEach(R):R(E),E}catch(u){throw console.error("AI Generation failed:",u),new Error(`AI Error: ${u.message}`)}}}const _s=new DS;function NS({card:i,onUpdate:e}){const[n,s]=Se.useState(!1),[o,u]=Se.useState(!1),[d,y]=Se.useState(null),[_,E]=Se.useState(!1),{isRecording:R,audioUrl:x,startRecording:M,stopRecording:X,clearRecording:re,error:pe}=Zw();Se.useEffect(()=>{n||(y(null),re())},[n,i.id]);const Ee=()=>{s(!n),u(!1)},ke=(D,V)=>{V.stopPropagation();try{const G=wb(i,D),z={...i,...G};e(z),s(!1),u(!1)}catch(G){console.error("Error updating card:",G)}},Be=D=>{D.stopPropagation(),u(!o)},Ve=(D,V)=>{if(V.stopPropagation(),!D)return;window.speechSynthesis.cancel();const G=new SpeechSynthesisUtterance(D);G.lang="en-US",G.rate=.9,window.speechSynthesis.speak(G)},rt=D=>D===0?"< 1d":D===1?"1d":`${D}d`,xt=async D=>{if(D.stopPropagation(),!d){E(!0);try{const V=typeof i.context=="string"?i.context:i.context?.text||"",G=await _s.getParaphrase(i.word,V);y(G)}catch{y("Unable to connect to AI Coach. Check your API Key settings.")}finally{E(!1)}}},Ge={background:"transparent",border:"none",cursor:"pointer",color:"#88ccca",padding:"4px",marginLeft:"8px",verticalAlign:"middle",transition:"opacity 0.2s",display:"inline-flex",alignItems:"center",justifyContent:"center"},k=D=>D.stopPropagation();return H.jsxs("div",{className:"flashcard-container",onClick:Ee,style:{border:"1px solid #444",padding:"1.5rem",borderRadius:"12px",textAlign:"center",cursor:"pointer",minHeight:"220px",display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"#25262b",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"transform 0.2s",color:"#e0e0e0",position:"relative",maxHeight:"70vh",overflow:"hidden"},children:[!n&&H.jsxs("div",{className:"front",children:[H.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"0.5rem"},children:[H.jsx("h2",{style:{fontSize:"2.5rem",margin:0,fontWeight:"bold"},children:i.word}),H.jsx("button",{onClick:D=>Ve(i.word,D),style:Ge,"aria-label":"Play pronunciation",children:H.jsx(kf,{size:24})})]}),i.ipa&&H.jsxs("p",{style:{fontSize:"1.2rem",color:"#88ccca",fontFamily:"monospace",margin:"0 0 1.5rem 0"},children:["/",i.ipa,"/"]}),H.jsx("p",{style:{color:"#666",fontSize:"0.9rem"},children:"(Click to flip)"}),H.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",fontSize:"0.8rem",color:"#555"},children:["EF: ",i.easeFactor||"2.5"," | Int: ",i.interval||0,"d"]})]}),n&&H.jsxs("div",{className:"back",style:{display:"flex",flexDirection:"column",height:"100%"},children:[H.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"0.5rem"},children:[H.jsx("h2",{style:{fontSize:"1.5rem",color:"#888",margin:0},children:i.word}),H.jsx("button",{onClick:D=>Ve(i.word,D),style:{...Ge,color:"#666"},children:H.jsx(kf,{size:20})})]}),i.ipa&&H.jsxs("p",{style:{fontSize:"1rem",color:"#666",fontFamily:"monospace",margin:"0 0 0.8rem 0"},children:["/",i.ipa,"/"]}),H.jsxs("div",{style:{marginBottom:"0.8rem"},onClick:k,children:[H.jsx("button",{onClick:Be,style:{background:"transparent",border:"1px solid #555",color:"#888",borderRadius:"15px",padding:"2px 10px",fontSize:"0.75rem",cursor:"pointer",marginBottom:"0.2rem"},children:o?"Hide Translation":"Show Translation"}),o&&H.jsx("div",{style:{fontSize:"1.1rem",color:"#e91e63",fontWeight:"bold",marginTop:"0.3rem"},children:i.translation||"(No translation)"})]}),H.jsxs("div",{style:{textAlign:"left",lineHeight:"1.6",flexGrow:1,overflowY:"auto",paddingRight:"4px",marginBottom:"1rem",scrollbarWidth:"thin",scrollbarColor:"#444 transparent"},onClick:k,children:[H.jsxs("div",{style:{marginBottom:"1rem",backgroundColor:"rgba(255, 255, 255, 0.05)",padding:"10px",borderRadius:"6px",borderLeft:"4px solid #88ccca"},children:[H.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[H.jsx("strong",{style:{color:"#88ccca",fontSize:"0.8rem",textTransform:"uppercase"},children:"Definition"}),H.jsx("button",{onClick:D=>Ve(i.definition,D),style:{...Ge,marginLeft:"8px",padding:0},children:H.jsx(kf,{size:16})})]}),H.jsx("div",{style:{fontSize:"1.1rem",color:"#ffffff",fontWeight:"500",lineHeight:"1.4"},children:i.definition})]}),d&&H.jsxs("div",{style:{marginBottom:"1rem",backgroundColor:"rgba(233, 30, 99, 0.1)",padding:"10px",borderRadius:"6px",borderLeft:"4px solid #e91e63",animation:"fadeIn 0.3s"},children:[H.jsxs("strong",{style:{color:"#e91e63",fontSize:"0.8rem",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"5px"},children:[H.jsx(O_,{size:12})," AI Tutor"]}),H.jsx("p",{style:{margin:"5px 0 0",fontSize:"0.95rem",color:"#ffcdd2"},children:d})]}),H.jsxs("div",{style:{padding:"0 10px"},children:[H.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[H.jsx("strong",{style:{color:"#aaa",fontSize:"0.8rem"},children:"Context:"}),H.jsx("button",{onClick:D=>Ve(i.context,D),style:{...Ge,marginLeft:"6px",color:"#aaa"},children:H.jsx(kf,{size:16})})]}),H.jsx("div",{style:{marginTop:"2px"},children:H.jsx("em",{style:{color:"#a5d6a7",fontSize:"0.95rem"},children:i.context})})]})]}),H.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"8px",marginBottom:"1rem"},onClick:k,children:[H.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[R?H.jsx("button",{onClick:X,title:"Stop Recording",style:{background:"#e53935",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff",animation:"pulse 1.5s infinite"},children:H.jsx(Xw,{size:14,fill:"currentColor"})}):H.jsx("button",{onClick:M,title:"Shadowing Record",style:{background:"#333",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff"},children:H.jsx(Kw,{size:16})}),x&&!R&&H.jsxs(H.Fragment,{children:[H.jsx("audio",{src:x,style:{display:"none"},id:"shadowing-playback"}),H.jsx("button",{onClick:()=>document.getElementById("shadowing-playback").play(),style:{background:"transparent",border:"1px solid #4caf50",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#4caf50"},children:H.jsx(Gw,{size:14,fill:"currentColor"})}),H.jsx("button",{onClick:re,style:{background:"transparent",border:"none",cursor:"pointer",color:"#666"},children:H.jsx(Jw,{size:16})})]}),pe&&H.jsx("span",{style:{fontSize:"0.7rem",color:"#e53935"},children:"Mic Error"})]}),H.jsx("div",{children:H.jsxs("button",{onClick:xt,disabled:_||!!d,style:{background:"transparent",border:"1px solid #e91e63",borderRadius:"15px",padding:"4px 10px",fontSize:"0.75rem",color:"#e91e63",cursor:_||d?"default":"pointer",opacity:_||d?.5:1,display:"flex",alignItems:"center",gap:"5px"},children:[_?H.jsx(qw,{size:12,className:"spin"}):H.jsx(O_,{size:12}),d?"Explained":"Explain Simply"]})})]}),H.jsxs("div",{className:"actions",onClick:k,style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginTop:"auto",paddingTop:"0.5rem",borderTop:"1px solid #333"},children:[H.jsxs("button",{onClick:D=>ke(1,D),style:Vf("#e53935"),title:"Reset",children:["Again ",H.jsx("div",{style:Pf,children:"< 10m"})]}),H.jsxs("button",{onClick:D=>ke(3,D),style:Vf("#fb8c00"),title:"Hard",children:["Hard ",H.jsxs("div",{style:Pf,children:["~",rt(Math.round((i.interval||1)*1.2))]})]}),H.jsxs("button",{onClick:D=>ke(4,D),style:Vf("#43a047"),title:"Good",children:["Good"," ",H.jsx("div",{style:Pf,children:rt(Math.round((i.interval||1)*(i.easeFactor||2.5)))})]}),H.jsxs("button",{onClick:D=>ke(5,D),style:Vf("#1e88e5"),title:"Easy",children:["Easy"," ",H.jsx("div",{style:Pf,children:rt(Math.round((i.interval||1)*(i.easeFactor||2.5)*1.3))})]})]})]}),H.jsx("style",{children:`
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }
        .spin { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
      `})]})}const Vf=i=>({padding:"0.5rem 0.2rem",backgroundColor:i,color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"0.85rem"}),Pf={fontSize:"0.65rem",opacity:.8,marginTop:"2px"};class MS{_generateId(){const e=Date.now(),n=Math.random().toString(36).substring(2,8);return`${e}_${n}`}async importCards(e){try{let n;try{n=JSON.parse(e)}catch(y){throw new Error("Input must be a valid JSON string",y)}if(!Array.isArray(n))throw new Error("Input must be a JSON array");const s=await nr.vocab.toArray(),o=new Set(s.map(y=>y.word.toLowerCase())),u=[];let d=0;for(const y of n)y.word&&(o.has(y.word.toLowerCase())?d++:(u.push({...y,id:this._generateId(),status:"new",reviewCount:0,nextReview:Date.now(),easeFactor:2.5,interval:0,updatedAt:Date.now(),createdAt:Date.now()}),o.add(y.word.toLowerCase())));return u.length>0&&await nr.vocab.bulkAdd(u),{addedCount:u.length,skippedCount:d}}catch(n){throw console.error("Import failed:",n),n}}async addCard(e){if((await nr.vocab.toArray()).some(u=>u.word.toLowerCase()===e.word.toLowerCase()))throw new Error(`Duplicate word: ${e.word}`);const o={...e,id:this._generateId(),status:"new",reviewCount:0,nextReview:Date.now(),easeFactor:2.5,interval:0,updatedAt:Date.now(),createdAt:Date.now()};return await nr.vocab.add(o),o}async updateCard(e){const n={...e,updatedAt:Date.now()};return await nr.vocab.put(n),n}async deleteCard(e){await nr.vocab.delete(e)}async getAllCards(){return await nr.vocab.toArray()}async clearAllCards(){await nr.vocab.clear()}async getDueCards(e=20){const n=Date.now();return(await nr.vocab.where("nextReview").belowOrEqual(n).and(o=>o.status!=="new").toArray()).sort((o,u)=>o.nextReview!==u.nextReview?o.nextReview-u.nextReview:(o.easeFactor||2.5)-(u.easeFactor||2.5)).slice(0,e)}async processReview(e,n){const s=wb(e,n),o={...e,...s};return await this.updateCard(o),o}}const Hl=new MS;let kS={data:""},VS=i=>{if(typeof window=="object"){let e=(i?i.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(i||document.head).appendChild(e),e.firstChild}return i||kS},PS=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,LS=/\/\*[^]*?\*\/|  +/g,X_=/\n+/g,no=(i,e)=>{let n="",s="",o="";for(let u in i){let d=i[u];u[0]=="@"?u[1]=="i"?n=u+" "+d+";":s+=u[1]=="f"?no(d,u):u+"{"+no(d,u[1]=="k"?"":e)+"}":typeof d=="object"?s+=no(d,e?e.replace(/([^,])+/g,y=>u.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,_=>/&/.test(_)?_.replace(/&/g,y):y?y+" "+_:_)):u):d!=null&&(u=/^--/.test(u)?u:u.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=no.p?no.p(u,d):u+":"+d+";")}return n+(e&&o?e+"{"+o+"}":o)+s},ia={},xb=i=>{if(typeof i=="object"){let e="";for(let n in i)e+=n+xb(i[n]);return e}return i},US=(i,e,n,s,o)=>{let u=xb(i),d=ia[u]||(ia[u]=(_=>{let E=0,R=11;for(;E<_.length;)R=101*R+_.charCodeAt(E++)>>>0;return"go"+R})(u));if(!ia[d]){let _=u!==i?i:(E=>{let R,x,M=[{}];for(;R=PS.exec(E.replace(LS,""));)R[4]?M.shift():R[3]?(x=R[3].replace(X_," ").trim(),M.unshift(M[0][x]=M[0][x]||{})):M[0][R[1]]=R[2].replace(X_," ").trim();return M[0]})(i);ia[d]=no(o?{["@keyframes "+d]:_}:_,n?"":"."+d)}let y=n&&ia.g?ia.g:null;return n&&(ia.g=ia[d]),((_,E,R,x)=>{x?E.data=E.data.replace(x,_):E.data.indexOf(_)===-1&&(E.data=R?_+E.data:E.data+_)})(ia[d],e,s,y),d},jS=(i,e,n)=>i.reduce((s,o,u)=>{let d=e[u];if(d&&d.call){let y=d(n),_=y&&y.props&&y.props.className||/^go/.test(y)&&y;d=_?"."+_:y&&typeof y=="object"?y.props?"":no(y,""):y===!1?"":y}return s+o+(d??"")},"");function Ch(i){let e=this||{},n=i.call?i(e.p):i;return US(n.unshift?n.raw?jS(n,[].slice.call(arguments,1),e.p):n.reduce((s,o)=>Object.assign(s,o&&o.call?o(e.p):o),{}):n,VS(e.target),e.g,e.o,e.k)}let Ob,$p,Jp;Ch.bind({g:1});let ua=Ch.bind({k:1});function zS(i,e,n,s){no.p=e,Ob=i,$p=n,Jp=s}function bo(i,e){let n=this||{};return function(){let s=arguments;function o(u,d){let y=Object.assign({},u),_=y.className||o.className;n.p=Object.assign({theme:$p&&$p()},y),n.o=/ *go\d+/.test(_),y.className=Ch.apply(n,s)+(_?" "+_:"");let E=i;return i[0]&&(E=y.as||i,delete y.as),Jp&&E[0]&&Jp(y),Ob(E,y)}return o}}var BS=i=>typeof i=="function",sh=(i,e)=>BS(i)?i(e):i,qS=(()=>{let i=0;return()=>(++i).toString()})(),Db=(()=>{let i;return()=>{if(i===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");i=!e||e.matches}return i}})(),HS=20,Am="default",Nb=(i,e)=>{let{toastLimit:n}=i.settings;switch(e.type){case 0:return{...i,toasts:[e.toast,...i.toasts].slice(0,n)};case 1:return{...i,toasts:i.toasts.map(d=>d.id===e.toast.id?{...d,...e.toast}:d)};case 2:let{toast:s}=e;return Nb(i,{type:i.toasts.find(d=>d.id===s.id)?1:0,toast:s});case 3:let{toastId:o}=e;return{...i,toasts:i.toasts.map(d=>d.id===o||o===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return e.toastId===void 0?{...i,toasts:[]}:{...i,toasts:i.toasts.filter(d=>d.id!==e.toastId)};case 5:return{...i,pausedAt:e.time};case 6:let u=e.time-(i.pausedAt||0);return{...i,pausedAt:void 0,toasts:i.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+u}))}}},Yf=[],Mb={toasts:[],pausedAt:void 0,settings:{toastLimit:HS}},bs={},kb=(i,e=Am)=>{bs[e]=Nb(bs[e]||Mb,i),Yf.forEach(([n,s])=>{n===e&&s(bs[e])})},Vb=i=>Object.keys(bs).forEach(e=>kb(i,e)),KS=i=>Object.keys(bs).find(e=>bs[e].toasts.some(n=>n.id===i)),Rh=(i=Am)=>e=>{kb(e,i)},FS={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},GS=(i={},e=Am)=>{let[n,s]=Se.useState(bs[e]||Mb),o=Se.useRef(bs[e]);Se.useEffect(()=>(o.current!==bs[e]&&s(bs[e]),Yf.push([e,s]),()=>{let d=Yf.findIndex(([y])=>y===e);d>-1&&Yf.splice(d,1)}),[e]);let u=n.toasts.map(d=>{var y,_,E;return{...i,...i[d.type],...d,removeDelay:d.removeDelay||((y=i[d.type])==null?void 0:y.removeDelay)||i?.removeDelay,duration:d.duration||((_=i[d.type])==null?void 0:_.duration)||i?.duration||FS[d.type],style:{...i.style,...(E=i[d.type])==null?void 0:E.style,...d.style}}});return{...n,toasts:u}},YS=(i,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:i,pauseDuration:0,...n,id:n?.id||qS()}),bc=i=>(e,n)=>{let s=YS(e,i,n);return Rh(s.toasterId||KS(s.id))({type:2,toast:s}),s.id},jn=(i,e)=>bc("blank")(i,e);jn.error=bc("error");jn.success=bc("success");jn.loading=bc("loading");jn.custom=bc("custom");jn.dismiss=(i,e)=>{let n={type:3,toastId:i};e?Rh(e)(n):Vb(n)};jn.dismissAll=i=>jn.dismiss(void 0,i);jn.remove=(i,e)=>{let n={type:4,toastId:i};e?Rh(e)(n):Vb(n)};jn.removeAll=i=>jn.remove(void 0,i);jn.promise=(i,e,n)=>{let s=jn.loading(e.loading,{...n,...n?.loading});return typeof i=="function"&&(i=i()),i.then(o=>{let u=e.success?sh(e.success,o):void 0;return u?jn.success(u,{id:s,...n,...n?.success}):jn.dismiss(s),o}).catch(o=>{let u=e.error?sh(e.error,o):void 0;u?jn.error(u,{id:s,...n,...n?.error}):jn.dismiss(s)}),i};var QS=1e3,XS=(i,e="default")=>{let{toasts:n,pausedAt:s}=GS(i,e),o=Se.useRef(new Map).current,u=Se.useCallback((x,M=QS)=>{if(o.has(x))return;let X=setTimeout(()=>{o.delete(x),d({type:4,toastId:x})},M);o.set(x,X)},[]);Se.useEffect(()=>{if(s)return;let x=Date.now(),M=n.map(X=>{if(X.duration===1/0)return;let re=(X.duration||0)+X.pauseDuration-(x-X.createdAt);if(re<0){X.visible&&jn.dismiss(X.id);return}return setTimeout(()=>jn.dismiss(X.id,e),re)});return()=>{M.forEach(X=>X&&clearTimeout(X))}},[n,s,e]);let d=Se.useCallback(Rh(e),[e]),y=Se.useCallback(()=>{d({type:5,time:Date.now()})},[d]),_=Se.useCallback((x,M)=>{d({type:1,toast:{id:x,height:M}})},[d]),E=Se.useCallback(()=>{s&&d({type:6,time:Date.now()})},[s,d]),R=Se.useCallback((x,M)=>{let{reverseOrder:X=!1,gutter:re=8,defaultPosition:pe}=M||{},Ee=n.filter(Ve=>(Ve.position||pe)===(x.position||pe)&&Ve.height),ke=Ee.findIndex(Ve=>Ve.id===x.id),Be=Ee.filter((Ve,rt)=>rt<ke&&Ve.visible).length;return Ee.filter(Ve=>Ve.visible).slice(...X?[Be+1]:[0,Be]).reduce((Ve,rt)=>Ve+(rt.height||0)+re,0)},[n]);return Se.useEffect(()=>{n.forEach(x=>{if(x.dismissed)u(x.id,x.removeDelay);else{let M=o.get(x.id);M&&(clearTimeout(M),o.delete(x.id))}})},[n,u]),{toasts:n,handlers:{updateHeight:_,startPause:y,endPause:E,calculateOffset:R}}},$S=ua`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,JS=ua`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,WS=ua`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ZS=bo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$S} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${JS} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${i=>i.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${WS} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,eA=ua`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,tA=bo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${i=>i.secondary||"#e0e0e0"};
  border-right-color: ${i=>i.primary||"#616161"};
  animation: ${eA} 1s linear infinite;
`,nA=ua`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,rA=ua`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,iA=bo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${nA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${rA} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${i=>i.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,sA=bo("div")`
  position: absolute;
`,aA=bo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,oA=ua`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,lA=bo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${oA} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,uA=({toast:i})=>{let{icon:e,type:n,iconTheme:s}=i;return e!==void 0?typeof e=="string"?Se.createElement(lA,null,e):e:n==="blank"?null:Se.createElement(aA,null,Se.createElement(tA,{...s}),n!=="loading"&&Se.createElement(sA,null,n==="error"?Se.createElement(ZS,{...s}):Se.createElement(iA,{...s})))},cA=i=>`
0% {transform: translate3d(0,${i*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,fA=i=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${i*-150}%,-1px) scale(.6); opacity:0;}
`,hA="0%{opacity:0;} 100%{opacity:1;}",dA="0%{opacity:1;} 100%{opacity:0;}",pA=bo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,mA=bo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,gA=(i,e)=>{let n=i.includes("top")?1:-1,[s,o]=Db()?[hA,dA]:[cA(n),fA(n)];return{animation:e?`${ua(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ua(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},yA=Se.memo(({toast:i,position:e,style:n,children:s})=>{let o=i.height?gA(i.position||e||"top-center",i.visible):{opacity:0},u=Se.createElement(uA,{toast:i}),d=Se.createElement(mA,{...i.ariaProps},sh(i.message,i));return Se.createElement(pA,{className:i.className,style:{...o,...n,...i.style}},typeof s=="function"?s({icon:u,message:d}):Se.createElement(Se.Fragment,null,u,d))});zS(Se.createElement);var vA=({id:i,className:e,style:n,onHeightUpdate:s,children:o})=>{let u=Se.useCallback(d=>{if(d){let y=()=>{let _=d.getBoundingClientRect().height;s(i,_)};y(),new MutationObserver(y).observe(d,{subtree:!0,childList:!0,characterData:!0})}},[i,s]);return Se.createElement("div",{ref:u,className:e,style:n},o)},_A=(i,e)=>{let n=i.includes("top"),s=n?{top:0}:{bottom:0},o=i.includes("center")?{justifyContent:"center"}:i.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Db()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...s,...o}},bA=Ch`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Lf=16,EA=({reverseOrder:i,position:e="top-center",toastOptions:n,gutter:s,children:o,toasterId:u,containerStyle:d,containerClassName:y})=>{let{toasts:_,handlers:E}=XS(n,u);return Se.createElement("div",{"data-rht-toaster":u||"",style:{position:"fixed",zIndex:9999,top:Lf,left:Lf,right:Lf,bottom:Lf,pointerEvents:"none",...d},className:y,onMouseEnter:E.startPause,onMouseLeave:E.endPause},_.map(R=>{let x=R.position||e,M=E.calculateOffset(R,{reverseOrder:i,gutter:s,defaultPosition:e}),X=_A(x,M);return Se.createElement(vA,{id:R.id,key:R.id,onHeightUpdate:E.updateHeight,className:R.visible?bA:"",style:X},R.type==="custom"?sh(R.message,R):o?o(R):Se.createElement(yA,{toast:R,position:x}))}))},vt=jn;function TA({isOpen:i,onClose:e,onSuccess:n}){const[s,o]=Se.useState(""),[u,d]=Se.useState(!1),[y,_]=Se.useState("auto"),[E,R]=Se.useState(null);if(!i)return null;const x=async()=>{if(!s.trim())return;if(!_s.hasKey()){vt.error("Please set your Gemini API Key in Settings first.");return}d(!0),R(null);const X=vt.loading("AI is analyzing transcript...");try{const re=await _s.analyzeTranscript(s,y);if(!Array.isArray(re)||re.length===0)throw new Error("AI found no vocabulary or returned invalid format.");vt.loading(`Found ${re.length} words. Saving...`,{id:X});const pe=JSON.stringify(re),Ee=await Hl.importCards(pe);vt.success(`Success!
Added: ${Ee.addedCount}
Skipped (Duplicate): ${Ee.skippedCount}`,{id:X,duration:4e3}),o(""),n(),e()}catch(re){console.error(re);const pe=re.message||"Unknown error";R(pe),vt.error(`Failed: ${pe}`,{id:X})}finally{d(!1)}},M=[{label:"AUTO",value:"auto"},{label:"5",value:5},{label:"10",value:10},{label:"20",value:20}];return H.jsx("div",{style:ki.overlay,children:H.jsxs("div",{style:ki.modal,children:[H.jsx("h2",{style:{marginTop:0,color:"#fff",marginBottom:"1.5rem"},children:"Import from Podcast"}),H.jsxs("div",{style:ki.settingRow,children:[H.jsx("span",{style:ki.settingLabel,children:"Max Words:"}),H.jsx("div",{style:ki.optionGroup,children:M.map(X=>H.jsx("button",{onClick:()=>_(X.value),style:{...ki.optionBtn,...y===X.value?ki.optionBtnActive:{}},children:X.label},X.value))})]}),H.jsx("p",{style:{color:"#aaa",fontSize:"0.9rem",marginBottom:"0.5rem"},children:"Paste the full podcast transcript text below. Gemini will extract key vocabulary for you."}),H.jsx("textarea",{value:s,onChange:X=>o(X.target.value),placeholder:"Paste transcript text here...",style:ki.textarea,disabled:u}),E&&H.jsxs("div",{style:ki.error,children:[" ",E]}),H.jsxs("div",{style:ki.actions,children:[H.jsx("button",{onClick:e,disabled:u,style:{...ki.btn,backgroundColor:"#555"},children:"Cancel"}),H.jsx("button",{onClick:x,disabled:u||!s.trim(),style:{...ki.btn,backgroundColor:u?"#777":"#6366f1",opacity:!s.trim()||u?.6:1},children:u?"Analyzing...":"Analyze & Import"})]})]})})}const ki={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,backdropFilter:"blur(3px)"},modal:{backgroundColor:"#1e2024",padding:"2rem",borderRadius:"12px",width:"90%",maxWidth:"600px",boxShadow:"0 10px 25px rgba(0,0,0,0.5)",border:"1px solid #333"},settingRow:{display:"flex",alignItems:"center",marginBottom:"1.5rem",gap:"1rem",flexWrap:"wrap"},settingLabel:{color:"#ccc",fontSize:"0.9rem",fontWeight:"500"},optionGroup:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},optionBtn:{padding:"0.4rem 1rem",backgroundColor:"#2c2e33",border:"1px solid #444",borderRadius:"6px",color:"#aaa",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease"},optionBtnActive:{backgroundColor:"#6366f1",color:"#fff",borderColor:"#6366f1",boxShadow:"0 0 8px rgba(99, 102, 241, 0.4)"},textarea:{width:"100%",height:"250px",backgroundColor:"#131416",color:"#e0e0e0",border:"1px solid #444",borderRadius:"6px",padding:"0.8rem",fontFamily:"inherit",fontSize:"0.95rem",resize:"vertical",lineHeight:"1.5"},error:{color:"#ff6b6b",marginTop:"1rem",fontSize:"0.9rem",padding:"0.5rem",backgroundColor:"rgba(255, 107, 107, 0.1)",borderRadius:"4px"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"1.5rem"},btn:{padding:"0.6rem 1.5rem",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"1rem"}};function wA({isOpen:i,onClose:e}){const[n,s]=Se.useState(""),[o,u]=Se.useState(!1),[d,y]=Se.useState(!1);Se.useEffect(()=>{i&&(s(_s.getApiKey()||""),y(_s.isPersistent()))},[i]);const _=()=>{n.trim()?(_s.setApiKey(n.trim(),d),d?vt.success("API Key  ()"):vt.success("API Key  ( Session)")):(_s.removeApiKey(),vt("API Key ")),e()},E=()=>{s(""),y(!1),_s.removeApiKey(),vt("API Key ")};return i?H.jsx("div",{style:Vi.overlay,children:H.jsxs("div",{style:Vi.modal,children:[H.jsx("h2",{style:{marginTop:0,color:"#fff"},children:"Settings"}),H.jsxs("div",{style:{marginBottom:"2rem"},children:[H.jsx("label",{style:Vi.label,children:"Gemini API Key (BYOK)"}),H.jsxs("p",{style:Vi.hint,children:[" Key  Google Gemini API",H.jsx("br",{}),""]}),H.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[H.jsx("input",{type:o?"text":"password",value:n,onChange:R=>s(R.target.value),placeholder:"AIzaSy...",style:Vi.input}),H.jsx("button",{onClick:()=>u(!o),style:Vi.iconBtn,title:"Toggle Visibility",children:o?"":""})]}),H.jsxs("div",{style:Vi.checkboxContainer,children:[H.jsx("input",{type:"checkbox",id:"rememberKey",checked:d,onChange:R=>y(R.target.checked),style:{cursor:"pointer"}}),H.jsx("label",{htmlFor:"rememberKey",style:{...Vi.label,marginBottom:0,cursor:"pointer",fontWeight:"normal",fontSize:"0.9rem"},children:" ()"})]}),d&&H.jsx("p",{style:{color:"#ff9800",fontSize:"0.8rem",marginTop:"0.2rem",marginLeft:"1.5rem"},children:"  Key  LocalStorage"})]}),H.jsxs("div",{style:Vi.actions,children:[H.jsx("button",{onClick:E,style:{...Vi.btn,backgroundColor:"#d32f2f",marginRight:"auto"},children:"Clear Key"}),H.jsx("button",{onClick:e,style:{...Vi.btn,backgroundColor:"#555"},children:"Close"}),H.jsx("button",{onClick:_,style:{...Vi.btn,backgroundColor:"#4caf50"},children:"Save"})]})]})}):null}const Vi={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},modal:{backgroundColor:"#2c2e33",padding:"2rem",borderRadius:"8px",width:"90%",maxWidth:"400px",boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},label:{display:"block",color:"#e0e0e0",fontWeight:"bold",marginBottom:"0.5rem"},hint:{color:"#aaa",fontSize:"0.85rem",marginBottom:"0.5rem",lineHeight:"1.4"},input:{flex:1,padding:"0.6rem",borderRadius:"4px",border:"1px solid #444",backgroundColor:"#1a1b1e",color:"#fff",fontFamily:"monospace"},iconBtn:{padding:"0 0.8rem",backgroundColor:"#444",border:"none",borderRadius:"4px",cursor:"pointer",color:"#fff"},checkboxContainer:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.5rem"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem"},btn:{padding:"0.5rem 1.2rem",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"}};function SA({isOpen:i,onClose:e,onSuccess:n}){const[s,o]=Se.useState(""),[u,d]=Se.useState(""),[y,_]=Se.useState(""),[E,R]=Se.useState(""),[x,M]=Se.useState(""),[X,re]=Se.useState(!1);if(!i)return null;const pe=async()=>{if(!s.trim()){vt.error("Please enter a word first");return}if(!_s.hasKey()){vt.error("Please set your API Key in Settings first");return}re(!0);const ke=vt.loading(`Asking Gemini about "${s}"...`);try{const Be=await _s.generateCardDetails(s);d(Be.ipa||""),_(Be.definition||""),R(Be.context||""),M(Be.translation||""),vt.success("Auto-filled!",{id:ke})}catch(Be){console.error(Be),vt.error(Be.message,{id:ke})}finally{re(!1)}},Ee=async()=>{if(!s||!y){vt.error("Word and Definition are required");return}try{await Hl.addCard({word:s,ipa:u,definition:y,context:E,translation:x}),vt.success(`Added "${s}"`),o(""),d(""),_(""),R(""),M(""),n(),e()}catch(ke){console.error(ke),vt.error(ke.message)}};return H.jsx("div",{style:Sn.overlay,children:H.jsxs("div",{style:Sn.modal,children:[H.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[H.jsx("h2",{style:{margin:0,color:"#fff"},children:"Add New Card"}),H.jsx("button",{onClick:pe,disabled:X,style:Sn.magicBtn,title:"AI Auto-fill",children:X?"...":" AI Auto-fill"})]}),H.jsxs("div",{style:Sn.field,children:[H.jsx("label",{style:Sn.label,children:"Word"}),H.jsx("input",{style:Sn.input,value:s,onChange:ke=>o(ke.target.value),placeholder:"e.g. Serendipity",autoFocus:!0})]}),H.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[H.jsxs("div",{style:{...Sn.field,flex:1},children:[H.jsx("label",{style:Sn.label,children:"IPA (Optional)"}),H.jsx("input",{style:Sn.input,value:u,onChange:ke=>d(ke.target.value),placeholder:"/ser.ndp..ti/"})]}),H.jsxs("div",{style:{...Sn.field,flex:1},children:[H.jsx("label",{style:Sn.label,children:"Translation ()"}),H.jsx("input",{style:Sn.input,value:x,onChange:ke=>M(ke.target.value),placeholder:"e.g. "})]})]}),H.jsxs("div",{style:Sn.field,children:[H.jsx("label",{style:Sn.label,children:"Definition"}),H.jsx("textarea",{style:{...Sn.input,height:"60px",resize:"vertical"},value:y,onChange:ke=>_(ke.target.value)})]}),H.jsxs("div",{style:Sn.field,children:[H.jsx("label",{style:Sn.label,children:"Context / Example (English)"}),H.jsx("textarea",{style:{...Sn.input,height:"60px",resize:"vertical"},value:E,onChange:ke=>R(ke.target.value)})]}),H.jsxs("div",{style:Sn.actions,children:[H.jsx("button",{onClick:e,style:{...Sn.btn,backgroundColor:"#555"},children:"Cancel"}),H.jsx("button",{onClick:Ee,style:{...Sn.btn,backgroundColor:"#2196f3"},children:"Save Card"})]})]})})}const Sn={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},modal:{backgroundColor:"#2c2e33",padding:"2rem",borderRadius:"12px",width:"90%",maxWidth:"500px",boxShadow:"0 10px 25px rgba(0,0,0,0.5)"},field:{marginBottom:"1rem"},label:{display:"block",color:"#aaa",fontSize:"0.85rem",marginBottom:"0.3rem"},input:{width:"100%",padding:"0.6rem",borderRadius:"4px",border:"1px solid #444",backgroundColor:"#1a1b1e",color:"#fff",fontSize:"1rem",boxSizing:"border-box"},magicBtn:{padding:"0.4rem 0.8rem",backgroundColor:"transparent",border:"1px solid #e91e63",borderRadius:"20px",color:"#e91e63",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s",fontWeight:"bold"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"2rem"},btn:{padding:"0.6rem 1.2rem",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"}};function AA({isOpen:i,onClose:e}){const[n,s]=Se.useState([]),[o,u]=Se.useState(null),[d,y]=Se.useState(!1),[_,E]=Se.useState(0),R=Se.useRef(null);Se.useEffect(()=>{i&&(x(),y(!1),E(0),u(null))},[i]),Se.useEffect(()=>(d&&_>0?R.current=setTimeout(()=>{E(re=>re-1)},1e3):d&&_===0&&y(!1),()=>clearTimeout(R.current)),[d,_]);const x=async()=>{try{const re=await Hl.getAllCards();re.sort((pe,Ee)=>Ee.updatedAt-pe.updatedAt),s(re)}catch(re){console.error(re),vt.error("Failed to load cards")}},M=async re=>{if(o!==re){u(re),setTimeout(()=>{u(pe=>pe===re?null:pe)},3e3);return}try{await Hl.deleteCard(re),vt.success("Card deleted"),u(null),x()}catch(pe){console.error(pe),vt.error("Delete failed")}},X=async()=>{if(!d){y(!0),E(3);return}try{await Hl.clearAllCards(),vt.success("All data cleared"),s([]),y(!1)}catch(re){console.error(re),vt.error("Clear failed")}};return i?H.jsx("div",{style:Pi.overlay,children:H.jsxs("div",{style:Pi.modal,children:[H.jsxs("div",{style:Pi.header,children:[H.jsxs("h2",{style:{margin:0,color:"#fff"},children:["Manage Cards (",n.length,")"]}),H.jsx("button",{onClick:e,style:Pi.closeBtn,children:""})]}),H.jsx("div",{style:Pi.listContainer,children:n.length===0?H.jsx("p",{style:{color:"#888",textAlign:"center"},children:"No cards found."}):n.map(re=>H.jsxs("div",{style:Pi.cardRow,children:[H.jsxs("div",{style:Pi.cardInfo,children:[H.jsx("div",{style:Pi.word,children:re.word}),H.jsxs("div",{style:Pi.def,children:[re.definition?.substring(0,50),"..."]})]}),H.jsx("button",{onClick:()=>M(re.id),style:{...Pi.deleteBtn,backgroundColor:o===re.id?"#d32f2f":"#333",color:o===re.id?"#fff":"#888",border:o===re.id?"1px solid #ff5252":"1px solid #444",width:o===re.id?"100px":"40px"},children:o===re.id?"Sure?":""})]},re.id))}),H.jsx("div",{style:Pi.footer,children:H.jsx("button",{onClick:X,style:{...Pi.dangerBtn,backgroundColor:d?"#d32f2f":"#3a1c1c",color:d?"#ffeb3b":"#ff6b6b",border:d?"1px solid #ffeb3b":"1px solid #ff6b6b"},children:d?`Confirm Clear All? (${_})`:"Clear All Local Data"})})]})}):null}const Pi={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1050},modal:{backgroundColor:"#1e2024",width:"90%",maxWidth:"500px",maxHeight:"80vh",borderRadius:"12px",display:"flex",flexDirection:"column",boxShadow:"0 10px 25px rgba(0,0,0,0.5)",border:"1px solid #333"},header:{padding:"1.5rem",borderBottom:"1px solid #333",display:"flex",justifyContent:"space-between",alignItems:"center"},closeBtn:{background:"none",border:"none",color:"#888",fontSize:"1.2rem",cursor:"pointer"},listContainer:{flex:1,overflowY:"auto",padding:"1rem"},cardRow:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.8rem",borderBottom:"1px solid #2c2e33"},cardInfo:{flex:1,marginRight:"1rem",overflow:"hidden"},word:{color:"#e0e0e0",fontWeight:"bold",marginBottom:"0.2rem"},def:{color:"#888",fontSize:"0.85rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},deleteBtn:{padding:"0.4rem",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.9rem",whiteSpace:"nowrap",display:"flex",justifyContent:"center",alignItems:"center"},footer:{padding:"1.5rem",borderTop:"1px solid #333"},dangerBtn:{width:"100%",padding:"0.8rem",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",transition:"all 0.2s ease"}};function CA({isOpen:i,onClose:e}){const[n,s]=Se.useState(""),[o,u]=Se.useState(!1),[d,y]=Se.useState([]),[_,E]=Se.useState(new Set);Se.useEffect(()=>{i&&R()},[i]),Se.useEffect(()=>{d.length>0&&x(Array.from(_))},[_,d]);const R=async()=>{u(!0);try{const re=await Hl.getDueCards(5);re.length===0?(vt.error("No review data found."),y([])):(y(re),E(new Set(re.map(pe=>pe.word))))}catch(re){console.error("Error fetching data:",re),vt.error("Failed to load review data")}finally{u(!1)}},x=re=>{if(re.length===0){s("Please select at least one word to generate the prompt.");return}const Ee=`Create an engaging podcast script on a broad and interesting topic aligned with your persona's expertise. 

Your task is to naturally weave the following target vocabulary into this larger narrative: [${re.join(", ")}]. 

IMPORTANT: 
1. The content must NOT be limited only to these vocabularies. 
2. Build a rich, immersive context with a coherent storyline or argument including target vocabularies. 
3. Use the target words only as natural touchpoints within a flowing, full-length conversation. 
4. Keep the tone casual, authentic, conversational and educational. 
`;s(Ee)},M=re=>{const pe=new Set(_);pe.has(re)?pe.delete(re):pe.add(re),E(pe)},X=()=>{navigator.clipboard.writeText(n),vt.success("Prompt copied to clipboard!")};return i?H.jsx("div",{style:tn.overlay,children:H.jsxs("div",{style:tn.modal,children:[H.jsxs("div",{style:tn.header,children:[H.jsx("h2",{style:tn.title,children:"Review Session Ready"}),H.jsx("button",{onClick:e,style:tn.closeBtn,children:""})]}),o?H.jsxs("div",{style:tn.loadingState,children:[H.jsx("div",{style:tn.spinner}),H.jsx("p",{children:"Analyzing your progress..."})]}):H.jsxs("div",{style:tn.content,children:[H.jsx("div",{style:tn.statsRow,children:H.jsxs("div",{style:{...tn.statCard,backgroundColor:"rgba(52, 152, 219, 0.15)",borderColor:"#3498db"},children:[H.jsx("div",{style:tn.statLabel,children:"Target Vocabulary Count"}),H.jsx("div",{style:{...tn.statValue,color:"#3498db"},children:_.size})]})}),H.jsxs("div",{style:tn.section,children:[H.jsxs("div",{style:tn.sectionHeader,children:[H.jsx("span",{style:tn.sectionTitle,children:"Target Words"}),H.jsx("span",{style:tn.sectionSubtitle,children:"Click to include/exclude"})]}),H.jsx("div",{style:tn.chipsContainer,children:d.map(re=>{const pe=_.has(re.word);return H.jsx("button",{onClick:()=>M(re.word),style:{...tn.chip,...pe?tn.chipSelected:tn.chipUnselected},children:re.word},re.word)})})]}),H.jsxs("div",{style:tn.section,children:[H.jsx("div",{style:tn.sectionTitle,children:"Generated Prompt"}),H.jsx("textarea",{value:n,readOnly:!0,style:tn.textarea})]}),H.jsx("button",{onClick:X,disabled:_.size===0,style:{...tn.copyBtn,opacity:_.size===0?.5:1,cursor:_.size===0?"not-allowed":"pointer"},children:"Copy Prompt to Clipboard"})]})]})}):null}const tn={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,backdropFilter:"blur(3px)"},modal:{backgroundColor:"#1e1e1e",padding:"2rem",borderRadius:"16px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 50px rgba(0,0,0,0.5)",color:"#e0e0e0",fontFamily:"'Inter', system-ui, sans-serif",border:"1px solid #333"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.5rem",fontWeight:"700",color:"#fff",letterSpacing:"-0.02em"},closeBtn:{background:"none",border:"none",color:"#666",fontSize:"2rem",cursor:"pointer",lineHeight:1,padding:"0 0.5rem",transition:"color 0.2s"},loadingState:{padding:"3rem",textAlign:"center",color:"#888"},content:{display:"flex",flexDirection:"column",gap:"1.5rem"},statsRow:{display:"flex",width:"100%"},statCard:{flex:1,padding:"1rem",borderRadius:"12px",border:"1px solid",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},statLabel:{fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"#aaa",marginBottom:"0.3rem",fontWeight:"600"},statValue:{fontSize:"1.8rem",fontWeight:"800"},section:{display:"flex",flexDirection:"column",gap:"0.8rem"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},sectionTitle:{fontSize:"0.95rem",fontWeight:"600",color:"#ccc"},sectionSubtitle:{fontSize:"0.75rem",color:"#666"},chipsContainer:{display:"flex",flexWrap:"wrap",gap:"0.6rem",padding:"1rem",backgroundColor:"#25262b",borderRadius:"12px",border:"1px solid #333",maxHeight:"150px",overflowY:"auto"},chip:{padding:"0.4rem 0.9rem",borderRadius:"50px",fontSize:"0.85rem",fontWeight:"500",cursor:"pointer",border:"1px solid",transition:"all 0.2s ease",outline:"none"},chipSelected:{backgroundColor:"rgba(52, 152, 219, 0.2)",borderColor:"#3498db",color:"#3498db",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},chipUnselected:{backgroundColor:"transparent",borderColor:"#444",color:"#666",textDecoration:"line-through",opacity:.6},textarea:{width:"100%",height:"120px",backgroundColor:"#25262b",border:"1px solid #333",borderRadius:"12px",padding:"1rem",color:"#aaa",fontSize:"0.85rem",lineHeight:"1.6",resize:"none",boxSizing:"border-box"},copyBtn:{backgroundColor:"#3498db",color:"white",border:"none",padding:"1rem",borderRadius:"12px",fontSize:"1rem",fontWeight:"600",width:"100%",transition:"transform 0.1s, background 0.2s",boxShadow:"0 4px 15px rgba(52, 152, 219, 0.3)",cursor:"pointer"}},RA=()=>{};var $_={};const Pb=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},IA=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],d=i[n++],y=i[n++],_=((o&7)<<18|(u&63)<<12|(d&63)<<6|y&63)-65536;e[s++]=String.fromCharCode(55296+(_>>10)),e[s++]=String.fromCharCode(56320+(_&1023))}else{const u=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},Lb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],d=o+1<i.length,y=d?i[o+1]:0,_=o+2<i.length,E=_?i[o+2]:0,R=u>>2,x=(u&3)<<4|y>>4;let M=(y&15)<<2|E>>6,X=E&63;_||(X=64,d||(M=64)),s.push(n[R],n[x],n[M],n[X])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Pb(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):IA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],y=o<i.length?n[i.charAt(o)]:0;++o;const E=o<i.length?n[i.charAt(o)]:64;++o;const x=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||y==null||E==null||x==null)throw new xA;const M=u<<2|y>>4;if(s.push(M),E!==64){const X=y<<4&240|E>>2;if(s.push(X),x!==64){const re=E<<6&192|x;s.push(re)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class xA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OA=function(i){const e=Pb(i);return Lb.encodeByteArray(e,!0)},ah=function(i){return OA(i).replace(/\./g,"")},Ub=function(i){try{return Lb.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function DA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const NA=()=>DA().__FIREBASE_DEFAULTS__,MA=()=>{if(typeof process>"u"||typeof $_>"u")return;const i=$_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},kA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Ub(i[1]);return e&&JSON.parse(e)},Ih=()=>{try{return RA()||NA()||MA()||kA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},jb=i=>Ih()?.emulatorHosts?.[i],VA=i=>{const e=jb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},zb=()=>Ih()?.config,Bb=i=>Ih()?.[`_${i}`];class PA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function nu(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qb(i){return(await fetch(i,{credentials:"include"})).ok}function LA(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[ah(JSON.stringify(n)),ah(JSON.stringify(d)),""].join(".")}const Zu={};function UA(){const i={prod:[],emulator:[]};for(const e of Object.keys(Zu))Zu[e]?i.emulator.push(e):i.prod.push(e);return i}function jA(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let J_=!1;function Hb(i,e){if(typeof window>"u"||typeof document>"u"||!nu(window.location.host)||Zu[i]===e||Zu[i]||J_)return;Zu[i]=e;function n(M){return`__firebase__banner__${M}`}const s="__firebase__banner",u=UA().prod.length>0;function d(){const M=document.getElementById(s);M&&M.remove()}function y(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function _(M,X){M.setAttribute("width","24"),M.setAttribute("id",X),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function E(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{J_=!0,d()},M}function R(M,X){M.setAttribute("id",X),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function x(){const M=jA(s),X=n("text"),re=document.getElementById(X)||document.createElement("span"),pe=n("learnmore"),Ee=document.getElementById(pe)||document.createElement("a"),ke=n("preprendIcon"),Be=document.getElementById(ke)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const Ve=M.element;y(Ve),R(Ee,pe);const rt=E();_(Be,ke),Ve.append(Be,re,Ee,rt),document.body.appendChild(Ve)}u?(re.innerText="Preview backend disconnected.",Be.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Be.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,re.innerText="Preview backend running in this workspace."),re.setAttribute("id",X)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}function gr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gr())}function BA(){const i=Ih()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HA(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function KA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FA(){const i=gr();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function GA(){return!BA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YA(){try{return typeof indexedDB=="object"}catch{return!1}}function QA(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const XA="FirebaseError";class pa extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=XA,Object.setPrototypeOf(this,pa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ec.prototype.create)}}class Ec{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?$A(u,s):"Error",y=`${this.serviceName}: ${d} (${o}).`;return new pa(o,y,s)}}function $A(i,e){return i.replace(JA,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const JA=/\{\$([^}]+)}/g;function WA(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Jo(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],d=e[o];if(W_(u)&&W_(d)){if(!Jo(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function W_(i){return i!==null&&typeof i=="object"}function Tc(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ZA(i,e){const n=new eC(i,e);return n.subscribe.bind(n)}class eC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");tC(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Lp),o.error===void 0&&(o.error=Lp),o.complete===void 0&&(o.complete=Lp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tC(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Lp(){}function ji(i){return i&&i._delegate?i._delegate:i}class Wo{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Fo="[DEFAULT]";class nC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new PA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iC(e))try{this.getOrInitializeService({instanceIdentifier:Fo})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fo){return this.instances.has(e)}getOptions(e=Fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(u);s===y&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:rC(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Fo){return this.component?this.component.multipleInstances?e:Fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rC(i){return i===Fo?void 0:i}function iC(i){return i.instantiationMode==="EAGER"}class sC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Et;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Et||(Et={}));const aC={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},oC=Et.INFO,lC={[Et.DEBUG]:"log",[Et.VERBOSE]:"log",[Et.INFO]:"info",[Et.WARN]:"warn",[Et.ERROR]:"error"},uC=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=lC[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cm{constructor(e){this.name=e,this._logLevel=oC,this._logHandler=uC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Et.DEBUG,...e),this._logHandler(this,Et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Et.VERBOSE,...e),this._logHandler(this,Et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Et.INFO,...e),this._logHandler(this,Et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Et.WARN,...e),this._logHandler(this,Et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Et.ERROR,...e),this._logHandler(this,Et.ERROR,...e)}}const cC=(i,e)=>e.some(n=>i instanceof n);let Z_,e0;function fC(){return Z_||(Z_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hC(){return e0||(e0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kb=new WeakMap,Wp=new WeakMap,Fb=new WeakMap,Up=new WeakMap,Rm=new WeakMap;function dC(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{n(lo(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Kb.set(n,i)}).catch(()=>{}),Rm.set(e,i),e}function pC(i){if(Wp.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});Wp.set(i,e)}let Zp={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Wp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Fb.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lo(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function mC(i){Zp=i(Zp)}function gC(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(jp(this),e,...n);return Fb.set(s,e.sort?e.sort():[e]),lo(s)}:hC().includes(i)?function(...e){return i.apply(jp(this),e),lo(Kb.get(this))}:function(...e){return lo(i.apply(jp(this),e))}}function yC(i){return typeof i=="function"?gC(i):(i instanceof IDBTransaction&&pC(i),cC(i,fC())?new Proxy(i,Zp):i)}function lo(i){if(i instanceof IDBRequest)return dC(i);if(Up.has(i))return Up.get(i);const e=yC(i);return e!==i&&(Up.set(i,e),Rm.set(e,i)),e}const jp=i=>Rm.get(i);function vC(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(i,e),y=lo(d);return s&&d.addEventListener("upgradeneeded",_=>{s(lo(d.result),_.oldVersion,_.newVersion,lo(d.transaction),_)}),n&&d.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),y.then(_=>{u&&_.addEventListener("close",()=>u()),o&&_.addEventListener("versionchange",E=>o(E.oldVersion,E.newVersion,E))}).catch(()=>{}),y}const _C=["get","getKey","getAll","getAllKeys","count"],bC=["put","add","delete","clear"],zp=new Map;function t0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(zp.get(e))return zp.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=bC.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||_C.includes(n)))return;const u=async function(d,...y){const _=this.transaction(d,o?"readwrite":"readonly");let E=_.store;return s&&(E=E.index(y.shift())),(await Promise.all([E[n](...y),o&&_.done]))[0]};return zp.set(e,u),u}mC(i=>({...i,get:(e,n,s)=>t0(e,n)||i.get(e,n,s),has:(e,n)=>!!t0(e,n)||i.has(e,n)}));class EC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TC(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function TC(i){return i.getComponent()?.type==="VERSION"}const em="@firebase/app",n0="0.14.6";const ca=new Cm("@firebase/app"),wC="@firebase/app-compat",SC="@firebase/analytics-compat",AC="@firebase/analytics",CC="@firebase/app-check-compat",RC="@firebase/app-check",IC="@firebase/auth",xC="@firebase/auth-compat",OC="@firebase/database",DC="@firebase/data-connect",NC="@firebase/database-compat",MC="@firebase/functions",kC="@firebase/functions-compat",VC="@firebase/installations",PC="@firebase/installations-compat",LC="@firebase/messaging",UC="@firebase/messaging-compat",jC="@firebase/performance",zC="@firebase/performance-compat",BC="@firebase/remote-config",qC="@firebase/remote-config-compat",HC="@firebase/storage",KC="@firebase/storage-compat",FC="@firebase/firestore",GC="@firebase/ai",YC="@firebase/firestore-compat",QC="firebase",XC="12.6.0";const tm="[DEFAULT]",$C={[em]:"fire-core",[wC]:"fire-core-compat",[AC]:"fire-analytics",[SC]:"fire-analytics-compat",[RC]:"fire-app-check",[CC]:"fire-app-check-compat",[IC]:"fire-auth",[xC]:"fire-auth-compat",[OC]:"fire-rtdb",[DC]:"fire-data-connect",[NC]:"fire-rtdb-compat",[MC]:"fire-fn",[kC]:"fire-fn-compat",[VC]:"fire-iid",[PC]:"fire-iid-compat",[LC]:"fire-fcm",[UC]:"fire-fcm-compat",[jC]:"fire-perf",[zC]:"fire-perf-compat",[BC]:"fire-rc",[qC]:"fire-rc-compat",[HC]:"fire-gcs",[KC]:"fire-gcs-compat",[FC]:"fire-fst",[YC]:"fire-fst-compat",[GC]:"fire-vertex","fire-js":"fire-js",[QC]:"fire-js-all"};const oh=new Map,JC=new Map,nm=new Map;function r0(i,e){try{i.container.addComponent(e)}catch(n){ca.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Ql(i){const e=i.name;if(nm.has(e))return ca.debug(`There were multiple attempts to register component ${e}.`),!1;nm.set(e,i);for(const n of oh.values())r0(n,i);for(const n of JC.values())r0(n,i);return!0}function Im(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Wi(i){return i==null?!1:i.settings!==void 0}const WC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},uo=new Ec("app","Firebase",WC);class ZC{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Wo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw uo.create("app-deleted",{appName:this._name})}}const ru=XC;function Gb(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:tm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw uo.create("bad-app-name",{appName:String(o)});if(n||(n=zb()),!n)throw uo.create("no-options");const u=oh.get(o);if(u){if(Jo(n,u.options)&&Jo(s,u.config))return u;throw uo.create("duplicate-app",{appName:o})}const d=new sC(o);for(const _ of nm.values())d.addComponent(_);const y=new ZC(n,s,d);return oh.set(o,y),y}function Yb(i=tm){const e=oh.get(i);if(!e&&i===tm&&zb())return Gb();if(!e)throw uo.create("no-app",{appName:i});return e}function co(i,e,n){let s=$C[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ca.warn(d.join(" "));return}Ql(new Wo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const eR="firebase-heartbeat-database",tR=1,uc="firebase-heartbeat-store";let Bp=null;function Qb(){return Bp||(Bp=vC(eR,tR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(uc)}catch(n){console.warn(n)}}}}).catch(i=>{throw uo.create("idb-open",{originalErrorMessage:i.message})})),Bp}async function nR(i){try{const n=(await Qb()).transaction(uc),s=await n.objectStore(uc).get(Xb(i));return await n.done,s}catch(e){if(e instanceof pa)ca.warn(e.message);else{const n=uo.create("idb-get",{originalErrorMessage:e?.message});ca.warn(n.message)}}}async function i0(i,e){try{const s=(await Qb()).transaction(uc,"readwrite");await s.objectStore(uc).put(e,Xb(i)),await s.done}catch(n){if(n instanceof pa)ca.warn(n.message);else{const s=uo.create("idb-set",{originalErrorMessage:n?.message});ca.warn(s.message)}}}function Xb(i){return`${i.name}!${i.options.appId}`}const rR=1024,iR=30;class sR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=s0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>iR){const o=lR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ca.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=s0(),{heartbeatsToSend:n,unsentEntries:s}=aR(this._heartbeatsCache.heartbeats),o=ah(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ca.warn(e),""}}}function s0(){return new Date().toISOString().substring(0,10)}function aR(i,e=rR){const n=[];let s=i.slice();for(const o of i){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),a0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),a0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class oR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YA()?QA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return i0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return i0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function a0(i){return ah(JSON.stringify({version:2,heartbeats:i})).length}function lR(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function uR(i){Ql(new Wo("platform-logger",e=>new EC(e),"PRIVATE")),Ql(new Wo("heartbeat",e=>new sR(e),"PRIVATE")),co(em,n0,i),co(em,n0,"esm2020"),co("fire-js","")}uR("");var cR="firebase",fR="12.6.0";co(cR,fR,"app");function $b(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hR=$b,Jb=new Ec("auth","Firebase",$b());const lh=new Cm("@firebase/auth");function dR(i,...e){lh.logLevel<=Et.WARN&&lh.warn(`Auth (${ru}): ${i}`,...e)}function Qf(i,...e){lh.logLevel<=Et.ERROR&&lh.error(`Auth (${ru}): ${i}`,...e)}function Cs(i,...e){throw Om(i,...e)}function ts(i,...e){return Om(i,...e)}function xm(i,e,n){const s={...hR(),[e]:n};return new Ec("auth","Firebase",s).create(e,{appName:i.name})}function Qo(i){return xm(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pR(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Cs(i,"argument-error"),xm(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Om(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return Jb.create(i,...e)}function et(i,e,...n){if(!i)throw Om(e,...n)}function aa(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Qf(e),new Error(e)}function fa(i,e){i||aa(e)}function rm(){return typeof self<"u"&&self.location?.href||""}function mR(){return o0()==="http:"||o0()==="https:"}function o0(){return typeof self<"u"&&self.location?.protocol||null}function gR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mR()||HA()||"connection"in navigator)?navigator.onLine:!0}function yR(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class wc{constructor(e,n){this.shortDelay=e,this.longDelay=n,fa(n>e,"Short delay should be less than long delay!"),this.isMobile=zA()||KA()}get(){return gR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Dm(i,e){fa(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Wb{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;aa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;aa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;aa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const vR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const _R=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bR=new wc(3e4,6e4);function Nm(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function iu(i,e,n,s,o={}){return Zb(i,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const y=Tc({key:i.config.apiKey,...d}).slice(1),_=await i._getAdditionalHeaders();_["Content-Type"]="application/json",i.languageCode&&(_["X-Firebase-Locale"]=i.languageCode);const E={method:e,headers:_,...u};return qA()||(E.referrerPolicy="no-referrer"),i.emulatorConfig&&nu(i.emulatorConfig.host)&&(E.credentials="include"),Wb.fetch()(await eE(i,i.config.apiHost,n,y),E)})}async function Zb(i,e,n){i._canInitEmulator=!1;const s={...vR,...e};try{const o=new TR(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Uf(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const y=u.ok?d.errorMessage:d.error.message,[_,E]=y.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uf(i,"credential-already-in-use",d);if(_==="EMAIL_EXISTS")throw Uf(i,"email-already-in-use",d);if(_==="USER_DISABLED")throw Uf(i,"user-disabled",d);const R=s[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw xm(i,R,E);Cs(i,R)}}catch(o){if(o instanceof pa)throw o;Cs(i,"network-request-failed",{message:String(o)})}}async function ER(i,e,n,s,o={}){const u=await iu(i,e,n,s,o);return"mfaPendingCredential"in u&&Cs(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function eE(i,e,n,s){const o=`${e}${n}?${s}`,u=i,d=u.config.emulator?Dm(i.config,o):`${i.config.apiScheme}://${o}`;return _R.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}class TR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ts(this.auth,"network-request-failed")),bR.get())})}}function Uf(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=ts(i,e,s);return o.customData._tokenResponse=n,o}async function wR(i,e){return iu(i,"POST","/v1/accounts:delete",e)}async function uh(i,e){return iu(i,"POST","/v1/accounts:lookup",e)}function ec(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SR(i,e=!1){const n=ji(i),s=await n.getIdToken(e),o=Mm(s);et(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:s,authTime:ec(qp(o.auth_time)),issuedAtTime:ec(qp(o.iat)),expirationTime:ec(qp(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function qp(i){return Number(i)*1e3}function Mm(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return Qf("JWT malformed, contained fewer than 3 sections"),null;try{const o=Ub(n);return o?JSON.parse(o):(Qf("Failed to decode base64 JWT payload"),null)}catch(o){return Qf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function l0(i){const e=Mm(i);return et(e,"internal-error"),et(typeof e.exp<"u","internal-error"),et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function cc(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof pa&&AR(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function AR({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class CR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class im{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ec(this.lastLoginAt),this.creationTime=ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ch(i){const e=i.auth,n=await i.getIdToken(),s=await cc(i,uh(e,{idToken:n}));et(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?tE(o.providerUserInfo):[],d=IR(i.providerData,u),y=i.isAnonymous,_=!(i.email&&o.passwordHash)&&!d?.length,E=y?_:!1,R={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new im(o.createdAt,o.lastLoginAt),isAnonymous:E};Object.assign(i,R)}async function RR(i){const e=ji(i);await ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IR(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function tE(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function xR(i,e){const n=await Zb(i,{},async()=>{const s=Tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,d=await eE(i,o,"/v1/token",`key=${u}`),y=await i._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:y,body:s};return i.emulatorConfig&&nu(i.emulatorConfig.host)&&(_.credentials="include"),Wb.fetch()(d,_)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function OR(i,e){return iu(i,"POST","/v2/accounts:revokeToken",Nm(i,e))}class Kl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){et(e.idToken,"internal-error"),et(typeof e.idToken<"u","internal-error"),et(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):l0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){et(e.length!==0,"internal-error");const n=l0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await xR(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new Kl;return s&&(et(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(et(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(et(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kl,this.toJSON())}_performRefresh(){return aa("not implemented")}}function eo(i,e){et(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Zi{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new CR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new im(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await cc(this,this.stsTokenManager.getToken(this.auth,e));return et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return SR(this,e)}reload(){return RR(this)}_assign(e){this!==e&&(et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ch(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wi(this.auth.app))return Promise.reject(Qo(this.auth));const e=await this.getIdToken();return await cc(this,wR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,y=n.tenantId??void 0,_=n._redirectEventId??void 0,E=n.createdAt??void 0,R=n.lastLoginAt??void 0,{uid:x,emailVerified:M,isAnonymous:X,providerData:re,stsTokenManager:pe}=n;et(x&&pe,e,"internal-error");const Ee=Kl.fromJSON(this.name,pe);et(typeof x=="string",e,"internal-error"),eo(s,e.name),eo(o,e.name),et(typeof M=="boolean",e,"internal-error"),et(typeof X=="boolean",e,"internal-error"),eo(u,e.name),eo(d,e.name),eo(y,e.name),eo(_,e.name),eo(E,e.name),eo(R,e.name);const ke=new Zi({uid:x,auth:e,email:o,emailVerified:M,displayName:s,isAnonymous:X,photoURL:d,phoneNumber:u,tenantId:y,stsTokenManager:Ee,createdAt:E,lastLoginAt:R});return re&&Array.isArray(re)&&(ke.providerData=re.map(Be=>({...Be}))),_&&(ke._redirectEventId=_),ke}static async _fromIdTokenResponse(e,n,s=!1){const o=new Kl;o.updateFromServerResponse(n);const u=new Zi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await ch(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];et(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?tE(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,y=new Kl;y.updateFromIdToken(s);const _=new Zi({uid:o.localId,auth:e,stsTokenManager:y,isAnonymous:d}),E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new im(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(_,E),_}}const u0=new Map;function oa(i){fa(i instanceof Function,"Expected a class definition");let e=u0.get(i);return e?(fa(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,u0.set(i,e),e)}class nE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nE.type="NONE";const c0=nE;function Xf(i,e,n){return`firebase:${i}:${e}:${n}`}class Fl{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Xf(this.userKey,o.apiKey,u),this.fullPersistenceKey=Xf("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await uh(this.auth,{idToken:e}).catch(()=>{});return n?Zi._fromGetAccountInfoResponse(this.auth,n,e):null}return Zi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Fl(oa(c0),e,s);const o=(await Promise.all(n.map(async E=>{if(await E._isAvailable())return E}))).filter(E=>E);let u=o[0]||oa(c0);const d=Xf(s,e.config.apiKey,e.name);let y=null;for(const E of n)try{const R=await E._get(d);if(R){let x;if(typeof R=="string"){const M=await uh(e,{idToken:R}).catch(()=>{});if(!M)break;x=await Zi._fromGetAccountInfoResponse(e,M,R)}else x=Zi._fromJSON(e,R);E!==u&&(y=x),u=E;break}}catch{}const _=o.filter(E=>E._shouldAllowMigration);return!u._shouldAllowMigration||!_.length?new Fl(u,e,s):(u=_[0],y&&await u._set(d,y.toJSON()),await Promise.all(n.map(async E=>{if(E!==u)try{await E._remove(d)}catch{}})),new Fl(u,e,s))}}function f0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lE(e))return"Blackberry";if(uE(e))return"Webos";if(iE(e))return"Safari";if((e.includes("chrome/")||sE(e))&&!e.includes("edge/"))return"Chrome";if(oE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function rE(i=gr()){return/firefox\//i.test(i)}function iE(i=gr()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sE(i=gr()){return/crios\//i.test(i)}function aE(i=gr()){return/iemobile/i.test(i)}function oE(i=gr()){return/android/i.test(i)}function lE(i=gr()){return/blackberry/i.test(i)}function uE(i=gr()){return/webos/i.test(i)}function km(i=gr()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function DR(i=gr()){return km(i)&&!!window.navigator?.standalone}function NR(){return FA()&&document.documentMode===10}function cE(i=gr()){return km(i)||oE(i)||uE(i)||lE(i)||/windows phone/i.test(i)||aE(i)}function fE(i,e=[]){let n;switch(i){case"Browser":n=f0(gr());break;case"Worker":n=`${f0(gr())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ru}/${s}`}class MR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,y)=>{try{const _=e(u);d(_)}catch(_){y(_)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function kR(i,e={}){return iu(i,"GET","/v2/passwordPolicy",Nm(i,e))}const VR=6;class PR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??VR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class LR{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new h0(this),this.idTokenSubscription=new h0(this),this.beforeStateQueue=new MR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=oa(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Fl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await uh(this,{idToken:e}),s=await Zi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Wi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=s?._redirectEventId,y=await this.tryRedirectSignIn(e);(!u||u===d)&&y?.user&&(s=y.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ch(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wi(this.app))return Promise.reject(Qo(this));const n=e?ji(e):null;return n&&et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wi(this.app)?Promise.reject(Qo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wi(this.app)?Promise.reject(Qo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kR(this),n=new PR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ec("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await OR(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&oa(e)||this._popupRedirectResolver;et(n,this,"argument-error"),this.redirectPersistenceManager=await Fl.create(this,[oa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(y,this,"internal-error"),y.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const _=e.addObserver(n,s,o);return()=>{d=!0,_()}}else{const _=e.addObserver(n);return()=>{d=!0,_()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Wi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&dR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function xh(i){return ji(i)}class h0{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZA(n=>this.observer=n)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UR(i){Vm=i}function jR(i){return Vm.loadJS(i)}function zR(){return Vm.gapiScript}function BR(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function qR(i,e){const n=Im(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Jo(u,e??{}))return o;Cs(o,"already-initialized")}return n.initialize({options:e})}function HR(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(oa);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function KR(i,e,n){const s=xh(i);et(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=hE(e),{host:d,port:y}=FR(e),_=y===null?"":`:${y}`,E={url:`${u}//${d}${_}/`},R=Object.freeze({host:d,port:y,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){et(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),et(Jo(E,s.config.emulator)&&Jo(R,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=E,s.emulatorConfig=R,s.settings.appVerificationDisabledForTesting=!0,nu(d)?(qb(`${u}//${d}${_}`),Hb("Auth",!0)):GR()}function hE(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function FR(i){const e=hE(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:d0(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:d0(d)}}}function d0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function GR(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class dE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return aa("not implemented")}_getIdTokenResponse(e){return aa("not implemented")}_linkToIdToken(e,n){return aa("not implemented")}_getReauthenticationResolver(e){return aa("not implemented")}}async function Gl(i,e){return ER(i,"POST","/v1/accounts:signInWithIdp",Nm(i,e))}const YR="http://localhost";class Zo extends dE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const d=new Zo(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Gl(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Gl(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gl(e,n)}buildRequest(){const e={requestUri:YR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Tc(n)}return e}}class Pm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Sc extends Pm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ro extends Sc{constructor(){super("facebook.com")}static credential(e){return Zo._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ro.credential(e.oauthAccessToken)}catch{return null}}}ro.FACEBOOK_SIGN_IN_METHOD="facebook.com";ro.PROVIDER_ID="facebook.com";class sa extends Sc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zo._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return sa.credential(n,s)}catch{return null}}}sa.GOOGLE_SIGN_IN_METHOD="google.com";sa.PROVIDER_ID="google.com";class io extends Sc{constructor(){super("github.com")}static credential(e){return Zo._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return io.credential(e.oauthAccessToken)}catch{return null}}}io.GITHUB_SIGN_IN_METHOD="github.com";io.PROVIDER_ID="github.com";class so extends Sc{constructor(){super("twitter.com")}static credential(e,n){return Zo._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return so.credential(n,s)}catch{return null}}}so.TWITTER_SIGN_IN_METHOD="twitter.com";so.PROVIDER_ID="twitter.com";class Xl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Zi._fromIdTokenResponse(e,s,o),d=p0(s);return new Xl({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=p0(s);return new Xl({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function p0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class fh extends pa{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,fh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new fh(e,n,s,o)}}function pE(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?fh._fromErrorAndOperation(i,u,e,s):u})}async function QR(i,e,n=!1){const s=await cc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Xl._forOperation(i,"link",s)}async function XR(i,e,n=!1){const{auth:s}=i;if(Wi(s.app))return Promise.reject(Qo(s));const o="reauthenticate";try{const u=await cc(i,pE(s,o,e,i),n);et(u.idToken,s,"internal-error");const d=Mm(u.idToken);et(d,s,"internal-error");const{sub:y}=d;return et(i.uid===y,s,"user-mismatch"),Xl._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Cs(s,"user-mismatch"),u}}async function $R(i,e,n=!1){if(Wi(i.app))return Promise.reject(Qo(i));const s="signIn",o=await pE(i,s,e),u=await Xl._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}function JR(i,e,n,s){return ji(i).onIdTokenChanged(e,n,s)}function WR(i,e,n){return ji(i).beforeAuthStateChanged(e,n)}function ZR(i,e,n,s){return ji(i).onAuthStateChanged(e,n,s)}function m0(i){return ji(i).signOut()}const hh="__sak";class mE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hh,"1"),this.storage.removeItem(hh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const eI=1e3,tI=10;class gE extends mE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,y,_)=>{this.notifyListeners(d,_)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);NR()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,tI):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},eI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gE.type="LOCAL";const nI=gE;class yE extends mE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yE.type="SESSION";const vE=yE;function rI(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Oh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Oh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const y=Array.from(d).map(async E=>E(n.origin,u)),_=await rI(y);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:_})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oh.receivers=[];function Lm(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class iI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((y,_)=>{const E=Lm("",20);o.port1.start();const R=setTimeout(()=>{_(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(x){const M=x;if(M.data.eventId===E)switch(M.data.status){case"ack":clearTimeout(R),u=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),y(M.data.response);break;default:clearTimeout(R),clearTimeout(u),_(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:E,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Es(){return window}function sI(i){Es().location.href=i}function _E(){return typeof Es().WorkerGlobalScope<"u"&&typeof Es().importScripts=="function"}async function aI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oI(){return navigator?.serviceWorker?.controller||null}function lI(){return _E()?self:null}const bE="firebaseLocalStorageDb",uI=1,dh="firebaseLocalStorage",EE="fbase_key";class Ac{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dh(i,e){return i.transaction([dh],e?"readwrite":"readonly").objectStore(dh)}function cI(){const i=indexedDB.deleteDatabase(bE);return new Ac(i).toPromise()}function sm(){const i=indexedDB.open(bE,uI);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(dh,{keyPath:EE})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(dh)?e(s):(s.close(),await cI(),e(await sm()))})})}async function g0(i,e,n){const s=Dh(i,!0).put({[EE]:e,value:n});return new Ac(s).toPromise()}async function fI(i,e){const n=Dh(i,!1).get(e),s=await new Ac(n).toPromise();return s===void 0?null:s.value}function y0(i,e){const n=Dh(i,!0).delete(e);return new Ac(n).toPromise()}const hI=800,dI=3;class TE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>dI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _E()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oh._getInstance(lI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await aI(),!this.activeServiceWorker)return;this.sender=new iI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sm();return await g0(e,hh,"1"),await y0(e,hh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>g0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>fI(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>y0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Dh(o,!1).getAll();return new Ac(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TE.type="LOCAL";const pI=TE;new wc(3e4,6e4);function wE(i,e){return e?oa(e):(et(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Um extends dE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mI(i){return $R(i.auth,new Um(i),i.bypassAuthState)}function gI(i){const{auth:e,user:n}=i;return et(n,e,"internal-error"),XR(n,new Um(i),i.bypassAuthState)}async function yI(i){const{auth:e,user:n}=i;return et(n,e,"internal-error"),QR(n,new Um(i),i.bypassAuthState)}class SE{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:y}=e;if(d){this.reject(d);return}const _={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(_))}catch(E){this.reject(E)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mI;case"linkViaPopup":case"linkViaRedirect":return yI;case"reauthViaPopup":case"reauthViaRedirect":return gI;default:Cs(this.auth,"internal-error")}}resolve(e){fa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vI=new wc(2e3,1e4);async function _I(i,e,n){if(Wi(i.app))return Promise.reject(ts(i,"operation-not-supported-in-this-environment"));const s=xh(i);pR(i,e,Pm);const o=wE(s,n);return new Go(s,"signInViaPopup",e,o).executeNotNull()}class Go extends SE{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Go.currentPopupAction&&Go.currentPopupAction.cancel(),Go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return et(e,this.auth,"internal-error"),e}async onExecution(){fa(this.filter.length===1,"Popup operations only handle one event");const e=Lm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ts(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ts(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Go.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ts(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vI.get())};e()}}Go.currentPopupAction=null;const bI="pendingRedirect",$f=new Map;class EI extends SE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=$f.get(this.auth._key());if(!e){try{const s=await TI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}$f.set(this.auth._key(),e)}return this.bypassAuthState||$f.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TI(i,e){const n=AI(e),s=SI(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function wI(i,e){$f.set(i._key(),e)}function SI(i){return oa(i._redirectPersistence)}function AI(i){return Xf(bI,i.config.apiKey,i.name)}async function CI(i,e,n=!1){if(Wi(i.app))return Promise.reject(Qo(i));const s=xh(i),o=wE(s,e),d=await new EI(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const RI=600*1e3;class II{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!AE(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ts(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RI&&this.cachedEventUids.clear(),this.cachedEventUids.has(v0(e))}saveEventToCache(e){this.cachedEventUids.add(v0(e)),this.lastProcessedEventTime=Date.now()}}function v0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function AE({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function xI(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AE(i);default:return!1}}async function OI(i,e={}){return iu(i,"GET","/v1/projects",e)}const DI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NI=/^https?/;async function MI(i){if(i.config.emulator)return;const{authorizedDomains:e}=await OI(i);for(const n of e)try{if(kI(n))return}catch{}Cs(i,"unauthorized-domain")}function kI(i){const e=rm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!NI.test(n))return!1;if(DI.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const VI=new wc(3e4,6e4);function _0(){const i=Es().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function PI(i){return new Promise((e,n)=>{function s(){_0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_0(),n(ts(i,"network-request-failed"))},timeout:VI.get()})}if(Es().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Es().gapi?.load)s();else{const o=BR("iframefcb");return Es()[o]=()=>{gapi.load?s():n(ts(i,"network-request-failed"))},jR(`${zR()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Jf=null,e})}let Jf=null;function LI(i){return Jf=Jf||PI(i),Jf}const UI=new wc(5e3,15e3),jI="__/auth/iframe",zI="emulator/auth/iframe",BI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HI(i){const e=i.config;et(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Dm(e,zI):`https://${i.config.authDomain}/${jI}`,s={apiKey:e.apiKey,appName:i.name,v:ru},o=qI.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Tc(s).slice(1)}`}async function KI(i){const e=await LI(i),n=Es().gapi;return et(n,i,"internal-error"),e.open({where:document.body,url:HI(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BI,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=ts(i,"network-request-failed"),y=Es().setTimeout(()=>{u(d)},UI.get());function _(){Es().clearTimeout(y),o(s)}s.ping(_).then(_,()=>{u(d)})}))}const FI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GI=500,YI=600,QI="_blank",XI="http://localhost";class b0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $I(i,e,n,s=GI,o=YI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let y="";const _={...FI,width:s.toString(),height:o.toString(),top:u,left:d},E=gr().toLowerCase();n&&(y=sE(E)?QI:n),rE(E)&&(e=e||XI,_.scrollbars="yes");const R=Object.entries(_).reduce((M,[X,re])=>`${M}${X}=${re},`,"");if(DR(E)&&y!=="_self")return JI(e||"",y),new b0(null);const x=window.open(e||"",y,R);et(x,i,"popup-blocked");try{x.focus()}catch{}return new b0(x)}function JI(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const WI="__/auth/handler",ZI="emulator/auth/handler",e2=encodeURIComponent("fac");async function E0(i,e,n,s,o,u){et(i.config.authDomain,i,"auth-domain-config-required"),et(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:ru,eventId:o};if(e instanceof Pm){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",WA(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[R,x]of Object.entries({}))d[R]=x}if(e instanceof Sc){const R=e.getScopes().filter(x=>x!=="");R.length>0&&(d.scopes=R.join(","))}i.tenantId&&(d.tid=i.tenantId);const y=d;for(const R of Object.keys(y))y[R]===void 0&&delete y[R];const _=await i._getAppCheckToken(),E=_?`#${e2}=${encodeURIComponent(_)}`:"";return`${t2(i)}?${Tc(y).slice(1)}${E}`}function t2({config:i}){return i.emulator?Dm(i,ZI):`https://${i.authDomain}/${WI}`}const Hp="webStorageSupport";class n2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vE,this._completeRedirectFn=CI,this._overrideRedirectResult=wI}async _openPopup(e,n,s,o){fa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await E0(e,n,s,rm(),o);return $I(e,u,Lm())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await E0(e,n,s,rm(),o);return sI(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(fa(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await KI(e),s=new II(e);return n.register("authEvent",o=>(et(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hp,{type:Hp},o=>{const u=o?.[0]?.[Hp];u!==void 0&&n(!!u),Cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cE()||iE()||km()}}const r2=n2;var T0="@firebase/auth",w0="1.11.1";class i2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function s2(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function a2(i){Ql(new Wo("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:y}=s.options;et(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const _={apiKey:d,authDomain:y,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fE(i)},E=new LR(s,o,u,_);return HR(E,n),E},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ql(new Wo("auth-internal",e=>{const n=xh(e.getProvider("auth").getImmediate());return(s=>new i2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),co(T0,w0,s2(i)),co(T0,w0,"esm2020")}const o2=300,l2=Bb("authIdTokenMaxAge")||o2;let S0=null;const u2=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>l2)return;const o=n?.token;S0!==o&&(S0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function c2(i=Yb()){const e=Im(i,"auth");if(e.isInitialized())return e.getImmediate();const n=qR(i,{popupRedirectResolver:r2,persistence:[pI,nI,vE]}),s=Bb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=u2(u.toString());WR(n,d,()=>d(n.currentUser)),JR(n,y=>d(y))}}const o=jb("auth");return o&&KR(n,`http://${o}`),n}function f2(){return document.getElementsByTagName("head")?.[0]??document}UR({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=ts("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",f2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});a2("Browser");var A0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var fo,CE;(function(){var i;function e(k,D){function V(){}V.prototype=D.prototype,k.F=D.prototype,k.prototype=new V,k.prototype.constructor=k,k.D=function(G,z,Z){for(var P=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)P[Bt-2]=arguments[Bt];return D.prototype[z].apply(G,P)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,D,V){V||(V=0);const G=Array(16);if(typeof D=="string")for(var z=0;z<16;++z)G[z]=D.charCodeAt(V++)|D.charCodeAt(V++)<<8|D.charCodeAt(V++)<<16|D.charCodeAt(V++)<<24;else for(z=0;z<16;++z)G[z]=D[V++]|D[V++]<<8|D[V++]<<16|D[V++]<<24;D=k.g[0],V=k.g[1],z=k.g[2];let Z=k.g[3],P;P=D+(Z^V&(z^Z))+G[0]+3614090360&4294967295,D=V+(P<<7&4294967295|P>>>25),P=Z+(z^D&(V^z))+G[1]+3905402710&4294967295,Z=D+(P<<12&4294967295|P>>>20),P=z+(V^Z&(D^V))+G[2]+606105819&4294967295,z=Z+(P<<17&4294967295|P>>>15),P=V+(D^z&(Z^D))+G[3]+3250441966&4294967295,V=z+(P<<22&4294967295|P>>>10),P=D+(Z^V&(z^Z))+G[4]+4118548399&4294967295,D=V+(P<<7&4294967295|P>>>25),P=Z+(z^D&(V^z))+G[5]+1200080426&4294967295,Z=D+(P<<12&4294967295|P>>>20),P=z+(V^Z&(D^V))+G[6]+2821735955&4294967295,z=Z+(P<<17&4294967295|P>>>15),P=V+(D^z&(Z^D))+G[7]+4249261313&4294967295,V=z+(P<<22&4294967295|P>>>10),P=D+(Z^V&(z^Z))+G[8]+1770035416&4294967295,D=V+(P<<7&4294967295|P>>>25),P=Z+(z^D&(V^z))+G[9]+2336552879&4294967295,Z=D+(P<<12&4294967295|P>>>20),P=z+(V^Z&(D^V))+G[10]+4294925233&4294967295,z=Z+(P<<17&4294967295|P>>>15),P=V+(D^z&(Z^D))+G[11]+2304563134&4294967295,V=z+(P<<22&4294967295|P>>>10),P=D+(Z^V&(z^Z))+G[12]+1804603682&4294967295,D=V+(P<<7&4294967295|P>>>25),P=Z+(z^D&(V^z))+G[13]+4254626195&4294967295,Z=D+(P<<12&4294967295|P>>>20),P=z+(V^Z&(D^V))+G[14]+2792965006&4294967295,z=Z+(P<<17&4294967295|P>>>15),P=V+(D^z&(Z^D))+G[15]+1236535329&4294967295,V=z+(P<<22&4294967295|P>>>10),P=D+(z^Z&(V^z))+G[1]+4129170786&4294967295,D=V+(P<<5&4294967295|P>>>27),P=Z+(V^z&(D^V))+G[6]+3225465664&4294967295,Z=D+(P<<9&4294967295|P>>>23),P=z+(D^V&(Z^D))+G[11]+643717713&4294967295,z=Z+(P<<14&4294967295|P>>>18),P=V+(Z^D&(z^Z))+G[0]+3921069994&4294967295,V=z+(P<<20&4294967295|P>>>12),P=D+(z^Z&(V^z))+G[5]+3593408605&4294967295,D=V+(P<<5&4294967295|P>>>27),P=Z+(V^z&(D^V))+G[10]+38016083&4294967295,Z=D+(P<<9&4294967295|P>>>23),P=z+(D^V&(Z^D))+G[15]+3634488961&4294967295,z=Z+(P<<14&4294967295|P>>>18),P=V+(Z^D&(z^Z))+G[4]+3889429448&4294967295,V=z+(P<<20&4294967295|P>>>12),P=D+(z^Z&(V^z))+G[9]+568446438&4294967295,D=V+(P<<5&4294967295|P>>>27),P=Z+(V^z&(D^V))+G[14]+3275163606&4294967295,Z=D+(P<<9&4294967295|P>>>23),P=z+(D^V&(Z^D))+G[3]+4107603335&4294967295,z=Z+(P<<14&4294967295|P>>>18),P=V+(Z^D&(z^Z))+G[8]+1163531501&4294967295,V=z+(P<<20&4294967295|P>>>12),P=D+(z^Z&(V^z))+G[13]+2850285829&4294967295,D=V+(P<<5&4294967295|P>>>27),P=Z+(V^z&(D^V))+G[2]+4243563512&4294967295,Z=D+(P<<9&4294967295|P>>>23),P=z+(D^V&(Z^D))+G[7]+1735328473&4294967295,z=Z+(P<<14&4294967295|P>>>18),P=V+(Z^D&(z^Z))+G[12]+2368359562&4294967295,V=z+(P<<20&4294967295|P>>>12),P=D+(V^z^Z)+G[5]+4294588738&4294967295,D=V+(P<<4&4294967295|P>>>28),P=Z+(D^V^z)+G[8]+2272392833&4294967295,Z=D+(P<<11&4294967295|P>>>21),P=z+(Z^D^V)+G[11]+1839030562&4294967295,z=Z+(P<<16&4294967295|P>>>16),P=V+(z^Z^D)+G[14]+4259657740&4294967295,V=z+(P<<23&4294967295|P>>>9),P=D+(V^z^Z)+G[1]+2763975236&4294967295,D=V+(P<<4&4294967295|P>>>28),P=Z+(D^V^z)+G[4]+1272893353&4294967295,Z=D+(P<<11&4294967295|P>>>21),P=z+(Z^D^V)+G[7]+4139469664&4294967295,z=Z+(P<<16&4294967295|P>>>16),P=V+(z^Z^D)+G[10]+3200236656&4294967295,V=z+(P<<23&4294967295|P>>>9),P=D+(V^z^Z)+G[13]+681279174&4294967295,D=V+(P<<4&4294967295|P>>>28),P=Z+(D^V^z)+G[0]+3936430074&4294967295,Z=D+(P<<11&4294967295|P>>>21),P=z+(Z^D^V)+G[3]+3572445317&4294967295,z=Z+(P<<16&4294967295|P>>>16),P=V+(z^Z^D)+G[6]+76029189&4294967295,V=z+(P<<23&4294967295|P>>>9),P=D+(V^z^Z)+G[9]+3654602809&4294967295,D=V+(P<<4&4294967295|P>>>28),P=Z+(D^V^z)+G[12]+3873151461&4294967295,Z=D+(P<<11&4294967295|P>>>21),P=z+(Z^D^V)+G[15]+530742520&4294967295,z=Z+(P<<16&4294967295|P>>>16),P=V+(z^Z^D)+G[2]+3299628645&4294967295,V=z+(P<<23&4294967295|P>>>9),P=D+(z^(V|~Z))+G[0]+4096336452&4294967295,D=V+(P<<6&4294967295|P>>>26),P=Z+(V^(D|~z))+G[7]+1126891415&4294967295,Z=D+(P<<10&4294967295|P>>>22),P=z+(D^(Z|~V))+G[14]+2878612391&4294967295,z=Z+(P<<15&4294967295|P>>>17),P=V+(Z^(z|~D))+G[5]+4237533241&4294967295,V=z+(P<<21&4294967295|P>>>11),P=D+(z^(V|~Z))+G[12]+1700485571&4294967295,D=V+(P<<6&4294967295|P>>>26),P=Z+(V^(D|~z))+G[3]+2399980690&4294967295,Z=D+(P<<10&4294967295|P>>>22),P=z+(D^(Z|~V))+G[10]+4293915773&4294967295,z=Z+(P<<15&4294967295|P>>>17),P=V+(Z^(z|~D))+G[1]+2240044497&4294967295,V=z+(P<<21&4294967295|P>>>11),P=D+(z^(V|~Z))+G[8]+1873313359&4294967295,D=V+(P<<6&4294967295|P>>>26),P=Z+(V^(D|~z))+G[15]+4264355552&4294967295,Z=D+(P<<10&4294967295|P>>>22),P=z+(D^(Z|~V))+G[6]+2734768916&4294967295,z=Z+(P<<15&4294967295|P>>>17),P=V+(Z^(z|~D))+G[13]+1309151649&4294967295,V=z+(P<<21&4294967295|P>>>11),P=D+(z^(V|~Z))+G[4]+4149444226&4294967295,D=V+(P<<6&4294967295|P>>>26),P=Z+(V^(D|~z))+G[11]+3174756917&4294967295,Z=D+(P<<10&4294967295|P>>>22),P=z+(D^(Z|~V))+G[2]+718787259&4294967295,z=Z+(P<<15&4294967295|P>>>17),P=V+(Z^(z|~D))+G[9]+3951481745&4294967295,k.g[0]=k.g[0]+D&4294967295,k.g[1]=k.g[1]+(z+(P<<21&4294967295|P>>>11))&4294967295,k.g[2]=k.g[2]+z&4294967295,k.g[3]=k.g[3]+Z&4294967295}s.prototype.v=function(k,D){D===void 0&&(D=k.length);const V=D-this.blockSize,G=this.C;let z=this.h,Z=0;for(;Z<D;){if(z==0)for(;Z<=V;)o(this,k,Z),Z+=this.blockSize;if(typeof k=="string"){for(;Z<D;)if(G[z++]=k.charCodeAt(Z++),z==this.blockSize){o(this,G),z=0;break}}else for(;Z<D;)if(G[z++]=k[Z++],z==this.blockSize){o(this,G),z=0;break}}this.h=z,this.o+=D},s.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var D=1;D<k.length-8;++D)k[D]=0;D=this.o*8;for(var V=k.length-8;V<k.length;++V)k[V]=D&255,D/=256;for(this.v(k),k=Array(16),D=0,V=0;V<4;++V)for(let G=0;G<32;G+=8)k[D++]=this.g[V]>>>G&255;return k};function u(k,D){var V=y;return Object.prototype.hasOwnProperty.call(V,k)?V[k]:V[k]=D(k)}function d(k,D){this.h=D;const V=[];let G=!0;for(let z=k.length-1;z>=0;z--){const Z=k[z]|0;G&&Z==D||(V[z]=Z,G=!1)}this.g=V}var y={};function _(k){return-128<=k&&k<128?u(k,function(D){return new d([D|0],D<0?-1:0)}):new d([k|0],k<0?-1:0)}function E(k){if(isNaN(k)||!isFinite(k))return x;if(k<0)return Ee(E(-k));const D=[];let V=1;for(let G=0;k>=V;G++)D[G]=k/V|0,V*=4294967296;return new d(D,0)}function R(k,D){if(k.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(k.charAt(0)=="-")return Ee(R(k.substring(1),D));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=E(Math.pow(D,8));let G=x;for(let Z=0;Z<k.length;Z+=8){var z=Math.min(8,k.length-Z);const P=parseInt(k.substring(Z,Z+z),D);z<8?(z=E(Math.pow(D,z)),G=G.j(z).add(E(P))):(G=G.j(V),G=G.add(E(P)))}return G}var x=_(0),M=_(1),X=_(16777216);i=d.prototype,i.m=function(){if(pe(this))return-Ee(this).m();let k=0,D=1;for(let V=0;V<this.g.length;V++){const G=this.i(V);k+=(G>=0?G:4294967296+G)*D,D*=4294967296}return k},i.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(re(this))return"0";if(pe(this))return"-"+Ee(this).toString(k);const D=E(Math.pow(k,6));var V=this;let G="";for(;;){const z=rt(V,D).g;V=ke(V,z.j(D));let Z=((V.g.length>0?V.g[0]:V.h)>>>0).toString(k);if(V=z,re(V))return Z+G;for(;Z.length<6;)Z="0"+Z;G=Z+G}},i.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function re(k){if(k.h!=0)return!1;for(let D=0;D<k.g.length;D++)if(k.g[D]!=0)return!1;return!0}function pe(k){return k.h==-1}i.l=function(k){return k=ke(this,k),pe(k)?-1:re(k)?0:1};function Ee(k){const D=k.g.length,V=[];for(let G=0;G<D;G++)V[G]=~k.g[G];return new d(V,~k.h).add(M)}i.abs=function(){return pe(this)?Ee(this):this},i.add=function(k){const D=Math.max(this.g.length,k.g.length),V=[];let G=0;for(let z=0;z<=D;z++){let Z=G+(this.i(z)&65535)+(k.i(z)&65535),P=(Z>>>16)+(this.i(z)>>>16)+(k.i(z)>>>16);G=P>>>16,Z&=65535,P&=65535,V[z]=P<<16|Z}return new d(V,V[V.length-1]&-2147483648?-1:0)};function ke(k,D){return k.add(Ee(D))}i.j=function(k){if(re(this)||re(k))return x;if(pe(this))return pe(k)?Ee(this).j(Ee(k)):Ee(Ee(this).j(k));if(pe(k))return Ee(this.j(Ee(k)));if(this.l(X)<0&&k.l(X)<0)return E(this.m()*k.m());const D=this.g.length+k.g.length,V=[];for(var G=0;G<2*D;G++)V[G]=0;for(G=0;G<this.g.length;G++)for(let z=0;z<k.g.length;z++){const Z=this.i(G)>>>16,P=this.i(G)&65535,Bt=k.i(z)>>>16,Ft=k.i(z)&65535;V[2*G+2*z]+=P*Ft,Be(V,2*G+2*z),V[2*G+2*z+1]+=Z*Ft,Be(V,2*G+2*z+1),V[2*G+2*z+1]+=P*Bt,Be(V,2*G+2*z+1),V[2*G+2*z+2]+=Z*Bt,Be(V,2*G+2*z+2)}for(k=0;k<D;k++)V[k]=V[2*k+1]<<16|V[2*k];for(k=D;k<2*D;k++)V[k]=0;return new d(V,0)};function Be(k,D){for(;(k[D]&65535)!=k[D];)k[D+1]+=k[D]>>>16,k[D]&=65535,D++}function Ve(k,D){this.g=k,this.h=D}function rt(k,D){if(re(D))throw Error("division by zero");if(re(k))return new Ve(x,x);if(pe(k))return D=rt(Ee(k),D),new Ve(Ee(D.g),Ee(D.h));if(pe(D))return D=rt(k,Ee(D)),new Ve(Ee(D.g),D.h);if(k.g.length>30){if(pe(k)||pe(D))throw Error("slowDivide_ only works with positive integers.");for(var V=M,G=D;G.l(k)<=0;)V=xt(V),G=xt(G);var z=Ge(V,1),Z=Ge(G,1);for(G=Ge(G,2),V=Ge(V,2);!re(G);){var P=Z.add(G);P.l(k)<=0&&(z=z.add(V),Z=P),G=Ge(G,1),V=Ge(V,1)}return D=ke(k,z.j(D)),new Ve(z,D)}for(z=x;k.l(D)>=0;){for(V=Math.max(1,Math.floor(k.m()/D.m())),G=Math.ceil(Math.log(V)/Math.LN2),G=G<=48?1:Math.pow(2,G-48),Z=E(V),P=Z.j(D);pe(P)||P.l(k)>0;)V-=G,Z=E(V),P=Z.j(D);re(Z)&&(Z=M),z=z.add(Z),k=ke(k,P)}return new Ve(z,k)}i.B=function(k){return rt(this,k).h},i.and=function(k){const D=Math.max(this.g.length,k.g.length),V=[];for(let G=0;G<D;G++)V[G]=this.i(G)&k.i(G);return new d(V,this.h&k.h)},i.or=function(k){const D=Math.max(this.g.length,k.g.length),V=[];for(let G=0;G<D;G++)V[G]=this.i(G)|k.i(G);return new d(V,this.h|k.h)},i.xor=function(k){const D=Math.max(this.g.length,k.g.length),V=[];for(let G=0;G<D;G++)V[G]=this.i(G)^k.i(G);return new d(V,this.h^k.h)};function xt(k){const D=k.g.length+1,V=[];for(let G=0;G<D;G++)V[G]=k.i(G)<<1|k.i(G-1)>>>31;return new d(V,k.h)}function Ge(k,D){const V=D>>5;D%=32;const G=k.g.length-V,z=[];for(let Z=0;Z<G;Z++)z[Z]=D>0?k.i(Z+V)>>>D|k.i(Z+V+1)<<32-D:k.i(Z+V);return new d(z,k.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,CE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=E,d.fromString=R,fo=d}).apply(typeof A0<"u"?A0:typeof self<"u"?self:typeof window<"u"?window:{});var jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var RE,Qu,IE,Wf,am,xE,OE,DE;(function(){var i,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof jf=="object"&&jf];for(var v=0;v<c.length;++v){var w=c[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=n(this);function o(c,v){if(v)e:{var w=s;c=c.split(".");for(var I=0;I<c.length-1;I++){var te=c[I];if(!(te in w))break e;w=w[te]}c=c[c.length-1],I=w[c],v=v(I),v!=I&&v!=null&&e(w,c,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(v){var w=[],I;for(I in v)Object.prototype.hasOwnProperty.call(v,I)&&w.push([I,v[I]]);return w}});var u=u||{},d=this||self;function y(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function _(c,v,w){return c.call.apply(c.bind,arguments)}function E(c,v,w){return E=_,E.apply(null,arguments)}function R(c,v){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function x(c,v){function w(){}w.prototype=v.prototype,c.Z=v.prototype,c.prototype=new w,c.prototype.constructor=c,c.Ob=function(I,te,ue){for(var Ce=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)Ce[tt-2]=arguments[tt];return v.prototype[te].apply(I,Ce)}}var M=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function X(c){const v=c.length;if(v>0){const w=Array(v);for(let I=0;I<v;I++)w[I]=c[I];return w}return[]}function re(c,v){for(let I=1;I<arguments.length;I++){const te=arguments[I];var w=typeof te;if(w=w!="object"?w:te?Array.isArray(te)?"array":w:"null",w=="array"||w=="object"&&typeof te.length=="number"){w=c.length||0;const ue=te.length||0;c.length=w+ue;for(let Ce=0;Ce<ue;Ce++)c[w+Ce]=te[Ce]}else c.push(te)}}class pe{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function Ee(c){d.setTimeout(()=>{throw c},0)}function ke(){var c=k;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class Be{constructor(){this.h=this.g=null}add(v,w){const I=Ve.get();I.set(v,w),this.h?this.h.next=I:this.g=I,this.h=I}}var Ve=new pe(()=>new rt,c=>c.reset());class rt{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let xt,Ge=!1,k=new Be,D=()=>{const c=Promise.resolve(void 0);xt=()=>{c.then(V)}};function V(){for(var c;c=ke();){try{c.h.call(c.g)}catch(w){Ee(w)}var v=Ve;v.j(c),v.h<100&&(v.h++,c.next=v.g,v.g=c)}Ge=!1}function G(){this.u=this.u,this.C=this.C}G.prototype.u=!1,G.prototype.dispose=function(){this.u||(this.u=!0,this.N())},G.prototype[Symbol.dispose]=function(){this.dispose()},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var Z=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};d.addEventListener("test",w,v),d.removeEventListener("test",w,v)}catch{}return c})();function P(c){return/^[\s\xa0]*$/.test(c)}function Bt(c,v){z.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,v)}x(Bt,z),Bt.prototype.init=function(c,v){const w=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget,v||(w=="mouseover"?v=c.fromElement:w=="mouseout"&&(v=c.toElement)),this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Bt.Z.h.call(this)},Bt.prototype.h=function(){Bt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ft="closure_listenable_"+(Math.random()*1e6|0),le=0;function _e(c,v,w,I,te){this.listener=c,this.proxy=null,this.src=v,this.type=w,this.capture=!!I,this.ha=te,this.key=++le,this.da=this.fa=!1}function je(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function at(c,v,w){for(const I in c)v.call(w,c[I],I,c)}function ft(c,v){for(const w in c)v.call(void 0,c[w],w,c)}function F(c){const v={};for(const w in c)v[w]=c[w];return v}const me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xe(c,v){let w,I;for(let te=1;te<arguments.length;te++){I=arguments[te];for(w in I)c[w]=I[w];for(let ue=0;ue<me.length;ue++)w=me[ue],Object.prototype.hasOwnProperty.call(I,w)&&(c[w]=I[w])}}function Le(c){this.src=c,this.g={},this.h=0}Le.prototype.add=function(c,v,w,I,te){const ue=c.toString();c=this.g[ue],c||(c=this.g[ue]=[],this.h++);const Ce=Je(c,v,I,te);return Ce>-1?(v=c[Ce],w||(v.fa=!1)):(v=new _e(v,this.src,ue,!!I,te),v.fa=w,c.push(v)),v};function Qe(c,v){const w=v.type;if(w in c.g){var I=c.g[w],te=Array.prototype.indexOf.call(I,v,void 0),ue;(ue=te>=0)&&Array.prototype.splice.call(I,te,1),ue&&(je(v),c.g[w].length==0&&(delete c.g[w],c.h--))}}function Je(c,v,w,I){for(let te=0;te<c.length;++te){const ue=c[te];if(!ue.da&&ue.listener==v&&ue.capture==!!w&&ue.ha==I)return te}return-1}var dt="closure_lm_"+(Math.random()*1e6|0),gn={};function Me(c,v,w,I,te){if(Array.isArray(v)){for(let ue=0;ue<v.length;ue++)Me(c,v[ue],w,I,te);return null}return w=To(w),c&&c[Ft]?c.J(v,w,y(I)?!!I.capture:!1,te):ns(c,v,w,!1,I,te)}function ns(c,v,w,I,te,ue){if(!v)throw Error("Invalid event type");const Ce=y(te)?!!te.capture:!!te;let tt=xs(c);if(tt||(c[dt]=tt=new Le(c)),w=tt.add(v,w,I,Ce,ue),w.proxy)return w;if(I=zi(),w.proxy=I,I.src=c,I.listener=w,c.addEventListener)Z||(te=Ce),te===void 0&&(te=!1),c.addEventListener(v.toString(),I,te);else if(c.attachEvent)c.attachEvent(pi(v.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function zi(){function c(w){return v.call(c.src,c.listener,w)}const v=Fr;return c}function St(c,v,w,I,te){if(Array.isArray(v))for(var ue=0;ue<v.length;ue++)St(c,v[ue],w,I,te);else I=y(I)?!!I.capture:!!I,w=To(w),c&&c[Ft]?(c=c.i,ue=String(v).toString(),ue in c.g&&(v=c.g[ue],w=Je(v,w,I,te),w>-1&&(je(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete c.g[ue],c.h--)))):c&&(c=xs(c))&&(v=c.g[v.toString()],c=-1,v&&(c=Je(v,w,I,te)),(w=c>-1?v[c]:null)&&di(w))}function di(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[Ft])Qe(v.i,c);else{var w=c.type,I=c.proxy;v.removeEventListener?v.removeEventListener(w,I,c.capture):v.detachEvent?v.detachEvent(pi(w),I):v.addListener&&v.removeListener&&v.removeListener(I),(w=xs(v))?(Qe(w,c),w.h==0&&(w.src=null,v[dt]=null)):je(c)}}}function pi(c){return c in gn?gn[c]:gn[c]="on"+c}function Fr(c,v){if(c.da)c=!0;else{v=new Bt(v,this);const w=c.listener,I=c.ha||c.src;c.fa&&di(c),c=w.call(I,v)}return c}function xs(c){return c=c[dt],c instanceof Le?c:null}var Eo="__closure_events_fn_"+(Math.random()*1e9>>>0);function To(c){return typeof c=="function"?c:(c[Eo]||(c[Eo]=function(v){return c.handleEvent(v)}),c[Eo])}function hn(){G.call(this),this.i=new Le(this),this.M=this,this.G=null}x(hn,G),hn.prototype[Ft]=!0,hn.prototype.removeEventListener=function(c,v,w,I){St(this,c,v,w,I)};function nn(c,v){var w,I=c.G;if(I)for(w=[];I;I=I.G)w.push(I);if(c=c.M,I=v.type||v,typeof v=="string")v=new z(v,c);else if(v instanceof z)v.target=v.target||c;else{var te=v;v=new z(I,c),xe(v,te)}te=!0;let ue,Ce;if(w)for(Ce=w.length-1;Ce>=0;Ce--)ue=v.g=w[Ce],te=Pn(ue,I,!0,v)&&te;if(ue=v.g=c,te=Pn(ue,I,!0,v)&&te,te=Pn(ue,I,!1,v)&&te,w)for(Ce=0;Ce<w.length;Ce++)ue=v.g=w[Ce],te=Pn(ue,I,!1,v)&&te}hn.prototype.N=function(){if(hn.Z.N.call(this),this.i){var c=this.i;for(const v in c.g){const w=c.g[v];for(let I=0;I<w.length;I++)je(w[I]);delete c.g[v],c.h--}}this.G=null},hn.prototype.J=function(c,v,w,I){return this.i.add(String(c),v,!1,w,I)},hn.prototype.K=function(c,v,w,I){return this.i.add(String(c),v,!0,w,I)};function Pn(c,v,w,I){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();let te=!0;for(let ue=0;ue<v.length;++ue){const Ce=v[ue];if(Ce&&!Ce.da&&Ce.capture==w){const tt=Ce.listener,un=Ce.ha||Ce.src;Ce.fa&&Qe(c.i,Ce),te=tt.call(un,I)!==!1&&te}}return te&&!I.defaultPrevented}function ol(c,v){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=E(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(c,v||0)}function rs(c){c.g=ol(()=>{c.g=null,c.i&&(c.i=!1,rs(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class qn extends G{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:rs(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gr(c){G.call(this),this.h=c,this.g={}}x(Gr,G);var Yr=[];function Qr(c){at(c.g,function(v,w){this.g.hasOwnProperty(w)&&di(v)},c),c.g={}}Gr.prototype.N=function(){Gr.Z.N.call(this),Qr(this)},Gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mi=d.JSON.stringify,Os=d.JSON.parse,ma=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Ds(){}function gi(){}var ar={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function yn(){z.call(this,"d")}x(yn,z);function vn(){z.call(this,"c")}x(vn,z);var Ne={},is=null;function wr(){return is=is||new hn}Ne.Ia="serverreachability";function Ns(c){z.call(this,Ne.Ia,c)}x(Ns,z);function Ie(c){const v=wr();nn(v,new Ns(v))}Ne.STAT_EVENT="statevent";function Bi(c,v){z.call(this,Ne.STAT_EVENT,c),this.stat=v}x(Bi,z);function rn(c){const v=wr();nn(v,new Bi(v,c))}Ne.Ja="timingevent";function Sr(c,v){z.call(this,Ne.Ja,c),this.size=v}x(Sr,z);function Xr(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},v)}function yr(){this.g=!0}yr.prototype.ua=function(){this.g=!1};function uu(c,v,w,I,te,ue){c.info(function(){if(c.g)if(ue){var Ce="",tt=ue.split("&");for(let At=0;At<tt.length;At++){var un=tt[At].split("=");if(un.length>1){const Ut=un[0];un=un[1];const Pr=Ut.split("_");Ce=Pr.length>=2&&Pr[1]=="type"?Ce+(Ut+"="+un+"&"):Ce+(Ut+"=redacted&")}}}else Ce=null;else Ce=ue;return"XMLHTTP REQ ("+I+") [attempt "+te+"]: "+v+`
`+w+`
`+Ce})}function ll(c,v,w,I,te,ue,Ce){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+te+"]: "+v+`
`+w+`
`+ue+" "+Ce})}function $n(c,v,w,I){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+wo(c,w)+(I?" "+I:"")})}function Ar(c,v){c.info(function(){return"TIMEOUT: "+v})}yr.prototype.info=function(){};function wo(c,v){if(!c.g)return v;if(!v)return null;try{const ue=JSON.parse(v);if(ue){for(c=0;c<ue.length;c++)if(Array.isArray(ue[c])){var w=ue[c];if(!(w.length<2)){var I=w[1];if(Array.isArray(I)&&!(I.length<1)){var te=I[0];if(te!="noop"&&te!="stop"&&te!="close")for(let Ce=1;Ce<I.length;Ce++)I[Ce]=""}}}}return mi(ue)}catch{return v}}var yi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},kt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Wt;function Ms(){}x(Ms,Ds),Ms.prototype.g=function(){return new XMLHttpRequest},Wt=new Ms;function Cr(c){return encodeURIComponent(String(c))}function ks(c){var v=1;c=c.split(":");const w=[];for(;v>0&&c.length;)w.push(c.shift()),v--;return c.length&&w.push(c.join(":")),w}function or(c,v,w,I){this.j=c,this.i=v,this.l=w,this.S=I||1,this.V=new Gr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $r}function $r(){this.i=null,this.g="",this.h=!1}var Pt={},Yt={};function Ln(c,v,w){c.M=1,c.A=os(an(v)),c.u=w,c.R=!0,qi(c,null)}function qi(c,v){c.F=Date.now(),Hn(c),c.B=an(c.A);var w=c.B,I=c.S;Array.isArray(I)||(I=[String(I)]),ba(w.i,"t",I),c.C=0,w=c.j.L,c.h=new $r,c.g=En(c.j,w?v:null,!c.u),c.P>0&&(c.O=new qn(E(c.Y,c,c.g),c.P)),v=c.V,w=c.g,I=c.ba;var te="readystatechange";Array.isArray(te)||(te&&(Yr[0]=te.toString()),te=Yr);for(let ue=0;ue<te.length;ue++){const Ce=Me(w,te[ue],I||v.handleEvent,!1,v.h||v);if(!Ce)break;v.g[Ce.key]=Ce}v=c.J?F(c.J):{},c.u?(c.v||(c.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,v)):(c.v="GET",c.g.ea(c.B,c.v,null,v)),Ie(),uu(c.i,c.v,c.B,c.l,c.S,c.u)}or.prototype.ba=function(c){c=c.target;const v=this.O;v&&ii(c)==3?v.j():this.Y(c)},or.prototype.Y=function(c){try{if(c==this.g)e:{const tt=ii(this.g),un=this.g.ya(),At=this.g.ca();if(!(tt<3)&&(tt!=3||this.g&&(this.h.h||this.g.la()||ln(this.g)))){this.K||tt!=4||un==7||(un==8||At<=0?Ie(3):Ie(2)),Rr(this);var v=this.g.ca();this.X=v;var w=cu(this);if(this.o=v==200,ll(this.i,this.v,this.B,this.l,this.S,tt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var I,te=this.g;if((I=te.g?te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(I)){var ue=I;break t}}ue=null}if(c=ue)$n(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Cn(this,c);else{this.o=!1,this.m=3,rn(12),_n(this),Rt(this);break e}}if(this.R){c=!0;let Ut;for(;!this.K&&this.C<w.length;)if(Ut=So(this,w),Ut==Yt){tt==4&&(this.m=4,rn(14),c=!1),$n(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==Pt){this.m=4,rn(15),$n(this.i,this.l,w,"[Invalid Chunk]"),c=!1;break}else $n(this.i,this.l,Ut,null),Cn(this,Ut);if(Jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||w.length!=0||this.h.h||(this.m=1,rn(16),c=!1),this.o=this.o&&c,!c)$n(this.i,this.l,w,"[Invalid Chunked Response]"),_n(this),Rt(this);else if(w.length>0&&!this.W){this.W=!0;var Ce=this.j;Ce.g==this&&Ce.aa&&!Ce.P&&(Ce.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),us(Ce),Ce.P=!0,rn(11))}}else $n(this.i,this.l,w,null),Cn(this,w);tt==4&&_n(this),this.o&&!this.K&&(tt==4?Xi(this.j,this):(this.o=!1,Hn(this)))}else Yi(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,rn(12)):(this.m=0,rn(13)),_n(this),Rt(this)}}}catch{}finally{}};function cu(c){if(!Jr(c))return c.g.la();const v=ln(c.g);if(v==="")return"";let w="";const I=v.length,te=ii(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return _n(c),Rt(c),"";c.h.i=new d.TextDecoder}for(let ue=0;ue<I;ue++)c.h.h=!0,w+=c.h.i.decode(v[ue],{stream:!(te&&ue==I-1)});return v.length=0,c.h.g+=w,c.C=0,c.h.g}function Jr(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function So(c,v){var w=c.C,I=v.indexOf(`
`,w);return I==-1?Yt:(w=Number(v.substring(w,I)),isNaN(w)?Pt:(I+=1,I+w>v.length?Yt:(v=v.slice(I,I+w),c.C=I+w,v)))}or.prototype.cancel=function(){this.K=!0,_n(this)};function Hn(c){c.T=Date.now()+c.H,Vs(c,c.H)}function Vs(c,v){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Xr(E(c.aa,c),v)}function Rr(c){c.D&&(d.clearTimeout(c.D),c.D=null)}or.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Ar(this.i,this.B),this.M!=2&&(Ie(),rn(17)),_n(this),this.m=2,Rt(this)):Vs(this,this.T-c)};function Rt(c){c.j.I==0||c.K||Xi(c.j,c)}function _n(c){Rr(c);var v=c.O;v&&typeof v.dispose=="function"&&v.dispose(),c.O=null,Qr(c.V),c.g&&(v=c.g,c.g=null,v.abort(),v.dispose())}function Cn(c,v){try{var w=c.j;if(w.I!=0&&(w.g==c||xr(w.h,c))){if(!c.L&&xr(w.h,c)&&w.I==3){try{var I=w.Ba.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var te=I;if(te[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<c.F)Sa(w),Ti(w);else break e;Si(w),rn(18)}}else w.xa=te[1],0<w.xa-w.K&&te[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Xr(E(w.Va,w),6e3));Ir(w.h)<=1&&w.ta&&(w.ta=void 0)}else kr(w,11)}else if((c.L||w.g==c)&&Sa(w),!P(v))for(te=w.Ba.g.parse(v),v=0;v<te.length;v++){let At=te[v];const Ut=At[0];if(!(Ut<=w.K))if(w.K=Ut,At=At[1],w.I==2)if(At[0]=="c"){w.M=At[1],w.ba=At[2];const Pr=At[3];Pr!=null&&(w.ka=Pr,w.j.info("VER="+w.ka));const Lr=At[4];Lr!=null&&(w.za=Lr,w.j.info("SVER="+w.za));const br=At[5];br!=null&&typeof br=="number"&&br>0&&(I=1.5*br,w.O=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const ai=c.g;if(ai){const fs=ai.g?ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fs){var ue=I.h;ue.g||fs.indexOf("spdy")==-1&&fs.indexOf("quic")==-1&&fs.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Wr(ue,ue.h),ue.h=null))}if(I.G){const Ia=ai.g?ai.g.getResponseHeader("X-HTTP-Session-Id"):null;Ia&&(I.wa=Ia,Ot(I.J,I.G,Ia))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-c.F,w.j.info("Handshake RTT: "+w.T+"ms")),I=w;var Ce=c;if(I.na=Ra(I,I.L?I.ba:null,I.W),Ce.L){ga(I.h,Ce);var tt=Ce,un=I.O;un&&(tt.H=un),tt.D&&(Rr(tt),Hn(tt)),I.g=Ce}else js(I);w.i.length>0&&wi(w)}else At[0]!="stop"&&At[0]!="close"||kr(w,7);else w.I==3&&(At[0]=="stop"||At[0]=="close"?At[0]=="stop"?kr(w,7):ls(w):At[0]!="noop"&&w.l&&w.l.qa(At),w.A=0)}}Ie(4)}catch{}}var sn=class{constructor(c,v){this.g=c,this.map=v}};function vi(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ss(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ir(c){return c.h?1:c.g?c.g.size:0}function xr(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function Wr(c,v){c.g?c.g.add(v):c.h=v}function ga(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}vi.prototype.cancel=function(){if(this.i=as(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function as(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const w of c.g.values())v=v.concat(w.G);return v}return X(c.i)}var Ao=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(c,v){if(c){c=c.split("&");for(let w=0;w<c.length;w++){const I=c[w].indexOf("=");let te,ue=null;I>=0?(te=c[w].substring(0,I),ue=c[w].substring(I+1)):te=c[w],v(te,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function lr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;c instanceof lr?(this.l=c.l,on(this,c.j),this.o=c.o,this.g=c.g,Or(this,c.u),this.h=c.h,ya(this,cl(c.i)),this.m=c.m):c&&(v=String(c).match(Ao))?(this.l=!1,on(this,v[1]||"",!0),this.o=mt(v[2]||""),this.g=mt(v[3]||"",!0),Or(this,v[4]),this.h=mt(v[5]||"",!0),ya(this,v[6]||"",!0),this.m=mt(v[7]||"")):(this.l=!1,this.i=new ni(null,this.l))}lr.prototype.toString=function(){const c=[];var v=this.j;v&&c.push(Zr(v,ei,!0),":");var w=this.g;return(w||v=="file")&&(c.push("//"),(v=this.o)&&c.push(Zr(v,ei,!0),"@"),c.push(Cr(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&c.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(Zr(w,w.charAt(0)=="/"?Ps:va,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",Zr(w,Co)),c.join("")},lr.prototype.resolve=function(c){const v=an(this);let w=!!c.j;w?on(v,c.j):w=!!c.o,w?v.o=c.o:w=!!c.g,w?v.g=c.g:w=c.u!=null;var I=c.h;if(w)Or(v,c.u);else if(w=!!c.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var te=v.h.lastIndexOf("/");te!=-1&&(I=v.h.slice(0,te+1)+I)}if(te=I,te==".."||te==".")I="";else if(te.indexOf("./")!=-1||te.indexOf("/.")!=-1){I=te.lastIndexOf("/",0)==0,te=te.split("/");const ue=[];for(let Ce=0;Ce<te.length;){const tt=te[Ce++];tt=="."?I&&Ce==te.length&&ue.push(""):tt==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),I&&Ce==te.length&&ue.push("")):(ue.push(tt),I=!0)}I=ue.join("/")}else I=te}return w?v.h=I:w=c.i.toString()!=="",w?ya(v,cl(c.i)):w=!!c.m,w&&(v.m=c.m),v};function an(c){return new lr(c)}function on(c,v,w){c.j=w?mt(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function Or(c,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);c.u=v}else c.u=null}function ya(c,v,w){v instanceof ni?(c.i=v,ri(c.i,c.l)):(w||(v=Zr(v,ti)),c.i=new ni(v,c.l))}function Ot(c,v,w){c.i.set(v,w)}function os(c){return Ot(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function mt(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Zr(c,v,w){return typeof c=="string"?(c=encodeURI(c).replace(v,Rn),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Rn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ei=/[#\/\?@]/g,va=/[#\?:]/g,Ps=/[#\?]/g,ti=/[#\?@]/g,Co=/#/g;function ni(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function Jn(c){c.g||(c.g=new Map,c.h=0,c.i&&ot(c.i,function(v,w){c.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}i=ni.prototype,i.add=function(c,v){Jn(this),this.i=null,c=dn(this,c);let w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(v),this.h+=1,this};function ul(c,v){Jn(c),v=dn(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function pt(c,v){return Jn(c),v=dn(c,v),c.g.has(v)}i.forEach=function(c,v){Jn(this),this.g.forEach(function(w,I){w.forEach(function(te){c.call(v,te,I,this)},this)},this)};function _a(c,v){Jn(c);let w=[];if(typeof v=="string")pt(c,v)&&(w=w.concat(c.g.get(dn(c,v))));else for(c=Array.from(c.g.values()),v=0;v<c.length;v++)w=w.concat(c[v]);return w}i.set=function(c,v){return Jn(this),this.i=null,c=dn(this,c),pt(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},i.get=function(c,v){return c?(c=_a(this,c),c.length>0?String(c[0]):v):v};function ba(c,v,w){ul(c,v),w.length>0&&(c.i=null,c.g.set(dn(c,v),X(w)),c.h+=w.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(let I=0;I<v.length;I++){var w=v[I];const te=Cr(w);w=_a(this,w);for(let ue=0;ue<w.length;ue++){let Ce=te;w[ue]!==""&&(Ce+="="+Cr(w[ue])),c.push(Ce)}}return this.i=c.join("&")};function cl(c){const v=new ni;return v.i=c.i,c.g&&(v.g=new Map(c.g),v.h=c.h),v}function dn(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function ri(c,v){v&&!c.j&&(Jn(c),c.i=null,c.g.forEach(function(w,I){const te=I.toLowerCase();I!=te&&(ul(this,I),ba(this,te,w))},c)),c.j=v}function ur(c,v){const w=new yr;if(d.Image){const I=new Image;I.onload=R(vr,w,"TestLoadImage: loaded",!0,v,I),I.onerror=R(vr,w,"TestLoadImage: error",!1,v,I),I.onabort=R(vr,w,"TestLoadImage: abort",!1,v,I),I.ontimeout=R(vr,w,"TestLoadImage: timeout",!1,v,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else v(!1)}function Dr(c,v){const w=new yr,I=new AbortController,te=setTimeout(()=>{I.abort(),vr(w,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:I.signal}).then(ue=>{clearTimeout(te),ue.ok?vr(w,"TestPingServer: ok",!0,v):vr(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(te),vr(w,"TestPingServer: error",!1,v)})}function vr(c,v,w,I,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),I(w)}catch{}}function Hi(){this.g=new ma}function Lt(c){this.i=c.Sb||null,this.h=c.ab||!1}x(Lt,Ds),Lt.prototype.g=function(){return new Kn(this.i,this.h)};function Kn(c,v){hn.call(this),this.H=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Kn,hn),i=Kn.prototype,i.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=v,this.readyState=1,_r(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(v.body=c),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},i.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,_r(this)),this.g&&(this.readyState=3,_r(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_i(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function _i(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}i.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?Nr(this):_r(this),this.readyState==3&&_i(this)}},i.Oa=function(c){this.g&&(this.response=this.responseText=c,Nr(this))},i.Na=function(c){this.g&&(this.response=c,Nr(this))},i.ga=function(){this.g&&Nr(this)};function Nr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,_r(c)}i.setRequestHeader=function(c,v){this.A.append(c,v)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=v.next();return c.join(`\r
`)};function _r(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Kn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function bn(c){let v="";return at(c,function(w,I){v+=I,v+=":",v+=w,v+=`\r
`}),v}function Ls(c,v,w){e:{for(I in w){var I=!1;break e}I=!0}I||(w=bn(w),typeof c=="string"?w!=null&&Cr(w):Ot(c,v,w))}function ht(c){hn.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(ht,hn);var Mr=/^https?$/i,Ea=["POST","PUT"];i=ht.prototype,i.Fa=function(c){this.H=c},i.ea=function(c,v,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Wt.g(),this.g.onreadystatechange=M(E(this.Ca,this));try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(ue){Ki(this,ue);return}if(c=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var te in I)w.set(te,I[te]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const ue of I.keys())w.set(ue,I.get(ue));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find(ue=>ue.toLowerCase()=="content-type"),te=d.FormData&&c instanceof d.FormData,!(Array.prototype.indexOf.call(Ea,v,void 0)>=0)||I||te||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,Ce]of w)this.g.setRequestHeader(ue,Ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(ue){Ki(this,ue)}};function Ki(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.o=5,Fi(c),bi(c)}function Fi(c){c.A||(c.A=!0,nn(c,"complete"),nn(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,nn(this,"complete"),nn(this,"abort"),bi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bi(this,!0)),ht.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Gi(this):this.Xa())},i.Xa=function(){Gi(this)};function Gi(c){if(c.h&&typeof u<"u"){if(c.v&&ii(c)==4)setTimeout(c.Ca.bind(c),0);else if(nn(c,"readystatechange"),ii(c)==4){c.h=!1;try{const ue=c.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var I;if(I=ue===0){let Ce=String(c.D).match(Ao)[1]||null;!Ce&&d.self&&d.self.location&&(Ce=d.self.location.protocol.slice(0,-1)),I=!Mr.test(Ce?Ce.toLowerCase():"")}w=I}if(w)nn(c,"complete"),nn(c,"success");else{c.o=6;try{var te=ii(c)>2?c.g.statusText:""}catch{te=""}c.l=te+" ["+c.ca()+"]",Fi(c)}}finally{bi(c)}}}}function bi(c,v){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const w=c.g;c.g=null,v||nn(c,"ready");try{w.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ii(c){return c.g?c.g.readyState:0}i.ca=function(){try{return ii(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),Os(v)}};function ln(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Yi(c){const v={};c=(c.g&&ii(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(P(c[I]))continue;var w=ks(c[I]);const te=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ue=v[te]||[];v[te]=ue,ue.push(w)}ft(v,function(I){return I.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(c,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||v}function si(c){this.za=0,this.i=[],this.j=new yr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ei("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ei("baseRetryDelayMs",5e3,c),this.Za=Ei("retryDelaySeedMs",1e4,c),this.Ta=Ei("forwardChannelMaxRetries",2,c),this.va=Ei("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new vi(c&&c.concurrentRequestLimit),this.Ba=new Hi,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=si.prototype,i.ka=8,i.I=1,i.connect=function(c,v,w,I){rn(0),this.W=c,this.H=v||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.J=Ra(this,null,this.W),wi(this)};function ls(c){if(Ta(c),c.I==3){var v=c.V++,w=an(c.J);if(Ot(w,"SID",c.M),Ot(w,"RID",v),Ot(w,"TYPE","terminate"),Qi(c,w),v=new or(c,c.j,v),v.M=2,v.A=os(an(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&d.Image&&(new Image().src=v.A,w=!0),w||(v.g=En(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Hn(v)}Ca(c)}function Ti(c){c.g&&(us(c),c.g.cancel(),c.g=null)}function Ta(c){Ti(c),c.v&&(d.clearTimeout(c.v),c.v=null),Sa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&d.clearTimeout(c.m),c.m=null)}function wi(c){if(!ss(c.h)&&!c.m){c.m=!0;var v=c.Ea;xt||D(),Ge||(xt(),Ge=!0),k.add(v,c),c.D=0}}function wa(c,v){return Ir(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=v.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Xr(E(c.Ea,c,v),Aa(c,c.D)),c.D++,!0)}i.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const te=new or(this,this.j,c);let ue=this.o;if(this.U&&(ue?(ue=F(ue),xe(ue,this.U)):ue=this.U),this.u!==null||this.R||(te.J=ue,ue=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=Ro(this,te,v),w=an(this.J),Ot(w,"RID",c),Ot(w,"CVER",22),this.G&&Ot(w,"X-HTTP-Session-Id",this.G),Qi(this,w),ue&&(this.R?v="headers="+Cr(bn(ue))+"&"+v:this.u&&Ls(w,this.u,ue)),Wr(this.h,te),this.Ra&&Ot(w,"TYPE","init"),this.S?(Ot(w,"$req",v),Ot(w,"SID","null"),te.U=!0,Ln(te,w,null)):Ln(te,w,v),this.I=2}}else this.I==3&&(c?Us(this,c):this.i.length==0||ss(this.h)||Us(this))};function Us(c,v){var w;v?w=v.l:w=c.V++;const I=an(c.J);Ot(I,"SID",c.M),Ot(I,"RID",w),Ot(I,"AID",c.K),Qi(c,I),c.u&&c.o&&Ls(I,c.u,c.o),w=new or(c,c.j,w,c.D+1),c.u===null&&(w.J=c.o),v&&(c.i=v.G.concat(c.i)),v=Ro(c,w,1e3),w.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Wr(c.h,w),Ln(w,I,v)}function Qi(c,v){c.H&&at(c.H,function(w,I){Ot(v,I,w)}),c.l&&at({},function(w,I){Ot(v,I,w)})}function Ro(c,v,w){w=Math.min(c.i.length,w);const I=c.l?E(c.l.Ka,c.l,c):null;e:{var te=c.i;let tt=-1;for(;;){const un=["count="+w];tt==-1?w>0?(tt=te[0].g,un.push("ofs="+tt)):tt=0:un.push("ofs="+tt);let At=!0;for(let Ut=0;Ut<w;Ut++){var ue=te[Ut].g;const Pr=te[Ut].map;if(ue-=tt,ue<0)tt=Math.max(0,te[Ut].g-100),At=!1;else try{ue="req"+ue+"_"||"";try{var Ce=Pr instanceof Map?Pr:Object.entries(Pr);for(const[Lr,br]of Ce){let ai=br;y(br)&&(ai=mi(br)),un.push(ue+Lr+"="+encodeURIComponent(ai))}}catch(Lr){throw un.push(ue+"type="+encodeURIComponent("_badmap")),Lr}}catch{I&&I(Pr)}}if(At){Ce=un.join("&");break e}}Ce=void 0}return c=c.i.splice(0,w),v.G=c,Ce}function js(c){if(!c.g&&!c.v){c.Y=1;var v=c.Da;xt||D(),Ge||(xt(),Ge=!0),k.add(v,c),c.A=0}}function Si(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Xr(E(c.Da,c),Aa(c,c.A)),c.A++,!0)}i.Da=function(){if(this.v=null,Io(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Xr(E(this.Wa,this),c)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rn(10),Ti(this),Io(this))};function us(c){c.B!=null&&(d.clearTimeout(c.B),c.B=null)}function Io(c){c.g=new or(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var v=an(c.na);Ot(v,"RID","rpc"),Ot(v,"SID",c.M),Ot(v,"AID",c.K),Ot(v,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ot(v,"TO",c.ia),Ot(v,"TYPE","xmlhttp"),Qi(c,v),c.u&&c.o&&Ls(v,c.u,c.o),c.O&&(c.g.H=c.O);var w=c.g;c=c.ba,w.M=1,w.A=os(an(v)),w.u=null,w.R=!0,qi(w,c)}i.Va=function(){this.C!=null&&(this.C=null,Ti(this),Si(this),rn(19))};function Sa(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Xi(c,v){var w=null;if(c.g==v){Sa(c),us(c),c.g=null;var I=2}else if(xr(c.h,v))w=v.G,ga(c.h,v),I=1;else return;if(c.I!=0){if(v.o)if(I==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var te=c.D;I=wr(),nn(I,new Sr(I,w)),wi(c)}else js(c);else if(te=v.m,te==3||te==0&&v.X>0||!(I==1&&wa(c,v)||I==2&&Si(c)))switch(w&&w.length>0&&(v=c.h,v.i=v.i.concat(w)),te){case 1:kr(c,5);break;case 4:kr(c,10);break;case 3:kr(c,6);break;default:kr(c,2)}}}function Aa(c,v){let w=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(w*=2),w*v}function kr(c,v){if(c.j.info("Error code "+v),v==2){var w=E(c.bb,c),I=c.Ua;const te=!I;I=new lr(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||on(I,"https"),os(I),te?ur(I.toString(),w):Dr(I.toString(),w)}else rn(2);c.I=0,c.l&&c.l.pa(v),Ca(c),Ta(c)}i.bb=function(c){c?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function Ca(c){if(c.I=0,c.ja=[],c.l){const v=as(c.h);(v.length!=0||c.i.length!=0)&&(re(c.ja,v),re(c.ja,c.i),c.h.i.length=0,X(c.i),c.i.length=0),c.l.oa()}}function Ra(c,v,w){var I=w instanceof lr?an(w):new lr(w);if(I.g!="")v&&(I.g=v+"."+I.g),Or(I,I.u);else{var te=d.location;I=te.protocol,v=v?v+"."+te.hostname:te.hostname,te=+te.port;const ue=new lr(null);I&&on(ue,I),v&&(ue.g=v),te&&Or(ue,te),w&&(ue.h=w),I=ue}return w=c.G,v=c.wa,w&&v&&Ot(I,w,v),Ot(I,"VER",c.ka),Qi(c,I),I}function En(c,v,w){if(v&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Aa&&!c.ma?new ht(new Lt({ab:w})):new ht(c.ma),v.Fa(c.L),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function cs(){}i=cs.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Vr(){}Vr.prototype.g=function(c,v){return new Fn(c,v)};function Fn(c,v){hn.call(this),this.g=new si(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(c?c["X-WebChannel-Client-Profile"]=v.sa:c={"X-WebChannel-Client-Profile":v.sa}),this.g.U=c,(c=v&&v.Qb)&&!P(c)&&(this.g.u=c),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!P(v)&&(this.g.G=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new Ai(this)}x(Fn,hn),Fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){ls(this.g)},Fn.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.v&&(w={},w.__data__=mi(c),c=w);v.i.push(new sn(v.Ya++,c)),v.I==3&&wi(v)},Fn.prototype.N=function(){this.g.l=null,delete this.j,ls(this.g),delete this.g,Fn.Z.N.call(this)};function zs(c){yn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const w in v){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}x(zs,yn);function xo(){vn.call(this),this.status=1}x(xo,vn);function Ai(c){this.g=c}x(Ai,cs),Ai.prototype.ra=function(){nn(this.g,"a")},Ai.prototype.qa=function(c){nn(this.g,new zs(c))},Ai.prototype.pa=function(c){nn(this.g,new xo)},Ai.prototype.oa=function(){nn(this.g,"b")},Vr.prototype.createWebChannel=Vr.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,DE=function(){return new Vr},OE=function(){return wr()},xE=Ne,am={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},yi.NO_ERROR=0,yi.TIMEOUT=8,yi.HTTP_ERROR=6,Wf=yi,kt.COMPLETE="complete",IE=kt,gi.EventType=ar,ar.OPEN="a",ar.CLOSE="b",ar.ERROR="c",ar.MESSAGE="d",hn.prototype.listen=hn.prototype.J,Qu=gi,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,RE=ht}).apply(typeof jf<"u"?jf:typeof self<"u"?self:typeof window<"u"?window:{});const C0="@firebase/firestore",R0="4.9.2";class dr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dr.UNAUTHENTICATED=new dr(null),dr.GOOGLE_CREDENTIALS=new dr("google-credentials-uid"),dr.FIRST_PARTY=new dr("first-party-uid"),dr.MOCK_USER=new dr("mock-user");let su="12.3.0";const el=new Cm("@firebase/firestore");function jl(){return el.logLevel}function Ue(i,...e){if(el.logLevel<=Et.DEBUG){const n=e.map(jm);el.debug(`Firestore (${su}): ${i}`,...n)}}function ha(i,...e){if(el.logLevel<=Et.ERROR){const n=e.map(jm);el.error(`Firestore (${su}): ${i}`,...n)}}function $l(i,...e){if(el.logLevel<=Et.WARN){const n=e.map(jm);el.warn(`Firestore (${su}): ${i}`,...n)}}function jm(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function $e(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,NE(i,s,n)}function NE(i,e,n){let s=`FIRESTORE (${su}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw ha(s),new Error(s)}function Vt(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||NE(e,o,s)}function st(i,e){return i}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends pa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ho{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class ME{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(dr.UNAUTHENTICATED)))}shutdown(){}}class d2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class p2{constructor(e){this.t=e,this.currentUser=dr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Vt(this.o===void 0,42304);let s=this.i;const o=_=>this.i!==s?(s=this.i,n(_)):Promise.resolve();let u=new ho;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ho,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const _=u;e.enqueueRetryable((async()=>{await _.promise,await o(this.currentUser)}))},y=_=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((_=>y(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?y(_):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ho)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Vt(typeof s.accessToken=="string",31837,{l:s}),new ME(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Vt(e===null||typeof e=="string",2055,{h:e}),new dr(e)}}class m2{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=dr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class g2{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new m2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(dr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class I0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Vt(this.o===void 0,3512);const s=u=>{u.error!=null&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Ue("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new I0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Vt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new I0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function v2(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class zm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=v2(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Tt(i,e){return i<e?-1:i>e?1:0}function om(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return Kp(o)===Kp(u)?Tt(o,u):Kp(o)?1:-1}return Tt(i.length,e.length)}const _2=55296,b2=57343;function Kp(i){const e=i.charCodeAt(0);return e>=_2&&e<=b2}function Jl(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const x0="__name__";class vs{constructor(e,n,s){n===void 0?n=0:n>e.length&&$e(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&$e(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return vs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vs?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=vs.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Tt(e.length,n.length)}static compareSegments(e,n){const s=vs.isNumericId(e),o=vs.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?vs.extractNumericId(e).compare(vs.extractNumericId(n)):om(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fo.fromString(e.substring(4,e.length-2))}}class cn extends vs{construct(e,n,s){return new cn(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new He(be.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new cn(n)}static emptyPath(){return new cn([])}}const E2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ir extends vs{construct(e,n,s){return new ir(e,n,s)}static isValidIdentifier(e){return E2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ir.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===x0}static keyField(){return new ir([x0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new He(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const y=e[o];if(y==="\\"){if(o+1===e.length)throw new He(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[o+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new He(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=_,o+=2}else y==="`"?(d=!d,o++):y!=="."||d?(s+=y,o++):(u(),o++)}if(u(),d)throw new He(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ir(n)}static emptyPath(){return new ir([])}}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(cn.fromString(e))}static fromName(e){return new Ye(cn.fromString(e).popFirst(5))}static empty(){return new Ye(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return cn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new cn(e.slice()))}}function T2(i,e,n){if(!n)throw new He(be.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function w2(i,e,n,s){if(e===!0&&s===!0)throw new He(be.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function O0(i){if(!Ye.isDocumentKey(i))throw new He(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function kE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Bm(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":$e(12329,{type:typeof i})}function fc(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new He(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bm(i);throw new He(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Vn(i,e){const n={typeString:i};return e&&(n.value=e),n}function Cc(i,e){if(!kE(i))throw new He(be.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const d=i[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new He(be.INVALID_ARGUMENT,n);return!0}const D0=-62135596800,N0=1e6;class Jt{static now(){return Jt.fromMillis(Date.now())}static fromDate(e){return Jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*N0);return new Jt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new He(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new He(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<D0)throw new He(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/N0}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cc(e,Jt._jsonSchema))return new Jt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-D0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Jt._jsonSchemaVersion="firestore/timestamp/1.0",Jt._jsonSchema={type:Vn("string",Jt._jsonSchemaVersion),seconds:Vn("number"),nanoseconds:Vn("number")};class nt{static fromTimestamp(e){return new nt(e)}static min(){return new nt(new Jt(0,0))}static max(){return new nt(new Jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const hc=-1;function S2(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=nt.fromTimestamp(s===1e9?new Jt(n+1,0):new Jt(n,s));return new po(o,Ye.empty(),e)}function A2(i){return new po(i.readTime,i.key,hc)}class po{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new po(nt.min(),Ye.empty(),hc)}static max(){return new po(nt.max(),Ye.empty(),hc)}}function C2(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Ye.comparator(i.documentKey,e.documentKey),n!==0?n:Tt(i.largestBatchId,e.largestBatchId))}const R2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class I2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function au(i){if(i.code!==be.FAILED_PRECONDITION||i.message!==R2)throw i;Ue("LocalStore","Unexpectedly lost primary lease")}class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ve(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ve?n:ve.resolve(n)}catch(n){return ve.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ve.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ve.reject(n)}static resolve(e){return new ve(((n,s)=>{n(e)}))}static reject(e){return new ve(((n,s)=>{s(e)}))}static waitFor(e){return new ve(((n,s)=>{let o=0,u=0,d=!1;e.forEach((y=>{++o,y.next((()=>{++u,d&&u===o&&n()}),(_=>s(_)))})),d=!0,u===o&&n()}))}static or(e){let n=ve.resolve(!1);for(const s of e)n=n.next((o=>o?ve.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ve(((s,o)=>{const u=e.length,d=new Array(u);let y=0;for(let _=0;_<u;_++){const E=_;n(e[E]).next((R=>{d[E]=R,++y,y===u&&s(d)}),(R=>o(R)))}}))}static doWhile(e,n){return new ve(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function x2(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ou(i){return i.name==="IndexedDbTransactionError"}class Nh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nh.ce=-1;const qm=-1;function Mh(i){return i==null}function ph(i){return i===0&&1/i==-1/0}function O2(i){return typeof i=="number"&&Number.isInteger(i)&&!ph(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const VE="";function D2(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=M0(e)),e=N2(i.get(n),e);return M0(e)}function N2(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case VE:n+="";break;default:n+=u}}return n}function M0(i){return i+VE+""}function k0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function rl(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function PE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class fn{constructor(e,n){this.comparator=e,this.root=n||rr.EMPTY}insert(e,n){return new fn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(e){return new fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zf(this.root,e,this.comparator,!1)}getReverseIterator(){return new zf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zf(this.root,e,this.comparator,!0)}}class zf{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rr{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??rr.RED,this.left=o??rr.EMPTY,this.right=u??rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new rr(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return rr.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $e(27949);return e+(this.isRed()?0:1)}}rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1;rr.EMPTY=new class{constructor(){this.size=0}get key(){throw $e(57766)}get value(){throw $e(16141)}get color(){throw $e(16727)}get left(){throw $e(29726)}get right(){throw $e(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new rr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bn{constructor(e){this.comparator=e,this.data=new fn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new V0(this.data.getIterator())}getIteratorFrom(e){return new V0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Bn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Bn(this.comparator);return n.data=e,n}}class V0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class es{constructor(e){this.fields=e,e.sort(ir.comparator)}static empty(){return new es([])}unionWith(e){let n=new Bn(ir.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new es(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class LE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class sr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new LE("Invalid base64 string: "+u):u}})(e);return new sr(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new sr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sr.EMPTY_BYTE_STRING=new sr("");const M2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mo(i){if(Vt(!!i,39018),typeof i=="string"){let e=0;const n=M2.exec(i);if(Vt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:An(i.seconds),nanos:An(i.nanos)}}function An(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function go(i){return typeof i=="string"?sr.fromBase64String(i):sr.fromUint8Array(i)}const UE="server_timestamp",jE="__type__",zE="__previous_value__",BE="__local_write_time__";function Hm(i){return(i?.mapValue?.fields||{})[jE]?.stringValue===UE}function kh(i){const e=i.mapValue.fields[zE];return Hm(e)?kh(e):e}function dc(i){const e=mo(i.mapValue.fields[BE].timestampValue);return new Jt(e.seconds,e.nanos)}class k2{constructor(e,n,s,o,u,d,y,_,E,R){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=y,this.longPollingOptions=_,this.useFetchStreams=E,this.isUsingEmulator=R}}const mh="(default)";class pc{constructor(e,n){this.projectId=e,this.database=n||mh}static empty(){return new pc("","")}get isDefaultDatabase(){return this.database===mh}isEqual(e){return e instanceof pc&&e.projectId===this.projectId&&e.database===this.database}}const qE="__type__",V2="__max__",Bf={mapValue:{}},HE="__vector__",gh="value";function yo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Hm(i)?4:L2(i)?9007199254740991:P2(i)?10:11:$e(28295,{value:i})}function Rs(i,e){if(i===e)return!0;const n=yo(i);if(n!==yo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return dc(i).isEqual(dc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=mo(o.timestampValue),y=mo(u.timestampValue);return d.seconds===y.seconds&&d.nanos===y.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return go(o.bytesValue).isEqual(go(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return An(o.geoPointValue.latitude)===An(u.geoPointValue.latitude)&&An(o.geoPointValue.longitude)===An(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return An(o.integerValue)===An(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=An(o.doubleValue),y=An(u.doubleValue);return d===y?ph(d)===ph(y):isNaN(d)&&isNaN(y)}return!1})(i,e);case 9:return Jl(i.arrayValue.values||[],e.arrayValue.values||[],Rs);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},y=u.mapValue.fields||{};if(k0(d)!==k0(y))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(y[_]===void 0||!Rs(d[_],y[_])))return!1;return!0})(i,e);default:return $e(52216,{left:i})}}function mc(i,e){return(i.values||[]).find((n=>Rs(n,e)))!==void 0}function Wl(i,e){if(i===e)return 0;const n=yo(i),s=yo(e);if(n!==s)return Tt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Tt(i.booleanValue,e.booleanValue);case 2:return(function(u,d){const y=An(u.integerValue||u.doubleValue),_=An(d.integerValue||d.doubleValue);return y<_?-1:y>_?1:y===_?0:isNaN(y)?isNaN(_)?0:-1:1})(i,e);case 3:return P0(i.timestampValue,e.timestampValue);case 4:return P0(dc(i),dc(e));case 5:return om(i.stringValue,e.stringValue);case 6:return(function(u,d){const y=go(u),_=go(d);return y.compareTo(_)})(i.bytesValue,e.bytesValue);case 7:return(function(u,d){const y=u.split("/"),_=d.split("/");for(let E=0;E<y.length&&E<_.length;E++){const R=Tt(y[E],_[E]);if(R!==0)return R}return Tt(y.length,_.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,d){const y=Tt(An(u.latitude),An(d.latitude));return y!==0?y:Tt(An(u.longitude),An(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return L0(i.arrayValue,e.arrayValue);case 10:return(function(u,d){const y=u.fields||{},_=d.fields||{},E=y[gh]?.arrayValue,R=_[gh]?.arrayValue,x=Tt(E?.values?.length||0,R?.values?.length||0);return x!==0?x:L0(E,R)})(i.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Bf.mapValue&&d===Bf.mapValue)return 0;if(u===Bf.mapValue)return 1;if(d===Bf.mapValue)return-1;const y=u.fields||{},_=Object.keys(y),E=d.fields||{},R=Object.keys(E);_.sort(),R.sort();for(let x=0;x<_.length&&x<R.length;++x){const M=om(_[x],R[x]);if(M!==0)return M;const X=Wl(y[_[x]],E[R[x]]);if(X!==0)return X}return Tt(_.length,R.length)})(i.mapValue,e.mapValue);default:throw $e(23264,{he:n})}}function P0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Tt(i,e);const n=mo(i),s=mo(e),o=Tt(n.seconds,s.seconds);return o!==0?o:Tt(n.nanos,s.nanos)}function L0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Wl(n[o],s[o]);if(u)return u}return Tt(n.length,s.length)}function Zl(i){return lm(i)}function lm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=mo(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return go(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Ye.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=lm(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${lm(n.fields[d])}`;return o+"}"})(i.mapValue):$e(61005,{value:i})}function Zf(i){switch(yo(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kh(i);return e?16+Zf(e):16;case 5:return 2*i.stringValue.length;case 6:return go(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Zf(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return rl(s.fields,((u,d)=>{o+=u.length+Zf(d)})),o})(i.mapValue);default:throw $e(13486,{value:i})}}function um(i){return!!i&&"integerValue"in i}function Km(i){return!!i&&"arrayValue"in i}function U0(i){return!!i&&"nullValue"in i}function j0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function eh(i){return!!i&&"mapValue"in i}function P2(i){return(i?.mapValue?.fields||{})[qE]?.stringValue===HE}function tc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return rl(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=tc(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tc(i.arrayValue.values[n]);return e}return{...i}}function L2(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===V2}class Li{constructor(e){this.value=e}static empty(){return new Li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!eh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tc(n)}setAll(e){let n=ir.emptyPath(),s={},o=[];e.forEach(((d,y)=>{if(!n.isImmediateParentOf(y)){const _=this.getFieldsMap(n);this.applyChanges(_,s,o),s={},o=[],n=y.popLast()}d?s[y.lastSegment()]=tc(d):o.push(y.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());eh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];eh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){rl(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Li(tc(this.value))}}function KE(i){const e=[];return rl(i.fields,((n,s)=>{const o=new ir([n]);if(eh(s)){const u=KE(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new es(e)}class pr{constructor(e,n,s,o,u,d,y){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=y}static newInvalidDocument(e){return new pr(e,0,nt.min(),nt.min(),nt.min(),Li.empty(),0)}static newFoundDocument(e,n,s,o){return new pr(e,1,n,nt.min(),s,o,0)}static newNoDocument(e,n){return new pr(e,2,n,nt.min(),nt.min(),Li.empty(),0)}static newUnknownDocument(e,n){return new pr(e,3,n,nt.min(),nt.min(),Li.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yh{constructor(e,n){this.position=e,this.inclusive=n}}function z0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],d=i.position[o];if(u.field.isKeyField()?s=Ye.comparator(Ye.fromName(d.referenceValue),n.key):s=Wl(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function B0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Rs(i.position[n],e.position[n]))return!1;return!0}class vh{constructor(e,n="asc"){this.field=e,this.dir=n}}function U2(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class FE{}class zn extends FE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new z2(e,n,s):n==="array-contains"?new H2(e,s):n==="in"?new K2(e,s):n==="not-in"?new F2(e,s):n==="array-contains-any"?new G2(e,s):new zn(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new B2(e,s):new q2(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wl(n,this.value)):n!==null&&yo(this.value)===yo(n)&&this.matchesComparison(Wl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Is extends FE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Is(e,n)}matches(e){return GE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function GE(i){return i.op==="and"}function YE(i){return j2(i)&&GE(i)}function j2(i){for(const e of i.filters)if(e instanceof Is)return!1;return!0}function cm(i){if(i instanceof zn)return i.field.canonicalString()+i.op.toString()+Zl(i.value);if(YE(i))return i.filters.map((e=>cm(e))).join(",");{const e=i.filters.map((n=>cm(n))).join(",");return`${i.op}(${e})`}}function QE(i,e){return i instanceof zn?(function(s,o){return o instanceof zn&&s.op===o.op&&s.field.isEqual(o.field)&&Rs(s.value,o.value)})(i,e):i instanceof Is?(function(s,o){return o instanceof Is&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,d,y)=>u&&QE(d,o.filters[y])),!0):!1})(i,e):void $e(19439)}function XE(i){return i instanceof zn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Zl(n.value)}`})(i):i instanceof Is?(function(n){return n.op.toString()+" {"+n.getFilters().map(XE).join(" ,")+"}"})(i):"Filter"}class z2 extends zn{constructor(e,n,s){super(e,n,s),this.key=Ye.fromName(s.referenceValue)}matches(e){const n=Ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class B2 extends zn{constructor(e,n){super(e,"in",n),this.keys=$E("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class q2 extends zn{constructor(e,n){super(e,"not-in",n),this.keys=$E("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function $E(i,e){return(e.arrayValue?.values||[]).map((n=>Ye.fromName(n.referenceValue)))}class H2 extends zn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Km(n)&&mc(n.arrayValue,this.value)}}class K2 extends zn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mc(this.value.arrayValue,n)}}class F2 extends zn{constructor(e,n){super(e,"not-in",n)}matches(e){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!mc(this.value.arrayValue,n)}}class G2 extends zn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Km(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>mc(this.value.arrayValue,s)))}}class Y2{constructor(e,n=null,s=[],o=[],u=null,d=null,y=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=y,this.Te=null}}function q0(i,e=null,n=[],s=[],o=null,u=null,d=null){return new Y2(i,e,n,s,o,u,d)}function Fm(i){const e=st(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>cm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Mh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Zl(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Zl(s))).join(",")),e.Te=n}return e.Te}function Gm(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!U2(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!QE(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!B0(i.startAt,e.startAt)&&B0(i.endAt,e.endAt)}function fm(i){return Ye.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Vh{constructor(e,n=null,s=[],o=[],u=null,d="F",y=null,_=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=y,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Q2(i,e,n,s,o,u,d,y){return new Vh(i,e,n,s,o,u,d,y)}function Ym(i){return new Vh(i)}function H0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function X2(i){return i.collectionGroup!==null}function nc(i){const e=st(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let y=new Bn(ir.comparator);return d.filters.forEach((_=>{_.getFlattenedFilters().forEach((E=>{E.isInequality()&&(y=y.add(E.field))}))})),y})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new vh(u,s))})),n.has(ir.keyField().canonicalString())||e.Ie.push(new vh(ir.keyField(),s))}return e.Ie}function Ts(i){const e=st(i);return e.Ee||(e.Ee=$2(e,nc(i))),e.Ee}function $2(i,e){if(i.limitType==="F")return q0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new vh(o.field,u)}));const n=i.endAt?new yh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new yh(i.startAt.position,i.startAt.inclusive):null;return q0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function hm(i,e,n){return new Vh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Ph(i,e){return Gm(Ts(i),Ts(e))&&i.limitType===e.limitType}function JE(i){return`${Fm(Ts(i))}|lt:${i.limitType}`}function zl(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>XE(o))).join(", ")}]`),Mh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Zl(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Zl(o))).join(",")),`Target(${s})`})(Ts(i))}; limitType=${i.limitType})`}function Lh(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Ye.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of nc(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(d,y,_){const E=z0(d,y,_);return d.inclusive?E<=0:E<0})(s.startAt,nc(s),o)||s.endAt&&!(function(d,y,_){const E=z0(d,y,_);return d.inclusive?E>=0:E>0})(s.endAt,nc(s),o))})(i,e)}function J2(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function WE(i){return(e,n)=>{let s=!1;for(const o of nc(i)){const u=W2(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function W2(i,e,n){const s=i.field.isKeyField()?Ye.comparator(e.key,n.key):(function(u,d,y){const _=d.data.field(u),E=y.data.field(u);return _!==null&&E!==null?Wl(_,E):$e(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return $e(19790,{direction:i.dir})}}class il{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){rl(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return PE(this.inner)}size(){return this.innerSize}}const Z2=new fn(Ye.comparator);function da(){return Z2}const ZE=new fn(Ye.comparator);function Xu(...i){let e=ZE;for(const n of i)e=e.insert(n.key,n);return e}function eT(i){let e=ZE;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Yo(){return rc()}function tT(){return rc()}function rc(){return new il((i=>i.toString()),((i,e)=>i.isEqual(e)))}const ex=new fn(Ye.comparator),tx=new Bn(Ye.comparator);function wt(...i){let e=tx;for(const n of i)e=e.add(n);return e}const nx=new Bn(Tt);function rx(){return nx}function Qm(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ph(e)?"-0":e}}function nT(i){return{integerValue:""+i}}function ix(i,e){return O2(e)?nT(e):Qm(i,e)}class Uh{constructor(){this._=void 0}}function sx(i,e,n){return i instanceof _h?(function(o,u){const d={fields:{[jE]:{stringValue:UE},[BE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Hm(u)&&(u=kh(u)),u&&(d.fields[zE]=u),{mapValue:d}})(n,e):i instanceof gc?iT(i,e):i instanceof yc?sT(i,e):(function(o,u){const d=rT(o,u),y=K0(d)+K0(o.Ae);return um(d)&&um(o.Ae)?nT(y):Qm(o.serializer,y)})(i,e)}function ax(i,e,n){return i instanceof gc?iT(i,e):i instanceof yc?sT(i,e):n}function rT(i,e){return i instanceof bh?(function(s){return um(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class _h extends Uh{}class gc extends Uh{constructor(e){super(),this.elements=e}}function iT(i,e){const n=aT(e);for(const s of i.elements)n.some((o=>Rs(o,s)))||n.push(s);return{arrayValue:{values:n}}}class yc extends Uh{constructor(e){super(),this.elements=e}}function sT(i,e){let n=aT(e);for(const s of i.elements)n=n.filter((o=>!Rs(o,s)));return{arrayValue:{values:n}}}class bh extends Uh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function K0(i){return An(i.integerValue||i.doubleValue)}function aT(i){return Km(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function ox(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof gc&&o instanceof gc||s instanceof yc&&o instanceof yc?Jl(s.elements,o.elements,Rs):s instanceof bh&&o instanceof bh?Rs(s.Ae,o.Ae):s instanceof _h&&o instanceof _h})(i.transform,e.transform)}class lx{constructor(e,n){this.version=e,this.transformResults=n}}class la{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new la}static exists(e){return new la(void 0,e)}static updateTime(e){return new la(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function th(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class jh{}function oT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new uT(i.key,la.none()):new Rc(i.key,i.data,la.none());{const n=i.data,s=Li.empty();let o=new Bn(ir.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new sl(i.key,s,new es(o.toArray()),la.none())}}function ux(i,e,n){i instanceof Rc?(function(o,u,d){const y=o.value.clone(),_=G0(o.fieldTransforms,u,d.transformResults);y.setAll(_),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(i,e,n):i instanceof sl?(function(o,u,d){if(!th(o.precondition,u))return void u.convertToUnknownDocument(d.version);const y=G0(o.fieldTransforms,u,d.transformResults),_=u.data;_.setAll(lT(o)),_.setAll(y),u.convertToFoundDocument(d.version,_).setHasCommittedMutations()})(i,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function ic(i,e,n,s){return i instanceof Rc?(function(u,d,y,_){if(!th(u.precondition,d))return y;const E=u.value.clone(),R=Y0(u.fieldTransforms,_,d);return E.setAll(R),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),null})(i,e,n,s):i instanceof sl?(function(u,d,y,_){if(!th(u.precondition,d))return y;const E=Y0(u.fieldTransforms,_,d),R=d.data;return R.setAll(lT(u)),R.setAll(E),d.convertToFoundDocument(d.version,R).setHasLocalMutations(),y===null?null:y.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((x=>x.field)))})(i,e,n,s):(function(u,d,y){return th(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):y})(i,e,n)}function cx(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=rT(s.transform,o||null);u!=null&&(n===null&&(n=Li.empty()),n.set(s.field,u))}return n||null}function F0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Jl(s,o,((u,d)=>ox(u,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Rc extends jh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class sl extends jh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function lT(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function G0(i,e,n){const s=new Map;Vt(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],d=u.transform,y=e.data.field(u.field);s.set(u.field,ax(d,y,n[o]))}return s}function Y0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,d=n.data.field(o.field);s.set(o.field,sx(u,d,e))}return s}class uT extends jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fx extends jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class hx{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&ux(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ic(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ic(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=tT();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let y=this.applyToLocalView(d,u.mutatedFields);y=n.has(o.key)?null:y;const _=oT(d,y);_!==null&&s.set(o.key,_),d.isValidDocument()||d.convertToNoDocument(nt.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),wt())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,((n,s)=>F0(n,s)))&&Jl(this.baseMutations,e.baseMutations,((n,s)=>F0(n,s)))}}class Xm{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Vt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return ex})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new Xm(e,n,s,o)}}class dx{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class px{constructor(e,n){this.count=e,this.unchangedNames=n}}var kn,It;function mx(i){switch(i){case be.OK:return $e(64938);case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0;default:return $e(15467,{code:i})}}function cT(i){if(i===void 0)return ha("GRPC error has no .code"),be.UNKNOWN;switch(i){case kn.OK:return be.OK;case kn.CANCELLED:return be.CANCELLED;case kn.UNKNOWN:return be.UNKNOWN;case kn.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case kn.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case kn.INTERNAL:return be.INTERNAL;case kn.UNAVAILABLE:return be.UNAVAILABLE;case kn.UNAUTHENTICATED:return be.UNAUTHENTICATED;case kn.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case kn.NOT_FOUND:return be.NOT_FOUND;case kn.ALREADY_EXISTS:return be.ALREADY_EXISTS;case kn.PERMISSION_DENIED:return be.PERMISSION_DENIED;case kn.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case kn.ABORTED:return be.ABORTED;case kn.OUT_OF_RANGE:return be.OUT_OF_RANGE;case kn.UNIMPLEMENTED:return be.UNIMPLEMENTED;case kn.DATA_LOSS:return be.DATA_LOSS;default:return $e(39323,{code:i})}}(It=kn||(kn={}))[It.OK=0]="OK",It[It.CANCELLED=1]="CANCELLED",It[It.UNKNOWN=2]="UNKNOWN",It[It.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",It[It.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",It[It.NOT_FOUND=5]="NOT_FOUND",It[It.ALREADY_EXISTS=6]="ALREADY_EXISTS",It[It.PERMISSION_DENIED=7]="PERMISSION_DENIED",It[It.UNAUTHENTICATED=16]="UNAUTHENTICATED",It[It.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",It[It.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",It[It.ABORTED=10]="ABORTED",It[It.OUT_OF_RANGE=11]="OUT_OF_RANGE",It[It.UNIMPLEMENTED=12]="UNIMPLEMENTED",It[It.INTERNAL=13]="INTERNAL",It[It.UNAVAILABLE=14]="UNAVAILABLE",It[It.DATA_LOSS=15]="DATA_LOSS";function gx(){return new TextEncoder}const yx=new fo([4294967295,4294967295],0);function Q0(i){const e=gx().encode(i),n=new CE;return n.update(e),new Uint8Array(n.digest())}function X0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new fo([n,s],0),new fo([o,u],0)]}class $m{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new $u(`Invalid padding: ${n}`);if(s<0)throw new $u(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new $u(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new $u(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=fo.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(fo.fromNumber(s)));return o.compare(yx)===1&&(o=new fo([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Q0(e),[s,o]=X0(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new $m(u,o,n);return s.forEach((y=>d.insert(y))),d}insert(e){if(this.ge===0)return;const n=Q0(e),[s,o]=X0(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class $u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new zh(nt.min(),o,new fn(Tt),da(),wt())}}class Ic{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Ic(s,n,wt(),wt(),wt())}}class nh{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class fT{constructor(e,n){this.targetId=e,this.Ce=n}}class hT{constructor(e,n,s=sr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class $0{constructor(){this.ve=0,this.Fe=J0(),this.Me=sr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=wt(),n=wt(),s=wt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:$e(38017,{changeType:u})}})),new Ic(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=J0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Vt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vx{constructor(e){this.Ge=e,this.ze=new Map,this.je=da(),this.Je=qf(),this.He=qf(),this.Ye=new fn(Tt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:$e(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(fm(u))if(s===0){const d=new Ye(u.path);this.et(n,d,pr.newNoDocument(d,nt.min()))}else Vt(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const y=this.ut(e),_=y?this.ct(y,e,d):1;if(_!==0){this.it(n);const E=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,E)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,y;try{d=go(s).toUint8Array()}catch(_){if(_ instanceof LE)return $l("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{y=new $m(d,o,u)}catch(_){return $l(_ instanceof $u?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return y.ge===0?null:y}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const d=this.Ge.ht(),y=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(y)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const y=this.ot(d);if(y){if(u.current&&fm(y.target)){const _=new Ye(y.target.path);this.It(_).has(d)||this.Et(d,_)||this.et(d,_,pr.newNoDocument(_,e))}u.Be&&(n.set(d,u.ke()),u.qe())}}));let s=wt();this.He.forEach(((u,d)=>{let y=!0;d.forEachWhile((_=>{const E=this.ot(_);return!E||E.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(s=s.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new zh(e,n,this.Ye,this.je,s);return this.je=da(),this.Je=qf(),this.He=qf(),this.Ye=new fn(Tt),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new $0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Bn(Tt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Bn(Tt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ue("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function qf(){return new fn(Ye.comparator)}function J0(){return new fn(Ye.comparator)}const _x={asc:"ASCENDING",desc:"DESCENDING"},bx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ex={and:"AND",or:"OR"};class Tx{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dm(i,e){return i.useProto3Json||Mh(e)?e:{value:e}}function Eh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function wx(i,e){return Eh(i,e.toTimestamp())}function ws(i){return Vt(!!i,49232),nt.fromTimestamp((function(n){const s=mo(n);return new Jt(s.seconds,s.nanos)})(i))}function Jm(i,e){return pm(i,e).canonicalString()}function pm(i,e){const n=(function(o){return new cn(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function pT(i){const e=cn.fromString(i);return Vt(_T(e),10190,{key:e.toString()}),e}function mm(i,e){return Jm(i.databaseId,e.path)}function Fp(i,e){const n=pT(e);if(n.get(1)!==i.databaseId.projectId)throw new He(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new He(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ye(gT(n))}function mT(i,e){return Jm(i.databaseId,e)}function Sx(i){const e=pT(i);return e.length===4?cn.emptyPath():gT(e)}function gm(i){return new cn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function gT(i){return Vt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function W0(i,e,n){return{name:mm(i,e),fields:n.value.mapValue.fields}}function Ax(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:$e(39313,{state:E})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(E,R){return E.useProto3Json?(Vt(R===void 0||typeof R=="string",58123),sr.fromBase64String(R||"")):(Vt(R===void 0||R instanceof Buffer||R instanceof Uint8Array,16193),sr.fromUint8Array(R||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,y=d&&(function(E){const R=E.code===void 0?be.UNKNOWN:cT(E.code);return new He(R,E.message||"")})(d);n=new hT(s,o,u,y||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Fp(i,s.document.name),u=ws(s.document.updateTime),d=s.document.createTime?ws(s.document.createTime):nt.min(),y=new Li({mapValue:{fields:s.document.fields}}),_=pr.newFoundDocument(o,u,d,y),E=s.targetIds||[],R=s.removedTargetIds||[];n=new nh(E,R,_.key,_)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Fp(i,s.document),u=s.readTime?ws(s.readTime):nt.min(),d=pr.newNoDocument(o,u),y=s.removedTargetIds||[];n=new nh([],y,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Fp(i,s.document),u=s.removedTargetIds||[];n=new nh([],u,o,null)}else{if(!("filter"in e))return $e(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new px(o,u),y=s.targetId;n=new fT(y,d)}}return n}function Cx(i,e){let n;if(e instanceof Rc)n={update:W0(i,e.key,e.value)};else if(e instanceof uT)n={delete:mm(i,e.key)};else if(e instanceof sl)n={update:W0(i,e.key,e.data),updateMask:Vx(e.fieldMask)};else{if(!(e instanceof fx))return $e(16599,{Vt:e.type});n={verify:mm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,d){const y=d.transform;if(y instanceof _h)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof gc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof yc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof bh)return{fieldPath:d.field.canonicalString(),increment:y.Ae};throw $e(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:wx(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:$e(27497)})(i,e.precondition)),n}function Rx(i,e){return i&&i.length>0?(Vt(e!==void 0,14353),i.map((n=>(function(o,u){let d=o.updateTime?ws(o.updateTime):ws(u);return d.isEqual(nt.min())&&(d=ws(u)),new lx(d,o.transformResults||[])})(n,e)))):[]}function Ix(i,e){return{documents:[mT(i,e.path)]}}function xx(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=mT(i,o);const u=(function(E){if(E.length!==0)return vT(Is.create(E,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(E){if(E.length!==0)return E.map((R=>(function(M){return{field:Bl(M.field),direction:Nx(M.dir)}})(R)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const y=dm(i,e.limit);return y!==null&&(n.structuredQuery.limit=y),e.startAt&&(n.structuredQuery.startAt=(function(E){return{before:E.inclusive,values:E.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(E){return{before:!E.inclusive,values:E.position}})(e.endAt)),{ft:n,parent:o}}function Ox(i){let e=Sx(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Vt(s===1,65062);const R=n.from[0];R.allDescendants?o=R.collectionId:e=e.child(R.collectionId)}let u=[];n.where&&(u=(function(x){const M=yT(x);return M instanceof Is&&YE(M)?M.getFilters():[M]})(n.where));let d=[];n.orderBy&&(d=(function(x){return x.map((M=>(function(re){return new vh(ql(re.field),(function(Ee){switch(Ee){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(re.direction))})(M)))})(n.orderBy));let y=null;n.limit&&(y=(function(x){let M;return M=typeof x=="object"?x.value:x,Mh(M)?null:M})(n.limit));let _=null;n.startAt&&(_=(function(x){const M=!!x.before,X=x.values||[];return new yh(X,M)})(n.startAt));let E=null;return n.endAt&&(E=(function(x){const M=!x.before,X=x.values||[];return new yh(X,M)})(n.endAt)),Q2(e,o,d,u,y,"F",_,E)}function Dx(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yT(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ql(n.unaryFilter.field);return zn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=ql(n.unaryFilter.field);return zn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=ql(n.unaryFilter.field);return zn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=ql(n.unaryFilter.field);return zn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $e(61313);default:return $e(60726)}})(i):i.fieldFilter!==void 0?(function(n){return zn.create(ql(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $e(58110);default:return $e(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Is.create(n.compositeFilter.filters.map((s=>yT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return $e(1026)}})(n.compositeFilter.op))})(i):$e(30097,{filter:i})}function Nx(i){return _x[i]}function Mx(i){return bx[i]}function kx(i){return Ex[i]}function Bl(i){return{fieldPath:i.canonicalString()}}function ql(i){return ir.fromServerFormat(i.fieldPath)}function vT(i){return i instanceof zn?(function(n){if(n.op==="=="){if(j0(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NAN"}};if(U0(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(j0(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NOT_NAN"}};if(U0(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bl(n.field),op:Mx(n.op),value:n.value}}})(i):i instanceof Is?(function(n){const s=n.getFilters().map((o=>vT(o)));return s.length===1?s[0]:{compositeFilter:{op:kx(n.op),filters:s}}})(i):$e(54877,{filter:i})}function Vx(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function _T(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class ao{constructor(e,n,s,o,u=nt.min(),d=nt.min(),y=sr.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=y,this.expectedCount=_}withSequenceNumber(e){return new ao(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Px{constructor(e){this.yt=e}}function Lx(i){const e=Ox({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?hm(e,e.limit,"L"):e}class Ux{constructor(){this.Cn=new jx}addToCollectionParentIndex(e,n){return this.Cn.add(n),ve.resolve()}getCollectionParents(e,n){return ve.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ve.resolve()}deleteFieldIndex(e,n){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,n){return ve.resolve()}getDocumentsMatchingTarget(e,n){return ve.resolve(null)}getIndexType(e,n){return ve.resolve(0)}getFieldIndexes(e,n){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,n){return ve.resolve(po.min())}getMinOffsetFromCollectionGroup(e,n){return ve.resolve(po.min())}updateCollectionGroup(e,n,s){return ve.resolve()}updateIndexEntries(e,n){return ve.resolve()}}class jx{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Bn(cn.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Bn(cn.comparator)).toArray()}}const Z0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bT=41943040;class Kr{static withCacheSize(e){return new Kr(e,Kr.DEFAULT_COLLECTION_PERCENTILE,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Kr.DEFAULT_COLLECTION_PERCENTILE=10,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kr.DEFAULT=new Kr(bT,Kr.DEFAULT_COLLECTION_PERCENTILE,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kr.DISABLED=new Kr(-1,0,0);class eu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new eu(0)}static cr(){return new eu(-1)}}const eb="LruGarbageCollector",zx=1048576;function tb([i,e],[n,s]){const o=Tt(i,n);return o===0?Tt(e,s):o}class Bx{constructor(e){this.Ir=e,this.buffer=new Bn(tb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();tb(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qx{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ue(eb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ou(n)?Ue(eb,"Ignoring IndexedDB error during garbage collection: ",n):await au(n)}await this.Vr(3e5)}))}}class Hx{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ve.resolve(Nh.ce);const s=new Bx(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(Z0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Z0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,d,y,_,E;const R=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,d=Date.now(),this.nthSequenceNumber(e,o)))).next((x=>(s=x,y=Date.now(),this.removeTargets(e,s,n)))).next((x=>(u=x,_=Date.now(),this.removeOrphanedDocuments(e,s)))).next((x=>(E=Date.now(),jl()<=Et.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-R}ms
	Determined least recently used ${o} in `+(y-d)+`ms
	Removed ${u} targets in `+(_-y)+`ms
	Removed ${x} documents in `+(E-_)+`ms
Total Duration: ${E-R}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:x}))))}}function Kx(i,e){return new Hx(i,e)}class Fx{constructor(){this.changes=new il((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ve.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Gx{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Yx{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&ic(s.mutation,o,es.empty(),Jt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,wt()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=wt()){const o=Yo();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let d=Xu();return u.forEach(((y,_)=>{d=d.insert(y,_.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=Yo();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,wt())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,y)=>{n.set(d,y)}))}))}computeViews(e,n,s,o){let u=da();const d=rc(),y=(function(){return rc()})();return n.forEach(((_,E)=>{const R=s.get(E.key);o.has(E.key)&&(R===void 0||R.mutation instanceof sl)?u=u.insert(E.key,E):R!==void 0?(d.set(E.key,R.mutation.getFieldMask()),ic(R.mutation,E,R.mutation.getFieldMask(),Jt.now())):d.set(E.key,es.empty())})),this.recalculateAndSaveOverlays(e,u).next((_=>(_.forEach(((E,R)=>d.set(E,R))),n.forEach(((E,R)=>y.set(E,new Gx(R,d.get(E)??null)))),y)))}recalculateAndSaveOverlays(e,n){const s=rc();let o=new fn(((d,y)=>d-y)),u=wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const y of d)y.keys().forEach((_=>{const E=n.get(_);if(E===null)return;let R=s.get(_)||es.empty();R=y.applyToLocalView(E,R),s.set(_,R);const x=(o.get(y.batchId)||wt()).add(_);o=o.insert(y.batchId,x)}))})).next((()=>{const d=[],y=o.getReverseIterator();for(;y.hasNext();){const _=y.getNext(),E=_.key,R=_.value,x=tT();R.forEach((M=>{if(!u.has(M)){const X=oT(n.get(M),s.get(M));X!==null&&x.set(M,X),u=u.add(M)}})),d.push(this.documentOverlayCache.saveOverlays(e,E,x))}return ve.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return Ye.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):X2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ve.resolve(Yo());let y=hc,_=u;return d.next((E=>ve.forEach(E,((R,x)=>(y<x.largestBatchId&&(y=x.largestBatchId),u.get(R)?ve.resolve():this.remoteDocumentCache.getEntry(e,R).next((M=>{_=_.insert(R,M)}))))).next((()=>this.populateOverlays(e,E,u))).next((()=>this.computeViews(e,_,E,wt()))).next((R=>({batchId:y,changes:eT(R)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ye(n)).next((s=>{let o=Xu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=Xu();return this.indexManager.getCollectionParents(e,u).next((y=>ve.forEach(y,(_=>{const E=(function(x,M){return new Vh(M,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,_.child(u));return this.getDocumentsMatchingCollectionQuery(e,E,s,o).next((R=>{R.forEach(((x,M)=>{d=d.insert(x,M)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((d=>{u.forEach(((_,E)=>{const R=E.getKey();d.get(R)===null&&(d=d.insert(R,pr.newInvalidDocument(R)))}));let y=Xu();return d.forEach(((_,E)=>{const R=u.get(_);R!==void 0&&ic(R.mutation,E,es.empty(),Jt.now()),Lh(n,E)&&(y=y.insert(_,E))})),y}))}}class Qx{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ve.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:ws(o.createTime)}})(n)),ve.resolve()}getNamedQuery(e,n){return ve.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:Lx(o.bundledQuery),readTime:ws(o.readTime)}})(n)),ve.resolve()}}class Xx{constructor(){this.overlays=new fn(Ye.comparator),this.qr=new Map}getOverlay(e,n){return ve.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Yo();return ve.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),ve.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ve.resolve()}getOverlaysForCollection(e,n,s){const o=Yo(),u=n.length+1,d=new Ye(n.child("")),y=this.overlays.getIteratorFrom(d);for(;y.hasNext();){const _=y.getNext().value,E=_.getKey();if(!n.isPrefixOf(E.path))break;E.path.length===u&&_.largestBatchId>s&&o.set(_.getKey(),_)}return ve.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new fn(((E,R)=>E-R));const d=this.overlays.getIterator();for(;d.hasNext();){const E=d.getNext().value;if(E.getKey().getCollectionGroup()===n&&E.largestBatchId>s){let R=u.get(E.largestBatchId);R===null&&(R=Yo(),u=u.insert(E.largestBatchId,R)),R.set(E.getKey(),E)}}const y=Yo(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((E,R)=>y.set(E,R))),!(y.size()>=o)););return ve.resolve(y)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new dx(n,s));let u=this.qr.get(n);u===void 0&&(u=wt(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class $x{constructor(){this.sessionToken=sr.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ve.resolve()}}class Wm{constructor(){this.Qr=new Bn(Qn.$r),this.Ur=new Bn(Qn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Qn(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Qn(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Ye(new cn([])),s=new Qn(n,e),o=new Qn(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ye(new cn([])),s=new Qn(n,e),o=new Qn(n,e+1);let u=wt();return this.Ur.forEachInRange([s,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new Qn(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Qn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ye.comparator(e.key,n.key)||Tt(e.Yr,n.Yr)}static Kr(e,n){return Tt(e.Yr,n.Yr)||Ye.comparator(e.key,n.key)}}class Jx{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Bn(Qn.$r)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new hx(u,n,s,o);this.mutationQueue.push(d);for(const y of o)this.Zr=this.Zr.add(new Qn(y.key,u)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return ve.resolve(d)}lookupMutationBatch(e,n){return ve.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return ve.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?qm:this.tr-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Qn(n,0),o=new Qn(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(d=>{const y=this.Xr(d.Yr);u.push(y)})),ve.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Bn(Tt);return n.forEach((o=>{const u=new Qn(o,0),d=new Qn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(y=>{s=s.add(y.Yr)}))})),ve.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Ye.isDocumentKey(u)||(u=u.child(""));const d=new Qn(new Ye(u),0);let y=new Bn(Tt);return this.Zr.forEachWhile((_=>{const E=_.key.path;return!!s.isPrefixOf(E)&&(E.length===o&&(y=y.add(_.Yr)),!0)}),d),ve.resolve(this.ti(y))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Vt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ve.forEach(n.mutations,(o=>{const u=new Qn(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Qn(n,0),o=this.Zr.firstAfterOrEqual(s);return ve.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Wx{constructor(e){this.ri=e,this.docs=(function(){return new fn(Ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ve.resolve(s?s.document.mutableCopy():pr.newInvalidDocument(n))}getEntries(e,n){let s=da();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():pr.newInvalidDocument(o))})),ve.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=da();const d=n.path,y=new Ye(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(y);for(;_.hasNext();){const{key:E,value:{document:R}}=_.getNext();if(!d.isPrefixOf(E.path))break;E.path.length>d.length+1||C2(A2(R),s)<=0||(o.has(R.key)||Lh(n,R))&&(u=u.insert(R.key,R.mutableCopy()))}return ve.resolve(u)}getAllFromCollectionGroup(e,n,s,o){$e(9500)}ii(e,n){return ve.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new Zx(this)}getSize(e){return ve.resolve(this.size)}}class Zx extends Fx{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ve.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class eO{constructor(e){this.persistence=e,this.si=new il((n=>Fm(n)),Gm),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this.oi=0,this._i=new Wm,this.targetCount=0,this.ai=eu.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ve.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new eu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ve.resolve()}updateTargetData(e,n){return this.Pr(n),ve.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((d,y)=>{y.sequenceNumber<=n&&s.get(y.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,y.targetId)),o++)})),ve.waitFor(u).next((()=>o))}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ve.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ve.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),ve.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ve.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ve.resolve(s)}containsKey(e,n){return ve.resolve(this._i.containsKey(n))}}class ET{constructor(e,n){this.ui={},this.overlays={},this.ci=new Nh(0),this.li=!1,this.li=!0,this.hi=new $x,this.referenceDelegate=e(this),this.Pi=new eO(this),this.indexManager=new Ux,this.remoteDocumentCache=(function(o){return new Wx(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new Px(n),this.Ii=new Qx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Xx,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new Jx(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Ue("MemoryPersistence","Starting transaction:",e);const o=new tO(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ve.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class tO extends I2{constructor(e){super(),this.currentSequenceNumber=e}}class Zm{constructor(e){this.persistence=e,this.Ri=new Wm,this.Vi=null}static mi(e){return new Zm(e)}get fi(){if(this.Vi)return this.Vi;throw $e(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ve.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ve.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ve.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.fi,(s=>{const o=Ye.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,nt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ve.or([()=>ve.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Th{constructor(e,n){this.persistence=e,this.pi=new il((s=>D2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=Kx(this,n)}static mi(e,n){return new Th(e,n)}Ei(){}di(e){return ve.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ve.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?ve.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((y=>{y||(s++,u.removeEntry(d,nt.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ve.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ve.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ve.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Zf(e.data.value)),n}br(e,n,s){return ve.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ve.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class eg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=wt(),o=wt();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new eg(e,n.fromCache,s,o)}}class nO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class rO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return GA()?8:x2(gr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new nO;return this.Ss(e,n,d).next((y=>{if(u.result=y,this.Vs)return this.bs(e,n,d,y.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(jl()<=Et.DEBUG&&Ue("QueryEngine","SDK will not create cache indexes for query:",zl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ve.resolve()):(jl()<=Et.DEBUG&&Ue("QueryEngine","Query:",zl(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(jl()<=Et.DEBUG&&Ue("QueryEngine","The SDK decides to create cache indexes for query:",zl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ts(n))):ve.resolve())}ys(e,n){if(H0(n))return ve.resolve(null);let s=Ts(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=hm(n,null,"F"),s=Ts(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const d=wt(...u);return this.ps.getDocuments(e,d).next((y=>this.indexManager.getMinOffset(e,s).next((_=>{const E=this.Ds(n,y);return this.Cs(n,E,d,_.readTime)?this.ys(e,hm(n,null,"F")):this.vs(e,E,n,_)}))))})))))}ws(e,n,s,o){return H0(n)||o.isEqual(nt.min())?ve.resolve(null):this.ps.getDocuments(e,s).next((u=>{const d=this.Ds(n,u);return this.Cs(n,d,s,o)?ve.resolve(null):(jl()<=Et.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),zl(n)),this.vs(e,d,n,S2(o,hc)).next((y=>y)))}))}Ds(e,n){let s=new Bn(WE(e));return n.forEach(((o,u)=>{Lh(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return jl()<=Et.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",zl(n)),this.ps.getDocumentsMatchingQuery(e,n,po.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const tg="LocalStore",iO=3e8;class sO{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new fn(Tt),this.xs=new il((u=>Fm(u)),Gm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function aO(i,e,n,s){return new sO(i,e,n,s)}async function TT(i,e){const n=st(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const d=[],y=[];let _=wt();for(const E of o){d.push(E.batchId);for(const R of E.mutations)_=_.add(R.key)}for(const E of u){y.push(E.batchId);for(const R of E.mutations)_=_.add(R.key)}return n.localDocuments.getDocuments(s,_).next((E=>({Ls:E,removedBatchIds:d,addedBatchIds:y})))}))}))}function oO(i,e){const n=st(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,_,E,R){const x=E.batch,M=x.keys();let X=ve.resolve();return M.forEach((re=>{X=X.next((()=>R.getEntry(_,re))).next((pe=>{const Ee=E.docVersions.get(re);Vt(Ee!==null,48541),pe.version.compareTo(Ee)<0&&(x.applyToRemoteDocument(pe,E),pe.isValidDocument()&&(pe.setReadTime(E.commitVersion),R.addEntry(pe)))}))})),X.next((()=>y.mutationQueue.removeMutationBatch(_,x)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(y){let _=wt();for(let E=0;E<y.mutationResults.length;++E)y.mutationResults[E].transformResults.length>0&&(_=_.add(y.batch.mutations[E].key));return _})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function wT(i){const e=st(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function lO(i,e){const n=st(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const y=[];e.targetChanges.forEach(((R,x)=>{const M=o.get(x);if(!M)return;y.push(n.Pi.removeMatchingKeys(u,R.removedDocuments,x).next((()=>n.Pi.addMatchingKeys(u,R.addedDocuments,x))));let X=M.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(x)!==null?X=X.withResumeToken(sr.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):R.resumeToken.approximateByteSize()>0&&(X=X.withResumeToken(R.resumeToken,s)),o=o.insert(x,X),(function(pe,Ee,ke){return pe.resumeToken.approximateByteSize()===0||Ee.snapshotVersion.toMicroseconds()-pe.snapshotVersion.toMicroseconds()>=iO?!0:ke.addedDocuments.size+ke.modifiedDocuments.size+ke.removedDocuments.size>0})(M,X,R)&&y.push(n.Pi.updateTargetData(u,X))}));let _=da(),E=wt();if(e.documentUpdates.forEach((R=>{e.resolvedLimboDocuments.has(R)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(u,R))})),y.push(uO(u,d,e.documentUpdates).next((R=>{_=R.ks,E=R.qs}))),!s.isEqual(nt.min())){const R=n.Pi.getLastRemoteSnapshotVersion(u).next((x=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));y.push(R)}return ve.waitFor(y).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,_,E))).next((()=>_))})).then((u=>(n.Ms=o,u)))}function uO(i,e,n){let s=wt(),o=wt();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let d=da();return n.forEach(((y,_)=>{const E=u.get(y);_.isFoundDocument()!==E.isFoundDocument()&&(o=o.add(y)),_.isNoDocument()&&_.version.isEqual(nt.min())?(e.removeEntry(y,_.readTime),d=d.insert(y,_)):!E.isValidDocument()||_.version.compareTo(E.version)>0||_.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(_),d=d.insert(y,_)):Ue(tg,"Ignoring outdated watch update for ",y,". Current version:",E.version," Watch version:",_.version)})),{ks:d,qs:o}}))}function cO(i,e){const n=st(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=qm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function fO(i,e){const n=st(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,ve.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new ao(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function ym(i,e,n){const s=st(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!ou(d))throw d;Ue(tg,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function nb(i,e,n){const s=st(i);let o=nt.min(),u=wt();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(_,E,R){const x=st(_),M=x.xs.get(R);return M!==void 0?ve.resolve(x.Ms.get(M)):x.Pi.getTargetData(E,R)})(s,d,Ts(e)).next((y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,y.targetId).next((_=>{u=_}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:nt.min(),n?u:wt()))).next((y=>(hO(s,J2(e),y),{documents:y,Qs:u})))))}function hO(i,e,n){let s=i.Os.get(e)||nt.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class rb{constructor(){this.activeTargetIds=rx()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dO{constructor(){this.Mo=new rb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rb,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pO{Oo(e){}shutdown(){}}const ib="ConnectivityMonitor";class sb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ue(ib,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ue(ib,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Hf=null;function vm(){return Hf===null?Hf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hf++,"0x"+Hf.toString(16)}const Gp="RestConnection",mO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===mh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const d=vm(),y=this.zo(e,n.toUriEncodedString());Ue(Gp,`Sending RPC '${e}' ${d}:`,y,s);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,o,u);const{host:E}=new URL(y),R=nu(E);return this.Jo(e,y,_,s,R).then((x=>(Ue(Gp,`Received RPC '${e}' ${d}: `,x),x)),(x=>{throw $l(Gp,`RPC '${e}' ${d} failed with error: `,x,"url: ",y,"request:",s),x}))}Ho(e,n,s,o,u,d){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+su})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=mO[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class yO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const hr="WebChannelConnection";class vO extends gO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const d=vm();return new Promise(((y,_)=>{const E=new RE;E.setWithCredentials(!0),E.listenOnce(IE.COMPLETE,(()=>{try{switch(E.getLastErrorCode()){case Wf.NO_ERROR:const x=E.getResponseJson();Ue(hr,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(x)),y(x);break;case Wf.TIMEOUT:Ue(hr,`RPC '${e}' ${d} timed out`),_(new He(be.DEADLINE_EXCEEDED,"Request time out"));break;case Wf.HTTP_ERROR:const M=E.getStatus();if(Ue(hr,`RPC '${e}' ${d} failed with status:`,M,"response text:",E.getResponseText()),M>0){let X=E.getResponseJson();Array.isArray(X)&&(X=X[0]);const re=X?.error;if(re&&re.status&&re.message){const pe=(function(ke){const Be=ke.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(Be)>=0?Be:be.UNKNOWN})(re.status);_(new He(pe,re.message))}else _(new He(be.UNKNOWN,"Server responded with status "+E.getStatus()))}else _(new He(be.UNAVAILABLE,"Connection failed."));break;default:$e(9055,{l_:e,streamId:d,h_:E.getLastErrorCode(),P_:E.getLastError()})}}finally{Ue(hr,`RPC '${e}' ${d} completed.`)}}));const R=JSON.stringify(o);Ue(hr,`RPC '${e}' ${d} sending request:`,o),E.send(n,"POST",R,s,15)}))}T_(e,n,s){const o=vm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=DE(),y=OE(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(_.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,n,s),_.encodeInitMessageHeaders=!0;const R=u.join("");Ue(hr,`Creating RPC '${e}' stream ${o}: ${R}`,_);const x=d.createWebChannel(R,_);this.I_(x);let M=!1,X=!1;const re=new yO({Yo:Ee=>{X?Ue(hr,`Not sending because RPC '${e}' stream ${o} is closed:`,Ee):(M||(Ue(hr,`Opening RPC '${e}' stream ${o} transport.`),x.open(),M=!0),Ue(hr,`RPC '${e}' stream ${o} sending:`,Ee),x.send(Ee))},Zo:()=>x.close()}),pe=(Ee,ke,Be)=>{Ee.listen(ke,(Ve=>{try{Be(Ve)}catch(rt){setTimeout((()=>{throw rt}),0)}}))};return pe(x,Qu.EventType.OPEN,(()=>{X||(Ue(hr,`RPC '${e}' stream ${o} transport opened.`),re.o_())})),pe(x,Qu.EventType.CLOSE,(()=>{X||(X=!0,Ue(hr,`RPC '${e}' stream ${o} transport closed`),re.a_(),this.E_(x))})),pe(x,Qu.EventType.ERROR,(Ee=>{X||(X=!0,$l(hr,`RPC '${e}' stream ${o} transport errored. Name:`,Ee.name,"Message:",Ee.message),re.a_(new He(be.UNAVAILABLE,"The operation could not be completed")))})),pe(x,Qu.EventType.MESSAGE,(Ee=>{if(!X){const ke=Ee.data[0];Vt(!!ke,16349);const Be=ke,Ve=Be?.error||Be[0]?.error;if(Ve){Ue(hr,`RPC '${e}' stream ${o} received error:`,Ve);const rt=Ve.status;let xt=(function(D){const V=kn[D];if(V!==void 0)return cT(V)})(rt),Ge=Ve.message;xt===void 0&&(xt=be.INTERNAL,Ge="Unknown error status: "+rt+" with message "+Ve.message),X=!0,re.a_(new He(xt,Ge)),x.close()}else Ue(hr,`RPC '${e}' stream ${o} received:`,ke),re.u_(ke)}})),pe(y,xE.STAT_EVENT,(Ee=>{Ee.stat===am.PROXY?Ue(hr,`RPC '${e}' stream ${o} detected buffering proxy`):Ee.stat===am.NOPROXY&&Ue(hr,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{re.__()}),0),re}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Yp(){return typeof document<"u"?document:null}function Bh(i){return new Tx(i,!0)}class ST{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&Ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ab="PersistentStream";class AT{constructor(e,n,s,o,u,d,y,_){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=y,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ST(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===be.RESOURCE_EXHAUSTED?(ha(n.toString()),ha("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new He(be.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ue(ab,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ue(ab,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _O extends AT{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Ax(this.serializer,e),s=(function(u){if(!("targetChange"in u))return nt.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?nt.min():d.readTime?ws(d.readTime):nt.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=gm(this.serializer),n.addTarget=(function(u,d){let y;const _=d.target;if(y=fm(_)?{documents:Ix(u,_)}:{query:xx(u,_).ft},y.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){y.resumeToken=dT(u,d.resumeToken);const E=dm(u,d.expectedCount);E!==null&&(y.expectedCount=E)}else if(d.snapshotVersion.compareTo(nt.min())>0){y.readTime=Eh(u,d.snapshotVersion.toTimestamp());const E=dm(u,d.expectedCount);E!==null&&(y.expectedCount=E)}return y})(this.serializer,e);const s=Dx(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=gm(this.serializer),n.removeTarget=e,this.q_(n)}}class bO extends AT{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Rx(e.writeResults,e.commitTime),s=ws(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=gm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>Cx(this.serializer,s)))};this.q_(n)}}class EO{}class TO extends EO{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new He(be.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,pm(n,s),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new He(be.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,y])=>this.connection.Ho(e,pm(n,s),o,d,y,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new He(be.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class wO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ha(n),this.aa=!1):Ue("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const tl="RemoteStore";class SO{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{al(this)&&(Ue(tl,"Restarting streams for network reachability change."),await(async function(_){const E=st(_);E.Ea.add(4),await xc(E),E.Ra.set("Unknown"),E.Ea.delete(4),await qh(E)})(this))}))})),this.Ra=new wO(s,o)}}async function qh(i){if(al(i))for(const e of i.da)await e(!0)}async function xc(i){for(const e of i.da)await e(!1)}function CT(i,e){const n=st(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),sg(n)?ig(n):lu(n).O_()&&rg(n,e))}function ng(i,e){const n=st(i),s=lu(n);n.Ia.delete(e),s.O_()&&RT(n,e),n.Ia.size===0&&(s.O_()?s.L_():al(n)&&n.Ra.set("Unknown"))}function rg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nt.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}lu(i).Y_(e)}function RT(i,e){i.Va.Ue(e),lu(i).Z_(e)}function ig(i){i.Va=new vx({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),lu(i).start(),i.Ra.ua()}function sg(i){return al(i)&&!lu(i).x_()&&i.Ia.size>0}function al(i){return st(i).Ea.size===0}function IT(i){i.Va=void 0}async function AO(i){i.Ra.set("Online")}async function CO(i){i.Ia.forEach(((e,n)=>{rg(i,e)}))}async function RO(i,e){IT(i),sg(i)?(i.Ra.ha(e),ig(i)):i.Ra.set("Unknown")}async function IO(i,e,n){if(i.Ra.set("Online"),e instanceof hT&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const y of u.targetIds)o.Ia.has(y)&&(await o.remoteSyncer.rejectListen(y,d),o.Ia.delete(y),o.Va.removeTarget(y))})(i,e)}catch(s){Ue(tl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await wh(i,s)}else if(e instanceof nh?i.Va.Ze(e):e instanceof fT?i.Va.st(e):i.Va.tt(e),!n.isEqual(nt.min()))try{const s=await wT(i.localStore);n.compareTo(s)>=0&&await(function(u,d){const y=u.Va.Tt(d);return y.targetChanges.forEach(((_,E)=>{if(_.resumeToken.approximateByteSize()>0){const R=u.Ia.get(E);R&&u.Ia.set(E,R.withResumeToken(_.resumeToken,d))}})),y.targetMismatches.forEach(((_,E)=>{const R=u.Ia.get(_);if(!R)return;u.Ia.set(_,R.withResumeToken(sr.EMPTY_BYTE_STRING,R.snapshotVersion)),RT(u,_);const x=new ao(R.target,_,E,R.sequenceNumber);rg(u,x)})),u.remoteSyncer.applyRemoteEvent(y)})(i,n)}catch(s){Ue(tl,"Failed to raise snapshot:",s),await wh(i,s)}}async function wh(i,e,n){if(!ou(e))throw e;i.Ea.add(1),await xc(i),i.Ra.set("Offline"),n||(n=()=>wT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Ue(tl,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await qh(i)}))}function xT(i,e){return e().catch((n=>wh(i,n,e)))}async function Hh(i){const e=st(i),n=vo(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qm;for(;xO(e);)try{const o=await cO(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,OO(e,o)}catch(o){await wh(e,o)}OT(e)&&DT(e)}function xO(i){return al(i)&&i.Ta.length<10}function OO(i,e){i.Ta.push(e);const n=vo(i);n.O_()&&n.X_&&n.ea(e.mutations)}function OT(i){return al(i)&&!vo(i).x_()&&i.Ta.length>0}function DT(i){vo(i).start()}async function DO(i){vo(i).ra()}async function NO(i){const e=vo(i);for(const n of i.Ta)e.ea(n.mutations)}async function MO(i,e,n){const s=i.Ta.shift(),o=Xm.from(s,e,n);await xT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Hh(i)}async function kO(i,e){e&&vo(i).X_&&await(async function(s,o){if((function(d){return mx(d)&&d!==be.ABORTED})(o.code)){const u=s.Ta.shift();vo(s).B_(),await xT(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Hh(s)}})(i,e),OT(i)&&DT(i)}async function ob(i,e){const n=st(i);n.asyncQueue.verifyOperationInProgress(),Ue(tl,"RemoteStore received new credentials");const s=al(n);n.Ea.add(3),await xc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await qh(n)}async function VO(i,e){const n=st(i);e?(n.Ea.delete(2),await qh(n)):e||(n.Ea.add(2),await xc(n),n.Ra.set("Unknown"))}function lu(i){return i.ma||(i.ma=(function(n,s,o){const u=st(n);return u.sa(),new _O(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:AO.bind(null,i),t_:CO.bind(null,i),r_:RO.bind(null,i),H_:IO.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),sg(i)?ig(i):i.Ra.set("Unknown")):(await i.ma.stop(),IT(i))}))),i.ma}function vo(i){return i.fa||(i.fa=(function(n,s,o){const u=st(n);return u.sa(),new bO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:DO.bind(null,i),r_:kO.bind(null,i),ta:NO.bind(null,i),na:MO.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Hh(i)):(await i.fa.stop(),i.Ta.length>0&&(Ue(tl,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class ag{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new ho,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,y=new ag(e,n,d,o,u);return y.start(s),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function og(i,e){if(ha("AsyncQueue",`${e}: ${i}`),ou(i))return new He(be.UNAVAILABLE,`${e}: ${i}`);throw i}class Yl{static emptySet(e){return new Yl(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ye.comparator(n.key,s.key):(n,s)=>Ye.comparator(n.key,s.key),this.keyedMap=Xu(),this.sortedSet=new fn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Yl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class lb{constructor(){this.ga=new fn(Ye.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):$e(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class tu{constructor(e,n,s,o,u,d,y,_,E){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=y,this.excludesMetadataChanges=_,this.hasCachedResults=E}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach((y=>{d.push({type:0,doc:y})})),new tu(e,n,Yl.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ph(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class PO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class LO{constructor(){this.queries=ub(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=st(n),u=o.queries;o.queries=ub(),u.forEach(((d,y)=>{for(const _ of y.Sa)_.onError(s)}))})(this,new He(be.ABORTED,"Firestore shutting down"))}}function ub(){return new il((i=>JE(i)),Ph)}async function UO(i,e){const n=st(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new PO,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const y=og(d,`Initialization of query '${zl(e.query)}' failed`);return void e.onError(y)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&lg(n)}async function jO(i,e){const n=st(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function zO(i,e){const n=st(i);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const y of d.Sa)y.Fa(o)&&(s=!0);d.wa=o}}s&&lg(n)}function BO(i,e,n){const s=st(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function lg(i){i.Ca.forEach((e=>{e.next()}))}var _m,cb;(cb=_m||(_m={})).Ma="default",cb.Cache="cache";class qO{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new tu(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=tu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_m.Cache}}class NT{constructor(e){this.key=e}}class MT{constructor(e){this.key=e}}class HO{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=wt(),this.mutatedKeys=wt(),this.eu=WE(e),this.tu=new Yl(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new lb,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,y=!1;const _=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,E=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((R,x)=>{const M=o.get(R),X=Lh(this.query,x)?x:null,re=!!M&&this.mutatedKeys.has(M.key),pe=!!X&&(X.hasLocalMutations||this.mutatedKeys.has(X.key)&&X.hasCommittedMutations);let Ee=!1;M&&X?M.data.isEqual(X.data)?re!==pe&&(s.track({type:3,doc:X}),Ee=!0):this.su(M,X)||(s.track({type:2,doc:X}),Ee=!0,(_&&this.eu(X,_)>0||E&&this.eu(X,E)<0)&&(y=!0)):!M&&X?(s.track({type:0,doc:X}),Ee=!0):M&&!X&&(s.track({type:1,doc:M}),Ee=!0,(_||E)&&(y=!0)),Ee&&(X?(d=d.add(X),u=pe?u.add(R):u.delete(R)):(d=d.delete(R),u=u.delete(R)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const R=this.query.limitType==="F"?d.last():d.first();d=d.delete(R.key),u=u.delete(R.key),s.track({type:1,doc:R})}return{tu:d,iu:s,Cs:y,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((R,x)=>(function(X,re){const pe=Ee=>{switch(Ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e(20277,{Rt:Ee})}};return pe(X)-pe(re)})(R.type,x.type)||this.eu(R.doc,x.doc))),this.ou(s),o=o??!1;const y=n&&!o?this._u():[],_=this.Xa.size===0&&this.current&&!o?1:0,E=_!==this.Za;return this.Za=_,d.length!==0||E?{snapshot:new tu(this.query,e.tu,u,d,e.mutatedKeys,_===0,E,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=wt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new MT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new NT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=wt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return tu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ug="SyncEngine";class KO{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class FO{constructor(e){this.key=e,this.hu=!1}}class GO{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new il((y=>JE(y)),Ph),this.Iu=new Map,this.Eu=new Set,this.du=new fn(Ye.comparator),this.Au=new Map,this.Ru=new Wm,this.Vu={},this.mu=new Map,this.fu=eu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YO(i,e,n=!0){const s=jT(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await kT(s,e,n,!0),o}async function QO(i,e){const n=jT(i);await kT(n,e,!0,!1)}async function kT(i,e,n,s){const o=await fO(i.localStore,Ts(e)),u=o.targetId,d=i.sharedClientState.addLocalQueryTarget(u,n);let y;return s&&(y=await XO(i,e,u,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&CT(i.remoteStore,o),y}async function XO(i,e,n,s,o){i.pu=(x,M,X)=>(async function(pe,Ee,ke,Be){let Ve=Ee.view.ru(ke);Ve.Cs&&(Ve=await nb(pe.localStore,Ee.query,!1).then((({documents:k})=>Ee.view.ru(k,Ve))));const rt=Be&&Be.targetChanges.get(Ee.targetId),xt=Be&&Be.targetMismatches.get(Ee.targetId)!=null,Ge=Ee.view.applyChanges(Ve,pe.isPrimaryClient,rt,xt);return hb(pe,Ee.targetId,Ge.au),Ge.snapshot})(i,x,M,X);const u=await nb(i.localStore,e,!0),d=new HO(e,u.Qs),y=d.ru(u.documents),_=Ic.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),E=d.applyChanges(y,i.isPrimaryClient,_);hb(i,n,E.au);const R=new KO(e,n,d);return i.Tu.set(e,R),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),E.snapshot}async function $O(i,e,n){const s=st(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((d=>!Ph(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await ym(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&ng(s.remoteStore,o.targetId),bm(s,o.targetId)})).catch(au)):(bm(s,o.targetId),await ym(s.localStore,o.targetId,!0))}async function JO(i,e){const n=st(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ng(n.remoteStore,s.targetId))}async function WO(i,e,n){const s=sD(i);try{const o=await(function(d,y){const _=st(d),E=Jt.now(),R=y.reduce(((X,re)=>X.add(re.key)),wt());let x,M;return _.persistence.runTransaction("Locally write mutations","readwrite",(X=>{let re=da(),pe=wt();return _.Ns.getEntries(X,R).next((Ee=>{re=Ee,re.forEach(((ke,Be)=>{Be.isValidDocument()||(pe=pe.add(ke))}))})).next((()=>_.localDocuments.getOverlayedDocuments(X,re))).next((Ee=>{x=Ee;const ke=[];for(const Be of y){const Ve=cx(Be,x.get(Be.key).overlayedDocument);Ve!=null&&ke.push(new sl(Be.key,Ve,KE(Ve.value.mapValue),la.exists(!0)))}return _.mutationQueue.addMutationBatch(X,E,ke,y)})).next((Ee=>{M=Ee;const ke=Ee.applyToLocalDocumentSet(x,pe);return _.documentOverlayCache.saveOverlays(X,Ee.batchId,ke)}))})).then((()=>({batchId:M.batchId,changes:eT(x)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,y,_){let E=d.Vu[d.currentUser.toKey()];E||(E=new fn(Tt)),E=E.insert(y,_),d.Vu[d.currentUser.toKey()]=E})(s,o.batchId,n),await Oc(s,o.changes),await Hh(s.remoteStore)}catch(o){const u=og(o,"Failed to persist write");n.reject(u)}}async function VT(i,e){const n=st(i);try{const s=await lO(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(Vt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Vt(d.hu,14607):o.removedDocuments.size>0&&(Vt(d.hu,42227),d.hu=!1))})),await Oc(n,s,e)}catch(s){await au(s)}}function fb(i,e,n){const s=st(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,d)=>{const y=d.view.va(e);y.snapshot&&o.push(y.snapshot)})),(function(d,y){const _=st(d);_.onlineState=y;let E=!1;_.queries.forEach(((R,x)=>{for(const M of x.Sa)M.va(y)&&(E=!0)})),E&&lg(_)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function ZO(i,e,n){const s=st(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let d=new fn(Ye.comparator);d=d.insert(u,pr.newNoDocument(u,nt.min()));const y=wt().add(u),_=new zh(nt.min(),new Map,new fn(Tt),d,y);await VT(s,_),s.du=s.du.remove(u),s.Au.delete(e),cg(s)}else await ym(s.localStore,e,!1).then((()=>bm(s,e,n))).catch(au)}async function eD(i,e){const n=st(i),s=e.batch.batchId;try{const o=await oO(n.localStore,e);LT(n,s,null),PT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Oc(n,o)}catch(o){await au(o)}}async function tD(i,e,n){const s=st(i);try{const o=await(function(d,y){const _=st(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",(E=>{let R;return _.mutationQueue.lookupMutationBatch(E,y).next((x=>(Vt(x!==null,37113),R=x.keys(),_.mutationQueue.removeMutationBatch(E,x)))).next((()=>_.mutationQueue.performConsistencyCheck(E))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(E,R,y))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,R))).next((()=>_.localDocuments.getDocuments(E,R)))}))})(s.localStore,e);LT(s,e,n),PT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Oc(s,o)}catch(o){await au(o)}}function PT(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function LT(i,e,n){const s=st(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function bm(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||UT(i,s)}))}function UT(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(ng(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),cg(i))}function hb(i,e,n){for(const s of n)s instanceof NT?(i.Ru.addReference(s.key,e),nD(i,s)):s instanceof MT?(Ue(ug,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||UT(i,s.key)):$e(19791,{wu:s})}function nD(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(Ue(ug,"New document in limbo: "+n),i.Eu.add(s),cg(i))}function cg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Ye(cn.fromString(e)),s=i.fu.next();i.Au.set(s,new FO(n)),i.du=i.du.insert(n,s),CT(i.remoteStore,new ao(Ts(Ym(n.path)),s,"TargetPurposeLimboResolution",Nh.ce))}}async function Oc(i,e,n){const s=st(i),o=[],u=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((y,_)=>{d.push(s.pu(_,e,n).then((E=>{if((E||n)&&s.isPrimaryClient){const R=E?!E.fromCache:n?.targetChanges.get(_.targetId)?.current;s.sharedClientState.updateQueryState(_.targetId,R?"current":"not-current")}if(E){o.push(E);const R=eg.As(_.targetId,E);u.push(R)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(_,E){const R=st(_);try{await R.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>ve.forEach(E,(M=>ve.forEach(M.Es,(X=>R.persistence.referenceDelegate.addReference(x,M.targetId,X))).next((()=>ve.forEach(M.ds,(X=>R.persistence.referenceDelegate.removeReference(x,M.targetId,X)))))))))}catch(x){if(!ou(x))throw x;Ue(tg,"Failed to update sequence numbers: "+x)}for(const x of E){const M=x.targetId;if(!x.fromCache){const X=R.Ms.get(M),re=X.snapshotVersion,pe=X.withLastLimboFreeSnapshotVersion(re);R.Ms=R.Ms.insert(M,pe)}}})(s.localStore,u))}async function rD(i,e){const n=st(i);if(!n.currentUser.isEqual(e)){Ue(ug,"User change. New user:",e.toKey());const s=await TT(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((y=>{y.forEach((_=>{_.reject(new He(be.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Oc(n,s.Ls)}}function iD(i,e){const n=st(i),s=n.Au.get(e);if(s&&s.hu)return wt().add(s.key);{let o=wt();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const y=n.Tu.get(d);o=o.unionWith(y.view.nu)}return o}}function jT(i){const e=st(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=VT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZO.bind(null,e),e.Pu.H_=zO.bind(null,e.eventManager),e.Pu.yu=BO.bind(null,e.eventManager),e}function sD(i){const e=st(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tD.bind(null,e),e}class Sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return aO(this.persistence,new rO,e.initialUser,this.serializer)}Cu(e){return new ET(Zm.mi,this.serializer)}Du(e){return new dO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sh.provider={build:()=>new Sh};class aD extends Sh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Vt(this.persistence.referenceDelegate instanceof Th,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new qx(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Kr.withCacheSize(this.cacheSizeBytes):Kr.DEFAULT;return new ET((s=>Th.mi(s,n)),this.serializer)}}class Em{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>fb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=rD.bind(null,this.syncEngine),await VO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new LO})()}createDatastore(e){const n=Bh(e.databaseInfo.databaseId),s=(function(u){return new vO(u)})(e.databaseInfo);return(function(u,d,y,_){return new TO(u,d,y,_)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,d,y){return new SO(s,o,u,d,y)})(this.localStore,this.datastore,e.asyncQueue,(n=>fb(this.syncEngine,n,0)),(function(){return sb.v()?new sb:new pO})())}createSyncEngine(e,n){return(function(o,u,d,y,_,E,R){const x=new GO(o,u,d,y,_,E);return R&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=st(n);Ue(tl,"RemoteStore shutting down."),s.Ea.add(5),await xc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Em.provider={build:()=>new Em};class oD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ha("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const _o="FirestoreClient";class lD{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=dr.UNAUTHENTICATED,this.clientId=zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async d=>{Ue(_o,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(Ue(_o,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ho;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=og(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Qp(i,e){i.asyncQueue.verifyOperationInProgress(),Ue(_o,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await TT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function db(i,e){i.asyncQueue.verifyOperationInProgress();const n=await uD(i);Ue(_o,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>ob(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>ob(e.remoteStore,o))),i._onlineComponents=e}async function uD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ue(_o,"Using user provided OfflineComponentProvider");try{await Qp(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===be.FAILED_PRECONDITION||o.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;$l("Error using user provided cache. Falling back to memory cache: "+n),await Qp(i,new Sh)}}else Ue(_o,"Using default OfflineComponentProvider"),await Qp(i,new aD(void 0));return i._offlineComponents}async function zT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ue(_o,"Using user provided OnlineComponentProvider"),await db(i,i._uninitializedComponentsProvider._online)):(Ue(_o,"Using default OnlineComponentProvider"),await db(i,new Em))),i._onlineComponents}function cD(i){return zT(i).then((e=>e.syncEngine))}async function fD(i){const e=await zT(i),n=e.eventManager;return n.onListen=YO.bind(null,e.syncEngine),n.onUnlisten=$O.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=QO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=JO.bind(null,e.syncEngine),n}function hD(i,e,n={}){const s=new ho;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,y,_,E){const R=new oD({next:M=>{R.Nu(),d.enqueueAndForget((()=>jO(u,x)));const X=M.docs.has(y);!X&&M.fromCache?E.reject(new He(be.UNAVAILABLE,"Failed to get document because the client is offline.")):X&&M.fromCache&&_&&_.source==="server"?E.reject(new He(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(M)},error:M=>E.reject(M)}),x=new qO(Ym(y.path),R,{includeMetadataChanges:!0,qa:!0});return UO(u,x)})(await fD(i),i.asyncQueue,e,n,s))),s.promise}function BT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const pb=new Map;const qT="firestore.googleapis.com",mb=!0;class gb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new He(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qT,this.ssl=mb}else this.host=e.host,this.ssl=e.ssl??mb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zx)throw new He(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}w2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new He(be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new He(be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new He(be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fg{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new He(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new h2;switch(s.type){case"firstParty":return new g2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new He(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=pb.get(n);s&&(Ue("ComponentProvider","Removing Datastore"),pb.delete(n),s.terminate())})(this),Promise.resolve()}}function dD(i,e,n,s={}){i=fc(i,fg);const o=nu(e),u=i._getSettings(),d={...u,emulatorOptions:i._getEmulatorOptions()},y=`${e}:${n}`;o&&(qb(`https://${y}`),Hb("Firestore",!0)),u.host!==qT&&u.host!==y&&$l("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...u,host:y,ssl:o,emulatorOptions:s};if(!Jo(_,d)&&(i._setSettings(_),s.mockUserToken)){let E,R;if(typeof s.mockUserToken=="string")E=s.mockUserToken,R=dr.MOCK_USER;else{E=LA(s.mockUserToken,i._app?.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new He(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new dr(x)}i._authCredentials=new d2(new ME(E,R))}}class hg{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new hg(this.firestore,e,this._query)}}class Xn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xn(this.firestore,e,this._key)}toJSON(){return{type:Xn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Cc(n,Xn._jsonSchema))return new Xn(e,s||null,new Ye(cn.fromString(n.referencePath)))}}Xn._jsonSchemaVersion="firestore/documentReference/1.0",Xn._jsonSchema={type:Vn("string",Xn._jsonSchemaVersion),referencePath:Vn("string")};class vc extends hg{constructor(e,n,s){super(e,n,Ym(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xn(this.firestore,null,new Ye(e))}withConverter(e){return new vc(this.firestore,e,this._path)}}function HT(i,e,...n){if(i=ji(i),arguments.length===1&&(e=zm.newId()),T2("doc","path",e),i instanceof fg){const s=cn.fromString(e,...n);return O0(s),new Xn(i,null,new Ye(s))}{if(!(i instanceof Xn||i instanceof vc))throw new He(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(cn.fromString(e,...n));return O0(s),new Xn(i.firestore,i instanceof vc?i.converter:null,new Ye(s))}}const yb="AsyncQueue";class vb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ST(this,"async_queue_retry"),this._c=()=>{const s=Yp();s&&Ue(yb,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Yp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Yp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ho;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ou(e))throw e;Ue(yb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ha("INTERNAL UNHANDLED ERROR: ",_b(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=ag.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&$e(47125,{Pc:_b(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function _b(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class dg extends fg{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new vb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vb(e),this._firestoreClient=void 0,await e}}}function pD(i,e){const n=typeof i=="object"?i:Yb(),s=typeof i=="string"?i:mh,o=Im(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=VA("firestore");u&&dD(o,...u)}return o}function KT(i){if(i._terminated)throw new He(be.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||mD(i),i._firestoreClient}function mD(i){const e=i._freezeSettings(),n=(function(o,u,d,y){return new k2(o,u,d,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,BT(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new lD(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class Ui{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ui(sr.fromBase64String(e))}catch(n){throw new He(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ui(sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ui._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cc(e,Ui._jsonSchema))return Ui.fromBase64String(e.bytes)}}Ui._jsonSchemaVersion="firestore/bytes/1.0",Ui._jsonSchema={type:Vn("string",Ui._jsonSchemaVersion),bytes:Vn("string")};class pg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new He(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class FT{constructor(e){this._methodName=e}}class Ss{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new He(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new He(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ss._jsonSchemaVersion}}static fromJSON(e){if(Cc(e,Ss._jsonSchema))return new Ss(e.latitude,e.longitude)}}Ss._jsonSchemaVersion="firestore/geoPoint/1.0",Ss._jsonSchema={type:Vn("string",Ss._jsonSchemaVersion),latitude:Vn("number"),longitude:Vn("number")};class As{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:As._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cc(e,As._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new As(e.vectorValues);throw new He(be.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}As._jsonSchemaVersion="firestore/vectorValue/1.0",As._jsonSchema={type:Vn("string",As._jsonSchemaVersion),vectorValues:Vn("object")};const gD=/^__.*__$/;class yD{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new sl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rc(e,this.data,n,this.fieldTransforms)}}function GT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e(40011,{Ac:i})}}class mg{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new mg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ah(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(GT(this.Ac)&&gD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Bh(e)}Cc(e,n,s,o=!1){return new mg({Ac:e,methodName:n,Dc:s,path:ir.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _D(i){const e=i._freezeSettings(),n=Bh(i._databaseId);return new vD(i._databaseId,!!e.ignoreUndefinedProperties,n)}function bD(i,e,n,s,o,u={}){const d=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);$T("Data must be an object, but it was:",d,s);const y=QT(s,d);let _,E;if(u.merge)_=new es(d.fieldMask),E=d.fieldTransforms;else if(u.mergeFields){const R=[];for(const x of u.mergeFields){const M=ED(e,x,n);if(!d.contains(M))throw new He(be.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);wD(R,M)||R.push(M)}_=new es(R),E=d.fieldTransforms.filter((x=>_.covers(x.field)))}else _=null,E=d.fieldTransforms;return new yD(new Li(y),_,E)}function YT(i,e){if(XT(i=ji(i)))return $T("Unsupported field value:",e,i),QT(i,e);if(i instanceof FT)return(function(s,o){if(!GT(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let d=0;for(const y of s){let _=YT(y,o.wc(d));_==null&&(_={nullValue:"NULL_VALUE"}),u.push(_),d++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=ji(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return ix(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Jt.fromDate(s);return{timestampValue:Eh(o.serializer,u)}}if(s instanceof Jt){const u=new Jt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Eh(o.serializer,u)}}if(s instanceof Ss)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ui)return{bytesValue:dT(o.serializer,s._byteString)};if(s instanceof Xn){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Jm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof As)return(function(d,y){return{mapValue:{fields:{[qE]:{stringValue:HE},[gh]:{arrayValue:{values:d.toArray().map((E=>{if(typeof E!="number")throw y.Sc("VectorValues must only contain numeric values.");return Qm(y.serializer,E)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Bm(s)}`)})(i,e)}function QT(i,e){const n={};return PE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rl(i,((s,o)=>{const u=YT(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function XT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Jt||i instanceof Ss||i instanceof Ui||i instanceof Xn||i instanceof FT||i instanceof As)}function $T(i,e,n){if(!XT(n)||!kE(n)){const s=Bm(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function ED(i,e,n){if((e=ji(e))instanceof pg)return e._internalPath;if(typeof e=="string")return JT(i,e);throw Ah("Field path arguments must be of type string or ",i,!1,void 0,n)}const TD=new RegExp("[~\\*/\\[\\]]");function JT(i,e,n){if(e.search(TD)>=0)throw Ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new pg(...e.split("."))._internalPath}catch{throw Ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Ah(i,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let y=`Function ${e}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let _="";return(u||d)&&(_+=" (found",u&&(_+=` in field ${s}`),d&&(_+=` in document ${o}`),_+=")"),new He(be.INVALID_ARGUMENT,y+i+_)}function wD(i,e){return i.some((n=>n.isEqual(e)))}class WT{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ZT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SD extends WT{data(){return super.data()}}function ZT(i,e){return typeof e=="string"?JT(i,e):e instanceof pg?e._internalPath:e._delegate._internalPath}class AD{convertValue(e,n="none"){switch(yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return An(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(go(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return rl(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[gh].arrayValue?.values?.map((s=>An(s.doubleValue)));return new As(n)}convertGeoPoint(e){return new Ss(An(e.latitude),An(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=kh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(dc(e));default:return null}}convertTimestamp(e){const n=mo(e);return new Jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=cn.fromString(e);Vt(_T(s),9688,{name:e});const o=new pc(s.get(1),s.get(3)),u=new Ye(s.popFirst(5));return o.isEqual(n)||ha(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function CD(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class Ju{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xo extends WT{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(ZT("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new He(be.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Xo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xo._jsonSchema={type:Vn("string",Xo._jsonSchemaVersion),bundleSource:Vn("string","DocumentSnapshot"),bundleName:Vn("string"),bundle:Vn("string")};class rh extends Xo{data(e={}){return super.data(e)}}class sc{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ju(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new rh(this._firestore,this._userDataWriter,s.key,s,new Ju(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new He(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((y=>{const _=new rh(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Ju(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);return y.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((y=>u||y.type!==3)).map((y=>{const _=new rh(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Ju(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);let E=-1,R=-1;return y.type!==0&&(E=d.indexOf(y.doc.key),d=d.delete(y.doc.key)),y.type!==1&&(d=d.add(y.doc),R=d.indexOf(y.doc.key)),{type:RD(y.type),doc:_,oldIndex:E,newIndex:R}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new He(be.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=sc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e(61501,{type:i})}}function ID(i){i=fc(i,Xn);const e=fc(i.firestore,dg);return hD(KT(e),i._key).then((n=>ND(e,i,n)))}sc._jsonSchemaVersion="firestore/querySnapshot/1.0",sc._jsonSchema={type:Vn("string",sc._jsonSchemaVersion),bundleSource:Vn("string","QuerySnapshot"),bundleName:Vn("string"),bundle:Vn("string")};class xD extends AD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ui(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,n)}}function OD(i,e,n){i=fc(i,Xn);const s=fc(i.firestore,dg),o=CD(i.converter,e);return DD(s,[bD(_D(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,la.none())])}function DD(i,e){return(function(s,o){const u=new ho;return s.asyncQueue.enqueueAndForget((async()=>WO(await cD(s),o,u))),u.promise})(KT(i),e)}function ND(i,e,n){const s=n.docs.get(e._key),o=new xD(i);return new Xo(i,o,e._key,s,new Ju(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){su=o})(ru),Ql(new Wo("firestore",((s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),y=new dg(new p2(s.getProvider("auth-internal")),new y2(d,s.getProvider("app-check-internal")),(function(E,R){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new He(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pc(E.options.projectId,R)})(d,o),d);return u={useFetchStreams:n,...u},y._setSettings(u),y}),"PUBLIC").setMultipleInstances(!0)),co(C0,R0,e),co(C0,R0,"esm2020")})();const MD={apiKey:"AIzaSyCGabs1zTYUI0-yPRp2RD7_Zk4HLsd3kSc",authDomain:"gemini-podcast-cards.firebaseapp.com",projectId:"gemini-podcast-cards",storageBucket:"gemini-podcast-cards.firebasestorage.app",messagingSenderId:"535172285628",appId:"1:535172285628:web:1fa37b46cf2bdf89257cb9"},e1=Gb(MD),Kf=c2(e1),kD=new sa,t1=pD(e1),n1="users";async function VD(i,e){if(!i)throw new Error("User ID is required");try{const n=JSON.stringify(e),s=HT(t1,n1,i);await OD(s,{vocab_data:n,last_synced:Date.now()}),console.log(`Successfully synced ${e.length} cards for user ${i}`)}catch(n){throw console.error("Sync upload failed:",n),n}}async function PD(i){if(!i)throw new Error("User ID is required");try{const e=HT(t1,n1,i),n=await ID(e);if(n.exists()){const s=n.data();if(s.vocab_data)return JSON.parse(s.vocab_data)}return null}catch(e){throw console.error("Sync download failed:",e),e}}const bb="zanta0529@gmail.com,amy.webhd@gmail.com".split(",").map(i=>i.trim()).filter(i=>i!==""),LD=({isOpen:i,onClose:e,onConfirm:n,title:s,message:o})=>{const[u,d]=Se.useState(3);return Se.useEffect(()=>{if(i){d(3);const y=setInterval(()=>{d(_=>_<=1?(clearInterval(y),0):_-1)},1e3);return()=>clearInterval(y)}},[i]),i?H.jsx("div",{style:Eb.overlay,children:H.jsxs("div",{style:Eb.content,children:[H.jsxs("h3",{style:{marginTop:0,color:"#ff6b6b"},children:[" ",s]}),H.jsx("p",{style:{color:"#ccc",lineHeight:"1.5"},children:o}),H.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[H.jsx("button",{onClick:e,style:{...ac,backgroundColor:"#666"},children:"Cancel"}),H.jsx("button",{onClick:()=>{n(),e()},disabled:u>0,style:{...ac,backgroundColor:u>0?"#CCC":"#e03131",cursor:u>0?"not-allowed":"pointer",opacity:u>0?.7:1},children:u>0?`Wait (${u})...`:"Execute!"})]})]})}):null};function UD(){const[i,e]=Se.useState([]),[n,s]=Se.useState(!0),[o,u]=Se.useState(0),[d,y]=Se.useState(null),[_,E]=Se.useState(!1),[R,x]=Se.useState(!1),[M,X]=Se.useState(!1),[re,pe]=Se.useState(!1),[Ee,ke]=Se.useState(!1),[Be,Ve]=Se.useState(!1),[rt,xt]=Se.useState(!1),[Ge,k]=Se.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),D=(le,_e,je)=>{k({isOpen:!0,title:le,message:_e,onConfirm:je})};Se.useEffect(()=>{const le=ZR(Kf,async _e=>{_e?bb.length===0||bb.includes(_e.email)?(y(_e),vt.success(`Welcome, ${_e.displayName}`)):(console.warn(`Unauthorized: ${_e.email}`),vt.error(`Access denied for ${_e.email}`),await m0(Kf),y(null)):y(null)});return()=>le()},[]);const V=async()=>{try{s(!0),await Vw();const le=await nr.vocab.toArray(),_e=Date.now(),je=le.filter(at=>at.nextReview<=_e||at.status==="new");e(je)}catch(le){console.error("Failed to load cards:",le),vt.error("Load failed: "+le.message)}finally{s(!1)}};Se.useEffect(()=>{V()},[]);const G=async le=>{try{await nr.vocab.put(le),u(_e=>_e+1)}catch(_e){console.error("Update failed:",_e),vt.error("Update failed")}},z=async()=>{try{await _I(Kf,kD),Ve(!1)}catch(le){console.error("Login failed:",le),vt.error("Login failed")}},Z=async()=>{await m0(Kf),window.location.reload()},P=async()=>{if(!d)return;E(!0),Ve(!1);const le=vt.loading("Backing up...");try{const _e=await nr.vocab.toArray();await VD(d.uid,_e),vt.success("Backup complete!",{id:le})}catch(_e){console.error(_e),vt.error("Backup failed",{id:le})}finally{E(!1)}},Bt=async()=>{d&&D("Overwrite Warning","Are you sure you want to overwrite local data with cloud backup? This action cannot be undone.",async()=>{E(!0),Ve(!1);const le=vt.loading("Restoring...");try{const _e=await PD(d.uid);_e?(await nr.vocab.clear(),await nr.vocab.bulkAdd(_e),vt.success("Restore complete! Reloading...",{id:le}),setTimeout(()=>window.location.reload(),1500)):vt("No backup found.",{id:le,icon:""})}catch(_e){console.error(_e),vt.error("Restore failed",{id:le})}finally{E(!1)}})};if(n)return H.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1b1e",color:"#fff"},children:"Loading..."});const Ft=i[o];return H.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",padding:"1rem",minHeight:"100vh",backgroundColor:"#1a1b1e",color:"#ffffff",fontFamily:"sans-serif",display:"flex",flexDirection:"column",gap:"0.5rem",alignItems:"center",position:"relative"},children:[H.jsx(EA,{position:"top-center",toastOptions:{style:{background:"#333",color:"#fff"}}}),H.jsx(LD,{isOpen:Ge.isOpen,onClose:()=>k(le=>({...le,isOpen:!1})),onConfirm:Ge.onConfirm,title:Ge.title,message:Ge.message}),H.jsxs("nav",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",padding:"0.5rem",borderBottom:"1px solid #333",position:"relative"},children:[H.jsxs("div",{style:{fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px"},children:["GPF",H.jsx("button",{onClick:()=>X(!0),style:jD,title:"Settings",children:""})]}),H.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[H.jsx("button",{onClick:()=>pe(!0),style:{...ac,backgroundColor:"#2196f3"},children:"+ Add"}),H.jsx("button",{onClick:()=>x(!0),style:{...ac,backgroundColor:"#e91e63"},children:"Import"}),H.jsx("button",{onClick:()=>Ve(!Be),style:{...ac,backgroundColor:"#333",padding:"0.5rem 0.8rem",fontSize:"1.1rem"},children:""}),Be&&H.jsxs(H.Fragment,{children:[H.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99},onClick:()=>Ve(!1)}),H.jsxs("div",{style:ys.container,children:[H.jsx("button",{onClick:()=>{ke(!0),Ve(!1)},style:ys.item,children:" Manage Cards"}),H.jsx("button",{onClick:()=>{xt(!0),Ve(!1)},style:ys.item,children:" AI Smart Review"}),H.jsx("div",{style:ys.divider}),d?H.jsxs(H.Fragment,{children:[H.jsx("button",{onClick:P,disabled:_,style:ys.item,children:" Backup Data"}),H.jsx("button",{onClick:Bt,disabled:_,style:ys.item,children:" Restore Data"}),H.jsx("div",{style:ys.divider}),H.jsx("div",{style:ys.userEmail,children:d.email}),H.jsx("button",{onClick:Z,style:{...ys.item,color:"#ff6b6b"},children:"Logout"})]}):H.jsx("button",{onClick:z,style:{...ys.item,color:"#4285F4"},children:"Login with Google"})]})]})]})]}),H.jsxs("header",{style:{marginBottom:"0.5rem",width:"100%",textAlign:"center"},children:[H.jsx("h1",{style:{fontSize:"1.5rem",margin:"0 0 0.3rem 0"},children:"Gemini Flashcards"}),H.jsx("p",{style:{color:"#888",margin:0,fontSize:"0.9rem"},children:i.length>0?`Progress: ${o} / ${i.length}`:"No cards due"})]}),H.jsx("main",{style:{width:"100%",flex:1,display:"flex",flexDirection:"column"},children:Ft?H.jsx(NS,{card:Ft,onUpdate:G},Ft.id):H.jsxs("div",{style:{textAlign:"center",padding:"3rem",border:"1px dashed #555",borderRadius:"8px"},children:[H.jsx("h2",{children:" All caught up!"}),H.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"1rem",padding:"0.5rem 1rem",cursor:"pointer"},children:"Refresh"})]})}),H.jsx(TA,{isOpen:R,onClose:()=>x(!1),onSuccess:V}),H.jsx(wA,{isOpen:M,onClose:()=>X(!1)}),H.jsx(SA,{isOpen:re,onClose:()=>pe(!1),onSuccess:V}),H.jsx(AA,{isOpen:Ee,onClose:()=>{ke(!1),V()}}),H.jsx(CA,{isOpen:rt,onClose:()=>xt(!1)})]})}const ac={padding:"0.5rem 1rem",fontSize:"0.9rem",borderRadius:"6px",border:"none",cursor:"pointer",color:"white",whiteSpace:"nowrap",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.3rem",transition:"opacity 0.2s"},jD={background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem"},ys={container:{position:"absolute",top:"3.5rem",right:"0.5rem",backgroundColor:"#25262b",border:"1px solid #444",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.5)",zIndex:100,display:"flex",flexDirection:"column",minWidth:"180px",padding:"0.5rem"},item:{background:"none",border:"none",color:"#e0e0e0",padding:"0.8rem 1rem",textAlign:"left",cursor:"pointer",borderRadius:"4px",fontSize:"0.95rem",transition:"background 0.2s"},divider:{height:"1px",backgroundColor:"#444",margin:"0.5rem 0"},userEmail:{padding:"0.5rem 1rem",fontSize:"0.75rem",color:"#888",borderBottom:"1px solid #333",marginBottom:"0.5rem"}},Eb={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},content:{backgroundColor:"#25262b",padding:"2rem",borderRadius:"12px",maxWidth:"400px",width:"90%",border:"1px solid #444",boxShadow:"0 8px 30px rgba(0,0,0,0.5)"}};Dw.createRoot(document.getElementById("root")).render(H.jsx(ww.StrictMode,{children:H.jsx(UD,{})}));
