(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var oA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Tm={exports:{}},qu={};var u_;function lA(){if(u_)return qu;u_=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var y in o)y!=="key"&&(u[y]=o[y])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:u}}return qu.Fragment=t,qu.jsx=n,qu.jsxs=n,qu}var c_;function uA(){return c_||(c_=1,Tm.exports=lA()),Tm.exports}var Et=uA(),Sm={exports:{}},re={};var f_;function cA(){if(f_)return re;f_=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),k=Symbol.iterator;function J(F){return F===null||typeof F!="object"?null:(F=k&&F[k]||F["@@iterator"],typeof F=="function"?F:null)}var dt={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yt=Object.assign,vt={};function qt(F,ht,Rt){this.props=F,this.context=ht,this.refs=vt,this.updater=Rt||dt}qt.prototype.isReactComponent={},qt.prototype.setState=function(F,ht){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ht,"setState")},qt.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function Kt(){}Kt.prototype=qt.prototype;function Ut(F,ht,Rt){this.props=F,this.context=ht,this.refs=vt,this.updater=Rt||dt}var ue=Ut.prototype=new Kt;ue.constructor=Ut,yt(ue,qt.prototype),ue.isPureReactComponent=!0;var xe=Array.isArray;function Zt(){}var M={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function P(F,ht,Rt){var Vt=Rt.ref;return{$$typeof:i,type:F,key:ht,ref:Vt!==void 0?Vt:null,props:Rt}}function Y(F,ht){return P(F.type,ht,F.props)}function q(F){return typeof F=="object"&&F!==null&&F.$$typeof===i}function W(F){var ht={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(Rt){return ht[Rt]})}var V=/\/+/g;function Ke(F,ht){return typeof F=="object"&&F!==null&&F.key!=null?W(""+F.key):ht.toString(36)}function tn(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(Zt,Zt):(F.status="pending",F.then(function(ht){F.status==="pending"&&(F.status="fulfilled",F.value=ht)},function(ht){F.status==="pending"&&(F.status="rejected",F.reason=ht)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function ut(F,ht,Rt,Vt,Yt){var $t=typeof F;($t==="undefined"||$t==="boolean")&&(F=null);var de=!1;if(F===null)de=!0;else switch($t){case"bigint":case"string":case"number":de=!0;break;case"object":switch(F.$$typeof){case i:case t:de=!0;break;case R:return de=F._init,ut(de(F._payload),ht,Rt,Vt,Yt)}}if(de)return Yt=Yt(F),de=Vt===""?"."+Ke(F,0):Vt,xe(Yt)?(Rt="",de!=null&&(Rt=de.replace(V,"$&/")+"/"),ut(Yt,ht,Rt,"",function(ts){return ts})):Yt!=null&&(q(Yt)&&(Yt=Y(Yt,Rt+(Yt.key==null||F&&F.key===Yt.key?"":(""+Yt.key).replace(V,"$&/")+"/")+de)),ht.push(Yt)),1;de=0;var pn=Vt===""?".":Vt+":";if(xe(F))for(var Nt=0;Nt<F.length;Nt++)Vt=F[Nt],$t=pn+Ke(Vt,Nt),de+=ut(Vt,ht,Rt,$t,Yt);else if(Nt=J(F),typeof Nt=="function")for(F=Nt.call(F),Nt=0;!(Vt=F.next()).done;)Vt=Vt.value,$t=pn+Ke(Vt,Nt++),de+=ut(Vt,ht,Rt,$t,Yt);else if($t==="object"){if(typeof F.then=="function")return ut(tn(F),ht,Rt,Vt,Yt);throw ht=String(F),Error("Objects are not valid as a React child (found: "+(ht==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ht)+"). If you meant to render a collection of children, use an array instead.")}return de}function xt(F,ht,Rt){if(F==null)return F;var Vt=[],Yt=0;return ut(F,Vt,"","",function($t){return ht.call(Rt,$t,Yt++)}),Vt}function Lt(F){if(F._status===-1){var ht=F._result;ht=ht(),ht.then(function(Rt){(F._status===0||F._status===-1)&&(F._status=1,F._result=Rt)},function(Rt){(F._status===0||F._status===-1)&&(F._status=2,F._result=Rt)}),F._status===-1&&(F._status=0,F._result=ht)}if(F._status===1)return F._result.default;throw F._result}var ce=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ht=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(ht))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},fe={map:xt,forEach:function(F,ht,Rt){xt(F,function(){ht.apply(this,arguments)},Rt)},count:function(F){var ht=0;return xt(F,function(){ht++}),ht},toArray:function(F){return xt(F,function(ht){return ht})||[]},only:function(F){if(!q(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return re.Activity=O,re.Children=fe,re.Component=qt,re.Fragment=n,re.Profiler=o,re.PureComponent=Ut,re.StrictMode=s,re.Suspense=_,re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,re.__COMPILER_RUNTIME={__proto__:null,c:function(F){return M.H.useMemoCache(F)}},re.cache=function(F){return function(){return F.apply(null,arguments)}},re.cacheSignal=function(){return null},re.cloneElement=function(F,ht,Rt){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var Vt=yt({},F.props),Yt=F.key;if(ht!=null)for($t in ht.key!==void 0&&(Yt=""+ht.key),ht)!N.call(ht,$t)||$t==="key"||$t==="__self"||$t==="__source"||$t==="ref"&&ht.ref===void 0||(Vt[$t]=ht[$t]);var $t=arguments.length-2;if($t===1)Vt.children=Rt;else if(1<$t){for(var de=Array($t),pn=0;pn<$t;pn++)de[pn]=arguments[pn+2];Vt.children=de}return P(F.type,Yt,Vt)},re.createContext=function(F){return F={$$typeof:d,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:u,_context:F},F},re.createElement=function(F,ht,Rt){var Vt,Yt={},$t=null;if(ht!=null)for(Vt in ht.key!==void 0&&($t=""+ht.key),ht)N.call(ht,Vt)&&Vt!=="key"&&Vt!=="__self"&&Vt!=="__source"&&(Yt[Vt]=ht[Vt]);var de=arguments.length-2;if(de===1)Yt.children=Rt;else if(1<de){for(var pn=Array(de),Nt=0;Nt<de;Nt++)pn[Nt]=arguments[Nt+2];Yt.children=pn}if(F&&F.defaultProps)for(Vt in de=F.defaultProps,de)Yt[Vt]===void 0&&(Yt[Vt]=de[Vt]);return P(F,$t,Yt)},re.createRef=function(){return{current:null}},re.forwardRef=function(F){return{$$typeof:y,render:F}},re.isValidElement=q,re.lazy=function(F){return{$$typeof:R,_payload:{_status:-1,_result:F},_init:Lt}},re.memo=function(F,ht){return{$$typeof:b,type:F,compare:ht===void 0?null:ht}},re.startTransition=function(F){var ht=M.T,Rt={};M.T=Rt;try{var Vt=F(),Yt=M.S;Yt!==null&&Yt(Rt,Vt),typeof Vt=="object"&&Vt!==null&&typeof Vt.then=="function"&&Vt.then(Zt,ce)}catch($t){ce($t)}finally{ht!==null&&Rt.types!==null&&(ht.types=Rt.types),M.T=ht}},re.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},re.use=function(F){return M.H.use(F)},re.useActionState=function(F,ht,Rt){return M.H.useActionState(F,ht,Rt)},re.useCallback=function(F,ht){return M.H.useCallback(F,ht)},re.useContext=function(F){return M.H.useContext(F)},re.useDebugValue=function(){},re.useDeferredValue=function(F,ht){return M.H.useDeferredValue(F,ht)},re.useEffect=function(F,ht){return M.H.useEffect(F,ht)},re.useEffectEvent=function(F){return M.H.useEffectEvent(F)},re.useId=function(){return M.H.useId()},re.useImperativeHandle=function(F,ht,Rt){return M.H.useImperativeHandle(F,ht,Rt)},re.useInsertionEffect=function(F,ht){return M.H.useInsertionEffect(F,ht)},re.useLayoutEffect=function(F,ht){return M.H.useLayoutEffect(F,ht)},re.useMemo=function(F,ht){return M.H.useMemo(F,ht)},re.useOptimistic=function(F,ht){return M.H.useOptimistic(F,ht)},re.useReducer=function(F,ht,Rt){return M.H.useReducer(F,ht,Rt)},re.useRef=function(F){return M.H.useRef(F)},re.useState=function(F){return M.H.useState(F)},re.useSyncExternalStore=function(F,ht,Rt){return M.H.useSyncExternalStore(F,ht,Rt)},re.useTransition=function(){return M.H.useTransition()},re.version="19.2.0",re}var h_;function mp(){return h_||(h_=1,Sm.exports=cA()),Sm.exports}var jt=mp();const fA=dp(jt);var Am={exports:{}},Hu={},wm={exports:{}},Cm={};var d_;function hA(){return d_||(d_=1,(function(i){function t(ut,xt){var Lt=ut.length;ut.push(xt);t:for(;0<Lt;){var ce=Lt-1>>>1,fe=ut[ce];if(0<o(fe,xt))ut[ce]=xt,ut[Lt]=fe,Lt=ce;else break t}}function n(ut){return ut.length===0?null:ut[0]}function s(ut){if(ut.length===0)return null;var xt=ut[0],Lt=ut.pop();if(Lt!==xt){ut[0]=Lt;t:for(var ce=0,fe=ut.length,F=fe>>>1;ce<F;){var ht=2*(ce+1)-1,Rt=ut[ht],Vt=ht+1,Yt=ut[Vt];if(0>o(Rt,Lt))Vt<fe&&0>o(Yt,Rt)?(ut[ce]=Yt,ut[Vt]=Lt,ce=Vt):(ut[ce]=Rt,ut[ht]=Lt,ce=ht);else if(Vt<fe&&0>o(Yt,Lt))ut[ce]=Yt,ut[Vt]=Lt,ce=Vt;else break t}}return xt}function o(ut,xt){var Lt=ut.sortIndex-xt.sortIndex;return Lt!==0?Lt:ut.id-xt.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,y=d.now();i.unstable_now=function(){return d.now()-y}}var _=[],b=[],R=1,O=null,k=3,J=!1,dt=!1,yt=!1,vt=!1,qt=typeof setTimeout=="function"?setTimeout:null,Kt=typeof clearTimeout=="function"?clearTimeout:null,Ut=typeof setImmediate<"u"?setImmediate:null;function ue(ut){for(var xt=n(b);xt!==null;){if(xt.callback===null)s(b);else if(xt.startTime<=ut)s(b),xt.sortIndex=xt.expirationTime,t(_,xt);else break;xt=n(b)}}function xe(ut){if(yt=!1,ue(ut),!dt)if(n(_)!==null)dt=!0,Zt||(Zt=!0,W());else{var xt=n(b);xt!==null&&tn(xe,xt.startTime-ut)}}var Zt=!1,M=-1,N=5,P=-1;function Y(){return vt?!0:!(i.unstable_now()-P<N)}function q(){if(vt=!1,Zt){var ut=i.unstable_now();P=ut;var xt=!0;try{t:{dt=!1,yt&&(yt=!1,Kt(M),M=-1),J=!0;var Lt=k;try{e:{for(ue(ut),O=n(_);O!==null&&!(O.expirationTime>ut&&Y());){var ce=O.callback;if(typeof ce=="function"){O.callback=null,k=O.priorityLevel;var fe=ce(O.expirationTime<=ut);if(ut=i.unstable_now(),typeof fe=="function"){O.callback=fe,ue(ut),xt=!0;break e}O===n(_)&&s(_),ue(ut)}else s(_);O=n(_)}if(O!==null)xt=!0;else{var F=n(b);F!==null&&tn(xe,F.startTime-ut),xt=!1}}break t}finally{O=null,k=Lt,J=!1}xt=void 0}}finally{xt?W():Zt=!1}}}var W;if(typeof Ut=="function")W=function(){Ut(q)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Ke=V.port2;V.port1.onmessage=q,W=function(){Ke.postMessage(null)}}else W=function(){qt(q,0)};function tn(ut,xt){M=qt(function(){ut(i.unstable_now())},xt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ut){ut.callback=null},i.unstable_forceFrameRate=function(ut){0>ut||125<ut?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ut?Math.floor(1e3/ut):5},i.unstable_getCurrentPriorityLevel=function(){return k},i.unstable_next=function(ut){switch(k){case 1:case 2:case 3:var xt=3;break;default:xt=k}var Lt=k;k=xt;try{return ut()}finally{k=Lt}},i.unstable_requestPaint=function(){vt=!0},i.unstable_runWithPriority=function(ut,xt){switch(ut){case 1:case 2:case 3:case 4:case 5:break;default:ut=3}var Lt=k;k=ut;try{return xt()}finally{k=Lt}},i.unstable_scheduleCallback=function(ut,xt,Lt){var ce=i.unstable_now();switch(typeof Lt=="object"&&Lt!==null?(Lt=Lt.delay,Lt=typeof Lt=="number"&&0<Lt?ce+Lt:ce):Lt=ce,ut){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=Lt+fe,ut={id:R++,callback:xt,priorityLevel:ut,startTime:Lt,expirationTime:fe,sortIndex:-1},Lt>ce?(ut.sortIndex=Lt,t(b,ut),n(_)===null&&ut===n(b)&&(yt?(Kt(M),M=-1):yt=!0,tn(xe,Lt-ce))):(ut.sortIndex=fe,t(_,ut),dt||J||(dt=!0,Zt||(Zt=!0,W()))),ut},i.unstable_shouldYield=Y,i.unstable_wrapCallback=function(ut){var xt=k;return function(){var Lt=k;k=xt;try{return ut.apply(this,arguments)}finally{k=Lt}}}})(Cm)),Cm}var m_;function dA(){return m_||(m_=1,wm.exports=hA()),wm.exports}var Rm={exports:{}},ur={};var p_;function mA(){if(p_)return ur;p_=1;var i=mp();function t(_){var b="https://react.dev/errors/"+_;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)b+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+_+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(_,b,R){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:O==null?null:""+O,children:_,containerInfo:b,implementation:R}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(_,b){if(_==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return ur.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ur.createPortal=function(_,b){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(t(299));return u(_,b,null,R)},ur.flushSync=function(_){var b=d.T,R=s.p;try{if(d.T=null,s.p=2,_)return _()}finally{d.T=b,s.p=R,s.d.f()}},ur.preconnect=function(_,b){typeof _=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,s.d.C(_,b))},ur.prefetchDNS=function(_){typeof _=="string"&&s.d.D(_)},ur.preinit=function(_,b){if(typeof _=="string"&&b&&typeof b.as=="string"){var R=b.as,O=y(R,b.crossOrigin),k=typeof b.integrity=="string"?b.integrity:void 0,J=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;R==="style"?s.d.S(_,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:O,integrity:k,fetchPriority:J}):R==="script"&&s.d.X(_,{crossOrigin:O,integrity:k,fetchPriority:J,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},ur.preinitModule=function(_,b){if(typeof _=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var R=y(b.as,b.crossOrigin);s.d.M(_,{crossOrigin:R,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&s.d.M(_)},ur.preload=function(_,b){if(typeof _=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var R=b.as,O=y(R,b.crossOrigin);s.d.L(_,R,{crossOrigin:O,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},ur.preloadModule=function(_,b){if(typeof _=="string")if(b){var R=y(b.as,b.crossOrigin);s.d.m(_,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:R,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else s.d.m(_)},ur.requestFormReset=function(_){s.d.r(_)},ur.unstable_batchedUpdates=function(_,b){return _(b)},ur.useFormState=function(_,b,R){return d.H.useFormState(_,b,R)},ur.useFormStatus=function(){return d.H.useHostTransitionStatus()},ur.version="19.2.0",ur}var g_;function pA(){if(g_)return Rm.exports;g_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Rm.exports=mA(),Rm.exports}var y_;function gA(){if(y_)return Hu;y_=1;var i=dA(),t=mp(),n=pA();function s(e){var r="https://react.dev/errors/"+e;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var r=e,a=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(a=r.return),e=r.return;while(e)}return r.tag===3?a:null}function d(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function y(e){if(e.tag===31){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function _(e){if(u(e)!==e)throw Error(s(188))}function b(e){var r=e.alternate;if(!r){if(r=u(e),r===null)throw Error(s(188));return r!==e?null:e}for(var a=e,l=r;;){var h=a.return;if(h===null)break;var p=h.alternate;if(p===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===a)return _(h),e;if(p===l)return _(h),r;p=p.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=p;else{for(var T=!1,C=h.child;C;){if(C===a){T=!0,a=h,l=p;break}if(C===l){T=!0,l=h,a=p;break}C=C.sibling}if(!T){for(C=p.child;C;){if(C===a){T=!0,a=p,l=h;break}if(C===l){T=!0,l=p,a=h;break}C=C.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:r}function R(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e;for(e=e.child;e!==null;){if(r=R(e),r!==null)return r;e=e.sibling}return null}var O=Object.assign,k=Symbol.for("react.element"),J=Symbol.for("react.transitional.element"),dt=Symbol.for("react.portal"),yt=Symbol.for("react.fragment"),vt=Symbol.for("react.strict_mode"),qt=Symbol.for("react.profiler"),Kt=Symbol.for("react.consumer"),Ut=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),xe=Symbol.for("react.suspense"),Zt=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function W(e){return e===null||typeof e!="object"?null:(e=q&&e[q]||e["@@iterator"],typeof e=="function"?e:null)}var V=Symbol.for("react.client.reference");function Ke(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===V?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yt:return"Fragment";case qt:return"Profiler";case vt:return"StrictMode";case xe:return"Suspense";case Zt:return"SuspenseList";case P:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case dt:return"Portal";case Ut:return e.displayName||"Context";case Kt:return(e._context.displayName||"Context")+".Consumer";case ue:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return r=e.displayName||null,r!==null?r:Ke(e.type)||"Memo";case N:r=e._payload,e=e._init;try{return Ke(e(r))}catch{}}return null}var tn=Array.isArray,ut=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Lt={pending:!1,data:null,method:null,action:null},ce=[],fe=-1;function F(e){return{current:e}}function ht(e){0>fe||(e.current=ce[fe],ce[fe]=null,fe--)}function Rt(e,r){fe++,ce[fe]=e.current,e.current=r}var Vt=F(null),Yt=F(null),$t=F(null),de=F(null);function pn(e,r){switch(Rt($t,r),Rt(Yt,e),Rt(Vt,null),r.nodeType){case 9:case 11:e=(e=r.documentElement)&&(e=e.namespaceURI)?xv(e):0;break;default:if(e=r.tagName,r=r.namespaceURI)r=xv(r),e=Mv(r,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ht(Vt),Rt(Vt,e)}function Nt(){ht(Vt),ht(Yt),ht($t)}function ts(e){e.memoizedState!==null&&Rt(de,e);var r=Vt.current,a=Mv(r,e.type);r!==a&&(Rt(Yt,e),Rt(Vt,a))}function Ui(e){Yt.current===e&&(ht(Vt),ht(Yt)),de.current===e&&(ht(de),Lu._currentValue=Lt)}var Se,hi;function di(e){if(Se===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Se=r&&r[1]||"",hi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Se+e+hi}var Fr=!1;function ws(e,r){if(!e||Fr)return"";Fr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(ot){var st=ot}Reflect.construct(e,[],pt)}else{try{pt.call()}catch(ot){st=ot}e.call(pt.prototype)}}else{try{throw Error()}catch(ot){st=ot}(pt=e())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(ot){if(ot&&st&&typeof ot.stack=="string")return[ot.stack,st.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),T=p[0],C=p[1];if(T&&C){var U=T.split(`
`),rt=C.split(`
`);for(h=l=0;l<U.length&&!U[l].includes("DetermineComponentFrameRoot");)l++;for(;h<rt.length&&!rt[h].includes("DetermineComponentFrameRoot");)h++;if(l===U.length||h===rt.length)for(l=U.length-1,h=rt.length-1;1<=l&&0<=h&&U[l]!==rt[h];)h--;for(;1<=l&&0<=h;l--,h--)if(U[l]!==rt[h]){if(l!==1||h!==1)do if(l--,h--,0>h||U[l]!==rt[h]){var ct=`
`+U[l].replace(" at new "," at ");return e.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",e.displayName)),ct}while(1<=l&&0<=h);break}}}finally{Fr=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?di(a):""}function yo(e,r){switch(e.tag){case 26:case 27:case 5:return di(e.type);case 16:return di("Lazy");case 13:return e.child!==r&&r!==null?di("Suspense Fallback"):di("Suspense");case 19:return di("SuspenseList");case 0:case 15:return ws(e.type,!1);case 11:return ws(e.type.render,!1);case 1:return ws(e.type,!0);case 31:return di("Activity");default:return""}}function vo(e){try{var r="",a=null;do r+=yo(e,a),a=e,e=e.return;while(e);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var fn=Object.prototype.hasOwnProperty,en=i.unstable_scheduleCallback,Vn=i.unstable_cancelCallback,rl=i.unstable_shouldYield,es=i.unstable_requestPaint,jn=i.unstable_now,Kr=i.unstable_getCurrentPriorityLevel,Gr=i.unstable_ImmediatePriority,Yr=i.unstable_UserBlockingPriority,mi=i.unstable_NormalPriority,Cs=i.unstable_LowPriority,fa=i.unstable_IdlePriority,Rs=i.log,pi=i.unstable_setDisableYieldValue,ir=null,gn=null;function yn(e){if(typeof Rs=="function"&&pi(e),gn&&typeof gn.setStrictMode=="function")try{gn.setStrictMode(ir,e)}catch{}}var Dt=Math.clz32?Math.clz32:Is,ns=Math.log,Tr=Math.LN2;function Is(e){return e>>>=0,e===0?32:31-(ns(e)/Tr|0)|0}var Ct=256,Li=262144,nn=4194304;function Sr(e){var r=e&42;if(r!==0)return r;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Qr(e,r,a){var l=e.pendingLanes;if(l===0)return 0;var h=0,p=e.suspendedLanes,T=e.pingedLanes;e=e.warmLanes;var C=l&134217727;return C!==0?(l=C&~p,l!==0?h=Sr(l):(T&=C,T!==0?h=Sr(T):a||(a=C&~e,a!==0&&(h=Sr(a))))):(C=l&~p,C!==0?h=Sr(C):T!==0?h=Sr(T):a||(a=l&~e,a!==0&&(h=Sr(a)))),h===0?0:r!==0&&r!==h&&(r&p)===0&&(p=h&-h,a=r&-r,p>=a||p===32&&(a&4194048)!==0)?r:h}function gr(e,r){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&r)===0}function su(e,r){switch(e){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function il(){var e=nn;return nn<<=1,(nn&62914560)===0&&(nn=4194304),e}function Xn(e){for(var r=[],a=0;31>a;a++)r.push(e);return r}function Ar(e,r){e.pendingLanes|=r,r!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _o(e,r,a,l,h,p){var T=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var C=e.entanglements,U=e.expirationTimes,rt=e.hiddenUpdates;for(a=T&~a;0<a;){var ct=31-Dt(a),pt=1<<ct;C[ct]=0,U[ct]=-1;var st=rt[ct];if(st!==null)for(rt[ct]=null,ct=0;ct<st.length;ct++){var ot=st[ct];ot!==null&&(ot.lane&=-536870913)}a&=~pt}l!==0&&gi(e,l,0),p!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=p&~(T&~r))}function gi(e,r,a){e.pendingLanes|=r,e.suspendedLanes&=~r;var l=31-Dt(r);e.entangledLanes|=r,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function Me(e,r){var a=e.entangledLanes|=r;for(e=e.entanglements;a;){var l=31-Dt(a),h=1<<l;h&r|e[l]&r&&(e[l]|=r),a&=~h}}function Je(e,r){var a=r&-r;return a=(a&42)!==0?1:Os(a),(a&(e.suspendedLanes|r))!==0?0:a}function Os(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function wr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ds(){var e=xt.p;return e!==0?e:(e=window.event,e===void 0?32:n_(e.type))}function sr(e,r){var a=xt.p;try{return xt.p=e,r()}finally{xt.p=a}}var Xr=Math.random().toString(36).slice(2),ke="__reactFiber$"+Xr,Ge="__reactProps$"+Xr,kn="__reactContainer$"+Xr,zi="__reactEvents$"+Xr,au="__reactListeners$"+Xr,$r="__reactHandles$"+Xr,Eo="__reactResources$"+Xr,Bn="__reactMarker$"+Xr;function Ns(e){delete e[ke],delete e[Ge],delete e[zi],delete e[au],delete e[$r]}function Cr(e){var r=e[ke];if(r)return r;for(var a=e.parentNode;a;){if(r=a[kn]||a[ke]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(e=jv(e);e!==null;){if(a=e[ke])return a;e=jv(e)}return r}e=a,a=e.parentNode}return null}function Ce(e){if(e=e[ke]||e[kn]){var r=e.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return e}return null}function vn(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e.stateNode;throw Error(s(33))}function An(e){var r=e[Eo];return r||(r=e[Eo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function rn(e){e[Bn]=!0}var yi=new Set,rs={};function Rr(e,r){Ir(e,r),Ir(e+"Capture",r)}function Ir(e,r){for(rs[e]=r,e=0;e<r.length;e++)yi.add(r[e])}var Jr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ha={},is={};function bo(e){return fn.call(is,e)?!0:fn.call(ha,e)?!1:Jr.test(e)?is[e]=!0:(ha[e]=!0,!1)}function se(e,r,a){if(bo(r))if(a===null)e.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(r);return}}e.setAttribute(r,""+a)}}function ar(e,r,a){if(a===null)e.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttribute(r,""+a)}}function sn(e,r,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(r,a,""+l)}}function an(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Or(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function da(e,r,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,r);if(!e.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,p=l.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return h.call(this)},set:function(T){a=""+T,p.call(this,T)}}),Object.defineProperty(e,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(T){a=""+T},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function Ie(e){if(!e._valueTracker){var r=Or(e)?"checked":"value";e._valueTracker=da(e,r,""+e[r])}}function ss(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return e&&(l=Or(e)?e.checked?"true":"false":e.value),e=l,e!==a?(r.setValue(e),!0):!1}function pe(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Zr=/[\n"\\]/g;function wn(e){return e.replace(Zr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Wr(e,r,a,l,h,p,T,C){e.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.type=T:e.removeAttribute("type"),r!=null?T==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+an(r)):e.value!==""+an(r)&&(e.value=""+an(r)):T!=="submit"&&T!=="reset"||e.removeAttribute("value"),r!=null?xs(e,T,an(r)):a!=null?xs(e,T,an(a)):l!=null&&e.removeAttribute("value"),h==null&&p!=null&&(e.defaultChecked=!!p),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+an(C):e.removeAttribute("name")}function ma(e,r,a,l,h,p,T,C){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.type=p),r!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||r!=null)){Ie(e);return}a=a!=null?""+an(a):"",r=r!=null?""+an(r):a,C||r===e.value||(e.value=r),e.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=C?e.checked:!!l,e.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(e.name=T),Ie(e)}function xs(e,r,a){r==="number"&&pe(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ti(e,r,a,l){if(e=e.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=r.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&l&&(e[a].defaultSelected=!0)}else{for(a=""+an(a),r=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}r!==null||e[h].disabled||(r=e[h])}r!==null&&(r.selected=!0)}}function To(e,r,a){if(r!=null&&(r=""+an(r),r!==e.value&&(e.value=r),a==null)){e.defaultValue!==r&&(e.defaultValue=r);return}e.defaultValue=a!=null?""+an(a):""}function ei(e,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(tn(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=an(r),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),Ie(e)}function $n(e,r){if(r){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=r;return}}e.textContent=r}var sl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function me(e,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="":l?e.setProperty(r,a):typeof a!="number"||a===0||sl.has(r)?r==="float"?e.cssFloat=a:e[r]=(""+a).trim():e[r]=a+"px"}function pa(e,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&me(e,h,l)}else for(var p in r)r.hasOwnProperty(p)&&me(e,p,r[p])}function ga(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var al=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ni(e){return hn.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function or(){}var Dr=null;function yr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ji=null,Pe=null;function qn(e){var r=Ce(e);if(r&&(e=r.stateNode)){var a=e[Ge]||null;t:switch(e=r.stateNode,r.type){case"input":if(Wr(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+wn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==e&&l.form===e.form){var h=l[Ge]||null;if(!h)throw Error(s(90));Wr(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===e.form&&ss(l)}break t;case"textarea":To(e,a.value,a.defaultValue);break t;case"select":r=a.value,r!=null&&ti(e,!!a.multiple,r,!1)}}}var vi=!1;function Nr(e,r,a){if(vi)return e(r,a);vi=!0;try{var l=e(r);return l}finally{if(vi=!1,(ji!==null||Pe!==null)&&(of(),ji&&(r=ji,e=Pe,Pe=ji=null,qn(r),e)))for(r=0;r<e.length;r++)qn(e[r])}}function vr(e,r){var a=e.stateNode;if(a===null)return null;var l=a[Ge]||null;if(l===null)return null;a=l[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ms=!1;if(_n)try{var he={};Object.defineProperty(he,"passive",{get:function(){Ms=!0}}),window.addEventListener("test",he,he),window.removeEventListener("test",he,he)}catch{Ms=!1}var xr=null,ya=null,Bi=null;function qi(){if(Bi)return Bi;var e,r=ya,a=r.length,l,h="value"in xr?xr.value:xr.textContent,p=h.length;for(e=0;e<a&&r[e]===h[e];e++);var T=a-e;for(l=1;l<=T&&r[a-l]===h[p-l];l++);return Bi=h.slice(e,1<l?1-l:void 0)}function Hi(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function _i(){return!0}function ri(){return!1}function on(e){function r(a,l,h,p,T){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(a=e[C],this[C]=a?a(p):p[C]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?_i:ri,this.isPropagationStopped=ri,this}return O(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=_i)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=_i)},persist:function(){},isPersistent:_i}),r}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=on(Fi),ii=O({},Fi,{view:0,detail:0}),as=on(ii),bi,va,Ti,_a=O({},ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ti&&(Ti&&e.type==="mousemove"?(bi=e.screenX-Ti.screenX,va=e.screenY-Ti.screenY):va=bi=0,Ti=e),bi)},movementY:function(e){return"movementY"in e?e.movementY:va}}),Vs=on(_a),Ki=O({},_a,{dataTransfer:0}),So=on(Ki),ks=O({},ii,{relatedTarget:0}),Si=on(ks),os=O({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ao=on(os),Ea=O({},Fi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Gi=on(Ea),ba=O({},Fi,{data:0}),Mr=on(ba),Ta={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ls(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=En[e])?!!r[e]:!1}function Vr(){return ls}var Hn=O({},ii,{key:function(e){if(e.key){var r=Ta[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=Hi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Sa[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vr,charCode:function(e){return e.type==="keypress"?Hi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ps=on(Hn),wo=O({},_a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ai=on(wo),c=O({},ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vr}),v=on(c),S=O({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=on(S),tt=O({},_a,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),at=on(tt),At=O({},Fi,{newState:0,oldState:0}),ee=on(At),ln=[9,13,27,32],Ae=_n&&"CompositionEvent"in window,Ue=null;_n&&"documentMode"in document&&(Ue=document.documentMode);var kr=_n&&"TextEvent"in window&&!Ue,Pr=_n&&(!Ae||Ue&&8<Ue&&11>=Ue),_r=" ",si=!1;function us(e,r){switch(e){case"keyup":return ln.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Aa(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Us=!1;function Cc(e,r){switch(e){case"compositionend":return Aa(r);case"keypress":return r.which!==32?null:(si=!0,_r);case"textInput":return e=r.data,e===_r&&si?null:e;default:return null}}function Ph(e,r){if(Us)return e==="compositionend"||!Ae&&us(e,r)?(e=qi(),Bi=ya=xr=null,Us=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Pr&&r.locale!=="ko"?null:r.data;default:return null}}var Rc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ol(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!Rc[e.type]:r==="textarea"}function ou(e,r,a,l){ji?Pe?Pe.push(l):Pe=[l]:ji=l,r=mf(r,"onChange"),0<r.length&&(a=new Ei("onChange","change",null,a,l),e.push({event:a,listeners:r}))}var wa=null,Co=null;function Uh(e){Cv(e,0)}function ll(e){var r=vn(e);if(ss(r))return e}function Ro(e,r){if(e==="change")return r}var wi=!1;if(_n){var Ye;if(_n){var Ca="oninput"in document;if(!Ca){var Er=document.createElement("div");Er.setAttribute("oninput","return;"),Ca=typeof Er.oninput=="function"}Ye=Ca}else Ye=!1;wi=Ye&&(!document.documentMode||9<document.documentMode)}function Ic(){wa&&(wa.detachEvent("onpropertychange",ul),Co=wa=null)}function ul(e){if(e.propertyName==="value"&&ll(Co)){var r=[];ou(r,Co,e,yr(e)),Nr(Uh,r)}}function Oc(e,r,a){e==="focusin"?(Ic(),wa=r,Co=a,wa.attachEvent("onpropertychange",ul)):e==="focusout"&&Ic()}function Ls(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ll(Co)}function lu(e,r){if(e==="click")return ll(r)}function Ra(e,r){if(e==="input"||e==="change")return ll(r)}function cs(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var lr=typeof Object.is=="function"?Object.is:cs;function f(e,r){if(lr(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var a=Object.keys(e),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!fn.call(r,h)||!lr(e[h],r[h]))return!1}return!0}function m(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function g(e,r){var a=m(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=r&&l>=r)return{node:a,offset:r-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=m(a)}}function E(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?E(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function A(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var r=pe(e.document);r instanceof e.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)e=r.contentWindow;else break;r=pe(e.document)}return r}function w(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}var D=_n&&"documentMode"in document&&11>=document.documentMode,x=null,z=null,j=null,Q=!1;function L(e,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Q||x==null||x!==pe(l)||(l=x,"selectionStart"in l&&w(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),j&&f(j,l)||(j=l,l=mf(z,"onSelect"),0<l.length&&(r=new Ei("onSelect","select",null,r,a),e.push({event:r,listeners:l}),r.target=x)))}function $(e,r){var a={};return a[e.toLowerCase()]=r.toLowerCase(),a["Webkit"+e]="webkit"+r,a["Moz"+e]="moz"+r,a}var B={animationend:$("Animation","AnimationEnd"),animationiteration:$("Animation","AnimationIteration"),animationstart:$("Animation","AnimationStart"),transitionrun:$("Transition","TransitionRun"),transitionstart:$("Transition","TransitionStart"),transitioncancel:$("Transition","TransitionCancel"),transitionend:$("Transition","TransitionEnd")},K={},G={};_n&&(G=document.createElement("div").style,"AnimationEvent"in window||(delete B.animationend.animation,delete B.animationiteration.animation,delete B.animationstart.animation),"TransitionEvent"in window||delete B.transitionend.transition);function X(e){if(K[e])return K[e];if(!B[e])return e;var r=B[e],a;for(a in r)if(r.hasOwnProperty(a)&&a in G)return K[e]=r[a];return e}var et=X("animationend"),it=X("animationiteration"),lt=X("animationstart"),mt=X("transitionrun"),St=X("transitionstart"),Ot=X("transitioncancel"),bt=X("transitionend"),wt=new Map,It="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");It.push("scrollEnd");function Tt(e,r){wt.set(e,r),Rr(r,[e])}var Mt=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ht=[],Wt=0,ae=0;function Fn(){for(var e=Wt,r=ae=Wt=0;r<e;){var a=Ht[r];Ht[r++]=null;var l=Ht[r];Ht[r++]=null;var h=Ht[r];Ht[r++]=null;var p=Ht[r];if(Ht[r++]=null,l!==null&&h!==null){var T=l.pending;T===null?h.next=h:(h.next=T.next,T.next=h),l.pending=h}p!==0&&Io(a,h,p)}}function Jt(e,r,a,l){Ht[Wt++]=e,Ht[Wt++]=r,Ht[Wt++]=a,Ht[Wt++]=l,ae|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Cn(e,r,a,l){return Jt(e,r,a,l),Rn(e)}function Ze(e,r){return Jt(e,null,null,r),Rn(e)}function Io(e,r,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var h=!1,p=e.return;p!==null;)p.childLanes|=a,l=p.alternate,l!==null&&(l.childLanes|=a),p.tag===22&&(e=p.stateNode,e===null||e._visibility&1||(h=!0)),e=p,p=p.return;return e.tag===3?(p=e.stateNode,h&&r!==null&&(h=31-Dt(a),e=p.hiddenUpdates,l=e[h],l===null?e[h]=[r]:l.push(r),r.lane=a|536870912),p):null}function Rn(e){if(50<Nu)throw Nu=0,Gd=null,Error(s(185));for(var r=e.return;r!==null;)e=r,r=e.return;return e.tag===3?e.stateNode:null}var Ur={};function uu(e,r,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ai(e,r,a,l){return new uu(e,r,a,l)}function Lh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zs(e,r){var a=e.alternate;return a===null?(a=ai(e.tag,r,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=r,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,r=e.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function lg(e,r){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=r,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,r=a.dependencies,e.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),e}function Dc(e,r,a,l,h,p){var T=0;if(l=e,typeof e=="function")Lh(e)&&(T=1);else if(typeof e=="string")T=XS(e,a,Vt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case P:return e=ai(31,a,r,h),e.elementType=P,e.lanes=p,e;case yt:return Oo(a.children,h,p,r);case vt:T=8,h|=24;break;case qt:return e=ai(12,a,r,h|2),e.elementType=qt,e.lanes=p,e;case xe:return e=ai(13,a,r,h),e.elementType=xe,e.lanes=p,e;case Zt:return e=ai(19,a,r,h),e.elementType=Zt,e.lanes=p,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ut:T=10;break t;case Kt:T=9;break t;case ue:T=11;break t;case M:T=14;break t;case N:T=16,l=null;break t}T=29,a=Error(s(130,e===null?"null":typeof e,"")),l=null}return r=ai(T,a,r,h),r.elementType=e,r.type=l,r.lanes=p,r}function Oo(e,r,a,l){return e=ai(7,e,l,r),e.lanes=a,e}function zh(e,r,a){return e=ai(6,e,null,r),e.lanes=a,e}function ug(e){var r=ai(18,null,null,0);return r.stateNode=e,r}function jh(e,r,a){return r=ai(4,e.children!==null?e.children:[],e.key,r),r.lanes=a,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}var cg=new WeakMap;function Ci(e,r){if(typeof e=="object"&&e!==null){var a=cg.get(e);return a!==void 0?a:(r={value:e,source:r,stack:vo(r)},cg.set(e,r),r)}return{value:e,source:r,stack:vo(r)}}var cl=[],fl=0,Nc=null,cu=0,Ri=[],Ii=0,Ia=null,fs=1,hs="";function js(e,r){cl[fl++]=cu,cl[fl++]=Nc,Nc=e,cu=r}function fg(e,r,a){Ri[Ii++]=fs,Ri[Ii++]=hs,Ri[Ii++]=Ia,Ia=e;var l=fs;e=hs;var h=32-Dt(l)-1;l&=~(1<<h),a+=1;var p=32-Dt(r)+h;if(30<p){var T=h-h%5;p=(l&(1<<T)-1).toString(32),l>>=T,h-=T,fs=1<<32-Dt(r)+h|a<<h|l,hs=p+e}else fs=1<<p|a<<h|l,hs=e}function Bh(e){e.return!==null&&(js(e,1),fg(e,1,0))}function qh(e){for(;e===Nc;)Nc=cl[--fl],cl[fl]=null,cu=cl[--fl],cl[fl]=null;for(;e===Ia;)Ia=Ri[--Ii],Ri[Ii]=null,hs=Ri[--Ii],Ri[Ii]=null,fs=Ri[--Ii],Ri[Ii]=null}function hg(e,r){Ri[Ii++]=fs,Ri[Ii++]=hs,Ri[Ii++]=Ia,fs=r.id,hs=r.overflow,Ia=e}var Jn=null,Qe=null,we=!1,Oa=null,Oi=!1,Hh=Error(s(519));function Da(e){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fu(Ci(r,e)),Hh}function dg(e){var r=e.stateNode,a=e.type,l=e.memoizedProps;switch(r[ke]=e,r[Ge]=l,a){case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":case"embed":ye("load",r);break;case"video":case"audio":for(a=0;a<Mu.length;a++)ye(Mu[a],r);break;case"source":ye("error",r);break;case"img":case"image":case"link":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"input":ye("invalid",r),ma(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ye("invalid",r);break;case"textarea":ye("invalid",r),ei(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||Dv(r.textContent,a)?(l.popover!=null&&(ye("beforetoggle",r),ye("toggle",r)),l.onScroll!=null&&ye("scroll",r),l.onScrollEnd!=null&&ye("scrollend",r),l.onClick!=null&&(r.onclick=or),r=!0):r=!1,r||Da(e,!0)}function mg(e){for(Jn=e.return;Jn;)switch(Jn.tag){case 5:case 31:case 13:Oi=!1;return;case 27:case 3:Oi=!0;return;default:Jn=Jn.return}}function hl(e){if(e!==Jn)return!1;if(!we)return mg(e),we=!0,!1;var r=e.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||om(e.type,e.memoizedProps)),a=!a),a&&Qe&&Da(e),mg(e),r===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Qe=zv(e)}else if(r===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Qe=zv(e)}else r===27?(r=Qe,Fa(e.type)?(e=hm,hm=null,Qe=e):Qe=r):Qe=Jn?Ni(e.stateNode.nextSibling):null;return!0}function Do(){Qe=Jn=null,we=!1}function Fh(){var e=Oa;return e!==null&&(Br===null?Br=e:Br.push.apply(Br,e),Oa=null),e}function fu(e){Oa===null?Oa=[e]:Oa.push(e)}var Kh=F(null),No=null,Bs=null;function Na(e,r,a){Rt(Kh,r._currentValue),r._currentValue=a}function qs(e){e._currentValue=Kh.current,ht(Kh)}function Gh(e,r,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),e===a)break;e=e.return}}function Yh(e,r,a,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var p=h.dependencies;if(p!==null){var T=h.child;p=p.firstContext;t:for(;p!==null;){var C=p;p=h;for(var U=0;U<r.length;U++)if(C.context===r[U]){p.lanes|=a,C=p.alternate,C!==null&&(C.lanes|=a),Gh(p.return,a,e),l||(T=null);break t}p=C.next}}else if(h.tag===18){if(T=h.return,T===null)throw Error(s(341));T.lanes|=a,p=T.alternate,p!==null&&(p.lanes|=a),Gh(T,a,e),T=null}else T=h.child;if(T!==null)T.return=h;else for(T=h;T!==null;){if(T===e){T=null;break}if(h=T.sibling,h!==null){h.return=T.return,T=h;break}T=T.return}h=T}}function dl(e,r,a,l){e=null;for(var h=r,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var T=h.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var C=h.type;lr(h.pendingProps.value,T.value)||(e!==null?e.push(C):e=[C])}}else if(h===de.current){if(T=h.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Lu):e=[Lu])}h=h.return}e!==null&&Yh(r,e,a,l),r.flags|=262144}function xc(e){for(e=e.firstContext;e!==null;){if(!lr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function xo(e){No=e,Bs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Zn(e){return pg(No,e)}function Mc(e,r){return No===null&&xo(e),pg(e,r)}function pg(e,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Bs===null){if(e===null)throw Error(s(308));Bs=r,e.dependencies={lanes:0,firstContext:r},e.flags|=524288}else Bs=Bs.next=r;return a}var KT=typeof AbortController<"u"?AbortController:function(){var e=[],r=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){r.aborted=!0,e.forEach(function(a){return a()})}},GT=i.unstable_scheduleCallback,YT=i.unstable_NormalPriority,In={$$typeof:Ut,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qh(){return{controller:new KT,data:new Map,refCount:0}}function hu(e){e.refCount--,e.refCount===0&&GT(YT,function(){e.controller.abort()})}var du=null,Xh=0,ml=0,pl=null;function QT(e,r){if(du===null){var a=du=[];Xh=0,ml=Zd(),pl={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Xh++,r.then(gg,gg),r}function gg(){if(--Xh===0&&du!==null){pl!==null&&(pl.status="fulfilled");var e=du;du=null,ml=0,pl=null;for(var r=0;r<e.length;r++)(0,e[r])()}}function XT(e,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var yg=ut.S;ut.S=function(e,r){tv=jn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&QT(e,r),yg!==null&&yg(e,r)};var Mo=F(null);function $h(){var e=Mo.current;return e!==null?e:Fe.pooledCache}function Vc(e,r){r===null?Rt(Mo,Mo.current):Rt(Mo,r.pool)}function vg(){var e=$h();return e===null?null:{parent:In._currentValue,pool:e}}var gl=Error(s(460)),Jh=Error(s(474)),kc=Error(s(542)),Pc={then:function(){}};function _g(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Eg(e,r,a){switch(a=e[a],a===void 0?e.push(r):a!==r&&(r.then(or,or),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,Tg(e),e;default:if(typeof r.status=="string")r.then(or,or);else{if(e=Fe,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=r,e.status="pending",e.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,Tg(e),e}throw ko=r,gl}}function Vo(e){try{var r=e._init;return r(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ko=a,gl):a}}var ko=null;function bg(){if(ko===null)throw Error(s(459));var e=ko;return ko=null,e}function Tg(e){if(e===gl||e===kc)throw Error(s(483))}var yl=null,mu=0;function Uc(e){var r=mu;return mu+=1,yl===null&&(yl=[]),Eg(yl,e,r)}function pu(e,r){r=r.props.ref,e.ref=r!==void 0?r:null}function Lc(e,r){throw r.$$typeof===k?Error(s(525)):(e=Object.prototype.toString.call(r),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)))}function Sg(e){function r(Z,H){if(e){var nt=Z.deletions;nt===null?(Z.deletions=[H],Z.flags|=16):nt.push(H)}}function a(Z,H){if(!e)return null;for(;H!==null;)r(Z,H),H=H.sibling;return null}function l(Z){for(var H=new Map;Z!==null;)Z.key!==null?H.set(Z.key,Z):H.set(Z.index,Z),Z=Z.sibling;return H}function h(Z,H){return Z=zs(Z,H),Z.index=0,Z.sibling=null,Z}function p(Z,H,nt){return Z.index=nt,e?(nt=Z.alternate,nt!==null?(nt=nt.index,nt<H?(Z.flags|=67108866,H):nt):(Z.flags|=67108866,H)):(Z.flags|=1048576,H)}function T(Z){return e&&Z.alternate===null&&(Z.flags|=67108866),Z}function C(Z,H,nt,ft){return H===null||H.tag!==6?(H=zh(nt,Z.mode,ft),H.return=Z,H):(H=h(H,nt),H.return=Z,H)}function U(Z,H,nt,ft){var Ft=nt.type;return Ft===yt?ct(Z,H,nt.props.children,ft,nt.key):H!==null&&(H.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===N&&Vo(Ft)===H.type)?(H=h(H,nt.props),pu(H,nt),H.return=Z,H):(H=Dc(nt.type,nt.key,nt.props,null,Z.mode,ft),pu(H,nt),H.return=Z,H)}function rt(Z,H,nt,ft){return H===null||H.tag!==4||H.stateNode.containerInfo!==nt.containerInfo||H.stateNode.implementation!==nt.implementation?(H=jh(nt,Z.mode,ft),H.return=Z,H):(H=h(H,nt.children||[]),H.return=Z,H)}function ct(Z,H,nt,ft,Ft){return H===null||H.tag!==7?(H=Oo(nt,Z.mode,ft,Ft),H.return=Z,H):(H=h(H,nt),H.return=Z,H)}function pt(Z,H,nt){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=zh(""+H,Z.mode,nt),H.return=Z,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case J:return nt=Dc(H.type,H.key,H.props,null,Z.mode,nt),pu(nt,H),nt.return=Z,nt;case dt:return H=jh(H,Z.mode,nt),H.return=Z,H;case N:return H=Vo(H),pt(Z,H,nt)}if(tn(H)||W(H))return H=Oo(H,Z.mode,nt,null),H.return=Z,H;if(typeof H.then=="function")return pt(Z,Uc(H),nt);if(H.$$typeof===Ut)return pt(Z,Mc(Z,H),nt);Lc(Z,H)}return null}function st(Z,H,nt,ft){var Ft=H!==null?H.key:null;if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return Ft!==null?null:C(Z,H,""+nt,ft);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case J:return nt.key===Ft?U(Z,H,nt,ft):null;case dt:return nt.key===Ft?rt(Z,H,nt,ft):null;case N:return nt=Vo(nt),st(Z,H,nt,ft)}if(tn(nt)||W(nt))return Ft!==null?null:ct(Z,H,nt,ft,null);if(typeof nt.then=="function")return st(Z,H,Uc(nt),ft);if(nt.$$typeof===Ut)return st(Z,H,Mc(Z,nt),ft);Lc(Z,nt)}return null}function ot(Z,H,nt,ft,Ft){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return Z=Z.get(nt)||null,C(H,Z,""+ft,Ft);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case J:return Z=Z.get(ft.key===null?nt:ft.key)||null,U(H,Z,ft,Ft);case dt:return Z=Z.get(ft.key===null?nt:ft.key)||null,rt(H,Z,ft,Ft);case N:return ft=Vo(ft),ot(Z,H,nt,ft,Ft)}if(tn(ft)||W(ft))return Z=Z.get(nt)||null,ct(H,Z,ft,Ft,null);if(typeof ft.then=="function")return ot(Z,H,nt,Uc(ft),Ft);if(ft.$$typeof===Ut)return ot(Z,H,nt,Mc(H,ft),Ft);Lc(H,ft)}return null}function Pt(Z,H,nt,ft){for(var Ft=null,Oe=null,zt=H,le=H=0,_e=null;zt!==null&&le<nt.length;le++){zt.index>le?(_e=zt,zt=null):_e=zt.sibling;var De=st(Z,zt,nt[le],ft);if(De===null){zt===null&&(zt=_e);break}e&&zt&&De.alternate===null&&r(Z,zt),H=p(De,H,le),Oe===null?Ft=De:Oe.sibling=De,Oe=De,zt=_e}if(le===nt.length)return a(Z,zt),we&&js(Z,le),Ft;if(zt===null){for(;le<nt.length;le++)zt=pt(Z,nt[le],ft),zt!==null&&(H=p(zt,H,le),Oe===null?Ft=zt:Oe.sibling=zt,Oe=zt);return we&&js(Z,le),Ft}for(zt=l(zt);le<nt.length;le++)_e=ot(zt,Z,le,nt[le],ft),_e!==null&&(e&&_e.alternate!==null&&zt.delete(_e.key===null?le:_e.key),H=p(_e,H,le),Oe===null?Ft=_e:Oe.sibling=_e,Oe=_e);return e&&zt.forEach(function(Xa){return r(Z,Xa)}),we&&js(Z,le),Ft}function Qt(Z,H,nt,ft){if(nt==null)throw Error(s(151));for(var Ft=null,Oe=null,zt=H,le=H=0,_e=null,De=nt.next();zt!==null&&!De.done;le++,De=nt.next()){zt.index>le?(_e=zt,zt=null):_e=zt.sibling;var Xa=st(Z,zt,De.value,ft);if(Xa===null){zt===null&&(zt=_e);break}e&&zt&&Xa.alternate===null&&r(Z,zt),H=p(Xa,H,le),Oe===null?Ft=Xa:Oe.sibling=Xa,Oe=Xa,zt=_e}if(De.done)return a(Z,zt),we&&js(Z,le),Ft;if(zt===null){for(;!De.done;le++,De=nt.next())De=pt(Z,De.value,ft),De!==null&&(H=p(De,H,le),Oe===null?Ft=De:Oe.sibling=De,Oe=De);return we&&js(Z,le),Ft}for(zt=l(zt);!De.done;le++,De=nt.next())De=ot(zt,Z,le,De.value,ft),De!==null&&(e&&De.alternate!==null&&zt.delete(De.key===null?le:De.key),H=p(De,H,le),Oe===null?Ft=De:Oe.sibling=De,Oe=De);return e&&zt.forEach(function(aA){return r(Z,aA)}),we&&js(Z,le),Ft}function He(Z,H,nt,ft){if(typeof nt=="object"&&nt!==null&&nt.type===yt&&nt.key===null&&(nt=nt.props.children),typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case J:t:{for(var Ft=nt.key;H!==null;){if(H.key===Ft){if(Ft=nt.type,Ft===yt){if(H.tag===7){a(Z,H.sibling),ft=h(H,nt.props.children),ft.return=Z,Z=ft;break t}}else if(H.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===N&&Vo(Ft)===H.type){a(Z,H.sibling),ft=h(H,nt.props),pu(ft,nt),ft.return=Z,Z=ft;break t}a(Z,H);break}else r(Z,H);H=H.sibling}nt.type===yt?(ft=Oo(nt.props.children,Z.mode,ft,nt.key),ft.return=Z,Z=ft):(ft=Dc(nt.type,nt.key,nt.props,null,Z.mode,ft),pu(ft,nt),ft.return=Z,Z=ft)}return T(Z);case dt:t:{for(Ft=nt.key;H!==null;){if(H.key===Ft)if(H.tag===4&&H.stateNode.containerInfo===nt.containerInfo&&H.stateNode.implementation===nt.implementation){a(Z,H.sibling),ft=h(H,nt.children||[]),ft.return=Z,Z=ft;break t}else{a(Z,H);break}else r(Z,H);H=H.sibling}ft=jh(nt,Z.mode,ft),ft.return=Z,Z=ft}return T(Z);case N:return nt=Vo(nt),He(Z,H,nt,ft)}if(tn(nt))return Pt(Z,H,nt,ft);if(W(nt)){if(Ft=W(nt),typeof Ft!="function")throw Error(s(150));return nt=Ft.call(nt),Qt(Z,H,nt,ft)}if(typeof nt.then=="function")return He(Z,H,Uc(nt),ft);if(nt.$$typeof===Ut)return He(Z,H,Mc(Z,nt),ft);Lc(Z,nt)}return typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint"?(nt=""+nt,H!==null&&H.tag===6?(a(Z,H.sibling),ft=h(H,nt),ft.return=Z,Z=ft):(a(Z,H),ft=zh(nt,Z.mode,ft),ft.return=Z,Z=ft),T(Z)):a(Z,H)}return function(Z,H,nt,ft){try{mu=0;var Ft=He(Z,H,nt,ft);return yl=null,Ft}catch(zt){if(zt===gl||zt===kc)throw zt;var Oe=ai(29,zt,null,Z.mode);return Oe.lanes=ft,Oe.return=Z,Oe}finally{}}}var Po=Sg(!0),Ag=Sg(!1),xa=!1;function Zh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wh(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ma(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Va(e,r,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ne&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=Rn(e),Io(e,null,a),r}return Jt(e,l,r,a),Rn(e)}function gu(e,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=e.pendingLanes,a|=l,r.lanes=a,Me(e,a)}}function td(e,r){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?h=p=T:p=p.next=T,a=a.next}while(a!==null);p===null?h=p=r:p=p.next=r}else h=p=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=r:e.next=r,a.lastBaseUpdate=r}var ed=!1;function yu(){if(ed){var e=pl;if(e!==null)throw e}}function vu(e,r,a,l){ed=!1;var h=e.updateQueue;xa=!1;var p=h.firstBaseUpdate,T=h.lastBaseUpdate,C=h.shared.pending;if(C!==null){h.shared.pending=null;var U=C,rt=U.next;U.next=null,T===null?p=rt:T.next=rt,T=U;var ct=e.alternate;ct!==null&&(ct=ct.updateQueue,C=ct.lastBaseUpdate,C!==T&&(C===null?ct.firstBaseUpdate=rt:C.next=rt,ct.lastBaseUpdate=U))}if(p!==null){var pt=h.baseState;T=0,ct=rt=U=null,C=p;do{var st=C.lane&-536870913,ot=st!==C.lane;if(ot?(ve&st)===st:(l&st)===st){st!==0&&st===ml&&(ed=!0),ct!==null&&(ct=ct.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var Pt=e,Qt=C;st=r;var He=a;switch(Qt.tag){case 1:if(Pt=Qt.payload,typeof Pt=="function"){pt=Pt.call(He,pt,st);break t}pt=Pt;break t;case 3:Pt.flags=Pt.flags&-65537|128;case 0:if(Pt=Qt.payload,st=typeof Pt=="function"?Pt.call(He,pt,st):Pt,st==null)break t;pt=O({},pt,st);break t;case 2:xa=!0}}st=C.callback,st!==null&&(e.flags|=64,ot&&(e.flags|=8192),ot=h.callbacks,ot===null?h.callbacks=[st]:ot.push(st))}else ot={lane:st,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ct===null?(rt=ct=ot,U=pt):ct=ct.next=ot,T|=st;if(C=C.next,C===null){if(C=h.shared.pending,C===null)break;ot=C,C=ot.next,ot.next=null,h.lastBaseUpdate=ot,h.shared.pending=null}}while(!0);ct===null&&(U=pt),h.baseState=U,h.firstBaseUpdate=rt,h.lastBaseUpdate=ct,p===null&&(h.shared.lanes=0),za|=T,e.lanes=T,e.memoizedState=pt}}function wg(e,r){if(typeof e!="function")throw Error(s(191,e));e.call(r)}function Cg(e,r){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)wg(a[e],r)}var vl=F(null),zc=F(0);function Rg(e,r){e=Js,Rt(zc,e),Rt(vl,r),Js=e|r.baseLanes}function nd(){Rt(zc,Js),Rt(vl,vl.current)}function rd(){Js=zc.current,ht(vl),ht(zc)}var oi=F(null),Di=null;function ka(e){var r=e.alternate;Rt(bn,bn.current&1),Rt(oi,e),Di===null&&(r===null||vl.current!==null||r.memoizedState!==null)&&(Di=e)}function id(e){Rt(bn,bn.current),Rt(oi,e),Di===null&&(Di=e)}function Ig(e){e.tag===22?(Rt(bn,bn.current),Rt(oi,e),Di===null&&(Di=e)):Pa()}function Pa(){Rt(bn,bn.current),Rt(oi,oi.current)}function li(e){ht(oi),Di===e&&(Di=null),ht(bn)}var bn=F(0);function jc(e){for(var r=e;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||cm(a)||fm(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Hs=0,oe=null,Be=null,On=null,Bc=!1,_l=!1,Uo=!1,qc=0,_u=0,El=null,$T=0;function dn(){throw Error(s(321))}function sd(e,r){if(r===null)return!1;for(var a=0;a<r.length&&a<e.length;a++)if(!lr(e[a],r[a]))return!1;return!0}function ad(e,r,a,l,h,p){return Hs=p,oe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ut.H=e===null||e.memoizedState===null?fy:bd,Uo=!1,p=a(l,h),Uo=!1,_l&&(p=Dg(r,a,l,h)),Og(e),p}function Og(e){ut.H=Tu;var r=Be!==null&&Be.next!==null;if(Hs=0,On=Be=oe=null,Bc=!1,_u=0,El=null,r)throw Error(s(300));e===null||Dn||(e=e.dependencies,e!==null&&xc(e)&&(Dn=!0))}function Dg(e,r,a,l){oe=e;var h=0;do{if(_l&&(El=null),_u=0,_l=!1,25<=h)throw Error(s(301));if(h+=1,On=Be=null,e.updateQueue!=null){var p=e.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}ut.H=hy,p=r(a,l)}while(_l);return p}function JT(){var e=ut.H,r=e.useState()[0];return r=typeof r.then=="function"?Eu(r):r,e=e.useState()[0],(Be!==null?Be.memoizedState:null)!==e&&(oe.flags|=1024),r}function od(){var e=qc!==0;return qc=0,e}function ld(e,r,a){r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~a}function ud(e){if(Bc){for(e=e.memoizedState;e!==null;){var r=e.queue;r!==null&&(r.pending=null),e=e.next}Bc=!1}Hs=0,On=Be=oe=null,_l=!1,_u=qc=0,El=null}function br(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?oe.memoizedState=On=e:On=On.next=e,On}function Tn(){if(Be===null){var e=oe.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var r=On===null?oe.memoizedState:On.next;if(r!==null)On=r,Be=e;else{if(e===null)throw oe.alternate===null?Error(s(467)):Error(s(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},On===null?oe.memoizedState=On=e:On=On.next=e}return On}function Hc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eu(e){var r=_u;return _u+=1,El===null&&(El=[]),e=Eg(El,e,r),r=oe,(On===null?r.memoizedState:On.next)===null&&(r=r.alternate,ut.H=r===null||r.memoizedState===null?fy:bd),e}function Fc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Eu(e);if(e.$$typeof===Ut)return Zn(e)}throw Error(s(438,String(e)))}function cd(e){var r=null,a=oe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=oe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Hc(),oe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(e),l=0;l<e;l++)a[l]=Y;return r.index++,a}function Fs(e,r){return typeof r=="function"?r(e):r}function Kc(e){var r=Tn();return fd(r,Be,e)}function fd(e,r,a){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=e.baseQueue,p=l.pending;if(p!==null){if(h!==null){var T=h.next;h.next=p.next,p.next=T}r.baseQueue=h=p,l.pending=null}if(p=e.baseState,h===null)e.memoizedState=p;else{r=h.next;var C=T=null,U=null,rt=r,ct=!1;do{var pt=rt.lane&-536870913;if(pt!==rt.lane?(ve&pt)===pt:(Hs&pt)===pt){var st=rt.revertLane;if(st===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),pt===ml&&(ct=!0);else if((Hs&st)===st){rt=rt.next,st===ml&&(ct=!0);continue}else pt={lane:0,revertLane:rt.revertLane,gesture:null,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},U===null?(C=U=pt,T=p):U=U.next=pt,oe.lanes|=st,za|=st;pt=rt.action,Uo&&a(p,pt),p=rt.hasEagerState?rt.eagerState:a(p,pt)}else st={lane:pt,revertLane:rt.revertLane,gesture:rt.gesture,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},U===null?(C=U=st,T=p):U=U.next=st,oe.lanes|=pt,za|=pt;rt=rt.next}while(rt!==null&&rt!==r);if(U===null?T=p:U.next=C,!lr(p,e.memoizedState)&&(Dn=!0,ct&&(a=pl,a!==null)))throw a;e.memoizedState=p,e.baseState=T,e.baseQueue=U,l.lastRenderedState=p}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function hd(e){var r=Tn(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,h=a.pending,p=r.memoizedState;if(h!==null){a.pending=null;var T=h=h.next;do p=e(p,T.action),T=T.next;while(T!==h);lr(p,r.memoizedState)||(Dn=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,l]}function Ng(e,r,a){var l=oe,h=Tn(),p=we;if(p){if(a===void 0)throw Error(s(407));a=a()}else a=r();var T=!lr((Be||h).memoizedState,a);if(T&&(h.memoizedState=a,Dn=!0),h=h.queue,pd(Vg.bind(null,l,h,e),[e]),h.getSnapshot!==r||T||On!==null&&On.memoizedState.tag&1){if(l.flags|=2048,bl(9,{destroy:void 0},Mg.bind(null,l,h,a,r),null),Fe===null)throw Error(s(349));p||(Hs&127)!==0||xg(l,r,a)}return a}function xg(e,r,a){e.flags|=16384,e={getSnapshot:r,value:a},r=oe.updateQueue,r===null?(r=Hc(),oe.updateQueue=r,r.stores=[e]):(a=r.stores,a===null?r.stores=[e]:a.push(e))}function Mg(e,r,a,l){r.value=a,r.getSnapshot=l,kg(r)&&Pg(e)}function Vg(e,r,a){return a(function(){kg(r)&&Pg(e)})}function kg(e){var r=e.getSnapshot;e=e.value;try{var a=r();return!lr(e,a)}catch{return!0}}function Pg(e){var r=Ze(e,2);r!==null&&qr(r,e,2)}function dd(e){var r=br();if(typeof e=="function"){var a=e;if(e=a(),Uo){yn(!0);try{a()}finally{yn(!1)}}}return r.memoizedState=r.baseState=e,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:e},r}function Ug(e,r,a,l){return e.baseState=a,fd(e,Be,typeof l=="function"?l:Fs)}function ZT(e,r,a,l,h){if(Qc(e))throw Error(s(485));if(e=r.action,e!==null){var p={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};ut.T!==null?a(!0):p.isTransition=!1,l(p),a=r.pending,a===null?(p.next=r.pending=p,Lg(r,p)):(p.next=a.next,r.pending=a.next=p)}}function Lg(e,r){var a=r.action,l=r.payload,h=e.state;if(r.isTransition){var p=ut.T,T={};ut.T=T;try{var C=a(h,l),U=ut.S;U!==null&&U(T,C),zg(e,r,C)}catch(rt){md(e,r,rt)}finally{p!==null&&T.types!==null&&(p.types=T.types),ut.T=p}}else try{p=a(h,l),zg(e,r,p)}catch(rt){md(e,r,rt)}}function zg(e,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){jg(e,r,l)},function(l){return md(e,r,l)}):jg(e,r,a)}function jg(e,r,a){r.status="fulfilled",r.value=a,Bg(r),e.state=a,r=e.pending,r!==null&&(a=r.next,a===r?e.pending=null:(a=a.next,r.next=a,Lg(e,a)))}function md(e,r,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Bg(r),r=r.next;while(r!==l)}e.action=null}function Bg(e){e=e.listeners;for(var r=0;r<e.length;r++)(0,e[r])()}function qg(e,r){return r}function Hg(e,r){if(we){var a=Fe.formState;if(a!==null){t:{var l=oe;if(we){if(Qe){e:{for(var h=Qe,p=Oi;h.nodeType!==8;){if(!p){h=null;break e}if(h=Ni(h.nextSibling),h===null){h=null;break e}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){Qe=Ni(h.nextSibling),l=h.data==="F!";break t}}Da(l)}l=!1}l&&(r=a[0])}}return a=br(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qg,lastRenderedState:r},a.queue=l,a=ly.bind(null,oe,l),l.dispatch=a,l=dd(!1),p=Ed.bind(null,oe,!1,l.queue),l=br(),h={state:r,dispatch:null,action:e,pending:null},l.queue=h,a=ZT.bind(null,oe,h,p,a),h.dispatch=a,l.memoizedState=e,[r,a,!1]}function Fg(e){var r=Tn();return Kg(r,Be,e)}function Kg(e,r,a){if(r=fd(e,r,qg)[0],e=Kc(Fs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Eu(r)}catch(T){throw T===gl?kc:T}else l=r;r=Tn();var h=r.queue,p=h.dispatch;return a!==r.memoizedState&&(oe.flags|=2048,bl(9,{destroy:void 0},WT.bind(null,h,a),null)),[l,p,e]}function WT(e,r){e.action=r}function Gg(e){var r=Tn(),a=Be;if(a!==null)return Kg(r,a,e);Tn(),r=r.memoizedState,a=Tn();var l=a.queue.dispatch;return a.memoizedState=e,[r,l,!1]}function bl(e,r,a,l){return e={tag:e,create:a,deps:l,inst:r,next:null},r=oe.updateQueue,r===null&&(r=Hc(),oe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,r.lastEffect=e),e}function Yg(){return Tn().memoizedState}function Gc(e,r,a,l){var h=br();oe.flags|=e,h.memoizedState=bl(1|r,{destroy:void 0},a,l===void 0?null:l)}function Yc(e,r,a,l){var h=Tn();l=l===void 0?null:l;var p=h.memoizedState.inst;Be!==null&&l!==null&&sd(l,Be.memoizedState.deps)?h.memoizedState=bl(r,p,a,l):(oe.flags|=e,h.memoizedState=bl(1|r,p,a,l))}function Qg(e,r){Gc(8390656,8,e,r)}function pd(e,r){Yc(2048,8,e,r)}function tS(e){oe.flags|=4;var r=oe.updateQueue;if(r===null)r=Hc(),oe.updateQueue=r,r.events=[e];else{var a=r.events;a===null?r.events=[e]:a.push(e)}}function Xg(e){var r=Tn().memoizedState;return tS({ref:r,nextImpl:e}),function(){if((Ne&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function $g(e,r){return Yc(4,2,e,r)}function Jg(e,r){return Yc(4,4,e,r)}function Zg(e,r){if(typeof r=="function"){e=e();var a=r(e);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function Wg(e,r,a){a=a!=null?a.concat([e]):null,Yc(4,4,Zg.bind(null,r,e),a)}function gd(){}function ty(e,r){var a=Tn();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&sd(r,l[1])?l[0]:(a.memoizedState=[e,r],e)}function ey(e,r){var a=Tn();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&sd(r,l[1]))return l[0];if(l=e(),Uo){yn(!0);try{e()}finally{yn(!1)}}return a.memoizedState=[l,r],l}function yd(e,r,a){return a===void 0||(Hs&1073741824)!==0&&(ve&261930)===0?e.memoizedState=r:(e.memoizedState=a,e=nv(),oe.lanes|=e,za|=e,a)}function ny(e,r,a,l){return lr(a,r)?a:vl.current!==null?(e=yd(e,a,l),lr(e,r)||(Dn=!0),e):(Hs&42)===0||(Hs&1073741824)!==0&&(ve&261930)===0?(Dn=!0,e.memoizedState=a):(e=nv(),oe.lanes|=e,za|=e,r)}function ry(e,r,a,l,h){var p=xt.p;xt.p=p!==0&&8>p?p:8;var T=ut.T,C={};ut.T=C,Ed(e,!1,r,a);try{var U=h(),rt=ut.S;if(rt!==null&&rt(C,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ct=XT(U,l);bu(e,r,ct,fi(e))}else bu(e,r,l,fi(e))}catch(pt){bu(e,r,{then:function(){},status:"rejected",reason:pt},fi())}finally{xt.p=p,T!==null&&C.types!==null&&(T.types=C.types),ut.T=T}}function eS(){}function vd(e,r,a,l){if(e.tag!==5)throw Error(s(476));var h=iy(e).queue;ry(e,h,r,Lt,a===null?eS:function(){return sy(e),a(l)})}function iy(e){var r=e.memoizedState;if(r!==null)return r;r={memoizedState:Lt,baseState:Lt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:Lt},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:a},next:null},e.memoizedState=r,e=e.alternate,e!==null&&(e.memoizedState=r),r}function sy(e){var r=iy(e);r.next===null&&(r=e.alternate.memoizedState),bu(e,r.next.queue,{},fi())}function _d(){return Zn(Lu)}function ay(){return Tn().memoizedState}function oy(){return Tn().memoizedState}function nS(e){for(var r=e.return;r!==null;){switch(r.tag){case 24:case 3:var a=fi();e=Ma(a);var l=Va(r,e,a);l!==null&&(qr(l,r,a),gu(l,r,a)),r={cache:Qh()},e.payload=r;return}r=r.return}}function rS(e,r,a){var l=fi();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Qc(e)?uy(r,a):(a=Cn(e,r,a,l),a!==null&&(qr(a,e,l),cy(a,r,l)))}function ly(e,r,a){var l=fi();bu(e,r,a,l)}function bu(e,r,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Qc(e))uy(r,h);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var T=r.lastRenderedState,C=p(T,a);if(h.hasEagerState=!0,h.eagerState=C,lr(C,T))return Jt(e,r,h,0),Fe===null&&Fn(),!1}catch{}finally{}if(a=Cn(e,r,h,l),a!==null)return qr(a,e,l),cy(a,r,l),!0}return!1}function Ed(e,r,a,l){if(l={lane:2,revertLane:Zd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Qc(e)){if(r)throw Error(s(479))}else r=Cn(e,a,l,2),r!==null&&qr(r,e,2)}function Qc(e){var r=e.alternate;return e===oe||r!==null&&r===oe}function uy(e,r){_l=Bc=!0;var a=e.pending;a===null?r.next=r:(r.next=a.next,a.next=r),e.pending=r}function cy(e,r,a){if((a&4194048)!==0){var l=r.lanes;l&=e.pendingLanes,a|=l,r.lanes=a,Me(e,a)}}var Tu={readContext:Zn,use:Fc,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useLayoutEffect:dn,useInsertionEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useSyncExternalStore:dn,useId:dn,useHostTransitionStatus:dn,useFormState:dn,useActionState:dn,useOptimistic:dn,useMemoCache:dn,useCacheRefresh:dn};Tu.useEffectEvent=dn;var fy={readContext:Zn,use:Fc,useCallback:function(e,r){return br().memoizedState=[e,r===void 0?null:r],e},useContext:Zn,useEffect:Qg,useImperativeHandle:function(e,r,a){a=a!=null?a.concat([e]):null,Gc(4194308,4,Zg.bind(null,r,e),a)},useLayoutEffect:function(e,r){return Gc(4194308,4,e,r)},useInsertionEffect:function(e,r){Gc(4,2,e,r)},useMemo:function(e,r){var a=br();r=r===void 0?null:r;var l=e();if(Uo){yn(!0);try{e()}finally{yn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(e,r,a){var l=br();if(a!==void 0){var h=a(r);if(Uo){yn(!0);try{a(r)}finally{yn(!1)}}}else h=r;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=rS.bind(null,oe,e),[l.memoizedState,e]},useRef:function(e){var r=br();return e={current:e},r.memoizedState=e},useState:function(e){e=dd(e);var r=e.queue,a=ly.bind(null,oe,r);return r.dispatch=a,[e.memoizedState,a]},useDebugValue:gd,useDeferredValue:function(e,r){var a=br();return yd(a,e,r)},useTransition:function(){var e=dd(!1);return e=ry.bind(null,oe,e.queue,!0,!1),br().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,r,a){var l=oe,h=br();if(we){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),Fe===null)throw Error(s(349));(ve&127)!==0||xg(l,r,a)}h.memoizedState=a;var p={value:a,getSnapshot:r};return h.queue=p,Qg(Vg.bind(null,l,p,e),[e]),l.flags|=2048,bl(9,{destroy:void 0},Mg.bind(null,l,p,a,r),null),a},useId:function(){var e=br(),r=Fe.identifierPrefix;if(we){var a=hs,l=fs;a=(l&~(1<<32-Dt(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=qc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=$T++,r="_"+r+"r_"+a.toString(32)+"_";return e.memoizedState=r},useHostTransitionStatus:_d,useFormState:Hg,useActionState:Hg,useOptimistic:function(e){var r=br();r.memoizedState=r.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Ed.bind(null,oe,!0,a),a.dispatch=r,[e,r]},useMemoCache:cd,useCacheRefresh:function(){return br().memoizedState=nS.bind(null,oe)},useEffectEvent:function(e){var r=br(),a={impl:e};return r.memoizedState=a,function(){if((Ne&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},bd={readContext:Zn,use:Fc,useCallback:ty,useContext:Zn,useEffect:pd,useImperativeHandle:Wg,useInsertionEffect:$g,useLayoutEffect:Jg,useMemo:ey,useReducer:Kc,useRef:Yg,useState:function(){return Kc(Fs)},useDebugValue:gd,useDeferredValue:function(e,r){var a=Tn();return ny(a,Be.memoizedState,e,r)},useTransition:function(){var e=Kc(Fs)[0],r=Tn().memoizedState;return[typeof e=="boolean"?e:Eu(e),r]},useSyncExternalStore:Ng,useId:ay,useHostTransitionStatus:_d,useFormState:Fg,useActionState:Fg,useOptimistic:function(e,r){var a=Tn();return Ug(a,Be,e,r)},useMemoCache:cd,useCacheRefresh:oy};bd.useEffectEvent=Xg;var hy={readContext:Zn,use:Fc,useCallback:ty,useContext:Zn,useEffect:pd,useImperativeHandle:Wg,useInsertionEffect:$g,useLayoutEffect:Jg,useMemo:ey,useReducer:hd,useRef:Yg,useState:function(){return hd(Fs)},useDebugValue:gd,useDeferredValue:function(e,r){var a=Tn();return Be===null?yd(a,e,r):ny(a,Be.memoizedState,e,r)},useTransition:function(){var e=hd(Fs)[0],r=Tn().memoizedState;return[typeof e=="boolean"?e:Eu(e),r]},useSyncExternalStore:Ng,useId:ay,useHostTransitionStatus:_d,useFormState:Gg,useActionState:Gg,useOptimistic:function(e,r){var a=Tn();return Be!==null?Ug(a,Be,e,r):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:cd,useCacheRefresh:oy};hy.useEffectEvent=Xg;function Td(e,r,a,l){r=e.memoizedState,a=a(l,r),a=a==null?r:O({},r,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Sd={enqueueSetState:function(e,r,a){e=e._reactInternals;var l=fi(),h=Ma(l);h.payload=r,a!=null&&(h.callback=a),r=Va(e,h,l),r!==null&&(qr(r,e,l),gu(r,e,l))},enqueueReplaceState:function(e,r,a){e=e._reactInternals;var l=fi(),h=Ma(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Va(e,h,l),r!==null&&(qr(r,e,l),gu(r,e,l))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var a=fi(),l=Ma(a);l.tag=2,r!=null&&(l.callback=r),r=Va(e,l,a),r!==null&&(qr(r,e,a),gu(r,e,a))}};function dy(e,r,a,l,h,p,T){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,p,T):r.prototype&&r.prototype.isPureReactComponent?!f(a,l)||!f(h,p):!0}function my(e,r,a,l){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==e&&Sd.enqueueReplaceState(r,r.state,null)}function Lo(e,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(e=e.defaultProps){a===r&&(a=O({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}function py(e){Mt(e)}function gy(e){console.error(e)}function yy(e){Mt(e)}function Xc(e,r){try{var a=e.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function vy(e,r,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Ad(e,r,a){return a=Ma(a),a.tag=3,a.payload={element:null},a.callback=function(){Xc(e,r)},a}function _y(e){return e=Ma(e),e.tag=3,e}function Ey(e,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var p=l.value;e.payload=function(){return h(p)},e.callback=function(){vy(r,a,l)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(e.callback=function(){vy(r,a,l),typeof h!="function"&&(ja===null?ja=new Set([this]):ja.add(this));var C=l.stack;this.componentDidCatch(l.value,{componentStack:C!==null?C:""})})}function iS(e,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&dl(r,a,h,!0),a=oi.current,a!==null){switch(a.tag){case 31:case 13:return Di===null?lf():a.alternate===null&&mn===0&&(mn=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Pc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Xd(e,l,h)),!1;case 22:return a.flags|=65536,l===Pc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Xd(e,l,h)),!1}throw Error(s(435,a.tag))}return Xd(e,l,h),lf(),!1}if(we)return r=oi.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Hh&&(e=Error(s(422),{cause:l}),fu(Ci(e,a)))):(l!==Hh&&(r=Error(s(423),{cause:l}),fu(Ci(r,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=Ci(l,a),h=Ad(e.stateNode,l,h),td(e,h),mn!==4&&(mn=2)),!1;var p=Error(s(520),{cause:l});if(p=Ci(p,a),Du===null?Du=[p]:Du.push(p),mn!==4&&(mn=2),r===null)return!0;l=Ci(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Ad(a.stateNode,l,e),td(a,e),!1;case 1:if(r=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ja===null||!ja.has(p))))return a.flags|=65536,h&=-h,a.lanes|=h,h=_y(h),Ey(h,e,a,l),td(a,h),!1}a=a.return}while(a!==null);return!1}var wd=Error(s(461)),Dn=!1;function Wn(e,r,a,l){r.child=e===null?Ag(r,null,a,l):Po(r,e.child,a,l)}function by(e,r,a,l,h){a=a.render;var p=r.ref;if("ref"in l){var T={};for(var C in l)C!=="ref"&&(T[C]=l[C])}else T=l;return xo(r),l=ad(e,r,a,T,p,h),C=od(),e!==null&&!Dn?(ld(e,r,h),Ks(e,r,h)):(we&&C&&Bh(r),r.flags|=1,Wn(e,r,l,h),r.child)}function Ty(e,r,a,l,h){if(e===null){var p=a.type;return typeof p=="function"&&!Lh(p)&&p.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=p,Sy(e,r,p,l,h)):(e=Dc(a.type,null,l,r,r.mode,h),e.ref=r.ref,e.return=r,r.child=e)}if(p=e.child,!Md(e,h)){var T=p.memoizedProps;if(a=a.compare,a=a!==null?a:f,a(T,l)&&e.ref===r.ref)return Ks(e,r,h)}return r.flags|=1,e=zs(p,l),e.ref=r.ref,e.return=r,r.child=e}function Sy(e,r,a,l,h){if(e!==null){var p=e.memoizedProps;if(f(p,l)&&e.ref===r.ref)if(Dn=!1,r.pendingProps=l=p,Md(e,h))(e.flags&131072)!==0&&(Dn=!0);else return r.lanes=e.lanes,Ks(e,r,h)}return Cd(e,r,a,l,h)}function Ay(e,r,a,l){var h=l.children,p=e!==null?e.memoizedState:null;if(e===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(p=p!==null?p.baseLanes|a:a,e!==null){for(l=r.child=e.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~p}else l=0,r.child=null;return wy(e,r,p,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},e!==null&&Vc(r,p!==null?p.cachePool:null),p!==null?Rg(r,p):nd(),Ig(r);else return l=r.lanes=536870912,wy(e,r,p!==null?p.baseLanes|a:a,a,l)}else p!==null?(Vc(r,p.cachePool),Rg(r,p),Pa(),r.memoizedState=null):(e!==null&&Vc(r,null),nd(),Pa());return Wn(e,r,h,a),r.child}function Su(e,r){return e!==null&&e.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function wy(e,r,a,l,h){var p=$h();return p=p===null?null:{parent:In._currentValue,pool:p},r.memoizedState={baseLanes:a,cachePool:p},e!==null&&Vc(r,null),nd(),Ig(r),e!==null&&dl(e,r,l,!0),r.childLanes=h,null}function $c(e,r){return r=Zc({mode:r.mode,children:r.children},e.mode),r.ref=e.ref,e.child=r,r.return=e,r}function Cy(e,r,a){return Po(r,e.child,null,a),e=$c(r,r.pendingProps),e.flags|=2,li(r),r.memoizedState=null,e}function sS(e,r,a){var l=r.pendingProps,h=(r.flags&128)!==0;if(r.flags&=-129,e===null){if(we){if(l.mode==="hidden")return e=$c(r,l),r.lanes=536870912,Su(null,e);if(id(r),(e=Qe)?(e=Lv(e,Oi),e=e!==null&&e.data==="&"?e:null,e!==null&&(r.memoizedState={dehydrated:e,treeContext:Ia!==null?{id:fs,overflow:hs}:null,retryLane:536870912,hydrationErrors:null},a=ug(e),a.return=r,r.child=a,Jn=r,Qe=null)):e=null,e===null)throw Da(r);return r.lanes=536870912,null}return $c(r,l)}var p=e.memoizedState;if(p!==null){var T=p.dehydrated;if(id(r),h)if(r.flags&256)r.flags&=-257,r=Cy(e,r,a);else if(r.memoizedState!==null)r.child=e.child,r.flags|=128,r=null;else throw Error(s(558));else if(Dn||dl(e,r,a,!1),h=(a&e.childLanes)!==0,Dn||h){if(l=Fe,l!==null&&(T=Je(l,a),T!==0&&T!==p.retryLane))throw p.retryLane=T,Ze(e,T),qr(l,e,T),wd;lf(),r=Cy(e,r,a)}else e=p.treeContext,Qe=Ni(T.nextSibling),Jn=r,we=!0,Oa=null,Oi=!1,e!==null&&hg(r,e),r=$c(r,l),r.flags|=4096;return r}return e=zs(e.child,{mode:l.mode,children:l.children}),e.ref=r.ref,r.child=e,e.return=r,e}function Jc(e,r){var a=r.ref;if(a===null)e!==null&&e.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(r.flags|=4194816)}}function Cd(e,r,a,l,h){return xo(r),a=ad(e,r,a,l,void 0,h),l=od(),e!==null&&!Dn?(ld(e,r,h),Ks(e,r,h)):(we&&l&&Bh(r),r.flags|=1,Wn(e,r,a,h),r.child)}function Ry(e,r,a,l,h,p){return xo(r),r.updateQueue=null,a=Dg(r,l,a,h),Og(e),l=od(),e!==null&&!Dn?(ld(e,r,p),Ks(e,r,p)):(we&&l&&Bh(r),r.flags|=1,Wn(e,r,a,p),r.child)}function Iy(e,r,a,l,h){if(xo(r),r.stateNode===null){var p=Ur,T=a.contextType;typeof T=="object"&&T!==null&&(p=Zn(T)),p=new a(l,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Sd,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=l,p.state=r.memoizedState,p.refs={},Zh(r),T=a.contextType,p.context=typeof T=="object"&&T!==null?Zn(T):Ur,p.state=r.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(Td(r,a,T,l),p.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&Sd.enqueueReplaceState(p,p.state,null),vu(r,l,p,h),yu(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(e===null){p=r.stateNode;var C=r.memoizedProps,U=Lo(a,C);p.props=U;var rt=p.context,ct=a.contextType;T=Ur,typeof ct=="object"&&ct!==null&&(T=Zn(ct));var pt=a.getDerivedStateFromProps;ct=typeof pt=="function"||typeof p.getSnapshotBeforeUpdate=="function",C=r.pendingProps!==C,ct||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(C||rt!==T)&&my(r,p,l,T),xa=!1;var st=r.memoizedState;p.state=st,vu(r,l,p,h),yu(),rt=r.memoizedState,C||st!==rt||xa?(typeof pt=="function"&&(Td(r,a,pt,l),rt=r.memoizedState),(U=xa||dy(r,a,U,l,st,rt,T))?(ct||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=rt),p.props=l,p.state=rt,p.context=T,l=U):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{p=r.stateNode,Wh(e,r),T=r.memoizedProps,ct=Lo(a,T),p.props=ct,pt=r.pendingProps,st=p.context,rt=a.contextType,U=Ur,typeof rt=="object"&&rt!==null&&(U=Zn(rt)),C=a.getDerivedStateFromProps,(rt=typeof C=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==pt||st!==U)&&my(r,p,l,U),xa=!1,st=r.memoizedState,p.state=st,vu(r,l,p,h),yu();var ot=r.memoizedState;T!==pt||st!==ot||xa||e!==null&&e.dependencies!==null&&xc(e.dependencies)?(typeof C=="function"&&(Td(r,a,C,l),ot=r.memoizedState),(ct=xa||dy(r,a,ct,l,st,ot,U)||e!==null&&e.dependencies!==null&&xc(e.dependencies))?(rt||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,ot,U),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,ot,U)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===e.memoizedProps&&st===e.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&st===e.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=ot),p.props=l,p.state=ot,p.context=U,l=ct):(typeof p.componentDidUpdate!="function"||T===e.memoizedProps&&st===e.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&st===e.memoizedState||(r.flags|=1024),l=!1)}return p=l,Jc(e,r),l=(r.flags&128)!==0,p||l?(p=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,e!==null&&l?(r.child=Po(r,e.child,null,h),r.child=Po(r,null,a,h)):Wn(e,r,a,h),r.memoizedState=p.state,e=r.child):e=Ks(e,r,h),e}function Oy(e,r,a,l){return Do(),r.flags|=256,Wn(e,r,a,l),r.child}var Rd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Id(e){return{baseLanes:e,cachePool:vg()}}function Od(e,r,a){return e=e!==null?e.childLanes&~a:0,r&&(e|=ci),e}function Dy(e,r,a){var l=r.pendingProps,h=!1,p=(r.flags&128)!==0,T;if((T=p)||(T=e!==null&&e.memoizedState===null?!1:(bn.current&2)!==0),T&&(h=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,e===null){if(we){if(h?ka(r):Pa(),(e=Qe)?(e=Lv(e,Oi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(r.memoizedState={dehydrated:e,treeContext:Ia!==null?{id:fs,overflow:hs}:null,retryLane:536870912,hydrationErrors:null},a=ug(e),a.return=r,r.child=a,Jn=r,Qe=null)):e=null,e===null)throw Da(r);return fm(e)?r.lanes=32:r.lanes=536870912,null}var C=l.children;return l=l.fallback,h?(Pa(),h=r.mode,C=Zc({mode:"hidden",children:C},h),l=Oo(l,h,a,null),C.return=r,l.return=r,C.sibling=l,r.child=C,l=r.child,l.memoizedState=Id(a),l.childLanes=Od(e,T,a),r.memoizedState=Rd,Su(null,l)):(ka(r),Dd(r,C))}var U=e.memoizedState;if(U!==null&&(C=U.dehydrated,C!==null)){if(p)r.flags&256?(ka(r),r.flags&=-257,r=Nd(e,r,a)):r.memoizedState!==null?(Pa(),r.child=e.child,r.flags|=128,r=null):(Pa(),C=l.fallback,h=r.mode,l=Zc({mode:"visible",children:l.children},h),C=Oo(C,h,a,null),C.flags|=2,l.return=r,C.return=r,l.sibling=C,r.child=l,Po(r,e.child,null,a),l=r.child,l.memoizedState=Id(a),l.childLanes=Od(e,T,a),r.memoizedState=Rd,r=Su(null,l));else if(ka(r),fm(C)){if(T=C.nextSibling&&C.nextSibling.dataset,T)var rt=T.dgst;T=rt,l=Error(s(419)),l.stack="",l.digest=T,fu({value:l,source:null,stack:null}),r=Nd(e,r,a)}else if(Dn||dl(e,r,a,!1),T=(a&e.childLanes)!==0,Dn||T){if(T=Fe,T!==null&&(l=Je(T,a),l!==0&&l!==U.retryLane))throw U.retryLane=l,Ze(e,l),qr(T,e,l),wd;cm(C)||lf(),r=Nd(e,r,a)}else cm(C)?(r.flags|=192,r.child=e.child,r=null):(e=U.treeContext,Qe=Ni(C.nextSibling),Jn=r,we=!0,Oa=null,Oi=!1,e!==null&&hg(r,e),r=Dd(r,l.children),r.flags|=4096);return r}return h?(Pa(),C=l.fallback,h=r.mode,U=e.child,rt=U.sibling,l=zs(U,{mode:"hidden",children:l.children}),l.subtreeFlags=U.subtreeFlags&65011712,rt!==null?C=zs(rt,C):(C=Oo(C,h,a,null),C.flags|=2),C.return=r,l.return=r,l.sibling=C,r.child=l,Su(null,l),l=r.child,C=e.child.memoizedState,C===null?C=Id(a):(h=C.cachePool,h!==null?(U=In._currentValue,h=h.parent!==U?{parent:U,pool:U}:h):h=vg(),C={baseLanes:C.baseLanes|a,cachePool:h}),l.memoizedState=C,l.childLanes=Od(e,T,a),r.memoizedState=Rd,Su(e.child,l)):(ka(r),a=e.child,e=a.sibling,a=zs(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,e!==null&&(T=r.deletions,T===null?(r.deletions=[e],r.flags|=16):T.push(e)),r.child=a,r.memoizedState=null,a)}function Dd(e,r){return r=Zc({mode:"visible",children:r},e.mode),r.return=e,e.child=r}function Zc(e,r){return e=ai(22,e,null,r),e.lanes=0,e}function Nd(e,r,a){return Po(r,e.child,null,a),e=Dd(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function Ny(e,r,a){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r),Gh(e.return,r,a)}function xd(e,r,a,l,h,p){var T=e.memoizedState;T===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:p}:(T.isBackwards=r,T.rendering=null,T.renderingStartTime=0,T.last=l,T.tail=a,T.tailMode=h,T.treeForkCount=p)}function xy(e,r,a){var l=r.pendingProps,h=l.revealOrder,p=l.tail;l=l.children;var T=bn.current,C=(T&2)!==0;if(C?(T=T&1|2,r.flags|=128):T&=1,Rt(bn,T),Wn(e,r,l,a),l=we?cu:0,!C&&e!==null&&(e.flags&128)!==0)t:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ny(e,a,r);else if(e.tag===19)Ny(e,a,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break t;for(;e.sibling===null;){if(e.return===null||e.return===r)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(a=r.child,h=null;a!==null;)e=a.alternate,e!==null&&jc(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),xd(r,!1,h,a,p,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(e=h.alternate,e!==null&&jc(e)===null){r.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}xd(r,!0,a,null,p,l);break;case"together":xd(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function Ks(e,r,a){if(e!==null&&(r.dependencies=e.dependencies),za|=r.lanes,(a&r.childLanes)===0)if(e!==null){if(dl(e,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(e!==null&&r.child!==e.child)throw Error(s(153));if(r.child!==null){for(e=r.child,a=zs(e,e.pendingProps),r.child=a,a.return=r;e.sibling!==null;)e=e.sibling,a=a.sibling=zs(e,e.pendingProps),a.return=r;a.sibling=null}return r.child}function Md(e,r){return(e.lanes&r)!==0?!0:(e=e.dependencies,!!(e!==null&&xc(e)))}function aS(e,r,a){switch(r.tag){case 3:pn(r,r.stateNode.containerInfo),Na(r,In,e.memoizedState.cache),Do();break;case 27:case 5:ts(r);break;case 4:pn(r,r.stateNode.containerInfo);break;case 10:Na(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,id(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(ka(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Dy(e,r,a):(ka(r),e=Ks(e,r,a),e!==null?e.sibling:null);ka(r);break;case 19:var h=(e.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(dl(e,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return xy(e,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Rt(bn,bn.current),l)break;return null;case 22:return r.lanes=0,Ay(e,r,a,r.pendingProps);case 24:Na(r,In,e.memoizedState.cache)}return Ks(e,r,a)}function My(e,r,a){if(e!==null)if(e.memoizedProps!==r.pendingProps)Dn=!0;else{if(!Md(e,a)&&(r.flags&128)===0)return Dn=!1,aS(e,r,a);Dn=(e.flags&131072)!==0}else Dn=!1,we&&(r.flags&1048576)!==0&&fg(r,cu,r.index);switch(r.lanes=0,r.tag){case 16:t:{var l=r.pendingProps;if(e=Vo(r.elementType),r.type=e,typeof e=="function")Lh(e)?(l=Lo(e,l),r.tag=1,r=Iy(null,r,e,l,a)):(r.tag=0,r=Cd(null,r,e,l,a));else{if(e!=null){var h=e.$$typeof;if(h===ue){r.tag=11,r=by(null,r,e,l,a);break t}else if(h===M){r.tag=14,r=Ty(null,r,e,l,a);break t}}throw r=Ke(e)||e,Error(s(306,r,""))}}return r;case 0:return Cd(e,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=Lo(l,r.pendingProps),Iy(e,r,l,h,a);case 3:t:{if(pn(r,r.stateNode.containerInfo),e===null)throw Error(s(387));l=r.pendingProps;var p=r.memoizedState;h=p.element,Wh(e,r),vu(r,l,null,a);var T=r.memoizedState;if(l=T.cache,Na(r,In,l),l!==p.cache&&Yh(r,[In],a,!0),yu(),l=T.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=Oy(e,r,l,a);break t}else if(l!==h){h=Ci(Error(s(424)),r),fu(h),r=Oy(e,r,l,a);break t}else{switch(e=r.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Qe=Ni(e.firstChild),Jn=r,we=!0,Oa=null,Oi=!0,a=Ag(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Do(),l===h){r=Ks(e,r,a);break t}Wn(e,r,l,a)}r=r.child}return r;case 26:return Jc(e,r),e===null?(a=Fv(r.type,null,r.pendingProps,null))?r.memoizedState=a:we||(a=r.type,e=r.pendingProps,l=pf($t.current).createElement(a),l[ke]=r,l[Ge]=e,tr(l,a,e),rn(l),r.stateNode=l):r.memoizedState=Fv(r.type,e.memoizedProps,r.pendingProps,e.memoizedState),null;case 27:return ts(r),e===null&&we&&(l=r.stateNode=Bv(r.type,r.pendingProps,$t.current),Jn=r,Oi=!0,h=Qe,Fa(r.type)?(hm=h,Qe=Ni(l.firstChild)):Qe=h),Wn(e,r,r.pendingProps.children,a),Jc(e,r),e===null&&(r.flags|=4194304),r.child;case 5:return e===null&&we&&((h=l=Qe)&&(l=PS(l,r.type,r.pendingProps,Oi),l!==null?(r.stateNode=l,Jn=r,Qe=Ni(l.firstChild),Oi=!1,h=!0):h=!1),h||Da(r)),ts(r),h=r.type,p=r.pendingProps,T=e!==null?e.memoizedProps:null,l=p.children,om(h,p)?l=null:T!==null&&om(h,T)&&(r.flags|=32),r.memoizedState!==null&&(h=ad(e,r,JT,null,null,a),Lu._currentValue=h),Jc(e,r),Wn(e,r,l,a),r.child;case 6:return e===null&&we&&((e=a=Qe)&&(a=US(a,r.pendingProps,Oi),a!==null?(r.stateNode=a,Jn=r,Qe=null,e=!0):e=!1),e||Da(r)),null;case 13:return Dy(e,r,a);case 4:return pn(r,r.stateNode.containerInfo),l=r.pendingProps,e===null?r.child=Po(r,null,l,a):Wn(e,r,l,a),r.child;case 11:return by(e,r,r.type,r.pendingProps,a);case 7:return Wn(e,r,r.pendingProps,a),r.child;case 8:return Wn(e,r,r.pendingProps.children,a),r.child;case 12:return Wn(e,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Na(r,r.type,l.value),Wn(e,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,xo(r),h=Zn(h),l=l(h),r.flags|=1,Wn(e,r,l,a),r.child;case 14:return Ty(e,r,r.type,r.pendingProps,a);case 15:return Sy(e,r,r.type,r.pendingProps,a);case 19:return xy(e,r,a);case 31:return sS(e,r,a);case 22:return Ay(e,r,a,r.pendingProps);case 24:return xo(r),l=Zn(In),e===null?(h=$h(),h===null&&(h=Fe,p=Qh(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=a),h=p),r.memoizedState={parent:l,cache:h},Zh(r),Na(r,In,h)):((e.lanes&a)!==0&&(Wh(e,r),vu(r,null,null,a),yu()),h=e.memoizedState,p=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Na(r,In,l)):(l=p.cache,Na(r,In,l),l!==h.cache&&Yh(r,[In],a,!0))),Wn(e,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Gs(e){e.flags|=4}function Vd(e,r,a,l,h){if((r=(e.mode&32)!==0)&&(r=!1),r){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(av())e.flags|=8192;else throw ko=Pc,Jh}else e.flags&=-16777217}function Vy(e,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Xv(r))if(av())e.flags|=8192;else throw ko=Pc,Jh}function Wc(e,r){r!==null&&(e.flags|=4),e.flags&16384&&(r=e.tag!==22?il():536870912,e.lanes|=r,wl|=r)}function Au(e,r){if(!we)switch(e.tailMode){case"hidden":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Xe(e){var r=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(r)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=a,r}function oS(e,r,a){var l=r.pendingProps;switch(qh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(r),null;case 1:return Xe(r),null;case 3:return a=r.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),qs(In),Nt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(hl(r)?Gs(r):e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Fh())),Xe(r),null;case 26:var h=r.type,p=r.memoizedState;return e===null?(Gs(r),p!==null?(Xe(r),Vy(r,p)):(Xe(r),Vd(r,h,null,l,a))):p?p!==e.memoizedState?(Gs(r),Xe(r),Vy(r,p)):(Xe(r),r.flags&=-16777217):(e=e.memoizedProps,e!==l&&Gs(r),Xe(r),Vd(r,h,e,l,a)),null;case 27:if(Ui(r),a=$t.current,h=r.type,e!==null&&r.stateNode!=null)e.memoizedProps!==l&&Gs(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Xe(r),null}e=Vt.current,hl(r)?dg(r):(e=Bv(h,l,a),r.stateNode=e,Gs(r))}return Xe(r),null;case 5:if(Ui(r),h=r.type,e!==null&&r.stateNode!=null)e.memoizedProps!==l&&Gs(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Xe(r),null}if(p=Vt.current,hl(r))dg(r);else{var T=pf($t.current);switch(p){case 1:p=T.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:p=T.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":p=T.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":p=T.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":p=T.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?T.createElement("select",{is:l.is}):T.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?T.createElement(h,{is:l.is}):T.createElement(h)}}p[ke]=r,p[Ge]=l;t:for(T=r.child;T!==null;){if(T.tag===5||T.tag===6)p.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===r)break t;for(;T.sibling===null;){if(T.return===null||T.return===r)break t;T=T.return}T.sibling.return=T.return,T=T.sibling}r.stateNode=p;t:switch(tr(p,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&Gs(r)}}return Xe(r),Vd(r,r.type,e===null?null:e.memoizedProps,r.pendingProps,a),null;case 6:if(e&&r.stateNode!=null)e.memoizedProps!==l&&Gs(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(e=$t.current,hl(r)){if(e=r.stateNode,a=r.memoizedProps,l=null,h=Jn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[ke]=r,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Dv(e.nodeValue,a)),e||Da(r,!0)}else e=pf(e).createTextNode(l),e[ke]=r,r.stateNode=e}return Xe(r),null;case 31:if(a=r.memoizedState,e===null||e.memoizedState!==null){if(l=hl(r),a!==null){if(e===null){if(!l)throw Error(s(318));if(e=r.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[ke]=r}else Do(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Xe(r),e=!1}else a=Fh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return r.flags&256?(li(r),r):(li(r),null);if((r.flags&128)!==0)throw Error(s(558))}return Xe(r),null;case 13:if(l=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=hl(r),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[ke]=r}else Do(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Xe(r),h=!1}else h=Fh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(li(r),r):(li(r),null)}return li(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==h&&(l.flags|=2048)),a!==e&&a&&(r.child.flags|=8192),Wc(r,r.updateQueue),Xe(r),null);case 4:return Nt(),e===null&&nm(r.stateNode.containerInfo),Xe(r),null;case 10:return qs(r.type),Xe(r),null;case 19:if(ht(bn),l=r.memoizedState,l===null)return Xe(r),null;if(h=(r.flags&128)!==0,p=l.rendering,p===null)if(h)Au(l,!1);else{if(mn!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(p=jc(e),p!==null){for(r.flags|=128,Au(l,!1),e=p.updateQueue,r.updateQueue=e,Wc(r,e),r.subtreeFlags=0,e=a,a=r.child;a!==null;)lg(a,e),a=a.sibling;return Rt(bn,bn.current&1|2),we&&js(r,l.treeForkCount),r.child}e=e.sibling}l.tail!==null&&jn()>sf&&(r.flags|=128,h=!0,Au(l,!1),r.lanes=4194304)}else{if(!h)if(e=jc(p),e!==null){if(r.flags|=128,h=!0,e=e.updateQueue,r.updateQueue=e,Wc(r,e),Au(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!we)return Xe(r),null}else 2*jn()-l.renderingStartTime>sf&&a!==536870912&&(r.flags|=128,h=!0,Au(l,!1),r.lanes=4194304);l.isBackwards?(p.sibling=r.child,r.child=p):(e=l.last,e!==null?e.sibling=p:r.child=p,l.last=p)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=jn(),e.sibling=null,a=bn.current,Rt(bn,h?a&1|2:a&1),we&&js(r,l.treeForkCount),e):(Xe(r),null);case 22:case 23:return li(r),rd(),l=r.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(Xe(r),r.subtreeFlags&6&&(r.flags|=8192)):Xe(r),a=r.updateQueue,a!==null&&Wc(r,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),e!==null&&ht(Mo),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),qs(In),Xe(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function lS(e,r){switch(qh(r),r.tag){case 1:return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return qs(In),Nt(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 26:case 27:case 5:return Ui(r),null;case 31:if(r.memoizedState!==null){if(li(r),r.alternate===null)throw Error(s(340));Do()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 13:if(li(r),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Do()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return ht(bn),null;case 4:return Nt(),null;case 10:return qs(r.type),null;case 22:case 23:return li(r),rd(),e!==null&&ht(Mo),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 24:return qs(In),null;case 25:return null;default:return null}}function ky(e,r){switch(qh(r),r.tag){case 3:qs(In),Nt();break;case 26:case 27:case 5:Ui(r);break;case 4:Nt();break;case 31:r.memoizedState!==null&&li(r);break;case 13:li(r);break;case 19:ht(bn);break;case 10:qs(r.type);break;case 22:case 23:li(r),rd(),e!==null&&ht(Mo);break;case 24:qs(In)}}function wu(e,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&e)===e){l=void 0;var p=a.create,T=a.inst;l=p(),T.destroy=l}a=a.next}while(a!==h)}}catch(C){ze(r,r.return,C)}}function Ua(e,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var p=h.next;l=p;do{if((l.tag&e)===e){var T=l.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,h=r;var U=a,rt=C;try{rt()}catch(ct){ze(h,U,ct)}}}l=l.next}while(l!==p)}}catch(ct){ze(r,r.return,ct)}}function Py(e){var r=e.updateQueue;if(r!==null){var a=e.stateNode;try{Cg(r,a)}catch(l){ze(e,e.return,l)}}}function Uy(e,r,a){a.props=Lo(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){ze(e,r,l)}}function Cu(e,r){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(h){ze(e,r,h)}}function ds(e,r){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ze(e,r,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ze(e,r,h)}else a.current=null}function Ly(e){var r=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ze(e,e.return,h)}}function kd(e,r,a){try{var l=e.stateNode;DS(l,e.type,a,r),l[Ge]=r}catch(h){ze(e,e.return,h)}}function zy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Fa(e.type)||e.tag===4}function Pd(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||zy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Fa(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ud(e,r,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(e),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=or));else if(l!==4&&(l===27&&Fa(e.type)&&(a=e.stateNode,r=null),e=e.child,e!==null))for(Ud(e,r,a),e=e.sibling;e!==null;)Ud(e,r,a),e=e.sibling}function tf(e,r,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,r?a.insertBefore(e,r):a.appendChild(e);else if(l!==4&&(l===27&&Fa(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(tf(e,r,a),e=e.sibling;e!==null;)tf(e,r,a),e=e.sibling}function jy(e){var r=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);tr(r,l,a),r[ke]=e,r[Ge]=a}catch(p){ze(e,e.return,p)}}var Ys=!1,Nn=!1,Ld=!1,By=typeof WeakSet=="function"?WeakSet:Set,Kn=null;function uS(e,r){if(e=e.containerInfo,sm=Tf,e=A(e),w(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break t}var T=0,C=-1,U=-1,rt=0,ct=0,pt=e,st=null;e:for(;;){for(var ot;pt!==a||h!==0&&pt.nodeType!==3||(C=T+h),pt!==p||l!==0&&pt.nodeType!==3||(U=T+l),pt.nodeType===3&&(T+=pt.nodeValue.length),(ot=pt.firstChild)!==null;)st=pt,pt=ot;for(;;){if(pt===e)break e;if(st===a&&++rt===h&&(C=T),st===p&&++ct===l&&(U=T),(ot=pt.nextSibling)!==null)break;pt=st,st=pt.parentNode}pt=ot}a=C===-1||U===-1?null:{start:C,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(am={focusedElem:e,selectionRange:a},Tf=!1,Kn=r;Kn!==null;)if(r=Kn,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,Kn=e;else for(;Kn!==null;){switch(r=Kn,p=r.alternate,e=r.flags,r.tag){case 0:if((e&4)!==0&&(e=r.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)h=e[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&p!==null){e=void 0,a=r,h=p.memoizedProps,p=p.memoizedState,l=a.stateNode;try{var Pt=Lo(a.type,h);e=l.getSnapshotBeforeUpdate(Pt,p),l.__reactInternalSnapshotBeforeUpdate=e}catch(Qt){ze(a,a.return,Qt)}}break;case 3:if((e&1024)!==0){if(e=r.stateNode.containerInfo,a=e.nodeType,a===9)um(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":um(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=r.sibling,e!==null){e.return=r.return,Kn=e;break}Kn=r.return}}function qy(e,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Xs(e,a),l&4&&wu(5,a);break;case 1:if(Xs(e,a),l&4)if(e=a.stateNode,r===null)try{e.componentDidMount()}catch(T){ze(a,a.return,T)}else{var h=Lo(a.type,r.memoizedProps);r=r.memoizedState;try{e.componentDidUpdate(h,r,e.__reactInternalSnapshotBeforeUpdate)}catch(T){ze(a,a.return,T)}}l&64&&Py(a),l&512&&Cu(a,a.return);break;case 3:if(Xs(e,a),l&64&&(e=a.updateQueue,e!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Cg(e,r)}catch(T){ze(a,a.return,T)}}break;case 27:r===null&&l&4&&jy(a);case 26:case 5:Xs(e,a),r===null&&l&4&&Ly(a),l&512&&Cu(a,a.return);break;case 12:Xs(e,a);break;case 31:Xs(e,a),l&4&&Ky(e,a);break;case 13:Xs(e,a),l&4&&Gy(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=vS.bind(null,a),LS(e,a))));break;case 22:if(l=a.memoizedState!==null||Ys,!l){r=r!==null&&r.memoizedState!==null||Nn,h=Ys;var p=Nn;Ys=l,(Nn=r)&&!p?$s(e,a,(a.subtreeFlags&8772)!==0):Xs(e,a),Ys=h,Nn=p}break;case 30:break;default:Xs(e,a)}}function Hy(e){var r=e.alternate;r!==null&&(e.alternate=null,Hy(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&Ns(r)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var We=null,Lr=!1;function Qs(e,r,a){for(a=a.child;a!==null;)Fy(e,r,a),a=a.sibling}function Fy(e,r,a){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(ir,a)}catch{}switch(a.tag){case 26:Nn||ds(a,r),Qs(e,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Nn||ds(a,r);var l=We,h=Lr;Fa(a.type)&&(We=a.stateNode,Lr=!1),Qs(e,r,a),ku(a.stateNode),We=l,Lr=h;break;case 5:Nn||ds(a,r);case 6:if(l=We,h=Lr,We=null,Qs(e,r,a),We=l,Lr=h,We!==null)if(Lr)try{(We.nodeType===9?We.body:We.nodeName==="HTML"?We.ownerDocument.body:We).removeChild(a.stateNode)}catch(p){ze(a,r,p)}else try{We.removeChild(a.stateNode)}catch(p){ze(a,r,p)}break;case 18:We!==null&&(Lr?(e=We,Pv(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ml(e)):Pv(We,a.stateNode));break;case 4:l=We,h=Lr,We=a.stateNode.containerInfo,Lr=!0,Qs(e,r,a),We=l,Lr=h;break;case 0:case 11:case 14:case 15:Ua(2,a,r),Nn||Ua(4,a,r),Qs(e,r,a);break;case 1:Nn||(ds(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Uy(a,r,l)),Qs(e,r,a);break;case 21:Qs(e,r,a);break;case 22:Nn=(l=Nn)||a.memoizedState!==null,Qs(e,r,a),Nn=l;break;default:Qs(e,r,a)}}function Ky(e,r){if(r.memoizedState===null&&(e=r.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ml(e)}catch(a){ze(r,r.return,a)}}}function Gy(e,r){if(r.memoizedState===null&&(e=r.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ml(e)}catch(a){ze(r,r.return,a)}}function cS(e){switch(e.tag){case 31:case 13:case 19:var r=e.stateNode;return r===null&&(r=e.stateNode=new By),r;case 22:return e=e.stateNode,r=e._retryCache,r===null&&(r=e._retryCache=new By),r;default:throw Error(s(435,e.tag))}}function ef(e,r){var a=cS(e);r.forEach(function(l){if(!a.has(l)){a.add(l);var h=_S.bind(null,e,l);l.then(h,h)}})}function zr(e,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],p=e,T=r,C=T;t:for(;C!==null;){switch(C.tag){case 27:if(Fa(C.type)){We=C.stateNode,Lr=!1;break t}break;case 5:We=C.stateNode,Lr=!1;break t;case 3:case 4:We=C.stateNode.containerInfo,Lr=!0;break t}C=C.return}if(We===null)throw Error(s(160));Fy(p,T,h),We=null,Lr=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Yy(r,e),r=r.sibling}var Yi=null;function Yy(e,r){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:zr(r,e),jr(e),l&4&&(Ua(3,e,e.return),wu(3,e),Ua(5,e,e.return));break;case 1:zr(r,e),jr(e),l&512&&(Nn||a===null||ds(a,a.return)),l&64&&Ys&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Yi;if(zr(r,e),jr(e),l&512&&(Nn||a===null||ds(a,a.return)),l&4){var p=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":p=h.getElementsByTagName("title")[0],(!p||p[Bn]||p[ke]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(l),h.head.insertBefore(p,h.querySelector("head > title"))),tr(p,l,a),p[ke]=e,rn(p),l=p;break t;case"link":var T=Yv("link","href",h).get(l+(a.href||""));if(T){for(var C=0;C<T.length;C++)if(p=T[C],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(C,1);break e}}p=h.createElement(l),tr(p,l,a),h.head.appendChild(p);break;case"meta":if(T=Yv("meta","content",h).get(l+(a.content||""))){for(C=0;C<T.length;C++)if(p=T[C],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(C,1);break e}}p=h.createElement(l),tr(p,l,a),h.head.appendChild(p);break;default:throw Error(s(468,l))}p[ke]=e,rn(p),l=p}e.stateNode=l}else Qv(h,e.type,e.stateNode);else e.stateNode=Gv(h,l,e.memoizedProps);else p!==l?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,l===null?Qv(h,e.type,e.stateNode):Gv(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&kd(e,e.memoizedProps,a.memoizedProps)}break;case 27:zr(r,e),jr(e),l&512&&(Nn||a===null||ds(a,a.return)),a!==null&&l&4&&kd(e,e.memoizedProps,a.memoizedProps);break;case 5:if(zr(r,e),jr(e),l&512&&(Nn||a===null||ds(a,a.return)),e.flags&32){h=e.stateNode;try{$n(h,"")}catch(Pt){ze(e,e.return,Pt)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,kd(e,h,a!==null?a.memoizedProps:h)),l&1024&&(Ld=!0);break;case 6:if(zr(r,e),jr(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(Pt){ze(e,e.return,Pt)}}break;case 3:if(vf=null,h=Yi,Yi=gf(r.containerInfo),zr(r,e),Yi=h,jr(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ml(r.containerInfo)}catch(Pt){ze(e,e.return,Pt)}Ld&&(Ld=!1,Qy(e));break;case 4:l=Yi,Yi=gf(e.stateNode.containerInfo),zr(r,e),jr(e),Yi=l;break;case 12:zr(r,e),jr(e);break;case 31:zr(r,e),jr(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ef(e,l)));break;case 13:zr(r,e),jr(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(rf=jn()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ef(e,l)));break;case 22:h=e.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,rt=Ys,ct=Nn;if(Ys=rt||h,Nn=ct||U,zr(r,e),Nn=ct,Ys=rt,jr(e),l&8192)t:for(r=e.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||U||Ys||Nn||zo(e)),a=null,r=e;;){if(r.tag===5||r.tag===26){if(a===null){U=a=r;try{if(p=U.stateNode,h)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{C=U.stateNode;var pt=U.memoizedProps.style,st=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;C.style.display=st==null||typeof st=="boolean"?"":(""+st).trim()}}catch(Pt){ze(U,U.return,Pt)}}}else if(r.tag===6){if(a===null){U=r;try{U.stateNode.nodeValue=h?"":U.memoizedProps}catch(Pt){ze(U,U.return,Pt)}}}else if(r.tag===18){if(a===null){U=r;try{var ot=U.stateNode;h?Uv(ot,!0):Uv(U.stateNode,!1)}catch(Pt){ze(U,U.return,Pt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break t;for(;r.sibling===null;){if(r.return===null||r.return===e)break t;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ef(e,a))));break;case 19:zr(r,e),jr(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ef(e,l)));break;case 30:break;case 21:break;default:zr(r,e),jr(e)}}function jr(e){var r=e.flags;if(r&2){try{for(var a,l=e.return;l!==null;){if(zy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,p=Pd(e);tf(e,p,h);break;case 5:var T=a.stateNode;a.flags&32&&($n(T,""),a.flags&=-33);var C=Pd(e);tf(e,C,T);break;case 3:case 4:var U=a.stateNode.containerInfo,rt=Pd(e);Ud(e,rt,U);break;default:throw Error(s(161))}}catch(ct){ze(e,e.return,ct)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function Qy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var r=e;Qy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),e=e.sibling}}function Xs(e,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)qy(e,r.alternate,r),r=r.sibling}function zo(e){for(e=e.child;e!==null;){var r=e;switch(r.tag){case 0:case 11:case 14:case 15:Ua(4,r,r.return),zo(r);break;case 1:ds(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Uy(r,r.return,a),zo(r);break;case 27:ku(r.stateNode);case 26:case 5:ds(r,r.return),zo(r);break;case 22:r.memoizedState===null&&zo(r);break;case 30:zo(r);break;default:zo(r)}e=e.sibling}}function $s(e,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=e,p=r,T=p.flags;switch(p.tag){case 0:case 11:case 15:$s(h,p,a),wu(4,p);break;case 1:if($s(h,p,a),l=p,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(rt){ze(l,l.return,rt)}if(l=p,h=l.updateQueue,h!==null){var C=l.stateNode;try{var U=h.shared.hiddenCallbacks;if(U!==null)for(h.shared.hiddenCallbacks=null,h=0;h<U.length;h++)wg(U[h],C)}catch(rt){ze(l,l.return,rt)}}a&&T&64&&Py(p),Cu(p,p.return);break;case 27:jy(p);case 26:case 5:$s(h,p,a),a&&l===null&&T&4&&Ly(p),Cu(p,p.return);break;case 12:$s(h,p,a);break;case 31:$s(h,p,a),a&&T&4&&Ky(h,p);break;case 13:$s(h,p,a),a&&T&4&&Gy(h,p);break;case 22:p.memoizedState===null&&$s(h,p,a),Cu(p,p.return);break;case 30:break;default:$s(h,p,a)}r=r.sibling}}function zd(e,r){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(e=r.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&hu(a))}function jd(e,r){e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&hu(e))}function Qi(e,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Xy(e,r,a,l),r=r.sibling}function Xy(e,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Qi(e,r,a,l),h&2048&&wu(9,r);break;case 1:Qi(e,r,a,l);break;case 3:Qi(e,r,a,l),h&2048&&(e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&hu(e)));break;case 12:if(h&2048){Qi(e,r,a,l),e=r.stateNode;try{var p=r.memoizedProps,T=p.id,C=p.onPostCommit;typeof C=="function"&&C(T,r.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(U){ze(r,r.return,U)}}else Qi(e,r,a,l);break;case 31:Qi(e,r,a,l);break;case 13:Qi(e,r,a,l);break;case 23:break;case 22:p=r.stateNode,T=r.alternate,r.memoizedState!==null?p._visibility&2?Qi(e,r,a,l):Ru(e,r):p._visibility&2?Qi(e,r,a,l):(p._visibility|=2,Tl(e,r,a,l,(r.subtreeFlags&10256)!==0||!1)),h&2048&&zd(T,r);break;case 24:Qi(e,r,a,l),h&2048&&jd(r.alternate,r);break;default:Qi(e,r,a,l)}}function Tl(e,r,a,l,h){for(h=h&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var p=e,T=r,C=a,U=l,rt=T.flags;switch(T.tag){case 0:case 11:case 15:Tl(p,T,C,U,h),wu(8,T);break;case 23:break;case 22:var ct=T.stateNode;T.memoizedState!==null?ct._visibility&2?Tl(p,T,C,U,h):Ru(p,T):(ct._visibility|=2,Tl(p,T,C,U,h)),h&&rt&2048&&zd(T.alternate,T);break;case 24:Tl(p,T,C,U,h),h&&rt&2048&&jd(T.alternate,T);break;default:Tl(p,T,C,U,h)}r=r.sibling}}function Ru(e,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=e,l=r,h=l.flags;switch(l.tag){case 22:Ru(a,l),h&2048&&zd(l.alternate,l);break;case 24:Ru(a,l),h&2048&&jd(l.alternate,l);break;default:Ru(a,l)}r=r.sibling}}var Iu=8192;function Sl(e,r,a){if(e.subtreeFlags&Iu)for(e=e.child;e!==null;)$y(e,r,a),e=e.sibling}function $y(e,r,a){switch(e.tag){case 26:Sl(e,r,a),e.flags&Iu&&e.memoizedState!==null&&$S(a,Yi,e.memoizedState,e.memoizedProps);break;case 5:Sl(e,r,a);break;case 3:case 4:var l=Yi;Yi=gf(e.stateNode.containerInfo),Sl(e,r,a),Yi=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Iu,Iu=16777216,Sl(e,r,a),Iu=l):Sl(e,r,a));break;default:Sl(e,r,a)}}function Jy(e){var r=e.alternate;if(r!==null&&(e=r.child,e!==null)){r.child=null;do r=e.sibling,e.sibling=null,e=r;while(e!==null)}}function Ou(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Kn=l,Wy(l,e)}Jy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Zy(e),e=e.sibling}function Zy(e){switch(e.tag){case 0:case 11:case 15:Ou(e),e.flags&2048&&Ua(9,e,e.return);break;case 3:Ou(e);break;case 12:Ou(e);break;case 22:var r=e.stateNode;e.memoizedState!==null&&r._visibility&2&&(e.return===null||e.return.tag!==13)?(r._visibility&=-3,nf(e)):Ou(e);break;default:Ou(e)}}function nf(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Kn=l,Wy(l,e)}Jy(e)}for(e=e.child;e!==null;){switch(r=e,r.tag){case 0:case 11:case 15:Ua(8,r,r.return),nf(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,nf(r));break;default:nf(r)}e=e.sibling}}function Wy(e,r){for(;Kn!==null;){var a=Kn;switch(a.tag){case 0:case 11:case 15:Ua(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:hu(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Kn=l;else t:for(a=e;Kn!==null;){l=Kn;var h=l.sibling,p=l.return;if(Hy(l),l===a){Kn=null;break t}if(h!==null){h.return=p,Kn=h;break t}Kn=p}}}var fS={getCacheForType:function(e){var r=Zn(In),a=r.data.get(e);return a===void 0&&(a=e(),r.data.set(e,a)),a},cacheSignal:function(){return Zn(In).controller.signal}},hS=typeof WeakMap=="function"?WeakMap:Map,Ne=0,Fe=null,ge=null,ve=0,Le=0,ui=null,La=!1,Al=!1,Bd=!1,Js=0,mn=0,za=0,jo=0,qd=0,ci=0,wl=0,Du=null,Br=null,Hd=!1,rf=0,tv=0,sf=1/0,af=null,ja=null,Pn=0,Ba=null,Cl=null,Zs=0,Fd=0,Kd=null,ev=null,Nu=0,Gd=null;function fi(){return(Ne&2)!==0&&ve!==0?ve&-ve:ut.T!==null?Zd():Ds()}function nv(){if(ci===0)if((ve&536870912)===0||we){var e=Li;Li<<=1,(Li&3932160)===0&&(Li=262144),ci=e}else ci=536870912;return e=oi.current,e!==null&&(e.flags|=32),ci}function qr(e,r,a){(e===Fe&&(Le===2||Le===9)||e.cancelPendingCommit!==null)&&(Rl(e,0),qa(e,ve,ci,!1)),Ar(e,a),((Ne&2)===0||e!==Fe)&&(e===Fe&&((Ne&2)===0&&(jo|=a),mn===4&&qa(e,ve,ci,!1)),ms(e))}function rv(e,r,a){if((Ne&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&e.expiredLanes)===0||gr(e,r),h=l?pS(e,r):Qd(e,r,!0),p=l;do{if(h===0){Al&&!l&&qa(e,r,0,!1);break}else{if(a=e.current.alternate,p&&!dS(a)){h=Qd(e,r,!1),p=!1;continue}if(h===2){if(p=r,e.errorRecoveryDisabledLanes&p)var T=0;else T=e.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;t:{var C=e;h=Du;var U=C.current.memoizedState.isDehydrated;if(U&&(Rl(C,T).flags|=256),T=Qd(C,T,!1),T!==2){if(Bd&&!U){C.errorRecoveryDisabledLanes|=p,jo|=p,h=4;break t}p=Br,Br=h,p!==null&&(Br===null?Br=p:Br.push.apply(Br,p))}h=T}if(p=!1,h!==2)continue}}if(h===1){Rl(e,0),qa(e,r,0,!0);break}t:{switch(l=e,p=h,p){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:qa(l,r,ci,!La);break t;case 2:Br=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=rf+300-jn(),10<h)){if(qa(l,r,ci,!La),Qr(l,0,!0)!==0)break t;Zs=r,l.timeoutHandle=Vv(iv.bind(null,l,a,Br,af,Hd,r,ci,jo,wl,La,p,"Throttled",-0,0),h);break t}iv(l,a,Br,af,Hd,r,ci,jo,wl,La,p,null,-0,0)}}break}while(!0);ms(e)}function iv(e,r,a,l,h,p,T,C,U,rt,ct,pt,st,ot){if(e.timeoutHandle=-1,pt=r.subtreeFlags,pt&8192||(pt&16785408)===16785408){pt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:or},$y(r,p,pt);var Pt=(p&62914560)===p?rf-jn():(p&4194048)===p?tv-jn():0;if(Pt=JS(pt,Pt),Pt!==null){Zs=p,e.cancelPendingCommit=Pt(hv.bind(null,e,r,p,a,l,h,T,C,U,ct,pt,null,st,ot)),qa(e,p,T,!rt);return}}hv(e,r,p,a,l,h,T,C,U)}function dS(e){for(var r=e;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],p=h.getSnapshot;h=h.value;try{if(!lr(p(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function qa(e,r,a,l){r&=~qd,r&=~jo,e.suspendedLanes|=r,e.pingedLanes&=~r,l&&(e.warmLanes|=r),l=e.expirationTimes;for(var h=r;0<h;){var p=31-Dt(h),T=1<<p;l[p]=-1,h&=~T}a!==0&&gi(e,a,r)}function of(){return(Ne&6)===0?(xu(0),!1):!0}function Yd(){if(ge!==null){if(Le===0)var e=ge.return;else e=ge,Bs=No=null,ud(e),yl=null,mu=0,e=ge;for(;e!==null;)ky(e.alternate,e),e=e.return;ge=null}}function Rl(e,r){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,MS(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Zs=0,Yd(),Fe=e,ge=a=zs(e.current,null),ve=r,Le=0,ui=null,La=!1,Al=gr(e,r),Bd=!1,wl=ci=qd=jo=za=mn=0,Br=Du=null,Hd=!1,(r&8)!==0&&(r|=r&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=r;0<l;){var h=31-Dt(l),p=1<<h;r|=e[h],l&=~p}return Js=r,Fn(),a}function sv(e,r){oe=null,ut.H=Tu,r===gl||r===kc?(r=bg(),Le=3):r===Jh?(r=bg(),Le=4):Le=r===wd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ui=r,ge===null&&(mn=1,Xc(e,Ci(r,e.current)))}function av(){var e=oi.current;return e===null?!0:(ve&4194048)===ve?Di===null:(ve&62914560)===ve||(ve&536870912)!==0?e===Di:!1}function ov(){var e=ut.H;return ut.H=Tu,e===null?Tu:e}function lv(){var e=ut.A;return ut.A=fS,e}function lf(){mn=4,La||(ve&4194048)!==ve&&oi.current!==null||(Al=!0),(za&134217727)===0&&(jo&134217727)===0||Fe===null||qa(Fe,ve,ci,!1)}function Qd(e,r,a){var l=Ne;Ne|=2;var h=ov(),p=lv();(Fe!==e||ve!==r)&&(af=null,Rl(e,r)),r=!1;var T=mn;t:do try{if(Le!==0&&ge!==null){var C=ge,U=ui;switch(Le){case 8:Yd(),T=6;break t;case 3:case 2:case 9:case 6:oi.current===null&&(r=!0);var rt=Le;if(Le=0,ui=null,Il(e,C,U,rt),a&&Al){T=0;break t}break;default:rt=Le,Le=0,ui=null,Il(e,C,U,rt)}}mS(),T=mn;break}catch(ct){sv(e,ct)}while(!0);return r&&e.shellSuspendCounter++,Bs=No=null,Ne=l,ut.H=h,ut.A=p,ge===null&&(Fe=null,ve=0,Fn()),T}function mS(){for(;ge!==null;)uv(ge)}function pS(e,r){var a=Ne;Ne|=2;var l=ov(),h=lv();Fe!==e||ve!==r?(af=null,sf=jn()+500,Rl(e,r)):Al=gr(e,r);t:do try{if(Le!==0&&ge!==null){r=ge;var p=ui;e:switch(Le){case 1:Le=0,ui=null,Il(e,r,p,1);break;case 2:case 9:if(_g(p)){Le=0,ui=null,cv(r);break}r=function(){Le!==2&&Le!==9||Fe!==e||(Le=7),ms(e)},p.then(r,r);break t;case 3:Le=7;break t;case 4:Le=5;break t;case 7:_g(p)?(Le=0,ui=null,cv(r)):(Le=0,ui=null,Il(e,r,p,7));break;case 5:var T=null;switch(ge.tag){case 26:T=ge.memoizedState;case 5:case 27:var C=ge;if(T?Xv(T):C.stateNode.complete){Le=0,ui=null;var U=C.sibling;if(U!==null)ge=U;else{var rt=C.return;rt!==null?(ge=rt,uf(rt)):ge=null}break e}}Le=0,ui=null,Il(e,r,p,5);break;case 6:Le=0,ui=null,Il(e,r,p,6);break;case 8:Yd(),mn=6;break t;default:throw Error(s(462))}}gS();break}catch(ct){sv(e,ct)}while(!0);return Bs=No=null,ut.H=l,ut.A=h,Ne=a,ge!==null?0:(Fe=null,ve=0,Fn(),mn)}function gS(){for(;ge!==null&&!rl();)uv(ge)}function uv(e){var r=My(e.alternate,e,Js);e.memoizedProps=e.pendingProps,r===null?uf(e):ge=r}function cv(e){var r=e,a=r.alternate;switch(r.tag){case 15:case 0:r=Ry(a,r,r.pendingProps,r.type,void 0,ve);break;case 11:r=Ry(a,r,r.pendingProps,r.type.render,r.ref,ve);break;case 5:ud(r);default:ky(a,r),r=ge=lg(r,Js),r=My(a,r,Js)}e.memoizedProps=e.pendingProps,r===null?uf(e):ge=r}function Il(e,r,a,l){Bs=No=null,ud(r),yl=null,mu=0;var h=r.return;try{if(iS(e,h,r,a,ve)){mn=1,Xc(e,Ci(a,e.current)),ge=null;return}}catch(p){if(h!==null)throw ge=h,p;mn=1,Xc(e,Ci(a,e.current)),ge=null;return}r.flags&32768?(we||l===1?e=!0:Al||(ve&536870912)!==0?e=!1:(La=e=!0,(l===2||l===9||l===3||l===6)&&(l=oi.current,l!==null&&l.tag===13&&(l.flags|=16384))),fv(r,e)):uf(r)}function uf(e){var r=e;do{if((r.flags&32768)!==0){fv(r,La);return}e=r.return;var a=oS(r.alternate,r,Js);if(a!==null){ge=a;return}if(r=r.sibling,r!==null){ge=r;return}ge=r=e}while(r!==null);mn===0&&(mn=5)}function fv(e,r){do{var a=lS(e.alternate,e);if(a!==null){a.flags&=32767,ge=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(e=e.sibling,e!==null)){ge=e;return}ge=e=a}while(e!==null);mn=6,ge=null}function hv(e,r,a,l,h,p,T,C,U){e.cancelPendingCommit=null;do cf();while(Pn!==0);if((Ne&6)!==0)throw Error(s(327));if(r!==null){if(r===e.current)throw Error(s(177));if(p=r.lanes|r.childLanes,p|=ae,_o(e,a,p,T,C,U),e===Fe&&(ge=Fe=null,ve=0),Cl=r,Ba=e,Zs=a,Fd=p,Kd=h,ev=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ES(mi,function(){return yv(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=ut.T,ut.T=null,h=xt.p,xt.p=2,T=Ne,Ne|=4;try{uS(e,r,a)}finally{Ne=T,xt.p=h,ut.T=l}}Pn=1,dv(),mv(),pv()}}function dv(){if(Pn===1){Pn=0;var e=Ba,r=Cl,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=ut.T,ut.T=null;var l=xt.p;xt.p=2;var h=Ne;Ne|=4;try{Yy(r,e);var p=am,T=A(e.containerInfo),C=p.focusedElem,U=p.selectionRange;if(T!==C&&C&&C.ownerDocument&&E(C.ownerDocument.documentElement,C)){if(U!==null&&w(C)){var rt=U.start,ct=U.end;if(ct===void 0&&(ct=rt),"selectionStart"in C)C.selectionStart=rt,C.selectionEnd=Math.min(ct,C.value.length);else{var pt=C.ownerDocument||document,st=pt&&pt.defaultView||window;if(st.getSelection){var ot=st.getSelection(),Pt=C.textContent.length,Qt=Math.min(U.start,Pt),He=U.end===void 0?Qt:Math.min(U.end,Pt);!ot.extend&&Qt>He&&(T=He,He=Qt,Qt=T);var Z=g(C,Qt),H=g(C,He);if(Z&&H&&(ot.rangeCount!==1||ot.anchorNode!==Z.node||ot.anchorOffset!==Z.offset||ot.focusNode!==H.node||ot.focusOffset!==H.offset)){var nt=pt.createRange();nt.setStart(Z.node,Z.offset),ot.removeAllRanges(),Qt>He?(ot.addRange(nt),ot.extend(H.node,H.offset)):(nt.setEnd(H.node,H.offset),ot.addRange(nt))}}}}for(pt=[],ot=C;ot=ot.parentNode;)ot.nodeType===1&&pt.push({element:ot,left:ot.scrollLeft,top:ot.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<pt.length;C++){var ft=pt[C];ft.element.scrollLeft=ft.left,ft.element.scrollTop=ft.top}}Tf=!!sm,am=sm=null}finally{Ne=h,xt.p=l,ut.T=a}}e.current=r,Pn=2}}function mv(){if(Pn===2){Pn=0;var e=Ba,r=Cl,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=ut.T,ut.T=null;var l=xt.p;xt.p=2;var h=Ne;Ne|=4;try{qy(e,r.alternate,r)}finally{Ne=h,xt.p=l,ut.T=a}}Pn=3}}function pv(){if(Pn===4||Pn===3){Pn=0,es();var e=Ba,r=Cl,a=Zs,l=ev;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Pn=5:(Pn=0,Cl=Ba=null,gv(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(ja=null),wr(a),r=r.stateNode,gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(ir,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=ut.T,h=xt.p,xt.p=2,ut.T=null;try{for(var p=e.onRecoverableError,T=0;T<l.length;T++){var C=l[T];p(C.value,{componentStack:C.stack})}}finally{ut.T=r,xt.p=h}}(Zs&3)!==0&&cf(),ms(e),h=e.pendingLanes,(a&261930)!==0&&(h&42)!==0?e===Gd?Nu++:(Nu=0,Gd=e):Nu=0,xu(0)}}function gv(e,r){(e.pooledCacheLanes&=r)===0&&(r=e.pooledCache,r!=null&&(e.pooledCache=null,hu(r)))}function cf(){return dv(),mv(),pv(),yv()}function yv(){if(Pn!==5)return!1;var e=Ba,r=Fd;Fd=0;var a=wr(Zs),l=ut.T,h=xt.p;try{xt.p=32>a?32:a,ut.T=null,a=Kd,Kd=null;var p=Ba,T=Zs;if(Pn=0,Cl=Ba=null,Zs=0,(Ne&6)!==0)throw Error(s(331));var C=Ne;if(Ne|=4,Zy(p.current),Xy(p,p.current,T,a),Ne=C,xu(0,!1),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(ir,p)}catch{}return!0}finally{xt.p=h,ut.T=l,gv(e,r)}}function vv(e,r,a){r=Ci(a,r),r=Ad(e.stateNode,r,2),e=Va(e,r,2),e!==null&&(Ar(e,2),ms(e))}function ze(e,r,a){if(e.tag===3)vv(e,e,a);else for(;r!==null;){if(r.tag===3){vv(r,e,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ja===null||!ja.has(l))){e=Ci(a,e),a=_y(2),l=Va(r,a,2),l!==null&&(Ey(a,l,r,e),Ar(l,2),ms(l));break}}r=r.return}}function Xd(e,r,a){var l=e.pingCache;if(l===null){l=e.pingCache=new hS;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(Bd=!0,h.add(a),e=yS.bind(null,e,r,a),r.then(e,e))}function yS(e,r,a){var l=e.pingCache;l!==null&&l.delete(r),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Fe===e&&(ve&a)===a&&(mn===4||mn===3&&(ve&62914560)===ve&&300>jn()-rf?(Ne&2)===0&&Rl(e,0):qd|=a,wl===ve&&(wl=0)),ms(e)}function _v(e,r){r===0&&(r=il()),e=Ze(e,r),e!==null&&(Ar(e,r),ms(e))}function vS(e){var r=e.memoizedState,a=0;r!==null&&(a=r.retryLane),_v(e,a)}function _S(e,r){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),_v(e,a)}function ES(e,r){return en(e,r)}var ff=null,Ol=null,$d=!1,hf=!1,Jd=!1,Ha=0;function ms(e){e!==Ol&&e.next===null&&(Ol===null?ff=Ol=e:Ol=Ol.next=e),hf=!0,$d||($d=!0,TS())}function xu(e,r){if(!Jd&&hf){Jd=!0;do for(var a=!1,l=ff;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var p=0;else{var T=l.suspendedLanes,C=l.pingedLanes;p=(1<<31-Dt(42|e)+1)-1,p&=h&~(T&~C),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,Sv(l,p))}else p=ve,p=Qr(l,l===Fe?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||gr(l,p)||(a=!0,Sv(l,p));l=l.next}while(a);Jd=!1}}function bS(){Ev()}function Ev(){hf=$d=!1;var e=0;Ha!==0&&xS()&&(e=Ha);for(var r=jn(),a=null,l=ff;l!==null;){var h=l.next,p=bv(l,r);p===0?(l.next=null,a===null?ff=h:a.next=h,h===null&&(Ol=a)):(a=l,(e!==0||(p&3)!==0)&&(hf=!0)),l=h}Pn!==0&&Pn!==5||xu(e),Ha!==0&&(Ha=0)}function bv(e,r){for(var a=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,p=e.pendingLanes&-62914561;0<p;){var T=31-Dt(p),C=1<<T,U=h[T];U===-1?((C&a)===0||(C&l)!==0)&&(h[T]=su(C,r)):U<=r&&(e.expiredLanes|=C),p&=~C}if(r=Fe,a=ve,a=Qr(e,e===r?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===r&&(Le===2||Le===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Vn(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||gr(e,a)){if(r=a&-a,r===e.callbackPriority)return r;switch(l!==null&&Vn(l),wr(a)){case 2:case 8:a=Yr;break;case 32:a=mi;break;case 268435456:a=fa;break;default:a=mi}return l=Tv.bind(null,e),a=en(a,l),e.callbackPriority=r,e.callbackNode=a,r}return l!==null&&l!==null&&Vn(l),e.callbackPriority=2,e.callbackNode=null,2}function Tv(e,r){if(Pn!==0&&Pn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(cf()&&e.callbackNode!==a)return null;var l=ve;return l=Qr(e,e===Fe?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(rv(e,l,r),bv(e,jn()),e.callbackNode!=null&&e.callbackNode===a?Tv.bind(null,e):null)}function Sv(e,r){if(cf())return null;rv(e,r,!0)}function TS(){VS(function(){(Ne&6)!==0?en(Gr,bS):Ev()})}function Zd(){if(Ha===0){var e=ml;e===0&&(e=Ct,Ct<<=1,(Ct&261888)===0&&(Ct=256)),Ha=e}return Ha}function Av(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ni(""+e)}function wv(e,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,e.id&&a.setAttribute("form",e.id),r.parentNode.insertBefore(a,r),e=new FormData(e),a.parentNode.removeChild(a),e}function SS(e,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var p=Av((h[Ge]||null).action),T=l.submitter;T&&(r=(r=T[Ge]||null)?Av(r.formAction):T.getAttribute("formAction"),r!==null&&(p=r,T=null));var C=new Ei("action","action",null,l,h);e.push({event:C,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ha!==0){var U=T?wv(h,T):new FormData(h);vd(a,{pending:!0,data:U,method:h.method,action:p},null,U)}}else typeof p=="function"&&(C.preventDefault(),U=T?wv(h,T):new FormData(h),vd(a,{pending:!0,data:U,method:h.method,action:p},p,U))},currentTarget:h}]})}}for(var Wd=0;Wd<It.length;Wd++){var tm=It[Wd],AS=tm.toLowerCase(),wS=tm[0].toUpperCase()+tm.slice(1);Tt(AS,"on"+wS)}Tt(et,"onAnimationEnd"),Tt(it,"onAnimationIteration"),Tt(lt,"onAnimationStart"),Tt("dblclick","onDoubleClick"),Tt("focusin","onFocus"),Tt("focusout","onBlur"),Tt(mt,"onTransitionRun"),Tt(St,"onTransitionStart"),Tt(Ot,"onTransitionCancel"),Tt(bt,"onTransitionEnd"),Ir("onMouseEnter",["mouseout","mouseover"]),Ir("onMouseLeave",["mouseout","mouseover"]),Ir("onPointerEnter",["pointerout","pointerover"]),Ir("onPointerLeave",["pointerout","pointerover"]),Rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mu));function Cv(e,r){r=(r&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],h=l.event;l=l.listeners;t:{var p=void 0;if(r)for(var T=l.length-1;0<=T;T--){var C=l[T],U=C.instance,rt=C.currentTarget;if(C=C.listener,U!==p&&h.isPropagationStopped())break t;p=C,h.currentTarget=rt;try{p(h)}catch(ct){Mt(ct)}h.currentTarget=null,p=U}else for(T=0;T<l.length;T++){if(C=l[T],U=C.instance,rt=C.currentTarget,C=C.listener,U!==p&&h.isPropagationStopped())break t;p=C,h.currentTarget=rt;try{p(h)}catch(ct){Mt(ct)}h.currentTarget=null,p=U}}}}function ye(e,r){var a=r[zi];a===void 0&&(a=r[zi]=new Set);var l=e+"__bubble";a.has(l)||(Rv(r,e,2,!1),a.add(l))}function em(e,r,a){var l=0;r&&(l|=4),Rv(a,e,l,r)}var df="_reactListening"+Math.random().toString(36).slice(2);function nm(e){if(!e[df]){e[df]=!0,yi.forEach(function(a){a!=="selectionchange"&&(CS.has(a)||em(a,!1,e),em(a,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[df]||(r[df]=!0,em("selectionchange",!1,r))}}function Rv(e,r,a,l){switch(n_(r)){case 2:var h=tA;break;case 8:h=eA;break;default:h=ym}a=h.bind(null,r,a,e),h=void 0,!Ms||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(r,a,{capture:!0,passive:h}):e.addEventListener(r,a,!0):h!==void 0?e.addEventListener(r,a,{passive:h}):e.addEventListener(r,a,!1)}function rm(e,r,a,l,h){var p=l;if((r&1)===0&&(r&2)===0&&l!==null)t:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var C=l.stateNode.containerInfo;if(C===h)break;if(T===4)for(T=l.return;T!==null;){var U=T.tag;if((U===3||U===4)&&T.stateNode.containerInfo===h)return;T=T.return}for(;C!==null;){if(T=Cr(C),T===null)return;if(U=T.tag,U===5||U===6||U===26||U===27){l=p=T;continue t}C=C.parentNode}}l=l.return}Nr(function(){var rt=p,ct=yr(a),pt=[];t:{var st=wt.get(e);if(st!==void 0){var ot=Ei,Pt=e;switch(e){case"keypress":if(Hi(a)===0)break t;case"keydown":case"keyup":ot=Ps;break;case"focusin":Pt="focus",ot=Si;break;case"focusout":Pt="blur",ot=Si;break;case"beforeblur":case"afterblur":ot=Si;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=Vs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=So;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=v;break;case et:case it:case lt:ot=Ao;break;case bt:ot=I;break;case"scroll":case"scrollend":ot=as;break;case"wheel":ot=at;break;case"copy":case"cut":case"paste":ot=Gi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=Ai;break;case"toggle":case"beforetoggle":ot=ee}var Qt=(r&4)!==0,He=!Qt&&(e==="scroll"||e==="scrollend"),Z=Qt?st!==null?st+"Capture":null:st;Qt=[];for(var H=rt,nt;H!==null;){var ft=H;if(nt=ft.stateNode,ft=ft.tag,ft!==5&&ft!==26&&ft!==27||nt===null||Z===null||(ft=vr(H,Z),ft!=null&&Qt.push(Vu(H,ft,nt))),He)break;H=H.return}0<Qt.length&&(st=new ot(st,Pt,null,a,ct),pt.push({event:st,listeners:Qt}))}}if((r&7)===0){t:{if(st=e==="mouseover"||e==="pointerover",ot=e==="mouseout"||e==="pointerout",st&&a!==Dr&&(Pt=a.relatedTarget||a.fromElement)&&(Cr(Pt)||Pt[kn]))break t;if((ot||st)&&(st=ct.window===ct?ct:(st=ct.ownerDocument)?st.defaultView||st.parentWindow:window,ot?(Pt=a.relatedTarget||a.toElement,ot=rt,Pt=Pt?Cr(Pt):null,Pt!==null&&(He=u(Pt),Qt=Pt.tag,Pt!==He||Qt!==5&&Qt!==27&&Qt!==6)&&(Pt=null)):(ot=null,Pt=rt),ot!==Pt)){if(Qt=Vs,ft="onMouseLeave",Z="onMouseEnter",H="mouse",(e==="pointerout"||e==="pointerover")&&(Qt=Ai,ft="onPointerLeave",Z="onPointerEnter",H="pointer"),He=ot==null?st:vn(ot),nt=Pt==null?st:vn(Pt),st=new Qt(ft,H+"leave",ot,a,ct),st.target=He,st.relatedTarget=nt,ft=null,Cr(ct)===rt&&(Qt=new Qt(Z,H+"enter",Pt,a,ct),Qt.target=nt,Qt.relatedTarget=He,ft=Qt),He=ft,ot&&Pt)e:{for(Qt=RS,Z=ot,H=Pt,nt=0,ft=Z;ft;ft=Qt(ft))nt++;ft=0;for(var Ft=H;Ft;Ft=Qt(Ft))ft++;for(;0<nt-ft;)Z=Qt(Z),nt--;for(;0<ft-nt;)H=Qt(H),ft--;for(;nt--;){if(Z===H||H!==null&&Z===H.alternate){Qt=Z;break e}Z=Qt(Z),H=Qt(H)}Qt=null}else Qt=null;ot!==null&&Iv(pt,st,ot,Qt,!1),Pt!==null&&He!==null&&Iv(pt,He,Pt,Qt,!0)}}t:{if(st=rt?vn(rt):window,ot=st.nodeName&&st.nodeName.toLowerCase(),ot==="select"||ot==="input"&&st.type==="file")var Oe=Ro;else if(ol(st))if(wi)Oe=Ra;else{Oe=Ls;var zt=Oc}else ot=st.nodeName,!ot||ot.toLowerCase()!=="input"||st.type!=="checkbox"&&st.type!=="radio"?rt&&ga(rt.elementType)&&(Oe=Ro):Oe=lu;if(Oe&&(Oe=Oe(e,rt))){ou(pt,Oe,a,ct);break t}zt&&zt(e,st,rt),e==="focusout"&&rt&&st.type==="number"&&rt.memoizedProps.value!=null&&xs(st,"number",st.value)}switch(zt=rt?vn(rt):window,e){case"focusin":(ol(zt)||zt.contentEditable==="true")&&(x=zt,z=rt,j=null);break;case"focusout":j=z=x=null;break;case"mousedown":Q=!0;break;case"contextmenu":case"mouseup":case"dragend":Q=!1,L(pt,a,ct);break;case"selectionchange":if(D)break;case"keydown":case"keyup":L(pt,a,ct)}var le;if(Ae)t:{switch(e){case"compositionstart":var _e="onCompositionStart";break t;case"compositionend":_e="onCompositionEnd";break t;case"compositionupdate":_e="onCompositionUpdate";break t}_e=void 0}else Us?us(e,a)&&(_e="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(Pr&&a.locale!=="ko"&&(Us||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Us&&(le=qi()):(xr=ct,ya="value"in xr?xr.value:xr.textContent,Us=!0)),zt=mf(rt,_e),0<zt.length&&(_e=new Mr(_e,e,null,a,ct),pt.push({event:_e,listeners:zt}),le?_e.data=le:(le=Aa(a),le!==null&&(_e.data=le)))),(le=kr?Cc(e,a):Ph(e,a))&&(_e=mf(rt,"onBeforeInput"),0<_e.length&&(zt=new Mr("onBeforeInput","beforeinput",null,a,ct),pt.push({event:zt,listeners:_e}),zt.data=le)),SS(pt,e,rt,a,ct)}Cv(pt,r)})}function Vu(e,r,a){return{instance:e,listener:r,currentTarget:a}}function mf(e,r){for(var a=r+"Capture",l=[];e!==null;){var h=e,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=vr(e,a),h!=null&&l.unshift(Vu(e,h,p)),h=vr(e,r),h!=null&&l.push(Vu(e,h,p))),e.tag===3)return l;e=e.return}return[]}function RS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Iv(e,r,a,l,h){for(var p=r._reactName,T=[];a!==null&&a!==l;){var C=a,U=C.alternate,rt=C.stateNode;if(C=C.tag,U!==null&&U===l)break;C!==5&&C!==26&&C!==27||rt===null||(U=rt,h?(rt=vr(a,p),rt!=null&&T.unshift(Vu(a,rt,U))):h||(rt=vr(a,p),rt!=null&&T.push(Vu(a,rt,U)))),a=a.return}T.length!==0&&e.push({event:r,listeners:T})}var IS=/\r\n?/g,OS=/\u0000|\uFFFD/g;function Ov(e){return(typeof e=="string"?e:""+e).replace(IS,`
`).replace(OS,"")}function Dv(e,r){return r=Ov(r),Ov(e)===r}function qe(e,r,a,l,h,p){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||$n(e,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&$n(e,""+l);break;case"className":ar(e,"class",l);break;case"tabIndex":ar(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ar(e,a,l);break;case"style":pa(e,l,p);break;case"data":if(r!=="object"){ar(e,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=ni(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(r!=="input"&&qe(e,r,"name",h.name,h,null),qe(e,r,"formEncType",h.formEncType,h,null),qe(e,r,"formMethod",h.formMethod,h,null),qe(e,r,"formTarget",h.formTarget,h,null)):(qe(e,r,"encType",h.encType,h,null),qe(e,r,"method",h.method,h,null),qe(e,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=ni(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=or);break;case"onScroll":l!=null&&ye("scroll",e);break;case"onScrollEnd":l!=null&&ye("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=ni(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":ye("beforetoggle",e),ye("toggle",e),se(e,"popover",l);break;case"xlinkActuate":sn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":sn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":sn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":sn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":sn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":sn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":sn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":sn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":sn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":se(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=al.get(a)||a,se(e,a,l))}}function im(e,r,a,l,h,p){switch(a){case"style":pa(e,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof l=="string"?$n(e,l):(typeof l=="number"||typeof l=="bigint")&&$n(e,""+l);break;case"onScroll":l!=null&&ye("scroll",e);break;case"onScrollEnd":l!=null&&ye("scrollend",e);break;case"onClick":l!=null&&(e.onclick=or);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rs.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),p=e[Ge]||null,p=p!=null?p[a]:null,typeof p=="function"&&e.removeEventListener(r,p,h),typeof l=="function")){typeof p!="function"&&p!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(r,l,h);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):se(e,a,l)}}}function tr(e,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ye("error",e),ye("load",e);var l=!1,h=!1,p;for(p in a)if(a.hasOwnProperty(p)){var T=a[p];if(T!=null)switch(p){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:qe(e,r,p,T,a,null)}}h&&qe(e,r,"srcSet",a.srcSet,a,null),l&&qe(e,r,"src",a.src,a,null);return;case"input":ye("invalid",e);var C=p=T=h=null,U=null,rt=null;for(l in a)if(a.hasOwnProperty(l)){var ct=a[l];if(ct!=null)switch(l){case"name":h=ct;break;case"type":T=ct;break;case"checked":U=ct;break;case"defaultChecked":rt=ct;break;case"value":p=ct;break;case"defaultValue":C=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(s(137,r));break;default:qe(e,r,l,ct,a,null)}}ma(e,p,C,U,rt,T,h,!1);return;case"select":ye("invalid",e),l=T=p=null;for(h in a)if(a.hasOwnProperty(h)&&(C=a[h],C!=null))switch(h){case"value":p=C;break;case"defaultValue":T=C;break;case"multiple":l=C;default:qe(e,r,h,C,a,null)}r=p,a=T,e.multiple=!!l,r!=null?ti(e,!!l,r,!1):a!=null&&ti(e,!!l,a,!0);return;case"textarea":ye("invalid",e),p=h=l=null;for(T in a)if(a.hasOwnProperty(T)&&(C=a[T],C!=null))switch(T){case"value":l=C;break;case"defaultValue":h=C;break;case"children":p=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:qe(e,r,T,C,a,null)}ei(e,l,h,p);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(l=a[U],l!=null))switch(U){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:qe(e,r,U,l,a,null)}return;case"dialog":ye("beforetoggle",e),ye("toggle",e),ye("cancel",e),ye("close",e);break;case"iframe":case"object":ye("load",e);break;case"video":case"audio":for(l=0;l<Mu.length;l++)ye(Mu[l],e);break;case"image":ye("error",e),ye("load",e);break;case"details":ye("toggle",e);break;case"embed":case"source":case"link":ye("error",e),ye("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rt in a)if(a.hasOwnProperty(rt)&&(l=a[rt],l!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:qe(e,r,rt,l,a,null)}return;default:if(ga(r)){for(ct in a)a.hasOwnProperty(ct)&&(l=a[ct],l!==void 0&&im(e,r,ct,l,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(l=a[C],l!=null&&qe(e,r,C,l,a,null))}function DS(e,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,T=null,C=null,U=null,rt=null,ct=null;for(ot in a){var pt=a[ot];if(a.hasOwnProperty(ot)&&pt!=null)switch(ot){case"checked":break;case"value":break;case"defaultValue":U=pt;default:l.hasOwnProperty(ot)||qe(e,r,ot,null,l,pt)}}for(var st in l){var ot=l[st];if(pt=a[st],l.hasOwnProperty(st)&&(ot!=null||pt!=null))switch(st){case"type":p=ot;break;case"name":h=ot;break;case"checked":rt=ot;break;case"defaultChecked":ct=ot;break;case"value":T=ot;break;case"defaultValue":C=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(s(137,r));break;default:ot!==pt&&qe(e,r,st,ot,l,pt)}}Wr(e,T,C,U,rt,ct,p,h);return;case"select":ot=T=C=st=null;for(p in a)if(U=a[p],a.hasOwnProperty(p)&&U!=null)switch(p){case"value":break;case"multiple":ot=U;default:l.hasOwnProperty(p)||qe(e,r,p,null,l,U)}for(h in l)if(p=l[h],U=a[h],l.hasOwnProperty(h)&&(p!=null||U!=null))switch(h){case"value":st=p;break;case"defaultValue":C=p;break;case"multiple":T=p;default:p!==U&&qe(e,r,h,p,l,U)}r=C,a=T,l=ot,st!=null?ti(e,!!a,st,!1):!!l!=!!a&&(r!=null?ti(e,!!a,r,!0):ti(e,!!a,a?[]:"",!1));return;case"textarea":ot=st=null;for(C in a)if(h=a[C],a.hasOwnProperty(C)&&h!=null&&!l.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:qe(e,r,C,null,l,h)}for(T in l)if(h=l[T],p=a[T],l.hasOwnProperty(T)&&(h!=null||p!=null))switch(T){case"value":st=h;break;case"defaultValue":ot=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==p&&qe(e,r,T,h,l,p)}To(e,st,ot);return;case"option":for(var Pt in a)if(st=a[Pt],a.hasOwnProperty(Pt)&&st!=null&&!l.hasOwnProperty(Pt))switch(Pt){case"selected":e.selected=!1;break;default:qe(e,r,Pt,null,l,st)}for(U in l)if(st=l[U],ot=a[U],l.hasOwnProperty(U)&&st!==ot&&(st!=null||ot!=null))switch(U){case"selected":e.selected=st&&typeof st!="function"&&typeof st!="symbol";break;default:qe(e,r,U,st,l,ot)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qt in a)st=a[Qt],a.hasOwnProperty(Qt)&&st!=null&&!l.hasOwnProperty(Qt)&&qe(e,r,Qt,null,l,st);for(rt in l)if(st=l[rt],ot=a[rt],l.hasOwnProperty(rt)&&st!==ot&&(st!=null||ot!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(s(137,r));break;default:qe(e,r,rt,st,l,ot)}return;default:if(ga(r)){for(var He in a)st=a[He],a.hasOwnProperty(He)&&st!==void 0&&!l.hasOwnProperty(He)&&im(e,r,He,void 0,l,st);for(ct in l)st=l[ct],ot=a[ct],!l.hasOwnProperty(ct)||st===ot||st===void 0&&ot===void 0||im(e,r,ct,st,l,ot);return}}for(var Z in a)st=a[Z],a.hasOwnProperty(Z)&&st!=null&&!l.hasOwnProperty(Z)&&qe(e,r,Z,null,l,st);for(pt in l)st=l[pt],ot=a[pt],!l.hasOwnProperty(pt)||st===ot||st==null&&ot==null||qe(e,r,pt,st,l,ot)}function Nv(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function NS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],p=h.transferSize,T=h.initiatorType,C=h.duration;if(p&&C&&Nv(T)){for(T=0,C=h.responseEnd,l+=1;l<a.length;l++){var U=a[l],rt=U.startTime;if(rt>C)break;var ct=U.transferSize,pt=U.initiatorType;ct&&Nv(pt)&&(U=U.responseEnd,T+=ct*(U<C?1:(C-rt)/(U-rt)))}if(--l,r+=8*(p+T)/(h.duration/1e3),e++,10<e)break}}if(0<e)return r/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var sm=null,am=null;function pf(e){return e.nodeType===9?e:e.ownerDocument}function xv(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mv(e,r){if(e===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&r==="foreignObject"?0:e}function om(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var lm=null;function xS(){var e=window.event;return e&&e.type==="popstate"?e===lm?!1:(lm=e,!0):(lm=null,!1)}var Vv=typeof setTimeout=="function"?setTimeout:void 0,MS=typeof clearTimeout=="function"?clearTimeout:void 0,kv=typeof Promise=="function"?Promise:void 0,VS=typeof queueMicrotask=="function"?queueMicrotask:typeof kv<"u"?function(e){return kv.resolve(null).then(e).catch(kS)}:Vv;function kS(e){setTimeout(function(){throw e})}function Fa(e){return e==="head"}function Pv(e,r){var a=r,l=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(h),Ml(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")ku(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,ku(a);for(var p=a.firstChild;p;){var T=p.nextSibling,C=p.nodeName;p[Bn]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=T}}else a==="body"&&ku(e.ownerDocument.body);a=h}while(a);Ml(r)}function Uv(e,r){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function um(e){var r=e.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":um(a),Ns(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function PS(e,r,a,l){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Bn])switch(r){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(p=e.getAttribute("rel"),p==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(p!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(p=e.getAttribute("src"),(p!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(r==="input"&&e.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===p)return e}else return e;if(e=Ni(e.nextSibling),e===null)break}return null}function US(e,r,a){if(r==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ni(e.nextSibling),e===null))return null;return e}function Lv(e,r){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=Ni(e.nextSibling),e===null))return null;return e}function cm(e){return e.data==="$?"||e.data==="$~"}function fm(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function LS(e,r){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=r;else if(e.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Ni(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return e}var hm=null;function zv(e){e=e.nextSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(r===0)return Ni(e.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}e=e.nextSibling}return null}function jv(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return e;r--}else a!=="/$"&&a!=="/&"||r++}e=e.previousSibling}return null}function Bv(e,r,a){switch(r=pf(a),e){case"html":if(e=r.documentElement,!e)throw Error(s(452));return e;case"head":if(e=r.head,!e)throw Error(s(453));return e;case"body":if(e=r.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function ku(e){for(var r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Ns(e)}var xi=new Map,qv=new Set;function gf(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ws=xt.d;xt.d={f:zS,r:jS,D:BS,C:qS,L:HS,m:FS,X:GS,S:KS,M:YS};function zS(){var e=Ws.f(),r=of();return e||r}function jS(e){var r=Ce(e);r!==null&&r.tag===5&&r.type==="form"?sy(r):Ws.r(e)}var Dl=typeof document>"u"?null:document;function Hv(e,r,a){var l=Dl;if(l&&typeof r=="string"&&r){var h=wn(r);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),qv.has(h)||(qv.add(h),e={rel:e,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),tr(r,"link",e),rn(r),l.head.appendChild(r)))}}function BS(e){Ws.D(e),Hv("dns-prefetch",e,null)}function qS(e,r){Ws.C(e,r),Hv("preconnect",e,r)}function HS(e,r,a){Ws.L(e,r,a);var l=Dl;if(l&&e&&r){var h='link[rel="preload"][as="'+wn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+wn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+wn(a.imageSizes)+'"]')):h+='[href="'+wn(e)+'"]';var p=h;switch(r){case"style":p=Nl(e);break;case"script":p=xl(e)}xi.has(p)||(e=O({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:e,as:r},a),xi.set(p,e),l.querySelector(h)!==null||r==="style"&&l.querySelector(Pu(p))||r==="script"&&l.querySelector(Uu(p))||(r=l.createElement("link"),tr(r,"link",e),rn(r),l.head.appendChild(r)))}}function FS(e,r){Ws.m(e,r);var a=Dl;if(a&&e){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+wn(l)+'"][href="'+wn(e)+'"]',p=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=xl(e)}if(!xi.has(p)&&(e=O({rel:"modulepreload",href:e},r),xi.set(p,e),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Uu(p)))return}l=a.createElement("link"),tr(l,"link",e),rn(l),a.head.appendChild(l)}}}function KS(e,r,a){Ws.S(e,r,a);var l=Dl;if(l&&e){var h=An(l).hoistableStyles,p=Nl(e);r=r||"default";var T=h.get(p);if(!T){var C={loading:0,preload:null};if(T=l.querySelector(Pu(p)))C.loading=5;else{e=O({rel:"stylesheet",href:e,"data-precedence":r},a),(a=xi.get(p))&&dm(e,a);var U=T=l.createElement("link");rn(U),tr(U,"link",e),U._p=new Promise(function(rt,ct){U.onload=rt,U.onerror=ct}),U.addEventListener("load",function(){C.loading|=1}),U.addEventListener("error",function(){C.loading|=2}),C.loading|=4,yf(T,r,l)}T={type:"stylesheet",instance:T,count:1,state:C},h.set(p,T)}}}function GS(e,r){Ws.X(e,r);var a=Dl;if(a&&e){var l=An(a).hoistableScripts,h=xl(e),p=l.get(h);p||(p=a.querySelector(Uu(h)),p||(e=O({src:e,async:!0},r),(r=xi.get(h))&&mm(e,r),p=a.createElement("script"),rn(p),tr(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(h,p))}}function YS(e,r){Ws.M(e,r);var a=Dl;if(a&&e){var l=An(a).hoistableScripts,h=xl(e),p=l.get(h);p||(p=a.querySelector(Uu(h)),p||(e=O({src:e,async:!0,type:"module"},r),(r=xi.get(h))&&mm(e,r),p=a.createElement("script"),rn(p),tr(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(h,p))}}function Fv(e,r,a,l){var h=(h=$t.current)?gf(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Nl(a.href),a=An(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Nl(a.href);var p=An(h).hoistableStyles,T=p.get(e);if(T||(h=h.ownerDocument||h,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(e,T),(p=h.querySelector(Pu(e)))&&!p._p&&(T.instance=p,T.state.loading=5),xi.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},xi.set(e,a),p||QS(h,e,a,T.state))),r&&l===null)throw Error(s(528,""));return T}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=xl(a),a=An(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Nl(e){return'href="'+wn(e)+'"'}function Pu(e){return'link[rel="stylesheet"]['+e+"]"}function Kv(e){return O({},e,{"data-precedence":e.precedence,precedence:null})}function QS(e,r,a,l){e.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=e.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),tr(r,"link",a),rn(r),e.head.appendChild(r))}function xl(e){return'[src="'+wn(e)+'"]'}function Uu(e){return"script[async]"+e}function Gv(e,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=e.querySelector('style[data-href~="'+wn(a.href)+'"]');if(l)return r.instance=l,rn(l),l;var h=O({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),rn(l),tr(l,"style",h),yf(l,a.precedence,e),r.instance=l;case"stylesheet":h=Nl(a.href);var p=e.querySelector(Pu(h));if(p)return r.state.loading|=4,r.instance=p,rn(p),p;l=Kv(a),(h=xi.get(h))&&dm(l,h),p=(e.ownerDocument||e).createElement("link"),rn(p);var T=p;return T._p=new Promise(function(C,U){T.onload=C,T.onerror=U}),tr(p,"link",l),r.state.loading|=4,yf(p,a.precedence,e),r.instance=p;case"script":return p=xl(a.src),(h=e.querySelector(Uu(p)))?(r.instance=h,rn(h),h):(l=a,(h=xi.get(p))&&(l=O({},a),mm(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),rn(h),tr(h,"link",l),e.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,yf(l,a.precedence,e));return r.instance}function yf(e,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,p=h,T=0;T<l.length;T++){var C=l[T];if(C.dataset.precedence===r)p=C;else if(p!==h)break}p?p.parentNode.insertBefore(e,p.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(e,r.firstChild))}function dm(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.title==null&&(e.title=r.title)}function mm(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.integrity==null&&(e.integrity=r.integrity)}var vf=null;function Yv(e,r,a){if(vf===null){var l=new Map,h=vf=new Map;h.set(a,l)}else h=vf,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var p=a[h];if(!(p[Bn]||p[ke]||e==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(r)||"";T=e+T;var C=l.get(T);C?C.push(p):l.set(T,[p])}}return l}function Qv(e,r,a){e=e.ownerDocument||e,e.head.insertBefore(a,r==="title"?e.querySelector("head > title"):null)}function XS(e,r,a){if(a===1||r.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return e=r.disabled,typeof r.precedence=="string"&&e==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Xv(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function $S(e,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Nl(l.href),p=r.querySelector(Pu(h));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(e.count++,e=_f.bind(e),r.then(e,e)),a.state.loading|=4,a.instance=p,rn(p);return}p=r.ownerDocument||r,l=Kv(l),(h=xi.get(h))&&dm(l,h),p=p.createElement("link"),rn(p);var T=p;T._p=new Promise(function(C,U){T.onload=C,T.onerror=U}),tr(p,"link",l),a.instance=p}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=_f.bind(e),r.addEventListener("load",a),r.addEventListener("error",a))}}var pm=0;function JS(e,r){return e.stylesheets&&e.count===0&&bf(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&bf(e,e.stylesheets),e.unsuspend){var p=e.unsuspend;e.unsuspend=null,p()}},6e4+r);0<e.imgBytes&&pm===0&&(pm=62500*NS());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&bf(e,e.stylesheets),e.unsuspend)){var p=e.unsuspend;e.unsuspend=null,p()}},(e.imgBytes>pm?50:800)+r);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function _f(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)bf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ef=null;function bf(e,r){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ef=new Map,r.forEach(ZS,e),Ef=null,_f.call(e))}function ZS(e,r){if(!(r.state.loading&4)){var a=Ef.get(e);if(a)var l=a.get(null);else{a=new Map,Ef.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var T=h[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),l=T)}l&&a.set(null,l)}h=r.instance,T=h.getAttribute("data-precedence"),p=a.get(T)||l,p===l&&a.set(null,h),a.set(T,h),this.count++,l=_f.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),p?p.parentNode.insertBefore(h,p.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),r.state.loading|=4}}var Lu={$$typeof:Ut,Provider:null,Consumer:null,_currentValue:Lt,_currentValue2:Lt,_threadCount:0};function WS(e,r,a,l,h,p,T,C,U){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xn(0),this.hiddenUpdates=Xn(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function $v(e,r,a,l,h,p,T,C,U,rt,ct,pt){return e=new WS(e,r,a,T,U,rt,ct,pt,C),r=1,p===!0&&(r|=24),p=ai(3,null,null,r),e.current=p,p.stateNode=e,r=Qh(),r.refCount++,e.pooledCache=r,r.refCount++,p.memoizedState={element:l,isDehydrated:a,cache:r},Zh(p),e}function Jv(e){return e?(e=Ur,e):Ur}function Zv(e,r,a,l,h,p){h=Jv(h),l.context===null?l.context=h:l.pendingContext=h,l=Ma(r),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=Va(e,l,r),a!==null&&(qr(a,e,r),gu(a,e,r))}function Wv(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<r?a:r}}function gm(e,r){Wv(e,r),(e=e.alternate)&&Wv(e,r)}function t_(e){if(e.tag===13||e.tag===31){var r=Ze(e,67108864);r!==null&&qr(r,e,67108864),gm(e,67108864)}}function e_(e){if(e.tag===13||e.tag===31){var r=fi();r=Os(r);var a=Ze(e,r);a!==null&&qr(a,e,r),gm(e,r)}}var Tf=!0;function tA(e,r,a,l){var h=ut.T;ut.T=null;var p=xt.p;try{xt.p=2,ym(e,r,a,l)}finally{xt.p=p,ut.T=h}}function eA(e,r,a,l){var h=ut.T;ut.T=null;var p=xt.p;try{xt.p=8,ym(e,r,a,l)}finally{xt.p=p,ut.T=h}}function ym(e,r,a,l){if(Tf){var h=vm(l);if(h===null)rm(e,r,l,Sf,a),r_(e,l);else if(rA(h,e,r,a,l))l.stopPropagation();else if(r_(e,l),r&4&&-1<nA.indexOf(e)){for(;h!==null;){var p=Ce(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=Sr(p.pendingLanes);if(T!==0){var C=p;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var U=1<<31-Dt(T);C.entanglements[1]|=U,T&=~U}ms(p),(Ne&6)===0&&(sf=jn()+500,xu(0))}}break;case 31:case 13:C=Ze(p,2),C!==null&&qr(C,p,2),of(),gm(p,2)}if(p=vm(l),p===null&&rm(e,r,l,Sf,a),p===h)break;h=p}h!==null&&l.stopPropagation()}else rm(e,r,l,null,a)}}function vm(e){return e=yr(e),_m(e)}var Sf=null;function _m(e){if(Sf=null,e=Cr(e),e!==null){var r=u(e);if(r===null)e=null;else{var a=r.tag;if(a===13){if(e=d(r),e!==null)return e;e=null}else if(a===31){if(e=y(r),e!==null)return e;e=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null)}}return Sf=e,null}function n_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Kr()){case Gr:return 2;case Yr:return 8;case mi:case Cs:return 32;case fa:return 268435456;default:return 32}default:return 32}}var Em=!1,Ka=null,Ga=null,Ya=null,zu=new Map,ju=new Map,Qa=[],nA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function r_(e,r){switch(e){case"focusin":case"focusout":Ka=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":zu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(r.pointerId)}}function Bu(e,r,a,l,h,p){return e===null||e.nativeEvent!==p?(e={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:p,targetContainers:[h]},r!==null&&(r=Ce(r),r!==null&&t_(r)),e):(e.eventSystemFlags|=l,r=e.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),e)}function rA(e,r,a,l,h){switch(r){case"focusin":return Ka=Bu(Ka,e,r,a,l,h),!0;case"dragenter":return Ga=Bu(Ga,e,r,a,l,h),!0;case"mouseover":return Ya=Bu(Ya,e,r,a,l,h),!0;case"pointerover":var p=h.pointerId;return zu.set(p,Bu(zu.get(p)||null,e,r,a,l,h)),!0;case"gotpointercapture":return p=h.pointerId,ju.set(p,Bu(ju.get(p)||null,e,r,a,l,h)),!0}return!1}function i_(e){var r=Cr(e.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){e.blockedOn=r,sr(e.priority,function(){e_(a)});return}}else if(r===31){if(r=y(a),r!==null){e.blockedOn=r,sr(e.priority,function(){e_(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Af(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var a=vm(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Dr=l,a.target.dispatchEvent(l),Dr=null}else return r=Ce(a),r!==null&&t_(r),e.blockedOn=a,!1;r.shift()}return!0}function s_(e,r,a){Af(e)&&a.delete(r)}function iA(){Em=!1,Ka!==null&&Af(Ka)&&(Ka=null),Ga!==null&&Af(Ga)&&(Ga=null),Ya!==null&&Af(Ya)&&(Ya=null),zu.forEach(s_),ju.forEach(s_)}function wf(e,r){e.blockedOn===r&&(e.blockedOn=null,Em||(Em=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,iA)))}var Cf=null;function a_(e){Cf!==e&&(Cf=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Cf===e&&(Cf=null);for(var r=0;r<e.length;r+=3){var a=e[r],l=e[r+1],h=e[r+2];if(typeof l!="function"){if(_m(l||a)===null)continue;break}var p=Ce(a);p!==null&&(e.splice(r,3),r-=3,vd(p,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Ml(e){function r(U){return wf(U,e)}Ka!==null&&wf(Ka,e),Ga!==null&&wf(Ga,e),Ya!==null&&wf(Ya,e),zu.forEach(r),ju.forEach(r);for(var a=0;a<Qa.length;a++){var l=Qa[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Qa.length&&(a=Qa[0],a.blockedOn===null);)i_(a),a.blockedOn===null&&Qa.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],p=a[l+1],T=h[Ge]||null;if(typeof p=="function")T||a_(a);else if(T){var C=null;if(p&&p.hasAttribute("formAction")){if(h=p,T=p[Ge]||null)C=T.formAction;else if(_m(h)!==null)continue}else C=T.action;typeof C=="function"?a[l+1]=C:(a.splice(l,3),l-=3),a_(a)}}}function o_(){function e(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(T){return h=T})},focusReset:"manual",scroll:"manual"})}function r(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),h!==null&&(h(),h=null)}}}function bm(e){this._internalRoot=e}Rf.prototype.render=bm.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=fi();Zv(a,l,e,r,null,null)},Rf.prototype.unmount=bm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Zv(e.current,2,null,e,null,null),of(),r[kn]=null}};function Rf(e){this._internalRoot=e}Rf.prototype.unstable_scheduleHydration=function(e){if(e){var r=Ds();e={blockedOn:null,target:e,priority:r};for(var a=0;a<Qa.length&&r!==0&&r<Qa[a].priority;a++);Qa.splice(a,0,e),a===0&&i_(e)}};var l_=t.version;if(l_!=="19.2.0")throw Error(s(527,l_,"19.2.0"));xt.findDOMNode=function(e){var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=b(r),e=e!==null?R(e):null,e=e===null?null:e.stateNode,e};var sA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ut,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var If=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!If.isDisabled&&If.supportsFiber)try{ir=If.inject(sA),gn=If}catch{}}return Hu.createRoot=function(e,r){if(!o(e))throw Error(s(299));var a=!1,l="",h=py,p=gy,T=yy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError)),r=$v(e,1,!1,null,null,a,l,null,h,p,T,o_),e[kn]=r.current,nm(e),new bm(r)},Hu.hydrateRoot=function(e,r,a){if(!o(e))throw Error(s(299));var l=!1,h="",p=py,T=gy,C=yy,U=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.formState!==void 0&&(U=a.formState)),r=$v(e,1,!0,r,a??null,l,h,U,p,T,C,o_),r.context=Jv(null),a=r.current,l=fi(),l=Os(l),h=Ma(l),h.callback=null,Va(a,h,l),a=l,r.current.lanes=a,Ar(r,a),ms(r),e[kn]=r.current,nm(e),new Rf(r)},Hu.version="19.2.0",Hu}var v_;function yA(){if(v_)return Am.exports;v_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Am.exports=gA(),Am.exports}var vA=yA();const _A=dp(vA);var Uf={exports:{}},EA=Uf.exports,__;function bA(){return __||(__=1,(function(i,t){(function(n,s){i.exports=s()})(EA,function(){var n=function(f,m){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,E){g.__proto__=E}||function(g,E){for(var A in E)Object.prototype.hasOwnProperty.call(E,A)&&(g[A]=E[A])})(f,m)},s=function(){return(s=Object.assign||function(f){for(var m,g=1,E=arguments.length;g<E;g++)for(var A in m=arguments[g])Object.prototype.hasOwnProperty.call(m,A)&&(f[A]=m[A]);return f}).apply(this,arguments)};function o(f,m,g){for(var E,A=0,w=m.length;A<w;A++)!E&&A in m||((E=E||Array.prototype.slice.call(m,0,A))[A]=m[A]);return f.concat(E||Array.prototype.slice.call(m))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:oA,d=Object.keys,y=Array.isArray;function _(f,m){return typeof m!="object"||d(m).forEach(function(g){f[g]=m[g]}),f}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var b=Object.getPrototypeOf,R={}.hasOwnProperty;function O(f,m){return R.call(f,m)}function k(f,m){typeof m=="function"&&(m=m(b(f))),(typeof Reflect>"u"?d:Reflect.ownKeys)(m).forEach(function(g){dt(f,g,m[g])})}var J=Object.defineProperty;function dt(f,m,g,E){J(f,m,_(g&&O(g,"get")&&typeof g.get=="function"?{get:g.get,set:g.set,configurable:!0}:{value:g,configurable:!0,writable:!0},E))}function yt(f){return{from:function(m){return f.prototype=Object.create(m.prototype),dt(f.prototype,"constructor",f),{extend:k.bind(null,f.prototype)}}}}var vt=Object.getOwnPropertyDescriptor,qt=[].slice;function Kt(f,m,g){return qt.call(f,m,g)}function Ut(f,m){return m(f)}function ue(f){if(!f)throw new Error("Assertion Failed")}function xe(f){u.setImmediate?setImmediate(f):setTimeout(f,0)}function Zt(f,m){if(typeof m=="string"&&O(f,m))return f[m];if(!m)return f;if(typeof m!="string"){for(var g=[],E=0,A=m.length;E<A;++E){var w=Zt(f,m[E]);g.push(w)}return g}var D=m.indexOf(".");if(D!==-1){var x=f[m.substr(0,D)];return x==null?void 0:Zt(x,m.substr(D+1))}}function M(f,m,g){if(f&&m!==void 0&&!("isFrozen"in Object&&Object.isFrozen(f)))if(typeof m!="string"&&"length"in m){ue(typeof g!="string"&&"length"in g);for(var E=0,A=m.length;E<A;++E)M(f,m[E],g[E])}else{var w,D,x=m.indexOf(".");x!==-1?(w=m.substr(0,x),(D=m.substr(x+1))===""?g===void 0?y(f)&&!isNaN(parseInt(w))?f.splice(w,1):delete f[w]:f[w]=g:M(x=!(x=f[w])||!O(f,w)?f[w]={}:x,D,g)):g===void 0?y(f)&&!isNaN(parseInt(m))?f.splice(m,1):delete f[m]:f[m]=g}}function N(f){var m,g={};for(m in f)O(f,m)&&(g[m]=f[m]);return g}var P=[].concat;function Y(f){return P.apply([],f)}var Gr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Y([8,16,32,64].map(function(f){return["Int","Uint","Float"].map(function(m){return m+f+"Array"})}))).filter(function(f){return u[f]}),q=new Set(Gr.map(function(f){return u[f]})),W=null;function V(f){return W=new WeakMap,f=(function m(g){if(!g||typeof g!="object")return g;var E=W.get(g);if(E)return E;if(y(g)){E=[],W.set(g,E);for(var A=0,w=g.length;A<w;++A)E.push(m(g[A]))}else if(q.has(g.constructor))E=g;else{var D,x=b(g);for(D in E=x===Object.prototype?{}:Object.create(x),W.set(g,E),g)O(g,D)&&(E[D]=m(g[D]))}return E})(f),W=null,f}var Ke={}.toString;function tn(f){return Ke.call(f).slice(8,-1)}var ut=typeof Symbol<"u"?Symbol.iterator:"@@iterator",xt=typeof ut=="symbol"?function(f){var m;return f!=null&&(m=f[ut])&&m.apply(f)}:function(){return null};function Lt(f,m){return m=f.indexOf(m),0<=m&&f.splice(m,1),0<=m}var ce={};function fe(f){var m,g,E,A;if(arguments.length===1){if(y(f))return f.slice();if(this===ce&&typeof f=="string")return[f];if(A=xt(f)){for(g=[];!(E=A.next()).done;)g.push(E.value);return g}if(f==null)return[f];if(typeof(m=f.length)!="number")return[f];for(g=new Array(m);m--;)g[m]=f[m];return g}for(m=arguments.length,g=new Array(m);m--;)g[m]=arguments[m];return g}var F=typeof Symbol<"u"?function(f){return f[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Kr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Er=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Kr),ht={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Rt(f,m){this.name=f,this.message=m}function Vt(f,m){return f+". Errors: "+Object.keys(m).map(function(g){return m[g].toString()}).filter(function(g,E,A){return A.indexOf(g)===E}).join(`
`)}function Yt(f,m,g,E){this.failures=m,this.failedKeys=E,this.successCount=g,this.message=Vt(f,m)}function $t(f,m){this.name="BulkError",this.failures=Object.keys(m).map(function(g){return m[g]}),this.failuresByPos=m,this.message=Vt(f,this.failures)}yt(Rt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),yt(Yt).from(Rt),yt($t).from(Rt);var de=Er.reduce(function(f,m){return f[m]=m+"Error",f},{}),pn=Rt,Nt=Er.reduce(function(f,m){var g=m+"Error";function E(A,w){this.name=g,A?typeof A=="string"?(this.message="".concat(A).concat(w?`
 `+w:""),this.inner=w||null):typeof A=="object"&&(this.message="".concat(A.name," ").concat(A.message),this.inner=A):(this.message=ht[m]||g,this.inner=null)}return yt(E).from(pn),f[m]=E,f},{});Nt.Syntax=SyntaxError,Nt.Type=TypeError,Nt.Range=RangeError;var ts=Kr.reduce(function(f,m){return f[m+"Error"]=Nt[m],f},{}),Ui=Er.reduce(function(f,m){return["Syntax","Type","Range"].indexOf(m)===-1&&(f[m+"Error"]=Nt[m]),f},{});function Se(){}function hi(f){return f}function di(f,m){return f==null||f===hi?m:function(g){return m(f(g))}}function Fr(f,m){return function(){f.apply(this,arguments),m.apply(this,arguments)}}function ws(f,m){return f===Se?m:function(){var g=f.apply(this,arguments);g!==void 0&&(arguments[0]=g);var E=this.onsuccess,A=this.onerror;this.onsuccess=null,this.onerror=null;var w=m.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?Fr(E,this.onsuccess):E),A&&(this.onerror=this.onerror?Fr(A,this.onerror):A),w!==void 0?w:g}}function yo(f,m){return f===Se?m:function(){f.apply(this,arguments);var g=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,m.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?Fr(g,this.onsuccess):g),E&&(this.onerror=this.onerror?Fr(E,this.onerror):E)}}function vo(f,m){return f===Se?m:function(g){var E=f.apply(this,arguments);_(g,E);var A=this.onsuccess,w=this.onerror;return this.onsuccess=null,this.onerror=null,g=m.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?Fr(A,this.onsuccess):A),w&&(this.onerror=this.onerror?Fr(w,this.onerror):w),E===void 0?g===void 0?void 0:g:_(E,g)}}function fn(f,m){return f===Se?m:function(){return m.apply(this,arguments)!==!1&&f.apply(this,arguments)}}function en(f,m){return f===Se?m:function(){var g=f.apply(this,arguments);if(g&&typeof g.then=="function"){for(var E=this,A=arguments.length,w=new Array(A);A--;)w[A]=arguments[A];return g.then(function(){return m.apply(E,w)})}return m.apply(this,arguments)}}Ui.ModifyError=Yt,Ui.DexieError=Rt,Ui.BulkError=$t;var Vn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function rl(f){Vn=f}var es={},jn=100,Gr=typeof Promise>"u"?[]:(function(){var f=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[f,b(f),f];var m=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[m,b(m),f]})(),Kr=Gr[0],Er=Gr[1],Gr=Gr[2],Er=Er&&Er.then,Yr=Kr&&Kr.constructor,mi=!!Gr,Cs=function(f,m){ns.push([f,m]),Rs&&(queueMicrotask(il),Rs=!1)},fa=!0,Rs=!0,pi=[],ir=[],gn=hi,yn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Se,pgp:!1,env:{},finalize:Se},Dt=yn,ns=[],Tr=0,Is=[];function Ct(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var m=this._PSD=Dt;if(typeof f!="function"){if(f!==es)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Sr(this,this._value))}this._state=null,this._value=null,++m.ref,(function g(E,A){try{A(function(w){if(E._state===null){if(w===E)throw new TypeError("A promise cannot be resolved with itself.");var D=E._lib&&Xn();w&&typeof w.then=="function"?g(E,function(x,z){w instanceof Ct?w._then(x,z):w.then(x,z)}):(E._state=!0,E._value=w,Qr(E)),D&&Ar()}},Sr.bind(null,E))}catch(w){Sr(E,w)}})(this,f)}var Li={get:function(){var f=Dt,m=sr;function g(E,A){var w=this,D=!f.global&&(f!==Dt||m!==sr),x=D&&!kn(),z=new Ct(function(j,Q){gr(w,new nn(Ns(E,f,D,x),Ns(A,f,D,x),j,Q,f))});return this._consoleTask&&(z._consoleTask=this._consoleTask),z}return g.prototype=es,g},set:function(f){dt(this,"then",f&&f.prototype===es?Li:{get:function(){return f},set:Li.set})}};function nn(f,m,g,E,A){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof m=="function"?m:null,this.resolve=g,this.reject=E,this.psd=A}function Sr(f,m){var g,E;ir.push(m),f._state===null&&(g=f._lib&&Xn(),m=gn(m),f._state=!1,f._value=m,E=f,pi.some(function(A){return A._value===E._value})||pi.push(E),Qr(f),g&&Ar())}function Qr(f){var m=f._listeners;f._listeners=[];for(var g=0,E=m.length;g<E;++g)gr(f,m[g]);var A=f._PSD;--A.ref||A.finalize(),Tr===0&&(++Tr,Cs(function(){--Tr==0&&_o()},[]))}function gr(f,m){if(f._state!==null){var g=f._state?m.onFulfilled:m.onRejected;if(g===null)return(f._state?m.resolve:m.reject)(f._value);++m.psd.ref,++Tr,Cs(su,[g,f,m])}else f._listeners.push(m)}function su(f,m,g){try{var E,A=m._value;!m._state&&ir.length&&(ir=[]),E=Vn&&m._consoleTask?m._consoleTask.run(function(){return f(A)}):f(A),m._state||ir.indexOf(A)!==-1||(function(w){for(var D=pi.length;D;)if(pi[--D]._value===w._value)return pi.splice(D,1)})(m),g.resolve(E)}catch(w){g.reject(w)}finally{--Tr==0&&_o(),--g.psd.ref||g.psd.finalize()}}function il(){Bn(yn,function(){Xn()&&Ar()})}function Xn(){var f=fa;return Rs=fa=!1,f}function Ar(){var f,m,g;do for(;0<ns.length;)for(f=ns,ns=[],g=f.length,m=0;m<g;++m){var E=f[m];E[0].apply(null,E[1])}while(0<ns.length);Rs=fa=!0}function _o(){var f=pi;pi=[],f.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var m=Is.slice(0),g=m.length;g;)m[--g]()}function gi(f){return new Ct(es,!1,f)}function Me(f,m){var g=Dt;return function(){var E=Xn(),A=Dt;try{return $r(g,!0),f.apply(this,arguments)}catch(w){m&&m(w)}finally{$r(A,!1),E&&Ar()}}}k(Ct.prototype,{then:Li,_then:function(f,m){gr(this,new nn(null,null,f,m,Dt))},catch:function(f){if(arguments.length===1)return this.then(null,f);var m=f,g=arguments[1];return typeof m=="function"?this.then(null,function(E){return(E instanceof m?g:gi)(E)}):this.then(null,function(E){return(E&&E.name===m?g:gi)(E)})},finally:function(f){return this.then(function(m){return Ct.resolve(f()).then(function(){return m})},function(m){return Ct.resolve(f()).then(function(){return gi(m)})})},timeout:function(f,m){var g=this;return f<1/0?new Ct(function(E,A){var w=setTimeout(function(){return A(new Nt.Timeout(m))},f);g.then(E,A).finally(clearTimeout.bind(null,w))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&dt(Ct.prototype,Symbol.toStringTag,"Dexie.Promise"),yn.env=Eo(),k(Ct,{all:function(){var f=fe.apply(null,arguments).map(zi);return new Ct(function(m,g){f.length===0&&m([]);var E=f.length;f.forEach(function(A,w){return Ct.resolve(A).then(function(D){f[w]=D,--E||m(f)},g)})})},resolve:function(f){return f instanceof Ct?f:f&&typeof f.then=="function"?new Ct(function(m,g){f.then(m,g)}):new Ct(es,!0,f)},reject:gi,race:function(){var f=fe.apply(null,arguments).map(zi);return new Ct(function(m,g){f.map(function(E){return Ct.resolve(E).then(m,g)})})},PSD:{get:function(){return Dt},set:function(f){return Dt=f}},totalEchoes:{get:function(){return sr}},newPSD:ke,usePSD:Bn,scheduler:{get:function(){return Cs},set:function(f){Cs=f}},rejectionMapper:{get:function(){return gn},set:function(f){gn=f}},follow:function(f,m){return new Ct(function(g,E){return ke(function(A,w){var D=Dt;D.unhandleds=[],D.onunhandled=w,D.finalize=Fr(function(){var x,z=this;x=function(){z.unhandleds.length===0?A():w(z.unhandleds[0])},Is.push(function j(){x(),Is.splice(Is.indexOf(j),1)}),++Tr,Cs(function(){--Tr==0&&_o()},[])},D.finalize),f()},m,g,E)})}}),Yr&&(Yr.allSettled&&dt(Ct,"allSettled",function(){var f=fe.apply(null,arguments).map(zi);return new Ct(function(m){f.length===0&&m([]);var g=f.length,E=new Array(g);f.forEach(function(A,w){return Ct.resolve(A).then(function(D){return E[w]={status:"fulfilled",value:D}},function(D){return E[w]={status:"rejected",reason:D}}).then(function(){return--g||m(E)})})})}),Yr.any&&typeof AggregateError<"u"&&dt(Ct,"any",function(){var f=fe.apply(null,arguments).map(zi);return new Ct(function(m,g){f.length===0&&g(new AggregateError([]));var E=f.length,A=new Array(E);f.forEach(function(w,D){return Ct.resolve(w).then(function(x){return m(x)},function(x){A[D]=x,--E||g(new AggregateError(A))})})})}),Yr.withResolvers&&(Ct.withResolvers=Yr.withResolvers));var Je={awaits:0,echoes:0,id:0},Os=0,wr=[],Ds=0,sr=0,Xr=0;function ke(f,m,g,E){var A=Dt,w=Object.create(A);return w.parent=A,w.ref=0,w.global=!1,w.id=++Xr,yn.env,w.env=mi?{Promise:Ct,PromiseProp:{value:Ct,configurable:!0,writable:!0},all:Ct.all,race:Ct.race,allSettled:Ct.allSettled,any:Ct.any,resolve:Ct.resolve,reject:Ct.reject}:{},m&&_(w,m),++A.ref,w.finalize=function(){--this.parent.ref||this.parent.finalize()},E=Bn(w,f,g,E),w.ref===0&&w.finalize(),E}function Ge(){return Je.id||(Je.id=++Os),++Je.awaits,Je.echoes+=jn,Je.id}function kn(){return!!Je.awaits&&(--Je.awaits==0&&(Je.id=0),Je.echoes=Je.awaits*jn,!0)}function zi(f){return Je.echoes&&f&&f.constructor===Yr?(Ge(),f.then(function(m){return kn(),m},function(m){return kn(),Ce(m)})):f}function au(){var f=wr[wr.length-1];wr.pop(),$r(f,!1)}function $r(f,m){var g,E=Dt;(m?!Je.echoes||Ds++&&f===Dt:!Ds||--Ds&&f===Dt)||queueMicrotask(m?(function(A){++sr,Je.echoes&&--Je.echoes!=0||(Je.echoes=Je.awaits=Je.id=0),wr.push(Dt),$r(A,!0)}).bind(null,f):au),f!==Dt&&(Dt=f,E===yn&&(yn.env=Eo()),mi&&(g=yn.env.Promise,m=f.env,(E.global||f.global)&&(Object.defineProperty(u,"Promise",m.PromiseProp),g.all=m.all,g.race=m.race,g.resolve=m.resolve,g.reject=m.reject,m.allSettled&&(g.allSettled=m.allSettled),m.any&&(g.any=m.any))))}function Eo(){var f=u.Promise;return mi?{Promise:f,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:f.all,race:f.race,allSettled:f.allSettled,any:f.any,resolve:f.resolve,reject:f.reject}:{}}function Bn(f,m,g,E,A){var w=Dt;try{return $r(f,!0),m(g,E,A)}finally{$r(w,!1)}}function Ns(f,m,g,E){return typeof f!="function"?f:function(){var A=Dt;g&&Ge(),$r(m,!0);try{return f.apply(this,arguments)}finally{$r(A,!1),E&&queueMicrotask(kn)}}}function Cr(f){Promise===Yr&&Je.echoes===0?Ds===0?f():enqueueNativeMicroTask(f):setTimeout(f,0)}(""+Er).indexOf("[native code]")===-1&&(Ge=kn=Se);var Ce=Ct.reject,vn="",An="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",rn="String expected.",yi=[],rs="__dbnames",Rr="readonly",Ir="readwrite";function Jr(f,m){return f?m?function(){return f.apply(this,arguments)&&m.apply(this,arguments)}:f:m}var ha={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function is(f){return typeof f!="string"||/\./.test(f)?function(m){return m}:function(m){return m[f]===void 0&&f in m&&delete(m=V(m))[f],m}}function bo(){throw Nt.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function se(f,m){try{var g=ar(f),E=ar(m);if(g!==E)return g==="Array"?1:E==="Array"?-1:g==="binary"?1:E==="binary"?-1:g==="string"?1:E==="string"?-1:g==="Date"?1:E!=="Date"?NaN:-1;switch(g){case"number":case"Date":case"string":return m<f?1:f<m?-1:0;case"binary":return(function(A,w){for(var D=A.length,x=w.length,z=D<x?D:x,j=0;j<z;++j)if(A[j]!==w[j])return A[j]<w[j]?-1:1;return D===x?0:D<x?-1:1})(sn(f),sn(m));case"Array":return(function(A,w){for(var D=A.length,x=w.length,z=D<x?D:x,j=0;j<z;++j){var Q=se(A[j],w[j]);if(Q!==0)return Q}return D===x?0:D<x?-1:1})(f,m)}}catch{}return NaN}function ar(f){var m=typeof f;return m!="object"?m:ArrayBuffer.isView(f)?"binary":(f=tn(f),f==="ArrayBuffer"?"binary":f)}function sn(f){return f instanceof Uint8Array?f:ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(f)}function an(f,m,g){var E=f.schema.yProps;return E?(m&&0<g.numFailures&&(m=m.filter(function(A,w){return!g.failures[w]})),Promise.all(E.map(function(A){return A=A.updatesTable,m?f.db.table(A).where("k").anyOf(m).delete():f.db.table(A).clear()})).then(function(){return g})):g}var Or=(da.prototype.execute=function(f){var m=this["@@propmod"];if(m.add!==void 0){var g=m.add;if(y(g))return o(o([],y(f)?f:[],!0),g).sort();if(typeof g=="number")return(Number(f)||0)+g;if(typeof g=="bigint")try{return BigInt(f)+g}catch{return BigInt(0)+g}throw new TypeError("Invalid term ".concat(g))}if(m.remove!==void 0){var E=m.remove;if(y(E))return y(f)?f.filter(function(A){return!E.includes(A)}).sort():[];if(typeof E=="number")return Number(f)-E;if(typeof E=="bigint")try{return BigInt(f)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return g=(g=m.replacePrefix)===null||g===void 0?void 0:g[0],g&&typeof f=="string"&&f.startsWith(g)?m.replacePrefix[1]+f.substring(g.length):f},da);function da(f){this["@@propmod"]=f}function Ie(f,m){for(var g=d(m),E=g.length,A=!1,w=0;w<E;++w){var D=g[w],x=m[D],z=Zt(f,D);x instanceof Or?(M(f,D,x.execute(z)),A=!0):z!==x&&(M(f,D,x),A=!0)}return A}var ss=(pe.prototype._trans=function(f,m,g){var E=this._tx||Dt.trans,A=this.name,w=Vn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(f==="readonly"?"read":"write"," ").concat(this.name));function D(j,Q,L){if(!L.schema[A])throw new Nt.NotFound("Table "+A+" not part of transaction");return m(L.idbtrans,L)}var x=Xn();try{var z=E&&E.db._novip===this.db._novip?E===Dt.trans?E._promise(f,D,g):ke(function(){return E._promise(f,D,g)},{trans:E,transless:Dt.transless||Dt}):(function j(Q,L,$,B){if(Q.idbdb&&(Q._state.openComplete||Dt.letThrough||Q._vip)){var K=Q._createTransaction(L,$,Q._dbSchema);try{K.create(),Q._state.PR1398_maxLoop=3}catch(G){return G.name===de.InvalidState&&Q.isOpen()&&0<--Q._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Q.close({disableAutoOpen:!1}),Q.open().then(function(){return j(Q,L,$,B)})):Ce(G)}return K._promise(L,function(G,X){return ke(function(){return Dt.trans=K,B(G,X,K)})}).then(function(G){if(L==="readwrite")try{K.idbtrans.commit()}catch{}return L==="readonly"?G:K._completion.then(function(){return G})})}if(Q._state.openComplete)return Ce(new Nt.DatabaseClosed(Q._state.dbOpenError));if(!Q._state.isBeingOpened){if(!Q._state.autoOpen)return Ce(new Nt.DatabaseClosed);Q.open().catch(Se)}return Q._state.dbReadyPromise.then(function(){return j(Q,L,$,B)})})(this.db,f,[this.name],D);return w&&(z._consoleTask=w,z=z.catch(function(j){return console.trace(j),Ce(j)})),z}finally{x&&Ar()}},pe.prototype.get=function(f,m){var g=this;return f&&f.constructor===Object?this.where(f).first(m):f==null?Ce(new Nt.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return g.core.get({trans:E,key:f}).then(function(A){return g.hook.reading.fire(A)})}).then(m)},pe.prototype.where=function(f){if(typeof f=="string")return new this.db.WhereClause(this,f);if(y(f))return new this.db.WhereClause(this,"[".concat(f.join("+"),"]"));var m=d(f);if(m.length===1)return this.where(m[0]).equals(f[m[0]]);var g=this.schema.indexes.concat(this.schema.primKey).filter(function(x){if(x.compound&&m.every(function(j){return 0<=x.keyPath.indexOf(j)})){for(var z=0;z<m.length;++z)if(m.indexOf(x.keyPath[z])===-1)return!1;return!0}return!1}).sort(function(x,z){return x.keyPath.length-z.keyPath.length})[0];if(g&&this.db._maxKey!==vn){var w=g.keyPath.slice(0,m.length);return this.where(w).equals(w.map(function(z){return f[z]}))}!g&&Vn&&console.warn("The query ".concat(JSON.stringify(f)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(m.join("+"),"]"));var E=this.schema.idxByName;function A(x,z){return se(x,z)===0}var D=m.reduce(function(L,z){var j=L[0],Q=L[1],L=E[z],$=f[z];return[j||L,j||!L?Jr(Q,L&&L.multi?function(B){return B=Zt(B,z),y(B)&&B.some(function(K){return A($,K)})}:function(B){return A($,Zt(B,z))}):Q]},[null,null]),w=D[0],D=D[1];return w?this.where(w.name).equals(f[w.keyPath]).filter(D):g?this.filter(D):this.where(m).equals("")},pe.prototype.filter=function(f){return this.toCollection().and(f)},pe.prototype.count=function(f){return this.toCollection().count(f)},pe.prototype.offset=function(f){return this.toCollection().offset(f)},pe.prototype.limit=function(f){return this.toCollection().limit(f)},pe.prototype.each=function(f){return this.toCollection().each(f)},pe.prototype.toArray=function(f){return this.toCollection().toArray(f)},pe.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},pe.prototype.orderBy=function(f){return new this.db.Collection(new this.db.WhereClause(this,y(f)?"[".concat(f.join("+"),"]"):f))},pe.prototype.reverse=function(){return this.toCollection().reverse()},pe.prototype.mapToClass=function(f){var m,g=this.db,E=this.name;function A(){return m!==null&&m.apply(this,arguments)||this}(this.schema.mappedClass=f).prototype instanceof bo&&((function(z,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");function Q(){this.constructor=z}n(z,j),z.prototype=j===null?Object.create(j):(Q.prototype=j.prototype,new Q)})(A,m=f),Object.defineProperty(A.prototype,"db",{get:function(){return g},enumerable:!1,configurable:!0}),A.prototype.table=function(){return E},f=A);for(var w=new Set,D=f.prototype;D;D=b(D))Object.getOwnPropertyNames(D).forEach(function(z){return w.add(z)});function x(z){if(!z)return z;var j,Q=Object.create(f.prototype);for(j in z)if(!w.has(j))try{Q[j]=z[j]}catch{}return Q}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=x,this.hook("reading",x),f},pe.prototype.defineClass=function(){return this.mapToClass(function(f){_(this,f)})},pe.prototype.add=function(f,m){var g=this,E=this.schema.primKey,A=E.auto,w=E.keyPath,D=f;return w&&A&&(D=is(w)(f)),this._trans("readwrite",function(x){return g.core.mutate({trans:x,type:"add",keys:m!=null?[m]:null,values:[D]})}).then(function(x){return x.numFailures?Ct.reject(x.failures[0]):x.lastResult}).then(function(x){if(w)try{M(f,w,x)}catch{}return x})},pe.prototype.upsert=function(f,m){var g=this,E=this.schema.primKey.keyPath;return this._trans("readwrite",function(A){return g.core.get({trans:A,key:f}).then(function(w){var D=w??{};return Ie(D,m),E&&M(D,E,f),g.core.mutate({trans:A,type:"put",values:[D],keys:[f],upsert:!0,updates:{keys:[f],changeSpecs:[m]}}).then(function(x){return x.numFailures?Ct.reject(x.failures[0]):!!w})})})},pe.prototype.update=function(f,m){return typeof f!="object"||y(f)?this.where(":id").equals(f).modify(m):(f=Zt(f,this.schema.primKey.keyPath),f===void 0?Ce(new Nt.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(f).modify(m))},pe.prototype.put=function(f,m){var g=this,E=this.schema.primKey,A=E.auto,w=E.keyPath,D=f;return w&&A&&(D=is(w)(f)),this._trans("readwrite",function(x){return g.core.mutate({trans:x,type:"put",values:[D],keys:m!=null?[m]:null})}).then(function(x){return x.numFailures?Ct.reject(x.failures[0]):x.lastResult}).then(function(x){if(w)try{M(f,w,x)}catch{}return x})},pe.prototype.delete=function(f){var m=this;return this._trans("readwrite",function(g){return m.core.mutate({trans:g,type:"delete",keys:[f]}).then(function(E){return an(m,[f],E)}).then(function(E){return E.numFailures?Ct.reject(E.failures[0]):void 0})})},pe.prototype.clear=function(){var f=this;return this._trans("readwrite",function(m){return f.core.mutate({trans:m,type:"deleteRange",range:ha}).then(function(g){return an(f,null,g)})}).then(function(m){return m.numFailures?Ct.reject(m.failures[0]):void 0})},pe.prototype.bulkGet=function(f){var m=this;return this._trans("readonly",function(g){return m.core.getMany({keys:f,trans:g}).then(function(E){return E.map(function(A){return m.hook.reading.fire(A)})})})},pe.prototype.bulkAdd=function(f,m,g){var E=this,A=Array.isArray(m)?m:void 0,w=(g=g||(A?void 0:m))?g.allKeys:void 0;return this._trans("readwrite",function(D){var j=E.schema.primKey,x=j.auto,j=j.keyPath;if(j&&A)throw new Nt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(A&&A.length!==f.length)throw new Nt.InvalidArgument("Arguments objects and keys must have the same length");var z=f.length,j=j&&x?f.map(is(j)):f;return E.core.mutate({trans:D,type:"add",keys:A,values:j,wantResults:w}).then(function(K){var L=K.numFailures,$=K.results,B=K.lastResult,K=K.failures;if(L===0)return w?$:B;throw new $t("".concat(E.name,".bulkAdd(): ").concat(L," of ").concat(z," operations failed"),K)})})},pe.prototype.bulkPut=function(f,m,g){var E=this,A=Array.isArray(m)?m:void 0,w=(g=g||(A?void 0:m))?g.allKeys:void 0;return this._trans("readwrite",function(D){var j=E.schema.primKey,x=j.auto,j=j.keyPath;if(j&&A)throw new Nt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(A&&A.length!==f.length)throw new Nt.InvalidArgument("Arguments objects and keys must have the same length");var z=f.length,j=j&&x?f.map(is(j)):f;return E.core.mutate({trans:D,type:"put",keys:A,values:j,wantResults:w}).then(function(K){var L=K.numFailures,$=K.results,B=K.lastResult,K=K.failures;if(L===0)return w?$:B;throw new $t("".concat(E.name,".bulkPut(): ").concat(L," of ").concat(z," operations failed"),K)})})},pe.prototype.bulkUpdate=function(f){var m=this,g=this.core,E=f.map(function(D){return D.key}),A=f.map(function(D){return D.changes}),w=[];return this._trans("readwrite",function(D){return g.getMany({trans:D,keys:E,cache:"clone"}).then(function(x){var z=[],j=[];f.forEach(function(L,$){var B=L.key,K=L.changes,G=x[$];if(G){for(var X=0,et=Object.keys(K);X<et.length;X++){var it=et[X],lt=K[it];if(it===m.schema.primKey.keyPath){if(se(lt,B)!==0)throw new Nt.Constraint("Cannot update primary key in bulkUpdate()")}else M(G,it,lt)}w.push($),z.push(B),j.push(G)}});var Q=z.length;return g.mutate({trans:D,type:"put",keys:z,values:j,updates:{keys:E,changeSpecs:A}}).then(function(L){var $=L.numFailures,B=L.failures;if($===0)return Q;for(var K=0,G=Object.keys(B);K<G.length;K++){var X,et=G[K],it=w[Number(et)];it!=null&&(X=B[et],delete B[et],B[it]=X)}throw new $t("".concat(m.name,".bulkUpdate(): ").concat($," of ").concat(Q," operations failed"),B)})})})},pe.prototype.bulkDelete=function(f){var m=this,g=f.length;return this._trans("readwrite",function(E){return m.core.mutate({trans:E,type:"delete",keys:f}).then(function(A){return an(m,f,A)})}).then(function(D){var A=D.numFailures,w=D.lastResult,D=D.failures;if(A===0)return w;throw new $t("".concat(m.name,".bulkDelete(): ").concat(A," of ").concat(g," operations failed"),D)})},pe);function pe(){}function Zr(f){function m(D,x){if(x){for(var z=arguments.length,j=new Array(z-1);--z;)j[z-1]=arguments[z];return g[D].subscribe.apply(null,j),f}if(typeof D=="string")return g[D]}var g={};m.addEventType=w;for(var E=1,A=arguments.length;E<A;++E)w(arguments[E]);return m;function w(D,x,z){if(typeof D!="object"){var j;x=x||fn;var Q={subscribers:[],fire:z=z||Se,subscribe:function(L){Q.subscribers.indexOf(L)===-1&&(Q.subscribers.push(L),Q.fire=x(Q.fire,L))},unsubscribe:function(L){Q.subscribers=Q.subscribers.filter(function($){return $!==L}),Q.fire=Q.subscribers.reduce(x,z)}};return g[D]=m[D]=Q}d(j=D).forEach(function(L){var $=j[L];if(y($))w(L,j[L][0],j[L][1]);else{if($!=="asap")throw new Nt.InvalidArgument("Invalid event config");var B=w(L,hi,function(){for(var K=arguments.length,G=new Array(K);K--;)G[K]=arguments[K];B.subscribers.forEach(function(X){xe(function(){X.apply(null,G)})})})}})}}function wn(f,m){return yt(m).from({prototype:f}),m}function Wr(f,m){return!(f.filter||f.algorithm||f.or)&&(m?f.justLimit:!f.replayFilter)}function ma(f,m){f.filter=Jr(f.filter,m)}function xs(f,m,g){var E=f.replayFilter;f.replayFilter=E?function(){return Jr(E(),m())}:m,f.justLimit=g&&!E}function ti(f,m){if(f.isPrimKey)return m.primaryKey;var g=m.getIndexByKeyPath(f.index);if(!g)throw new Nt.Schema("KeyPath "+f.index+" on object store "+m.name+" is not indexed");return g}function To(f,m,g){var E=ti(f,m.schema);return m.openCursor({trans:g,values:!f.keysOnly,reverse:f.dir==="prev",unique:!!f.unique,query:{index:E,range:f.range}})}function ei(f,m,g,E){var A=f.replayFilter?Jr(f.filter,f.replayFilter()):f.filter;if(f.or){var w={},D=function(x,z,j){var Q,L;A&&!A(z,j,function($){return z.stop($)},function($){return z.fail($)})||((L=""+(Q=z.primaryKey))=="[object ArrayBuffer]"&&(L=""+new Uint8Array(Q)),O(w,L)||(w[L]=!0,m(x,z,j)))};return Promise.all([f.or._iterate(D,g),$n(To(f,E,g),f.algorithm,D,!f.keysOnly&&f.valueMapper)])}return $n(To(f,E,g),Jr(f.algorithm,A),m,!f.keysOnly&&f.valueMapper)}function $n(f,m,g,E){var A=Me(E?function(w,D,x){return g(E(w),D,x)}:g);return f.then(function(w){if(w)return w.start(function(){var D=function(){return w.continue()};m&&!m(w,function(x){return D=x},function(x){w.stop(x),D=Se},function(x){w.fail(x),D=Se})||A(w.value,w,function(x){return D=x}),D()})})}var sl=(me.prototype._read=function(f,m){var g=this._ctx;return g.error?g.table._trans(null,Ce.bind(null,g.error)):g.table._trans("readonly",f).then(m)},me.prototype._write=function(f){var m=this._ctx;return m.error?m.table._trans(null,Ce.bind(null,m.error)):m.table._trans("readwrite",f,"locked")},me.prototype._addAlgorithm=function(f){var m=this._ctx;m.algorithm=Jr(m.algorithm,f)},me.prototype._iterate=function(f,m){return ei(this._ctx,f,m,this._ctx.table.core)},me.prototype.clone=function(f){var m=Object.create(this.constructor.prototype),g=Object.create(this._ctx);return f&&_(g,f),m._ctx=g,m},me.prototype.raw=function(){return this._ctx.valueMapper=null,this},me.prototype.each=function(f){var m=this._ctx;return this._read(function(g){return ei(m,f,g,m.table.core)})},me.prototype.count=function(f){var m=this;return this._read(function(g){var E=m._ctx,A=E.table.core;if(Wr(E,!0))return A.count({trans:g,query:{index:ti(E,A.schema),range:E.range}}).then(function(D){return Math.min(D,E.limit)});var w=0;return ei(E,function(){return++w,!1},g,A).then(function(){return w})}).then(f)},me.prototype.sortBy=function(f,m){var g=f.split(".").reverse(),E=g[0],A=g.length-1;function w(z,j){return j?w(z[g[j]],j-1):z[E]}var D=this._ctx.dir==="next"?1:-1;function x(z,j){return se(w(z,A),w(j,A))*D}return this.toArray(function(z){return z.sort(x)}).then(m)},me.prototype.toArray=function(f){var m=this;return this._read(function(g){var E=m._ctx;if(E.dir==="next"&&Wr(E,!0)&&0<E.limit){var A=E.valueMapper,w=ti(E,E.table.core.schema);return E.table.core.query({trans:g,limit:E.limit,values:!0,query:{index:w,range:E.range}}).then(function(x){return x=x.result,A?x.map(A):x})}var D=[];return ei(E,function(x){return D.push(x)},g,E.table.core).then(function(){return D})},f)},me.prototype.offset=function(f){var m=this._ctx;return f<=0||(m.offset+=f,Wr(m)?xs(m,function(){var g=f;return function(E,A){return g===0||(g===1?--g:A(function(){E.advance(g),g=0}),!1)}}):xs(m,function(){var g=f;return function(){return--g<0}})),this},me.prototype.limit=function(f){return this._ctx.limit=Math.min(this._ctx.limit,f),xs(this._ctx,function(){var m=f;return function(g,E,A){return--m<=0&&E(A),0<=m}},!0),this},me.prototype.until=function(f,m){return ma(this._ctx,function(g,E,A){return!f(g.value)||(E(A),m)}),this},me.prototype.first=function(f){return this.limit(1).toArray(function(m){return m[0]}).then(f)},me.prototype.last=function(f){return this.reverse().first(f)},me.prototype.filter=function(f){var m;return ma(this._ctx,function(g){return f(g.value)}),(m=this._ctx).isMatch=Jr(m.isMatch,f),this},me.prototype.and=function(f){return this.filter(f)},me.prototype.or=function(f){return new this.db.WhereClause(this._ctx.table,f,this)},me.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},me.prototype.desc=function(){return this.reverse()},me.prototype.eachKey=function(f){var m=this._ctx;return m.keysOnly=!m.isMatch,this.each(function(g,E){f(E.key,E)})},me.prototype.eachUniqueKey=function(f){return this._ctx.unique="unique",this.eachKey(f)},me.prototype.eachPrimaryKey=function(f){var m=this._ctx;return m.keysOnly=!m.isMatch,this.each(function(g,E){f(E.primaryKey,E)})},me.prototype.keys=function(f){var m=this._ctx;m.keysOnly=!m.isMatch;var g=[];return this.each(function(E,A){g.push(A.key)}).then(function(){return g}).then(f)},me.prototype.primaryKeys=function(f){var m=this._ctx;if(m.dir==="next"&&Wr(m,!0)&&0<m.limit)return this._read(function(E){var A=ti(m,m.table.core.schema);return m.table.core.query({trans:E,values:!1,limit:m.limit,query:{index:A,range:m.range}})}).then(function(E){return E.result}).then(f);m.keysOnly=!m.isMatch;var g=[];return this.each(function(E,A){g.push(A.primaryKey)}).then(function(){return g}).then(f)},me.prototype.uniqueKeys=function(f){return this._ctx.unique="unique",this.keys(f)},me.prototype.firstKey=function(f){return this.limit(1).keys(function(m){return m[0]}).then(f)},me.prototype.lastKey=function(f){return this.reverse().firstKey(f)},me.prototype.distinct=function(){var f=this._ctx,f=f.index&&f.table.schema.idxByName[f.index];if(!f||!f.multi)return this;var m={};return ma(this._ctx,function(A){var E=A.primaryKey.toString(),A=O(m,E);return m[E]=!0,!A}),this},me.prototype.modify=function(f){var m=this,g=this._ctx;return this._write(function(E){var A=typeof f=="function"?f:function(G){return Ie(G,f)},w=g.table.core,j=w.schema.primaryKey,D=j.outbound,x=j.extractKey,z=200,j=m.db._options.modifyChunkSize;j&&(z=typeof j=="object"?j[w.name]||j["*"]||200:j);function Q(G,it){var et=it.failures,it=it.numFailures;$+=G-it;for(var lt=0,mt=d(et);lt<mt.length;lt++){var St=mt[lt];L.push(et[St])}}var L=[],$=0,B=[],K=f===pa;return m.clone().primaryKeys().then(function(G){function X(it){var lt=Math.min(z,G.length-it),mt=G.slice(it,it+lt);return(K?Promise.resolve([]):w.getMany({trans:E,keys:mt,cache:"immutable"})).then(function(St){var Ot=[],bt=[],wt=D?[]:null,It=K?mt:[];if(!K)for(var Tt=0;Tt<lt;++Tt){var Mt=St[Tt],Ht={value:V(Mt),primKey:G[it+Tt]};A.call(Ht,Ht.value,Ht)!==!1&&(Ht.value==null?It.push(G[it+Tt]):D||se(x(Mt),x(Ht.value))===0?(bt.push(Ht.value),D&&wt.push(G[it+Tt])):(It.push(G[it+Tt]),Ot.push(Ht.value)))}return Promise.resolve(0<Ot.length&&w.mutate({trans:E,type:"add",values:Ot}).then(function(Wt){for(var ae in Wt.failures)It.splice(parseInt(ae),1);Q(Ot.length,Wt)})).then(function(){return(0<bt.length||et&&typeof f=="object")&&w.mutate({trans:E,type:"put",keys:wt,values:bt,criteria:et,changeSpec:typeof f!="function"&&f,isAdditionalChunk:0<it}).then(function(Wt){return Q(bt.length,Wt)})}).then(function(){return(0<It.length||et&&K)&&w.mutate({trans:E,type:"delete",keys:It,criteria:et,isAdditionalChunk:0<it}).then(function(Wt){return an(g.table,It,Wt)}).then(function(Wt){return Q(It.length,Wt)})}).then(function(){return G.length>it+lt&&X(it+z)})})}var et=Wr(g)&&g.limit===1/0&&(typeof f!="function"||K)&&{index:g.index,range:g.range};return X(0).then(function(){if(0<L.length)throw new Yt("Error modifying one or more objects",L,$,B);return G.length})})})},me.prototype.delete=function(){var f=this._ctx,m=f.range;return!Wr(f)||f.table.schema.yProps||!f.isPrimKey&&m.type!==3?this.modify(pa):this._write(function(g){var E=f.table.core.schema.primaryKey,A=m;return f.table.core.count({trans:g,query:{index:E,range:A}}).then(function(w){return f.table.core.mutate({trans:g,type:"deleteRange",range:A}).then(function(z){var x=z.failures,z=z.numFailures;if(z)throw new Yt("Could not delete some values",Object.keys(x).map(function(j){return x[j]}),w-z);return w-z})})})},me);function me(){}var pa=function(f,m){return m.value=null};function ga(f,m){return f<m?-1:f===m?0:1}function al(f,m){return m<f?-1:f===m?0:1}function hn(f,m,g){return f=f instanceof ji?new f.Collection(f):f,f._ctx.error=new(g||TypeError)(m),f}function ni(f){return new f.Collection(f,function(){return yr("")}).limit(0)}function or(f,m,g,E){var A,w,D,x,z,j,Q,L=g.length;if(!g.every(function(K){return typeof K=="string"}))return hn(f,rn);function $(K){A=K==="next"?function(X){return X.toUpperCase()}:function(X){return X.toLowerCase()},w=K==="next"?function(X){return X.toLowerCase()}:function(X){return X.toUpperCase()},D=K==="next"?ga:al;var G=g.map(function(X){return{lower:w(X),upper:A(X)}}).sort(function(X,et){return D(X.lower,et.lower)});x=G.map(function(X){return X.upper}),z=G.map(function(X){return X.lower}),Q=(j=K)==="next"?"":E}$("next"),f=new f.Collection(f,function(){return Dr(x[0],z[L-1]+E)}),f._ondirectionchange=function(K){$(K)};var B=0;return f._addAlgorithm(function(K,G,X){var et=K.key;if(typeof et!="string")return!1;var it=w(et);if(m(it,z,B))return!0;for(var lt=null,mt=B;mt<L;++mt){var St=(function(Ot,bt,wt,It,Tt,Mt){for(var Ht=Math.min(Ot.length,It.length),Wt=-1,ae=0;ae<Ht;++ae){var Fn=bt[ae];if(Fn!==It[ae])return Tt(Ot[ae],wt[ae])<0?Ot.substr(0,ae)+wt[ae]+wt.substr(ae+1):Tt(Ot[ae],It[ae])<0?Ot.substr(0,ae)+It[ae]+wt.substr(ae+1):0<=Wt?Ot.substr(0,Wt)+bt[Wt]+wt.substr(Wt+1):null;Tt(Ot[ae],Fn)<0&&(Wt=ae)}return Ht<It.length&&Mt==="next"?Ot+wt.substr(Ot.length):Ht<Ot.length&&Mt==="prev"?Ot.substr(0,wt.length):Wt<0?null:Ot.substr(0,Wt)+It[Wt]+wt.substr(Wt+1)})(et,it,x[mt],z[mt],D,j);St===null&&lt===null?B=mt+1:(lt===null||0<D(lt,St))&&(lt=St)}return G(lt!==null?function(){K.continue(lt+Q)}:X),!1}),f}function Dr(f,m,g,E){return{type:2,lower:f,upper:m,lowerOpen:g,upperOpen:E}}function yr(f){return{type:1,lower:f,upper:f}}var ji=(Object.defineProperty(Pe.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Pe.prototype.between=function(f,m,g,E){g=g!==!1,E=E===!0;try{return 0<this._cmp(f,m)||this._cmp(f,m)===0&&(g||E)&&(!g||!E)?ni(this):new this.Collection(this,function(){return Dr(f,m,!g,!E)})}catch{return hn(this,An)}},Pe.prototype.equals=function(f){return f==null?hn(this,An):new this.Collection(this,function(){return yr(f)})},Pe.prototype.above=function(f){return f==null?hn(this,An):new this.Collection(this,function(){return Dr(f,void 0,!0)})},Pe.prototype.aboveOrEqual=function(f){return f==null?hn(this,An):new this.Collection(this,function(){return Dr(f,void 0,!1)})},Pe.prototype.below=function(f){return f==null?hn(this,An):new this.Collection(this,function(){return Dr(void 0,f,!1,!0)})},Pe.prototype.belowOrEqual=function(f){return f==null?hn(this,An):new this.Collection(this,function(){return Dr(void 0,f)})},Pe.prototype.startsWith=function(f){return typeof f!="string"?hn(this,rn):this.between(f,f+vn,!0,!0)},Pe.prototype.startsWithIgnoreCase=function(f){return f===""?this.startsWith(f):or(this,function(m,g){return m.indexOf(g[0])===0},[f],vn)},Pe.prototype.equalsIgnoreCase=function(f){return or(this,function(m,g){return m===g[0]},[f],"")},Pe.prototype.anyOfIgnoreCase=function(){var f=fe.apply(ce,arguments);return f.length===0?ni(this):or(this,function(m,g){return g.indexOf(m)!==-1},f,"")},Pe.prototype.startsWithAnyOfIgnoreCase=function(){var f=fe.apply(ce,arguments);return f.length===0?ni(this):or(this,function(m,g){return g.some(function(E){return m.indexOf(E)===0})},f,vn)},Pe.prototype.anyOf=function(){var f=this,m=fe.apply(ce,arguments),g=this._cmp;try{m.sort(g)}catch{return hn(this,An)}if(m.length===0)return ni(this);var E=new this.Collection(this,function(){return Dr(m[0],m[m.length-1])});E._ondirectionchange=function(w){g=w==="next"?f._ascending:f._descending,m.sort(g)};var A=0;return E._addAlgorithm(function(w,D,x){for(var z=w.key;0<g(z,m[A]);)if(++A===m.length)return D(x),!1;return g(z,m[A])===0||(D(function(){w.continue(m[A])}),!1)}),E},Pe.prototype.notEqual=function(f){return this.inAnyRange([[-1/0,f],[f,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Pe.prototype.noneOf=function(){var f=fe.apply(ce,arguments);if(f.length===0)return new this.Collection(this);try{f.sort(this._ascending)}catch{return hn(this,An)}var m=f.reduce(function(g,E){return g?g.concat([[g[g.length-1][1],E]]):[[-1/0,E]]},null);return m.push([f[f.length-1],this.db._maxKey]),this.inAnyRange(m,{includeLowers:!1,includeUppers:!1})},Pe.prototype.inAnyRange=function(et,m){var g=this,E=this._cmp,A=this._ascending,w=this._descending,D=this._min,x=this._max;if(et.length===0)return ni(this);if(!et.every(function(it){return it[0]!==void 0&&it[1]!==void 0&&A(it[0],it[1])<=0}))return hn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Nt.InvalidArgument);var z=!m||m.includeLowers!==!1,j=m&&m.includeUppers===!0,Q,L=A;function $(it,lt){return L(it[0],lt[0])}try{(Q=et.reduce(function(it,lt){for(var mt=0,St=it.length;mt<St;++mt){var Ot=it[mt];if(E(lt[0],Ot[1])<0&&0<E(lt[1],Ot[0])){Ot[0]=D(Ot[0],lt[0]),Ot[1]=x(Ot[1],lt[1]);break}}return mt===St&&it.push(lt),it},[])).sort($)}catch{return hn(this,An)}var B=0,K=j?function(it){return 0<A(it,Q[B][1])}:function(it){return 0<=A(it,Q[B][1])},G=z?function(it){return 0<w(it,Q[B][0])}:function(it){return 0<=w(it,Q[B][0])},X=K,et=new this.Collection(this,function(){return Dr(Q[0][0],Q[Q.length-1][1],!z,!j)});return et._ondirectionchange=function(it){L=it==="next"?(X=K,A):(X=G,w),Q.sort($)},et._addAlgorithm(function(it,lt,mt){for(var St,Ot=it.key;X(Ot);)if(++B===Q.length)return lt(mt),!1;return!K(St=Ot)&&!G(St)||(g._cmp(Ot,Q[B][1])===0||g._cmp(Ot,Q[B][0])===0||lt(function(){L===A?it.continue(Q[B][0]):it.continue(Q[B][1])}),!1)}),et},Pe.prototype.startsWithAnyOf=function(){var f=fe.apply(ce,arguments);return f.every(function(m){return typeof m=="string"})?f.length===0?ni(this):this.inAnyRange(f.map(function(m){return[m,m+vn]})):hn(this,"startsWithAnyOf() only works with strings")},Pe);function Pe(){}function qn(f){return Me(function(m){return vi(m),f(m.target.error),!1})}function vi(f){f.stopPropagation&&f.stopPropagation(),f.preventDefault&&f.preventDefault()}var Nr="storagemutated",vr="x-storagemutated-1",_n=Zr(null,Nr),Ms=(he.prototype._lock=function(){return ue(!Dt.global),++this._reculock,this._reculock!==1||Dt.global||(Dt.lockOwnerFor=this),this},he.prototype._unlock=function(){if(ue(!Dt.global),--this._reculock==0)for(Dt.global||(Dt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var f=this._blockedFuncs.shift();try{Bn(f[1],f[0])}catch{}}return this},he.prototype._locked=function(){return this._reculock&&Dt.lockOwnerFor!==this},he.prototype.create=function(f){var m=this;if(!this.mode)return this;var g=this.db.idbdb,E=this.db._state.dbOpenError;if(ue(!this.idbtrans),!f&&!g)switch(E&&E.name){case"DatabaseClosedError":throw new Nt.DatabaseClosed(E);case"MissingAPIError":throw new Nt.MissingAPI(E.message,E);default:throw new Nt.OpenFailed(E)}if(!this.active)throw new Nt.TransactionInactive;return ue(this._completion._state===null),(f=this.idbtrans=f||(this.db.core||g).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Me(function(A){vi(A),m._reject(f.error)}),f.onabort=Me(function(A){vi(A),m.active&&m._reject(new Nt.Abort(f.error)),m.active=!1,m.on("abort").fire(A)}),f.oncomplete=Me(function(){m.active=!1,m._resolve(),"mutatedParts"in f&&_n.storagemutated.fire(f.mutatedParts)}),this},he.prototype._promise=function(f,m,g){var E=this;if(f==="readwrite"&&this.mode!=="readwrite")return Ce(new Nt.ReadOnly("Transaction is readonly"));if(!this.active)return Ce(new Nt.TransactionInactive);if(this._locked())return new Ct(function(w,D){E._blockedFuncs.push([function(){E._promise(f,m,g).then(w,D)},Dt])});if(g)return ke(function(){var w=new Ct(function(D,x){E._lock();var z=m(D,x,E);z&&z.then&&z.then(D,x)});return w.finally(function(){return E._unlock()}),w._lib=!0,w});var A=new Ct(function(w,D){var x=m(w,D,E);x&&x.then&&x.then(w,D)});return A._lib=!0,A},he.prototype._root=function(){return this.parent?this.parent._root():this},he.prototype.waitFor=function(f){var m,g=this._root(),E=Ct.resolve(f);g._waitingFor?g._waitingFor=g._waitingFor.then(function(){return E}):(g._waitingFor=E,g._waitingQueue=[],m=g.idbtrans.objectStore(g.storeNames[0]),(function w(){for(++g._spinCount;g._waitingQueue.length;)g._waitingQueue.shift()();g._waitingFor&&(m.get(-1/0).onsuccess=w)})());var A=g._waitingFor;return new Ct(function(w,D){E.then(function(x){return g._waitingQueue.push(Me(w.bind(null,x)))},function(x){return g._waitingQueue.push(Me(D.bind(null,x)))}).finally(function(){g._waitingFor===A&&(g._waitingFor=null)})})},he.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Nt.Abort))},he.prototype.table=function(f){var m=this._memoizedTables||(this._memoizedTables={});if(O(m,f))return m[f];var g=this.schema[f];if(!g)throw new Nt.NotFound("Table "+f+" not part of transaction");return g=new this.db.Table(f,g,this),g.core=this.db.core.table(f),m[f]=g},he);function he(){}function xr(f,m,g,E,A,w,D,x){return{name:f,keyPath:m,unique:g,multi:E,auto:A,compound:w,src:(g&&!D?"&":"")+(E?"*":"")+(A?"++":"")+ya(m),type:x}}function ya(f){return typeof f=="string"?f:f?"["+[].join.call(f,"+")+"]":""}function Bi(f,m,g){return{name:f,primKey:m,indexes:g,mappedClass:null,idxByName:(E=function(A){return[A.name,A]},g.reduce(function(A,w,D){return D=E(w,D),D&&(A[D[0]]=D[1]),A},{}))};var E}var qi=function(f){try{return f.only([[]]),qi=function(){return[[]]},[[]]}catch{return qi=function(){return vn},vn}};function Hi(f){return f==null?function(){}:typeof f=="string"?(m=f).split(".").length===1?function(g){return g[m]}:function(g){return Zt(g,m)}:function(g){return Zt(g,f)};var m}function _i(f){return[].slice.call(f)}var ri=0;function on(f){return f==null?":id":typeof f=="string"?f:"[".concat(f.join("+"),"]")}function Fi(f,m,z){function E(X){if(X.type===3)return null;if(X.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var B=X.lower,K=X.upper,G=X.lowerOpen,X=X.upperOpen;return B===void 0?K===void 0?null:m.upperBound(K,!!X):K===void 0?m.lowerBound(B,!!G):m.bound(B,K,!!G,!!X)}function A($){var B,K=$.name;return{name:K,schema:$,mutate:function(G){var X=G.trans,et=G.type,it=G.keys,lt=G.values,mt=G.range;return new Promise(function(St,Ot){St=Me(St);var bt=X.objectStore(K),wt=bt.keyPath==null,It=et==="put"||et==="add";if(!It&&et!=="delete"&&et!=="deleteRange")throw new Error("Invalid operation type: "+et);var Tt,Mt=(it||lt||{length:1}).length;if(it&&lt&&it.length!==lt.length)throw new Error("Given keys array must have same length as given values array.");if(Mt===0)return St({numFailures:0,failures:{},results:[],lastResult:void 0});function Ht(Rn){++Fn,vi(Rn)}var Wt=[],ae=[],Fn=0;if(et==="deleteRange"){if(mt.type===4)return St({numFailures:Fn,failures:ae,results:[],lastResult:void 0});mt.type===3?Wt.push(Tt=bt.clear()):Wt.push(Tt=bt.delete(E(mt)))}else{var wt=It?wt?[lt,it]:[lt,null]:[it,null],Jt=wt[0],Cn=wt[1];if(It)for(var Ze=0;Ze<Mt;++Ze)Wt.push(Tt=Cn&&Cn[Ze]!==void 0?bt[et](Jt[Ze],Cn[Ze]):bt[et](Jt[Ze])),Tt.onerror=Ht;else for(Ze=0;Ze<Mt;++Ze)Wt.push(Tt=bt[et](Jt[Ze])),Tt.onerror=Ht}function Io(Rn){Rn=Rn.target.result,Wt.forEach(function(Ur,uu){return Ur.error!=null&&(ae[uu]=Ur.error)}),St({numFailures:Fn,failures:ae,results:et==="delete"?it:Wt.map(function(Ur){return Ur.result}),lastResult:Rn})}Tt.onerror=function(Rn){Ht(Rn),Io(Rn)},Tt.onsuccess=Io})},getMany:function(G){var X=G.trans,et=G.keys;return new Promise(function(it,lt){it=Me(it);for(var mt,St=X.objectStore(K),Ot=et.length,bt=new Array(Ot),wt=0,It=0,Tt=function(Wt){Wt=Wt.target,bt[Wt._pos]=Wt.result,++It===wt&&it(bt)},Mt=qn(lt),Ht=0;Ht<Ot;++Ht)et[Ht]!=null&&((mt=St.get(et[Ht]))._pos=Ht,mt.onsuccess=Tt,mt.onerror=Mt,++wt);wt===0&&it(bt)})},get:function(G){var X=G.trans,et=G.key;return new Promise(function(it,lt){it=Me(it);var mt=X.objectStore(K).get(et);mt.onsuccess=function(St){return it(St.target.result)},mt.onerror=qn(lt)})},query:(B=j,function(G){return new Promise(function(X,et){X=Me(X);var it,lt,mt,wt=G.trans,St=G.values,Ot=G.limit,Tt=G.query,bt=Ot===1/0?void 0:Ot,It=Tt.index,Tt=Tt.range,wt=wt.objectStore(K),It=It.isPrimaryKey?wt:wt.index(It.name),Tt=E(Tt);if(Ot===0)return X({result:[]});B?((bt=St?It.getAll(Tt,bt):It.getAllKeys(Tt,bt)).onsuccess=function(Mt){return X({result:Mt.target.result})},bt.onerror=qn(et)):(it=0,lt=!St&&"openKeyCursor"in It?It.openKeyCursor(Tt):It.openCursor(Tt),mt=[],lt.onsuccess=function(Mt){var Ht=lt.result;return Ht?(mt.push(St?Ht.value:Ht.primaryKey),++it===Ot?X({result:mt}):void Ht.continue()):X({result:mt})},lt.onerror=qn(et))})}),openCursor:function(G){var X=G.trans,et=G.values,it=G.query,lt=G.reverse,mt=G.unique;return new Promise(function(St,Ot){St=Me(St);var It=it.index,bt=it.range,wt=X.objectStore(K),wt=It.isPrimaryKey?wt:wt.index(It.name),It=lt?mt?"prevunique":"prev":mt?"nextunique":"next",Tt=!et&&"openKeyCursor"in wt?wt.openKeyCursor(E(bt),It):wt.openCursor(E(bt),It);Tt.onerror=qn(Ot),Tt.onsuccess=Me(function(Mt){var Ht,Wt,ae,Fn,Jt=Tt.result;Jt?(Jt.___id=++ri,Jt.done=!1,Ht=Jt.continue.bind(Jt),Wt=(Wt=Jt.continuePrimaryKey)&&Wt.bind(Jt),ae=Jt.advance.bind(Jt),Fn=function(){throw new Error("Cursor not stopped")},Jt.trans=X,Jt.stop=Jt.continue=Jt.continuePrimaryKey=Jt.advance=function(){throw new Error("Cursor not started")},Jt.fail=Me(Ot),Jt.next=function(){var Cn=this,Ze=1;return this.start(function(){return Ze--?Cn.continue():Cn.stop()}).then(function(){return Cn})},Jt.start=function(Cn){function Ze(){if(Tt.result)try{Cn()}catch(Rn){Jt.fail(Rn)}else Jt.done=!0,Jt.start=function(){throw new Error("Cursor behind last entry")},Jt.stop()}var Io=new Promise(function(Rn,Ur){Rn=Me(Rn),Tt.onerror=qn(Ur),Jt.fail=Ur,Jt.stop=function(uu){Jt.stop=Jt.continue=Jt.continuePrimaryKey=Jt.advance=Fn,Rn(uu)}});return Tt.onsuccess=Me(function(Rn){Tt.onsuccess=Ze,Ze()}),Jt.continue=Ht,Jt.continuePrimaryKey=Wt,Jt.advance=ae,Ze(),Io},St(Jt)):St(null)},Ot)})},count:function(G){var X=G.query,et=G.trans,it=X.index,lt=X.range;return new Promise(function(mt,St){var Ot=et.objectStore(K),bt=it.isPrimaryKey?Ot:Ot.index(it.name),Ot=E(lt),bt=Ot?bt.count(Ot):bt.count();bt.onsuccess=Me(function(wt){return mt(wt.target.result)}),bt.onerror=qn(St)})}}}var w,D,x,Q=(D=z,x=_i((w=f).objectStoreNames),{schema:{name:w.name,tables:x.map(function($){return D.objectStore($)}).map(function($){var B=$.keyPath,X=$.autoIncrement,K=y(B),G={},X={name:$.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:B==null,compound:K,keyPath:B,autoIncrement:X,unique:!0,extractKey:Hi(B)},indexes:_i($.indexNames).map(function(et){return $.index(et)}).map(function(mt){var it=mt.name,lt=mt.unique,St=mt.multiEntry,mt=mt.keyPath,St={name:it,compound:y(mt),keyPath:mt,unique:lt,multiEntry:St,extractKey:Hi(mt)};return G[on(mt)]=St}),getIndexByKeyPath:function(et){return G[on(et)]}};return G[":id"]=X.primaryKey,B!=null&&(G[on(B)]=X.primaryKey),X})},hasGetAll:0<x.length&&"getAll"in D.objectStore(x[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),z=Q.schema,j=Q.hasGetAll,Q=z.tables.map(A),L={};return Q.forEach(function($){return L[$.name]=$}),{stack:"dbcore",transaction:f.transaction.bind(f),table:function($){if(!L[$])throw new Error("Table '".concat($,"' not found"));return L[$]},MIN_KEY:-1/0,MAX_KEY:qi(m),schema:z}}function Ei(f,m,g,E){var A=g.IDBKeyRange;return g.indexedDB,{dbcore:(E=Fi(m,A,E),f.dbcore.reduce(function(w,D){return D=D.create,s(s({},w),D(w))},E))}}function ii(f,E){var g=E.db,E=Ei(f._middlewares,g,f._deps,E);f.core=E.dbcore,f.tables.forEach(function(A){var w=A.name;f.core.schema.tables.some(function(D){return D.name===w})&&(A.core=f.core.table(w),f[w]instanceof f.Table&&(f[w].core=A.core))})}function as(f,m,g,E){g.forEach(function(A){var w=E[A];m.forEach(function(D){var x=(function z(j,Q){return vt(j,Q)||(j=b(j))&&z(j,Q)})(D,A);(!x||"value"in x&&x.value===void 0)&&(D===f.Transaction.prototype||D instanceof f.Transaction?dt(D,A,{get:function(){return this.table(A)},set:function(z){J(this,A,{value:z,writable:!0,configurable:!0,enumerable:!0})}}):D[A]=new f.Table(A,w))})})}function bi(f,m){m.forEach(function(g){for(var E in g)g[E]instanceof f.Table&&delete g[E]})}function va(f,m){return f._cfg.version-m._cfg.version}function Ti(f,m,g,E){var A=f._dbSchema;g.objectStoreNames.contains("$meta")&&!A.$meta&&(A.$meta=Bi("$meta",Ao("")[0],[]),f._storeNames.push("$meta"));var w=f._createTransaction("readwrite",f._storeNames,A);w.create(g),w._completion.catch(E);var D=w._reject.bind(w),x=Dt.transless||Dt;ke(function(){return Dt.trans=w,Dt.transless=x,m!==0?(ii(f,g),j=m,((z=w).storeNames.includes("$meta")?z.table("$meta").get("version").then(function(Q){return Q??j}):Ct.resolve(j)).then(function(Q){return $=Q,B=w,K=g,G=[],Q=(L=f)._versions,X=L._dbSchema=Si(0,L.idbdb,K),(Q=Q.filter(function(et){return et._cfg.version>=$})).length!==0?(Q.forEach(function(et){G.push(function(){var it=X,lt=et._cfg.dbschema;os(L,it,K),os(L,lt,K),X=L._dbSchema=lt;var mt=Vs(it,lt);mt.add.forEach(function(It){Ki(K,It[0],It[1].primKey,It[1].indexes)}),mt.change.forEach(function(It){if(It.recreate)throw new Nt.Upgrade("Not yet support for changing primary key");var Tt=K.objectStore(It.name);It.add.forEach(function(Mt){return ks(Tt,Mt)}),It.change.forEach(function(Mt){Tt.deleteIndex(Mt.name),ks(Tt,Mt)}),It.del.forEach(function(Mt){return Tt.deleteIndex(Mt)})});var St=et._cfg.contentUpgrade;if(St&&et._cfg.version>$){ii(L,K),B._memoizedTables={};var Ot=N(lt);mt.del.forEach(function(It){Ot[It]=it[It]}),bi(L,[L.Transaction.prototype]),as(L,[L.Transaction.prototype],d(Ot),Ot),B.schema=Ot;var bt,wt=F(St);return wt&&Ge(),mt=Ct.follow(function(){var It;(bt=St(B))&&wt&&(It=kn.bind(null,null),bt.then(It,It))}),bt&&typeof bt.then=="function"?Ct.resolve(bt):mt.then(function(){return bt})}}),G.push(function(it){var lt,mt,St=et._cfg.dbschema;lt=St,mt=it,[].slice.call(mt.db.objectStoreNames).forEach(function(Ot){return lt[Ot]==null&&mt.db.deleteObjectStore(Ot)}),bi(L,[L.Transaction.prototype]),as(L,[L.Transaction.prototype],L._storeNames,L._dbSchema),B.schema=L._dbSchema}),G.push(function(it){L.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(L.idbdb.version/10)===et._cfg.version?(L.idbdb.deleteObjectStore("$meta"),delete L._dbSchema.$meta,L._storeNames=L._storeNames.filter(function(lt){return lt!=="$meta"})):it.objectStore("$meta").put(et._cfg.version,"version"))})}),(function et(){return G.length?Ct.resolve(G.shift()(B.idbtrans)).then(et):Ct.resolve()})().then(function(){So(X,K)})):Ct.resolve();var L,$,B,K,G,X}).catch(D)):(d(A).forEach(function(Q){Ki(g,Q,A[Q].primKey,A[Q].indexes)}),ii(f,g),void Ct.follow(function(){return f.on.populate.fire(w)}).catch(D));var z,j})}function _a(f,m){So(f._dbSchema,m),m.db.version%10!=0||m.objectStoreNames.contains("$meta")||m.db.createObjectStore("$meta").add(Math.ceil(m.db.version/10-1),"version");var g=Si(0,f.idbdb,m);os(f,f._dbSchema,m);for(var E=0,A=Vs(g,f._dbSchema).change;E<A.length;E++){var w=(function(D){if(D.change.length||D.recreate)return console.warn("Unable to patch indexes of table ".concat(D.name," because it has changes on the type of index or primary key.")),{value:void 0};var x=m.objectStore(D.name);D.add.forEach(function(z){Vn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(D.name,".").concat(z.src)),ks(x,z)})})(A[E]);if(typeof w=="object")return w.value}}function Vs(f,m){var g,E={del:[],add:[],change:[]};for(g in f)m[g]||E.del.push(g);for(g in m){var A=f[g],w=m[g];if(A){var D={name:g,def:w,recreate:!1,del:[],add:[],change:[]};if(""+(A.primKey.keyPath||"")!=""+(w.primKey.keyPath||"")||A.primKey.auto!==w.primKey.auto)D.recreate=!0,E.change.push(D);else{var x=A.idxByName,z=w.idxByName,j=void 0;for(j in x)z[j]||D.del.push(j);for(j in z){var Q=x[j],L=z[j];Q?Q.src!==L.src&&D.change.push(L):D.add.push(L)}(0<D.del.length||0<D.add.length||0<D.change.length)&&E.change.push(D)}}else E.add.push([g,w])}return E}function Ki(f,m,g,E){var A=f.db.createObjectStore(m,g.keyPath?{keyPath:g.keyPath,autoIncrement:g.auto}:{autoIncrement:g.auto});return E.forEach(function(w){return ks(A,w)}),A}function So(f,m){d(f).forEach(function(g){m.db.objectStoreNames.contains(g)||(Vn&&console.debug("Dexie: Creating missing table",g),Ki(m,g,f[g].primKey,f[g].indexes))})}function ks(f,m){f.createIndex(m.name,m.keyPath,{unique:m.unique,multiEntry:m.multi})}function Si(f,m,g){var E={};return Kt(m.objectStoreNames,0).forEach(function(A){for(var w=g.objectStore(A),D=xr(ya(j=w.keyPath),j||"",!0,!1,!!w.autoIncrement,j&&typeof j!="string",!0),x=[],z=0;z<w.indexNames.length;++z){var Q=w.index(w.indexNames[z]),j=Q.keyPath,Q=xr(Q.name,j,!!Q.unique,!!Q.multiEntry,!1,j&&typeof j!="string",!1);x.push(Q)}E[A]=Bi(A,D,x)}),E}function os(f,m,g){for(var E=g.db.objectStoreNames,A=0;A<E.length;++A){var w=E[A],D=g.objectStore(w);f._hasGetAll="getAll"in D;for(var x=0;x<D.indexNames.length;++x){var z=D.indexNames[x],j=D.index(z).keyPath,Q=typeof j=="string"?j:"["+Kt(j).join("+")+"]";!m[w]||(j=m[w].idxByName[Q])&&(j.name=z,delete m[w].idxByName[Q],m[w].idxByName[z]=j)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(f._hasGetAll=!1)}function Ao(f){return f.split(",").map(function(m,g){var w=m.split(":"),E=(A=w[1])===null||A===void 0?void 0:A.trim(),A=(m=w[0].trim()).replace(/([&*]|\+\+)/g,""),w=/^\[/.test(A)?A.match(/^\[(.*)\]$/)[1].split("+"):A;return xr(A,w||null,/\&/.test(m),/\*/.test(m),/\+\+/.test(m),y(w),g===0,E)})}var Ea=(Gi.prototype._createTableSchema=Bi,Gi.prototype._parseIndexSyntax=Ao,Gi.prototype._parseStoresSpec=function(f,m){var g=this;d(f).forEach(function(E){if(f[E]!==null){var A=g._parseIndexSyntax(f[E]),w=A.shift();if(!w)throw new Nt.Schema("Invalid schema for table "+E+": "+f[E]);if(w.unique=!0,w.multi)throw new Nt.Schema("Primary key cannot be multiEntry*");A.forEach(function(D){if(D.auto)throw new Nt.Schema("Only primary key can be marked as autoIncrement (++)");if(!D.keyPath)throw new Nt.Schema("Index must have a name and cannot be an empty string")}),A=g._createTableSchema(E,w,A),m[E]=A}})},Gi.prototype.stores=function(g){var m=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,g):g;var g=m._versions,E={},A={};return g.forEach(function(w){_(E,w._cfg.storesSource),A=w._cfg.dbschema={},w._parseStoresSpec(E,A)}),m._dbSchema=A,bi(m,[m._allTables,m,m.Transaction.prototype]),as(m,[m._allTables,m,m.Transaction.prototype,this._cfg.tables],d(A),A),m._storeNames=d(A),this},Gi.prototype.upgrade=function(f){return this._cfg.contentUpgrade=en(this._cfg.contentUpgrade||Se,f),this},Gi);function Gi(){}function ba(f,m){var g=f._dbNamesDB;return g||(g=f._dbNamesDB=new wi(rs,{addons:[],indexedDB:f,IDBKeyRange:m})).version(1).stores({dbnames:"name"}),g.table("dbnames")}function Mr(f){return f&&typeof f.databases=="function"}function Ta(f){return ke(function(){return Dt.letThrough=!0,f()})}function Sa(f){return!("from"in f)}var En=function(f,m){if(!this){var g=new En;return f&&"d"in f&&_(g,f),g}_(this,arguments.length?{d:1,from:f,to:1<arguments.length?m:f}:{d:0})};function ls(f,m,g){var E=se(m,g);if(!isNaN(E)){if(0<E)throw RangeError();if(Sa(f))return _(f,{from:m,to:g,d:1});var A=f.l,E=f.r;if(se(g,f.from)<0)return A?ls(A,m,g):f.l={from:m,to:g,d:1,l:null,r:null},wo(f);if(0<se(m,f.to))return E?ls(E,m,g):f.r={from:m,to:g,d:1,l:null,r:null},wo(f);se(m,f.from)<0&&(f.from=m,f.l=null,f.d=E?E.d+1:1),0<se(g,f.to)&&(f.to=g,f.r=null,f.d=f.l?f.l.d+1:1),g=!f.r,A&&!f.l&&Vr(f,A),E&&g&&Vr(f,E)}}function Vr(f,m){Sa(m)||(function g(E,z){var w=z.from,D=z.to,x=z.l,z=z.r;ls(E,w,D),x&&g(E,x),z&&g(E,z)})(f,m)}function Hn(f,m){var g=Ps(m),E=g.next();if(E.done)return!1;for(var A=E.value,w=Ps(f),D=w.next(A.from),x=D.value;!E.done&&!D.done;){if(se(x.from,A.to)<=0&&0<=se(x.to,A.from))return!0;se(A.from,x.from)<0?A=(E=g.next(x.from)).value:x=(D=w.next(A.from)).value}return!1}function Ps(f){var m=Sa(f)?null:{s:0,n:f};return{next:function(g){for(var E=0<arguments.length;m;)switch(m.s){case 0:if(m.s=1,E)for(;m.n.l&&se(g,m.n.from)<0;)m={up:m,n:m.n.l,s:1};else for(;m.n.l;)m={up:m,n:m.n.l,s:1};case 1:if(m.s=2,!E||se(g,m.n.to)<=0)return{value:m.n,done:!1};case 2:if(m.n.r){m.s=3,m={up:m,n:m.n.r,s:0};continue}case 3:m=m.up}return{done:!0}}}}function wo(f){var m,g,E=(((m=f.r)===null||m===void 0?void 0:m.d)||0)-(((g=f.l)===null||g===void 0?void 0:g.d)||0),A=1<E?"r":E<-1?"l":"";A&&(m=A=="r"?"l":"r",g=s({},f),E=f[A],f.from=E.from,f.to=E.to,f[A]=E[A],g[A]=E[m],(f[m]=g).d=Ai(g)),f.d=Ai(f)}function Ai(g){var m=g.r,g=g.l;return(m?g?Math.max(m.d,g.d):m.d:g?g.d:0)+1}function c(f,m){return d(m).forEach(function(g){f[g]?Vr(f[g],m[g]):f[g]=(function E(A){var w,D,x={};for(w in A)O(A,w)&&(D=A[w],x[w]=!D||typeof D!="object"||q.has(D.constructor)?D:E(D));return x})(m[g])}),f}function v(f,m){return f.all||m.all||Object.keys(f).some(function(g){return m[g]&&Hn(m[g],f[g])})}k(En.prototype,((Er={add:function(f){return Vr(this,f),this},addKey:function(f){return ls(this,f,f),this},addKeys:function(f){var m=this;return f.forEach(function(g){return ls(m,g,g)}),this},hasKey:function(f){var m=Ps(this).next(f).value;return m&&se(m.from,f)<=0&&0<=se(m.to,f)}})[ut]=function(){return Ps(this)},Er));var S={},I={},tt=!1;function at(f){c(I,f),tt||(tt=!0,setTimeout(function(){tt=!1,At(I,!(I={}))},0))}function At(f,m){m===void 0&&(m=!1);var g=new Set;if(f.all)for(var E=0,A=Object.values(S);E<A.length;E++)ee(D=A[E],f,g,m);else for(var w in f){var D,x=/^idb\:\/\/(.*)\/(.*)\//.exec(w);x&&(w=x[1],x=x[2],(D=S["idb://".concat(w,"/").concat(x)])&&ee(D,f,g,m))}g.forEach(function(z){return z()})}function ee(f,m,g,E){for(var A=[],w=0,D=Object.entries(f.queries.query);w<D.length;w++){for(var x=D[w],z=x[0],j=[],Q=0,L=x[1];Q<L.length;Q++){var $=L[Q];v(m,$.obsSet)?$.subscribers.forEach(function(X){return g.add(X)}):E&&j.push($)}E&&A.push([z,j])}if(E)for(var B=0,K=A;B<K.length;B++){var G=K[B],z=G[0],j=G[1];f.queries.query[z]=j}}function ln(f){var m=f._state,g=f._deps.indexedDB;if(m.isBeingOpened||f.idbdb)return m.dbReadyPromise.then(function(){return m.dbOpenError?Ce(m.dbOpenError):f});m.isBeingOpened=!0,m.dbOpenError=null,m.openComplete=!1;var E=m.openCanceller,A=Math.round(10*f.verno),w=!1;function D(){if(m.openCanceller!==E)throw new Nt.DatabaseClosed("db.open() was cancelled")}function x(){return new Ct(function($,B){if(D(),!g)throw new Nt.MissingAPI;var K=f.name,G=m.autoSchema||!A?g.open(K):g.open(K,A);if(!G)throw new Nt.MissingAPI;G.onerror=qn(B),G.onblocked=Me(f._fireOnBlocked),G.onupgradeneeded=Me(function(X){var et;Q=G.transaction,m.autoSchema&&!f._options.allowEmptyDB?(G.onerror=vi,Q.abort(),G.result.close(),(et=g.deleteDatabase(K)).onsuccess=et.onerror=Me(function(){B(new Nt.NoSuchDatabase("Database ".concat(K," doesnt exist")))})):(Q.onerror=qn(B),X=X.oldVersion>Math.pow(2,62)?0:X.oldVersion,L=X<1,f.idbdb=G.result,w&&_a(f,Q),Ti(f,X/10,Q,B))},B),G.onsuccess=Me(function(){Q=null;var X,et,it,lt,mt,St=f.idbdb=G.result,Ot=Kt(St.objectStoreNames);if(0<Ot.length)try{var bt=St.transaction((lt=Ot).length===1?lt[0]:lt,"readonly");if(m.autoSchema)et=St,it=bt,(X=f).verno=et.version/10,it=X._dbSchema=Si(0,et,it),X._storeNames=Kt(et.objectStoreNames,0),as(X,[X._allTables],d(it),it);else if(os(f,f._dbSchema,bt),((mt=Vs(Si(0,(mt=f).idbdb,bt),mt._dbSchema)).add.length||mt.change.some(function(wt){return wt.add.length||wt.change.length}))&&!w)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),St.close(),A=St.version+1,w=!0,$(x());ii(f,bt)}catch{}yi.push(f),St.onversionchange=Me(function(wt){m.vcFired=!0,f.on("versionchange").fire(wt)}),St.onclose=Me(function(){f.close({disableAutoOpen:!1})}),L&&(mt=f._deps,bt=K,St=mt.indexedDB,mt=mt.IDBKeyRange,Mr(St)||bt===rs||ba(St,mt).put({name:bt}).catch(Se)),$()},B)}).catch(function($){switch($?.name){case"UnknownError":if(0<m.PR1398_maxLoop)return m.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),x();break;case"VersionError":if(0<A)return A=0,x()}return Ct.reject($)})}var z,j=m.dbReadyResolve,Q=null,L=!1;return Ct.race([E,(typeof navigator>"u"?Ct.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function($){function B(){return indexedDB.databases().finally($)}z=setInterval(B,100),B()}).finally(function(){return clearInterval(z)}):Promise.resolve()).then(x)]).then(function(){return D(),m.onReadyBeingFired=[],Ct.resolve(Ta(function(){return f.on.ready.fire(f.vip)})).then(function $(){if(0<m.onReadyBeingFired.length){var B=m.onReadyBeingFired.reduce(en,Se);return m.onReadyBeingFired=[],Ct.resolve(Ta(function(){return B(f.vip)})).then($)}})}).finally(function(){m.openCanceller===E&&(m.onReadyBeingFired=null,m.isBeingOpened=!1)}).catch(function($){m.dbOpenError=$;try{Q&&Q.abort()}catch{}return E===m.openCanceller&&f._close(),Ce($)}).finally(function(){m.openComplete=!0,j()}).then(function(){var $;return L&&($={},f.tables.forEach(function(B){B.schema.indexes.forEach(function(K){K.name&&($["idb://".concat(f.name,"/").concat(B.name,"/").concat(K.name)]=new En(-1/0,[[[]]]))}),$["idb://".concat(f.name,"/").concat(B.name,"/")]=$["idb://".concat(f.name,"/").concat(B.name,"/:dels")]=new En(-1/0,[[[]]])}),_n(Nr).fire($),At($,!0)),f})}function Ae(f){function m(w){return f.next(w)}var g=A(m),E=A(function(w){return f.throw(w)});function A(w){return function(z){var x=w(z),z=x.value;return x.done?z:z&&typeof z.then=="function"?z.then(g,E):y(z)?Promise.all(z).then(g,E):g(z)}}return A(m)()}function Ue(f,m,g){for(var E=y(f)?f.slice():[f],A=0;A<g;++A)E.push(m);return E}var kr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(f){return s(s({},f),{table:function(m){var g=f.table(m),E=g.schema,A={},w=[];function D(L,$,B){var K=on(L),G=A[K]=A[K]||[],X=L==null?0:typeof L=="string"?1:L.length,et=0<$,et=s(s({},B),{name:et?"".concat(K,"(virtual-from:").concat(B.name,")"):B.name,lowLevelIndex:B,isVirtual:et,keyTail:$,keyLength:X,extractKey:Hi(L),unique:!et&&B.unique});return G.push(et),et.isPrimaryKey||w.push(et),1<X&&D(X===2?L[0]:L.slice(0,X-1),$+1,B),G.sort(function(it,lt){return it.keyTail-lt.keyTail}),et}m=D(E.primaryKey.keyPath,0,E.primaryKey),A[":id"]=[m];for(var x=0,z=E.indexes;x<z.length;x++){var j=z[x];D(j.keyPath,0,j)}function Q(L){var $,B=L.query.index;return B.isVirtual?s(s({},L),{query:{index:B.lowLevelIndex,range:($=L.query.range,B=B.keyTail,{type:$.type===1?2:$.type,lower:Ue($.lower,$.lowerOpen?f.MAX_KEY:f.MIN_KEY,B),lowerOpen:!0,upper:Ue($.upper,$.upperOpen?f.MIN_KEY:f.MAX_KEY,B),upperOpen:!0})}}):L}return s(s({},g),{schema:s(s({},E),{primaryKey:m,indexes:w,getIndexByKeyPath:function(L){return(L=A[on(L)])&&L[0]}}),count:function(L){return g.count(Q(L))},query:function(L){return g.query(Q(L))},openCursor:function(L){var $=L.query.index,B=$.keyTail,K=$.isVirtual,G=$.keyLength;return K?g.openCursor(Q(L)).then(function(et){return et&&X(et)}):g.openCursor(L);function X(et){return Object.create(et,{continue:{value:function(it){it!=null?et.continue(Ue(it,L.reverse?f.MAX_KEY:f.MIN_KEY,B)):L.unique?et.continue(et.key.slice(0,G).concat(L.reverse?f.MIN_KEY:f.MAX_KEY,B)):et.continue()}},continuePrimaryKey:{value:function(it,lt){et.continuePrimaryKey(Ue(it,f.MAX_KEY,B),lt)}},primaryKey:{get:function(){return et.primaryKey}},key:{get:function(){var it=et.key;return G===1?it[0]:it.slice(0,G)}},value:{get:function(){return et.value}}})}}})}})}};function Pr(f,m,g,E){return g=g||{},E=E||"",d(f).forEach(function(A){var w,D,x;O(m,A)?(w=f[A],D=m[A],typeof w=="object"&&typeof D=="object"&&w&&D?(x=tn(w))!==tn(D)?g[E+A]=m[A]:x==="Object"?Pr(w,D,g,E+A+"."):w!==D&&(g[E+A]=m[A]):w!==D&&(g[E+A]=m[A])):g[E+A]=void 0}),d(m).forEach(function(A){O(f,A)||(g[E+A]=m[A])}),g}function _r(f,m){return m.type==="delete"?m.keys:m.keys||m.values.map(f.extractKey)}var si={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(f){return s(s({},f),{table:function(m){var g=f.table(m),E=g.schema.primaryKey;return s(s({},g),{mutate:function(A){var w=Dt.trans,D=w.table(m).hook,x=D.deleting,z=D.creating,j=D.updating;switch(A.type){case"add":if(z.fire===Se)break;return w._promise("readwrite",function(){return Q(A)},!0);case"put":if(z.fire===Se&&j.fire===Se)break;return w._promise("readwrite",function(){return Q(A)},!0);case"delete":if(x.fire===Se)break;return w._promise("readwrite",function(){return Q(A)},!0);case"deleteRange":if(x.fire===Se)break;return w._promise("readwrite",function(){return(function L($,B,K){return g.query({trans:$,values:!1,query:{index:E,range:B},limit:K}).then(function(G){var X=G.result;return Q({type:"delete",keys:X,trans:$}).then(function(et){return 0<et.numFailures?Promise.reject(et.failures[0]):X.length<K?{failures:[],numFailures:0,lastResult:void 0}:L($,s(s({},B),{lower:X[X.length-1],lowerOpen:!0}),K)})})})(A.trans,A.range,1e4)},!0)}return g.mutate(A);function Q(L){var $,B,K,G=Dt.trans,X=L.keys||_r(E,L);if(!X)throw new Error("Keys missing");return(L=L.type==="add"||L.type==="put"?s(s({},L),{keys:X}):s({},L)).type!=="delete"&&(L.values=o([],L.values)),L.keys&&(L.keys=o([],L.keys)),$=g,K=X,((B=L).type==="add"?Promise.resolve([]):$.getMany({trans:B.trans,keys:K,cache:"immutable"})).then(function(et){var it=X.map(function(lt,mt){var St,Ot,bt,wt=et[mt],It={onerror:null,onsuccess:null};return L.type==="delete"?x.fire.call(It,lt,wt,G):L.type==="add"||wt===void 0?(St=z.fire.call(It,lt,L.values[mt],G),lt==null&&St!=null&&(L.keys[mt]=lt=St,E.outbound||M(L.values[mt],E.keyPath,lt))):(St=Pr(wt,L.values[mt]),(Ot=j.fire.call(It,St,lt,wt,G))&&(bt=L.values[mt],Object.keys(Ot).forEach(function(Tt){O(bt,Tt)?bt[Tt]=Ot[Tt]:M(bt,Tt,Ot[Tt])}))),It});return g.mutate(L).then(function(lt){for(var mt=lt.failures,St=lt.results,Ot=lt.numFailures,lt=lt.lastResult,bt=0;bt<X.length;++bt){var wt=(St||X)[bt],It=it[bt];wt==null?It.onerror&&It.onerror(mt[bt]):It.onsuccess&&It.onsuccess(L.type==="put"&&et[bt]?L.values[bt]:wt)}return{failures:mt,results:St,numFailures:Ot,lastResult:lt}}).catch(function(lt){return it.forEach(function(mt){return mt.onerror&&mt.onerror(lt)}),Promise.reject(lt)})})}}})}})}};function us(f,m,g){try{if(!m||m.keys.length<f.length)return null;for(var E=[],A=0,w=0;A<m.keys.length&&w<f.length;++A)se(m.keys[A],f[w])===0&&(E.push(g?V(m.values[A]):m.values[A]),++w);return E.length===f.length?E:null}catch{return null}}var Aa={stack:"dbcore",level:-1,create:function(f){return{table:function(m){var g=f.table(m);return s(s({},g),{getMany:function(E){if(!E.cache)return g.getMany(E);var A=us(E.keys,E.trans._cache,E.cache==="clone");return A?Ct.resolve(A):g.getMany(E).then(function(w){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?V(w):w},w})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),g.mutate(E)}})}}}};function Us(f,m){return f.trans.mode==="readonly"&&!!f.subscr&&!f.trans.explicit&&f.trans.db._options.cache!=="disabled"&&!m.schema.primaryKey.outbound}function Cc(f,m){switch(f){case"query":return m.values&&!m.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ph={stack:"dbcore",level:0,name:"Observability",create:function(f){var m=f.schema.name,g=new En(f.MIN_KEY,f.MAX_KEY);return s(s({},f),{transaction:function(E,A,w){if(Dt.subscr&&A!=="readonly")throw new Nt.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Dt.querier));return f.transaction(E,A,w)},table:function(E){var A=f.table(E),w=A.schema,D=w.primaryKey,L=w.indexes,x=D.extractKey,z=D.outbound,j=D.autoIncrement&&L.filter(function(B){return B.compound&&B.keyPath.includes(D.keyPath)}),Q=s(s({},A),{mutate:function(B){function K(Tt){return Tt="idb://".concat(m,"/").concat(E,"/").concat(Tt),lt[Tt]||(lt[Tt]=new En)}var G,X,et,it=B.trans,lt=B.mutatedParts||(B.mutatedParts={}),mt=K(""),St=K(":dels"),Ot=B.type,It=B.type==="deleteRange"?[B.range]:B.type==="delete"?[B.keys]:B.values.length<50?[_r(D,B).filter(function(Tt){return Tt}),B.values]:[],bt=It[0],wt=It[1],It=B.trans._cache;return y(bt)?(mt.addKeys(bt),(It=Ot==="delete"||bt.length===wt.length?us(bt,It):null)||St.addKeys(bt),(It||wt)&&(G=K,X=It,et=wt,w.indexes.forEach(function(Tt){var Mt=G(Tt.name||"");function Ht(ae){return ae!=null?Tt.extractKey(ae):null}function Wt(ae){return Tt.multiEntry&&y(ae)?ae.forEach(function(Fn){return Mt.addKey(Fn)}):Mt.addKey(ae)}(X||et).forEach(function(ae,Cn){var Jt=X&&Ht(X[Cn]),Cn=et&&Ht(et[Cn]);se(Jt,Cn)!==0&&(Jt!=null&&Wt(Jt),Cn!=null&&Wt(Cn))})}))):bt?(wt={from:(wt=bt.lower)!==null&&wt!==void 0?wt:f.MIN_KEY,to:(wt=bt.upper)!==null&&wt!==void 0?wt:f.MAX_KEY},St.add(wt),mt.add(wt)):(mt.add(g),St.add(g),w.indexes.forEach(function(Tt){return K(Tt.name).add(g)})),A.mutate(B).then(function(Tt){return!bt||B.type!=="add"&&B.type!=="put"||(mt.addKeys(Tt.results),j&&j.forEach(function(Mt){for(var Ht=B.values.map(function(Jt){return Mt.extractKey(Jt)}),Wt=Mt.keyPath.findIndex(function(Jt){return Jt===D.keyPath}),ae=0,Fn=Tt.results.length;ae<Fn;++ae)Ht[ae][Wt]=Tt.results[ae];K(Mt.name).addKeys(Ht)})),it.mutatedParts=c(it.mutatedParts||{},lt),Tt})}}),L=function(K){var G=K.query,K=G.index,G=G.range;return[K,new En((K=G.lower)!==null&&K!==void 0?K:f.MIN_KEY,(G=G.upper)!==null&&G!==void 0?G:f.MAX_KEY)]},$={get:function(B){return[D,new En(B.key)]},getMany:function(B){return[D,new En().addKeys(B.keys)]},count:L,query:L,openCursor:L};return d($).forEach(function(B){Q[B]=function(K){var G=Dt.subscr,X=!!G,et=Us(Dt,A)&&Cc(B,K)?K.obsSet={}:G;if(X){var it=function(wt){return wt="idb://".concat(m,"/").concat(E,"/").concat(wt),et[wt]||(et[wt]=new En)},lt=it(""),mt=it(":dels"),G=$[B](K),X=G[0],G=G[1];if((B==="query"&&X.isPrimaryKey&&!K.values?mt:it(X.name||"")).add(G),!X.isPrimaryKey){if(B!=="count"){var St=B==="query"&&z&&K.values&&A.query(s(s({},K),{values:!1}));return A[B].apply(this,arguments).then(function(wt){if(B==="query"){if(z&&K.values)return St.then(function(Ht){return Ht=Ht.result,lt.addKeys(Ht),wt});var It=K.values?wt.result.map(x):wt.result;(K.values?lt:mt).addKeys(It)}else if(B==="openCursor"){var Tt=wt,Mt=K.values;return Tt&&Object.create(Tt,{key:{get:function(){return mt.addKey(Tt.primaryKey),Tt.key}},primaryKey:{get:function(){var Ht=Tt.primaryKey;return mt.addKey(Ht),Ht}},value:{get:function(){return Mt&&lt.addKey(Tt.primaryKey),Tt.value}}})}return wt})}mt.add(g)}}return A[B].apply(this,arguments)}}),Q}})}};function Rc(f,m,g){if(g.numFailures===0)return m;if(m.type==="deleteRange")return null;var E=m.keys?m.keys.length:"values"in m&&m.values?m.values.length:1;return g.numFailures===E?null:(m=s({},m),y(m.keys)&&(m.keys=m.keys.filter(function(A,w){return!(w in g.failures)})),"values"in m&&y(m.values)&&(m.values=m.values.filter(function(A,w){return!(w in g.failures)})),m)}function ol(f,m){return g=f,((E=m).lower===void 0||(E.lowerOpen?0<se(g,E.lower):0<=se(g,E.lower)))&&(f=f,(m=m).upper===void 0||(m.upperOpen?se(f,m.upper)<0:se(f,m.upper)<=0));var g,E}function ou(f,m,$,E,A,w){if(!$||$.length===0)return f;var D=m.query.index,x=D.multiEntry,z=m.query.range,j=E.schema.primaryKey.extractKey,Q=D.extractKey,L=(D.lowLevelIndex||D).extractKey,$=$.reduce(function(B,K){var G=B,X=[];if(K.type==="add"||K.type==="put")for(var et=new En,it=K.values.length-1;0<=it;--it){var lt,mt=K.values[it],St=j(mt);et.hasKey(St)||(lt=Q(mt),(x&&y(lt)?lt.some(function(Tt){return ol(Tt,z)}):ol(lt,z))&&(et.addKey(St),X.push(mt)))}switch(K.type){case"add":var Ot=new En().addKeys(m.values?B.map(function(Mt){return j(Mt)}):B),G=B.concat(m.values?X.filter(function(Mt){return Mt=j(Mt),!Ot.hasKey(Mt)&&(Ot.addKey(Mt),!0)}):X.map(function(Mt){return j(Mt)}).filter(function(Mt){return!Ot.hasKey(Mt)&&(Ot.addKey(Mt),!0)}));break;case"put":var bt=new En().addKeys(K.values.map(function(Mt){return j(Mt)}));G=B.filter(function(Mt){return!bt.hasKey(m.values?j(Mt):Mt)}).concat(m.values?X:X.map(function(Mt){return j(Mt)}));break;case"delete":var wt=new En().addKeys(K.keys);G=B.filter(function(Mt){return!wt.hasKey(m.values?j(Mt):Mt)});break;case"deleteRange":var It=K.range;G=B.filter(function(Mt){return!ol(j(Mt),It)})}return G},f);return $===f?f:($.sort(function(B,K){return se(L(B),L(K))||se(j(B),j(K))}),m.limit&&m.limit<1/0&&($.length>m.limit?$.length=m.limit:f.length===m.limit&&$.length<m.limit&&(A.dirty=!0)),w?Object.freeze($):$)}function wa(f,m){return se(f.lower,m.lower)===0&&se(f.upper,m.upper)===0&&!!f.lowerOpen==!!m.lowerOpen&&!!f.upperOpen==!!m.upperOpen}function Co(f,m){return(function(g,E,A,w){if(g===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=se(g,E))===0){if(A&&w)return 0;if(A)return 1;if(w)return-1}return E})(f.lower,m.lower,f.lowerOpen,m.lowerOpen)<=0&&0<=(function(g,E,A,w){if(g===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=se(g,E))===0){if(A&&w)return 0;if(A)return-1;if(w)return 1}return E})(f.upper,m.upper,f.upperOpen,m.upperOpen)}function Uh(f,m,g,E){f.subscribers.add(g),E.addEventListener("abort",function(){var A,w;f.subscribers.delete(g),f.subscribers.size===0&&(A=f,w=m,setTimeout(function(){A.subscribers.size===0&&Lt(w,A)},3e3))})}var ll={stack:"dbcore",level:0,name:"Cache",create:function(f){var m=f.schema.name;return s(s({},f),{transaction:function(g,E,A){var w,D,x=f.transaction(g,E,A);return E==="readwrite"&&(D=(w=new AbortController).signal,A=function(z){return function(){if(w.abort(),E==="readwrite"){for(var j=new Set,Q=0,L=g;Q<L.length;Q++){var $=L[Q],B=S["idb://".concat(m,"/").concat($)];if(B){var K=f.table($),G=B.optimisticOps.filter(function(Mt){return Mt.trans===x});if(x._explicit&&z&&x.mutatedParts)for(var X=0,et=Object.values(B.queries.query);X<et.length;X++)for(var it=0,lt=(Ot=et[X]).slice();it<lt.length;it++)v((bt=lt[it]).obsSet,x.mutatedParts)&&(Lt(Ot,bt),bt.subscribers.forEach(function(Mt){return j.add(Mt)}));else if(0<G.length){B.optimisticOps=B.optimisticOps.filter(function(Mt){return Mt.trans!==x});for(var mt=0,St=Object.values(B.queries.query);mt<St.length;mt++)for(var Ot,bt,wt,It=0,Tt=(Ot=St[mt]).slice();It<Tt.length;It++)(bt=Tt[It]).res!=null&&x.mutatedParts&&(z&&!bt.dirty?(wt=Object.isFrozen(bt.res),wt=ou(bt.res,bt.req,G,K,bt,wt),bt.dirty?(Lt(Ot,bt),bt.subscribers.forEach(function(Mt){return j.add(Mt)})):wt!==bt.res&&(bt.res=wt,bt.promise=Ct.resolve({result:wt}))):(bt.dirty&&Lt(Ot,bt),bt.subscribers.forEach(function(Mt){return j.add(Mt)})))}}}j.forEach(function(Mt){return Mt()})}}},x.addEventListener("abort",A(!1),{signal:D}),x.addEventListener("error",A(!1),{signal:D}),x.addEventListener("complete",A(!0),{signal:D})),x},table:function(g){var E=f.table(g),A=E.schema.primaryKey;return s(s({},E),{mutate:function(w){var D=Dt.trans;if(A.outbound||D.db._options.cache==="disabled"||D.explicit||D.idbtrans.mode!=="readwrite")return E.mutate(w);var x=S["idb://".concat(m,"/").concat(g)];return x?(D=E.mutate(w),w.type!=="add"&&w.type!=="put"||!(50<=w.values.length||_r(A,w).some(function(z){return z==null}))?(x.optimisticOps.push(w),w.mutatedParts&&at(w.mutatedParts),D.then(function(z){0<z.numFailures&&(Lt(x.optimisticOps,w),(z=Rc(0,w,z))&&x.optimisticOps.push(z),w.mutatedParts&&at(w.mutatedParts))}),D.catch(function(){Lt(x.optimisticOps,w),w.mutatedParts&&at(w.mutatedParts)})):D.then(function(z){var j=Rc(0,s(s({},w),{values:w.values.map(function(Q,L){var $;return z.failures[L]?Q:(Q=($=A.keyPath)!==null&&$!==void 0&&$.includes(".")?V(Q):s({},Q),M(Q,A.keyPath,z.results[L]),Q)})}),z);x.optimisticOps.push(j),queueMicrotask(function(){return w.mutatedParts&&at(w.mutatedParts)})}),D):E.mutate(w)},query:function(w){if(!Us(Dt,E)||!Cc("query",w))return E.query(w);var D=((j=Dt.trans)===null||j===void 0?void 0:j.db._options.cache)==="immutable",L=Dt,x=L.requery,z=L.signal,j=(function(K,G,X,et){var it=S["idb://".concat(K,"/").concat(G)];if(!it)return[];if(!(G=it.queries[X]))return[null,!1,it,null];var lt=G[(et.query?et.query.index.name:null)||""];if(!lt)return[null,!1,it,null];switch(X){case"query":var mt=lt.find(function(St){return St.req.limit===et.limit&&St.req.values===et.values&&wa(St.req.query.range,et.query.range)});return mt?[mt,!0,it,lt]:[lt.find(function(St){return("limit"in St.req?St.req.limit:1/0)>=et.limit&&(!et.values||St.req.values)&&Co(St.req.query.range,et.query.range)}),!1,it,lt];case"count":return mt=lt.find(function(St){return wa(St.req.query.range,et.query.range)}),[mt,!!mt,it,lt]}})(m,g,"query",w),Q=j[0],L=j[1],$=j[2],B=j[3];return Q&&L?Q.obsSet=w.obsSet:(L=E.query(w).then(function(K){var G=K.result;if(Q&&(Q.res=G),D){for(var X=0,et=G.length;X<et;++X)Object.freeze(G[X]);Object.freeze(G)}else K.result=V(G);return K}).catch(function(K){return B&&Q&&Lt(B,Q),Promise.reject(K)}),Q={obsSet:w.obsSet,promise:L,subscribers:new Set,type:"query",req:w,dirty:!1},B?B.push(Q):(B=[Q],($=$||(S["idb://".concat(m,"/").concat(g)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[w.query.index.name||""]=B)),Uh(Q,B,x,z),Q.promise.then(function(K){return{result:ou(K.result,w,$?.optimisticOps,E,Q,D)}})}})}})}};function Ro(f,m){return new Proxy(f,{get:function(g,E,A){return E==="db"?m:Reflect.get(g,E,A)}})}var wi=(Ye.prototype.version=function(f){if(isNaN(f)||f<.1)throw new Nt.Type("Given version is not a positive number");if(f=Math.round(10*f)/10,this.idbdb||this._state.isBeingOpened)throw new Nt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,f);var m=this._versions,g=m.filter(function(E){return E._cfg.version===f})[0];return g||(g=new this.Version(f),m.push(g),m.sort(va),g.stores({}),this._state.autoSchema=!1,g)},Ye.prototype._whenReady=function(f){var m=this;return this.idbdb&&(this._state.openComplete||Dt.letThrough||this._vip)?f():new Ct(function(g,E){if(m._state.openComplete)return E(new Nt.DatabaseClosed(m._state.dbOpenError));if(!m._state.isBeingOpened){if(!m._state.autoOpen)return void E(new Nt.DatabaseClosed);m.open().catch(Se)}m._state.dbReadyPromise.then(g,E)}).then(f)},Ye.prototype.use=function(f){var m=f.stack,g=f.create,E=f.level,A=f.name;return A&&this.unuse({stack:m,name:A}),f=this._middlewares[m]||(this._middlewares[m]=[]),f.push({stack:m,create:g,level:E??10,name:A}),f.sort(function(w,D){return w.level-D.level}),this},Ye.prototype.unuse=function(f){var m=f.stack,g=f.name,E=f.create;return m&&this._middlewares[m]&&(this._middlewares[m]=this._middlewares[m].filter(function(A){return E?A.create!==E:!!g&&A.name!==g})),this},Ye.prototype.open=function(){var f=this;return Bn(yn,function(){return ln(f)})},Ye.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var f=this._state,m=yi.indexOf(this);if(0<=m&&yi.splice(m,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}f.isBeingOpened||(f.dbReadyPromise=new Ct(function(g){f.dbReadyResolve=g}),f.openCanceller=new Ct(function(g,E){f.cancelOpen=E}))},Ye.prototype.close=function(g){var m=(g===void 0?{disableAutoOpen:!0}:g).disableAutoOpen,g=this._state;m?(g.isBeingOpened&&g.cancelOpen(new Nt.DatabaseClosed),this._close(),g.autoOpen=!1,g.dbOpenError=new Nt.DatabaseClosed):(this._close(),g.autoOpen=this._options.autoOpen||g.isBeingOpened,g.openComplete=!1,g.dbOpenError=null)},Ye.prototype.delete=function(f){var m=this;f===void 0&&(f={disableAutoOpen:!0});var g=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new Ct(function(A,w){function D(){m.close(f);var x=m._deps.indexedDB.deleteDatabase(m.name);x.onsuccess=Me(function(){var z,j,Q;z=m._deps,j=m.name,Q=z.indexedDB,z=z.IDBKeyRange,Mr(Q)||j===rs||ba(Q,z).delete(j).catch(Se),A()}),x.onerror=qn(w),x.onblocked=m._fireOnBlocked}if(g)throw new Nt.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(D):D()})},Ye.prototype.backendDB=function(){return this.idbdb},Ye.prototype.isOpen=function(){return this.idbdb!==null},Ye.prototype.hasBeenClosed=function(){var f=this._state.dbOpenError;return f&&f.name==="DatabaseClosed"},Ye.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ye.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ye.prototype,"tables",{get:function(){var f=this;return d(this._allTables).map(function(m){return f._allTables[m]})},enumerable:!1,configurable:!0}),Ye.prototype.transaction=function(){var f=(function(m,g,E){var A=arguments.length;if(A<2)throw new Nt.InvalidArgument("Too few arguments");for(var w=new Array(A-1);--A;)w[A-1]=arguments[A];return E=w.pop(),[m,Y(w),E]}).apply(this,arguments);return this._transaction.apply(this,f)},Ye.prototype._transaction=function(f,m,g){var E=this,A=Dt.trans;A&&A.db===this&&f.indexOf("!")===-1||(A=null);var w,D,x=f.indexOf("?")!==-1;f=f.replace("!","").replace("?","");try{if(D=m.map(function(j){if(j=j instanceof E.Table?j.name:j,typeof j!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return j}),f=="r"||f===Rr)w=Rr;else{if(f!="rw"&&f!=Ir)throw new Nt.InvalidArgument("Invalid transaction mode: "+f);w=Ir}if(A){if(A.mode===Rr&&w===Ir){if(!x)throw new Nt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");A=null}A&&D.forEach(function(j){if(A&&A.storeNames.indexOf(j)===-1){if(!x)throw new Nt.SubTransaction("Table "+j+" not included in parent transaction.");A=null}}),x&&A&&!A.active&&(A=null)}}catch(j){return A?A._promise(null,function(Q,L){L(j)}):Ce(j)}var z=(function j(Q,L,$,B,K){return Ct.resolve().then(function(){var G=Dt.transless||Dt,X=Q._createTransaction(L,$,Q._dbSchema,B);if(X.explicit=!0,G={trans:X,transless:G},B)X.idbtrans=B.idbtrans;else try{X.create(),X.idbtrans._explicit=!0,Q._state.PR1398_maxLoop=3}catch(lt){return lt.name===de.InvalidState&&Q.isOpen()&&0<--Q._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Q.close({disableAutoOpen:!1}),Q.open().then(function(){return j(Q,L,$,null,K)})):Ce(lt)}var et,it=F(K);return it&&Ge(),G=Ct.follow(function(){var lt;(et=K.call(X,X))&&(it?(lt=kn.bind(null,null),et.then(lt,lt)):typeof et.next=="function"&&typeof et.throw=="function"&&(et=Ae(et)))},G),(et&&typeof et.then=="function"?Ct.resolve(et).then(function(lt){return X.active?lt:Ce(new Nt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):G.then(function(){return et})).then(function(lt){return B&&X._resolve(),X._completion.then(function(){return lt})}).catch(function(lt){return X._reject(lt),Ce(lt)})})}).bind(null,this,w,D,A,g);return A?A._promise(w,z,"lock"):Dt.trans?Bn(Dt.transless,function(){return E._whenReady(z)}):this._whenReady(z)},Ye.prototype.table=function(f){if(!O(this._allTables,f))throw new Nt.InvalidTable("Table ".concat(f," does not exist"));return this._allTables[f]},Ye);function Ye(f,m){var g=this;this._middlewares={},this.verno=0;var E=Ye.dependencies;this._options=m=s({addons:Ye.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},m),this._deps={indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange},E=m.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var A,w,D,x,z,j={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Se,dbReadyPromise:null,cancelOpen:Se,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:m.autoOpen};j.dbReadyPromise=new Ct(function(L){j.dbReadyResolve=L}),j.openCanceller=new Ct(function(L,$){j.cancelOpen=$}),this._state=j,this.name=f,this.on=Zr(this,"populate","blocked","versionchange","close",{ready:[en,Se]}),this.once=function(L,$){var B=function(){for(var K=[],G=0;G<arguments.length;G++)K[G]=arguments[G];g.on(L).unsubscribe(B),$.apply(g,K)};return g.on(L,B)},this.on.ready.subscribe=Ut(this.on.ready.subscribe,function(L){return function($,B){Ye.vip(function(){var K,G=g._state;G.openComplete?(G.dbOpenError||Ct.resolve().then($),B&&L($)):G.onReadyBeingFired?(G.onReadyBeingFired.push($),B&&L($)):(L($),K=g,B||L(function X(){K.on.ready.unsubscribe($),K.on.ready.unsubscribe(X)}))})}}),this.Collection=(A=this,wn(sl.prototype,function(et,X){this.db=A;var B=ha,K=null;if(X)try{B=X()}catch(it){K=it}var G=et._ctx,X=G.table,et=X.hook.reading.fire;this._ctx={table:X,index:G.index,isPrimKey:!G.index||X.schema.primKey.keyPath&&G.index===X.schema.primKey.name,range:B,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:K,or:G.or,valueMapper:et!==hi?et:null}})),this.Table=(w=this,wn(ss.prototype,function(L,$,B){this.db=w,this._tx=B,this.name=L,this.schema=$,this.hook=w._allTables[L]?w._allTables[L].hook:Zr(null,{creating:[ws,Se],reading:[di,hi],updating:[vo,Se],deleting:[yo,Se]})})),this.Transaction=(D=this,wn(Ms.prototype,function(L,$,B,K,G){var X=this;L!=="readonly"&&$.forEach(function(et){et=(et=B[et])===null||et===void 0?void 0:et.yProps,et&&($=$.concat(et.map(function(it){return it.updatesTable})))}),this.db=D,this.mode=L,this.storeNames=$,this.schema=B,this.chromeTransactionDurability=K,this.idbtrans=null,this.on=Zr(this,"complete","error","abort"),this.parent=G||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ct(function(et,it){X._resolve=et,X._reject=it}),this._completion.then(function(){X.active=!1,X.on.complete.fire()},function(et){var it=X.active;return X.active=!1,X.on.error.fire(et),X.parent?X.parent._reject(et):it&&X.idbtrans&&X.idbtrans.abort(),Ce(et)})})),this.Version=(x=this,wn(Ea.prototype,function(L){this.db=x,this._cfg={version:L,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(z=this,wn(ji.prototype,function(L,$,B){if(this.db=z,this._ctx={table:L,index:$===":id"?null:$,or:B},this._cmp=this._ascending=se,this._descending=function(K,G){return se(G,K)},this._max=function(K,G){return 0<se(K,G)?K:G},this._min=function(K,G){return se(K,G)<0?K:G},this._IDBKeyRange=z._deps.IDBKeyRange,!this._IDBKeyRange)throw new Nt.MissingAPI})),this.on("versionchange",function(L){0<L.newVersion?console.warn("Another connection wants to upgrade database '".concat(g.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(g.name,"'. Closing db now to resume the delete request.")),g.close({disableAutoOpen:!1})}),this.on("blocked",function(L){!L.newVersion||L.newVersion<L.oldVersion?console.warn("Dexie.delete('".concat(g.name,"') was blocked")):console.warn("Upgrade '".concat(g.name,"' blocked by other connection holding version ").concat(L.oldVersion/10))}),this._maxKey=qi(m.IDBKeyRange),this._createTransaction=function(L,$,B,K){return new g.Transaction(L,$,B,g._options.chromeTransactionDurability,K)},this._fireOnBlocked=function(L){g.on("blocked").fire(L),yi.filter(function($){return $.name===g.name&&$!==g&&!$._state.vcFired}).map(function($){return $.on("versionchange").fire(L)})},this.use(Aa),this.use(ll),this.use(Ph),this.use(kr),this.use(si);var Q=new Proxy(this,{get:function(L,$,B){if($==="_vip")return!0;if($==="table")return function(G){return Ro(g.table(G),Q)};var K=Reflect.get(L,$,B);return K instanceof ss?Ro(K,Q):$==="tables"?K.map(function(G){return Ro(G,Q)}):$==="_createTransaction"?function(){return Ro(K.apply(this,arguments),Q)}:K}});this.vip=Q,E.forEach(function(L){return L(g)})}var Ca,Er=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ic=(ul.prototype.subscribe=function(f,m,g){return this._subscribe(f&&typeof f!="function"?f:{next:f,error:m,complete:g})},ul.prototype[Er]=function(){return this},ul);function ul(f){this._subscribe=f}try{Ca={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Ca={indexedDB:null,IDBKeyRange:null}}function Oc(f){var m,g=!1,E=new Ic(function(A){var w=F(f),D,x=!1,z={},j={},Q={get closed(){return x},unsubscribe:function(){x||(x=!0,D&&D.abort(),L&&_n.storagemutated.unsubscribe(B))}};A.start&&A.start(Q);var L=!1,$=function(){return Cr(K)},B=function(G){c(z,G),v(j,z)&&$()},K=function(){var G,X,et;!x&&Ca.indexedDB&&(z={},G={},D&&D.abort(),D=new AbortController,et=(function(it){var lt=Xn();try{w&&Ge();var mt=ke(f,it);return mt=w?mt.finally(kn):mt}finally{lt&&Ar()}})(X={subscr:G,signal:D.signal,requery:$,querier:f,trans:null}),Promise.resolve(et).then(function(it){g=!0,m=it,x||X.signal.aborted||(z={},(function(lt){for(var mt in lt)if(O(lt,mt))return;return 1})(j=G)||L||(_n(Nr,B),L=!0),Cr(function(){return!x&&A.next&&A.next(it)}))},function(it){g=!1,["DatabaseClosedError","AbortError"].includes(it?.name)||x||Cr(function(){x||A.error&&A.error(it)})}))};return setTimeout($,0),Q});return E.hasValue=function(){return g},E.getValue=function(){return m},E}var Ls=wi;function lu(f){var m=cs;try{cs=!0,_n.storagemutated.fire(f),At(f,!0)}finally{cs=m}}k(Ls,s(s({},Ui),{delete:function(f){return new Ls(f,{addons:[]}).delete()},exists:function(f){return new Ls(f,{addons:[]}).open().then(function(m){return m.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(f){try{return m=Ls.dependencies,g=m.indexedDB,m=m.IDBKeyRange,(Mr(g)?Promise.resolve(g.databases()).then(function(E){return E.map(function(A){return A.name}).filter(function(A){return A!==rs})}):ba(g,m).toCollection().primaryKeys()).then(f)}catch{return Ce(new Nt.MissingAPI)}var m,g},defineClass:function(){return function(f){_(this,f)}},ignoreTransaction:function(f){return Dt.trans?Bn(Dt.transless,f):f()},vip:Ta,async:function(f){return function(){try{var m=Ae(f.apply(this,arguments));return m&&typeof m.then=="function"?m:Ct.resolve(m)}catch(g){return Ce(g)}}},spawn:function(f,m,g){try{var E=Ae(f.apply(g,m||[]));return E&&typeof E.then=="function"?E:Ct.resolve(E)}catch(A){return Ce(A)}},currentTransaction:{get:function(){return Dt.trans||null}},waitFor:function(f,m){return m=Ct.resolve(typeof f=="function"?Ls.ignoreTransaction(f):f).timeout(m||6e4),Dt.trans?Dt.trans.waitFor(m):m},Promise:Ct,debug:{get:function(){return Vn},set:function(f){rl(f)}},derive:yt,extend:_,props:k,override:Ut,Events:Zr,on:_n,liveQuery:Oc,extendObservabilitySet:c,getByKeyPath:Zt,setByKeyPath:M,delByKeyPath:function(f,m){typeof m=="string"?M(f,m,void 0):"length"in m&&[].map.call(m,function(g){M(f,g,void 0)})},shallowClone:N,deepClone:V,getObjectDiff:Pr,cmp:se,asap:xe,minKey:-1/0,addons:[],connections:yi,errnames:de,dependencies:Ca,cache:S,semVer:"4.2.1",version:"4.2.1".split(".").map(function(f){return parseInt(f)}).reduce(function(f,m,g){return f+m/Math.pow(10,2*g)})})),Ls.maxKey=qi(Ls.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(_n(Nr,function(f){cs||(f=new CustomEvent(vr,{detail:f}),cs=!0,dispatchEvent(f),cs=!1)}),addEventListener(vr,function(f){f=f.detail,cs||lu(f)}));var Ra,cs=!1,lr=function(){};return typeof BroadcastChannel<"u"&&((lr=function(){(Ra=new BroadcastChannel(vr)).onmessage=function(f){return f.data&&lu(f.data)}})(),typeof Ra.unref=="function"&&Ra.unref(),_n(Nr,function(f){cs||Ra.postMessage(f)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(f){if(!wi.disableBfCache&&f.persisted){Vn&&console.debug("Dexie: handling persisted pagehide"),Ra?.close();for(var m=0,g=yi;m<g.length;m++)g[m].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(f){!wi.disableBfCache&&f.persisted&&(Vn&&console.debug("Dexie: handling persisted pageshow"),lr(),lu({all:new En(-1/0,[[]])}))})),Ct.rejectionMapper=function(f,m){return!f||f instanceof Rt||f instanceof TypeError||f instanceof SyntaxError||!f.name||!ts[f.name]?f:(m=new ts[f.name](m||f.message,f),"stack"in f&&dt(m,"stack",{get:function(){return this.inner.stack}}),m)},rl(Vn),s(wi,Object.freeze({__proto__:null,Dexie:wi,liveQuery:Oc,Entity:bo,cmp:se,PropModification:Or,replacePrefix:function(f,m){return new Or({replacePrefix:[f,m]})},add:function(f){return new Or({add:f})},remove:function(f){return new Or({remove:f})},default:wi,RangeSet:En,mergeRanges:Vr,rangesOverlap:Hn}),{default:wi}),wi})})(Uf)),Uf.exports}var TA=bA();const jm=dp(TA),E_=Symbol.for("Dexie"),$f=globalThis[E_]||(globalThis[E_]=jm);if(jm.semVer!==$f.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${jm.semVer} and ${$f.semVer}`);const{liveQuery:lN,mergeRanges:uN,rangesOverlap:cN,RangeSet:fN,cmp:hN,Entity:dN,PropModification:mN,replacePrefix:pN,add:gN,remove:yN,DexieYProvider:vN}=$f,fr=new $f("GeminiPodcastFlashcards");fr.version(1).stores({vocab:"id, word, status, nextReview, reviewCount, updatedAt"});async function SA(){if(await fr.vocab.count()===0)try{const n="/public/flashcards/data.json".replace("//","/");console.log(`Fetching data from: ${n}`);const s=await fetch(n);if(!s.ok)throw new Error(`Failed to fetch data.json (${s.status})`);const u=(await s.json()).map(d=>({...d,status:d.status||"new",reviewCount:d.reviewCount||0,nextReview:d.nextReview||Date.now(),updatedAt:Date.now()}));await fr.vocab.bulkAdd(u),console.log(`Initialized DB with ${u.length} cards.`)}catch(t){console.error("Error initializing database:",t)}}function AA(i,t){const n=Date.now(),s=60*1e3,u=24*(60*s);let d=i.status,y=n,_=i.reviewCount||0;if(t==="remember")d="review",y=n+u,_+=1;else if(t==="forget")d="learning",y=n+10*s;else throw new Error(`Unknown action: ${t}`);return{status:d,nextReview:y,reviewCount:_,updatedAt:n}}function wA({card:i,onUpdate:t}){const[n,s]=jt.useState(!1),o=()=>{s(!n)},u=(d,y)=>{y.stopPropagation();try{const _=AA(i,d),b={...i,..._};t(b),s(!1)}catch(_){console.error("Error updating card:",_)}};return Et.jsxs("div",{className:"flashcard-container",onClick:o,style:{border:"1px solid #444",padding:"2rem",borderRadius:"12px",textAlign:"center",cursor:"pointer",minHeight:"240px",display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"#25262b",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"transform 0.2s",color:"#e0e0e0"},children:[!n&&Et.jsxs("div",{className:"front",children:[Et.jsx("h2",{style:{fontSize:"2.5rem",margin:"0 0 0.5rem 0",fontWeight:"bold"},children:i.word}),i.ipa&&Et.jsxs("p",{style:{fontSize:"1.2rem",color:"#88ccca",fontFamily:"monospace",margin:"0 0 1.5rem 0"},children:["/",i.ipa,"/"]}),Et.jsx("p",{style:{color:"#666",fontSize:"0.9rem"},children:"(Click to flip)"})]}),n&&Et.jsxs("div",{className:"back",children:[Et.jsx("h2",{style:{fontSize:"1.5rem",color:"#888",marginBottom:"0.5rem"},children:i.word}),i.ipa&&Et.jsxs("p",{style:{fontSize:"1rem",color:"#666",fontFamily:"monospace",margin:"0 0 1rem 0"},children:["/",i.ipa,"/"]}),Et.jsxs("div",{style:{margin:"1rem 0",textAlign:"left",lineHeight:"1.6"},children:[Et.jsxs("p",{style:{marginBottom:"0.8rem"},children:[Et.jsx("strong",{style:{color:"#aaa"},children:"Definition:"}),Et.jsx("br",{}),i.definition]}),Et.jsxs("p",{children:[Et.jsx("strong",{style:{color:"#aaa"},children:"Context:"}),Et.jsx("br",{}),Et.jsx("em",{style:{color:"#a5d6a7"},children:i.context})]})]}),Et.jsxs("div",{className:"actions",style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"2rem"},children:[Et.jsx("button",{onClick:d=>u("forget",d),style:{padding:"0.6rem 1.2rem",backgroundColor:"#e53935",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"Forgot (10m)"}),Et.jsx("button",{onClick:d=>u("remember",d),style:{padding:"0.6rem 1.2rem",backgroundColor:"#43a047",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"Remember (1d)"})]})]})]})}class CA{_generateId(){const t=Date.now(),n=Math.random().toString(36).substring(2,8);return`${t}_${n}`}async importCards(t){try{const n=JSON.parse(t);if(!Array.isArray(n))throw new Error("Input must be a JSON array");const s=await fr.vocab.toArray(),o=new Set(s.map(y=>y.word.toLowerCase())),u=[];let d=0;for(const y of n)y.word&&(o.has(y.word.toLowerCase())?d++:(u.push({...y,id:this._generateId(),status:"new",reviewCount:0,nextReview:Date.now(),updatedAt:Date.now(),createdAt:Date.now()}),o.add(y.word.toLowerCase())));return u.length>0&&await fr.vocab.bulkAdd(u),{addedCount:u.length,skippedCount:d}}catch(n){throw console.error("Import failed:",n),n}}async addCard(t){if((await fr.vocab.toArray()).some(u=>u.word.toLowerCase()===t.word.toLowerCase()))throw new Error(`Duplicate word: ${t.word}`);const o={...t,id:this._generateId(),status:"new",reviewCount:0,nextReview:Date.now(),updatedAt:Date.now(),createdAt:Date.now()};return await fr.vocab.add(o),o}async updateCard(t){const n={...t,updatedAt:Date.now()};return await fr.vocab.put(n),n}async deleteCard(t){await fr.vocab.delete(t)}async getAllCards(){return await fr.vocab.toArray()}async clearAllCards(){await fr.vocab.clear()}}const pp=new CA;var b_;(function(i){i.STRING="string",i.NUMBER="number",i.INTEGER="integer",i.BOOLEAN="boolean",i.ARRAY="array",i.OBJECT="object"})(b_||(b_={}));var T_;(function(i){i.LANGUAGE_UNSPECIFIED="language_unspecified",i.PYTHON="python"})(T_||(T_={}));var S_;(function(i){i.OUTCOME_UNSPECIFIED="outcome_unspecified",i.OUTCOME_OK="outcome_ok",i.OUTCOME_FAILED="outcome_failed",i.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(S_||(S_={}));const A_=["user","model","function","system"];var w_;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(w_||(w_={}));var C_;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(C_||(C_={}));var R_;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(R_||(R_={}));var I_;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER"})(I_||(I_={}));var Qu;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.OTHER="OTHER"})(Qu||(Qu={}));var O_;(function(i){i.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",i.RETRIEVAL_QUERY="RETRIEVAL_QUERY",i.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",i.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",i.CLASSIFICATION="CLASSIFICATION",i.CLUSTERING="CLUSTERING"})(O_||(O_={}));var D_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(D_||(D_={}));var N_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(N_||(N_={}));class mr extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Vl extends mr{constructor(t,n){super(t),this.response=n}}class hE extends mr{constructor(t,n,s,o){super(t),this.status=n,this.statusText=s,this.errorDetails=o}}class ro extends mr{}class dE extends mr{}const RA="https://generativelanguage.googleapis.com",IA="v1beta",OA="0.24.1",DA="genai-js";var Yo;(function(i){i.GENERATE_CONTENT="generateContent",i.STREAM_GENERATE_CONTENT="streamGenerateContent",i.COUNT_TOKENS="countTokens",i.EMBED_CONTENT="embedContent",i.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Yo||(Yo={}));class NA{constructor(t,n,s,o,u){this.model=t,this.task=n,this.apiKey=s,this.stream=o,this.requestOptions=u}toString(){var t,n;const s=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||IA;let u=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||RA}/${s}/${this.model}:${this.task}`;return this.stream&&(u+="?alt=sse"),u}}function xA(i){const t=[];return i?.apiClient&&t.push(i.apiClient),t.push(`${DA}/${OA}`),t.join(" ")}async function MA(i){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",xA(i.requestOptions)),n.append("x-goog-api-key",i.apiKey);let s=(t=i.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(o){throw new ro(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${o.message}`)}for(const[o,u]of s.entries()){if(o==="x-goog-api-key")throw new ro(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new ro(`Header name ${o} can only be set using the apiClient field`);n.append(o,u)}}return n}async function VA(i,t,n,s,o,u){const d=new NA(i,t,n,s,u);return{url:d.toString(),fetchOptions:Object.assign(Object.assign({},LA(u)),{method:"POST",headers:await MA(d),body:o})}}async function mc(i,t,n,s,o,u={},d=fetch){const{url:y,fetchOptions:_}=await VA(i,t,n,s,o,u);return kA(y,_,d)}async function kA(i,t,n=fetch){let s;try{s=await n(i,t)}catch(o){PA(o,i)}return s.ok||await UA(s,i),s}function PA(i,t){let n=i;throw n.name==="AbortError"?(n=new dE(`Request aborted when fetching ${t.toString()}: ${i.message}`),n.stack=i.stack):i instanceof hE||i instanceof ro||(n=new mr(`Error fetching from ${t.toString()}: ${i.message}`),n.stack=i.stack),n}async function UA(i,t){let n="",s;try{const o=await i.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,s=o.error.details)}catch{}throw new hE(`Error fetching from ${t.toString()}: [${i.status} ${i.statusText}] ${n}`,i.status,i.statusText,s)}function LA(i){const t={};if(i?.signal!==void 0||i?.timeout>=0){const n=new AbortController;i?.timeout>=0&&setTimeout(()=>n.abort(),i.timeout),i?.signal&&i.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}function gp(i){return i.text=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Lf(i.candidates[0]))throw new Vl(`${Ja(i)}`,i);return zA(i)}else if(i.promptFeedback)throw new Vl(`Text not available. ${Ja(i)}`,i);return""},i.functionCall=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Lf(i.candidates[0]))throw new Vl(`${Ja(i)}`,i);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),x_(i)[0]}else if(i.promptFeedback)throw new Vl(`Function call not available. ${Ja(i)}`,i)},i.functionCalls=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Lf(i.candidates[0]))throw new Vl(`${Ja(i)}`,i);return x_(i)}else if(i.promptFeedback)throw new Vl(`Function call not available. ${Ja(i)}`,i)},i}function zA(i){var t,n,s,o;const u=[];if(!((n=(t=i.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const d of(o=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)d.text&&u.push(d.text),d.executableCode&&u.push("\n```"+d.executableCode.language+`
`+d.executableCode.code+"\n```\n"),d.codeExecutionResult&&u.push("\n```\n"+d.codeExecutionResult.output+"\n```\n");return u.length>0?u.join(""):""}function x_(i){var t,n,s,o;const u=[];if(!((n=(t=i.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const d of(o=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)d.functionCall&&u.push(d.functionCall);if(u.length>0)return u}const jA=[Qu.RECITATION,Qu.SAFETY,Qu.LANGUAGE];function Lf(i){return!!i.finishReason&&jA.includes(i.finishReason)}function Ja(i){var t,n,s;let o="";if((!i.candidates||i.candidates.length===0)&&i.promptFeedback)o+="Response was blocked",!((t=i.promptFeedback)===null||t===void 0)&&t.blockReason&&(o+=` due to ${i.promptFeedback.blockReason}`),!((n=i.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${i.promptFeedback.blockReasonMessage}`);else if(!((s=i.candidates)===null||s===void 0)&&s[0]){const u=i.candidates[0];Lf(u)&&(o+=`Candidate was blocked due to ${u.finishReason}`,u.finishMessage&&(o+=`: ${u.finishMessage}`))}return o}function nc(i){return this instanceof nc?(this.v=i,this):new nc(i)}function BA(i,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(i,t||[]),o,u=[];return o={},d("next"),d("throw"),d("return"),o[Symbol.asyncIterator]=function(){return this},o;function d(k){s[k]&&(o[k]=function(J){return new Promise(function(dt,yt){u.push([k,J,dt,yt])>1||y(k,J)})})}function y(k,J){try{_(s[k](J))}catch(dt){O(u[0][3],dt)}}function _(k){k.value instanceof nc?Promise.resolve(k.value.v).then(b,R):O(u[0][2],k)}function b(k){y("next",k)}function R(k){y("throw",k)}function O(k,J){k(J),u.shift(),u.length&&y(u[0][0],u[0][1])}}const M_=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function qA(i){const t=i.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=KA(t),[s,o]=n.tee();return{stream:FA(s),response:HA(o)}}async function HA(i){const t=[],n=i.getReader();for(;;){const{done:s,value:o}=await n.read();if(s)return gp(GA(t));t.push(o)}}function FA(i){return BA(this,arguments,function*(){const n=i.getReader();for(;;){const{value:s,done:o}=yield nc(n.read());if(o)break;yield yield nc(gp(s))}})}function KA(i){const t=i.getReader();return new ReadableStream({start(s){let o="";return u();function u(){return t.read().then(({value:d,done:y})=>{if(y){if(o.trim()){s.error(new mr("Failed to parse stream"));return}s.close();return}o+=d;let _=o.match(M_),b;for(;_;){try{b=JSON.parse(_[1])}catch{s.error(new mr(`Error parsing JSON response: "${_[1]}"`));return}s.enqueue(b),o=o.substring(_[0].length),_=o.match(M_)}return u()}).catch(d=>{let y=d;throw y.stack=d.stack,y.name==="AbortError"?y=new dE("Request aborted when reading from the stream"):y=new mr("Error reading from the stream"),y})}}})}function GA(i){const t=i[i.length-1],n={promptFeedback:t?.promptFeedback};for(const s of i){if(s.candidates){let o=0;for(const u of s.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=u.citationMetadata,n.candidates[o].groundingMetadata=u.groundingMetadata,n.candidates[o].finishReason=u.finishReason,n.candidates[o].finishMessage=u.finishMessage,n.candidates[o].safetyRatings=u.safetyRatings,u.content&&u.content.parts){n.candidates[o].content||(n.candidates[o].content={role:u.content.role||"user",parts:[]});const d={};for(const y of u.content.parts)y.text&&(d.text=y.text),y.functionCall&&(d.functionCall=y.functionCall),y.executableCode&&(d.executableCode=y.executableCode),y.codeExecutionResult&&(d.codeExecutionResult=y.codeExecutionResult),Object.keys(d).length===0&&(d.text=""),n.candidates[o].content.parts.push(d)}o++}s.usageMetadata&&(n.usageMetadata=s.usageMetadata)}return n}async function mE(i,t,n,s){const o=await mc(t,Yo.STREAM_GENERATE_CONTENT,i,!0,JSON.stringify(n),s);return qA(o)}async function pE(i,t,n,s){const u=await(await mc(t,Yo.GENERATE_CONTENT,i,!1,JSON.stringify(n),s)).json();return{response:gp(u)}}function gE(i){if(i!=null){if(typeof i=="string")return{role:"system",parts:[{text:i}]};if(i.text)return{role:"system",parts:[i]};if(i.parts)return i.role?i:{role:"system",parts:i.parts}}}function rc(i){let t=[];if(typeof i=="string")t=[{text:i}];else for(const n of i)typeof n=="string"?t.push({text:n}):t.push(n);return YA(t)}function YA(i){const t={role:"user",parts:[]},n={role:"function",parts:[]};let s=!1,o=!1;for(const u of i)"functionResponse"in u?(n.parts.push(u),o=!0):(t.parts.push(u),s=!0);if(s&&o)throw new mr("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!o)throw new mr("No content is provided for sending chat message.");return s?t:n}function QA(i,t){var n;let s={model:t?.model,generationConfig:t?.generationConfig,safetySettings:t?.safetySettings,tools:t?.tools,toolConfig:t?.toolConfig,systemInstruction:t?.systemInstruction,cachedContent:(n=t?.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=i.generateContentRequest!=null;if(i.contents){if(o)throw new ro("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=i.contents}else if(o)s=Object.assign(Object.assign({},s),i.generateContentRequest);else{const u=rc(i);s.contents=[u]}return{generateContentRequest:s}}function V_(i){let t;return i.contents?t=i:t={contents:[rc(i)]},i.systemInstruction&&(t.systemInstruction=gE(i.systemInstruction)),t}function XA(i){return typeof i=="string"||Array.isArray(i)?{content:rc(i)}:i}const k_=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],$A={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function JA(i){let t=!1;for(const n of i){const{role:s,parts:o}=n;if(!t&&s!=="user")throw new mr(`First content should be with role 'user', got ${s}`);if(!A_.includes(s))throw new mr(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(A_)}`);if(!Array.isArray(o))throw new mr("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new mr("Each Content should have at least one part");const u={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const y of o)for(const _ of k_)_ in y&&(u[_]+=1);const d=$A[s];for(const y of k_)if(!d.includes(y)&&u[y]>0)throw new mr(`Content with role '${s}' can't contain '${y}' part`);t=!0}}function P_(i){var t;if(i.candidates===void 0||i.candidates.length===0)return!1;const n=(t=i.candidates[0])===null||t===void 0?void 0:t.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const s of n.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}const U_="SILENT_ERROR";class ZA{constructor(t,n,s,o={}){this.model=n,this.params=s,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,s?.history&&(JA(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,n={}){var s,o,u,d,y,_;await this._sendPromise;const b=rc(t),R={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(y=this.params)===null||y===void 0?void 0:y.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,b]},O=Object.assign(Object.assign({},this._requestOptions),n);let k;return this._sendPromise=this._sendPromise.then(()=>pE(this._apiKey,this.model,R,O)).then(J=>{var dt;if(P_(J.response)){this._history.push(b);const yt=Object.assign({parts:[],role:"model"},(dt=J.response.candidates)===null||dt===void 0?void 0:dt[0].content);this._history.push(yt)}else{const yt=Ja(J.response);yt&&console.warn(`sendMessage() was unsuccessful. ${yt}. Inspect response object for details.`)}k=J}).catch(J=>{throw this._sendPromise=Promise.resolve(),J}),await this._sendPromise,k}async sendMessageStream(t,n={}){var s,o,u,d,y,_;await this._sendPromise;const b=rc(t),R={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(y=this.params)===null||y===void 0?void 0:y.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,b]},O=Object.assign(Object.assign({},this._requestOptions),n),k=mE(this._apiKey,this.model,R,O);return this._sendPromise=this._sendPromise.then(()=>k).catch(J=>{throw new Error(U_)}).then(J=>J.response).then(J=>{if(P_(J)){this._history.push(b);const dt=Object.assign({},J.candidates[0].content);dt.role||(dt.role="model"),this._history.push(dt)}else{const dt=Ja(J);dt&&console.warn(`sendMessageStream() was unsuccessful. ${dt}. Inspect response object for details.`)}}).catch(J=>{J.message!==U_&&console.error(J)}),k}}async function WA(i,t,n,s){return(await mc(t,Yo.COUNT_TOKENS,i,!1,JSON.stringify(n),s)).json()}async function tw(i,t,n,s){return(await mc(t,Yo.EMBED_CONTENT,i,!1,JSON.stringify(n),s)).json()}async function ew(i,t,n,s){const o=n.requests.map(d=>Object.assign(Object.assign({},d),{model:t}));return(await mc(t,Yo.BATCH_EMBED_CONTENTS,i,!1,JSON.stringify({requests:o}),s)).json()}class L_{constructor(t,n,s={}){this.apiKey=t,this._requestOptions=s,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=gE(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(t,n={}){var s;const o=V_(t),u=Object.assign(Object.assign({},this._requestOptions),n);return pE(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),u)}async generateContentStream(t,n={}){var s;const o=V_(t),u=Object.assign(Object.assign({},this._requestOptions),n);return mE(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),u)}startChat(t){var n;return new ZA(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},t),this._requestOptions)}async countTokens(t,n={}){const s=QA(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return WA(this.apiKey,this.model,s,o)}async embedContent(t,n={}){const s=XA(t),o=Object.assign(Object.assign({},this._requestOptions),n);return tw(this.apiKey,this.model,s,o)}async batchEmbedContents(t,n={}){const s=Object.assign(Object.assign({},this._requestOptions),n);return ew(this.apiKey,this.model,t,s)}}class z_{constructor(t){this.apiKey=t}getGenerativeModel(t,n){if(!t.model)throw new mr("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new L_(this.apiKey,t,n)}getGenerativeModelFromCachedContent(t,n,s){if(!t.name)throw new ro("Cached content must contain a `name` field.");if(!t.model)throw new ro("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const d of o)if(n?.[d]&&t[d]&&n?.[d]!==t[d]){if(d==="model"){const y=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,_=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(y===_)continue}throw new ro(`Different value for "${d}" specified in modelParams (${n[d]}) and cachedContent (${t[d]})`)}const u=Object.assign(Object.assign({},n),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new L_(this.apiKey,u,s)}}const nw={models:{default:"gemini-2.5-flash"}},rw={ai:nw};class iw{constructor(){this.apiKeyKey="gemini_api_key_byok",this.modelName=rw.ai?.models?.default}getApiKey(){return sessionStorage.getItem(this.apiKeyKey)}setApiKey(t){sessionStorage.setItem(this.apiKeyKey,t)}removeApiKey(){sessionStorage.removeItem(this.apiKeyKey)}hasKey(){return!!this.getApiKey()}async generateCardDetails(t){const n=this.getApiKey();if(!n)throw new Error("API Key not found in session. Please configure it in Settings again.");const o=new z_(n).getGenerativeModel({model:this.modelName}),u=`
      You are an English vocabulary expert.
      Define the word: "${t}".
      
      Return ONLY a raw JSON object (no markdown formatting, no code blocks) with the following keys:
      - "definition": A clear, concise English definition suitable for a flashcard.
      - "ipa": The IPA phonetic transcription.
      - "context": A short, natural example sentence using the word.
    `;return this._callGemini(o,u)}async analyzeTranscript(t,n){const s=this.getApiKey();if(!s)throw new Error("API Key not found. Please configure it in Settings.");const u=new z_(s).getGenerativeModel({model:this.modelName});let d="";n==="auto"?d="Select the most important and difficult vocabulary words (approximately 5 to 15 words depending on text length).":d=`Select strictly up to ${n} most important vocabulary words.`;const y=`
      You are an expert language tutor analyzing a podcast transcript.
      
      Goal: Extract vocabulary words from the provided text for a learner.
      Constraint: ${d}
      
      For each word, provide:
      1. "word": The target word (lemma).
      2. "ipa": IPA phonetic transcription.
      3. "definition": A concise English definition relevant to the context in the transcript.
      4. "context": The exact sentence or a slightly simplified version from the text where the word appears.

      Input Text:
      """
      ${t.substring(0,3e4)} 
      """
      (Note: Input truncated to first 30k chars to fit context window if necessary)

      Return ONLY a raw JSON array (no markdown, no code blocks) of objects.
      Example format:
      [
        { "word": "Serendipity", "ipa": "...", "definition": "...", "context": "..." }
      ]
    `;return this._callGemini(u,y,!0)}async _callGemini(t,n,s=!1){try{console.log(`Calling AI Model: ${this.modelName}`);const y=(await(await t.generateContent(n)).response).text().replace(/```json|```/g,"").trim();let _;try{_=JSON.parse(y)}catch(R){const O=y.indexOf(s?"[":"{"),k=y.lastIndexOf(s?"]":"}")+1;if(O!==-1&&k!==-1)_=JSON.parse(y.substring(O,k));else throw R}const b=R=>{R.ipa&&(R.ipa=R.ipa.replace(new RegExp("^[/\\[]|[/\\]]$","g"),""))};return Array.isArray(_)?_.forEach(b):b(_),_}catch(o){throw console.error("AI Generation failed:",o),new Error(`AI Error: ${o.message}`)}}}const Fo=new iw;let sw={data:""},aw=i=>{if(typeof window=="object"){let t=(i?i.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(i||document.head).appendChild(t),t.firstChild}return i||sw},ow=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,lw=/\/\*[^]*?\*\/|  +/g,j_=/\n+/g,Za=(i,t)=>{let n="",s="",o="";for(let u in i){let d=i[u];u[0]=="@"?u[1]=="i"?n=u+" "+d+";":s+=u[1]=="f"?Za(d,u):u+"{"+Za(d,u[1]=="k"?"":t)+"}":typeof d=="object"?s+=Za(d,t?t.replace(/([^,])+/g,y=>u.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,_=>/&/.test(_)?_.replace(/&/g,y):y?y+" "+_:_)):u):d!=null&&(u=/^--/.test(u)?u:u.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Za.p?Za.p(u,d):u+":"+d+";")}return n+(t&&o?t+"{"+o+"}":o)+s},ta={},yE=i=>{if(typeof i=="object"){let t="";for(let n in i)t+=n+yE(i[n]);return t}return i},uw=(i,t,n,s,o)=>{let u=yE(i),d=ta[u]||(ta[u]=(_=>{let b=0,R=11;for(;b<_.length;)R=101*R+_.charCodeAt(b++)>>>0;return"go"+R})(u));if(!ta[d]){let _=u!==i?i:(b=>{let R,O,k=[{}];for(;R=ow.exec(b.replace(lw,""));)R[4]?k.shift():R[3]?(O=R[3].replace(j_," ").trim(),k.unshift(k[0][O]=k[0][O]||{})):k[0][R[1]]=R[2].replace(j_," ").trim();return k[0]})(i);ta[d]=Za(o?{["@keyframes "+d]:_}:_,n?"":"."+d)}let y=n&&ta.g?ta.g:null;return n&&(ta.g=ta[d]),((_,b,R,O)=>{O?b.data=b.data.replace(O,_):b.data.indexOf(_)===-1&&(b.data=R?_+b.data:b.data+_)})(ta[d],t,s,y),d},cw=(i,t,n)=>i.reduce((s,o,u)=>{let d=t[u];if(d&&d.call){let y=d(n),_=y&&y.props&&y.props.className||/^go/.test(y)&&y;d=_?"."+_:y&&typeof y=="object"?y.props?"":Za(y,""):y===!1?"":y}return s+o+(d??"")},"");function vh(i){let t=this||{},n=i.call?i(t.p):i;return uw(n.unshift?n.raw?cw(n,[].slice.call(arguments,1),t.p):n.reduce((s,o)=>Object.assign(s,o&&o.call?o(t.p):o),{}):n,aw(t.target),t.g,t.o,t.k)}let vE,Bm,qm;vh.bind({g:1});let sa=vh.bind({k:1});function fw(i,t,n,s){Za.p=t,vE=i,Bm=n,qm=s}function go(i,t){let n=this||{};return function(){let s=arguments;function o(u,d){let y=Object.assign({},u),_=y.className||o.className;n.p=Object.assign({theme:Bm&&Bm()},y),n.o=/ *go\d+/.test(_),y.className=vh.apply(n,s)+(_?" "+_:"");let b=i;return i[0]&&(b=y.as||i,delete y.as),qm&&b[0]&&qm(y),vE(b,y)}return o}}var hw=i=>typeof i=="function",Jf=(i,t)=>hw(i)?i(t):i,dw=(()=>{let i=0;return()=>(++i).toString()})(),_E=(()=>{let i;return()=>{if(i===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");i=!t||t.matches}return i}})(),mw=20,yp="default",EE=(i,t)=>{let{toastLimit:n}=i.settings;switch(t.type){case 0:return{...i,toasts:[t.toast,...i.toasts].slice(0,n)};case 1:return{...i,toasts:i.toasts.map(d=>d.id===t.toast.id?{...d,...t.toast}:d)};case 2:let{toast:s}=t;return EE(i,{type:i.toasts.find(d=>d.id===s.id)?1:0,toast:s});case 3:let{toastId:o}=t;return{...i,toasts:i.toasts.map(d=>d.id===o||o===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return t.toastId===void 0?{...i,toasts:[]}:{...i,toasts:i.toasts.filter(d=>d.id!==t.toastId)};case 5:return{...i,pausedAt:t.time};case 6:let u=t.time-(i.pausedAt||0);return{...i,pausedAt:void 0,toasts:i.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+u}))}}},zf=[],bE={toasts:[],pausedAt:void 0,settings:{toastLimit:mw}},gs={},TE=(i,t=yp)=>{gs[t]=EE(gs[t]||bE,i),zf.forEach(([n,s])=>{n===t&&s(gs[t])})},SE=i=>Object.keys(gs).forEach(t=>TE(i,t)),pw=i=>Object.keys(gs).find(t=>gs[t].toasts.some(n=>n.id===i)),_h=(i=yp)=>t=>{TE(t,i)},gw={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},yw=(i={},t=yp)=>{let[n,s]=jt.useState(gs[t]||bE),o=jt.useRef(gs[t]);jt.useEffect(()=>(o.current!==gs[t]&&s(gs[t]),zf.push([t,s]),()=>{let d=zf.findIndex(([y])=>y===t);d>-1&&zf.splice(d,1)}),[t]);let u=n.toasts.map(d=>{var y,_,b;return{...i,...i[d.type],...d,removeDelay:d.removeDelay||((y=i[d.type])==null?void 0:y.removeDelay)||i?.removeDelay,duration:d.duration||((_=i[d.type])==null?void 0:_.duration)||i?.duration||gw[d.type],style:{...i.style,...(b=i[d.type])==null?void 0:b.style,...d.style}}});return{...n,toasts:u}},vw=(i,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:i,pauseDuration:0,...n,id:n?.id||dw()}),pc=i=>(t,n)=>{let s=vw(t,i,n);return _h(s.toasterId||pw(s.id))({type:2,toast:s}),s.id},Un=(i,t)=>pc("blank")(i,t);Un.error=pc("error");Un.success=pc("success");Un.loading=pc("loading");Un.custom=pc("custom");Un.dismiss=(i,t)=>{let n={type:3,toastId:i};t?_h(t)(n):SE(n)};Un.dismissAll=i=>Un.dismiss(void 0,i);Un.remove=(i,t)=>{let n={type:4,toastId:i};t?_h(t)(n):SE(n)};Un.removeAll=i=>Un.remove(void 0,i);Un.promise=(i,t,n)=>{let s=Un.loading(t.loading,{...n,...n?.loading});return typeof i=="function"&&(i=i()),i.then(o=>{let u=t.success?Jf(t.success,o):void 0;return u?Un.success(u,{id:s,...n,...n?.success}):Un.dismiss(s),o}).catch(o=>{let u=t.error?Jf(t.error,o):void 0;u?Un.error(u,{id:s,...n,...n?.error}):Un.dismiss(s)}),i};var _w=1e3,Ew=(i,t="default")=>{let{toasts:n,pausedAt:s}=yw(i,t),o=jt.useRef(new Map).current,u=jt.useCallback((O,k=_w)=>{if(o.has(O))return;let J=setTimeout(()=>{o.delete(O),d({type:4,toastId:O})},k);o.set(O,J)},[]);jt.useEffect(()=>{if(s)return;let O=Date.now(),k=n.map(J=>{if(J.duration===1/0)return;let dt=(J.duration||0)+J.pauseDuration-(O-J.createdAt);if(dt<0){J.visible&&Un.dismiss(J.id);return}return setTimeout(()=>Un.dismiss(J.id,t),dt)});return()=>{k.forEach(J=>J&&clearTimeout(J))}},[n,s,t]);let d=jt.useCallback(_h(t),[t]),y=jt.useCallback(()=>{d({type:5,time:Date.now()})},[d]),_=jt.useCallback((O,k)=>{d({type:1,toast:{id:O,height:k}})},[d]),b=jt.useCallback(()=>{s&&d({type:6,time:Date.now()})},[s,d]),R=jt.useCallback((O,k)=>{let{reverseOrder:J=!1,gutter:dt=8,defaultPosition:yt}=k||{},vt=n.filter(Ut=>(Ut.position||yt)===(O.position||yt)&&Ut.height),qt=vt.findIndex(Ut=>Ut.id===O.id),Kt=vt.filter((Ut,ue)=>ue<qt&&Ut.visible).length;return vt.filter(Ut=>Ut.visible).slice(...J?[Kt+1]:[0,Kt]).reduce((Ut,ue)=>Ut+(ue.height||0)+dt,0)},[n]);return jt.useEffect(()=>{n.forEach(O=>{if(O.dismissed)u(O.id,O.removeDelay);else{let k=o.get(O.id);k&&(clearTimeout(k),o.delete(O.id))}})},[n,u]),{toasts:n,handlers:{updateHeight:_,startPause:y,endPause:b,calculateOffset:R}}},bw=sa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Tw=sa`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Sw=sa`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Aw=go("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${bw} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Tw} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${i=>i.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Sw} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ww=sa`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Cw=go("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${i=>i.secondary||"#e0e0e0"};
  border-right-color: ${i=>i.primary||"#616161"};
  animation: ${ww} 1s linear infinite;
`,Rw=sa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Iw=sa`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ow=go("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Rw} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Iw} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${i=>i.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Dw=go("div")`
  position: absolute;
`,Nw=go("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,xw=sa`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Mw=go("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${xw} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Vw=({toast:i})=>{let{icon:t,type:n,iconTheme:s}=i;return t!==void 0?typeof t=="string"?jt.createElement(Mw,null,t):t:n==="blank"?null:jt.createElement(Nw,null,jt.createElement(Cw,{...s}),n!=="loading"&&jt.createElement(Dw,null,n==="error"?jt.createElement(Aw,{...s}):jt.createElement(Ow,{...s})))},kw=i=>`
0% {transform: translate3d(0,${i*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Pw=i=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${i*-150}%,-1px) scale(.6); opacity:0;}
`,Uw="0%{opacity:0;} 100%{opacity:1;}",Lw="0%{opacity:1;} 100%{opacity:0;}",zw=go("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,jw=go("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Bw=(i,t)=>{let n=i.includes("top")?1:-1,[s,o]=_E()?[Uw,Lw]:[kw(n),Pw(n)];return{animation:t?`${sa(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${sa(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},qw=jt.memo(({toast:i,position:t,style:n,children:s})=>{let o=i.height?Bw(i.position||t||"top-center",i.visible):{opacity:0},u=jt.createElement(Vw,{toast:i}),d=jt.createElement(jw,{...i.ariaProps},Jf(i.message,i));return jt.createElement(zw,{className:i.className,style:{...o,...n,...i.style}},typeof s=="function"?s({icon:u,message:d}):jt.createElement(jt.Fragment,null,u,d))});fw(jt.createElement);var Hw=({id:i,className:t,style:n,onHeightUpdate:s,children:o})=>{let u=jt.useCallback(d=>{if(d){let y=()=>{let _=d.getBoundingClientRect().height;s(i,_)};y(),new MutationObserver(y).observe(d,{subtree:!0,childList:!0,characterData:!0})}},[i,s]);return jt.createElement("div",{ref:u,className:t,style:n},o)},Fw=(i,t)=>{let n=i.includes("top"),s=n?{top:0}:{bottom:0},o=i.includes("center")?{justifyContent:"center"}:i.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:_E()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...s,...o}},Kw=vh`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Of=16,Gw=({reverseOrder:i,position:t="top-center",toastOptions:n,gutter:s,children:o,toasterId:u,containerStyle:d,containerClassName:y})=>{let{toasts:_,handlers:b}=Ew(n,u);return jt.createElement("div",{"data-rht-toaster":u||"",style:{position:"fixed",zIndex:9999,top:Of,left:Of,right:Of,bottom:Of,pointerEvents:"none",...d},className:y,onMouseEnter:b.startPause,onMouseLeave:b.endPause},_.map(R=>{let O=R.position||t,k=b.calculateOffset(R,{reverseOrder:i,gutter:s,defaultPosition:t}),J=Fw(O,k);return jt.createElement(Hw,{id:R.id,key:R.id,onHeightUpdate:b.updateHeight,className:R.visible?Kw:"",style:J},R.type==="custom"?Jf(R.message,R):o?o(R):jt.createElement(qw,{toast:R,position:O}))}))},je=Un;function Yw({isOpen:i,onClose:t,onSuccess:n}){const[s,o]=jt.useState(""),[u,d]=jt.useState(!1),[y,_]=jt.useState("auto"),[b,R]=jt.useState(null);if(!i)return null;const O=async()=>{if(!s.trim())return;if(!Fo.hasKey()){je.error("Please set your Gemini API Key in Settings first.");return}d(!0),R(null);const J=je.loading("AI is analyzing transcript...");try{const dt=await Fo.analyzeTranscript(s,y);if(!Array.isArray(dt)||dt.length===0)throw new Error("AI found no vocabulary or returned invalid format.");je.loading(`Found ${dt.length} words. Saving...`,{id:J});const yt=JSON.stringify(dt),vt=await pp.importCards(yt);je.success(`Success!
Added: ${vt.addedCount}
Skipped (Duplicate): ${vt.skippedCount}`,{id:J,duration:4e3}),o(""),n(),t()}catch(dt){console.error(dt);const yt=dt.message||"Unknown error";R(yt),je.error(`Failed: ${yt}`,{id:J})}finally{d(!1)}},k=[{label:"AUTO",value:"auto"},{label:"5",value:5},{label:"10",value:10},{label:"20",value:20}];return Et.jsx("div",{style:Mi.overlay,children:Et.jsxs("div",{style:Mi.modal,children:[Et.jsx("h2",{style:{marginTop:0,color:"#fff",marginBottom:"1.5rem"},children:"Import from Podcast"}),Et.jsxs("div",{style:Mi.settingRow,children:[Et.jsx("span",{style:Mi.settingLabel,children:"Max Words:"}),Et.jsx("div",{style:Mi.optionGroup,children:k.map(J=>Et.jsx("button",{onClick:()=>_(J.value),style:{...Mi.optionBtn,...y===J.value?Mi.optionBtnActive:{}},children:J.label},J.value))})]}),Et.jsx("p",{style:{color:"#aaa",fontSize:"0.9rem",marginBottom:"0.5rem"},children:"Paste the full podcast transcript text below. Gemini will extract key vocabulary for you."}),Et.jsx("textarea",{value:s,onChange:J=>o(J.target.value),placeholder:"Paste transcript text here...",style:Mi.textarea,disabled:u}),b&&Et.jsxs("div",{style:Mi.error,children:[" ",b]}),Et.jsxs("div",{style:Mi.actions,children:[Et.jsx("button",{onClick:t,disabled:u,style:{...Mi.btn,backgroundColor:"#555"},children:"Cancel"}),Et.jsx("button",{onClick:O,disabled:u||!s.trim(),style:{...Mi.btn,backgroundColor:u?"#777":"#6366f1",opacity:!s.trim()||u?.6:1},children:u?"Analyzing...":"Analyze & Import"})]})]})})}const Mi={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,backdropFilter:"blur(3px)"},modal:{backgroundColor:"#1e2024",padding:"2rem",borderRadius:"12px",width:"90%",maxWidth:"600px",boxShadow:"0 10px 25px rgba(0,0,0,0.5)",border:"1px solid #333"},settingRow:{display:"flex",alignItems:"center",marginBottom:"1.5rem",gap:"1rem",flexWrap:"wrap"},settingLabel:{color:"#ccc",fontSize:"0.9rem",fontWeight:"500"},optionGroup:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},optionBtn:{padding:"0.4rem 1rem",backgroundColor:"#2c2e33",border:"1px solid #444",borderRadius:"6px",color:"#aaa",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease"},optionBtnActive:{backgroundColor:"#6366f1",color:"#fff",borderColor:"#6366f1",boxShadow:"0 0 8px rgba(99, 102, 241, 0.4)"},textarea:{width:"100%",height:"250px",backgroundColor:"#131416",color:"#e0e0e0",border:"1px solid #444",borderRadius:"6px",padding:"0.8rem",fontFamily:"inherit",fontSize:"0.95rem",resize:"vertical",lineHeight:"1.5"},error:{color:"#ff6b6b",marginTop:"1rem",fontSize:"0.9rem",padding:"0.5rem",backgroundColor:"rgba(255, 107, 107, 0.1)",borderRadius:"4px"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"1.5rem"},btn:{padding:"0.6rem 1.5rem",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"1rem"}};function Qw({isOpen:i,onClose:t}){const[n,s]=jt.useState(""),[o,u]=jt.useState(!1),[d,y]=jt.useState(!1),[_,b]=jt.useState(0),R=jt.useRef(null);jt.useEffect(()=>{i&&(s(Fo.getApiKey()||""),y(!1),b(0))},[i]),jt.useEffect(()=>(d&&_>0?R.current=setTimeout(()=>{b(J=>J-1)},1e3):d&&_===0&&y(!1),()=>clearTimeout(R.current)),[d,_]);const O=()=>{n.trim()?(Fo.setApiKey(n.trim()),je.success("API Key  (Session Only)")):(Fo.removeApiKey(),je("API Key ")),t()},k=async()=>{if(!d){y(!0),b(3);return}try{await pp.clearAllCards(),je.success(""),setTimeout(()=>window.location.reload(),1e3)}catch(J){console.error(J),je.error(""),y(!1)}};return i?Et.jsx("div",{style:Xi.overlay,children:Et.jsxs("div",{style:Xi.modal,children:[Et.jsx("h2",{style:{marginTop:0,color:"#fff"},children:"Settings"}),Et.jsxs("div",{style:{marginBottom:"2rem"},children:[Et.jsx("label",{style:Xi.label,children:"Gemini API Key (BYOK)"}),Et.jsxs("p",{style:Xi.hint,children:["Key  ",Et.jsx("strong",{children:"Session Storage"}),"",Et.jsx("br",{}),Et.jsx("span",{style:{color:"#ff9800"},children:" Key "})]}),Et.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[Et.jsx("input",{type:o?"text":"password",value:n,onChange:J=>s(J.target.value),placeholder:"AIzaSy...",style:Xi.input}),Et.jsx("button",{onClick:()=>u(!o),style:Xi.iconBtn,title:"Toggle Visibility",children:o?"":""})]})]}),Et.jsxs("div",{style:{borderTop:"1px solid #444",paddingTop:"1rem",marginBottom:"1.5rem"},children:[Et.jsx("label",{style:{...Xi.label,color:"#ff6b6b"},children:"Danger Zone"}),Et.jsx("p",{style:Xi.hint,children:" IndexedDB "}),Et.jsx("button",{onClick:k,style:{width:"100%",padding:"0.6rem",backgroundColor:d?"#d32f2f":"#3a1c1c",color:d?"#ffeb3b":"#ff6b6b",border:d?"1px solid #ffeb3b":"1px solid #ff6b6b",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",transition:"all 0.2s ease"},children:d?`Are you sure? (${_})`:"Clear All Local Data"})]}),Et.jsxs("div",{style:Xi.actions,children:[Et.jsx("button",{onClick:t,style:{...Xi.btn,backgroundColor:"#555"},children:"Close"}),Et.jsx("button",{onClick:O,style:{...Xi.btn,backgroundColor:"#4caf50"},children:"Save Key"})]})]})}):null}const Xi={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},modal:{backgroundColor:"#2c2e33",padding:"2rem",borderRadius:"8px",width:"90%",maxWidth:"400px",boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},label:{display:"block",color:"#e0e0e0",fontWeight:"bold",marginBottom:"0.5rem"},hint:{color:"#aaa",fontSize:"0.85rem",marginBottom:"0.5rem",lineHeight:"1.4"},input:{flex:1,padding:"0.6rem",borderRadius:"4px",border:"1px solid #444",backgroundColor:"#1a1b1e",color:"#fff",fontFamily:"monospace"},iconBtn:{padding:"0 0.8rem",backgroundColor:"#444",border:"none",borderRadius:"4px",cursor:"pointer",color:"#fff"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem"},btn:{padding:"0.5rem 1.2rem",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"}};function Xw({isOpen:i,onClose:t,onSuccess:n}){const[s,o]=jt.useState(""),[u,d]=jt.useState(""),[y,_]=jt.useState(""),[b,R]=jt.useState(""),[O,k]=jt.useState(!1);if(!i)return null;const J=async()=>{if(!s.trim()){je.error("Please enter a word first");return}if(!Fo.hasKey()){je.error("Please set your API Key in Settings first");return}k(!0);const yt=je.loading(`Asking Gemini about "${s}"...`);try{const vt=await Fo.generateCardDetails(s);d(vt.ipa||""),_(vt.definition||""),R(vt.context||""),je.success("Auto-filled!",{id:yt})}catch(vt){console.error(vt),je.error(vt.message,{id:yt})}finally{k(!1)}},dt=async()=>{if(!s||!y){je.error("Word and Definition are required");return}try{await pp.addCard({word:s,ipa:u,definition:y,context:b}),je.success(`Added "${s}"`),o(""),d(""),_(""),R(""),n(),t()}catch(yt){console.error(yt),je.error(yt.message)}};return Et.jsx("div",{style:Gn.overlay,children:Et.jsxs("div",{style:Gn.modal,children:[Et.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[Et.jsx("h2",{style:{margin:0,color:"#fff"},children:"Add New Card"}),Et.jsx("button",{onClick:J,disabled:O,style:Gn.magicBtn,title:"AI Auto-fill",children:O?"...":" AI Auto-fill"})]}),Et.jsxs("div",{style:Gn.field,children:[Et.jsx("label",{style:Gn.label,children:"Word"}),Et.jsx("input",{style:Gn.input,value:s,onChange:yt=>o(yt.target.value),placeholder:"e.g. Serendipity",autoFocus:!0})]}),Et.jsxs("div",{style:Gn.field,children:[Et.jsx("label",{style:Gn.label,children:"IPA (Optional)"}),Et.jsx("input",{style:Gn.input,value:u,onChange:yt=>d(yt.target.value),placeholder:"/ser.ndp..ti/"})]}),Et.jsxs("div",{style:Gn.field,children:[Et.jsx("label",{style:Gn.label,children:"Definition"}),Et.jsx("textarea",{style:{...Gn.input,height:"60px",resize:"vertical"},value:y,onChange:yt=>_(yt.target.value)})]}),Et.jsxs("div",{style:Gn.field,children:[Et.jsx("label",{style:Gn.label,children:"Context / Example"}),Et.jsx("textarea",{style:{...Gn.input,height:"60px",resize:"vertical"},value:b,onChange:yt=>R(yt.target.value)})]}),Et.jsxs("div",{style:Gn.actions,children:[Et.jsx("button",{onClick:t,style:{...Gn.btn,backgroundColor:"#555"},children:"Cancel"}),Et.jsx("button",{onClick:dt,style:{...Gn.btn,backgroundColor:"#2196f3"},children:"Save Card"})]})]})})}const Gn={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},modal:{backgroundColor:"#2c2e33",padding:"2rem",borderRadius:"12px",width:"90%",maxWidth:"500px",boxShadow:"0 10px 25px rgba(0,0,0,0.5)"},field:{marginBottom:"1rem"},label:{display:"block",color:"#aaa",fontSize:"0.85rem",marginBottom:"0.3rem"},input:{width:"100%",padding:"0.6rem",borderRadius:"4px",border:"1px solid #444",backgroundColor:"#1a1b1e",color:"#fff",fontSize:"1rem",boxSizing:"border-box"},magicBtn:{padding:"0.4rem 0.8rem",backgroundColor:"transparent",border:"1px solid #e91e63",borderRadius:"20px",color:"#e91e63",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s",fontWeight:"bold"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"2rem"},btn:{padding:"0.6rem 1.2rem",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"}},$w=()=>{};var B_={};const AE=function(i){const t=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},Jw=function(i){const t=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];t[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],d=i[n++],y=i[n++],_=((o&7)<<18|(u&63)<<12|(d&63)<<6|y&63)-65536;t[s++]=String.fromCharCode(55296+(_>>10)),t[s++]=String.fromCharCode(56320+(_&1023))}else{const u=i[n++],d=i[n++];t[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return t.join("")},wE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],d=o+1<i.length,y=d?i[o+1]:0,_=o+2<i.length,b=_?i[o+2]:0,R=u>>2,O=(u&3)<<4|y>>4;let k=(y&15)<<2|b>>6,J=b&63;_||(J=64,d||(k=64)),s.push(n[R],n[O],n[k],n[J])}return s.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(AE(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):Jw(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],y=o<i.length?n[i.charAt(o)]:0;++o;const b=o<i.length?n[i.charAt(o)]:64;++o;const O=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||y==null||b==null||O==null)throw new Zw;const k=u<<2|y>>4;if(s.push(k),b!==64){const J=y<<4&240|b>>2;if(s.push(J),O!==64){const dt=b<<6&192|O;s.push(dt)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Zw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ww=function(i){const t=AE(i);return wE.encodeByteArray(t,!0)},Zf=function(i){return Ww(i).replace(/\./g,"")},CE=function(i){try{return wE.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function t1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const e1=()=>t1().__FIREBASE_DEFAULTS__,n1=()=>{if(typeof process>"u"||typeof B_>"u")return;const i=B_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},r1=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&CE(i[1]);return t&&JSON.parse(t)},Eh=()=>{try{return $w()||e1()||n1()||r1()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},RE=i=>Eh()?.emulatorHosts?.[i],i1=i=>{const t=RE(i);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},IE=()=>Eh()?.config,OE=i=>Eh()?.[`_${i}`];class s1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}function Zl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function DE(i){return(await fetch(i,{credentials:"include"})).ok}function a1(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Zf(JSON.stringify(n)),Zf(JSON.stringify(d)),""].join(".")}const Xu={};function o1(){const i={prod:[],emulator:[]};for(const t of Object.keys(Xu))Xu[t]?i.emulator.push(t):i.prod.push(t);return i}function l1(i){let t=document.getElementById(i),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",i),n=!0),{created:n,element:t}}let q_=!1;function NE(i,t){if(typeof window>"u"||typeof document>"u"||!Zl(window.location.host)||Xu[i]===t||Xu[i]||q_)return;Xu[i]=t;function n(k){return`__firebase__banner__${k}`}const s="__firebase__banner",u=o1().prod.length>0;function d(){const k=document.getElementById(s);k&&k.remove()}function y(k){k.style.display="flex",k.style.background="#7faaf0",k.style.position="fixed",k.style.bottom="5px",k.style.left="5px",k.style.padding=".5em",k.style.borderRadius="5px",k.style.alignItems="center"}function _(k,J){k.setAttribute("width","24"),k.setAttribute("id",J),k.setAttribute("height","24"),k.setAttribute("viewBox","0 0 24 24"),k.setAttribute("fill","none"),k.style.marginLeft="-6px"}function b(){const k=document.createElement("span");return k.style.cursor="pointer",k.style.marginLeft="16px",k.style.fontSize="24px",k.innerHTML=" &times;",k.onclick=()=>{q_=!0,d()},k}function R(k,J){k.setAttribute("id",J),k.innerText="Learn more",k.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",k.setAttribute("target","__blank"),k.style.paddingLeft="5px",k.style.textDecoration="underline"}function O(){const k=l1(s),J=n("text"),dt=document.getElementById(J)||document.createElement("span"),yt=n("learnmore"),vt=document.getElementById(yt)||document.createElement("a"),qt=n("preprendIcon"),Kt=document.getElementById(qt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(k.created){const Ut=k.element;y(Ut),R(vt,yt);const ue=b();_(Kt,qt),Ut.append(Kt,dt,vt,ue),document.body.appendChild(Ut)}u?(dt.innerText="Preview backend disconnected.",Kt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Kt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,dt.innerText="Preview backend running in this workspace."),dt.setAttribute("id",J)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",O):O()}function pr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function u1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pr())}function c1(){const i=Eh()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function f1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function h1(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function d1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function m1(){const i=pr();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function p1(){return!c1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function g1(){try{return typeof indexedDB=="object"}catch{return!1}}function y1(){return new Promise((i,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(n){t(n)}})}const v1="FirebaseError";class ca extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=v1,Object.setPrototypeOf(this,ca.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gc.prototype.create)}}class gc{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},o=`${this.service}/${t}`,u=this.errors[t],d=u?_1(u,s):"Error",y=`${this.serviceName}: ${d} (${o}).`;return new ca(o,y,s)}}function _1(i,t){return i.replace(E1,(n,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const E1=/\{\$([^}]+)}/g;function b1(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function Qo(i,t){if(i===t)return!0;const n=Object.keys(i),s=Object.keys(t);for(const o of n){if(!s.includes(o))return!1;const u=i[o],d=t[o];if(H_(u)&&H_(d)){if(!Qo(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function H_(i){return i!==null&&typeof i=="object"}function yc(i){const t=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function T1(i,t){const n=new S1(i,t);return n.subscribe.bind(n)}class S1{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let o;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");A1(t,["next","error","complete"])?o=t:o={next:t,error:n,complete:s},o.next===void 0&&(o.next=Im),o.error===void 0&&(o.error=Im),o.complete===void 0&&(o.complete=Im);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function A1(i,t){if(typeof i!="object"||i===null)return!1;for(const n of t)if(n in i&&typeof i[n]=="function")return!0;return!1}function Im(){}function Pi(i){return i&&i._delegate?i._delegate:i}class Xo{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Bo="[DEFAULT]";class w1{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new s1;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(R1(t))try{this.getOrInitializeService({instanceIdentifier:Bo})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(t=Bo){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Bo){return this.instances.has(t)}getOptions(t=Bo){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(u);s===y&&d.resolve(o)}return o}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(t),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&t(u,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:C1(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Bo){return this.component?this.component.multipleInstances?t:Bo:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function C1(i){return i===Bo?void 0:i}function R1(i){return i.instantiationMode==="EAGER"}class I1{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new w1(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}var Ee;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ee||(Ee={}));const O1={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},D1=Ee.INFO,N1={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},x1=(i,t,...n)=>{if(t<i.logLevel)return;const s=new Date().toISOString(),o=N1[t];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class vp{constructor(t){this.name=t,this._logLevel=D1,this._logHandler=x1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ee))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?O1[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...t),this._logHandler(this,Ee.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...t),this._logHandler(this,Ee.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...t),this._logHandler(this,Ee.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...t),this._logHandler(this,Ee.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...t),this._logHandler(this,Ee.ERROR,...t)}}const M1=(i,t)=>t.some(n=>i instanceof n);let F_,K_;function V1(){return F_||(F_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function k1(){return K_||(K_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xE=new WeakMap,Hm=new WeakMap,ME=new WeakMap,Om=new WeakMap,_p=new WeakMap;function P1(i){const t=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{n(io(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",d)});return t.then(n=>{n instanceof IDBCursor&&xE.set(n,i)}).catch(()=>{}),_p.set(t,i),t}function U1(i){if(Hm.has(i))return;const t=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});Hm.set(i,t)}let Fm={get(i,t,n){if(i instanceof IDBTransaction){if(t==="done")return Hm.get(i);if(t==="objectStoreNames")return i.objectStoreNames||ME.get(i);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return io(i[t])},set(i,t,n){return i[t]=n,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function L1(i){Fm=i(Fm)}function z1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=i.call(Dm(this),t,...n);return ME.set(s,t.sort?t.sort():[t]),io(s)}:k1().includes(i)?function(...t){return i.apply(Dm(this),t),io(xE.get(this))}:function(...t){return io(i.apply(Dm(this),t))}}function j1(i){return typeof i=="function"?z1(i):(i instanceof IDBTransaction&&U1(i),M1(i,V1())?new Proxy(i,Fm):i)}function io(i){if(i instanceof IDBRequest)return P1(i);if(Om.has(i))return Om.get(i);const t=j1(i);return t!==i&&(Om.set(i,t),_p.set(t,i)),t}const Dm=i=>_p.get(i);function B1(i,t,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(i,t),y=io(d);return s&&d.addEventListener("upgradeneeded",_=>{s(io(d.result),_.oldVersion,_.newVersion,io(d.transaction),_)}),n&&d.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),y.then(_=>{u&&_.addEventListener("close",()=>u()),o&&_.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),y}const q1=["get","getKey","getAll","getAllKeys","count"],H1=["put","add","delete","clear"],Nm=new Map;function G_(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(Nm.get(t))return Nm.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,o=H1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||q1.includes(n)))return;const u=async function(d,...y){const _=this.transaction(d,o?"readwrite":"readonly");let b=_.store;return s&&(b=b.index(y.shift())),(await Promise.all([b[n](...y),o&&_.done]))[0]};return Nm.set(t,u),u}L1(i=>({...i,get:(t,n,s)=>G_(t,n)||i.get(t,n,s),has:(t,n)=>!!G_(t,n)||i.has(t,n)}));class F1{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(K1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function K1(i){return i.getComponent()?.type==="VERSION"}const Km="@firebase/app",Y_="0.14.6";const aa=new vp("@firebase/app"),G1="@firebase/app-compat",Y1="@firebase/analytics-compat",Q1="@firebase/analytics",X1="@firebase/app-check-compat",$1="@firebase/app-check",J1="@firebase/auth",Z1="@firebase/auth-compat",W1="@firebase/database",tC="@firebase/data-connect",eC="@firebase/database-compat",nC="@firebase/functions",rC="@firebase/functions-compat",iC="@firebase/installations",sC="@firebase/installations-compat",aC="@firebase/messaging",oC="@firebase/messaging-compat",lC="@firebase/performance",uC="@firebase/performance-compat",cC="@firebase/remote-config",fC="@firebase/remote-config-compat",hC="@firebase/storage",dC="@firebase/storage-compat",mC="@firebase/firestore",pC="@firebase/ai",gC="@firebase/firestore-compat",yC="firebase",vC="12.6.0";const Gm="[DEFAULT]",_C={[Km]:"fire-core",[G1]:"fire-core-compat",[Q1]:"fire-analytics",[Y1]:"fire-analytics-compat",[$1]:"fire-app-check",[X1]:"fire-app-check-compat",[J1]:"fire-auth",[Z1]:"fire-auth-compat",[W1]:"fire-rtdb",[tC]:"fire-data-connect",[eC]:"fire-rtdb-compat",[nC]:"fire-fn",[rC]:"fire-fn-compat",[iC]:"fire-iid",[sC]:"fire-iid-compat",[aC]:"fire-fcm",[oC]:"fire-fcm-compat",[lC]:"fire-perf",[uC]:"fire-perf-compat",[cC]:"fire-rc",[fC]:"fire-rc-compat",[hC]:"fire-gcs",[dC]:"fire-gcs-compat",[mC]:"fire-fst",[gC]:"fire-fst-compat",[pC]:"fire-vertex","fire-js":"fire-js",[yC]:"fire-js-all"};const Wf=new Map,EC=new Map,Ym=new Map;function Q_(i,t){try{i.container.addComponent(t)}catch(n){aa.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,n)}}function Fl(i){const t=i.name;if(Ym.has(t))return aa.debug(`There were multiple attempts to register component ${t}.`),!1;Ym.set(t,i);for(const n of Wf.values())Q_(n,i);for(const n of EC.values())Q_(n,i);return!0}function Ep(i,t){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(t)}function $i(i){return i==null?!1:i.settings!==void 0}const bC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},so=new gc("app","Firebase",bC);class TC{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Xo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw so.create("app-deleted",{appName:this._name})}}const Wl=vC;function VE(i,t={}){let n=i;typeof t!="object"&&(t={name:t});const s={name:Gm,automaticDataCollectionEnabled:!0,...t},o=s.name;if(typeof o!="string"||!o)throw so.create("bad-app-name",{appName:String(o)});if(n||(n=IE()),!n)throw so.create("no-options");const u=Wf.get(o);if(u){if(Qo(n,u.options)&&Qo(s,u.config))return u;throw so.create("duplicate-app",{appName:o})}const d=new I1(o);for(const _ of Ym.values())d.addComponent(_);const y=new TC(n,s,d);return Wf.set(o,y),y}function kE(i=Gm){const t=Wf.get(i);if(!t&&i===Gm&&IE())return VE();if(!t)throw so.create("no-app",{appName:i});return t}function ao(i,t,n){let s=_C[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const d=[`Unable to register library "${s}" with version "${t}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),aa.warn(d.join(" "));return}Fl(new Xo(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const SC="firebase-heartbeat-database",AC=1,ic="firebase-heartbeat-store";let xm=null;function PE(){return xm||(xm=B1(SC,AC,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(ic)}catch(n){console.warn(n)}}}}).catch(i=>{throw so.create("idb-open",{originalErrorMessage:i.message})})),xm}async function wC(i){try{const n=(await PE()).transaction(ic),s=await n.objectStore(ic).get(UE(i));return await n.done,s}catch(t){if(t instanceof ca)aa.warn(t.message);else{const n=so.create("idb-get",{originalErrorMessage:t?.message});aa.warn(n.message)}}}async function X_(i,t){try{const s=(await PE()).transaction(ic,"readwrite");await s.objectStore(ic).put(t,UE(i)),await s.done}catch(n){if(n instanceof ca)aa.warn(n.message);else{const s=so.create("idb-set",{originalErrorMessage:n?.message});aa.warn(s.message)}}}function UE(i){return`${i.name}!${i.options.appId}`}const CC=1024,RC=30;class IC{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>RC){const o=NC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){aa.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=$_(),{heartbeatsToSend:n,unsentEntries:s}=OC(this._heartbeatsCache.heartbeats),o=Zf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return aa.warn(t),""}}}function $_(){return new Date().toISOString().substring(0,10)}function OC(i,t=CC){const n=[];let s=i.slice();for(const o of i){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),J_(n)>t){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),J_(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class DC{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return g1()?y1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wC(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return X_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return X_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function J_(i){return Zf(JSON.stringify({version:2,heartbeats:i})).length}function NC(i){if(i.length===0)return-1;let t=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,t=s);return t}function xC(i){Fl(new Xo("platform-logger",t=>new F1(t),"PRIVATE")),Fl(new Xo("heartbeat",t=>new IC(t),"PRIVATE")),ao(Km,Y_,i),ao(Km,Y_,"esm2020"),ao("fire-js","")}xC("");var MC="firebase",VC="12.6.0";ao(MC,VC,"app");function LE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kC=LE,zE=new gc("auth","Firebase",LE());const th=new vp("@firebase/auth");function PC(i,...t){th.logLevel<=Ee.WARN&&th.warn(`Auth (${Wl}): ${i}`,...t)}function jf(i,...t){th.logLevel<=Ee.ERROR&&th.error(`Auth (${Wl}): ${i}`,...t)}function Ts(i,...t){throw Tp(i,...t)}function Wi(i,...t){return Tp(i,...t)}function bp(i,t,n){const s={...kC(),[t]:n};return new gc("auth","Firebase",s).create(t,{appName:i.name})}function Ko(i){return bp(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function UC(i,t,n){const s=n;if(!(t instanceof s))throw s.name!==t.constructor.name&&Ts(i,"argument-error"),bp(i,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Tp(i,...t){if(typeof i!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return zE.create(i,...t)}function te(i,t,...n){if(!i)throw Tp(t,...n)}function na(i){const t="INTERNAL ASSERTION FAILED: "+i;throw jf(t),new Error(t)}function oa(i,t){i||na(t)}function Qm(){return typeof self<"u"&&self.location?.href||""}function LC(){return Z_()==="http:"||Z_()==="https:"}function Z_(){return typeof self<"u"&&self.location?.protocol||null}function zC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LC()||h1()||"connection"in navigator)?navigator.onLine:!0}function jC(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class vc{constructor(t,n){this.shortDelay=t,this.longDelay=n,oa(n>t,"Short delay should be less than long delay!"),this.isMobile=u1()||d1()}get(){return zC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Sp(i,t){oa(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class jE{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;na("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;na("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;na("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const BC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const qC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HC=new vc(3e4,6e4);function Ap(i,t){return i.tenantId&&!t.tenantId?{...t,tenantId:i.tenantId}:t}async function tu(i,t,n,s,o={}){return BE(i,o,async()=>{let u={},d={};s&&(t==="GET"?d=s:u={body:JSON.stringify(s)});const y=yc({key:i.config.apiKey,...d}).slice(1),_=await i._getAdditionalHeaders();_["Content-Type"]="application/json",i.languageCode&&(_["X-Firebase-Locale"]=i.languageCode);const b={method:t,headers:_,...u};return f1()||(b.referrerPolicy="no-referrer"),i.emulatorConfig&&Zl(i.emulatorConfig.host)&&(b.credentials="include"),jE.fetch()(await qE(i,i.config.apiHost,n,y),b)})}async function BE(i,t,n){i._canInitEmulator=!1;const s={...BC,...t};try{const o=new KC(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Df(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const y=u.ok?d.errorMessage:d.error.message,[_,b]=y.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Df(i,"credential-already-in-use",d);if(_==="EMAIL_EXISTS")throw Df(i,"email-already-in-use",d);if(_==="USER_DISABLED")throw Df(i,"user-disabled",d);const R=s[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw bp(i,R,b);Ts(i,R)}}catch(o){if(o instanceof ca)throw o;Ts(i,"network-request-failed",{message:String(o)})}}async function FC(i,t,n,s,o={}){const u=await tu(i,t,n,s,o);return"mfaPendingCredential"in u&&Ts(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function qE(i,t,n,s){const o=`${t}${n}?${s}`,u=i,d=u.config.emulator?Sp(i.config,o):`${i.config.apiScheme}://${o}`;return qC.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}class KC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Wi(this.auth,"network-request-failed")),HC.get())})}}function Df(i,t,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Wi(i,t,s);return o.customData._tokenResponse=n,o}async function GC(i,t){return tu(i,"POST","/v1/accounts:delete",t)}async function eh(i,t){return tu(i,"POST","/v1/accounts:lookup",t)}function $u(i){if(i)try{const t=new Date(Number(i));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function YC(i,t=!1){const n=Pi(i),s=await n.getIdToken(t),o=wp(s);te(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:s,authTime:$u(Mm(o.auth_time)),issuedAtTime:$u(Mm(o.iat)),expirationTime:$u(Mm(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Mm(i){return Number(i)*1e3}function wp(i){const[t,n,s]=i.split(".");if(t===void 0||n===void 0||s===void 0)return jf("JWT malformed, contained fewer than 3 sections"),null;try{const o=CE(n);return o?JSON.parse(o):(jf("Failed to decode base64 JWT payload"),null)}catch(o){return jf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function W_(i){const t=wp(i);return te(t,"internal-error"),te(typeof t.exp<"u","internal-error"),te(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function sc(i,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof ca&&QC(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function QC({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class XC{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Xm{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$u(this.lastLoginAt),this.creationTime=$u(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function nh(i){const t=i.auth,n=await i.getIdToken(),s=await sc(i,eh(t,{idToken:n}));te(s?.users.length,t,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?HE(o.providerUserInfo):[],d=JC(i.providerData,u),y=i.isAnonymous,_=!(i.email&&o.passwordHash)&&!d?.length,b=y?_:!1,R={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Xm(o.createdAt,o.lastLoginAt),isAnonymous:b};Object.assign(i,R)}async function $C(i){const t=Pi(i);await nh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function JC(i,t){return[...i.filter(s=>!t.some(o=>o.providerId===s.providerId)),...t]}function HE(i){return i.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function ZC(i,t){const n=await BE(i,{},async()=>{const s=yc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,d=await qE(i,o,"/v1/token",`key=${u}`),y=await i._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:y,body:s};return i.emulatorConfig&&Zl(i.emulatorConfig.host)&&(_.credentials="include"),jE.fetch()(d,_)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function WC(i,t){return tu(i,"POST","/v2/accounts:revokeToken",Ap(i,t))}class jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){te(t.idToken,"internal-error"),te(typeof t.idToken<"u","internal-error"),te(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):W_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){te(t.length!==0,"internal-error");const n=W_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await ZC(t,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new jl;return s&&(te(typeof s=="string","internal-error",{appName:t}),d.refreshToken=s),o&&(te(typeof o=="string","internal-error",{appName:t}),d.accessToken=o),u&&(te(typeof u=="number","internal-error",{appName:t}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new jl,this.toJSON())}_performRefresh(){return na("not implemented")}}function $a(i,t){te(typeof i=="string"||typeof i>"u","internal-error",{appName:t})}class Ji{constructor({uid:t,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new XC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Xm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const n=await sc(this,this.stsTokenManager.getToken(this.auth,t));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return YC(this,t)}reload(){return $C(this)}_assign(t){this!==t&&(te(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Ji({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await nh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($i(this.auth.app))return Promise.reject(Ko(this.auth));const t=await this.getIdToken();return await sc(this,GC(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,y=n.tenantId??void 0,_=n._redirectEventId??void 0,b=n.createdAt??void 0,R=n.lastLoginAt??void 0,{uid:O,emailVerified:k,isAnonymous:J,providerData:dt,stsTokenManager:yt}=n;te(O&&yt,t,"internal-error");const vt=jl.fromJSON(this.name,yt);te(typeof O=="string",t,"internal-error"),$a(s,t.name),$a(o,t.name),te(typeof k=="boolean",t,"internal-error"),te(typeof J=="boolean",t,"internal-error"),$a(u,t.name),$a(d,t.name),$a(y,t.name),$a(_,t.name),$a(b,t.name),$a(R,t.name);const qt=new Ji({uid:O,auth:t,email:o,emailVerified:k,displayName:s,isAnonymous:J,photoURL:d,phoneNumber:u,tenantId:y,stsTokenManager:vt,createdAt:b,lastLoginAt:R});return dt&&Array.isArray(dt)&&(qt.providerData=dt.map(Kt=>({...Kt}))),_&&(qt._redirectEventId=_),qt}static async _fromIdTokenResponse(t,n,s=!1){const o=new jl;o.updateFromServerResponse(n);const u=new Ji({uid:n.localId,auth:t,stsTokenManager:o,isAnonymous:s});return await nh(u),u}static async _fromGetAccountInfoResponse(t,n,s){const o=n.users[0];te(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?HE(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,y=new jl;y.updateFromIdToken(s);const _=new Ji({uid:o.localId,auth:t,stsTokenManager:y,isAnonymous:d}),b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Xm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(_,b),_}}const t0=new Map;function ra(i){oa(i instanceof Function,"Expected a class definition");let t=t0.get(i);return t?(oa(t instanceof i,"Instance stored in cache mismatched with class"),t):(t=new i,t0.set(i,t),t)}class FE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}FE.type="NONE";const e0=FE;function Bf(i,t,n){return`firebase:${i}:${t}:${n}`}class Bl{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Bf(this.userKey,o.apiKey,u),this.fullPersistenceKey=Bf("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await eh(this.auth,{idToken:t}).catch(()=>{});return n?Ji._fromGetAccountInfoResponse(this.auth,n,t):null}return Ji._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Bl(ra(e0),t,s);const o=(await Promise.all(n.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let u=o[0]||ra(e0);const d=Bf(s,t.config.apiKey,t.name);let y=null;for(const b of n)try{const R=await b._get(d);if(R){let O;if(typeof R=="string"){const k=await eh(t,{idToken:R}).catch(()=>{});if(!k)break;O=await Ji._fromGetAccountInfoResponse(t,k,R)}else O=Ji._fromJSON(t,R);b!==u&&(y=O),u=b;break}}catch{}const _=o.filter(b=>b._shouldAllowMigration);return!u._shouldAllowMigration||!_.length?new Bl(u,t,s):(u=_[0],y&&await u._set(d,y.toJSON()),await Promise.all(n.map(async b=>{if(b!==u)try{await b._remove(d)}catch{}})),new Bl(u,t,s))}}function n0(i){const t=i.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(QE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(KE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if($E(t))return"Blackberry";if(JE(t))return"Webos";if(GE(t))return"Safari";if((t.includes("chrome/")||YE(t))&&!t.includes("edge/"))return"Chrome";if(XE(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function KE(i=pr()){return/firefox\//i.test(i)}function GE(i=pr()){const t=i.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function YE(i=pr()){return/crios\//i.test(i)}function QE(i=pr()){return/iemobile/i.test(i)}function XE(i=pr()){return/android/i.test(i)}function $E(i=pr()){return/blackberry/i.test(i)}function JE(i=pr()){return/webos/i.test(i)}function Cp(i=pr()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function tR(i=pr()){return Cp(i)&&!!window.navigator?.standalone}function eR(){return m1()&&document.documentMode===10}function ZE(i=pr()){return Cp(i)||XE(i)||JE(i)||$E(i)||/windows phone/i.test(i)||QE(i)}function WE(i,t=[]){let n;switch(i){case"Browser":n=n0(pr());break;case"Worker":n=`${n0(pr())}-${i}`;break;default:n=i}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wl}/${s}`}class nR{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=u=>new Promise((d,y)=>{try{const _=t(u);d(_)}catch(_){y(_)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function rR(i,t={}){return tu(i,"GET","/v2/passwordPolicy",Ap(i,t))}const iR=6;class sR{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??iR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),o&&(n.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<t.length;o++)s=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}class aR{constructor(t,n,s,o){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new r0(this),this.idTokenSubscription=new r0(this),this.beforeStateQueue=new nR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ra(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Bl.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await eh(this,{idToken:t}),s=await Ji._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if($i(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=s?._redirectEventId,y=await this.tryRedirectSignIn(t);(!u||u===d)&&y?.user&&(s=y.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await nh(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=jC()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if($i(this.app))return Promise.reject(Ko(this));const n=t?Pi(t):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&te(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return $i(this.app)?Promise.reject(Ko(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return $i(this.app)?Promise.reject(Ko(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ra(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await rR(this),n=new sR(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new gc("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await WC(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ra(t)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Bl.create(this,[ra(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(y,this,"internal-error"),y.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const _=t.addObserver(n,s,o);return()=>{d=!0,_()}}else{const _=t.addObserver(n);return()=>{d=!0,_()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=WE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if($i(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&PC(`Error while retrieving App Check token: ${t.error}`),t?.token}}function bh(i){return Pi(i)}class r0{constructor(t){this.auth=t,this.observer=null,this.addObserver=T1(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Rp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oR(i){Rp=i}function lR(i){return Rp.loadJS(i)}function uR(){return Rp.gapiScript}function cR(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function fR(i,t){const n=Ep(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Qo(u,t??{}))return o;Ts(o,"already-initialized")}return n.initialize({options:t})}function hR(i,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(ra);t?.errorMap&&i._updateErrorMap(t.errorMap),i._initializeWithPersistence(s,t?.popupRedirectResolver)}function dR(i,t,n){const s=bh(i);te(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const o=!1,u=tb(t),{host:d,port:y}=mR(t),_=y===null?"":`:${y}`,b={url:`${u}//${d}${_}/`},R=Object.freeze({host:d,port:y,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){te(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),te(Qo(b,s.config.emulator)&&Qo(R,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=b,s.emulatorConfig=R,s.settings.appVerificationDisabledForTesting=!0,Zl(d)?(DE(`${u}//${d}${_}`),NE("Auth",!0)):pR()}function tb(i){const t=i.indexOf(":");return t<0?"":i.substr(0,t+1)}function mR(i){const t=tb(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:i0(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:i0(d)}}}function i0(i){if(!i)return null;const t=Number(i);return isNaN(t)?null:t}function pR(){function i(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class eb{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return na("not implemented")}_getIdTokenResponse(t){return na("not implemented")}_linkToIdToken(t,n){return na("not implemented")}_getReauthenticationResolver(t){return na("not implemented")}}async function ql(i,t){return FC(i,"POST","/v1/accounts:signInWithIdp",Ap(i,t))}const gR="http://localhost";class $o extends eb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new $o(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Ts("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const d=new $o(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(t){const n=this.buildRequest();return ql(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,ql(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,ql(t,n)}buildRequest(){const t={requestUri:gR,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=yc(n)}return t}}class Ip{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class _c extends Ip{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Wa extends _c{constructor(){super("facebook.com")}static credential(t){return $o._fromParams({providerId:Wa.PROVIDER_ID,signInMethod:Wa.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Wa.credentialFromTaggedObject(t)}static credentialFromError(t){return Wa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Wa.credential(t.oauthAccessToken)}catch{return null}}}Wa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wa.PROVIDER_ID="facebook.com";class ea extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return $o._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return ea.credentialFromTaggedObject(t)}static credentialFromError(t){return ea.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return ea.credential(n,s)}catch{return null}}}ea.GOOGLE_SIGN_IN_METHOD="google.com";ea.PROVIDER_ID="google.com";class to extends _c{constructor(){super("github.com")}static credential(t){return $o._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return to.credentialFromTaggedObject(t)}static credentialFromError(t){return to.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return to.credential(t.oauthAccessToken)}catch{return null}}}to.GITHUB_SIGN_IN_METHOD="github.com";to.PROVIDER_ID="github.com";class eo extends _c{constructor(){super("twitter.com")}static credential(t,n){return $o._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return eo.credentialFromTaggedObject(t)}static credentialFromError(t){return eo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return eo.credential(n,s)}catch{return null}}}eo.TWITTER_SIGN_IN_METHOD="twitter.com";eo.PROVIDER_ID="twitter.com";class Kl{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,o=!1){const u=await Ji._fromIdTokenResponse(t,s,o),d=s0(s);return new Kl({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const o=s0(s);return new Kl({user:t,providerId:o,_tokenResponse:s,operationType:n})}}function s0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class rh extends ca{constructor(t,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,rh.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,o){return new rh(t,n,s,o)}}function nb(i,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?rh._fromErrorAndOperation(i,u,t,s):u})}async function yR(i,t,n=!1){const s=await sc(i,t._linkToIdToken(i.auth,await i.getIdToken()),n);return Kl._forOperation(i,"link",s)}async function vR(i,t,n=!1){const{auth:s}=i;if($i(s.app))return Promise.reject(Ko(s));const o="reauthenticate";try{const u=await sc(i,nb(s,o,t,i),n);te(u.idToken,s,"internal-error");const d=wp(u.idToken);te(d,s,"internal-error");const{sub:y}=d;return te(i.uid===y,s,"user-mismatch"),Kl._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Ts(s,"user-mismatch"),u}}async function _R(i,t,n=!1){if($i(i.app))return Promise.reject(Ko(i));const s="signIn",o=await nb(i,s,t),u=await Kl._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}function ER(i,t,n,s){return Pi(i).onIdTokenChanged(t,n,s)}function bR(i,t,n){return Pi(i).beforeAuthStateChanged(t,n)}function TR(i,t,n,s){return Pi(i).onAuthStateChanged(t,n,s)}function a0(i){return Pi(i).signOut()}const ih="__sak";class rb{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ih,"1"),this.storage.removeItem(ih),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const SR=1e3,AR=10;class ib extends rb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ZE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&t(n,o,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((d,y,_)=>{this.notifyListeners(d,_)});return}const s=t.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);eR()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,AR):o()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},SR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}ib.type="LOCAL";const wR=ib;class sb extends rb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}sb.type="SESSION";const ab=sb;function CR(i){return Promise.all(i.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}class Th{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(o=>o.isListeningto(t));if(n)return n;const s=new Th(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const y=Array.from(d).map(async b=>b(n.origin,u)),_=await CR(y);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:_})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Th.receivers=[];function Op(i="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return i+n}class RR{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((y,_)=>{const b=Op("",20);o.port1.start();const R=setTimeout(()=>{_(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(O){const k=O;if(k.data.eventId===b)switch(k.data.status){case"ack":clearTimeout(R),u=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),y(k.data.response);break;default:clearTimeout(R),clearTimeout(u),_(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:b,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ys(){return window}function IR(i){ys().location.href=i}function ob(){return typeof ys().WorkerGlobalScope<"u"&&typeof ys().importScripts=="function"}async function OR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DR(){return navigator?.serviceWorker?.controller||null}function NR(){return ob()?self:null}const lb="firebaseLocalStorageDb",xR=1,sh="firebaseLocalStorage",ub="fbase_key";class Ec{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sh(i,t){return i.transaction([sh],t?"readwrite":"readonly").objectStore(sh)}function MR(){const i=indexedDB.deleteDatabase(lb);return new Ec(i).toPromise()}function $m(){const i=indexedDB.open(lb,xR);return new Promise((t,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(sh,{keyPath:ub})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(sh)?t(s):(s.close(),await MR(),t(await $m()))})})}async function o0(i,t,n){const s=Sh(i,!0).put({[ub]:t,value:n});return new Ec(s).toPromise()}async function VR(i,t){const n=Sh(i,!1).get(t),s=await new Ec(n).toPromise();return s===void 0?null:s.value}function l0(i,t){const n=Sh(i,!0).delete(t);return new Ec(n).toPromise()}const kR=800,PR=3;class cb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $m(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>PR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ob()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Th._getInstance(NR()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await OR(),!this.activeServiceWorker)return;this.sender=new RR(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||DR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await $m();return await o0(t,ih,"1"),await l0(t,ih),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>o0(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>VR(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>l0(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=Sh(o,!1).getAll();return new Ec(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cb.type="LOCAL";const UR=cb;new vc(3e4,6e4);function fb(i,t){return t?ra(t):(te(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Dp extends eb{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ql(t,this._buildIdpRequest())}_linkToIdToken(t,n){return ql(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return ql(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function LR(i){return _R(i.auth,new Dp(i),i.bypassAuthState)}function zR(i){const{auth:t,user:n}=i;return te(n,t,"internal-error"),vR(n,new Dp(i),i.bypassAuthState)}async function jR(i){const{auth:t,user:n}=i;return te(n,t,"internal-error"),yR(n,new Dp(i),i.bypassAuthState)}class hb{constructor(t,n,s,o,u=!1){this.auth=t,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:y}=t;if(d){this.reject(d);return}const _={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(_))}catch(b){this.reject(b)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return LR;case"linkViaPopup":case"linkViaRedirect":return jR;case"reauthViaPopup":case"reauthViaRedirect":return zR;default:Ts(this.auth,"internal-error")}}resolve(t){oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const BR=new vc(2e3,1e4);async function qR(i,t,n){if($i(i.app))return Promise.reject(Wi(i,"operation-not-supported-in-this-environment"));const s=bh(i);UC(i,t,Ip);const o=fb(s,n);return new qo(s,"signInViaPopup",t,o).executeNotNull()}class qo extends hb{constructor(t,n,s,o,u){super(t,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,qo.currentPopupAction&&qo.currentPopupAction.cancel(),qo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return te(t,this.auth,"internal-error"),t}async onExecution(){oa(this.filter.length===1,"Popup operations only handle one event");const t=Op();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Wi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Wi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qo.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,BR.get())};t()}}qo.currentPopupAction=null;const HR="pendingRedirect",qf=new Map;class FR extends hb{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=qf.get(this.auth._key());if(!t){try{const s=await KR(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}qf.set(this.auth._key(),t)}return this.bypassAuthState||qf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KR(i,t){const n=QR(t),s=YR(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function GR(i,t){qf.set(i._key(),t)}function YR(i){return ra(i._redirectPersistence)}function QR(i){return Bf(HR,i.config.apiKey,i.name)}async function XR(i,t,n=!1){if($i(i.app))return Promise.reject(Ko(i));const s=bh(i),o=fb(s,t),d=await new FR(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,t)),d}const $R=600*1e3;class JR{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!ZR(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!db(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Wi(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=$R&&this.cachedEventUids.clear(),this.cachedEventUids.has(u0(t))}saveEventToCache(t){this.cachedEventUids.add(u0(t)),this.lastProcessedEventTime=Date.now()}}function u0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(t=>t).join("-")}function db({type:i,error:t}){return i==="unknown"&&t?.code==="auth/no-auth-event"}function ZR(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return db(i);default:return!1}}async function WR(i,t={}){return tu(i,"GET","/v1/projects",t)}const tI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eI=/^https?/;async function nI(i){if(i.config.emulator)return;const{authorizedDomains:t}=await WR(i);for(const n of t)try{if(rI(n))return}catch{}Ts(i,"unauthorized-domain")}function rI(i){const t=Qm(),{protocol:n,hostname:s}=new URL(t);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!eI.test(n))return!1;if(tI.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const iI=new vc(3e4,6e4);function c0(){const i=ys().___jsl;if(i?.H){for(const t of Object.keys(i.H))if(i.H[t].r=i.H[t].r||[],i.H[t].L=i.H[t].L||[],i.H[t].r=[...i.H[t].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function sI(i){return new Promise((t,n)=>{function s(){c0(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{c0(),n(Wi(i,"network-request-failed"))},timeout:iI.get()})}if(ys().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(ys().gapi?.load)s();else{const o=cR("iframefcb");return ys()[o]=()=>{gapi.load?s():n(Wi(i,"network-request-failed"))},lR(`${uR()}?onload=${o}`).catch(u=>n(u))}}).catch(t=>{throw Hf=null,t})}let Hf=null;function aI(i){return Hf=Hf||sI(i),Hf}const oI=new vc(5e3,15e3),lI="__/auth/iframe",uI="emulator/auth/iframe",cI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hI(i){const t=i.config;te(t.authDomain,i,"auth-domain-config-required");const n=t.emulator?Sp(t,uI):`https://${i.config.authDomain}/${lI}`,s={apiKey:t.apiKey,appName:i.name,v:Wl},o=fI.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${yc(s).slice(1)}`}async function dI(i){const t=await aI(i),n=ys().gapi;return te(n,i,"internal-error"),t.open({where:document.body,url:hI(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cI,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=Wi(i,"network-request-failed"),y=ys().setTimeout(()=>{u(d)},oI.get());function _(){ys().clearTimeout(y),o(s)}s.ping(_).then(_,()=>{u(d)})}))}const mI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pI=500,gI=600,yI="_blank",vI="http://localhost";class f0{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _I(i,t,n,s=pI,o=gI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let y="";const _={...mI,width:s.toString(),height:o.toString(),top:u,left:d},b=pr().toLowerCase();n&&(y=YE(b)?yI:n),KE(b)&&(t=t||vI,_.scrollbars="yes");const R=Object.entries(_).reduce((k,[J,dt])=>`${k}${J}=${dt},`,"");if(tR(b)&&y!=="_self")return EI(t||"",y),new f0(null);const O=window.open(t||"",y,R);te(O,i,"popup-blocked");try{O.focus()}catch{}return new f0(O)}function EI(i,t){const n=document.createElement("a");n.href=i,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const bI="__/auth/handler",TI="emulator/auth/handler",SI=encodeURIComponent("fac");async function h0(i,t,n,s,o,u){te(i.config.authDomain,i,"auth-domain-config-required"),te(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Wl,eventId:o};if(t instanceof Ip){t.setDefaultLanguage(i.languageCode),d.providerId=t.providerId||"",b1(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[R,O]of Object.entries({}))d[R]=O}if(t instanceof _c){const R=t.getScopes().filter(O=>O!=="");R.length>0&&(d.scopes=R.join(","))}i.tenantId&&(d.tid=i.tenantId);const y=d;for(const R of Object.keys(y))y[R]===void 0&&delete y[R];const _=await i._getAppCheckToken(),b=_?`#${SI}=${encodeURIComponent(_)}`:"";return`${AI(i)}?${yc(y).slice(1)}${b}`}function AI({config:i}){return i.emulator?Sp(i,TI):`https://${i.authDomain}/${bI}`}const Vm="webStorageSupport";class wI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ab,this._completeRedirectFn=XR,this._overrideRedirectResult=GR}async _openPopup(t,n,s,o){oa(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await h0(t,n,s,Qm(),o);return _I(t,u,Op())}async _openRedirect(t,n,s,o){await this._originValidation(t);const u=await h0(t,n,s,Qm(),o);return IR(u),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(oa(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await dI(t),s=new JR(t);return n.register("authEvent",o=>(te(o?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Vm,{type:Vm},o=>{const u=o?.[0]?.[Vm];u!==void 0&&n(!!u),Ts(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nI(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZE()||GE()||Cp()}}const CI=wI;var d0="@firebase/auth",m0="1.11.1";class RI{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function II(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OI(i){Fl(new Xo("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:d,authDomain:y}=s.options;te(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const _={apiKey:d,authDomain:y,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WE(i)},b=new aR(s,o,u,_);return hR(b,n),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Fl(new Xo("auth-internal",t=>{const n=bh(t.getProvider("auth").getImmediate());return(s=>new RI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ao(d0,m0,II(i)),ao(d0,m0,"esm2020")}const DI=300,NI=OE("authIdTokenMaxAge")||DI;let p0=null;const xI=i=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>NI)return;const o=n?.token;p0!==o&&(p0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function MI(i=kE()){const t=Ep(i,"auth");if(t.isInitialized())return t.getImmediate();const n=fR(i,{popupRedirectResolver:CI,persistence:[UR,wR,ab]}),s=OE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=xI(u.toString());bR(n,d,()=>d(n.currentUser)),ER(n,y=>d(y))}}const o=RE("auth");return o&&dR(n,`http://${o}`),n}function VI(){return document.getElementsByTagName("head")?.[0]??document}oR({loadJS(i){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=t,s.onerror=o=>{const u=Wi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",VI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OI("Browser");var g0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var oo,mb;(function(){var i;function t(M,N){function P(){}P.prototype=N.prototype,M.F=N.prototype,M.prototype=new P,M.prototype.constructor=M,M.D=function(Y,q,W){for(var V=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)V[Ke-2]=arguments[Ke];return N.prototype[q].apply(Y,V)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,N,P){P||(P=0);const Y=Array(16);if(typeof N=="string")for(var q=0;q<16;++q)Y[q]=N.charCodeAt(P++)|N.charCodeAt(P++)<<8|N.charCodeAt(P++)<<16|N.charCodeAt(P++)<<24;else for(q=0;q<16;++q)Y[q]=N[P++]|N[P++]<<8|N[P++]<<16|N[P++]<<24;N=M.g[0],P=M.g[1],q=M.g[2];let W=M.g[3],V;V=N+(W^P&(q^W))+Y[0]+3614090360&4294967295,N=P+(V<<7&4294967295|V>>>25),V=W+(q^N&(P^q))+Y[1]+3905402710&4294967295,W=N+(V<<12&4294967295|V>>>20),V=q+(P^W&(N^P))+Y[2]+606105819&4294967295,q=W+(V<<17&4294967295|V>>>15),V=P+(N^q&(W^N))+Y[3]+3250441966&4294967295,P=q+(V<<22&4294967295|V>>>10),V=N+(W^P&(q^W))+Y[4]+4118548399&4294967295,N=P+(V<<7&4294967295|V>>>25),V=W+(q^N&(P^q))+Y[5]+1200080426&4294967295,W=N+(V<<12&4294967295|V>>>20),V=q+(P^W&(N^P))+Y[6]+2821735955&4294967295,q=W+(V<<17&4294967295|V>>>15),V=P+(N^q&(W^N))+Y[7]+4249261313&4294967295,P=q+(V<<22&4294967295|V>>>10),V=N+(W^P&(q^W))+Y[8]+1770035416&4294967295,N=P+(V<<7&4294967295|V>>>25),V=W+(q^N&(P^q))+Y[9]+2336552879&4294967295,W=N+(V<<12&4294967295|V>>>20),V=q+(P^W&(N^P))+Y[10]+4294925233&4294967295,q=W+(V<<17&4294967295|V>>>15),V=P+(N^q&(W^N))+Y[11]+2304563134&4294967295,P=q+(V<<22&4294967295|V>>>10),V=N+(W^P&(q^W))+Y[12]+1804603682&4294967295,N=P+(V<<7&4294967295|V>>>25),V=W+(q^N&(P^q))+Y[13]+4254626195&4294967295,W=N+(V<<12&4294967295|V>>>20),V=q+(P^W&(N^P))+Y[14]+2792965006&4294967295,q=W+(V<<17&4294967295|V>>>15),V=P+(N^q&(W^N))+Y[15]+1236535329&4294967295,P=q+(V<<22&4294967295|V>>>10),V=N+(q^W&(P^q))+Y[1]+4129170786&4294967295,N=P+(V<<5&4294967295|V>>>27),V=W+(P^q&(N^P))+Y[6]+3225465664&4294967295,W=N+(V<<9&4294967295|V>>>23),V=q+(N^P&(W^N))+Y[11]+643717713&4294967295,q=W+(V<<14&4294967295|V>>>18),V=P+(W^N&(q^W))+Y[0]+3921069994&4294967295,P=q+(V<<20&4294967295|V>>>12),V=N+(q^W&(P^q))+Y[5]+3593408605&4294967295,N=P+(V<<5&4294967295|V>>>27),V=W+(P^q&(N^P))+Y[10]+38016083&4294967295,W=N+(V<<9&4294967295|V>>>23),V=q+(N^P&(W^N))+Y[15]+3634488961&4294967295,q=W+(V<<14&4294967295|V>>>18),V=P+(W^N&(q^W))+Y[4]+3889429448&4294967295,P=q+(V<<20&4294967295|V>>>12),V=N+(q^W&(P^q))+Y[9]+568446438&4294967295,N=P+(V<<5&4294967295|V>>>27),V=W+(P^q&(N^P))+Y[14]+3275163606&4294967295,W=N+(V<<9&4294967295|V>>>23),V=q+(N^P&(W^N))+Y[3]+4107603335&4294967295,q=W+(V<<14&4294967295|V>>>18),V=P+(W^N&(q^W))+Y[8]+1163531501&4294967295,P=q+(V<<20&4294967295|V>>>12),V=N+(q^W&(P^q))+Y[13]+2850285829&4294967295,N=P+(V<<5&4294967295|V>>>27),V=W+(P^q&(N^P))+Y[2]+4243563512&4294967295,W=N+(V<<9&4294967295|V>>>23),V=q+(N^P&(W^N))+Y[7]+1735328473&4294967295,q=W+(V<<14&4294967295|V>>>18),V=P+(W^N&(q^W))+Y[12]+2368359562&4294967295,P=q+(V<<20&4294967295|V>>>12),V=N+(P^q^W)+Y[5]+4294588738&4294967295,N=P+(V<<4&4294967295|V>>>28),V=W+(N^P^q)+Y[8]+2272392833&4294967295,W=N+(V<<11&4294967295|V>>>21),V=q+(W^N^P)+Y[11]+1839030562&4294967295,q=W+(V<<16&4294967295|V>>>16),V=P+(q^W^N)+Y[14]+4259657740&4294967295,P=q+(V<<23&4294967295|V>>>9),V=N+(P^q^W)+Y[1]+2763975236&4294967295,N=P+(V<<4&4294967295|V>>>28),V=W+(N^P^q)+Y[4]+1272893353&4294967295,W=N+(V<<11&4294967295|V>>>21),V=q+(W^N^P)+Y[7]+4139469664&4294967295,q=W+(V<<16&4294967295|V>>>16),V=P+(q^W^N)+Y[10]+3200236656&4294967295,P=q+(V<<23&4294967295|V>>>9),V=N+(P^q^W)+Y[13]+681279174&4294967295,N=P+(V<<4&4294967295|V>>>28),V=W+(N^P^q)+Y[0]+3936430074&4294967295,W=N+(V<<11&4294967295|V>>>21),V=q+(W^N^P)+Y[3]+3572445317&4294967295,q=W+(V<<16&4294967295|V>>>16),V=P+(q^W^N)+Y[6]+76029189&4294967295,P=q+(V<<23&4294967295|V>>>9),V=N+(P^q^W)+Y[9]+3654602809&4294967295,N=P+(V<<4&4294967295|V>>>28),V=W+(N^P^q)+Y[12]+3873151461&4294967295,W=N+(V<<11&4294967295|V>>>21),V=q+(W^N^P)+Y[15]+530742520&4294967295,q=W+(V<<16&4294967295|V>>>16),V=P+(q^W^N)+Y[2]+3299628645&4294967295,P=q+(V<<23&4294967295|V>>>9),V=N+(q^(P|~W))+Y[0]+4096336452&4294967295,N=P+(V<<6&4294967295|V>>>26),V=W+(P^(N|~q))+Y[7]+1126891415&4294967295,W=N+(V<<10&4294967295|V>>>22),V=q+(N^(W|~P))+Y[14]+2878612391&4294967295,q=W+(V<<15&4294967295|V>>>17),V=P+(W^(q|~N))+Y[5]+4237533241&4294967295,P=q+(V<<21&4294967295|V>>>11),V=N+(q^(P|~W))+Y[12]+1700485571&4294967295,N=P+(V<<6&4294967295|V>>>26),V=W+(P^(N|~q))+Y[3]+2399980690&4294967295,W=N+(V<<10&4294967295|V>>>22),V=q+(N^(W|~P))+Y[10]+4293915773&4294967295,q=W+(V<<15&4294967295|V>>>17),V=P+(W^(q|~N))+Y[1]+2240044497&4294967295,P=q+(V<<21&4294967295|V>>>11),V=N+(q^(P|~W))+Y[8]+1873313359&4294967295,N=P+(V<<6&4294967295|V>>>26),V=W+(P^(N|~q))+Y[15]+4264355552&4294967295,W=N+(V<<10&4294967295|V>>>22),V=q+(N^(W|~P))+Y[6]+2734768916&4294967295,q=W+(V<<15&4294967295|V>>>17),V=P+(W^(q|~N))+Y[13]+1309151649&4294967295,P=q+(V<<21&4294967295|V>>>11),V=N+(q^(P|~W))+Y[4]+4149444226&4294967295,N=P+(V<<6&4294967295|V>>>26),V=W+(P^(N|~q))+Y[11]+3174756917&4294967295,W=N+(V<<10&4294967295|V>>>22),V=q+(N^(W|~P))+Y[2]+718787259&4294967295,q=W+(V<<15&4294967295|V>>>17),V=P+(W^(q|~N))+Y[9]+3951481745&4294967295,M.g[0]=M.g[0]+N&4294967295,M.g[1]=M.g[1]+(q+(V<<21&4294967295|V>>>11))&4294967295,M.g[2]=M.g[2]+q&4294967295,M.g[3]=M.g[3]+W&4294967295}s.prototype.v=function(M,N){N===void 0&&(N=M.length);const P=N-this.blockSize,Y=this.C;let q=this.h,W=0;for(;W<N;){if(q==0)for(;W<=P;)o(this,M,W),W+=this.blockSize;if(typeof M=="string"){for(;W<N;)if(Y[q++]=M.charCodeAt(W++),q==this.blockSize){o(this,Y),q=0;break}}else for(;W<N;)if(Y[q++]=M[W++],q==this.blockSize){o(this,Y),q=0;break}}this.h=q,this.o+=N},s.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var N=1;N<M.length-8;++N)M[N]=0;N=this.o*8;for(var P=M.length-8;P<M.length;++P)M[P]=N&255,N/=256;for(this.v(M),M=Array(16),N=0,P=0;P<4;++P)for(let Y=0;Y<32;Y+=8)M[N++]=this.g[P]>>>Y&255;return M};function u(M,N){var P=y;return Object.prototype.hasOwnProperty.call(P,M)?P[M]:P[M]=N(M)}function d(M,N){this.h=N;const P=[];let Y=!0;for(let q=M.length-1;q>=0;q--){const W=M[q]|0;Y&&W==N||(P[q]=W,Y=!1)}this.g=P}var y={};function _(M){return-128<=M&&M<128?u(M,function(N){return new d([N|0],N<0?-1:0)}):new d([M|0],M<0?-1:0)}function b(M){if(isNaN(M)||!isFinite(M))return O;if(M<0)return vt(b(-M));const N=[];let P=1;for(let Y=0;M>=P;Y++)N[Y]=M/P|0,P*=4294967296;return new d(N,0)}function R(M,N){if(M.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(M.charAt(0)=="-")return vt(R(M.substring(1),N));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=b(Math.pow(N,8));let Y=O;for(let W=0;W<M.length;W+=8){var q=Math.min(8,M.length-W);const V=parseInt(M.substring(W,W+q),N);q<8?(q=b(Math.pow(N,q)),Y=Y.j(q).add(b(V))):(Y=Y.j(P),Y=Y.add(b(V)))}return Y}var O=_(0),k=_(1),J=_(16777216);i=d.prototype,i.m=function(){if(yt(this))return-vt(this).m();let M=0,N=1;for(let P=0;P<this.g.length;P++){const Y=this.i(P);M+=(Y>=0?Y:4294967296+Y)*N,N*=4294967296}return M},i.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(dt(this))return"0";if(yt(this))return"-"+vt(this).toString(M);const N=b(Math.pow(M,6));var P=this;let Y="";for(;;){const q=ue(P,N).g;P=qt(P,q.j(N));let W=((P.g.length>0?P.g[0]:P.h)>>>0).toString(M);if(P=q,dt(P))return W+Y;for(;W.length<6;)W="0"+W;Y=W+Y}},i.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function dt(M){if(M.h!=0)return!1;for(let N=0;N<M.g.length;N++)if(M.g[N]!=0)return!1;return!0}function yt(M){return M.h==-1}i.l=function(M){return M=qt(this,M),yt(M)?-1:dt(M)?0:1};function vt(M){const N=M.g.length,P=[];for(let Y=0;Y<N;Y++)P[Y]=~M.g[Y];return new d(P,~M.h).add(k)}i.abs=function(){return yt(this)?vt(this):this},i.add=function(M){const N=Math.max(this.g.length,M.g.length),P=[];let Y=0;for(let q=0;q<=N;q++){let W=Y+(this.i(q)&65535)+(M.i(q)&65535),V=(W>>>16)+(this.i(q)>>>16)+(M.i(q)>>>16);Y=V>>>16,W&=65535,V&=65535,P[q]=V<<16|W}return new d(P,P[P.length-1]&-2147483648?-1:0)};function qt(M,N){return M.add(vt(N))}i.j=function(M){if(dt(this)||dt(M))return O;if(yt(this))return yt(M)?vt(this).j(vt(M)):vt(vt(this).j(M));if(yt(M))return vt(this.j(vt(M)));if(this.l(J)<0&&M.l(J)<0)return b(this.m()*M.m());const N=this.g.length+M.g.length,P=[];for(var Y=0;Y<2*N;Y++)P[Y]=0;for(Y=0;Y<this.g.length;Y++)for(let q=0;q<M.g.length;q++){const W=this.i(Y)>>>16,V=this.i(Y)&65535,Ke=M.i(q)>>>16,tn=M.i(q)&65535;P[2*Y+2*q]+=V*tn,Kt(P,2*Y+2*q),P[2*Y+2*q+1]+=W*tn,Kt(P,2*Y+2*q+1),P[2*Y+2*q+1]+=V*Ke,Kt(P,2*Y+2*q+1),P[2*Y+2*q+2]+=W*Ke,Kt(P,2*Y+2*q+2)}for(M=0;M<N;M++)P[M]=P[2*M+1]<<16|P[2*M];for(M=N;M<2*N;M++)P[M]=0;return new d(P,0)};function Kt(M,N){for(;(M[N]&65535)!=M[N];)M[N+1]+=M[N]>>>16,M[N]&=65535,N++}function Ut(M,N){this.g=M,this.h=N}function ue(M,N){if(dt(N))throw Error("division by zero");if(dt(M))return new Ut(O,O);if(yt(M))return N=ue(vt(M),N),new Ut(vt(N.g),vt(N.h));if(yt(N))return N=ue(M,vt(N)),new Ut(vt(N.g),N.h);if(M.g.length>30){if(yt(M)||yt(N))throw Error("slowDivide_ only works with positive integers.");for(var P=k,Y=N;Y.l(M)<=0;)P=xe(P),Y=xe(Y);var q=Zt(P,1),W=Zt(Y,1);for(Y=Zt(Y,2),P=Zt(P,2);!dt(Y);){var V=W.add(Y);V.l(M)<=0&&(q=q.add(P),W=V),Y=Zt(Y,1),P=Zt(P,1)}return N=qt(M,q.j(N)),new Ut(q,N)}for(q=O;M.l(N)>=0;){for(P=Math.max(1,Math.floor(M.m()/N.m())),Y=Math.ceil(Math.log(P)/Math.LN2),Y=Y<=48?1:Math.pow(2,Y-48),W=b(P),V=W.j(N);yt(V)||V.l(M)>0;)P-=Y,W=b(P),V=W.j(N);dt(W)&&(W=k),q=q.add(W),M=qt(M,V)}return new Ut(q,M)}i.B=function(M){return ue(this,M).h},i.and=function(M){const N=Math.max(this.g.length,M.g.length),P=[];for(let Y=0;Y<N;Y++)P[Y]=this.i(Y)&M.i(Y);return new d(P,this.h&M.h)},i.or=function(M){const N=Math.max(this.g.length,M.g.length),P=[];for(let Y=0;Y<N;Y++)P[Y]=this.i(Y)|M.i(Y);return new d(P,this.h|M.h)},i.xor=function(M){const N=Math.max(this.g.length,M.g.length),P=[];for(let Y=0;Y<N;Y++)P[Y]=this.i(Y)^M.i(Y);return new d(P,this.h^M.h)};function xe(M){const N=M.g.length+1,P=[];for(let Y=0;Y<N;Y++)P[Y]=M.i(Y)<<1|M.i(Y-1)>>>31;return new d(P,M.h)}function Zt(M,N){const P=N>>5;N%=32;const Y=M.g.length-P,q=[];for(let W=0;W<Y;W++)q[W]=N>0?M.i(W+P)>>>N|M.i(W+P+1)<<32-N:M.i(W+P);return new d(q,M.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,mb=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=b,d.fromString=R,oo=d}).apply(typeof g0<"u"?g0:typeof self<"u"?self:typeof window<"u"?window:{});var Nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var pb,Fu,gb,Ff,Jm,yb,vb,_b;(function(){var i,t=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nf=="object"&&Nf];for(var v=0;v<c.length;++v){var S=c[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var s=n(this);function o(c,v){if(v)t:{var S=s;c=c.split(".");for(var I=0;I<c.length-1;I++){var tt=c[I];if(!(tt in S))break t;S=S[tt]}c=c[c.length-1],I=S[c],v=v(I),v!=I&&v!=null&&t(S,c,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(v){var S=[],I;for(I in v)Object.prototype.hasOwnProperty.call(v,I)&&S.push([I,v[I]]);return S}});var u=u||{},d=this||self;function y(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function _(c,v,S){return c.call.apply(c.bind,arguments)}function b(c,v,S){return b=_,b.apply(null,arguments)}function R(c,v){var S=Array.prototype.slice.call(arguments,1);return function(){var I=S.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function O(c,v){function S(){}S.prototype=v.prototype,c.Z=v.prototype,c.prototype=new S,c.prototype.constructor=c,c.Ob=function(I,tt,at){for(var At=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)At[ee-2]=arguments[ee];return v.prototype[tt].apply(I,At)}}var k=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function J(c){const v=c.length;if(v>0){const S=Array(v);for(let I=0;I<v;I++)S[I]=c[I];return S}return[]}function dt(c,v){for(let I=1;I<arguments.length;I++){const tt=arguments[I];var S=typeof tt;if(S=S!="object"?S:tt?Array.isArray(tt)?"array":S:"null",S=="array"||S=="object"&&typeof tt.length=="number"){S=c.length||0;const at=tt.length||0;c.length=S+at;for(let At=0;At<at;At++)c[S+At]=tt[At]}else c.push(tt)}}class yt{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function vt(c){d.setTimeout(()=>{throw c},0)}function qt(){var c=M;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class Kt{constructor(){this.h=this.g=null}add(v,S){const I=Ut.get();I.set(v,S),this.h?this.h.next=I:this.g=I,this.h=I}}var Ut=new yt(()=>new ue,c=>c.reset());class ue{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,Zt=!1,M=new Kt,N=()=>{const c=Promise.resolve(void 0);xe=()=>{c.then(P)}};function P(){for(var c;c=qt();){try{c.h.call(c.g)}catch(S){vt(S)}var v=Ut;v.j(c),v.h<100&&(v.h++,c.next=v.g,v.g=c)}Zt=!1}function Y(){this.u=this.u,this.C=this.C}Y.prototype.u=!1,Y.prototype.dispose=function(){this.u||(this.u=!0,this.N())},Y.prototype[Symbol.dispose]=function(){this.dispose()},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var W=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const S=()=>{};d.addEventListener("test",S,v),d.removeEventListener("test",S,v)}catch{}return c})();function V(c){return/^[\s\xa0]*$/.test(c)}function Ke(c,v){q.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,v)}O(Ke,q),Ke.prototype.init=function(c,v){const S=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget,v||(S=="mouseover"?v=c.fromElement:S=="mouseout"&&(v=c.toElement)),this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Ke.Z.h.call(this)},Ke.prototype.h=function(){Ke.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var tn="closure_listenable_"+(Math.random()*1e6|0),ut=0;function xt(c,v,S,I,tt){this.listener=c,this.proxy=null,this.src=v,this.type=S,this.capture=!!I,this.ha=tt,this.key=++ut,this.da=this.fa=!1}function Lt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ce(c,v,S){for(const I in c)v.call(S,c[I],I,c)}function fe(c,v){for(const S in c)v.call(void 0,c[S],S,c)}function F(c){const v={};for(const S in c)v[S]=c[S];return v}const ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Rt(c,v){let S,I;for(let tt=1;tt<arguments.length;tt++){I=arguments[tt];for(S in I)c[S]=I[S];for(let at=0;at<ht.length;at++)S=ht[at],Object.prototype.hasOwnProperty.call(I,S)&&(c[S]=I[S])}}function Vt(c){this.src=c,this.g={},this.h=0}Vt.prototype.add=function(c,v,S,I,tt){const at=c.toString();c=this.g[at],c||(c=this.g[at]=[],this.h++);const At=$t(c,v,I,tt);return At>-1?(v=c[At],S||(v.fa=!1)):(v=new xt(v,this.src,at,!!I,tt),v.fa=S,c.push(v)),v};function Yt(c,v){const S=v.type;if(S in c.g){var I=c.g[S],tt=Array.prototype.indexOf.call(I,v,void 0),at;(at=tt>=0)&&Array.prototype.splice.call(I,tt,1),at&&(Lt(v),c.g[S].length==0&&(delete c.g[S],c.h--))}}function $t(c,v,S,I){for(let tt=0;tt<c.length;++tt){const at=c[tt];if(!at.da&&at.listener==v&&at.capture==!!S&&at.ha==I)return tt}return-1}var de="closure_lm_"+(Math.random()*1e6|0),pn={};function Nt(c,v,S,I,tt){if(Array.isArray(v)){for(let at=0;at<v.length;at++)Nt(c,v[at],S,I,tt);return null}return S=vo(S),c&&c[tn]?c.J(v,S,y(I)?!!I.capture:!1,tt):ts(c,v,S,!1,I,tt)}function ts(c,v,S,I,tt,at){if(!v)throw Error("Invalid event type");const At=y(tt)?!!tt.capture:!!tt;let ee=ws(c);if(ee||(c[de]=ee=new Vt(c)),S=ee.add(v,S,I,At,at),S.proxy)return S;if(I=Ui(),S.proxy=I,I.src=c,I.listener=S,c.addEventListener)W||(tt=At),tt===void 0&&(tt=!1),c.addEventListener(v.toString(),I,tt);else if(c.attachEvent)c.attachEvent(di(v.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Ui(){function c(S){return v.call(c.src,c.listener,S)}const v=Fr;return c}function Se(c,v,S,I,tt){if(Array.isArray(v))for(var at=0;at<v.length;at++)Se(c,v[at],S,I,tt);else I=y(I)?!!I.capture:!!I,S=vo(S),c&&c[tn]?(c=c.i,at=String(v).toString(),at in c.g&&(v=c.g[at],S=$t(v,S,I,tt),S>-1&&(Lt(v[S]),Array.prototype.splice.call(v,S,1),v.length==0&&(delete c.g[at],c.h--)))):c&&(c=ws(c))&&(v=c.g[v.toString()],c=-1,v&&(c=$t(v,S,I,tt)),(S=c>-1?v[c]:null)&&hi(S))}function hi(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[tn])Yt(v.i,c);else{var S=c.type,I=c.proxy;v.removeEventListener?v.removeEventListener(S,I,c.capture):v.detachEvent?v.detachEvent(di(S),I):v.addListener&&v.removeListener&&v.removeListener(I),(S=ws(v))?(Yt(S,c),S.h==0&&(S.src=null,v[de]=null)):Lt(c)}}}function di(c){return c in pn?pn[c]:pn[c]="on"+c}function Fr(c,v){if(c.da)c=!0;else{v=new Ke(v,this);const S=c.listener,I=c.ha||c.src;c.fa&&hi(c),c=S.call(I,v)}return c}function ws(c){return c=c[de],c instanceof Vt?c:null}var yo="__closure_events_fn_"+(Math.random()*1e9>>>0);function vo(c){return typeof c=="function"?c:(c[yo]||(c[yo]=function(v){return c.handleEvent(v)}),c[yo])}function fn(){Y.call(this),this.i=new Vt(this),this.M=this,this.G=null}O(fn,Y),fn.prototype[tn]=!0,fn.prototype.removeEventListener=function(c,v,S,I){Se(this,c,v,S,I)};function en(c,v){var S,I=c.G;if(I)for(S=[];I;I=I.G)S.push(I);if(c=c.M,I=v.type||v,typeof v=="string")v=new q(v,c);else if(v instanceof q)v.target=v.target||c;else{var tt=v;v=new q(I,c),Rt(v,tt)}tt=!0;let at,At;if(S)for(At=S.length-1;At>=0;At--)at=v.g=S[At],tt=Vn(at,I,!0,v)&&tt;if(at=v.g=c,tt=Vn(at,I,!0,v)&&tt,tt=Vn(at,I,!1,v)&&tt,S)for(At=0;At<S.length;At++)at=v.g=S[At],tt=Vn(at,I,!1,v)&&tt}fn.prototype.N=function(){if(fn.Z.N.call(this),this.i){var c=this.i;for(const v in c.g){const S=c.g[v];for(let I=0;I<S.length;I++)Lt(S[I]);delete c.g[v],c.h--}}this.G=null},fn.prototype.J=function(c,v,S,I){return this.i.add(String(c),v,!1,S,I)},fn.prototype.K=function(c,v,S,I){return this.i.add(String(c),v,!0,S,I)};function Vn(c,v,S,I){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();let tt=!0;for(let at=0;at<v.length;++at){const At=v[at];if(At&&!At.da&&At.capture==S){const ee=At.listener,ln=At.ha||At.src;At.fa&&Yt(c.i,At),tt=ee.call(ln,I)!==!1&&tt}}return tt&&!I.defaultPrevented}function rl(c,v){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=b(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(c,v||0)}function es(c){c.g=rl(()=>{c.g=null,c.i&&(c.i=!1,es(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class jn extends Y{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:es(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kr(c){Y.call(this),this.h=c,this.g={}}O(Kr,Y);var Gr=[];function Yr(c){ce(c.g,function(v,S){this.g.hasOwnProperty(S)&&hi(v)},c),c.g={}}Kr.prototype.N=function(){Kr.Z.N.call(this),Yr(this)},Kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mi=d.JSON.stringify,Cs=d.JSON.parse,fa=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Rs(){}function pi(){}var ir={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gn(){q.call(this,"d")}O(gn,q);function yn(){q.call(this,"c")}O(yn,q);var Dt={},ns=null;function Tr(){return ns=ns||new fn}Dt.Ia="serverreachability";function Is(c){q.call(this,Dt.Ia,c)}O(Is,q);function Ct(c){const v=Tr();en(v,new Is(v))}Dt.STAT_EVENT="statevent";function Li(c,v){q.call(this,Dt.STAT_EVENT,c),this.stat=v}O(Li,q);function nn(c){const v=Tr();en(v,new Li(v,c))}Dt.Ja="timingevent";function Sr(c,v){q.call(this,Dt.Ja,c),this.size=v}O(Sr,q);function Qr(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},v)}function gr(){this.g=!0}gr.prototype.ua=function(){this.g=!1};function su(c,v,S,I,tt,at){c.info(function(){if(c.g)if(at){var At="",ee=at.split("&");for(let Ae=0;Ae<ee.length;Ae++){var ln=ee[Ae].split("=");if(ln.length>1){const Ue=ln[0];ln=ln[1];const kr=Ue.split("_");At=kr.length>=2&&kr[1]=="type"?At+(Ue+"="+ln+"&"):At+(Ue+"=redacted&")}}}else At=null;else At=at;return"XMLHTTP REQ ("+I+") [attempt "+tt+"]: "+v+`
`+S+`
`+At})}function il(c,v,S,I,tt,at,At){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+tt+"]: "+v+`
`+S+`
`+at+" "+At})}function Xn(c,v,S,I){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+_o(c,S)+(I?" "+I:"")})}function Ar(c,v){c.info(function(){return"TIMEOUT: "+v})}gr.prototype.info=function(){};function _o(c,v){if(!c.g)return v;if(!v)return null;try{const at=JSON.parse(v);if(at){for(c=0;c<at.length;c++)if(Array.isArray(at[c])){var S=at[c];if(!(S.length<2)){var I=S[1];if(Array.isArray(I)&&!(I.length<1)){var tt=I[0];if(tt!="noop"&&tt!="stop"&&tt!="close")for(let At=1;At<I.length;At++)I[At]=""}}}}return mi(at)}catch{return v}}var gi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Me={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Je;function Os(){}O(Os,Rs),Os.prototype.g=function(){return new XMLHttpRequest},Je=new Os;function wr(c){return encodeURIComponent(String(c))}function Ds(c){var v=1;c=c.split(":");const S=[];for(;v>0&&c.length;)S.push(c.shift()),v--;return c.length&&S.push(c.join(":")),S}function sr(c,v,S,I){this.j=c,this.i=v,this.l=S,this.S=I||1,this.V=new Kr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xr}function Xr(){this.i=null,this.g="",this.h=!1}var ke={},Ge={};function kn(c,v,S){c.M=1,c.A=ss(sn(v)),c.u=S,c.R=!0,zi(c,null)}function zi(c,v){c.F=Date.now(),Bn(c),c.B=sn(c.A);var S=c.B,I=c.S;Array.isArray(I)||(I=[String(I)]),ga(S.i,"t",I),c.C=0,S=c.j.L,c.h=new Xr,c.g=En(c.j,S?v:null,!c.u),c.P>0&&(c.O=new jn(b(c.Y,c,c.g),c.P)),v=c.V,S=c.g,I=c.ba;var tt="readystatechange";Array.isArray(tt)||(tt&&(Gr[0]=tt.toString()),tt=Gr);for(let at=0;at<tt.length;at++){const At=Nt(S,tt[at],I||v.handleEvent,!1,v.h||v);if(!At)break;v.g[At.key]=At}v=c.J?F(c.J):{},c.u?(c.v||(c.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,v)):(c.v="GET",c.g.ea(c.B,c.v,null,v)),Ct(),su(c.i,c.v,c.B,c.l,c.S,c.u)}sr.prototype.ba=function(c){c=c.target;const v=this.O;v&&ri(c)==3?v.j():this.Y(c)},sr.prototype.Y=function(c){try{if(c==this.g)t:{const ee=ri(this.g),ln=this.g.ya(),Ae=this.g.ca();if(!(ee<3)&&(ee!=3||this.g&&(this.h.h||this.g.la()||on(this.g)))){this.K||ee!=4||ln==7||(ln==8||Ae<=0?Ct(3):Ct(2)),Cr(this);var v=this.g.ca();this.X=v;var S=au(this);if(this.o=v==200,il(this.i,this.v,this.B,this.l,this.S,ee,v),this.o){if(this.U&&!this.L){e:{if(this.g){var I,tt=this.g;if((I=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(I)){var at=I;break e}}at=null}if(c=at)Xn(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,An(this,c);else{this.o=!1,this.m=3,nn(12),vn(this),Ce(this);break t}}if(this.R){c=!0;let Ue;for(;!this.K&&this.C<S.length;)if(Ue=Eo(this,S),Ue==Ge){ee==4&&(this.m=4,nn(14),c=!1),Xn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ue==ke){this.m=4,nn(15),Xn(this.i,this.l,S,"[Invalid Chunk]"),c=!1;break}else Xn(this.i,this.l,Ue,null),An(this,Ue);if($r(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ee!=4||S.length!=0||this.h.h||(this.m=1,nn(16),c=!1),this.o=this.o&&c,!c)Xn(this.i,this.l,S,"[Invalid Chunked Response]"),vn(this),Ce(this);else if(S.length>0&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.aa&&!At.P&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),os(At),At.P=!0,nn(11))}}else Xn(this.i,this.l,S,null),An(this,S);ee==4&&vn(this),this.o&&!this.K&&(ee==4?Gi(this.j,this):(this.o=!1,Bn(this)))}else Fi(this.g),v==400&&S.indexOf("Unknown SID")>0?(this.m=3,nn(12)):(this.m=0,nn(13)),vn(this),Ce(this)}}}catch{}finally{}};function au(c){if(!$r(c))return c.g.la();const v=on(c.g);if(v==="")return"";let S="";const I=v.length,tt=ri(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return vn(c),Ce(c),"";c.h.i=new d.TextDecoder}for(let at=0;at<I;at++)c.h.h=!0,S+=c.h.i.decode(v[at],{stream:!(tt&&at==I-1)});return v.length=0,c.h.g+=S,c.C=0,c.h.g}function $r(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Eo(c,v){var S=c.C,I=v.indexOf(`
`,S);return I==-1?Ge:(S=Number(v.substring(S,I)),isNaN(S)?ke:(I+=1,I+S>v.length?Ge:(v=v.slice(I,I+S),c.C=I+S,v)))}sr.prototype.cancel=function(){this.K=!0,vn(this)};function Bn(c){c.T=Date.now()+c.H,Ns(c,c.H)}function Ns(c,v){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Qr(b(c.aa,c),v)}function Cr(c){c.D&&(d.clearTimeout(c.D),c.D=null)}sr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Ar(this.i,this.B),this.M!=2&&(Ct(),nn(17)),vn(this),this.m=2,Ce(this)):Ns(this,this.T-c)};function Ce(c){c.j.I==0||c.K||Gi(c.j,c)}function vn(c){Cr(c);var v=c.O;v&&typeof v.dispose=="function"&&v.dispose(),c.O=null,Yr(c.V),c.g&&(v=c.g,c.g=null,v.abort(),v.dispose())}function An(c,v){try{var S=c.j;if(S.I!=0&&(S.g==c||Ir(S.h,c))){if(!c.L&&Ir(S.h,c)&&S.I==3){try{var I=S.Ba.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var tt=I;if(tt[0]==0){t:if(!S.v){if(S.g)if(S.g.F+3e3<c.F)Ea(S),bi(S);else break t;Si(S),nn(18)}}else S.xa=tt[1],0<S.xa-S.K&&tt[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=Qr(b(S.Va,S),6e3));Rr(S.h)<=1&&S.ta&&(S.ta=void 0)}else Mr(S,11)}else if((c.L||S.g==c)&&Ea(S),!V(v))for(tt=S.Ba.g.parse(v),v=0;v<tt.length;v++){let Ae=tt[v];const Ue=Ae[0];if(!(Ue<=S.K))if(S.K=Ue,Ae=Ae[1],S.I==2)if(Ae[0]=="c"){S.M=Ae[1],S.ba=Ae[2];const kr=Ae[3];kr!=null&&(S.ka=kr,S.j.info("VER="+S.ka));const Pr=Ae[4];Pr!=null&&(S.za=Pr,S.j.info("SVER="+S.za));const _r=Ae[5];_r!=null&&typeof _r=="number"&&_r>0&&(I=1.5*_r,S.O=I,S.j.info("backChannelRequestTimeoutMs_="+I)),I=S;const si=c.g;if(si){const us=si.g?si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(us){var at=I.h;at.g||us.indexOf("spdy")==-1&&us.indexOf("quic")==-1&&us.indexOf("h2")==-1||(at.j=at.l,at.g=new Set,at.h&&(Jr(at,at.h),at.h=null))}if(I.G){const Aa=si.g?si.g.getResponseHeader("X-HTTP-Session-Id"):null;Aa&&(I.wa=Aa,Ie(I.J,I.G,Aa))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-c.F,S.j.info("Handshake RTT: "+S.T+"ms")),I=S;var At=c;if(I.na=Sa(I,I.L?I.ba:null,I.W),At.L){ha(I.h,At);var ee=At,ln=I.O;ln&&(ee.H=ln),ee.D&&(Cr(ee),Bn(ee)),I.g=At}else ks(I);S.i.length>0&&Ti(S)}else Ae[0]!="stop"&&Ae[0]!="close"||Mr(S,7);else S.I==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?Mr(S,7):as(S):Ae[0]!="noop"&&S.l&&S.l.qa(Ae),S.A=0)}}Ct(4)}catch{}}var rn=class{constructor(c,v){this.g=c,this.map=v}};function yi(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function rs(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Rr(c){return c.h?1:c.g?c.g.size:0}function Ir(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function Jr(c,v){c.g?c.g.add(v):c.h=v}function ha(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}yi.prototype.cancel=function(){if(this.i=is(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function is(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const S of c.g.values())v=v.concat(S.G);return v}return J(c.i)}var bo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function se(c,v){if(c){c=c.split("&");for(let S=0;S<c.length;S++){const I=c[S].indexOf("=");let tt,at=null;I>=0?(tt=c[S].substring(0,I),at=c[S].substring(I+1)):tt=c[S],v(tt,at?decodeURIComponent(at.replace(/\+/g," ")):"")}}}function ar(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;c instanceof ar?(this.l=c.l,an(this,c.j),this.o=c.o,this.g=c.g,Or(this,c.u),this.h=c.h,da(this,al(c.i)),this.m=c.m):c&&(v=String(c).match(bo))?(this.l=!1,an(this,v[1]||"",!0),this.o=pe(v[2]||""),this.g=pe(v[3]||"",!0),Or(this,v[4]),this.h=pe(v[5]||"",!0),da(this,v[6]||"",!0),this.m=pe(v[7]||"")):(this.l=!1,this.i=new ei(null,this.l))}ar.prototype.toString=function(){const c=[];var v=this.j;v&&c.push(Zr(v,Wr,!0),":");var S=this.g;return(S||v=="file")&&(c.push("//"),(v=this.o)&&c.push(Zr(v,Wr,!0),"@"),c.push(wr(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&c.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&c.push("/"),c.push(Zr(S,S.charAt(0)=="/"?xs:ma,!0))),(S=this.i.toString())&&c.push("?",S),(S=this.m)&&c.push("#",Zr(S,To)),c.join("")},ar.prototype.resolve=function(c){const v=sn(this);let S=!!c.j;S?an(v,c.j):S=!!c.o,S?v.o=c.o:S=!!c.g,S?v.g=c.g:S=c.u!=null;var I=c.h;if(S)Or(v,c.u);else if(S=!!c.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var tt=v.h.lastIndexOf("/");tt!=-1&&(I=v.h.slice(0,tt+1)+I)}if(tt=I,tt==".."||tt==".")I="";else if(tt.indexOf("./")!=-1||tt.indexOf("/.")!=-1){I=tt.lastIndexOf("/",0)==0,tt=tt.split("/");const at=[];for(let At=0;At<tt.length;){const ee=tt[At++];ee=="."?I&&At==tt.length&&at.push(""):ee==".."?((at.length>1||at.length==1&&at[0]!="")&&at.pop(),I&&At==tt.length&&at.push("")):(at.push(ee),I=!0)}I=at.join("/")}else I=tt}return S?v.h=I:S=c.i.toString()!=="",S?da(v,al(c.i)):S=!!c.m,S&&(v.m=c.m),v};function sn(c){return new ar(c)}function an(c,v,S){c.j=S?pe(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function Or(c,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);c.u=v}else c.u=null}function da(c,v,S){v instanceof ei?(c.i=v,ni(c.i,c.l)):(S||(v=Zr(v,ti)),c.i=new ei(v,c.l))}function Ie(c,v,S){c.i.set(v,S)}function ss(c){return Ie(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function pe(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Zr(c,v,S){return typeof c=="string"?(c=encodeURI(c).replace(v,wn),S&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function wn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Wr=/[#\/\?@]/g,ma=/[#\?:]/g,xs=/[#\?]/g,ti=/[#\?@]/g,To=/#/g;function ei(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function $n(c){c.g||(c.g=new Map,c.h=0,c.i&&se(c.i,function(v,S){c.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}i=ei.prototype,i.add=function(c,v){$n(this),this.i=null,c=hn(this,c);let S=this.g.get(c);return S||this.g.set(c,S=[]),S.push(v),this.h+=1,this};function sl(c,v){$n(c),v=hn(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function me(c,v){return $n(c),v=hn(c,v),c.g.has(v)}i.forEach=function(c,v){$n(this),this.g.forEach(function(S,I){S.forEach(function(tt){c.call(v,tt,I,this)},this)},this)};function pa(c,v){$n(c);let S=[];if(typeof v=="string")me(c,v)&&(S=S.concat(c.g.get(hn(c,v))));else for(c=Array.from(c.g.values()),v=0;v<c.length;v++)S=S.concat(c[v]);return S}i.set=function(c,v){return $n(this),this.i=null,c=hn(this,c),me(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},i.get=function(c,v){return c?(c=pa(this,c),c.length>0?String(c[0]):v):v};function ga(c,v,S){sl(c,v),S.length>0&&(c.i=null,c.g.set(hn(c,v),J(S)),c.h+=S.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(let I=0;I<v.length;I++){var S=v[I];const tt=wr(S);S=pa(this,S);for(let at=0;at<S.length;at++){let At=tt;S[at]!==""&&(At+="="+wr(S[at])),c.push(At)}}return this.i=c.join("&")};function al(c){const v=new ei;return v.i=c.i,c.g&&(v.g=new Map(c.g),v.h=c.h),v}function hn(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function ni(c,v){v&&!c.j&&($n(c),c.i=null,c.g.forEach(function(S,I){const tt=I.toLowerCase();I!=tt&&(sl(this,I),ga(this,tt,S))},c)),c.j=v}function or(c,v){const S=new gr;if(d.Image){const I=new Image;I.onload=R(yr,S,"TestLoadImage: loaded",!0,v,I),I.onerror=R(yr,S,"TestLoadImage: error",!1,v,I),I.onabort=R(yr,S,"TestLoadImage: abort",!1,v,I),I.ontimeout=R(yr,S,"TestLoadImage: timeout",!1,v,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else v(!1)}function Dr(c,v){const S=new gr,I=new AbortController,tt=setTimeout(()=>{I.abort(),yr(S,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:I.signal}).then(at=>{clearTimeout(tt),at.ok?yr(S,"TestPingServer: ok",!0,v):yr(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(tt),yr(S,"TestPingServer: error",!1,v)})}function yr(c,v,S,I,tt){try{tt&&(tt.onload=null,tt.onerror=null,tt.onabort=null,tt.ontimeout=null),I(S)}catch{}}function ji(){this.g=new fa}function Pe(c){this.i=c.Sb||null,this.h=c.ab||!1}O(Pe,Rs),Pe.prototype.g=function(){return new qn(this.i,this.h)};function qn(c,v){fn.call(this),this.H=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}O(qn,fn),i=qn.prototype,i.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=v,this.readyState=1,vr(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(v.body=c),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},i.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,vr(this)),this.g&&(this.readyState=3,vr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vi(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function vi(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}i.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?Nr(this):vr(this),this.readyState==3&&vi(this)}},i.Oa=function(c){this.g&&(this.response=this.responseText=c,Nr(this))},i.Na=function(c){this.g&&(this.response=c,Nr(this))},i.ga=function(){this.g&&Nr(this)};function Nr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,vr(c)}i.setRequestHeader=function(c,v){this.A.append(c,v)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,c.push(S[0]+": "+S[1]),S=v.next();return c.join(`\r
`)};function vr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(qn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function _n(c){let v="";return ce(c,function(S,I){v+=I,v+=":",v+=S,v+=`\r
`}),v}function Ms(c,v,S){t:{for(I in S){var I=!1;break t}I=!0}I||(S=_n(S),typeof c=="string"?S!=null&&wr(S):Ie(c,v,S))}function he(c){fn.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}O(he,fn);var xr=/^https?$/i,ya=["POST","PUT"];i=he.prototype,i.Fa=function(c){this.H=c},i.ea=function(c,v,S,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Je.g(),this.g.onreadystatechange=k(b(this.Ca,this));try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(at){Bi(this,at);return}if(c=S||"",S=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var tt in I)S.set(tt,I[tt]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const at of I.keys())S.set(at,I.get(at));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(S.keys()).find(at=>at.toLowerCase()=="content-type"),tt=d.FormData&&c instanceof d.FormData,!(Array.prototype.indexOf.call(ya,v,void 0)>=0)||I||tt||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[at,At]of S)this.g.setRequestHeader(at,At);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(at){Bi(this,at)}};function Bi(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.o=5,qi(c),_i(c)}function qi(c){c.A||(c.A=!0,en(c,"complete"),en(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,en(this,"complete"),en(this,"abort"),_i(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_i(this,!0)),he.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Hi(this):this.Xa())},i.Xa=function(){Hi(this)};function Hi(c){if(c.h&&typeof u<"u"){if(c.v&&ri(c)==4)setTimeout(c.Ca.bind(c),0);else if(en(c,"readystatechange"),ri(c)==4){c.h=!1;try{const at=c.ca();t:switch(at){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break t;default:v=!1}var S;if(!(S=v)){var I;if(I=at===0){let At=String(c.D).match(bo)[1]||null;!At&&d.self&&d.self.location&&(At=d.self.location.protocol.slice(0,-1)),I=!xr.test(At?At.toLowerCase():"")}S=I}if(S)en(c,"complete"),en(c,"success");else{c.o=6;try{var tt=ri(c)>2?c.g.statusText:""}catch{tt=""}c.l=tt+" ["+c.ca()+"]",qi(c)}}finally{_i(c)}}}}function _i(c,v){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const S=c.g;c.g=null,v||en(c,"ready");try{S.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ri(c){return c.g?c.g.readyState:0}i.ca=function(){try{return ri(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),Cs(v)}};function on(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Fi(c){const v={};c=(c.g&&ri(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(V(c[I]))continue;var S=Ds(c[I]);const tt=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const at=v[tt]||[];v[tt]=at,at.push(S)}fe(v,function(I){return I.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(c,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[c]||v}function ii(c){this.za=0,this.i=[],this.j=new gr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ei("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ei("baseRetryDelayMs",5e3,c),this.Za=Ei("retryDelaySeedMs",1e4,c),this.Ta=Ei("forwardChannelMaxRetries",2,c),this.va=Ei("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new yi(c&&c.concurrentRequestLimit),this.Ba=new ji,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ii.prototype,i.ka=8,i.I=1,i.connect=function(c,v,S,I){nn(0),this.W=c,this.H=v||{},S&&I!==void 0&&(this.H.OSID=S,this.H.OAID=I),this.F=this.X,this.J=Sa(this,null,this.W),Ti(this)};function as(c){if(va(c),c.I==3){var v=c.V++,S=sn(c.J);if(Ie(S,"SID",c.M),Ie(S,"RID",v),Ie(S,"TYPE","terminate"),Ki(c,S),v=new sr(c,c.j,v),v.M=2,v.A=ss(sn(S)),S=!1,d.navigator&&d.navigator.sendBeacon)try{S=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!S&&d.Image&&(new Image().src=v.A,S=!0),S||(v.g=En(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Bn(v)}Ta(c)}function bi(c){c.g&&(os(c),c.g.cancel(),c.g=null)}function va(c){bi(c),c.v&&(d.clearTimeout(c.v),c.v=null),Ea(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&d.clearTimeout(c.m),c.m=null)}function Ti(c){if(!rs(c.h)&&!c.m){c.m=!0;var v=c.Ea;xe||N(),Zt||(xe(),Zt=!0),M.add(v,c),c.D=0}}function _a(c,v){return Rr(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=v.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Qr(b(c.Ea,c,v),ba(c,c.D)),c.D++,!0)}i.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const tt=new sr(this,this.j,c);let at=this.o;if(this.U&&(at?(at=F(at),Rt(at,this.U)):at=this.U),this.u!==null||this.R||(tt.J=at,at=null),this.S)t:{for(var v=0,S=0;S<this.i.length;S++){e:{var I=this.i[S];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break e}I=void 0}if(I===void 0)break;if(v+=I,v>4096){v=S;break t}if(v===4096||S===this.i.length-1){v=S+1;break t}}v=1e3}else v=1e3;v=So(this,tt,v),S=sn(this.J),Ie(S,"RID",c),Ie(S,"CVER",22),this.G&&Ie(S,"X-HTTP-Session-Id",this.G),Ki(this,S),at&&(this.R?v="headers="+wr(_n(at))+"&"+v:this.u&&Ms(S,this.u,at)),Jr(this.h,tt),this.Ra&&Ie(S,"TYPE","init"),this.S?(Ie(S,"$req",v),Ie(S,"SID","null"),tt.U=!0,kn(tt,S,null)):kn(tt,S,v),this.I=2}}else this.I==3&&(c?Vs(this,c):this.i.length==0||rs(this.h)||Vs(this))};function Vs(c,v){var S;v?S=v.l:S=c.V++;const I=sn(c.J);Ie(I,"SID",c.M),Ie(I,"RID",S),Ie(I,"AID",c.K),Ki(c,I),c.u&&c.o&&Ms(I,c.u,c.o),S=new sr(c,c.j,S,c.D+1),c.u===null&&(S.J=c.o),v&&(c.i=v.G.concat(c.i)),v=So(c,S,1e3),S.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Jr(c.h,S),kn(S,I,v)}function Ki(c,v){c.H&&ce(c.H,function(S,I){Ie(v,I,S)}),c.l&&ce({},function(S,I){Ie(v,I,S)})}function So(c,v,S){S=Math.min(c.i.length,S);const I=c.l?b(c.l.Ka,c.l,c):null;t:{var tt=c.i;let ee=-1;for(;;){const ln=["count="+S];ee==-1?S>0?(ee=tt[0].g,ln.push("ofs="+ee)):ee=0:ln.push("ofs="+ee);let Ae=!0;for(let Ue=0;Ue<S;Ue++){var at=tt[Ue].g;const kr=tt[Ue].map;if(at-=ee,at<0)ee=Math.max(0,tt[Ue].g-100),Ae=!1;else try{at="req"+at+"_"||"";try{var At=kr instanceof Map?kr:Object.entries(kr);for(const[Pr,_r]of At){let si=_r;y(_r)&&(si=mi(_r)),ln.push(at+Pr+"="+encodeURIComponent(si))}}catch(Pr){throw ln.push(at+"type="+encodeURIComponent("_badmap")),Pr}}catch{I&&I(kr)}}if(Ae){At=ln.join("&");break t}}At=void 0}return c=c.i.splice(0,S),v.G=c,At}function ks(c){if(!c.g&&!c.v){c.Y=1;var v=c.Da;xe||N(),Zt||(xe(),Zt=!0),M.add(v,c),c.A=0}}function Si(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Qr(b(c.Da,c),ba(c,c.A)),c.A++,!0)}i.Da=function(){if(this.v=null,Ao(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Qr(b(this.Wa,this),c)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,nn(10),bi(this),Ao(this))};function os(c){c.B!=null&&(d.clearTimeout(c.B),c.B=null)}function Ao(c){c.g=new sr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var v=sn(c.na);Ie(v,"RID","rpc"),Ie(v,"SID",c.M),Ie(v,"AID",c.K),Ie(v,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ie(v,"TO",c.ia),Ie(v,"TYPE","xmlhttp"),Ki(c,v),c.u&&c.o&&Ms(v,c.u,c.o),c.O&&(c.g.H=c.O);var S=c.g;c=c.ba,S.M=1,S.A=ss(sn(v)),S.u=null,S.R=!0,zi(S,c)}i.Va=function(){this.C!=null&&(this.C=null,bi(this),Si(this),nn(19))};function Ea(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Gi(c,v){var S=null;if(c.g==v){Ea(c),os(c),c.g=null;var I=2}else if(Ir(c.h,v))S=v.G,ha(c.h,v),I=1;else return;if(c.I!=0){if(v.o)if(I==1){S=v.u?v.u.length:0,v=Date.now()-v.F;var tt=c.D;I=Tr(),en(I,new Sr(I,S)),Ti(c)}else ks(c);else if(tt=v.m,tt==3||tt==0&&v.X>0||!(I==1&&_a(c,v)||I==2&&Si(c)))switch(S&&S.length>0&&(v=c.h,v.i=v.i.concat(S)),tt){case 1:Mr(c,5);break;case 4:Mr(c,10);break;case 3:Mr(c,6);break;default:Mr(c,2)}}}function ba(c,v){let S=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(S*=2),S*v}function Mr(c,v){if(c.j.info("Error code "+v),v==2){var S=b(c.bb,c),I=c.Ua;const tt=!I;I=new ar(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||an(I,"https"),ss(I),tt?or(I.toString(),S):Dr(I.toString(),S)}else nn(2);c.I=0,c.l&&c.l.pa(v),Ta(c),va(c)}i.bb=function(c){c?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function Ta(c){if(c.I=0,c.ja=[],c.l){const v=is(c.h);(v.length!=0||c.i.length!=0)&&(dt(c.ja,v),dt(c.ja,c.i),c.h.i.length=0,J(c.i),c.i.length=0),c.l.oa()}}function Sa(c,v,S){var I=S instanceof ar?sn(S):new ar(S);if(I.g!="")v&&(I.g=v+"."+I.g),Or(I,I.u);else{var tt=d.location;I=tt.protocol,v=v?v+"."+tt.hostname:tt.hostname,tt=+tt.port;const at=new ar(null);I&&an(at,I),v&&(at.g=v),tt&&Or(at,tt),S&&(at.h=S),I=at}return S=c.G,v=c.wa,S&&v&&Ie(I,S,v),Ie(I,"VER",c.ka),Ki(c,I),I}function En(c,v,S){if(v&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Aa&&!c.ma?new he(new Pe({ab:S})):new he(c.ma),v.Fa(c.L),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ls(){}i=ls.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Vr(){}Vr.prototype.g=function(c,v){return new Hn(c,v)};function Hn(c,v){fn.call(this),this.g=new ii(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(c?c["X-WebChannel-Client-Profile"]=v.sa:c={"X-WebChannel-Client-Profile":v.sa}),this.g.U=c,(c=v&&v.Qb)&&!V(c)&&(this.g.u=c),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!V(v)&&(this.g.G=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new Ai(this)}O(Hn,fn),Hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){as(this.g)},Hn.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var S={};S.__data__=c,c=S}else this.v&&(S={},S.__data__=mi(c),c=S);v.i.push(new rn(v.Ya++,c)),v.I==3&&Ti(v)},Hn.prototype.N=function(){this.g.l=null,delete this.j,as(this.g),delete this.g,Hn.Z.N.call(this)};function Ps(c){gn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){t:{for(const S in v){c=S;break t}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}O(Ps,gn);function wo(){yn.call(this),this.status=1}O(wo,yn);function Ai(c){this.g=c}O(Ai,ls),Ai.prototype.ra=function(){en(this.g,"a")},Ai.prototype.qa=function(c){en(this.g,new Ps(c))},Ai.prototype.pa=function(c){en(this.g,new wo)},Ai.prototype.oa=function(){en(this.g,"b")},Vr.prototype.createWebChannel=Vr.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,_b=function(){return new Vr},vb=function(){return Tr()},yb=Dt,Jm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},gi.NO_ERROR=0,gi.TIMEOUT=8,gi.HTTP_ERROR=6,Ff=gi,Me.COMPLETE="complete",gb=Me,pi.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",fn.prototype.listen=fn.prototype.J,Fu=pi,he.prototype.listenOnce=he.prototype.K,he.prototype.getLastError=he.prototype.Ha,he.prototype.getLastErrorCode=he.prototype.ya,he.prototype.getStatus=he.prototype.ca,he.prototype.getResponseJson=he.prototype.La,he.prototype.getResponseText=he.prototype.la,he.prototype.send=he.prototype.ea,he.prototype.setWithCredentials=he.prototype.Fa,pb=he}).apply(typeof Nf<"u"?Nf:typeof self<"u"?self:typeof window<"u"?window:{});const y0="@firebase/firestore",v0="4.9.2";class hr{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}hr.UNAUTHENTICATED=new hr(null),hr.GOOGLE_CREDENTIALS=new hr("google-credentials-uid"),hr.FIRST_PARTY=new hr("first-party-uid"),hr.MOCK_USER=new hr("mock-user");let eu="12.3.0";const Jo=new vp("@firebase/firestore");function Pl(){return Jo.logLevel}function kt(i,...t){if(Jo.logLevel<=Ee.DEBUG){const n=t.map(Np);Jo.debug(`Firestore (${eu}): ${i}`,...n)}}function la(i,...t){if(Jo.logLevel<=Ee.ERROR){const n=t.map(Np);Jo.error(`Firestore (${eu}): ${i}`,...n)}}function Gl(i,...t){if(Jo.logLevel<=Ee.WARN){const n=t.map(Np);Jo.warn(`Firestore (${eu}): ${i}`,...n)}}function Np(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function Xt(i,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,Eb(i,s,n)}function Eb(i,t,n){let s=`FIRESTORE (${eu}) INTERNAL ASSERTION FAILED: ${t} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw la(s),new Error(s)}function Ve(i,t,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||Eb(t,o,s)}function ie(i,t){return i}const _t={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Bt extends ca{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class lo{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}class bb{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class kI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(hr.UNAUTHENTICATED)))}shutdown(){}}class PI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class UI{constructor(t){this.t=t,this.currentUser=hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ve(this.o===void 0,42304);let s=this.i;const o=_=>this.i!==s?(s=this.i,n(_)):Promise.resolve();let u=new lo;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new lo,t.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const _=u;t.enqueueRetryable((async()=>{await _.promise,await o(this.currentUser)}))},y=_=>{kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((_=>y(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?y(_):(kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new lo)}}),0),d()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ve(typeof s.accessToken=="string",31837,{l:s}),new bb(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ve(t===null||typeof t=="string",2055,{h:t}),new hr(t)}}class LI{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=hr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class zI{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new LI(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(hr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _0{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jI{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$i(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ve(this.o===void 0,3512);const s=u=>{u.error!=null&&kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,kt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>s(u)))};const o=u=>{kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _0(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new _0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function BI(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class xp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=BI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=t.charAt(o[u]%62))}return s}}function be(i,t){return i<t?-1:i>t?1:0}function Zm(i,t){const n=Math.min(i.length,t.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=t.charAt(s);if(o!==u)return km(o)===km(u)?be(o,u):km(o)?1:-1}return be(i.length,t.length)}const qI=55296,HI=57343;function km(i){const t=i.charCodeAt(0);return t>=qI&&t<=HI}function Yl(i,t,n){return i.length===t.length&&i.every(((s,o)=>n(s,t[o])))}const E0="__name__";class ps{constructor(t,n,s){n===void 0?n=0:n>t.length&&Xt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&Xt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return ps.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ps?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let o=0;o<s;o++){const u=ps.compareSegments(t.get(o),n.get(o));if(u!==0)return u}return be(t.length,n.length)}static compareSegments(t,n){const s=ps.isNumericId(t),o=ps.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?ps.extractNumericId(t).compare(ps.extractNumericId(n)):Zm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return oo.fromString(t.substring(4,t.length-2))}}class un extends ps{construct(t,n,s){return new un(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new Bt(_t.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new un(n)}static emptyPath(){return new un([])}}const FI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nr extends ps{construct(t,n,s){return new nr(t,n,s)}static isValidIdentifier(t){return FI.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nr.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===E0}static keyField(){return new nr([E0])}static fromServerFormat(t){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new Bt(_t.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<t.length;){const y=t[o];if(y==="\\"){if(o+1===t.length)throw new Bt(_t.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const _=t[o+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new Bt(_t.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=_,o+=2}else y==="`"?(d=!d,o++):y!=="."||d?(s+=y,o++):(u(),o++)}if(u(),d)throw new Bt(_t.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new nr(n)}static emptyPath(){return new nr([])}}class Gt{constructor(t){this.path=t}static fromPath(t){return new Gt(un.fromString(t))}static fromName(t){return new Gt(un.fromString(t).popFirst(5))}static empty(){return new Gt(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&un.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return un.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Gt(new un(t.slice()))}}function KI(i,t,n){if(!n)throw new Bt(_t.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function GI(i,t,n,s){if(t===!0&&s===!0)throw new Bt(_t.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function b0(i){if(!Gt.isDocumentKey(i))throw new Bt(_t.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Tb(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Mp(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":Xt(12329,{type:typeof i})}function ac(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new Bt(_t.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mp(i);throw new Bt(_t.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return i}function Mn(i,t){const n={typeString:i};return t&&(n.value=t),n}function bc(i,t){if(!Tb(i))throw new Bt(_t.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const o=t[s].typeString,u="value"in t[s]?{value:t[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const d=i[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new Bt(_t.INVALID_ARGUMENT,n);return!0}const T0=-62135596800,S0=1e6;class $e{static now(){return $e.fromMillis(Date.now())}static fromDate(t){return $e.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*S0);return new $e(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Bt(_t.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Bt(_t.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<T0)throw new Bt(_t.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Bt(_t.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/S0}_compareTo(t){return this.seconds===t.seconds?be(this.nanoseconds,t.nanoseconds):be(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(bc(t,$e._jsonSchema))return new $e(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-T0;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$e._jsonSchemaVersion="firestore/timestamp/1.0",$e._jsonSchema={type:Mn("string",$e._jsonSchemaVersion),seconds:Mn("number"),nanoseconds:Mn("number")};class ne{static fromTimestamp(t){return new ne(t)}static min(){return new ne(new $e(0,0))}static max(){return new ne(new $e(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const oc=-1;function YI(i,t){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=ne.fromTimestamp(s===1e9?new $e(n+1,0):new $e(n,s));return new uo(o,Gt.empty(),t)}function QI(i){return new uo(i.readTime,i.key,oc)}class uo{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new uo(ne.min(),Gt.empty(),oc)}static max(){return new uo(ne.max(),Gt.empty(),oc)}}function XI(i,t){let n=i.readTime.compareTo(t.readTime);return n!==0?n:(n=Gt.comparator(i.documentKey,t.documentKey),n!==0?n:be(i.largestBatchId,t.largestBatchId))}const $I="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function nu(i){if(i.code!==_t.FAILED_PRECONDITION||i.message!==$I)throw i;kt("LocalStore","Unexpectedly lost primary lease")}class gt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Xt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new gt(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof gt?n:gt.resolve(n)}catch(n){return gt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):gt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):gt.reject(n)}static resolve(t){return new gt(((n,s)=>{n(t)}))}static reject(t){return new gt(((n,s)=>{s(t)}))}static waitFor(t){return new gt(((n,s)=>{let o=0,u=0,d=!1;t.forEach((y=>{++o,y.next((()=>{++u,d&&u===o&&n()}),(_=>s(_)))})),d=!0,u===o&&n()}))}static or(t){let n=gt.resolve(!1);for(const s of t)n=n.next((o=>o?gt.resolve(o):s()));return n}static forEach(t,n){const s=[];return t.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(t,n){return new gt(((s,o)=>{const u=t.length,d=new Array(u);let y=0;for(let _=0;_<u;_++){const b=_;n(t[b]).next((R=>{d[b]=R,++y,y===u&&s(d)}),(R=>o(R)))}}))}static doWhile(t,n){return new gt(((s,o)=>{const u=()=>{t()===!0?n().next((()=>{u()}),o):s()};u()}))}}function ZI(i){const t=i.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ru(i){return i.name==="IndexedDbTransactionError"}class Ah{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Ah.ce=-1;const Vp=-1;function wh(i){return i==null}function ah(i){return i===0&&1/i==-1/0}function WI(i){return typeof i=="number"&&Number.isInteger(i)&&!ah(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Sb="";function tO(i){let t="";for(let n=0;n<i.length;n++)t.length>0&&(t=A0(t)),t=eO(i.get(n),t);return A0(t)}function eO(i,t){let n=t;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case Sb:n+="";break;default:n+=u}}return n}function A0(i){return i+Sb+""}function w0(i){let t=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&t++;return t}function Wo(i,t){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&t(n,i[n])}function Ab(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}class cn{constructor(t,n){this.comparator=t,this.root=n||er.EMPTY}insert(t,n){return new cn(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,er.BLACK,null,null))}remove(t){return new cn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,er.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(t,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new xf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new xf(this.root,t,this.comparator,!1)}getReverseIterator(){return new xf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new xf(this.root,t,this.comparator,!0)}}class xf{constructor(t,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?s(t.key,n):1,n&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class er{constructor(t,n,s,o,u){this.key=t,this.value=n,this.color=s??er.RED,this.left=o??er.EMPTY,this.right=u??er.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,o,u){return new er(t??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let o=this;const u=s(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return er.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return er.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,er.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Xt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Xt(27949);return t+(this.isRed()?0:1)}}er.EMPTY=null,er.RED=!0,er.BLACK=!1;er.EMPTY=new class{constructor(){this.size=0}get key(){throw Xt(57766)}get value(){throw Xt(16141)}get color(){throw Xt(16727)}get left(){throw Xt(29726)}get right(){throw Xt(36894)}copy(t,n,s,o,u){return this}insert(t,n,s){return new er(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zn{constructor(t){this.comparator=t,this.data=new cn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new C0(this.data.getIterator())}getIteratorFrom(t){return new C0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof zn)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new zn(this.comparator);return n.data=t,n}}class C0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Zi{constructor(t){this.fields=t,t.sort(nr.comparator)}static empty(){return new Zi([])}unionWith(t){let n=new zn(nr.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Zi(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Yl(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}class wb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class rr{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new wb("Invalid base64 string: "+u):u}})(t);return new rr(n)}static fromUint8Array(t){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(t);return new rr(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return be(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}rr.EMPTY_BYTE_STRING=new rr("");const nO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function co(i){if(Ve(!!i,39018),typeof i=="string"){let t=0;const n=nO.exec(i);if(Ve(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Sn(i.seconds),nanos:Sn(i.nanos)}}function Sn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function fo(i){return typeof i=="string"?rr.fromBase64String(i):rr.fromUint8Array(i)}const Cb="server_timestamp",Rb="__type__",Ib="__previous_value__",Ob="__local_write_time__";function kp(i){return(i?.mapValue?.fields||{})[Rb]?.stringValue===Cb}function Ch(i){const t=i.mapValue.fields[Ib];return kp(t)?Ch(t):t}function lc(i){const t=co(i.mapValue.fields[Ob].timestampValue);return new $e(t.seconds,t.nanos)}class rO{constructor(t,n,s,o,u,d,y,_,b,R){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=y,this.longPollingOptions=_,this.useFetchStreams=b,this.isUsingEmulator=R}}const oh="(default)";class uc{constructor(t,n){this.projectId=t,this.database=n||oh}static empty(){return new uc("","")}get isDefaultDatabase(){return this.database===oh}isEqual(t){return t instanceof uc&&t.projectId===this.projectId&&t.database===this.database}}const Db="__type__",iO="__max__",Mf={mapValue:{}},Nb="__vector__",lh="value";function ho(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?kp(i)?4:aO(i)?9007199254740991:sO(i)?10:11:Xt(28295,{value:i})}function Ss(i,t){if(i===t)return!0;const n=ho(i);if(n!==ho(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return lc(i).isEqual(lc(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=co(o.timestampValue),y=co(u.timestampValue);return d.seconds===y.seconds&&d.nanos===y.nanos})(i,t);case 5:return i.stringValue===t.stringValue;case 6:return(function(o,u){return fo(o.bytesValue).isEqual(fo(u.bytesValue))})(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return(function(o,u){return Sn(o.geoPointValue.latitude)===Sn(u.geoPointValue.latitude)&&Sn(o.geoPointValue.longitude)===Sn(u.geoPointValue.longitude)})(i,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Sn(o.integerValue)===Sn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Sn(o.doubleValue),y=Sn(u.doubleValue);return d===y?ah(d)===ah(y):isNaN(d)&&isNaN(y)}return!1})(i,t);case 9:return Yl(i.arrayValue.values||[],t.arrayValue.values||[],Ss);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},y=u.mapValue.fields||{};if(w0(d)!==w0(y))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(y[_]===void 0||!Ss(d[_],y[_])))return!1;return!0})(i,t);default:return Xt(52216,{left:i})}}function cc(i,t){return(i.values||[]).find((n=>Ss(n,t)))!==void 0}function Ql(i,t){if(i===t)return 0;const n=ho(i),s=ho(t);if(n!==s)return be(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(i.booleanValue,t.booleanValue);case 2:return(function(u,d){const y=Sn(u.integerValue||u.doubleValue),_=Sn(d.integerValue||d.doubleValue);return y<_?-1:y>_?1:y===_?0:isNaN(y)?isNaN(_)?0:-1:1})(i,t);case 3:return R0(i.timestampValue,t.timestampValue);case 4:return R0(lc(i),lc(t));case 5:return Zm(i.stringValue,t.stringValue);case 6:return(function(u,d){const y=fo(u),_=fo(d);return y.compareTo(_)})(i.bytesValue,t.bytesValue);case 7:return(function(u,d){const y=u.split("/"),_=d.split("/");for(let b=0;b<y.length&&b<_.length;b++){const R=be(y[b],_[b]);if(R!==0)return R}return be(y.length,_.length)})(i.referenceValue,t.referenceValue);case 8:return(function(u,d){const y=be(Sn(u.latitude),Sn(d.latitude));return y!==0?y:be(Sn(u.longitude),Sn(d.longitude))})(i.geoPointValue,t.geoPointValue);case 9:return I0(i.arrayValue,t.arrayValue);case 10:return(function(u,d){const y=u.fields||{},_=d.fields||{},b=y[lh]?.arrayValue,R=_[lh]?.arrayValue,O=be(b?.values?.length||0,R?.values?.length||0);return O!==0?O:I0(b,R)})(i.mapValue,t.mapValue);case 11:return(function(u,d){if(u===Mf.mapValue&&d===Mf.mapValue)return 0;if(u===Mf.mapValue)return 1;if(d===Mf.mapValue)return-1;const y=u.fields||{},_=Object.keys(y),b=d.fields||{},R=Object.keys(b);_.sort(),R.sort();for(let O=0;O<_.length&&O<R.length;++O){const k=Zm(_[O],R[O]);if(k!==0)return k;const J=Ql(y[_[O]],b[R[O]]);if(J!==0)return J}return be(_.length,R.length)})(i.mapValue,t.mapValue);default:throw Xt(23264,{he:n})}}function R0(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return be(i,t);const n=co(i),s=co(t),o=be(n.seconds,s.seconds);return o!==0?o:be(n.nanos,s.nanos)}function I0(i,t){const n=i.values||[],s=t.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Ql(n[o],s[o]);if(u)return u}return be(n.length,s.length)}function Xl(i){return Wm(i)}function Wm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=co(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return fo(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Gt.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Wm(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${Wm(n.fields[d])}`;return o+"}"})(i.mapValue):Xt(61005,{value:i})}function Kf(i){switch(ho(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ch(i);return t?16+Kf(t):16;case 5:return 2*i.stringValue.length;case 6:return fo(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Kf(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Wo(s.fields,((u,d)=>{o+=u.length+Kf(d)})),o})(i.mapValue);default:throw Xt(13486,{value:i})}}function tp(i){return!!i&&"integerValue"in i}function Pp(i){return!!i&&"arrayValue"in i}function O0(i){return!!i&&"nullValue"in i}function D0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Gf(i){return!!i&&"mapValue"in i}function sO(i){return(i?.mapValue?.fields||{})[Db]?.stringValue===Nb}function Ju(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const t={mapValue:{fields:{}}};return Wo(i.mapValue.fields,((n,s)=>t.mapValue.fields[n]=Ju(s))),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ju(i.arrayValue.values[n]);return t}return{...i}}function aO(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===iO}class Vi{constructor(t){this.value=t}static empty(){return new Vi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Gf(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ju(n)}setAll(t){let n=nr.emptyPath(),s={},o=[];t.forEach(((d,y)=>{if(!n.isImmediateParentOf(y)){const _=this.getFieldsMap(n);this.applyChanges(_,s,o),s={},o=[],n=y.popLast()}d?s[y.lastSegment()]=Ju(d):o.push(y.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(t){const n=this.field(t.popLast());Gf(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ss(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let o=n.mapValue.fields[t.get(s)];Gf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,s){Wo(n,((o,u)=>t[o]=u));for(const o of s)delete t[o]}clone(){return new Vi(Ju(this.value))}}function xb(i){const t=[];return Wo(i.fields,((n,s)=>{const o=new nr([n]);if(Gf(s)){const u=xb(s.mapValue).fields;if(u.length===0)t.push(o);else for(const d of u)t.push(o.child(d))}else t.push(o)})),new Zi(t)}class dr{constructor(t,n,s,o,u,d,y){this.key=t,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=y}static newInvalidDocument(t){return new dr(t,0,ne.min(),ne.min(),ne.min(),Vi.empty(),0)}static newFoundDocument(t,n,s,o){return new dr(t,1,n,ne.min(),s,o,0)}static newNoDocument(t,n){return new dr(t,2,n,ne.min(),ne.min(),Vi.empty(),0)}static newUnknownDocument(t,n){return new dr(t,3,n,ne.min(),ne.min(),Vi.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Vi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof dr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class uh{constructor(t,n){this.position=t,this.inclusive=n}}function N0(i,t,n){let s=0;for(let o=0;o<i.position.length;o++){const u=t[o],d=i.position[o];if(u.field.isKeyField()?s=Gt.comparator(Gt.fromName(d.referenceValue),n.key):s=Ql(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function x0(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Ss(i.position[n],t.position[n]))return!1;return!0}class ch{constructor(t,n="asc"){this.field=t,this.dir=n}}function oO(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}class Mb{}class Ln extends Mb{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new uO(t,n,s):n==="array-contains"?new hO(t,s):n==="in"?new dO(t,s):n==="not-in"?new mO(t,s):n==="array-contains-any"?new pO(t,s):new Ln(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new cO(t,s):new fO(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ql(n,this.value)):n!==null&&ho(this.value)===ho(n)&&this.matchesComparison(Ql(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Xt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class As extends Mb{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new As(t,n)}matches(t){return Vb(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Vb(i){return i.op==="and"}function kb(i){return lO(i)&&Vb(i)}function lO(i){for(const t of i.filters)if(t instanceof As)return!1;return!0}function ep(i){if(i instanceof Ln)return i.field.canonicalString()+i.op.toString()+Xl(i.value);if(kb(i))return i.filters.map((t=>ep(t))).join(",");{const t=i.filters.map((n=>ep(n))).join(",");return`${i.op}(${t})`}}function Pb(i,t){return i instanceof Ln?(function(s,o){return o instanceof Ln&&s.op===o.op&&s.field.isEqual(o.field)&&Ss(s.value,o.value)})(i,t):i instanceof As?(function(s,o){return o instanceof As&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,d,y)=>u&&Pb(d,o.filters[y])),!0):!1})(i,t):void Xt(19439)}function Ub(i){return i instanceof Ln?(function(n){return`${n.field.canonicalString()} ${n.op} ${Xl(n.value)}`})(i):i instanceof As?(function(n){return n.op.toString()+" {"+n.getFilters().map(Ub).join(" ,")+"}"})(i):"Filter"}class uO extends Ln{constructor(t,n,s){super(t,n,s),this.key=Gt.fromName(s.referenceValue)}matches(t){const n=Gt.comparator(t.key,this.key);return this.matchesComparison(n)}}class cO extends Ln{constructor(t,n){super(t,"in",n),this.keys=Lb("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class fO extends Ln{constructor(t,n){super(t,"not-in",n),this.keys=Lb("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function Lb(i,t){return(t.arrayValue?.values||[]).map((n=>Gt.fromName(n.referenceValue)))}class hO extends Ln{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Pp(n)&&cc(n.arrayValue,this.value)}}class dO extends Ln{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&cc(this.value.arrayValue,n)}}class mO extends Ln{constructor(t,n){super(t,"not-in",n)}matches(t){if(cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!cc(this.value.arrayValue,n)}}class pO extends Ln{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Pp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>cc(this.value.arrayValue,s)))}}class gO{constructor(t,n=null,s=[],o=[],u=null,d=null,y=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=y,this.Te=null}}function M0(i,t=null,n=[],s=[],o=null,u=null,d=null){return new gO(i,t,n,s,o,u,d)}function Up(i){const t=ie(i);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>ep(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),wh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Xl(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Xl(s))).join(",")),t.Te=n}return t.Te}function Lp(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!oO(i.orderBy[n],t.orderBy[n]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Pb(i.filters[n],t.filters[n]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!x0(i.startAt,t.startAt)&&x0(i.endAt,t.endAt)}function np(i){return Gt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Rh{constructor(t,n=null,s=[],o=[],u=null,d="F",y=null,_=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=y,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function yO(i,t,n,s,o,u,d,y){return new Rh(i,t,n,s,o,u,d,y)}function zp(i){return new Rh(i)}function V0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function vO(i){return i.collectionGroup!==null}function Zu(i){const t=ie(i);if(t.Ie===null){t.Ie=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),n.add(u.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let y=new zn(nr.comparator);return d.filters.forEach((_=>{_.getFlattenedFilters().forEach((b=>{b.isInequality()&&(y=y.add(b.field))}))})),y})(t).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new ch(u,s))})),n.has(nr.keyField().canonicalString())||t.Ie.push(new ch(nr.keyField(),s))}return t.Ie}function vs(i){const t=ie(i);return t.Ee||(t.Ee=_O(t,Zu(i))),t.Ee}function _O(i,t){if(i.limitType==="F")return M0(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new ch(o.field,u)}));const n=i.endAt?new uh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new uh(i.startAt.position,i.startAt.inclusive):null;return M0(i.path,i.collectionGroup,t,i.filters,i.limit,n,s)}}function rp(i,t,n){return new Rh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,n,i.startAt,i.endAt)}function Ih(i,t){return Lp(vs(i),vs(t))&&i.limitType===t.limitType}function zb(i){return`${Up(vs(i))}|lt:${i.limitType}`}function Ul(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>Ub(o))).join(", ")}]`),wh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Xl(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Xl(o))).join(",")),`Target(${s})`})(vs(i))}; limitType=${i.limitType})`}function Oh(i,t){return t.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Gt.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,t)&&(function(s,o){for(const u of Zu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,t)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,t)&&(function(s,o){return!(s.startAt&&!(function(d,y,_){const b=N0(d,y,_);return d.inclusive?b<=0:b<0})(s.startAt,Zu(s),o)||s.endAt&&!(function(d,y,_){const b=N0(d,y,_);return d.inclusive?b>=0:b>0})(s.endAt,Zu(s),o))})(i,t)}function EO(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function jb(i){return(t,n)=>{let s=!1;for(const o of Zu(i)){const u=bO(o,t,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function bO(i,t,n){const s=i.field.isKeyField()?Gt.comparator(t.key,n.key):(function(u,d,y){const _=d.data.field(u),b=y.data.field(u);return _!==null&&b!==null?Ql(_,b):Xt(42886)})(i.field,t,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Xt(19790,{direction:i.dir})}}class tl{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),o=this.inner[s];if(o===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Wo(this.inner,((n,s)=>{for(const[o,u]of s)t(o,u)}))}isEmpty(){return Ab(this.inner)}size(){return this.innerSize}}const TO=new cn(Gt.comparator);function ua(){return TO}const Bb=new cn(Gt.comparator);function Ku(...i){let t=Bb;for(const n of i)t=t.insert(n.key,n);return t}function qb(i){let t=Bb;return i.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function Ho(){return Wu()}function Hb(){return Wu()}function Wu(){return new tl((i=>i.toString()),((i,t)=>i.isEqual(t)))}const SO=new cn(Gt.comparator),AO=new zn(Gt.comparator);function Te(...i){let t=AO;for(const n of i)t=t.add(n);return t}const wO=new zn(be);function CO(){return wO}function jp(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ah(t)?"-0":t}}function Fb(i){return{integerValue:""+i}}function RO(i,t){return WI(t)?Fb(t):jp(i,t)}class Dh{constructor(){this._=void 0}}function IO(i,t,n){return i instanceof fh?(function(o,u){const d={fields:{[Rb]:{stringValue:Cb},[Ob]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&kp(u)&&(u=Ch(u)),u&&(d.fields[Ib]=u),{mapValue:d}})(n,t):i instanceof fc?Gb(i,t):i instanceof hc?Yb(i,t):(function(o,u){const d=Kb(o,u),y=k0(d)+k0(o.Ae);return tp(d)&&tp(o.Ae)?Fb(y):jp(o.serializer,y)})(i,t)}function OO(i,t,n){return i instanceof fc?Gb(i,t):i instanceof hc?Yb(i,t):n}function Kb(i,t){return i instanceof hh?(function(s){return tp(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(t)?t:{integerValue:0}:null}class fh extends Dh{}class fc extends Dh{constructor(t){super(),this.elements=t}}function Gb(i,t){const n=Qb(t);for(const s of i.elements)n.some((o=>Ss(o,s)))||n.push(s);return{arrayValue:{values:n}}}class hc extends Dh{constructor(t){super(),this.elements=t}}function Yb(i,t){let n=Qb(t);for(const s of i.elements)n=n.filter((o=>!Ss(o,s)));return{arrayValue:{values:n}}}class hh extends Dh{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function k0(i){return Sn(i.integerValue||i.doubleValue)}function Qb(i){return Pp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function DO(i,t){return i.field.isEqual(t.field)&&(function(s,o){return s instanceof fc&&o instanceof fc||s instanceof hc&&o instanceof hc?Yl(s.elements,o.elements,Ss):s instanceof hh&&o instanceof hh?Ss(s.Ae,o.Ae):s instanceof fh&&o instanceof fh})(i.transform,t.transform)}class NO{constructor(t,n){this.version=t,this.transformResults=n}}class ia{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ia}static exists(t){return new ia(void 0,t)}static updateTime(t){return new ia(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Yf(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class Nh{}function Xb(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new Jb(i.key,ia.none()):new Tc(i.key,i.data,ia.none());{const n=i.data,s=Vi.empty();let o=new zn(nr.comparator);for(let u of t.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new el(i.key,s,new Zi(o.toArray()),ia.none())}}function xO(i,t,n){i instanceof Tc?(function(o,u,d){const y=o.value.clone(),_=U0(o.fieldTransforms,u,d.transformResults);y.setAll(_),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(i,t,n):i instanceof el?(function(o,u,d){if(!Yf(o.precondition,u))return void u.convertToUnknownDocument(d.version);const y=U0(o.fieldTransforms,u,d.transformResults),_=u.data;_.setAll($b(o)),_.setAll(y),u.convertToFoundDocument(d.version,_).setHasCommittedMutations()})(i,t,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,t,n)}function tc(i,t,n,s){return i instanceof Tc?(function(u,d,y,_){if(!Yf(u.precondition,d))return y;const b=u.value.clone(),R=L0(u.fieldTransforms,_,d);return b.setAll(R),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),null})(i,t,n,s):i instanceof el?(function(u,d,y,_){if(!Yf(u.precondition,d))return y;const b=L0(u.fieldTransforms,_,d),R=d.data;return R.setAll($b(u)),R.setAll(b),d.convertToFoundDocument(d.version,R).setHasLocalMutations(),y===null?null:y.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((O=>O.field)))})(i,t,n,s):(function(u,d,y){return Yf(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):y})(i,t,n)}function MO(i,t){let n=null;for(const s of i.fieldTransforms){const o=t.data.field(s.field),u=Kb(s.transform,o||null);u!=null&&(n===null&&(n=Vi.empty()),n.set(s.field,u))}return n||null}function P0(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Yl(s,o,((u,d)=>DO(u,d)))})(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class Tc extends Nh{constructor(t,n,s,o=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class el extends Nh{constructor(t,n,s,o,u=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function $b(i){const t=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);t.set(n,s)}})),t}function U0(i,t,n){const s=new Map;Ve(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],d=u.transform,y=t.data.field(u.field);s.set(u.field,OO(d,y,n[o]))}return s}function L0(i,t,n){const s=new Map;for(const o of i){const u=o.transform,d=n.data.field(o.field);s.set(o.field,IO(u,d,t))}return s}class Jb extends Nh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VO extends Nh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class kO{constructor(t,n,s,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&xO(u,t,s[o])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=tc(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=tc(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=Hb();return this.mutations.forEach((o=>{const u=t.get(o.key),d=u.overlayedDocument;let y=this.applyToLocalView(d,u.mutatedFields);y=n.has(o.key)?null:y;const _=Xb(d,y);_!==null&&s.set(o.key,_),d.isValidDocument()||d.convertToNoDocument(ne.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Te())}isEqual(t){return this.batchId===t.batchId&&Yl(this.mutations,t.mutations,((n,s)=>P0(n,s)))&&Yl(this.baseMutations,t.baseMutations,((n,s)=>P0(n,s)))}}class Bp{constructor(t,n,s,o){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(t,n,s){Ve(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let o=(function(){return SO})();const u=t.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new Bp(t,n,s,o)}}class PO{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class UO{constructor(t,n){this.count=t,this.unchangedNames=n}}var xn,Re;function LO(i){switch(i){case _t.OK:return Xt(64938);case _t.CANCELLED:case _t.UNKNOWN:case _t.DEADLINE_EXCEEDED:case _t.RESOURCE_EXHAUSTED:case _t.INTERNAL:case _t.UNAVAILABLE:case _t.UNAUTHENTICATED:return!1;case _t.INVALID_ARGUMENT:case _t.NOT_FOUND:case _t.ALREADY_EXISTS:case _t.PERMISSION_DENIED:case _t.FAILED_PRECONDITION:case _t.ABORTED:case _t.OUT_OF_RANGE:case _t.UNIMPLEMENTED:case _t.DATA_LOSS:return!0;default:return Xt(15467,{code:i})}}function Zb(i){if(i===void 0)return la("GRPC error has no .code"),_t.UNKNOWN;switch(i){case xn.OK:return _t.OK;case xn.CANCELLED:return _t.CANCELLED;case xn.UNKNOWN:return _t.UNKNOWN;case xn.DEADLINE_EXCEEDED:return _t.DEADLINE_EXCEEDED;case xn.RESOURCE_EXHAUSTED:return _t.RESOURCE_EXHAUSTED;case xn.INTERNAL:return _t.INTERNAL;case xn.UNAVAILABLE:return _t.UNAVAILABLE;case xn.UNAUTHENTICATED:return _t.UNAUTHENTICATED;case xn.INVALID_ARGUMENT:return _t.INVALID_ARGUMENT;case xn.NOT_FOUND:return _t.NOT_FOUND;case xn.ALREADY_EXISTS:return _t.ALREADY_EXISTS;case xn.PERMISSION_DENIED:return _t.PERMISSION_DENIED;case xn.FAILED_PRECONDITION:return _t.FAILED_PRECONDITION;case xn.ABORTED:return _t.ABORTED;case xn.OUT_OF_RANGE:return _t.OUT_OF_RANGE;case xn.UNIMPLEMENTED:return _t.UNIMPLEMENTED;case xn.DATA_LOSS:return _t.DATA_LOSS;default:return Xt(39323,{code:i})}}(Re=xn||(xn={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";function zO(){return new TextEncoder}const jO=new oo([4294967295,4294967295],0);function z0(i){const t=zO().encode(i),n=new mb;return n.update(t),new Uint8Array(n.digest())}function j0(i){const t=new DataView(i.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new oo([n,s],0),new oo([o,u],0)]}class qp{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Gu(`Invalid padding: ${n}`);if(s<0)throw new Gu(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Gu(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new Gu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=oo.fromNumber(this.ge)}ye(t,n,s){let o=t.add(n.multiply(oo.fromNumber(s)));return o.compare(jO)===1&&(o=new oo([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=z0(t),[s,o]=j0(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);if(!this.we(d))return!1}return!0}static create(t,n,s){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),d=new qp(u,o,n);return s.forEach((y=>d.insert(y))),d}insert(t){if(this.ge===0)return;const n=z0(t),[s,o]=j0(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);this.Se(d)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class Gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xh{constructor(t,n,s,o,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const o=new Map;return o.set(t,Sc.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new xh(ne.min(),o,new cn(be),ua(),Te())}}class Sc{constructor(t,n,s,o,u){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Sc(s,n,Te(),Te(),Te())}}class Qf{constructor(t,n,s,o){this.be=t,this.removedTargetIds=n,this.key=s,this.De=o}}class Wb{constructor(t,n){this.targetId=t,this.Ce=n}}class tT{constructor(t,n,s=rr.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=o}}class B0{constructor(){this.ve=0,this.Fe=q0(),this.Me=rr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Te(),n=Te(),s=Te();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Xt(38017,{changeType:u})}})),new Sc(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=q0()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class BO{constructor(t){this.Ge=t,this.ze=new Map,this.je=ua(),this.Je=Vf(),this.He=Vf(),this.Ye=new cn(be)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:Xt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(t){const n=t.targetId,s=t.Ce.count,o=this.ot(n);if(o){const u=o.target;if(np(u))if(s===0){const d=new Gt(u.path);this.et(n,d,dr.newNoDocument(d,ne.min()))}else Ve(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const y=this.ut(t),_=y?this.ct(y,t,d):1;if(_!==0){this.it(n);const b=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,b)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,y;try{d=fo(s).toUint8Array()}catch(_){if(_ instanceof wb)return Gl("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{y=new qp(d,o,u)}catch(_){return Gl(_ instanceof Gu?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return y.ge===0?null:y}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const d=this.Ge.ht(),y=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;t.mightContain(y)||(this.et(n,u,null),o++)})),o}Tt(t){const n=new Map;this.ze.forEach(((u,d)=>{const y=this.ot(d);if(y){if(u.current&&np(y.target)){const _=new Gt(y.target.path);this.It(_).has(d)||this.Et(d,_)||this.et(d,_,dr.newNoDocument(_,t))}u.Be&&(n.set(d,u.ke()),u.qe())}}));let s=Te();this.He.forEach(((u,d)=>{let y=!0;d.forEachWhile((_=>{const b=this.ot(_);return!b||b.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(s=s.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(t)));const o=new xh(t,n,this.Ye,this.je,s);return this.je=ua(),this.Je=Vf(),this.He=Vf(),this.Ye=new cn(be),o}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new B0,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new zn(be),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new zn(be),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||kt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new B0),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Vf(){return new cn(Gt.comparator)}function q0(){return new cn(Gt.comparator)}const qO={asc:"ASCENDING",desc:"DESCENDING"},HO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FO={and:"AND",or:"OR"};class KO{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function ip(i,t){return i.useProto3Json||wh(t)?t:{value:t}}function dh(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function eT(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function GO(i,t){return dh(i,t.toTimestamp())}function _s(i){return Ve(!!i,49232),ne.fromTimestamp((function(n){const s=co(n);return new $e(s.seconds,s.nanos)})(i))}function Hp(i,t){return sp(i,t).canonicalString()}function sp(i,t){const n=(function(o){return new un(["projects",o.projectId,"databases",o.database])})(i).child("documents");return t===void 0?n:n.child(t)}function nT(i){const t=un.fromString(i);return Ve(oT(t),10190,{key:t.toString()}),t}function ap(i,t){return Hp(i.databaseId,t.path)}function Pm(i,t){const n=nT(t);if(n.get(1)!==i.databaseId.projectId)throw new Bt(_t.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Bt(_t.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Gt(iT(n))}function rT(i,t){return Hp(i.databaseId,t)}function YO(i){const t=nT(i);return t.length===4?un.emptyPath():iT(t)}function op(i){return new un(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function iT(i){return Ve(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function H0(i,t,n){return{name:ap(i,t),fields:n.value.mapValue.fields}}function QO(i,t){let n;if("targetChange"in t){t.targetChange;const s=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:Xt(39313,{state:b})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(b,R){return b.useProto3Json?(Ve(R===void 0||typeof R=="string",58123),rr.fromBase64String(R||"")):(Ve(R===void 0||R instanceof Buffer||R instanceof Uint8Array,16193),rr.fromUint8Array(R||new Uint8Array))})(i,t.targetChange.resumeToken),d=t.targetChange.cause,y=d&&(function(b){const R=b.code===void 0?_t.UNKNOWN:Zb(b.code);return new Bt(R,b.message||"")})(d);n=new tT(s,o,u,y||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const o=Pm(i,s.document.name),u=_s(s.document.updateTime),d=s.document.createTime?_s(s.document.createTime):ne.min(),y=new Vi({mapValue:{fields:s.document.fields}}),_=dr.newFoundDocument(o,u,d,y),b=s.targetIds||[],R=s.removedTargetIds||[];n=new Qf(b,R,_.key,_)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const o=Pm(i,s.document),u=s.readTime?_s(s.readTime):ne.min(),d=dr.newNoDocument(o,u),y=s.removedTargetIds||[];n=new Qf([],y,d.key,d)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const o=Pm(i,s.document),u=s.removedTargetIds||[];n=new Qf([],u,o,null)}else{if(!("filter"in t))return Xt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new UO(o,u),y=s.targetId;n=new Wb(y,d)}}return n}function XO(i,t){let n;if(t instanceof Tc)n={update:H0(i,t.key,t.value)};else if(t instanceof Jb)n={delete:ap(i,t.key)};else if(t instanceof el)n={update:H0(i,t.key,t.data),updateMask:i2(t.fieldMask)};else{if(!(t instanceof VO))return Xt(16599,{Vt:t.type});n={verify:ap(i,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(u,d){const y=d.transform;if(y instanceof fh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof fc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof hc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof hh)return{fieldPath:d.field.canonicalString(),increment:y.Ae};throw Xt(20930,{transform:d.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:GO(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Xt(27497)})(i,t.precondition)),n}function $O(i,t){return i&&i.length>0?(Ve(t!==void 0,14353),i.map((n=>(function(o,u){let d=o.updateTime?_s(o.updateTime):_s(u);return d.isEqual(ne.min())&&(d=_s(u)),new NO(d,o.transformResults||[])})(n,t)))):[]}function JO(i,t){return{documents:[rT(i,t.path)]}}function ZO(i,t){const n={structuredQuery:{}},s=t.path;let o;t.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=rT(i,o);const u=(function(b){if(b.length!==0)return aT(As.create(b,"and"))})(t.filters);u&&(n.structuredQuery.where=u);const d=(function(b){if(b.length!==0)return b.map((R=>(function(k){return{field:Ll(k.field),direction:e2(k.dir)}})(R)))})(t.orderBy);d&&(n.structuredQuery.orderBy=d);const y=ip(i,t.limit);return y!==null&&(n.structuredQuery.limit=y),t.startAt&&(n.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(t.endAt)),{ft:n,parent:o}}function WO(i){let t=YO(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ve(s===1,65062);const R=n.from[0];R.allDescendants?o=R.collectionId:t=t.child(R.collectionId)}let u=[];n.where&&(u=(function(O){const k=sT(O);return k instanceof As&&kb(k)?k.getFilters():[k]})(n.where));let d=[];n.orderBy&&(d=(function(O){return O.map((k=>(function(dt){return new ch(zl(dt.field),(function(vt){switch(vt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(dt.direction))})(k)))})(n.orderBy));let y=null;n.limit&&(y=(function(O){let k;return k=typeof O=="object"?O.value:O,wh(k)?null:k})(n.limit));let _=null;n.startAt&&(_=(function(O){const k=!!O.before,J=O.values||[];return new uh(J,k)})(n.startAt));let b=null;return n.endAt&&(b=(function(O){const k=!O.before,J=O.values||[];return new uh(J,k)})(n.endAt)),yO(t,o,d,u,y,"F",_,b)}function t2(i,t){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xt(28987,{purpose:o})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function sT(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=zl(n.unaryFilter.field);return Ln.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=zl(n.unaryFilter.field);return Ln.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=zl(n.unaryFilter.field);return Ln.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=zl(n.unaryFilter.field);return Ln.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Xt(61313);default:return Xt(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Ln.create(zl(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Xt(58110);default:return Xt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return As.create(n.compositeFilter.filters.map((s=>sT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Xt(1026)}})(n.compositeFilter.op))})(i):Xt(30097,{filter:i})}function e2(i){return qO[i]}function n2(i){return HO[i]}function r2(i){return FO[i]}function Ll(i){return{fieldPath:i.canonicalString()}}function zl(i){return nr.fromServerFormat(i.fieldPath)}function aT(i){return i instanceof Ln?(function(n){if(n.op==="=="){if(D0(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NAN"}};if(O0(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(D0(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NOT_NAN"}};if(O0(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ll(n.field),op:n2(n.op),value:n.value}}})(i):i instanceof As?(function(n){const s=n.getFilters().map((o=>aT(o)));return s.length===1?s[0]:{compositeFilter:{op:r2(n.op),filters:s}}})(i):Xt(54877,{filter:i})}function i2(i){const t=[];return i.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function oT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class no{constructor(t,n,s,o,u=ne.min(),d=ne.min(),y=rr.EMPTY_BYTE_STRING,_=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=y,this.expectedCount=_}withSequenceNumber(t){return new no(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class s2{constructor(t){this.yt=t}}function a2(i){const t=WO({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?rp(t,t.limit,"L"):t}class o2{constructor(){this.Cn=new l2}addToCollectionParentIndex(t,n){return this.Cn.add(n),gt.resolve()}getCollectionParents(t,n){return gt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return gt.resolve()}deleteFieldIndex(t,n){return gt.resolve()}deleteAllFieldIndexes(t){return gt.resolve()}createTargetIndexes(t,n){return gt.resolve()}getDocumentsMatchingTarget(t,n){return gt.resolve(null)}getIndexType(t,n){return gt.resolve(0)}getFieldIndexes(t,n){return gt.resolve([])}getNextCollectionGroupToUpdate(t){return gt.resolve(null)}getMinOffset(t,n){return gt.resolve(uo.min())}getMinOffsetFromCollectionGroup(t,n){return gt.resolve(uo.min())}updateCollectionGroup(t,n,s){return gt.resolve()}updateIndexEntries(t,n){return gt.resolve()}}class l2{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n]||new zn(un.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(t){return(this.index[t]||new zn(un.comparator)).toArray()}}const F0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lT=41943040;class Hr{static withCacheSize(t){return new Hr(t,Hr.DEFAULT_COLLECTION_PERCENTILE,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Hr.DEFAULT_COLLECTION_PERCENTILE=10,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hr.DEFAULT=new Hr(lT,Hr.DEFAULT_COLLECTION_PERCENTILE,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hr.DISABLED=new Hr(-1,0,0);class $l{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new $l(0)}static cr(){return new $l(-1)}}const K0="LruGarbageCollector",u2=1048576;function G0([i,t],[n,s]){const o=be(i,n);return o===0?be(t,s):o}class c2{constructor(t){this.Ir=t,this.buffer=new zn(G0),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();G0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class f2{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){kt(K0,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ru(n)?kt(K0,"Ignoring IndexedDB error during garbage collection: ",n):await nu(n)}await this.Vr(3e5)}))}}class h2{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return gt.resolve(Ah.ce);const s=new c2(n);return this.mr.forEachTarget(t,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(kt("LruGarbageCollector","Garbage collection skipped; disabled"),gt.resolve(F0)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(kt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),F0):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,o,u,d,y,_,b;const R=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((O=>(O>this.params.maximumSequenceNumbersToCollect?(kt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),o=this.params.maximumSequenceNumbersToCollect):o=O,d=Date.now(),this.nthSequenceNumber(t,o)))).next((O=>(s=O,y=Date.now(),this.removeTargets(t,s,n)))).next((O=>(u=O,_=Date.now(),this.removeOrphanedDocuments(t,s)))).next((O=>(b=Date.now(),Pl()<=Ee.DEBUG&&kt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-R}ms
	Determined least recently used ${o} in `+(y-d)+`ms
	Removed ${u} targets in `+(_-y)+`ms
	Removed ${O} documents in `+(b-_)+`ms
Total Duration: ${b-R}ms`),gt.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:O}))))}}function d2(i,t){return new h2(i,t)}class m2{constructor(){this.changes=new tl((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,dr.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?gt.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class p2{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}class g2{constructor(t,n,s,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(t,n)))).next((o=>(s!==null&&tc(s.mutation,o,Zi.empty(),$e.now()),o)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,Te()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=Te()){const o=Ho();return this.populateOverlays(t,o,n).next((()=>this.computeViews(t,n,o,s).next((u=>{let d=Ku();return u.forEach(((y,_)=>{d=d.insert(y,_.overlayedDocument)})),d}))))}getOverlayedDocuments(t,n){const s=Ho();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,Te())))}populateOverlays(t,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((d,y)=>{n.set(d,y)}))}))}computeViews(t,n,s,o){let u=ua();const d=Wu(),y=(function(){return Wu()})();return n.forEach(((_,b)=>{const R=s.get(b.key);o.has(b.key)&&(R===void 0||R.mutation instanceof el)?u=u.insert(b.key,b):R!==void 0?(d.set(b.key,R.mutation.getFieldMask()),tc(R.mutation,b,R.mutation.getFieldMask(),$e.now())):d.set(b.key,Zi.empty())})),this.recalculateAndSaveOverlays(t,u).next((_=>(_.forEach(((b,R)=>d.set(b,R))),n.forEach(((b,R)=>y.set(b,new p2(R,d.get(b)??null)))),y)))}recalculateAndSaveOverlays(t,n){const s=Wu();let o=new cn(((d,y)=>d-y)),u=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((d=>{for(const y of d)y.keys().forEach((_=>{const b=n.get(_);if(b===null)return;let R=s.get(_)||Zi.empty();R=y.applyToLocalView(b,R),s.set(_,R);const O=(o.get(y.batchId)||Te()).add(_);o=o.insert(y.batchId,O)}))})).next((()=>{const d=[],y=o.getReverseIterator();for(;y.hasNext();){const _=y.getNext(),b=_.key,R=_.value,O=Hb();R.forEach((k=>{if(!u.has(k)){const J=Xb(n.get(k),s.get(k));J!==null&&O.set(k,J),u=u.add(k)}})),d.push(this.documentOverlayCache.saveOverlays(t,b,O))}return gt.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,o){return(function(d){return Gt.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):vO(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,o):this.getDocumentsMatchingCollectionQuery(t,n,s,o)}getNextDocuments(t,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,o-u.size):gt.resolve(Ho());let y=oc,_=u;return d.next((b=>gt.forEach(b,((R,O)=>(y<O.largestBatchId&&(y=O.largestBatchId),u.get(R)?gt.resolve():this.remoteDocumentCache.getEntry(t,R).next((k=>{_=_.insert(R,k)}))))).next((()=>this.populateOverlays(t,b,u))).next((()=>this.computeViews(t,_,b,Te()))).next((R=>({batchId:y,changes:qb(R)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Gt(n)).next((s=>{let o=Ku();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,o){const u=n.collectionGroup;let d=Ku();return this.indexManager.getCollectionParents(t,u).next((y=>gt.forEach(y,(_=>{const b=(function(O,k){return new Rh(k,null,O.explicitOrderBy.slice(),O.filters.slice(),O.limit,O.limitType,O.startAt,O.endAt)})(n,_.child(u));return this.getDocumentsMatchingCollectionQuery(t,b,s,o).next((R=>{R.forEach(((O,k)=>{d=d.insert(O,k)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(t,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,u,o)))).next((d=>{u.forEach(((_,b)=>{const R=b.getKey();d.get(R)===null&&(d=d.insert(R,dr.newInvalidDocument(R)))}));let y=Ku();return d.forEach(((_,b)=>{const R=u.get(_);R!==void 0&&tc(R.mutation,b,Zi.empty(),$e.now()),Oh(n,b)&&(y=y.insert(_,b))})),y}))}}class y2{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return gt.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:_s(o.createTime)}})(n)),gt.resolve()}getNamedQuery(t,n){return gt.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:a2(o.bundledQuery),readTime:_s(o.readTime)}})(n)),gt.resolve()}}class v2{constructor(){this.overlays=new cn(Gt.comparator),this.qr=new Map}getOverlay(t,n){return gt.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Ho();return gt.forEach(n,(o=>this.getOverlay(t,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((o,u)=>{this.St(t,n,u)})),gt.resolve()}removeOverlaysForBatchId(t,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),gt.resolve()}getOverlaysForCollection(t,n,s){const o=Ho(),u=n.length+1,d=new Gt(n.child("")),y=this.overlays.getIteratorFrom(d);for(;y.hasNext();){const _=y.getNext().value,b=_.getKey();if(!n.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>s&&o.set(_.getKey(),_)}return gt.resolve(o)}getOverlaysForCollectionGroup(t,n,s,o){let u=new cn(((b,R)=>b-R));const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===n&&b.largestBatchId>s){let R=u.get(b.largestBatchId);R===null&&(R=Ho(),u=u.insert(b.largestBatchId,R)),R.set(b.getKey(),b)}}const y=Ho(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((b,R)=>y.set(b,R))),!(y.size()>=o)););return gt.resolve(y)}St(t,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new PO(n,s));let u=this.qr.get(n);u===void 0&&(u=Te(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class _2{constructor(){this.sessionToken=rr.EMPTY_BYTE_STRING}getSessionToken(t){return gt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,gt.resolve()}}class Fp{constructor(){this.Qr=new zn(Yn.$r),this.Ur=new zn(Yn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new Yn(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new Yn(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new Gt(new un([])),s=new Yn(n,t),o=new Yn(n,t+1),u=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Gt(new un([])),s=new Yn(n,t),o=new Yn(n,t+1);let u=Te();return this.Ur.forEachInRange([s,o],(d=>{u=u.add(d.key)})),u}containsKey(t){const n=new Yn(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Yn{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Gt.comparator(t.key,n.key)||be(t.Yr,n.Yr)}static Kr(t,n){return be(t.Yr,n.Yr)||Gt.comparator(t.key,n.key)}}class E2{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new zn(Yn.$r)}checkEmpty(t){return gt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new kO(u,n,s,o);this.mutationQueue.push(d);for(const y of o)this.Zr=this.Zr.add(new Yn(y.key,u)),this.indexManager.addToCollectionParentIndex(t,y.key.path.popLast());return gt.resolve(d)}lookupMutationBatch(t,n){return gt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return gt.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return gt.resolve(this.mutationQueue.length===0?Vp:this.tr-1)}getAllMutationBatches(t){return gt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Yn(n,0),o=new Yn(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(d=>{const y=this.Xr(d.Yr);u.push(y)})),gt.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new zn(be);return n.forEach((o=>{const u=new Yn(o,0),d=new Yn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(y=>{s=s.add(y.Yr)}))})),gt.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,o=s.length+1;let u=s;Gt.isDocumentKey(u)||(u=u.child(""));const d=new Yn(new Gt(u),0);let y=new zn(be);return this.Zr.forEachWhile((_=>{const b=_.key.path;return!!s.isPrefixOf(b)&&(b.length===o&&(y=y.add(_.Yr)),!0)}),d),gt.resolve(this.ti(y))}ti(t){const n=[];return t.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(t,n){Ve(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return gt.forEach(n.mutations,(o=>{const u=new Yn(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new Yn(n,0),o=this.Zr.firstAfterOrEqual(s);return gt.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,gt.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class b2{constructor(t){this.ri=t,this.docs=(function(){return new cn(Gt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return gt.resolve(s?s.document.mutableCopy():dr.newInvalidDocument(n))}getEntries(t,n){let s=ua();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():dr.newInvalidDocument(o))})),gt.resolve(s)}getDocumentsMatchingQuery(t,n,s,o){let u=ua();const d=n.path,y=new Gt(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(y);for(;_.hasNext();){const{key:b,value:{document:R}}=_.getNext();if(!d.isPrefixOf(b.path))break;b.path.length>d.length+1||XI(QI(R),s)<=0||(o.has(R.key)||Oh(n,R))&&(u=u.insert(R.key,R.mutableCopy()))}return gt.resolve(u)}getAllFromCollectionGroup(t,n,s,o){Xt(9500)}ii(t,n){return gt.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new T2(this)}getSize(t){return gt.resolve(this.size)}}class T2 extends m2{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(s)})),gt.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}class S2{constructor(t){this.persistence=t,this.si=new tl((n=>Up(n)),Lp),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.oi=0,this._i=new Fp,this.targetCount=0,this.ai=$l.ur()}forEachTarget(t,n){return this.si.forEach(((s,o)=>n(o))),gt.resolve()}getLastRemoteSnapshotVersion(t){return gt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return gt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),gt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),gt.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new $l(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,gt.resolve()}updateTargetData(t,n){return this.Pr(n),gt.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,gt.resolve()}removeTargets(t,n,s){let o=0;const u=[];return this.si.forEach(((d,y)=>{y.sequenceNumber<=n&&s.get(y.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(t,y.targetId)),o++)})),gt.waitFor(u).next((()=>o))}getTargetCount(t){return gt.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return gt.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),gt.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(t,d))})),gt.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),gt.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return gt.resolve(s)}containsKey(t,n){return gt.resolve(this._i.containsKey(n))}}class uT{constructor(t,n){this.ui={},this.overlays={},this.ci=new Ah(0),this.li=!1,this.li=!0,this.hi=new _2,this.referenceDelegate=t(this),this.Pi=new S2(this),this.indexManager=new o2,this.remoteDocumentCache=(function(o){return new b2(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new s2(n),this.Ii=new y2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new v2,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new E2(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){kt("MemoryPersistence","Starting transaction:",t);const o=new A2(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,n){return gt.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class A2 extends JI{constructor(t){super(),this.currentSequenceNumber=t}}class Kp{constructor(t){this.persistence=t,this.Ri=new Fp,this.Vi=null}static mi(t){return new Kp(t)}get fi(){if(this.Vi)return this.Vi;throw Xt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),gt.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),gt.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),gt.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gt.forEach(this.fi,(s=>{const o=Gt.fromPath(s);return this.gi(t,o).next((u=>{u||n.removeEntry(o,ne.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return gt.or([()=>gt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class mh{constructor(t,n){this.persistence=t,this.pi=new tl((s=>tO(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=d2(this,n)}static mi(t,n){return new mh(t,n)}Ei(){}di(t){return gt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((o=>s+o))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return gt.forEach(this.pi,((s,o)=>this.br(t,s,o).next((u=>u?gt.resolve():n(o)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(d=>this.br(t,d,n).next((y=>{y||(s++,u.removeEntry(d,ne.min()))})))).next((()=>u.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),gt.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),gt.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),gt.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),gt.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Kf(t.data.value)),n}br(t,n,s){return gt.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const o=this.pi.get(n);return gt.resolve(o!==void 0&&o>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class Gp{constructor(t,n,s,o){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=o}static As(t,n){let s=Te(),o=Te();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Gp(t,n.fromCache,s,o)}}class w2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class C2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return p1()?8:ZI(pr())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,o){const u={result:null};return this.ys(t,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(t,n,o,s).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new w2;return this.Ss(t,n,d).next((y=>{if(u.result=y,this.Vs)return this.bs(t,n,d,y.size)}))})).next((()=>u.result))}bs(t,n,s,o){return s.documentReadCount<this.fs?(Pl()<=Ee.DEBUG&&kt("QueryEngine","SDK will not create cache indexes for query:",Ul(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),gt.resolve()):(Pl()<=Ee.DEBUG&&kt("QueryEngine","Query:",Ul(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Pl()<=Ee.DEBUG&&kt("QueryEngine","The SDK decides to create cache indexes for query:",Ul(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,vs(n))):gt.resolve())}ys(t,n){if(V0(n))return gt.resolve(null);let s=vs(n);return this.indexManager.getIndexType(t,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=rp(n,null,"F"),s=vs(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((u=>{const d=Te(...u);return this.ps.getDocuments(t,d).next((y=>this.indexManager.getMinOffset(t,s).next((_=>{const b=this.Ds(n,y);return this.Cs(n,b,d,_.readTime)?this.ys(t,rp(n,null,"F")):this.vs(t,b,n,_)}))))})))))}ws(t,n,s,o){return V0(n)||o.isEqual(ne.min())?gt.resolve(null):this.ps.getDocuments(t,s).next((u=>{const d=this.Ds(n,u);return this.Cs(n,d,s,o)?gt.resolve(null):(Pl()<=Ee.DEBUG&&kt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ul(n)),this.vs(t,d,n,YI(o,oc)).next((y=>y)))}))}Ds(t,n){let s=new zn(jb(t));return n.forEach(((o,u)=>{Oh(t,u)&&(s=s.add(u))})),s}Cs(t,n,s,o){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,n,s){return Pl()<=Ee.DEBUG&&kt("QueryEngine","Using full collection scan to execute query:",Ul(n)),this.ps.getDocumentsMatchingQuery(t,n,uo.min(),s)}vs(t,n,s,o){return this.ps.getDocumentsMatchingQuery(t,s,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const Yp="LocalStore",R2=3e8;class I2{constructor(t,n,s,o){this.persistence=t,this.Fs=n,this.serializer=o,this.Ms=new cn(be),this.xs=new tl((u=>Up(u)),Lp),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new g2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function O2(i,t,n,s){return new I2(i,t,n,s)}async function cT(i,t){const n=ie(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const d=[],y=[];let _=Te();for(const b of o){d.push(b.batchId);for(const R of b.mutations)_=_.add(R.key)}for(const b of u){y.push(b.batchId);for(const R of b.mutations)_=_.add(R.key)}return n.localDocuments.getDocuments(s,_).next((b=>({Ls:b,removedBatchIds:d,addedBatchIds:y})))}))}))}function D2(i,t){const n=ie(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=t.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,_,b,R){const O=b.batch,k=O.keys();let J=gt.resolve();return k.forEach((dt=>{J=J.next((()=>R.getEntry(_,dt))).next((yt=>{const vt=b.docVersions.get(dt);Ve(vt!==null,48541),yt.version.compareTo(vt)<0&&(O.applyToRemoteDocument(yt,b),yt.isValidDocument()&&(yt.setReadTime(b.commitVersion),R.addEntry(yt)))}))})),J.next((()=>y.mutationQueue.removeMutationBatch(_,O)))})(n,s,t,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(y){let _=Te();for(let b=0;b<y.mutationResults.length;++b)y.mutationResults[b].transformResults.length>0&&(_=_.add(y.batch.mutations[b].key));return _})(t)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function fT(i){const t=ie(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function N2(i,t){const n=ie(i),s=t.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const y=[];t.targetChanges.forEach(((R,O)=>{const k=o.get(O);if(!k)return;y.push(n.Pi.removeMatchingKeys(u,R.removedDocuments,O).next((()=>n.Pi.addMatchingKeys(u,R.addedDocuments,O))));let J=k.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(O)!==null?J=J.withResumeToken(rr.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):R.resumeToken.approximateByteSize()>0&&(J=J.withResumeToken(R.resumeToken,s)),o=o.insert(O,J),(function(yt,vt,qt){return yt.resumeToken.approximateByteSize()===0||vt.snapshotVersion.toMicroseconds()-yt.snapshotVersion.toMicroseconds()>=R2?!0:qt.addedDocuments.size+qt.modifiedDocuments.size+qt.removedDocuments.size>0})(k,J,R)&&y.push(n.Pi.updateTargetData(u,J))}));let _=ua(),b=Te();if(t.documentUpdates.forEach((R=>{t.resolvedLimboDocuments.has(R)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(u,R))})),y.push(x2(u,d,t.documentUpdates).next((R=>{_=R.ks,b=R.qs}))),!s.isEqual(ne.min())){const R=n.Pi.getLastRemoteSnapshotVersion(u).next((O=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));y.push(R)}return gt.waitFor(y).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,_,b))).next((()=>_))})).then((u=>(n.Ms=o,u)))}function x2(i,t,n){let s=Te(),o=Te();return n.forEach((u=>s=s.add(u))),t.getEntries(i,s).next((u=>{let d=ua();return n.forEach(((y,_)=>{const b=u.get(y);_.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(y)),_.isNoDocument()&&_.version.isEqual(ne.min())?(t.removeEntry(y,_.readTime),d=d.insert(y,_)):!b.isValidDocument()||_.version.compareTo(b.version)>0||_.version.compareTo(b.version)===0&&b.hasPendingWrites?(t.addEntry(_),d=d.insert(y,_)):kt(Yp,"Ignoring outdated watch update for ",y,". Current version:",b.version," Watch version:",_.version)})),{ks:d,qs:o}}))}function M2(i,t){const n=ie(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Vp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function V2(i,t){const n=ie(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,t).next((u=>u?(o=u,gt.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new no(t,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function lp(i,t,n){const s=ie(i),o=s.Ms.get(t),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!ru(d))throw d;kt(Yp,`Failed to update sequence numbers for target ${t}: ${d}`)}s.Ms=s.Ms.remove(t),s.xs.delete(o.target)}function Y0(i,t,n){const s=ie(i);let o=ne.min(),u=Te();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(_,b,R){const O=ie(_),k=O.xs.get(R);return k!==void 0?gt.resolve(O.Ms.get(k)):O.Pi.getTargetData(b,R)})(s,d,vs(t)).next((y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,y.targetId).next((_=>{u=_}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,t,n?o:ne.min(),n?u:Te()))).next((y=>(k2(s,EO(t),y),{documents:y,Qs:u})))))}function k2(i,t,n){let s=i.Os.get(t)||ne.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(t,s)}class Q0{constructor(){this.activeTargetIds=CO()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class P2{constructor(){this.Mo=new Q0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Q0,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class U2{Oo(t){}shutdown(){}}const X0="ConnectivityMonitor";class $0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){kt(X0,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){kt(X0,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let kf=null;function up(){return kf===null?kf=(function(){return 268435456+Math.round(2147483648*Math.random())})():kf++,"0x"+kf.toString(16)}const Um="RestConnection",L2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class z2{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===oh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(t,n,s,o,u){const d=up(),y=this.zo(t,n.toUriEncodedString());kt(Um,`Sending RPC '${t}' ${d}:`,y,s);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,o,u);const{host:b}=new URL(y),R=Zl(b);return this.Jo(t,y,_,s,R).then((O=>(kt(Um,`Received RPC '${t}' ${d}: `,O),O)),(O=>{throw Gl(Um,`RPC '${t}' ${d} failed with error: `,O,"url: ",y,"request:",s),O}))}Ho(t,n,s,o,u,d){return this.Go(t,n,s,o,u)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+eu})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>t[u]=o)),s&&s.headers.forEach(((o,u)=>t[u]=o))}zo(t,n){const s=L2[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class j2{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const cr="WebChannelConnection";class B2 extends z2{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,o,u){const d=up();return new Promise(((y,_)=>{const b=new pb;b.setWithCredentials(!0),b.listenOnce(gb.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case Ff.NO_ERROR:const O=b.getResponseJson();kt(cr,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(O)),y(O);break;case Ff.TIMEOUT:kt(cr,`RPC '${t}' ${d} timed out`),_(new Bt(_t.DEADLINE_EXCEEDED,"Request time out"));break;case Ff.HTTP_ERROR:const k=b.getStatus();if(kt(cr,`RPC '${t}' ${d} failed with status:`,k,"response text:",b.getResponseText()),k>0){let J=b.getResponseJson();Array.isArray(J)&&(J=J[0]);const dt=J?.error;if(dt&&dt.status&&dt.message){const yt=(function(qt){const Kt=qt.toLowerCase().replace(/_/g,"-");return Object.values(_t).indexOf(Kt)>=0?Kt:_t.UNKNOWN})(dt.status);_(new Bt(yt,dt.message))}else _(new Bt(_t.UNKNOWN,"Server responded with status "+b.getStatus()))}else _(new Bt(_t.UNAVAILABLE,"Connection failed."));break;default:Xt(9055,{l_:t,streamId:d,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{kt(cr,`RPC '${t}' ${d} completed.`)}}));const R=JSON.stringify(o);kt(cr,`RPC '${t}' ${d} sending request:`,o),b.send(n,"POST",R,s,15)}))}T_(t,n,s){const o=up(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=_b(),y=vb(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(_.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,n,s),_.encodeInitMessageHeaders=!0;const R=u.join("");kt(cr,`Creating RPC '${t}' stream ${o}: ${R}`,_);const O=d.createWebChannel(R,_);this.I_(O);let k=!1,J=!1;const dt=new j2({Yo:vt=>{J?kt(cr,`Not sending because RPC '${t}' stream ${o} is closed:`,vt):(k||(kt(cr,`Opening RPC '${t}' stream ${o} transport.`),O.open(),k=!0),kt(cr,`RPC '${t}' stream ${o} sending:`,vt),O.send(vt))},Zo:()=>O.close()}),yt=(vt,qt,Kt)=>{vt.listen(qt,(Ut=>{try{Kt(Ut)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return yt(O,Fu.EventType.OPEN,(()=>{J||(kt(cr,`RPC '${t}' stream ${o} transport opened.`),dt.o_())})),yt(O,Fu.EventType.CLOSE,(()=>{J||(J=!0,kt(cr,`RPC '${t}' stream ${o} transport closed`),dt.a_(),this.E_(O))})),yt(O,Fu.EventType.ERROR,(vt=>{J||(J=!0,Gl(cr,`RPC '${t}' stream ${o} transport errored. Name:`,vt.name,"Message:",vt.message),dt.a_(new Bt(_t.UNAVAILABLE,"The operation could not be completed")))})),yt(O,Fu.EventType.MESSAGE,(vt=>{if(!J){const qt=vt.data[0];Ve(!!qt,16349);const Kt=qt,Ut=Kt?.error||Kt[0]?.error;if(Ut){kt(cr,`RPC '${t}' stream ${o} received error:`,Ut);const ue=Ut.status;let xe=(function(N){const P=xn[N];if(P!==void 0)return Zb(P)})(ue),Zt=Ut.message;xe===void 0&&(xe=_t.INTERNAL,Zt="Unknown error status: "+ue+" with message "+Ut.message),J=!0,dt.a_(new Bt(xe,Zt)),O.close()}else kt(cr,`RPC '${t}' stream ${o} received:`,qt),dt.u_(qt)}})),yt(y,yb.STAT_EVENT,(vt=>{vt.stat===Jm.PROXY?kt(cr,`RPC '${t}' stream ${o} detected buffering proxy`):vt.stat===Jm.NOPROXY&&kt(cr,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{dt.__()}),0),dt}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Lm(){return typeof document<"u"?document:null}function Mh(i){return new KO(i,!0)}class hT{constructor(t,n,s=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&kt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const J0="PersistentStream";class dT{constructor(t,n,s,o,u,d,y,_){this.Mi=t,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=y,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hT(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===_t.RESOURCE_EXHAUSTED?(la(n.toString()),la("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===_t.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{t((()=>{const o=new Bt(_t.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return kt(J0,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(kt(J0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class q2 extends dT{constructor(t,n,s,o,u,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=QO(this.serializer,t),s=(function(u){if(!("targetChange"in u))return ne.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?ne.min():d.readTime?_s(d.readTime):ne.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=op(this.serializer),n.addTarget=(function(u,d){let y;const _=d.target;if(y=np(_)?{documents:JO(u,_)}:{query:ZO(u,_).ft},y.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){y.resumeToken=eT(u,d.resumeToken);const b=ip(u,d.expectedCount);b!==null&&(y.expectedCount=b)}else if(d.snapshotVersion.compareTo(ne.min())>0){y.readTime=dh(u,d.snapshotVersion.toTimestamp());const b=ip(u,d.expectedCount);b!==null&&(y.expectedCount=b)}return y})(this.serializer,t);const s=t2(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=op(this.serializer),n.removeTarget=t,this.q_(n)}}class H2 extends dT{constructor(t,n,s,o,u,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Ve(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ve(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Ve(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=$O(t.writeResults,t.commitTime),s=_s(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=op(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>XO(this.serializer,s)))};this.q_(n)}}class F2{}class K2 extends F2{constructor(t,n,s,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Bt(_t.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(t,sp(n,s),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===_t.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Bt(_t.UNKNOWN,u.toString())}))}Ho(t,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,y])=>this.connection.Ho(t,sp(n,s),o,d,y,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===_t.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Bt(_t.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class G2{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(la(n),this.aa=!1):kt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Zo="RemoteStore";class Y2{constructor(t,n,s,o,u){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{nl(this)&&(kt(Zo,"Restarting streams for network reachability change."),await(async function(_){const b=ie(_);b.Ea.add(4),await Ac(b),b.Ra.set("Unknown"),b.Ea.delete(4),await Vh(b)})(this))}))})),this.Ra=new G2(s,o)}}async function Vh(i){if(nl(i))for(const t of i.da)await t(!0)}async function Ac(i){for(const t of i.da)await t(!1)}function mT(i,t){const n=ie(i);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Jp(n)?$p(n):iu(n).O_()&&Xp(n,t))}function Qp(i,t){const n=ie(i),s=iu(n);n.Ia.delete(t),s.O_()&&pT(n,t),n.Ia.size===0&&(s.O_()?s.L_():nl(n)&&n.Ra.set("Unknown"))}function Xp(i,t){if(i.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ne.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}iu(i).Y_(t)}function pT(i,t){i.Va.Ue(t),iu(i).Z_(t)}function $p(i){i.Va=new BO({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),At:t=>i.Ia.get(t)||null,ht:()=>i.datastore.serializer.databaseId}),iu(i).start(),i.Ra.ua()}function Jp(i){return nl(i)&&!iu(i).x_()&&i.Ia.size>0}function nl(i){return ie(i).Ea.size===0}function gT(i){i.Va=void 0}async function Q2(i){i.Ra.set("Online")}async function X2(i){i.Ia.forEach(((t,n)=>{Xp(i,t)}))}async function $2(i,t){gT(i),Jp(i)?(i.Ra.ha(t),$p(i)):i.Ra.set("Unknown")}async function J2(i,t,n){if(i.Ra.set("Online"),t instanceof tT&&t.state===2&&t.cause)try{await(async function(o,u){const d=u.cause;for(const y of u.targetIds)o.Ia.has(y)&&(await o.remoteSyncer.rejectListen(y,d),o.Ia.delete(y),o.Va.removeTarget(y))})(i,t)}catch(s){kt(Zo,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await ph(i,s)}else if(t instanceof Qf?i.Va.Ze(t):t instanceof Wb?i.Va.st(t):i.Va.tt(t),!n.isEqual(ne.min()))try{const s=await fT(i.localStore);n.compareTo(s)>=0&&await(function(u,d){const y=u.Va.Tt(d);return y.targetChanges.forEach(((_,b)=>{if(_.resumeToken.approximateByteSize()>0){const R=u.Ia.get(b);R&&u.Ia.set(b,R.withResumeToken(_.resumeToken,d))}})),y.targetMismatches.forEach(((_,b)=>{const R=u.Ia.get(_);if(!R)return;u.Ia.set(_,R.withResumeToken(rr.EMPTY_BYTE_STRING,R.snapshotVersion)),pT(u,_);const O=new no(R.target,_,b,R.sequenceNumber);Xp(u,O)})),u.remoteSyncer.applyRemoteEvent(y)})(i,n)}catch(s){kt(Zo,"Failed to raise snapshot:",s),await ph(i,s)}}async function ph(i,t,n){if(!ru(t))throw t;i.Ea.add(1),await Ac(i),i.Ra.set("Offline"),n||(n=()=>fT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{kt(Zo,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Vh(i)}))}function yT(i,t){return t().catch((n=>ph(i,n,t)))}async function kh(i){const t=ie(i),n=mo(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Vp;for(;Z2(t);)try{const o=await M2(t.localStore,s);if(o===null){t.Ta.length===0&&n.L_();break}s=o.batchId,W2(t,o)}catch(o){await ph(t,o)}vT(t)&&_T(t)}function Z2(i){return nl(i)&&i.Ta.length<10}function W2(i,t){i.Ta.push(t);const n=mo(i);n.O_()&&n.X_&&n.ea(t.mutations)}function vT(i){return nl(i)&&!mo(i).x_()&&i.Ta.length>0}function _T(i){mo(i).start()}async function tD(i){mo(i).ra()}async function eD(i){const t=mo(i);for(const n of i.Ta)t.ea(n.mutations)}async function nD(i,t,n){const s=i.Ta.shift(),o=Bp.from(s,t,n);await yT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await kh(i)}async function rD(i,t){t&&mo(i).X_&&await(async function(s,o){if((function(d){return LO(d)&&d!==_t.ABORTED})(o.code)){const u=s.Ta.shift();mo(s).B_(),await yT(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await kh(s)}})(i,t),vT(i)&&_T(i)}async function Z0(i,t){const n=ie(i);n.asyncQueue.verifyOperationInProgress(),kt(Zo,"RemoteStore received new credentials");const s=nl(n);n.Ea.add(3),await Ac(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Vh(n)}async function iD(i,t){const n=ie(i);t?(n.Ea.delete(2),await Vh(n)):t||(n.Ea.add(2),await Ac(n),n.Ra.set("Unknown"))}function iu(i){return i.ma||(i.ma=(function(n,s,o){const u=ie(n);return u.sa(),new q2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:Q2.bind(null,i),t_:X2.bind(null,i),r_:$2.bind(null,i),H_:J2.bind(null,i)}),i.da.push((async t=>{t?(i.ma.B_(),Jp(i)?$p(i):i.Ra.set("Unknown")):(await i.ma.stop(),gT(i))}))),i.ma}function mo(i){return i.fa||(i.fa=(function(n,s,o){const u=ie(n);return u.sa(),new H2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:tD.bind(null,i),r_:rD.bind(null,i),ta:eD.bind(null,i),na:nD.bind(null,i)}),i.da.push((async t=>{t?(i.fa.B_(),await kh(i)):(await i.fa.stop(),i.Ta.length>0&&(kt(Zo,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Zp{constructor(t,n,s,o,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new lo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,o,u){const d=Date.now()+s,y=new Zp(t,n,d,o,u);return y.start(s),y}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Bt(_t.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wp(i,t){if(la("AsyncQueue",`${t}: ${i}`),ru(i))return new Bt(_t.UNAVAILABLE,`${t}: ${i}`);throw i}class Hl{static emptySet(t){return new Hl(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||Gt.comparator(n.key,s.key):(n,s)=>Gt.comparator(n.key,s.key),this.keyedMap=Ku(),this.sortedSet=new cn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Hl)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Hl;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}class W0{constructor(){this.ga=new cn(Gt.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Xt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class Jl{constructor(t,n,s,o,u,d,y,_,b){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=y,this.excludesMetadataChanges=_,this.hasCachedResults=b}static fromInitialDocuments(t,n,s,o,u){const d=[];return n.forEach((y=>{d.push({type:0,doc:y})})),new Jl(t,n,Hl.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ih(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class sD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class aD{constructor(){this.queries=tE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=ie(n),u=o.queries;o.queries=tE(),u.forEach(((d,y)=>{for(const _ of y.Sa)_.onError(s)}))})(this,new Bt(_t.ABORTED,"Firestore shutting down"))}}function tE(){return new tl((i=>zb(i)),Ih)}async function oD(i,t){const n=ie(i);let s=3;const o=t.query;let u=n.queries.get(o);u?!u.ba()&&t.Da()&&(s=2):(u=new sD,s=t.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const y=Wp(d,`Initialization of query '${Ul(t.query)}' failed`);return void t.onError(y)}n.queries.set(o,u),u.Sa.push(t),t.va(n.onlineState),u.wa&&t.Fa(u.wa)&&tg(n)}async function lD(i,t){const n=ie(i),s=t.query;let o=3;const u=n.queries.get(s);if(u){const d=u.Sa.indexOf(t);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function uD(i,t){const n=ie(i);let s=!1;for(const o of t){const u=o.query,d=n.queries.get(u);if(d){for(const y of d.Sa)y.Fa(o)&&(s=!0);d.wa=o}}s&&tg(n)}function cD(i,t,n){const s=ie(i),o=s.queries.get(t);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(t)}function tg(i){i.Ca.forEach((t=>{t.next()}))}var cp,eE;(eE=cp||(cp={})).Ma="default",eE.Cache="cache";class fD{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const o of t.docChanges)o.type!==3&&s.push(o);t=new Jl(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Jl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==cp.Cache}}class ET{constructor(t){this.key=t}}class bT{constructor(t){this.key=t}}class hD{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Te(),this.mutatedKeys=Te(),this.eu=jb(t),this.tu=new Hl(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new W0,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,y=!1;const _=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((R,O)=>{const k=o.get(R),J=Oh(this.query,O)?O:null,dt=!!k&&this.mutatedKeys.has(k.key),yt=!!J&&(J.hasLocalMutations||this.mutatedKeys.has(J.key)&&J.hasCommittedMutations);let vt=!1;k&&J?k.data.isEqual(J.data)?dt!==yt&&(s.track({type:3,doc:J}),vt=!0):this.su(k,J)||(s.track({type:2,doc:J}),vt=!0,(_&&this.eu(J,_)>0||b&&this.eu(J,b)<0)&&(y=!0)):!k&&J?(s.track({type:0,doc:J}),vt=!0):k&&!J&&(s.track({type:1,doc:k}),vt=!0,(_||b)&&(y=!0)),vt&&(J?(d=d.add(J),u=yt?u.add(R):u.delete(R)):(d=d.delete(R),u=u.delete(R)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const R=this.query.limitType==="F"?d.last():d.first();d=d.delete(R.key),u=u.delete(R.key),s.track({type:1,doc:R})}return{tu:d,iu:s,Cs:y,mutatedKeys:u}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort(((R,O)=>(function(J,dt){const yt=vt=>{switch(vt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xt(20277,{Rt:vt})}};return yt(J)-yt(dt)})(R.type,O.type)||this.eu(R.doc,O.doc))),this.ou(s),o=o??!1;const y=n&&!o?this._u():[],_=this.Xa.size===0&&this.current&&!o?1:0,b=_!==this.Za;return this.Za=_,d.length!==0||b?{snapshot:new Jl(this.query,t.tu,u,d,t.mutatedKeys,_===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new W0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Te(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new bT(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new ET(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=Te();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Jl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const eg="SyncEngine";class dD{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class mD{constructor(t){this.key=t,this.hu=!1}}class pD{constructor(t,n,s,o,u,d){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new tl((y=>zb(y)),Ih),this.Iu=new Map,this.Eu=new Set,this.du=new cn(Gt.comparator),this.Au=new Map,this.Ru=new Fp,this.Vu={},this.mu=new Map,this.fu=$l.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function gD(i,t,n=!0){const s=RT(i);let o;const u=s.Tu.get(t);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await TT(s,t,n,!0),o}async function yD(i,t){const n=RT(i);await TT(n,t,!0,!1)}async function TT(i,t,n,s){const o=await V2(i.localStore,vs(t)),u=o.targetId,d=i.sharedClientState.addLocalQueryTarget(u,n);let y;return s&&(y=await vD(i,t,u,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&mT(i.remoteStore,o),y}async function vD(i,t,n,s,o){i.pu=(O,k,J)=>(async function(yt,vt,qt,Kt){let Ut=vt.view.ru(qt);Ut.Cs&&(Ut=await Y0(yt.localStore,vt.query,!1).then((({documents:M})=>vt.view.ru(M,Ut))));const ue=Kt&&Kt.targetChanges.get(vt.targetId),xe=Kt&&Kt.targetMismatches.get(vt.targetId)!=null,Zt=vt.view.applyChanges(Ut,yt.isPrimaryClient,ue,xe);return rE(yt,vt.targetId,Zt.au),Zt.snapshot})(i,O,k,J);const u=await Y0(i.localStore,t,!0),d=new hD(t,u.Qs),y=d.ru(u.documents),_=Sc.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),b=d.applyChanges(y,i.isPrimaryClient,_);rE(i,n,b.au);const R=new dD(t,n,d);return i.Tu.set(t,R),i.Iu.has(n)?i.Iu.get(n).push(t):i.Iu.set(n,[t]),b.snapshot}async function _D(i,t,n){const s=ie(i),o=s.Tu.get(t),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((d=>!Ih(d,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await lp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Qp(s.remoteStore,o.targetId),fp(s,o.targetId)})).catch(nu)):(fp(s,o.targetId),await lp(s.localStore,o.targetId,!0))}async function ED(i,t){const n=ie(i),s=n.Tu.get(t),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Qp(n.remoteStore,s.targetId))}async function bD(i,t,n){const s=ID(i);try{const o=await(function(d,y){const _=ie(d),b=$e.now(),R=y.reduce(((J,dt)=>J.add(dt.key)),Te());let O,k;return _.persistence.runTransaction("Locally write mutations","readwrite",(J=>{let dt=ua(),yt=Te();return _.Ns.getEntries(J,R).next((vt=>{dt=vt,dt.forEach(((qt,Kt)=>{Kt.isValidDocument()||(yt=yt.add(qt))}))})).next((()=>_.localDocuments.getOverlayedDocuments(J,dt))).next((vt=>{O=vt;const qt=[];for(const Kt of y){const Ut=MO(Kt,O.get(Kt.key).overlayedDocument);Ut!=null&&qt.push(new el(Kt.key,Ut,xb(Ut.value.mapValue),ia.exists(!0)))}return _.mutationQueue.addMutationBatch(J,b,qt,y)})).next((vt=>{k=vt;const qt=vt.applyToLocalDocumentSet(O,yt);return _.documentOverlayCache.saveOverlays(J,vt.batchId,qt)}))})).then((()=>({batchId:k.batchId,changes:qb(O)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(o.batchId),(function(d,y,_){let b=d.Vu[d.currentUser.toKey()];b||(b=new cn(be)),b=b.insert(y,_),d.Vu[d.currentUser.toKey()]=b})(s,o.batchId,n),await wc(s,o.changes),await kh(s.remoteStore)}catch(o){const u=Wp(o,"Failed to persist write");n.reject(u)}}async function ST(i,t){const n=ie(i);try{const s=await N2(n.localStore,t);t.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(Ve(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Ve(d.hu,14607):o.removedDocuments.size>0&&(Ve(d.hu,42227),d.hu=!1))})),await wc(n,s,t)}catch(s){await nu(s)}}function nE(i,t,n){const s=ie(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,d)=>{const y=d.view.va(t);y.snapshot&&o.push(y.snapshot)})),(function(d,y){const _=ie(d);_.onlineState=y;let b=!1;_.queries.forEach(((R,O)=>{for(const k of O.Sa)k.va(y)&&(b=!0)})),b&&tg(_)})(s.eventManager,t),o.length&&s.Pu.H_(o),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function TD(i,t,n){const s=ie(i);s.sharedClientState.updateQueryState(t,"rejected",n);const o=s.Au.get(t),u=o&&o.key;if(u){let d=new cn(Gt.comparator);d=d.insert(u,dr.newNoDocument(u,ne.min()));const y=Te().add(u),_=new xh(ne.min(),new Map,new cn(be),d,y);await ST(s,_),s.du=s.du.remove(u),s.Au.delete(t),ng(s)}else await lp(s.localStore,t,!1).then((()=>fp(s,t,n))).catch(nu)}async function SD(i,t){const n=ie(i),s=t.batch.batchId;try{const o=await D2(n.localStore,t);wT(n,s,null),AT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await wc(n,o)}catch(o){await nu(o)}}async function AD(i,t,n){const s=ie(i);try{const o=await(function(d,y){const _=ie(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let R;return _.mutationQueue.lookupMutationBatch(b,y).next((O=>(Ve(O!==null,37113),R=O.keys(),_.mutationQueue.removeMutationBatch(b,O)))).next((()=>_.mutationQueue.performConsistencyCheck(b))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(b,R,y))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,R))).next((()=>_.localDocuments.getDocuments(b,R)))}))})(s.localStore,t);wT(s,t,n),AT(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await wc(s,o)}catch(o){await nu(o)}}function AT(i,t){(i.mu.get(t)||[]).forEach((n=>{n.resolve()})),i.mu.delete(t)}function wT(i,t,n){const s=ie(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(t);u&&(n?u.reject(n):u.resolve(),o=o.remove(t)),s.Vu[s.currentUser.toKey()]=o}}function fp(i,t,n=null){i.sharedClientState.removeLocalQueryTarget(t);for(const s of i.Iu.get(t))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(t),i.isPrimaryClient&&i.Ru.jr(t).forEach((s=>{i.Ru.containsKey(s)||CT(i,s)}))}function CT(i,t){i.Eu.delete(t.path.canonicalString());const n=i.du.get(t);n!==null&&(Qp(i.remoteStore,n),i.du=i.du.remove(t),i.Au.delete(n),ng(i))}function rE(i,t,n){for(const s of n)s instanceof ET?(i.Ru.addReference(s.key,t),wD(i,s)):s instanceof bT?(kt(eg,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,t),i.Ru.containsKey(s.key)||CT(i,s.key)):Xt(19791,{wu:s})}function wD(i,t){const n=t.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(kt(eg,"New document in limbo: "+n),i.Eu.add(s),ng(i))}function ng(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const t=i.Eu.values().next().value;i.Eu.delete(t);const n=new Gt(un.fromString(t)),s=i.fu.next();i.Au.set(s,new mD(n)),i.du=i.du.insert(n,s),mT(i.remoteStore,new no(vs(zp(n.path)),s,"TargetPurposeLimboResolution",Ah.ce))}}async function wc(i,t,n){const s=ie(i),o=[],u=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((y,_)=>{d.push(s.pu(_,t,n).then((b=>{if((b||n)&&s.isPrimaryClient){const R=b?!b.fromCache:n?.targetChanges.get(_.targetId)?.current;s.sharedClientState.updateQueryState(_.targetId,R?"current":"not-current")}if(b){o.push(b);const R=Gp.As(_.targetId,b);u.push(R)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(_,b){const R=ie(_);try{await R.persistence.runTransaction("notifyLocalViewChanges","readwrite",(O=>gt.forEach(b,(k=>gt.forEach(k.Es,(J=>R.persistence.referenceDelegate.addReference(O,k.targetId,J))).next((()=>gt.forEach(k.ds,(J=>R.persistence.referenceDelegate.removeReference(O,k.targetId,J)))))))))}catch(O){if(!ru(O))throw O;kt(Yp,"Failed to update sequence numbers: "+O)}for(const O of b){const k=O.targetId;if(!O.fromCache){const J=R.Ms.get(k),dt=J.snapshotVersion,yt=J.withLastLimboFreeSnapshotVersion(dt);R.Ms=R.Ms.insert(k,yt)}}})(s.localStore,u))}async function CD(i,t){const n=ie(i);if(!n.currentUser.isEqual(t)){kt(eg,"User change. New user:",t.toKey());const s=await cT(n.localStore,t);n.currentUser=t,(function(u,d){u.mu.forEach((y=>{y.forEach((_=>{_.reject(new Bt(_t.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await wc(n,s.Ls)}}function RD(i,t){const n=ie(i),s=n.Au.get(t);if(s&&s.hu)return Te().add(s.key);{let o=Te();const u=n.Iu.get(t);if(!u)return o;for(const d of u){const y=n.Tu.get(d);o=o.unionWith(y.view.nu)}return o}}function RT(i){const t=ie(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=ST.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=RD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=TD.bind(null,t),t.Pu.H_=uD.bind(null,t.eventManager),t.Pu.yu=cD.bind(null,t.eventManager),t}function ID(i){const t=ie(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=SD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=AD.bind(null,t),t}class gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Mh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return O2(this.persistence,new C2,t.initialUser,this.serializer)}Cu(t){return new uT(Kp.mi,this.serializer)}Du(t){return new P2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gh.provider={build:()=>new gh};class OD extends gh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Ve(this.persistence.referenceDelegate instanceof mh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new f2(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Hr.withCacheSize(this.cacheSizeBytes):Hr.DEFAULT;return new uT((s=>mh.mi(s,n)),this.serializer)}}class hp{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>nE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=CD.bind(null,this.syncEngine),await iD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new aD})()}createDatastore(t){const n=Mh(t.databaseInfo.databaseId),s=(function(u){return new B2(u)})(t.databaseInfo);return(function(u,d,y,_){return new K2(u,d,y,_)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,o,u,d,y){return new Y2(s,o,u,d,y)})(this.localStore,this.datastore,t.asyncQueue,(n=>nE(this.syncEngine,n,0)),(function(){return $0.v()?new $0:new U2})())}createSyncEngine(t,n){return(function(o,u,d,y,_,b,R){const O=new pD(o,u,d,y,_,b);return R&&(O.gu=!0),O})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=ie(n);kt(Zo,"RemoteStore shutting down."),s.Ea.add(5),await Ac(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}hp.provider={build:()=>new hp};class DD{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):la("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}const po="FirestoreClient";class ND{constructor(t,n,s,o,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=hr.UNAUTHENTICATED,this.clientId=xp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async d=>{kt(po,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(kt(po,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new lo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Wp(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function zm(i,t){i.asyncQueue.verifyOperationInProgress(),kt(po,"Initializing OfflineComponentProvider");const n=i.configuration;await t.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await cT(t.localStore,o),s=o)})),t.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=t}async function iE(i,t){i.asyncQueue.verifyOperationInProgress();const n=await xD(i);kt(po,"Initializing OnlineComponentProvider"),await t.initialize(n,i.configuration),i.setCredentialChangeListener((s=>Z0(t.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>Z0(t.remoteStore,o))),i._onlineComponents=t}async function xD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){kt(po,"Using user provided OfflineComponentProvider");try{await zm(i,i._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(o){return o.name==="FirebaseError"?o.code===_t.FAILED_PRECONDITION||o.code===_t.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Gl("Error using user provided cache. Falling back to memory cache: "+n),await zm(i,new gh)}}else kt(po,"Using default OfflineComponentProvider"),await zm(i,new OD(void 0));return i._offlineComponents}async function IT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(kt(po,"Using user provided OnlineComponentProvider"),await iE(i,i._uninitializedComponentsProvider._online)):(kt(po,"Using default OnlineComponentProvider"),await iE(i,new hp))),i._onlineComponents}function MD(i){return IT(i).then((t=>t.syncEngine))}async function VD(i){const t=await IT(i),n=t.eventManager;return n.onListen=gD.bind(null,t.syncEngine),n.onUnlisten=_D.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=yD.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ED.bind(null,t.syncEngine),n}function kD(i,t,n={}){const s=new lo;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,y,_,b){const R=new DD({next:k=>{R.Nu(),d.enqueueAndForget((()=>lD(u,O)));const J=k.docs.has(y);!J&&k.fromCache?b.reject(new Bt(_t.UNAVAILABLE,"Failed to get document because the client is offline.")):J&&k.fromCache&&_&&_.source==="server"?b.reject(new Bt(_t.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(k)},error:k=>b.reject(k)}),O=new fD(zp(y.path),R,{includeMetadataChanges:!0,qa:!0});return oD(u,O)})(await VD(i),i.asyncQueue,t,n,s))),s.promise}function OT(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}const sE=new Map;const DT="firestore.googleapis.com",aE=!0;class oE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Bt(_t.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DT,this.ssl=aE}else this.host=t.host,this.ssl=t.ssl??aE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=lT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<u2)throw new Bt(_t.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}GI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OT(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Bt(_t.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Bt(_t.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Bt(_t.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class rg{constructor(t,n,s,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Bt(_t.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Bt(_t.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new kI;switch(s.type){case"firstParty":return new zI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Bt(_t.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=sE.get(n);s&&(kt("ComponentProvider","Removing Datastore"),sE.delete(n),s.terminate())})(this),Promise.resolve()}}function PD(i,t,n,s={}){i=ac(i,rg);const o=Zl(t),u=i._getSettings(),d={...u,emulatorOptions:i._getEmulatorOptions()},y=`${t}:${n}`;o&&(DE(`https://${y}`),NE("Firestore",!0)),u.host!==DT&&u.host!==y&&Gl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...u,host:y,ssl:o,emulatorOptions:s};if(!Qo(_,d)&&(i._setSettings(_),s.mockUserToken)){let b,R;if(typeof s.mockUserToken=="string")b=s.mockUserToken,R=hr.MOCK_USER;else{b=a1(s.mockUserToken,i._app?.options.projectId);const O=s.mockUserToken.sub||s.mockUserToken.user_id;if(!O)throw new Bt(_t.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new hr(O)}i._authCredentials=new PI(new bb(b,R))}}class ig{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new ig(this.firestore,t,this._query)}}class Qn{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Qn(this.firestore,t,this._key)}toJSON(){return{type:Qn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(bc(n,Qn._jsonSchema))return new Qn(t,s||null,new Gt(un.fromString(n.referencePath)))}}Qn._jsonSchemaVersion="firestore/documentReference/1.0",Qn._jsonSchema={type:Mn("string",Qn._jsonSchemaVersion),referencePath:Mn("string")};class dc extends ig{constructor(t,n,s){super(t,n,zp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Qn(this.firestore,null,new Gt(t))}withConverter(t){return new dc(this.firestore,t,this._path)}}function NT(i,t,...n){if(i=Pi(i),arguments.length===1&&(t=xp.newId()),KI("doc","path",t),i instanceof rg){const s=un.fromString(t,...n);return b0(s),new Qn(i,null,new Gt(s))}{if(!(i instanceof Qn||i instanceof dc))throw new Bt(_t.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(un.fromString(t,...n));return b0(s),new Qn(i.firestore,i instanceof dc?i.converter:null,new Gt(s))}}const lE="AsyncQueue";class uE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hT(this,"async_queue_retry"),this._c=()=>{const s=Lm();s&&kt(lE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Lm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Lm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new lo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ru(t))throw t;kt(lE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,la("INTERNAL UNHANDLED ERROR: ",cE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const o=Zp.createAndSchedule(this,t,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Xt(47125,{Pc:cE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function cE(i){let t=i.message||"";return i.stack&&(t=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),t}class sg extends rg{constructor(t,n,s,o){super(t,n,s,o),this.type="firestore",this._queue=new uE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new uE(t),this._firestoreClient=void 0,await t}}}function UD(i,t){const n=typeof i=="object"?i:kE(),s=typeof i=="string"?i:oh,o=Ep(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=i1("firestore");u&&PD(o,...u)}return o}function xT(i){if(i._terminated)throw new Bt(_t.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||LD(i),i._firestoreClient}function LD(i){const t=i._freezeSettings(),n=(function(o,u,d,y){return new rO(o,u,d,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,OT(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,t);i._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),i._firestoreClient=new ND(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class ki{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ki(rr.fromBase64String(t))}catch(n){throw new Bt(_t.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new ki(rr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ki._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(bc(t,ki._jsonSchema))return ki.fromBase64String(t.bytes)}}ki._jsonSchemaVersion="firestore/bytes/1.0",ki._jsonSchema={type:Mn("string",ki._jsonSchemaVersion),bytes:Mn("string")};class ag{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Bt(_t.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nr(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class MT{constructor(t){this._methodName=t}}class Es{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Bt(_t.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Bt(_t.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return be(this._lat,t._lat)||be(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Es._jsonSchemaVersion}}static fromJSON(t){if(bc(t,Es._jsonSchema))return new Es(t.latitude,t.longitude)}}Es._jsonSchemaVersion="firestore/geoPoint/1.0",Es._jsonSchema={type:Mn("string",Es._jsonSchemaVersion),latitude:Mn("number"),longitude:Mn("number")};class bs{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:bs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(bc(t,bs._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new bs(t.vectorValues);throw new Bt(_t.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bs._jsonSchemaVersion="firestore/vectorValue/1.0",bs._jsonSchema={type:Mn("string",bs._jsonSchemaVersion),vectorValues:Mn("object")};const zD=/^__.*__$/;class jD{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new el(t,this.data,this.fieldMask,n,this.fieldTransforms):new Tc(t,this.data,n,this.fieldTransforms)}}function VT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xt(40011,{Ac:i})}}class og{constructor(t,n,s,o,u,d){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new og({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return yh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(VT(this.Ac)&&zD.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class BD{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Mh(t)}Cc(t,n,s,o=!1){return new og({Ac:t,methodName:n,Dc:s,path:nr.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qD(i){const t=i._freezeSettings(),n=Mh(i._databaseId);return new BD(i._databaseId,!!t.ignoreUndefinedProperties,n)}function HD(i,t,n,s,o,u={}){const d=i.Cc(u.merge||u.mergeFields?2:0,t,n,o);LT("Data must be an object, but it was:",d,s);const y=PT(s,d);let _,b;if(u.merge)_=new Zi(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const R=[];for(const O of u.mergeFields){const k=FD(t,O,n);if(!d.contains(k))throw new Bt(_t.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);GD(R,k)||R.push(k)}_=new Zi(R),b=d.fieldTransforms.filter((O=>_.covers(O.field)))}else _=null,b=d.fieldTransforms;return new jD(new Vi(y),_,b)}function kT(i,t){if(UT(i=Pi(i)))return LT("Unsupported field value:",t,i),PT(i,t);if(i instanceof MT)return(function(s,o){if(!VT(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let d=0;for(const y of s){let _=kT(y,o.wc(d));_==null&&(_={nullValue:"NULL_VALUE"}),u.push(_),d++}return{arrayValue:{values:u}}})(i,t)}return(function(s,o){if((s=Pi(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return RO(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=$e.fromDate(s);return{timestampValue:dh(o.serializer,u)}}if(s instanceof $e){const u=new $e(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:dh(o.serializer,u)}}if(s instanceof Es)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ki)return{bytesValue:eT(o.serializer,s._byteString)};if(s instanceof Qn){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Hp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof bs)return(function(d,y){return{mapValue:{fields:{[Db]:{stringValue:Nb},[lh]:{arrayValue:{values:d.toArray().map((b=>{if(typeof b!="number")throw y.Sc("VectorValues must only contain numeric values.");return jp(y.serializer,b)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Mp(s)}`)})(i,t)}function PT(i,t){const n={};return Ab(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Wo(i,((s,o)=>{const u=kT(o,t.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function UT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof $e||i instanceof Es||i instanceof ki||i instanceof Qn||i instanceof MT||i instanceof bs)}function LT(i,t,n){if(!UT(n)||!Tb(n)){const s=Mp(n);throw s==="an object"?t.Sc(i+" a custom object"):t.Sc(i+" "+s)}}function FD(i,t,n){if((t=Pi(t))instanceof ag)return t._internalPath;if(typeof t=="string")return zT(i,t);throw yh("Field path arguments must be of type string or ",i,!1,void 0,n)}const KD=new RegExp("[~\\*/\\[\\]]");function zT(i,t,n){if(t.search(KD)>=0)throw yh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new ag(...t.split("."))._internalPath}catch{throw yh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function yh(i,t,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let y=`Function ${t}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let _="";return(u||d)&&(_+=" (found",u&&(_+=` in field ${s}`),d&&(_+=` in document ${o}`),_+=")"),new Bt(_t.INVALID_ARGUMENT,y+i+_)}function GD(i,t){return i.some((n=>n.isEqual(t)))}class jT{constructor(t,n,s,o,u){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new YD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(BT("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class YD extends jT{data(){return super.data()}}function BT(i,t){return typeof t=="string"?zT(i,t):t instanceof ag?t._internalPath:t._delegate._internalPath}class QD{convertValue(t,n="none"){switch(ho(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Sn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(fo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Xt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Wo(t,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(t){const n=t.fields?.[lh].arrayValue?.values?.map((s=>Sn(s.doubleValue)));return new bs(n)}convertGeoPoint(t){return new Es(Sn(t.latitude),Sn(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Ch(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(lc(t));default:return null}}convertTimestamp(t){const n=co(t);return new $e(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=un.fromString(t);Ve(oT(s),9688,{name:t});const o=new uc(s.get(1),s.get(3)),u=new Gt(s.popFirst(5));return o.isEqual(n)||la(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function XD(i,t,n){let s;return s=i?i.toFirestore(t):t,s}class Yu{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Go extends jT{constructor(t,n,s,o,u,d){super(t,n,s,o,d),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Xf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(BT("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Bt(_t.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Go._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Go._jsonSchemaVersion="firestore/documentSnapshot/1.0",Go._jsonSchema={type:Mn("string",Go._jsonSchemaVersion),bundleSource:Mn("string","DocumentSnapshot"),bundleName:Mn("string"),bundle:Mn("string")};class Xf extends Go{data(t={}){return super.data(t)}}class ec{constructor(t,n,s,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new Yu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new Xf(this._firestore,this._userDataWriter,s.key,s,new Yu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Bt(_t.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((y=>{const _=new Xf(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Yu(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);return y.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((y=>u||y.type!==3)).map((y=>{const _=new Xf(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Yu(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,R=-1;return y.type!==0&&(b=d.indexOf(y.doc.key),d=d.delete(y.doc.key)),y.type!==1&&(d=d.add(y.doc),R=d.indexOf(y.doc.key)),{type:$D(y.type),doc:_,oldIndex:b,newIndex:R}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Bt(_t.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ec._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=xp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function $D(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xt(61501,{type:i})}}function JD(i){i=ac(i,Qn);const t=ac(i.firestore,sg);return kD(xT(t),i._key).then((n=>eN(t,i,n)))}ec._jsonSchemaVersion="firestore/querySnapshot/1.0",ec._jsonSchema={type:Mn("string",ec._jsonSchemaVersion),bundleSource:Mn("string","QuerySnapshot"),bundleName:Mn("string"),bundle:Mn("string")};class ZD extends QD{constructor(t){super(),this.firestore=t}convertBytes(t){return new ki(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Qn(this.firestore,null,n)}}function WD(i,t,n){i=ac(i,Qn);const s=ac(i.firestore,sg),o=XD(i.converter,t);return tN(s,[HD(qD(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,ia.none())])}function tN(i,t){return(function(s,o){const u=new lo;return s.asyncQueue.enqueueAndForget((async()=>bD(await MD(s),o,u))),u.promise})(xT(i),t)}function eN(i,t,n){const s=n.docs.get(t._key),o=new ZD(i);return new Go(i,o,t._key,s,new Yu(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(o){eu=o})(Wl),Fl(new Xo("firestore",((s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),y=new sg(new UI(s.getProvider("auth-internal")),new jI(d,s.getProvider("app-check-internal")),(function(b,R){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new Bt(_t.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uc(b.options.projectId,R)})(d,o),d);return u={useFetchStreams:n,...u},y._setSettings(u),y}),"PUBLIC").setMultipleInstances(!0)),ao(y0,v0,t),ao(y0,v0,"esm2020")})();const nN={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},qT=VE(nN),Pf=MI(qT),rN=new ea,HT=UD(qT),FT="users";async function iN(i,t){if(!i)throw new Error("User ID is required");try{const n=JSON.stringify(t),s=NT(HT,FT,i);await WD(s,{vocab_data:n,last_synced:Date.now()}),console.log(`Successfully synced ${t.length} cards for user ${i}`)}catch(n){throw console.error("Sync upload failed:",n),n}}async function sN(i){if(!i)throw new Error("User ID is required");try{const t=NT(HT,FT,i),n=await JD(t);if(n.exists()){const s=n.data();if(s.vocab_data)return JSON.parse(s.vocab_data)}return null}catch(t){throw console.error("Sync download failed:",t),t}}const fE="".split(",").map(i=>i.trim()).filter(i=>i!=="");function aN(){const[i,t]=jt.useState([]),[n,s]=jt.useState(!0),[o,u]=jt.useState(0),[d,y]=jt.useState(null),[_,b]=jt.useState(!1),[R,O]=jt.useState(!1),[k,J]=jt.useState(!1),[dt,yt]=jt.useState(!1);jt.useEffect(()=>{const M=TR(Pf,async N=>{N?fE.length===0||fE.includes(N.email)?(y(N),je.success(`Welcome, ${N.displayName}`)):(console.warn(`Unauthorized: ${N.email}`),je.error(`Access denied for ${N.email}`),await a0(Pf),y(null)):y(null)});return()=>M()},[]);const vt=async()=>{try{s(!0),await SA();const M=await fr.vocab.toArray(),N=Date.now(),P=M.filter(Y=>Y.nextReview<=N||Y.status==="new");t(P)}catch(M){console.error("Failed to load cards:",M),je.error("Load failed")}finally{s(!1)}};jt.useEffect(()=>{vt()},[]);const qt=async M=>{try{await fr.vocab.put(M),u(N=>N+1)}catch(N){console.error("Update failed:",N),je.error("Update failed")}},Kt=async()=>{try{await qR(Pf,rN)}catch(M){console.error("Login failed:",M),je.error("Login failed")}},Ut=async()=>{await a0(Pf),window.location.reload()},ue=async()=>{if(!d)return;b(!0);const M=je.loading("Backing up...");try{const N=await fr.vocab.toArray();await iN(d.uid,N),je.success("Backup complete!",{id:M})}catch(N){console.error(N),je.error("Backup failed",{id:M})}finally{b(!1)}},xe=async()=>{if(!d||!confirm("Overwrite local data with cloud backup?"))return;b(!0);const M=je.loading("Restoring...");try{const N=await sN(d.uid);N?(await fr.vocab.clear(),await fr.vocab.bulkAdd(N),je.success("Restore complete! Reloading...",{id:M}),setTimeout(()=>window.location.reload(),1500)):je("No backup found.",{id:M,icon:""})}catch(N){console.error(N),je.error("Restore failed",{id:M})}finally{b(!1)}};if(n)return Et.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1b1e",color:"#fff"},children:"Loading..."});const Zt=i[o];return Et.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",padding:"20px",minHeight:"100vh",backgroundColor:"#1a1b1e",color:"#ffffff",fontFamily:"sans-serif",display:"flex",flexDirection:"column",alignItems:"center"},children:[Et.jsx(Gw,{position:"top-center",toastOptions:{style:{background:"#333",color:"#fff"}}}),Et.jsxs("nav",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0.5rem",borderBottom:"1px solid #333"},children:[Et.jsxs("div",{style:{fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px"},children:["GPF",Et.jsx("button",{onClick:()=>J(!0),style:oN,title:"Settings",children:""})]}),Et.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[Et.jsx("button",{onClick:()=>yt(!0),style:{...kl,backgroundColor:"#2196f3"},children:"+ Add"}),Et.jsx("button",{onClick:()=>O(!0),style:{...kl,backgroundColor:"#e91e63"},children:"Import"}),d?Et.jsxs(Et.Fragment,{children:[Et.jsx("button",{disabled:_,onClick:ue,style:kl,children:""}),Et.jsx("button",{disabled:_,onClick:xe,style:kl,children:""}),Et.jsx("button",{onClick:Ut,style:{...kl,backgroundColor:"#555"},children:"Logout"})]}):Et.jsx("button",{onClick:Kt,style:{...kl,backgroundColor:"#4285F4"},children:"Login"})]})]}),Et.jsxs("header",{style:{marginBottom:"2rem",width:"100%",textAlign:"center"},children:[Et.jsx("h1",{children:"Gemini Flashcards"}),Et.jsx("p",{style:{color:"#888"},children:i.length>0?`Progress: ${o} / ${i.length}`:"No cards due"})]}),Et.jsx("main",{style:{width:"100%"},children:Zt?Et.jsx(wA,{card:Zt,onUpdate:qt},Zt.id):Et.jsxs("div",{style:{textAlign:"center",padding:"3rem",border:"1px dashed #555",borderRadius:"8px"},children:[Et.jsx("h2",{children:" All caught up!"}),Et.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"1rem",padding:"0.5rem 1rem",cursor:"pointer"},children:"Refresh"})]})}),Et.jsx(Yw,{isOpen:R,onClose:()=>O(!1),onSuccess:vt}),Et.jsx(Qw,{isOpen:k,onClose:()=>J(!1)}),Et.jsx(Xw,{isOpen:dt,onClose:()=>yt(!1),onSuccess:vt})]})}const kl={padding:"0.4rem 0.8rem",fontSize:"0.8rem",borderRadius:"4px",border:"none",cursor:"pointer",backgroundColor:"#333",color:"white",whiteSpace:"nowrap"},oN={background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem"};_A.createRoot(document.getElementById("root")).render(Et.jsx(fA.StrictMode,{children:Et.jsx(aN,{})}));
