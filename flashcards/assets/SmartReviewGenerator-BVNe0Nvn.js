import{r as i,z as l,j as t}from"./index-BxB8iCCe.js";import{c as v}from"./cardService-Cy6RenpF.js";function C({isOpen:a,onClose:x}){const[d,c]=i.useState(""),[h,p]=i.useState(!1),[s,g]=i.useState([]),[n,u]=i.useState(new Set);i.useEffect(()=>{a&&m()},[a]),i.useEffect(()=>{s.length>0&&b(Array.from(n))},[n,s]);const m=async()=>{p(!0);try{const o=await v.getDueCards(5);o.length===0?(l.error("No review data found."),g([])):(g(o),u(new Set(o.map(r=>r.word))))}catch(o){console.error("Error fetching data:",o),l.error("Failed to load review data")}finally{p(!1)}},b=o=>{if(o.length===0){c("Please select at least one word to generate the prompt.");return}const w=`Create an engaging podcast script on a broad and interesting topic aligned with your persona's expertise. 

Your task is to naturally weave the following target vocabulary into this larger narrative: [${o.join(", ")}]. 

IMPORTANT: 
1. The content must NOT be limited only to these vocabularies. 
2. Build a rich, immersive context with a coherent storyline or argument including target vocabularies. 
3. Use the target words only as natural touchpoints within a flowing, full-length conversation. 
4. Keep the tone casual, authentic, conversational and educational. 
`;c(w)},f=o=>{const r=new Set(n);r.has(o)?r.delete(o):r.add(o),u(r)},y=()=>{navigator.clipboard.writeText(d),l.success("Prompt copied to clipboard!")};return a?t.jsx("div",{style:e.overlay,children:t.jsxs("div",{style:e.modal,children:[t.jsxs("div",{style:e.header,children:[t.jsx("h2",{style:e.title,children:"Review Session Ready"}),t.jsx("button",{onClick:x,style:e.closeBtn,children:"Ã—"})]}),h?t.jsxs("div",{style:e.loadingState,children:[t.jsx("div",{style:e.spinner}),t.jsx("p",{children:"Analyzing your progress..."})]}):t.jsxs("div",{style:e.content,children:[t.jsx("div",{style:e.statsRow,children:t.jsxs("div",{style:{...e.statCard,backgroundColor:"rgba(52, 152, 219, 0.15)",borderColor:"#3498db"},children:[t.jsx("div",{style:e.statLabel,children:"Target Vocabulary Count"}),t.jsx("div",{style:{...e.statValue,color:"#3498db"},children:n.size})]})}),t.jsxs("div",{style:e.section,children:[t.jsxs("div",{style:e.sectionHeader,children:[t.jsx("span",{style:e.sectionTitle,children:"Target Words"}),t.jsx("span",{style:e.sectionSubtitle,children:"Click to include/exclude"})]}),t.jsx("div",{style:e.chipsContainer,children:s.map(o=>{const r=n.has(o.word);return t.jsx("button",{onClick:()=>f(o.word),style:{...e.chip,...r?e.chipSelected:e.chipUnselected},children:o.word},o.word)})})]}),t.jsxs("div",{style:e.section,children:[t.jsx("div",{style:e.sectionTitle,children:"Generated Prompt"}),t.jsx("textarea",{value:d,readOnly:!0,style:e.textarea})]}),t.jsx("button",{onClick:y,disabled:n.size===0,style:{...e.copyBtn,opacity:n.size===0?.5:1,cursor:n.size===0?"not-allowed":"pointer"},children:"Copy Prompt to Clipboard"})]})]})}):null}const e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,backdropFilter:"blur(3px)"},modal:{backgroundColor:"#1e1e1e",padding:"2rem",borderRadius:"16px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 50px rgba(0,0,0,0.5)",color:"#e0e0e0",fontFamily:"'Inter', system-ui, sans-serif",border:"1px solid #333"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.5rem",fontWeight:"700",color:"#fff",letterSpacing:"-0.02em"},closeBtn:{background:"none",border:"none",color:"#666",fontSize:"2rem",cursor:"pointer",lineHeight:1,padding:"0 0.5rem",transition:"color 0.2s"},loadingState:{padding:"3rem",textAlign:"center",color:"#888"},content:{display:"flex",flexDirection:"column",gap:"1.5rem"},statsRow:{display:"flex",width:"100%"},statCard:{flex:1,padding:"1rem",borderRadius:"12px",border:"1px solid",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},statLabel:{fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"#aaa",marginBottom:"0.3rem",fontWeight:"600"},statValue:{fontSize:"1.8rem",fontWeight:"800"},section:{display:"flex",flexDirection:"column",gap:"0.8rem"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},sectionTitle:{fontSize:"0.95rem",fontWeight:"600",color:"#ccc"},sectionSubtitle:{fontSize:"0.75rem",color:"#666"},chipsContainer:{display:"flex",flexWrap:"wrap",gap:"0.6rem",padding:"1rem",backgroundColor:"#25262b",borderRadius:"12px",border:"1px solid #333",maxHeight:"150px",overflowY:"auto"},chip:{padding:"0.4rem 0.9rem",borderRadius:"50px",fontSize:"0.85rem",fontWeight:"500",cursor:"pointer",border:"1px solid",transition:"all 0.2s ease",outline:"none"},chipSelected:{backgroundColor:"rgba(52, 152, 219, 0.2)",borderColor:"#3498db",color:"#3498db",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},chipUnselected:{backgroundColor:"transparent",borderColor:"#444",color:"#666",textDecoration:"line-through",opacity:.6},textarea:{width:"100%",height:"120px",backgroundColor:"#25262b",border:"1px solid #333",borderRadius:"12px",padding:"1rem",color:"#aaa",fontSize:"0.85rem",lineHeight:"1.6",resize:"none",boxSizing:"border-box"},copyBtn:{backgroundColor:"#3498db",color:"white",border:"none",padding:"1rem",borderRadius:"12px",fontSize:"1rem",fontWeight:"600",width:"100%",transition:"transform 0.1s, background 0.2s",boxShadow:"0 4px 15px rgba(52, 152, 219, 0.3)",cursor:"pointer"}};export{C as default};
