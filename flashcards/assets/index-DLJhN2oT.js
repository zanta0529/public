(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var CS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Mp={exports:{}},Yu={};var T_;function xS(){if(T_)return Yu;T_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:u}}return Yu.Fragment=e,Yu.jsx=n,Yu.jsxs=n,Yu}var S_;function RS(){return S_||(S_=1,Mp.exports=xS()),Mp.exports}var R=RS(),Vp={exports:{}},ut={};var w_;function IS(){if(w_)return ut;w_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),k=Symbol.iterator;function $(H){return H===null||typeof H!="object"?null:(H=k&&H[k]||H["@@iterator"],typeof H=="function"?H:null)}var le={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},he=Object.assign,ge={};function Ve(H,pe,Ie){this.props=H,this.context=pe,this.refs=ge,this.updater=Ie||le}Ve.prototype.isReactComponent={},Ve.prototype.setState=function(H,pe){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,pe,"setState")},Ve.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function Fe(){}Fe.prototype=Ve.prototype;function Pe(H,pe,Ie){this.props=H,this.context=pe,this.refs=ge,this.updater=Ie||le}var rt=Pe.prototype=new Fe;rt.constructor=Pe,he(rt,Ve.prototype),rt.isPureReactComponent=!0;var it=Array.isArray;function Re(){}var V={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function j(H,pe,Ie){var Le=Ie.ref;return{$$typeof:i,type:H,key:pe,ref:Le!==void 0?Le:null,props:Ie}}function Y(H,pe){return j(H.type,pe,H.props)}function B(H){return typeof H=="object"&&H!==null&&H.$$typeof===i}function z(H){var pe={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(Ie){return pe[Ie]})}var N=/\/+/g;function Xe(H,pe){return typeof H=="object"&&H!==null&&H.key!=null?z(""+H.key):pe.toString(36)}function Lt(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(Re,Re):(H.status="pending",H.then(function(pe){H.status==="pending"&&(H.status="fulfilled",H.value=pe)},function(pe){H.status==="pending"&&(H.status="rejected",H.reason=pe)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function ce(H,pe,Ie,Le,We){var tt=typeof H;(tt==="undefined"||tt==="boolean")&&(H=null);var yt=!1;if(H===null)yt=!0;else switch(tt){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(H.$$typeof){case i:case e:yt=!0;break;case C:return yt=H._init,ce(yt(H._payload),pe,Ie,Le,We)}}if(yt)return We=We(H),yt=Le===""?"."+Xe(H,0):Le,it(We)?(Ie="",yt!=null&&(Ie=yt.replace(N,"$&/")+"/"),ce(We,pe,Ie,"",function(as){return as})):We!=null&&(B(We)&&(We=Y(We,Ie+(We.key==null||H&&H.key===We.key?"":(""+We.key).replace(N,"$&/")+"/")+yt)),pe.push(We)),1;yt=0;var vn=Le===""?".":Le+":";if(it(H))for(var Me=0;Me<H.length;Me++)Le=H[Me],tt=vn+Xe(Le,Me),yt+=ce(Le,pe,Ie,tt,We);else if(Me=$(H),typeof Me=="function")for(H=Me.call(H),Me=0;!(Le=H.next()).done;)Le=Le.value,tt=vn+Xe(Le,Me++),yt+=ce(Le,pe,Ie,tt,We);else if(tt==="object"){if(typeof H.then=="function")return ce(Lt(H),pe,Ie,Le,We);throw pe=String(H),Error("Objects are not valid as a React child (found: "+(pe==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":pe)+"). If you meant to render a collection of children, use an array instead.")}return yt}function Oe(H,pe,Ie){if(H==null)return H;var Le=[],We=0;return ce(H,Le,"","",function(tt){return pe.call(Ie,tt,We++)}),Le}function qe(H){if(H._status===-1){var pe=H._result;pe=pe(),pe.then(function(Ie){(H._status===0||H._status===-1)&&(H._status=1,H._result=Ie)},function(Ie){(H._status===0||H._status===-1)&&(H._status=2,H._result=Ie)}),H._status===-1&&(H._status=0,H._result=pe)}if(H._status===1)return H._result.default;throw H._result}var Be=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var pe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(pe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},He={map:Oe,forEach:function(H,pe,Ie){Oe(H,function(){pe.apply(this,arguments)},Ie)},count:function(H){var pe=0;return Oe(H,function(){pe++}),pe},toArray:function(H){return Oe(H,function(pe){return pe})||[]},only:function(H){if(!B(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return ut.Activity=I,ut.Children=He,ut.Component=Ve,ut.Fragment=n,ut.Profiler=o,ut.PureComponent=Pe,ut.StrictMode=s,ut.Suspense=_,ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,ut.__COMPILER_RUNTIME={__proto__:null,c:function(H){return V.H.useMemoCache(H)}},ut.cache=function(H){return function(){return H.apply(null,arguments)}},ut.cacheSignal=function(){return null},ut.cloneElement=function(H,pe,Ie){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var Le=he({},H.props),We=H.key;if(pe!=null)for(tt in pe.key!==void 0&&(We=""+pe.key),pe)!M.call(pe,tt)||tt==="key"||tt==="__self"||tt==="__source"||tt==="ref"&&pe.ref===void 0||(Le[tt]=pe[tt]);var tt=arguments.length-2;if(tt===1)Le.children=Ie;else if(1<tt){for(var yt=Array(tt),vn=0;vn<tt;vn++)yt[vn]=arguments[vn+2];Le.children=yt}return j(H.type,We,Le)},ut.createContext=function(H){return H={$$typeof:d,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:u,_context:H},H},ut.createElement=function(H,pe,Ie){var Le,We={},tt=null;if(pe!=null)for(Le in pe.key!==void 0&&(tt=""+pe.key),pe)M.call(pe,Le)&&Le!=="key"&&Le!=="__self"&&Le!=="__source"&&(We[Le]=pe[Le]);var yt=arguments.length-2;if(yt===1)We.children=Ie;else if(1<yt){for(var vn=Array(yt),Me=0;Me<yt;Me++)vn[Me]=arguments[Me+2];We.children=vn}if(H&&H.defaultProps)for(Le in yt=H.defaultProps,yt)We[Le]===void 0&&(We[Le]=yt[Le]);return j(H,tt,We)},ut.createRef=function(){return{current:null}},ut.forwardRef=function(H){return{$$typeof:g,render:H}},ut.isValidElement=B,ut.lazy=function(H){return{$$typeof:C,_payload:{_status:-1,_result:H},_init:qe}},ut.memo=function(H,pe){return{$$typeof:b,type:H,compare:pe===void 0?null:pe}},ut.startTransition=function(H){var pe=V.T,Ie={};V.T=Ie;try{var Le=H(),We=V.S;We!==null&&We(Ie,Le),typeof Le=="object"&&Le!==null&&typeof Le.then=="function"&&Le.then(Re,Be)}catch(tt){Be(tt)}finally{pe!==null&&Ie.types!==null&&(pe.types=Ie.types),V.T=pe}},ut.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},ut.use=function(H){return V.H.use(H)},ut.useActionState=function(H,pe,Ie){return V.H.useActionState(H,pe,Ie)},ut.useCallback=function(H,pe){return V.H.useCallback(H,pe)},ut.useContext=function(H){return V.H.useContext(H)},ut.useDebugValue=function(){},ut.useDeferredValue=function(H,pe){return V.H.useDeferredValue(H,pe)},ut.useEffect=function(H,pe){return V.H.useEffect(H,pe)},ut.useEffectEvent=function(H){return V.H.useEffectEvent(H)},ut.useId=function(){return V.H.useId()},ut.useImperativeHandle=function(H,pe,Ie){return V.H.useImperativeHandle(H,pe,Ie)},ut.useInsertionEffect=function(H,pe){return V.H.useInsertionEffect(H,pe)},ut.useLayoutEffect=function(H,pe){return V.H.useLayoutEffect(H,pe)},ut.useMemo=function(H,pe){return V.H.useMemo(H,pe)},ut.useOptimistic=function(H,pe){return V.H.useOptimistic(H,pe)},ut.useReducer=function(H,pe,Ie){return V.H.useReducer(H,pe,Ie)},ut.useRef=function(H){return V.H.useRef(H)},ut.useState=function(H){return V.H.useState(H)},ut.useSyncExternalStore=function(H,pe,Ie){return V.H.useSyncExternalStore(H,pe,Ie)},ut.useTransition=function(){return V.H.useTransition()},ut.version="19.2.1",ut}var A_;function Rm(){return A_||(A_=1,Vp.exports=IS()),Vp.exports}var _e=Rm();const Rb=xm(_e);var Pp={exports:{}},Qu={},jp={exports:{}},Lp={};var C_;function OS(){return C_||(C_=1,(function(i){function e(ce,Oe){var qe=ce.length;ce.push(Oe);e:for(;0<qe;){var Be=qe-1>>>1,He=ce[Be];if(0<o(He,Oe))ce[Be]=Oe,ce[qe]=He,qe=Be;else break e}}function n(ce){return ce.length===0?null:ce[0]}function s(ce){if(ce.length===0)return null;var Oe=ce[0],qe=ce.pop();if(qe!==Oe){ce[0]=qe;e:for(var Be=0,He=ce.length,H=He>>>1;Be<H;){var pe=2*(Be+1)-1,Ie=ce[pe],Le=pe+1,We=ce[Le];if(0>o(Ie,qe))Le<He&&0>o(We,Ie)?(ce[Be]=We,ce[Le]=qe,Be=Le):(ce[Be]=Ie,ce[pe]=qe,Be=pe);else if(Le<He&&0>o(We,qe))ce[Be]=We,ce[Le]=qe,Be=Le;else break e}}return Oe}function o(ce,Oe){var qe=ce.sortIndex-Oe.sortIndex;return qe!==0?qe:ce.id-Oe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,g=d.now();i.unstable_now=function(){return d.now()-g}}var _=[],b=[],C=1,I=null,k=3,$=!1,le=!1,he=!1,ge=!1,Ve=typeof setTimeout=="function"?setTimeout:null,Fe=typeof clearTimeout=="function"?clearTimeout:null,Pe=typeof setImmediate<"u"?setImmediate:null;function rt(ce){for(var Oe=n(b);Oe!==null;){if(Oe.callback===null)s(b);else if(Oe.startTime<=ce)s(b),Oe.sortIndex=Oe.expirationTime,e(_,Oe);else break;Oe=n(b)}}function it(ce){if(he=!1,rt(ce),!le)if(n(_)!==null)le=!0,Re||(Re=!0,z());else{var Oe=n(b);Oe!==null&&Lt(it,Oe.startTime-ce)}}var Re=!1,V=-1,M=5,j=-1;function Y(){return ge?!0:!(i.unstable_now()-j<M)}function B(){if(ge=!1,Re){var ce=i.unstable_now();j=ce;var Oe=!0;try{e:{le=!1,he&&(he=!1,Fe(V),V=-1),$=!0;var qe=k;try{t:{for(rt(ce),I=n(_);I!==null&&!(I.expirationTime>ce&&Y());){var Be=I.callback;if(typeof Be=="function"){I.callback=null,k=I.priorityLevel;var He=Be(I.expirationTime<=ce);if(ce=i.unstable_now(),typeof He=="function"){I.callback=He,rt(ce),Oe=!0;break t}I===n(_)&&s(_),rt(ce)}else s(_);I=n(_)}if(I!==null)Oe=!0;else{var H=n(b);H!==null&&Lt(it,H.startTime-ce),Oe=!1}}break e}finally{I=null,k=qe,$=!1}Oe=void 0}}finally{Oe?z():Re=!1}}}var z;if(typeof Pe=="function")z=function(){Pe(B)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Xe=N.port2;N.port1.onmessage=B,z=function(){Xe.postMessage(null)}}else z=function(){Ve(B,0)};function Lt(ce,Oe){V=Ve(function(){ce(i.unstable_now())},Oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ce){ce.callback=null},i.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ce?Math.floor(1e3/ce):5},i.unstable_getCurrentPriorityLevel=function(){return k},i.unstable_next=function(ce){switch(k){case 1:case 2:case 3:var Oe=3;break;default:Oe=k}var qe=k;k=Oe;try{return ce()}finally{k=qe}},i.unstable_requestPaint=function(){ge=!0},i.unstable_runWithPriority=function(ce,Oe){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var qe=k;k=ce;try{return Oe()}finally{k=qe}},i.unstable_scheduleCallback=function(ce,Oe,qe){var Be=i.unstable_now();switch(typeof qe=="object"&&qe!==null?(qe=qe.delay,qe=typeof qe=="number"&&0<qe?Be+qe:Be):qe=Be,ce){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=qe+He,ce={id:C++,callback:Oe,priorityLevel:ce,startTime:qe,expirationTime:He,sortIndex:-1},qe>Be?(ce.sortIndex=qe,e(b,ce),n(_)===null&&ce===n(b)&&(he?(Fe(V),V=-1):he=!0,Lt(it,qe-Be))):(ce.sortIndex=He,e(_,ce),le||$||(le=!0,Re||(Re=!0,z()))),ce},i.unstable_shouldYield=Y,i.unstable_wrapCallback=function(ce){var Oe=k;return function(){var qe=k;k=Oe;try{return ce.apply(this,arguments)}finally{k=qe}}}})(Lp)),Lp}var x_;function DS(){return x_||(x_=1,jp.exports=OS()),jp.exports}var Up={exports:{}},pr={};var R_;function NS(){if(R_)return pr;R_=1;var i=Rm();function e(_){var b="https://react.dev/errors/"+_;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)b+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+_+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(_,b,C){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:I==null?null:""+I,children:_,containerInfo:b,implementation:C}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(_,b){if(_==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return pr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,pr.createPortal=function(_,b){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(e(299));return u(_,b,null,C)},pr.flushSync=function(_){var b=d.T,C=s.p;try{if(d.T=null,s.p=2,_)return _()}finally{d.T=b,s.p=C,s.d.f()}},pr.preconnect=function(_,b){typeof _=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,s.d.C(_,b))},pr.prefetchDNS=function(_){typeof _=="string"&&s.d.D(_)},pr.preinit=function(_,b){if(typeof _=="string"&&b&&typeof b.as=="string"){var C=b.as,I=g(C,b.crossOrigin),k=typeof b.integrity=="string"?b.integrity:void 0,$=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;C==="style"?s.d.S(_,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:I,integrity:k,fetchPriority:$}):C==="script"&&s.d.X(_,{crossOrigin:I,integrity:k,fetchPriority:$,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},pr.preinitModule=function(_,b){if(typeof _=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var C=g(b.as,b.crossOrigin);s.d.M(_,{crossOrigin:C,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&s.d.M(_)},pr.preload=function(_,b){if(typeof _=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var C=b.as,I=g(C,b.crossOrigin);s.d.L(_,C,{crossOrigin:I,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},pr.preloadModule=function(_,b){if(typeof _=="string")if(b){var C=g(b.as,b.crossOrigin);s.d.m(_,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:C,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else s.d.m(_)},pr.requestFormReset=function(_){s.d.r(_)},pr.unstable_batchedUpdates=function(_,b){return _(b)},pr.useFormState=function(_,b,C){return d.H.useFormState(_,b,C)},pr.useFormStatus=function(){return d.H.useHostTransitionStatus()},pr.version="19.2.1",pr}var I_;function kS(){if(I_)return Up.exports;I_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Up.exports=NS(),Up.exports}var O_;function MS(){if(O_)return Qu;O_=1;var i=DS(),e=Rm(),n=kS();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function _(t){if(u(t)!==t)throw Error(s(188))}function b(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return _(f),t;if(m===l)return _(f),r;m=m.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=m;else{for(var T=!1,x=f.child;x;){if(x===a){T=!0,a=f,l=m;break}if(x===l){T=!0,l=f,a=m;break}x=x.sibling}if(!T){for(x=m.child;x;){if(x===a){T=!0,a=m,l=f;break}if(x===l){T=!0,l=m,a=f;break}x=x.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function C(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=C(t),r!==null)return r;t=t.sibling}return null}var I=Object.assign,k=Symbol.for("react.element"),$=Symbol.for("react.transitional.element"),le=Symbol.for("react.portal"),he=Symbol.for("react.fragment"),ge=Symbol.for("react.strict_mode"),Ve=Symbol.for("react.profiler"),Fe=Symbol.for("react.consumer"),Pe=Symbol.for("react.context"),rt=Symbol.for("react.forward_ref"),it=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=B&&t[B]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function Xe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case he:return"Fragment";case Ve:return"Profiler";case ge:return"StrictMode";case it:return"Suspense";case Re:return"SuspenseList";case j:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case le:return"Portal";case Pe:return t.displayName||"Context";case Fe:return(t._context.displayName||"Context")+".Consumer";case rt:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return r=t.displayName||null,r!==null?r:Xe(t.type)||"Memo";case M:r=t._payload,t=t._init;try{return Xe(t(r))}catch{}}return null}var Lt=Array.isArray,ce=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qe={pending:!1,data:null,method:null,action:null},Be=[],He=-1;function H(t){return{current:t}}function pe(t){0>He||(t.current=Be[He],Be[He]=null,He--)}function Ie(t,r){He++,Be[He]=t.current,t.current=r}var Le=H(null),We=H(null),tt=H(null),yt=H(null);function vn(t,r){switch(Ie(tt,r),Ie(We,t),Ie(Le,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Kv(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Kv(r),t=Gv(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}pe(Le),Ie(Le,t)}function Me(){pe(Le),pe(We),pe(tt)}function as(t){t.memoizedState!==null&&Ie(yt,t);var r=Le.current,a=Gv(r,t.type);r!==a&&(Ie(We,t),Ie(Le,a))}function Fi(t){We.current===t&&(pe(Le),pe(We)),yt.current===t&&(pe(yt),Hu._currentValue=qe)}var xt,_i;function bi(t){if(xt===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);xt=r&&r[1]||"",_i=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xt+t+_i}var Xr=!1;function Ds(t,r){if(!t||Xr)return"";Xr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(ue){var ae=ue}Reflect.construct(t,[],ve)}else{try{ve.call()}catch(ue){ae=ue}t.call(ve.prototype)}}else{try{throw Error()}catch(ue){ae=ue}(ve=t())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(ue){if(ue&&ae&&typeof ue.stack=="string")return[ue.stack,ae.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),T=m[0],x=m[1];if(T&&x){var L=T.split(`
`),ie=x.split(`
`);for(f=l=0;l<L.length&&!L[l].includes("DetermineComponentFrameRoot");)l++;for(;f<ie.length&&!ie[f].includes("DetermineComponentFrameRoot");)f++;if(l===L.length||f===ie.length)for(l=L.length-1,f=ie.length-1;1<=l&&0<=f&&L[l]!==ie[f];)f--;for(;1<=l&&0<=f;l--,f--)if(L[l]!==ie[f]){if(l!==1||f!==1)do if(l--,f--,0>f||L[l]!==ie[f]){var de=`
`+L[l].replace(" at new "," at ");return t.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",t.displayName)),de}while(1<=l&&0<=f);break}}}finally{Xr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?bi(a):""}function wo(t,r){switch(t.tag){case 26:case 27:case 5:return bi(t.type);case 16:return bi("Lazy");case 13:return t.child!==r&&r!==null?bi("Suspense Fallback"):bi("Suspense");case 19:return bi("SuspenseList");case 0:case 15:return Ds(t.type,!1);case 11:return Ds(t.type.render,!1);case 1:return Ds(t.type,!0);case 31:return bi("Activity");default:return""}}function Ao(t){try{var r="",a=null;do r+=wo(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var pn=Object.prototype.hasOwnProperty,sn=i.unstable_scheduleCallback,jn=i.unstable_cancelCallback,ul=i.unstable_shouldYield,os=i.unstable_requestPaint,Fn=i.unstable_now,Wr=i.unstable_getCurrentPriorityLevel,Jr=i.unstable_ImmediatePriority,Zr=i.unstable_UserBlockingPriority,Ei=i.unstable_NormalPriority,Ns=i.unstable_LowPriority,ya=i.unstable_IdlePriority,ks=i.log,Ti=i.unstable_setDisableYieldValue,ur=null,_n=null;function bn(t){if(typeof ks=="function"&&Ti(t),_n&&typeof _n.setStrictMode=="function")try{_n.setStrictMode(ur,t)}catch{}}var ke=Math.clz32?Math.clz32:Ms,ls=Math.log,Rr=Math.LN2;function Ms(t){return t>>>=0,t===0?32:31-(ls(t)/Rr|0)|0}var xe=256,Ki=262144,an=4194304;function Ir(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ei(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var x=l&134217727;return x!==0?(l=x&~m,l!==0?f=Ir(l):(T&=x,T!==0?f=Ir(T):a||(a=x&~t,a!==0&&(f=Ir(a))))):(x=l&~m,x!==0?f=Ir(x):T!==0?f=Ir(T):a||(a=l&~t,a!==0&&(f=Ir(a)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,a=r&-r,m>=a||m===32&&(a&4194048)!==0)?r:f}function Er(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function cu(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cl(){var t=an;return an<<=1,(an&62914560)===0&&(an=4194304),t}function Zn(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Or(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Co(t,r,a,l,f,m){var T=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var x=t.entanglements,L=t.expirationTimes,ie=t.hiddenUpdates;for(a=T&~a;0<a;){var de=31-ke(a),ve=1<<de;x[de]=0,L[de]=-1;var ae=ie[de];if(ae!==null)for(ie[de]=null,de=0;de<ae.length;de++){var ue=ae[de];ue!==null&&(ue.lane&=-536870913)}a&=~ve}l!==0&&Si(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(T&~r))}function Si(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-ke(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Pt(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-ke(a),f=1<<l;f&r|t[l]&r&&(t[l]|=r),a&=~f}}function en(t,r){var a=r&-r;return a=(a&42)!==0?1:Vs(a),(a&(t.suspendedLanes|r))!==0?0:a}function Vs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Dr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ps(){var t=Oe.p;return t!==0?t:(t=window.event,t===void 0?32:m_(t.type))}function cr(t,r){var a=Oe.p;try{return Oe.p=t,r()}finally{Oe.p=a}}var ti=Math.random().toString(36).slice(2),Ut="__reactFiber$"+ti,$t="__reactProps$"+ti,Ln="__reactContainer$"+ti,Gi="__reactEvents$"+ti,hu="__reactListeners$"+ti,ni="__reactHandles$"+ti,xo="__reactResources$"+ti,Kn="__reactMarker$"+ti;function js(t){delete t[Ut],delete t[$t],delete t[Gi],delete t[hu],delete t[ni]}function Nr(t){var r=t[Ut];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Ln]||a[Ut]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=Zv(t);t!==null;){if(a=t[Ut])return a;t=Zv(t)}return r}t=a,a=t.parentNode}return null}function Ot(t){if(t=t[Ut]||t[Ln]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function En(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function xn(t){var r=t[xo];return r||(r=t[xo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function on(t){t[Kn]=!0}var wi=new Set,us={};function kr(t,r){Mr(t,r),Mr(t+"Capture",r)}function Mr(t,r){for(us[t]=r,t=0;t<r.length;t++)wi.add(r[t])}var ri=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),va={},cs={};function Ro(t){return pn.call(cs,t)?!0:pn.call(va,t)?!1:ri.test(t)?cs[t]=!0:(va[t]=!0,!1)}function ht(t,r,a){if(Ro(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function hr(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function ln(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function un(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Vr(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function _a(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(T){a=""+T,m.call(this,T)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(T){a=""+T},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Nt(t){if(!t._valueTracker){var r=Vr(t)?"checked":"value";t._valueTracker=_a(t,r,""+t[r])}}function hs(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Vr(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function _t(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ii=/[\n"\\]/g;function Rn(t){return t.replace(ii,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function si(t,r,a,l,f,m,T,x){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),r!=null?T==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+un(r)):t.value!==""+un(r)&&(t.value=""+un(r)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),r!=null?Ls(t,T,un(r)):a!=null?Ls(t,T,un(a)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.name=""+un(x):t.removeAttribute("name")}function ba(t,r,a,l,f,m,T,x){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Nt(t);return}a=a!=null?""+un(a):"",r=r!=null?""+un(r):a,x||r===t.value||(t.value=r),t.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=x?t.checked:!!l,t.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),Nt(t)}function Ls(t,r,a){r==="number"&&_t(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ai(t,r,a,l){if(t=t.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=r.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+un(a),r=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function Io(t,r,a){if(r!=null&&(r=""+un(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+un(a):""}function oi(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Lt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=un(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Nt(t)}function er(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var hl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vt(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||hl.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Ea(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&vt(t,f,l)}else for(var m in r)r.hasOwnProperty(m)&&vt(t,m,r[m])}function Ta(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function li(t){return mn.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function fr(){}var Pr=null;function Tr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yi=null,zt=null;function Gn(t){var r=Ot(t);if(r&&(t=r.stateNode)){var a=t[$t]||null;e:switch(t=r.stateNode,r.type){case"input":if(si(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Rn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var f=l[$t]||null;if(!f)throw Error(s(90));si(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&hs(l)}break e;case"textarea":Io(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&ai(t,!!a.multiple,r,!1)}}}var Ai=!1;function jr(t,r,a){if(Ai)return t(r,a);Ai=!0;try{var l=t(r);return l}finally{if(Ai=!1,(Yi!==null||zt!==null)&&(fh(),Yi&&(r=Yi,t=zt,zt=Yi=null,Gn(r),t)))for(r=0;r<t.length;r++)Gn(t[r])}}function Sr(t,r){var a=t.stateNode;if(a===null)return null;var l=a[$t]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Us=!1;if(Tn)try{var gt={};Object.defineProperty(gt,"passive",{get:function(){Us=!0}}),window.addEventListener("test",gt,gt),window.removeEventListener("test",gt,gt)}catch{Us=!1}var Lr=null,Sa=null,Qi=null;function $i(){if(Qi)return Qi;var t,r=Sa,a=r.length,l,f="value"in Lr?Lr.value:Lr.textContent,m=f.length;for(t=0;t<a&&r[t]===f[t];t++);var T=a-t;for(l=1;l<=T&&r[a-l]===f[m-l];l++);return Qi=f.slice(t,1<l?1-l:void 0)}function Xi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ci(){return!0}function ui(){return!1}function cn(t){function r(a,l,f,m,T){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=T,this.currentTarget=null;for(var x in t)t.hasOwnProperty(x)&&(a=t[x],this[x]=a?a(m):m[x]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ci:ui,this.isPropagationStopped=ui,this}return I(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ci)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ci)},persist:function(){},isPersistent:Ci}),r}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xi=cn(Wi),ci=I({},Wi,{view:0,detail:0}),fs=cn(ci),Ri,wa,Ii,Aa=I({},ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ii&&(Ii&&t.type==="mousemove"?(Ri=t.screenX-Ii.screenX,wa=t.screenY-Ii.screenY):wa=Ri=0,Ii=t),Ri)},movementY:function(t){return"movementY"in t?t.movementY:wa}}),zs=cn(Aa),Ji=I({},Aa,{dataTransfer:0}),Oo=cn(Ji),Bs=I({},ci,{relatedTarget:0}),Oi=cn(Bs),ds=I({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),Do=cn(ds),Ca=I({},Wi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Zi=cn(Ca),xa=I({},Wi,{data:0}),Ur=cn(xa),Ra={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ia={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ps(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Sn[t])?!!r[t]:!1}function zr(){return ps}var Yn=I({},ci,{key:function(t){if(t.key){var r=Ra[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Xi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ia[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zr,charCode:function(t){return t.type==="keypress"?Xi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qs=cn(Yn),No=I({},Aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Di=cn(No),c=I({},ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zr}),v=cn(c),S=I({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),O=cn(S),te=I({},Aa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),oe=cn(te),Ae=I({},Wi,{newState:0,oldState:0}),ot=cn(Ae),hn=[9,13,27,32],Rt=Tn&&"CompositionEvent"in window,Bt=null;Tn&&"documentMode"in document&&(Bt=document.documentMode);var Br=Tn&&"TextEvent"in window&&!Bt,qr=Tn&&(!Rt||Bt&&8<Bt&&11>=Bt),wr=" ",hi=!1;function ms(t,r){switch(t){case"keyup":return hn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hs=!1;function Nc(t,r){switch(t){case"compositionend":return Oa(r);case"keypress":return r.which!==32?null:(hi=!0,wr);case"textInput":return t=r.data,t===wr&&hi?null:t;default:return null}}function Qf(t,r){if(Hs)return t==="compositionend"||!Rt&&ms(t,r)?(t=$i(),Qi=Sa=Lr=null,Hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return qr&&r.locale!=="ko"?null:r.data;default:return null}}var kc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dl(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!kc[t.type]:r==="textarea"}function fu(t,r,a,l){Yi?zt?zt.push(l):zt=[l]:Yi=l,r=_h(r,"onChange"),0<r.length&&(a=new xi("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Da=null,ko=null;function $f(t){Uv(t,0)}function pl(t){var r=En(t);if(hs(r))return t}function Mo(t,r){if(t==="change")return r}var Ni=!1;if(Tn){var Xt;if(Tn){var Na="oninput"in document;if(!Na){var Ar=document.createElement("div");Ar.setAttribute("oninput","return;"),Na=typeof Ar.oninput=="function"}Xt=Na}else Xt=!1;Ni=Xt&&(!document.documentMode||9<document.documentMode)}function Mc(){Da&&(Da.detachEvent("onpropertychange",ml),ko=Da=null)}function ml(t){if(t.propertyName==="value"&&pl(ko)){var r=[];fu(r,ko,t,Tr(t)),jr($f,r)}}function Vc(t,r,a){t==="focusin"?(Mc(),Da=r,ko=a,Da.attachEvent("onpropertychange",ml)):t==="focusout"&&Mc()}function Fs(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pl(ko)}function du(t,r){if(t==="click")return pl(r)}function ka(t,r){if(t==="input"||t==="change")return pl(r)}function gs(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var dr=typeof Object.is=="function"?Object.is:gs;function h(t,r){if(dr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!pn.call(r,f)||!dr(t[f],r[f]))return!1}return!0}function p(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function y(t,r){var a=p(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=p(a)}}function E(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?E(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function w(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=_t(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=_t(t.document)}return r}function A(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var D=Tn&&"documentMode"in document&&11>=document.documentMode,P=null,q=null,F=null,W=!1;function U(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;W||P==null||P!==_t(l)||(l=P,"selectionStart"in l&&A(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),F&&h(F,l)||(F=l,l=_h(q,"onSelect"),0<l.length&&(r=new xi("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=P)))}function Z(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var K={animationend:Z("Animation","AnimationEnd"),animationiteration:Z("Animation","AnimationIteration"),animationstart:Z("Animation","AnimationStart"),transitionrun:Z("Transition","TransitionRun"),transitionstart:Z("Transition","TransitionStart"),transitioncancel:Z("Transition","TransitionCancel"),transitionend:Z("Transition","TransitionEnd")},Q={},X={};Tn&&(X=document.createElement("div").style,"AnimationEvent"in window||(delete K.animationend.animation,delete K.animationiteration.animation,delete K.animationstart.animation),"TransitionEvent"in window||delete K.transitionend.transition);function J(t){if(Q[t])return Q[t];if(!K[t])return t;var r=K[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in X)return Q[t]=r[a];return t}var ne=J("animationend"),se=J("animationiteration"),fe=J("animationstart"),ye=J("transitionrun"),we=J("transitionstart"),Ne=J("transitioncancel"),Te=J("transitionend"),Ce=new Map,De="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");De.push("scrollEnd");function Se(t,r){Ce.set(t,r),kr(r,[t])}var je=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ye=[],st=0,ft=0;function Qn(){for(var t=st,r=ft=st=0;r<t;){var a=Ye[r];Ye[r++]=null;var l=Ye[r];Ye[r++]=null;var f=Ye[r];Ye[r++]=null;var m=Ye[r];if(Ye[r++]=null,l!==null&&f!==null){var T=l.pending;T===null?f.next=f:(f.next=T.next,T.next=f),l.pending=f}m!==0&&Vo(a,f,m)}}function nt(t,r,a,l){Ye[st++]=t,Ye[st++]=r,Ye[st++]=a,Ye[st++]=l,ft|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function In(t,r,a,l){return nt(t,r,a,l),On(t)}function tn(t,r){return nt(t,null,null,r),On(t)}function Vo(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-ke(a),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[r]:l.push(r),r.lane=a|536870912),m):null}function On(t){if(50<Pu)throw Pu=0,ip=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Hr={};function pu(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fi(t,r,a,l){return new pu(t,r,a,l)}function Xf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ks(t,r){var a=t.alternate;return a===null?(a=fi(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Eg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Pc(t,r,a,l,f,m){var T=0;if(l=t,typeof t=="function")Xf(t)&&(T=1);else if(typeof t=="string")T=pS(t,a,Le.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case j:return t=fi(31,a,r,f),t.elementType=j,t.lanes=m,t;case he:return Po(a.children,f,m,r);case ge:T=8,f|=24;break;case Ve:return t=fi(12,a,r,f|2),t.elementType=Ve,t.lanes=m,t;case it:return t=fi(13,a,r,f),t.elementType=it,t.lanes=m,t;case Re:return t=fi(19,a,r,f),t.elementType=Re,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Pe:T=10;break e;case Fe:T=9;break e;case rt:T=11;break e;case V:T=14;break e;case M:T=16,l=null;break e}T=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=fi(T,a,r,f),r.elementType=t,r.type=l,r.lanes=m,r}function Po(t,r,a,l){return t=fi(7,t,l,r),t.lanes=a,t}function Wf(t,r,a){return t=fi(6,t,null,r),t.lanes=a,t}function Tg(t){var r=fi(18,null,null,0);return r.stateNode=t,r}function Jf(t,r,a){return r=fi(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Sg=new WeakMap;function ki(t,r){if(typeof t=="object"&&t!==null){var a=Sg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:Ao(r)},Sg.set(t,r),r)}return{value:t,source:r,stack:Ao(r)}}var gl=[],yl=0,jc=null,mu=0,Mi=[],Vi=0,Ma=null,ys=1,vs="";function Gs(t,r){gl[yl++]=mu,gl[yl++]=jc,jc=t,mu=r}function wg(t,r,a){Mi[Vi++]=ys,Mi[Vi++]=vs,Mi[Vi++]=Ma,Ma=t;var l=ys;t=vs;var f=32-ke(l)-1;l&=~(1<<f),a+=1;var m=32-ke(r)+f;if(30<m){var T=f-f%5;m=(l&(1<<T)-1).toString(32),l>>=T,f-=T,ys=1<<32-ke(r)+f|a<<f|l,vs=m+t}else ys=1<<m|a<<f|l,vs=t}function Zf(t){t.return!==null&&(Gs(t,1),wg(t,1,0))}function ed(t){for(;t===jc;)jc=gl[--yl],gl[yl]=null,mu=gl[--yl],gl[yl]=null;for(;t===Ma;)Ma=Mi[--Vi],Mi[Vi]=null,vs=Mi[--Vi],Mi[Vi]=null,ys=Mi[--Vi],Mi[Vi]=null}function Ag(t,r){Mi[Vi++]=ys,Mi[Vi++]=vs,Mi[Vi++]=Ma,ys=r.id,vs=r.overflow,Ma=t}var tr=null,Wt=null,It=!1,Va=null,Pi=!1,td=Error(s(519));function Pa(t){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gu(ki(r,t)),td}function Cg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Ut]=t,r[$t]=l,a){case"dialog":Et("cancel",r),Et("close",r);break;case"iframe":case"object":case"embed":Et("load",r);break;case"video":case"audio":for(a=0;a<Lu.length;a++)Et(Lu[a],r);break;case"source":Et("error",r);break;case"img":case"image":case"link":Et("error",r),Et("load",r);break;case"details":Et("toggle",r);break;case"input":Et("invalid",r),ba(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Et("invalid",r);break;case"textarea":Et("invalid",r),oi(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||Hv(r.textContent,a)?(l.popover!=null&&(Et("beforetoggle",r),Et("toggle",r)),l.onScroll!=null&&Et("scroll",r),l.onScrollEnd!=null&&Et("scrollend",r),l.onClick!=null&&(r.onclick=fr),r=!0):r=!1,r||Pa(t,!0)}function xg(t){for(tr=t.return;tr;)switch(tr.tag){case 5:case 31:case 13:Pi=!1;return;case 27:case 3:Pi=!0;return;default:tr=tr.return}}function vl(t){if(t!==tr)return!1;if(!It)return xg(t),It=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||_p(t.type,t.memoizedProps)),a=!a),a&&Wt&&Pa(t),xg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Wt=Jv(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Wt=Jv(t)}else r===27?(r=Wt,Xa(t.type)?(t=wp,wp=null,Wt=t):Wt=r):Wt=tr?Li(t.stateNode.nextSibling):null;return!0}function jo(){Wt=tr=null,It=!1}function nd(){var t=Va;return t!==null&&(Yr===null?Yr=t:Yr.push.apply(Yr,t),Va=null),t}function gu(t){Va===null?Va=[t]:Va.push(t)}var rd=H(null),Lo=null,Ys=null;function ja(t,r,a){Ie(rd,r._currentValue),r._currentValue=a}function Qs(t){t._currentValue=rd.current,pe(rd)}function id(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function sd(t,r,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var T=f.child;m=m.firstContext;e:for(;m!==null;){var x=m;m=f;for(var L=0;L<r.length;L++)if(x.context===r[L]){m.lanes|=a,x=m.alternate,x!==null&&(x.lanes|=a),id(m.return,a,t),l||(T=null);break e}m=x.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(s(341));T.lanes|=a,m=T.alternate,m!==null&&(m.lanes|=a),id(T,a,t),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===t){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function _l(t,r,a,l){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var x=f.type;dr(f.pendingProps.value,T.value)||(t!==null?t.push(x):t=[x])}}else if(f===yt.current){if(T=f.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Hu):t=[Hu])}f=f.return}t!==null&&sd(r,t,a,l),r.flags|=262144}function Lc(t){for(t=t.firstContext;t!==null;){if(!dr(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Uo(t){Lo=t,Ys=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function nr(t){return Rg(Lo,t)}function Uc(t,r){return Lo===null&&Uo(t),Rg(t,r)}function Rg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Ys===null){if(t===null)throw Error(s(308));Ys=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Ys=Ys.next=r;return a}var cT=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},hT=i.unstable_scheduleCallback,fT=i.unstable_NormalPriority,Dn={$$typeof:Pe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ad(){return{controller:new cT,data:new Map,refCount:0}}function yu(t){t.refCount--,t.refCount===0&&hT(fT,function(){t.controller.abort()})}var vu=null,od=0,bl=0,El=null;function dT(t,r){if(vu===null){var a=vu=[];od=0,bl=cp(),El={status:"pending",value:void 0,then:function(l){a.push(l)}}}return od++,r.then(Ig,Ig),r}function Ig(){if(--od===0&&vu!==null){El!==null&&(El.status="fulfilled");var t=vu;vu=null,bl=0,El=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function pT(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Og=ce.S;ce.S=function(t,r){dv=Fn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&dT(t,r),Og!==null&&Og(t,r)};var zo=H(null);function ld(){var t=zo.current;return t!==null?t:Qt.pooledCache}function zc(t,r){r===null?Ie(zo,zo.current):Ie(zo,r.pool)}function Dg(){var t=ld();return t===null?null:{parent:Dn._currentValue,pool:t}}var Tl=Error(s(460)),ud=Error(s(474)),Bc=Error(s(542)),qc={then:function(){}};function Ng(t){return t=t.status,t==="fulfilled"||t==="rejected"}function kg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(fr,fr),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Vg(t),t;default:if(typeof r.status=="string")r.then(fr,fr);else{if(t=Qt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Vg(t),t}throw qo=r,Tl}}function Bo(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(qo=a,Tl):a}}var qo=null;function Mg(){if(qo===null)throw Error(s(459));var t=qo;return qo=null,t}function Vg(t){if(t===Tl||t===Bc)throw Error(s(483))}var Sl=null,_u=0;function Hc(t){var r=_u;return _u+=1,Sl===null&&(Sl=[]),kg(Sl,t,r)}function bu(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Fc(t,r){throw r.$$typeof===k?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Pg(t){function r(ee,G){if(t){var re=ee.deletions;re===null?(ee.deletions=[G],ee.flags|=16):re.push(G)}}function a(ee,G){if(!t)return null;for(;G!==null;)r(ee,G),G=G.sibling;return null}function l(ee){for(var G=new Map;ee!==null;)ee.key!==null?G.set(ee.key,ee):G.set(ee.index,ee),ee=ee.sibling;return G}function f(ee,G){return ee=Ks(ee,G),ee.index=0,ee.sibling=null,ee}function m(ee,G,re){return ee.index=re,t?(re=ee.alternate,re!==null?(re=re.index,re<G?(ee.flags|=67108866,G):re):(ee.flags|=67108866,G)):(ee.flags|=1048576,G)}function T(ee){return t&&ee.alternate===null&&(ee.flags|=67108866),ee}function x(ee,G,re,me){return G===null||G.tag!==6?(G=Wf(re,ee.mode,me),G.return=ee,G):(G=f(G,re),G.return=ee,G)}function L(ee,G,re,me){var Qe=re.type;return Qe===he?de(ee,G,re.props.children,me,re.key):G!==null&&(G.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===M&&Bo(Qe)===G.type)?(G=f(G,re.props),bu(G,re),G.return=ee,G):(G=Pc(re.type,re.key,re.props,null,ee.mode,me),bu(G,re),G.return=ee,G)}function ie(ee,G,re,me){return G===null||G.tag!==4||G.stateNode.containerInfo!==re.containerInfo||G.stateNode.implementation!==re.implementation?(G=Jf(re,ee.mode,me),G.return=ee,G):(G=f(G,re.children||[]),G.return=ee,G)}function de(ee,G,re,me,Qe){return G===null||G.tag!==7?(G=Po(re,ee.mode,me,Qe),G.return=ee,G):(G=f(G,re),G.return=ee,G)}function ve(ee,G,re){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Wf(""+G,ee.mode,re),G.return=ee,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case $:return re=Pc(G.type,G.key,G.props,null,ee.mode,re),bu(re,G),re.return=ee,re;case le:return G=Jf(G,ee.mode,re),G.return=ee,G;case M:return G=Bo(G),ve(ee,G,re)}if(Lt(G)||z(G))return G=Po(G,ee.mode,re,null),G.return=ee,G;if(typeof G.then=="function")return ve(ee,Hc(G),re);if(G.$$typeof===Pe)return ve(ee,Uc(ee,G),re);Fc(ee,G)}return null}function ae(ee,G,re,me){var Qe=G!==null?G.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return Qe!==null?null:x(ee,G,""+re,me);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case $:return re.key===Qe?L(ee,G,re,me):null;case le:return re.key===Qe?ie(ee,G,re,me):null;case M:return re=Bo(re),ae(ee,G,re,me)}if(Lt(re)||z(re))return Qe!==null?null:de(ee,G,re,me,null);if(typeof re.then=="function")return ae(ee,G,Hc(re),me);if(re.$$typeof===Pe)return ae(ee,G,Uc(ee,re),me);Fc(ee,re)}return null}function ue(ee,G,re,me,Qe){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return ee=ee.get(re)||null,x(G,ee,""+me,Qe);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case $:return ee=ee.get(me.key===null?re:me.key)||null,L(G,ee,me,Qe);case le:return ee=ee.get(me.key===null?re:me.key)||null,ie(G,ee,me,Qe);case M:return me=Bo(me),ue(ee,G,re,me,Qe)}if(Lt(me)||z(me))return ee=ee.get(re)||null,de(G,ee,me,Qe,null);if(typeof me.then=="function")return ue(ee,G,re,Hc(me),Qe);if(me.$$typeof===Pe)return ue(ee,G,re,Uc(G,me),Qe);Fc(G,me)}return null}function ze(ee,G,re,me){for(var Qe=null,kt=null,Ke=G,mt=G=0,St=null;Ke!==null&&mt<re.length;mt++){Ke.index>mt?(St=Ke,Ke=null):St=Ke.sibling;var Mt=ae(ee,Ke,re[mt],me);if(Mt===null){Ke===null&&(Ke=St);break}t&&Ke&&Mt.alternate===null&&r(ee,Ke),G=m(Mt,G,mt),kt===null?Qe=Mt:kt.sibling=Mt,kt=Mt,Ke=St}if(mt===re.length)return a(ee,Ke),It&&Gs(ee,mt),Qe;if(Ke===null){for(;mt<re.length;mt++)Ke=ve(ee,re[mt],me),Ke!==null&&(G=m(Ke,G,mt),kt===null?Qe=Ke:kt.sibling=Ke,kt=Ke);return It&&Gs(ee,mt),Qe}for(Ke=l(Ke);mt<re.length;mt++)St=ue(Ke,ee,mt,re[mt],me),St!==null&&(t&&St.alternate!==null&&Ke.delete(St.key===null?mt:St.key),G=m(St,G,mt),kt===null?Qe=St:kt.sibling=St,kt=St);return t&&Ke.forEach(function(to){return r(ee,to)}),It&&Gs(ee,mt),Qe}function Je(ee,G,re,me){if(re==null)throw Error(s(151));for(var Qe=null,kt=null,Ke=G,mt=G=0,St=null,Mt=re.next();Ke!==null&&!Mt.done;mt++,Mt=re.next()){Ke.index>mt?(St=Ke,Ke=null):St=Ke.sibling;var to=ae(ee,Ke,Mt.value,me);if(to===null){Ke===null&&(Ke=St);break}t&&Ke&&to.alternate===null&&r(ee,Ke),G=m(to,G,mt),kt===null?Qe=to:kt.sibling=to,kt=to,Ke=St}if(Mt.done)return a(ee,Ke),It&&Gs(ee,mt),Qe;if(Ke===null){for(;!Mt.done;mt++,Mt=re.next())Mt=ve(ee,Mt.value,me),Mt!==null&&(G=m(Mt,G,mt),kt===null?Qe=Mt:kt.sibling=Mt,kt=Mt);return It&&Gs(ee,mt),Qe}for(Ke=l(Ke);!Mt.done;mt++,Mt=re.next())Mt=ue(Ke,ee,mt,Mt.value,me),Mt!==null&&(t&&Mt.alternate!==null&&Ke.delete(Mt.key===null?mt:Mt.key),G=m(Mt,G,mt),kt===null?Qe=Mt:kt.sibling=Mt,kt=Mt);return t&&Ke.forEach(function(AS){return r(ee,AS)}),It&&Gs(ee,mt),Qe}function Gt(ee,G,re,me){if(typeof re=="object"&&re!==null&&re.type===he&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case $:e:{for(var Qe=re.key;G!==null;){if(G.key===Qe){if(Qe=re.type,Qe===he){if(G.tag===7){a(ee,G.sibling),me=f(G,re.props.children),me.return=ee,ee=me;break e}}else if(G.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===M&&Bo(Qe)===G.type){a(ee,G.sibling),me=f(G,re.props),bu(me,re),me.return=ee,ee=me;break e}a(ee,G);break}else r(ee,G);G=G.sibling}re.type===he?(me=Po(re.props.children,ee.mode,me,re.key),me.return=ee,ee=me):(me=Pc(re.type,re.key,re.props,null,ee.mode,me),bu(me,re),me.return=ee,ee=me)}return T(ee);case le:e:{for(Qe=re.key;G!==null;){if(G.key===Qe)if(G.tag===4&&G.stateNode.containerInfo===re.containerInfo&&G.stateNode.implementation===re.implementation){a(ee,G.sibling),me=f(G,re.children||[]),me.return=ee,ee=me;break e}else{a(ee,G);break}else r(ee,G);G=G.sibling}me=Jf(re,ee.mode,me),me.return=ee,ee=me}return T(ee);case M:return re=Bo(re),Gt(ee,G,re,me)}if(Lt(re))return ze(ee,G,re,me);if(z(re)){if(Qe=z(re),typeof Qe!="function")throw Error(s(150));return re=Qe.call(re),Je(ee,G,re,me)}if(typeof re.then=="function")return Gt(ee,G,Hc(re),me);if(re.$$typeof===Pe)return Gt(ee,G,Uc(ee,re),me);Fc(ee,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,G!==null&&G.tag===6?(a(ee,G.sibling),me=f(G,re),me.return=ee,ee=me):(a(ee,G),me=Wf(re,ee.mode,me),me.return=ee,ee=me),T(ee)):a(ee,G)}return function(ee,G,re,me){try{_u=0;var Qe=Gt(ee,G,re,me);return Sl=null,Qe}catch(Ke){if(Ke===Tl||Ke===Bc)throw Ke;var kt=fi(29,Ke,null,ee.mode);return kt.lanes=me,kt.return=ee,kt}finally{}}}var Ho=Pg(!0),jg=Pg(!1),La=!1;function cd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ua(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function za(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Vt&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=On(t),Vo(t,null,a),r}return nt(t,l,r,a),On(t)}function Eu(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Pt(t,a)}}function fd(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=T:m=m.next=T,a=a.next}while(a!==null);m===null?f=m=r:m=m.next=r}else f=m=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var dd=!1;function Tu(){if(dd){var t=El;if(t!==null)throw t}}function Su(t,r,a,l){dd=!1;var f=t.updateQueue;La=!1;var m=f.firstBaseUpdate,T=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var L=x,ie=L.next;L.next=null,T===null?m=ie:T.next=ie,T=L;var de=t.alternate;de!==null&&(de=de.updateQueue,x=de.lastBaseUpdate,x!==T&&(x===null?de.firstBaseUpdate=ie:x.next=ie,de.lastBaseUpdate=L))}if(m!==null){var ve=f.baseState;T=0,de=ie=L=null,x=m;do{var ae=x.lane&-536870913,ue=ae!==x.lane;if(ue?(Tt&ae)===ae:(l&ae)===ae){ae!==0&&ae===bl&&(dd=!0),de!==null&&(de=de.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var ze=t,Je=x;ae=r;var Gt=a;switch(Je.tag){case 1:if(ze=Je.payload,typeof ze=="function"){ve=ze.call(Gt,ve,ae);break e}ve=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Je.payload,ae=typeof ze=="function"?ze.call(Gt,ve,ae):ze,ae==null)break e;ve=I({},ve,ae);break e;case 2:La=!0}}ae=x.callback,ae!==null&&(t.flags|=64,ue&&(t.flags|=8192),ue=f.callbacks,ue===null?f.callbacks=[ae]:ue.push(ae))}else ue={lane:ae,tag:x.tag,payload:x.payload,callback:x.callback,next:null},de===null?(ie=de=ue,L=ve):de=de.next=ue,T|=ae;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;ue=x,x=ue.next,ue.next=null,f.lastBaseUpdate=ue,f.shared.pending=null}}while(!0);de===null&&(L=ve),f.baseState=L,f.firstBaseUpdate=ie,f.lastBaseUpdate=de,m===null&&(f.shared.lanes=0),Ka|=T,t.lanes=T,t.memoizedState=ve}}function Lg(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function Ug(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Lg(a[t],r)}var wl=H(null),Kc=H(0);function zg(t,r){t=ra,Ie(Kc,t),Ie(wl,r),ra=t|r.baseLanes}function pd(){Ie(Kc,ra),Ie(wl,wl.current)}function md(){ra=Kc.current,pe(wl),pe(Kc)}var di=H(null),ji=null;function Ba(t){var r=t.alternate;Ie(wn,wn.current&1),Ie(di,t),ji===null&&(r===null||wl.current!==null||r.memoizedState!==null)&&(ji=t)}function gd(t){Ie(wn,wn.current),Ie(di,t),ji===null&&(ji=t)}function Bg(t){t.tag===22?(Ie(wn,wn.current),Ie(di,t),ji===null&&(ji=t)):qa()}function qa(){Ie(wn,wn.current),Ie(di,di.current)}function pi(t){pe(di),ji===t&&(ji=null),pe(wn)}var wn=H(0);function Gc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Tp(a)||Sp(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var $s=0,dt=null,Ft=null,Nn=null,Yc=!1,Al=!1,Fo=!1,Qc=0,wu=0,Cl=null,mT=0;function gn(){throw Error(s(321))}function yd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!dr(t[a],r[a]))return!1;return!0}function vd(t,r,a,l,f,m){return $s=m,dt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ce.H=t===null||t.memoizedState===null?wy:kd,Fo=!1,m=a(l,f),Fo=!1,Al&&(m=Hg(r,a,l,f)),qg(t),m}function qg(t){ce.H=xu;var r=Ft!==null&&Ft.next!==null;if($s=0,Nn=Ft=dt=null,Yc=!1,wu=0,Cl=null,r)throw Error(s(300));t===null||kn||(t=t.dependencies,t!==null&&Lc(t)&&(kn=!0))}function Hg(t,r,a,l){dt=t;var f=0;do{if(Al&&(Cl=null),wu=0,Al=!1,25<=f)throw Error(s(301));if(f+=1,Nn=Ft=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}ce.H=Ay,m=r(a,l)}while(Al);return m}function gT(){var t=ce.H,r=t.useState()[0];return r=typeof r.then=="function"?Au(r):r,t=t.useState()[0],(Ft!==null?Ft.memoizedState:null)!==t&&(dt.flags|=1024),r}function _d(){var t=Qc!==0;return Qc=0,t}function bd(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Ed(t){if(Yc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Yc=!1}$s=0,Nn=Ft=dt=null,Al=!1,wu=Qc=0,Cl=null}function Cr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?dt.memoizedState=Nn=t:Nn=Nn.next=t,Nn}function An(){if(Ft===null){var t=dt.alternate;t=t!==null?t.memoizedState:null}else t=Ft.next;var r=Nn===null?dt.memoizedState:Nn.next;if(r!==null)Nn=r,Ft=t;else{if(t===null)throw dt.alternate===null?Error(s(467)):Error(s(310));Ft=t,t={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Nn===null?dt.memoizedState=Nn=t:Nn=Nn.next=t}return Nn}function $c(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Au(t){var r=wu;return wu+=1,Cl===null&&(Cl=[]),t=kg(Cl,t,r),r=dt,(Nn===null?r.memoizedState:Nn.next)===null&&(r=r.alternate,ce.H=r===null||r.memoizedState===null?wy:kd),t}function Xc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Au(t);if(t.$$typeof===Pe)return nr(t)}throw Error(s(438,String(t)))}function Td(t){var r=null,a=dt.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=dt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=$c(),dt.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=Y;return r.index++,a}function Xs(t,r){return typeof r=="function"?r(t):r}function Wc(t){var r=An();return Sd(r,Ft,t)}function Sd(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var T=f.next;f.next=m.next,m.next=T}r.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var x=T=null,L=null,ie=r,de=!1;do{var ve=ie.lane&-536870913;if(ve!==ie.lane?(Tt&ve)===ve:($s&ve)===ve){var ae=ie.revertLane;if(ae===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),ve===bl&&(de=!0);else if(($s&ae)===ae){ie=ie.next,ae===bl&&(de=!0);continue}else ve={lane:0,revertLane:ie.revertLane,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},L===null?(x=L=ve,T=m):L=L.next=ve,dt.lanes|=ae,Ka|=ae;ve=ie.action,Fo&&a(m,ve),m=ie.hasEagerState?ie.eagerState:a(m,ve)}else ae={lane:ve,revertLane:ie.revertLane,gesture:ie.gesture,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},L===null?(x=L=ae,T=m):L=L.next=ae,dt.lanes|=ve,Ka|=ve;ie=ie.next}while(ie!==null&&ie!==r);if(L===null?T=m:L.next=x,!dr(m,t.memoizedState)&&(kn=!0,de&&(a=El,a!==null)))throw a;t.memoizedState=m,t.baseState=T,t.baseQueue=L,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function wd(t){var r=An(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,m=r.memoizedState;if(f!==null){a.pending=null;var T=f=f.next;do m=t(m,T.action),T=T.next;while(T!==f);dr(m,r.memoizedState)||(kn=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,l]}function Fg(t,r,a){var l=dt,f=An(),m=It;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=r();var T=!dr((Ft||f).memoizedState,a);if(T&&(f.memoizedState=a,kn=!0),f=f.queue,xd(Yg.bind(null,l,f,t),[t]),f.getSnapshot!==r||T||Nn!==null&&Nn.memoizedState.tag&1){if(l.flags|=2048,xl(9,{destroy:void 0},Gg.bind(null,l,f,a,r),null),Qt===null)throw Error(s(349));m||($s&127)!==0||Kg(l,r,a)}return a}function Kg(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=dt.updateQueue,r===null?(r=$c(),dt.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Gg(t,r,a,l){r.value=a,r.getSnapshot=l,Qg(r)&&$g(t)}function Yg(t,r,a){return a(function(){Qg(r)&&$g(t)})}function Qg(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!dr(t,a)}catch{return!0}}function $g(t){var r=tn(t,2);r!==null&&Qr(r,t,2)}function Ad(t){var r=Cr();if(typeof t=="function"){var a=t;if(t=a(),Fo){bn(!0);try{a()}finally{bn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:t},r}function Xg(t,r,a,l){return t.baseState=a,Sd(t,Ft,typeof l=="function"?l:Xs)}function yT(t,r,a,l,f){if(eh(t))throw Error(s(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){m.listeners.push(T)}};ce.T!==null?a(!0):m.isTransition=!1,l(m),a=r.pending,a===null?(m.next=r.pending=m,Wg(r,m)):(m.next=a.next,r.pending=a.next=m)}}function Wg(t,r){var a=r.action,l=r.payload,f=t.state;if(r.isTransition){var m=ce.T,T={};ce.T=T;try{var x=a(f,l),L=ce.S;L!==null&&L(T,x),Jg(t,r,x)}catch(ie){Cd(t,r,ie)}finally{m!==null&&T.types!==null&&(m.types=T.types),ce.T=m}}else try{m=a(f,l),Jg(t,r,m)}catch(ie){Cd(t,r,ie)}}function Jg(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Zg(t,r,l)},function(l){return Cd(t,r,l)}):Zg(t,r,a)}function Zg(t,r,a){r.status="fulfilled",r.value=a,ey(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Wg(t,a)))}function Cd(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,ey(r),r=r.next;while(r!==l)}t.action=null}function ey(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function ty(t,r){return r}function ny(t,r){if(It){var a=Qt.formState;if(a!==null){e:{var l=dt;if(It){if(Wt){t:{for(var f=Wt,m=Pi;f.nodeType!==8;){if(!m){f=null;break t}if(f=Li(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Wt=Li(f.nextSibling),l=f.data==="F!";break e}}Pa(l)}l=!1}l&&(r=a[0])}}return a=Cr(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ty,lastRenderedState:r},a.queue=l,a=Ey.bind(null,dt,l),l.dispatch=a,l=Ad(!1),m=Nd.bind(null,dt,!1,l.queue),l=Cr(),f={state:r,dispatch:null,action:t,pending:null},l.queue=f,a=yT.bind(null,dt,f,m,a),f.dispatch=a,l.memoizedState=t,[r,a,!1]}function ry(t){var r=An();return iy(r,Ft,t)}function iy(t,r,a){if(r=Sd(t,r,ty)[0],t=Wc(Xs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Au(r)}catch(T){throw T===Tl?Bc:T}else l=r;r=An();var f=r.queue,m=f.dispatch;return a!==r.memoizedState&&(dt.flags|=2048,xl(9,{destroy:void 0},vT.bind(null,f,a),null)),[l,m,t]}function vT(t,r){t.action=r}function sy(t){var r=An(),a=Ft;if(a!==null)return iy(r,a,t);An(),r=r.memoizedState,a=An();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function xl(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=dt.updateQueue,r===null&&(r=$c(),dt.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function ay(){return An().memoizedState}function Jc(t,r,a,l){var f=Cr();dt.flags|=t,f.memoizedState=xl(1|r,{destroy:void 0},a,l===void 0?null:l)}function Zc(t,r,a,l){var f=An();l=l===void 0?null:l;var m=f.memoizedState.inst;Ft!==null&&l!==null&&yd(l,Ft.memoizedState.deps)?f.memoizedState=xl(r,m,a,l):(dt.flags|=t,f.memoizedState=xl(1|r,m,a,l))}function oy(t,r){Jc(8390656,8,t,r)}function xd(t,r){Zc(2048,8,t,r)}function _T(t){dt.flags|=4;var r=dt.updateQueue;if(r===null)r=$c(),dt.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function ly(t){var r=An().memoizedState;return _T({ref:r,nextImpl:t}),function(){if((Vt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function uy(t,r){return Zc(4,2,t,r)}function cy(t,r){return Zc(4,4,t,r)}function hy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function fy(t,r,a){a=a!=null?a.concat([t]):null,Zc(4,4,hy.bind(null,r,t),a)}function Rd(){}function dy(t,r){var a=An();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&yd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function py(t,r){var a=An();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&yd(r,l[1]))return l[0];if(l=t(),Fo){bn(!0);try{t()}finally{bn(!1)}}return a.memoizedState=[l,r],l}function Id(t,r,a){return a===void 0||($s&1073741824)!==0&&(Tt&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=mv(),dt.lanes|=t,Ka|=t,a)}function my(t,r,a,l){return dr(a,r)?a:wl.current!==null?(t=Id(t,a,l),dr(t,r)||(kn=!0),t):($s&42)===0||($s&1073741824)!==0&&(Tt&261930)===0?(kn=!0,t.memoizedState=a):(t=mv(),dt.lanes|=t,Ka|=t,r)}function gy(t,r,a,l,f){var m=Oe.p;Oe.p=m!==0&&8>m?m:8;var T=ce.T,x={};ce.T=x,Nd(t,!1,r,a);try{var L=f(),ie=ce.S;if(ie!==null&&ie(x,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var de=pT(L,l);Cu(t,r,de,yi(t))}else Cu(t,r,l,yi(t))}catch(ve){Cu(t,r,{then:function(){},status:"rejected",reason:ve},yi())}finally{Oe.p=m,T!==null&&x.types!==null&&(T.types=x.types),ce.T=T}}function bT(){}function Od(t,r,a,l){if(t.tag!==5)throw Error(s(476));var f=yy(t).queue;gy(t,f,r,qe,a===null?bT:function(){return vy(t),a(l)})}function yy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:qe,baseState:qe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:qe},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function vy(t){var r=yy(t);r.next===null&&(r=t.alternate.memoizedState),Cu(t,r.next.queue,{},yi())}function Dd(){return nr(Hu)}function _y(){return An().memoizedState}function by(){return An().memoizedState}function ET(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=yi();t=Ua(a);var l=za(r,t,a);l!==null&&(Qr(l,r,a),Eu(l,r,a)),r={cache:ad()},t.payload=r;return}r=r.return}}function TT(t,r,a){var l=yi();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},eh(t)?Ty(r,a):(a=In(t,r,a,l),a!==null&&(Qr(a,t,l),Sy(a,r,l)))}function Ey(t,r,a){var l=yi();Cu(t,r,a,l)}function Cu(t,r,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(eh(t))Ty(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var T=r.lastRenderedState,x=m(T,a);if(f.hasEagerState=!0,f.eagerState=x,dr(x,T))return nt(t,r,f,0),Qt===null&&Qn(),!1}catch{}finally{}if(a=In(t,r,f,l),a!==null)return Qr(a,t,l),Sy(a,r,l),!0}return!1}function Nd(t,r,a,l){if(l={lane:2,revertLane:cp(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},eh(t)){if(r)throw Error(s(479))}else r=In(t,a,l,2),r!==null&&Qr(r,t,2)}function eh(t){var r=t.alternate;return t===dt||r!==null&&r===dt}function Ty(t,r){Al=Yc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Sy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Pt(t,a)}}var xu={readContext:nr,use:Xc,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useLayoutEffect:gn,useInsertionEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useSyncExternalStore:gn,useId:gn,useHostTransitionStatus:gn,useFormState:gn,useActionState:gn,useOptimistic:gn,useMemoCache:gn,useCacheRefresh:gn};xu.useEffectEvent=gn;var wy={readContext:nr,use:Xc,useCallback:function(t,r){return Cr().memoizedState=[t,r===void 0?null:r],t},useContext:nr,useEffect:oy,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Jc(4194308,4,hy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Jc(4194308,4,t,r)},useInsertionEffect:function(t,r){Jc(4,2,t,r)},useMemo:function(t,r){var a=Cr();r=r===void 0?null:r;var l=t();if(Fo){bn(!0);try{t()}finally{bn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=Cr();if(a!==void 0){var f=a(r);if(Fo){bn(!0);try{a(r)}finally{bn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=TT.bind(null,dt,t),[l.memoizedState,t]},useRef:function(t){var r=Cr();return t={current:t},r.memoizedState=t},useState:function(t){t=Ad(t);var r=t.queue,a=Ey.bind(null,dt,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Rd,useDeferredValue:function(t,r){var a=Cr();return Id(a,t,r)},useTransition:function(){var t=Ad(!1);return t=gy.bind(null,dt,t.queue,!0,!1),Cr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=dt,f=Cr();if(It){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),Qt===null)throw Error(s(349));(Tt&127)!==0||Kg(l,r,a)}f.memoizedState=a;var m={value:a,getSnapshot:r};return f.queue=m,oy(Yg.bind(null,l,m,t),[t]),l.flags|=2048,xl(9,{destroy:void 0},Gg.bind(null,l,m,a,r),null),a},useId:function(){var t=Cr(),r=Qt.identifierPrefix;if(It){var a=vs,l=ys;a=(l&~(1<<32-ke(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Qc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=mT++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Dd,useFormState:ny,useActionState:ny,useOptimistic:function(t){var r=Cr();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Nd.bind(null,dt,!0,a),a.dispatch=r,[t,r]},useMemoCache:Td,useCacheRefresh:function(){return Cr().memoizedState=ET.bind(null,dt)},useEffectEvent:function(t){var r=Cr(),a={impl:t};return r.memoizedState=a,function(){if((Vt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},kd={readContext:nr,use:Xc,useCallback:dy,useContext:nr,useEffect:xd,useImperativeHandle:fy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:py,useReducer:Wc,useRef:ay,useState:function(){return Wc(Xs)},useDebugValue:Rd,useDeferredValue:function(t,r){var a=An();return my(a,Ft.memoizedState,t,r)},useTransition:function(){var t=Wc(Xs)[0],r=An().memoizedState;return[typeof t=="boolean"?t:Au(t),r]},useSyncExternalStore:Fg,useId:_y,useHostTransitionStatus:Dd,useFormState:ry,useActionState:ry,useOptimistic:function(t,r){var a=An();return Xg(a,Ft,t,r)},useMemoCache:Td,useCacheRefresh:by};kd.useEffectEvent=ly;var Ay={readContext:nr,use:Xc,useCallback:dy,useContext:nr,useEffect:xd,useImperativeHandle:fy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:py,useReducer:wd,useRef:ay,useState:function(){return wd(Xs)},useDebugValue:Rd,useDeferredValue:function(t,r){var a=An();return Ft===null?Id(a,t,r):my(a,Ft.memoizedState,t,r)},useTransition:function(){var t=wd(Xs)[0],r=An().memoizedState;return[typeof t=="boolean"?t:Au(t),r]},useSyncExternalStore:Fg,useId:_y,useHostTransitionStatus:Dd,useFormState:sy,useActionState:sy,useOptimistic:function(t,r){var a=An();return Ft!==null?Xg(a,Ft,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Td,useCacheRefresh:by};Ay.useEffectEvent=ly;function Md(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:I({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Vd={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=yi(),f=Ua(l);f.payload=r,a!=null&&(f.callback=a),r=za(t,f,l),r!==null&&(Qr(r,t,l),Eu(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=yi(),f=Ua(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=za(t,f,l),r!==null&&(Qr(r,t,l),Eu(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=yi(),l=Ua(a);l.tag=2,r!=null&&(l.callback=r),r=za(t,l,a),r!==null&&(Qr(r,t,a),Eu(r,t,a))}};function Cy(t,r,a,l,f,m,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,T):r.prototype&&r.prototype.isPureReactComponent?!h(a,l)||!h(f,m):!0}function xy(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&Vd.enqueueReplaceState(r,r.state,null)}function Ko(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=I({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function Ry(t){je(t)}function Iy(t){console.error(t)}function Oy(t){je(t)}function th(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Dy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Pd(t,r,a){return a=Ua(a),a.tag=3,a.payload={element:null},a.callback=function(){th(t,r)},a}function Ny(t){return t=Ua(t),t.tag=3,t}function ky(t,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){Dy(r,a,l)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Dy(r,a,l),typeof f!="function"&&(Ga===null?Ga=new Set([this]):Ga.add(this));var x=l.stack;this.componentDidCatch(l.value,{componentStack:x!==null?x:""})})}function ST(t,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&_l(r,a,f,!0),a=di.current,a!==null){switch(a.tag){case 31:case 13:return ji===null?dh():a.alternate===null&&yn===0&&(yn=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===qc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),op(t,l,f)),!1;case 22:return a.flags|=65536,l===qc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),op(t,l,f)),!1}throw Error(s(435,a.tag))}return op(t,l,f),dh(),!1}if(It)return r=di.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==td&&(t=Error(s(422),{cause:l}),gu(ki(t,a)))):(l!==td&&(r=Error(s(423),{cause:l}),gu(ki(r,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=ki(l,a),f=Pd(t.stateNode,l,f),fd(t,f),yn!==4&&(yn=2)),!1;var m=Error(s(520),{cause:l});if(m=ki(m,a),Vu===null?Vu=[m]:Vu.push(m),yn!==4&&(yn=2),r===null)return!0;l=ki(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=Pd(a.stateNode,l,t),fd(a,t),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ga===null||!Ga.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Ny(f),ky(f,t,a,l),fd(a,f),!1}a=a.return}while(a!==null);return!1}var jd=Error(s(461)),kn=!1;function rr(t,r,a,l){r.child=t===null?jg(r,null,a,l):Ho(r,t.child,a,l)}function My(t,r,a,l,f){a=a.render;var m=r.ref;if("ref"in l){var T={};for(var x in l)x!=="ref"&&(T[x]=l[x])}else T=l;return Uo(r),l=vd(t,r,a,T,m,f),x=_d(),t!==null&&!kn?(bd(t,r,f),Ws(t,r,f)):(It&&x&&Zf(r),r.flags|=1,rr(t,r,l,f),r.child)}function Vy(t,r,a,l,f){if(t===null){var m=a.type;return typeof m=="function"&&!Xf(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,Py(t,r,m,l,f)):(t=Pc(a.type,null,l,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!Kd(t,f)){var T=m.memoizedProps;if(a=a.compare,a=a!==null?a:h,a(T,l)&&t.ref===r.ref)return Ws(t,r,f)}return r.flags|=1,t=Ks(m,l),t.ref=r.ref,t.return=r,r.child=t}function Py(t,r,a,l,f){if(t!==null){var m=t.memoizedProps;if(h(m,l)&&t.ref===r.ref)if(kn=!1,r.pendingProps=l=m,Kd(t,f))(t.flags&131072)!==0&&(kn=!0);else return r.lanes=t.lanes,Ws(t,r,f)}return Ld(t,r,a,l,f)}function jy(t,r,a,l){var f=l.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=r.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,r.child=null;return Ly(t,r,m,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&zc(r,m!==null?m.cachePool:null),m!==null?zg(r,m):pd(),Bg(r);else return l=r.lanes=536870912,Ly(t,r,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(zc(r,m.cachePool),zg(r,m),qa(),r.memoizedState=null):(t!==null&&zc(r,null),pd(),qa());return rr(t,r,f,a),r.child}function Ru(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Ly(t,r,a,l,f){var m=ld();return m=m===null?null:{parent:Dn._currentValue,pool:m},r.memoizedState={baseLanes:a,cachePool:m},t!==null&&zc(r,null),pd(),Bg(r),t!==null&&_l(t,r,l,!0),r.childLanes=f,null}function nh(t,r){return r=ih({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Uy(t,r,a){return Ho(r,t.child,null,a),t=nh(r,r.pendingProps),t.flags|=2,pi(r),r.memoizedState=null,t}function wT(t,r,a){var l=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(It){if(l.mode==="hidden")return t=nh(r,l),r.lanes=536870912,Ru(null,t);if(gd(r),(t=Wt)?(t=Wv(t,Pi),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ma!==null?{id:ys,overflow:vs}:null,retryLane:536870912,hydrationErrors:null},a=Tg(t),a.return=r,r.child=a,tr=r,Wt=null)):t=null,t===null)throw Pa(r);return r.lanes=536870912,null}return nh(r,l)}var m=t.memoizedState;if(m!==null){var T=m.dehydrated;if(gd(r),f)if(r.flags&256)r.flags&=-257,r=Uy(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(s(558));else if(kn||_l(t,r,a,!1),f=(a&t.childLanes)!==0,kn||f){if(l=Qt,l!==null&&(T=en(l,a),T!==0&&T!==m.retryLane))throw m.retryLane=T,tn(t,T),Qr(l,t,T),jd;dh(),r=Uy(t,r,a)}else t=m.treeContext,Wt=Li(T.nextSibling),tr=r,It=!0,Va=null,Pi=!1,t!==null&&Ag(r,t),r=nh(r,l),r.flags|=4096;return r}return t=Ks(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function rh(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Ld(t,r,a,l,f){return Uo(r),a=vd(t,r,a,l,void 0,f),l=_d(),t!==null&&!kn?(bd(t,r,f),Ws(t,r,f)):(It&&l&&Zf(r),r.flags|=1,rr(t,r,a,f),r.child)}function zy(t,r,a,l,f,m){return Uo(r),r.updateQueue=null,a=Hg(r,l,a,f),qg(t),l=_d(),t!==null&&!kn?(bd(t,r,m),Ws(t,r,m)):(It&&l&&Zf(r),r.flags|=1,rr(t,r,a,m),r.child)}function By(t,r,a,l,f){if(Uo(r),r.stateNode===null){var m=Hr,T=a.contextType;typeof T=="object"&&T!==null&&(m=nr(T)),m=new a(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Vd,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},cd(r),T=a.contextType,m.context=typeof T=="object"&&T!==null?nr(T):Hr,m.state=r.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(Md(r,a,T,l),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(T=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),T!==m.state&&Vd.enqueueReplaceState(m,m.state,null),Su(r,l,m,f),Tu(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var x=r.memoizedProps,L=Ko(a,x);m.props=L;var ie=m.context,de=a.contextType;T=Hr,typeof de=="object"&&de!==null&&(T=nr(de));var ve=a.getDerivedStateFromProps;de=typeof ve=="function"||typeof m.getSnapshotBeforeUpdate=="function",x=r.pendingProps!==x,de||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x||ie!==T)&&xy(r,m,l,T),La=!1;var ae=r.memoizedState;m.state=ae,Su(r,l,m,f),Tu(),ie=r.memoizedState,x||ae!==ie||La?(typeof ve=="function"&&(Md(r,a,ve,l),ie=r.memoizedState),(L=La||Cy(r,a,L,l,ae,ie,T))?(de||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=ie),m.props=l,m.state=ie,m.context=T,l=L):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,hd(t,r),T=r.memoizedProps,de=Ko(a,T),m.props=de,ve=r.pendingProps,ae=m.context,ie=a.contextType,L=Hr,typeof ie=="object"&&ie!==null&&(L=nr(ie)),x=a.getDerivedStateFromProps,(ie=typeof x=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T!==ve||ae!==L)&&xy(r,m,l,L),La=!1,ae=r.memoizedState,m.state=ae,Su(r,l,m,f),Tu();var ue=r.memoizedState;T!==ve||ae!==ue||La||t!==null&&t.dependencies!==null&&Lc(t.dependencies)?(typeof x=="function"&&(Md(r,a,x,l),ue=r.memoizedState),(de=La||Cy(r,a,de,l,ae,ue,L)||t!==null&&t.dependencies!==null&&Lc(t.dependencies))?(ie||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ue,L),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ue,L)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||T===t.memoizedProps&&ae===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&ae===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=ue),m.props=l,m.state=ue,m.context=L,l=de):(typeof m.componentDidUpdate!="function"||T===t.memoizedProps&&ae===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&ae===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,rh(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=Ho(r,t.child,null,f),r.child=Ho(r,null,a,f)):rr(t,r,a,f),r.memoizedState=m.state,t=r.child):t=Ws(t,r,f),t}function qy(t,r,a,l){return jo(),r.flags|=256,rr(t,r,a,l),r.child}var Ud={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zd(t){return{baseLanes:t,cachePool:Dg()}}function Bd(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=gi),t}function Hy(t,r,a){var l=r.pendingProps,f=!1,m=(r.flags&128)!==0,T;if((T=m)||(T=t!==null&&t.memoizedState===null?!1:(wn.current&2)!==0),T&&(f=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,t===null){if(It){if(f?Ba(r):qa(),(t=Wt)?(t=Wv(t,Pi),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ma!==null?{id:ys,overflow:vs}:null,retryLane:536870912,hydrationErrors:null},a=Tg(t),a.return=r,r.child=a,tr=r,Wt=null)):t=null,t===null)throw Pa(r);return Sp(t)?r.lanes=32:r.lanes=536870912,null}var x=l.children;return l=l.fallback,f?(qa(),f=r.mode,x=ih({mode:"hidden",children:x},f),l=Po(l,f,a,null),x.return=r,l.return=r,x.sibling=l,r.child=x,l=r.child,l.memoizedState=zd(a),l.childLanes=Bd(t,T,a),r.memoizedState=Ud,Ru(null,l)):(Ba(r),qd(r,x))}var L=t.memoizedState;if(L!==null&&(x=L.dehydrated,x!==null)){if(m)r.flags&256?(Ba(r),r.flags&=-257,r=Hd(t,r,a)):r.memoizedState!==null?(qa(),r.child=t.child,r.flags|=128,r=null):(qa(),x=l.fallback,f=r.mode,l=ih({mode:"visible",children:l.children},f),x=Po(x,f,a,null),x.flags|=2,l.return=r,x.return=r,l.sibling=x,r.child=l,Ho(r,t.child,null,a),l=r.child,l.memoizedState=zd(a),l.childLanes=Bd(t,T,a),r.memoizedState=Ud,r=Ru(null,l));else if(Ba(r),Sp(x)){if(T=x.nextSibling&&x.nextSibling.dataset,T)var ie=T.dgst;T=ie,l=Error(s(419)),l.stack="",l.digest=T,gu({value:l,source:null,stack:null}),r=Hd(t,r,a)}else if(kn||_l(t,r,a,!1),T=(a&t.childLanes)!==0,kn||T){if(T=Qt,T!==null&&(l=en(T,a),l!==0&&l!==L.retryLane))throw L.retryLane=l,tn(t,l),Qr(T,t,l),jd;Tp(x)||dh(),r=Hd(t,r,a)}else Tp(x)?(r.flags|=192,r.child=t.child,r=null):(t=L.treeContext,Wt=Li(x.nextSibling),tr=r,It=!0,Va=null,Pi=!1,t!==null&&Ag(r,t),r=qd(r,l.children),r.flags|=4096);return r}return f?(qa(),x=l.fallback,f=r.mode,L=t.child,ie=L.sibling,l=Ks(L,{mode:"hidden",children:l.children}),l.subtreeFlags=L.subtreeFlags&65011712,ie!==null?x=Ks(ie,x):(x=Po(x,f,a,null),x.flags|=2),x.return=r,l.return=r,l.sibling=x,r.child=l,Ru(null,l),l=r.child,x=t.child.memoizedState,x===null?x=zd(a):(f=x.cachePool,f!==null?(L=Dn._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=Dg(),x={baseLanes:x.baseLanes|a,cachePool:f}),l.memoizedState=x,l.childLanes=Bd(t,T,a),r.memoizedState=Ud,Ru(t.child,l)):(Ba(r),a=t.child,t=a.sibling,a=Ks(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(T=r.deletions,T===null?(r.deletions=[t],r.flags|=16):T.push(t)),r.child=a,r.memoizedState=null,a)}function qd(t,r){return r=ih({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function ih(t,r){return t=fi(22,t,null,r),t.lanes=0,t}function Hd(t,r,a){return Ho(r,t.child,null,a),t=qd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Fy(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),id(t.return,r,a)}function Fd(t,r,a,l,f,m){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:m}:(T.isBackwards=r,T.rendering=null,T.renderingStartTime=0,T.last=l,T.tail=a,T.tailMode=f,T.treeForkCount=m)}function Ky(t,r,a){var l=r.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var T=wn.current,x=(T&2)!==0;if(x?(T=T&1|2,r.flags|=128):T&=1,Ie(wn,T),rr(t,r,l,a),l=It?mu:0,!x&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fy(t,a,r);else if(t.tag===19)Fy(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=r.child,f=null;a!==null;)t=a.alternate,t!==null&&Gc(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),Fd(r,!1,f,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&Gc(t)===null){r.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}Fd(r,!0,a,null,m,l);break;case"together":Fd(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function Ws(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Ka|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(_l(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=Ks(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Ks(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Kd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Lc(t)))}function AT(t,r,a){switch(r.tag){case 3:vn(r,r.stateNode.containerInfo),ja(r,Dn,t.memoizedState.cache),jo();break;case 27:case 5:as(r);break;case 4:vn(r,r.stateNode.containerInfo);break;case 10:ja(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,gd(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Ba(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Hy(t,r,a):(Ba(r),t=Ws(t,r,a),t!==null?t.sibling:null);Ba(r);break;case 19:var f=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(_l(t,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return Ky(t,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ie(wn,wn.current),l)break;return null;case 22:return r.lanes=0,jy(t,r,a,r.pendingProps);case 24:ja(r,Dn,t.memoizedState.cache)}return Ws(t,r,a)}function Gy(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)kn=!0;else{if(!Kd(t,a)&&(r.flags&128)===0)return kn=!1,AT(t,r,a);kn=(t.flags&131072)!==0}else kn=!1,It&&(r.flags&1048576)!==0&&wg(r,mu,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=Bo(r.elementType),r.type=t,typeof t=="function")Xf(t)?(l=Ko(t,l),r.tag=1,r=By(null,r,t,l,a)):(r.tag=0,r=Ld(null,r,t,l,a));else{if(t!=null){var f=t.$$typeof;if(f===rt){r.tag=11,r=My(null,r,t,l,a);break e}else if(f===V){r.tag=14,r=Vy(null,r,t,l,a);break e}}throw r=Xe(t)||t,Error(s(306,r,""))}}return r;case 0:return Ld(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=Ko(l,r.pendingProps),By(t,r,l,f,a);case 3:e:{if(vn(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var m=r.memoizedState;f=m.element,hd(t,r),Su(r,l,null,a);var T=r.memoizedState;if(l=T.cache,ja(r,Dn,l),l!==m.cache&&sd(r,[Dn],a,!0),Tu(),l=T.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=qy(t,r,l,a);break e}else if(l!==f){f=ki(Error(s(424)),r),gu(f),r=qy(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Wt=Li(t.firstChild),tr=r,It=!0,Va=null,Pi=!0,a=jg(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(jo(),l===f){r=Ws(t,r,a);break e}rr(t,r,l,a)}r=r.child}return r;case 26:return rh(t,r),t===null?(a=r_(r.type,null,r.pendingProps,null))?r.memoizedState=a:It||(a=r.type,t=r.pendingProps,l=bh(tt.current).createElement(a),l[Ut]=r,l[$t]=t,ir(l,a,t),on(l),r.stateNode=l):r.memoizedState=r_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return as(r),t===null&&It&&(l=r.stateNode=e_(r.type,r.pendingProps,tt.current),tr=r,Pi=!0,f=Wt,Xa(r.type)?(wp=f,Wt=Li(l.firstChild)):Wt=f),rr(t,r,r.pendingProps.children,a),rh(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&It&&((f=l=Wt)&&(l=tS(l,r.type,r.pendingProps,Pi),l!==null?(r.stateNode=l,tr=r,Wt=Li(l.firstChild),Pi=!1,f=!0):f=!1),f||Pa(r)),as(r),f=r.type,m=r.pendingProps,T=t!==null?t.memoizedProps:null,l=m.children,_p(f,m)?l=null:T!==null&&_p(f,T)&&(r.flags|=32),r.memoizedState!==null&&(f=vd(t,r,gT,null,null,a),Hu._currentValue=f),rh(t,r),rr(t,r,l,a),r.child;case 6:return t===null&&It&&((t=a=Wt)&&(a=nS(a,r.pendingProps,Pi),a!==null?(r.stateNode=a,tr=r,Wt=null,t=!0):t=!1),t||Pa(r)),null;case 13:return Hy(t,r,a);case 4:return vn(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Ho(r,null,l,a):rr(t,r,l,a),r.child;case 11:return My(t,r,r.type,r.pendingProps,a);case 7:return rr(t,r,r.pendingProps,a),r.child;case 8:return rr(t,r,r.pendingProps.children,a),r.child;case 12:return rr(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,ja(r,r.type,l.value),rr(t,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,Uo(r),f=nr(f),l=l(f),r.flags|=1,rr(t,r,l,a),r.child;case 14:return Vy(t,r,r.type,r.pendingProps,a);case 15:return Py(t,r,r.type,r.pendingProps,a);case 19:return Ky(t,r,a);case 31:return wT(t,r,a);case 22:return jy(t,r,a,r.pendingProps);case 24:return Uo(r),l=nr(Dn),t===null?(f=ld(),f===null&&(f=Qt,m=ad(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),r.memoizedState={parent:l,cache:f},cd(r),ja(r,Dn,f)):((t.lanes&a)!==0&&(hd(t,r),Su(r,null,null,a),Tu()),f=t.memoizedState,m=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),ja(r,Dn,l)):(l=m.cache,ja(r,Dn,l),l!==f.cache&&sd(r,[Dn],a,!0))),rr(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Js(t){t.flags|=4}function Gd(t,r,a,l,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(_v())t.flags|=8192;else throw qo=qc,ud}else t.flags&=-16777217}function Yy(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!l_(r))if(_v())t.flags|=8192;else throw qo=qc,ud}function sh(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?cl():536870912,t.lanes|=r,Dl|=r)}function Iu(t,r){if(!It)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Jt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function CT(t,r,a){var l=r.pendingProps;switch(ed(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(r),null;case 1:return Jt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Qs(Dn),Me(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(vl(r)?Js(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,nd())),Jt(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(Js(r),m!==null?(Jt(r),Yy(r,m)):(Jt(r),Gd(r,f,null,l,a))):m?m!==t.memoizedState?(Js(r),Jt(r),Yy(r,m)):(Jt(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&Js(r),Jt(r),Gd(r,f,t,l,a)),null;case 27:if(Fi(r),a=tt.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Js(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Jt(r),null}t=Le.current,vl(r)?Cg(r):(t=e_(f,l,a),r.stateNode=t,Js(r))}return Jt(r),null;case 5:if(Fi(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Js(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Jt(r),null}if(m=Le.current,vl(r))Cg(r);else{var T=bh(tt.current);switch(m){case 1:m=T.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=T.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=T.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?T.createElement("select",{is:l.is}):T.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?T.createElement(f,{is:l.is}):T.createElement(f)}}m[Ut]=r,m[$t]=l;e:for(T=r.child;T!==null;){if(T.tag===5||T.tag===6)m.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===r)break e;for(;T.sibling===null;){if(T.return===null||T.return===r)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}r.stateNode=m;e:switch(ir(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Js(r)}}return Jt(r),Gd(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Js(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=tt.current,vl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,f=tr,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[Ut]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Hv(t.nodeValue,a)),t||Pa(r,!0)}else t=bh(t).createTextNode(l),t[Ut]=r,r.stateNode=t}return Jt(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=vl(r),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Ut]=r}else jo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Jt(r),t=!1}else a=nd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(pi(r),r):(pi(r),null);if((r.flags&128)!==0)throw Error(s(558))}return Jt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=vl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Ut]=r}else jo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Jt(r),f=!1}else f=nd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(pi(r),r):(pi(r),null)}return pi(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),sh(r,r.updateQueue),Jt(r),null);case 4:return Me(),t===null&&pp(r.stateNode.containerInfo),Jt(r),null;case 10:return Qs(r.type),Jt(r),null;case 19:if(pe(wn),l=r.memoizedState,l===null)return Jt(r),null;if(f=(r.flags&128)!==0,m=l.rendering,m===null)if(f)Iu(l,!1);else{if(yn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=Gc(t),m!==null){for(r.flags|=128,Iu(l,!1),t=m.updateQueue,r.updateQueue=t,sh(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Eg(a,t),a=a.sibling;return Ie(wn,wn.current&1|2),It&&Gs(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&Fn()>ch&&(r.flags|=128,f=!0,Iu(l,!1),r.lanes=4194304)}else{if(!f)if(t=Gc(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,sh(r,t),Iu(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!It)return Jt(r),null}else 2*Fn()-l.renderingStartTime>ch&&a!==536870912&&(r.flags|=128,f=!0,Iu(l,!1),r.lanes=4194304);l.isBackwards?(m.sibling=r.child,r.child=m):(t=l.last,t!==null?t.sibling=m:r.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Fn(),t.sibling=null,a=wn.current,Ie(wn,f?a&1|2:a&1),It&&Gs(r,l.treeForkCount),t):(Jt(r),null);case 22:case 23:return pi(r),md(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(Jt(r),r.subtreeFlags&6&&(r.flags|=8192)):Jt(r),a=r.updateQueue,a!==null&&sh(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&pe(zo),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Qs(Dn),Jt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function xT(t,r){switch(ed(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Qs(Dn),Me(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Fi(r),null;case 31:if(r.memoizedState!==null){if(pi(r),r.alternate===null)throw Error(s(340));jo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(pi(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));jo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return pe(wn),null;case 4:return Me(),null;case 10:return Qs(r.type),null;case 22:case 23:return pi(r),md(),t!==null&&pe(zo),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Qs(Dn),null;case 25:return null;default:return null}}function Qy(t,r){switch(ed(r),r.tag){case 3:Qs(Dn),Me();break;case 26:case 27:case 5:Fi(r);break;case 4:Me();break;case 31:r.memoizedState!==null&&pi(r);break;case 13:pi(r);break;case 19:pe(wn);break;case 10:Qs(r.type);break;case 22:case 23:pi(r),md(),t!==null&&pe(zo);break;case 24:Qs(Dn)}}function Ou(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var m=a.create,T=a.inst;l=m(),T.destroy=l}a=a.next}while(a!==f)}}catch(x){Ht(r,r.return,x)}}function Ha(t,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var T=l.inst,x=T.destroy;if(x!==void 0){T.destroy=void 0,f=r;var L=a,ie=x;try{ie()}catch(de){Ht(f,L,de)}}}l=l.next}while(l!==m)}}catch(de){Ht(r,r.return,de)}}function $y(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Ug(r,a)}catch(l){Ht(t,t.return,l)}}}function Xy(t,r,a){a.props=Ko(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Ht(t,r,l)}}function Du(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){Ht(t,r,f)}}function _s(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Ht(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Ht(t,r,f)}else a.current=null}function Wy(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Ht(t,t.return,f)}}function Yd(t,r,a){try{var l=t.stateNode;$T(l,t.type,a,r),l[$t]=r}catch(f){Ht(t,t.return,f)}}function Jy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Xa(t.type)||t.tag===4}function Qd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Xa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $d(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=fr));else if(l!==4&&(l===27&&Xa(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for($d(t,r,a),t=t.sibling;t!==null;)$d(t,r,a),t=t.sibling}function ah(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Xa(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(ah(t,r,a),t=t.sibling;t!==null;)ah(t,r,a),t=t.sibling}function Zy(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);ir(r,l,a),r[Ut]=t,r[$t]=a}catch(m){Ht(t,t.return,m)}}var Zs=!1,Mn=!1,Xd=!1,ev=typeof WeakSet=="function"?WeakSet:Set,$n=null;function RT(t,r){if(t=t.containerInfo,yp=xh,t=w(t),A(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var T=0,x=-1,L=-1,ie=0,de=0,ve=t,ae=null;t:for(;;){for(var ue;ve!==a||f!==0&&ve.nodeType!==3||(x=T+f),ve!==m||l!==0&&ve.nodeType!==3||(L=T+l),ve.nodeType===3&&(T+=ve.nodeValue.length),(ue=ve.firstChild)!==null;)ae=ve,ve=ue;for(;;){if(ve===t)break t;if(ae===a&&++ie===f&&(x=T),ae===m&&++de===l&&(L=T),(ue=ve.nextSibling)!==null)break;ve=ae,ae=ve.parentNode}ve=ue}a=x===-1||L===-1?null:{start:x,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(vp={focusedElem:t,selectionRange:a},xh=!1,$n=r;$n!==null;)if(r=$n,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,$n=t;else for(;$n!==null;){switch(r=$n,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=r,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var ze=Ko(a.type,f);t=l.getSnapshotBeforeUpdate(ze,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Je){Ht(a,a.return,Je)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Ep(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ep(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,$n=t;break}$n=r.return}}function tv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ta(t,a),l&4&&Ou(5,a);break;case 1:if(ta(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(T){Ht(a,a.return,T)}else{var f=Ko(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(T){Ht(a,a.return,T)}}l&64&&$y(a),l&512&&Du(a,a.return);break;case 3:if(ta(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Ug(t,r)}catch(T){Ht(a,a.return,T)}}break;case 27:r===null&&l&4&&Zy(a);case 26:case 5:ta(t,a),r===null&&l&4&&Wy(a),l&512&&Du(a,a.return);break;case 12:ta(t,a);break;case 31:ta(t,a),l&4&&iv(t,a);break;case 13:ta(t,a),l&4&&sv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=jT.bind(null,a),rS(t,a))));break;case 22:if(l=a.memoizedState!==null||Zs,!l){r=r!==null&&r.memoizedState!==null||Mn,f=Zs;var m=Mn;Zs=l,(Mn=r)&&!m?na(t,a,(a.subtreeFlags&8772)!==0):ta(t,a),Zs=f,Mn=m}break;case 30:break;default:ta(t,a)}}function nv(t){var r=t.alternate;r!==null&&(t.alternate=null,nv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&js(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var nn=null,Fr=!1;function ea(t,r,a){for(a=a.child;a!==null;)rv(t,r,a),a=a.sibling}function rv(t,r,a){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(ur,a)}catch{}switch(a.tag){case 26:Mn||_s(a,r),ea(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Mn||_s(a,r);var l=nn,f=Fr;Xa(a.type)&&(nn=a.stateNode,Fr=!1),ea(t,r,a),zu(a.stateNode),nn=l,Fr=f;break;case 5:Mn||_s(a,r);case 6:if(l=nn,f=Fr,nn=null,ea(t,r,a),nn=l,Fr=f,nn!==null)if(Fr)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(a.stateNode)}catch(m){Ht(a,r,m)}else try{nn.removeChild(a.stateNode)}catch(m){Ht(a,r,m)}break;case 18:nn!==null&&(Fr?(t=nn,$v(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ul(t)):$v(nn,a.stateNode));break;case 4:l=nn,f=Fr,nn=a.stateNode.containerInfo,Fr=!0,ea(t,r,a),nn=l,Fr=f;break;case 0:case 11:case 14:case 15:Ha(2,a,r),Mn||Ha(4,a,r),ea(t,r,a);break;case 1:Mn||(_s(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Xy(a,r,l)),ea(t,r,a);break;case 21:ea(t,r,a);break;case 22:Mn=(l=Mn)||a.memoizedState!==null,ea(t,r,a),Mn=l;break;default:ea(t,r,a)}}function iv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ul(t)}catch(a){Ht(r,r.return,a)}}}function sv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ul(t)}catch(a){Ht(r,r.return,a)}}function IT(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new ev),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new ev),r;default:throw Error(s(435,t.tag))}}function oh(t,r){var a=IT(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var f=LT.bind(null,t,l);l.then(f,f)}})}function Kr(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=t,T=r,x=T;e:for(;x!==null;){switch(x.tag){case 27:if(Xa(x.type)){nn=x.stateNode,Fr=!1;break e}break;case 5:nn=x.stateNode,Fr=!1;break e;case 3:case 4:nn=x.stateNode.containerInfo,Fr=!0;break e}x=x.return}if(nn===null)throw Error(s(160));rv(m,T,f),nn=null,Fr=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)av(r,t),r=r.sibling}var es=null;function av(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Kr(r,t),Gr(t),l&4&&(Ha(3,t,t.return),Ou(3,t),Ha(5,t,t.return));break;case 1:Kr(r,t),Gr(t),l&512&&(Mn||a===null||_s(a,a.return)),l&64&&Zs&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=es;if(Kr(r,t),Gr(t),l&512&&(Mn||a===null||_s(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Kn]||m[Ut]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),ir(m,l,a),m[Ut]=t,on(m),l=m;break e;case"link":var T=a_("link","href",f).get(l+(a.href||""));if(T){for(var x=0;x<T.length;x++)if(m=T[x],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(x,1);break t}}m=f.createElement(l),ir(m,l,a),f.head.appendChild(m);break;case"meta":if(T=a_("meta","content",f).get(l+(a.content||""))){for(x=0;x<T.length;x++)if(m=T[x],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(x,1);break t}}m=f.createElement(l),ir(m,l,a),f.head.appendChild(m);break;default:throw Error(s(468,l))}m[Ut]=t,on(m),l=m}t.stateNode=l}else o_(f,t.type,t.stateNode);else t.stateNode=s_(f,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?o_(f,t.type,t.stateNode):s_(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Yd(t,t.memoizedProps,a.memoizedProps)}break;case 27:Kr(r,t),Gr(t),l&512&&(Mn||a===null||_s(a,a.return)),a!==null&&l&4&&Yd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Kr(r,t),Gr(t),l&512&&(Mn||a===null||_s(a,a.return)),t.flags&32){f=t.stateNode;try{er(f,"")}catch(ze){Ht(t,t.return,ze)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Yd(t,f,a!==null?a.memoizedProps:f)),l&1024&&(Xd=!0);break;case 6:if(Kr(r,t),Gr(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ze){Ht(t,t.return,ze)}}break;case 3:if(Sh=null,f=es,es=Eh(r.containerInfo),Kr(r,t),es=f,Gr(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ul(r.containerInfo)}catch(ze){Ht(t,t.return,ze)}Xd&&(Xd=!1,ov(t));break;case 4:l=es,es=Eh(t.stateNode.containerInfo),Kr(r,t),Gr(t),es=l;break;case 12:Kr(r,t),Gr(t);break;case 31:Kr(r,t),Gr(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,oh(t,l)));break;case 13:Kr(r,t),Gr(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uh=Fn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,oh(t,l)));break;case 22:f=t.memoizedState!==null;var L=a!==null&&a.memoizedState!==null,ie=Zs,de=Mn;if(Zs=ie||f,Mn=de||L,Kr(r,t),Mn=de,Zs=ie,Gr(t),l&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||L||Zs||Mn||Go(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){L=a=r;try{if(m=L.stateNode,f)T=m.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{x=L.stateNode;var ve=L.memoizedProps.style,ae=ve!=null&&ve.hasOwnProperty("display")?ve.display:null;x.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(ze){Ht(L,L.return,ze)}}}else if(r.tag===6){if(a===null){L=r;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(ze){Ht(L,L.return,ze)}}}else if(r.tag===18){if(a===null){L=r;try{var ue=L.stateNode;f?Xv(ue,!0):Xv(L.stateNode,!1)}catch(ze){Ht(L,L.return,ze)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,oh(t,a))));break;case 19:Kr(r,t),Gr(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,oh(t,l)));break;case 30:break;case 21:break;default:Kr(r,t),Gr(t)}}function Gr(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Jy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,m=Qd(t);ah(t,m,f);break;case 5:var T=a.stateNode;a.flags&32&&(er(T,""),a.flags&=-33);var x=Qd(t);ah(t,x,T);break;case 3:case 4:var L=a.stateNode.containerInfo,ie=Qd(t);$d(t,ie,L);break;default:throw Error(s(161))}}catch(de){Ht(t,t.return,de)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function ov(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;ov(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function ta(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)tv(t,r.alternate,r),r=r.sibling}function Go(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Ha(4,r,r.return),Go(r);break;case 1:_s(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Xy(r,r.return,a),Go(r);break;case 27:zu(r.stateNode);case 26:case 5:_s(r,r.return),Go(r);break;case 22:r.memoizedState===null&&Go(r);break;case 30:Go(r);break;default:Go(r)}t=t.sibling}}function na(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=t,m=r,T=m.flags;switch(m.tag){case 0:case 11:case 15:na(f,m,a),Ou(4,m);break;case 1:if(na(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ie){Ht(l,l.return,ie)}if(l=m,f=l.updateQueue,f!==null){var x=l.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)Lg(L[f],x)}catch(ie){Ht(l,l.return,ie)}}a&&T&64&&$y(m),Du(m,m.return);break;case 27:Zy(m);case 26:case 5:na(f,m,a),a&&l===null&&T&4&&Wy(m),Du(m,m.return);break;case 12:na(f,m,a);break;case 31:na(f,m,a),a&&T&4&&iv(f,m);break;case 13:na(f,m,a),a&&T&4&&sv(f,m);break;case 22:m.memoizedState===null&&na(f,m,a),Du(m,m.return);break;case 30:break;default:na(f,m,a)}r=r.sibling}}function Wd(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&yu(a))}function Jd(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&yu(t))}function ts(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)lv(t,r,a,l),r=r.sibling}function lv(t,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:ts(t,r,a,l),f&2048&&Ou(9,r);break;case 1:ts(t,r,a,l);break;case 3:ts(t,r,a,l),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&yu(t)));break;case 12:if(f&2048){ts(t,r,a,l),t=r.stateNode;try{var m=r.memoizedProps,T=m.id,x=m.onPostCommit;typeof x=="function"&&x(T,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(L){Ht(r,r.return,L)}}else ts(t,r,a,l);break;case 31:ts(t,r,a,l);break;case 13:ts(t,r,a,l);break;case 23:break;case 22:m=r.stateNode,T=r.alternate,r.memoizedState!==null?m._visibility&2?ts(t,r,a,l):Nu(t,r):m._visibility&2?ts(t,r,a,l):(m._visibility|=2,Rl(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Wd(T,r);break;case 24:ts(t,r,a,l),f&2048&&Jd(r.alternate,r);break;default:ts(t,r,a,l)}}function Rl(t,r,a,l,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,T=r,x=a,L=l,ie=T.flags;switch(T.tag){case 0:case 11:case 15:Rl(m,T,x,L,f),Ou(8,T);break;case 23:break;case 22:var de=T.stateNode;T.memoizedState!==null?de._visibility&2?Rl(m,T,x,L,f):Nu(m,T):(de._visibility|=2,Rl(m,T,x,L,f)),f&&ie&2048&&Wd(T.alternate,T);break;case 24:Rl(m,T,x,L,f),f&&ie&2048&&Jd(T.alternate,T);break;default:Rl(m,T,x,L,f)}r=r.sibling}}function Nu(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,f=l.flags;switch(l.tag){case 22:Nu(a,l),f&2048&&Wd(l.alternate,l);break;case 24:Nu(a,l),f&2048&&Jd(l.alternate,l);break;default:Nu(a,l)}r=r.sibling}}var ku=8192;function Il(t,r,a){if(t.subtreeFlags&ku)for(t=t.child;t!==null;)uv(t,r,a),t=t.sibling}function uv(t,r,a){switch(t.tag){case 26:Il(t,r,a),t.flags&ku&&t.memoizedState!==null&&mS(a,es,t.memoizedState,t.memoizedProps);break;case 5:Il(t,r,a);break;case 3:case 4:var l=es;es=Eh(t.stateNode.containerInfo),Il(t,r,a),es=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=ku,ku=16777216,Il(t,r,a),ku=l):Il(t,r,a));break;default:Il(t,r,a)}}function cv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Mu(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];$n=l,fv(l,t)}cv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)hv(t),t=t.sibling}function hv(t){switch(t.tag){case 0:case 11:case 15:Mu(t),t.flags&2048&&Ha(9,t,t.return);break;case 3:Mu(t);break;case 12:Mu(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,lh(t)):Mu(t);break;default:Mu(t)}}function lh(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];$n=l,fv(l,t)}cv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Ha(8,r,r.return),lh(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,lh(r));break;default:lh(r)}t=t.sibling}}function fv(t,r){for(;$n!==null;){var a=$n;switch(a.tag){case 0:case 11:case 15:Ha(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:yu(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,$n=l;else e:for(a=t;$n!==null;){l=$n;var f=l.sibling,m=l.return;if(nv(l),l===a){$n=null;break e}if(f!==null){f.return=m,$n=f;break e}$n=m}}}var OT={getCacheForType:function(t){var r=nr(Dn),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return nr(Dn).controller.signal}},DT=typeof WeakMap=="function"?WeakMap:Map,Vt=0,Qt=null,bt=null,Tt=0,qt=0,mi=null,Fa=!1,Ol=!1,Zd=!1,ra=0,yn=0,Ka=0,Yo=0,ep=0,gi=0,Dl=0,Vu=null,Yr=null,tp=!1,uh=0,dv=0,ch=1/0,hh=null,Ga=null,Un=0,Ya=null,Nl=null,ia=0,np=0,rp=null,pv=null,Pu=0,ip=null;function yi(){return(Vt&2)!==0&&Tt!==0?Tt&-Tt:ce.T!==null?cp():Ps()}function mv(){if(gi===0)if((Tt&536870912)===0||It){var t=Ki;Ki<<=1,(Ki&3932160)===0&&(Ki=262144),gi=t}else gi=536870912;return t=di.current,t!==null&&(t.flags|=32),gi}function Qr(t,r,a){(t===Qt&&(qt===2||qt===9)||t.cancelPendingCommit!==null)&&(kl(t,0),Qa(t,Tt,gi,!1)),Or(t,a),((Vt&2)===0||t!==Qt)&&(t===Qt&&((Vt&2)===0&&(Yo|=a),yn===4&&Qa(t,Tt,gi,!1)),bs(t))}function gv(t,r,a){if((Vt&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||Er(t,r),f=l?MT(t,r):ap(t,r,!0),m=l;do{if(f===0){Ol&&!l&&Qa(t,r,0,!1);break}else{if(a=t.current.alternate,m&&!NT(a)){f=ap(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;e:{var x=t;f=Vu;var L=x.current.memoizedState.isDehydrated;if(L&&(kl(x,T).flags|=256),T=ap(x,T,!1),T!==2){if(Zd&&!L){x.errorRecoveryDisabledLanes|=m,Yo|=m,f=4;break e}m=Yr,Yr=f,m!==null&&(Yr===null?Yr=m:Yr.push.apply(Yr,m))}f=T}if(m=!1,f!==2)continue}}if(f===1){kl(t,0),Qa(t,r,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Qa(l,r,gi,!Fa);break e;case 2:Yr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=uh+300-Fn(),10<f)){if(Qa(l,r,gi,!Fa),ei(l,0,!0)!==0)break e;ia=r,l.timeoutHandle=Yv(yv.bind(null,l,a,Yr,hh,tp,r,gi,Yo,Dl,Fa,m,"Throttled",-0,0),f);break e}yv(l,a,Yr,hh,tp,r,gi,Yo,Dl,Fa,m,null,-0,0)}}break}while(!0);bs(t)}function yv(t,r,a,l,f,m,T,x,L,ie,de,ve,ae,ue){if(t.timeoutHandle=-1,ve=r.subtreeFlags,ve&8192||(ve&16785408)===16785408){ve={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fr},uv(r,m,ve);var ze=(m&62914560)===m?uh-Fn():(m&4194048)===m?dv-Fn():0;if(ze=gS(ve,ze),ze!==null){ia=m,t.cancelPendingCommit=ze(Av.bind(null,t,r,m,a,l,f,T,x,L,de,ve,null,ae,ue)),Qa(t,m,T,!ie);return}}Av(t,r,m,a,l,f,T,x,L)}function NT(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!dr(m(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Qa(t,r,a,l){r&=~ep,r&=~Yo,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var f=r;0<f;){var m=31-ke(f),T=1<<m;l[m]=-1,f&=~T}a!==0&&Si(t,a,r)}function fh(){return(Vt&6)===0?(ju(0),!1):!0}function sp(){if(bt!==null){if(qt===0)var t=bt.return;else t=bt,Ys=Lo=null,Ed(t),Sl=null,_u=0,t=bt;for(;t!==null;)Qy(t.alternate,t),t=t.return;bt=null}}function kl(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,JT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ia=0,sp(),Qt=t,bt=a=Ks(t.current,null),Tt=r,qt=0,mi=null,Fa=!1,Ol=Er(t,r),Zd=!1,Dl=gi=ep=Yo=Ka=yn=0,Yr=Vu=null,tp=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var f=31-ke(l),m=1<<f;r|=t[f],l&=~m}return ra=r,Qn(),a}function vv(t,r){dt=null,ce.H=xu,r===Tl||r===Bc?(r=Mg(),qt=3):r===ud?(r=Mg(),qt=4):qt=r===jd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,mi=r,bt===null&&(yn=1,th(t,ki(r,t.current)))}function _v(){var t=di.current;return t===null?!0:(Tt&4194048)===Tt?ji===null:(Tt&62914560)===Tt||(Tt&536870912)!==0?t===ji:!1}function bv(){var t=ce.H;return ce.H=xu,t===null?xu:t}function Ev(){var t=ce.A;return ce.A=OT,t}function dh(){yn=4,Fa||(Tt&4194048)!==Tt&&di.current!==null||(Ol=!0),(Ka&134217727)===0&&(Yo&134217727)===0||Qt===null||Qa(Qt,Tt,gi,!1)}function ap(t,r,a){var l=Vt;Vt|=2;var f=bv(),m=Ev();(Qt!==t||Tt!==r)&&(hh=null,kl(t,r)),r=!1;var T=yn;e:do try{if(qt!==0&&bt!==null){var x=bt,L=mi;switch(qt){case 8:sp(),T=6;break e;case 3:case 2:case 9:case 6:di.current===null&&(r=!0);var ie=qt;if(qt=0,mi=null,Ml(t,x,L,ie),a&&Ol){T=0;break e}break;default:ie=qt,qt=0,mi=null,Ml(t,x,L,ie)}}kT(),T=yn;break}catch(de){vv(t,de)}while(!0);return r&&t.shellSuspendCounter++,Ys=Lo=null,Vt=l,ce.H=f,ce.A=m,bt===null&&(Qt=null,Tt=0,Qn()),T}function kT(){for(;bt!==null;)Tv(bt)}function MT(t,r){var a=Vt;Vt|=2;var l=bv(),f=Ev();Qt!==t||Tt!==r?(hh=null,ch=Fn()+500,kl(t,r)):Ol=Er(t,r);e:do try{if(qt!==0&&bt!==null){r=bt;var m=mi;t:switch(qt){case 1:qt=0,mi=null,Ml(t,r,m,1);break;case 2:case 9:if(Ng(m)){qt=0,mi=null,Sv(r);break}r=function(){qt!==2&&qt!==9||Qt!==t||(qt=7),bs(t)},m.then(r,r);break e;case 3:qt=7;break e;case 4:qt=5;break e;case 7:Ng(m)?(qt=0,mi=null,Sv(r)):(qt=0,mi=null,Ml(t,r,m,7));break;case 5:var T=null;switch(bt.tag){case 26:T=bt.memoizedState;case 5:case 27:var x=bt;if(T?l_(T):x.stateNode.complete){qt=0,mi=null;var L=x.sibling;if(L!==null)bt=L;else{var ie=x.return;ie!==null?(bt=ie,ph(ie)):bt=null}break t}}qt=0,mi=null,Ml(t,r,m,5);break;case 6:qt=0,mi=null,Ml(t,r,m,6);break;case 8:sp(),yn=6;break e;default:throw Error(s(462))}}VT();break}catch(de){vv(t,de)}while(!0);return Ys=Lo=null,ce.H=l,ce.A=f,Vt=a,bt!==null?0:(Qt=null,Tt=0,Qn(),yn)}function VT(){for(;bt!==null&&!ul();)Tv(bt)}function Tv(t){var r=Gy(t.alternate,t,ra);t.memoizedProps=t.pendingProps,r===null?ph(t):bt=r}function Sv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=zy(a,r,r.pendingProps,r.type,void 0,Tt);break;case 11:r=zy(a,r,r.pendingProps,r.type.render,r.ref,Tt);break;case 5:Ed(r);default:Qy(a,r),r=bt=Eg(r,ra),r=Gy(a,r,ra)}t.memoizedProps=t.pendingProps,r===null?ph(t):bt=r}function Ml(t,r,a,l){Ys=Lo=null,Ed(r),Sl=null,_u=0;var f=r.return;try{if(ST(t,f,r,a,Tt)){yn=1,th(t,ki(a,t.current)),bt=null;return}}catch(m){if(f!==null)throw bt=f,m;yn=1,th(t,ki(a,t.current)),bt=null;return}r.flags&32768?(It||l===1?t=!0:Ol||(Tt&536870912)!==0?t=!1:(Fa=t=!0,(l===2||l===9||l===3||l===6)&&(l=di.current,l!==null&&l.tag===13&&(l.flags|=16384))),wv(r,t)):ph(r)}function ph(t){var r=t;do{if((r.flags&32768)!==0){wv(r,Fa);return}t=r.return;var a=CT(r.alternate,r,ra);if(a!==null){bt=a;return}if(r=r.sibling,r!==null){bt=r;return}bt=r=t}while(r!==null);yn===0&&(yn=5)}function wv(t,r){do{var a=xT(t.alternate,t);if(a!==null){a.flags&=32767,bt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){bt=t;return}bt=t=a}while(t!==null);yn=6,bt=null}function Av(t,r,a,l,f,m,T,x,L){t.cancelPendingCommit=null;do mh();while(Un!==0);if((Vt&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(m=r.lanes|r.childLanes,m|=ft,Co(t,a,m,T,x,L),t===Qt&&(bt=Qt=null,Tt=0),Nl=r,Ya=t,ia=a,np=m,rp=f,pv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,UT(Ei,function(){return Ov(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=ce.T,ce.T=null,f=Oe.p,Oe.p=2,T=Vt,Vt|=4;try{RT(t,r,a)}finally{Vt=T,Oe.p=f,ce.T=l}}Un=1,Cv(),xv(),Rv()}}function Cv(){if(Un===1){Un=0;var t=Ya,r=Nl,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=ce.T,ce.T=null;var l=Oe.p;Oe.p=2;var f=Vt;Vt|=4;try{av(r,t);var m=vp,T=w(t.containerInfo),x=m.focusedElem,L=m.selectionRange;if(T!==x&&x&&x.ownerDocument&&E(x.ownerDocument.documentElement,x)){if(L!==null&&A(x)){var ie=L.start,de=L.end;if(de===void 0&&(de=ie),"selectionStart"in x)x.selectionStart=ie,x.selectionEnd=Math.min(de,x.value.length);else{var ve=x.ownerDocument||document,ae=ve&&ve.defaultView||window;if(ae.getSelection){var ue=ae.getSelection(),ze=x.textContent.length,Je=Math.min(L.start,ze),Gt=L.end===void 0?Je:Math.min(L.end,ze);!ue.extend&&Je>Gt&&(T=Gt,Gt=Je,Je=T);var ee=y(x,Je),G=y(x,Gt);if(ee&&G&&(ue.rangeCount!==1||ue.anchorNode!==ee.node||ue.anchorOffset!==ee.offset||ue.focusNode!==G.node||ue.focusOffset!==G.offset)){var re=ve.createRange();re.setStart(ee.node,ee.offset),ue.removeAllRanges(),Je>Gt?(ue.addRange(re),ue.extend(G.node,G.offset)):(re.setEnd(G.node,G.offset),ue.addRange(re))}}}}for(ve=[],ue=x;ue=ue.parentNode;)ue.nodeType===1&&ve.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<ve.length;x++){var me=ve[x];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}xh=!!yp,vp=yp=null}finally{Vt=f,Oe.p=l,ce.T=a}}t.current=r,Un=2}}function xv(){if(Un===2){Un=0;var t=Ya,r=Nl,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=ce.T,ce.T=null;var l=Oe.p;Oe.p=2;var f=Vt;Vt|=4;try{tv(t,r.alternate,r)}finally{Vt=f,Oe.p=l,ce.T=a}}Un=3}}function Rv(){if(Un===4||Un===3){Un=0,os();var t=Ya,r=Nl,a=ia,l=pv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Un=5:(Un=0,Nl=Ya=null,Iv(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Ga=null),Dr(a),r=r.stateNode,_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(ur,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=ce.T,f=Oe.p,Oe.p=2,ce.T=null;try{for(var m=t.onRecoverableError,T=0;T<l.length;T++){var x=l[T];m(x.value,{componentStack:x.stack})}}finally{ce.T=r,Oe.p=f}}(ia&3)!==0&&mh(),bs(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===ip?Pu++:(Pu=0,ip=t):Pu=0,ju(0)}}function Iv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,yu(r)))}function mh(){return Cv(),xv(),Rv(),Ov()}function Ov(){if(Un!==5)return!1;var t=Ya,r=np;np=0;var a=Dr(ia),l=ce.T,f=Oe.p;try{Oe.p=32>a?32:a,ce.T=null,a=rp,rp=null;var m=Ya,T=ia;if(Un=0,Nl=Ya=null,ia=0,(Vt&6)!==0)throw Error(s(331));var x=Vt;if(Vt|=4,hv(m.current),lv(m,m.current,T,a),Vt=x,ju(0,!1),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(ur,m)}catch{}return!0}finally{Oe.p=f,ce.T=l,Iv(t,r)}}function Dv(t,r,a){r=ki(a,r),r=Pd(t.stateNode,r,2),t=za(t,r,2),t!==null&&(Or(t,2),bs(t))}function Ht(t,r,a){if(t.tag===3)Dv(t,t,a);else for(;r!==null;){if(r.tag===3){Dv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ga===null||!Ga.has(l))){t=ki(a,t),a=Ny(2),l=za(r,a,2),l!==null&&(ky(a,l,r,t),Or(l,2),bs(l));break}}r=r.return}}function op(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new DT;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(Zd=!0,f.add(a),t=PT.bind(null,t,r,a),r.then(t,t))}function PT(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Qt===t&&(Tt&a)===a&&(yn===4||yn===3&&(Tt&62914560)===Tt&&300>Fn()-uh?(Vt&2)===0&&kl(t,0):ep|=a,Dl===Tt&&(Dl=0)),bs(t)}function Nv(t,r){r===0&&(r=cl()),t=tn(t,r),t!==null&&(Or(t,r),bs(t))}function jT(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Nv(t,a)}function LT(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),Nv(t,a)}function UT(t,r){return sn(t,r)}var gh=null,Vl=null,lp=!1,yh=!1,up=!1,$a=0;function bs(t){t!==Vl&&t.next===null&&(Vl===null?gh=Vl=t:Vl=Vl.next=t),yh=!0,lp||(lp=!0,BT())}function ju(t,r){if(!up&&yh){up=!0;do for(var a=!1,l=gh;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var T=l.suspendedLanes,x=l.pingedLanes;m=(1<<31-ke(42|t)+1)-1,m&=f&~(T&~x),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Pv(l,m))}else m=Tt,m=ei(l,l===Qt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Er(l,m)||(a=!0,Pv(l,m));l=l.next}while(a);up=!1}}function zT(){kv()}function kv(){yh=lp=!1;var t=0;$a!==0&&WT()&&(t=$a);for(var r=Fn(),a=null,l=gh;l!==null;){var f=l.next,m=Mv(l,r);m===0?(l.next=null,a===null?gh=f:a.next=f,f===null&&(Vl=a)):(a=l,(t!==0||(m&3)!==0)&&(yh=!0)),l=f}Un!==0&&Un!==5||ju(t),$a!==0&&($a=0)}function Mv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var T=31-ke(m),x=1<<T,L=f[T];L===-1?((x&a)===0||(x&l)!==0)&&(f[T]=cu(x,r)):L<=r&&(t.expiredLanes|=x),m&=~x}if(r=Qt,a=Tt,a=ei(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(qt===2||qt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&jn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Er(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&jn(l),Dr(a)){case 2:case 8:a=Zr;break;case 32:a=Ei;break;case 268435456:a=ya;break;default:a=Ei}return l=Vv.bind(null,t),a=sn(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&jn(l),t.callbackPriority=2,t.callbackNode=null,2}function Vv(t,r){if(Un!==0&&Un!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(mh()&&t.callbackNode!==a)return null;var l=Tt;return l=ei(t,t===Qt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(gv(t,l,r),Mv(t,Fn()),t.callbackNode!=null&&t.callbackNode===a?Vv.bind(null,t):null)}function Pv(t,r){if(mh())return null;gv(t,r,!0)}function BT(){ZT(function(){(Vt&6)!==0?sn(Jr,zT):kv()})}function cp(){if($a===0){var t=bl;t===0&&(t=xe,xe<<=1,(xe&261888)===0&&(xe=256)),$a=t}return $a}function jv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:li(""+t)}function Lv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function qT(t,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var m=jv((f[$t]||null).action),T=l.submitter;T&&(r=(r=T[$t]||null)?jv(r.formAction):T.getAttribute("formAction"),r!==null&&(m=r,T=null));var x=new xi("action","action",null,l,f);t.push({event:x,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if($a!==0){var L=T?Lv(f,T):new FormData(f);Od(a,{pending:!0,data:L,method:f.method,action:m},null,L)}}else typeof m=="function"&&(x.preventDefault(),L=T?Lv(f,T):new FormData(f),Od(a,{pending:!0,data:L,method:f.method,action:m},m,L))},currentTarget:f}]})}}for(var hp=0;hp<De.length;hp++){var fp=De[hp],HT=fp.toLowerCase(),FT=fp[0].toUpperCase()+fp.slice(1);Se(HT,"on"+FT)}Se(ne,"onAnimationEnd"),Se(se,"onAnimationIteration"),Se(fe,"onAnimationStart"),Se("dblclick","onDoubleClick"),Se("focusin","onFocus"),Se("focusout","onBlur"),Se(ye,"onTransitionRun"),Se(we,"onTransitionStart"),Se(Ne,"onTransitionCancel"),Se(Te,"onTransitionEnd"),Mr("onMouseEnter",["mouseout","mouseover"]),Mr("onMouseLeave",["mouseout","mouseover"]),Mr("onPointerEnter",["pointerout","pointerover"]),Mr("onPointerLeave",["pointerout","pointerover"]),kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),kr("onBeforeInput",["compositionend","keypress","textInput","paste"]),kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function Uv(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var T=l.length-1;0<=T;T--){var x=l[T],L=x.instance,ie=x.currentTarget;if(x=x.listener,L!==m&&f.isPropagationStopped())break e;m=x,f.currentTarget=ie;try{m(f)}catch(de){je(de)}f.currentTarget=null,m=L}else for(T=0;T<l.length;T++){if(x=l[T],L=x.instance,ie=x.currentTarget,x=x.listener,L!==m&&f.isPropagationStopped())break e;m=x,f.currentTarget=ie;try{m(f)}catch(de){je(de)}f.currentTarget=null,m=L}}}}function Et(t,r){var a=r[Gi];a===void 0&&(a=r[Gi]=new Set);var l=t+"__bubble";a.has(l)||(zv(r,t,2,!1),a.add(l))}function dp(t,r,a){var l=0;r&&(l|=4),zv(a,t,l,r)}var vh="_reactListening"+Math.random().toString(36).slice(2);function pp(t){if(!t[vh]){t[vh]=!0,wi.forEach(function(a){a!=="selectionchange"&&(KT.has(a)||dp(a,!1,t),dp(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[vh]||(r[vh]=!0,dp("selectionchange",!1,r))}}function zv(t,r,a,l){switch(m_(r)){case 2:var f=_S;break;case 8:f=bS;break;default:f=Ip}a=f.bind(null,r,a,t),f=void 0,!Us||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(r,a,{capture:!0,passive:f}):t.addEventListener(r,a,!0):f!==void 0?t.addEventListener(r,a,{passive:f}):t.addEventListener(r,a,!1)}function mp(t,r,a,l,f){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var x=l.stateNode.containerInfo;if(x===f)break;if(T===4)for(T=l.return;T!==null;){var L=T.tag;if((L===3||L===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;x!==null;){if(T=Nr(x),T===null)return;if(L=T.tag,L===5||L===6||L===26||L===27){l=m=T;continue e}x=x.parentNode}}l=l.return}jr(function(){var ie=m,de=Tr(a),ve=[];e:{var ae=Ce.get(t);if(ae!==void 0){var ue=xi,ze=t;switch(t){case"keypress":if(Xi(a)===0)break e;case"keydown":case"keyup":ue=qs;break;case"focusin":ze="focus",ue=Oi;break;case"focusout":ze="blur",ue=Oi;break;case"beforeblur":case"afterblur":ue=Oi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=zs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Oo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=v;break;case ne:case se:case fe:ue=Do;break;case Te:ue=O;break;case"scroll":case"scrollend":ue=fs;break;case"wheel":ue=oe;break;case"copy":case"cut":case"paste":ue=Zi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=Di;break;case"toggle":case"beforetoggle":ue=ot}var Je=(r&4)!==0,Gt=!Je&&(t==="scroll"||t==="scrollend"),ee=Je?ae!==null?ae+"Capture":null:ae;Je=[];for(var G=ie,re;G!==null;){var me=G;if(re=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||re===null||ee===null||(me=Sr(G,ee),me!=null&&Je.push(Uu(G,me,re))),Gt)break;G=G.return}0<Je.length&&(ae=new ue(ae,ze,null,a,de),ve.push({event:ae,listeners:Je}))}}if((r&7)===0){e:{if(ae=t==="mouseover"||t==="pointerover",ue=t==="mouseout"||t==="pointerout",ae&&a!==Pr&&(ze=a.relatedTarget||a.fromElement)&&(Nr(ze)||ze[Ln]))break e;if((ue||ae)&&(ae=de.window===de?de:(ae=de.ownerDocument)?ae.defaultView||ae.parentWindow:window,ue?(ze=a.relatedTarget||a.toElement,ue=ie,ze=ze?Nr(ze):null,ze!==null&&(Gt=u(ze),Je=ze.tag,ze!==Gt||Je!==5&&Je!==27&&Je!==6)&&(ze=null)):(ue=null,ze=ie),ue!==ze)){if(Je=zs,me="onMouseLeave",ee="onMouseEnter",G="mouse",(t==="pointerout"||t==="pointerover")&&(Je=Di,me="onPointerLeave",ee="onPointerEnter",G="pointer"),Gt=ue==null?ae:En(ue),re=ze==null?ae:En(ze),ae=new Je(me,G+"leave",ue,a,de),ae.target=Gt,ae.relatedTarget=re,me=null,Nr(de)===ie&&(Je=new Je(ee,G+"enter",ze,a,de),Je.target=re,Je.relatedTarget=Gt,me=Je),Gt=me,ue&&ze)t:{for(Je=GT,ee=ue,G=ze,re=0,me=ee;me;me=Je(me))re++;me=0;for(var Qe=G;Qe;Qe=Je(Qe))me++;for(;0<re-me;)ee=Je(ee),re--;for(;0<me-re;)G=Je(G),me--;for(;re--;){if(ee===G||G!==null&&ee===G.alternate){Je=ee;break t}ee=Je(ee),G=Je(G)}Je=null}else Je=null;ue!==null&&Bv(ve,ae,ue,Je,!1),ze!==null&&Gt!==null&&Bv(ve,Gt,ze,Je,!0)}}e:{if(ae=ie?En(ie):window,ue=ae.nodeName&&ae.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ae.type==="file")var kt=Mo;else if(dl(ae))if(Ni)kt=ka;else{kt=Fs;var Ke=Vc}else ue=ae.nodeName,!ue||ue.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?ie&&Ta(ie.elementType)&&(kt=Mo):kt=du;if(kt&&(kt=kt(t,ie))){fu(ve,kt,a,de);break e}Ke&&Ke(t,ae,ie),t==="focusout"&&ie&&ae.type==="number"&&ie.memoizedProps.value!=null&&Ls(ae,"number",ae.value)}switch(Ke=ie?En(ie):window,t){case"focusin":(dl(Ke)||Ke.contentEditable==="true")&&(P=Ke,q=ie,F=null);break;case"focusout":F=q=P=null;break;case"mousedown":W=!0;break;case"contextmenu":case"mouseup":case"dragend":W=!1,U(ve,a,de);break;case"selectionchange":if(D)break;case"keydown":case"keyup":U(ve,a,de)}var mt;if(Rt)e:{switch(t){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else Hs?ms(t,a)&&(St="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(St="onCompositionStart");St&&(qr&&a.locale!=="ko"&&(Hs||St!=="onCompositionStart"?St==="onCompositionEnd"&&Hs&&(mt=$i()):(Lr=de,Sa="value"in Lr?Lr.value:Lr.textContent,Hs=!0)),Ke=_h(ie,St),0<Ke.length&&(St=new Ur(St,t,null,a,de),ve.push({event:St,listeners:Ke}),mt?St.data=mt:(mt=Oa(a),mt!==null&&(St.data=mt)))),(mt=Br?Nc(t,a):Qf(t,a))&&(St=_h(ie,"onBeforeInput"),0<St.length&&(Ke=new Ur("onBeforeInput","beforeinput",null,a,de),ve.push({event:Ke,listeners:St}),Ke.data=mt)),qT(ve,t,ie,a,de)}Uv(ve,r)})}function Uu(t,r,a){return{instance:t,listener:r,currentTarget:a}}function _h(t,r){for(var a=r+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Sr(t,a),f!=null&&l.unshift(Uu(t,f,m)),f=Sr(t,r),f!=null&&l.push(Uu(t,f,m))),t.tag===3)return l;t=t.return}return[]}function GT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Bv(t,r,a,l,f){for(var m=r._reactName,T=[];a!==null&&a!==l;){var x=a,L=x.alternate,ie=x.stateNode;if(x=x.tag,L!==null&&L===l)break;x!==5&&x!==26&&x!==27||ie===null||(L=ie,f?(ie=Sr(a,m),ie!=null&&T.unshift(Uu(a,ie,L))):f||(ie=Sr(a,m),ie!=null&&T.push(Uu(a,ie,L)))),a=a.return}T.length!==0&&t.push({event:r,listeners:T})}var YT=/\r\n?/g,QT=/\u0000|\uFFFD/g;function qv(t){return(typeof t=="string"?t:""+t).replace(YT,`
`).replace(QT,"")}function Hv(t,r){return r=qv(r),qv(t)===r}function Kt(t,r,a,l,f,m){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||er(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&er(t,""+l);break;case"className":hr(t,"class",l);break;case"tabIndex":hr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":hr(t,a,l);break;case"style":Ea(t,l,m);break;case"data":if(r!=="object"){hr(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=li(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&Kt(t,r,"name",f.name,f,null),Kt(t,r,"formEncType",f.formEncType,f,null),Kt(t,r,"formMethod",f.formMethod,f,null),Kt(t,r,"formTarget",f.formTarget,f,null)):(Kt(t,r,"encType",f.encType,f,null),Kt(t,r,"method",f.method,f,null),Kt(t,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=li(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=fr);break;case"onScroll":l!=null&&Et("scroll",t);break;case"onScrollEnd":l!=null&&Et("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=li(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Et("beforetoggle",t),Et("toggle",t),ht(t,"popover",l);break;case"xlinkActuate":ln(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ln(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ln(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ln(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ln(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ln(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ln(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ln(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ln(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ht(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=fl.get(a)||a,ht(t,a,l))}}function gp(t,r,a,l,f,m){switch(a){case"style":Ea(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?er(t,l):(typeof l=="number"||typeof l=="bigint")&&er(t,""+l);break;case"onScroll":l!=null&&Et("scroll",t);break;case"onScrollEnd":l!=null&&Et("scrollend",t);break;case"onClick":l!=null&&(t.onclick=fr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!us.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),m=t[$t]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ht(t,a,l)}}}function ir(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",t),Et("load",t);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var T=a[m];if(T!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Kt(t,r,m,T,a,null)}}f&&Kt(t,r,"srcSet",a.srcSet,a,null),l&&Kt(t,r,"src",a.src,a,null);return;case"input":Et("invalid",t);var x=m=T=f=null,L=null,ie=null;for(l in a)if(a.hasOwnProperty(l)){var de=a[l];if(de!=null)switch(l){case"name":f=de;break;case"type":T=de;break;case"checked":L=de;break;case"defaultChecked":ie=de;break;case"value":m=de;break;case"defaultValue":x=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(s(137,r));break;default:Kt(t,r,l,de,a,null)}}ba(t,m,x,L,ie,T,f,!1);return;case"select":Et("invalid",t),l=T=m=null;for(f in a)if(a.hasOwnProperty(f)&&(x=a[f],x!=null))switch(f){case"value":m=x;break;case"defaultValue":T=x;break;case"multiple":l=x;default:Kt(t,r,f,x,a,null)}r=m,a=T,t.multiple=!!l,r!=null?ai(t,!!l,r,!1):a!=null&&ai(t,!!l,a,!0);return;case"textarea":Et("invalid",t),m=f=l=null;for(T in a)if(a.hasOwnProperty(T)&&(x=a[T],x!=null))switch(T){case"value":l=x;break;case"defaultValue":f=x;break;case"children":m=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:Kt(t,r,T,x,a,null)}oi(t,l,f,m);return;case"option":for(L in a)if(a.hasOwnProperty(L)&&(l=a[L],l!=null))switch(L){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Kt(t,r,L,l,a,null)}return;case"dialog":Et("beforetoggle",t),Et("toggle",t),Et("cancel",t),Et("close",t);break;case"iframe":case"object":Et("load",t);break;case"video":case"audio":for(l=0;l<Lu.length;l++)Et(Lu[l],t);break;case"image":Et("error",t),Et("load",t);break;case"details":Et("toggle",t);break;case"embed":case"source":case"link":Et("error",t),Et("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in a)if(a.hasOwnProperty(ie)&&(l=a[ie],l!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Kt(t,r,ie,l,a,null)}return;default:if(Ta(r)){for(de in a)a.hasOwnProperty(de)&&(l=a[de],l!==void 0&&gp(t,r,de,l,a,void 0));return}}for(x in a)a.hasOwnProperty(x)&&(l=a[x],l!=null&&Kt(t,r,x,l,a,null))}function $T(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,T=null,x=null,L=null,ie=null,de=null;for(ue in a){var ve=a[ue];if(a.hasOwnProperty(ue)&&ve!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":L=ve;default:l.hasOwnProperty(ue)||Kt(t,r,ue,null,l,ve)}}for(var ae in l){var ue=l[ae];if(ve=a[ae],l.hasOwnProperty(ae)&&(ue!=null||ve!=null))switch(ae){case"type":m=ue;break;case"name":f=ue;break;case"checked":ie=ue;break;case"defaultChecked":de=ue;break;case"value":T=ue;break;case"defaultValue":x=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(s(137,r));break;default:ue!==ve&&Kt(t,r,ae,ue,l,ve)}}si(t,T,x,L,ie,de,m,f);return;case"select":ue=T=x=ae=null;for(m in a)if(L=a[m],a.hasOwnProperty(m)&&L!=null)switch(m){case"value":break;case"multiple":ue=L;default:l.hasOwnProperty(m)||Kt(t,r,m,null,l,L)}for(f in l)if(m=l[f],L=a[f],l.hasOwnProperty(f)&&(m!=null||L!=null))switch(f){case"value":ae=m;break;case"defaultValue":x=m;break;case"multiple":T=m;default:m!==L&&Kt(t,r,f,m,l,L)}r=x,a=T,l=ue,ae!=null?ai(t,!!a,ae,!1):!!l!=!!a&&(r!=null?ai(t,!!a,r,!0):ai(t,!!a,a?[]:"",!1));return;case"textarea":ue=ae=null;for(x in a)if(f=a[x],a.hasOwnProperty(x)&&f!=null&&!l.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Kt(t,r,x,null,l,f)}for(T in l)if(f=l[T],m=a[T],l.hasOwnProperty(T)&&(f!=null||m!=null))switch(T){case"value":ae=f;break;case"defaultValue":ue=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&Kt(t,r,T,f,l,m)}Io(t,ae,ue);return;case"option":for(var ze in a)if(ae=a[ze],a.hasOwnProperty(ze)&&ae!=null&&!l.hasOwnProperty(ze))switch(ze){case"selected":t.selected=!1;break;default:Kt(t,r,ze,null,l,ae)}for(L in l)if(ae=l[L],ue=a[L],l.hasOwnProperty(L)&&ae!==ue&&(ae!=null||ue!=null))switch(L){case"selected":t.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:Kt(t,r,L,ae,l,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Je in a)ae=a[Je],a.hasOwnProperty(Je)&&ae!=null&&!l.hasOwnProperty(Je)&&Kt(t,r,Je,null,l,ae);for(ie in l)if(ae=l[ie],ue=a[ie],l.hasOwnProperty(ie)&&ae!==ue&&(ae!=null||ue!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,r));break;default:Kt(t,r,ie,ae,l,ue)}return;default:if(Ta(r)){for(var Gt in a)ae=a[Gt],a.hasOwnProperty(Gt)&&ae!==void 0&&!l.hasOwnProperty(Gt)&&gp(t,r,Gt,void 0,l,ae);for(de in l)ae=l[de],ue=a[de],!l.hasOwnProperty(de)||ae===ue||ae===void 0&&ue===void 0||gp(t,r,de,ae,l,ue);return}}for(var ee in a)ae=a[ee],a.hasOwnProperty(ee)&&ae!=null&&!l.hasOwnProperty(ee)&&Kt(t,r,ee,null,l,ae);for(ve in l)ae=l[ve],ue=a[ve],!l.hasOwnProperty(ve)||ae===ue||ae==null&&ue==null||Kt(t,r,ve,ae,l,ue)}function Fv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function XT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],m=f.transferSize,T=f.initiatorType,x=f.duration;if(m&&x&&Fv(T)){for(T=0,x=f.responseEnd,l+=1;l<a.length;l++){var L=a[l],ie=L.startTime;if(ie>x)break;var de=L.transferSize,ve=L.initiatorType;de&&Fv(ve)&&(L=L.responseEnd,T+=de*(L<x?1:(x-ie)/(L-ie)))}if(--l,r+=8*(m+T)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var yp=null,vp=null;function bh(t){return t.nodeType===9?t:t.ownerDocument}function Kv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gv(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function _p(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var bp=null;function WT(){var t=window.event;return t&&t.type==="popstate"?t===bp?!1:(bp=t,!0):(bp=null,!1)}var Yv=typeof setTimeout=="function"?setTimeout:void 0,JT=typeof clearTimeout=="function"?clearTimeout:void 0,Qv=typeof Promise=="function"?Promise:void 0,ZT=typeof queueMicrotask=="function"?queueMicrotask:typeof Qv<"u"?function(t){return Qv.resolve(null).then(t).catch(eS)}:Yv;function eS(t){setTimeout(function(){throw t})}function Xa(t){return t==="head"}function $v(t,r){var a=r,l=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(f),Ul(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")zu(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,zu(a);for(var m=a.firstChild;m;){var T=m.nextSibling,x=m.nodeName;m[Kn]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=T}}else a==="body"&&zu(t.ownerDocument.body);a=f}while(a);Ul(r)}function Xv(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Ep(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ep(a),js(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function tS(t,r,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Kn])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Li(t.nextSibling),t===null)break}return null}function nS(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Li(t.nextSibling),t===null))return null;return t}function Wv(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Li(t.nextSibling),t===null))return null;return t}function Tp(t){return t.data==="$?"||t.data==="$~"}function Sp(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function rS(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Li(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var wp=null;function Jv(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Li(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function Zv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function e_(t,r,a){switch(r=bh(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function zu(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);js(t)}var Ui=new Map,t_=new Set;function Eh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var sa=Oe.d;Oe.d={f:iS,r:sS,D:aS,C:oS,L:lS,m:uS,X:hS,S:cS,M:fS};function iS(){var t=sa.f(),r=fh();return t||r}function sS(t){var r=Ot(t);r!==null&&r.tag===5&&r.type==="form"?vy(r):sa.r(t)}var Pl=typeof document>"u"?null:document;function n_(t,r,a){var l=Pl;if(l&&typeof r=="string"&&r){var f=Rn(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),t_.has(f)||(t_.add(f),t={rel:t,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),ir(r,"link",t),on(r),l.head.appendChild(r)))}}function aS(t){sa.D(t),n_("dns-prefetch",t,null)}function oS(t,r){sa.C(t,r),n_("preconnect",t,r)}function lS(t,r,a){sa.L(t,r,a);var l=Pl;if(l&&t&&r){var f='link[rel="preload"][as="'+Rn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Rn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Rn(a.imageSizes)+'"]')):f+='[href="'+Rn(t)+'"]';var m=f;switch(r){case"style":m=jl(t);break;case"script":m=Ll(t)}Ui.has(m)||(t=I({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Ui.set(m,t),l.querySelector(f)!==null||r==="style"&&l.querySelector(Bu(m))||r==="script"&&l.querySelector(qu(m))||(r=l.createElement("link"),ir(r,"link",t),on(r),l.head.appendChild(r)))}}function uS(t,r){sa.m(t,r);var a=Pl;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Rn(l)+'"][href="'+Rn(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Ll(t)}if(!Ui.has(m)&&(t=I({rel:"modulepreload",href:t},r),Ui.set(m,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(qu(m)))return}l=a.createElement("link"),ir(l,"link",t),on(l),a.head.appendChild(l)}}}function cS(t,r,a){sa.S(t,r,a);var l=Pl;if(l&&t){var f=xn(l).hoistableStyles,m=jl(t);r=r||"default";var T=f.get(m);if(!T){var x={loading:0,preload:null};if(T=l.querySelector(Bu(m)))x.loading=5;else{t=I({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Ui.get(m))&&Ap(t,a);var L=T=l.createElement("link");on(L),ir(L,"link",t),L._p=new Promise(function(ie,de){L.onload=ie,L.onerror=de}),L.addEventListener("load",function(){x.loading|=1}),L.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Th(T,r,l)}T={type:"stylesheet",instance:T,count:1,state:x},f.set(m,T)}}}function hS(t,r){sa.X(t,r);var a=Pl;if(a&&t){var l=xn(a).hoistableScripts,f=Ll(t),m=l.get(f);m||(m=a.querySelector(qu(f)),m||(t=I({src:t,async:!0},r),(r=Ui.get(f))&&Cp(t,r),m=a.createElement("script"),on(m),ir(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function fS(t,r){sa.M(t,r);var a=Pl;if(a&&t){var l=xn(a).hoistableScripts,f=Ll(t),m=l.get(f);m||(m=a.querySelector(qu(f)),m||(t=I({src:t,async:!0,type:"module"},r),(r=Ui.get(f))&&Cp(t,r),m=a.createElement("script"),on(m),ir(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function r_(t,r,a,l){var f=(f=tt.current)?Eh(f):null;if(!f)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=jl(a.href),a=xn(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=jl(a.href);var m=xn(f).hoistableStyles,T=m.get(t);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,T),(m=f.querySelector(Bu(t)))&&!m._p&&(T.instance=m,T.state.loading=5),Ui.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ui.set(t,a),m||dS(f,t,a,T.state))),r&&l===null)throw Error(s(528,""));return T}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ll(a),a=xn(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function jl(t){return'href="'+Rn(t)+'"'}function Bu(t){return'link[rel="stylesheet"]['+t+"]"}function i_(t){return I({},t,{"data-precedence":t.precedence,precedence:null})}function dS(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),ir(r,"link",a),on(r),t.head.appendChild(r))}function Ll(t){return'[src="'+Rn(t)+'"]'}function qu(t){return"script[async]"+t}function s_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Rn(a.href)+'"]');if(l)return r.instance=l,on(l),l;var f=I({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),on(l),ir(l,"style",f),Th(l,a.precedence,t),r.instance=l;case"stylesheet":f=jl(a.href);var m=t.querySelector(Bu(f));if(m)return r.state.loading|=4,r.instance=m,on(m),m;l=i_(a),(f=Ui.get(f))&&Ap(l,f),m=(t.ownerDocument||t).createElement("link"),on(m);var T=m;return T._p=new Promise(function(x,L){T.onload=x,T.onerror=L}),ir(m,"link",l),r.state.loading|=4,Th(m,a.precedence,t),r.instance=m;case"script":return m=Ll(a.src),(f=t.querySelector(qu(m)))?(r.instance=f,on(f),f):(l=a,(f=Ui.get(m))&&(l=I({},a),Cp(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),on(f),ir(f,"link",l),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Th(l,a.precedence,t));return r.instance}function Th(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,T=0;T<l.length;T++){var x=l[T];if(x.dataset.precedence===r)m=x;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function Ap(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Cp(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Sh=null;function a_(t,r,a){if(Sh===null){var l=new Map,f=Sh=new Map;f.set(a,l)}else f=Sh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var m=a[f];if(!(m[Kn]||m[Ut]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var T=m.getAttribute(r)||"";T=t+T;var x=l.get(T);x?x.push(m):l.set(T,[m])}}return l}function o_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function pS(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function l_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function mS(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=jl(l.href),m=r.querySelector(Bu(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=wh.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=m,on(m);return}m=r.ownerDocument||r,l=i_(l),(f=Ui.get(f))&&Ap(l,f),m=m.createElement("link"),on(m);var T=m;T._p=new Promise(function(x,L){T.onload=x,T.onerror=L}),ir(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=wh.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var xp=0;function gS(t,r){return t.stylesheets&&t.count===0&&Ch(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Ch(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&xp===0&&(xp=62500*XT());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ch(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>xp?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function wh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ch(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ah=null;function Ch(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ah=new Map,r.forEach(yS,t),Ah=null,wh.call(t))}function yS(t,r){if(!(r.state.loading&4)){var a=Ah.get(t);if(a)var l=a.get(null);else{a=new Map,Ah.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var T=f[m];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),l=T)}l&&a.set(null,l)}f=r.instance,T=f.getAttribute("data-precedence"),m=a.get(T)||l,m===l&&a.set(null,f),a.set(T,f),this.count++,l=wh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Hu={$$typeof:Pe,Provider:null,Consumer:null,_currentValue:qe,_currentValue2:qe,_threadCount:0};function vS(t,r,a,l,f,m,T,x,L){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zn(0),this.hiddenUpdates=Zn(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function u_(t,r,a,l,f,m,T,x,L,ie,de,ve){return t=new vS(t,r,a,T,L,ie,de,ve,x),r=1,m===!0&&(r|=24),m=fi(3,null,null,r),t.current=m,m.stateNode=t,r=ad(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:r},cd(m),t}function c_(t){return t?(t=Hr,t):Hr}function h_(t,r,a,l,f,m){f=c_(f),l.context===null?l.context=f:l.pendingContext=f,l=Ua(r),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=za(t,l,r),a!==null&&(Qr(a,t,r),Eu(a,t,r))}function f_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Rp(t,r){f_(t,r),(t=t.alternate)&&f_(t,r)}function d_(t){if(t.tag===13||t.tag===31){var r=tn(t,67108864);r!==null&&Qr(r,t,67108864),Rp(t,67108864)}}function p_(t){if(t.tag===13||t.tag===31){var r=yi();r=Vs(r);var a=tn(t,r);a!==null&&Qr(a,t,r),Rp(t,r)}}var xh=!0;function _S(t,r,a,l){var f=ce.T;ce.T=null;var m=Oe.p;try{Oe.p=2,Ip(t,r,a,l)}finally{Oe.p=m,ce.T=f}}function bS(t,r,a,l){var f=ce.T;ce.T=null;var m=Oe.p;try{Oe.p=8,Ip(t,r,a,l)}finally{Oe.p=m,ce.T=f}}function Ip(t,r,a,l){if(xh){var f=Op(l);if(f===null)mp(t,r,l,Rh,a),g_(t,l);else if(TS(f,t,r,a,l))l.stopPropagation();else if(g_(t,l),r&4&&-1<ES.indexOf(t)){for(;f!==null;){var m=Ot(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var T=Ir(m.pendingLanes);if(T!==0){var x=m;for(x.pendingLanes|=2,x.entangledLanes|=2;T;){var L=1<<31-ke(T);x.entanglements[1]|=L,T&=~L}bs(m),(Vt&6)===0&&(ch=Fn()+500,ju(0))}}break;case 31:case 13:x=tn(m,2),x!==null&&Qr(x,m,2),fh(),Rp(m,2)}if(m=Op(l),m===null&&mp(t,r,l,Rh,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else mp(t,r,l,null,a)}}function Op(t){return t=Tr(t),Dp(t)}var Rh=null;function Dp(t){if(Rh=null,t=Nr(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===31){if(t=g(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Rh=t,null}function m_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wr()){case Jr:return 2;case Zr:return 8;case Ei:case Ns:return 32;case ya:return 268435456;default:return 32}default:return 32}}var Np=!1,Wa=null,Ja=null,Za=null,Fu=new Map,Ku=new Map,eo=[],ES="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function g_(t,r){switch(t){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":Za=null;break;case"pointerover":case"pointerout":Fu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ku.delete(r.pointerId)}}function Gu(t,r,a,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Ot(r),r!==null&&d_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function TS(t,r,a,l,f){switch(r){case"focusin":return Wa=Gu(Wa,t,r,a,l,f),!0;case"dragenter":return Ja=Gu(Ja,t,r,a,l,f),!0;case"mouseover":return Za=Gu(Za,t,r,a,l,f),!0;case"pointerover":var m=f.pointerId;return Fu.set(m,Gu(Fu.get(m)||null,t,r,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,Ku.set(m,Gu(Ku.get(m)||null,t,r,a,l,f)),!0}return!1}function y_(t){var r=Nr(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,cr(t.priority,function(){p_(a)});return}}else if(r===31){if(r=g(a),r!==null){t.blockedOn=r,cr(t.priority,function(){p_(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ih(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Op(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Pr=l,a.target.dispatchEvent(l),Pr=null}else return r=Ot(a),r!==null&&d_(r),t.blockedOn=a,!1;r.shift()}return!0}function v_(t,r,a){Ih(t)&&a.delete(r)}function SS(){Np=!1,Wa!==null&&Ih(Wa)&&(Wa=null),Ja!==null&&Ih(Ja)&&(Ja=null),Za!==null&&Ih(Za)&&(Za=null),Fu.forEach(v_),Ku.forEach(v_)}function Oh(t,r){t.blockedOn===r&&(t.blockedOn=null,Np||(Np=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,SS)))}var Dh=null;function __(t){Dh!==t&&(Dh=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Dh===t&&(Dh=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],f=t[r+2];if(typeof l!="function"){if(Dp(l||a)===null)continue;break}var m=Ot(a);m!==null&&(t.splice(r,3),r-=3,Od(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Ul(t){function r(L){return Oh(L,t)}Wa!==null&&Oh(Wa,t),Ja!==null&&Oh(Ja,t),Za!==null&&Oh(Za,t),Fu.forEach(r),Ku.forEach(r);for(var a=0;a<eo.length;a++){var l=eo[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<eo.length&&(a=eo[0],a.blockedOn===null);)y_(a),a.blockedOn===null&&eo.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],T=f[$t]||null;if(typeof m=="function")T||__(a);else if(T){var x=null;if(m&&m.hasAttribute("formAction")){if(f=m,T=m[$t]||null)x=T.formAction;else if(Dp(f)!==null)continue}else x=T.action;typeof x=="function"?a[l+1]=x:(a.splice(l,3),l-=3),__(a)}}}function b_(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(T){return f=T})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function kp(t){this._internalRoot=t}Nh.prototype.render=kp.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=yi();h_(a,l,t,r,null,null)},Nh.prototype.unmount=kp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;h_(t.current,2,null,t,null,null),fh(),r[Ln]=null}};function Nh(t){this._internalRoot=t}Nh.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ps();t={blockedOn:null,target:t,priority:r};for(var a=0;a<eo.length&&r!==0&&r<eo[a].priority;a++);eo.splice(a,0,t),a===0&&y_(t)}};var E_=e.version;if(E_!=="19.2.1")throw Error(s(527,E_,"19.2.1"));Oe.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=b(r),t=t!==null?C(t):null,t=t===null?null:t.stateNode,t};var wS={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:ce,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kh.isDisabled&&kh.supportsFiber)try{ur=kh.inject(wS),_n=kh}catch{}}return Qu.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",f=Ry,m=Iy,T=Oy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError)),r=u_(t,1,!1,null,null,a,l,null,f,m,T,b_),t[Ln]=r.current,pp(t),new kp(r)},Qu.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,f="",m=Ry,T=Iy,x=Oy,L=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.formState!==void 0&&(L=a.formState)),r=u_(t,1,!0,r,a??null,l,f,L,m,T,x,b_),r.context=c_(null),a=r.current,l=yi(),l=Vs(l),f=Ua(l),f.callback=null,za(a,f,l),a=l,r.current.lanes=a,Or(r,a),bs(r),t[Ln]=r.current,pp(t),new Nh(r)},Qu.version="19.2.1",Qu}var D_;function VS(){if(D_)return Pp.exports;D_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Pp.exports=MS(),Pp.exports}var PS=VS();const jS=xm(PS);var Qh={exports:{}},LS=Qh.exports,N_;function US(){return N_||(N_=1,(function(i,e){(function(n,s){i.exports=s()})(LS,function(){var n=function(h,p){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var w in E)Object.prototype.hasOwnProperty.call(E,w)&&(y[w]=E[w])})(h,p)},s=function(){return(s=Object.assign||function(h){for(var p,y=1,E=arguments.length;y<E;y++)for(var w in p=arguments[y])Object.prototype.hasOwnProperty.call(p,w)&&(h[w]=p[w]);return h}).apply(this,arguments)};function o(h,p,y){for(var E,w=0,A=p.length;w<A;w++)!E&&w in p||((E=E||Array.prototype.slice.call(p,0,w))[w]=p[w]);return h.concat(E||Array.prototype.slice.call(p))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:CS,d=Object.keys,g=Array.isArray;function _(h,p){return typeof p!="object"||d(p).forEach(function(y){h[y]=p[y]}),h}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var b=Object.getPrototypeOf,C={}.hasOwnProperty;function I(h,p){return C.call(h,p)}function k(h,p){typeof p=="function"&&(p=p(b(h))),(typeof Reflect>"u"?d:Reflect.ownKeys)(p).forEach(function(y){le(h,y,p[y])})}var $=Object.defineProperty;function le(h,p,y,E){$(h,p,_(y&&I(y,"get")&&typeof y.get=="function"?{get:y.get,set:y.set,configurable:!0}:{value:y,configurable:!0,writable:!0},E))}function he(h){return{from:function(p){return h.prototype=Object.create(p.prototype),le(h.prototype,"constructor",h),{extend:k.bind(null,h.prototype)}}}}var ge=Object.getOwnPropertyDescriptor,Ve=[].slice;function Fe(h,p,y){return Ve.call(h,p,y)}function Pe(h,p){return p(h)}function rt(h){if(!h)throw new Error("Assertion Failed")}function it(h){u.setImmediate?setImmediate(h):setTimeout(h,0)}function Re(h,p){if(typeof p=="string"&&I(h,p))return h[p];if(!p)return h;if(typeof p!="string"){for(var y=[],E=0,w=p.length;E<w;++E){var A=Re(h,p[E]);y.push(A)}return y}var D=p.indexOf(".");if(D!==-1){var P=h[p.substr(0,D)];return P==null?void 0:Re(P,p.substr(D+1))}}function V(h,p,y){if(h&&p!==void 0&&!("isFrozen"in Object&&Object.isFrozen(h)))if(typeof p!="string"&&"length"in p){rt(typeof y!="string"&&"length"in y);for(var E=0,w=p.length;E<w;++E)V(h,p[E],y[E])}else{var A,D,P=p.indexOf(".");P!==-1?(A=p.substr(0,P),(D=p.substr(P+1))===""?y===void 0?g(h)&&!isNaN(parseInt(A))?h.splice(A,1):delete h[A]:h[A]=y:V(P=!(P=h[A])||!I(h,A)?h[A]={}:P,D,y)):y===void 0?g(h)&&!isNaN(parseInt(p))?h.splice(p,1):delete h[p]:h[p]=y}}function M(h){var p,y={};for(p in h)I(h,p)&&(y[p]=h[p]);return y}var j=[].concat;function Y(h){return j.apply([],h)}var Jr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Y([8,16,32,64].map(function(h){return["Int","Uint","Float"].map(function(p){return p+h+"Array"})}))).filter(function(h){return u[h]}),B=new Set(Jr.map(function(h){return u[h]})),z=null;function N(h){return z=new WeakMap,h=(function p(y){if(!y||typeof y!="object")return y;var E=z.get(y);if(E)return E;if(g(y)){E=[],z.set(y,E);for(var w=0,A=y.length;w<A;++w)E.push(p(y[w]))}else if(B.has(y.constructor))E=y;else{var D,P=b(y);for(D in E=P===Object.prototype?{}:Object.create(P),z.set(y,E),y)I(y,D)&&(E[D]=p(y[D]))}return E})(h),z=null,h}var Xe={}.toString;function Lt(h){return Xe.call(h).slice(8,-1)}var ce=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Oe=typeof ce=="symbol"?function(h){var p;return h!=null&&(p=h[ce])&&p.apply(h)}:function(){return null};function qe(h,p){return p=h.indexOf(p),0<=p&&h.splice(p,1),0<=p}var Be={};function He(h){var p,y,E,w;if(arguments.length===1){if(g(h))return h.slice();if(this===Be&&typeof h=="string")return[h];if(w=Oe(h)){for(y=[];!(E=w.next()).done;)y.push(E.value);return y}if(h==null)return[h];if(typeof(p=h.length)!="number")return[h];for(y=new Array(p);p--;)y[p]=h[p];return y}for(p=arguments.length,y=new Array(p);p--;)y[p]=arguments[p];return y}var H=typeof Symbol<"u"?function(h){return h[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Wr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ar=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Wr),pe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ie(h,p){this.name=h,this.message=p}function Le(h,p){return h+". Errors: "+Object.keys(p).map(function(y){return p[y].toString()}).filter(function(y,E,w){return w.indexOf(y)===E}).join(`
`)}function We(h,p,y,E){this.failures=p,this.failedKeys=E,this.successCount=y,this.message=Le(h,p)}function tt(h,p){this.name="BulkError",this.failures=Object.keys(p).map(function(y){return p[y]}),this.failuresByPos=p,this.message=Le(h,this.failures)}he(Ie).from(Error).extend({toString:function(){return this.name+": "+this.message}}),he(We).from(Ie),he(tt).from(Ie);var yt=Ar.reduce(function(h,p){return h[p]=p+"Error",h},{}),vn=Ie,Me=Ar.reduce(function(h,p){var y=p+"Error";function E(w,A){this.name=y,w?typeof w=="string"?(this.message="".concat(w).concat(A?`
 `+A:""),this.inner=A||null):typeof w=="object"&&(this.message="".concat(w.name," ").concat(w.message),this.inner=w):(this.message=pe[p]||y,this.inner=null)}return he(E).from(vn),h[p]=E,h},{});Me.Syntax=SyntaxError,Me.Type=TypeError,Me.Range=RangeError;var as=Wr.reduce(function(h,p){return h[p+"Error"]=Me[p],h},{}),Fi=Ar.reduce(function(h,p){return["Syntax","Type","Range"].indexOf(p)===-1&&(h[p+"Error"]=Me[p]),h},{});function xt(){}function _i(h){return h}function bi(h,p){return h==null||h===_i?p:function(y){return p(h(y))}}function Xr(h,p){return function(){h.apply(this,arguments),p.apply(this,arguments)}}function Ds(h,p){return h===xt?p:function(){var y=h.apply(this,arguments);y!==void 0&&(arguments[0]=y);var E=this.onsuccess,w=this.onerror;this.onsuccess=null,this.onerror=null;var A=p.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?Xr(E,this.onsuccess):E),w&&(this.onerror=this.onerror?Xr(w,this.onerror):w),A!==void 0?A:y}}function wo(h,p){return h===xt?p:function(){h.apply(this,arguments);var y=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,p.apply(this,arguments),y&&(this.onsuccess=this.onsuccess?Xr(y,this.onsuccess):y),E&&(this.onerror=this.onerror?Xr(E,this.onerror):E)}}function Ao(h,p){return h===xt?p:function(y){var E=h.apply(this,arguments);_(y,E);var w=this.onsuccess,A=this.onerror;return this.onsuccess=null,this.onerror=null,y=p.apply(this,arguments),w&&(this.onsuccess=this.onsuccess?Xr(w,this.onsuccess):w),A&&(this.onerror=this.onerror?Xr(A,this.onerror):A),E===void 0?y===void 0?void 0:y:_(E,y)}}function pn(h,p){return h===xt?p:function(){return p.apply(this,arguments)!==!1&&h.apply(this,arguments)}}function sn(h,p){return h===xt?p:function(){var y=h.apply(this,arguments);if(y&&typeof y.then=="function"){for(var E=this,w=arguments.length,A=new Array(w);w--;)A[w]=arguments[w];return y.then(function(){return p.apply(E,A)})}return p.apply(this,arguments)}}Fi.ModifyError=We,Fi.DexieError=Ie,Fi.BulkError=tt;var jn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ul(h){jn=h}var os={},Fn=100,Jr=typeof Promise>"u"?[]:(function(){var h=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[h,b(h),h];var p=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[p,b(p),h]})(),Wr=Jr[0],Ar=Jr[1],Jr=Jr[2],Ar=Ar&&Ar.then,Zr=Wr&&Wr.constructor,Ei=!!Jr,Ns=function(h,p){ls.push([h,p]),ks&&(queueMicrotask(cl),ks=!1)},ya=!0,ks=!0,Ti=[],ur=[],_n=_i,bn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:xt,pgp:!1,env:{},finalize:xt},ke=bn,ls=[],Rr=0,Ms=[];function xe(h){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var p=this._PSD=ke;if(typeof h!="function"){if(h!==os)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ir(this,this._value))}this._state=null,this._value=null,++p.ref,(function y(E,w){try{w(function(A){if(E._state===null){if(A===E)throw new TypeError("A promise cannot be resolved with itself.");var D=E._lib&&Zn();A&&typeof A.then=="function"?y(E,function(P,q){A instanceof xe?A._then(P,q):A.then(P,q)}):(E._state=!0,E._value=A,ei(E)),D&&Or()}},Ir.bind(null,E))}catch(A){Ir(E,A)}})(this,h)}var Ki={get:function(){var h=ke,p=cr;function y(E,w){var A=this,D=!h.global&&(h!==ke||p!==cr),P=D&&!Ln(),q=new xe(function(F,W){Er(A,new an(js(E,h,D,P),js(w,h,D,P),F,W,h))});return this._consoleTask&&(q._consoleTask=this._consoleTask),q}return y.prototype=os,y},set:function(h){le(this,"then",h&&h.prototype===os?Ki:{get:function(){return h},set:Ki.set})}};function an(h,p,y,E,w){this.onFulfilled=typeof h=="function"?h:null,this.onRejected=typeof p=="function"?p:null,this.resolve=y,this.reject=E,this.psd=w}function Ir(h,p){var y,E;ur.push(p),h._state===null&&(y=h._lib&&Zn(),p=_n(p),h._state=!1,h._value=p,E=h,Ti.some(function(w){return w._value===E._value})||Ti.push(E),ei(h),y&&Or())}function ei(h){var p=h._listeners;h._listeners=[];for(var y=0,E=p.length;y<E;++y)Er(h,p[y]);var w=h._PSD;--w.ref||w.finalize(),Rr===0&&(++Rr,Ns(function(){--Rr==0&&Co()},[]))}function Er(h,p){if(h._state!==null){var y=h._state?p.onFulfilled:p.onRejected;if(y===null)return(h._state?p.resolve:p.reject)(h._value);++p.psd.ref,++Rr,Ns(cu,[y,h,p])}else h._listeners.push(p)}function cu(h,p,y){try{var E,w=p._value;!p._state&&ur.length&&(ur=[]),E=jn&&p._consoleTask?p._consoleTask.run(function(){return h(w)}):h(w),p._state||ur.indexOf(w)!==-1||(function(A){for(var D=Ti.length;D;)if(Ti[--D]._value===A._value)return Ti.splice(D,1)})(p),y.resolve(E)}catch(A){y.reject(A)}finally{--Rr==0&&Co(),--y.psd.ref||y.psd.finalize()}}function cl(){Kn(bn,function(){Zn()&&Or()})}function Zn(){var h=ya;return ks=ya=!1,h}function Or(){var h,p,y;do for(;0<ls.length;)for(h=ls,ls=[],y=h.length,p=0;p<y;++p){var E=h[p];E[0].apply(null,E[1])}while(0<ls.length);ks=ya=!0}function Co(){var h=Ti;Ti=[],h.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var p=Ms.slice(0),y=p.length;y;)p[--y]()}function Si(h){return new xe(os,!1,h)}function Pt(h,p){var y=ke;return function(){var E=Zn(),w=ke;try{return ni(y,!0),h.apply(this,arguments)}catch(A){p&&p(A)}finally{ni(w,!1),E&&Or()}}}k(xe.prototype,{then:Ki,_then:function(h,p){Er(this,new an(null,null,h,p,ke))},catch:function(h){if(arguments.length===1)return this.then(null,h);var p=h,y=arguments[1];return typeof p=="function"?this.then(null,function(E){return(E instanceof p?y:Si)(E)}):this.then(null,function(E){return(E&&E.name===p?y:Si)(E)})},finally:function(h){return this.then(function(p){return xe.resolve(h()).then(function(){return p})},function(p){return xe.resolve(h()).then(function(){return Si(p)})})},timeout:function(h,p){var y=this;return h<1/0?new xe(function(E,w){var A=setTimeout(function(){return w(new Me.Timeout(p))},h);y.then(E,w).finally(clearTimeout.bind(null,A))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&le(xe.prototype,Symbol.toStringTag,"Dexie.Promise"),bn.env=xo(),k(xe,{all:function(){var h=He.apply(null,arguments).map(Gi);return new xe(function(p,y){h.length===0&&p([]);var E=h.length;h.forEach(function(w,A){return xe.resolve(w).then(function(D){h[A]=D,--E||p(h)},y)})})},resolve:function(h){return h instanceof xe?h:h&&typeof h.then=="function"?new xe(function(p,y){h.then(p,y)}):new xe(os,!0,h)},reject:Si,race:function(){var h=He.apply(null,arguments).map(Gi);return new xe(function(p,y){h.map(function(E){return xe.resolve(E).then(p,y)})})},PSD:{get:function(){return ke},set:function(h){return ke=h}},totalEchoes:{get:function(){return cr}},newPSD:Ut,usePSD:Kn,scheduler:{get:function(){return Ns},set:function(h){Ns=h}},rejectionMapper:{get:function(){return _n},set:function(h){_n=h}},follow:function(h,p){return new xe(function(y,E){return Ut(function(w,A){var D=ke;D.unhandleds=[],D.onunhandled=A,D.finalize=Xr(function(){var P,q=this;P=function(){q.unhandleds.length===0?w():A(q.unhandleds[0])},Ms.push(function F(){P(),Ms.splice(Ms.indexOf(F),1)}),++Rr,Ns(function(){--Rr==0&&Co()},[])},D.finalize),h()},p,y,E)})}}),Zr&&(Zr.allSettled&&le(xe,"allSettled",function(){var h=He.apply(null,arguments).map(Gi);return new xe(function(p){h.length===0&&p([]);var y=h.length,E=new Array(y);h.forEach(function(w,A){return xe.resolve(w).then(function(D){return E[A]={status:"fulfilled",value:D}},function(D){return E[A]={status:"rejected",reason:D}}).then(function(){return--y||p(E)})})})}),Zr.any&&typeof AggregateError<"u"&&le(xe,"any",function(){var h=He.apply(null,arguments).map(Gi);return new xe(function(p,y){h.length===0&&y(new AggregateError([]));var E=h.length,w=new Array(E);h.forEach(function(A,D){return xe.resolve(A).then(function(P){return p(P)},function(P){w[D]=P,--E||y(new AggregateError(w))})})})}),Zr.withResolvers&&(xe.withResolvers=Zr.withResolvers));var en={awaits:0,echoes:0,id:0},Vs=0,Dr=[],Ps=0,cr=0,ti=0;function Ut(h,p,y,E){var w=ke,A=Object.create(w);return A.parent=w,A.ref=0,A.global=!1,A.id=++ti,bn.env,A.env=Ei?{Promise:xe,PromiseProp:{value:xe,configurable:!0,writable:!0},all:xe.all,race:xe.race,allSettled:xe.allSettled,any:xe.any,resolve:xe.resolve,reject:xe.reject}:{},p&&_(A,p),++w.ref,A.finalize=function(){--this.parent.ref||this.parent.finalize()},E=Kn(A,h,y,E),A.ref===0&&A.finalize(),E}function $t(){return en.id||(en.id=++Vs),++en.awaits,en.echoes+=Fn,en.id}function Ln(){return!!en.awaits&&(--en.awaits==0&&(en.id=0),en.echoes=en.awaits*Fn,!0)}function Gi(h){return en.echoes&&h&&h.constructor===Zr?($t(),h.then(function(p){return Ln(),p},function(p){return Ln(),Ot(p)})):h}function hu(){var h=Dr[Dr.length-1];Dr.pop(),ni(h,!1)}function ni(h,p){var y,E=ke;(p?!en.echoes||Ps++&&h===ke:!Ps||--Ps&&h===ke)||queueMicrotask(p?(function(w){++cr,en.echoes&&--en.echoes!=0||(en.echoes=en.awaits=en.id=0),Dr.push(ke),ni(w,!0)}).bind(null,h):hu),h!==ke&&(ke=h,E===bn&&(bn.env=xo()),Ei&&(y=bn.env.Promise,p=h.env,(E.global||h.global)&&(Object.defineProperty(u,"Promise",p.PromiseProp),y.all=p.all,y.race=p.race,y.resolve=p.resolve,y.reject=p.reject,p.allSettled&&(y.allSettled=p.allSettled),p.any&&(y.any=p.any))))}function xo(){var h=u.Promise;return Ei?{Promise:h,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:h.all,race:h.race,allSettled:h.allSettled,any:h.any,resolve:h.resolve,reject:h.reject}:{}}function Kn(h,p,y,E,w){var A=ke;try{return ni(h,!0),p(y,E,w)}finally{ni(A,!1)}}function js(h,p,y,E){return typeof h!="function"?h:function(){var w=ke;y&&$t(),ni(p,!0);try{return h.apply(this,arguments)}finally{ni(w,!1),E&&queueMicrotask(Ln)}}}function Nr(h){Promise===Zr&&en.echoes===0?Ps===0?h():enqueueNativeMicroTask(h):setTimeout(h,0)}(""+Ar).indexOf("[native code]")===-1&&($t=Ln=xt);var Ot=xe.reject,En="",xn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",on="String expected.",wi=[],us="__dbnames",kr="readonly",Mr="readwrite";function ri(h,p){return h?p?function(){return h.apply(this,arguments)&&p.apply(this,arguments)}:h:p}var va={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function cs(h){return typeof h!="string"||/\./.test(h)?function(p){return p}:function(p){return p[h]===void 0&&h in p&&delete(p=N(p))[h],p}}function Ro(){throw Me.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ht(h,p){try{var y=hr(h),E=hr(p);if(y!==E)return y==="Array"?1:E==="Array"?-1:y==="binary"?1:E==="binary"?-1:y==="string"?1:E==="string"?-1:y==="Date"?1:E!=="Date"?NaN:-1;switch(y){case"number":case"Date":case"string":return p<h?1:h<p?-1:0;case"binary":return(function(w,A){for(var D=w.length,P=A.length,q=D<P?D:P,F=0;F<q;++F)if(w[F]!==A[F])return w[F]<A[F]?-1:1;return D===P?0:D<P?-1:1})(ln(h),ln(p));case"Array":return(function(w,A){for(var D=w.length,P=A.length,q=D<P?D:P,F=0;F<q;++F){var W=ht(w[F],A[F]);if(W!==0)return W}return D===P?0:D<P?-1:1})(h,p)}}catch{}return NaN}function hr(h){var p=typeof h;return p!="object"?p:ArrayBuffer.isView(h)?"binary":(h=Lt(h),h==="ArrayBuffer"?"binary":h)}function ln(h){return h instanceof Uint8Array?h:ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):new Uint8Array(h)}function un(h,p,y){var E=h.schema.yProps;return E?(p&&0<y.numFailures&&(p=p.filter(function(w,A){return!y.failures[A]})),Promise.all(E.map(function(w){return w=w.updatesTable,p?h.db.table(w).where("k").anyOf(p).delete():h.db.table(w).clear()})).then(function(){return y})):y}var Vr=(_a.prototype.execute=function(h){var p=this["@@propmod"];if(p.add!==void 0){var y=p.add;if(g(y))return o(o([],g(h)?h:[],!0),y).sort();if(typeof y=="number")return(Number(h)||0)+y;if(typeof y=="bigint")try{return BigInt(h)+y}catch{return BigInt(0)+y}throw new TypeError("Invalid term ".concat(y))}if(p.remove!==void 0){var E=p.remove;if(g(E))return g(h)?h.filter(function(w){return!E.includes(w)}).sort():[];if(typeof E=="number")return Number(h)-E;if(typeof E=="bigint")try{return BigInt(h)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return y=(y=p.replacePrefix)===null||y===void 0?void 0:y[0],y&&typeof h=="string"&&h.startsWith(y)?p.replacePrefix[1]+h.substring(y.length):h},_a);function _a(h){this["@@propmod"]=h}function Nt(h,p){for(var y=d(p),E=y.length,w=!1,A=0;A<E;++A){var D=y[A],P=p[D],q=Re(h,D);P instanceof Vr?(V(h,D,P.execute(q)),w=!0):q!==P&&(V(h,D,P),w=!0)}return w}var hs=(_t.prototype._trans=function(h,p,y){var E=this._tx||ke.trans,w=this.name,A=jn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(h==="readonly"?"read":"write"," ").concat(this.name));function D(F,W,U){if(!U.schema[w])throw new Me.NotFound("Table "+w+" not part of transaction");return p(U.idbtrans,U)}var P=Zn();try{var q=E&&E.db._novip===this.db._novip?E===ke.trans?E._promise(h,D,y):Ut(function(){return E._promise(h,D,y)},{trans:E,transless:ke.transless||ke}):(function F(W,U,Z,K){if(W.idbdb&&(W._state.openComplete||ke.letThrough||W._vip)){var Q=W._createTransaction(U,Z,W._dbSchema);try{Q.create(),W._state.PR1398_maxLoop=3}catch(X){return X.name===yt.InvalidState&&W.isOpen()&&0<--W._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),W.close({disableAutoOpen:!1}),W.open().then(function(){return F(W,U,Z,K)})):Ot(X)}return Q._promise(U,function(X,J){return Ut(function(){return ke.trans=Q,K(X,J,Q)})}).then(function(X){if(U==="readwrite")try{Q.idbtrans.commit()}catch{}return U==="readonly"?X:Q._completion.then(function(){return X})})}if(W._state.openComplete)return Ot(new Me.DatabaseClosed(W._state.dbOpenError));if(!W._state.isBeingOpened){if(!W._state.autoOpen)return Ot(new Me.DatabaseClosed);W.open().catch(xt)}return W._state.dbReadyPromise.then(function(){return F(W,U,Z,K)})})(this.db,h,[this.name],D);return A&&(q._consoleTask=A,q=q.catch(function(F){return console.trace(F),Ot(F)})),q}finally{P&&Or()}},_t.prototype.get=function(h,p){var y=this;return h&&h.constructor===Object?this.where(h).first(p):h==null?Ot(new Me.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return y.core.get({trans:E,key:h}).then(function(w){return y.hook.reading.fire(w)})}).then(p)},_t.prototype.where=function(h){if(typeof h=="string")return new this.db.WhereClause(this,h);if(g(h))return new this.db.WhereClause(this,"[".concat(h.join("+"),"]"));var p=d(h);if(p.length===1)return this.where(p[0]).equals(h[p[0]]);var y=this.schema.indexes.concat(this.schema.primKey).filter(function(P){if(P.compound&&p.every(function(F){return 0<=P.keyPath.indexOf(F)})){for(var q=0;q<p.length;++q)if(p.indexOf(P.keyPath[q])===-1)return!1;return!0}return!1}).sort(function(P,q){return P.keyPath.length-q.keyPath.length})[0];if(y&&this.db._maxKey!==En){var A=y.keyPath.slice(0,p.length);return this.where(A).equals(A.map(function(q){return h[q]}))}!y&&jn&&console.warn("The query ".concat(JSON.stringify(h)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(p.join("+"),"]"));var E=this.schema.idxByName;function w(P,q){return ht(P,q)===0}var D=p.reduce(function(U,q){var F=U[0],W=U[1],U=E[q],Z=h[q];return[F||U,F||!U?ri(W,U&&U.multi?function(K){return K=Re(K,q),g(K)&&K.some(function(Q){return w(Z,Q)})}:function(K){return w(Z,Re(K,q))}):W]},[null,null]),A=D[0],D=D[1];return A?this.where(A.name).equals(h[A.keyPath]).filter(D):y?this.filter(D):this.where(p).equals("")},_t.prototype.filter=function(h){return this.toCollection().and(h)},_t.prototype.count=function(h){return this.toCollection().count(h)},_t.prototype.offset=function(h){return this.toCollection().offset(h)},_t.prototype.limit=function(h){return this.toCollection().limit(h)},_t.prototype.each=function(h){return this.toCollection().each(h)},_t.prototype.toArray=function(h){return this.toCollection().toArray(h)},_t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},_t.prototype.orderBy=function(h){return new this.db.Collection(new this.db.WhereClause(this,g(h)?"[".concat(h.join("+"),"]"):h))},_t.prototype.reverse=function(){return this.toCollection().reverse()},_t.prototype.mapToClass=function(h){var p,y=this.db,E=this.name;function w(){return p!==null&&p.apply(this,arguments)||this}(this.schema.mappedClass=h).prototype instanceof Ro&&((function(q,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function W(){this.constructor=q}n(q,F),q.prototype=F===null?Object.create(F):(W.prototype=F.prototype,new W)})(w,p=h),Object.defineProperty(w.prototype,"db",{get:function(){return y},enumerable:!1,configurable:!0}),w.prototype.table=function(){return E},h=w);for(var A=new Set,D=h.prototype;D;D=b(D))Object.getOwnPropertyNames(D).forEach(function(q){return A.add(q)});function P(q){if(!q)return q;var F,W=Object.create(h.prototype);for(F in q)if(!A.has(F))try{W[F]=q[F]}catch{}return W}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=P,this.hook("reading",P),h},_t.prototype.defineClass=function(){return this.mapToClass(function(h){_(this,h)})},_t.prototype.add=function(h,p){var y=this,E=this.schema.primKey,w=E.auto,A=E.keyPath,D=h;return A&&w&&(D=cs(A)(h)),this._trans("readwrite",function(P){return y.core.mutate({trans:P,type:"add",keys:p!=null?[p]:null,values:[D]})}).then(function(P){return P.numFailures?xe.reject(P.failures[0]):P.lastResult}).then(function(P){if(A)try{V(h,A,P)}catch{}return P})},_t.prototype.upsert=function(h,p){var y=this,E=this.schema.primKey.keyPath;return this._trans("readwrite",function(w){return y.core.get({trans:w,key:h}).then(function(A){var D=A??{};return Nt(D,p),E&&V(D,E,h),y.core.mutate({trans:w,type:"put",values:[D],keys:[h],upsert:!0,updates:{keys:[h],changeSpecs:[p]}}).then(function(P){return P.numFailures?xe.reject(P.failures[0]):!!A})})})},_t.prototype.update=function(h,p){return typeof h!="object"||g(h)?this.where(":id").equals(h).modify(p):(h=Re(h,this.schema.primKey.keyPath),h===void 0?Ot(new Me.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(h).modify(p))},_t.prototype.put=function(h,p){var y=this,E=this.schema.primKey,w=E.auto,A=E.keyPath,D=h;return A&&w&&(D=cs(A)(h)),this._trans("readwrite",function(P){return y.core.mutate({trans:P,type:"put",values:[D],keys:p!=null?[p]:null})}).then(function(P){return P.numFailures?xe.reject(P.failures[0]):P.lastResult}).then(function(P){if(A)try{V(h,A,P)}catch{}return P})},_t.prototype.delete=function(h){var p=this;return this._trans("readwrite",function(y){return p.core.mutate({trans:y,type:"delete",keys:[h]}).then(function(E){return un(p,[h],E)}).then(function(E){return E.numFailures?xe.reject(E.failures[0]):void 0})})},_t.prototype.clear=function(){var h=this;return this._trans("readwrite",function(p){return h.core.mutate({trans:p,type:"deleteRange",range:va}).then(function(y){return un(h,null,y)})}).then(function(p){return p.numFailures?xe.reject(p.failures[0]):void 0})},_t.prototype.bulkGet=function(h){var p=this;return this._trans("readonly",function(y){return p.core.getMany({keys:h,trans:y}).then(function(E){return E.map(function(w){return p.hook.reading.fire(w)})})})},_t.prototype.bulkAdd=function(h,p,y){var E=this,w=Array.isArray(p)?p:void 0,A=(y=y||(w?void 0:p))?y.allKeys:void 0;return this._trans("readwrite",function(D){var F=E.schema.primKey,P=F.auto,F=F.keyPath;if(F&&w)throw new Me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(w&&w.length!==h.length)throw new Me.InvalidArgument("Arguments objects and keys must have the same length");var q=h.length,F=F&&P?h.map(cs(F)):h;return E.core.mutate({trans:D,type:"add",keys:w,values:F,wantResults:A}).then(function(Q){var U=Q.numFailures,Z=Q.results,K=Q.lastResult,Q=Q.failures;if(U===0)return A?Z:K;throw new tt("".concat(E.name,".bulkAdd(): ").concat(U," of ").concat(q," operations failed"),Q)})})},_t.prototype.bulkPut=function(h,p,y){var E=this,w=Array.isArray(p)?p:void 0,A=(y=y||(w?void 0:p))?y.allKeys:void 0;return this._trans("readwrite",function(D){var F=E.schema.primKey,P=F.auto,F=F.keyPath;if(F&&w)throw new Me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(w&&w.length!==h.length)throw new Me.InvalidArgument("Arguments objects and keys must have the same length");var q=h.length,F=F&&P?h.map(cs(F)):h;return E.core.mutate({trans:D,type:"put",keys:w,values:F,wantResults:A}).then(function(Q){var U=Q.numFailures,Z=Q.results,K=Q.lastResult,Q=Q.failures;if(U===0)return A?Z:K;throw new tt("".concat(E.name,".bulkPut(): ").concat(U," of ").concat(q," operations failed"),Q)})})},_t.prototype.bulkUpdate=function(h){var p=this,y=this.core,E=h.map(function(D){return D.key}),w=h.map(function(D){return D.changes}),A=[];return this._trans("readwrite",function(D){return y.getMany({trans:D,keys:E,cache:"clone"}).then(function(P){var q=[],F=[];h.forEach(function(U,Z){var K=U.key,Q=U.changes,X=P[Z];if(X){for(var J=0,ne=Object.keys(Q);J<ne.length;J++){var se=ne[J],fe=Q[se];if(se===p.schema.primKey.keyPath){if(ht(fe,K)!==0)throw new Me.Constraint("Cannot update primary key in bulkUpdate()")}else V(X,se,fe)}A.push(Z),q.push(K),F.push(X)}});var W=q.length;return y.mutate({trans:D,type:"put",keys:q,values:F,updates:{keys:E,changeSpecs:w}}).then(function(U){var Z=U.numFailures,K=U.failures;if(Z===0)return W;for(var Q=0,X=Object.keys(K);Q<X.length;Q++){var J,ne=X[Q],se=A[Number(ne)];se!=null&&(J=K[ne],delete K[ne],K[se]=J)}throw new tt("".concat(p.name,".bulkUpdate(): ").concat(Z," of ").concat(W," operations failed"),K)})})})},_t.prototype.bulkDelete=function(h){var p=this,y=h.length;return this._trans("readwrite",function(E){return p.core.mutate({trans:E,type:"delete",keys:h}).then(function(w){return un(p,h,w)})}).then(function(D){var w=D.numFailures,A=D.lastResult,D=D.failures;if(w===0)return A;throw new tt("".concat(p.name,".bulkDelete(): ").concat(w," of ").concat(y," operations failed"),D)})},_t);function _t(){}function ii(h){function p(D,P){if(P){for(var q=arguments.length,F=new Array(q-1);--q;)F[q-1]=arguments[q];return y[D].subscribe.apply(null,F),h}if(typeof D=="string")return y[D]}var y={};p.addEventType=A;for(var E=1,w=arguments.length;E<w;++E)A(arguments[E]);return p;function A(D,P,q){if(typeof D!="object"){var F;P=P||pn;var W={subscribers:[],fire:q=q||xt,subscribe:function(U){W.subscribers.indexOf(U)===-1&&(W.subscribers.push(U),W.fire=P(W.fire,U))},unsubscribe:function(U){W.subscribers=W.subscribers.filter(function(Z){return Z!==U}),W.fire=W.subscribers.reduce(P,q)}};return y[D]=p[D]=W}d(F=D).forEach(function(U){var Z=F[U];if(g(Z))A(U,F[U][0],F[U][1]);else{if(Z!=="asap")throw new Me.InvalidArgument("Invalid event config");var K=A(U,_i,function(){for(var Q=arguments.length,X=new Array(Q);Q--;)X[Q]=arguments[Q];K.subscribers.forEach(function(J){it(function(){J.apply(null,X)})})})}})}}function Rn(h,p){return he(p).from({prototype:h}),p}function si(h,p){return!(h.filter||h.algorithm||h.or)&&(p?h.justLimit:!h.replayFilter)}function ba(h,p){h.filter=ri(h.filter,p)}function Ls(h,p,y){var E=h.replayFilter;h.replayFilter=E?function(){return ri(E(),p())}:p,h.justLimit=y&&!E}function ai(h,p){if(h.isPrimKey)return p.primaryKey;var y=p.getIndexByKeyPath(h.index);if(!y)throw new Me.Schema("KeyPath "+h.index+" on object store "+p.name+" is not indexed");return y}function Io(h,p,y){var E=ai(h,p.schema);return p.openCursor({trans:y,values:!h.keysOnly,reverse:h.dir==="prev",unique:!!h.unique,query:{index:E,range:h.range}})}function oi(h,p,y,E){var w=h.replayFilter?ri(h.filter,h.replayFilter()):h.filter;if(h.or){var A={},D=function(P,q,F){var W,U;w&&!w(q,F,function(Z){return q.stop(Z)},function(Z){return q.fail(Z)})||((U=""+(W=q.primaryKey))=="[object ArrayBuffer]"&&(U=""+new Uint8Array(W)),I(A,U)||(A[U]=!0,p(P,q,F)))};return Promise.all([h.or._iterate(D,y),er(Io(h,E,y),h.algorithm,D,!h.keysOnly&&h.valueMapper)])}return er(Io(h,E,y),ri(h.algorithm,w),p,!h.keysOnly&&h.valueMapper)}function er(h,p,y,E){var w=Pt(E?function(A,D,P){return y(E(A),D,P)}:y);return h.then(function(A){if(A)return A.start(function(){var D=function(){return A.continue()};p&&!p(A,function(P){return D=P},function(P){A.stop(P),D=xt},function(P){A.fail(P),D=xt})||w(A.value,A,function(P){return D=P}),D()})})}var hl=(vt.prototype._read=function(h,p){var y=this._ctx;return y.error?y.table._trans(null,Ot.bind(null,y.error)):y.table._trans("readonly",h).then(p)},vt.prototype._write=function(h){var p=this._ctx;return p.error?p.table._trans(null,Ot.bind(null,p.error)):p.table._trans("readwrite",h,"locked")},vt.prototype._addAlgorithm=function(h){var p=this._ctx;p.algorithm=ri(p.algorithm,h)},vt.prototype._iterate=function(h,p){return oi(this._ctx,h,p,this._ctx.table.core)},vt.prototype.clone=function(h){var p=Object.create(this.constructor.prototype),y=Object.create(this._ctx);return h&&_(y,h),p._ctx=y,p},vt.prototype.raw=function(){return this._ctx.valueMapper=null,this},vt.prototype.each=function(h){var p=this._ctx;return this._read(function(y){return oi(p,h,y,p.table.core)})},vt.prototype.count=function(h){var p=this;return this._read(function(y){var E=p._ctx,w=E.table.core;if(si(E,!0))return w.count({trans:y,query:{index:ai(E,w.schema),range:E.range}}).then(function(D){return Math.min(D,E.limit)});var A=0;return oi(E,function(){return++A,!1},y,w).then(function(){return A})}).then(h)},vt.prototype.sortBy=function(h,p){var y=h.split(".").reverse(),E=y[0],w=y.length-1;function A(q,F){return F?A(q[y[F]],F-1):q[E]}var D=this._ctx.dir==="next"?1:-1;function P(q,F){return ht(A(q,w),A(F,w))*D}return this.toArray(function(q){return q.sort(P)}).then(p)},vt.prototype.toArray=function(h){var p=this;return this._read(function(y){var E=p._ctx;if(E.dir==="next"&&si(E,!0)&&0<E.limit){var w=E.valueMapper,A=ai(E,E.table.core.schema);return E.table.core.query({trans:y,limit:E.limit,values:!0,query:{index:A,range:E.range}}).then(function(P){return P=P.result,w?P.map(w):P})}var D=[];return oi(E,function(P){return D.push(P)},y,E.table.core).then(function(){return D})},h)},vt.prototype.offset=function(h){var p=this._ctx;return h<=0||(p.offset+=h,si(p)?Ls(p,function(){var y=h;return function(E,w){return y===0||(y===1?--y:w(function(){E.advance(y),y=0}),!1)}}):Ls(p,function(){var y=h;return function(){return--y<0}})),this},vt.prototype.limit=function(h){return this._ctx.limit=Math.min(this._ctx.limit,h),Ls(this._ctx,function(){var p=h;return function(y,E,w){return--p<=0&&E(w),0<=p}},!0),this},vt.prototype.until=function(h,p){return ba(this._ctx,function(y,E,w){return!h(y.value)||(E(w),p)}),this},vt.prototype.first=function(h){return this.limit(1).toArray(function(p){return p[0]}).then(h)},vt.prototype.last=function(h){return this.reverse().first(h)},vt.prototype.filter=function(h){var p;return ba(this._ctx,function(y){return h(y.value)}),(p=this._ctx).isMatch=ri(p.isMatch,h),this},vt.prototype.and=function(h){return this.filter(h)},vt.prototype.or=function(h){return new this.db.WhereClause(this._ctx.table,h,this)},vt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},vt.prototype.desc=function(){return this.reverse()},vt.prototype.eachKey=function(h){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(y,E){h(E.key,E)})},vt.prototype.eachUniqueKey=function(h){return this._ctx.unique="unique",this.eachKey(h)},vt.prototype.eachPrimaryKey=function(h){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(y,E){h(E.primaryKey,E)})},vt.prototype.keys=function(h){var p=this._ctx;p.keysOnly=!p.isMatch;var y=[];return this.each(function(E,w){y.push(w.key)}).then(function(){return y}).then(h)},vt.prototype.primaryKeys=function(h){var p=this._ctx;if(p.dir==="next"&&si(p,!0)&&0<p.limit)return this._read(function(E){var w=ai(p,p.table.core.schema);return p.table.core.query({trans:E,values:!1,limit:p.limit,query:{index:w,range:p.range}})}).then(function(E){return E.result}).then(h);p.keysOnly=!p.isMatch;var y=[];return this.each(function(E,w){y.push(w.primaryKey)}).then(function(){return y}).then(h)},vt.prototype.uniqueKeys=function(h){return this._ctx.unique="unique",this.keys(h)},vt.prototype.firstKey=function(h){return this.limit(1).keys(function(p){return p[0]}).then(h)},vt.prototype.lastKey=function(h){return this.reverse().firstKey(h)},vt.prototype.distinct=function(){var h=this._ctx,h=h.index&&h.table.schema.idxByName[h.index];if(!h||!h.multi)return this;var p={};return ba(this._ctx,function(w){var E=w.primaryKey.toString(),w=I(p,E);return p[E]=!0,!w}),this},vt.prototype.modify=function(h){var p=this,y=this._ctx;return this._write(function(E){var w=typeof h=="function"?h:function(X){return Nt(X,h)},A=y.table.core,F=A.schema.primaryKey,D=F.outbound,P=F.extractKey,q=200,F=p.db._options.modifyChunkSize;F&&(q=typeof F=="object"?F[A.name]||F["*"]||200:F);function W(X,se){var ne=se.failures,se=se.numFailures;Z+=X-se;for(var fe=0,ye=d(ne);fe<ye.length;fe++){var we=ye[fe];U.push(ne[we])}}var U=[],Z=0,K=[],Q=h===Ea;return p.clone().primaryKeys().then(function(X){function J(se){var fe=Math.min(q,X.length-se),ye=X.slice(se,se+fe);return(Q?Promise.resolve([]):A.getMany({trans:E,keys:ye,cache:"immutable"})).then(function(we){var Ne=[],Te=[],Ce=D?[]:null,De=Q?ye:[];if(!Q)for(var Se=0;Se<fe;++Se){var je=we[Se],Ye={value:N(je),primKey:X[se+Se]};w.call(Ye,Ye.value,Ye)!==!1&&(Ye.value==null?De.push(X[se+Se]):D||ht(P(je),P(Ye.value))===0?(Te.push(Ye.value),D&&Ce.push(X[se+Se])):(De.push(X[se+Se]),Ne.push(Ye.value)))}return Promise.resolve(0<Ne.length&&A.mutate({trans:E,type:"add",values:Ne}).then(function(st){for(var ft in st.failures)De.splice(parseInt(ft),1);W(Ne.length,st)})).then(function(){return(0<Te.length||ne&&typeof h=="object")&&A.mutate({trans:E,type:"put",keys:Ce,values:Te,criteria:ne,changeSpec:typeof h!="function"&&h,isAdditionalChunk:0<se}).then(function(st){return W(Te.length,st)})}).then(function(){return(0<De.length||ne&&Q)&&A.mutate({trans:E,type:"delete",keys:De,criteria:ne,isAdditionalChunk:0<se}).then(function(st){return un(y.table,De,st)}).then(function(st){return W(De.length,st)})}).then(function(){return X.length>se+fe&&J(se+q)})})}var ne=si(y)&&y.limit===1/0&&(typeof h!="function"||Q)&&{index:y.index,range:y.range};return J(0).then(function(){if(0<U.length)throw new We("Error modifying one or more objects",U,Z,K);return X.length})})})},vt.prototype.delete=function(){var h=this._ctx,p=h.range;return!si(h)||h.table.schema.yProps||!h.isPrimKey&&p.type!==3?this.modify(Ea):this._write(function(y){var E=h.table.core.schema.primaryKey,w=p;return h.table.core.count({trans:y,query:{index:E,range:w}}).then(function(A){return h.table.core.mutate({trans:y,type:"deleteRange",range:w}).then(function(q){var P=q.failures,q=q.numFailures;if(q)throw new We("Could not delete some values",Object.keys(P).map(function(F){return P[F]}),A-q);return A-q})})})},vt);function vt(){}var Ea=function(h,p){return p.value=null};function Ta(h,p){return h<p?-1:h===p?0:1}function fl(h,p){return p<h?-1:h===p?0:1}function mn(h,p,y){return h=h instanceof Yi?new h.Collection(h):h,h._ctx.error=new(y||TypeError)(p),h}function li(h){return new h.Collection(h,function(){return Tr("")}).limit(0)}function fr(h,p,y,E){var w,A,D,P,q,F,W,U=y.length;if(!y.every(function(Q){return typeof Q=="string"}))return mn(h,on);function Z(Q){w=Q==="next"?function(J){return J.toUpperCase()}:function(J){return J.toLowerCase()},A=Q==="next"?function(J){return J.toLowerCase()}:function(J){return J.toUpperCase()},D=Q==="next"?Ta:fl;var X=y.map(function(J){return{lower:A(J),upper:w(J)}}).sort(function(J,ne){return D(J.lower,ne.lower)});P=X.map(function(J){return J.upper}),q=X.map(function(J){return J.lower}),W=(F=Q)==="next"?"":E}Z("next"),h=new h.Collection(h,function(){return Pr(P[0],q[U-1]+E)}),h._ondirectionchange=function(Q){Z(Q)};var K=0;return h._addAlgorithm(function(Q,X,J){var ne=Q.key;if(typeof ne!="string")return!1;var se=A(ne);if(p(se,q,K))return!0;for(var fe=null,ye=K;ye<U;++ye){var we=(function(Ne,Te,Ce,De,Se,je){for(var Ye=Math.min(Ne.length,De.length),st=-1,ft=0;ft<Ye;++ft){var Qn=Te[ft];if(Qn!==De[ft])return Se(Ne[ft],Ce[ft])<0?Ne.substr(0,ft)+Ce[ft]+Ce.substr(ft+1):Se(Ne[ft],De[ft])<0?Ne.substr(0,ft)+De[ft]+Ce.substr(ft+1):0<=st?Ne.substr(0,st)+Te[st]+Ce.substr(st+1):null;Se(Ne[ft],Qn)<0&&(st=ft)}return Ye<De.length&&je==="next"?Ne+Ce.substr(Ne.length):Ye<Ne.length&&je==="prev"?Ne.substr(0,Ce.length):st<0?null:Ne.substr(0,st)+De[st]+Ce.substr(st+1)})(ne,se,P[ye],q[ye],D,F);we===null&&fe===null?K=ye+1:(fe===null||0<D(fe,we))&&(fe=we)}return X(fe!==null?function(){Q.continue(fe+W)}:J),!1}),h}function Pr(h,p,y,E){return{type:2,lower:h,upper:p,lowerOpen:y,upperOpen:E}}function Tr(h){return{type:1,lower:h,upper:h}}var Yi=(Object.defineProperty(zt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),zt.prototype.between=function(h,p,y,E){y=y!==!1,E=E===!0;try{return 0<this._cmp(h,p)||this._cmp(h,p)===0&&(y||E)&&(!y||!E)?li(this):new this.Collection(this,function(){return Pr(h,p,!y,!E)})}catch{return mn(this,xn)}},zt.prototype.equals=function(h){return h==null?mn(this,xn):new this.Collection(this,function(){return Tr(h)})},zt.prototype.above=function(h){return h==null?mn(this,xn):new this.Collection(this,function(){return Pr(h,void 0,!0)})},zt.prototype.aboveOrEqual=function(h){return h==null?mn(this,xn):new this.Collection(this,function(){return Pr(h,void 0,!1)})},zt.prototype.below=function(h){return h==null?mn(this,xn):new this.Collection(this,function(){return Pr(void 0,h,!1,!0)})},zt.prototype.belowOrEqual=function(h){return h==null?mn(this,xn):new this.Collection(this,function(){return Pr(void 0,h)})},zt.prototype.startsWith=function(h){return typeof h!="string"?mn(this,on):this.between(h,h+En,!0,!0)},zt.prototype.startsWithIgnoreCase=function(h){return h===""?this.startsWith(h):fr(this,function(p,y){return p.indexOf(y[0])===0},[h],En)},zt.prototype.equalsIgnoreCase=function(h){return fr(this,function(p,y){return p===y[0]},[h],"")},zt.prototype.anyOfIgnoreCase=function(){var h=He.apply(Be,arguments);return h.length===0?li(this):fr(this,function(p,y){return y.indexOf(p)!==-1},h,"")},zt.prototype.startsWithAnyOfIgnoreCase=function(){var h=He.apply(Be,arguments);return h.length===0?li(this):fr(this,function(p,y){return y.some(function(E){return p.indexOf(E)===0})},h,En)},zt.prototype.anyOf=function(){var h=this,p=He.apply(Be,arguments),y=this._cmp;try{p.sort(y)}catch{return mn(this,xn)}if(p.length===0)return li(this);var E=new this.Collection(this,function(){return Pr(p[0],p[p.length-1])});E._ondirectionchange=function(A){y=A==="next"?h._ascending:h._descending,p.sort(y)};var w=0;return E._addAlgorithm(function(A,D,P){for(var q=A.key;0<y(q,p[w]);)if(++w===p.length)return D(P),!1;return y(q,p[w])===0||(D(function(){A.continue(p[w])}),!1)}),E},zt.prototype.notEqual=function(h){return this.inAnyRange([[-1/0,h],[h,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},zt.prototype.noneOf=function(){var h=He.apply(Be,arguments);if(h.length===0)return new this.Collection(this);try{h.sort(this._ascending)}catch{return mn(this,xn)}var p=h.reduce(function(y,E){return y?y.concat([[y[y.length-1][1],E]]):[[-1/0,E]]},null);return p.push([h[h.length-1],this.db._maxKey]),this.inAnyRange(p,{includeLowers:!1,includeUppers:!1})},zt.prototype.inAnyRange=function(ne,p){var y=this,E=this._cmp,w=this._ascending,A=this._descending,D=this._min,P=this._max;if(ne.length===0)return li(this);if(!ne.every(function(se){return se[0]!==void 0&&se[1]!==void 0&&w(se[0],se[1])<=0}))return mn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Me.InvalidArgument);var q=!p||p.includeLowers!==!1,F=p&&p.includeUppers===!0,W,U=w;function Z(se,fe){return U(se[0],fe[0])}try{(W=ne.reduce(function(se,fe){for(var ye=0,we=se.length;ye<we;++ye){var Ne=se[ye];if(E(fe[0],Ne[1])<0&&0<E(fe[1],Ne[0])){Ne[0]=D(Ne[0],fe[0]),Ne[1]=P(Ne[1],fe[1]);break}}return ye===we&&se.push(fe),se},[])).sort(Z)}catch{return mn(this,xn)}var K=0,Q=F?function(se){return 0<w(se,W[K][1])}:function(se){return 0<=w(se,W[K][1])},X=q?function(se){return 0<A(se,W[K][0])}:function(se){return 0<=A(se,W[K][0])},J=Q,ne=new this.Collection(this,function(){return Pr(W[0][0],W[W.length-1][1],!q,!F)});return ne._ondirectionchange=function(se){U=se==="next"?(J=Q,w):(J=X,A),W.sort(Z)},ne._addAlgorithm(function(se,fe,ye){for(var we,Ne=se.key;J(Ne);)if(++K===W.length)return fe(ye),!1;return!Q(we=Ne)&&!X(we)||(y._cmp(Ne,W[K][1])===0||y._cmp(Ne,W[K][0])===0||fe(function(){U===w?se.continue(W[K][0]):se.continue(W[K][1])}),!1)}),ne},zt.prototype.startsWithAnyOf=function(){var h=He.apply(Be,arguments);return h.every(function(p){return typeof p=="string"})?h.length===0?li(this):this.inAnyRange(h.map(function(p){return[p,p+En]})):mn(this,"startsWithAnyOf() only works with strings")},zt);function zt(){}function Gn(h){return Pt(function(p){return Ai(p),h(p.target.error),!1})}function Ai(h){h.stopPropagation&&h.stopPropagation(),h.preventDefault&&h.preventDefault()}var jr="storagemutated",Sr="x-storagemutated-1",Tn=ii(null,jr),Us=(gt.prototype._lock=function(){return rt(!ke.global),++this._reculock,this._reculock!==1||ke.global||(ke.lockOwnerFor=this),this},gt.prototype._unlock=function(){if(rt(!ke.global),--this._reculock==0)for(ke.global||(ke.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var h=this._blockedFuncs.shift();try{Kn(h[1],h[0])}catch{}}return this},gt.prototype._locked=function(){return this._reculock&&ke.lockOwnerFor!==this},gt.prototype.create=function(h){var p=this;if(!this.mode)return this;var y=this.db.idbdb,E=this.db._state.dbOpenError;if(rt(!this.idbtrans),!h&&!y)switch(E&&E.name){case"DatabaseClosedError":throw new Me.DatabaseClosed(E);case"MissingAPIError":throw new Me.MissingAPI(E.message,E);default:throw new Me.OpenFailed(E)}if(!this.active)throw new Me.TransactionInactive;return rt(this._completion._state===null),(h=this.idbtrans=h||(this.db.core||y).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Pt(function(w){Ai(w),p._reject(h.error)}),h.onabort=Pt(function(w){Ai(w),p.active&&p._reject(new Me.Abort(h.error)),p.active=!1,p.on("abort").fire(w)}),h.oncomplete=Pt(function(){p.active=!1,p._resolve(),"mutatedParts"in h&&Tn.storagemutated.fire(h.mutatedParts)}),this},gt.prototype._promise=function(h,p,y){var E=this;if(h==="readwrite"&&this.mode!=="readwrite")return Ot(new Me.ReadOnly("Transaction is readonly"));if(!this.active)return Ot(new Me.TransactionInactive);if(this._locked())return new xe(function(A,D){E._blockedFuncs.push([function(){E._promise(h,p,y).then(A,D)},ke])});if(y)return Ut(function(){var A=new xe(function(D,P){E._lock();var q=p(D,P,E);q&&q.then&&q.then(D,P)});return A.finally(function(){return E._unlock()}),A._lib=!0,A});var w=new xe(function(A,D){var P=p(A,D,E);P&&P.then&&P.then(A,D)});return w._lib=!0,w},gt.prototype._root=function(){return this.parent?this.parent._root():this},gt.prototype.waitFor=function(h){var p,y=this._root(),E=xe.resolve(h);y._waitingFor?y._waitingFor=y._waitingFor.then(function(){return E}):(y._waitingFor=E,y._waitingQueue=[],p=y.idbtrans.objectStore(y.storeNames[0]),(function A(){for(++y._spinCount;y._waitingQueue.length;)y._waitingQueue.shift()();y._waitingFor&&(p.get(-1/0).onsuccess=A)})());var w=y._waitingFor;return new xe(function(A,D){E.then(function(P){return y._waitingQueue.push(Pt(A.bind(null,P)))},function(P){return y._waitingQueue.push(Pt(D.bind(null,P)))}).finally(function(){y._waitingFor===w&&(y._waitingFor=null)})})},gt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Me.Abort))},gt.prototype.table=function(h){var p=this._memoizedTables||(this._memoizedTables={});if(I(p,h))return p[h];var y=this.schema[h];if(!y)throw new Me.NotFound("Table "+h+" not part of transaction");return y=new this.db.Table(h,y,this),y.core=this.db.core.table(h),p[h]=y},gt);function gt(){}function Lr(h,p,y,E,w,A,D,P){return{name:h,keyPath:p,unique:y,multi:E,auto:w,compound:A,src:(y&&!D?"&":"")+(E?"*":"")+(w?"++":"")+Sa(p),type:P}}function Sa(h){return typeof h=="string"?h:h?"["+[].join.call(h,"+")+"]":""}function Qi(h,p,y){return{name:h,primKey:p,indexes:y,mappedClass:null,idxByName:(E=function(w){return[w.name,w]},y.reduce(function(w,A,D){return D=E(A,D),D&&(w[D[0]]=D[1]),w},{}))};var E}var $i=function(h){try{return h.only([[]]),$i=function(){return[[]]},[[]]}catch{return $i=function(){return En},En}};function Xi(h){return h==null?function(){}:typeof h=="string"?(p=h).split(".").length===1?function(y){return y[p]}:function(y){return Re(y,p)}:function(y){return Re(y,h)};var p}function Ci(h){return[].slice.call(h)}var ui=0;function cn(h){return h==null?":id":typeof h=="string"?h:"[".concat(h.join("+"),"]")}function Wi(h,p,q){function E(J){if(J.type===3)return null;if(J.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var K=J.lower,Q=J.upper,X=J.lowerOpen,J=J.upperOpen;return K===void 0?Q===void 0?null:p.upperBound(Q,!!J):Q===void 0?p.lowerBound(K,!!X):p.bound(K,Q,!!X,!!J)}function w(Z){var K,Q=Z.name;return{name:Q,schema:Z,mutate:function(X){var J=X.trans,ne=X.type,se=X.keys,fe=X.values,ye=X.range;return new Promise(function(we,Ne){we=Pt(we);var Te=J.objectStore(Q),Ce=Te.keyPath==null,De=ne==="put"||ne==="add";if(!De&&ne!=="delete"&&ne!=="deleteRange")throw new Error("Invalid operation type: "+ne);var Se,je=(se||fe||{length:1}).length;if(se&&fe&&se.length!==fe.length)throw new Error("Given keys array must have same length as given values array.");if(je===0)return we({numFailures:0,failures:{},results:[],lastResult:void 0});function Ye(On){++Qn,Ai(On)}var st=[],ft=[],Qn=0;if(ne==="deleteRange"){if(ye.type===4)return we({numFailures:Qn,failures:ft,results:[],lastResult:void 0});ye.type===3?st.push(Se=Te.clear()):st.push(Se=Te.delete(E(ye)))}else{var Ce=De?Ce?[fe,se]:[fe,null]:[se,null],nt=Ce[0],In=Ce[1];if(De)for(var tn=0;tn<je;++tn)st.push(Se=In&&In[tn]!==void 0?Te[ne](nt[tn],In[tn]):Te[ne](nt[tn])),Se.onerror=Ye;else for(tn=0;tn<je;++tn)st.push(Se=Te[ne](nt[tn])),Se.onerror=Ye}function Vo(On){On=On.target.result,st.forEach(function(Hr,pu){return Hr.error!=null&&(ft[pu]=Hr.error)}),we({numFailures:Qn,failures:ft,results:ne==="delete"?se:st.map(function(Hr){return Hr.result}),lastResult:On})}Se.onerror=function(On){Ye(On),Vo(On)},Se.onsuccess=Vo})},getMany:function(X){var J=X.trans,ne=X.keys;return new Promise(function(se,fe){se=Pt(se);for(var ye,we=J.objectStore(Q),Ne=ne.length,Te=new Array(Ne),Ce=0,De=0,Se=function(st){st=st.target,Te[st._pos]=st.result,++De===Ce&&se(Te)},je=Gn(fe),Ye=0;Ye<Ne;++Ye)ne[Ye]!=null&&((ye=we.get(ne[Ye]))._pos=Ye,ye.onsuccess=Se,ye.onerror=je,++Ce);Ce===0&&se(Te)})},get:function(X){var J=X.trans,ne=X.key;return new Promise(function(se,fe){se=Pt(se);var ye=J.objectStore(Q).get(ne);ye.onsuccess=function(we){return se(we.target.result)},ye.onerror=Gn(fe)})},query:(K=F,function(X){return new Promise(function(J,ne){J=Pt(J);var se,fe,ye,Ce=X.trans,we=X.values,Ne=X.limit,Se=X.query,Te=Ne===1/0?void 0:Ne,De=Se.index,Se=Se.range,Ce=Ce.objectStore(Q),De=De.isPrimaryKey?Ce:Ce.index(De.name),Se=E(Se);if(Ne===0)return J({result:[]});K?((Te=we?De.getAll(Se,Te):De.getAllKeys(Se,Te)).onsuccess=function(je){return J({result:je.target.result})},Te.onerror=Gn(ne)):(se=0,fe=!we&&"openKeyCursor"in De?De.openKeyCursor(Se):De.openCursor(Se),ye=[],fe.onsuccess=function(je){var Ye=fe.result;return Ye?(ye.push(we?Ye.value:Ye.primaryKey),++se===Ne?J({result:ye}):void Ye.continue()):J({result:ye})},fe.onerror=Gn(ne))})}),openCursor:function(X){var J=X.trans,ne=X.values,se=X.query,fe=X.reverse,ye=X.unique;return new Promise(function(we,Ne){we=Pt(we);var De=se.index,Te=se.range,Ce=J.objectStore(Q),Ce=De.isPrimaryKey?Ce:Ce.index(De.name),De=fe?ye?"prevunique":"prev":ye?"nextunique":"next",Se=!ne&&"openKeyCursor"in Ce?Ce.openKeyCursor(E(Te),De):Ce.openCursor(E(Te),De);Se.onerror=Gn(Ne),Se.onsuccess=Pt(function(je){var Ye,st,ft,Qn,nt=Se.result;nt?(nt.___id=++ui,nt.done=!1,Ye=nt.continue.bind(nt),st=(st=nt.continuePrimaryKey)&&st.bind(nt),ft=nt.advance.bind(nt),Qn=function(){throw new Error("Cursor not stopped")},nt.trans=J,nt.stop=nt.continue=nt.continuePrimaryKey=nt.advance=function(){throw new Error("Cursor not started")},nt.fail=Pt(Ne),nt.next=function(){var In=this,tn=1;return this.start(function(){return tn--?In.continue():In.stop()}).then(function(){return In})},nt.start=function(In){function tn(){if(Se.result)try{In()}catch(On){nt.fail(On)}else nt.done=!0,nt.start=function(){throw new Error("Cursor behind last entry")},nt.stop()}var Vo=new Promise(function(On,Hr){On=Pt(On),Se.onerror=Gn(Hr),nt.fail=Hr,nt.stop=function(pu){nt.stop=nt.continue=nt.continuePrimaryKey=nt.advance=Qn,On(pu)}});return Se.onsuccess=Pt(function(On){Se.onsuccess=tn,tn()}),nt.continue=Ye,nt.continuePrimaryKey=st,nt.advance=ft,tn(),Vo},we(nt)):we(null)},Ne)})},count:function(X){var J=X.query,ne=X.trans,se=J.index,fe=J.range;return new Promise(function(ye,we){var Ne=ne.objectStore(Q),Te=se.isPrimaryKey?Ne:Ne.index(se.name),Ne=E(fe),Te=Ne?Te.count(Ne):Te.count();Te.onsuccess=Pt(function(Ce){return ye(Ce.target.result)}),Te.onerror=Gn(we)})}}}var A,D,P,W=(D=q,P=Ci((A=h).objectStoreNames),{schema:{name:A.name,tables:P.map(function(Z){return D.objectStore(Z)}).map(function(Z){var K=Z.keyPath,J=Z.autoIncrement,Q=g(K),X={},J={name:Z.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:K==null,compound:Q,keyPath:K,autoIncrement:J,unique:!0,extractKey:Xi(K)},indexes:Ci(Z.indexNames).map(function(ne){return Z.index(ne)}).map(function(ye){var se=ye.name,fe=ye.unique,we=ye.multiEntry,ye=ye.keyPath,we={name:se,compound:g(ye),keyPath:ye,unique:fe,multiEntry:we,extractKey:Xi(ye)};return X[cn(ye)]=we}),getIndexByKeyPath:function(ne){return X[cn(ne)]}};return X[":id"]=J.primaryKey,K!=null&&(X[cn(K)]=J.primaryKey),J})},hasGetAll:0<P.length&&"getAll"in D.objectStore(P[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),q=W.schema,F=W.hasGetAll,W=q.tables.map(w),U={};return W.forEach(function(Z){return U[Z.name]=Z}),{stack:"dbcore",transaction:h.transaction.bind(h),table:function(Z){if(!U[Z])throw new Error("Table '".concat(Z,"' not found"));return U[Z]},MIN_KEY:-1/0,MAX_KEY:$i(p),schema:q}}function xi(h,p,y,E){var w=y.IDBKeyRange;return y.indexedDB,{dbcore:(E=Wi(p,w,E),h.dbcore.reduce(function(A,D){return D=D.create,s(s({},A),D(A))},E))}}function ci(h,E){var y=E.db,E=xi(h._middlewares,y,h._deps,E);h.core=E.dbcore,h.tables.forEach(function(w){var A=w.name;h.core.schema.tables.some(function(D){return D.name===A})&&(w.core=h.core.table(A),h[A]instanceof h.Table&&(h[A].core=w.core))})}function fs(h,p,y,E){y.forEach(function(w){var A=E[w];p.forEach(function(D){var P=(function q(F,W){return ge(F,W)||(F=b(F))&&q(F,W)})(D,w);(!P||"value"in P&&P.value===void 0)&&(D===h.Transaction.prototype||D instanceof h.Transaction?le(D,w,{get:function(){return this.table(w)},set:function(q){$(this,w,{value:q,writable:!0,configurable:!0,enumerable:!0})}}):D[w]=new h.Table(w,A))})})}function Ri(h,p){p.forEach(function(y){for(var E in y)y[E]instanceof h.Table&&delete y[E]})}function wa(h,p){return h._cfg.version-p._cfg.version}function Ii(h,p,y,E){var w=h._dbSchema;y.objectStoreNames.contains("$meta")&&!w.$meta&&(w.$meta=Qi("$meta",Do("")[0],[]),h._storeNames.push("$meta"));var A=h._createTransaction("readwrite",h._storeNames,w);A.create(y),A._completion.catch(E);var D=A._reject.bind(A),P=ke.transless||ke;Ut(function(){return ke.trans=A,ke.transless=P,p!==0?(ci(h,y),F=p,((q=A).storeNames.includes("$meta")?q.table("$meta").get("version").then(function(W){return W??F}):xe.resolve(F)).then(function(W){return Z=W,K=A,Q=y,X=[],W=(U=h)._versions,J=U._dbSchema=Oi(0,U.idbdb,Q),(W=W.filter(function(ne){return ne._cfg.version>=Z})).length!==0?(W.forEach(function(ne){X.push(function(){var se=J,fe=ne._cfg.dbschema;ds(U,se,Q),ds(U,fe,Q),J=U._dbSchema=fe;var ye=zs(se,fe);ye.add.forEach(function(De){Ji(Q,De[0],De[1].primKey,De[1].indexes)}),ye.change.forEach(function(De){if(De.recreate)throw new Me.Upgrade("Not yet support for changing primary key");var Se=Q.objectStore(De.name);De.add.forEach(function(je){return Bs(Se,je)}),De.change.forEach(function(je){Se.deleteIndex(je.name),Bs(Se,je)}),De.del.forEach(function(je){return Se.deleteIndex(je)})});var we=ne._cfg.contentUpgrade;if(we&&ne._cfg.version>Z){ci(U,Q),K._memoizedTables={};var Ne=M(fe);ye.del.forEach(function(De){Ne[De]=se[De]}),Ri(U,[U.Transaction.prototype]),fs(U,[U.Transaction.prototype],d(Ne),Ne),K.schema=Ne;var Te,Ce=H(we);return Ce&&$t(),ye=xe.follow(function(){var De;(Te=we(K))&&Ce&&(De=Ln.bind(null,null),Te.then(De,De))}),Te&&typeof Te.then=="function"?xe.resolve(Te):ye.then(function(){return Te})}}),X.push(function(se){var fe,ye,we=ne._cfg.dbschema;fe=we,ye=se,[].slice.call(ye.db.objectStoreNames).forEach(function(Ne){return fe[Ne]==null&&ye.db.deleteObjectStore(Ne)}),Ri(U,[U.Transaction.prototype]),fs(U,[U.Transaction.prototype],U._storeNames,U._dbSchema),K.schema=U._dbSchema}),X.push(function(se){U.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(U.idbdb.version/10)===ne._cfg.version?(U.idbdb.deleteObjectStore("$meta"),delete U._dbSchema.$meta,U._storeNames=U._storeNames.filter(function(fe){return fe!=="$meta"})):se.objectStore("$meta").put(ne._cfg.version,"version"))})}),(function ne(){return X.length?xe.resolve(X.shift()(K.idbtrans)).then(ne):xe.resolve()})().then(function(){Oo(J,Q)})):xe.resolve();var U,Z,K,Q,X,J}).catch(D)):(d(w).forEach(function(W){Ji(y,W,w[W].primKey,w[W].indexes)}),ci(h,y),void xe.follow(function(){return h.on.populate.fire(A)}).catch(D));var q,F})}function Aa(h,p){Oo(h._dbSchema,p),p.db.version%10!=0||p.objectStoreNames.contains("$meta")||p.db.createObjectStore("$meta").add(Math.ceil(p.db.version/10-1),"version");var y=Oi(0,h.idbdb,p);ds(h,h._dbSchema,p);for(var E=0,w=zs(y,h._dbSchema).change;E<w.length;E++){var A=(function(D){if(D.change.length||D.recreate)return console.warn("Unable to patch indexes of table ".concat(D.name," because it has changes on the type of index or primary key.")),{value:void 0};var P=p.objectStore(D.name);D.add.forEach(function(q){jn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(D.name,".").concat(q.src)),Bs(P,q)})})(w[E]);if(typeof A=="object")return A.value}}function zs(h,p){var y,E={del:[],add:[],change:[]};for(y in h)p[y]||E.del.push(y);for(y in p){var w=h[y],A=p[y];if(w){var D={name:y,def:A,recreate:!1,del:[],add:[],change:[]};if(""+(w.primKey.keyPath||"")!=""+(A.primKey.keyPath||"")||w.primKey.auto!==A.primKey.auto)D.recreate=!0,E.change.push(D);else{var P=w.idxByName,q=A.idxByName,F=void 0;for(F in P)q[F]||D.del.push(F);for(F in q){var W=P[F],U=q[F];W?W.src!==U.src&&D.change.push(U):D.add.push(U)}(0<D.del.length||0<D.add.length||0<D.change.length)&&E.change.push(D)}}else E.add.push([y,A])}return E}function Ji(h,p,y,E){var w=h.db.createObjectStore(p,y.keyPath?{keyPath:y.keyPath,autoIncrement:y.auto}:{autoIncrement:y.auto});return E.forEach(function(A){return Bs(w,A)}),w}function Oo(h,p){d(h).forEach(function(y){p.db.objectStoreNames.contains(y)||(jn&&console.debug("Dexie: Creating missing table",y),Ji(p,y,h[y].primKey,h[y].indexes))})}function Bs(h,p){h.createIndex(p.name,p.keyPath,{unique:p.unique,multiEntry:p.multi})}function Oi(h,p,y){var E={};return Fe(p.objectStoreNames,0).forEach(function(w){for(var A=y.objectStore(w),D=Lr(Sa(F=A.keyPath),F||"",!0,!1,!!A.autoIncrement,F&&typeof F!="string",!0),P=[],q=0;q<A.indexNames.length;++q){var W=A.index(A.indexNames[q]),F=W.keyPath,W=Lr(W.name,F,!!W.unique,!!W.multiEntry,!1,F&&typeof F!="string",!1);P.push(W)}E[w]=Qi(w,D,P)}),E}function ds(h,p,y){for(var E=y.db.objectStoreNames,w=0;w<E.length;++w){var A=E[w],D=y.objectStore(A);h._hasGetAll="getAll"in D;for(var P=0;P<D.indexNames.length;++P){var q=D.indexNames[P],F=D.index(q).keyPath,W=typeof F=="string"?F:"["+Fe(F).join("+")+"]";!p[A]||(F=p[A].idxByName[W])&&(F.name=q,delete p[A].idxByName[W],p[A].idxByName[q]=F)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(h._hasGetAll=!1)}function Do(h){return h.split(",").map(function(p,y){var A=p.split(":"),E=(w=A[1])===null||w===void 0?void 0:w.trim(),w=(p=A[0].trim()).replace(/([&*]|\+\+)/g,""),A=/^\[/.test(w)?w.match(/^\[(.*)\]$/)[1].split("+"):w;return Lr(w,A||null,/\&/.test(p),/\*/.test(p),/\+\+/.test(p),g(A),y===0,E)})}var Ca=(Zi.prototype._createTableSchema=Qi,Zi.prototype._parseIndexSyntax=Do,Zi.prototype._parseStoresSpec=function(h,p){var y=this;d(h).forEach(function(E){if(h[E]!==null){var w=y._parseIndexSyntax(h[E]),A=w.shift();if(!A)throw new Me.Schema("Invalid schema for table "+E+": "+h[E]);if(A.unique=!0,A.multi)throw new Me.Schema("Primary key cannot be multiEntry*");w.forEach(function(D){if(D.auto)throw new Me.Schema("Only primary key can be marked as autoIncrement (++)");if(!D.keyPath)throw new Me.Schema("Index must have a name and cannot be an empty string")}),w=y._createTableSchema(E,A,w),p[E]=w}})},Zi.prototype.stores=function(y){var p=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,y):y;var y=p._versions,E={},w={};return y.forEach(function(A){_(E,A._cfg.storesSource),w=A._cfg.dbschema={},A._parseStoresSpec(E,w)}),p._dbSchema=w,Ri(p,[p._allTables,p,p.Transaction.prototype]),fs(p,[p._allTables,p,p.Transaction.prototype,this._cfg.tables],d(w),w),p._storeNames=d(w),this},Zi.prototype.upgrade=function(h){return this._cfg.contentUpgrade=sn(this._cfg.contentUpgrade||xt,h),this},Zi);function Zi(){}function xa(h,p){var y=h._dbNamesDB;return y||(y=h._dbNamesDB=new Ni(us,{addons:[],indexedDB:h,IDBKeyRange:p})).version(1).stores({dbnames:"name"}),y.table("dbnames")}function Ur(h){return h&&typeof h.databases=="function"}function Ra(h){return Ut(function(){return ke.letThrough=!0,h()})}function Ia(h){return!("from"in h)}var Sn=function(h,p){if(!this){var y=new Sn;return h&&"d"in h&&_(y,h),y}_(this,arguments.length?{d:1,from:h,to:1<arguments.length?p:h}:{d:0})};function ps(h,p,y){var E=ht(p,y);if(!isNaN(E)){if(0<E)throw RangeError();if(Ia(h))return _(h,{from:p,to:y,d:1});var w=h.l,E=h.r;if(ht(y,h.from)<0)return w?ps(w,p,y):h.l={from:p,to:y,d:1,l:null,r:null},No(h);if(0<ht(p,h.to))return E?ps(E,p,y):h.r={from:p,to:y,d:1,l:null,r:null},No(h);ht(p,h.from)<0&&(h.from=p,h.l=null,h.d=E?E.d+1:1),0<ht(y,h.to)&&(h.to=y,h.r=null,h.d=h.l?h.l.d+1:1),y=!h.r,w&&!h.l&&zr(h,w),E&&y&&zr(h,E)}}function zr(h,p){Ia(p)||(function y(E,q){var A=q.from,D=q.to,P=q.l,q=q.r;ps(E,A,D),P&&y(E,P),q&&y(E,q)})(h,p)}function Yn(h,p){var y=qs(p),E=y.next();if(E.done)return!1;for(var w=E.value,A=qs(h),D=A.next(w.from),P=D.value;!E.done&&!D.done;){if(ht(P.from,w.to)<=0&&0<=ht(P.to,w.from))return!0;ht(w.from,P.from)<0?w=(E=y.next(P.from)).value:P=(D=A.next(w.from)).value}return!1}function qs(h){var p=Ia(h)?null:{s:0,n:h};return{next:function(y){for(var E=0<arguments.length;p;)switch(p.s){case 0:if(p.s=1,E)for(;p.n.l&&ht(y,p.n.from)<0;)p={up:p,n:p.n.l,s:1};else for(;p.n.l;)p={up:p,n:p.n.l,s:1};case 1:if(p.s=2,!E||ht(y,p.n.to)<=0)return{value:p.n,done:!1};case 2:if(p.n.r){p.s=3,p={up:p,n:p.n.r,s:0};continue}case 3:p=p.up}return{done:!0}}}}function No(h){var p,y,E=(((p=h.r)===null||p===void 0?void 0:p.d)||0)-(((y=h.l)===null||y===void 0?void 0:y.d)||0),w=1<E?"r":E<-1?"l":"";w&&(p=w=="r"?"l":"r",y=s({},h),E=h[w],h.from=E.from,h.to=E.to,h[w]=E[w],y[w]=E[p],(h[p]=y).d=Di(y)),h.d=Di(h)}function Di(y){var p=y.r,y=y.l;return(p?y?Math.max(p.d,y.d):p.d:y?y.d:0)+1}function c(h,p){return d(p).forEach(function(y){h[y]?zr(h[y],p[y]):h[y]=(function E(w){var A,D,P={};for(A in w)I(w,A)&&(D=w[A],P[A]=!D||typeof D!="object"||B.has(D.constructor)?D:E(D));return P})(p[y])}),h}function v(h,p){return h.all||p.all||Object.keys(h).some(function(y){return p[y]&&Yn(p[y],h[y])})}k(Sn.prototype,((Ar={add:function(h){return zr(this,h),this},addKey:function(h){return ps(this,h,h),this},addKeys:function(h){var p=this;return h.forEach(function(y){return ps(p,y,y)}),this},hasKey:function(h){var p=qs(this).next(h).value;return p&&ht(p.from,h)<=0&&0<=ht(p.to,h)}})[ce]=function(){return qs(this)},Ar));var S={},O={},te=!1;function oe(h){c(O,h),te||(te=!0,setTimeout(function(){te=!1,Ae(O,!(O={}))},0))}function Ae(h,p){p===void 0&&(p=!1);var y=new Set;if(h.all)for(var E=0,w=Object.values(S);E<w.length;E++)ot(D=w[E],h,y,p);else for(var A in h){var D,P=/^idb\:\/\/(.*)\/(.*)\//.exec(A);P&&(A=P[1],P=P[2],(D=S["idb://".concat(A,"/").concat(P)])&&ot(D,h,y,p))}y.forEach(function(q){return q()})}function ot(h,p,y,E){for(var w=[],A=0,D=Object.entries(h.queries.query);A<D.length;A++){for(var P=D[A],q=P[0],F=[],W=0,U=P[1];W<U.length;W++){var Z=U[W];v(p,Z.obsSet)?Z.subscribers.forEach(function(J){return y.add(J)}):E&&F.push(Z)}E&&w.push([q,F])}if(E)for(var K=0,Q=w;K<Q.length;K++){var X=Q[K],q=X[0],F=X[1];h.queries.query[q]=F}}function hn(h){var p=h._state,y=h._deps.indexedDB;if(p.isBeingOpened||h.idbdb)return p.dbReadyPromise.then(function(){return p.dbOpenError?Ot(p.dbOpenError):h});p.isBeingOpened=!0,p.dbOpenError=null,p.openComplete=!1;var E=p.openCanceller,w=Math.round(10*h.verno),A=!1;function D(){if(p.openCanceller!==E)throw new Me.DatabaseClosed("db.open() was cancelled")}function P(){return new xe(function(Z,K){if(D(),!y)throw new Me.MissingAPI;var Q=h.name,X=p.autoSchema||!w?y.open(Q):y.open(Q,w);if(!X)throw new Me.MissingAPI;X.onerror=Gn(K),X.onblocked=Pt(h._fireOnBlocked),X.onupgradeneeded=Pt(function(J){var ne;W=X.transaction,p.autoSchema&&!h._options.allowEmptyDB?(X.onerror=Ai,W.abort(),X.result.close(),(ne=y.deleteDatabase(Q)).onsuccess=ne.onerror=Pt(function(){K(new Me.NoSuchDatabase("Database ".concat(Q," doesnt exist")))})):(W.onerror=Gn(K),J=J.oldVersion>Math.pow(2,62)?0:J.oldVersion,U=J<1,h.idbdb=X.result,A&&Aa(h,W),Ii(h,J/10,W,K))},K),X.onsuccess=Pt(function(){W=null;var J,ne,se,fe,ye,we=h.idbdb=X.result,Ne=Fe(we.objectStoreNames);if(0<Ne.length)try{var Te=we.transaction((fe=Ne).length===1?fe[0]:fe,"readonly");if(p.autoSchema)ne=we,se=Te,(J=h).verno=ne.version/10,se=J._dbSchema=Oi(0,ne,se),J._storeNames=Fe(ne.objectStoreNames,0),fs(J,[J._allTables],d(se),se);else if(ds(h,h._dbSchema,Te),((ye=zs(Oi(0,(ye=h).idbdb,Te),ye._dbSchema)).add.length||ye.change.some(function(Ce){return Ce.add.length||Ce.change.length}))&&!A)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),we.close(),w=we.version+1,A=!0,Z(P());ci(h,Te)}catch{}wi.push(h),we.onversionchange=Pt(function(Ce){p.vcFired=!0,h.on("versionchange").fire(Ce)}),we.onclose=Pt(function(){h.close({disableAutoOpen:!1})}),U&&(ye=h._deps,Te=Q,we=ye.indexedDB,ye=ye.IDBKeyRange,Ur(we)||Te===us||xa(we,ye).put({name:Te}).catch(xt)),Z()},K)}).catch(function(Z){switch(Z?.name){case"UnknownError":if(0<p.PR1398_maxLoop)return p.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),P();break;case"VersionError":if(0<w)return w=0,P()}return xe.reject(Z)})}var q,F=p.dbReadyResolve,W=null,U=!1;return xe.race([E,(typeof navigator>"u"?xe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Z){function K(){return indexedDB.databases().finally(Z)}q=setInterval(K,100),K()}).finally(function(){return clearInterval(q)}):Promise.resolve()).then(P)]).then(function(){return D(),p.onReadyBeingFired=[],xe.resolve(Ra(function(){return h.on.ready.fire(h.vip)})).then(function Z(){if(0<p.onReadyBeingFired.length){var K=p.onReadyBeingFired.reduce(sn,xt);return p.onReadyBeingFired=[],xe.resolve(Ra(function(){return K(h.vip)})).then(Z)}})}).finally(function(){p.openCanceller===E&&(p.onReadyBeingFired=null,p.isBeingOpened=!1)}).catch(function(Z){p.dbOpenError=Z;try{W&&W.abort()}catch{}return E===p.openCanceller&&h._close(),Ot(Z)}).finally(function(){p.openComplete=!0,F()}).then(function(){var Z;return U&&(Z={},h.tables.forEach(function(K){K.schema.indexes.forEach(function(Q){Q.name&&(Z["idb://".concat(h.name,"/").concat(K.name,"/").concat(Q.name)]=new Sn(-1/0,[[[]]]))}),Z["idb://".concat(h.name,"/").concat(K.name,"/")]=Z["idb://".concat(h.name,"/").concat(K.name,"/:dels")]=new Sn(-1/0,[[[]]])}),Tn(jr).fire(Z),Ae(Z,!0)),h})}function Rt(h){function p(A){return h.next(A)}var y=w(p),E=w(function(A){return h.throw(A)});function w(A){return function(q){var P=A(q),q=P.value;return P.done?q:q&&typeof q.then=="function"?q.then(y,E):g(q)?Promise.all(q).then(y,E):y(q)}}return w(p)()}function Bt(h,p,y){for(var E=g(h)?h.slice():[h],w=0;w<y;++w)E.push(p);return E}var Br={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(h){return s(s({},h),{table:function(p){var y=h.table(p),E=y.schema,w={},A=[];function D(U,Z,K){var Q=cn(U),X=w[Q]=w[Q]||[],J=U==null?0:typeof U=="string"?1:U.length,ne=0<Z,ne=s(s({},K),{name:ne?"".concat(Q,"(virtual-from:").concat(K.name,")"):K.name,lowLevelIndex:K,isVirtual:ne,keyTail:Z,keyLength:J,extractKey:Xi(U),unique:!ne&&K.unique});return X.push(ne),ne.isPrimaryKey||A.push(ne),1<J&&D(J===2?U[0]:U.slice(0,J-1),Z+1,K),X.sort(function(se,fe){return se.keyTail-fe.keyTail}),ne}p=D(E.primaryKey.keyPath,0,E.primaryKey),w[":id"]=[p];for(var P=0,q=E.indexes;P<q.length;P++){var F=q[P];D(F.keyPath,0,F)}function W(U){var Z,K=U.query.index;return K.isVirtual?s(s({},U),{query:{index:K.lowLevelIndex,range:(Z=U.query.range,K=K.keyTail,{type:Z.type===1?2:Z.type,lower:Bt(Z.lower,Z.lowerOpen?h.MAX_KEY:h.MIN_KEY,K),lowerOpen:!0,upper:Bt(Z.upper,Z.upperOpen?h.MIN_KEY:h.MAX_KEY,K),upperOpen:!0})}}):U}return s(s({},y),{schema:s(s({},E),{primaryKey:p,indexes:A,getIndexByKeyPath:function(U){return(U=w[cn(U)])&&U[0]}}),count:function(U){return y.count(W(U))},query:function(U){return y.query(W(U))},openCursor:function(U){var Z=U.query.index,K=Z.keyTail,Q=Z.isVirtual,X=Z.keyLength;return Q?y.openCursor(W(U)).then(function(ne){return ne&&J(ne)}):y.openCursor(U);function J(ne){return Object.create(ne,{continue:{value:function(se){se!=null?ne.continue(Bt(se,U.reverse?h.MAX_KEY:h.MIN_KEY,K)):U.unique?ne.continue(ne.key.slice(0,X).concat(U.reverse?h.MIN_KEY:h.MAX_KEY,K)):ne.continue()}},continuePrimaryKey:{value:function(se,fe){ne.continuePrimaryKey(Bt(se,h.MAX_KEY,K),fe)}},primaryKey:{get:function(){return ne.primaryKey}},key:{get:function(){var se=ne.key;return X===1?se[0]:se.slice(0,X)}},value:{get:function(){return ne.value}}})}}})}})}};function qr(h,p,y,E){return y=y||{},E=E||"",d(h).forEach(function(w){var A,D,P;I(p,w)?(A=h[w],D=p[w],typeof A=="object"&&typeof D=="object"&&A&&D?(P=Lt(A))!==Lt(D)?y[E+w]=p[w]:P==="Object"?qr(A,D,y,E+w+"."):A!==D&&(y[E+w]=p[w]):A!==D&&(y[E+w]=p[w])):y[E+w]=void 0}),d(p).forEach(function(w){I(h,w)||(y[E+w]=p[w])}),y}function wr(h,p){return p.type==="delete"?p.keys:p.keys||p.values.map(h.extractKey)}var hi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(h){return s(s({},h),{table:function(p){var y=h.table(p),E=y.schema.primaryKey;return s(s({},y),{mutate:function(w){var A=ke.trans,D=A.table(p).hook,P=D.deleting,q=D.creating,F=D.updating;switch(w.type){case"add":if(q.fire===xt)break;return A._promise("readwrite",function(){return W(w)},!0);case"put":if(q.fire===xt&&F.fire===xt)break;return A._promise("readwrite",function(){return W(w)},!0);case"delete":if(P.fire===xt)break;return A._promise("readwrite",function(){return W(w)},!0);case"deleteRange":if(P.fire===xt)break;return A._promise("readwrite",function(){return(function U(Z,K,Q){return y.query({trans:Z,values:!1,query:{index:E,range:K},limit:Q}).then(function(X){var J=X.result;return W({type:"delete",keys:J,trans:Z}).then(function(ne){return 0<ne.numFailures?Promise.reject(ne.failures[0]):J.length<Q?{failures:[],numFailures:0,lastResult:void 0}:U(Z,s(s({},K),{lower:J[J.length-1],lowerOpen:!0}),Q)})})})(w.trans,w.range,1e4)},!0)}return y.mutate(w);function W(U){var Z,K,Q,X=ke.trans,J=U.keys||wr(E,U);if(!J)throw new Error("Keys missing");return(U=U.type==="add"||U.type==="put"?s(s({},U),{keys:J}):s({},U)).type!=="delete"&&(U.values=o([],U.values)),U.keys&&(U.keys=o([],U.keys)),Z=y,Q=J,((K=U).type==="add"?Promise.resolve([]):Z.getMany({trans:K.trans,keys:Q,cache:"immutable"})).then(function(ne){var se=J.map(function(fe,ye){var we,Ne,Te,Ce=ne[ye],De={onerror:null,onsuccess:null};return U.type==="delete"?P.fire.call(De,fe,Ce,X):U.type==="add"||Ce===void 0?(we=q.fire.call(De,fe,U.values[ye],X),fe==null&&we!=null&&(U.keys[ye]=fe=we,E.outbound||V(U.values[ye],E.keyPath,fe))):(we=qr(Ce,U.values[ye]),(Ne=F.fire.call(De,we,fe,Ce,X))&&(Te=U.values[ye],Object.keys(Ne).forEach(function(Se){I(Te,Se)?Te[Se]=Ne[Se]:V(Te,Se,Ne[Se])}))),De});return y.mutate(U).then(function(fe){for(var ye=fe.failures,we=fe.results,Ne=fe.numFailures,fe=fe.lastResult,Te=0;Te<J.length;++Te){var Ce=(we||J)[Te],De=se[Te];Ce==null?De.onerror&&De.onerror(ye[Te]):De.onsuccess&&De.onsuccess(U.type==="put"&&ne[Te]?U.values[Te]:Ce)}return{failures:ye,results:we,numFailures:Ne,lastResult:fe}}).catch(function(fe){return se.forEach(function(ye){return ye.onerror&&ye.onerror(fe)}),Promise.reject(fe)})})}}})}})}};function ms(h,p,y){try{if(!p||p.keys.length<h.length)return null;for(var E=[],w=0,A=0;w<p.keys.length&&A<h.length;++w)ht(p.keys[w],h[A])===0&&(E.push(y?N(p.values[w]):p.values[w]),++A);return E.length===h.length?E:null}catch{return null}}var Oa={stack:"dbcore",level:-1,create:function(h){return{table:function(p){var y=h.table(p);return s(s({},y),{getMany:function(E){if(!E.cache)return y.getMany(E);var w=ms(E.keys,E.trans._cache,E.cache==="clone");return w?xe.resolve(w):y.getMany(E).then(function(A){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?N(A):A},A})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),y.mutate(E)}})}}}};function Hs(h,p){return h.trans.mode==="readonly"&&!!h.subscr&&!h.trans.explicit&&h.trans.db._options.cache!=="disabled"&&!p.schema.primaryKey.outbound}function Nc(h,p){switch(h){case"query":return p.values&&!p.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Qf={stack:"dbcore",level:0,name:"Observability",create:function(h){var p=h.schema.name,y=new Sn(h.MIN_KEY,h.MAX_KEY);return s(s({},h),{transaction:function(E,w,A){if(ke.subscr&&w!=="readonly")throw new Me.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ke.querier));return h.transaction(E,w,A)},table:function(E){var w=h.table(E),A=w.schema,D=A.primaryKey,U=A.indexes,P=D.extractKey,q=D.outbound,F=D.autoIncrement&&U.filter(function(K){return K.compound&&K.keyPath.includes(D.keyPath)}),W=s(s({},w),{mutate:function(K){function Q(Se){return Se="idb://".concat(p,"/").concat(E,"/").concat(Se),fe[Se]||(fe[Se]=new Sn)}var X,J,ne,se=K.trans,fe=K.mutatedParts||(K.mutatedParts={}),ye=Q(""),we=Q(":dels"),Ne=K.type,De=K.type==="deleteRange"?[K.range]:K.type==="delete"?[K.keys]:K.values.length<50?[wr(D,K).filter(function(Se){return Se}),K.values]:[],Te=De[0],Ce=De[1],De=K.trans._cache;return g(Te)?(ye.addKeys(Te),(De=Ne==="delete"||Te.length===Ce.length?ms(Te,De):null)||we.addKeys(Te),(De||Ce)&&(X=Q,J=De,ne=Ce,A.indexes.forEach(function(Se){var je=X(Se.name||"");function Ye(ft){return ft!=null?Se.extractKey(ft):null}function st(ft){return Se.multiEntry&&g(ft)?ft.forEach(function(Qn){return je.addKey(Qn)}):je.addKey(ft)}(J||ne).forEach(function(ft,In){var nt=J&&Ye(J[In]),In=ne&&Ye(ne[In]);ht(nt,In)!==0&&(nt!=null&&st(nt),In!=null&&st(In))})}))):Te?(Ce={from:(Ce=Te.lower)!==null&&Ce!==void 0?Ce:h.MIN_KEY,to:(Ce=Te.upper)!==null&&Ce!==void 0?Ce:h.MAX_KEY},we.add(Ce),ye.add(Ce)):(ye.add(y),we.add(y),A.indexes.forEach(function(Se){return Q(Se.name).add(y)})),w.mutate(K).then(function(Se){return!Te||K.type!=="add"&&K.type!=="put"||(ye.addKeys(Se.results),F&&F.forEach(function(je){for(var Ye=K.values.map(function(nt){return je.extractKey(nt)}),st=je.keyPath.findIndex(function(nt){return nt===D.keyPath}),ft=0,Qn=Se.results.length;ft<Qn;++ft)Ye[ft][st]=Se.results[ft];Q(je.name).addKeys(Ye)})),se.mutatedParts=c(se.mutatedParts||{},fe),Se})}}),U=function(Q){var X=Q.query,Q=X.index,X=X.range;return[Q,new Sn((Q=X.lower)!==null&&Q!==void 0?Q:h.MIN_KEY,(X=X.upper)!==null&&X!==void 0?X:h.MAX_KEY)]},Z={get:function(K){return[D,new Sn(K.key)]},getMany:function(K){return[D,new Sn().addKeys(K.keys)]},count:U,query:U,openCursor:U};return d(Z).forEach(function(K){W[K]=function(Q){var X=ke.subscr,J=!!X,ne=Hs(ke,w)&&Nc(K,Q)?Q.obsSet={}:X;if(J){var se=function(Ce){return Ce="idb://".concat(p,"/").concat(E,"/").concat(Ce),ne[Ce]||(ne[Ce]=new Sn)},fe=se(""),ye=se(":dels"),X=Z[K](Q),J=X[0],X=X[1];if((K==="query"&&J.isPrimaryKey&&!Q.values?ye:se(J.name||"")).add(X),!J.isPrimaryKey){if(K!=="count"){var we=K==="query"&&q&&Q.values&&w.query(s(s({},Q),{values:!1}));return w[K].apply(this,arguments).then(function(Ce){if(K==="query"){if(q&&Q.values)return we.then(function(Ye){return Ye=Ye.result,fe.addKeys(Ye),Ce});var De=Q.values?Ce.result.map(P):Ce.result;(Q.values?fe:ye).addKeys(De)}else if(K==="openCursor"){var Se=Ce,je=Q.values;return Se&&Object.create(Se,{key:{get:function(){return ye.addKey(Se.primaryKey),Se.key}},primaryKey:{get:function(){var Ye=Se.primaryKey;return ye.addKey(Ye),Ye}},value:{get:function(){return je&&fe.addKey(Se.primaryKey),Se.value}}})}return Ce})}ye.add(y)}}return w[K].apply(this,arguments)}}),W}})}};function kc(h,p,y){if(y.numFailures===0)return p;if(p.type==="deleteRange")return null;var E=p.keys?p.keys.length:"values"in p&&p.values?p.values.length:1;return y.numFailures===E?null:(p=s({},p),g(p.keys)&&(p.keys=p.keys.filter(function(w,A){return!(A in y.failures)})),"values"in p&&g(p.values)&&(p.values=p.values.filter(function(w,A){return!(A in y.failures)})),p)}function dl(h,p){return y=h,((E=p).lower===void 0||(E.lowerOpen?0<ht(y,E.lower):0<=ht(y,E.lower)))&&(h=h,(p=p).upper===void 0||(p.upperOpen?ht(h,p.upper)<0:ht(h,p.upper)<=0));var y,E}function fu(h,p,Z,E,w,A){if(!Z||Z.length===0)return h;var D=p.query.index,P=D.multiEntry,q=p.query.range,F=E.schema.primaryKey.extractKey,W=D.extractKey,U=(D.lowLevelIndex||D).extractKey,Z=Z.reduce(function(K,Q){var X=K,J=[];if(Q.type==="add"||Q.type==="put")for(var ne=new Sn,se=Q.values.length-1;0<=se;--se){var fe,ye=Q.values[se],we=F(ye);ne.hasKey(we)||(fe=W(ye),(P&&g(fe)?fe.some(function(Se){return dl(Se,q)}):dl(fe,q))&&(ne.addKey(we),J.push(ye)))}switch(Q.type){case"add":var Ne=new Sn().addKeys(p.values?K.map(function(je){return F(je)}):K),X=K.concat(p.values?J.filter(function(je){return je=F(je),!Ne.hasKey(je)&&(Ne.addKey(je),!0)}):J.map(function(je){return F(je)}).filter(function(je){return!Ne.hasKey(je)&&(Ne.addKey(je),!0)}));break;case"put":var Te=new Sn().addKeys(Q.values.map(function(je){return F(je)}));X=K.filter(function(je){return!Te.hasKey(p.values?F(je):je)}).concat(p.values?J:J.map(function(je){return F(je)}));break;case"delete":var Ce=new Sn().addKeys(Q.keys);X=K.filter(function(je){return!Ce.hasKey(p.values?F(je):je)});break;case"deleteRange":var De=Q.range;X=K.filter(function(je){return!dl(F(je),De)})}return X},h);return Z===h?h:(Z.sort(function(K,Q){return ht(U(K),U(Q))||ht(F(K),F(Q))}),p.limit&&p.limit<1/0&&(Z.length>p.limit?Z.length=p.limit:h.length===p.limit&&Z.length<p.limit&&(w.dirty=!0)),A?Object.freeze(Z):Z)}function Da(h,p){return ht(h.lower,p.lower)===0&&ht(h.upper,p.upper)===0&&!!h.lowerOpen==!!p.lowerOpen&&!!h.upperOpen==!!p.upperOpen}function ko(h,p){return(function(y,E,w,A){if(y===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=ht(y,E))===0){if(w&&A)return 0;if(w)return 1;if(A)return-1}return E})(h.lower,p.lower,h.lowerOpen,p.lowerOpen)<=0&&0<=(function(y,E,w,A){if(y===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=ht(y,E))===0){if(w&&A)return 0;if(w)return-1;if(A)return 1}return E})(h.upper,p.upper,h.upperOpen,p.upperOpen)}function $f(h,p,y,E){h.subscribers.add(y),E.addEventListener("abort",function(){var w,A;h.subscribers.delete(y),h.subscribers.size===0&&(w=h,A=p,setTimeout(function(){w.subscribers.size===0&&qe(A,w)},3e3))})}var pl={stack:"dbcore",level:0,name:"Cache",create:function(h){var p=h.schema.name;return s(s({},h),{transaction:function(y,E,w){var A,D,P=h.transaction(y,E,w);return E==="readwrite"&&(D=(A=new AbortController).signal,w=function(q){return function(){if(A.abort(),E==="readwrite"){for(var F=new Set,W=0,U=y;W<U.length;W++){var Z=U[W],K=S["idb://".concat(p,"/").concat(Z)];if(K){var Q=h.table(Z),X=K.optimisticOps.filter(function(je){return je.trans===P});if(P._explicit&&q&&P.mutatedParts)for(var J=0,ne=Object.values(K.queries.query);J<ne.length;J++)for(var se=0,fe=(Ne=ne[J]).slice();se<fe.length;se++)v((Te=fe[se]).obsSet,P.mutatedParts)&&(qe(Ne,Te),Te.subscribers.forEach(function(je){return F.add(je)}));else if(0<X.length){K.optimisticOps=K.optimisticOps.filter(function(je){return je.trans!==P});for(var ye=0,we=Object.values(K.queries.query);ye<we.length;ye++)for(var Ne,Te,Ce,De=0,Se=(Ne=we[ye]).slice();De<Se.length;De++)(Te=Se[De]).res!=null&&P.mutatedParts&&(q&&!Te.dirty?(Ce=Object.isFrozen(Te.res),Ce=fu(Te.res,Te.req,X,Q,Te,Ce),Te.dirty?(qe(Ne,Te),Te.subscribers.forEach(function(je){return F.add(je)})):Ce!==Te.res&&(Te.res=Ce,Te.promise=xe.resolve({result:Ce}))):(Te.dirty&&qe(Ne,Te),Te.subscribers.forEach(function(je){return F.add(je)})))}}}F.forEach(function(je){return je()})}}},P.addEventListener("abort",w(!1),{signal:D}),P.addEventListener("error",w(!1),{signal:D}),P.addEventListener("complete",w(!0),{signal:D})),P},table:function(y){var E=h.table(y),w=E.schema.primaryKey;return s(s({},E),{mutate:function(A){var D=ke.trans;if(w.outbound||D.db._options.cache==="disabled"||D.explicit||D.idbtrans.mode!=="readwrite")return E.mutate(A);var P=S["idb://".concat(p,"/").concat(y)];return P?(D=E.mutate(A),A.type!=="add"&&A.type!=="put"||!(50<=A.values.length||wr(w,A).some(function(q){return q==null}))?(P.optimisticOps.push(A),A.mutatedParts&&oe(A.mutatedParts),D.then(function(q){0<q.numFailures&&(qe(P.optimisticOps,A),(q=kc(0,A,q))&&P.optimisticOps.push(q),A.mutatedParts&&oe(A.mutatedParts))}),D.catch(function(){qe(P.optimisticOps,A),A.mutatedParts&&oe(A.mutatedParts)})):D.then(function(q){var F=kc(0,s(s({},A),{values:A.values.map(function(W,U){var Z;return q.failures[U]?W:(W=(Z=w.keyPath)!==null&&Z!==void 0&&Z.includes(".")?N(W):s({},W),V(W,w.keyPath,q.results[U]),W)})}),q);P.optimisticOps.push(F),queueMicrotask(function(){return A.mutatedParts&&oe(A.mutatedParts)})}),D):E.mutate(A)},query:function(A){if(!Hs(ke,E)||!Nc("query",A))return E.query(A);var D=((F=ke.trans)===null||F===void 0?void 0:F.db._options.cache)==="immutable",U=ke,P=U.requery,q=U.signal,F=(function(Q,X,J,ne){var se=S["idb://".concat(Q,"/").concat(X)];if(!se)return[];if(!(X=se.queries[J]))return[null,!1,se,null];var fe=X[(ne.query?ne.query.index.name:null)||""];if(!fe)return[null,!1,se,null];switch(J){case"query":var ye=fe.find(function(we){return we.req.limit===ne.limit&&we.req.values===ne.values&&Da(we.req.query.range,ne.query.range)});return ye?[ye,!0,se,fe]:[fe.find(function(we){return("limit"in we.req?we.req.limit:1/0)>=ne.limit&&(!ne.values||we.req.values)&&ko(we.req.query.range,ne.query.range)}),!1,se,fe];case"count":return ye=fe.find(function(we){return Da(we.req.query.range,ne.query.range)}),[ye,!!ye,se,fe]}})(p,y,"query",A),W=F[0],U=F[1],Z=F[2],K=F[3];return W&&U?W.obsSet=A.obsSet:(U=E.query(A).then(function(Q){var X=Q.result;if(W&&(W.res=X),D){for(var J=0,ne=X.length;J<ne;++J)Object.freeze(X[J]);Object.freeze(X)}else Q.result=N(X);return Q}).catch(function(Q){return K&&W&&qe(K,W),Promise.reject(Q)}),W={obsSet:A.obsSet,promise:U,subscribers:new Set,type:"query",req:A,dirty:!1},K?K.push(W):(K=[W],(Z=Z||(S["idb://".concat(p,"/").concat(y)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[A.query.index.name||""]=K)),$f(W,K,P,q),W.promise.then(function(Q){return{result:fu(Q.result,A,Z?.optimisticOps,E,W,D)}})}})}})}};function Mo(h,p){return new Proxy(h,{get:function(y,E,w){return E==="db"?p:Reflect.get(y,E,w)}})}var Ni=(Xt.prototype.version=function(h){if(isNaN(h)||h<.1)throw new Me.Type("Given version is not a positive number");if(h=Math.round(10*h)/10,this.idbdb||this._state.isBeingOpened)throw new Me.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,h);var p=this._versions,y=p.filter(function(E){return E._cfg.version===h})[0];return y||(y=new this.Version(h),p.push(y),p.sort(wa),y.stores({}),this._state.autoSchema=!1,y)},Xt.prototype._whenReady=function(h){var p=this;return this.idbdb&&(this._state.openComplete||ke.letThrough||this._vip)?h():new xe(function(y,E){if(p._state.openComplete)return E(new Me.DatabaseClosed(p._state.dbOpenError));if(!p._state.isBeingOpened){if(!p._state.autoOpen)return void E(new Me.DatabaseClosed);p.open().catch(xt)}p._state.dbReadyPromise.then(y,E)}).then(h)},Xt.prototype.use=function(h){var p=h.stack,y=h.create,E=h.level,w=h.name;return w&&this.unuse({stack:p,name:w}),h=this._middlewares[p]||(this._middlewares[p]=[]),h.push({stack:p,create:y,level:E??10,name:w}),h.sort(function(A,D){return A.level-D.level}),this},Xt.prototype.unuse=function(h){var p=h.stack,y=h.name,E=h.create;return p&&this._middlewares[p]&&(this._middlewares[p]=this._middlewares[p].filter(function(w){return E?w.create!==E:!!y&&w.name!==y})),this},Xt.prototype.open=function(){var h=this;return Kn(bn,function(){return hn(h)})},Xt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var h=this._state,p=wi.indexOf(this);if(0<=p&&wi.splice(p,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}h.isBeingOpened||(h.dbReadyPromise=new xe(function(y){h.dbReadyResolve=y}),h.openCanceller=new xe(function(y,E){h.cancelOpen=E}))},Xt.prototype.close=function(y){var p=(y===void 0?{disableAutoOpen:!0}:y).disableAutoOpen,y=this._state;p?(y.isBeingOpened&&y.cancelOpen(new Me.DatabaseClosed),this._close(),y.autoOpen=!1,y.dbOpenError=new Me.DatabaseClosed):(this._close(),y.autoOpen=this._options.autoOpen||y.isBeingOpened,y.openComplete=!1,y.dbOpenError=null)},Xt.prototype.delete=function(h){var p=this;h===void 0&&(h={disableAutoOpen:!0});var y=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new xe(function(w,A){function D(){p.close(h);var P=p._deps.indexedDB.deleteDatabase(p.name);P.onsuccess=Pt(function(){var q,F,W;q=p._deps,F=p.name,W=q.indexedDB,q=q.IDBKeyRange,Ur(W)||F===us||xa(W,q).delete(F).catch(xt),w()}),P.onerror=Gn(A),P.onblocked=p._fireOnBlocked}if(y)throw new Me.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(D):D()})},Xt.prototype.backendDB=function(){return this.idbdb},Xt.prototype.isOpen=function(){return this.idbdb!==null},Xt.prototype.hasBeenClosed=function(){var h=this._state.dbOpenError;return h&&h.name==="DatabaseClosed"},Xt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Xt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Xt.prototype,"tables",{get:function(){var h=this;return d(this._allTables).map(function(p){return h._allTables[p]})},enumerable:!1,configurable:!0}),Xt.prototype.transaction=function(){var h=(function(p,y,E){var w=arguments.length;if(w<2)throw new Me.InvalidArgument("Too few arguments");for(var A=new Array(w-1);--w;)A[w-1]=arguments[w];return E=A.pop(),[p,Y(A),E]}).apply(this,arguments);return this._transaction.apply(this,h)},Xt.prototype._transaction=function(h,p,y){var E=this,w=ke.trans;w&&w.db===this&&h.indexOf("!")===-1||(w=null);var A,D,P=h.indexOf("?")!==-1;h=h.replace("!","").replace("?","");try{if(D=p.map(function(F){if(F=F instanceof E.Table?F.name:F,typeof F!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return F}),h=="r"||h===kr)A=kr;else{if(h!="rw"&&h!=Mr)throw new Me.InvalidArgument("Invalid transaction mode: "+h);A=Mr}if(w){if(w.mode===kr&&A===Mr){if(!P)throw new Me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");w=null}w&&D.forEach(function(F){if(w&&w.storeNames.indexOf(F)===-1){if(!P)throw new Me.SubTransaction("Table "+F+" not included in parent transaction.");w=null}}),P&&w&&!w.active&&(w=null)}}catch(F){return w?w._promise(null,function(W,U){U(F)}):Ot(F)}var q=(function F(W,U,Z,K,Q){return xe.resolve().then(function(){var X=ke.transless||ke,J=W._createTransaction(U,Z,W._dbSchema,K);if(J.explicit=!0,X={trans:J,transless:X},K)J.idbtrans=K.idbtrans;else try{J.create(),J.idbtrans._explicit=!0,W._state.PR1398_maxLoop=3}catch(fe){return fe.name===yt.InvalidState&&W.isOpen()&&0<--W._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),W.close({disableAutoOpen:!1}),W.open().then(function(){return F(W,U,Z,null,Q)})):Ot(fe)}var ne,se=H(Q);return se&&$t(),X=xe.follow(function(){var fe;(ne=Q.call(J,J))&&(se?(fe=Ln.bind(null,null),ne.then(fe,fe)):typeof ne.next=="function"&&typeof ne.throw=="function"&&(ne=Rt(ne)))},X),(ne&&typeof ne.then=="function"?xe.resolve(ne).then(function(fe){return J.active?fe:Ot(new Me.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):X.then(function(){return ne})).then(function(fe){return K&&J._resolve(),J._completion.then(function(){return fe})}).catch(function(fe){return J._reject(fe),Ot(fe)})})}).bind(null,this,A,D,w,y);return w?w._promise(A,q,"lock"):ke.trans?Kn(ke.transless,function(){return E._whenReady(q)}):this._whenReady(q)},Xt.prototype.table=function(h){if(!I(this._allTables,h))throw new Me.InvalidTable("Table ".concat(h," does not exist"));return this._allTables[h]},Xt);function Xt(h,p){var y=this;this._middlewares={},this.verno=0;var E=Xt.dependencies;this._options=p=s({addons:Xt.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},p),this._deps={indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},E=p.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var w,A,D,P,q,F={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:xt,dbReadyPromise:null,cancelOpen:xt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:p.autoOpen};F.dbReadyPromise=new xe(function(U){F.dbReadyResolve=U}),F.openCanceller=new xe(function(U,Z){F.cancelOpen=Z}),this._state=F,this.name=h,this.on=ii(this,"populate","blocked","versionchange","close",{ready:[sn,xt]}),this.once=function(U,Z){var K=function(){for(var Q=[],X=0;X<arguments.length;X++)Q[X]=arguments[X];y.on(U).unsubscribe(K),Z.apply(y,Q)};return y.on(U,K)},this.on.ready.subscribe=Pe(this.on.ready.subscribe,function(U){return function(Z,K){Xt.vip(function(){var Q,X=y._state;X.openComplete?(X.dbOpenError||xe.resolve().then(Z),K&&U(Z)):X.onReadyBeingFired?(X.onReadyBeingFired.push(Z),K&&U(Z)):(U(Z),Q=y,K||U(function J(){Q.on.ready.unsubscribe(Z),Q.on.ready.unsubscribe(J)}))})}}),this.Collection=(w=this,Rn(hl.prototype,function(ne,J){this.db=w;var K=va,Q=null;if(J)try{K=J()}catch(se){Q=se}var X=ne._ctx,J=X.table,ne=J.hook.reading.fire;this._ctx={table:J,index:X.index,isPrimKey:!X.index||J.schema.primKey.keyPath&&X.index===J.schema.primKey.name,range:K,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Q,or:X.or,valueMapper:ne!==_i?ne:null}})),this.Table=(A=this,Rn(hs.prototype,function(U,Z,K){this.db=A,this._tx=K,this.name=U,this.schema=Z,this.hook=A._allTables[U]?A._allTables[U].hook:ii(null,{creating:[Ds,xt],reading:[bi,_i],updating:[Ao,xt],deleting:[wo,xt]})})),this.Transaction=(D=this,Rn(Us.prototype,function(U,Z,K,Q,X){var J=this;U!=="readonly"&&Z.forEach(function(ne){ne=(ne=K[ne])===null||ne===void 0?void 0:ne.yProps,ne&&(Z=Z.concat(ne.map(function(se){return se.updatesTable})))}),this.db=D,this.mode=U,this.storeNames=Z,this.schema=K,this.chromeTransactionDurability=Q,this.idbtrans=null,this.on=ii(this,"complete","error","abort"),this.parent=X||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new xe(function(ne,se){J._resolve=ne,J._reject=se}),this._completion.then(function(){J.active=!1,J.on.complete.fire()},function(ne){var se=J.active;return J.active=!1,J.on.error.fire(ne),J.parent?J.parent._reject(ne):se&&J.idbtrans&&J.idbtrans.abort(),Ot(ne)})})),this.Version=(P=this,Rn(Ca.prototype,function(U){this.db=P,this._cfg={version:U,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(q=this,Rn(Yi.prototype,function(U,Z,K){if(this.db=q,this._ctx={table:U,index:Z===":id"?null:Z,or:K},this._cmp=this._ascending=ht,this._descending=function(Q,X){return ht(X,Q)},this._max=function(Q,X){return 0<ht(Q,X)?Q:X},this._min=function(Q,X){return ht(Q,X)<0?Q:X},this._IDBKeyRange=q._deps.IDBKeyRange,!this._IDBKeyRange)throw new Me.MissingAPI})),this.on("versionchange",function(U){0<U.newVersion?console.warn("Another connection wants to upgrade database '".concat(y.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(y.name,"'. Closing db now to resume the delete request.")),y.close({disableAutoOpen:!1})}),this.on("blocked",function(U){!U.newVersion||U.newVersion<U.oldVersion?console.warn("Dexie.delete('".concat(y.name,"') was blocked")):console.warn("Upgrade '".concat(y.name,"' blocked by other connection holding version ").concat(U.oldVersion/10))}),this._maxKey=$i(p.IDBKeyRange),this._createTransaction=function(U,Z,K,Q){return new y.Transaction(U,Z,K,y._options.chromeTransactionDurability,Q)},this._fireOnBlocked=function(U){y.on("blocked").fire(U),wi.filter(function(Z){return Z.name===y.name&&Z!==y&&!Z._state.vcFired}).map(function(Z){return Z.on("versionchange").fire(U)})},this.use(Oa),this.use(pl),this.use(Qf),this.use(Br),this.use(hi);var W=new Proxy(this,{get:function(U,Z,K){if(Z==="_vip")return!0;if(Z==="table")return function(X){return Mo(y.table(X),W)};var Q=Reflect.get(U,Z,K);return Q instanceof hs?Mo(Q,W):Z==="tables"?Q.map(function(X){return Mo(X,W)}):Z==="_createTransaction"?function(){return Mo(Q.apply(this,arguments),W)}:Q}});this.vip=W,E.forEach(function(U){return U(y)})}var Na,Ar=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Mc=(ml.prototype.subscribe=function(h,p,y){return this._subscribe(h&&typeof h!="function"?h:{next:h,error:p,complete:y})},ml.prototype[Ar]=function(){return this},ml);function ml(h){this._subscribe=h}try{Na={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Na={indexedDB:null,IDBKeyRange:null}}function Vc(h){var p,y=!1,E=new Mc(function(w){var A=H(h),D,P=!1,q={},F={},W={get closed(){return P},unsubscribe:function(){P||(P=!0,D&&D.abort(),U&&Tn.storagemutated.unsubscribe(K))}};w.start&&w.start(W);var U=!1,Z=function(){return Nr(Q)},K=function(X){c(q,X),v(F,q)&&Z()},Q=function(){var X,J,ne;!P&&Na.indexedDB&&(q={},X={},D&&D.abort(),D=new AbortController,ne=(function(se){var fe=Zn();try{A&&$t();var ye=Ut(h,se);return ye=A?ye.finally(Ln):ye}finally{fe&&Or()}})(J={subscr:X,signal:D.signal,requery:Z,querier:h,trans:null}),Promise.resolve(ne).then(function(se){y=!0,p=se,P||J.signal.aborted||(q={},(function(fe){for(var ye in fe)if(I(fe,ye))return;return 1})(F=X)||U||(Tn(jr,K),U=!0),Nr(function(){return!P&&w.next&&w.next(se)}))},function(se){y=!1,["DatabaseClosedError","AbortError"].includes(se?.name)||P||Nr(function(){P||w.error&&w.error(se)})}))};return setTimeout(Z,0),W});return E.hasValue=function(){return y},E.getValue=function(){return p},E}var Fs=Ni;function du(h){var p=gs;try{gs=!0,Tn.storagemutated.fire(h),Ae(h,!0)}finally{gs=p}}k(Fs,s(s({},Fi),{delete:function(h){return new Fs(h,{addons:[]}).delete()},exists:function(h){return new Fs(h,{addons:[]}).open().then(function(p){return p.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(h){try{return p=Fs.dependencies,y=p.indexedDB,p=p.IDBKeyRange,(Ur(y)?Promise.resolve(y.databases()).then(function(E){return E.map(function(w){return w.name}).filter(function(w){return w!==us})}):xa(y,p).toCollection().primaryKeys()).then(h)}catch{return Ot(new Me.MissingAPI)}var p,y},defineClass:function(){return function(h){_(this,h)}},ignoreTransaction:function(h){return ke.trans?Kn(ke.transless,h):h()},vip:Ra,async:function(h){return function(){try{var p=Rt(h.apply(this,arguments));return p&&typeof p.then=="function"?p:xe.resolve(p)}catch(y){return Ot(y)}}},spawn:function(h,p,y){try{var E=Rt(h.apply(y,p||[]));return E&&typeof E.then=="function"?E:xe.resolve(E)}catch(w){return Ot(w)}},currentTransaction:{get:function(){return ke.trans||null}},waitFor:function(h,p){return p=xe.resolve(typeof h=="function"?Fs.ignoreTransaction(h):h).timeout(p||6e4),ke.trans?ke.trans.waitFor(p):p},Promise:xe,debug:{get:function(){return jn},set:function(h){ul(h)}},derive:he,extend:_,props:k,override:Pe,Events:ii,on:Tn,liveQuery:Vc,extendObservabilitySet:c,getByKeyPath:Re,setByKeyPath:V,delByKeyPath:function(h,p){typeof p=="string"?V(h,p,void 0):"length"in p&&[].map.call(p,function(y){V(h,y,void 0)})},shallowClone:M,deepClone:N,getObjectDiff:qr,cmp:ht,asap:it,minKey:-1/0,addons:[],connections:wi,errnames:yt,dependencies:Na,cache:S,semVer:"4.2.1",version:"4.2.1".split(".").map(function(h){return parseInt(h)}).reduce(function(h,p,y){return h+p/Math.pow(10,2*y)})})),Fs.maxKey=$i(Fs.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Tn(jr,function(h){gs||(h=new CustomEvent(Sr,{detail:h}),gs=!0,dispatchEvent(h),gs=!1)}),addEventListener(Sr,function(h){h=h.detail,gs||du(h)}));var ka,gs=!1,dr=function(){};return typeof BroadcastChannel<"u"&&((dr=function(){(ka=new BroadcastChannel(Sr)).onmessage=function(h){return h.data&&du(h.data)}})(),typeof ka.unref=="function"&&ka.unref(),Tn(jr,function(h){gs||ka.postMessage(h)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(h){if(!Ni.disableBfCache&&h.persisted){jn&&console.debug("Dexie: handling persisted pagehide"),ka?.close();for(var p=0,y=wi;p<y.length;p++)y[p].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(h){!Ni.disableBfCache&&h.persisted&&(jn&&console.debug("Dexie: handling persisted pageshow"),dr(),du({all:new Sn(-1/0,[[]])}))})),xe.rejectionMapper=function(h,p){return!h||h instanceof Ie||h instanceof TypeError||h instanceof SyntaxError||!h.name||!as[h.name]?h:(p=new as[h.name](p||h.message,h),"stack"in h&&le(p,"stack",{get:function(){return this.inner.stack}}),p)},ul(jn),s(Ni,Object.freeze({__proto__:null,Dexie:Ni,liveQuery:Vc,Entity:Ro,cmp:ht,PropModification:Vr,replacePrefix:function(h,p){return new Vr({replacePrefix:[h,p]})},add:function(h){return new Vr({add:h})},remove:function(h){return new Vr({remove:h})},default:Ni,RangeSet:Sn,mergeRanges:zr,rangesOverlap:Yn}),{default:Ni}),Ni})})(Qh)),Qh.exports}var zS=US();const em=xm(zS),k_=Symbol.for("Dexie"),lf=globalThis[k_]||(globalThis[k_]=em);if(em.semVer!==lf.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${em.semVer} and ${lf.semVer}`);const{liveQuery:fN,mergeRanges:dN,rangesOverlap:pN,RangeSet:mN,cmp:gN,Entity:yN,PropModification:vN,replacePrefix:_N,add:bN,remove:EN,DexieYProvider:TN}=lf,Yt=new lf("GeminiPodcastFlashcards");Yt.version(1).stores({vocab:"id, word, status, nextReview, reviewCount, updatedAt"});Yt.version(2).stores({vocab:"id, word, status, nextReview, reviewCount, updatedAt"});Yt.version(3).stores({vocab:"id, word, status, nextReview, reviewCount, updatedAt",study_logs:"++id, cardId, grade, reviewTime, [cardId+reviewTime]"});async function BS(){if(await Yt.vocab.count()===0)try{const n="/public/flashcards/data.json".replace("//","/");console.log(`Fetching data from: ${n}`);const s=await fetch(n);if(!s.ok)throw new Error(`Failed to fetch data.json (${s.status})`);const u=(await s.json()).map(d=>({...d,status:d.status||"new",reviewCount:d.reviewCount||0,nextReview:d.nextReview||Date.now(),updatedAt:Date.now(),id:d.id||crypto.randomUUID()}));await Yt.vocab.bulkAdd(u),console.log(`Initialized DB with ${u.length} cards.`)}catch(e){console.error("Error initializing database:",e)}}const qS=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HS=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),M_=i=>{const e=HS(i);return e.charAt(0).toUpperCase()+e.slice(1)},Ib=(...i)=>i.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),FS=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var KS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const GS=_e.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:d,...g},_)=>_e.createElement("svg",{ref:_,...KS,width:e,height:e,stroke:i,strokeWidth:s?Number(n)*24/Number(e):n,className:Ib("lucide",o),...!u&&!FS(g)&&{"aria-hidden":"true"},...g},[...d.map(([b,C])=>_e.createElement(b,C)),...Array.isArray(u)?u:[u]]));const xr=(i,e)=>{const n=_e.forwardRef(({className:s,...o},u)=>_e.createElement(GS,{ref:u,iconNode:e,className:Ib(`lucide-${qS(M_(i))}`,`lucide-${i}`,s),...o}));return n.displayName=M_(i),n};const YS=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],QS=xr("activity",YS);const $S=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],XS=xr("arrow-left",$S);const WS=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],JS=xr("book-open",WS);const ZS=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ew=xr("layers",ZS);const tw=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],V_=xr("lightbulb",tw);const nw=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],rw=xr("loader-circle",nw);const iw=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],sw=xr("mic",iw);const aw=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],ow=xr("pen-tool",aw);const lw=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],uw=xr("play",lw);const cw=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],hw=xr("search",cw);const fw=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],P_=xr("sparkles",fw);const dw=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],pw=xr("square",dw);const mw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],gw=xr("trash-2",mw);const yw=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],vw=xr("trending-up",yw);const _w=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Mh=xr("volume-2",_w);function Ob(i,e){const n=Date.now(),s=60*1e3,o=1440*60*1e3,u=Number(e);if(isNaN(u)||u<0||u>5)throw new Error("Grade must be a number between 0 and 5");let{easeFactor:d=2.5,interval:g=0,reviewCount:_=0}=i;u>=3?g===0?g=1:g===1?g=6:g=Math.round(g*d):g=0,_+=1;let b=d+(.1-(5-u)*(.08+(5-u)*.02));b<1.3&&(b=1.3);const C=g===0?n+10*s:n+g*o,I=u>=3?"review":"learning";return{easeFactor:parseFloat(b.toFixed(2)),interval:g,nextReview:C,status:I,reviewCount:_,updatedAt:n}}function bw(){const[i,e]=_e.useState(!1),[n,s]=_e.useState(null),[o,u]=_e.useState(null),d=_e.useRef(null),g=_e.useRef([]);return _e.useEffect(()=>()=>{n&&URL.revokeObjectURL(n)},[n]),{isRecording:i,audioUrl:n,error:o,startRecording:async()=>{try{u(null);const I=await navigator.mediaDevices.getUserMedia({audio:!0});d.current=new MediaRecorder(I),g.current=[],d.current.ondataavailable=k=>{k.data.size>0&&g.current.push(k.data)},d.current.onstop=()=>{const k=new Blob(g.current,{type:"audio/webm"}),$=URL.createObjectURL(k);s($),I.getTracks().forEach(le=>le.stop())},d.current.start(),e(!0)}catch(I){console.error("Error accessing microphone:",I),u("Microphone access denied. Please check your permissions.")}},stopRecording:()=>{d.current&&i&&(d.current.stop(),e(!1))},clearRecording:()=>{n&&(URL.revokeObjectURL(n),s(null)),e(!1),u(null)}}}var j_;(function(i){i.STRING="string",i.NUMBER="number",i.INTEGER="integer",i.BOOLEAN="boolean",i.ARRAY="array",i.OBJECT="object"})(j_||(j_={}));var L_;(function(i){i.LANGUAGE_UNSPECIFIED="language_unspecified",i.PYTHON="python"})(L_||(L_={}));var U_;(function(i){i.OUTCOME_UNSPECIFIED="outcome_unspecified",i.OUTCOME_OK="outcome_ok",i.OUTCOME_FAILED="outcome_failed",i.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(U_||(U_={}));const z_=["user","model","function","system"];var B_;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(B_||(B_={}));var q_;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(q_||(q_={}));var H_;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(H_||(H_={}));var F_;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER"})(F_||(F_={}));var Zu;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.OTHER="OTHER"})(Zu||(Zu={}));var K_;(function(i){i.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",i.RETRIEVAL_QUERY="RETRIEVAL_QUERY",i.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",i.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",i.CLASSIFICATION="CLASSIFICATION",i.CLUSTERING="CLUSTERING"})(K_||(K_={}));var G_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(G_||(G_={}));var Y_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Y_||(Y_={}));class _r extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class zl extends _r{constructor(e,n){super(e),this.response=n}}class Db extends _r{constructor(e,n,s,o){super(e),this.status=n,this.statusText=s,this.errorDetails=o}}class co extends _r{}class Nb extends _r{}const Ew="https://generativelanguage.googleapis.com",Tw="v1beta",Sw="0.24.1",ww="genai-js";var Zo;(function(i){i.GENERATE_CONTENT="generateContent",i.STREAM_GENERATE_CONTENT="streamGenerateContent",i.COUNT_TOKENS="countTokens",i.EMBED_CONTENT="embedContent",i.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Zo||(Zo={}));class Aw{constructor(e,n,s,o,u){this.model=e,this.task=n,this.apiKey=s,this.stream=o,this.requestOptions=u}toString(){var e,n;const s=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||Tw;let u=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||Ew}/${s}/${this.model}:${this.task}`;return this.stream&&(u+="?alt=sse"),u}}function Cw(i){const e=[];return i?.apiClient&&e.push(i.apiClient),e.push(`${ww}/${Sw}`),e.join(" ")}async function xw(i){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",Cw(i.requestOptions)),n.append("x-goog-api-key",i.apiKey);let s=(e=i.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(o){throw new co(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${o.message}`)}for(const[o,u]of s.entries()){if(o==="x-goog-api-key")throw new co(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new co(`Header name ${o} can only be set using the apiClient field`);n.append(o,u)}}return n}async function Rw(i,e,n,s,o,u){const d=new Aw(i,e,n,s,u);return{url:d.toString(),fetchOptions:Object.assign(Object.assign({},Nw(u)),{method:"POST",headers:await xw(d),body:o})}}async function bc(i,e,n,s,o,u={},d=fetch){const{url:g,fetchOptions:_}=await Rw(i,e,n,s,o,u);return Iw(g,_,d)}async function Iw(i,e,n=fetch){let s;try{s=await n(i,e)}catch(o){Ow(o,i)}return s.ok||await Dw(s,i),s}function Ow(i,e){let n=i;throw n.name==="AbortError"?(n=new Nb(`Request aborted when fetching ${e.toString()}: ${i.message}`),n.stack=i.stack):i instanceof Db||i instanceof co||(n=new _r(`Error fetching from ${e.toString()}: ${i.message}`),n.stack=i.stack),n}async function Dw(i,e){let n="",s;try{const o=await i.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,s=o.error.details)}catch{}throw new Db(`Error fetching from ${e.toString()}: [${i.status} ${i.statusText}] ${n}`,i.status,i.statusText,s)}function Nw(i){const e={};if(i?.signal!==void 0||i?.timeout>=0){const n=new AbortController;i?.timeout>=0&&setTimeout(()=>n.abort(),i.timeout),i?.signal&&i.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}function Im(i){return i.text=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),$h(i.candidates[0]))throw new zl(`${ro(i)}`,i);return kw(i)}else if(i.promptFeedback)throw new zl(`Text not available. ${ro(i)}`,i);return""},i.functionCall=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),$h(i.candidates[0]))throw new zl(`${ro(i)}`,i);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Q_(i)[0]}else if(i.promptFeedback)throw new zl(`Function call not available. ${ro(i)}`,i)},i.functionCalls=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),$h(i.candidates[0]))throw new zl(`${ro(i)}`,i);return Q_(i)}else if(i.promptFeedback)throw new zl(`Function call not available. ${ro(i)}`,i)},i}function kw(i){var e,n,s,o;const u=[];if(!((n=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const d of(o=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)d.text&&u.push(d.text),d.executableCode&&u.push("\n```"+d.executableCode.language+`
`+d.executableCode.code+"\n```\n"),d.codeExecutionResult&&u.push("\n```\n"+d.codeExecutionResult.output+"\n```\n");return u.length>0?u.join(""):""}function Q_(i){var e,n,s,o;const u=[];if(!((n=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const d of(o=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)d.functionCall&&u.push(d.functionCall);if(u.length>0)return u}const Mw=[Zu.RECITATION,Zu.SAFETY,Zu.LANGUAGE];function $h(i){return!!i.finishReason&&Mw.includes(i.finishReason)}function ro(i){var e,n,s;let o="";if((!i.candidates||i.candidates.length===0)&&i.promptFeedback)o+="Response was blocked",!((e=i.promptFeedback)===null||e===void 0)&&e.blockReason&&(o+=` due to ${i.promptFeedback.blockReason}`),!((n=i.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${i.promptFeedback.blockReasonMessage}`);else if(!((s=i.candidates)===null||s===void 0)&&s[0]){const u=i.candidates[0];$h(u)&&(o+=`Candidate was blocked due to ${u.finishReason}`,u.finishMessage&&(o+=`: ${u.finishMessage}`))}return o}function lc(i){return this instanceof lc?(this.v=i,this):new lc(i)}function Vw(i,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(i,e||[]),o,u=[];return o={},d("next"),d("throw"),d("return"),o[Symbol.asyncIterator]=function(){return this},o;function d(k){s[k]&&(o[k]=function($){return new Promise(function(le,he){u.push([k,$,le,he])>1||g(k,$)})})}function g(k,$){try{_(s[k]($))}catch(le){I(u[0][3],le)}}function _(k){k.value instanceof lc?Promise.resolve(k.value.v).then(b,C):I(u[0][2],k)}function b(k){g("next",k)}function C(k){g("throw",k)}function I(k,$){k($),u.shift(),u.length&&g(u[0][0],u[0][1])}}const $_=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Pw(i){const e=i.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=Uw(e),[s,o]=n.tee();return{stream:Lw(s),response:jw(o)}}async function jw(i){const e=[],n=i.getReader();for(;;){const{done:s,value:o}=await n.read();if(s)return Im(zw(e));e.push(o)}}function Lw(i){return Vw(this,arguments,function*(){const n=i.getReader();for(;;){const{value:s,done:o}=yield lc(n.read());if(o)break;yield yield lc(Im(s))}})}function Uw(i){const e=i.getReader();return new ReadableStream({start(s){let o="";return u();function u(){return e.read().then(({value:d,done:g})=>{if(g){if(o.trim()){s.error(new _r("Failed to parse stream"));return}s.close();return}o+=d;let _=o.match($_),b;for(;_;){try{b=JSON.parse(_[1])}catch{s.error(new _r(`Error parsing JSON response: "${_[1]}"`));return}s.enqueue(b),o=o.substring(_[0].length),_=o.match($_)}return u()}).catch(d=>{let g=d;throw g.stack=d.stack,g.name==="AbortError"?g=new Nb("Request aborted when reading from the stream"):g=new _r("Error reading from the stream"),g})}}})}function zw(i){const e=i[i.length-1],n={promptFeedback:e?.promptFeedback};for(const s of i){if(s.candidates){let o=0;for(const u of s.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=u.citationMetadata,n.candidates[o].groundingMetadata=u.groundingMetadata,n.candidates[o].finishReason=u.finishReason,n.candidates[o].finishMessage=u.finishMessage,n.candidates[o].safetyRatings=u.safetyRatings,u.content&&u.content.parts){n.candidates[o].content||(n.candidates[o].content={role:u.content.role||"user",parts:[]});const d={};for(const g of u.content.parts)g.text&&(d.text=g.text),g.functionCall&&(d.functionCall=g.functionCall),g.executableCode&&(d.executableCode=g.executableCode),g.codeExecutionResult&&(d.codeExecutionResult=g.codeExecutionResult),Object.keys(d).length===0&&(d.text=""),n.candidates[o].content.parts.push(d)}o++}s.usageMetadata&&(n.usageMetadata=s.usageMetadata)}return n}async function kb(i,e,n,s){const o=await bc(e,Zo.STREAM_GENERATE_CONTENT,i,!0,JSON.stringify(n),s);return Pw(o)}async function Mb(i,e,n,s){const u=await(await bc(e,Zo.GENERATE_CONTENT,i,!1,JSON.stringify(n),s)).json();return{response:Im(u)}}function Vb(i){if(i!=null){if(typeof i=="string")return{role:"system",parts:[{text:i}]};if(i.text)return{role:"system",parts:[i]};if(i.parts)return i.role?i:{role:"system",parts:i.parts}}}function uc(i){let e=[];if(typeof i=="string")e=[{text:i}];else for(const n of i)typeof n=="string"?e.push({text:n}):e.push(n);return Bw(e)}function Bw(i){const e={role:"user",parts:[]},n={role:"function",parts:[]};let s=!1,o=!1;for(const u of i)"functionResponse"in u?(n.parts.push(u),o=!0):(e.parts.push(u),s=!0);if(s&&o)throw new _r("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!o)throw new _r("No content is provided for sending chat message.");return s?e:n}function qw(i,e){var n;let s={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(n=e?.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=i.generateContentRequest!=null;if(i.contents){if(o)throw new co("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=i.contents}else if(o)s=Object.assign(Object.assign({},s),i.generateContentRequest);else{const u=uc(i);s.contents=[u]}return{generateContentRequest:s}}function X_(i){let e;return i.contents?e=i:e={contents:[uc(i)]},i.systemInstruction&&(e.systemInstruction=Vb(i.systemInstruction)),e}function Hw(i){return typeof i=="string"||Array.isArray(i)?{content:uc(i)}:i}const W_=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Fw={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Kw(i){let e=!1;for(const n of i){const{role:s,parts:o}=n;if(!e&&s!=="user")throw new _r(`First content should be with role 'user', got ${s}`);if(!z_.includes(s))throw new _r(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(z_)}`);if(!Array.isArray(o))throw new _r("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new _r("Each Content should have at least one part");const u={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const g of o)for(const _ of W_)_ in g&&(u[_]+=1);const d=Fw[s];for(const g of W_)if(!d.includes(g)&&u[g]>0)throw new _r(`Content with role '${s}' can't contain '${g}' part`);e=!0}}function J_(i){var e;if(i.candidates===void 0||i.candidates.length===0)return!1;const n=(e=i.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const s of n.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}const Z_="SILENT_ERROR";class Gw{constructor(e,n,s,o={}){this.model=n,this.params=s,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,s?.history&&(Kw(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var s,o,u,d,g,_;await this._sendPromise;const b=uc(e),C={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(g=this.params)===null||g===void 0?void 0:g.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,b]},I=Object.assign(Object.assign({},this._requestOptions),n);let k;return this._sendPromise=this._sendPromise.then(()=>Mb(this._apiKey,this.model,C,I)).then($=>{var le;if(J_($.response)){this._history.push(b);const he=Object.assign({parts:[],role:"model"},(le=$.response.candidates)===null||le===void 0?void 0:le[0].content);this._history.push(he)}else{const he=ro($.response);he&&console.warn(`sendMessage() was unsuccessful. ${he}. Inspect response object for details.`)}k=$}).catch($=>{throw this._sendPromise=Promise.resolve(),$}),await this._sendPromise,k}async sendMessageStream(e,n={}){var s,o,u,d,g,_;await this._sendPromise;const b=uc(e),C={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(g=this.params)===null||g===void 0?void 0:g.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,b]},I=Object.assign(Object.assign({},this._requestOptions),n),k=kb(this._apiKey,this.model,C,I);return this._sendPromise=this._sendPromise.then(()=>k).catch($=>{throw new Error(Z_)}).then($=>$.response).then($=>{if(J_($)){this._history.push(b);const le=Object.assign({},$.candidates[0].content);le.role||(le.role="model"),this._history.push(le)}else{const le=ro($);le&&console.warn(`sendMessageStream() was unsuccessful. ${le}. Inspect response object for details.`)}}).catch($=>{$.message!==Z_&&console.error($)}),k}}async function Yw(i,e,n,s){return(await bc(e,Zo.COUNT_TOKENS,i,!1,JSON.stringify(n),s)).json()}async function Qw(i,e,n,s){return(await bc(e,Zo.EMBED_CONTENT,i,!1,JSON.stringify(n),s)).json()}async function $w(i,e,n,s){const o=n.requests.map(d=>Object.assign(Object.assign({},d),{model:e}));return(await bc(e,Zo.BATCH_EMBED_CONTENTS,i,!1,JSON.stringify({requests:o}),s)).json()}class e0{constructor(e,n,s={}){this.apiKey=e,this._requestOptions=s,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=Vb(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var s;const o=X_(e),u=Object.assign(Object.assign({},this._requestOptions),n);return Mb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),u)}async generateContentStream(e,n={}){var s;const o=X_(e),u=Object.assign(Object.assign({},this._requestOptions),n);return kb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),u)}startChat(e){var n;return new Gw(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const s=qw(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return Yw(this.apiKey,this.model,s,o)}async embedContent(e,n={}){const s=Hw(e),o=Object.assign(Object.assign({},this._requestOptions),n);return Qw(this.apiKey,this.model,s,o)}async batchEmbedContents(e,n={}){const s=Object.assign(Object.assign({},this._requestOptions),n);return $w(this.apiKey,this.model,e,s)}}class Vh{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new _r("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new e0(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,s){if(!e.name)throw new co("Cached content must contain a `name` field.");if(!e.model)throw new co("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const d of o)if(n?.[d]&&e[d]&&n?.[d]!==e[d]){if(d==="model"){const g=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,_=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(g===_)continue}throw new co(`Different value for "${d}" specified in modelParams (${n[d]}) and cachedContent (${e[d]})`)}const u=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new e0(this.apiKey,u,s)}}const Xw={models:{default:"gemini-2.5-flash"}},Ww={ai:Xw},Ph=3e4,Jw=12e4;class Zw{constructor(){this.apiKeyKey="gemini_api_key_byok",this.modelName=Ww.ai?.models?.default}getApiKey(){return localStorage.getItem(this.apiKeyKey)||sessionStorage.getItem(this.apiKeyKey)}isPersistent(){return!!localStorage.getItem(this.apiKeyKey)}setApiKey(e,n=!1){n?(localStorage.setItem(this.apiKeyKey,e),sessionStorage.removeItem(this.apiKeyKey)):(sessionStorage.setItem(this.apiKeyKey,e),localStorage.removeItem(this.apiKeyKey))}removeApiKey(){sessionStorage.removeItem(this.apiKeyKey),localStorage.removeItem(this.apiKeyKey)}hasKey(){return!!this.getApiKey()}async getParaphrase(e,n){const s=this.getApiKey();if(!s)throw new Error("API Key not found. Please configure it in Settings.");const u=new Vh(s).getGenerativeModel({model:this.modelName}),d=`
      Role: English Language Tutor for B1/B2 learners.
      Task: Explain the word or phrase "${e}" in simple English.
      Context: "${n}"
      
      Constraints:
      1. Use simple vocabulary (CEFR B1 level).
      2. Keep it concise (under 30 words).
      3. Do NOT simply repeat the definition; explain it naturally.
      4. Output plain text only (no markdown).
    `;return this._callGemini(u,d,!1,!1,Ph)}async generateCardDetails(e){const n=this.getApiKey();if(!n)throw new Error("API Key not found in session. Please configure it in Settings again.");const o=new Vh(n).getGenerativeModel({model:this.modelName}),u=`
You are an expert English teacher specializing in Vocabulary for Traditional Chinese (Taiwan) learners.
Target Input: "${e}"

**Task:**
Analyze the target input and return a JSON object. 
If the target has multiple meanings, select the **most frequent and practical meaning** for a general learner.
If the target is a phrase (e.g., "take for granted"), treat it as a single unit.

**Output Requirements (Strict JSON):**
Return ONLY a raw JSON object. Do not wrap it in markdown code blocks (no markdown formatting, no code blocks). The keys must be:

1.  "ipa": The IPA phonetic transcription.
    * **STRICTLY** use General American (US) pronunciation.
    * Use // for "bath", /o/ for "go", // for "hot".
    * Always pronounce the rhotic 'r' (/kr/).
2.  "definition": A simple, clear English definition (max 15 words) suitable for a flashcard.
3.  "translation": The Traditional Chinese (Taiwan) translation.
    * **CRITICAL:** Use Taiwan-specific vocabulary (e.g., use "" not ""; "" not "").
4.  "context": A practical, everyday English sentence containing the target "${e}".
    * Ensure the sentence context clarifies the meaning.
5.  "collocations": An array of 2-3 common collocations or related usage patterns (e.g., ["reluctant to admit", "reluctant agreement"]).

**JSON Structure:**
{
  "ipa": "String",
  "definition": "String",
  "translation": "String",
  "context": "String",
  "collocations": ["String", "String", "String"]
}
    `;return this._callGemini(o,u,!1,!0,Ph)}async analyzeTranscript(e,n){const s=this.getApiKey();if(!s)throw new Error("API Key not found. Please configure it in Settings.");const u=new Vh(s).getGenerativeModel({model:this.modelName});let d="";n==="auto"?d='Select the most important vocabulary OR phrases (approx 5-10 items). Prioritize "chunks" and "collocations" over simple words if they are key to understanding.':d=`Select strictly up to ${n} most important vocabulary words or phrases.`;const g=`
You are an expert language tutor analyzing a podcast transcript for Traditional Chinese (Taiwan) learners.

**Task:**
Analyze the provided [Input Text] and extract vocabulary words, phrasal verbs, or idioms.

**Selection Criteria:**
1. Focus on **B2-C2 level words** or **idiomatic expressions** that are valuable for learning.
2. Ignore simple fillers (e.g., "you know", "like", "um") and very basic vocabulary (A1-A2 level).
3. Constraint: ${d}

**Output Requirements (Strict JSON):**
Return ONLY a raw JSON array of objects. Do not use markdown code blocks.
For each extracted item, provide:

1.  "word": The lemma (root form) of the word or the full phrase.
2.  "ipa": IPA phonetic transcription.
    * **STRICTLY** use General American (US) pronunciation.
    * Use // for "bath", /o/ for "go", // for "hot".
    * Always pronounce the rhotic 'r' (/kr/).
3.  "definition": A concise English definition **specifically matching how the word is used in the transcript**.
4.  "context": A NEW, practical sentence using the target word naturally.
5.  "translation": The Traditional Chinese (Taiwan) translation.
    * **CRITICAL:** Use Taiwan-specific vocabulary (e.g., "" not ""; "" not "").
6.  "collocations": An array of 2-3 common collocations or related usage patterns (e.g., ["reluctant to admit", "reluctant agreement"]).

**Input Text:**
"""
${e.substring(0,3e4)}
"""

**JSON Structure:**
[
  {
    "word": "String",
    "ipa": "String or null",
    "definition": "String",
	  "context": "String",
    "translation": "String",
    "collocations": ["String", "String"]
  }
]
    `;return this._callGemini(u,g,!0,!0,Jw)}async checkSemanticSimilarity(e,n,s){const o=this.getApiKey();if(!o)return!1;const d=new Vh(o).getGenerativeModel({model:this.modelName}),g=`
You are a strict linguistic expert.
Word: "${e}"

Definition/Context A: "${n}"
Definition/Context B: "${s}"

Task: Determine if Context A and Context B describe the EXACT SAME meaning or usage of the word "${e}".
If they are semantically equivalent (even if worded differently), answer "YES".
If they describe different nuances, distinct meanings (polysemy), or different parts of speech, answer "NO".

Only output "YES" or "NO".
    `;try{return(await this._callGemini(d,g,!1,!1,Ph)).toUpperCase().includes("YES")}catch(_){return console.warn("Semantic check failed, defaulting to false:",_),!1}}async _fetchWithTimeout(e,n){let s;const o=new Promise((u,d)=>{s=setTimeout(()=>{d(new Error(`Request timed out after ${n/1e3} seconds`))},n)});try{return await Promise.race([e,o])}finally{clearTimeout(s)}}async _callGemini(e,n,s=!1,o=!0,u=Ph){try{console.log(`Calling AI Model: ${this.modelName} (Timeout: ${u}ms)`);const b=(await(await this._fetchWithTimeout(e.generateContent(n),u)).response).text().replace(/```json|```/g,"").trim();if(!o)return b;let C;try{C=JSON.parse(b)}catch(k){const $=b.indexOf(s?"[":"{"),le=b.lastIndexOf(s?"]":"}")+1;if($!==-1&&le!==-1)C=JSON.parse(b.substring($,le));else throw k}const I=k=>{k.ipa&&(k.ipa=k.ipa.replace(new RegExp("^[/\\[]|[/\\]]$","g"),""))};return Array.isArray(C)?C.forEach(I):I(C),C}catch(d){throw console.error("AI Generation failed:",d),new Error(`AI Error: ${d.message}`)}}}const vi=new Zw;function eA({context:i,word:e,definition:n}){const[s,o]=_e.useState(!1),[u,d]=_e.useState(0);_e.useEffect(()=>{o(!1),d(0)},[e]);const g=_e.useCallback(()=>{s?d(k=>Math.min(k+1,2)):o(!0)},[s]),_=k=>{k.stopPropagation(),d($=>Math.min($+1,2))},b=k=>{k.stopPropagation(),g()};_e.useEffect(()=>{const k=$=>{($.key==="h"||$.key==="H")&&!["INPUT","TEXTAREA"].includes(document.activeElement.tagName)&&g()};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[g]);const C=()=>{if(!e)return"[......]";switch(u){case 0:return"[......]";case 1:return`${e.charAt(0)}[......]`;case 2:return e;default:return"[......]"}},I=()=>{if(!i||!e)return null;const k=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),$=new RegExp(`\\b${k}\\b`,"gi"),le=i.split($);if(le.length===1)return console.warn(`[ClozeSentence] Word "${e}" not found in context.`),R.jsx("div",{style:{fontSize:"1.4rem"},children:i});const he=!s||u<2;return R.jsx("div",{style:{fontSize:"1.4rem",lineHeight:"1.6",color:"#e0e0e0",textAlign:"left",position:"relative"},children:le.map((ge,Ve)=>R.jsxs(Rb.Fragment,{children:[ge,Ve<le.length-1&&R.jsxs(R.Fragment,{children:[R.jsx("span",{onClick:_,className:"cloze-gap",title:u<2?"Tap to reveal more":"Fully revealed",style:{color:u>0?"#88ccca":"#666",fontWeight:"bold",margin:"0 2px 0 4px",cursor:u<2?"pointer":"default",borderBottom:u<2?`2px dashed ${u>0?"#88ccca":"#555"}`:"none",backgroundColor:u===0?"rgba(255,255,255,0.05)":"transparent",borderRadius:"4px",padding:"0 4px",transition:"all 0.2s ease",userSelect:"none",...u===2?{backgroundColor:"rgba(136, 204, 202, 0.1)",color:"#88ccca",borderBottom:"2px solid #88ccca"}:{}},children:C()}),he&&R.jsx("span",{onClick:b,className:"hint-icon-inline",title:s?"Reveal Answer (H)":"Show Definition (H)",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",marginLeft:"2px",marginRight:"4px",padding:"2px",backgroundColor:"rgba(255, 213, 79, 0.2)",borderRadius:"50%",color:"#ffd54f",cursor:"pointer",transition:"all 0.2s ease",opacity:.8},children:R.jsx(V_,{size:16,strokeWidth:2.5})})]})]},Ve))})};return R.jsxs("div",{className:"cloze-container",style:{width:"100%",padding:"0 0.5rem",position:"relative"},children:[I(),s&&n&&R.jsxs("div",{style:{marginTop:"1.5rem",padding:"12px",backgroundColor:"rgba(255, 213, 79, 0.08)",borderRadius:"8px",borderLeft:"3px solid #ffd54f",fontSize:"1rem",color:"#eee",textAlign:"left",animation:"fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:[R.jsxs("strong",{style:{color:"#ffd54f",display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px",fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:[R.jsx(V_,{size:14})," Definition"]}),n]}),R.jsx("style",{children:`
        @keyframes fadeIn { 
          from { opacity: 0; transform: translateY(5px); } 
          to { opacity: 1; transform: translateY(0); } 
        }
        .cloze-gap:hover {
          background-color: rgba(136, 204, 202, 0.15) !important;
          color: #88ccca !important;
          border-bottom-color: #88ccca !important;
        }
        .cloze-gap:active {
          transform: scale(0.95);
        }
        .hint-icon-inline:hover {
          background-color: rgba(255, 213, 79, 0.4) !important;
          transform: scale(1.1);
          opacity: 1 !important;
        }
        .hint-icon-inline:active {
          transform: scale(0.9);
        }
      `})]})}function tA({card:i,onUpdate:e}){const[n,s]=_e.useState(!1),[o,u]=_e.useState(!1),[d,g]=_e.useState(null),[_,b]=_e.useState(!1),[C,I]=_e.useState(()=>localStorage.getItem("gp_settings_learning_mode")||"sniper"),{isRecording:k,audioUrl:$,startRecording:le,stopRecording:he,clearRecording:ge,error:Ve}=bw();_e.useEffect(()=>{if(!n)g(null),ge();else if((JSON.parse(localStorage.getItem("gp_settings_autoplay_tts"))||!1)&&i.context){const N=setTimeout(()=>{it(i.context,{stopPropagation:()=>{}})},300);return()=>clearTimeout(N)}},[n,i.id]),_e.useEffect(()=>{const z=()=>{I(localStorage.getItem("gp_settings_learning_mode")||"sniper")};return window.addEventListener("storage",z),()=>window.removeEventListener("storage",z)},[]);const Fe=()=>{s(!n),u(!1)},Pe=(z,N)=>{N.stopPropagation();try{const Xe=Ob(i,z),Lt={...i,...Xe};e(Lt),s(!1),u(!1)}catch(Xe){console.error("Error updating card:",Xe)}},rt=z=>{z.stopPropagation(),u(!o)},it=(z,N)=>{if(N&&N.stopPropagation(),!z)return;window.speechSynthesis.cancel();const Xe=new SpeechSynthesisUtterance(z);Xe.lang="en-US",Xe.rate=1,window.speechSynthesis.speak(Xe)},Re=async z=>{if(z.stopPropagation(),!d){b(!0);try{const N=typeof i.context=="string"?i.context:i.context?.text||"",Xe=await vi.getParaphrase(i.word,N);g(Xe)}catch{g("Unable to connect to AI Coach. Check your API Key settings.")}finally{b(!1)}}},V=(i.interval||0)<3,M=()=>!(C==="reading"||!i.context||V),j=()=>{if(!M()){const N=i.status==="new"||!i.status&&(i.reviewCount||0)===0,Xe=i.status==="learning"||!N&&V;return R.jsxs(R.Fragment,{children:[R.jsx("h2",{style:{fontSize:"2.5rem",margin:0,fontWeight:"bold"},children:i.word}),C==="sniper"&&R.jsxs(R.Fragment,{children:[N&&R.jsx("span",{style:{fontSize:"0.8rem",color:"#4caf50",marginTop:"0.5rem",display:"block",fontWeight:"bold"},children:" New Card"}),Xe&&!N&&R.jsx("span",{style:{fontSize:"0.8rem",color:"#ffb74d",marginTop:"0.5rem",display:"block",fontWeight:"bold"},children:" Learning Phase"})]})]})}return R.jsx(eA,{context:i.context,word:i.word,definition:i.definition})},Y=z=>z.stopPropagation(),B={background:"transparent",border:"none",cursor:"pointer",color:"#88ccca",padding:"4px",marginLeft:"8px",verticalAlign:"middle",transition:"opacity 0.2s",display:"inline-flex",alignItems:"center",justifyContent:"center"};return R.jsxs("div",{className:"flashcard-container",onClick:Fe,style:{border:"1px solid #444",padding:"1.5rem",borderRadius:"12px",textAlign:"center",cursor:"pointer",minHeight:"220px",display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"#25262b",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"transform 0.2s",color:"#e0e0e0",position:"relative",maxHeight:"75vh",overflow:"hidden"},children:[!n&&R.jsxs("div",{className:"front",children:[R.jsxs("div",{style:{marginBottom:"1.5rem",padding:"0 10px",minHeight:"120px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[j(),R.jsx("button",{onClick:z=>it(M()?i.context:i.word,z),style:{...B,marginTop:"10px"},title:"Listen",children:R.jsx(Mh,{size:24})})]}),i.ipa&&!M()&&R.jsxs("p",{style:{fontSize:"1.2rem",color:"#88ccca",fontFamily:"monospace",margin:"0 0 1.5rem 0"},children:["/",i.ipa,"/"]}),R.jsx("p",{style:{color:"#666",fontSize:"0.9rem"},children:"(Click to flip)"}),R.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",fontSize:"0.8rem",color:"#555"},children:["EF: ",i.easeFactor||"2.5"," | Int: ",i.interval||0,"d"]})]}),n&&R.jsxs("div",{className:"back",style:{display:"flex",flexDirection:"column",height:"100%"},children:[R.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"0.5rem"},children:[R.jsx("h2",{style:{fontSize:"1.8rem",color:"#fff",margin:0},children:i.word}),R.jsx("button",{onClick:z=>it(i.word,z),style:{...B,color:"#88ccca"},children:R.jsx(Mh,{size:22})})]}),i.ipa&&R.jsxs("p",{style:{fontSize:"1rem",color:"#888",fontFamily:"monospace",margin:"0 0 0.8rem 0"},children:["/",i.ipa,"/"]}),R.jsxs("div",{style:{marginBottom:"0.8rem"},onClick:Y,children:[R.jsx("button",{onClick:rt,style:{background:"transparent",border:"1px solid #555",color:"#888",borderRadius:"15px",padding:"2px 10px",fontSize:"0.75rem",cursor:"pointer",marginBottom:"0.2rem"},children:o?"Hide Translation":"Show Translation"}),o&&R.jsx("div",{style:{fontSize:"1.1rem",color:"#e91e63",fontWeight:"bold",marginTop:"0.5rem"},children:i.translation||"(No translation)"})]}),R.jsxs("div",{style:{textAlign:"left",lineHeight:"1.6",flexGrow:1,overflowY:"auto",paddingRight:"4px",marginBottom:"1rem",scrollbarWidth:"thin",scrollbarColor:"#444 transparent"},onClick:Y,children:[R.jsxs("div",{style:{marginBottom:"1rem",backgroundColor:"rgba(255, 255, 255, 0.05)",padding:"10px",borderRadius:"6px",borderLeft:"4px solid #88ccca"},children:[R.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[R.jsx("strong",{style:{color:"#88ccca",fontSize:"0.8rem",textTransform:"uppercase"},children:"Definition"}),R.jsx("button",{onClick:z=>it(i.definition,z),style:{...B,marginLeft:"8px",padding:0},children:R.jsx(Mh,{size:16})})]}),R.jsx("div",{style:{fontSize:"1.1rem",color:"#ffffff",fontWeight:"500",lineHeight:"1.4"},children:i.definition})]}),i.collocations&&i.collocations.length>0&&R.jsxs("div",{style:{marginBottom:"1rem",padding:"0 5px"},children:[R.jsxs("strong",{style:{color:"#ffb74d",fontSize:"0.8rem",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"5px"},children:[R.jsx(ew,{size:12})," Collocations"]}),R.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginTop:"5px"},children:i.collocations.map((z,N)=>R.jsx("span",{style:{backgroundColor:"rgba(255, 183, 77, 0.1)",color:"#ffcc80",padding:"2px 8px",borderRadius:"4px",fontSize:"0.9rem",border:"1px solid rgba(255, 183, 77, 0.3)"},children:z},N))})]}),d&&R.jsxs("div",{style:{marginBottom:"1rem",backgroundColor:"rgba(233, 30, 99, 0.1)",padding:"10px",borderRadius:"6px",borderLeft:"4px solid #e91e63",animation:"fadeIn 0.3s"},children:[R.jsxs("strong",{style:{color:"#e91e63",fontSize:"0.8rem",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"5px"},children:[R.jsx(P_,{size:12})," AI Tutor"]}),R.jsx("p",{style:{margin:"5px 0 0",fontSize:"0.95rem",color:"#ffcdd2"},children:d})]}),R.jsxs("div",{style:{padding:"0 10px"},children:[R.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[R.jsx("strong",{style:{color:"#aaa",fontSize:"0.8rem"},children:"Context:"}),R.jsx("button",{onClick:z=>it(i.context,z),style:{...B,marginLeft:"6px",color:"#aaa"},children:R.jsx(Mh,{size:16})})]}),R.jsx("div",{style:{marginTop:"2px"},children:R.jsx("em",{style:{color:"#a5d6a7",fontSize:"0.95rem"},children:i.context})})]})]}),R.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"8px",marginBottom:"1rem"},onClick:Y,children:[R.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[k?R.jsx("button",{onClick:he,title:"Stop Recording",style:{background:"#e53935",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff",animation:"pulse 1.5s infinite"},children:R.jsx(pw,{size:14,fill:"currentColor"})}):R.jsx("button",{onClick:le,title:"Shadowing Record",style:{background:"#333",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff"},children:R.jsx(sw,{size:16})}),$&&!k&&R.jsxs(R.Fragment,{children:[R.jsx("audio",{src:$,style:{display:"none"},id:"shadowing-playback"}),R.jsx("button",{onClick:()=>document.getElementById("shadowing-playback").play(),style:{background:"transparent",border:"1px solid #4caf50",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#4caf50"},children:R.jsx(uw,{size:14,fill:"currentColor"})}),R.jsx("button",{onClick:ge,style:{background:"transparent",border:"none",cursor:"pointer",color:"#666"},children:R.jsx(gw,{size:16})})]}),Ve&&R.jsx("span",{style:{fontSize:"0.7rem",color:"#e53935"},children:"Mic Error"})]}),R.jsx("div",{children:R.jsxs("button",{onClick:Re,disabled:_||!!d,style:{background:"transparent",border:"1px solid #e91e63",borderRadius:"15px",padding:"4px 10px",fontSize:"0.75rem",color:"#e91e63",cursor:_||d?"default":"pointer",opacity:_||d?.5:1,display:"flex",alignItems:"center",gap:"5px"},children:[_?R.jsx(rw,{size:12,className:"spin"}):R.jsx(P_,{size:12}),d?"Explained":"Explain Simply"]})})]}),R.jsxs("div",{className:"actions",onClick:Y,style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginTop:"auto",paddingTop:"0.5rem",borderTop:"1px solid #333"},children:[R.jsxs("button",{onClick:z=>Pe(1,z),style:jh("#e53935"),title:"Reset",children:["Again ",R.jsx("div",{style:Lh,children:"< 10m"})]}),R.jsxs("button",{onClick:z=>Pe(3,z),style:jh("#fb8c00"),title:"Hard",children:["Hard ",R.jsxs("div",{style:Lh,children:["~",zp(Math.round((i.interval||1)*1.2))]})]}),R.jsxs("button",{onClick:z=>Pe(4,z),style:jh("#43a047"),title:"Good",children:["Good"," ",R.jsx("div",{style:Lh,children:zp(Math.round((i.interval||1)*(i.easeFactor||2.5)))})]}),R.jsxs("button",{onClick:z=>Pe(5,z),style:jh("#1e88e5"),title:"Easy",children:["Easy"," ",R.jsx("div",{style:Lh,children:zp(Math.round((i.interval||1)*(i.easeFactor||2.5)*1.3))})]})]})]}),R.jsx("style",{children:`
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }
        .spin { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
      `})]})}const zp=i=>i===0?"< 1d":i===1?"1d":`${i}d`,jh=i=>({padding:"0.5rem 0.2rem",backgroundColor:i,color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"0.85rem"}),Lh={fontSize:"0.65rem",opacity:.8,marginTop:"2px"};class nA{_generateId(){const e=Date.now(),n=Math.random().toString(36).substring(2,8);return`${e}_${n}`}_isContextSimilar(e,n){if(!e||!n)return!1;const s=d=>d.toLowerCase().replace(/[^\w\s]|_/g,"").replace(/\s+/g," ").trim(),o=s(e),u=s(n);return o===u||o.includes(u)||u.includes(o)}async importCards(e,n={}){try{const{smartDeduplication:s=!1}=n;let o;try{o=JSON.parse(e)}catch(g){throw new Error("Input must be a valid JSON string",g)}if(!Array.isArray(o))throw new Error("Input must be a JSON array");const u=[];let d=0;for(const g of o){if(!g.word)continue;const _=g.word.trim(),b=await Yt.vocab.where("word").equals(_).toArray();let C=!1;if(b.length>0)for(const I of b){if(this._isContextSimilar(g.context,I.context)){C=!0;break}if(s&&await vi.checkSemanticSimilarity(_,I.context,g.context)){C=!0;break}}C?d++:u.push({...g,word:_,id:this._generateId(),status:"new",reviewCount:0,nextReview:Date.now(),easeFactor:2.5,interval:0,updatedAt:Date.now(),createdAt:Date.now()})}return u.length>0&&await Yt.vocab.bulkAdd(u),{addedCount:u.length,skippedCount:d}}catch(s){throw console.error("Import failed:",s),s}}async addCard(e,n={}){const{smartDeduplication:s=!1}=n,o=e.word.trim(),u=await Yt.vocab.where("word").equals(o).toArray();if(u.find(_=>this._isContextSimilar(e.context,_.context)))throw new Error(`Duplicate card: "${o}" with similar context already exists.`);if(s&&u.length>0){for(const _ of u)if(await vi.checkSemanticSimilarity(o,_.context,e.context))throw new Error(`Duplicate card (Semantic): "${o}" has a semantically identical context already.`)}const g={...e,word:o,id:this._generateId(),status:"new",reviewCount:0,nextReview:Date.now(),easeFactor:2.5,interval:0,updatedAt:Date.now(),createdAt:Date.now()};return await Yt.vocab.add(g),g}async scanForDuplicates(e={}){const{smartDeduplication:n=!1}=e,s=await Yt.vocab.toArray(),o=[],u={};for(const d of s){const g=d.word.trim().toLowerCase();u[g]||(u[g]=[]),u[g].push(d)}for(const d in u){const g=u[d];if(g.length<2)continue;g.sort((b,C)=>C.reviewCount!==b.reviewCount?C.reviewCount-b.reviewCount:b.createdAt-C.createdAt);const _=[g[0]];for(let b=1;b<g.length;b++){const C=g[b];let I=!1;for(const k of _){if(this._isContextSimilar(C.context,k.context)){I=!0;break}if(n&&await vi.checkSemanticSimilarity(C.word,k.context,C.context)){I=!0;break}}I?o.push(C.id):_.push(C)}}return o}async bulkDeleteCards(e){!e||e.length===0||await Yt.vocab.bulkDelete(e)}async updateCard(e){const n={...e,updatedAt:Date.now()};return await Yt.vocab.put(n),n}async deleteCard(e){await Yt.vocab.delete(e)}async getAllCards(){return await Yt.vocab.toArray()}async clearAllCards(){await Yt.vocab.clear()}async getDueCards(e=20){const n=Date.now();return(await Yt.vocab.where("nextReview").belowOrEqual(n).and(o=>o.status!=="new").toArray()).sort((o,u)=>{const d=o.easeFactor||2.5,g=u.easeFactor||2.5;return d!==g?d-g:o.nextReview-u.nextReview}).slice(0,e)}async processReview(e,n){const s=Ob(e,n),o={...e,...s};await this.updateCard(o);try{await Yt.study_logs.add({cardId:o.id,grade:Number(n),reviewTime:Date.now(),easeFactor:o.easeFactor,interval:o.interval})}catch(u){console.warn("Failed to save study log",u)}return o}}const io=new nA;let rA={data:""},iA=i=>{if(typeof window=="object"){let e=(i?i.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(i||document.head).appendChild(e),e.firstChild}return i||rA},sA=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,aA=/\/\*[^]*?\*\/|  +/g,t0=/\n+/g,so=(i,e)=>{let n="",s="",o="";for(let u in i){let d=i[u];u[0]=="@"?u[1]=="i"?n=u+" "+d+";":s+=u[1]=="f"?so(d,u):u+"{"+so(d,u[1]=="k"?"":e)+"}":typeof d=="object"?s+=so(d,e?e.replace(/([^,])+/g,g=>u.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,_=>/&/.test(_)?_.replace(/&/g,g):g?g+" "+_:_)):u):d!=null&&(u=/^--/.test(u)?u:u.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=so.p?so.p(u,d):u+":"+d+";")}return n+(e&&o?e+"{"+o+"}":o)+s},aa={},Pb=i=>{if(typeof i=="object"){let e="";for(let n in i)e+=n+Pb(i[n]);return e}return i},oA=(i,e,n,s,o)=>{let u=Pb(i),d=aa[u]||(aa[u]=(_=>{let b=0,C=11;for(;b<_.length;)C=101*C+_.charCodeAt(b++)>>>0;return"go"+C})(u));if(!aa[d]){let _=u!==i?i:(b=>{let C,I,k=[{}];for(;C=sA.exec(b.replace(aA,""));)C[4]?k.shift():C[3]?(I=C[3].replace(t0," ").trim(),k.unshift(k[0][I]=k[0][I]||{})):k[0][C[1]]=C[2].replace(t0," ").trim();return k[0]})(i);aa[d]=so(o?{["@keyframes "+d]:_}:_,n?"":"."+d)}let g=n&&aa.g?aa.g:null;return n&&(aa.g=aa[d]),((_,b,C,I)=>{I?b.data=b.data.replace(I,_):b.data.indexOf(_)===-1&&(b.data=C?_+b.data:b.data+_)})(aa[d],e,s,g),d},lA=(i,e,n)=>i.reduce((s,o,u)=>{let d=e[u];if(d&&d.call){let g=d(n),_=g&&g.props&&g.props.className||/^go/.test(g)&&g;d=_?"."+_:g&&typeof g=="object"?g.props?"":so(g,""):g===!1?"":g}return s+o+(d??"")},"");function Of(i){let e=this||{},n=i.call?i(e.p):i;return oA(n.unshift?n.raw?lA(n,[].slice.call(arguments,1),e.p):n.reduce((s,o)=>Object.assign(s,o&&o.call?o(e.p):o),{}):n,iA(e.target),e.g,e.o,e.k)}let jb,tm,nm;Of.bind({g:1});let ha=Of.bind({k:1});function uA(i,e,n,s){so.p=e,jb=i,tm=n,nm=s}function So(i,e){let n=this||{};return function(){let s=arguments;function o(u,d){let g=Object.assign({},u),_=g.className||o.className;n.p=Object.assign({theme:tm&&tm()},g),n.o=/ *go\d+/.test(_),g.className=Of.apply(n,s)+(_?" "+_:"");let b=i;return i[0]&&(b=g.as||i,delete g.as),nm&&b[0]&&nm(g),jb(b,g)}return o}}var cA=i=>typeof i=="function",uf=(i,e)=>cA(i)?i(e):i,hA=(()=>{let i=0;return()=>(++i).toString()})(),Lb=(()=>{let i;return()=>{if(i===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");i=!e||e.matches}return i}})(),fA=20,Om="default",Ub=(i,e)=>{let{toastLimit:n}=i.settings;switch(e.type){case 0:return{...i,toasts:[e.toast,...i.toasts].slice(0,n)};case 1:return{...i,toasts:i.toasts.map(d=>d.id===e.toast.id?{...d,...e.toast}:d)};case 2:let{toast:s}=e;return Ub(i,{type:i.toasts.find(d=>d.id===s.id)?1:0,toast:s});case 3:let{toastId:o}=e;return{...i,toasts:i.toasts.map(d=>d.id===o||o===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return e.toastId===void 0?{...i,toasts:[]}:{...i,toasts:i.toasts.filter(d=>d.id!==e.toastId)};case 5:return{...i,pausedAt:e.time};case 6:let u=e.time-(i.pausedAt||0);return{...i,pausedAt:void 0,toasts:i.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+u}))}}},Xh=[],zb={toasts:[],pausedAt:void 0,settings:{toastLimit:fA}},Ts={},Bb=(i,e=Om)=>{Ts[e]=Ub(Ts[e]||zb,i),Xh.forEach(([n,s])=>{n===e&&s(Ts[e])})},qb=i=>Object.keys(Ts).forEach(e=>Bb(i,e)),dA=i=>Object.keys(Ts).find(e=>Ts[e].toasts.some(n=>n.id===i)),Df=(i=Om)=>e=>{Bb(e,i)},pA={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},mA=(i={},e=Om)=>{let[n,s]=_e.useState(Ts[e]||zb),o=_e.useRef(Ts[e]);_e.useEffect(()=>(o.current!==Ts[e]&&s(Ts[e]),Xh.push([e,s]),()=>{let d=Xh.findIndex(([g])=>g===e);d>-1&&Xh.splice(d,1)}),[e]);let u=n.toasts.map(d=>{var g,_,b;return{...i,...i[d.type],...d,removeDelay:d.removeDelay||((g=i[d.type])==null?void 0:g.removeDelay)||i?.removeDelay,duration:d.duration||((_=i[d.type])==null?void 0:_.duration)||i?.duration||pA[d.type],style:{...i.style,...(b=i[d.type])==null?void 0:b.style,...d.style}}});return{...n,toasts:u}},gA=(i,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:i,pauseDuration:0,...n,id:n?.id||hA()}),Ec=i=>(e,n)=>{let s=gA(e,i,n);return Df(s.toasterId||dA(s.id))({type:2,toast:s}),s.id},Bn=(i,e)=>Ec("blank")(i,e);Bn.error=Ec("error");Bn.success=Ec("success");Bn.loading=Ec("loading");Bn.custom=Ec("custom");Bn.dismiss=(i,e)=>{let n={type:3,toastId:i};e?Df(e)(n):qb(n)};Bn.dismissAll=i=>Bn.dismiss(void 0,i);Bn.remove=(i,e)=>{let n={type:4,toastId:i};e?Df(e)(n):qb(n)};Bn.removeAll=i=>Bn.remove(void 0,i);Bn.promise=(i,e,n)=>{let s=Bn.loading(e.loading,{...n,...n?.loading});return typeof i=="function"&&(i=i()),i.then(o=>{let u=e.success?uf(e.success,o):void 0;return u?Bn.success(u,{id:s,...n,...n?.success}):Bn.dismiss(s),o}).catch(o=>{let u=e.error?uf(e.error,o):void 0;u?Bn.error(u,{id:s,...n,...n?.error}):Bn.dismiss(s)}),i};var yA=1e3,vA=(i,e="default")=>{let{toasts:n,pausedAt:s}=mA(i,e),o=_e.useRef(new Map).current,u=_e.useCallback((I,k=yA)=>{if(o.has(I))return;let $=setTimeout(()=>{o.delete(I),d({type:4,toastId:I})},k);o.set(I,$)},[]);_e.useEffect(()=>{if(s)return;let I=Date.now(),k=n.map($=>{if($.duration===1/0)return;let le=($.duration||0)+$.pauseDuration-(I-$.createdAt);if(le<0){$.visible&&Bn.dismiss($.id);return}return setTimeout(()=>Bn.dismiss($.id,e),le)});return()=>{k.forEach($=>$&&clearTimeout($))}},[n,s,e]);let d=_e.useCallback(Df(e),[e]),g=_e.useCallback(()=>{d({type:5,time:Date.now()})},[d]),_=_e.useCallback((I,k)=>{d({type:1,toast:{id:I,height:k}})},[d]),b=_e.useCallback(()=>{s&&d({type:6,time:Date.now()})},[s,d]),C=_e.useCallback((I,k)=>{let{reverseOrder:$=!1,gutter:le=8,defaultPosition:he}=k||{},ge=n.filter(Pe=>(Pe.position||he)===(I.position||he)&&Pe.height),Ve=ge.findIndex(Pe=>Pe.id===I.id),Fe=ge.filter((Pe,rt)=>rt<Ve&&Pe.visible).length;return ge.filter(Pe=>Pe.visible).slice(...$?[Fe+1]:[0,Fe]).reduce((Pe,rt)=>Pe+(rt.height||0)+le,0)},[n]);return _e.useEffect(()=>{n.forEach(I=>{if(I.dismissed)u(I.id,I.removeDelay);else{let k=o.get(I.id);k&&(clearTimeout(k),o.delete(I.id))}})},[n,u]),{toasts:n,handlers:{updateHeight:_,startPause:g,endPause:b,calculateOffset:C}}},_A=ha`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,bA=ha`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,EA=ha`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,TA=So("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_A} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${bA} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${i=>i.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${EA} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,SA=ha`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,wA=So("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${i=>i.secondary||"#e0e0e0"};
  border-right-color: ${i=>i.primary||"#616161"};
  animation: ${SA} 1s linear infinite;
`,AA=ha`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,CA=ha`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,xA=So("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${AA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${CA} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${i=>i.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,RA=So("div")`
  position: absolute;
`,IA=So("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,OA=ha`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,DA=So("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${OA} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,NA=({toast:i})=>{let{icon:e,type:n,iconTheme:s}=i;return e!==void 0?typeof e=="string"?_e.createElement(DA,null,e):e:n==="blank"?null:_e.createElement(IA,null,_e.createElement(wA,{...s}),n!=="loading"&&_e.createElement(RA,null,n==="error"?_e.createElement(TA,{...s}):_e.createElement(xA,{...s})))},kA=i=>`
0% {transform: translate3d(0,${i*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,MA=i=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${i*-150}%,-1px) scale(.6); opacity:0;}
`,VA="0%{opacity:0;} 100%{opacity:1;}",PA="0%{opacity:1;} 100%{opacity:0;}",jA=So("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,LA=So("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,UA=(i,e)=>{let n=i.includes("top")?1:-1,[s,o]=Lb()?[VA,PA]:[kA(n),MA(n)];return{animation:e?`${ha(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ha(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},zA=_e.memo(({toast:i,position:e,style:n,children:s})=>{let o=i.height?UA(i.position||e||"top-center",i.visible):{opacity:0},u=_e.createElement(NA,{toast:i}),d=_e.createElement(LA,{...i.ariaProps},uf(i.message,i));return _e.createElement(jA,{className:i.className,style:{...o,...n,...i.style}},typeof s=="function"?s({icon:u,message:d}):_e.createElement(_e.Fragment,null,u,d))});uA(_e.createElement);var BA=({id:i,className:e,style:n,onHeightUpdate:s,children:o})=>{let u=_e.useCallback(d=>{if(d){let g=()=>{let _=d.getBoundingClientRect().height;s(i,_)};g(),new MutationObserver(g).observe(d,{subtree:!0,childList:!0,characterData:!0})}},[i,s]);return _e.createElement("div",{ref:u,className:e,style:n},o)},qA=(i,e)=>{let n=i.includes("top"),s=n?{top:0}:{bottom:0},o=i.includes("center")?{justifyContent:"center"}:i.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Lb()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...s,...o}},HA=Of`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Uh=16,FA=({reverseOrder:i,position:e="top-center",toastOptions:n,gutter:s,children:o,toasterId:u,containerStyle:d,containerClassName:g})=>{let{toasts:_,handlers:b}=vA(n,u);return _e.createElement("div",{"data-rht-toaster":u||"",style:{position:"fixed",zIndex:9999,top:Uh,left:Uh,right:Uh,bottom:Uh,pointerEvents:"none",...d},className:g,onMouseEnter:b.startPause,onMouseLeave:b.endPause},_.map(C=>{let I=C.position||e,k=b.calculateOffset(C,{reverseOrder:i,gutter:s,defaultPosition:e}),$=qA(I,k);return _e.createElement(BA,{id:C.id,key:C.id,onHeightUpdate:b.updateHeight,className:C.visible?HA:"",style:$},C.type==="custom"?uf(C.message,C):o?o(C):_e.createElement(zA,{toast:C,position:I}))}))},Ze=Bn;function KA({isOpen:i,onClose:e,onSuccess:n}){const[s,o]=_e.useState(""),[u,d]=_e.useState(!1),[g,_]=_e.useState("auto"),[b,C]=_e.useState(!1),[I,k]=_e.useState(null);if(!i)return null;const $=async()=>{if(!s.trim())return;if(!vi.hasKey()){Ze.error("Please set your Gemini API Key in Settings first.");return}d(!0),k(null);const he=Ze.loading("AI is analyzing transcript...");try{const ge=await vi.analyzeTranscript(s,g);if(!Array.isArray(ge)||ge.length===0)throw new Error("AI found no vocabulary or returned invalid format.");Ze.loading(`Found ${ge.length} words. Saving...`,{id:he});const Ve=JSON.stringify(ge),Fe=await io.importCards(Ve,{smartDeduplication:b});Ze.success(`Success!
Added: ${Fe.addedCount}
Skipped (Duplicate): ${Fe.skippedCount}`,{id:he,duration:4e3}),o(""),n(),e()}catch(ge){console.error(ge);const Ve=ge.message||"Unknown error";k(Ve),Ze.error(`Failed: ${Ve}`,{id:he})}finally{d(!1),setTimeout(()=>Ze.dismiss(he),3e3)}},le=[{label:"AUTO",value:"auto"},{label:"5",value:5},{label:"10",value:10},{label:"20",value:20}];return R.jsx("div",{style:Xn.overlay,children:R.jsxs("div",{style:Xn.modal,children:[R.jsx("h2",{style:{marginTop:0,color:"#fff",marginBottom:"1.5rem"},children:"Import from Podcast"}),R.jsxs("div",{style:Xn.settingsContainer,children:[R.jsxs("div",{style:Xn.settingRow,children:[R.jsx("span",{style:Xn.settingLabel,children:"Max Words:"}),R.jsx("div",{style:Xn.optionGroup,children:le.map(he=>R.jsx("button",{onClick:()=>_(he.value),style:{...Xn.optionBtn,...g===he.value?Xn.optionBtnActive:{}},children:he.label},he.value))})]}),R.jsx("div",{style:Xn.settingRow,children:R.jsxs("label",{style:Xn.checkboxLabel,children:[R.jsx("input",{type:"checkbox",checked:b,onChange:he=>C(he.target.checked),style:Xn.checkbox}),R.jsxs("div",{style:Xn.checkboxText,children:[R.jsx("span",{style:{color:"#e0e0e0",fontWeight:"500"},children:"Enable AI Smart Deduplication"}),R.jsx("span",{style:Xn.helperText,children:'Slower, but accurately detects synonyms (e.g. "make angry" vs "provoke").'})]})]})})]}),R.jsx("p",{style:{color:"#aaa",fontSize:"0.9rem",marginBottom:"0.5rem"},children:"Paste the full podcast transcript text below. Gemini will extract key vocabulary for you."}),R.jsx("textarea",{value:s,onChange:he=>o(he.target.value),placeholder:"Paste transcript text here...",style:Xn.textarea,disabled:u}),I&&R.jsxs("div",{style:Xn.error,children:[" ",I]}),R.jsxs("div",{style:Xn.actions,children:[R.jsx("button",{onClick:e,disabled:u,style:{...Xn.btn,backgroundColor:"#555"},children:"Cancel"}),R.jsx("button",{onClick:$,disabled:u||!s.trim(),style:{...Xn.btn,backgroundColor:u?"#777":"#6366f1",opacity:!s.trim()||u?.6:1},children:u?"Analyzing...":"Analyze & Import"})]})]})})}const Xn={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,backdropFilter:"blur(3px)"},modal:{backgroundColor:"#1e2024",padding:"2rem",borderRadius:"12px",width:"90%",maxWidth:"600px",boxShadow:"0 10px 25px rgba(0,0,0,0.5)",border:"1px solid #333"},settingsContainer:{marginBottom:"1.5rem",padding:"1rem",backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"8px",border:"1px solid #2c2e33"},settingRow:{display:"flex",alignItems:"center",marginBottom:"1rem",gap:"1rem",flexWrap:"wrap"},settingLabel:{color:"#ccc",fontSize:"0.9rem",fontWeight:"500",minWidth:"80px"},optionGroup:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},optionBtn:{padding:"0.4rem 1rem",backgroundColor:"#2c2e33",border:"1px solid #444",borderRadius:"6px",color:"#aaa",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease"},optionBtnActive:{backgroundColor:"#6366f1",color:"#fff",borderColor:"#6366f1",boxShadow:"0 0 8px rgba(99, 102, 241, 0.4)"},checkboxLabel:{display:"flex",alignItems:"flex-start",cursor:"pointer",gap:"0.8rem"},checkbox:{marginTop:"0.3rem",width:"18px",height:"18px",cursor:"pointer",accentColor:"#6366f1"},checkboxText:{display:"flex",flexDirection:"column",gap:"0.2rem"},helperText:{color:"#888",fontSize:"0.8rem",lineHeight:"1.4"},textarea:{width:"100%",height:"250px",backgroundColor:"#131416",color:"#e0e0e0",border:"1px solid #444",borderRadius:"6px",padding:"0.8rem",fontFamily:"inherit",fontSize:"0.95rem",resize:"vertical",lineHeight:"1.5",boxSizing:"border-box"},error:{color:"#ff6b6b",marginTop:"1rem",fontSize:"0.9rem",padding:"0.5rem",backgroundColor:"rgba(255, 107, 107, 0.1)",borderRadius:"4px"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"1.5rem"},btn:{padding:"0.6rem 1.5rem",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"1rem"}};function GA({isOpen:i,onClose:e}){const[n,s]=_e.useState(""),[o,u]=_e.useState(!1),[d,g]=_e.useState(!1);_e.useEffect(()=>{i&&(s(vi.getApiKey()||""),g(vi.isPersistent()))},[i]);const[_,b]=_e.useState(()=>JSON.parse(localStorage.getItem("gp_settings_autoplay_tts"))||!1),[C,I]=_e.useState(()=>localStorage.getItem("gp_settings_learning_mode")||"sniper"),k=()=>{localStorage.setItem("gp_settings_autoplay_tts",JSON.stringify(_)),n.trim()?(vi.setApiKey(n.trim(),d),d?Ze.success("API Key  ()"):Ze.success("API Key  ( Session)")):(vi.removeApiKey(),Ze("API Key ")),localStorage.setItem("gp_settings_learning_mode",C),window.dispatchEvent(new Event("storage")),Ze.success("Settings saved!"),e()},$=()=>{s(""),g(!1),vi.removeApiKey(),Ze("API Key ")};return i?R.jsx("div",{style:mr.overlay,children:R.jsxs("div",{style:mr.modal,children:[R.jsx("h2",{style:{marginTop:0,color:"#fff"},children:"Settings"}),R.jsx("hr",{style:{borderColor:"#444",margin:"1.5rem 0"}}),R.jsxs("div",{style:mr.section,children:[R.jsx("h3",{style:{...mr.label,color:"#fff",fontSize:"1rem"},children:"Preferences"}),R.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[R.jsxs("label",{style:{color:"#ccc",fontSize:"0.9rem"},children:["Auto-play TTS on Flip",R.jsx("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"4px"},children:"Automatically read the example sentence when flipping to the back."})]}),R.jsx("div",{onClick:()=>b(!_),style:{width:"40px",height:"20px",backgroundColor:_?"#4caf50":"#444",borderRadius:"10px",position:"relative",cursor:"pointer",transition:"background-color 0.2s"},children:R.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:"#fff",borderRadius:"50%",position:"absolute",top:"2px",left:_?"22px":"2px",transition:"left 0.2s"}})})]})]}),R.jsxs("div",{style:mr.field,children:[R.jsx("h3",{style:{...mr.label,color:"#fff",fontSize:"1rem",marginBottom:"1rem"},children:"Learning Mode"}),R.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[R.jsxs("div",{onClick:()=>I("sniper"),style:{flex:1,padding:"1rem",borderRadius:"8px",border:C==="sniper"?"2px solid #2196f3":"1px solid #444",backgroundColor:C==="sniper"?"rgba(33, 150, 243, 0.1)":"transparent",cursor:"pointer",transition:"all 0.2s"},children:[R.jsx("strong",{style:{color:C==="sniper"?"#2196f3":"#aaa",display:"block",marginBottom:"0.5rem"},children:" Sniper Mode"}),R.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"#888"},children:"Context-first. Best for active recall and deep learning. (Auto-adapts based on progress)"})]}),R.jsxs("div",{onClick:()=>I("reading"),style:{flex:1,padding:"1rem",borderRadius:"8px",border:C==="reading"?"2px solid #4caf50":"1px solid #444",backgroundColor:C==="reading"?"rgba(76, 175, 80, 0.1)":"transparent",cursor:"pointer",transition:"all 0.2s"},children:[R.jsx("strong",{style:{color:C==="reading"?"#4caf50":"#aaa",display:"block",marginBottom:"0.5rem"},children:" Reading Mode"}),R.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"#888"},children:"Word-first. Best for quick review or low-energy sessions."})]})]})]}),R.jsx("hr",{style:{borderColor:"#444",margin:"1.5rem 0"}}),R.jsxs("div",{style:{marginBottom:"2rem"},children:[R.jsx("label",{style:mr.label,children:"Gemini API Key (BYOK)"}),R.jsxs("p",{style:mr.hint,children:[" Key  Google Gemini API",R.jsx("br",{}),""]}),R.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[R.jsx("input",{type:o?"text":"password",value:n,onChange:le=>s(le.target.value),placeholder:"AIzaSy...",style:mr.input}),R.jsx("button",{onClick:()=>u(!o),style:mr.iconBtn,title:"Toggle Visibility",children:o?"":""})]}),R.jsxs("div",{style:mr.checkboxContainer,children:[R.jsx("input",{type:"checkbox",id:"rememberKey",checked:d,onChange:le=>g(le.target.checked),style:{cursor:"pointer"}}),R.jsx("label",{htmlFor:"rememberKey",style:{...mr.label,marginBottom:0,cursor:"pointer",fontWeight:"normal",fontSize:"0.9rem"},children:" ()"})]}),d&&R.jsx("p",{style:{color:"#ff9800",fontSize:"0.8rem",marginTop:"0.2rem",marginLeft:"1.5rem"},children:"  Key  LocalStorage"})]}),R.jsx("hr",{style:{borderColor:"#444",margin:"1.5rem 0"}}),R.jsxs("div",{style:mr.actions,children:[R.jsx("button",{onClick:$,style:{...mr.btn,backgroundColor:"#d32f2f",marginRight:"auto"},children:"Clear Key"}),R.jsx("button",{onClick:e,style:{...mr.btn,backgroundColor:"#555"},children:"Close"}),R.jsx("button",{onClick:k,style:{...mr.btn,backgroundColor:"#4caf50"},children:"Save"})]})]})}):null}const mr={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},modal:{backgroundColor:"#2c2e33",padding:"2rem",borderRadius:"8px",width:"90%",maxWidth:"400px",boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},label:{display:"block",color:"#e0e0e0",fontWeight:"bold",marginBottom:"0.5rem"},hint:{color:"#aaa",fontSize:"0.85rem",marginBottom:"0.5rem",lineHeight:"1.4"},input:{flex:1,padding:"0.6rem",borderRadius:"4px",border:"1px solid #444",backgroundColor:"#1a1b1e",color:"#fff",fontFamily:"monospace"},iconBtn:{padding:"0 0.8rem",backgroundColor:"#444",border:"none",borderRadius:"4px",cursor:"pointer",color:"#fff"},checkboxContainer:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.5rem"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem"},btn:{padding:"0.5rem 1.2rem",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"}};function YA({isOpen:i,onClose:e,onSuccess:n}){const[s,o]=_e.useState("context"),[u,d]=_e.useState(""),[g,_]=_e.useState(""),[b,C]=_e.useState(""),[I,k]=_e.useState(""),[$,le]=_e.useState(""),[he,ge]=_e.useState([]),[Ve,Fe]=_e.useState(!1),[Pe,rt]=_e.useState(!1),[it,Re]=_e.useState(""),V=_e.useRef(null);if(!i)return null;const M=N=>{const Xe=N.target.selectionStart,Lt=N.target.selectionEnd,ce=N.target.value.substring(Xe,Lt).trim();ce&&(d(ce),k(N.target.value))},j=async()=>{if(!u.trim()){Ze.error("Please enter or select a word first");return}if(!vi.hasKey()){Ze.error("Please set your API Key in Settings first");return}Fe(!0);const N=Ze.loading(`Asking Gemini about "${u}"...`);try{const Xe=await vi.generateCardDetails(u);_(Xe.ipa||""),C(Xe.definition||""),k(Xe.context||I),le(Xe.translation||""),ge(Xe.collocations||[]),Ze.success("Auto-filled!",{id:N}),s==="context"&&o("manual")}catch(Xe){console.error(Xe),Ze.error(Xe.message,{id:N})}finally{Fe(!1),setTimeout(()=>Ze.dismiss(N),3e3)}},Y=async()=>{if(!u||!b){Ze.error("Word and Definition are required");return}try{await io.addCard({word:u,ipa:g,definition:b,context:I,translation:$,collocations:he,sourceType:s==="context"?"raw_sentence":"word_only"},{smartDeduplication:Pe}),Ze.success(`Added "${u}"`),d(""),_(""),C(""),k(""),le(""),ge([]),Re(""),n(),e()}catch(N){console.error(N),Ze.error(N.message)}},B=N=>{ge(N.target.value.split(","))},z=Ve||!u||!b;return R.jsx("div",{style:pt.overlay,children:R.jsxs("div",{style:pt.modal,children:[R.jsxs("div",{style:pt.header,children:[R.jsx("h2",{style:{margin:0,color:"#fff"},children:"Add New Card"}),R.jsxs("div",{style:pt.tabContainer,children:[R.jsxs("button",{style:s==="context"?pt.activeTab:pt.tab,onClick:()=>o("context"),children:[R.jsx(hw,{size:16,style:{marginRight:6}})," Context First"]}),R.jsxs("button",{style:s==="manual"?pt.activeTab:pt.tab,onClick:()=>o("manual"),children:[R.jsx(ow,{size:16,style:{marginRight:6}})," Manual / Edit"]})]})]}),s==="context"&&R.jsxs("div",{style:pt.tabContent,children:[R.jsx("div",{style:pt.infoBox,children:R.jsxs("p",{style:{margin:0},children:["Paste the full sentence, then ",R.jsx("strong",{children:"highlight"})," the word you want to learn."]})}),R.jsxs("div",{style:pt.field,children:[R.jsx("label",{style:pt.label,children:"Source Sentence / Podcast Transcript"}),R.jsx("textarea",{ref:V,style:{...pt.input,height:"120px",resize:"vertical"},value:it,onChange:N=>Re(N.target.value),onSelect:M,onTouchEnd:M,onKeyUp:M,placeholder:"e.g., The government is reluctant to change the law...",autoFocus:!0})]}),R.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"1rem",gap:"1rem"},children:[R.jsxs("div",{style:{flex:1,minWidth:0},children:[R.jsx("label",{style:pt.label,children:"Target Word"}),R.jsx("div",{style:pt.readOnlyField,children:u||R.jsx("span",{style:{color:"#555",fontStyle:"italic"},children:"Highlight text..."})})]}),R.jsx("button",{onClick:j,disabled:Ve||!u,style:{...pt.magicBtn,opacity:!u||Ve?.5:1,cursor:!u||Ve?"not-allowed":"pointer"},children:Ve?"Processing...":" Analyze"})]})]}),s==="manual"&&R.jsxs("div",{style:pt.tabContent,children:[R.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:R.jsx("button",{onClick:j,disabled:Ve,style:pt.magicBtn,title:"Regenerate",children:Ve?"...":" Auto-fill by Word"})}),R.jsxs("div",{style:pt.field,children:[R.jsx("label",{style:pt.label,children:"Word"}),R.jsx("input",{style:pt.input,value:u,onChange:N=>d(N.target.value),placeholder:"e.g. Serendipity"})]}),R.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[R.jsxs("div",{style:{...pt.field,flex:1},children:[R.jsx("label",{style:pt.label,children:"IPA"}),R.jsx("input",{style:pt.input,value:g,onChange:N=>_(N.target.value)})]}),R.jsxs("div",{style:{...pt.field,flex:1},children:[R.jsx("label",{style:pt.label,children:"Translation"}),R.jsx("input",{style:pt.input,value:$,onChange:N=>le(N.target.value)})]})]}),R.jsxs("div",{style:pt.field,children:[R.jsx("label",{style:pt.label,children:"Definition"}),R.jsx("textarea",{style:{...pt.input,height:"60px"},value:b,onChange:N=>C(N.target.value)})]}),R.jsxs("div",{style:pt.field,children:[R.jsx("label",{style:pt.label,children:"Context / Example"}),R.jsx("textarea",{style:{...pt.input,height:"60px"},value:I,onChange:N=>k(N.target.value)})]}),R.jsxs("div",{style:pt.field,children:[R.jsx("label",{style:pt.label,children:"Collocations"}),R.jsx("input",{style:pt.input,value:he.join(", "),onChange:B,placeholder:"e.g. reluctant to, deeply reluctant"})]})]}),R.jsx("div",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:R.jsxs("label",{style:pt.checkboxLabel,children:[R.jsx("input",{type:"checkbox",checked:Pe,onChange:N=>rt(N.target.checked),style:pt.checkbox}),R.jsxs("div",{style:pt.checkboxText,children:[R.jsx("span",{style:{color:"#e0e0e0",fontWeight:"500",fontSize:"0.9rem"},children:"Enable AI Smart Deduplication"}),R.jsx("span",{style:{color:"#888",fontSize:"0.8rem"},children:"Prevent adding synonyms or same meanings using AI check (Slower)."})]})]})}),R.jsxs("div",{style:pt.actions,children:[R.jsx("button",{onClick:e,style:{...pt.btn,backgroundColor:"#555"},children:"Cancel"}),R.jsx("button",{onClick:Y,disabled:z,style:{...pt.btn,backgroundColor:z?"#444":"#2196f3",color:z?"#888":"white",cursor:z?"not-allowed":"pointer",opacity:z?.7:1},children:"Save Card"})]})]})})}const pt={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},modal:{backgroundColor:"#2c2e33",padding:"1.5rem",borderRadius:"12px",width:"95%",maxWidth:"550px",boxShadow:"0 10px 25px rgba(0,0,0,0.5)",maxHeight:"90vh",overflowY:"auto"},header:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"1.5rem",borderBottom:"1px solid #444",paddingBottom:"1rem"},tabContainer:{display:"flex",gap:"0.5rem",backgroundColor:"#1a1b1e",padding:"4px",borderRadius:"8px",width:"100%"},tab:{flex:1,padding:"8px 12px",backgroundColor:"transparent",border:"none",color:"#888",cursor:"pointer",borderRadius:"6px",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center"},activeTab:{flex:1,padding:"8px 12px",backgroundColor:"#2196f3",border:"none",color:"white",cursor:"pointer",borderRadius:"6px",fontSize:"0.9rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center"},infoBox:{backgroundColor:"rgba(33, 150, 243, 0.1)",border:"1px solid #2196f3",borderRadius:"6px",padding:"0.8rem",color:"#90caf9",fontSize:"0.9rem",marginBottom:"1rem"},field:{marginBottom:"1rem"},label:{display:"block",color:"#aaa",fontSize:"0.85rem",marginBottom:"0.3rem"},input:{width:"100%",padding:"0.8rem",borderRadius:"4px",border:"1px solid #444",backgroundColor:"#1a1b1e",color:"#fff",fontSize:"1rem",boxSizing:"border-box",fontFamily:"inherit"},readOnlyField:{padding:"0.8rem",borderRadius:"4px",backgroundColor:"#25262b",border:"1px dashed #444",color:"#e91e63",fontWeight:"bold",minHeight:"45px",display:"flex",alignItems:"center",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},magicBtn:{padding:"0.8rem 1.2rem",backgroundColor:"transparent",border:"1px solid #e91e63",borderRadius:"30px",color:"#e91e63",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s",fontWeight:"bold",whiteSpace:"nowrap"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"1.5rem"},btn:{padding:"0.8rem 1.5rem",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"1rem"},checkboxLabel:{display:"flex",alignItems:"flex-start",cursor:"pointer",gap:"0.8rem",backgroundColor:"rgba(0,0,0,0.15)",padding:"0.8rem",borderRadius:"8px",border:"1px solid #333"},checkbox:{marginTop:"0.2rem",width:"16px",height:"16px",cursor:"pointer",accentColor:"#6366f1"},checkboxText:{display:"flex",flexDirection:"column",gap:"0.2rem"}};function QA({isOpen:i,onClose:e}){const[n,s]=_e.useState([]),[o,u]=_e.useState(null),[d,g]=_e.useState(!1),[_,b]=_e.useState(0),C=_e.useRef(null),[I,k]=_e.useState(!1),[$,le]=_e.useState(!1),[he,ge]=_e.useState(null);_e.useEffect(()=>{i&&(Ve(),g(!1),b(0),u(null),ge(null),k(!1))},[i]),_e.useEffect(()=>(d&&_>0?C.current=setTimeout(()=>{b(Re=>Re-1)},1e3):d&&_===0&&g(!1),()=>clearTimeout(C.current)),[d,_]);const Ve=async()=>{try{const Re=await io.getAllCards();Re.sort((V,M)=>M.updatedAt-V.updatedAt),s(Re)}catch(Re){console.error(Re),Ze.error("Failed to load cards")}},Fe=async Re=>{if(o!==Re){u(Re),setTimeout(()=>{u(V=>V===Re?null:V)},3e3);return}try{await io.deleteCard(Re),Ze.success("Card deleted"),u(null),Ve(),ge(null)}catch(V){console.error(V),Ze.error("Delete failed")}},Pe=async()=>{if(!d){g(!0),b(3);return}try{await io.clearAllCards(),Ze.success("All data cleared"),s([]),g(!1),ge(null)}catch(Re){console.error(Re),Ze.error("Clear failed")}},rt=async()=>{le(!0),ge(null);const Re=Ze.loading(I?"AI Scanning... (This may take a while)":"Scanning for duplicates...");try{const V=await io.scanForDuplicates({smartDeduplication:I});V.length===0?Ze.success("No duplicates found!",{id:Re}):(Ze.success(`Found ${V.length} duplicates.`,{id:Re}),ge({count:V.length,ids:V}))}catch(V){console.error(V),Ze.error("Scan failed: "+V.message,{id:Re})}finally{le(!1)}},it=async()=>{if(!he||he.count===0)return;const Re=Ze.loading("Cleaning up...");try{await io.bulkDeleteCards(he.ids),Ze.success(`Deleted ${he.count} duplicate cards.`,{id:Re}),ge(null),Ve()}catch(V){console.error(V),Ze.error("Cleanup failed",{id:Re})}};return i?R.jsx("div",{style:zn.overlay,children:R.jsxs("div",{style:zn.modal,children:[R.jsxs("div",{style:zn.header,children:[R.jsxs("h2",{style:{margin:0,color:"#fff"},children:["Manage Cards (",n.length,")"]}),R.jsx("button",{onClick:e,style:zn.closeBtn,children:""})]}),R.jsxs("div",{style:zn.toolsSection,children:[R.jsx("div",{style:zn.toolHeader,children:"Maintenance Tools"}),R.jsxs("div",{style:zn.toolRow,children:[R.jsxs("label",{style:zn.checkboxLabel,children:[R.jsx("input",{type:"checkbox",checked:I,onChange:Re=>k(Re.target.checked),style:zn.checkbox,disabled:$}),R.jsx("span",{style:{color:"#ccc"},children:"Enable AI Smart Deduplication"})]}),he?R.jsxs("button",{onClick:it,style:zn.fixBtn,children:["Delete ",he.count," Duplicates"]}):R.jsx("button",{onClick:rt,disabled:$||n.length===0,style:{...zn.toolBtn,backgroundColor:$?"#444":"#2196f3",cursor:$||n.length===0?"not-allowed":"pointer",opacity:n.length===0?.5:1},children:$?"Scanning...":"Check Duplicates"})]}),I&&R.jsx("div",{style:{fontSize:"0.8rem",color:"#888",marginTop:"0.3rem",marginLeft:"26px"},children:"Uses Gemini API to detect semantic duplicates. (Slower & Costs Tokens)"}),he&&R.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",color:"#ffb74d"},children:[" Found ",he.count," redundant cards (older or less reviewed)."]})]}),R.jsx("div",{style:zn.listContainer,children:n.length===0?R.jsx("p",{style:{color:"#888",textAlign:"center"},children:"No cards found."}):n.map(Re=>R.jsxs("div",{style:zn.cardRow,children:[R.jsxs("div",{style:zn.cardInfo,children:[R.jsx("div",{style:zn.word,children:Re.word}),R.jsxs("div",{style:zn.def,children:[Re.definition?.substring(0,50),"..."]})]}),R.jsx("button",{onClick:()=>Fe(Re.id),style:{...zn.deleteBtn,backgroundColor:o===Re.id?"#d32f2f":"#333",color:o===Re.id?"#fff":"#888",border:o===Re.id?"1px solid #ff5252":"1px solid #444",width:o===Re.id?"100px":"40px"},children:o===Re.id?"Sure?":""})]},Re.id))}),R.jsx("div",{style:zn.footer,children:R.jsx("button",{onClick:Pe,style:{...zn.dangerBtn,backgroundColor:d?"#d32f2f":"#3a1c1c",color:d?"#ffeb3b":"#ff6b6b",border:d?"1px solid #ffeb3b":"1px solid #ff6b6b"},children:d?`Confirm Clear All? (${_})`:"Clear All Local Data"})})]})}):null}const zn={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1050},modal:{backgroundColor:"#1e2024",width:"90%",maxWidth:"500px",maxHeight:"80vh",borderRadius:"12px",display:"flex",flexDirection:"column",boxShadow:"0 10px 25px rgba(0,0,0,0.5)",border:"1px solid #333"},header:{padding:"1.5rem",borderBottom:"1px solid #333",display:"flex",justifyContent:"space-between",alignItems:"center"},closeBtn:{background:"none",border:"none",color:"#888",fontSize:"1.2rem",cursor:"pointer"},toolsSection:{padding:"1rem 1.5rem",backgroundColor:"rgba(0,0,0,0.2)",borderBottom:"1px solid #333"},toolHeader:{color:"#888",fontSize:"0.75rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"0.8rem"},toolRow:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},checkboxLabel:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",fontSize:"0.9rem"},checkbox:{cursor:"pointer",accentColor:"#2196f3"},toolBtn:{padding:"0.5rem 1rem",border:"none",borderRadius:"6px",color:"white",fontWeight:"bold",fontSize:"0.85rem",whiteSpace:"nowrap"},fixBtn:{padding:"0.5rem 1rem",backgroundColor:"#d32f2f",border:"1px solid #ff5252",borderRadius:"6px",color:"white",fontWeight:"bold",fontSize:"0.85rem",cursor:"pointer",whiteSpace:"nowrap",animation:"pulse 2s infinite"},listContainer:{flex:1,overflowY:"auto",padding:"1rem"},cardRow:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.8rem",borderBottom:"1px solid #2c2e33"},cardInfo:{flex:1,marginRight:"1rem",overflow:"hidden"},word:{color:"#e0e0e0",fontWeight:"bold",marginBottom:"0.2rem"},def:{color:"#888",fontSize:"0.85rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},deleteBtn:{padding:"0.4rem",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.9rem",whiteSpace:"nowrap",display:"flex",justifyContent:"center",alignItems:"center"},footer:{padding:"1.5rem",borderTop:"1px solid #333"},dangerBtn:{width:"100%",padding:"0.8rem",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",transition:"all 0.2s ease"}};function $A({isOpen:i,onClose:e}){const[n,s]=_e.useState(""),[o,u]=_e.useState(!1),[d,g]=_e.useState([]),[_,b]=_e.useState(new Set);_e.useEffect(()=>{i&&C()},[i]),_e.useEffect(()=>{d.length>0&&I(Array.from(_))},[_,d]);const C=async()=>{u(!0);try{const le=await io.getDueCards(5);le.length===0?(Ze.error("No review data found."),g([])):(g(le),b(new Set(le.map(he=>he.word))))}catch(le){console.error("Error fetching data:",le),Ze.error("Failed to load review data")}finally{u(!1)}},I=le=>{if(le.length===0){s("Please select at least one word to generate the prompt.");return}const ge=`Create an engaging podcast script on a broad and interesting topic aligned with your persona's expertise. 

Your task is to naturally weave the following target vocabulary into this larger narrative: [${le.join(", ")}]. 

IMPORTANT: 
1. The content must NOT be limited only to these vocabularies. 
2. Build a rich, immersive context with a coherent storyline or argument including target vocabularies. 
3. Use the target words only as natural touchpoints within a flowing, full-length conversation. 
4. Keep the tone casual, authentic, conversational and educational. 
`;s(ge)},k=le=>{const he=new Set(_);he.has(le)?he.delete(le):he.add(le),b(he)},$=()=>{navigator.clipboard.writeText(n),Ze.success("Prompt copied to clipboard!")};return i?R.jsx("div",{style:rn.overlay,children:R.jsxs("div",{style:rn.modal,children:[R.jsxs("div",{style:rn.header,children:[R.jsx("h2",{style:rn.title,children:"Review Session Ready"}),R.jsx("button",{onClick:e,style:rn.closeBtn,children:""})]}),o?R.jsxs("div",{style:rn.loadingState,children:[R.jsx("div",{style:rn.spinner}),R.jsx("p",{children:"Analyzing your progress..."})]}):R.jsxs("div",{style:rn.content,children:[R.jsx("div",{style:rn.statsRow,children:R.jsxs("div",{style:{...rn.statCard,backgroundColor:"rgba(52, 152, 219, 0.15)",borderColor:"#3498db"},children:[R.jsx("div",{style:rn.statLabel,children:"Target Vocabulary Count"}),R.jsx("div",{style:{...rn.statValue,color:"#3498db"},children:_.size})]})}),R.jsxs("div",{style:rn.section,children:[R.jsxs("div",{style:rn.sectionHeader,children:[R.jsx("span",{style:rn.sectionTitle,children:"Target Words"}),R.jsx("span",{style:rn.sectionSubtitle,children:"Click to include/exclude"})]}),R.jsx("div",{style:rn.chipsContainer,children:d.map(le=>{const he=_.has(le.word);return R.jsx("button",{onClick:()=>k(le.word),style:{...rn.chip,...he?rn.chipSelected:rn.chipUnselected},children:le.word},le.word)})})]}),R.jsxs("div",{style:rn.section,children:[R.jsx("div",{style:rn.sectionTitle,children:"Generated Prompt"}),R.jsx("textarea",{value:n,readOnly:!0,style:rn.textarea})]}),R.jsx("button",{onClick:$,disabled:_.size===0,style:{...rn.copyBtn,opacity:_.size===0?.5:1,cursor:_.size===0?"not-allowed":"pointer"},children:"Copy Prompt to Clipboard"})]})]})}):null}const rn={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,backdropFilter:"blur(3px)"},modal:{backgroundColor:"#1e1e1e",padding:"2rem",borderRadius:"16px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 50px rgba(0,0,0,0.5)",color:"#e0e0e0",fontFamily:"'Inter', system-ui, sans-serif",border:"1px solid #333"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.5rem",fontWeight:"700",color:"#fff",letterSpacing:"-0.02em"},closeBtn:{background:"none",border:"none",color:"#666",fontSize:"2rem",cursor:"pointer",lineHeight:1,padding:"0 0.5rem",transition:"color 0.2s"},loadingState:{padding:"3rem",textAlign:"center",color:"#888"},content:{display:"flex",flexDirection:"column",gap:"1.5rem"},statsRow:{display:"flex",width:"100%"},statCard:{flex:1,padding:"1rem",borderRadius:"12px",border:"1px solid",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},statLabel:{fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"#aaa",marginBottom:"0.3rem",fontWeight:"600"},statValue:{fontSize:"1.8rem",fontWeight:"800"},section:{display:"flex",flexDirection:"column",gap:"0.8rem"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},sectionTitle:{fontSize:"0.95rem",fontWeight:"600",color:"#ccc"},sectionSubtitle:{fontSize:"0.75rem",color:"#666"},chipsContainer:{display:"flex",flexWrap:"wrap",gap:"0.6rem",padding:"1rem",backgroundColor:"#25262b",borderRadius:"12px",border:"1px solid #333",maxHeight:"150px",overflowY:"auto"},chip:{padding:"0.4rem 0.9rem",borderRadius:"50px",fontSize:"0.85rem",fontWeight:"500",cursor:"pointer",border:"1px solid",transition:"all 0.2s ease",outline:"none"},chipSelected:{backgroundColor:"rgba(52, 152, 219, 0.2)",borderColor:"#3498db",color:"#3498db",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},chipUnselected:{backgroundColor:"transparent",borderColor:"#444",color:"#666",textDecoration:"line-through",opacity:.6},textarea:{width:"100%",height:"120px",backgroundColor:"#25262b",border:"1px solid #333",borderRadius:"12px",padding:"1rem",color:"#aaa",fontSize:"0.85rem",lineHeight:"1.6",resize:"none",boxSizing:"border-box"},copyBtn:{backgroundColor:"#3498db",color:"white",border:"none",padding:"1rem",borderRadius:"12px",fontSize:"1rem",fontWeight:"600",width:"100%",transition:"transform 0.1s, background 0.2s",boxShadow:"0 4px 15px rgba(52, 152, 219, 0.3)",cursor:"pointer"}};class XA{async getStats(){const[e,n,s]=await Promise.all([this.getMasteryDistribution(),this.getWeeklyActivity(),this.getRetentionStats()]);return{distribution:e,activity:n,retention:s}}async getMasteryDistribution(){const e=await Yt.vocab.count(),n=await Yt.vocab.where("status").equals("new").count(),s=await Yt.vocab.where("status").equals("learning").count(),o=await Yt.vocab.where("status").equals("review").count();return{total:e,breakdown:[{label:"New",count:n,color:"#94a3b8"},{label:"Learning",count:s,color:"#facc15"},{label:"Review",count:o,color:"#4ade80"}]}}async getWeeklyActivity(){const e=new Date,n=[],s=new Date;s.setDate(e.getDate()-6),s.setHours(0,0,0,0);const o=await Yt.study_logs.where("reviewTime").aboveOrEqual(s.getTime()).toArray();for(let u=0;u<7;u++){const d=new Date(s);d.setDate(d.getDate()+u);const g=d.setHours(0,0,0,0),_=d.setHours(23,59,59,999),b=o.filter(C=>C.reviewTime>=g&&C.reviewTime<=_).length;n.push({date:d.toLocaleDateString("en-US",{month:"short",day:"numeric"}),weekday:d.toLocaleDateString("en-US",{weekday:"short"}),count:b,height:0})}return n}async getRetentionStats(){const e=await Yt.study_logs.orderBy("reviewTime").reverse().limit(50).toArray();if(e.length===0)return{accuracy:0,count:0};const n=e.filter(o=>o.grade>=3).length;return{accuracy:Math.round(n/e.length*100),sampleSize:e.length}}}const WA=new XA;function JA({onBack:i}){const[e,n]=_e.useState(null),[s,o]=_e.useState(!0);_e.useEffect(()=>{u()},[]);const u=async()=>{try{const g=await WA.getStats();n(g)}catch(g){console.error("Failed to load dashboard stats:",g)}finally{o(!1)}};if(s)return R.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#888"},children:"Loading Stats..."});if(!e)return null;const d=Math.max(...e.activity.map(g=>g.count),1);return R.jsxs("div",{style:sr.container,children:[R.jsxs("div",{style:sr.header,children:[R.jsx("button",{onClick:i,style:sr.backBtn,children:R.jsx(XS,{size:24,color:"#e0e0e0"})}),R.jsx("h1",{style:sr.title,children:"Learning Dashboard"})]}),R.jsxs("div",{style:sr.grid,children:[R.jsx(Bp,{icon:R.jsx(JS,{size:20,color:"#4dabf7"}),label:"Total Cards",value:e.distribution.total,subtext:"Vocabulary & Phrases"}),R.jsx(Bp,{icon:R.jsx(QS,{size:20,color:"#69db7c"}),label:"7-Day Reviews",value:e.activity.reduce((g,_)=>g+_.count,0),subtext:"Cards reviewed"}),R.jsx(Bp,{icon:R.jsx(vw,{size:20,color:"#da77f2"}),label:"Retention Rate",value:`${e.retention.accuracy}%`,subtext:`Last ${e.retention.sampleSize} reviews`})]}),R.jsxs("div",{style:sr.chartsGrid,children:[R.jsxs("div",{style:sr.card,children:[R.jsx("h3",{style:sr.cardTitle,children:"Weekly Activity"}),R.jsx("div",{style:sr.barChartContainer,children:e.activity.map((g,_)=>R.jsxs("div",{style:sr.barGroup,children:[R.jsx("div",{title:`${g.count} cards`,style:{...sr.bar,height:`${g.count/d*100}%`}}),R.jsx("span",{style:sr.label,children:g.weekday})]},_))})]}),R.jsxs("div",{style:sr.card,children:[R.jsx("h3",{style:sr.cardTitle,children:"Mastery Distribution"}),R.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem"},children:[R.jsxs("div",{style:{position:"relative",width:"160px",height:"160px",flexShrink:0},children:[R.jsx("div",{style:{width:"100%",height:"100%",borderRadius:"50%",background:`conic-gradient(
                    ${e.distribution.breakdown[0].color} 0% ${zh(e.distribution,0)}%, 
                    ${e.distribution.breakdown[1].color} ${zh(e.distribution,0)}% ${zh(e.distribution,1)}%,
                    ${e.distribution.breakdown[2].color} ${zh(e.distribution,1)}% 100%
                  )`}}),R.jsxs("div",{style:sr.donutInner,children:[R.jsx("span",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#e0e0e0"},children:e.distribution.total}),R.jsx("span",{style:{fontSize:"0.8rem",color:"#888"},children:"Cards"})]})]}),R.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.8rem"},children:e.distribution.breakdown.map((g,_)=>R.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[R.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[R.jsx("span",{style:{width:"12px",height:"12px",borderRadius:"50%",marginRight:"8px",backgroundColor:g.color}}),R.jsx("span",{style:{fontSize:"0.9rem",color:"#ccc"},children:g.label})]}),R.jsx("span",{style:{fontSize:"0.9rem",fontWeight:"600",color:"#e0e0e0"},children:g.count})]},_))})]})]})]})]})}function zh(i,e){if(i.total===0)return 0;let n=0;for(let s=0;s<=e;s++)n+=i.breakdown[s].count;return n/i.total*100}function Bp({icon:i,label:e,value:n,subtext:s}){return R.jsxs("div",{style:{...sr.card,display:"flex",alignItems:"flex-start",gap:"1rem"},children:[R.jsx("div",{style:sr.iconWrapper,children:i}),R.jsxs("div",{children:[R.jsx("p",{style:{fontSize:"0.85rem",color:"#888",margin:0},children:e}),R.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#e0e0e0",margin:"0.2rem 0"},children:n}),R.jsx("p",{style:{fontSize:"0.75rem",color:"#666",margin:0},children:s})]})]})}const sr={container:{maxWidth:"900px",width:"100%",margin:"0 auto",paddingBottom:"5rem"},header:{display:"flex",alignItems:"center",marginBottom:"1.5rem",gap:"1rem"},backBtn:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s"},title:{fontSize:"1.5rem",fontWeight:"bold",color:"#e0e0e0",margin:0},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},chartsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},card:{backgroundColor:"#25262b",padding:"1.5rem",borderRadius:"12px",border:"1px solid #333",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},cardTitle:{fontSize:"1.1rem",fontWeight:"600",color:"#e0e0e0",marginBottom:"1.5rem",marginTop:0},iconWrapper:{padding:"0.75rem",backgroundColor:"#2c2e33",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},barChartContainer:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",height:"180px",gap:"0.5rem"},barGroup:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,height:"100%",justifyContent:"flex-end"},bar:{width:"100%",maxWidth:"30px",backgroundColor:"#339af0",borderRadius:"4px 4px 0 0",minHeight:"4px",transition:"height 0.5s ease"},label:{fontSize:"0.75rem",color:"#888",marginTop:"0.5rem",fontWeight:"500"},donutInner:{position:"absolute",inset:"16px",backgroundColor:"#25262b",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.2)"}},ZA=()=>{};var n0={};const Hb=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},eC=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],d=i[n++],g=i[n++],_=((o&7)<<18|(u&63)<<12|(d&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(_>>10)),e[s++]=String.fromCharCode(56320+(_&1023))}else{const u=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},Fb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],d=o+1<i.length,g=d?i[o+1]:0,_=o+2<i.length,b=_?i[o+2]:0,C=u>>2,I=(u&3)<<4|g>>4;let k=(g&15)<<2|b>>6,$=b&63;_||($=64,d||(k=64)),s.push(n[C],n[I],n[k],n[$])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Hb(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):eC(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],g=o<i.length?n[i.charAt(o)]:0;++o;const b=o<i.length?n[i.charAt(o)]:64;++o;const I=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||g==null||b==null||I==null)throw new tC;const k=u<<2|g>>4;if(s.push(k),b!==64){const $=g<<4&240|b>>2;if(s.push($),I!==64){const le=b<<6&192|I;s.push(le)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class tC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nC=function(i){const e=Hb(i);return Fb.encodeByteArray(e,!0)},cf=function(i){return nC(i).replace(/\./g,"")},Kb=function(i){try{return Fb.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function rC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const iC=()=>rC().__FIREBASE_DEFAULTS__,sC=()=>{if(typeof process>"u"||typeof n0>"u")return;const i=n0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},aC=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Kb(i[1]);return e&&JSON.parse(e)},Nf=()=>{try{return ZA()||iC()||sC()||aC()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Gb=i=>Nf()?.emulatorHosts?.[i],oC=i=>{const e=Gb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Yb=()=>Nf()?.config,Qb=i=>Nf()?.[`_${i}`];class lC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function ru(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $b(i){return(await fetch(i,{credentials:"include"})).ok}function uC(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[cf(JSON.stringify(n)),cf(JSON.stringify(d)),""].join(".")}const ec={};function cC(){const i={prod:[],emulator:[]};for(const e of Object.keys(ec))ec[e]?i.emulator.push(e):i.prod.push(e);return i}function hC(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let r0=!1;function Xb(i,e){if(typeof window>"u"||typeof document>"u"||!ru(window.location.host)||ec[i]===e||ec[i]||r0)return;ec[i]=e;function n(k){return`__firebase__banner__${k}`}const s="__firebase__banner",u=cC().prod.length>0;function d(){const k=document.getElementById(s);k&&k.remove()}function g(k){k.style.display="flex",k.style.background="#7faaf0",k.style.position="fixed",k.style.bottom="5px",k.style.left="5px",k.style.padding=".5em",k.style.borderRadius="5px",k.style.alignItems="center"}function _(k,$){k.setAttribute("width","24"),k.setAttribute("id",$),k.setAttribute("height","24"),k.setAttribute("viewBox","0 0 24 24"),k.setAttribute("fill","none"),k.style.marginLeft="-6px"}function b(){const k=document.createElement("span");return k.style.cursor="pointer",k.style.marginLeft="16px",k.style.fontSize="24px",k.innerHTML=" &times;",k.onclick=()=>{r0=!0,d()},k}function C(k,$){k.setAttribute("id",$),k.innerText="Learn more",k.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",k.setAttribute("target","__blank"),k.style.paddingLeft="5px",k.style.textDecoration="underline"}function I(){const k=hC(s),$=n("text"),le=document.getElementById($)||document.createElement("span"),he=n("learnmore"),ge=document.getElementById(he)||document.createElement("a"),Ve=n("preprendIcon"),Fe=document.getElementById(Ve)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(k.created){const Pe=k.element;g(Pe),C(ge,he);const rt=b();_(Fe,Ve),Pe.append(Fe,le,ge,rt),document.body.appendChild(Pe)}u?(le.innerText="Preview backend disconnected.",Fe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Fe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,le.innerText="Preview backend running in this workspace."),le.setAttribute("id",$)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}function br(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(br())}function dC(){const i=Nf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mC(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function gC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yC(){const i=br();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function vC(){return!dC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _C(){try{return typeof indexedDB=="object"}catch{return!1}}function bC(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const EC="FirebaseError";class ga extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=EC,Object.setPrototypeOf(this,ga.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tc.prototype.create)}}class Tc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?TC(u,s):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new ga(o,g,s)}}function TC(i,e){return i.replace(SC,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const SC=/\{\$([^}]+)}/g;function wC(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function el(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],d=e[o];if(i0(u)&&i0(d)){if(!el(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function i0(i){return i!==null&&typeof i=="object"}function Sc(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function AC(i,e){const n=new CC(i,e);return n.subscribe.bind(n)}class CC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");xC(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=qp),o.error===void 0&&(o.error=qp),o.complete===void 0&&(o.complete=qp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xC(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function qp(){}function Hi(i){return i&&i._delegate?i._delegate:i}class tl{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Qo="[DEFAULT]";class RC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new lC;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OC(e))try{this.getOrInitializeService({instanceIdentifier:Qo})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qo){return this.instances.has(e)}getOptions(e=Qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);s===g&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:IC(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Qo){return this.component?this.component.multipleInstances?e:Qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IC(i){return i===Qo?void 0:i}function OC(i){return i.instantiationMode==="EAGER"}class DC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var wt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(wt||(wt={}));const NC={debug:wt.DEBUG,verbose:wt.VERBOSE,info:wt.INFO,warn:wt.WARN,error:wt.ERROR,silent:wt.SILENT},kC=wt.INFO,MC={[wt.DEBUG]:"log",[wt.VERBOSE]:"log",[wt.INFO]:"info",[wt.WARN]:"warn",[wt.ERROR]:"error"},VC=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=MC[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dm{constructor(e){this.name=e,this._logLevel=kC,this._logHandler=VC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,wt.DEBUG,...e),this._logHandler(this,wt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,wt.VERBOSE,...e),this._logHandler(this,wt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,wt.INFO,...e),this._logHandler(this,wt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,wt.WARN,...e),this._logHandler(this,wt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,wt.ERROR,...e),this._logHandler(this,wt.ERROR,...e)}}const PC=(i,e)=>e.some(n=>i instanceof n);let s0,a0;function jC(){return s0||(s0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LC(){return a0||(a0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wb=new WeakMap,rm=new WeakMap,Jb=new WeakMap,Hp=new WeakMap,Nm=new WeakMap;function UC(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{n(ho(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Wb.set(n,i)}).catch(()=>{}),Nm.set(e,i),e}function zC(i){if(rm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});rm.set(i,e)}let im={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return rm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Jb.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ho(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function BC(i){im=i(im)}function qC(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Fp(this),e,...n);return Jb.set(s,e.sort?e.sort():[e]),ho(s)}:LC().includes(i)?function(...e){return i.apply(Fp(this),e),ho(Wb.get(this))}:function(...e){return ho(i.apply(Fp(this),e))}}function HC(i){return typeof i=="function"?qC(i):(i instanceof IDBTransaction&&zC(i),PC(i,jC())?new Proxy(i,im):i)}function ho(i){if(i instanceof IDBRequest)return UC(i);if(Hp.has(i))return Hp.get(i);const e=HC(i);return e!==i&&(Hp.set(i,e),Nm.set(e,i)),e}const Fp=i=>Nm.get(i);function FC(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(i,e),g=ho(d);return s&&d.addEventListener("upgradeneeded",_=>{s(ho(d.result),_.oldVersion,_.newVersion,ho(d.transaction),_)}),n&&d.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),g.then(_=>{u&&_.addEventListener("close",()=>u()),o&&_.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),g}const KC=["get","getKey","getAll","getAllKeys","count"],GC=["put","add","delete","clear"],Kp=new Map;function o0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Kp.get(e))return Kp.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=GC.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||KC.includes(n)))return;const u=async function(d,...g){const _=this.transaction(d,o?"readwrite":"readonly");let b=_.store;return s&&(b=b.index(g.shift())),(await Promise.all([b[n](...g),o&&_.done]))[0]};return Kp.set(e,u),u}BC(i=>({...i,get:(e,n,s)=>o0(e,n)||i.get(e,n,s),has:(e,n)=>!!o0(e,n)||i.has(e,n)}));class YC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QC(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function QC(i){return i.getComponent()?.type==="VERSION"}const sm="@firebase/app",l0="0.14.6";const fa=new Dm("@firebase/app"),$C="@firebase/app-compat",XC="@firebase/analytics-compat",WC="@firebase/analytics",JC="@firebase/app-check-compat",ZC="@firebase/app-check",ex="@firebase/auth",tx="@firebase/auth-compat",nx="@firebase/database",rx="@firebase/data-connect",ix="@firebase/database-compat",sx="@firebase/functions",ax="@firebase/functions-compat",ox="@firebase/installations",lx="@firebase/installations-compat",ux="@firebase/messaging",cx="@firebase/messaging-compat",hx="@firebase/performance",fx="@firebase/performance-compat",dx="@firebase/remote-config",px="@firebase/remote-config-compat",mx="@firebase/storage",gx="@firebase/storage-compat",yx="@firebase/firestore",vx="@firebase/ai",_x="@firebase/firestore-compat",bx="firebase",Ex="12.6.0";const am="[DEFAULT]",Tx={[sm]:"fire-core",[$C]:"fire-core-compat",[WC]:"fire-analytics",[XC]:"fire-analytics-compat",[ZC]:"fire-app-check",[JC]:"fire-app-check-compat",[ex]:"fire-auth",[tx]:"fire-auth-compat",[nx]:"fire-rtdb",[rx]:"fire-data-connect",[ix]:"fire-rtdb-compat",[sx]:"fire-fn",[ax]:"fire-fn-compat",[ox]:"fire-iid",[lx]:"fire-iid-compat",[ux]:"fire-fcm",[cx]:"fire-fcm-compat",[hx]:"fire-perf",[fx]:"fire-perf-compat",[dx]:"fire-rc",[px]:"fire-rc-compat",[mx]:"fire-gcs",[gx]:"fire-gcs-compat",[yx]:"fire-fst",[_x]:"fire-fst-compat",[vx]:"fire-vertex","fire-js":"fire-js",[bx]:"fire-js-all"};const hf=new Map,Sx=new Map,om=new Map;function u0(i,e){try{i.container.addComponent(e)}catch(n){fa.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function $l(i){const e=i.name;if(om.has(e))return fa.debug(`There were multiple attempts to register component ${e}.`),!1;om.set(e,i);for(const n of hf.values())u0(n,i);for(const n of Sx.values())u0(n,i);return!0}function km(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function ns(i){return i==null?!1:i.settings!==void 0}const wx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fo=new Tc("app","Firebase",wx);class Ax{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new tl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fo.create("app-deleted",{appName:this._name})}}const iu=Ex;function Zb(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:am,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw fo.create("bad-app-name",{appName:String(o)});if(n||(n=Yb()),!n)throw fo.create("no-options");const u=hf.get(o);if(u){if(el(n,u.options)&&el(s,u.config))return u;throw fo.create("duplicate-app",{appName:o})}const d=new DC(o);for(const _ of om.values())d.addComponent(_);const g=new Ax(n,s,d);return hf.set(o,g),g}function eE(i=am){const e=hf.get(i);if(!e&&i===am&&Yb())return Zb();if(!e)throw fo.create("no-app",{appName:i});return e}function po(i,e,n){let s=Tx[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fa.warn(d.join(" "));return}$l(new tl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const Cx="firebase-heartbeat-database",xx=1,cc="firebase-heartbeat-store";let Gp=null;function tE(){return Gp||(Gp=FC(Cx,xx,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(cc)}catch(n){console.warn(n)}}}}).catch(i=>{throw fo.create("idb-open",{originalErrorMessage:i.message})})),Gp}async function Rx(i){try{const n=(await tE()).transaction(cc),s=await n.objectStore(cc).get(nE(i));return await n.done,s}catch(e){if(e instanceof ga)fa.warn(e.message);else{const n=fo.create("idb-get",{originalErrorMessage:e?.message});fa.warn(n.message)}}}async function c0(i,e){try{const s=(await tE()).transaction(cc,"readwrite");await s.objectStore(cc).put(e,nE(i)),await s.done}catch(n){if(n instanceof ga)fa.warn(n.message);else{const s=fo.create("idb-set",{originalErrorMessage:n?.message});fa.warn(s.message)}}}function nE(i){return`${i.name}!${i.options.appId}`}const Ix=1024,Ox=30;class Dx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kx(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=h0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>Ox){const o=Mx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=h0(),{heartbeatsToSend:n,unsentEntries:s}=Nx(this._heartbeatsCache.heartbeats),o=cf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return fa.warn(e),""}}}function h0(){return new Date().toISOString().substring(0,10)}function Nx(i,e=Ix){const n=[];let s=i.slice();for(const o of i){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),f0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),f0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class kx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _C()?bC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Rx(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return c0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return c0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function f0(i){return cf(JSON.stringify({version:2,heartbeats:i})).length}function Mx(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function Vx(i){$l(new tl("platform-logger",e=>new YC(e),"PRIVATE")),$l(new tl("heartbeat",e=>new Dx(e),"PRIVATE")),po(sm,l0,i),po(sm,l0,"esm2020"),po("fire-js","")}Vx("");var Px="firebase",jx="12.6.0";po(Px,jx,"app");function rE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Lx=rE,iE=new Tc("auth","Firebase",rE());const ff=new Dm("@firebase/auth");function Ux(i,...e){ff.logLevel<=wt.WARN&&ff.warn(`Auth (${iu}): ${i}`,...e)}function Wh(i,...e){ff.logLevel<=wt.ERROR&&ff.error(`Auth (${iu}): ${i}`,...e)}function Rs(i,...e){throw Vm(i,...e)}function ss(i,...e){return Vm(i,...e)}function Mm(i,e,n){const s={...Lx(),[e]:n};return new Tc("auth","Firebase",s).create(e,{appName:i.name})}function Wo(i){return Mm(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zx(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Rs(i,"argument-error"),Mm(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Vm(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return iE.create(i,...e)}function at(i,e,...n){if(!i)throw Vm(e,...n)}function la(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Wh(e),new Error(e)}function da(i,e){i||la(e)}function lm(){return typeof self<"u"&&self.location?.href||""}function Bx(){return d0()==="http:"||d0()==="https:"}function d0(){return typeof self<"u"&&self.location?.protocol||null}function qx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Bx()||mC()||"connection"in navigator)?navigator.onLine:!0}function Hx(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class wc{constructor(e,n){this.shortDelay=e,this.longDelay=n,da(n>e,"Short delay should be less than long delay!"),this.isMobile=fC()||gC()}get(){return qx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pm(i,e){da(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class sE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;la("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;la("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;la("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Fx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Kx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Gx=new wc(3e4,6e4);function jm(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function su(i,e,n,s,o={}){return aE(i,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const g=Sc({key:i.config.apiKey,...d}).slice(1),_=await i._getAdditionalHeaders();_["Content-Type"]="application/json",i.languageCode&&(_["X-Firebase-Locale"]=i.languageCode);const b={method:e,headers:_,...u};return pC()||(b.referrerPolicy="no-referrer"),i.emulatorConfig&&ru(i.emulatorConfig.host)&&(b.credentials="include"),sE.fetch()(await oE(i,i.config.apiHost,n,g),b)})}async function aE(i,e,n){i._canInitEmulator=!1;const s={...Fx,...e};try{const o=new Qx(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Bh(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const g=u.ok?d.errorMessage:d.error.message,[_,b]=g.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bh(i,"credential-already-in-use",d);if(_==="EMAIL_EXISTS")throw Bh(i,"email-already-in-use",d);if(_==="USER_DISABLED")throw Bh(i,"user-disabled",d);const C=s[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw Mm(i,C,b);Rs(i,C)}}catch(o){if(o instanceof ga)throw o;Rs(i,"network-request-failed",{message:String(o)})}}async function Yx(i,e,n,s,o={}){const u=await su(i,e,n,s,o);return"mfaPendingCredential"in u&&Rs(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function oE(i,e,n,s){const o=`${e}${n}?${s}`,u=i,d=u.config.emulator?Pm(i.config,o):`${i.config.apiScheme}://${o}`;return Kx.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}class Qx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ss(this.auth,"network-request-failed")),Gx.get())})}}function Bh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=ss(i,e,s);return o.customData._tokenResponse=n,o}async function $x(i,e){return su(i,"POST","/v1/accounts:delete",e)}async function df(i,e){return su(i,"POST","/v1/accounts:lookup",e)}function tc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Xx(i,e=!1){const n=Hi(i),s=await n.getIdToken(e),o=Lm(s);at(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:s,authTime:tc(Yp(o.auth_time)),issuedAtTime:tc(Yp(o.iat)),expirationTime:tc(Yp(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Yp(i){return Number(i)*1e3}function Lm(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return Wh("JWT malformed, contained fewer than 3 sections"),null;try{const o=Kb(n);return o?JSON.parse(o):(Wh("Failed to decode base64 JWT payload"),null)}catch(o){return Wh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function p0(i){const e=Lm(i);return at(e,"internal-error"),at(typeof e.exp<"u","internal-error"),at(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function hc(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ga&&Wx(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function Wx({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class Jx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class um{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=tc(this.lastLoginAt),this.creationTime=tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function pf(i){const e=i.auth,n=await i.getIdToken(),s=await hc(i,df(e,{idToken:n}));at(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?lE(o.providerUserInfo):[],d=eR(i.providerData,u),g=i.isAnonymous,_=!(i.email&&o.passwordHash)&&!d?.length,b=g?_:!1,C={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new um(o.createdAt,o.lastLoginAt),isAnonymous:b};Object.assign(i,C)}async function Zx(i){const e=Hi(i);await pf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eR(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function lE(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function tR(i,e){const n=await aE(i,{},async()=>{const s=Sc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,d=await oE(i,o,"/v1/token",`key=${u}`),g=await i._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:g,body:s};return i.emulatorConfig&&ru(i.emulatorConfig.host)&&(_.credentials="include"),sE.fetch()(d,_)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nR(i,e){return su(i,"POST","/v2/accounts:revokeToken",jm(i,e))}class Kl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){at(e.idToken,"internal-error"),at(typeof e.idToken<"u","internal-error"),at(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):p0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){at(e.length!==0,"internal-error");const n=p0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(at(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await tR(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new Kl;return s&&(at(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(at(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(at(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kl,this.toJSON())}_performRefresh(){return la("not implemented")}}function no(i,e){at(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class rs{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new Jx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new um(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await hc(this,this.stsTokenManager.getToken(this.auth,e));return at(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Xx(this,e)}reload(){return Zx(this)}_assign(e){this!==e&&(at(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new rs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){at(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await pf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ns(this.auth.app))return Promise.reject(Wo(this.auth));const e=await this.getIdToken();return await hc(this,$x(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,g=n.tenantId??void 0,_=n._redirectEventId??void 0,b=n.createdAt??void 0,C=n.lastLoginAt??void 0,{uid:I,emailVerified:k,isAnonymous:$,providerData:le,stsTokenManager:he}=n;at(I&&he,e,"internal-error");const ge=Kl.fromJSON(this.name,he);at(typeof I=="string",e,"internal-error"),no(s,e.name),no(o,e.name),at(typeof k=="boolean",e,"internal-error"),at(typeof $=="boolean",e,"internal-error"),no(u,e.name),no(d,e.name),no(g,e.name),no(_,e.name),no(b,e.name),no(C,e.name);const Ve=new rs({uid:I,auth:e,email:o,emailVerified:k,displayName:s,isAnonymous:$,photoURL:d,phoneNumber:u,tenantId:g,stsTokenManager:ge,createdAt:b,lastLoginAt:C});return le&&Array.isArray(le)&&(Ve.providerData=le.map(Fe=>({...Fe}))),_&&(Ve._redirectEventId=_),Ve}static async _fromIdTokenResponse(e,n,s=!1){const o=new Kl;o.updateFromServerResponse(n);const u=new rs({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await pf(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];at(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?lE(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,g=new Kl;g.updateFromIdToken(s);const _=new rs({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:d}),b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new um(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(_,b),_}}const m0=new Map;function ua(i){da(i instanceof Function,"Expected a class definition");let e=m0.get(i);return e?(da(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,m0.set(i,e),e)}class uE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uE.type="NONE";const g0=uE;function Jh(i,e,n){return`firebase:${i}:${e}:${n}`}class Gl{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Jh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Jh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await df(this.auth,{idToken:e}).catch(()=>{});return n?rs._fromGetAccountInfoResponse(this.auth,n,e):null}return rs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Gl(ua(g0),e,s);const o=(await Promise.all(n.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let u=o[0]||ua(g0);const d=Jh(s,e.config.apiKey,e.name);let g=null;for(const b of n)try{const C=await b._get(d);if(C){let I;if(typeof C=="string"){const k=await df(e,{idToken:C}).catch(()=>{});if(!k)break;I=await rs._fromGetAccountInfoResponse(e,k,C)}else I=rs._fromJSON(e,C);b!==u&&(g=I),u=b;break}}catch{}const _=o.filter(b=>b._shouldAllowMigration);return!u._shouldAllowMigration||!_.length?new Gl(u,e,s):(u=_[0],g&&await u._set(d,g.toJSON()),await Promise.all(n.map(async b=>{if(b!==u)try{await b._remove(d)}catch{}})),new Gl(u,e,s))}}function y0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mE(e))return"Blackberry";if(gE(e))return"Webos";if(hE(e))return"Safari";if((e.includes("chrome/")||fE(e))&&!e.includes("edge/"))return"Chrome";if(pE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function cE(i=br()){return/firefox\//i.test(i)}function hE(i=br()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fE(i=br()){return/crios\//i.test(i)}function dE(i=br()){return/iemobile/i.test(i)}function pE(i=br()){return/android/i.test(i)}function mE(i=br()){return/blackberry/i.test(i)}function gE(i=br()){return/webos/i.test(i)}function Um(i=br()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function rR(i=br()){return Um(i)&&!!window.navigator?.standalone}function iR(){return yC()&&document.documentMode===10}function yE(i=br()){return Um(i)||pE(i)||gE(i)||mE(i)||/windows phone/i.test(i)||dE(i)}function vE(i,e=[]){let n;switch(i){case"Browser":n=y0(br());break;case"Worker":n=`${y0(br())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${iu}/${s}`}class sR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,g)=>{try{const _=e(u);d(_)}catch(_){g(_)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function aR(i,e={}){return su(i,"GET","/v2/passwordPolicy",jm(i,e))}const oR=6;class lR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??oR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class uR{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new v0(this),this.idTokenSubscription=new v0(this),this.beforeStateQueue=new sR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ua(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Gl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await df(this,{idToken:e}),s=await rs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ns(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=s?._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===d)&&g?.user&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return at(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await pf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Hx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ns(this.app))return Promise.reject(Wo(this));const n=e?Hi(e):null;return n&&at(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&at(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ns(this.app)?Promise.reject(Wo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ns(this.app)?Promise.reject(Wo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ua(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aR(this),n=new lR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await nR(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ua(e)||this._popupRedirectResolver;at(n,this,"argument-error"),this.redirectPersistenceManager=await Gl.create(this,[ua(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(at(g,this,"internal-error"),g.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const _=e.addObserver(n,s,o);return()=>{d=!0,_()}}else{const _=e.addObserver(n);return()=>{d=!0,_()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return at(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Ux(`Error while retrieving App Check token: ${e.error}`),e?.token}}function kf(i){return Hi(i)}class v0{constructor(e){this.auth=e,this.observer=null,this.addObserver=AC(n=>this.observer=n)}get next(){return at(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let zm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cR(i){zm=i}function hR(i){return zm.loadJS(i)}function fR(){return zm.gapiScript}function dR(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function pR(i,e){const n=km(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(el(u,e??{}))return o;Rs(o,"already-initialized")}return n.initialize({options:e})}function mR(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(ua);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function gR(i,e,n){const s=kf(i);at(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=_E(e),{host:d,port:g}=yR(e),_=g===null?"":`:${g}`,b={url:`${u}//${d}${_}/`},C=Object.freeze({host:d,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){at(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),at(el(b,s.config.emulator)&&el(C,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=b,s.emulatorConfig=C,s.settings.appVerificationDisabledForTesting=!0,ru(d)?($b(`${u}//${d}${_}`),Xb("Auth",!0)):vR()}function _E(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function yR(i){const e=_E(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:_0(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:_0(d)}}}function _0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function vR(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class bE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return la("not implemented")}_getIdTokenResponse(e){return la("not implemented")}_linkToIdToken(e,n){return la("not implemented")}_getReauthenticationResolver(e){return la("not implemented")}}async function Yl(i,e){return Yx(i,"POST","/v1/accounts:signInWithIdp",jm(i,e))}const _R="http://localhost";class nl extends bE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new nl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const d=new nl(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Yl(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Yl(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yl(e,n)}buildRequest(){const e={requestUri:_R,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Sc(n)}return e}}class Bm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ac extends Bm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ao extends Ac{constructor(){super("facebook.com")}static credential(e){return nl._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ao.credential(e.oauthAccessToken)}catch{return null}}}ao.FACEBOOK_SIGN_IN_METHOD="facebook.com";ao.PROVIDER_ID="facebook.com";class oa extends Ac{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return nl._fromParams({providerId:oa.PROVIDER_ID,signInMethod:oa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return oa.credentialFromTaggedObject(e)}static credentialFromError(e){return oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return oa.credential(n,s)}catch{return null}}}oa.GOOGLE_SIGN_IN_METHOD="google.com";oa.PROVIDER_ID="google.com";class oo extends Ac{constructor(){super("github.com")}static credential(e){return nl._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oo.credential(e.oauthAccessToken)}catch{return null}}}oo.GITHUB_SIGN_IN_METHOD="github.com";oo.PROVIDER_ID="github.com";class lo extends Ac{constructor(){super("twitter.com")}static credential(e,n){return nl._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return lo.credential(n,s)}catch{return null}}}lo.TWITTER_SIGN_IN_METHOD="twitter.com";lo.PROVIDER_ID="twitter.com";class Xl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await rs._fromIdTokenResponse(e,s,o),d=b0(s);return new Xl({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=b0(s);return new Xl({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function b0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class mf extends ga{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,mf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new mf(e,n,s,o)}}function EE(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?mf._fromErrorAndOperation(i,u,e,s):u})}async function bR(i,e,n=!1){const s=await hc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Xl._forOperation(i,"link",s)}async function ER(i,e,n=!1){const{auth:s}=i;if(ns(s.app))return Promise.reject(Wo(s));const o="reauthenticate";try{const u=await hc(i,EE(s,o,e,i),n);at(u.idToken,s,"internal-error");const d=Lm(u.idToken);at(d,s,"internal-error");const{sub:g}=d;return at(i.uid===g,s,"user-mismatch"),Xl._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Rs(s,"user-mismatch"),u}}async function TR(i,e,n=!1){if(ns(i.app))return Promise.reject(Wo(i));const s="signIn",o=await EE(i,s,e),u=await Xl._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}function SR(i,e,n,s){return Hi(i).onIdTokenChanged(e,n,s)}function wR(i,e,n){return Hi(i).beforeAuthStateChanged(e,n)}function AR(i,e,n,s){return Hi(i).onAuthStateChanged(e,n,s)}function E0(i){return Hi(i).signOut()}const gf="__sak";class TE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gf,"1"),this.storage.removeItem(gf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const CR=1e3,xR=10;class SE extends TE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,g,_)=>{this.notifyListeners(d,_)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);iR()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,xR):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},CR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}SE.type="LOCAL";const RR=SE;class wE extends TE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}wE.type="SESSION";const AE=wE;function IR(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Mf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Mf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const g=Array.from(d).map(async b=>b(n.origin,u)),_=await IR(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:_})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mf.receivers=[];function qm(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class OR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((g,_)=>{const b=qm("",20);o.port1.start();const C=setTimeout(()=>{_(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(I){const k=I;if(k.data.eventId===b)switch(k.data.status){case"ack":clearTimeout(C),u=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(k.data.response);break;default:clearTimeout(C),clearTimeout(u),_(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:b,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Ss(){return window}function DR(i){Ss().location.href=i}function CE(){return typeof Ss().WorkerGlobalScope<"u"&&typeof Ss().importScripts=="function"}async function NR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kR(){return navigator?.serviceWorker?.controller||null}function MR(){return CE()?self:null}const xE="firebaseLocalStorageDb",VR=1,yf="firebaseLocalStorage",RE="fbase_key";class Cc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vf(i,e){return i.transaction([yf],e?"readwrite":"readonly").objectStore(yf)}function PR(){const i=indexedDB.deleteDatabase(xE);return new Cc(i).toPromise()}function cm(){const i=indexedDB.open(xE,VR);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(yf,{keyPath:RE})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(yf)?e(s):(s.close(),await PR(),e(await cm()))})})}async function T0(i,e,n){const s=Vf(i,!0).put({[RE]:e,value:n});return new Cc(s).toPromise()}async function jR(i,e){const n=Vf(i,!1).get(e),s=await new Cc(n).toPromise();return s===void 0?null:s.value}function S0(i,e){const n=Vf(i,!0).delete(e);return new Cc(n).toPromise()}const LR=800,UR=3;class IE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>UR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mf._getInstance(MR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await NR(),!this.activeServiceWorker)return;this.sender=new OR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cm();return await T0(e,gf,"1"),await S0(e,gf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>T0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>jR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>S0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Vf(o,!1).getAll();return new Cc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IE.type="LOCAL";const zR=IE;new wc(3e4,6e4);function OE(i,e){return e?ua(e):(at(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Hm extends bE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BR(i){return TR(i.auth,new Hm(i),i.bypassAuthState)}function qR(i){const{auth:e,user:n}=i;return at(n,e,"internal-error"),ER(n,new Hm(i),i.bypassAuthState)}async function HR(i){const{auth:e,user:n}=i;return at(n,e,"internal-error"),bR(n,new Hm(i),i.bypassAuthState)}class DE{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:g}=e;if(d){this.reject(d);return}const _={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(_))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BR;case"linkViaPopup":case"linkViaRedirect":return HR;case"reauthViaPopup":case"reauthViaRedirect":return qR;default:Rs(this.auth,"internal-error")}}resolve(e){da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const FR=new wc(2e3,1e4);async function KR(i,e,n){if(ns(i.app))return Promise.reject(ss(i,"operation-not-supported-in-this-environment"));const s=kf(i);zx(i,e,Bm);const o=OE(s,n);return new $o(s,"signInViaPopup",e,o).executeNotNull()}class $o extends DE{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,$o.currentPopupAction&&$o.currentPopupAction.cancel(),$o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return at(e,this.auth,"internal-error"),e}async onExecution(){da(this.filter.length===1,"Popup operations only handle one event");const e=qm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ss(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ss(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$o.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ss(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FR.get())};e()}}$o.currentPopupAction=null;const GR="pendingRedirect",Zh=new Map;class YR extends DE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Zh.get(this.auth._key());if(!e){try{const s=await QR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Zh.set(this.auth._key(),e)}return this.bypassAuthState||Zh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QR(i,e){const n=WR(e),s=XR(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function $R(i,e){Zh.set(i._key(),e)}function XR(i){return ua(i._redirectPersistence)}function WR(i){return Jh(GR,i.config.apiKey,i.name)}async function JR(i,e,n=!1){if(ns(i.app))return Promise.reject(Wo(i));const s=kf(i),o=OE(s,e),d=await new YR(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const ZR=600*1e3;class eI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!NE(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ss(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZR&&this.cachedEventUids.clear(),this.cachedEventUids.has(w0(e))}saveEventToCache(e){this.cachedEventUids.add(w0(e)),this.lastProcessedEventTime=Date.now()}}function w0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function NE({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function tI(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NE(i);default:return!1}}async function nI(i,e={}){return su(i,"GET","/v1/projects",e)}const rI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iI=/^https?/;async function sI(i){if(i.config.emulator)return;const{authorizedDomains:e}=await nI(i);for(const n of e)try{if(aI(n))return}catch{}Rs(i,"unauthorized-domain")}function aI(i){const e=lm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!iI.test(n))return!1;if(rI.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const oI=new wc(3e4,6e4);function A0(){const i=Ss().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function lI(i){return new Promise((e,n)=>{function s(){A0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{A0(),n(ss(i,"network-request-failed"))},timeout:oI.get()})}if(Ss().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ss().gapi?.load)s();else{const o=dR("iframefcb");return Ss()[o]=()=>{gapi.load?s():n(ss(i,"network-request-failed"))},hR(`${fR()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw ef=null,e})}let ef=null;function uI(i){return ef=ef||lI(i),ef}const cI=new wc(5e3,15e3),hI="__/auth/iframe",fI="emulator/auth/iframe",dI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mI(i){const e=i.config;at(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Pm(e,fI):`https://${i.config.authDomain}/${hI}`,s={apiKey:e.apiKey,appName:i.name,v:iu},o=pI.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Sc(s).slice(1)}`}async function gI(i){const e=await uI(i),n=Ss().gapi;return at(n,i,"internal-error"),e.open({where:document.body,url:mI(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dI,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=ss(i,"network-request-failed"),g=Ss().setTimeout(()=>{u(d)},cI.get());function _(){Ss().clearTimeout(g),o(s)}s.ping(_).then(_,()=>{u(d)})}))}const yI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vI=500,_I=600,bI="_blank",EI="http://localhost";class C0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TI(i,e,n,s=vI,o=_I){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const _={...yI,width:s.toString(),height:o.toString(),top:u,left:d},b=br().toLowerCase();n&&(g=fE(b)?bI:n),cE(b)&&(e=e||EI,_.scrollbars="yes");const C=Object.entries(_).reduce((k,[$,le])=>`${k}${$}=${le},`,"");if(rR(b)&&g!=="_self")return SI(e||"",g),new C0(null);const I=window.open(e||"",g,C);at(I,i,"popup-blocked");try{I.focus()}catch{}return new C0(I)}function SI(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const wI="__/auth/handler",AI="emulator/auth/handler",CI=encodeURIComponent("fac");async function x0(i,e,n,s,o,u){at(i.config.authDomain,i,"auth-domain-config-required"),at(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:iu,eventId:o};if(e instanceof Bm){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",wC(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[C,I]of Object.entries({}))d[C]=I}if(e instanceof Ac){const C=e.getScopes().filter(I=>I!=="");C.length>0&&(d.scopes=C.join(","))}i.tenantId&&(d.tid=i.tenantId);const g=d;for(const C of Object.keys(g))g[C]===void 0&&delete g[C];const _=await i._getAppCheckToken(),b=_?`#${CI}=${encodeURIComponent(_)}`:"";return`${xI(i)}?${Sc(g).slice(1)}${b}`}function xI({config:i}){return i.emulator?Pm(i,AI):`https://${i.authDomain}/${wI}`}const Qp="webStorageSupport";class RI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AE,this._completeRedirectFn=JR,this._overrideRedirectResult=$R}async _openPopup(e,n,s,o){da(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await x0(e,n,s,lm(),o);return TI(e,u,qm())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await x0(e,n,s,lm(),o);return DR(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(da(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await gI(e),s=new eI(e);return n.register("authEvent",o=>(at(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qp,{type:Qp},o=>{const u=o?.[0]?.[Qp];u!==void 0&&n(!!u),Rs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yE()||hE()||Um()}}const II=RI;var R0="@firebase/auth",I0="1.11.1";class OI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){at(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function DI(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NI(i){$l(new tl("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=s.options;at(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const _={apiKey:d,authDomain:g,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vE(i)},b=new uR(s,o,u,_);return mR(b,n),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),$l(new tl("auth-internal",e=>{const n=kf(e.getProvider("auth").getImmediate());return(s=>new OI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),po(R0,I0,DI(i)),po(R0,I0,"esm2020")}const kI=300,MI=Qb("authIdTokenMaxAge")||kI;let O0=null;const VI=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>MI)return;const o=n?.token;O0!==o&&(O0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function PI(i=eE()){const e=km(i,"auth");if(e.isInitialized())return e.getImmediate();const n=pR(i,{popupRedirectResolver:II,persistence:[zR,RR,AE]}),s=Qb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=VI(u.toString());wR(n,d,()=>d(n.currentUser)),SR(n,g=>d(g))}}const o=Gb("auth");return o&&gR(n,`http://${o}`),n}function jI(){return document.getElementsByTagName("head")?.[0]??document}cR({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=ss("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",jI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NI("Browser");var D0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mo,kE;(function(){var i;function e(V,M){function j(){}j.prototype=M.prototype,V.F=M.prototype,V.prototype=new j,V.prototype.constructor=V,V.D=function(Y,B,z){for(var N=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)N[Xe-2]=arguments[Xe];return M.prototype[B].apply(Y,N)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(V,M,j){j||(j=0);const Y=Array(16);if(typeof M=="string")for(var B=0;B<16;++B)Y[B]=M.charCodeAt(j++)|M.charCodeAt(j++)<<8|M.charCodeAt(j++)<<16|M.charCodeAt(j++)<<24;else for(B=0;B<16;++B)Y[B]=M[j++]|M[j++]<<8|M[j++]<<16|M[j++]<<24;M=V.g[0],j=V.g[1],B=V.g[2];let z=V.g[3],N;N=M+(z^j&(B^z))+Y[0]+3614090360&4294967295,M=j+(N<<7&4294967295|N>>>25),N=z+(B^M&(j^B))+Y[1]+3905402710&4294967295,z=M+(N<<12&4294967295|N>>>20),N=B+(j^z&(M^j))+Y[2]+606105819&4294967295,B=z+(N<<17&4294967295|N>>>15),N=j+(M^B&(z^M))+Y[3]+3250441966&4294967295,j=B+(N<<22&4294967295|N>>>10),N=M+(z^j&(B^z))+Y[4]+4118548399&4294967295,M=j+(N<<7&4294967295|N>>>25),N=z+(B^M&(j^B))+Y[5]+1200080426&4294967295,z=M+(N<<12&4294967295|N>>>20),N=B+(j^z&(M^j))+Y[6]+2821735955&4294967295,B=z+(N<<17&4294967295|N>>>15),N=j+(M^B&(z^M))+Y[7]+4249261313&4294967295,j=B+(N<<22&4294967295|N>>>10),N=M+(z^j&(B^z))+Y[8]+1770035416&4294967295,M=j+(N<<7&4294967295|N>>>25),N=z+(B^M&(j^B))+Y[9]+2336552879&4294967295,z=M+(N<<12&4294967295|N>>>20),N=B+(j^z&(M^j))+Y[10]+4294925233&4294967295,B=z+(N<<17&4294967295|N>>>15),N=j+(M^B&(z^M))+Y[11]+2304563134&4294967295,j=B+(N<<22&4294967295|N>>>10),N=M+(z^j&(B^z))+Y[12]+1804603682&4294967295,M=j+(N<<7&4294967295|N>>>25),N=z+(B^M&(j^B))+Y[13]+4254626195&4294967295,z=M+(N<<12&4294967295|N>>>20),N=B+(j^z&(M^j))+Y[14]+2792965006&4294967295,B=z+(N<<17&4294967295|N>>>15),N=j+(M^B&(z^M))+Y[15]+1236535329&4294967295,j=B+(N<<22&4294967295|N>>>10),N=M+(B^z&(j^B))+Y[1]+4129170786&4294967295,M=j+(N<<5&4294967295|N>>>27),N=z+(j^B&(M^j))+Y[6]+3225465664&4294967295,z=M+(N<<9&4294967295|N>>>23),N=B+(M^j&(z^M))+Y[11]+643717713&4294967295,B=z+(N<<14&4294967295|N>>>18),N=j+(z^M&(B^z))+Y[0]+3921069994&4294967295,j=B+(N<<20&4294967295|N>>>12),N=M+(B^z&(j^B))+Y[5]+3593408605&4294967295,M=j+(N<<5&4294967295|N>>>27),N=z+(j^B&(M^j))+Y[10]+38016083&4294967295,z=M+(N<<9&4294967295|N>>>23),N=B+(M^j&(z^M))+Y[15]+3634488961&4294967295,B=z+(N<<14&4294967295|N>>>18),N=j+(z^M&(B^z))+Y[4]+3889429448&4294967295,j=B+(N<<20&4294967295|N>>>12),N=M+(B^z&(j^B))+Y[9]+568446438&4294967295,M=j+(N<<5&4294967295|N>>>27),N=z+(j^B&(M^j))+Y[14]+3275163606&4294967295,z=M+(N<<9&4294967295|N>>>23),N=B+(M^j&(z^M))+Y[3]+4107603335&4294967295,B=z+(N<<14&4294967295|N>>>18),N=j+(z^M&(B^z))+Y[8]+1163531501&4294967295,j=B+(N<<20&4294967295|N>>>12),N=M+(B^z&(j^B))+Y[13]+2850285829&4294967295,M=j+(N<<5&4294967295|N>>>27),N=z+(j^B&(M^j))+Y[2]+4243563512&4294967295,z=M+(N<<9&4294967295|N>>>23),N=B+(M^j&(z^M))+Y[7]+1735328473&4294967295,B=z+(N<<14&4294967295|N>>>18),N=j+(z^M&(B^z))+Y[12]+2368359562&4294967295,j=B+(N<<20&4294967295|N>>>12),N=M+(j^B^z)+Y[5]+4294588738&4294967295,M=j+(N<<4&4294967295|N>>>28),N=z+(M^j^B)+Y[8]+2272392833&4294967295,z=M+(N<<11&4294967295|N>>>21),N=B+(z^M^j)+Y[11]+1839030562&4294967295,B=z+(N<<16&4294967295|N>>>16),N=j+(B^z^M)+Y[14]+4259657740&4294967295,j=B+(N<<23&4294967295|N>>>9),N=M+(j^B^z)+Y[1]+2763975236&4294967295,M=j+(N<<4&4294967295|N>>>28),N=z+(M^j^B)+Y[4]+1272893353&4294967295,z=M+(N<<11&4294967295|N>>>21),N=B+(z^M^j)+Y[7]+4139469664&4294967295,B=z+(N<<16&4294967295|N>>>16),N=j+(B^z^M)+Y[10]+3200236656&4294967295,j=B+(N<<23&4294967295|N>>>9),N=M+(j^B^z)+Y[13]+681279174&4294967295,M=j+(N<<4&4294967295|N>>>28),N=z+(M^j^B)+Y[0]+3936430074&4294967295,z=M+(N<<11&4294967295|N>>>21),N=B+(z^M^j)+Y[3]+3572445317&4294967295,B=z+(N<<16&4294967295|N>>>16),N=j+(B^z^M)+Y[6]+76029189&4294967295,j=B+(N<<23&4294967295|N>>>9),N=M+(j^B^z)+Y[9]+3654602809&4294967295,M=j+(N<<4&4294967295|N>>>28),N=z+(M^j^B)+Y[12]+3873151461&4294967295,z=M+(N<<11&4294967295|N>>>21),N=B+(z^M^j)+Y[15]+530742520&4294967295,B=z+(N<<16&4294967295|N>>>16),N=j+(B^z^M)+Y[2]+3299628645&4294967295,j=B+(N<<23&4294967295|N>>>9),N=M+(B^(j|~z))+Y[0]+4096336452&4294967295,M=j+(N<<6&4294967295|N>>>26),N=z+(j^(M|~B))+Y[7]+1126891415&4294967295,z=M+(N<<10&4294967295|N>>>22),N=B+(M^(z|~j))+Y[14]+2878612391&4294967295,B=z+(N<<15&4294967295|N>>>17),N=j+(z^(B|~M))+Y[5]+4237533241&4294967295,j=B+(N<<21&4294967295|N>>>11),N=M+(B^(j|~z))+Y[12]+1700485571&4294967295,M=j+(N<<6&4294967295|N>>>26),N=z+(j^(M|~B))+Y[3]+2399980690&4294967295,z=M+(N<<10&4294967295|N>>>22),N=B+(M^(z|~j))+Y[10]+4293915773&4294967295,B=z+(N<<15&4294967295|N>>>17),N=j+(z^(B|~M))+Y[1]+2240044497&4294967295,j=B+(N<<21&4294967295|N>>>11),N=M+(B^(j|~z))+Y[8]+1873313359&4294967295,M=j+(N<<6&4294967295|N>>>26),N=z+(j^(M|~B))+Y[15]+4264355552&4294967295,z=M+(N<<10&4294967295|N>>>22),N=B+(M^(z|~j))+Y[6]+2734768916&4294967295,B=z+(N<<15&4294967295|N>>>17),N=j+(z^(B|~M))+Y[13]+1309151649&4294967295,j=B+(N<<21&4294967295|N>>>11),N=M+(B^(j|~z))+Y[4]+4149444226&4294967295,M=j+(N<<6&4294967295|N>>>26),N=z+(j^(M|~B))+Y[11]+3174756917&4294967295,z=M+(N<<10&4294967295|N>>>22),N=B+(M^(z|~j))+Y[2]+718787259&4294967295,B=z+(N<<15&4294967295|N>>>17),N=j+(z^(B|~M))+Y[9]+3951481745&4294967295,V.g[0]=V.g[0]+M&4294967295,V.g[1]=V.g[1]+(B+(N<<21&4294967295|N>>>11))&4294967295,V.g[2]=V.g[2]+B&4294967295,V.g[3]=V.g[3]+z&4294967295}s.prototype.v=function(V,M){M===void 0&&(M=V.length);const j=M-this.blockSize,Y=this.C;let B=this.h,z=0;for(;z<M;){if(B==0)for(;z<=j;)o(this,V,z),z+=this.blockSize;if(typeof V=="string"){for(;z<M;)if(Y[B++]=V.charCodeAt(z++),B==this.blockSize){o(this,Y),B=0;break}}else for(;z<M;)if(Y[B++]=V[z++],B==this.blockSize){o(this,Y),B=0;break}}this.h=B,this.o+=M},s.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var M=1;M<V.length-8;++M)V[M]=0;M=this.o*8;for(var j=V.length-8;j<V.length;++j)V[j]=M&255,M/=256;for(this.v(V),V=Array(16),M=0,j=0;j<4;++j)for(let Y=0;Y<32;Y+=8)V[M++]=this.g[j]>>>Y&255;return V};function u(V,M){var j=g;return Object.prototype.hasOwnProperty.call(j,V)?j[V]:j[V]=M(V)}function d(V,M){this.h=M;const j=[];let Y=!0;for(let B=V.length-1;B>=0;B--){const z=V[B]|0;Y&&z==M||(j[B]=z,Y=!1)}this.g=j}var g={};function _(V){return-128<=V&&V<128?u(V,function(M){return new d([M|0],M<0?-1:0)}):new d([V|0],V<0?-1:0)}function b(V){if(isNaN(V)||!isFinite(V))return I;if(V<0)return ge(b(-V));const M=[];let j=1;for(let Y=0;V>=j;Y++)M[Y]=V/j|0,j*=4294967296;return new d(M,0)}function C(V,M){if(V.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(V.charAt(0)=="-")return ge(C(V.substring(1),M));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=b(Math.pow(M,8));let Y=I;for(let z=0;z<V.length;z+=8){var B=Math.min(8,V.length-z);const N=parseInt(V.substring(z,z+B),M);B<8?(B=b(Math.pow(M,B)),Y=Y.j(B).add(b(N))):(Y=Y.j(j),Y=Y.add(b(N)))}return Y}var I=_(0),k=_(1),$=_(16777216);i=d.prototype,i.m=function(){if(he(this))return-ge(this).m();let V=0,M=1;for(let j=0;j<this.g.length;j++){const Y=this.i(j);V+=(Y>=0?Y:4294967296+Y)*M,M*=4294967296}return V},i.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(le(this))return"0";if(he(this))return"-"+ge(this).toString(V);const M=b(Math.pow(V,6));var j=this;let Y="";for(;;){const B=rt(j,M).g;j=Ve(j,B.j(M));let z=((j.g.length>0?j.g[0]:j.h)>>>0).toString(V);if(j=B,le(j))return z+Y;for(;z.length<6;)z="0"+z;Y=z+Y}},i.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function le(V){if(V.h!=0)return!1;for(let M=0;M<V.g.length;M++)if(V.g[M]!=0)return!1;return!0}function he(V){return V.h==-1}i.l=function(V){return V=Ve(this,V),he(V)?-1:le(V)?0:1};function ge(V){const M=V.g.length,j=[];for(let Y=0;Y<M;Y++)j[Y]=~V.g[Y];return new d(j,~V.h).add(k)}i.abs=function(){return he(this)?ge(this):this},i.add=function(V){const M=Math.max(this.g.length,V.g.length),j=[];let Y=0;for(let B=0;B<=M;B++){let z=Y+(this.i(B)&65535)+(V.i(B)&65535),N=(z>>>16)+(this.i(B)>>>16)+(V.i(B)>>>16);Y=N>>>16,z&=65535,N&=65535,j[B]=N<<16|z}return new d(j,j[j.length-1]&-2147483648?-1:0)};function Ve(V,M){return V.add(ge(M))}i.j=function(V){if(le(this)||le(V))return I;if(he(this))return he(V)?ge(this).j(ge(V)):ge(ge(this).j(V));if(he(V))return ge(this.j(ge(V)));if(this.l($)<0&&V.l($)<0)return b(this.m()*V.m());const M=this.g.length+V.g.length,j=[];for(var Y=0;Y<2*M;Y++)j[Y]=0;for(Y=0;Y<this.g.length;Y++)for(let B=0;B<V.g.length;B++){const z=this.i(Y)>>>16,N=this.i(Y)&65535,Xe=V.i(B)>>>16,Lt=V.i(B)&65535;j[2*Y+2*B]+=N*Lt,Fe(j,2*Y+2*B),j[2*Y+2*B+1]+=z*Lt,Fe(j,2*Y+2*B+1),j[2*Y+2*B+1]+=N*Xe,Fe(j,2*Y+2*B+1),j[2*Y+2*B+2]+=z*Xe,Fe(j,2*Y+2*B+2)}for(V=0;V<M;V++)j[V]=j[2*V+1]<<16|j[2*V];for(V=M;V<2*M;V++)j[V]=0;return new d(j,0)};function Fe(V,M){for(;(V[M]&65535)!=V[M];)V[M+1]+=V[M]>>>16,V[M]&=65535,M++}function Pe(V,M){this.g=V,this.h=M}function rt(V,M){if(le(M))throw Error("division by zero");if(le(V))return new Pe(I,I);if(he(V))return M=rt(ge(V),M),new Pe(ge(M.g),ge(M.h));if(he(M))return M=rt(V,ge(M)),new Pe(ge(M.g),M.h);if(V.g.length>30){if(he(V)||he(M))throw Error("slowDivide_ only works with positive integers.");for(var j=k,Y=M;Y.l(V)<=0;)j=it(j),Y=it(Y);var B=Re(j,1),z=Re(Y,1);for(Y=Re(Y,2),j=Re(j,2);!le(Y);){var N=z.add(Y);N.l(V)<=0&&(B=B.add(j),z=N),Y=Re(Y,1),j=Re(j,1)}return M=Ve(V,B.j(M)),new Pe(B,M)}for(B=I;V.l(M)>=0;){for(j=Math.max(1,Math.floor(V.m()/M.m())),Y=Math.ceil(Math.log(j)/Math.LN2),Y=Y<=48?1:Math.pow(2,Y-48),z=b(j),N=z.j(M);he(N)||N.l(V)>0;)j-=Y,z=b(j),N=z.j(M);le(z)&&(z=k),B=B.add(z),V=Ve(V,N)}return new Pe(B,V)}i.B=function(V){return rt(this,V).h},i.and=function(V){const M=Math.max(this.g.length,V.g.length),j=[];for(let Y=0;Y<M;Y++)j[Y]=this.i(Y)&V.i(Y);return new d(j,this.h&V.h)},i.or=function(V){const M=Math.max(this.g.length,V.g.length),j=[];for(let Y=0;Y<M;Y++)j[Y]=this.i(Y)|V.i(Y);return new d(j,this.h|V.h)},i.xor=function(V){const M=Math.max(this.g.length,V.g.length),j=[];for(let Y=0;Y<M;Y++)j[Y]=this.i(Y)^V.i(Y);return new d(j,this.h^V.h)};function it(V){const M=V.g.length+1,j=[];for(let Y=0;Y<M;Y++)j[Y]=V.i(Y)<<1|V.i(Y-1)>>>31;return new d(j,V.h)}function Re(V,M){const j=M>>5;M%=32;const Y=V.g.length-j,B=[];for(let z=0;z<Y;z++)B[z]=M>0?V.i(z+j)>>>M|V.i(z+j+1)<<32-M:V.i(z+j);return new d(B,V.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,kE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=b,d.fromString=C,mo=d}).apply(typeof D0<"u"?D0:typeof self<"u"?self:typeof window<"u"?window:{});var qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ME,$u,VE,tf,hm,PE,jE,LE;(function(){var i,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof qh=="object"&&qh];for(var v=0;v<c.length;++v){var S=c[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var s=n(this);function o(c,v){if(v)e:{var S=s;c=c.split(".");for(var O=0;O<c.length-1;O++){var te=c[O];if(!(te in S))break e;S=S[te]}c=c[c.length-1],O=S[c],v=v(O),v!=O&&v!=null&&e(S,c,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(v){var S=[],O;for(O in v)Object.prototype.hasOwnProperty.call(v,O)&&S.push([O,v[O]]);return S}});var u=u||{},d=this||self;function g(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function _(c,v,S){return c.call.apply(c.bind,arguments)}function b(c,v,S){return b=_,b.apply(null,arguments)}function C(c,v){var S=Array.prototype.slice.call(arguments,1);return function(){var O=S.slice();return O.push.apply(O,arguments),c.apply(this,O)}}function I(c,v){function S(){}S.prototype=v.prototype,c.Z=v.prototype,c.prototype=new S,c.prototype.constructor=c,c.Ob=function(O,te,oe){for(var Ae=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)Ae[ot-2]=arguments[ot];return v.prototype[te].apply(O,Ae)}}var k=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function $(c){const v=c.length;if(v>0){const S=Array(v);for(let O=0;O<v;O++)S[O]=c[O];return S}return[]}function le(c,v){for(let O=1;O<arguments.length;O++){const te=arguments[O];var S=typeof te;if(S=S!="object"?S:te?Array.isArray(te)?"array":S:"null",S=="array"||S=="object"&&typeof te.length=="number"){S=c.length||0;const oe=te.length||0;c.length=S+oe;for(let Ae=0;Ae<oe;Ae++)c[S+Ae]=te[Ae]}else c.push(te)}}class he{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function ge(c){d.setTimeout(()=>{throw c},0)}function Ve(){var c=V;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class Fe{constructor(){this.h=this.g=null}add(v,S){const O=Pe.get();O.set(v,S),this.h?this.h.next=O:this.g=O,this.h=O}}var Pe=new he(()=>new rt,c=>c.reset());class rt{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let it,Re=!1,V=new Fe,M=()=>{const c=Promise.resolve(void 0);it=()=>{c.then(j)}};function j(){for(var c;c=Ve();){try{c.h.call(c.g)}catch(S){ge(S)}var v=Pe;v.j(c),v.h<100&&(v.h++,c.next=v.g,v.g=c)}Re=!1}function Y(){this.u=this.u,this.C=this.C}Y.prototype.u=!1,Y.prototype.dispose=function(){this.u||(this.u=!0,this.N())},Y.prototype[Symbol.dispose]=function(){this.dispose()},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const S=()=>{};d.addEventListener("test",S,v),d.removeEventListener("test",S,v)}catch{}return c})();function N(c){return/^[\s\xa0]*$/.test(c)}function Xe(c,v){B.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,v)}I(Xe,B),Xe.prototype.init=function(c,v){const S=this.type=c.type,O=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget,v||(S=="mouseover"?v=c.fromElement:S=="mouseout"&&(v=c.toElement)),this.relatedTarget=v,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Xe.Z.h.call(this)},Xe.prototype.h=function(){Xe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Lt="closure_listenable_"+(Math.random()*1e6|0),ce=0;function Oe(c,v,S,O,te){this.listener=c,this.proxy=null,this.src=v,this.type=S,this.capture=!!O,this.ha=te,this.key=++ce,this.da=this.fa=!1}function qe(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Be(c,v,S){for(const O in c)v.call(S,c[O],O,c)}function He(c,v){for(const S in c)v.call(void 0,c[S],S,c)}function H(c){const v={};for(const S in c)v[S]=c[S];return v}const pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ie(c,v){let S,O;for(let te=1;te<arguments.length;te++){O=arguments[te];for(S in O)c[S]=O[S];for(let oe=0;oe<pe.length;oe++)S=pe[oe],Object.prototype.hasOwnProperty.call(O,S)&&(c[S]=O[S])}}function Le(c){this.src=c,this.g={},this.h=0}Le.prototype.add=function(c,v,S,O,te){const oe=c.toString();c=this.g[oe],c||(c=this.g[oe]=[],this.h++);const Ae=tt(c,v,O,te);return Ae>-1?(v=c[Ae],S||(v.fa=!1)):(v=new Oe(v,this.src,oe,!!O,te),v.fa=S,c.push(v)),v};function We(c,v){const S=v.type;if(S in c.g){var O=c.g[S],te=Array.prototype.indexOf.call(O,v,void 0),oe;(oe=te>=0)&&Array.prototype.splice.call(O,te,1),oe&&(qe(v),c.g[S].length==0&&(delete c.g[S],c.h--))}}function tt(c,v,S,O){for(let te=0;te<c.length;++te){const oe=c[te];if(!oe.da&&oe.listener==v&&oe.capture==!!S&&oe.ha==O)return te}return-1}var yt="closure_lm_"+(Math.random()*1e6|0),vn={};function Me(c,v,S,O,te){if(Array.isArray(v)){for(let oe=0;oe<v.length;oe++)Me(c,v[oe],S,O,te);return null}return S=Ao(S),c&&c[Lt]?c.J(v,S,g(O)?!!O.capture:!1,te):as(c,v,S,!1,O,te)}function as(c,v,S,O,te,oe){if(!v)throw Error("Invalid event type");const Ae=g(te)?!!te.capture:!!te;let ot=Ds(c);if(ot||(c[yt]=ot=new Le(c)),S=ot.add(v,S,O,Ae,oe),S.proxy)return S;if(O=Fi(),S.proxy=O,O.src=c,O.listener=S,c.addEventListener)z||(te=Ae),te===void 0&&(te=!1),c.addEventListener(v.toString(),O,te);else if(c.attachEvent)c.attachEvent(bi(v.toString()),O);else if(c.addListener&&c.removeListener)c.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Fi(){function c(S){return v.call(c.src,c.listener,S)}const v=Xr;return c}function xt(c,v,S,O,te){if(Array.isArray(v))for(var oe=0;oe<v.length;oe++)xt(c,v[oe],S,O,te);else O=g(O)?!!O.capture:!!O,S=Ao(S),c&&c[Lt]?(c=c.i,oe=String(v).toString(),oe in c.g&&(v=c.g[oe],S=tt(v,S,O,te),S>-1&&(qe(v[S]),Array.prototype.splice.call(v,S,1),v.length==0&&(delete c.g[oe],c.h--)))):c&&(c=Ds(c))&&(v=c.g[v.toString()],c=-1,v&&(c=tt(v,S,O,te)),(S=c>-1?v[c]:null)&&_i(S))}function _i(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[Lt])We(v.i,c);else{var S=c.type,O=c.proxy;v.removeEventListener?v.removeEventListener(S,O,c.capture):v.detachEvent?v.detachEvent(bi(S),O):v.addListener&&v.removeListener&&v.removeListener(O),(S=Ds(v))?(We(S,c),S.h==0&&(S.src=null,v[yt]=null)):qe(c)}}}function bi(c){return c in vn?vn[c]:vn[c]="on"+c}function Xr(c,v){if(c.da)c=!0;else{v=new Xe(v,this);const S=c.listener,O=c.ha||c.src;c.fa&&_i(c),c=S.call(O,v)}return c}function Ds(c){return c=c[yt],c instanceof Le?c:null}var wo="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ao(c){return typeof c=="function"?c:(c[wo]||(c[wo]=function(v){return c.handleEvent(v)}),c[wo])}function pn(){Y.call(this),this.i=new Le(this),this.M=this,this.G=null}I(pn,Y),pn.prototype[Lt]=!0,pn.prototype.removeEventListener=function(c,v,S,O){xt(this,c,v,S,O)};function sn(c,v){var S,O=c.G;if(O)for(S=[];O;O=O.G)S.push(O);if(c=c.M,O=v.type||v,typeof v=="string")v=new B(v,c);else if(v instanceof B)v.target=v.target||c;else{var te=v;v=new B(O,c),Ie(v,te)}te=!0;let oe,Ae;if(S)for(Ae=S.length-1;Ae>=0;Ae--)oe=v.g=S[Ae],te=jn(oe,O,!0,v)&&te;if(oe=v.g=c,te=jn(oe,O,!0,v)&&te,te=jn(oe,O,!1,v)&&te,S)for(Ae=0;Ae<S.length;Ae++)oe=v.g=S[Ae],te=jn(oe,O,!1,v)&&te}pn.prototype.N=function(){if(pn.Z.N.call(this),this.i){var c=this.i;for(const v in c.g){const S=c.g[v];for(let O=0;O<S.length;O++)qe(S[O]);delete c.g[v],c.h--}}this.G=null},pn.prototype.J=function(c,v,S,O){return this.i.add(String(c),v,!1,S,O)},pn.prototype.K=function(c,v,S,O){return this.i.add(String(c),v,!0,S,O)};function jn(c,v,S,O){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();let te=!0;for(let oe=0;oe<v.length;++oe){const Ae=v[oe];if(Ae&&!Ae.da&&Ae.capture==S){const ot=Ae.listener,hn=Ae.ha||Ae.src;Ae.fa&&We(c.i,Ae),te=ot.call(hn,O)!==!1&&te}}return te&&!O.defaultPrevented}function ul(c,v){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=b(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(c,v||0)}function os(c){c.g=ul(()=>{c.g=null,c.i&&(c.i=!1,os(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class Fn extends Y{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:os(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wr(c){Y.call(this),this.h=c,this.g={}}I(Wr,Y);var Jr=[];function Zr(c){Be(c.g,function(v,S){this.g.hasOwnProperty(S)&&_i(v)},c),c.g={}}Wr.prototype.N=function(){Wr.Z.N.call(this),Zr(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ei=d.JSON.stringify,Ns=d.JSON.parse,ya=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function ks(){}function Ti(){}var ur={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function _n(){B.call(this,"d")}I(_n,B);function bn(){B.call(this,"c")}I(bn,B);var ke={},ls=null;function Rr(){return ls=ls||new pn}ke.Ia="serverreachability";function Ms(c){B.call(this,ke.Ia,c)}I(Ms,B);function xe(c){const v=Rr();sn(v,new Ms(v))}ke.STAT_EVENT="statevent";function Ki(c,v){B.call(this,ke.STAT_EVENT,c),this.stat=v}I(Ki,B);function an(c){const v=Rr();sn(v,new Ki(v,c))}ke.Ja="timingevent";function Ir(c,v){B.call(this,ke.Ja,c),this.size=v}I(Ir,B);function ei(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},v)}function Er(){this.g=!0}Er.prototype.ua=function(){this.g=!1};function cu(c,v,S,O,te,oe){c.info(function(){if(c.g)if(oe){var Ae="",ot=oe.split("&");for(let Rt=0;Rt<ot.length;Rt++){var hn=ot[Rt].split("=");if(hn.length>1){const Bt=hn[0];hn=hn[1];const Br=Bt.split("_");Ae=Br.length>=2&&Br[1]=="type"?Ae+(Bt+"="+hn+"&"):Ae+(Bt+"=redacted&")}}}else Ae=null;else Ae=oe;return"XMLHTTP REQ ("+O+") [attempt "+te+"]: "+v+`
`+S+`
`+Ae})}function cl(c,v,S,O,te,oe,Ae){c.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+te+"]: "+v+`
`+S+`
`+oe+" "+Ae})}function Zn(c,v,S,O){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+Co(c,S)+(O?" "+O:"")})}function Or(c,v){c.info(function(){return"TIMEOUT: "+v})}Er.prototype.info=function(){};function Co(c,v){if(!c.g)return v;if(!v)return null;try{const oe=JSON.parse(v);if(oe){for(c=0;c<oe.length;c++)if(Array.isArray(oe[c])){var S=oe[c];if(!(S.length<2)){var O=S[1];if(Array.isArray(O)&&!(O.length<1)){var te=O[0];if(te!="noop"&&te!="stop"&&te!="close")for(let Ae=1;Ae<O.length;Ae++)O[Ae]=""}}}}return Ei(oe)}catch{return v}}var Si={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},en;function Vs(){}I(Vs,ks),Vs.prototype.g=function(){return new XMLHttpRequest},en=new Vs;function Dr(c){return encodeURIComponent(String(c))}function Ps(c){var v=1;c=c.split(":");const S=[];for(;v>0&&c.length;)S.push(c.shift()),v--;return c.length&&S.push(c.join(":")),S}function cr(c,v,S,O){this.j=c,this.i=v,this.l=S,this.S=O||1,this.V=new Wr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ti}function ti(){this.i=null,this.g="",this.h=!1}var Ut={},$t={};function Ln(c,v,S){c.M=1,c.A=hs(ln(v)),c.u=S,c.R=!0,Gi(c,null)}function Gi(c,v){c.F=Date.now(),Kn(c),c.B=ln(c.A);var S=c.B,O=c.S;Array.isArray(O)||(O=[String(O)]),Ta(S.i,"t",O),c.C=0,S=c.j.L,c.h=new ti,c.g=Sn(c.j,S?v:null,!c.u),c.P>0&&(c.O=new Fn(b(c.Y,c,c.g),c.P)),v=c.V,S=c.g,O=c.ba;var te="readystatechange";Array.isArray(te)||(te&&(Jr[0]=te.toString()),te=Jr);for(let oe=0;oe<te.length;oe++){const Ae=Me(S,te[oe],O||v.handleEvent,!1,v.h||v);if(!Ae)break;v.g[Ae.key]=Ae}v=c.J?H(c.J):{},c.u?(c.v||(c.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,v)):(c.v="GET",c.g.ea(c.B,c.v,null,v)),xe(),cu(c.i,c.v,c.B,c.l,c.S,c.u)}cr.prototype.ba=function(c){c=c.target;const v=this.O;v&&ui(c)==3?v.j():this.Y(c)},cr.prototype.Y=function(c){try{if(c==this.g)e:{const ot=ui(this.g),hn=this.g.ya(),Rt=this.g.ca();if(!(ot<3)&&(ot!=3||this.g&&(this.h.h||this.g.la()||cn(this.g)))){this.K||ot!=4||hn==7||(hn==8||Rt<=0?xe(3):xe(2)),Nr(this);var v=this.g.ca();this.X=v;var S=hu(this);if(this.o=v==200,cl(this.i,this.v,this.B,this.l,this.S,ot,v),this.o){if(this.U&&!this.L){t:{if(this.g){var O,te=this.g;if((O=te.g?te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(O)){var oe=O;break t}}oe=null}if(c=oe)Zn(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xn(this,c);else{this.o=!1,this.m=3,an(12),En(this),Ot(this);break e}}if(this.R){c=!0;let Bt;for(;!this.K&&this.C<S.length;)if(Bt=xo(this,S),Bt==$t){ot==4&&(this.m=4,an(14),c=!1),Zn(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==Ut){this.m=4,an(15),Zn(this.i,this.l,S,"[Invalid Chunk]"),c=!1;break}else Zn(this.i,this.l,Bt,null),xn(this,Bt);if(ni(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||S.length!=0||this.h.h||(this.m=1,an(16),c=!1),this.o=this.o&&c,!c)Zn(this.i,this.l,S,"[Invalid Chunked Response]"),En(this),Ot(this);else if(S.length>0&&!this.W){this.W=!0;var Ae=this.j;Ae.g==this&&Ae.aa&&!Ae.P&&(Ae.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),ds(Ae),Ae.P=!0,an(11))}}else Zn(this.i,this.l,S,null),xn(this,S);ot==4&&En(this),this.o&&!this.K&&(ot==4?Zi(this.j,this):(this.o=!1,Kn(this)))}else Wi(this.g),v==400&&S.indexOf("Unknown SID")>0?(this.m=3,an(12)):(this.m=0,an(13)),En(this),Ot(this)}}}catch{}finally{}};function hu(c){if(!ni(c))return c.g.la();const v=cn(c.g);if(v==="")return"";let S="";const O=v.length,te=ui(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return En(c),Ot(c),"";c.h.i=new d.TextDecoder}for(let oe=0;oe<O;oe++)c.h.h=!0,S+=c.h.i.decode(v[oe],{stream:!(te&&oe==O-1)});return v.length=0,c.h.g+=S,c.C=0,c.h.g}function ni(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function xo(c,v){var S=c.C,O=v.indexOf(`
`,S);return O==-1?$t:(S=Number(v.substring(S,O)),isNaN(S)?Ut:(O+=1,O+S>v.length?$t:(v=v.slice(O,O+S),c.C=O+S,v)))}cr.prototype.cancel=function(){this.K=!0,En(this)};function Kn(c){c.T=Date.now()+c.H,js(c,c.H)}function js(c,v){if(c.D!=null)throw Error("WatchDog timer not null");c.D=ei(b(c.aa,c),v)}function Nr(c){c.D&&(d.clearTimeout(c.D),c.D=null)}cr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Or(this.i,this.B),this.M!=2&&(xe(),an(17)),En(this),this.m=2,Ot(this)):js(this,this.T-c)};function Ot(c){c.j.I==0||c.K||Zi(c.j,c)}function En(c){Nr(c);var v=c.O;v&&typeof v.dispose=="function"&&v.dispose(),c.O=null,Zr(c.V),c.g&&(v=c.g,c.g=null,v.abort(),v.dispose())}function xn(c,v){try{var S=c.j;if(S.I!=0&&(S.g==c||Mr(S.h,c))){if(!c.L&&Mr(S.h,c)&&S.I==3){try{var O=S.Ba.g.parse(v)}catch{O=null}if(Array.isArray(O)&&O.length==3){var te=O;if(te[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<c.F)Ca(S),Ri(S);else break e;Oi(S),an(18)}}else S.xa=te[1],0<S.xa-S.K&&te[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=ei(b(S.Va,S),6e3));kr(S.h)<=1&&S.ta&&(S.ta=void 0)}else Ur(S,11)}else if((c.L||S.g==c)&&Ca(S),!N(v))for(te=S.Ba.g.parse(v),v=0;v<te.length;v++){let Rt=te[v];const Bt=Rt[0];if(!(Bt<=S.K))if(S.K=Bt,Rt=Rt[1],S.I==2)if(Rt[0]=="c"){S.M=Rt[1],S.ba=Rt[2];const Br=Rt[3];Br!=null&&(S.ka=Br,S.j.info("VER="+S.ka));const qr=Rt[4];qr!=null&&(S.za=qr,S.j.info("SVER="+S.za));const wr=Rt[5];wr!=null&&typeof wr=="number"&&wr>0&&(O=1.5*wr,S.O=O,S.j.info("backChannelRequestTimeoutMs_="+O)),O=S;const hi=c.g;if(hi){const ms=hi.g?hi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ms){var oe=O.h;oe.g||ms.indexOf("spdy")==-1&&ms.indexOf("quic")==-1&&ms.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(ri(oe,oe.h),oe.h=null))}if(O.G){const Oa=hi.g?hi.g.getResponseHeader("X-HTTP-Session-Id"):null;Oa&&(O.wa=Oa,Nt(O.J,O.G,Oa))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-c.F,S.j.info("Handshake RTT: "+S.T+"ms")),O=S;var Ae=c;if(O.na=Ia(O,O.L?O.ba:null,O.W),Ae.L){va(O.h,Ae);var ot=Ae,hn=O.O;hn&&(ot.H=hn),ot.D&&(Nr(ot),Kn(ot)),O.g=Ae}else Bs(O);S.i.length>0&&Ii(S)}else Rt[0]!="stop"&&Rt[0]!="close"||Ur(S,7);else S.I==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?Ur(S,7):fs(S):Rt[0]!="noop"&&S.l&&S.l.qa(Rt),S.A=0)}}xe(4)}catch{}}var on=class{constructor(c,v){this.g=c,this.map=v}};function wi(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function us(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function kr(c){return c.h?1:c.g?c.g.size:0}function Mr(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function ri(c,v){c.g?c.g.add(v):c.h=v}function va(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}wi.prototype.cancel=function(){if(this.i=cs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function cs(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const S of c.g.values())v=v.concat(S.G);return v}return $(c.i)}var Ro=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ht(c,v){if(c){c=c.split("&");for(let S=0;S<c.length;S++){const O=c[S].indexOf("=");let te,oe=null;O>=0?(te=c[S].substring(0,O),oe=c[S].substring(O+1)):te=c[S],v(te,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}function hr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;c instanceof hr?(this.l=c.l,un(this,c.j),this.o=c.o,this.g=c.g,Vr(this,c.u),this.h=c.h,_a(this,fl(c.i)),this.m=c.m):c&&(v=String(c).match(Ro))?(this.l=!1,un(this,v[1]||"",!0),this.o=_t(v[2]||""),this.g=_t(v[3]||"",!0),Vr(this,v[4]),this.h=_t(v[5]||"",!0),_a(this,v[6]||"",!0),this.m=_t(v[7]||"")):(this.l=!1,this.i=new oi(null,this.l))}hr.prototype.toString=function(){const c=[];var v=this.j;v&&c.push(ii(v,si,!0),":");var S=this.g;return(S||v=="file")&&(c.push("//"),(v=this.o)&&c.push(ii(v,si,!0),"@"),c.push(Dr(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&c.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&c.push("/"),c.push(ii(S,S.charAt(0)=="/"?Ls:ba,!0))),(S=this.i.toString())&&c.push("?",S),(S=this.m)&&c.push("#",ii(S,Io)),c.join("")},hr.prototype.resolve=function(c){const v=ln(this);let S=!!c.j;S?un(v,c.j):S=!!c.o,S?v.o=c.o:S=!!c.g,S?v.g=c.g:S=c.u!=null;var O=c.h;if(S)Vr(v,c.u);else if(S=!!c.h){if(O.charAt(0)!="/")if(this.g&&!this.h)O="/"+O;else{var te=v.h.lastIndexOf("/");te!=-1&&(O=v.h.slice(0,te+1)+O)}if(te=O,te==".."||te==".")O="";else if(te.indexOf("./")!=-1||te.indexOf("/.")!=-1){O=te.lastIndexOf("/",0)==0,te=te.split("/");const oe=[];for(let Ae=0;Ae<te.length;){const ot=te[Ae++];ot=="."?O&&Ae==te.length&&oe.push(""):ot==".."?((oe.length>1||oe.length==1&&oe[0]!="")&&oe.pop(),O&&Ae==te.length&&oe.push("")):(oe.push(ot),O=!0)}O=oe.join("/")}else O=te}return S?v.h=O:S=c.i.toString()!=="",S?_a(v,fl(c.i)):S=!!c.m,S&&(v.m=c.m),v};function ln(c){return new hr(c)}function un(c,v,S){c.j=S?_t(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function Vr(c,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);c.u=v}else c.u=null}function _a(c,v,S){v instanceof oi?(c.i=v,li(c.i,c.l)):(S||(v=ii(v,ai)),c.i=new oi(v,c.l))}function Nt(c,v,S){c.i.set(v,S)}function hs(c){return Nt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function _t(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ii(c,v,S){return typeof c=="string"?(c=encodeURI(c).replace(v,Rn),S&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Rn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var si=/[#\/\?@]/g,ba=/[#\?:]/g,Ls=/[#\?]/g,ai=/[#\?@]/g,Io=/#/g;function oi(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function er(c){c.g||(c.g=new Map,c.h=0,c.i&&ht(c.i,function(v,S){c.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}i=oi.prototype,i.add=function(c,v){er(this),this.i=null,c=mn(this,c);let S=this.g.get(c);return S||this.g.set(c,S=[]),S.push(v),this.h+=1,this};function hl(c,v){er(c),v=mn(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function vt(c,v){return er(c),v=mn(c,v),c.g.has(v)}i.forEach=function(c,v){er(this),this.g.forEach(function(S,O){S.forEach(function(te){c.call(v,te,O,this)},this)},this)};function Ea(c,v){er(c);let S=[];if(typeof v=="string")vt(c,v)&&(S=S.concat(c.g.get(mn(c,v))));else for(c=Array.from(c.g.values()),v=0;v<c.length;v++)S=S.concat(c[v]);return S}i.set=function(c,v){return er(this),this.i=null,c=mn(this,c),vt(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},i.get=function(c,v){return c?(c=Ea(this,c),c.length>0?String(c[0]):v):v};function Ta(c,v,S){hl(c,v),S.length>0&&(c.i=null,c.g.set(mn(c,v),$(S)),c.h+=S.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(let O=0;O<v.length;O++){var S=v[O];const te=Dr(S);S=Ea(this,S);for(let oe=0;oe<S.length;oe++){let Ae=te;S[oe]!==""&&(Ae+="="+Dr(S[oe])),c.push(Ae)}}return this.i=c.join("&")};function fl(c){const v=new oi;return v.i=c.i,c.g&&(v.g=new Map(c.g),v.h=c.h),v}function mn(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function li(c,v){v&&!c.j&&(er(c),c.i=null,c.g.forEach(function(S,O){const te=O.toLowerCase();O!=te&&(hl(this,O),Ta(this,te,S))},c)),c.j=v}function fr(c,v){const S=new Er;if(d.Image){const O=new Image;O.onload=C(Tr,S,"TestLoadImage: loaded",!0,v,O),O.onerror=C(Tr,S,"TestLoadImage: error",!1,v,O),O.onabort=C(Tr,S,"TestLoadImage: abort",!1,v,O),O.ontimeout=C(Tr,S,"TestLoadImage: timeout",!1,v,O),d.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=c}else v(!1)}function Pr(c,v){const S=new Er,O=new AbortController,te=setTimeout(()=>{O.abort(),Tr(S,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:O.signal}).then(oe=>{clearTimeout(te),oe.ok?Tr(S,"TestPingServer: ok",!0,v):Tr(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(te),Tr(S,"TestPingServer: error",!1,v)})}function Tr(c,v,S,O,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),O(S)}catch{}}function Yi(){this.g=new ya}function zt(c){this.i=c.Sb||null,this.h=c.ab||!1}I(zt,ks),zt.prototype.g=function(){return new Gn(this.i,this.h)};function Gn(c,v){pn.call(this),this.H=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(Gn,pn),i=Gn.prototype,i.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=v,this.readyState=1,Sr(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(v.body=c),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,jr(this)),this.readyState=0},i.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Sr(this)),this.g&&(this.readyState=3,Sr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ai(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ai(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}i.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?jr(this):Sr(this),this.readyState==3&&Ai(this)}},i.Oa=function(c){this.g&&(this.response=this.responseText=c,jr(this))},i.Na=function(c){this.g&&(this.response=c,jr(this))},i.ga=function(){this.g&&jr(this)};function jr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Sr(c)}i.setRequestHeader=function(c,v){this.A.append(c,v)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,c.push(S[0]+": "+S[1]),S=v.next();return c.join(`\r
`)};function Sr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Gn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Tn(c){let v="";return Be(c,function(S,O){v+=O,v+=":",v+=S,v+=`\r
`}),v}function Us(c,v,S){e:{for(O in S){var O=!1;break e}O=!0}O||(S=Tn(S),typeof c=="string"?S!=null&&Dr(S):Nt(c,v,S))}function gt(c){pn.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(gt,pn);var Lr=/^https?$/i,Sa=["POST","PUT"];i=gt.prototype,i.Fa=function(c){this.H=c},i.ea=function(c,v,S,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():en.g(),this.g.onreadystatechange=k(b(this.Ca,this));try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(oe){Qi(this,oe);return}if(c=S||"",S=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var te in O)S.set(te,O[te]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const oe of O.keys())S.set(oe,O.get(oe));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(S.keys()).find(oe=>oe.toLowerCase()=="content-type"),te=d.FormData&&c instanceof d.FormData,!(Array.prototype.indexOf.call(Sa,v,void 0)>=0)||O||te||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,Ae]of S)this.g.setRequestHeader(oe,Ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(oe){Qi(this,oe)}};function Qi(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.o=5,$i(c),Ci(c)}function $i(c){c.A||(c.A=!0,sn(c,"complete"),sn(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,sn(this,"complete"),sn(this,"abort"),Ci(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ci(this,!0)),gt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Xi(this):this.Xa())},i.Xa=function(){Xi(this)};function Xi(c){if(c.h&&typeof u<"u"){if(c.v&&ui(c)==4)setTimeout(c.Ca.bind(c),0);else if(sn(c,"readystatechange"),ui(c)==4){c.h=!1;try{const oe=c.ca();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var O;if(O=oe===0){let Ae=String(c.D).match(Ro)[1]||null;!Ae&&d.self&&d.self.location&&(Ae=d.self.location.protocol.slice(0,-1)),O=!Lr.test(Ae?Ae.toLowerCase():"")}S=O}if(S)sn(c,"complete"),sn(c,"success");else{c.o=6;try{var te=ui(c)>2?c.g.statusText:""}catch{te=""}c.l=te+" ["+c.ca()+"]",$i(c)}}finally{Ci(c)}}}}function Ci(c,v){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const S=c.g;c.g=null,v||sn(c,"ready");try{S.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ui(c){return c.g?c.g.readyState:0}i.ca=function(){try{return ui(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),Ns(v)}};function cn(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Wi(c){const v={};c=(c.g&&ui(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<c.length;O++){if(N(c[O]))continue;var S=Ps(c[O]);const te=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const oe=v[te]||[];v[te]=oe,oe.push(S)}He(v,function(O){return O.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xi(c,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[c]||v}function ci(c){this.za=0,this.i=[],this.j=new Er,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xi("baseRetryDelayMs",5e3,c),this.Za=xi("retryDelaySeedMs",1e4,c),this.Ta=xi("forwardChannelMaxRetries",2,c),this.va=xi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new wi(c&&c.concurrentRequestLimit),this.Ba=new Yi,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ci.prototype,i.ka=8,i.I=1,i.connect=function(c,v,S,O){an(0),this.W=c,this.H=v||{},S&&O!==void 0&&(this.H.OSID=S,this.H.OAID=O),this.F=this.X,this.J=Ia(this,null,this.W),Ii(this)};function fs(c){if(wa(c),c.I==3){var v=c.V++,S=ln(c.J);if(Nt(S,"SID",c.M),Nt(S,"RID",v),Nt(S,"TYPE","terminate"),Ji(c,S),v=new cr(c,c.j,v),v.M=2,v.A=hs(ln(S)),S=!1,d.navigator&&d.navigator.sendBeacon)try{S=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!S&&d.Image&&(new Image().src=v.A,S=!0),S||(v.g=Sn(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Kn(v)}Ra(c)}function Ri(c){c.g&&(ds(c),c.g.cancel(),c.g=null)}function wa(c){Ri(c),c.v&&(d.clearTimeout(c.v),c.v=null),Ca(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&d.clearTimeout(c.m),c.m=null)}function Ii(c){if(!us(c.h)&&!c.m){c.m=!0;var v=c.Ea;it||M(),Re||(it(),Re=!0),V.add(v,c),c.D=0}}function Aa(c,v){return kr(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=v.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=ei(b(c.Ea,c,v),xa(c,c.D)),c.D++,!0)}i.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const te=new cr(this,this.j,c);let oe=this.o;if(this.U&&(oe?(oe=H(oe),Ie(oe,this.U)):oe=this.U),this.u!==null||this.R||(te.J=oe,oe=null),this.S)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var O=this.i[S];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(v+=O,v>4096){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=Oo(this,te,v),S=ln(this.J),Nt(S,"RID",c),Nt(S,"CVER",22),this.G&&Nt(S,"X-HTTP-Session-Id",this.G),Ji(this,S),oe&&(this.R?v="headers="+Dr(Tn(oe))+"&"+v:this.u&&Us(S,this.u,oe)),ri(this.h,te),this.Ra&&Nt(S,"TYPE","init"),this.S?(Nt(S,"$req",v),Nt(S,"SID","null"),te.U=!0,Ln(te,S,null)):Ln(te,S,v),this.I=2}}else this.I==3&&(c?zs(this,c):this.i.length==0||us(this.h)||zs(this))};function zs(c,v){var S;v?S=v.l:S=c.V++;const O=ln(c.J);Nt(O,"SID",c.M),Nt(O,"RID",S),Nt(O,"AID",c.K),Ji(c,O),c.u&&c.o&&Us(O,c.u,c.o),S=new cr(c,c.j,S,c.D+1),c.u===null&&(S.J=c.o),v&&(c.i=v.G.concat(c.i)),v=Oo(c,S,1e3),S.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),ri(c.h,S),Ln(S,O,v)}function Ji(c,v){c.H&&Be(c.H,function(S,O){Nt(v,O,S)}),c.l&&Be({},function(S,O){Nt(v,O,S)})}function Oo(c,v,S){S=Math.min(c.i.length,S);const O=c.l?b(c.l.Ka,c.l,c):null;e:{var te=c.i;let ot=-1;for(;;){const hn=["count="+S];ot==-1?S>0?(ot=te[0].g,hn.push("ofs="+ot)):ot=0:hn.push("ofs="+ot);let Rt=!0;for(let Bt=0;Bt<S;Bt++){var oe=te[Bt].g;const Br=te[Bt].map;if(oe-=ot,oe<0)ot=Math.max(0,te[Bt].g-100),Rt=!1;else try{oe="req"+oe+"_"||"";try{var Ae=Br instanceof Map?Br:Object.entries(Br);for(const[qr,wr]of Ae){let hi=wr;g(wr)&&(hi=Ei(wr)),hn.push(oe+qr+"="+encodeURIComponent(hi))}}catch(qr){throw hn.push(oe+"type="+encodeURIComponent("_badmap")),qr}}catch{O&&O(Br)}}if(Rt){Ae=hn.join("&");break e}}Ae=void 0}return c=c.i.splice(0,S),v.G=c,Ae}function Bs(c){if(!c.g&&!c.v){c.Y=1;var v=c.Da;it||M(),Re||(it(),Re=!0),V.add(v,c),c.A=0}}function Oi(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=ei(b(c.Da,c),xa(c,c.A)),c.A++,!0)}i.Da=function(){if(this.v=null,Do(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=ei(b(this.Wa,this),c)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,an(10),Ri(this),Do(this))};function ds(c){c.B!=null&&(d.clearTimeout(c.B),c.B=null)}function Do(c){c.g=new cr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var v=ln(c.na);Nt(v,"RID","rpc"),Nt(v,"SID",c.M),Nt(v,"AID",c.K),Nt(v,"CI",c.F?"0":"1"),!c.F&&c.ia&&Nt(v,"TO",c.ia),Nt(v,"TYPE","xmlhttp"),Ji(c,v),c.u&&c.o&&Us(v,c.u,c.o),c.O&&(c.g.H=c.O);var S=c.g;c=c.ba,S.M=1,S.A=hs(ln(v)),S.u=null,S.R=!0,Gi(S,c)}i.Va=function(){this.C!=null&&(this.C=null,Ri(this),Oi(this),an(19))};function Ca(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Zi(c,v){var S=null;if(c.g==v){Ca(c),ds(c),c.g=null;var O=2}else if(Mr(c.h,v))S=v.G,va(c.h,v),O=1;else return;if(c.I!=0){if(v.o)if(O==1){S=v.u?v.u.length:0,v=Date.now()-v.F;var te=c.D;O=Rr(),sn(O,new Ir(O,S)),Ii(c)}else Bs(c);else if(te=v.m,te==3||te==0&&v.X>0||!(O==1&&Aa(c,v)||O==2&&Oi(c)))switch(S&&S.length>0&&(v=c.h,v.i=v.i.concat(S)),te){case 1:Ur(c,5);break;case 4:Ur(c,10);break;case 3:Ur(c,6);break;default:Ur(c,2)}}}function xa(c,v){let S=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(S*=2),S*v}function Ur(c,v){if(c.j.info("Error code "+v),v==2){var S=b(c.bb,c),O=c.Ua;const te=!O;O=new hr(O||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||un(O,"https"),hs(O),te?fr(O.toString(),S):Pr(O.toString(),S)}else an(2);c.I=0,c.l&&c.l.pa(v),Ra(c),wa(c)}i.bb=function(c){c?(this.j.info("Successfully pinged google.com"),an(2)):(this.j.info("Failed to ping google.com"),an(1))};function Ra(c){if(c.I=0,c.ja=[],c.l){const v=cs(c.h);(v.length!=0||c.i.length!=0)&&(le(c.ja,v),le(c.ja,c.i),c.h.i.length=0,$(c.i),c.i.length=0),c.l.oa()}}function Ia(c,v,S){var O=S instanceof hr?ln(S):new hr(S);if(O.g!="")v&&(O.g=v+"."+O.g),Vr(O,O.u);else{var te=d.location;O=te.protocol,v=v?v+"."+te.hostname:te.hostname,te=+te.port;const oe=new hr(null);O&&un(oe,O),v&&(oe.g=v),te&&Vr(oe,te),S&&(oe.h=S),O=oe}return S=c.G,v=c.wa,S&&v&&Nt(O,S,v),Nt(O,"VER",c.ka),Ji(c,O),O}function Sn(c,v,S){if(v&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Aa&&!c.ma?new gt(new zt({ab:S})):new gt(c.ma),v.Fa(c.L),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ps(){}i=ps.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function zr(){}zr.prototype.g=function(c,v){return new Yn(c,v)};function Yn(c,v){pn.call(this),this.g=new ci(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(c?c["X-WebChannel-Client-Profile"]=v.sa:c={"X-WebChannel-Client-Profile":v.sa}),this.g.U=c,(c=v&&v.Qb)&&!N(c)&&(this.g.u=c),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!N(v)&&(this.g.G=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new Di(this)}I(Yn,pn),Yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yn.prototype.close=function(){fs(this.g)},Yn.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var S={};S.__data__=c,c=S}else this.v&&(S={},S.__data__=Ei(c),c=S);v.i.push(new on(v.Ya++,c)),v.I==3&&Ii(v)},Yn.prototype.N=function(){this.g.l=null,delete this.j,fs(this.g),delete this.g,Yn.Z.N.call(this)};function qs(c){_n.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const S in v){c=S;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}I(qs,_n);function No(){bn.call(this),this.status=1}I(No,bn);function Di(c){this.g=c}I(Di,ps),Di.prototype.ra=function(){sn(this.g,"a")},Di.prototype.qa=function(c){sn(this.g,new qs(c))},Di.prototype.pa=function(c){sn(this.g,new No)},Di.prototype.oa=function(){sn(this.g,"b")},zr.prototype.createWebChannel=zr.prototype.g,Yn.prototype.send=Yn.prototype.o,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,LE=function(){return new zr},jE=function(){return Rr()},PE=ke,hm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Si.NO_ERROR=0,Si.TIMEOUT=8,Si.HTTP_ERROR=6,tf=Si,Pt.COMPLETE="complete",VE=Pt,Ti.EventType=ur,ur.OPEN="a",ur.CLOSE="b",ur.ERROR="c",ur.MESSAGE="d",pn.prototype.listen=pn.prototype.J,$u=Ti,gt.prototype.listenOnce=gt.prototype.K,gt.prototype.getLastError=gt.prototype.Ha,gt.prototype.getLastErrorCode=gt.prototype.ya,gt.prototype.getStatus=gt.prototype.ca,gt.prototype.getResponseJson=gt.prototype.La,gt.prototype.getResponseText=gt.prototype.la,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Fa,ME=gt}).apply(typeof qh<"u"?qh:typeof self<"u"?self:typeof window<"u"?window:{});const N0="@firebase/firestore",k0="4.9.2";class yr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yr.UNAUTHENTICATED=new yr(null),yr.GOOGLE_CREDENTIALS=new yr("google-credentials-uid"),yr.FIRST_PARTY=new yr("first-party-uid"),yr.MOCK_USER=new yr("mock-user");let au="12.3.0";const rl=new Dm("@firebase/firestore");function Bl(){return rl.logLevel}function Ue(i,...e){if(rl.logLevel<=wt.DEBUG){const n=e.map(Fm);rl.debug(`Firestore (${au}): ${i}`,...n)}}function pa(i,...e){if(rl.logLevel<=wt.ERROR){const n=e.map(Fm);rl.error(`Firestore (${au}): ${i}`,...n)}}function Wl(i,...e){if(rl.logLevel<=wt.WARN){const n=e.map(Fm);rl.warn(`Firestore (${au}): ${i}`,...n)}}function Fm(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function et(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,UE(i,s,n)}function UE(i,e,n){let s=`FIRESTORE (${au}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw pa(s),new Error(s)}function jt(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||UE(e,o,s)}function ct(i,e){return i}const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends ga{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class go{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class zE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(yr.UNAUTHENTICATED)))}shutdown(){}}class UI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class zI{constructor(e){this.t=e,this.currentUser=yr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){jt(this.o===void 0,42304);let s=this.i;const o=_=>this.i!==s?(s=this.i,n(_)):Promise.resolve();let u=new go;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new go,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const _=u;e.enqueueRetryable((async()=>{await _.promise,await o(this.currentUser)}))},g=_=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((_=>g(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?g(_):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new go)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(jt(typeof s.accessToken=="string",31837,{l:s}),new zE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return jt(e===null||typeof e=="string",2055,{h:e}),new yr(e)}}class BI{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=yr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new BI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(yr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class M0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ns(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){jt(this.o===void 0,3512);const s=u=>{u.error!=null&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Ue("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new M0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(jt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new M0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function FI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Km{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=FI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function At(i,e){return i<e?-1:i>e?1:0}function fm(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return $p(o)===$p(u)?At(o,u):$p(o)?1:-1}return At(i.length,e.length)}const KI=55296,GI=57343;function $p(i){const e=i.charCodeAt(0);return e>=KI&&e<=GI}function Jl(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const V0="__name__";class Es{constructor(e,n,s){n===void 0?n=0:n>e.length&&et(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&et(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Es.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Es?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Es.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return At(e.length,n.length)}static compareSegments(e,n){const s=Es.isNumericId(e),o=Es.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Es.extractNumericId(e).compare(Es.extractNumericId(n)):fm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mo.fromString(e.substring(4,e.length-2))}}class fn extends Es{construct(e,n,s){return new fn(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ge(Ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new fn(n)}static emptyPath(){return new fn([])}}const YI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class or extends Es{construct(e,n,s){return new or(e,n,s)}static isValidIdentifier(e){return YI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),or.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===V0}static keyField(){return new or([V0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new Ge(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new Ge(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[o+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new Ge(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=_,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(s+=g,o++):(u(),o++)}if(u(),d)throw new Ge(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new or(n)}static emptyPath(){return new or([])}}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(fn.fromString(e))}static fromName(e){return new $e(fn.fromString(e).popFirst(5))}static empty(){return new $e(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new fn(e.slice()))}}function QI(i,e,n){if(!n)throw new Ge(Ee.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function $I(i,e,n,s){if(e===!0&&s===!0)throw new Ge(Ee.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function P0(i){if(!$e.isDocumentKey(i))throw new Ge(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function BE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Gm(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":et(12329,{type:typeof i})}function fc(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ge(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gm(i);throw new Ge(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Pn(i,e){const n={typeString:i};return e&&(n.value=e),n}function xc(i,e){if(!BE(i))throw new Ge(Ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const d=i[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new Ge(Ee.INVALID_ARGUMENT,n);return!0}const j0=-62135596800,L0=1e6;class Zt{static now(){return Zt.fromMillis(Date.now())}static fromDate(e){return Zt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*L0);return new Zt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ge(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ge(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<j0)throw new Ge(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ge(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/L0}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xc(e,Zt._jsonSchema))return new Zt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-j0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Zt._jsonSchemaVersion="firestore/timestamp/1.0",Zt._jsonSchema={type:Pn("string",Zt._jsonSchemaVersion),seconds:Pn("number"),nanoseconds:Pn("number")};class lt{static fromTimestamp(e){return new lt(e)}static min(){return new lt(new Zt(0,0))}static max(){return new lt(new Zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const dc=-1;function XI(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=lt.fromTimestamp(s===1e9?new Zt(n+1,0):new Zt(n,s));return new yo(o,$e.empty(),e)}function WI(i){return new yo(i.readTime,i.key,dc)}class yo{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new yo(lt.min(),$e.empty(),dc)}static max(){return new yo(lt.max(),$e.empty(),dc)}}function JI(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=$e.comparator(i.documentKey,e.documentKey),n!==0?n:At(i.largestBatchId,e.largestBatchId))}const ZI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ou(i){if(i.code!==Ee.FAILED_PRECONDITION||i.message!==ZI)throw i;Ue("LocalStore","Unexpectedly lost primary lease")}class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new be(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof be?n:be.resolve(n)}catch(n){return be.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):be.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):be.reject(n)}static resolve(e){return new be(((n,s)=>{n(e)}))}static reject(e){return new be(((n,s)=>{s(e)}))}static waitFor(e){return new be(((n,s)=>{let o=0,u=0,d=!1;e.forEach((g=>{++o,g.next((()=>{++u,d&&u===o&&n()}),(_=>s(_)))})),d=!0,u===o&&n()}))}static or(e){let n=be.resolve(!1);for(const s of e)n=n.next((o=>o?be.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new be(((s,o)=>{const u=e.length,d=new Array(u);let g=0;for(let _=0;_<u;_++){const b=_;n(e[b]).next((C=>{d[b]=C,++g,g===u&&s(d)}),(C=>o(C)))}}))}static doWhile(e,n){return new be(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function t2(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function lu(i){return i.name==="IndexedDbTransactionError"}class Pf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pf.ce=-1;const Ym=-1;function jf(i){return i==null}function vf(i){return i===0&&1/i==-1/0}function n2(i){return typeof i=="number"&&Number.isInteger(i)&&!vf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const qE="";function r2(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=U0(e)),e=i2(i.get(n),e);return U0(e)}function i2(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case qE:n+="";break;default:n+=u}}return n}function U0(i){return i+qE+""}function z0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function sl(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function HE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class dn{constructor(e,n){this.comparator=e,this.root=n||ar.EMPTY}insert(e,n){return new dn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ar.BLACK,null,null))}remove(e){return new dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ar.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hh(this.root,e,this.comparator,!0)}}class Hh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ar{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??ar.RED,this.left=o??ar.EMPTY,this.right=u??ar.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new ar(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ar.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return ar.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw et(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw et(27949);return e+(this.isRed()?0:1)}}ar.EMPTY=null,ar.RED=!0,ar.BLACK=!1;ar.EMPTY=new class{constructor(){this.size=0}get key(){throw et(57766)}get value(){throw et(16141)}get color(){throw et(16727)}get left(){throw et(29726)}get right(){throw et(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new ar(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hn{constructor(e){this.comparator=e,this.data=new dn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new B0(this.data.getIterator())}getIteratorFrom(e){return new B0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Hn(this.comparator);return n.data=e,n}}class B0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class is{constructor(e){this.fields=e,e.sort(or.comparator)}static empty(){return new is([])}unionWith(e){let n=new Hn(or.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new is(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class FE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class lr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new FE("Invalid base64 string: "+u):u}})(e);return new lr(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new lr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lr.EMPTY_BYTE_STRING=new lr("");const s2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vo(i){if(jt(!!i,39018),typeof i=="string"){let e=0;const n=s2.exec(i);if(jt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Cn(i.seconds),nanos:Cn(i.nanos)}}function Cn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function _o(i){return typeof i=="string"?lr.fromBase64String(i):lr.fromUint8Array(i)}const KE="server_timestamp",GE="__type__",YE="__previous_value__",QE="__local_write_time__";function Qm(i){return(i?.mapValue?.fields||{})[GE]?.stringValue===KE}function Lf(i){const e=i.mapValue.fields[YE];return Qm(e)?Lf(e):e}function pc(i){const e=vo(i.mapValue.fields[QE].timestampValue);return new Zt(e.seconds,e.nanos)}class a2{constructor(e,n,s,o,u,d,g,_,b,C){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=b,this.isUsingEmulator=C}}const _f="(default)";class mc{constructor(e,n){this.projectId=e,this.database=n||_f}static empty(){return new mc("","")}get isDefaultDatabase(){return this.database===_f}isEqual(e){return e instanceof mc&&e.projectId===this.projectId&&e.database===this.database}}const $E="__type__",o2="__max__",Fh={mapValue:{}},XE="__vector__",bf="value";function bo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Qm(i)?4:u2(i)?9007199254740991:l2(i)?10:11:et(28295,{value:i})}function Is(i,e){if(i===e)return!0;const n=bo(i);if(n!==bo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return pc(i).isEqual(pc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=vo(o.timestampValue),g=vo(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return _o(o.bytesValue).isEqual(_o(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return Cn(o.geoPointValue.latitude)===Cn(u.geoPointValue.latitude)&&Cn(o.geoPointValue.longitude)===Cn(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Cn(o.integerValue)===Cn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Cn(o.doubleValue),g=Cn(u.doubleValue);return d===g?vf(d)===vf(g):isNaN(d)&&isNaN(g)}return!1})(i,e);case 9:return Jl(i.arrayValue.values||[],e.arrayValue.values||[],Is);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},g=u.mapValue.fields||{};if(z0(d)!==z0(g))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(g[_]===void 0||!Is(d[_],g[_])))return!1;return!0})(i,e);default:return et(52216,{left:i})}}function gc(i,e){return(i.values||[]).find((n=>Is(n,e)))!==void 0}function Zl(i,e){if(i===e)return 0;const n=bo(i),s=bo(e);if(n!==s)return At(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return At(i.booleanValue,e.booleanValue);case 2:return(function(u,d){const g=Cn(u.integerValue||u.doubleValue),_=Cn(d.integerValue||d.doubleValue);return g<_?-1:g>_?1:g===_?0:isNaN(g)?isNaN(_)?0:-1:1})(i,e);case 3:return q0(i.timestampValue,e.timestampValue);case 4:return q0(pc(i),pc(e));case 5:return fm(i.stringValue,e.stringValue);case 6:return(function(u,d){const g=_o(u),_=_o(d);return g.compareTo(_)})(i.bytesValue,e.bytesValue);case 7:return(function(u,d){const g=u.split("/"),_=d.split("/");for(let b=0;b<g.length&&b<_.length;b++){const C=At(g[b],_[b]);if(C!==0)return C}return At(g.length,_.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,d){const g=At(Cn(u.latitude),Cn(d.latitude));return g!==0?g:At(Cn(u.longitude),Cn(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return H0(i.arrayValue,e.arrayValue);case 10:return(function(u,d){const g=u.fields||{},_=d.fields||{},b=g[bf]?.arrayValue,C=_[bf]?.arrayValue,I=At(b?.values?.length||0,C?.values?.length||0);return I!==0?I:H0(b,C)})(i.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Fh.mapValue&&d===Fh.mapValue)return 0;if(u===Fh.mapValue)return 1;if(d===Fh.mapValue)return-1;const g=u.fields||{},_=Object.keys(g),b=d.fields||{},C=Object.keys(b);_.sort(),C.sort();for(let I=0;I<_.length&&I<C.length;++I){const k=fm(_[I],C[I]);if(k!==0)return k;const $=Zl(g[_[I]],b[C[I]]);if($!==0)return $}return At(_.length,C.length)})(i.mapValue,e.mapValue);default:throw et(23264,{he:n})}}function q0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return At(i,e);const n=vo(i),s=vo(e),o=At(n.seconds,s.seconds);return o!==0?o:At(n.nanos,s.nanos)}function H0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Zl(n[o],s[o]);if(u)return u}return At(n.length,s.length)}function eu(i){return dm(i)}function dm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=vo(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return _o(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return $e.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=dm(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${dm(n.fields[d])}`;return o+"}"})(i.mapValue):et(61005,{value:i})}function nf(i){switch(bo(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lf(i);return e?16+nf(e):16;case 5:return 2*i.stringValue.length;case 6:return _o(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+nf(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return sl(s.fields,((u,d)=>{o+=u.length+nf(d)})),o})(i.mapValue);default:throw et(13486,{value:i})}}function pm(i){return!!i&&"integerValue"in i}function $m(i){return!!i&&"arrayValue"in i}function F0(i){return!!i&&"nullValue"in i}function K0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function rf(i){return!!i&&"mapValue"in i}function l2(i){return(i?.mapValue?.fields||{})[$E]?.stringValue===XE}function nc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return sl(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=nc(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nc(i.arrayValue.values[n]);return e}return{...i}}function u2(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===o2}class Bi{constructor(e){this.value=e}static empty(){return new Bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!rf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nc(n)}setAll(e){let n=or.emptyPath(),s={},o=[];e.forEach(((d,g)=>{if(!n.isImmediateParentOf(g)){const _=this.getFieldsMap(n);this.applyChanges(_,s,o),s={},o=[],n=g.popLast()}d?s[g.lastSegment()]=nc(d):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());rf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Is(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];rf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){sl(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Bi(nc(this.value))}}function WE(i){const e=[];return sl(i.fields,((n,s)=>{const o=new or([n]);if(rf(s)){const u=WE(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new is(e)}class vr{constructor(e,n,s,o,u,d,g){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new vr(e,0,lt.min(),lt.min(),lt.min(),Bi.empty(),0)}static newFoundDocument(e,n,s,o){return new vr(e,1,n,lt.min(),s,o,0)}static newNoDocument(e,n){return new vr(e,2,n,lt.min(),lt.min(),Bi.empty(),0)}static newUnknownDocument(e,n){return new vr(e,3,n,lt.min(),lt.min(),Bi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ef{constructor(e,n){this.position=e,this.inclusive=n}}function G0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],d=i.position[o];if(u.field.isKeyField()?s=$e.comparator($e.fromName(d.referenceValue),n.key):s=Zl(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function Y0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Is(i.position[n],e.position[n]))return!1;return!0}class Tf{constructor(e,n="asc"){this.field=e,this.dir=n}}function c2(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class JE{}class qn extends JE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new f2(e,n,s):n==="array-contains"?new m2(e,s):n==="in"?new g2(e,s):n==="not-in"?new y2(e,s):n==="array-contains-any"?new v2(e,s):new qn(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new d2(e,s):new p2(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zl(n,this.value)):n!==null&&bo(this.value)===bo(n)&&this.matchesComparison(Zl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Os extends JE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Os(e,n)}matches(e){return ZE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ZE(i){return i.op==="and"}function e1(i){return h2(i)&&ZE(i)}function h2(i){for(const e of i.filters)if(e instanceof Os)return!1;return!0}function mm(i){if(i instanceof qn)return i.field.canonicalString()+i.op.toString()+eu(i.value);if(e1(i))return i.filters.map((e=>mm(e))).join(",");{const e=i.filters.map((n=>mm(n))).join(",");return`${i.op}(${e})`}}function t1(i,e){return i instanceof qn?(function(s,o){return o instanceof qn&&s.op===o.op&&s.field.isEqual(o.field)&&Is(s.value,o.value)})(i,e):i instanceof Os?(function(s,o){return o instanceof Os&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,d,g)=>u&&t1(d,o.filters[g])),!0):!1})(i,e):void et(19439)}function n1(i){return i instanceof qn?(function(n){return`${n.field.canonicalString()} ${n.op} ${eu(n.value)}`})(i):i instanceof Os?(function(n){return n.op.toString()+" {"+n.getFilters().map(n1).join(" ,")+"}"})(i):"Filter"}class f2 extends qn{constructor(e,n,s){super(e,n,s),this.key=$e.fromName(s.referenceValue)}matches(e){const n=$e.comparator(e.key,this.key);return this.matchesComparison(n)}}class d2 extends qn{constructor(e,n){super(e,"in",n),this.keys=r1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class p2 extends qn{constructor(e,n){super(e,"not-in",n),this.keys=r1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function r1(i,e){return(e.arrayValue?.values||[]).map((n=>$e.fromName(n.referenceValue)))}class m2 extends qn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $m(n)&&gc(n.arrayValue,this.value)}}class g2 extends qn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gc(this.value.arrayValue,n)}}class y2 extends qn{constructor(e,n){super(e,"not-in",n)}matches(e){if(gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!gc(this.value.arrayValue,n)}}class v2 extends qn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$m(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>gc(this.value.arrayValue,s)))}}class _2{constructor(e,n=null,s=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this.Te=null}}function Q0(i,e=null,n=[],s=[],o=null,u=null,d=null){return new _2(i,e,n,s,o,u,d)}function Xm(i){const e=ct(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>mm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),jf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>eu(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>eu(s))).join(",")),e.Te=n}return e.Te}function Wm(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!c2(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!t1(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Y0(i.startAt,e.startAt)&&Y0(i.endAt,e.endAt)}function gm(i){return $e.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Uf{constructor(e,n=null,s=[],o=[],u=null,d="F",g=null,_=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function b2(i,e,n,s,o,u,d,g){return new Uf(i,e,n,s,o,u,d,g)}function Jm(i){return new Uf(i)}function $0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function E2(i){return i.collectionGroup!==null}function rc(i){const e=ct(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Hn(or.comparator);return d.filters.forEach((_=>{_.getFlattenedFilters().forEach((b=>{b.isInequality()&&(g=g.add(b.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Tf(u,s))})),n.has(or.keyField().canonicalString())||e.Ie.push(new Tf(or.keyField(),s))}return e.Ie}function ws(i){const e=ct(i);return e.Ee||(e.Ee=T2(e,rc(i))),e.Ee}function T2(i,e){if(i.limitType==="F")return Q0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Tf(o.field,u)}));const n=i.endAt?new Ef(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Ef(i.startAt.position,i.startAt.inclusive):null;return Q0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function ym(i,e,n){return new Uf(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function zf(i,e){return Wm(ws(i),ws(e))&&i.limitType===e.limitType}function i1(i){return`${Xm(ws(i))}|lt:${i.limitType}`}function ql(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>n1(o))).join(", ")}]`),jf(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>eu(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>eu(o))).join(",")),`Target(${s})`})(ws(i))}; limitType=${i.limitType})`}function Bf(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):$e.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of rc(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(d,g,_){const b=G0(d,g,_);return d.inclusive?b<=0:b<0})(s.startAt,rc(s),o)||s.endAt&&!(function(d,g,_){const b=G0(d,g,_);return d.inclusive?b>=0:b>0})(s.endAt,rc(s),o))})(i,e)}function S2(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function s1(i){return(e,n)=>{let s=!1;for(const o of rc(i)){const u=w2(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function w2(i,e,n){const s=i.field.isKeyField()?$e.comparator(e.key,n.key):(function(u,d,g){const _=d.data.field(u),b=g.data.field(u);return _!==null&&b!==null?Zl(_,b):et(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return et(19790,{direction:i.dir})}}class al{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){sl(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return HE(this.inner)}size(){return this.innerSize}}const A2=new dn($e.comparator);function ma(){return A2}const a1=new dn($e.comparator);function Xu(...i){let e=a1;for(const n of i)e=e.insert(n.key,n);return e}function o1(i){let e=a1;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Xo(){return ic()}function l1(){return ic()}function ic(){return new al((i=>i.toString()),((i,e)=>i.isEqual(e)))}const C2=new dn($e.comparator),x2=new Hn($e.comparator);function Ct(...i){let e=x2;for(const n of i)e=e.add(n);return e}const R2=new Hn(At);function I2(){return R2}function Zm(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vf(e)?"-0":e}}function u1(i){return{integerValue:""+i}}function O2(i,e){return n2(e)?u1(e):Zm(i,e)}class qf{constructor(){this._=void 0}}function D2(i,e,n){return i instanceof Sf?(function(o,u){const d={fields:{[GE]:{stringValue:KE},[QE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Qm(u)&&(u=Lf(u)),u&&(d.fields[YE]=u),{mapValue:d}})(n,e):i instanceof yc?h1(i,e):i instanceof vc?f1(i,e):(function(o,u){const d=c1(o,u),g=X0(d)+X0(o.Ae);return pm(d)&&pm(o.Ae)?u1(g):Zm(o.serializer,g)})(i,e)}function N2(i,e,n){return i instanceof yc?h1(i,e):i instanceof vc?f1(i,e):n}function c1(i,e){return i instanceof wf?(function(s){return pm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Sf extends qf{}class yc extends qf{constructor(e){super(),this.elements=e}}function h1(i,e){const n=d1(e);for(const s of i.elements)n.some((o=>Is(o,s)))||n.push(s);return{arrayValue:{values:n}}}class vc extends qf{constructor(e){super(),this.elements=e}}function f1(i,e){let n=d1(e);for(const s of i.elements)n=n.filter((o=>!Is(o,s)));return{arrayValue:{values:n}}}class wf extends qf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function X0(i){return Cn(i.integerValue||i.doubleValue)}function d1(i){return $m(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function k2(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof yc&&o instanceof yc||s instanceof vc&&o instanceof vc?Jl(s.elements,o.elements,Is):s instanceof wf&&o instanceof wf?Is(s.Ae,o.Ae):s instanceof Sf&&o instanceof Sf})(i.transform,e.transform)}class M2{constructor(e,n){this.version=e,this.transformResults=n}}class ca{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ca}static exists(e){return new ca(void 0,e)}static updateTime(e){return new ca(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sf(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Hf{}function p1(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new g1(i.key,ca.none()):new Rc(i.key,i.data,ca.none());{const n=i.data,s=Bi.empty();let o=new Hn(or.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new ol(i.key,s,new is(o.toArray()),ca.none())}}function V2(i,e,n){i instanceof Rc?(function(o,u,d){const g=o.value.clone(),_=J0(o.fieldTransforms,u,d.transformResults);g.setAll(_),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(i,e,n):i instanceof ol?(function(o,u,d){if(!sf(o.precondition,u))return void u.convertToUnknownDocument(d.version);const g=J0(o.fieldTransforms,u,d.transformResults),_=u.data;_.setAll(m1(o)),_.setAll(g),u.convertToFoundDocument(d.version,_).setHasCommittedMutations()})(i,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function sc(i,e,n,s){return i instanceof Rc?(function(u,d,g,_){if(!sf(u.precondition,d))return g;const b=u.value.clone(),C=Z0(u.fieldTransforms,_,d);return b.setAll(C),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),null})(i,e,n,s):i instanceof ol?(function(u,d,g,_){if(!sf(u.precondition,d))return g;const b=Z0(u.fieldTransforms,_,d),C=d.data;return C.setAll(m1(u)),C.setAll(b),d.convertToFoundDocument(d.version,C).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((I=>I.field)))})(i,e,n,s):(function(u,d,g){return sf(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(i,e,n)}function P2(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=c1(s.transform,o||null);u!=null&&(n===null&&(n=Bi.empty()),n.set(s.field,u))}return n||null}function W0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Jl(s,o,((u,d)=>k2(u,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Rc extends Hf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ol extends Hf{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function m1(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function J0(i,e,n){const s=new Map;jt(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],d=u.transform,g=e.data.field(u.field);s.set(u.field,N2(d,g,n[o]))}return s}function Z0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,d=n.data.field(o.field);s.set(o.field,D2(u,d,e))}return s}class g1 extends Hf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class j2 extends Hf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class L2{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&V2(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=sc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=sc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=l1();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=n.has(o.key)?null:g;const _=p1(d,g);_!==null&&s.set(o.key,_),d.isValidDocument()||d.convertToNoDocument(lt.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ct())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,((n,s)=>W0(n,s)))&&Jl(this.baseMutations,e.baseMutations,((n,s)=>W0(n,s)))}}class eg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){jt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return C2})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new eg(e,n,s,o)}}class U2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class z2{constructor(e,n){this.count=e,this.unchangedNames=n}}var Vn,Dt;function B2(i){switch(i){case Ee.OK:return et(64938);case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return et(15467,{code:i})}}function y1(i){if(i===void 0)return pa("GRPC error has no .code"),Ee.UNKNOWN;switch(i){case Vn.OK:return Ee.OK;case Vn.CANCELLED:return Ee.CANCELLED;case Vn.UNKNOWN:return Ee.UNKNOWN;case Vn.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case Vn.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case Vn.INTERNAL:return Ee.INTERNAL;case Vn.UNAVAILABLE:return Ee.UNAVAILABLE;case Vn.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case Vn.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case Vn.NOT_FOUND:return Ee.NOT_FOUND;case Vn.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case Vn.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case Vn.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case Vn.ABORTED:return Ee.ABORTED;case Vn.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case Vn.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case Vn.DATA_LOSS:return Ee.DATA_LOSS;default:return et(39323,{code:i})}}(Dt=Vn||(Vn={}))[Dt.OK=0]="OK",Dt[Dt.CANCELLED=1]="CANCELLED",Dt[Dt.UNKNOWN=2]="UNKNOWN",Dt[Dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dt[Dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dt[Dt.NOT_FOUND=5]="NOT_FOUND",Dt[Dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dt[Dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dt[Dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dt[Dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dt[Dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dt[Dt.ABORTED=10]="ABORTED",Dt[Dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dt[Dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dt[Dt.INTERNAL=13]="INTERNAL",Dt[Dt.UNAVAILABLE=14]="UNAVAILABLE",Dt[Dt.DATA_LOSS=15]="DATA_LOSS";function q2(){return new TextEncoder}const H2=new mo([4294967295,4294967295],0);function eb(i){const e=q2().encode(i),n=new kE;return n.update(e),new Uint8Array(n.digest())}function tb(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new mo([n,s],0),new mo([o,u],0)]}class tg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Wu(`Invalid padding: ${n}`);if(s<0)throw new Wu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Wu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Wu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=mo.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(mo.fromNumber(s)));return o.compare(H2)===1&&(o=new mo([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=eb(e),[s,o]=tb(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new tg(u,o,n);return s.forEach((g=>d.insert(g))),d}insert(e){if(this.ge===0)return;const n=eb(e),[s,o]=tb(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ff{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Ff(lt.min(),o,new dn(At),ma(),Ct())}}class Ic{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Ic(s,n,Ct(),Ct(),Ct())}}class af{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class v1{constructor(e,n){this.targetId=e,this.Ce=n}}class _1{constructor(e,n,s=lr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class nb{constructor(){this.ve=0,this.Fe=rb(),this.Me=lr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ct(),n=Ct(),s=Ct();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:et(38017,{changeType:u})}})),new Ic(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=rb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,jt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class F2{constructor(e){this.Ge=e,this.ze=new Map,this.je=ma(),this.Je=Kh(),this.He=Kh(),this.Ye=new dn(At)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:et(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(gm(u))if(s===0){const d=new $e(u.path);this.et(n,d,vr.newNoDocument(d,lt.min()))}else jt(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const g=this.ut(e),_=g?this.ct(g,e,d):1;if(_!==0){this.it(n);const b=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,b)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,g;try{d=_o(s).toUint8Array()}catch(_){if(_ instanceof FE)return Wl("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{g=new tg(d,o,u)}catch(_){return Wl(_ instanceof Wu?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return g.ge===0?null:g}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const g=this.ot(d);if(g){if(u.current&&gm(g.target)){const _=new $e(g.target.path);this.It(_).has(d)||this.Et(d,_)||this.et(d,_,vr.newNoDocument(_,e))}u.Be&&(n.set(d,u.ke()),u.qe())}}));let s=Ct();this.He.forEach(((u,d)=>{let g=!0;d.forEachWhile((_=>{const b=this.ot(_);return!b||b.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new Ff(e,n,this.Ye,this.je,s);return this.je=ma(),this.Je=Kh(),this.He=Kh(),this.Ye=new dn(At),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new nb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Hn(At),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Hn(At),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ue("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Kh(){return new dn($e.comparator)}function rb(){return new dn($e.comparator)}const K2={asc:"ASCENDING",desc:"DESCENDING"},G2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y2={and:"AND",or:"OR"};class Q2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vm(i,e){return i.useProto3Json||jf(e)?e:{value:e}}function Af(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function b1(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function $2(i,e){return Af(i,e.toTimestamp())}function As(i){return jt(!!i,49232),lt.fromTimestamp((function(n){const s=vo(n);return new Zt(s.seconds,s.nanos)})(i))}function ng(i,e){return _m(i,e).canonicalString()}function _m(i,e){const n=(function(o){return new fn(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function E1(i){const e=fn.fromString(i);return jt(C1(e),10190,{key:e.toString()}),e}function bm(i,e){return ng(i.databaseId,e.path)}function Xp(i,e){const n=E1(e);if(n.get(1)!==i.databaseId.projectId)throw new Ge(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Ge(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new $e(S1(n))}function T1(i,e){return ng(i.databaseId,e)}function X2(i){const e=E1(i);return e.length===4?fn.emptyPath():S1(e)}function Em(i){return new fn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function S1(i){return jt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function ib(i,e,n){return{name:bm(i,e),fields:n.value.mapValue.fields}}function W2(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:et(39313,{state:b})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(b,C){return b.useProto3Json?(jt(C===void 0||typeof C=="string",58123),lr.fromBase64String(C||"")):(jt(C===void 0||C instanceof Buffer||C instanceof Uint8Array,16193),lr.fromUint8Array(C||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(b){const C=b.code===void 0?Ee.UNKNOWN:y1(b.code);return new Ge(C,b.message||"")})(d);n=new _1(s,o,u,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Xp(i,s.document.name),u=As(s.document.updateTime),d=s.document.createTime?As(s.document.createTime):lt.min(),g=new Bi({mapValue:{fields:s.document.fields}}),_=vr.newFoundDocument(o,u,d,g),b=s.targetIds||[],C=s.removedTargetIds||[];n=new af(b,C,_.key,_)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Xp(i,s.document),u=s.readTime?As(s.readTime):lt.min(),d=vr.newNoDocument(o,u),g=s.removedTargetIds||[];n=new af([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Xp(i,s.document),u=s.removedTargetIds||[];n=new af([],u,o,null)}else{if(!("filter"in e))return et(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new z2(o,u),g=s.targetId;n=new v1(g,d)}}return n}function J2(i,e){let n;if(e instanceof Rc)n={update:ib(i,e.key,e.value)};else if(e instanceof g1)n={delete:bm(i,e.key)};else if(e instanceof ol)n={update:ib(i,e.key,e.data),updateMask:oO(e.fieldMask)};else{if(!(e instanceof j2))return et(16599,{Vt:e.type});n={verify:bm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,d){const g=d.transform;if(g instanceof Sf)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof yc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof vc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof wf)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw et(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:$2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:et(27497)})(i,e.precondition)),n}function Z2(i,e){return i&&i.length>0?(jt(e!==void 0,14353),i.map((n=>(function(o,u){let d=o.updateTime?As(o.updateTime):As(u);return d.isEqual(lt.min())&&(d=As(u)),new M2(d,o.transformResults||[])})(n,e)))):[]}function eO(i,e){return{documents:[T1(i,e.path)]}}function tO(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=T1(i,o);const u=(function(b){if(b.length!==0)return A1(Os.create(b,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(b){if(b.length!==0)return b.map((C=>(function(k){return{field:Hl(k.field),direction:iO(k.dir)}})(C)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const g=vm(i,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(e.endAt)),{ft:n,parent:o}}function nO(i){let e=X2(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){jt(s===1,65062);const C=n.from[0];C.allDescendants?o=C.collectionId:e=e.child(C.collectionId)}let u=[];n.where&&(u=(function(I){const k=w1(I);return k instanceof Os&&e1(k)?k.getFilters():[k]})(n.where));let d=[];n.orderBy&&(d=(function(I){return I.map((k=>(function(le){return new Tf(Fl(le.field),(function(ge){switch(ge){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(le.direction))})(k)))})(n.orderBy));let g=null;n.limit&&(g=(function(I){let k;return k=typeof I=="object"?I.value:I,jf(k)?null:k})(n.limit));let _=null;n.startAt&&(_=(function(I){const k=!!I.before,$=I.values||[];return new Ef($,k)})(n.startAt));let b=null;return n.endAt&&(b=(function(I){const k=!I.before,$=I.values||[];return new Ef($,k)})(n.endAt)),b2(e,o,d,u,g,"F",_,b)}function rO(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function w1(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Fl(n.unaryFilter.field);return qn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Fl(n.unaryFilter.field);return qn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Fl(n.unaryFilter.field);return qn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Fl(n.unaryFilter.field);return qn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return et(61313);default:return et(60726)}})(i):i.fieldFilter!==void 0?(function(n){return qn.create(Fl(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return et(58110);default:return et(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Os.create(n.compositeFilter.filters.map((s=>w1(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return et(1026)}})(n.compositeFilter.op))})(i):et(30097,{filter:i})}function iO(i){return K2[i]}function sO(i){return G2[i]}function aO(i){return Y2[i]}function Hl(i){return{fieldPath:i.canonicalString()}}function Fl(i){return or.fromServerFormat(i.fieldPath)}function A1(i){return i instanceof qn?(function(n){if(n.op==="=="){if(K0(n.value))return{unaryFilter:{field:Hl(n.field),op:"IS_NAN"}};if(F0(n.value))return{unaryFilter:{field:Hl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(K0(n.value))return{unaryFilter:{field:Hl(n.field),op:"IS_NOT_NAN"}};if(F0(n.value))return{unaryFilter:{field:Hl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hl(n.field),op:sO(n.op),value:n.value}}})(i):i instanceof Os?(function(n){const s=n.getFilters().map((o=>A1(o)));return s.length===1?s[0]:{compositeFilter:{op:aO(n.op),filters:s}}})(i):et(54877,{filter:i})}function oO(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function C1(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class uo{constructor(e,n,s,o,u=lt.min(),d=lt.min(),g=lr.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new uo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new uo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new uo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new uo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class lO{constructor(e){this.yt=e}}function uO(i){const e=nO({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?ym(e,e.limit,"L"):e}class cO{constructor(){this.Cn=new hO}addToCollectionParentIndex(e,n){return this.Cn.add(n),be.resolve()}getCollectionParents(e,n){return be.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return be.resolve()}deleteFieldIndex(e,n){return be.resolve()}deleteAllFieldIndexes(e){return be.resolve()}createTargetIndexes(e,n){return be.resolve()}getDocumentsMatchingTarget(e,n){return be.resolve(null)}getIndexType(e,n){return be.resolve(0)}getFieldIndexes(e,n){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,n){return be.resolve(yo.min())}getMinOffsetFromCollectionGroup(e,n){return be.resolve(yo.min())}updateCollectionGroup(e,n,s){return be.resolve()}updateIndexEntries(e,n){return be.resolve()}}class hO{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Hn(fn.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Hn(fn.comparator)).toArray()}}const sb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},x1=41943040;class $r{static withCacheSize(e){return new $r(e,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}$r.DEFAULT_COLLECTION_PERCENTILE=10,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$r.DEFAULT=new $r(x1,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$r.DISABLED=new $r(-1,0,0);class tu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tu(0)}static cr(){return new tu(-1)}}const ab="LruGarbageCollector",fO=1048576;function ob([i,e],[n,s]){const o=At(i,n);return o===0?At(e,s):o}class dO{constructor(e){this.Ir=e,this.buffer=new Hn(ob),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();ob(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class pO{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ue(ab,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){lu(n)?Ue(ab,"Ignoring IndexedDB error during garbage collection: ",n):await ou(n)}await this.Vr(3e5)}))}}class mO{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return be.resolve(Pf.ce);const s=new dO(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(sb)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sb):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,d,g,_,b;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,d=Date.now(),this.nthSequenceNumber(e,o)))).next((I=>(s=I,g=Date.now(),this.removeTargets(e,s,n)))).next((I=>(u=I,_=Date.now(),this.removeOrphanedDocuments(e,s)))).next((I=>(b=Date.now(),Bl()<=wt.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-C}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${u} targets in `+(_-g)+`ms
	Removed ${I} documents in `+(b-_)+`ms
Total Duration: ${b-C}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:I}))))}}function gO(i,e){return new mO(i,e)}class yO{constructor(){this.changes=new al((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?be.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class _O{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&sc(s.mutation,o,is.empty(),Zt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Ct()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Ct()){const o=Xo();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let d=Xu();return u.forEach(((g,_)=>{d=d.insert(g,_.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=Xo();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Ct())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,g)=>{n.set(d,g)}))}))}computeViews(e,n,s,o){let u=ma();const d=ic(),g=(function(){return ic()})();return n.forEach(((_,b)=>{const C=s.get(b.key);o.has(b.key)&&(C===void 0||C.mutation instanceof ol)?u=u.insert(b.key,b):C!==void 0?(d.set(b.key,C.mutation.getFieldMask()),sc(C.mutation,b,C.mutation.getFieldMask(),Zt.now())):d.set(b.key,is.empty())})),this.recalculateAndSaveOverlays(e,u).next((_=>(_.forEach(((b,C)=>d.set(b,C))),n.forEach(((b,C)=>g.set(b,new vO(C,d.get(b)??null)))),g)))}recalculateAndSaveOverlays(e,n){const s=ic();let o=new dn(((d,g)=>d-g)),u=Ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const g of d)g.keys().forEach((_=>{const b=n.get(_);if(b===null)return;let C=s.get(_)||is.empty();C=g.applyToLocalView(b,C),s.set(_,C);const I=(o.get(g.batchId)||Ct()).add(_);o=o.insert(g.batchId,I)}))})).next((()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),b=_.key,C=_.value,I=l1();C.forEach((k=>{if(!u.has(k)){const $=p1(n.get(k),s.get(k));$!==null&&I.set(k,$),u=u.add(k)}})),d.push(this.documentOverlayCache.saveOverlays(e,b,I))}return be.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return $e.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):E2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):be.resolve(Xo());let g=dc,_=u;return d.next((b=>be.forEach(b,((C,I)=>(g<I.largestBatchId&&(g=I.largestBatchId),u.get(C)?be.resolve():this.remoteDocumentCache.getEntry(e,C).next((k=>{_=_.insert(C,k)}))))).next((()=>this.populateOverlays(e,b,u))).next((()=>this.computeViews(e,_,b,Ct()))).next((C=>({batchId:g,changes:o1(C)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $e(n)).next((s=>{let o=Xu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=Xu();return this.indexManager.getCollectionParents(e,u).next((g=>be.forEach(g,(_=>{const b=(function(I,k){return new Uf(k,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(n,_.child(u));return this.getDocumentsMatchingCollectionQuery(e,b,s,o).next((C=>{C.forEach(((I,k)=>{d=d.insert(I,k)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((d=>{u.forEach(((_,b)=>{const C=b.getKey();d.get(C)===null&&(d=d.insert(C,vr.newInvalidDocument(C)))}));let g=Xu();return d.forEach(((_,b)=>{const C=u.get(_);C!==void 0&&sc(C.mutation,b,is.empty(),Zt.now()),Bf(n,b)&&(g=g.insert(_,b))})),g}))}}class bO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return be.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:As(o.createTime)}})(n)),be.resolve()}getNamedQuery(e,n){return be.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:uO(o.bundledQuery),readTime:As(o.readTime)}})(n)),be.resolve()}}class EO{constructor(){this.overlays=new dn($e.comparator),this.qr=new Map}getOverlay(e,n){return be.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Xo();return be.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),be.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),be.resolve()}getOverlaysForCollection(e,n,s){const o=Xo(),u=n.length+1,d=new $e(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const _=g.getNext().value,b=_.getKey();if(!n.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>s&&o.set(_.getKey(),_)}return be.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new dn(((b,C)=>b-C));const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===n&&b.largestBatchId>s){let C=u.get(b.largestBatchId);C===null&&(C=Xo(),u=u.insert(b.largestBatchId,C)),C.set(b.getKey(),b)}}const g=Xo(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((b,C)=>g.set(b,C))),!(g.size()>=o)););return be.resolve(g)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new U2(n,s));let u=this.qr.get(n);u===void 0&&(u=Ct(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class TO{constructor(){this.sessionToken=lr.EMPTY_BYTE_STRING}getSessionToken(e){return be.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,be.resolve()}}class rg{constructor(){this.Qr=new Hn(Wn.$r),this.Ur=new Hn(Wn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Wn(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Wn(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new $e(new fn([])),s=new Wn(n,e),o=new Wn(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new $e(new fn([])),s=new Wn(n,e),o=new Wn(n,e+1);let u=Ct();return this.Ur.forEachInRange([s,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new Wn(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Wn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return $e.comparator(e.key,n.key)||At(e.Yr,n.Yr)}static Kr(e,n){return At(e.Yr,n.Yr)||$e.comparator(e.key,n.key)}}class SO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Hn(Wn.$r)}checkEmpty(e){return be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new L2(u,n,s,o);this.mutationQueue.push(d);for(const g of o)this.Zr=this.Zr.add(new Wn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return be.resolve(d)}lookupMutationBatch(e,n){return be.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return be.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(this.mutationQueue.length===0?Ym:this.tr-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Wn(n,0),o=new Wn(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(d=>{const g=this.Xr(d.Yr);u.push(g)})),be.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Hn(At);return n.forEach((o=>{const u=new Wn(o,0),d=new Wn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(g=>{s=s.add(g.Yr)}))})),be.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;$e.isDocumentKey(u)||(u=u.child(""));const d=new Wn(new $e(u),0);let g=new Hn(At);return this.Zr.forEachWhile((_=>{const b=_.key.path;return!!s.isPrefixOf(b)&&(b.length===o&&(g=g.add(_.Yr)),!0)}),d),be.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){jt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return be.forEach(n.mutations,(o=>{const u=new Wn(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Wn(n,0),o=this.Zr.firstAfterOrEqual(s);return be.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,be.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class wO{constructor(e){this.ri=e,this.docs=(function(){return new dn($e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return be.resolve(s?s.document.mutableCopy():vr.newInvalidDocument(n))}getEntries(e,n){let s=ma();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():vr.newInvalidDocument(o))})),be.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=ma();const d=n.path,g=new $e(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:b,value:{document:C}}=_.getNext();if(!d.isPrefixOf(b.path))break;b.path.length>d.length+1||JI(WI(C),s)<=0||(o.has(C.key)||Bf(n,C))&&(u=u.insert(C.key,C.mutableCopy()))}return be.resolve(u)}getAllFromCollectionGroup(e,n,s,o){et(9500)}ii(e,n){return be.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new AO(this)}getSize(e){return be.resolve(this.size)}}class AO extends yO{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),be.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class CO{constructor(e){this.persistence=e,this.si=new al((n=>Xm(n)),Wm),this.lastRemoteSnapshotVersion=lt.min(),this.highestTargetId=0,this.oi=0,this._i=new rg,this.targetCount=0,this.ai=tu.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),be.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new tu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,be.resolve()}updateTargetData(e,n){return this.Pr(n),be.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),be.waitFor(u).next((()=>o))}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return be.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),be.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),be.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),be.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return be.resolve(s)}containsKey(e,n){return be.resolve(this._i.containsKey(n))}}class R1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Pf(0),this.li=!1,this.li=!0,this.hi=new TO,this.referenceDelegate=e(this),this.Pi=new CO(this),this.indexManager=new cO,this.remoteDocumentCache=(function(o){return new wO(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new lO(n),this.Ii=new bO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new EO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new SO(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Ue("MemoryPersistence","Starting transaction:",e);const o=new xO(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return be.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class xO extends e2{constructor(e){super(),this.currentSequenceNumber=e}}class ig{constructor(e){this.persistence=e,this.Ri=new rg,this.Vi=null}static mi(e){return new ig(e)}get fi(){if(this.Vi)return this.Vi;throw et(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),be.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),be.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),be.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.fi,(s=>{const o=$e.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,lt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return be.or([()=>be.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Cf{constructor(e,n){this.persistence=e,this.pi=new al((s=>r2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=gO(this,n)}static mi(e,n){return new Cf(e,n)}Ei(){}di(e){return be.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return be.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?be.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((g=>{g||(s++,u.removeEntry(d,lt.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),be.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),be.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),be.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),be.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=nf(e.data.value)),n}br(e,n,s){return be.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return be.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class sg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Ct(),o=Ct();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new sg(e,n.fromCache,s,o)}}class RO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class IO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return vC()?8:t2(br())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new RO;return this.Ss(e,n,d).next((g=>{if(u.result=g,this.Vs)return this.bs(e,n,d,g.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(Bl()<=wt.DEBUG&&Ue("QueryEngine","SDK will not create cache indexes for query:",ql(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),be.resolve()):(Bl()<=wt.DEBUG&&Ue("QueryEngine","Query:",ql(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Bl()<=wt.DEBUG&&Ue("QueryEngine","The SDK decides to create cache indexes for query:",ql(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ws(n))):be.resolve())}ys(e,n){if($0(n))return be.resolve(null);let s=ws(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=ym(n,null,"F"),s=ws(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const d=Ct(...u);return this.ps.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,s).next((_=>{const b=this.Ds(n,g);return this.Cs(n,b,d,_.readTime)?this.ys(e,ym(n,null,"F")):this.vs(e,b,n,_)}))))})))))}ws(e,n,s,o){return $0(n)||o.isEqual(lt.min())?be.resolve(null):this.ps.getDocuments(e,s).next((u=>{const d=this.Ds(n,u);return this.Cs(n,d,s,o)?be.resolve(null):(Bl()<=wt.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ql(n)),this.vs(e,d,n,XI(o,dc)).next((g=>g)))}))}Ds(e,n){let s=new Hn(s1(e));return n.forEach(((o,u)=>{Bf(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return Bl()<=wt.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",ql(n)),this.ps.getDocumentsMatchingQuery(e,n,yo.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const ag="LocalStore",OO=3e8;class DO{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new dn(At),this.xs=new al((u=>Xm(u)),Wm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _O(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function NO(i,e,n,s){return new DO(i,e,n,s)}async function I1(i,e){const n=ct(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const d=[],g=[];let _=Ct();for(const b of o){d.push(b.batchId);for(const C of b.mutations)_=_.add(C.key)}for(const b of u){g.push(b.batchId);for(const C of b.mutations)_=_.add(C.key)}return n.localDocuments.getDocuments(s,_).next((b=>({Ls:b,removedBatchIds:d,addedBatchIds:g})))}))}))}function kO(i,e){const n=ct(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,_,b,C){const I=b.batch,k=I.keys();let $=be.resolve();return k.forEach((le=>{$=$.next((()=>C.getEntry(_,le))).next((he=>{const ge=b.docVersions.get(le);jt(ge!==null,48541),he.version.compareTo(ge)<0&&(I.applyToRemoteDocument(he,b),he.isValidDocument()&&(he.setReadTime(b.commitVersion),C.addEntry(he)))}))})),$.next((()=>g.mutationQueue.removeMutationBatch(_,I)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let _=Ct();for(let b=0;b<g.mutationResults.length;++b)g.mutationResults[b].transformResults.length>0&&(_=_.add(g.batch.mutations[b].key));return _})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function O1(i){const e=ct(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function MO(i,e){const n=ct(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((C,I)=>{const k=o.get(I);if(!k)return;g.push(n.Pi.removeMatchingKeys(u,C.removedDocuments,I).next((()=>n.Pi.addMatchingKeys(u,C.addedDocuments,I))));let $=k.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(I)!==null?$=$.withResumeToken(lr.EMPTY_BYTE_STRING,lt.min()).withLastLimboFreeSnapshotVersion(lt.min()):C.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(C.resumeToken,s)),o=o.insert(I,$),(function(he,ge,Ve){return he.resumeToken.approximateByteSize()===0||ge.snapshotVersion.toMicroseconds()-he.snapshotVersion.toMicroseconds()>=OO?!0:Ve.addedDocuments.size+Ve.modifiedDocuments.size+Ve.removedDocuments.size>0})(k,$,C)&&g.push(n.Pi.updateTargetData(u,$))}));let _=ma(),b=Ct();if(e.documentUpdates.forEach((C=>{e.resolvedLimboDocuments.has(C)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,C))})),g.push(VO(u,d,e.documentUpdates).next((C=>{_=C.ks,b=C.qs}))),!s.isEqual(lt.min())){const C=n.Pi.getLastRemoteSnapshotVersion(u).next((I=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));g.push(C)}return be.waitFor(g).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,_,b))).next((()=>_))})).then((u=>(n.Ms=o,u)))}function VO(i,e,n){let s=Ct(),o=Ct();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let d=ma();return n.forEach(((g,_)=>{const b=u.get(g);_.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(g)),_.isNoDocument()&&_.version.isEqual(lt.min())?(e.removeEntry(g,_.readTime),d=d.insert(g,_)):!b.isValidDocument()||_.version.compareTo(b.version)>0||_.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(_),d=d.insert(g,_)):Ue(ag,"Ignoring outdated watch update for ",g,". Current version:",b.version," Watch version:",_.version)})),{ks:d,qs:o}}))}function PO(i,e){const n=ct(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Ym),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function jO(i,e){const n=ct(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,be.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new uo(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Tm(i,e,n){const s=ct(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!lu(d))throw d;Ue(ag,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function lb(i,e,n){const s=ct(i);let o=lt.min(),u=Ct();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(_,b,C){const I=ct(_),k=I.xs.get(C);return k!==void 0?be.resolve(I.Ms.get(k)):I.Pi.getTargetData(b,C)})(s,d,ws(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,g.targetId).next((_=>{u=_}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:lt.min(),n?u:Ct()))).next((g=>(LO(s,S2(e),g),{documents:g,Qs:u})))))}function LO(i,e,n){let s=i.Os.get(e)||lt.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class ub{constructor(){this.activeTargetIds=I2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UO{constructor(){this.Mo=new ub,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ub,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zO{Oo(e){}shutdown(){}}const cb="ConnectivityMonitor";class hb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ue(cb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ue(cb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Gh=null;function Sm(){return Gh===null?Gh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gh++,"0x"+Gh.toString(16)}const Wp="RestConnection",BO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===_f?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const d=Sm(),g=this.zo(e,n.toUriEncodedString());Ue(Wp,`Sending RPC '${e}' ${d}:`,g,s);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,o,u);const{host:b}=new URL(g),C=ru(b);return this.Jo(e,g,_,s,C).then((I=>(Ue(Wp,`Received RPC '${e}' ${d}: `,I),I)),(I=>{throw Wl(Wp,`RPC '${e}' ${d} failed with error: `,I,"url: ",g,"request:",s),I}))}Ho(e,n,s,o,u,d){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+au})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=BO[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class HO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const gr="WebChannelConnection";class FO extends qO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const d=Sm();return new Promise(((g,_)=>{const b=new ME;b.setWithCredentials(!0),b.listenOnce(VE.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case tf.NO_ERROR:const I=b.getResponseJson();Ue(gr,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(I)),g(I);break;case tf.TIMEOUT:Ue(gr,`RPC '${e}' ${d} timed out`),_(new Ge(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case tf.HTTP_ERROR:const k=b.getStatus();if(Ue(gr,`RPC '${e}' ${d} failed with status:`,k,"response text:",b.getResponseText()),k>0){let $=b.getResponseJson();Array.isArray($)&&($=$[0]);const le=$?.error;if(le&&le.status&&le.message){const he=(function(Ve){const Fe=Ve.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(Fe)>=0?Fe:Ee.UNKNOWN})(le.status);_(new Ge(he,le.message))}else _(new Ge(Ee.UNKNOWN,"Server responded with status "+b.getStatus()))}else _(new Ge(Ee.UNAVAILABLE,"Connection failed."));break;default:et(9055,{l_:e,streamId:d,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{Ue(gr,`RPC '${e}' ${d} completed.`)}}));const C=JSON.stringify(o);Ue(gr,`RPC '${e}' ${d} sending request:`,o),b.send(n,"POST",C,s,15)}))}T_(e,n,s){const o=Sm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=LE(),g=jE(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(_.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,n,s),_.encodeInitMessageHeaders=!0;const C=u.join("");Ue(gr,`Creating RPC '${e}' stream ${o}: ${C}`,_);const I=d.createWebChannel(C,_);this.I_(I);let k=!1,$=!1;const le=new HO({Yo:ge=>{$?Ue(gr,`Not sending because RPC '${e}' stream ${o} is closed:`,ge):(k||(Ue(gr,`Opening RPC '${e}' stream ${o} transport.`),I.open(),k=!0),Ue(gr,`RPC '${e}' stream ${o} sending:`,ge),I.send(ge))},Zo:()=>I.close()}),he=(ge,Ve,Fe)=>{ge.listen(Ve,(Pe=>{try{Fe(Pe)}catch(rt){setTimeout((()=>{throw rt}),0)}}))};return he(I,$u.EventType.OPEN,(()=>{$||(Ue(gr,`RPC '${e}' stream ${o} transport opened.`),le.o_())})),he(I,$u.EventType.CLOSE,(()=>{$||($=!0,Ue(gr,`RPC '${e}' stream ${o} transport closed`),le.a_(),this.E_(I))})),he(I,$u.EventType.ERROR,(ge=>{$||($=!0,Wl(gr,`RPC '${e}' stream ${o} transport errored. Name:`,ge.name,"Message:",ge.message),le.a_(new Ge(Ee.UNAVAILABLE,"The operation could not be completed")))})),he(I,$u.EventType.MESSAGE,(ge=>{if(!$){const Ve=ge.data[0];jt(!!Ve,16349);const Fe=Ve,Pe=Fe?.error||Fe[0]?.error;if(Pe){Ue(gr,`RPC '${e}' stream ${o} received error:`,Pe);const rt=Pe.status;let it=(function(M){const j=Vn[M];if(j!==void 0)return y1(j)})(rt),Re=Pe.message;it===void 0&&(it=Ee.INTERNAL,Re="Unknown error status: "+rt+" with message "+Pe.message),$=!0,le.a_(new Ge(it,Re)),I.close()}else Ue(gr,`RPC '${e}' stream ${o} received:`,Ve),le.u_(Ve)}})),he(g,PE.STAT_EVENT,(ge=>{ge.stat===hm.PROXY?Ue(gr,`RPC '${e}' stream ${o} detected buffering proxy`):ge.stat===hm.NOPROXY&&Ue(gr,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{le.__()}),0),le}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Jp(){return typeof document<"u"?document:null}function Kf(i){return new Q2(i,!0)}class D1{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&Ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const fb="PersistentStream";class N1{constructor(e,n,s,o,u,d,g,_){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new D1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ee.RESOURCE_EXHAUSTED?(pa(n.toString()),pa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new Ge(Ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ue(fb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ue(fb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KO extends N1{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=W2(this.serializer,e),s=(function(u){if(!("targetChange"in u))return lt.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?lt.min():d.readTime?As(d.readTime):lt.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Em(this.serializer),n.addTarget=(function(u,d){let g;const _=d.target;if(g=gm(_)?{documents:eO(u,_)}:{query:tO(u,_).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=b1(u,d.resumeToken);const b=vm(u,d.expectedCount);b!==null&&(g.expectedCount=b)}else if(d.snapshotVersion.compareTo(lt.min())>0){g.readTime=Af(u,d.snapshotVersion.toTimestamp());const b=vm(u,d.expectedCount);b!==null&&(g.expectedCount=b)}return g})(this.serializer,e);const s=rO(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Em(this.serializer),n.removeTarget=e,this.q_(n)}}class GO extends N1{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return jt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,jt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){jt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Z2(e.writeResults,e.commitTime),s=As(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Em(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>J2(this.serializer,s)))};this.q_(n)}}class YO{}class QO extends YO{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ge(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,_m(n,s),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ge(Ee.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(e,_m(n,s),o,d,g,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ge(Ee.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class $O{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pa(n),this.aa=!1):Ue("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const il="RemoteStore";class XO{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{ll(this)&&(Ue(il,"Restarting streams for network reachability change."),await(async function(_){const b=ct(_);b.Ea.add(4),await Oc(b),b.Ra.set("Unknown"),b.Ea.delete(4),await Gf(b)})(this))}))})),this.Ra=new $O(s,o)}}async function Gf(i){if(ll(i))for(const e of i.da)await e(!0)}async function Oc(i){for(const e of i.da)await e(!1)}function k1(i,e){const n=ct(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),cg(n)?ug(n):uu(n).O_()&&lg(n,e))}function og(i,e){const n=ct(i),s=uu(n);n.Ia.delete(e),s.O_()&&M1(n,e),n.Ia.size===0&&(s.O_()?s.L_():ll(n)&&n.Ra.set("Unknown"))}function lg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(lt.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uu(i).Y_(e)}function M1(i,e){i.Va.Ue(e),uu(i).Z_(e)}function ug(i){i.Va=new F2({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),uu(i).start(),i.Ra.ua()}function cg(i){return ll(i)&&!uu(i).x_()&&i.Ia.size>0}function ll(i){return ct(i).Ea.size===0}function V1(i){i.Va=void 0}async function WO(i){i.Ra.set("Online")}async function JO(i){i.Ia.forEach(((e,n)=>{lg(i,e)}))}async function ZO(i,e){V1(i),cg(i)?(i.Ra.ha(e),ug(i)):i.Ra.set("Unknown")}async function eD(i,e,n){if(i.Ra.set("Online"),e instanceof _1&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ia.delete(g),o.Va.removeTarget(g))})(i,e)}catch(s){Ue(il,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await xf(i,s)}else if(e instanceof af?i.Va.Ze(e):e instanceof v1?i.Va.st(e):i.Va.tt(e),!n.isEqual(lt.min()))try{const s=await O1(i.localStore);n.compareTo(s)>=0&&await(function(u,d){const g=u.Va.Tt(d);return g.targetChanges.forEach(((_,b)=>{if(_.resumeToken.approximateByteSize()>0){const C=u.Ia.get(b);C&&u.Ia.set(b,C.withResumeToken(_.resumeToken,d))}})),g.targetMismatches.forEach(((_,b)=>{const C=u.Ia.get(_);if(!C)return;u.Ia.set(_,C.withResumeToken(lr.EMPTY_BYTE_STRING,C.snapshotVersion)),M1(u,_);const I=new uo(C.target,_,b,C.sequenceNumber);lg(u,I)})),u.remoteSyncer.applyRemoteEvent(g)})(i,n)}catch(s){Ue(il,"Failed to raise snapshot:",s),await xf(i,s)}}async function xf(i,e,n){if(!lu(e))throw e;i.Ea.add(1),await Oc(i),i.Ra.set("Offline"),n||(n=()=>O1(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Ue(il,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Gf(i)}))}function P1(i,e){return e().catch((n=>xf(i,n,e)))}async function Yf(i){const e=ct(i),n=Eo(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ym;for(;tD(e);)try{const o=await PO(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,nD(e,o)}catch(o){await xf(e,o)}j1(e)&&L1(e)}function tD(i){return ll(i)&&i.Ta.length<10}function nD(i,e){i.Ta.push(e);const n=Eo(i);n.O_()&&n.X_&&n.ea(e.mutations)}function j1(i){return ll(i)&&!Eo(i).x_()&&i.Ta.length>0}function L1(i){Eo(i).start()}async function rD(i){Eo(i).ra()}async function iD(i){const e=Eo(i);for(const n of i.Ta)e.ea(n.mutations)}async function sD(i,e,n){const s=i.Ta.shift(),o=eg.from(s,e,n);await P1(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Yf(i)}async function aD(i,e){e&&Eo(i).X_&&await(async function(s,o){if((function(d){return B2(d)&&d!==Ee.ABORTED})(o.code)){const u=s.Ta.shift();Eo(s).B_(),await P1(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Yf(s)}})(i,e),j1(i)&&L1(i)}async function db(i,e){const n=ct(i);n.asyncQueue.verifyOperationInProgress(),Ue(il,"RemoteStore received new credentials");const s=ll(n);n.Ea.add(3),await Oc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Gf(n)}async function oD(i,e){const n=ct(i);e?(n.Ea.delete(2),await Gf(n)):e||(n.Ea.add(2),await Oc(n),n.Ra.set("Unknown"))}function uu(i){return i.ma||(i.ma=(function(n,s,o){const u=ct(n);return u.sa(),new KO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:WO.bind(null,i),t_:JO.bind(null,i),r_:ZO.bind(null,i),H_:eD.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),cg(i)?ug(i):i.Ra.set("Unknown")):(await i.ma.stop(),V1(i))}))),i.ma}function Eo(i){return i.fa||(i.fa=(function(n,s,o){const u=ct(n);return u.sa(),new GO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:rD.bind(null,i),r_:aD.bind(null,i),ta:iD.bind(null,i),na:sD.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Yf(i)):(await i.fa.stop(),i.Ta.length>0&&(Ue(il,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class hg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,g=new hg(e,n,d,o,u);return g.start(s),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ge(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fg(i,e){if(pa("AsyncQueue",`${e}: ${i}`),lu(i))return new Ge(Ee.UNAVAILABLE,`${e}: ${i}`);throw i}class Ql{static emptySet(e){return new Ql(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||$e.comparator(n.key,s.key):(n,s)=>$e.comparator(n.key,s.key),this.keyedMap=Xu(),this.sortedSet=new dn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ql)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ql;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class pb{constructor(){this.ga=new dn($e.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):et(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class nu{constructor(e,n,s,o,u,d,g,_,b){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=b}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach((g=>{d.push({type:0,doc:g})})),new nu(e,n,Ql.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class lD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class uD{constructor(){this.queries=mb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=ct(n),u=o.queries;o.queries=mb(),u.forEach(((d,g)=>{for(const _ of g.Sa)_.onError(s)}))})(this,new Ge(Ee.ABORTED,"Firestore shutting down"))}}function mb(){return new al((i=>i1(i)),zf)}async function cD(i,e){const n=ct(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new lD,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const g=fg(d,`Initialization of query '${ql(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&dg(n)}async function hD(i,e){const n=ct(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function fD(i,e){const n=ct(i);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const g of d.Sa)g.Fa(o)&&(s=!0);d.wa=o}}s&&dg(n)}function dD(i,e,n){const s=ct(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function dg(i){i.Ca.forEach((e=>{e.next()}))}var wm,gb;(gb=wm||(wm={})).Ma="default",gb.Cache="cache";class pD{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new nu(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=nu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==wm.Cache}}class U1{constructor(e){this.key=e}}class z1{constructor(e){this.key=e}}class mD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ct(),this.mutatedKeys=Ct(),this.eu=s1(e),this.tu=new Ql(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new pb,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,g=!1;const _=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((C,I)=>{const k=o.get(C),$=Bf(this.query,I)?I:null,le=!!k&&this.mutatedKeys.has(k.key),he=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let ge=!1;k&&$?k.data.isEqual($.data)?le!==he&&(s.track({type:3,doc:$}),ge=!0):this.su(k,$)||(s.track({type:2,doc:$}),ge=!0,(_&&this.eu($,_)>0||b&&this.eu($,b)<0)&&(g=!0)):!k&&$?(s.track({type:0,doc:$}),ge=!0):k&&!$&&(s.track({type:1,doc:k}),ge=!0,(_||b)&&(g=!0)),ge&&($?(d=d.add($),u=he?u.add(C):u.delete(C)):(d=d.delete(C),u=u.delete(C)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const C=this.query.limitType==="F"?d.last():d.first();d=d.delete(C.key),u=u.delete(C.key),s.track({type:1,doc:C})}return{tu:d,iu:s,Cs:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((C,I)=>(function($,le){const he=ge=>{switch(ge){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et(20277,{Rt:ge})}};return he($)-he(le)})(C.type,I.type)||this.eu(C.doc,I.doc))),this.ou(s),o=o??!1;const g=n&&!o?this._u():[],_=this.Xa.size===0&&this.current&&!o?1:0,b=_!==this.Za;return this.Za=_,d.length!==0||b?{snapshot:new nu(this.query,e.tu,u,d,e.mutatedKeys,_===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ct(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new z1(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new U1(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ct();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return nu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pg="SyncEngine";class gD{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class yD{constructor(e){this.key=e,this.hu=!1}}class vD{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new al((g=>i1(g)),zf),this.Iu=new Map,this.Eu=new Set,this.du=new dn($e.comparator),this.Au=new Map,this.Ru=new rg,this.Vu={},this.mu=new Map,this.fu=tu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _D(i,e,n=!0){const s=G1(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await B1(s,e,n,!0),o}async function bD(i,e){const n=G1(i);await B1(n,e,!0,!1)}async function B1(i,e,n,s){const o=await jO(i.localStore,ws(e)),u=o.targetId,d=i.sharedClientState.addLocalQueryTarget(u,n);let g;return s&&(g=await ED(i,e,u,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&k1(i.remoteStore,o),g}async function ED(i,e,n,s,o){i.pu=(I,k,$)=>(async function(he,ge,Ve,Fe){let Pe=ge.view.ru(Ve);Pe.Cs&&(Pe=await lb(he.localStore,ge.query,!1).then((({documents:V})=>ge.view.ru(V,Pe))));const rt=Fe&&Fe.targetChanges.get(ge.targetId),it=Fe&&Fe.targetMismatches.get(ge.targetId)!=null,Re=ge.view.applyChanges(Pe,he.isPrimaryClient,rt,it);return vb(he,ge.targetId,Re.au),Re.snapshot})(i,I,k,$);const u=await lb(i.localStore,e,!0),d=new mD(e,u.Qs),g=d.ru(u.documents),_=Ic.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),b=d.applyChanges(g,i.isPrimaryClient,_);vb(i,n,b.au);const C=new gD(e,n,d);return i.Tu.set(e,C),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),b.snapshot}async function TD(i,e,n){const s=ct(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((d=>!zf(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Tm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&og(s.remoteStore,o.targetId),Am(s,o.targetId)})).catch(ou)):(Am(s,o.targetId),await Tm(s.localStore,o.targetId,!0))}async function SD(i,e){const n=ct(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),og(n.remoteStore,s.targetId))}async function wD(i,e,n){const s=DD(i);try{const o=await(function(d,g){const _=ct(d),b=Zt.now(),C=g.reduce((($,le)=>$.add(le.key)),Ct());let I,k;return _.persistence.runTransaction("Locally write mutations","readwrite",($=>{let le=ma(),he=Ct();return _.Ns.getEntries($,C).next((ge=>{le=ge,le.forEach(((Ve,Fe)=>{Fe.isValidDocument()||(he=he.add(Ve))}))})).next((()=>_.localDocuments.getOverlayedDocuments($,le))).next((ge=>{I=ge;const Ve=[];for(const Fe of g){const Pe=P2(Fe,I.get(Fe.key).overlayedDocument);Pe!=null&&Ve.push(new ol(Fe.key,Pe,WE(Pe.value.mapValue),ca.exists(!0)))}return _.mutationQueue.addMutationBatch($,b,Ve,g)})).next((ge=>{k=ge;const Ve=ge.applyToLocalDocumentSet(I,he);return _.documentOverlayCache.saveOverlays($,ge.batchId,Ve)}))})).then((()=>({batchId:k.batchId,changes:o1(I)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,g,_){let b=d.Vu[d.currentUser.toKey()];b||(b=new dn(At)),b=b.insert(g,_),d.Vu[d.currentUser.toKey()]=b})(s,o.batchId,n),await Dc(s,o.changes),await Yf(s.remoteStore)}catch(o){const u=fg(o,"Failed to persist write");n.reject(u)}}async function q1(i,e){const n=ct(i);try{const s=await MO(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(jt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?jt(d.hu,14607):o.removedDocuments.size>0&&(jt(d.hu,42227),d.hu=!1))})),await Dc(n,s,e)}catch(s){await ou(s)}}function yb(i,e,n){const s=ct(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,d)=>{const g=d.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(d,g){const _=ct(d);_.onlineState=g;let b=!1;_.queries.forEach(((C,I)=>{for(const k of I.Sa)k.va(g)&&(b=!0)})),b&&dg(_)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function AD(i,e,n){const s=ct(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let d=new dn($e.comparator);d=d.insert(u,vr.newNoDocument(u,lt.min()));const g=Ct().add(u),_=new Ff(lt.min(),new Map,new dn(At),d,g);await q1(s,_),s.du=s.du.remove(u),s.Au.delete(e),mg(s)}else await Tm(s.localStore,e,!1).then((()=>Am(s,e,n))).catch(ou)}async function CD(i,e){const n=ct(i),s=e.batch.batchId;try{const o=await kO(n.localStore,e);F1(n,s,null),H1(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Dc(n,o)}catch(o){await ou(o)}}async function xD(i,e,n){const s=ct(i);try{const o=await(function(d,g){const _=ct(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let C;return _.mutationQueue.lookupMutationBatch(b,g).next((I=>(jt(I!==null,37113),C=I.keys(),_.mutationQueue.removeMutationBatch(b,I)))).next((()=>_.mutationQueue.performConsistencyCheck(b))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(b,C,g))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,C))).next((()=>_.localDocuments.getDocuments(b,C)))}))})(s.localStore,e);F1(s,e,n),H1(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Dc(s,o)}catch(o){await ou(o)}}function H1(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function F1(i,e,n){const s=ct(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Am(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||K1(i,s)}))}function K1(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(og(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),mg(i))}function vb(i,e,n){for(const s of n)s instanceof U1?(i.Ru.addReference(s.key,e),RD(i,s)):s instanceof z1?(Ue(pg,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||K1(i,s.key)):et(19791,{wu:s})}function RD(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(Ue(pg,"New document in limbo: "+n),i.Eu.add(s),mg(i))}function mg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new $e(fn.fromString(e)),s=i.fu.next();i.Au.set(s,new yD(n)),i.du=i.du.insert(n,s),k1(i.remoteStore,new uo(ws(Jm(n.path)),s,"TargetPurposeLimboResolution",Pf.ce))}}async function Dc(i,e,n){const s=ct(i),o=[],u=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,_)=>{d.push(s.pu(_,e,n).then((b=>{if((b||n)&&s.isPrimaryClient){const C=b?!b.fromCache:n?.targetChanges.get(_.targetId)?.current;s.sharedClientState.updateQueryState(_.targetId,C?"current":"not-current")}if(b){o.push(b);const C=sg.As(_.targetId,b);u.push(C)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(_,b){const C=ct(_);try{await C.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>be.forEach(b,(k=>be.forEach(k.Es,($=>C.persistence.referenceDelegate.addReference(I,k.targetId,$))).next((()=>be.forEach(k.ds,($=>C.persistence.referenceDelegate.removeReference(I,k.targetId,$)))))))))}catch(I){if(!lu(I))throw I;Ue(ag,"Failed to update sequence numbers: "+I)}for(const I of b){const k=I.targetId;if(!I.fromCache){const $=C.Ms.get(k),le=$.snapshotVersion,he=$.withLastLimboFreeSnapshotVersion(le);C.Ms=C.Ms.insert(k,he)}}})(s.localStore,u))}async function ID(i,e){const n=ct(i);if(!n.currentUser.isEqual(e)){Ue(pg,"User change. New user:",e.toKey());const s=await I1(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((g=>{g.forEach((_=>{_.reject(new Ge(Ee.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Dc(n,s.Ls)}}function OD(i,e){const n=ct(i),s=n.Au.get(e);if(s&&s.hu)return Ct().add(s.key);{let o=Ct();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const g=n.Tu.get(d);o=o.unionWith(g.view.nu)}return o}}function G1(i){const e=ct(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=q1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AD.bind(null,e),e.Pu.H_=fD.bind(null,e.eventManager),e.Pu.yu=dD.bind(null,e.eventManager),e}function DD(i){const e=ct(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xD.bind(null,e),e}class Rf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return NO(this.persistence,new IO,e.initialUser,this.serializer)}Cu(e){return new R1(ig.mi,this.serializer)}Du(e){return new UO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rf.provider={build:()=>new Rf};class ND extends Rf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){jt(this.persistence.referenceDelegate instanceof Cf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new pO(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?$r.withCacheSize(this.cacheSizeBytes):$r.DEFAULT;return new R1((s=>Cf.mi(s,n)),this.serializer)}}class Cm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>yb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ID.bind(null,this.syncEngine),await oD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new uD})()}createDatastore(e){const n=Kf(e.databaseInfo.databaseId),s=(function(u){return new FO(u)})(e.databaseInfo);return(function(u,d,g,_){return new QO(u,d,g,_)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,d,g){return new XO(s,o,u,d,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>yb(this.syncEngine,n,0)),(function(){return hb.v()?new hb:new zO})())}createSyncEngine(e,n){return(function(o,u,d,g,_,b,C){const I=new vD(o,u,d,g,_,b);return C&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=ct(n);Ue(il,"RemoteStore shutting down."),s.Ea.add(5),await Oc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Cm.provider={build:()=>new Cm};class kD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):pa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const To="FirestoreClient";class MD{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=yr.UNAUTHENTICATED,this.clientId=Km.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async d=>{Ue(To,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(Ue(To,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new go;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=fg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Zp(i,e){i.asyncQueue.verifyOperationInProgress(),Ue(To,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await I1(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function _b(i,e){i.asyncQueue.verifyOperationInProgress();const n=await VD(i);Ue(To,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>db(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>db(e.remoteStore,o))),i._onlineComponents=e}async function VD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ue(To,"Using user provided OfflineComponentProvider");try{await Zp(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Ee.FAILED_PRECONDITION||o.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Wl("Error using user provided cache. Falling back to memory cache: "+n),await Zp(i,new Rf)}}else Ue(To,"Using default OfflineComponentProvider"),await Zp(i,new ND(void 0));return i._offlineComponents}async function Y1(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ue(To,"Using user provided OnlineComponentProvider"),await _b(i,i._uninitializedComponentsProvider._online)):(Ue(To,"Using default OnlineComponentProvider"),await _b(i,new Cm))),i._onlineComponents}function PD(i){return Y1(i).then((e=>e.syncEngine))}async function jD(i){const e=await Y1(i),n=e.eventManager;return n.onListen=_D.bind(null,e.syncEngine),n.onUnlisten=TD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SD.bind(null,e.syncEngine),n}function LD(i,e,n={}){const s=new go;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,g,_,b){const C=new kD({next:k=>{C.Nu(),d.enqueueAndForget((()=>hD(u,I)));const $=k.docs.has(g);!$&&k.fromCache?b.reject(new Ge(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&k.fromCache&&_&&_.source==="server"?b.reject(new Ge(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(k)},error:k=>b.reject(k)}),I=new pD(Jm(g.path),C,{includeMetadataChanges:!0,qa:!0});return cD(u,I)})(await jD(i),i.asyncQueue,e,n,s))),s.promise}function Q1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const bb=new Map;const $1="firestore.googleapis.com",Eb=!0;class Tb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ge(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$1,this.ssl=Eb}else this.host=e.host,this.ssl=e.ssl??Eb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=x1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fO)throw new Ge(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$I("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q1(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ge(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ge(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ge(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gg{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ge(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ge(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new LI;switch(s.type){case"firstParty":return new qI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ge(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=bb.get(n);s&&(Ue("ComponentProvider","Removing Datastore"),bb.delete(n),s.terminate())})(this),Promise.resolve()}}function UD(i,e,n,s={}){i=fc(i,gg);const o=ru(e),u=i._getSettings(),d={...u,emulatorOptions:i._getEmulatorOptions()},g=`${e}:${n}`;o&&($b(`https://${g}`),Xb("Firestore",!0)),u.host!==$1&&u.host!==g&&Wl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...u,host:g,ssl:o,emulatorOptions:s};if(!el(_,d)&&(i._setSettings(_),s.mockUserToken)){let b,C;if(typeof s.mockUserToken=="string")b=s.mockUserToken,C=yr.MOCK_USER;else{b=uC(s.mockUserToken,i._app?.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new Ge(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new yr(I)}i._authCredentials=new UI(new zE(b,C))}}class yg{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new yg(this.firestore,e,this._query)}}class Jn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _c(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jn(this.firestore,e,this._key)}toJSON(){return{type:Jn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(xc(n,Jn._jsonSchema))return new Jn(e,s||null,new $e(fn.fromString(n.referencePath)))}}Jn._jsonSchemaVersion="firestore/documentReference/1.0",Jn._jsonSchema={type:Pn("string",Jn._jsonSchemaVersion),referencePath:Pn("string")};class _c extends yg{constructor(e,n,s){super(e,n,Jm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jn(this.firestore,null,new $e(e))}withConverter(e){return new _c(this.firestore,e,this._path)}}function X1(i,e,...n){if(i=Hi(i),arguments.length===1&&(e=Km.newId()),QI("doc","path",e),i instanceof gg){const s=fn.fromString(e,...n);return P0(s),new Jn(i,null,new $e(s))}{if(!(i instanceof Jn||i instanceof _c))throw new Ge(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(fn.fromString(e,...n));return P0(s),new Jn(i.firestore,i instanceof _c?i.converter:null,new $e(s))}}const Sb="AsyncQueue";class wb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new D1(this,"async_queue_retry"),this._c=()=>{const s=Jp();s&&Ue(Sb,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Jp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Jp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new go;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!lu(e))throw e;Ue(Sb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,pa("INTERNAL UNHANDLED ERROR: ",Ab(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=hg.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&et(47125,{Pc:Ab(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ab(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class vg extends gg{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new wb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wb(e),this._firestoreClient=void 0,await e}}}function zD(i,e){const n=typeof i=="object"?i:eE(),s=typeof i=="string"?i:_f,o=km(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=oC("firestore");u&&UD(o,...u)}return o}function W1(i){if(i._terminated)throw new Ge(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||BD(i),i._firestoreClient}function BD(i){const e=i._freezeSettings(),n=(function(o,u,d,g){return new a2(o,u,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,Q1(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new MD(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class qi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qi(lr.fromBase64String(e))}catch(n){throw new Ge(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qi(lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xc(e,qi._jsonSchema))return qi.fromBase64String(e.bytes)}}qi._jsonSchemaVersion="firestore/bytes/1.0",qi._jsonSchema={type:Pn("string",qi._jsonSchemaVersion),bytes:Pn("string")};class _g{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ge(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class J1{constructor(e){this._methodName=e}}class Cs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ge(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ge(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cs._jsonSchemaVersion}}static fromJSON(e){if(xc(e,Cs._jsonSchema))return new Cs(e.latitude,e.longitude)}}Cs._jsonSchemaVersion="firestore/geoPoint/1.0",Cs._jsonSchema={type:Pn("string",Cs._jsonSchemaVersion),latitude:Pn("number"),longitude:Pn("number")};class xs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:xs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xc(e,xs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new xs(e.vectorValues);throw new Ge(Ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xs._jsonSchemaVersion="firestore/vectorValue/1.0",xs._jsonSchema={type:Pn("string",xs._jsonSchemaVersion),vectorValues:Pn("object")};const qD=/^__.*__$/;class HD{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ol(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rc(e,this.data,n,this.fieldTransforms)}}function Z1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et(40011,{Ac:i})}}class bg{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return If(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Z1(this.Ac)&&qD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class FD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Kf(e)}Cc(e,n,s,o=!1){return new bg({Ac:e,methodName:n,Dc:s,path:or.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function KD(i){const e=i._freezeSettings(),n=Kf(i._databaseId);return new FD(i._databaseId,!!e.ignoreUndefinedProperties,n)}function GD(i,e,n,s,o,u={}){const d=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);rT("Data must be an object, but it was:",d,s);const g=tT(s,d);let _,b;if(u.merge)_=new is(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const C=[];for(const I of u.mergeFields){const k=YD(e,I,n);if(!d.contains(k))throw new Ge(Ee.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);$D(C,k)||C.push(k)}_=new is(C),b=d.fieldTransforms.filter((I=>_.covers(I.field)))}else _=null,b=d.fieldTransforms;return new HD(new Bi(g),_,b)}function eT(i,e){if(nT(i=Hi(i)))return rT("Unsupported field value:",e,i),tT(i,e);if(i instanceof J1)return(function(s,o){if(!Z1(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let d=0;for(const g of s){let _=eT(g,o.wc(d));_==null&&(_={nullValue:"NULL_VALUE"}),u.push(_),d++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=Hi(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return O2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Zt.fromDate(s);return{timestampValue:Af(o.serializer,u)}}if(s instanceof Zt){const u=new Zt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Af(o.serializer,u)}}if(s instanceof Cs)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof qi)return{bytesValue:b1(o.serializer,s._byteString)};if(s instanceof Jn){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ng(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof xs)return(function(d,g){return{mapValue:{fields:{[$E]:{stringValue:XE},[bf]:{arrayValue:{values:d.toArray().map((b=>{if(typeof b!="number")throw g.Sc("VectorValues must only contain numeric values.");return Zm(g.serializer,b)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Gm(s)}`)})(i,e)}function tT(i,e){const n={};return HE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sl(i,((s,o)=>{const u=eT(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function nT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Zt||i instanceof Cs||i instanceof qi||i instanceof Jn||i instanceof J1||i instanceof xs)}function rT(i,e,n){if(!nT(n)||!BE(n)){const s=Gm(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function YD(i,e,n){if((e=Hi(e))instanceof _g)return e._internalPath;if(typeof e=="string")return iT(i,e);throw If("Field path arguments must be of type string or ",i,!1,void 0,n)}const QD=new RegExp("[~\\*/\\[\\]]");function iT(i,e,n){if(e.search(QD)>=0)throw If(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new _g(...e.split("."))._internalPath}catch{throw If(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function If(i,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||d)&&(_+=" (found",u&&(_+=` in field ${s}`),d&&(_+=` in document ${o}`),_+=")"),new Ge(Ee.INVALID_ARGUMENT,g+i+_)}function $D(i,e){return i.some((n=>n.isEqual(e)))}class sT{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(aT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class XD extends sT{data(){return super.data()}}function aT(i,e){return typeof e=="string"?iT(i,e):e instanceof _g?e._internalPath:e._delegate._internalPath}class WD{convertValue(e,n="none"){switch(bo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_o(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw et(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return sl(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[bf].arrayValue?.values?.map((s=>Cn(s.doubleValue)));return new xs(n)}convertGeoPoint(e){return new Cs(Cn(e.latitude),Cn(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Lf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(pc(e));default:return null}}convertTimestamp(e){const n=vo(e);return new Zt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=fn.fromString(e);jt(C1(s),9688,{name:e});const o=new mc(s.get(1),s.get(3)),u=new $e(s.popFirst(5));return o.isEqual(n)||pa(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function JD(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class Ju{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jo extends sT{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(aT("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ge(Ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Jo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Jo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jo._jsonSchema={type:Pn("string",Jo._jsonSchemaVersion),bundleSource:Pn("string","DocumentSnapshot"),bundleName:Pn("string"),bundle:Pn("string")};class of extends Jo{data(e={}){return super.data(e)}}class ac{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ju(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new of(this._firestore,this._userDataWriter,s.key,s,new Ju(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ge(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((g=>{const _=new of(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Ju(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const _=new of(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Ju(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,C=-1;return g.type!==0&&(b=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),C=d.indexOf(g.doc.key)),{type:ZD(g.type),doc:_,oldIndex:b,newIndex:C}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ge(Ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ac._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Km.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ZD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et(61501,{type:i})}}function eN(i){i=fc(i,Jn);const e=fc(i.firestore,vg);return LD(W1(e),i._key).then((n=>iN(e,i,n)))}ac._jsonSchemaVersion="firestore/querySnapshot/1.0",ac._jsonSchema={type:Pn("string",ac._jsonSchemaVersion),bundleSource:Pn("string","QuerySnapshot"),bundleName:Pn("string"),bundle:Pn("string")};class tN extends WD{constructor(e){super(),this.firestore=e}convertBytes(e){return new qi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,n)}}function nN(i,e,n){i=fc(i,Jn);const s=fc(i.firestore,vg),o=JD(i.converter,e);return rN(s,[GD(KD(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,ca.none())])}function rN(i,e){return(function(s,o){const u=new go;return s.asyncQueue.enqueueAndForget((async()=>wD(await PD(s),o,u))),u.promise})(W1(i),e)}function iN(i,e,n){const s=n.docs.get(e._key),o=new tN(i);return new Jo(i,o,e._key,s,new Ju(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){au=o})(iu),$l(new tl("firestore",((s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),g=new vg(new zI(s.getProvider("auth-internal")),new HI(d,s.getProvider("app-check-internal")),(function(b,C){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new Ge(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mc(b.options.projectId,C)})(d,o),d);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),po(N0,k0,e),po(N0,k0,"esm2020")})();const sN={apiKey:"AIzaSyCGabs1zTYUI0-yPRp2RD7_Zk4HLsd3kSc",authDomain:"gemini-podcast-cards.firebaseapp.com",projectId:"gemini-podcast-cards",storageBucket:"gemini-podcast-cards.firebasestorage.app",messagingSenderId:"535172285628",appId:"1:535172285628:web:1fa37b46cf2bdf89257cb9"},oT=Zb(sN),Yh=PI(oT),aN=new oa,lT=zD(oT),uT="users";async function oN(i,e){if(!i)throw new Error("User ID is required");try{const n=JSON.stringify(e),s=X1(lT,uT,i);await nN(s,{vocab_data:n,last_synced:Date.now()}),console.log(`Successfully synced ${e.length} cards for user ${i}`)}catch(n){throw console.error("Sync upload failed:",n),n}}async function lN(i){if(!i)throw new Error("User ID is required");try{const e=X1(lT,uT,i),n=await eN(e);if(n.exists()){const s=n.data();if(s.vocab_data)return JSON.parse(s.vocab_data)}return null}catch(e){throw console.error("Sync download failed:",e),e}}const Cb="zanta0529@gmail.com,amy.webhd@gmail.com".split(",").map(i=>i.trim()).filter(i=>i!==""),uN=({isOpen:i,onClose:e,onConfirm:n,title:s,message:o})=>{const[u,d]=_e.useState(3);return _e.useEffect(()=>{if(i){d(3);const g=setInterval(()=>{d(_=>_<=1?(clearInterval(g),0):_-1)},1e3);return()=>clearInterval(g)}},[i]),i?R.jsx("div",{style:xb.overlay,children:R.jsxs("div",{style:xb.content,children:[R.jsxs("h3",{style:{marginTop:0,color:"#ff6b6b"},children:[" ",s]}),R.jsx("p",{style:{color:"#ccc",lineHeight:"1.5"},children:o}),R.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[R.jsx("button",{onClick:e,style:{...oc,backgroundColor:"#666"},children:"Cancel"}),R.jsx("button",{onClick:()=>{n(),e()},disabled:u>0,style:{...oc,backgroundColor:u>0?"#CCC":"#e03131",cursor:u>0?"not-allowed":"pointer",opacity:u>0?.7:1},children:u>0?`Wait (${u})...`:"Execute!"})]})]})}):null};function cN(){const[i,e]=_e.useState([]),[n,s]=_e.useState("home"),[o,u]=_e.useState(!0),[d,g]=_e.useState(0),[_,b]=_e.useState(null),[C,I]=_e.useState(!1),[k,$]=_e.useState(!1),[le,he]=_e.useState(!1),[ge,Ve]=_e.useState(!1),[Fe,Pe]=_e.useState(!1),[rt,it]=_e.useState(!1),[Re,V]=_e.useState(!1),[M,j]=_e.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),Y=(Be,He,H)=>{j({isOpen:!0,title:Be,message:He,onConfirm:H})};_e.useEffect(()=>{const Be=AR(Yh,async He=>{He?Cb.length===0||Cb.includes(He.email)?(b(He),Ze.success(`Welcome, ${He.displayName}`)):(console.warn(`Unauthorized: ${He.email}`),Ze.error(`Access denied for ${He.email}`),await E0(Yh),b(null)):b(null)});return()=>Be()},[]);const B=async()=>{try{u(!0),await BS();const Be=await Yt.vocab.toArray(),He=Date.now(),H=Be.filter(pe=>pe.nextReview<=He||pe.status==="new");e(H)}catch(Be){console.error("Failed to load cards:",Be),Ze.error("Load failed: "+Be.message)}finally{u(!1)}};_e.useEffect(()=>{B()},[]);const z=async Be=>{try{await Yt.vocab.put(Be),g(He=>He+1)}catch(He){console.error("Update failed:",He),Ze.error("Update failed")}},N=async()=>{try{await KR(Yh,aN),it(!1)}catch(Be){console.error("Login failed:",Be),Ze.error("Login failed")}},Xe=async()=>{await E0(Yh),window.location.reload()},Lt=async()=>{if(!_)return;I(!0),it(!1);const Be=Ze.loading("Backing up...");try{const He=await Yt.vocab.toArray();await oN(_.uid,He),Ze.success("Backup complete!",{id:Be})}catch(He){console.error(He),Ze.error("Backup failed",{id:Be})}finally{I(!1),setTimeout(()=>Ze.dismiss(Be),3e3)}},ce=async()=>{_&&Y("Overwrite Warning","Are you sure you want to overwrite local data with cloud backup? This action cannot be undone.",async()=>{I(!0),it(!1);const Be=Ze.loading("Restoring...");try{const He=await lN(_.uid);He?(await Yt.vocab.clear(),await Yt.vocab.bulkAdd(He),Ze.success("Restore complete! Reloading...",{id:Be}),setTimeout(()=>window.location.reload(),1500)):Ze("No backup found.",{id:Be,icon:""})}catch(He){console.error(He),Ze.error("Restore failed",{id:Be})}finally{I(!1),setTimeout(()=>Ze.dismiss(Be),3e3)}})};if(o)return R.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1b1e",color:"#fff"},children:"Loading..."});const Oe=i[d],qe=()=>n==="dashboard"?R.jsx(JA,{onBack:()=>s("home")}):Oe?R.jsx(tA,{card:Oe,onUpdate:z},Oe.id):R.jsxs("div",{style:{textAlign:"center",padding:"3rem",border:"1px dashed #555",borderRadius:"8px"},children:[R.jsx("h2",{children:" All caught up!"}),R.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"1rem",padding:"0.5rem 1rem",cursor:"pointer"},children:"Refresh"})]});return R.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",padding:"1rem",minHeight:"100vh",backgroundColor:"#1a1b1e",color:"#ffffff",fontFamily:"sans-serif",display:"flex",flexDirection:"column",gap:"0.5rem",alignItems:"center",position:"relative"},children:[R.jsx(FA,{position:"top-center",toastOptions:{duration:4e3,style:{background:"#333",color:"#fff"},error:{duration:6e3}}}),R.jsx(uN,{isOpen:M.isOpen,onClose:()=>j(Be=>({...Be,isOpen:!1})),onConfirm:M.onConfirm,title:M.title,message:M.message}),R.jsxs("nav",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",padding:"0.5rem",borderBottom:"1px solid #333",position:"relative"},children:[R.jsxs("div",{style:{fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px"},children:["GPF",R.jsx("button",{onClick:()=>he(!0),style:hN,title:"Settings",children:""})]}),R.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[R.jsx("button",{onClick:()=>Ve(!0),style:{...oc,backgroundColor:"#2196f3"},children:"+ Add"}),R.jsx("button",{onClick:()=>$(!0),style:{...oc,backgroundColor:"#e91e63"},children:"Import"}),R.jsx("button",{onClick:()=>it(!rt),style:{...oc,backgroundColor:"#333",padding:"0.5rem 0.8rem",fontSize:"1.1rem"},children:""}),rt&&R.jsxs(R.Fragment,{children:[R.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99},onClick:()=>it(!1)}),R.jsxs("div",{style:zi.container,children:[R.jsx("button",{onClick:()=>{s("dashboard"),it(!1)},style:zi.item,children:" Learning Dashboard"}),R.jsx("div",{style:zi.divider}),R.jsx("button",{onClick:()=>{Pe(!0),it(!1)},style:zi.item,children:" Manage Cards"}),R.jsx("button",{onClick:()=>{V(!0),it(!1)},style:zi.item,children:" AI Smart Review"}),R.jsx("div",{style:zi.divider}),_?R.jsxs(R.Fragment,{children:[R.jsx("button",{onClick:Lt,disabled:C,style:zi.item,children:" Backup Data"}),R.jsx("button",{onClick:ce,disabled:C,style:zi.item,children:" Restore Data"}),R.jsx("div",{style:zi.divider}),R.jsx("div",{style:zi.userEmail,children:_.email}),R.jsx("button",{onClick:Xe,style:{...zi.item,color:"#ff6b6b"},children:"Logout"})]}):R.jsx("button",{onClick:N,style:{...zi.item,color:"#4285F4"},children:"Login with Google"})]})]})]})]}),R.jsxs("header",{style:{marginBottom:"0.5rem",width:"100%",textAlign:"center"},children:[R.jsx("h1",{style:{fontSize:"1.5rem",margin:"0 0 0.3rem 0"},children:"Gemini Flashcards"}),R.jsx("p",{style:{color:"#888",margin:0,fontSize:"0.9rem"},children:i.length>0?`Progress: ${d} / ${i.length}`:"No cards due"})]}),R.jsx("main",{style:{width:"100%",flex:1,display:"flex",flexDirection:"column"},children:qe()}),R.jsx(KA,{isOpen:k,onClose:()=>$(!1),onSuccess:B}),R.jsx(GA,{isOpen:le,onClose:()=>he(!1)}),R.jsx(YA,{isOpen:ge,onClose:()=>Ve(!1),onSuccess:B}),R.jsx(QA,{isOpen:Fe,onClose:()=>{Pe(!1),B()}}),R.jsx($A,{isOpen:Re,onClose:()=>V(!1)})]})}const oc={padding:"0.5rem 1rem",fontSize:"0.9rem",borderRadius:"6px",border:"none",cursor:"pointer",color:"white",whiteSpace:"nowrap",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.3rem",transition:"opacity 0.2s"},hN={background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem"},zi={container:{position:"absolute",top:"3.5rem",right:"0.5rem",backgroundColor:"#25262b",border:"1px solid #444",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.5)",zIndex:100,display:"flex",flexDirection:"column",minWidth:"180px",padding:"0.5rem"},item:{background:"none",border:"none",color:"#e0e0e0",padding:"0.8rem 1rem",textAlign:"left",cursor:"pointer",borderRadius:"4px",fontSize:"0.95rem",transition:"background 0.2s"},divider:{height:"1px",backgroundColor:"#444",margin:"0.5rem 0"},userEmail:{padding:"0.5rem 1rem",fontSize:"0.75rem",color:"#888",borderBottom:"1px solid #333",marginBottom:"0.5rem"}},xb={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},content:{backgroundColor:"#25262b",padding:"2rem",borderRadius:"12px",maxWidth:"400px",width:"90%",border:"1px solid #444",boxShadow:"0 8px 30px rgba(0,0,0,0.5)"}};jS.createRoot(document.getElementById("root")).render(R.jsx(Rb.StrictMode,{children:R.jsx(cN,{})}));
