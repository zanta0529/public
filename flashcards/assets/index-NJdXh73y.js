const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ImportModal-BMOn5hl9.js","assets/cardService-DC6pRXZU.js","assets/CardEditor-CzvM0W-m.js","assets/CardManager-C8_INYGH.js","assets/SmartReviewGenerator-CrBz8L80.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var RS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Nm={exports:{}},Hu={};var T_;function CS(){if(T_)return Hu;T_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var y in o)y!=="key"&&(u[y]=o[y])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:u}}return Hu.Fragment=e,Hu.jsx=n,Hu.jsxs=n,Hu}var S_;function IS(){return S_||(S_=1,Nm.exports=CS()),Nm.exports}var oe=IS(),Mm={exports:{}},st={};var A_;function OS(){if(A_)return st;A_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),x=Symbol.iterator;function Z(B){return B===null||typeof B!="object"?null:(B=x&&B[x]||B["@@iterator"],typeof B=="function"?B:null)}var fe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_e=Object.assign,Ce={};function He(B,de,we){this.props=B,this.context=de,this.refs=Ce,this.updater=we||fe}He.prototype.isReactComponent={},He.prototype.setState=function(B,de){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,de,"setState")},He.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function Ye(){}Ye.prototype=He.prototype;function Ue(B,de,we){this.props=B,this.context=de,this.refs=Ce,this.updater=we||fe}var ct=Ue.prototype=new Ye;ct.constructor=Ue,_e(ct,He.prototype),ct.isPureReactComponent=!0;var ft=Array.isArray;function nt(){}var V={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function P(B,de,we){var Pe=we.ref;return{$$typeof:i,type:B,key:de,ref:Pe!==void 0?Pe:null,props:we}}function G(B,de){return P(B.type,de,B.props)}function j(B){return typeof B=="object"&&B!==null&&B.$$typeof===i}function z(B){var de={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(we){return de[we]})}var N=/\/+/g;function dt(B,de){return typeof B=="object"&&B!==null&&B.key!=null?z(""+B.key):de.toString(36)}function Ft(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(nt,nt):(B.status="pending",B.then(function(de){B.status==="pending"&&(B.status="fulfilled",B.value=de)},function(de){B.status==="pending"&&(B.status="rejected",B.reason=de)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function ue(B,de,we,Pe,$e){var Ze=typeof B;(Ze==="undefined"||Ze==="boolean")&&(B=null);var pt=!1;if(B===null)pt=!0;else switch(Ze){case"bigint":case"string":case"number":pt=!0;break;case"object":switch(B.$$typeof){case i:case e:pt=!0;break;case C:return pt=B._init,ue(pt(B._payload),de,we,Pe,$e)}}if(pt)return $e=$e(B),pt=Pe===""?"."+dt(B,0):Pe,ft($e)?(we="",pt!=null&&(we=pt.replace(N,"$&/")+"/"),ue($e,de,we,"",function(es){return es})):$e!=null&&(j($e)&&($e=G($e,we+($e.key==null||B&&B.key===$e.key?"":(""+$e.key).replace(N,"$&/")+"/")+pt)),de.push($e)),1;pt=0;var mn=Pe===""?".":Pe+":";if(ft(B))for(var Me=0;Me<B.length;Me++)Pe=B[Me],Ze=mn+dt(Pe,Me),pt+=ue(Pe,de,we,Ze,$e);else if(Me=Z(B),typeof Me=="function")for(B=Me.call(B),Me=0;!(Pe=B.next()).done;)Pe=Pe.value,Ze=mn+dt(Pe,Me++),pt+=ue(Pe,de,we,Ze,$e);else if(Ze==="object"){if(typeof B.then=="function")return ue(Ft(B),de,we,Pe,$e);throw de=String(B),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.")}return pt}function Oe(B,de,we){if(B==null)return B;var Pe=[],$e=0;return ue(B,Pe,"","",function(Ze){return de.call(we,Ze,$e++)}),Pe}function Be(B){if(B._status===-1){var de=B._result;de=de(),de.then(function(we){(B._status===0||B._status===-1)&&(B._status=1,B._result=we)},function(we){(B._status===0||B._status===-1)&&(B._status=2,B._result=we)}),B._status===-1&&(B._status=0,B._result=de)}if(B._status===1)return B._result.default;throw B._result}var je=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var de=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(de))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},ke={map:Oe,forEach:function(B,de,we){Oe(B,function(){de.apply(this,arguments)},we)},count:function(B){var de=0;return Oe(B,function(){de++}),de},toArray:function(B){return Oe(B,function(de){return de})||[]},only:function(B){if(!j(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return st.Activity=O,st.Children=ke,st.Component=He,st.Fragment=n,st.Profiler=o,st.PureComponent=Ue,st.StrictMode=s,st.Suspense=_,st.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,st.__COMPILER_RUNTIME={__proto__:null,c:function(B){return V.H.useMemoCache(B)}},st.cache=function(B){return function(){return B.apply(null,arguments)}},st.cacheSignal=function(){return null},st.cloneElement=function(B,de,we){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var Pe=_e({},B.props),$e=B.key;if(de!=null)for(Ze in de.key!==void 0&&($e=""+de.key),de)!M.call(de,Ze)||Ze==="key"||Ze==="__self"||Ze==="__source"||Ze==="ref"&&de.ref===void 0||(Pe[Ze]=de[Ze]);var Ze=arguments.length-2;if(Ze===1)Pe.children=we;else if(1<Ze){for(var pt=Array(Ze),mn=0;mn<Ze;mn++)pt[mn]=arguments[mn+2];Pe.children=pt}return P(B.type,$e,Pe)},st.createContext=function(B){return B={$$typeof:d,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:u,_context:B},B},st.createElement=function(B,de,we){var Pe,$e={},Ze=null;if(de!=null)for(Pe in de.key!==void 0&&(Ze=""+de.key),de)M.call(de,Pe)&&Pe!=="key"&&Pe!=="__self"&&Pe!=="__source"&&($e[Pe]=de[Pe]);var pt=arguments.length-2;if(pt===1)$e.children=we;else if(1<pt){for(var mn=Array(pt),Me=0;Me<pt;Me++)mn[Me]=arguments[Me+2];$e.children=mn}if(B&&B.defaultProps)for(Pe in pt=B.defaultProps,pt)$e[Pe]===void 0&&($e[Pe]=pt[Pe]);return P(B,Ze,$e)},st.createRef=function(){return{current:null}},st.forwardRef=function(B){return{$$typeof:y,render:B}},st.isValidElement=j,st.lazy=function(B){return{$$typeof:C,_payload:{_status:-1,_result:B},_init:Be}},st.memo=function(B,de){return{$$typeof:b,type:B,compare:de===void 0?null:de}},st.startTransition=function(B){var de=V.T,we={};V.T=we;try{var Pe=B(),$e=V.S;$e!==null&&$e(we,Pe),typeof Pe=="object"&&Pe!==null&&typeof Pe.then=="function"&&Pe.then(nt,je)}catch(Ze){je(Ze)}finally{de!==null&&we.types!==null&&(de.types=we.types),V.T=de}},st.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},st.use=function(B){return V.H.use(B)},st.useActionState=function(B,de,we){return V.H.useActionState(B,de,we)},st.useCallback=function(B,de){return V.H.useCallback(B,de)},st.useContext=function(B){return V.H.useContext(B)},st.useDebugValue=function(){},st.useDeferredValue=function(B,de){return V.H.useDeferredValue(B,de)},st.useEffect=function(B,de){return V.H.useEffect(B,de)},st.useEffectEvent=function(B){return V.H.useEffectEvent(B)},st.useId=function(){return V.H.useId()},st.useImperativeHandle=function(B,de,we){return V.H.useImperativeHandle(B,de,we)},st.useInsertionEffect=function(B,de){return V.H.useInsertionEffect(B,de)},st.useLayoutEffect=function(B,de){return V.H.useLayoutEffect(B,de)},st.useMemo=function(B,de){return V.H.useMemo(B,de)},st.useOptimistic=function(B,de){return V.H.useOptimistic(B,de)},st.useReducer=function(B,de,we){return V.H.useReducer(B,de,we)},st.useRef=function(B){return V.H.useRef(B)},st.useState=function(B){return V.H.useState(B)},st.useSyncExternalStore=function(B,de,we){return V.H.useSyncExternalStore(B,de,we)},st.useTransition=function(){return V.H.useTransition()},st.version="19.2.4",st}var w_;function Ip(){return w_||(w_=1,Mm.exports=OS()),Mm.exports}var Ie=Ip();const OE=Cp(Ie);var km={exports:{}},Fu={},Vm={exports:{}},Pm={};var R_;function DS(){return R_||(R_=1,(function(i){function e(ue,Oe){var Be=ue.length;ue.push(Oe);e:for(;0<Be;){var je=Be-1>>>1,ke=ue[je];if(0<o(ke,Oe))ue[je]=Oe,ue[Be]=ke,Be=je;else break e}}function n(ue){return ue.length===0?null:ue[0]}function s(ue){if(ue.length===0)return null;var Oe=ue[0],Be=ue.pop();if(Be!==Oe){ue[0]=Be;e:for(var je=0,ke=ue.length,B=ke>>>1;je<B;){var de=2*(je+1)-1,we=ue[de],Pe=de+1,$e=ue[Pe];if(0>o(we,Be))Pe<ke&&0>o($e,we)?(ue[je]=$e,ue[Pe]=Be,je=Pe):(ue[je]=we,ue[de]=Be,je=de);else if(Pe<ke&&0>o($e,Be))ue[je]=$e,ue[Pe]=Be,je=Pe;else break e}}return Oe}function o(ue,Oe){var Be=ue.sortIndex-Oe.sortIndex;return Be!==0?Be:ue.id-Oe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,y=d.now();i.unstable_now=function(){return d.now()-y}}var _=[],b=[],C=1,O=null,x=3,Z=!1,fe=!1,_e=!1,Ce=!1,He=typeof setTimeout=="function"?setTimeout:null,Ye=typeof clearTimeout=="function"?clearTimeout:null,Ue=typeof setImmediate<"u"?setImmediate:null;function ct(ue){for(var Oe=n(b);Oe!==null;){if(Oe.callback===null)s(b);else if(Oe.startTime<=ue)s(b),Oe.sortIndex=Oe.expirationTime,e(_,Oe);else break;Oe=n(b)}}function ft(ue){if(_e=!1,ct(ue),!fe)if(n(_)!==null)fe=!0,nt||(nt=!0,z());else{var Oe=n(b);Oe!==null&&Ft(ft,Oe.startTime-ue)}}var nt=!1,V=-1,M=5,P=-1;function G(){return Ce?!0:!(i.unstable_now()-P<M)}function j(){if(Ce=!1,nt){var ue=i.unstable_now();P=ue;var Oe=!0;try{e:{fe=!1,_e&&(_e=!1,Ye(V),V=-1),Z=!0;var Be=x;try{t:{for(ct(ue),O=n(_);O!==null&&!(O.expirationTime>ue&&G());){var je=O.callback;if(typeof je=="function"){O.callback=null,x=O.priorityLevel;var ke=je(O.expirationTime<=ue);if(ue=i.unstable_now(),typeof ke=="function"){O.callback=ke,ct(ue),Oe=!0;break t}O===n(_)&&s(_),ct(ue)}else s(_);O=n(_)}if(O!==null)Oe=!0;else{var B=n(b);B!==null&&Ft(ft,B.startTime-ue),Oe=!1}}break e}finally{O=null,x=Be,Z=!1}Oe=void 0}}finally{Oe?z():nt=!1}}}var z;if(typeof Ue=="function")z=function(){Ue(j)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,dt=N.port2;N.port1.onmessage=j,z=function(){dt.postMessage(null)}}else z=function(){He(j,0)};function Ft(ue,Oe){V=He(function(){ue(i.unstable_now())},Oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ue){ue.callback=null},i.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ue?Math.floor(1e3/ue):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_next=function(ue){switch(x){case 1:case 2:case 3:var Oe=3;break;default:Oe=x}var Be=x;x=Oe;try{return ue()}finally{x=Be}},i.unstable_requestPaint=function(){Ce=!0},i.unstable_runWithPriority=function(ue,Oe){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var Be=x;x=ue;try{return Oe()}finally{x=Be}},i.unstable_scheduleCallback=function(ue,Oe,Be){var je=i.unstable_now();switch(typeof Be=="object"&&Be!==null?(Be=Be.delay,Be=typeof Be=="number"&&0<Be?je+Be:je):Be=je,ue){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=Be+ke,ue={id:C++,callback:Oe,priorityLevel:ue,startTime:Be,expirationTime:ke,sortIndex:-1},Be>je?(ue.sortIndex=Be,e(b,ue),n(_)===null&&ue===n(b)&&(_e?(Ye(V),V=-1):_e=!0,Ft(ft,Be-je))):(ue.sortIndex=ke,e(_,ue),fe||Z||(fe=!0,nt||(nt=!0,z()))),ue},i.unstable_shouldYield=G,i.unstable_wrapCallback=function(ue){var Oe=x;return function(){var Be=x;x=Oe;try{return ue.apply(this,arguments)}finally{x=Be}}}})(Pm)),Pm}var C_;function xS(){return C_||(C_=1,Vm.exports=DS()),Vm.exports}var Lm={exports:{}},or={};var I_;function NS(){if(I_)return or;I_=1;var i=Ip();function e(_){var b="https://react.dev/errors/"+_;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)b+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+_+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(_,b,C){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:O==null?null:""+O,children:_,containerInfo:b,implementation:C}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(_,b){if(_==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return or.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,or.createPortal=function(_,b){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(e(299));return u(_,b,null,C)},or.flushSync=function(_){var b=d.T,C=s.p;try{if(d.T=null,s.p=2,_)return _()}finally{d.T=b,s.p=C,s.d.f()}},or.preconnect=function(_,b){typeof _=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,s.d.C(_,b))},or.prefetchDNS=function(_){typeof _=="string"&&s.d.D(_)},or.preinit=function(_,b){if(typeof _=="string"&&b&&typeof b.as=="string"){var C=b.as,O=y(C,b.crossOrigin),x=typeof b.integrity=="string"?b.integrity:void 0,Z=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;C==="style"?s.d.S(_,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:O,integrity:x,fetchPriority:Z}):C==="script"&&s.d.X(_,{crossOrigin:O,integrity:x,fetchPriority:Z,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},or.preinitModule=function(_,b){if(typeof _=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var C=y(b.as,b.crossOrigin);s.d.M(_,{crossOrigin:C,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&s.d.M(_)},or.preload=function(_,b){if(typeof _=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var C=b.as,O=y(C,b.crossOrigin);s.d.L(_,C,{crossOrigin:O,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},or.preloadModule=function(_,b){if(typeof _=="string")if(b){var C=y(b.as,b.crossOrigin);s.d.m(_,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:C,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else s.d.m(_)},or.requestFormReset=function(_){s.d.r(_)},or.unstable_batchedUpdates=function(_,b){return _(b)},or.useFormState=function(_,b,C){return d.H.useFormState(_,b,C)},or.useFormStatus=function(){return d.H.useHostTransitionStatus()},or.version="19.2.4",or}var O_;function MS(){if(O_)return Lm.exports;O_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Lm.exports=NS(),Lm.exports}var D_;function kS(){if(D_)return Fu;D_=1;var i=xS(),e=Ip(),n=MS();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function y(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function _(t){if(u(t)!==t)throw Error(s(188))}function b(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return _(f),t;if(p===l)return _(f),r;p=p.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=p;else{for(var T=!1,R=f.child;R;){if(R===a){T=!0,a=f,l=p;break}if(R===l){T=!0,l=f,a=p;break}R=R.sibling}if(!T){for(R=p.child;R;){if(R===a){T=!0,a=p,l=f;break}if(R===l){T=!0,l=p,a=f;break}R=R.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function C(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=C(t),r!==null)return r;t=t.sibling}return null}var O=Object.assign,x=Symbol.for("react.element"),Z=Symbol.for("react.transitional.element"),fe=Symbol.for("react.portal"),_e=Symbol.for("react.fragment"),Ce=Symbol.for("react.strict_mode"),He=Symbol.for("react.profiler"),Ye=Symbol.for("react.consumer"),Ue=Symbol.for("react.context"),ct=Symbol.for("react.forward_ref"),ft=Symbol.for("react.suspense"),nt=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=j&&t[j]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function dt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _e:return"Fragment";case He:return"Profiler";case Ce:return"StrictMode";case ft:return"Suspense";case nt:return"SuspenseList";case P:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case fe:return"Portal";case Ue:return t.displayName||"Context";case Ye:return(t._context.displayName||"Context")+".Consumer";case ct:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return r=t.displayName||null,r!==null?r:dt(t.type)||"Memo";case M:r=t._payload,t=t._init;try{return dt(t(r))}catch{}}return null}var Ft=Array.isArray,ue=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Be={pending:!1,data:null,method:null,action:null},je=[],ke=-1;function B(t){return{current:t}}function de(t){0>ke||(t.current=je[ke],je[ke]=null,ke--)}function we(t,r){ke++,je[ke]=t.current,t.current=r}var Pe=B(null),$e=B(null),Ze=B(null),pt=B(null);function mn(t,r){switch(we(Ze,r),we($e,t),we(Pe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Kv(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Kv(r),t=Gv(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}de(Pe),we(Pe,t)}function Me(){de(Pe),de($e),de(Ze)}function es(t){t.memoizedState!==null&&we(pt,t);var r=Pe.current,a=Gv(r,t.type);r!==a&&(we($e,t),we(Pe,a))}function Pi(t){$e.current===t&&(de(Pe),de($e)),pt.current===t&&(de(pt),zu._currentValue=Be)}var wt,hi;function fi(t){if(wt===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);wt=r&&r[1]||"",hi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wt+t+hi}var Hr=!1;function As(t,r){if(!t||Hr)return"";Hr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(le){var se=le}Reflect.construct(t,[],ge)}else{try{ge.call()}catch(le){se=le}t.call(ge.prototype)}}else{try{throw Error()}catch(le){se=le}(ge=t())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(le){if(le&&se&&typeof le.stack=="string")return[le.stack,se.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),T=p[0],R=p[1];if(T&&R){var L=T.split(`
`),re=R.split(`
`);for(f=l=0;l<L.length&&!L[l].includes("DetermineComponentFrameRoot");)l++;for(;f<re.length&&!re[f].includes("DetermineComponentFrameRoot");)f++;if(l===L.length||f===re.length)for(l=L.length-1,f=re.length-1;1<=l&&0<=f&&L[l]!==re[f];)f--;for(;1<=l&&0<=f;l--,f--)if(L[l]!==re[f]){if(l!==1||f!==1)do if(l--,f--,0>f||L[l]!==re[f]){var he=`
`+L[l].replace(" at new "," at ");return t.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",t.displayName)),he}while(1<=l&&0<=f);break}}}finally{Hr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?fi(a):""}function yo(t,r){switch(t.tag){case 26:case 27:case 5:return fi(t.type);case 16:return fi("Lazy");case 13:return t.child!==r&&r!==null?fi("Suspense Fallback"):fi("Suspense");case 19:return fi("SuspenseList");case 0:case 15:return As(t.type,!1);case 11:return As(t.type.render,!1);case 1:return As(t.type,!0);case 31:return fi("Activity");default:return""}}function vo(t){try{var r="",a=null;do r+=yo(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var cn=Object.prototype.hasOwnProperty,en=i.unstable_scheduleCallback,Mn=i.unstable_cancelCallback,nl=i.unstable_shouldYield,ts=i.unstable_requestPaint,zn=i.unstable_now,Fr=i.unstable_getCurrentPriorityLevel,Kr=i.unstable_ImmediatePriority,Gr=i.unstable_UserBlockingPriority,di=i.unstable_NormalPriority,ws=i.unstable_LowPriority,ha=i.unstable_IdlePriority,Rs=i.log,mi=i.unstable_setDisableYieldValue,nr=null,pn=null;function gn(t){if(typeof Rs=="function"&&mi(t),pn&&typeof pn.setStrictMode=="function")try{pn.setStrictMode(nr,t)}catch{}}var Ne=Math.clz32?Math.clz32:Cs,ns=Math.log,br=Math.LN2;function Cs(t){return t>>>=0,t===0?32:31-(ns(t)/br|0)|0}var Re=256,Li=262144,tn=4194304;function Tr(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Yr(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,p=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var R=l&134217727;return R!==0?(l=R&~p,l!==0?f=Tr(l):(T&=R,T!==0?f=Tr(T):a||(a=R&~t,a!==0&&(f=Tr(a))))):(R=l&~p,R!==0?f=Tr(R):T!==0?f=Tr(T):a||(a=l&~t,a!==0&&(f=Tr(a)))),f===0?0:r!==0&&r!==f&&(r&p)===0&&(p=f&-f,a=r&-r,p>=a||p===32&&(a&4194048)!==0)?r:f}function dr(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function au(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rl(){var t=tn;return tn<<=1,(tn&62914560)===0&&(tn=4194304),t}function Yn(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Sr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function _o(t,r,a,l,f,p){var T=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var R=t.entanglements,L=t.expirationTimes,re=t.hiddenUpdates;for(a=T&~a;0<a;){var he=31-Ne(a),ge=1<<he;R[he]=0,L[he]=-1;var se=re[he];if(se!==null)for(re[he]=null,he=0;he<se.length;he++){var le=se[he];le!==null&&(le.lane&=-536870913)}a&=~ge}l!==0&&pi(t,l,0),p!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=p&~(T&~r))}function pi(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Ne(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function kt(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Ne(a),f=1<<l;f&r|t[l]&r&&(t[l]|=r),a&=~f}}function Jt(t,r){var a=r&-r;return a=(a&42)!==0?1:Is(a),(a&(t.suspendedLanes|r))!==0?0:a}function Is(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ar(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Os(){var t=Oe.p;return t!==0?t:(t=window.event,t===void 0?32:p_(t.type))}function rr(t,r){var a=Oe.p;try{return Oe.p=t,r()}finally{Oe.p=a}}var Qr=Math.random().toString(36).slice(2),Pt="__reactFiber$"+Qr,Gt="__reactProps$"+Qr,kn="__reactContainer$"+Qr,Ui="__reactEvents$"+Qr,ou="__reactListeners$"+Qr,$r="__reactHandles$"+Qr,Eo="__reactResources$"+Qr,jn="__reactMarker$"+Qr;function Ds(t){delete t[Pt],delete t[Gt],delete t[Ui],delete t[ou],delete t[$r]}function wr(t){var r=t[Pt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[kn]||a[Pt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=Wv(t);t!==null;){if(a=t[Pt])return a;t=Wv(t)}return r}t=a,a=t.parentNode}return null}function It(t){if(t=t[Pt]||t[kn]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function yn(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function Sn(t){var r=t[Eo];return r||(r=t[Eo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function nn(t){t[jn]=!0}var gi=new Set,rs={};function Rr(t,r){Cr(t,r),Cr(t+"Capture",r)}function Cr(t,r){for(rs[t]=r,t=0;t<r.length;t++)gi.add(r[t])}var Xr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fa={},is={};function bo(t){return cn.call(is,t)?!0:cn.call(fa,t)?!1:Xr.test(t)?is[t]=!0:(fa[t]=!0,!1)}function ot(t,r,a){if(bo(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function ir(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function rn(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function sn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ir(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function da(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,p=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(T){a=""+T,p.call(this,T)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(T){a=""+T},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Dt(t){if(!t._valueTracker){var r=Ir(t)?"checked":"value";t._valueTracker=da(t,r,""+t[r])}}function ss(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Ir(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function yt(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Jr=/[\n"\\]/g;function An(t){return t.replace(Jr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Zr(t,r,a,l,f,p,T,R){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),r!=null?T==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+sn(r)):t.value!==""+sn(r)&&(t.value=""+sn(r)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),r!=null?xs(t,T,sn(r)):a!=null?xs(t,T,sn(a)):l!=null&&t.removeAttribute("value"),f==null&&p!=null&&(t.defaultChecked=!!p),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?t.name=""+sn(R):t.removeAttribute("name")}function ma(t,r,a,l,f,p,T,R){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),r!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||r!=null)){Dt(t);return}a=a!=null?""+sn(a):"",r=r!=null?""+sn(r):a,R||r===t.value||(t.value=r),t.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=R?t.checked:!!l,t.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),Dt(t)}function xs(t,r,a){r==="number"&&yt(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Wr(t,r,a,l){if(t=t.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=r.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+sn(a),r=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function To(t,r,a){if(r!=null&&(r=""+sn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+sn(a):""}function ei(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Ft(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=sn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Dt(t)}function Qn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var il=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gt(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||il.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function pa(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&gt(t,f,l)}else for(var p in r)r.hasOwnProperty(p)&&gt(t,p,r[p])}function ga(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ti(t){return hn.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function sr(){}var Or=null;function mr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zi=null,Lt=null;function Bn(t){var r=It(t);if(r&&(t=r.stateNode)){var a=t[Gt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Zr(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+An(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var f=l[Gt]||null;if(!f)throw Error(s(90));Zr(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&ss(l)}break e;case"textarea":To(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Wr(t,!!a.multiple,r,!1)}}}var yi=!1;function Dr(t,r,a){if(yi)return t(r,a);yi=!0;try{var l=t(r);return l}finally{if(yi=!1,(zi!==null||Lt!==null)&&(hh(),zi&&(r=zi,t=Lt,Lt=zi=null,Bn(r),t)))for(r=0;r<t.length;r++)Bn(t[r])}}function pr(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Gt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ns=!1;if(vn)try{var mt={};Object.defineProperty(mt,"passive",{get:function(){Ns=!0}}),window.addEventListener("test",mt,mt),window.removeEventListener("test",mt,mt)}catch{Ns=!1}var xr=null,ya=null,ji=null;function Bi(){if(ji)return ji;var t,r=ya,a=r.length,l,f="value"in xr?xr.value:xr.textContent,p=f.length;for(t=0;t<a&&r[t]===f[t];t++);var T=a-t;for(l=1;l<=T&&r[a-l]===f[p-l];l++);return ji=f.slice(t,1<l?1-l:void 0)}function qi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function vi(){return!0}function ni(){return!1}function an(t){function r(a,l,f,p,T){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var R in t)t.hasOwnProperty(R)&&(a=t[R],this[R]=a?a(p):p[R]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?vi:ni,this.isPropagationStopped=ni,this}return O(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=vi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=vi)},persist:function(){},isPersistent:vi}),r}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_i=an(Hi),ri=O({},Hi,{view:0,detail:0}),as=an(ri),Ei,va,bi,_a=O({},ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bi&&(bi&&t.type==="mousemove"?(Ei=t.screenX-bi.screenX,va=t.screenY-bi.screenY):va=Ei=0,bi=t),Ei)},movementY:function(t){return"movementY"in t?t.movementY:va}}),Ms=an(_a),Fi=O({},_a,{dataTransfer:0}),So=an(Fi),ks=O({},ri,{relatedTarget:0}),Ti=an(ks),os=O({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ao=an(os),Ea=O({},Hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ki=an(Ea),ba=O({},Hi,{data:0}),Nr=an(ba),Ta={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ls(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=_n[t])?!!r[t]:!1}function Mr(){return ls}var qn=O({},ri,{key:function(t){if(t.key){var r=Ta[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=qi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Sa[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mr,charCode:function(t){return t.type==="keypress"?qi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Vs=an(qn),wo=O({},_a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Si=an(wo),c=O({},ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mr}),v=an(c),S=O({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=an(S),ee=O({},_a,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ae=an(ee),Se=O({},Hi,{newState:0,oldState:0}),rt=an(Se),on=[9,13,27,32],Rt=vn&&"CompositionEvent"in window,Ut=null;vn&&"documentMode"in document&&(Ut=document.documentMode);var kr=vn&&"TextEvent"in window&&!Ut,Vr=vn&&(!Rt||Ut&&8<Ut&&11>=Ut),gr=" ",ii=!1;function us(t,r){switch(t){case"keyup":return on.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Aa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ps=!1;function xc(t,r){switch(t){case"compositionend":return Aa(r);case"keypress":return r.which!==32?null:(ii=!0,gr);case"textInput":return t=r.data,t===gr&&ii?null:t;default:return null}}function Gf(t,r){if(Ps)return t==="compositionend"||!Rt&&us(t,r)?(t=Bi(),ji=ya=xr=null,Ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Vr&&r.locale!=="ko"?null:r.data;default:return null}}var Nc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function al(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Nc[t.type]:r==="textarea"}function lu(t,r,a,l){zi?Lt?Lt.push(l):Lt=[l]:zi=l,r=vh(r,"onChange"),0<r.length&&(a=new _i("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var wa=null,Ro=null;function Yf(t){zv(t,0)}function ol(t){var r=yn(t);if(ss(r))return t}function Co(t,r){if(t==="change")return r}var Ai=!1;if(vn){var Yt;if(vn){var Ra="oninput"in document;if(!Ra){var yr=document.createElement("div");yr.setAttribute("oninput","return;"),Ra=typeof yr.oninput=="function"}Yt=Ra}else Yt=!1;Ai=Yt&&(!document.documentMode||9<document.documentMode)}function Mc(){wa&&(wa.detachEvent("onpropertychange",ll),Ro=wa=null)}function ll(t){if(t.propertyName==="value"&&ol(Ro)){var r=[];lu(r,Ro,t,mr(t)),Dr(Yf,r)}}function kc(t,r,a){t==="focusin"?(Mc(),wa=r,Ro=a,wa.attachEvent("onpropertychange",ll)):t==="focusout"&&Mc()}function Ls(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ol(Ro)}function uu(t,r){if(t==="click")return ol(r)}function Ca(t,r){if(t==="input"||t==="change")return ol(r)}function cs(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var ar=typeof Object.is=="function"?Object.is:cs;function h(t,r){if(ar(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!cn.call(r,f)||!ar(t[f],r[f]))return!1}return!0}function m(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g(t,r){var a=m(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=m(a)}}function E(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?E(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function A(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=yt(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=yt(t.document)}return r}function w(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var D=vn&&"documentMode"in document&&11>=document.documentMode,k=null,q=null,H=null,$=!1;function U(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;$||k==null||k!==yt(l)||(l=k,"selectionStart"in l&&w(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),H&&h(H,l)||(H=l,l=vh(q,"onSelect"),0<l.length&&(r=new _i("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=k)))}function J(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var F={animationend:J("Animation","AnimationEnd"),animationiteration:J("Animation","AnimationIteration"),animationstart:J("Animation","AnimationStart"),transitionrun:J("Transition","TransitionRun"),transitionstart:J("Transition","TransitionStart"),transitioncancel:J("Transition","TransitionCancel"),transitionend:J("Transition","TransitionEnd")},Y={},Q={};vn&&(Q=document.createElement("div").style,"AnimationEvent"in window||(delete F.animationend.animation,delete F.animationiteration.animation,delete F.animationstart.animation),"TransitionEvent"in window||delete F.transitionend.transition);function X(t){if(Y[t])return Y[t];if(!F[t])return t;var r=F[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Q)return Y[t]=r[a];return t}var te=X("animationend"),ie=X("animationiteration"),ce=X("animationstart"),pe=X("transitionrun"),Te=X("transitionstart"),xe=X("transitioncancel"),Ee=X("transitionend"),Ae=new Map,De="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");De.push("scrollEnd");function be(t,r){Ae.set(t,r),Rr(r,[t])}var Ve=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ke=[],et=0,lt=0;function Hn(){for(var t=et,r=lt=et=0;r<t;){var a=Ke[r];Ke[r++]=null;var l=Ke[r];Ke[r++]=null;var f=Ke[r];Ke[r++]=null;var p=Ke[r];if(Ke[r++]=null,l!==null&&f!==null){var T=l.pending;T===null?f.next=f:(f.next=T.next,T.next=f),l.pending=f}p!==0&&Io(a,f,p)}}function We(t,r,a,l){Ke[et++]=t,Ke[et++]=r,Ke[et++]=a,Ke[et++]=l,lt|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function wn(t,r,a,l){return We(t,r,a,l),Rn(t)}function Zt(t,r){return We(t,null,null,r),Rn(t)}function Io(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,p=t.return;p!==null;)p.childLanes|=a,l=p.alternate,l!==null&&(l.childLanes|=a),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(f=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,f&&r!==null&&(f=31-Ne(a),t=p.hiddenUpdates,l=t[f],l===null?t[f]=[r]:l.push(r),r.lane=a|536870912),p):null}function Rn(t){if(50<Nu)throw Nu=0,nm=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Pr={};function cu(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(t,r,a,l){return new cu(t,r,a,l)}function Qf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Us(t,r){var a=t.alternate;return a===null?(a=si(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function bg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Vc(t,r,a,l,f,p){var T=0;if(l=t,typeof t=="function")Qf(t)&&(T=1);else if(typeof t=="string")T=mS(t,a,Pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case P:return t=si(31,a,r,f),t.elementType=P,t.lanes=p,t;case _e:return Oo(a.children,f,p,r);case Ce:T=8,f|=24;break;case He:return t=si(12,a,r,f|2),t.elementType=He,t.lanes=p,t;case ft:return t=si(13,a,r,f),t.elementType=ft,t.lanes=p,t;case nt:return t=si(19,a,r,f),t.elementType=nt,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ue:T=10;break e;case Ye:T=9;break e;case ct:T=11;break e;case V:T=14;break e;case M:T=16,l=null;break e}T=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=si(T,a,r,f),r.elementType=t,r.type=l,r.lanes=p,r}function Oo(t,r,a,l){return t=si(7,t,l,r),t.lanes=a,t}function $f(t,r,a){return t=si(6,t,null,r),t.lanes=a,t}function Tg(t){var r=si(18,null,null,0);return r.stateNode=t,r}function Xf(t,r,a){return r=si(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Sg=new WeakMap;function wi(t,r){if(typeof t=="object"&&t!==null){var a=Sg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:vo(r)},Sg.set(t,r),r)}return{value:t,source:r,stack:vo(r)}}var ul=[],cl=0,Pc=null,hu=0,Ri=[],Ci=0,Ia=null,hs=1,fs="";function zs(t,r){ul[cl++]=hu,ul[cl++]=Pc,Pc=t,hu=r}function Ag(t,r,a){Ri[Ci++]=hs,Ri[Ci++]=fs,Ri[Ci++]=Ia,Ia=t;var l=hs;t=fs;var f=32-Ne(l)-1;l&=~(1<<f),a+=1;var p=32-Ne(r)+f;if(30<p){var T=f-f%5;p=(l&(1<<T)-1).toString(32),l>>=T,f-=T,hs=1<<32-Ne(r)+f|a<<f|l,fs=p+t}else hs=1<<p|a<<f|l,fs=t}function Jf(t){t.return!==null&&(zs(t,1),Ag(t,1,0))}function Zf(t){for(;t===Pc;)Pc=ul[--cl],ul[cl]=null,hu=ul[--cl],ul[cl]=null;for(;t===Ia;)Ia=Ri[--Ci],Ri[Ci]=null,fs=Ri[--Ci],Ri[Ci]=null,hs=Ri[--Ci],Ri[Ci]=null}function wg(t,r){Ri[Ci++]=hs,Ri[Ci++]=fs,Ri[Ci++]=Ia,hs=r.id,fs=r.overflow,Ia=t}var $n=null,Qt=null,Ct=!1,Oa=null,Ii=!1,Wf=Error(s(519));function Da(t){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fu(wi(r,t)),Wf}function Rg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Pt]=t,r[Gt]=l,a){case"dialog":_t("cancel",r),_t("close",r);break;case"iframe":case"object":case"embed":_t("load",r);break;case"video":case"audio":for(a=0;a<ku.length;a++)_t(ku[a],r);break;case"source":_t("error",r);break;case"img":case"image":case"link":_t("error",r),_t("load",r);break;case"details":_t("toggle",r);break;case"input":_t("invalid",r),ma(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":_t("invalid",r);break;case"textarea":_t("invalid",r),ei(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||Hv(r.textContent,a)?(l.popover!=null&&(_t("beforetoggle",r),_t("toggle",r)),l.onScroll!=null&&_t("scroll",r),l.onScrollEnd!=null&&_t("scrollend",r),l.onClick!=null&&(r.onclick=sr),r=!0):r=!1,r||Da(t,!0)}function Cg(t){for($n=t.return;$n;)switch($n.tag){case 5:case 31:case 13:Ii=!1;return;case 27:case 3:Ii=!0;return;default:$n=$n.return}}function hl(t){if(t!==$n)return!1;if(!Ct)return Cg(t),Ct=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||ym(t.type,t.memoizedProps)),a=!a),a&&Qt&&Da(t),Cg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Qt=Zv(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Qt=Zv(t)}else r===27?(r=Qt,Fa(t.type)?(t=Tm,Tm=null,Qt=t):Qt=r):Qt=$n?Di(t.stateNode.nextSibling):null;return!0}function Do(){Qt=$n=null,Ct=!1}function ed(){var t=Oa;return t!==null&&(jr===null?jr=t:jr.push.apply(jr,t),Oa=null),t}function fu(t){Oa===null?Oa=[t]:Oa.push(t)}var td=B(null),xo=null,js=null;function xa(t,r,a){we(td,r._currentValue),r._currentValue=a}function Bs(t){t._currentValue=td.current,de(td)}function nd(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function rd(t,r,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var p=f.dependencies;if(p!==null){var T=f.child;p=p.firstContext;e:for(;p!==null;){var R=p;p=f;for(var L=0;L<r.length;L++)if(R.context===r[L]){p.lanes|=a,R=p.alternate,R!==null&&(R.lanes|=a),nd(p.return,a,t),l||(T=null);break e}p=R.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(s(341));T.lanes|=a,p=T.alternate,p!==null&&(p.lanes|=a),nd(T,a,t),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===t){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function fl(t,r,a,l){t=null;for(var f=r,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var R=f.type;ar(f.pendingProps.value,T.value)||(t!==null?t.push(R):t=[R])}}else if(f===pt.current){if(T=f.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(zu):t=[zu])}f=f.return}t!==null&&rd(r,t,a,l),r.flags|=262144}function Lc(t){for(t=t.firstContext;t!==null;){if(!ar(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function No(t){xo=t,js=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Xn(t){return Ig(xo,t)}function Uc(t,r){return xo===null&&No(t),Ig(t,r)}function Ig(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},js===null){if(t===null)throw Error(s(308));js=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else js=js.next=r;return a}var c1=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},h1=i.unstable_scheduleCallback,f1=i.unstable_NormalPriority,Cn={$$typeof:Ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function id(){return{controller:new c1,data:new Map,refCount:0}}function du(t){t.refCount--,t.refCount===0&&h1(f1,function(){t.controller.abort()})}var mu=null,sd=0,dl=0,ml=null;function d1(t,r){if(mu===null){var a=mu=[];sd=0,dl=lm(),ml={status:"pending",value:void 0,then:function(l){a.push(l)}}}return sd++,r.then(Og,Og),r}function Og(){if(--sd===0&&mu!==null){ml!==null&&(ml.status="fulfilled");var t=mu;mu=null,dl=0,ml=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function m1(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Dg=ue.S;ue.S=function(t,r){dv=zn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&d1(t,r),Dg!==null&&Dg(t,r)};var Mo=B(null);function ad(){var t=Mo.current;return t!==null?t:Kt.pooledCache}function zc(t,r){r===null?we(Mo,Mo.current):we(Mo,r.pool)}function xg(){var t=ad();return t===null?null:{parent:Cn._currentValue,pool:t}}var pl=Error(s(460)),od=Error(s(474)),jc=Error(s(542)),Bc={then:function(){}};function Ng(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Mg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(sr,sr),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Vg(t),t;default:if(typeof r.status=="string")r.then(sr,sr);else{if(t=Kt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Vg(t),t}throw Vo=r,pl}}function ko(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Vo=a,pl):a}}var Vo=null;function kg(){if(Vo===null)throw Error(s(459));var t=Vo;return Vo=null,t}function Vg(t){if(t===pl||t===jc)throw Error(s(483))}var gl=null,pu=0;function qc(t){var r=pu;return pu+=1,gl===null&&(gl=[]),Mg(gl,t,r)}function gu(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Hc(t,r){throw r.$$typeof===x?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Pg(t){function r(W,K){if(t){var ne=W.deletions;ne===null?(W.deletions=[K],W.flags|=16):ne.push(K)}}function a(W,K){if(!t)return null;for(;K!==null;)r(W,K),K=K.sibling;return null}function l(W){for(var K=new Map;W!==null;)W.key!==null?K.set(W.key,W):K.set(W.index,W),W=W.sibling;return K}function f(W,K){return W=Us(W,K),W.index=0,W.sibling=null,W}function p(W,K,ne){return W.index=ne,t?(ne=W.alternate,ne!==null?(ne=ne.index,ne<K?(W.flags|=67108866,K):ne):(W.flags|=67108866,K)):(W.flags|=1048576,K)}function T(W){return t&&W.alternate===null&&(W.flags|=67108866),W}function R(W,K,ne,me){return K===null||K.tag!==6?(K=$f(ne,W.mode,me),K.return=W,K):(K=f(K,ne),K.return=W,K)}function L(W,K,ne,me){var Ge=ne.type;return Ge===_e?he(W,K,ne.props.children,me,ne.key):K!==null&&(K.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===M&&ko(Ge)===K.type)?(K=f(K,ne.props),gu(K,ne),K.return=W,K):(K=Vc(ne.type,ne.key,ne.props,null,W.mode,me),gu(K,ne),K.return=W,K)}function re(W,K,ne,me){return K===null||K.tag!==4||K.stateNode.containerInfo!==ne.containerInfo||K.stateNode.implementation!==ne.implementation?(K=Xf(ne,W.mode,me),K.return=W,K):(K=f(K,ne.children||[]),K.return=W,K)}function he(W,K,ne,me,Ge){return K===null||K.tag!==7?(K=Oo(ne,W.mode,me,Ge),K.return=W,K):(K=f(K,ne),K.return=W,K)}function ge(W,K,ne){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=$f(""+K,W.mode,ne),K.return=W,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case Z:return ne=Vc(K.type,K.key,K.props,null,W.mode,ne),gu(ne,K),ne.return=W,ne;case fe:return K=Xf(K,W.mode,ne),K.return=W,K;case M:return K=ko(K),ge(W,K,ne)}if(Ft(K)||z(K))return K=Oo(K,W.mode,ne,null),K.return=W,K;if(typeof K.then=="function")return ge(W,qc(K),ne);if(K.$$typeof===Ue)return ge(W,Uc(W,K),ne);Hc(W,K)}return null}function se(W,K,ne,me){var Ge=K!==null?K.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Ge!==null?null:R(W,K,""+ne,me);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Z:return ne.key===Ge?L(W,K,ne,me):null;case fe:return ne.key===Ge?re(W,K,ne,me):null;case M:return ne=ko(ne),se(W,K,ne,me)}if(Ft(ne)||z(ne))return Ge!==null?null:he(W,K,ne,me,null);if(typeof ne.then=="function")return se(W,K,qc(ne),me);if(ne.$$typeof===Ue)return se(W,K,Uc(W,ne),me);Hc(W,ne)}return null}function le(W,K,ne,me,Ge){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return W=W.get(ne)||null,R(K,W,""+me,Ge);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case Z:return W=W.get(me.key===null?ne:me.key)||null,L(K,W,me,Ge);case fe:return W=W.get(me.key===null?ne:me.key)||null,re(K,W,me,Ge);case M:return me=ko(me),le(W,K,ne,me,Ge)}if(Ft(me)||z(me))return W=W.get(ne)||null,he(K,W,me,Ge,null);if(typeof me.then=="function")return le(W,K,ne,qc(me),Ge);if(me.$$typeof===Ue)return le(W,K,ne,Uc(K,me),Ge);Hc(K,me)}return null}function ze(W,K,ne,me){for(var Ge=null,xt=null,qe=K,ht=K=0,bt=null;qe!==null&&ht<ne.length;ht++){qe.index>ht?(bt=qe,qe=null):bt=qe.sibling;var Nt=se(W,qe,ne[ht],me);if(Nt===null){qe===null&&(qe=bt);break}t&&qe&&Nt.alternate===null&&r(W,qe),K=p(Nt,K,ht),xt===null?Ge=Nt:xt.sibling=Nt,xt=Nt,qe=bt}if(ht===ne.length)return a(W,qe),Ct&&zs(W,ht),Ge;if(qe===null){for(;ht<ne.length;ht++)qe=ge(W,ne[ht],me),qe!==null&&(K=p(qe,K,ht),xt===null?Ge=qe:xt.sibling=qe,xt=qe);return Ct&&zs(W,ht),Ge}for(qe=l(qe);ht<ne.length;ht++)bt=le(qe,W,ht,ne[ht],me),bt!==null&&(t&&bt.alternate!==null&&qe.delete(bt.key===null?ht:bt.key),K=p(bt,K,ht),xt===null?Ge=bt:xt.sibling=bt,xt=bt);return t&&qe.forEach(function($a){return r(W,$a)}),Ct&&zs(W,ht),Ge}function Xe(W,K,ne,me){if(ne==null)throw Error(s(151));for(var Ge=null,xt=null,qe=K,ht=K=0,bt=null,Nt=ne.next();qe!==null&&!Nt.done;ht++,Nt=ne.next()){qe.index>ht?(bt=qe,qe=null):bt=qe.sibling;var $a=se(W,qe,Nt.value,me);if($a===null){qe===null&&(qe=bt);break}t&&qe&&$a.alternate===null&&r(W,qe),K=p($a,K,ht),xt===null?Ge=$a:xt.sibling=$a,xt=$a,qe=bt}if(Nt.done)return a(W,qe),Ct&&zs(W,ht),Ge;if(qe===null){for(;!Nt.done;ht++,Nt=ne.next())Nt=ge(W,Nt.value,me),Nt!==null&&(K=p(Nt,K,ht),xt===null?Ge=Nt:xt.sibling=Nt,xt=Nt);return Ct&&zs(W,ht),Ge}for(qe=l(qe);!Nt.done;ht++,Nt=ne.next())Nt=le(qe,W,ht,Nt.value,me),Nt!==null&&(t&&Nt.alternate!==null&&qe.delete(Nt.key===null?ht:Nt.key),K=p(Nt,K,ht),xt===null?Ge=Nt:xt.sibling=Nt,xt=Nt);return t&&qe.forEach(function(wS){return r(W,wS)}),Ct&&zs(W,ht),Ge}function Ht(W,K,ne,me){if(typeof ne=="object"&&ne!==null&&ne.type===_e&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Z:e:{for(var Ge=ne.key;K!==null;){if(K.key===Ge){if(Ge=ne.type,Ge===_e){if(K.tag===7){a(W,K.sibling),me=f(K,ne.props.children),me.return=W,W=me;break e}}else if(K.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===M&&ko(Ge)===K.type){a(W,K.sibling),me=f(K,ne.props),gu(me,ne),me.return=W,W=me;break e}a(W,K);break}else r(W,K);K=K.sibling}ne.type===_e?(me=Oo(ne.props.children,W.mode,me,ne.key),me.return=W,W=me):(me=Vc(ne.type,ne.key,ne.props,null,W.mode,me),gu(me,ne),me.return=W,W=me)}return T(W);case fe:e:{for(Ge=ne.key;K!==null;){if(K.key===Ge)if(K.tag===4&&K.stateNode.containerInfo===ne.containerInfo&&K.stateNode.implementation===ne.implementation){a(W,K.sibling),me=f(K,ne.children||[]),me.return=W,W=me;break e}else{a(W,K);break}else r(W,K);K=K.sibling}me=Xf(ne,W.mode,me),me.return=W,W=me}return T(W);case M:return ne=ko(ne),Ht(W,K,ne,me)}if(Ft(ne))return ze(W,K,ne,me);if(z(ne)){if(Ge=z(ne),typeof Ge!="function")throw Error(s(150));return ne=Ge.call(ne),Xe(W,K,ne,me)}if(typeof ne.then=="function")return Ht(W,K,qc(ne),me);if(ne.$$typeof===Ue)return Ht(W,K,Uc(W,ne),me);Hc(W,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,K!==null&&K.tag===6?(a(W,K.sibling),me=f(K,ne),me.return=W,W=me):(a(W,K),me=$f(ne,W.mode,me),me.return=W,W=me),T(W)):a(W,K)}return function(W,K,ne,me){try{pu=0;var Ge=Ht(W,K,ne,me);return gl=null,Ge}catch(qe){if(qe===pl||qe===jc)throw qe;var xt=si(29,qe,null,W.mode);return xt.lanes=me,xt.return=W,xt}}}var Po=Pg(!0),Lg=Pg(!1),Na=!1;function ld(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ud(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ma(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ka(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Mt&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=Rn(t),Io(t,null,a),r}return We(t,l,r,a),Rn(t)}function yu(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,kt(t,a)}}function cd(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=T:p=p.next=T,a=a.next}while(a!==null);p===null?f=p=r:p=p.next=r}else f=p=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var hd=!1;function vu(){if(hd){var t=ml;if(t!==null)throw t}}function _u(t,r,a,l){hd=!1;var f=t.updateQueue;Na=!1;var p=f.firstBaseUpdate,T=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var L=R,re=L.next;L.next=null,T===null?p=re:T.next=re,T=L;var he=t.alternate;he!==null&&(he=he.updateQueue,R=he.lastBaseUpdate,R!==T&&(R===null?he.firstBaseUpdate=re:R.next=re,he.lastBaseUpdate=L))}if(p!==null){var ge=f.baseState;T=0,he=re=L=null,R=p;do{var se=R.lane&-536870913,le=se!==R.lane;if(le?(Et&se)===se:(l&se)===se){se!==0&&se===dl&&(hd=!0),he!==null&&(he=he.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ze=t,Xe=R;se=r;var Ht=a;switch(Xe.tag){case 1:if(ze=Xe.payload,typeof ze=="function"){ge=ze.call(Ht,ge,se);break e}ge=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Xe.payload,se=typeof ze=="function"?ze.call(Ht,ge,se):ze,se==null)break e;ge=O({},ge,se);break e;case 2:Na=!0}}se=R.callback,se!==null&&(t.flags|=64,le&&(t.flags|=8192),le=f.callbacks,le===null?f.callbacks=[se]:le.push(se))}else le={lane:se,tag:R.tag,payload:R.payload,callback:R.callback,next:null},he===null?(re=he=le,L=ge):he=he.next=le,T|=se;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;le=R,R=le.next,le.next=null,f.lastBaseUpdate=le,f.shared.pending=null}}while(!0);he===null&&(L=ge),f.baseState=L,f.firstBaseUpdate=re,f.lastBaseUpdate=he,p===null&&(f.shared.lanes=0),za|=T,t.lanes=T,t.memoizedState=ge}}function Ug(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function zg(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Ug(a[t],r)}var yl=B(null),Fc=B(0);function jg(t,r){t=Xs,we(Fc,t),we(yl,r),Xs=t|r.baseLanes}function fd(){we(Fc,Xs),we(yl,yl.current)}function dd(){Xs=Fc.current,de(yl),de(Fc)}var ai=B(null),Oi=null;function Va(t){var r=t.alternate;we(En,En.current&1),we(ai,t),Oi===null&&(r===null||yl.current!==null||r.memoizedState!==null)&&(Oi=t)}function md(t){we(En,En.current),we(ai,t),Oi===null&&(Oi=t)}function Bg(t){t.tag===22?(we(En,En.current),we(ai,t),Oi===null&&(Oi=t)):Pa()}function Pa(){we(En,En.current),we(ai,ai.current)}function oi(t){de(ai),Oi===t&&(Oi=null),de(En)}var En=B(0);function Kc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Em(a)||bm(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var qs=0,ut=null,Bt=null,In=null,Gc=!1,vl=!1,Lo=!1,Yc=0,Eu=0,_l=null,p1=0;function fn(){throw Error(s(321))}function pd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!ar(t[a],r[a]))return!1;return!0}function gd(t,r,a,l,f,p){return qs=p,ut=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ue.H=t===null||t.memoizedState===null?Ay:xd,Lo=!1,p=a(l,f),Lo=!1,vl&&(p=Hg(r,a,l,f)),qg(t),p}function qg(t){ue.H=Su;var r=Bt!==null&&Bt.next!==null;if(qs=0,In=Bt=ut=null,Gc=!1,Eu=0,_l=null,r)throw Error(s(300));t===null||On||(t=t.dependencies,t!==null&&Lc(t)&&(On=!0))}function Hg(t,r,a,l){ut=t;var f=0;do{if(vl&&(_l=null),Eu=0,vl=!1,25<=f)throw Error(s(301));if(f+=1,In=Bt=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}ue.H=wy,p=r(a,l)}while(vl);return p}function g1(){var t=ue.H,r=t.useState()[0];return r=typeof r.then=="function"?bu(r):r,t=t.useState()[0],(Bt!==null?Bt.memoizedState:null)!==t&&(ut.flags|=1024),r}function yd(){var t=Yc!==0;return Yc=0,t}function vd(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function _d(t){if(Gc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Gc=!1}qs=0,In=Bt=ut=null,vl=!1,Eu=Yc=0,_l=null}function vr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?ut.memoizedState=In=t:In=In.next=t,In}function bn(){if(Bt===null){var t=ut.alternate;t=t!==null?t.memoizedState:null}else t=Bt.next;var r=In===null?ut.memoizedState:In.next;if(r!==null)In=r,Bt=t;else{if(t===null)throw ut.alternate===null?Error(s(467)):Error(s(310));Bt=t,t={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},In===null?ut.memoizedState=In=t:In=In.next=t}return In}function Qc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bu(t){var r=Eu;return Eu+=1,_l===null&&(_l=[]),t=Mg(_l,t,r),r=ut,(In===null?r.memoizedState:In.next)===null&&(r=r.alternate,ue.H=r===null||r.memoizedState===null?Ay:xd),t}function $c(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return bu(t);if(t.$$typeof===Ue)return Xn(t)}throw Error(s(438,String(t)))}function Ed(t){var r=null,a=ut.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=ut.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Qc(),ut.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=G;return r.index++,a}function Hs(t,r){return typeof r=="function"?r(t):r}function Xc(t){var r=bn();return bd(r,Bt,t)}function bd(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=t.baseQueue,p=l.pending;if(p!==null){if(f!==null){var T=f.next;f.next=p.next,p.next=T}r.baseQueue=f=p,l.pending=null}if(p=t.baseState,f===null)t.memoizedState=p;else{r=f.next;var R=T=null,L=null,re=r,he=!1;do{var ge=re.lane&-536870913;if(ge!==re.lane?(Et&ge)===ge:(qs&ge)===ge){var se=re.revertLane;if(se===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),ge===dl&&(he=!0);else if((qs&se)===se){re=re.next,se===dl&&(he=!0);continue}else ge={lane:0,revertLane:re.revertLane,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},L===null?(R=L=ge,T=p):L=L.next=ge,ut.lanes|=se,za|=se;ge=re.action,Lo&&a(p,ge),p=re.hasEagerState?re.eagerState:a(p,ge)}else se={lane:ge,revertLane:re.revertLane,gesture:re.gesture,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},L===null?(R=L=se,T=p):L=L.next=se,ut.lanes|=ge,za|=ge;re=re.next}while(re!==null&&re!==r);if(L===null?T=p:L.next=R,!ar(p,t.memoizedState)&&(On=!0,he&&(a=ml,a!==null)))throw a;t.memoizedState=p,t.baseState=T,t.baseQueue=L,l.lastRenderedState=p}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Td(t){var r=bn(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,p=r.memoizedState;if(f!==null){a.pending=null;var T=f=f.next;do p=t(p,T.action),T=T.next;while(T!==f);ar(p,r.memoizedState)||(On=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,l]}function Fg(t,r,a){var l=ut,f=bn(),p=Ct;if(p){if(a===void 0)throw Error(s(407));a=a()}else a=r();var T=!ar((Bt||f).memoizedState,a);if(T&&(f.memoizedState=a,On=!0),f=f.queue,wd(Yg.bind(null,l,f,t),[t]),f.getSnapshot!==r||T||In!==null&&In.memoizedState.tag&1){if(l.flags|=2048,El(9,{destroy:void 0},Gg.bind(null,l,f,a,r),null),Kt===null)throw Error(s(349));p||(qs&127)!==0||Kg(l,r,a)}return a}function Kg(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=ut.updateQueue,r===null?(r=Qc(),ut.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Gg(t,r,a,l){r.value=a,r.getSnapshot=l,Qg(r)&&$g(t)}function Yg(t,r,a){return a(function(){Qg(r)&&$g(t)})}function Qg(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!ar(t,a)}catch{return!0}}function $g(t){var r=Zt(t,2);r!==null&&Br(r,t,2)}function Sd(t){var r=vr();if(typeof t=="function"){var a=t;if(t=a(),Lo){gn(!0);try{a()}finally{gn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:t},r}function Xg(t,r,a,l){return t.baseState=a,bd(t,Bt,typeof l=="function"?l:Hs)}function y1(t,r,a,l,f){if(Wc(t))throw Error(s(485));if(t=r.action,t!==null){var p={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};ue.T!==null?a(!0):p.isTransition=!1,l(p),a=r.pending,a===null?(p.next=r.pending=p,Jg(r,p)):(p.next=a.next,r.pending=a.next=p)}}function Jg(t,r){var a=r.action,l=r.payload,f=t.state;if(r.isTransition){var p=ue.T,T={};ue.T=T;try{var R=a(f,l),L=ue.S;L!==null&&L(T,R),Zg(t,r,R)}catch(re){Ad(t,r,re)}finally{p!==null&&T.types!==null&&(p.types=T.types),ue.T=p}}else try{p=a(f,l),Zg(t,r,p)}catch(re){Ad(t,r,re)}}function Zg(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Wg(t,r,l)},function(l){return Ad(t,r,l)}):Wg(t,r,a)}function Wg(t,r,a){r.status="fulfilled",r.value=a,ey(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Jg(t,a)))}function Ad(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,ey(r),r=r.next;while(r!==l)}t.action=null}function ey(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function ty(t,r){return r}function ny(t,r){if(Ct){var a=Kt.formState;if(a!==null){e:{var l=ut;if(Ct){if(Qt){t:{for(var f=Qt,p=Ii;f.nodeType!==8;){if(!p){f=null;break t}if(f=Di(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Qt=Di(f.nextSibling),l=f.data==="F!";break e}}Da(l)}l=!1}l&&(r=a[0])}}return a=vr(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ty,lastRenderedState:r},a.queue=l,a=by.bind(null,ut,l),l.dispatch=a,l=Sd(!1),p=Dd.bind(null,ut,!1,l.queue),l=vr(),f={state:r,dispatch:null,action:t,pending:null},l.queue=f,a=y1.bind(null,ut,f,p,a),f.dispatch=a,l.memoizedState=t,[r,a,!1]}function ry(t){var r=bn();return iy(r,Bt,t)}function iy(t,r,a){if(r=bd(t,r,ty)[0],t=Xc(Hs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=bu(r)}catch(T){throw T===pl?jc:T}else l=r;r=bn();var f=r.queue,p=f.dispatch;return a!==r.memoizedState&&(ut.flags|=2048,El(9,{destroy:void 0},v1.bind(null,f,a),null)),[l,p,t]}function v1(t,r){t.action=r}function sy(t){var r=bn(),a=Bt;if(a!==null)return iy(r,a,t);bn(),r=r.memoizedState,a=bn();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function El(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=ut.updateQueue,r===null&&(r=Qc(),ut.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function ay(){return bn().memoizedState}function Jc(t,r,a,l){var f=vr();ut.flags|=t,f.memoizedState=El(1|r,{destroy:void 0},a,l===void 0?null:l)}function Zc(t,r,a,l){var f=bn();l=l===void 0?null:l;var p=f.memoizedState.inst;Bt!==null&&l!==null&&pd(l,Bt.memoizedState.deps)?f.memoizedState=El(r,p,a,l):(ut.flags|=t,f.memoizedState=El(1|r,p,a,l))}function oy(t,r){Jc(8390656,8,t,r)}function wd(t,r){Zc(2048,8,t,r)}function _1(t){ut.flags|=4;var r=ut.updateQueue;if(r===null)r=Qc(),ut.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function ly(t){var r=bn().memoizedState;return _1({ref:r,nextImpl:t}),function(){if((Mt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function uy(t,r){return Zc(4,2,t,r)}function cy(t,r){return Zc(4,4,t,r)}function hy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function fy(t,r,a){a=a!=null?a.concat([t]):null,Zc(4,4,hy.bind(null,r,t),a)}function Rd(){}function dy(t,r){var a=bn();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&pd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function my(t,r){var a=bn();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&pd(r,l[1]))return l[0];if(l=t(),Lo){gn(!0);try{t()}finally{gn(!1)}}return a.memoizedState=[l,r],l}function Cd(t,r,a){return a===void 0||(qs&1073741824)!==0&&(Et&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=pv(),ut.lanes|=t,za|=t,a)}function py(t,r,a,l){return ar(a,r)?a:yl.current!==null?(t=Cd(t,a,l),ar(t,r)||(On=!0),t):(qs&42)===0||(qs&1073741824)!==0&&(Et&261930)===0?(On=!0,t.memoizedState=a):(t=pv(),ut.lanes|=t,za|=t,r)}function gy(t,r,a,l,f){var p=Oe.p;Oe.p=p!==0&&8>p?p:8;var T=ue.T,R={};ue.T=R,Dd(t,!1,r,a);try{var L=f(),re=ue.S;if(re!==null&&re(R,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var he=m1(L,l);Tu(t,r,he,ci(t))}else Tu(t,r,l,ci(t))}catch(ge){Tu(t,r,{then:function(){},status:"rejected",reason:ge},ci())}finally{Oe.p=p,T!==null&&R.types!==null&&(T.types=R.types),ue.T=T}}function E1(){}function Id(t,r,a,l){if(t.tag!==5)throw Error(s(476));var f=yy(t).queue;gy(t,f,r,Be,a===null?E1:function(){return vy(t),a(l)})}function yy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:Be,baseState:Be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:Be},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function vy(t){var r=yy(t);r.next===null&&(r=t.alternate.memoizedState),Tu(t,r.next.queue,{},ci())}function Od(){return Xn(zu)}function _y(){return bn().memoizedState}function Ey(){return bn().memoizedState}function b1(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=ci();t=Ma(a);var l=ka(r,t,a);l!==null&&(Br(l,r,a),yu(l,r,a)),r={cache:id()},t.payload=r;return}r=r.return}}function T1(t,r,a){var l=ci();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Wc(t)?Ty(r,a):(a=wn(t,r,a,l),a!==null&&(Br(a,t,l),Sy(a,r,l)))}function by(t,r,a){var l=ci();Tu(t,r,a,l)}function Tu(t,r,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Wc(t))Ty(r,f);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var T=r.lastRenderedState,R=p(T,a);if(f.hasEagerState=!0,f.eagerState=R,ar(R,T))return We(t,r,f,0),Kt===null&&Hn(),!1}catch{}if(a=wn(t,r,f,l),a!==null)return Br(a,t,l),Sy(a,r,l),!0}return!1}function Dd(t,r,a,l){if(l={lane:2,revertLane:lm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Wc(t)){if(r)throw Error(s(479))}else r=wn(t,a,l,2),r!==null&&Br(r,t,2)}function Wc(t){var r=t.alternate;return t===ut||r!==null&&r===ut}function Ty(t,r){vl=Gc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Sy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,kt(t,a)}}var Su={readContext:Xn,use:$c,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useLayoutEffect:fn,useInsertionEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useSyncExternalStore:fn,useId:fn,useHostTransitionStatus:fn,useFormState:fn,useActionState:fn,useOptimistic:fn,useMemoCache:fn,useCacheRefresh:fn};Su.useEffectEvent=fn;var Ay={readContext:Xn,use:$c,useCallback:function(t,r){return vr().memoizedState=[t,r===void 0?null:r],t},useContext:Xn,useEffect:oy,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Jc(4194308,4,hy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Jc(4194308,4,t,r)},useInsertionEffect:function(t,r){Jc(4,2,t,r)},useMemo:function(t,r){var a=vr();r=r===void 0?null:r;var l=t();if(Lo){gn(!0);try{t()}finally{gn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=vr();if(a!==void 0){var f=a(r);if(Lo){gn(!0);try{a(r)}finally{gn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=T1.bind(null,ut,t),[l.memoizedState,t]},useRef:function(t){var r=vr();return t={current:t},r.memoizedState=t},useState:function(t){t=Sd(t);var r=t.queue,a=by.bind(null,ut,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Rd,useDeferredValue:function(t,r){var a=vr();return Cd(a,t,r)},useTransition:function(){var t=Sd(!1);return t=gy.bind(null,ut,t.queue,!0,!1),vr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=ut,f=vr();if(Ct){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),Kt===null)throw Error(s(349));(Et&127)!==0||Kg(l,r,a)}f.memoizedState=a;var p={value:a,getSnapshot:r};return f.queue=p,oy(Yg.bind(null,l,p,t),[t]),l.flags|=2048,El(9,{destroy:void 0},Gg.bind(null,l,p,a,r),null),a},useId:function(){var t=vr(),r=Kt.identifierPrefix;if(Ct){var a=fs,l=hs;a=(l&~(1<<32-Ne(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Yc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=p1++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Od,useFormState:ny,useActionState:ny,useOptimistic:function(t){var r=vr();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Dd.bind(null,ut,!0,a),a.dispatch=r,[t,r]},useMemoCache:Ed,useCacheRefresh:function(){return vr().memoizedState=b1.bind(null,ut)},useEffectEvent:function(t){var r=vr(),a={impl:t};return r.memoizedState=a,function(){if((Mt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},xd={readContext:Xn,use:$c,useCallback:dy,useContext:Xn,useEffect:wd,useImperativeHandle:fy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:my,useReducer:Xc,useRef:ay,useState:function(){return Xc(Hs)},useDebugValue:Rd,useDeferredValue:function(t,r){var a=bn();return py(a,Bt.memoizedState,t,r)},useTransition:function(){var t=Xc(Hs)[0],r=bn().memoizedState;return[typeof t=="boolean"?t:bu(t),r]},useSyncExternalStore:Fg,useId:_y,useHostTransitionStatus:Od,useFormState:ry,useActionState:ry,useOptimistic:function(t,r){var a=bn();return Xg(a,Bt,t,r)},useMemoCache:Ed,useCacheRefresh:Ey};xd.useEffectEvent=ly;var wy={readContext:Xn,use:$c,useCallback:dy,useContext:Xn,useEffect:wd,useImperativeHandle:fy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:my,useReducer:Td,useRef:ay,useState:function(){return Td(Hs)},useDebugValue:Rd,useDeferredValue:function(t,r){var a=bn();return Bt===null?Cd(a,t,r):py(a,Bt.memoizedState,t,r)},useTransition:function(){var t=Td(Hs)[0],r=bn().memoizedState;return[typeof t=="boolean"?t:bu(t),r]},useSyncExternalStore:Fg,useId:_y,useHostTransitionStatus:Od,useFormState:sy,useActionState:sy,useOptimistic:function(t,r){var a=bn();return Bt!==null?Xg(a,Bt,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Ed,useCacheRefresh:Ey};wy.useEffectEvent=ly;function Nd(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:O({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Md={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=ci(),f=Ma(l);f.payload=r,a!=null&&(f.callback=a),r=ka(t,f,l),r!==null&&(Br(r,t,l),yu(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=ci(),f=Ma(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=ka(t,f,l),r!==null&&(Br(r,t,l),yu(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=ci(),l=Ma(a);l.tag=2,r!=null&&(l.callback=r),r=ka(t,l,a),r!==null&&(Br(r,t,a),yu(r,t,a))}};function Ry(t,r,a,l,f,p,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,p,T):r.prototype&&r.prototype.isPureReactComponent?!h(a,l)||!h(f,p):!0}function Cy(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&Md.enqueueReplaceState(r,r.state,null)}function Uo(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=O({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function Iy(t){Ve(t)}function Oy(t){console.error(t)}function Dy(t){Ve(t)}function eh(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function xy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function kd(t,r,a){return a=Ma(a),a.tag=3,a.payload={element:null},a.callback=function(){eh(t,r)},a}function Ny(t){return t=Ma(t),t.tag=3,t}function My(t,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=l.value;t.payload=function(){return f(p)},t.callback=function(){xy(r,a,l)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){xy(r,a,l),typeof f!="function"&&(ja===null?ja=new Set([this]):ja.add(this));var R=l.stack;this.componentDidCatch(l.value,{componentStack:R!==null?R:""})})}function S1(t,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&fl(r,a,f,!0),a=ai.current,a!==null){switch(a.tag){case 31:case 13:return Oi===null?fh():a.alternate===null&&dn===0&&(dn=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Bc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),sm(t,l,f)),!1;case 22:return a.flags|=65536,l===Bc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),sm(t,l,f)),!1}throw Error(s(435,a.tag))}return sm(t,l,f),fh(),!1}if(Ct)return r=ai.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==Wf&&(t=Error(s(422),{cause:l}),fu(wi(t,a)))):(l!==Wf&&(r=Error(s(423),{cause:l}),fu(wi(r,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=wi(l,a),f=kd(t.stateNode,l,f),cd(t,f),dn!==4&&(dn=2)),!1;var p=Error(s(520),{cause:l});if(p=wi(p,a),xu===null?xu=[p]:xu.push(p),dn!==4&&(dn=2),r===null)return!0;l=wi(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=kd(a.stateNode,l,t),cd(a,t),!1;case 1:if(r=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ja===null||!ja.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Ny(f),My(f,t,a,l),cd(a,f),!1}a=a.return}while(a!==null);return!1}var Vd=Error(s(461)),On=!1;function Jn(t,r,a,l){r.child=t===null?Lg(r,null,a,l):Po(r,t.child,a,l)}function ky(t,r,a,l,f){a=a.render;var p=r.ref;if("ref"in l){var T={};for(var R in l)R!=="ref"&&(T[R]=l[R])}else T=l;return No(r),l=gd(t,r,a,T,p,f),R=yd(),t!==null&&!On?(vd(t,r,f),Fs(t,r,f)):(Ct&&R&&Jf(r),r.flags|=1,Jn(t,r,l,f),r.child)}function Vy(t,r,a,l,f){if(t===null){var p=a.type;return typeof p=="function"&&!Qf(p)&&p.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=p,Py(t,r,p,l,f)):(t=Vc(a.type,null,l,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,!Hd(t,f)){var T=p.memoizedProps;if(a=a.compare,a=a!==null?a:h,a(T,l)&&t.ref===r.ref)return Fs(t,r,f)}return r.flags|=1,t=Us(p,l),t.ref=r.ref,t.return=r,r.child=t}function Py(t,r,a,l,f){if(t!==null){var p=t.memoizedProps;if(h(p,l)&&t.ref===r.ref)if(On=!1,r.pendingProps=l=p,Hd(t,f))(t.flags&131072)!==0&&(On=!0);else return r.lanes=t.lanes,Fs(t,r,f)}return Pd(t,r,a,l,f)}function Ly(t,r,a,l){var f=l.children,p=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(p=p!==null?p.baseLanes|a:a,t!==null){for(l=r.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~p}else l=0,r.child=null;return Uy(t,r,p,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&zc(r,p!==null?p.cachePool:null),p!==null?jg(r,p):fd(),Bg(r);else return l=r.lanes=536870912,Uy(t,r,p!==null?p.baseLanes|a:a,a,l)}else p!==null?(zc(r,p.cachePool),jg(r,p),Pa(),r.memoizedState=null):(t!==null&&zc(r,null),fd(),Pa());return Jn(t,r,f,a),r.child}function Au(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Uy(t,r,a,l,f){var p=ad();return p=p===null?null:{parent:Cn._currentValue,pool:p},r.memoizedState={baseLanes:a,cachePool:p},t!==null&&zc(r,null),fd(),Bg(r),t!==null&&fl(t,r,l,!0),r.childLanes=f,null}function th(t,r){return r=rh({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function zy(t,r,a){return Po(r,t.child,null,a),t=th(r,r.pendingProps),t.flags|=2,oi(r),r.memoizedState=null,t}function A1(t,r,a){var l=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Ct){if(l.mode==="hidden")return t=th(r,l),r.lanes=536870912,Au(null,t);if(md(r),(t=Qt)?(t=Jv(t,Ii),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ia!==null?{id:hs,overflow:fs}:null,retryLane:536870912,hydrationErrors:null},a=Tg(t),a.return=r,r.child=a,$n=r,Qt=null)):t=null,t===null)throw Da(r);return r.lanes=536870912,null}return th(r,l)}var p=t.memoizedState;if(p!==null){var T=p.dehydrated;if(md(r),f)if(r.flags&256)r.flags&=-257,r=zy(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(s(558));else if(On||fl(t,r,a,!1),f=(a&t.childLanes)!==0,On||f){if(l=Kt,l!==null&&(T=Jt(l,a),T!==0&&T!==p.retryLane))throw p.retryLane=T,Zt(t,T),Br(l,t,T),Vd;fh(),r=zy(t,r,a)}else t=p.treeContext,Qt=Di(T.nextSibling),$n=r,Ct=!0,Oa=null,Ii=!1,t!==null&&wg(r,t),r=th(r,l),r.flags|=4096;return r}return t=Us(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function nh(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Pd(t,r,a,l,f){return No(r),a=gd(t,r,a,l,void 0,f),l=yd(),t!==null&&!On?(vd(t,r,f),Fs(t,r,f)):(Ct&&l&&Jf(r),r.flags|=1,Jn(t,r,a,f),r.child)}function jy(t,r,a,l,f,p){return No(r),r.updateQueue=null,a=Hg(r,l,a,f),qg(t),l=yd(),t!==null&&!On?(vd(t,r,p),Fs(t,r,p)):(Ct&&l&&Jf(r),r.flags|=1,Jn(t,r,a,p),r.child)}function By(t,r,a,l,f){if(No(r),r.stateNode===null){var p=Pr,T=a.contextType;typeof T=="object"&&T!==null&&(p=Xn(T)),p=new a(l,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Md,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=l,p.state=r.memoizedState,p.refs={},ld(r),T=a.contextType,p.context=typeof T=="object"&&T!==null?Xn(T):Pr,p.state=r.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(Nd(r,a,T,l),p.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&Md.enqueueReplaceState(p,p.state,null),_u(r,l,p,f),vu(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){p=r.stateNode;var R=r.memoizedProps,L=Uo(a,R);p.props=L;var re=p.context,he=a.contextType;T=Pr,typeof he=="object"&&he!==null&&(T=Xn(he));var ge=a.getDerivedStateFromProps;he=typeof ge=="function"||typeof p.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,he||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(R||re!==T)&&Cy(r,p,l,T),Na=!1;var se=r.memoizedState;p.state=se,_u(r,l,p,f),vu(),re=r.memoizedState,R||se!==re||Na?(typeof ge=="function"&&(Nd(r,a,ge,l),re=r.memoizedState),(L=Na||Ry(r,a,L,l,se,re,T))?(he||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=re),p.props=l,p.state=re,p.context=T,l=L):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{p=r.stateNode,ud(t,r),T=r.memoizedProps,he=Uo(a,T),p.props=he,ge=r.pendingProps,se=p.context,re=a.contextType,L=Pr,typeof re=="object"&&re!==null&&(L=Xn(re)),R=a.getDerivedStateFromProps,(re=typeof R=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==ge||se!==L)&&Cy(r,p,l,L),Na=!1,se=r.memoizedState,p.state=se,_u(r,l,p,f),vu();var le=r.memoizedState;T!==ge||se!==le||Na||t!==null&&t.dependencies!==null&&Lc(t.dependencies)?(typeof R=="function"&&(Nd(r,a,R,l),le=r.memoizedState),(he=Na||Ry(r,a,he,l,se,le,L)||t!==null&&t.dependencies!==null&&Lc(t.dependencies))?(re||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,le,L),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,le,L)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===t.memoizedProps&&se===t.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&se===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=le),p.props=l,p.state=le,p.context=L,l=he):(typeof p.componentDidUpdate!="function"||T===t.memoizedProps&&se===t.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&se===t.memoizedState||(r.flags|=1024),l=!1)}return p=l,nh(t,r),l=(r.flags&128)!==0,p||l?(p=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,t!==null&&l?(r.child=Po(r,t.child,null,f),r.child=Po(r,null,a,f)):Jn(t,r,a,f),r.memoizedState=p.state,t=r.child):t=Fs(t,r,f),t}function qy(t,r,a,l){return Do(),r.flags|=256,Jn(t,r,a,l),r.child}var Ld={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ud(t){return{baseLanes:t,cachePool:xg()}}function zd(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=ui),t}function Hy(t,r,a){var l=r.pendingProps,f=!1,p=(r.flags&128)!==0,T;if((T=p)||(T=t!==null&&t.memoizedState===null?!1:(En.current&2)!==0),T&&(f=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,t===null){if(Ct){if(f?Va(r):Pa(),(t=Qt)?(t=Jv(t,Ii),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ia!==null?{id:hs,overflow:fs}:null,retryLane:536870912,hydrationErrors:null},a=Tg(t),a.return=r,r.child=a,$n=r,Qt=null)):t=null,t===null)throw Da(r);return bm(t)?r.lanes=32:r.lanes=536870912,null}var R=l.children;return l=l.fallback,f?(Pa(),f=r.mode,R=rh({mode:"hidden",children:R},f),l=Oo(l,f,a,null),R.return=r,l.return=r,R.sibling=l,r.child=R,l=r.child,l.memoizedState=Ud(a),l.childLanes=zd(t,T,a),r.memoizedState=Ld,Au(null,l)):(Va(r),jd(r,R))}var L=t.memoizedState;if(L!==null&&(R=L.dehydrated,R!==null)){if(p)r.flags&256?(Va(r),r.flags&=-257,r=Bd(t,r,a)):r.memoizedState!==null?(Pa(),r.child=t.child,r.flags|=128,r=null):(Pa(),R=l.fallback,f=r.mode,l=rh({mode:"visible",children:l.children},f),R=Oo(R,f,a,null),R.flags|=2,l.return=r,R.return=r,l.sibling=R,r.child=l,Po(r,t.child,null,a),l=r.child,l.memoizedState=Ud(a),l.childLanes=zd(t,T,a),r.memoizedState=Ld,r=Au(null,l));else if(Va(r),bm(R)){if(T=R.nextSibling&&R.nextSibling.dataset,T)var re=T.dgst;T=re,l=Error(s(419)),l.stack="",l.digest=T,fu({value:l,source:null,stack:null}),r=Bd(t,r,a)}else if(On||fl(t,r,a,!1),T=(a&t.childLanes)!==0,On||T){if(T=Kt,T!==null&&(l=Jt(T,a),l!==0&&l!==L.retryLane))throw L.retryLane=l,Zt(t,l),Br(T,t,l),Vd;Em(R)||fh(),r=Bd(t,r,a)}else Em(R)?(r.flags|=192,r.child=t.child,r=null):(t=L.treeContext,Qt=Di(R.nextSibling),$n=r,Ct=!0,Oa=null,Ii=!1,t!==null&&wg(r,t),r=jd(r,l.children),r.flags|=4096);return r}return f?(Pa(),R=l.fallback,f=r.mode,L=t.child,re=L.sibling,l=Us(L,{mode:"hidden",children:l.children}),l.subtreeFlags=L.subtreeFlags&65011712,re!==null?R=Us(re,R):(R=Oo(R,f,a,null),R.flags|=2),R.return=r,l.return=r,l.sibling=R,r.child=l,Au(null,l),l=r.child,R=t.child.memoizedState,R===null?R=Ud(a):(f=R.cachePool,f!==null?(L=Cn._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=xg(),R={baseLanes:R.baseLanes|a,cachePool:f}),l.memoizedState=R,l.childLanes=zd(t,T,a),r.memoizedState=Ld,Au(t.child,l)):(Va(r),a=t.child,t=a.sibling,a=Us(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(T=r.deletions,T===null?(r.deletions=[t],r.flags|=16):T.push(t)),r.child=a,r.memoizedState=null,a)}function jd(t,r){return r=rh({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function rh(t,r){return t=si(22,t,null,r),t.lanes=0,t}function Bd(t,r,a){return Po(r,t.child,null,a),t=jd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Fy(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),nd(t.return,r,a)}function qd(t,r,a,l,f,p){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:p}:(T.isBackwards=r,T.rendering=null,T.renderingStartTime=0,T.last=l,T.tail=a,T.tailMode=f,T.treeForkCount=p)}function Ky(t,r,a){var l=r.pendingProps,f=l.revealOrder,p=l.tail;l=l.children;var T=En.current,R=(T&2)!==0;if(R?(T=T&1|2,r.flags|=128):T&=1,we(En,T),Jn(t,r,l,a),l=Ct?hu:0,!R&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fy(t,a,r);else if(t.tag===19)Fy(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=r.child,f=null;a!==null;)t=a.alternate,t!==null&&Kc(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),qd(r,!1,f,a,p,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&Kc(t)===null){r.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}qd(r,!0,a,null,p,l);break;case"together":qd(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function Fs(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),za|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(fl(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=Us(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Us(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Hd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Lc(t)))}function w1(t,r,a){switch(r.tag){case 3:mn(r,r.stateNode.containerInfo),xa(r,Cn,t.memoizedState.cache),Do();break;case 27:case 5:es(r);break;case 4:mn(r,r.stateNode.containerInfo);break;case 10:xa(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,md(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Va(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Hy(t,r,a):(Va(r),t=Fs(t,r,a),t!==null?t.sibling:null);Va(r);break;case 19:var f=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(fl(t,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return Ky(t,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),we(En,En.current),l)break;return null;case 22:return r.lanes=0,Ly(t,r,a,r.pendingProps);case 24:xa(r,Cn,t.memoizedState.cache)}return Fs(t,r,a)}function Gy(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)On=!0;else{if(!Hd(t,a)&&(r.flags&128)===0)return On=!1,w1(t,r,a);On=(t.flags&131072)!==0}else On=!1,Ct&&(r.flags&1048576)!==0&&Ag(r,hu,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=ko(r.elementType),r.type=t,typeof t=="function")Qf(t)?(l=Uo(t,l),r.tag=1,r=By(null,r,t,l,a)):(r.tag=0,r=Pd(null,r,t,l,a));else{if(t!=null){var f=t.$$typeof;if(f===ct){r.tag=11,r=ky(null,r,t,l,a);break e}else if(f===V){r.tag=14,r=Vy(null,r,t,l,a);break e}}throw r=dt(t)||t,Error(s(306,r,""))}}return r;case 0:return Pd(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=Uo(l,r.pendingProps),By(t,r,l,f,a);case 3:e:{if(mn(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var p=r.memoizedState;f=p.element,ud(t,r),_u(r,l,null,a);var T=r.memoizedState;if(l=T.cache,xa(r,Cn,l),l!==p.cache&&rd(r,[Cn],a,!0),vu(),l=T.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=qy(t,r,l,a);break e}else if(l!==f){f=wi(Error(s(424)),r),fu(f),r=qy(t,r,l,a);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Qt=Di(t.firstChild),$n=r,Ct=!0,Oa=null,Ii=!0,a=Lg(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Do(),l===f){r=Fs(t,r,a);break e}Jn(t,r,l,a)}r=r.child}return r;case 26:return nh(t,r),t===null?(a=r_(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ct||(a=r.type,t=r.pendingProps,l=_h(Ze.current).createElement(a),l[Pt]=r,l[Gt]=t,Zn(l,a,t),nn(l),r.stateNode=l):r.memoizedState=r_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return es(r),t===null&&Ct&&(l=r.stateNode=e_(r.type,r.pendingProps,Ze.current),$n=r,Ii=!0,f=Qt,Fa(r.type)?(Tm=f,Qt=Di(l.firstChild)):Qt=f),Jn(t,r,r.pendingProps.children,a),nh(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Ct&&((f=l=Qt)&&(l=tS(l,r.type,r.pendingProps,Ii),l!==null?(r.stateNode=l,$n=r,Qt=Di(l.firstChild),Ii=!1,f=!0):f=!1),f||Da(r)),es(r),f=r.type,p=r.pendingProps,T=t!==null?t.memoizedProps:null,l=p.children,ym(f,p)?l=null:T!==null&&ym(f,T)&&(r.flags|=32),r.memoizedState!==null&&(f=gd(t,r,g1,null,null,a),zu._currentValue=f),nh(t,r),Jn(t,r,l,a),r.child;case 6:return t===null&&Ct&&((t=a=Qt)&&(a=nS(a,r.pendingProps,Ii),a!==null?(r.stateNode=a,$n=r,Qt=null,t=!0):t=!1),t||Da(r)),null;case 13:return Hy(t,r,a);case 4:return mn(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Po(r,null,l,a):Jn(t,r,l,a),r.child;case 11:return ky(t,r,r.type,r.pendingProps,a);case 7:return Jn(t,r,r.pendingProps,a),r.child;case 8:return Jn(t,r,r.pendingProps.children,a),r.child;case 12:return Jn(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,xa(r,r.type,l.value),Jn(t,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,No(r),f=Xn(f),l=l(f),r.flags|=1,Jn(t,r,l,a),r.child;case 14:return Vy(t,r,r.type,r.pendingProps,a);case 15:return Py(t,r,r.type,r.pendingProps,a);case 19:return Ky(t,r,a);case 31:return A1(t,r,a);case 22:return Ly(t,r,a,r.pendingProps);case 24:return No(r),l=Xn(Cn),t===null?(f=ad(),f===null&&(f=Kt,p=id(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),r.memoizedState={parent:l,cache:f},ld(r),xa(r,Cn,f)):((t.lanes&a)!==0&&(ud(t,r),_u(r,null,null,a),vu()),f=t.memoizedState,p=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),xa(r,Cn,l)):(l=p.cache,xa(r,Cn,l),l!==f.cache&&rd(r,[Cn],a,!0))),Jn(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Ks(t){t.flags|=4}function Fd(t,r,a,l,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(_v())t.flags|=8192;else throw Vo=Bc,od}else t.flags&=-16777217}function Yy(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!l_(r))if(_v())t.flags|=8192;else throw Vo=Bc,od}function ih(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?rl():536870912,t.lanes|=r,Al|=r)}function wu(t,r){if(!Ct)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function $t(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function R1(t,r,a){var l=r.pendingProps;switch(Zf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(r),null;case 1:return $t(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Bs(Cn),Me(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(hl(r)?Ks(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ed())),$t(r),null;case 26:var f=r.type,p=r.memoizedState;return t===null?(Ks(r),p!==null?($t(r),Yy(r,p)):($t(r),Fd(r,f,null,l,a))):p?p!==t.memoizedState?(Ks(r),$t(r),Yy(r,p)):($t(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&Ks(r),$t(r),Fd(r,f,t,l,a)),null;case 27:if(Pi(r),a=Ze.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Ks(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return $t(r),null}t=Pe.current,hl(r)?Rg(r):(t=e_(f,l,a),r.stateNode=t,Ks(r))}return $t(r),null;case 5:if(Pi(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Ks(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return $t(r),null}if(p=Pe.current,hl(r))Rg(r);else{var T=_h(Ze.current);switch(p){case 1:p=T.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=T.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=T.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?T.createElement("select",{is:l.is}):T.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?T.createElement(f,{is:l.is}):T.createElement(f)}}p[Pt]=r,p[Gt]=l;e:for(T=r.child;T!==null;){if(T.tag===5||T.tag===6)p.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===r)break e;for(;T.sibling===null;){if(T.return===null||T.return===r)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}r.stateNode=p;e:switch(Zn(p,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ks(r)}}return $t(r),Fd(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Ks(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=Ze.current,hl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,f=$n,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[Pt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Hv(t.nodeValue,a)),t||Da(r,!0)}else t=_h(t).createTextNode(l),t[Pt]=r,r.stateNode=t}return $t(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=hl(r),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Pt]=r}else Do(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;$t(r),t=!1}else a=ed(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(oi(r),r):(oi(r),null);if((r.flags&128)!==0)throw Error(s(558))}return $t(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=hl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Pt]=r}else Do(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;$t(r),f=!1}else f=ed(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(oi(r),r):(oi(r),null)}return oi(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),ih(r,r.updateQueue),$t(r),null);case 4:return Me(),t===null&&fm(r.stateNode.containerInfo),$t(r),null;case 10:return Bs(r.type),$t(r),null;case 19:if(de(En),l=r.memoizedState,l===null)return $t(r),null;if(f=(r.flags&128)!==0,p=l.rendering,p===null)if(f)wu(l,!1);else{if(dn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(p=Kc(t),p!==null){for(r.flags|=128,wu(l,!1),t=p.updateQueue,r.updateQueue=t,ih(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)bg(a,t),a=a.sibling;return we(En,En.current&1|2),Ct&&zs(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&zn()>uh&&(r.flags|=128,f=!0,wu(l,!1),r.lanes=4194304)}else{if(!f)if(t=Kc(p),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,ih(r,t),wu(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!Ct)return $t(r),null}else 2*zn()-l.renderingStartTime>uh&&a!==536870912&&(r.flags|=128,f=!0,wu(l,!1),r.lanes=4194304);l.isBackwards?(p.sibling=r.child,r.child=p):(t=l.last,t!==null?t.sibling=p:r.child=p,l.last=p)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=zn(),t.sibling=null,a=En.current,we(En,f?a&1|2:a&1),Ct&&zs(r,l.treeForkCount),t):($t(r),null);case 22:case 23:return oi(r),dd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&($t(r),r.subtreeFlags&6&&(r.flags|=8192)):$t(r),a=r.updateQueue,a!==null&&ih(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&de(Mo),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Bs(Cn),$t(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function C1(t,r){switch(Zf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Bs(Cn),Me(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Pi(r),null;case 31:if(r.memoizedState!==null){if(oi(r),r.alternate===null)throw Error(s(340));Do()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(oi(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Do()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return de(En),null;case 4:return Me(),null;case 10:return Bs(r.type),null;case 22:case 23:return oi(r),dd(),t!==null&&de(Mo),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Bs(Cn),null;case 25:return null;default:return null}}function Qy(t,r){switch(Zf(r),r.tag){case 3:Bs(Cn),Me();break;case 26:case 27:case 5:Pi(r);break;case 4:Me();break;case 31:r.memoizedState!==null&&oi(r);break;case 13:oi(r);break;case 19:de(En);break;case 10:Bs(r.type);break;case 22:case 23:oi(r),dd(),t!==null&&de(Mo);break;case 24:Bs(Cn)}}function Ru(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var p=a.create,T=a.inst;l=p(),T.destroy=l}a=a.next}while(a!==f)}}catch(R){jt(r,r.return,R)}}function La(t,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var p=f.next;l=p;do{if((l.tag&t)===t){var T=l.inst,R=T.destroy;if(R!==void 0){T.destroy=void 0,f=r;var L=a,re=R;try{re()}catch(he){jt(f,L,he)}}}l=l.next}while(l!==p)}}catch(he){jt(r,r.return,he)}}function $y(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{zg(r,a)}catch(l){jt(t,t.return,l)}}}function Xy(t,r,a){a.props=Uo(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){jt(t,r,l)}}function Cu(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){jt(t,r,f)}}function ds(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){jt(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){jt(t,r,f)}else a.current=null}function Jy(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){jt(t,t.return,f)}}function Kd(t,r,a){try{var l=t.stateNode;$1(l,t.type,a,r),l[Gt]=r}catch(f){jt(t,t.return,f)}}function Zy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Fa(t.type)||t.tag===4}function Gd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Fa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yd(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=sr));else if(l!==4&&(l===27&&Fa(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Yd(t,r,a),t=t.sibling;t!==null;)Yd(t,r,a),t=t.sibling}function sh(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Fa(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(sh(t,r,a),t=t.sibling;t!==null;)sh(t,r,a),t=t.sibling}function Wy(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Zn(r,l,a),r[Pt]=t,r[Gt]=a}catch(p){jt(t,t.return,p)}}var Gs=!1,Dn=!1,Qd=!1,ev=typeof WeakSet=="function"?WeakSet:Set,Fn=null;function I1(t,r){if(t=t.containerInfo,pm=Rh,t=A(t),w(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var T=0,R=-1,L=-1,re=0,he=0,ge=t,se=null;t:for(;;){for(var le;ge!==a||f!==0&&ge.nodeType!==3||(R=T+f),ge!==p||l!==0&&ge.nodeType!==3||(L=T+l),ge.nodeType===3&&(T+=ge.nodeValue.length),(le=ge.firstChild)!==null;)se=ge,ge=le;for(;;){if(ge===t)break t;if(se===a&&++re===f&&(R=T),se===p&&++he===l&&(L=T),(le=ge.nextSibling)!==null)break;ge=se,se=ge.parentNode}ge=le}a=R===-1||L===-1?null:{start:R,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(gm={focusedElem:t,selectionRange:a},Rh=!1,Fn=r;Fn!==null;)if(r=Fn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Fn=t;else for(;Fn!==null;){switch(r=Fn,p=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,a=r,f=p.memoizedProps,p=p.memoizedState,l=a.stateNode;try{var ze=Uo(a.type,f);t=l.getSnapshotBeforeUpdate(ze,p),l.__reactInternalSnapshotBeforeUpdate=t}catch(Xe){jt(a,a.return,Xe)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)_m(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":_m(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Fn=t;break}Fn=r.return}}function tv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Qs(t,a),l&4&&Ru(5,a);break;case 1:if(Qs(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(T){jt(a,a.return,T)}else{var f=Uo(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(T){jt(a,a.return,T)}}l&64&&$y(a),l&512&&Cu(a,a.return);break;case 3:if(Qs(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{zg(t,r)}catch(T){jt(a,a.return,T)}}break;case 27:r===null&&l&4&&Wy(a);case 26:case 5:Qs(t,a),r===null&&l&4&&Jy(a),l&512&&Cu(a,a.return);break;case 12:Qs(t,a);break;case 31:Qs(t,a),l&4&&iv(t,a);break;case 13:Qs(t,a),l&4&&sv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=L1.bind(null,a),rS(t,a))));break;case 22:if(l=a.memoizedState!==null||Gs,!l){r=r!==null&&r.memoizedState!==null||Dn,f=Gs;var p=Dn;Gs=l,(Dn=r)&&!p?$s(t,a,(a.subtreeFlags&8772)!==0):Qs(t,a),Gs=f,Dn=p}break;case 30:break;default:Qs(t,a)}}function nv(t){var r=t.alternate;r!==null&&(t.alternate=null,nv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ds(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Wt=null,Lr=!1;function Ys(t,r,a){for(a=a.child;a!==null;)rv(t,r,a),a=a.sibling}function rv(t,r,a){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(nr,a)}catch{}switch(a.tag){case 26:Dn||ds(a,r),Ys(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Dn||ds(a,r);var l=Wt,f=Lr;Fa(a.type)&&(Wt=a.stateNode,Lr=!1),Ys(t,r,a),Pu(a.stateNode),Wt=l,Lr=f;break;case 5:Dn||ds(a,r);case 6:if(l=Wt,f=Lr,Wt=null,Ys(t,r,a),Wt=l,Lr=f,Wt!==null)if(Lr)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(a.stateNode)}catch(p){jt(a,r,p)}else try{Wt.removeChild(a.stateNode)}catch(p){jt(a,r,p)}break;case 18:Wt!==null&&(Lr?(t=Wt,$v(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Nl(t)):$v(Wt,a.stateNode));break;case 4:l=Wt,f=Lr,Wt=a.stateNode.containerInfo,Lr=!0,Ys(t,r,a),Wt=l,Lr=f;break;case 0:case 11:case 14:case 15:La(2,a,r),Dn||La(4,a,r),Ys(t,r,a);break;case 1:Dn||(ds(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Xy(a,r,l)),Ys(t,r,a);break;case 21:Ys(t,r,a);break;case 22:Dn=(l=Dn)||a.memoizedState!==null,Ys(t,r,a),Dn=l;break;default:Ys(t,r,a)}}function iv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Nl(t)}catch(a){jt(r,r.return,a)}}}function sv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Nl(t)}catch(a){jt(r,r.return,a)}}function O1(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new ev),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new ev),r;default:throw Error(s(435,t.tag))}}function ah(t,r){var a=O1(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var f=U1.bind(null,t,l);l.then(f,f)}})}function Ur(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],p=t,T=r,R=T;e:for(;R!==null;){switch(R.tag){case 27:if(Fa(R.type)){Wt=R.stateNode,Lr=!1;break e}break;case 5:Wt=R.stateNode,Lr=!1;break e;case 3:case 4:Wt=R.stateNode.containerInfo,Lr=!0;break e}R=R.return}if(Wt===null)throw Error(s(160));rv(p,T,f),Wt=null,Lr=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)av(r,t),r=r.sibling}var Gi=null;function av(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ur(r,t),zr(t),l&4&&(La(3,t,t.return),Ru(3,t),La(5,t,t.return));break;case 1:Ur(r,t),zr(t),l&512&&(Dn||a===null||ds(a,a.return)),l&64&&Gs&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Gi;if(Ur(r,t),zr(t),l&512&&(Dn||a===null||ds(a,a.return)),l&4){var p=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":p=f.getElementsByTagName("title")[0],(!p||p[jn]||p[Pt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(l),f.head.insertBefore(p,f.querySelector("head > title"))),Zn(p,l,a),p[Pt]=t,nn(p),l=p;break e;case"link":var T=a_("link","href",f).get(l+(a.href||""));if(T){for(var R=0;R<T.length;R++)if(p=T[R],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(R,1);break t}}p=f.createElement(l),Zn(p,l,a),f.head.appendChild(p);break;case"meta":if(T=a_("meta","content",f).get(l+(a.content||""))){for(R=0;R<T.length;R++)if(p=T[R],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(R,1);break t}}p=f.createElement(l),Zn(p,l,a),f.head.appendChild(p);break;default:throw Error(s(468,l))}p[Pt]=t,nn(p),l=p}t.stateNode=l}else o_(f,t.type,t.stateNode);else t.stateNode=s_(f,l,t.memoizedProps);else p!==l?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,l===null?o_(f,t.type,t.stateNode):s_(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Kd(t,t.memoizedProps,a.memoizedProps)}break;case 27:Ur(r,t),zr(t),l&512&&(Dn||a===null||ds(a,a.return)),a!==null&&l&4&&Kd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Ur(r,t),zr(t),l&512&&(Dn||a===null||ds(a,a.return)),t.flags&32){f=t.stateNode;try{Qn(f,"")}catch(ze){jt(t,t.return,ze)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Kd(t,f,a!==null?a.memoizedProps:f)),l&1024&&(Qd=!0);break;case 6:if(Ur(r,t),zr(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ze){jt(t,t.return,ze)}}break;case 3:if(Th=null,f=Gi,Gi=Eh(r.containerInfo),Ur(r,t),Gi=f,zr(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Nl(r.containerInfo)}catch(ze){jt(t,t.return,ze)}Qd&&(Qd=!1,ov(t));break;case 4:l=Gi,Gi=Eh(t.stateNode.containerInfo),Ur(r,t),zr(t),Gi=l;break;case 12:Ur(r,t),zr(t);break;case 31:Ur(r,t),zr(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ah(t,l)));break;case 13:Ur(r,t),zr(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(lh=zn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ah(t,l)));break;case 22:f=t.memoizedState!==null;var L=a!==null&&a.memoizedState!==null,re=Gs,he=Dn;if(Gs=re||f,Dn=he||L,Ur(r,t),Dn=he,Gs=re,zr(t),l&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||L||Gs||Dn||zo(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){L=a=r;try{if(p=L.stateNode,f)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{R=L.stateNode;var ge=L.memoizedProps.style,se=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;R.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(ze){jt(L,L.return,ze)}}}else if(r.tag===6){if(a===null){L=r;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(ze){jt(L,L.return,ze)}}}else if(r.tag===18){if(a===null){L=r;try{var le=L.stateNode;f?Xv(le,!0):Xv(L.stateNode,!1)}catch(ze){jt(L,L.return,ze)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ah(t,a))));break;case 19:Ur(r,t),zr(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ah(t,l)));break;case 30:break;case 21:break;default:Ur(r,t),zr(t)}}function zr(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Zy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,p=Gd(t);sh(t,p,f);break;case 5:var T=a.stateNode;a.flags&32&&(Qn(T,""),a.flags&=-33);var R=Gd(t);sh(t,R,T);break;case 3:case 4:var L=a.stateNode.containerInfo,re=Gd(t);Yd(t,re,L);break;default:throw Error(s(161))}}catch(he){jt(t,t.return,he)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function ov(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;ov(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Qs(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)tv(t,r.alternate,r),r=r.sibling}function zo(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:La(4,r,r.return),zo(r);break;case 1:ds(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Xy(r,r.return,a),zo(r);break;case 27:Pu(r.stateNode);case 26:case 5:ds(r,r.return),zo(r);break;case 22:r.memoizedState===null&&zo(r);break;case 30:zo(r);break;default:zo(r)}t=t.sibling}}function $s(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=t,p=r,T=p.flags;switch(p.tag){case 0:case 11:case 15:$s(f,p,a),Ru(4,p);break;case 1:if($s(f,p,a),l=p,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(re){jt(l,l.return,re)}if(l=p,f=l.updateQueue,f!==null){var R=l.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)Ug(L[f],R)}catch(re){jt(l,l.return,re)}}a&&T&64&&$y(p),Cu(p,p.return);break;case 27:Wy(p);case 26:case 5:$s(f,p,a),a&&l===null&&T&4&&Jy(p),Cu(p,p.return);break;case 12:$s(f,p,a);break;case 31:$s(f,p,a),a&&T&4&&iv(f,p);break;case 13:$s(f,p,a),a&&T&4&&sv(f,p);break;case 22:p.memoizedState===null&&$s(f,p,a),Cu(p,p.return);break;case 30:break;default:$s(f,p,a)}r=r.sibling}}function $d(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&du(a))}function Xd(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&du(t))}function Yi(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)lv(t,r,a,l),r=r.sibling}function lv(t,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Yi(t,r,a,l),f&2048&&Ru(9,r);break;case 1:Yi(t,r,a,l);break;case 3:Yi(t,r,a,l),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&du(t)));break;case 12:if(f&2048){Yi(t,r,a,l),t=r.stateNode;try{var p=r.memoizedProps,T=p.id,R=p.onPostCommit;typeof R=="function"&&R(T,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(L){jt(r,r.return,L)}}else Yi(t,r,a,l);break;case 31:Yi(t,r,a,l);break;case 13:Yi(t,r,a,l);break;case 23:break;case 22:p=r.stateNode,T=r.alternate,r.memoizedState!==null?p._visibility&2?Yi(t,r,a,l):Iu(t,r):p._visibility&2?Yi(t,r,a,l):(p._visibility|=2,bl(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),f&2048&&$d(T,r);break;case 24:Yi(t,r,a,l),f&2048&&Xd(r.alternate,r);break;default:Yi(t,r,a,l)}}function bl(t,r,a,l,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var p=t,T=r,R=a,L=l,re=T.flags;switch(T.tag){case 0:case 11:case 15:bl(p,T,R,L,f),Ru(8,T);break;case 23:break;case 22:var he=T.stateNode;T.memoizedState!==null?he._visibility&2?bl(p,T,R,L,f):Iu(p,T):(he._visibility|=2,bl(p,T,R,L,f)),f&&re&2048&&$d(T.alternate,T);break;case 24:bl(p,T,R,L,f),f&&re&2048&&Xd(T.alternate,T);break;default:bl(p,T,R,L,f)}r=r.sibling}}function Iu(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,f=l.flags;switch(l.tag){case 22:Iu(a,l),f&2048&&$d(l.alternate,l);break;case 24:Iu(a,l),f&2048&&Xd(l.alternate,l);break;default:Iu(a,l)}r=r.sibling}}var Ou=8192;function Tl(t,r,a){if(t.subtreeFlags&Ou)for(t=t.child;t!==null;)uv(t,r,a),t=t.sibling}function uv(t,r,a){switch(t.tag){case 26:Tl(t,r,a),t.flags&Ou&&t.memoizedState!==null&&pS(a,Gi,t.memoizedState,t.memoizedProps);break;case 5:Tl(t,r,a);break;case 3:case 4:var l=Gi;Gi=Eh(t.stateNode.containerInfo),Tl(t,r,a),Gi=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Ou,Ou=16777216,Tl(t,r,a),Ou=l):Tl(t,r,a));break;default:Tl(t,r,a)}}function cv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Du(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Fn=l,fv(l,t)}cv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)hv(t),t=t.sibling}function hv(t){switch(t.tag){case 0:case 11:case 15:Du(t),t.flags&2048&&La(9,t,t.return);break;case 3:Du(t);break;case 12:Du(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,oh(t)):Du(t);break;default:Du(t)}}function oh(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Fn=l,fv(l,t)}cv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:La(8,r,r.return),oh(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,oh(r));break;default:oh(r)}t=t.sibling}}function fv(t,r){for(;Fn!==null;){var a=Fn;switch(a.tag){case 0:case 11:case 15:La(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:du(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Fn=l;else e:for(a=t;Fn!==null;){l=Fn;var f=l.sibling,p=l.return;if(nv(l),l===a){Fn=null;break e}if(f!==null){f.return=p,Fn=f;break e}Fn=p}}}var D1={getCacheForType:function(t){var r=Xn(Cn),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return Xn(Cn).controller.signal}},x1=typeof WeakMap=="function"?WeakMap:Map,Mt=0,Kt=null,vt=null,Et=0,zt=0,li=null,Ua=!1,Sl=!1,Jd=!1,Xs=0,dn=0,za=0,jo=0,Zd=0,ui=0,Al=0,xu=null,jr=null,Wd=!1,lh=0,dv=0,uh=1/0,ch=null,ja=null,Vn=0,Ba=null,wl=null,Js=0,em=0,tm=null,mv=null,Nu=0,nm=null;function ci(){return(Mt&2)!==0&&Et!==0?Et&-Et:ue.T!==null?lm():Os()}function pv(){if(ui===0)if((Et&536870912)===0||Ct){var t=Li;Li<<=1,(Li&3932160)===0&&(Li=262144),ui=t}else ui=536870912;return t=ai.current,t!==null&&(t.flags|=32),ui}function Br(t,r,a){(t===Kt&&(zt===2||zt===9)||t.cancelPendingCommit!==null)&&(Rl(t,0),qa(t,Et,ui,!1)),Sr(t,a),((Mt&2)===0||t!==Kt)&&(t===Kt&&((Mt&2)===0&&(jo|=a),dn===4&&qa(t,Et,ui,!1)),ms(t))}function gv(t,r,a){if((Mt&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||dr(t,r),f=l?k1(t,r):im(t,r,!0),p=l;do{if(f===0){Sl&&!l&&qa(t,r,0,!1);break}else{if(a=t.current.alternate,p&&!N1(a)){f=im(t,r,!1),p=!1;continue}if(f===2){if(p=r,t.errorRecoveryDisabledLanes&p)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;e:{var R=t;f=xu;var L=R.current.memoizedState.isDehydrated;if(L&&(Rl(R,T).flags|=256),T=im(R,T,!1),T!==2){if(Jd&&!L){R.errorRecoveryDisabledLanes|=p,jo|=p,f=4;break e}p=jr,jr=f,p!==null&&(jr===null?jr=p:jr.push.apply(jr,p))}f=T}if(p=!1,f!==2)continue}}if(f===1){Rl(t,0),qa(t,r,0,!0);break}e:{switch(l=t,p=f,p){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:qa(l,r,ui,!Ua);break e;case 2:jr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=lh+300-zn(),10<f)){if(qa(l,r,ui,!Ua),Yr(l,0,!0)!==0)break e;Js=r,l.timeoutHandle=Yv(yv.bind(null,l,a,jr,ch,Wd,r,ui,jo,Al,Ua,p,"Throttled",-0,0),f);break e}yv(l,a,jr,ch,Wd,r,ui,jo,Al,Ua,p,null,-0,0)}}break}while(!0);ms(t)}function yv(t,r,a,l,f,p,T,R,L,re,he,ge,se,le){if(t.timeoutHandle=-1,ge=r.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:sr},uv(r,p,ge);var ze=(p&62914560)===p?lh-zn():(p&4194048)===p?dv-zn():0;if(ze=gS(ge,ze),ze!==null){Js=p,t.cancelPendingCommit=ze(wv.bind(null,t,r,p,a,l,f,T,R,L,he,ge,null,se,le)),qa(t,p,T,!re);return}}wv(t,r,p,a,l,f,T,R,L)}function N1(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],p=f.getSnapshot;f=f.value;try{if(!ar(p(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function qa(t,r,a,l){r&=~Zd,r&=~jo,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var f=r;0<f;){var p=31-Ne(f),T=1<<p;l[p]=-1,f&=~T}a!==0&&pi(t,a,r)}function hh(){return(Mt&6)===0?(Mu(0),!1):!0}function rm(){if(vt!==null){if(zt===0)var t=vt.return;else t=vt,js=xo=null,_d(t),gl=null,pu=0,t=vt;for(;t!==null;)Qy(t.alternate,t),t=t.return;vt=null}}function Rl(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Z1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Js=0,rm(),Kt=t,vt=a=Us(t.current,null),Et=r,zt=0,li=null,Ua=!1,Sl=dr(t,r),Jd=!1,Al=ui=Zd=jo=za=dn=0,jr=xu=null,Wd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var f=31-Ne(l),p=1<<f;r|=t[f],l&=~p}return Xs=r,Hn(),a}function vv(t,r){ut=null,ue.H=Su,r===pl||r===jc?(r=kg(),zt=3):r===od?(r=kg(),zt=4):zt=r===Vd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,li=r,vt===null&&(dn=1,eh(t,wi(r,t.current)))}function _v(){var t=ai.current;return t===null?!0:(Et&4194048)===Et?Oi===null:(Et&62914560)===Et||(Et&536870912)!==0?t===Oi:!1}function Ev(){var t=ue.H;return ue.H=Su,t===null?Su:t}function bv(){var t=ue.A;return ue.A=D1,t}function fh(){dn=4,Ua||(Et&4194048)!==Et&&ai.current!==null||(Sl=!0),(za&134217727)===0&&(jo&134217727)===0||Kt===null||qa(Kt,Et,ui,!1)}function im(t,r,a){var l=Mt;Mt|=2;var f=Ev(),p=bv();(Kt!==t||Et!==r)&&(ch=null,Rl(t,r)),r=!1;var T=dn;e:do try{if(zt!==0&&vt!==null){var R=vt,L=li;switch(zt){case 8:rm(),T=6;break e;case 3:case 2:case 9:case 6:ai.current===null&&(r=!0);var re=zt;if(zt=0,li=null,Cl(t,R,L,re),a&&Sl){T=0;break e}break;default:re=zt,zt=0,li=null,Cl(t,R,L,re)}}M1(),T=dn;break}catch(he){vv(t,he)}while(!0);return r&&t.shellSuspendCounter++,js=xo=null,Mt=l,ue.H=f,ue.A=p,vt===null&&(Kt=null,Et=0,Hn()),T}function M1(){for(;vt!==null;)Tv(vt)}function k1(t,r){var a=Mt;Mt|=2;var l=Ev(),f=bv();Kt!==t||Et!==r?(ch=null,uh=zn()+500,Rl(t,r)):Sl=dr(t,r);e:do try{if(zt!==0&&vt!==null){r=vt;var p=li;t:switch(zt){case 1:zt=0,li=null,Cl(t,r,p,1);break;case 2:case 9:if(Ng(p)){zt=0,li=null,Sv(r);break}r=function(){zt!==2&&zt!==9||Kt!==t||(zt=7),ms(t)},p.then(r,r);break e;case 3:zt=7;break e;case 4:zt=5;break e;case 7:Ng(p)?(zt=0,li=null,Sv(r)):(zt=0,li=null,Cl(t,r,p,7));break;case 5:var T=null;switch(vt.tag){case 26:T=vt.memoizedState;case 5:case 27:var R=vt;if(T?l_(T):R.stateNode.complete){zt=0,li=null;var L=R.sibling;if(L!==null)vt=L;else{var re=R.return;re!==null?(vt=re,dh(re)):vt=null}break t}}zt=0,li=null,Cl(t,r,p,5);break;case 6:zt=0,li=null,Cl(t,r,p,6);break;case 8:rm(),dn=6;break e;default:throw Error(s(462))}}V1();break}catch(he){vv(t,he)}while(!0);return js=xo=null,ue.H=l,ue.A=f,Mt=a,vt!==null?0:(Kt=null,Et=0,Hn(),dn)}function V1(){for(;vt!==null&&!nl();)Tv(vt)}function Tv(t){var r=Gy(t.alternate,t,Xs);t.memoizedProps=t.pendingProps,r===null?dh(t):vt=r}function Sv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=jy(a,r,r.pendingProps,r.type,void 0,Et);break;case 11:r=jy(a,r,r.pendingProps,r.type.render,r.ref,Et);break;case 5:_d(r);default:Qy(a,r),r=vt=bg(r,Xs),r=Gy(a,r,Xs)}t.memoizedProps=t.pendingProps,r===null?dh(t):vt=r}function Cl(t,r,a,l){js=xo=null,_d(r),gl=null,pu=0;var f=r.return;try{if(S1(t,f,r,a,Et)){dn=1,eh(t,wi(a,t.current)),vt=null;return}}catch(p){if(f!==null)throw vt=f,p;dn=1,eh(t,wi(a,t.current)),vt=null;return}r.flags&32768?(Ct||l===1?t=!0:Sl||(Et&536870912)!==0?t=!1:(Ua=t=!0,(l===2||l===9||l===3||l===6)&&(l=ai.current,l!==null&&l.tag===13&&(l.flags|=16384))),Av(r,t)):dh(r)}function dh(t){var r=t;do{if((r.flags&32768)!==0){Av(r,Ua);return}t=r.return;var a=R1(r.alternate,r,Xs);if(a!==null){vt=a;return}if(r=r.sibling,r!==null){vt=r;return}vt=r=t}while(r!==null);dn===0&&(dn=5)}function Av(t,r){do{var a=C1(t.alternate,t);if(a!==null){a.flags&=32767,vt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){vt=t;return}vt=t=a}while(t!==null);dn=6,vt=null}function wv(t,r,a,l,f,p,T,R,L){t.cancelPendingCommit=null;do mh();while(Vn!==0);if((Mt&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(p=r.lanes|r.childLanes,p|=lt,_o(t,a,p,T,R,L),t===Kt&&(vt=Kt=null,Et=0),wl=r,Ba=t,Js=a,em=p,tm=f,mv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,z1(di,function(){return Dv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=ue.T,ue.T=null,f=Oe.p,Oe.p=2,T=Mt,Mt|=4;try{I1(t,r,a)}finally{Mt=T,Oe.p=f,ue.T=l}}Vn=1,Rv(),Cv(),Iv()}}function Rv(){if(Vn===1){Vn=0;var t=Ba,r=wl,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=ue.T,ue.T=null;var l=Oe.p;Oe.p=2;var f=Mt;Mt|=4;try{av(r,t);var p=gm,T=A(t.containerInfo),R=p.focusedElem,L=p.selectionRange;if(T!==R&&R&&R.ownerDocument&&E(R.ownerDocument.documentElement,R)){if(L!==null&&w(R)){var re=L.start,he=L.end;if(he===void 0&&(he=re),"selectionStart"in R)R.selectionStart=re,R.selectionEnd=Math.min(he,R.value.length);else{var ge=R.ownerDocument||document,se=ge&&ge.defaultView||window;if(se.getSelection){var le=se.getSelection(),ze=R.textContent.length,Xe=Math.min(L.start,ze),Ht=L.end===void 0?Xe:Math.min(L.end,ze);!le.extend&&Xe>Ht&&(T=Ht,Ht=Xe,Xe=T);var W=g(R,Xe),K=g(R,Ht);if(W&&K&&(le.rangeCount!==1||le.anchorNode!==W.node||le.anchorOffset!==W.offset||le.focusNode!==K.node||le.focusOffset!==K.offset)){var ne=ge.createRange();ne.setStart(W.node,W.offset),le.removeAllRanges(),Xe>Ht?(le.addRange(ne),le.extend(K.node,K.offset)):(ne.setEnd(K.node,K.offset),le.addRange(ne))}}}}for(ge=[],le=R;le=le.parentNode;)le.nodeType===1&&ge.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ge.length;R++){var me=ge[R];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Rh=!!pm,gm=pm=null}finally{Mt=f,Oe.p=l,ue.T=a}}t.current=r,Vn=2}}function Cv(){if(Vn===2){Vn=0;var t=Ba,r=wl,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=ue.T,ue.T=null;var l=Oe.p;Oe.p=2;var f=Mt;Mt|=4;try{tv(t,r.alternate,r)}finally{Mt=f,Oe.p=l,ue.T=a}}Vn=3}}function Iv(){if(Vn===4||Vn===3){Vn=0,ts();var t=Ba,r=wl,a=Js,l=mv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Vn=5:(Vn=0,wl=Ba=null,Ov(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(ja=null),Ar(a),r=r.stateNode,pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(nr,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=ue.T,f=Oe.p,Oe.p=2,ue.T=null;try{for(var p=t.onRecoverableError,T=0;T<l.length;T++){var R=l[T];p(R.value,{componentStack:R.stack})}}finally{ue.T=r,Oe.p=f}}(Js&3)!==0&&mh(),ms(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===nm?Nu++:(Nu=0,nm=t):Nu=0,Mu(0)}}function Ov(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,du(r)))}function mh(){return Rv(),Cv(),Iv(),Dv()}function Dv(){if(Vn!==5)return!1;var t=Ba,r=em;em=0;var a=Ar(Js),l=ue.T,f=Oe.p;try{Oe.p=32>a?32:a,ue.T=null,a=tm,tm=null;var p=Ba,T=Js;if(Vn=0,wl=Ba=null,Js=0,(Mt&6)!==0)throw Error(s(331));var R=Mt;if(Mt|=4,hv(p.current),lv(p,p.current,T,a),Mt=R,Mu(0,!1),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(nr,p)}catch{}return!0}finally{Oe.p=f,ue.T=l,Ov(t,r)}}function xv(t,r,a){r=wi(a,r),r=kd(t.stateNode,r,2),t=ka(t,r,2),t!==null&&(Sr(t,2),ms(t))}function jt(t,r,a){if(t.tag===3)xv(t,t,a);else for(;r!==null;){if(r.tag===3){xv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ja===null||!ja.has(l))){t=wi(a,t),a=Ny(2),l=ka(r,a,2),l!==null&&(My(a,l,r,t),Sr(l,2),ms(l));break}}r=r.return}}function sm(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new x1;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(Jd=!0,f.add(a),t=P1.bind(null,t,r,a),r.then(t,t))}function P1(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Kt===t&&(Et&a)===a&&(dn===4||dn===3&&(Et&62914560)===Et&&300>zn()-lh?(Mt&2)===0&&Rl(t,0):Zd|=a,Al===Et&&(Al=0)),ms(t)}function Nv(t,r){r===0&&(r=rl()),t=Zt(t,r),t!==null&&(Sr(t,r),ms(t))}function L1(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Nv(t,a)}function U1(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),Nv(t,a)}function z1(t,r){return en(t,r)}var ph=null,Il=null,am=!1,gh=!1,om=!1,Ha=0;function ms(t){t!==Il&&t.next===null&&(Il===null?ph=Il=t:Il=Il.next=t),gh=!0,am||(am=!0,B1())}function Mu(t,r){if(!om&&gh){om=!0;do for(var a=!1,l=ph;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var p=0;else{var T=l.suspendedLanes,R=l.pingedLanes;p=(1<<31-Ne(42|t)+1)-1,p&=f&~(T&~R),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,Pv(l,p))}else p=Et,p=Yr(l,l===Kt?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||dr(l,p)||(a=!0,Pv(l,p));l=l.next}while(a);om=!1}}function j1(){Mv()}function Mv(){gh=am=!1;var t=0;Ha!==0&&J1()&&(t=Ha);for(var r=zn(),a=null,l=ph;l!==null;){var f=l.next,p=kv(l,r);p===0?(l.next=null,a===null?ph=f:a.next=f,f===null&&(Il=a)):(a=l,(t!==0||(p&3)!==0)&&(gh=!0)),l=f}Vn!==0&&Vn!==5||Mu(t),Ha!==0&&(Ha=0)}function kv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var T=31-Ne(p),R=1<<T,L=f[T];L===-1?((R&a)===0||(R&l)!==0)&&(f[T]=au(R,r)):L<=r&&(t.expiredLanes|=R),p&=~R}if(r=Kt,a=Et,a=Yr(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(zt===2||zt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Mn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||dr(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Mn(l),Ar(a)){case 2:case 8:a=Gr;break;case 32:a=di;break;case 268435456:a=ha;break;default:a=di}return l=Vv.bind(null,t),a=en(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Mn(l),t.callbackPriority=2,t.callbackNode=null,2}function Vv(t,r){if(Vn!==0&&Vn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(mh()&&t.callbackNode!==a)return null;var l=Et;return l=Yr(t,t===Kt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(gv(t,l,r),kv(t,zn()),t.callbackNode!=null&&t.callbackNode===a?Vv.bind(null,t):null)}function Pv(t,r){if(mh())return null;gv(t,r,!0)}function B1(){W1(function(){(Mt&6)!==0?en(Kr,j1):Mv()})}function lm(){if(Ha===0){var t=dl;t===0&&(t=Re,Re<<=1,(Re&261888)===0&&(Re=256)),Ha=t}return Ha}function Lv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ti(""+t)}function Uv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function q1(t,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var p=Lv((f[Gt]||null).action),T=l.submitter;T&&(r=(r=T[Gt]||null)?Lv(r.formAction):T.getAttribute("formAction"),r!==null&&(p=r,T=null));var R=new _i("action","action",null,l,f);t.push({event:R,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ha!==0){var L=T?Uv(f,T):new FormData(f);Id(a,{pending:!0,data:L,method:f.method,action:p},null,L)}}else typeof p=="function"&&(R.preventDefault(),L=T?Uv(f,T):new FormData(f),Id(a,{pending:!0,data:L,method:f.method,action:p},p,L))},currentTarget:f}]})}}for(var um=0;um<De.length;um++){var cm=De[um],H1=cm.toLowerCase(),F1=cm[0].toUpperCase()+cm.slice(1);be(H1,"on"+F1)}be(te,"onAnimationEnd"),be(ie,"onAnimationIteration"),be(ce,"onAnimationStart"),be("dblclick","onDoubleClick"),be("focusin","onFocus"),be("focusout","onBlur"),be(pe,"onTransitionRun"),be(Te,"onTransitionStart"),be(xe,"onTransitionCancel"),be(Ee,"onTransitionEnd"),Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),Rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ku));function zv(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var p=void 0;if(r)for(var T=l.length-1;0<=T;T--){var R=l[T],L=R.instance,re=R.currentTarget;if(R=R.listener,L!==p&&f.isPropagationStopped())break e;p=R,f.currentTarget=re;try{p(f)}catch(he){Ve(he)}f.currentTarget=null,p=L}else for(T=0;T<l.length;T++){if(R=l[T],L=R.instance,re=R.currentTarget,R=R.listener,L!==p&&f.isPropagationStopped())break e;p=R,f.currentTarget=re;try{p(f)}catch(he){Ve(he)}f.currentTarget=null,p=L}}}}function _t(t,r){var a=r[Ui];a===void 0&&(a=r[Ui]=new Set);var l=t+"__bubble";a.has(l)||(jv(r,t,2,!1),a.add(l))}function hm(t,r,a){var l=0;r&&(l|=4),jv(a,t,l,r)}var yh="_reactListening"+Math.random().toString(36).slice(2);function fm(t){if(!t[yh]){t[yh]=!0,gi.forEach(function(a){a!=="selectionchange"&&(K1.has(a)||hm(a,!1,t),hm(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[yh]||(r[yh]=!0,hm("selectionchange",!1,r))}}function jv(t,r,a,l){switch(p_(r)){case 2:var f=_S;break;case 8:f=ES;break;default:f=Cm}a=f.bind(null,r,a,t),f=void 0,!Ns||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(r,a,{capture:!0,passive:f}):t.addEventListener(r,a,!0):f!==void 0?t.addEventListener(r,a,{passive:f}):t.addEventListener(r,a,!1)}function dm(t,r,a,l,f){var p=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var R=l.stateNode.containerInfo;if(R===f)break;if(T===4)for(T=l.return;T!==null;){var L=T.tag;if((L===3||L===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;R!==null;){if(T=wr(R),T===null)return;if(L=T.tag,L===5||L===6||L===26||L===27){l=p=T;continue e}R=R.parentNode}}l=l.return}Dr(function(){var re=p,he=mr(a),ge=[];e:{var se=Ae.get(t);if(se!==void 0){var le=_i,ze=t;switch(t){case"keypress":if(qi(a)===0)break e;case"keydown":case"keyup":le=Vs;break;case"focusin":ze="focus",le=Ti;break;case"focusout":ze="blur",le=Ti;break;case"beforeblur":case"afterblur":le=Ti;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Ms;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=So;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=v;break;case te:case ie:case ce:le=Ao;break;case Ee:le=I;break;case"scroll":case"scrollend":le=as;break;case"wheel":le=ae;break;case"copy":case"cut":case"paste":le=Ki;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Si;break;case"toggle":case"beforetoggle":le=rt}var Xe=(r&4)!==0,Ht=!Xe&&(t==="scroll"||t==="scrollend"),W=Xe?se!==null?se+"Capture":null:se;Xe=[];for(var K=re,ne;K!==null;){var me=K;if(ne=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||ne===null||W===null||(me=pr(K,W),me!=null&&Xe.push(Vu(K,me,ne))),Ht)break;K=K.return}0<Xe.length&&(se=new le(se,ze,null,a,he),ge.push({event:se,listeners:Xe}))}}if((r&7)===0){e:{if(se=t==="mouseover"||t==="pointerover",le=t==="mouseout"||t==="pointerout",se&&a!==Or&&(ze=a.relatedTarget||a.fromElement)&&(wr(ze)||ze[kn]))break e;if((le||se)&&(se=he.window===he?he:(se=he.ownerDocument)?se.defaultView||se.parentWindow:window,le?(ze=a.relatedTarget||a.toElement,le=re,ze=ze?wr(ze):null,ze!==null&&(Ht=u(ze),Xe=ze.tag,ze!==Ht||Xe!==5&&Xe!==27&&Xe!==6)&&(ze=null)):(le=null,ze=re),le!==ze)){if(Xe=Ms,me="onMouseLeave",W="onMouseEnter",K="mouse",(t==="pointerout"||t==="pointerover")&&(Xe=Si,me="onPointerLeave",W="onPointerEnter",K="pointer"),Ht=le==null?se:yn(le),ne=ze==null?se:yn(ze),se=new Xe(me,K+"leave",le,a,he),se.target=Ht,se.relatedTarget=ne,me=null,wr(he)===re&&(Xe=new Xe(W,K+"enter",ze,a,he),Xe.target=ne,Xe.relatedTarget=Ht,me=Xe),Ht=me,le&&ze)t:{for(Xe=G1,W=le,K=ze,ne=0,me=W;me;me=Xe(me))ne++;me=0;for(var Ge=K;Ge;Ge=Xe(Ge))me++;for(;0<ne-me;)W=Xe(W),ne--;for(;0<me-ne;)K=Xe(K),me--;for(;ne--;){if(W===K||K!==null&&W===K.alternate){Xe=W;break t}W=Xe(W),K=Xe(K)}Xe=null}else Xe=null;le!==null&&Bv(ge,se,le,Xe,!1),ze!==null&&Ht!==null&&Bv(ge,Ht,ze,Xe,!0)}}e:{if(se=re?yn(re):window,le=se.nodeName&&se.nodeName.toLowerCase(),le==="select"||le==="input"&&se.type==="file")var xt=Co;else if(al(se))if(Ai)xt=Ca;else{xt=Ls;var qe=kc}else le=se.nodeName,!le||le.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?re&&ga(re.elementType)&&(xt=Co):xt=uu;if(xt&&(xt=xt(t,re))){lu(ge,xt,a,he);break e}qe&&qe(t,se,re),t==="focusout"&&re&&se.type==="number"&&re.memoizedProps.value!=null&&xs(se,"number",se.value)}switch(qe=re?yn(re):window,t){case"focusin":(al(qe)||qe.contentEditable==="true")&&(k=qe,q=re,H=null);break;case"focusout":H=q=k=null;break;case"mousedown":$=!0;break;case"contextmenu":case"mouseup":case"dragend":$=!1,U(ge,a,he);break;case"selectionchange":if(D)break;case"keydown":case"keyup":U(ge,a,he)}var ht;if(Rt)e:{switch(t){case"compositionstart":var bt="onCompositionStart";break e;case"compositionend":bt="onCompositionEnd";break e;case"compositionupdate":bt="onCompositionUpdate";break e}bt=void 0}else Ps?us(t,a)&&(bt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(bt="onCompositionStart");bt&&(Vr&&a.locale!=="ko"&&(Ps||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&Ps&&(ht=Bi()):(xr=he,ya="value"in xr?xr.value:xr.textContent,Ps=!0)),qe=vh(re,bt),0<qe.length&&(bt=new Nr(bt,t,null,a,he),ge.push({event:bt,listeners:qe}),ht?bt.data=ht:(ht=Aa(a),ht!==null&&(bt.data=ht)))),(ht=kr?xc(t,a):Gf(t,a))&&(bt=vh(re,"onBeforeInput"),0<bt.length&&(qe=new Nr("onBeforeInput","beforeinput",null,a,he),ge.push({event:qe,listeners:bt}),qe.data=ht)),q1(ge,t,re,a,he)}zv(ge,r)})}function Vu(t,r,a){return{instance:t,listener:r,currentTarget:a}}function vh(t,r){for(var a=r+"Capture",l=[];t!==null;){var f=t,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=pr(t,a),f!=null&&l.unshift(Vu(t,f,p)),f=pr(t,r),f!=null&&l.push(Vu(t,f,p))),t.tag===3)return l;t=t.return}return[]}function G1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Bv(t,r,a,l,f){for(var p=r._reactName,T=[];a!==null&&a!==l;){var R=a,L=R.alternate,re=R.stateNode;if(R=R.tag,L!==null&&L===l)break;R!==5&&R!==26&&R!==27||re===null||(L=re,f?(re=pr(a,p),re!=null&&T.unshift(Vu(a,re,L))):f||(re=pr(a,p),re!=null&&T.push(Vu(a,re,L)))),a=a.return}T.length!==0&&t.push({event:r,listeners:T})}var Y1=/\r\n?/g,Q1=/\u0000|\uFFFD/g;function qv(t){return(typeof t=="string"?t:""+t).replace(Y1,`
`).replace(Q1,"")}function Hv(t,r){return r=qv(r),qv(t)===r}function qt(t,r,a,l,f,p){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Qn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Qn(t,""+l);break;case"className":ir(t,"class",l);break;case"tabIndex":ir(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ir(t,a,l);break;case"style":pa(t,l,p);break;case"data":if(r!=="object"){ir(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ti(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(r!=="input"&&qt(t,r,"name",f.name,f,null),qt(t,r,"formEncType",f.formEncType,f,null),qt(t,r,"formMethod",f.formMethod,f,null),qt(t,r,"formTarget",f.formTarget,f,null)):(qt(t,r,"encType",f.encType,f,null),qt(t,r,"method",f.method,f,null),qt(t,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ti(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=sr);break;case"onScroll":l!=null&&_t("scroll",t);break;case"onScrollEnd":l!=null&&_t("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ti(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":_t("beforetoggle",t),_t("toggle",t),ot(t,"popover",l);break;case"xlinkActuate":rn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":rn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":rn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":rn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":rn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":rn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":rn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":rn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":rn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ot(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=sl.get(a)||a,ot(t,a,l))}}function mm(t,r,a,l,f,p){switch(a){case"style":pa(t,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Qn(t,l):(typeof l=="number"||typeof l=="bigint")&&Qn(t,""+l);break;case"onScroll":l!=null&&_t("scroll",t);break;case"onScrollEnd":l!=null&&_t("scrollend",t);break;case"onClick":l!=null&&(t.onclick=sr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rs.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),p=t[Gt]||null,p=p!=null?p[a]:null,typeof p=="function"&&t.removeEventListener(r,p,f),typeof l=="function")){typeof p!="function"&&p!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ot(t,a,l)}}}function Zn(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",t),_t("load",t);var l=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var T=a[p];if(T!=null)switch(p){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:qt(t,r,p,T,a,null)}}f&&qt(t,r,"srcSet",a.srcSet,a,null),l&&qt(t,r,"src",a.src,a,null);return;case"input":_t("invalid",t);var R=p=T=f=null,L=null,re=null;for(l in a)if(a.hasOwnProperty(l)){var he=a[l];if(he!=null)switch(l){case"name":f=he;break;case"type":T=he;break;case"checked":L=he;break;case"defaultChecked":re=he;break;case"value":p=he;break;case"defaultValue":R=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(s(137,r));break;default:qt(t,r,l,he,a,null)}}ma(t,p,R,L,re,T,f,!1);return;case"select":_t("invalid",t),l=T=p=null;for(f in a)if(a.hasOwnProperty(f)&&(R=a[f],R!=null))switch(f){case"value":p=R;break;case"defaultValue":T=R;break;case"multiple":l=R;default:qt(t,r,f,R,a,null)}r=p,a=T,t.multiple=!!l,r!=null?Wr(t,!!l,r,!1):a!=null&&Wr(t,!!l,a,!0);return;case"textarea":_t("invalid",t),p=f=l=null;for(T in a)if(a.hasOwnProperty(T)&&(R=a[T],R!=null))switch(T){case"value":l=R;break;case"defaultValue":f=R;break;case"children":p=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(s(91));break;default:qt(t,r,T,R,a,null)}ei(t,l,f,p);return;case"option":for(L in a)a.hasOwnProperty(L)&&(l=a[L],l!=null)&&(L==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":qt(t,r,L,l,a,null));return;case"dialog":_t("beforetoggle",t),_t("toggle",t),_t("cancel",t),_t("close",t);break;case"iframe":case"object":_t("load",t);break;case"video":case"audio":for(l=0;l<ku.length;l++)_t(ku[l],t);break;case"image":_t("error",t),_t("load",t);break;case"details":_t("toggle",t);break;case"embed":case"source":case"link":_t("error",t),_t("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in a)if(a.hasOwnProperty(re)&&(l=a[re],l!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:qt(t,r,re,l,a,null)}return;default:if(ga(r)){for(he in a)a.hasOwnProperty(he)&&(l=a[he],l!==void 0&&mm(t,r,he,l,a,void 0));return}}for(R in a)a.hasOwnProperty(R)&&(l=a[R],l!=null&&qt(t,r,R,l,a,null))}function $1(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,T=null,R=null,L=null,re=null,he=null;for(le in a){var ge=a[le];if(a.hasOwnProperty(le)&&ge!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":L=ge;default:l.hasOwnProperty(le)||qt(t,r,le,null,l,ge)}}for(var se in l){var le=l[se];if(ge=a[se],l.hasOwnProperty(se)&&(le!=null||ge!=null))switch(se){case"type":p=le;break;case"name":f=le;break;case"checked":re=le;break;case"defaultChecked":he=le;break;case"value":T=le;break;case"defaultValue":R=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(s(137,r));break;default:le!==ge&&qt(t,r,se,le,l,ge)}}Zr(t,T,R,L,re,he,p,f);return;case"select":le=T=R=se=null;for(p in a)if(L=a[p],a.hasOwnProperty(p)&&L!=null)switch(p){case"value":break;case"multiple":le=L;default:l.hasOwnProperty(p)||qt(t,r,p,null,l,L)}for(f in l)if(p=l[f],L=a[f],l.hasOwnProperty(f)&&(p!=null||L!=null))switch(f){case"value":se=p;break;case"defaultValue":R=p;break;case"multiple":T=p;default:p!==L&&qt(t,r,f,p,l,L)}r=R,a=T,l=le,se!=null?Wr(t,!!a,se,!1):!!l!=!!a&&(r!=null?Wr(t,!!a,r,!0):Wr(t,!!a,a?[]:"",!1));return;case"textarea":le=se=null;for(R in a)if(f=a[R],a.hasOwnProperty(R)&&f!=null&&!l.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:qt(t,r,R,null,l,f)}for(T in l)if(f=l[T],p=a[T],l.hasOwnProperty(T)&&(f!=null||p!=null))switch(T){case"value":se=f;break;case"defaultValue":le=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==p&&qt(t,r,T,f,l,p)}To(t,se,le);return;case"option":for(var ze in a)se=a[ze],a.hasOwnProperty(ze)&&se!=null&&!l.hasOwnProperty(ze)&&(ze==="selected"?t.selected=!1:qt(t,r,ze,null,l,se));for(L in l)se=l[L],le=a[L],l.hasOwnProperty(L)&&se!==le&&(se!=null||le!=null)&&(L==="selected"?t.selected=se&&typeof se!="function"&&typeof se!="symbol":qt(t,r,L,se,l,le));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in a)se=a[Xe],a.hasOwnProperty(Xe)&&se!=null&&!l.hasOwnProperty(Xe)&&qt(t,r,Xe,null,l,se);for(re in l)if(se=l[re],le=a[re],l.hasOwnProperty(re)&&se!==le&&(se!=null||le!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,r));break;default:qt(t,r,re,se,l,le)}return;default:if(ga(r)){for(var Ht in a)se=a[Ht],a.hasOwnProperty(Ht)&&se!==void 0&&!l.hasOwnProperty(Ht)&&mm(t,r,Ht,void 0,l,se);for(he in l)se=l[he],le=a[he],!l.hasOwnProperty(he)||se===le||se===void 0&&le===void 0||mm(t,r,he,se,l,le);return}}for(var W in a)se=a[W],a.hasOwnProperty(W)&&se!=null&&!l.hasOwnProperty(W)&&qt(t,r,W,null,l,se);for(ge in l)se=l[ge],le=a[ge],!l.hasOwnProperty(ge)||se===le||se==null&&le==null||qt(t,r,ge,se,l,le)}function Fv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function X1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],p=f.transferSize,T=f.initiatorType,R=f.duration;if(p&&R&&Fv(T)){for(T=0,R=f.responseEnd,l+=1;l<a.length;l++){var L=a[l],re=L.startTime;if(re>R)break;var he=L.transferSize,ge=L.initiatorType;he&&Fv(ge)&&(L=L.responseEnd,T+=he*(L<R?1:(R-re)/(L-re)))}if(--l,r+=8*(p+T)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var pm=null,gm=null;function _h(t){return t.nodeType===9?t:t.ownerDocument}function Kv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gv(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function ym(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var vm=null;function J1(){var t=window.event;return t&&t.type==="popstate"?t===vm?!1:(vm=t,!0):(vm=null,!1)}var Yv=typeof setTimeout=="function"?setTimeout:void 0,Z1=typeof clearTimeout=="function"?clearTimeout:void 0,Qv=typeof Promise=="function"?Promise:void 0,W1=typeof queueMicrotask=="function"?queueMicrotask:typeof Qv<"u"?function(t){return Qv.resolve(null).then(t).catch(eS)}:Yv;function eS(t){setTimeout(function(){throw t})}function Fa(t){return t==="head"}function $v(t,r){var a=r,l=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(f),Nl(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Pu(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Pu(a);for(var p=a.firstChild;p;){var T=p.nextSibling,R=p.nodeName;p[jn]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=T}}else a==="body"&&Pu(t.ownerDocument.body);a=f}while(a);Nl(r)}function Xv(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function _m(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":_m(a),Ds(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function tS(t,r,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[jn])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=Di(t.nextSibling),t===null)break}return null}function nS(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Di(t.nextSibling),t===null))return null;return t}function Jv(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Di(t.nextSibling),t===null))return null;return t}function Em(t){return t.data==="$?"||t.data==="$~"}function bm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function rS(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Di(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Tm=null;function Zv(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Di(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function Wv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function e_(t,r,a){switch(r=_h(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Pu(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ds(t)}var xi=new Map,t_=new Set;function Eh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Zs=Oe.d;Oe.d={f:iS,r:sS,D:aS,C:oS,L:lS,m:uS,X:hS,S:cS,M:fS};function iS(){var t=Zs.f(),r=hh();return t||r}function sS(t){var r=It(t);r!==null&&r.tag===5&&r.type==="form"?vy(r):Zs.r(t)}var Ol=typeof document>"u"?null:document;function n_(t,r,a){var l=Ol;if(l&&typeof r=="string"&&r){var f=An(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),t_.has(f)||(t_.add(f),t={rel:t,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),Zn(r,"link",t),nn(r),l.head.appendChild(r)))}}function aS(t){Zs.D(t),n_("dns-prefetch",t,null)}function oS(t,r){Zs.C(t,r),n_("preconnect",t,r)}function lS(t,r,a){Zs.L(t,r,a);var l=Ol;if(l&&t&&r){var f='link[rel="preload"][as="'+An(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+An(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+An(a.imageSizes)+'"]')):f+='[href="'+An(t)+'"]';var p=f;switch(r){case"style":p=Dl(t);break;case"script":p=xl(t)}xi.has(p)||(t=O({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),xi.set(p,t),l.querySelector(f)!==null||r==="style"&&l.querySelector(Lu(p))||r==="script"&&l.querySelector(Uu(p))||(r=l.createElement("link"),Zn(r,"link",t),nn(r),l.head.appendChild(r)))}}function uS(t,r){Zs.m(t,r);var a=Ol;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+An(l)+'"][href="'+An(t)+'"]',p=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=xl(t)}if(!xi.has(p)&&(t=O({rel:"modulepreload",href:t},r),xi.set(p,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Uu(p)))return}l=a.createElement("link"),Zn(l,"link",t),nn(l),a.head.appendChild(l)}}}function cS(t,r,a){Zs.S(t,r,a);var l=Ol;if(l&&t){var f=Sn(l).hoistableStyles,p=Dl(t);r=r||"default";var T=f.get(p);if(!T){var R={loading:0,preload:null};if(T=l.querySelector(Lu(p)))R.loading=5;else{t=O({rel:"stylesheet",href:t,"data-precedence":r},a),(a=xi.get(p))&&Sm(t,a);var L=T=l.createElement("link");nn(L),Zn(L,"link",t),L._p=new Promise(function(re,he){L.onload=re,L.onerror=he}),L.addEventListener("load",function(){R.loading|=1}),L.addEventListener("error",function(){R.loading|=2}),R.loading|=4,bh(T,r,l)}T={type:"stylesheet",instance:T,count:1,state:R},f.set(p,T)}}}function hS(t,r){Zs.X(t,r);var a=Ol;if(a&&t){var l=Sn(a).hoistableScripts,f=xl(t),p=l.get(f);p||(p=a.querySelector(Uu(f)),p||(t=O({src:t,async:!0},r),(r=xi.get(f))&&Am(t,r),p=a.createElement("script"),nn(p),Zn(p,"link",t),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function fS(t,r){Zs.M(t,r);var a=Ol;if(a&&t){var l=Sn(a).hoistableScripts,f=xl(t),p=l.get(f);p||(p=a.querySelector(Uu(f)),p||(t=O({src:t,async:!0,type:"module"},r),(r=xi.get(f))&&Am(t,r),p=a.createElement("script"),nn(p),Zn(p,"link",t),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function r_(t,r,a,l){var f=(f=Ze.current)?Eh(f):null;if(!f)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Dl(a.href),a=Sn(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Dl(a.href);var p=Sn(f).hoistableStyles,T=p.get(t);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,T),(p=f.querySelector(Lu(t)))&&!p._p&&(T.instance=p,T.state.loading=5),xi.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},xi.set(t,a),p||dS(f,t,a,T.state))),r&&l===null)throw Error(s(528,""));return T}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=xl(a),a=Sn(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Dl(t){return'href="'+An(t)+'"'}function Lu(t){return'link[rel="stylesheet"]['+t+"]"}function i_(t){return O({},t,{"data-precedence":t.precedence,precedence:null})}function dS(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Zn(r,"link",a),nn(r),t.head.appendChild(r))}function xl(t){return'[src="'+An(t)+'"]'}function Uu(t){return"script[async]"+t}function s_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+An(a.href)+'"]');if(l)return r.instance=l,nn(l),l;var f=O({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),nn(l),Zn(l,"style",f),bh(l,a.precedence,t),r.instance=l;case"stylesheet":f=Dl(a.href);var p=t.querySelector(Lu(f));if(p)return r.state.loading|=4,r.instance=p,nn(p),p;l=i_(a),(f=xi.get(f))&&Sm(l,f),p=(t.ownerDocument||t).createElement("link"),nn(p);var T=p;return T._p=new Promise(function(R,L){T.onload=R,T.onerror=L}),Zn(p,"link",l),r.state.loading|=4,bh(p,a.precedence,t),r.instance=p;case"script":return p=xl(a.src),(f=t.querySelector(Uu(p)))?(r.instance=f,nn(f),f):(l=a,(f=xi.get(p))&&(l=O({},a),Am(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),nn(f),Zn(f,"link",l),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,bh(l,a.precedence,t));return r.instance}function bh(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,p=f,T=0;T<l.length;T++){var R=l[T];if(R.dataset.precedence===r)p=R;else if(p!==f)break}p?p.parentNode.insertBefore(t,p.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function Sm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Am(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Th=null;function a_(t,r,a){if(Th===null){var l=new Map,f=Th=new Map;f.set(a,l)}else f=Th,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var p=a[f];if(!(p[jn]||p[Pt]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(r)||"";T=t+T;var R=l.get(T);R?R.push(p):l.set(T,[p])}}return l}function o_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function mS(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function l_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function pS(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Dl(l.href),p=r.querySelector(Lu(f));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Sh.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=p,nn(p);return}p=r.ownerDocument||r,l=i_(l),(f=xi.get(f))&&Sm(l,f),p=p.createElement("link"),nn(p);var T=p;T._p=new Promise(function(R,L){T.onload=R,T.onerror=L}),Zn(p,"link",l),a.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Sh.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var wm=0;function gS(t,r){return t.stylesheets&&t.count===0&&wh(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&wh(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+r);0<t.imgBytes&&wm===0&&(wm=62500*X1());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&wh(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>wm?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Sh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ah=null;function wh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ah=new Map,r.forEach(yS,t),Ah=null,Sh.call(t))}function yS(t,r){if(!(r.state.loading&4)){var a=Ah.get(t);if(a)var l=a.get(null);else{a=new Map,Ah.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var T=f[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),l=T)}l&&a.set(null,l)}f=r.instance,T=f.getAttribute("data-precedence"),p=a.get(T)||l,p===l&&a.set(null,f),a.set(T,f),this.count++,l=Sh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),p?p.parentNode.insertBefore(f,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var zu={$$typeof:Ue,Provider:null,Consumer:null,_currentValue:Be,_currentValue2:Be,_threadCount:0};function vS(t,r,a,l,f,p,T,R,L){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yn(0),this.hiddenUpdates=Yn(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function u_(t,r,a,l,f,p,T,R,L,re,he,ge){return t=new vS(t,r,a,T,L,re,he,ge,R),r=1,p===!0&&(r|=24),p=si(3,null,null,r),t.current=p,p.stateNode=t,r=id(),r.refCount++,t.pooledCache=r,r.refCount++,p.memoizedState={element:l,isDehydrated:a,cache:r},ld(p),t}function c_(t){return t?(t=Pr,t):Pr}function h_(t,r,a,l,f,p){f=c_(f),l.context===null?l.context=f:l.pendingContext=f,l=Ma(r),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=ka(t,l,r),a!==null&&(Br(a,t,r),yu(a,t,r))}function f_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Rm(t,r){f_(t,r),(t=t.alternate)&&f_(t,r)}function d_(t){if(t.tag===13||t.tag===31){var r=Zt(t,67108864);r!==null&&Br(r,t,67108864),Rm(t,67108864)}}function m_(t){if(t.tag===13||t.tag===31){var r=ci();r=Is(r);var a=Zt(t,r);a!==null&&Br(a,t,r),Rm(t,r)}}var Rh=!0;function _S(t,r,a,l){var f=ue.T;ue.T=null;var p=Oe.p;try{Oe.p=2,Cm(t,r,a,l)}finally{Oe.p=p,ue.T=f}}function ES(t,r,a,l){var f=ue.T;ue.T=null;var p=Oe.p;try{Oe.p=8,Cm(t,r,a,l)}finally{Oe.p=p,ue.T=f}}function Cm(t,r,a,l){if(Rh){var f=Im(l);if(f===null)dm(t,r,l,Ch,a),g_(t,l);else if(TS(f,t,r,a,l))l.stopPropagation();else if(g_(t,l),r&4&&-1<bS.indexOf(t)){for(;f!==null;){var p=It(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=Tr(p.pendingLanes);if(T!==0){var R=p;for(R.pendingLanes|=2,R.entangledLanes|=2;T;){var L=1<<31-Ne(T);R.entanglements[1]|=L,T&=~L}ms(p),(Mt&6)===0&&(uh=zn()+500,Mu(0))}}break;case 31:case 13:R=Zt(p,2),R!==null&&Br(R,p,2),hh(),Rm(p,2)}if(p=Im(l),p===null&&dm(t,r,l,Ch,a),p===f)break;f=p}f!==null&&l.stopPropagation()}else dm(t,r,l,null,a)}}function Im(t){return t=mr(t),Om(t)}var Ch=null;function Om(t){if(Ch=null,t=wr(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===31){if(t=y(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Ch=t,null}function p_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fr()){case Kr:return 2;case Gr:return 8;case di:case ws:return 32;case ha:return 268435456;default:return 32}default:return 32}}var Dm=!1,Ka=null,Ga=null,Ya=null,ju=new Map,Bu=new Map,Qa=[],bS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function g_(t,r){switch(t){case"focusin":case"focusout":Ka=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":ju.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bu.delete(r.pointerId)}}function qu(t,r,a,l,f,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:p,targetContainers:[f]},r!==null&&(r=It(r),r!==null&&d_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function TS(t,r,a,l,f){switch(r){case"focusin":return Ka=qu(Ka,t,r,a,l,f),!0;case"dragenter":return Ga=qu(Ga,t,r,a,l,f),!0;case"mouseover":return Ya=qu(Ya,t,r,a,l,f),!0;case"pointerover":var p=f.pointerId;return ju.set(p,qu(ju.get(p)||null,t,r,a,l,f)),!0;case"gotpointercapture":return p=f.pointerId,Bu.set(p,qu(Bu.get(p)||null,t,r,a,l,f)),!0}return!1}function y_(t){var r=wr(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,rr(t.priority,function(){m_(a)});return}}else if(r===31){if(r=y(a),r!==null){t.blockedOn=r,rr(t.priority,function(){m_(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ih(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Im(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Or=l,a.target.dispatchEvent(l),Or=null}else return r=It(a),r!==null&&d_(r),t.blockedOn=a,!1;r.shift()}return!0}function v_(t,r,a){Ih(t)&&a.delete(r)}function SS(){Dm=!1,Ka!==null&&Ih(Ka)&&(Ka=null),Ga!==null&&Ih(Ga)&&(Ga=null),Ya!==null&&Ih(Ya)&&(Ya=null),ju.forEach(v_),Bu.forEach(v_)}function Oh(t,r){t.blockedOn===r&&(t.blockedOn=null,Dm||(Dm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,SS)))}var Dh=null;function __(t){Dh!==t&&(Dh=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Dh===t&&(Dh=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],f=t[r+2];if(typeof l!="function"){if(Om(l||a)===null)continue;break}var p=It(a);p!==null&&(t.splice(r,3),r-=3,Id(p,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Nl(t){function r(L){return Oh(L,t)}Ka!==null&&Oh(Ka,t),Ga!==null&&Oh(Ga,t),Ya!==null&&Oh(Ya,t),ju.forEach(r),Bu.forEach(r);for(var a=0;a<Qa.length;a++){var l=Qa[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Qa.length&&(a=Qa[0],a.blockedOn===null);)y_(a),a.blockedOn===null&&Qa.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],p=a[l+1],T=f[Gt]||null;if(typeof p=="function")T||__(a);else if(T){var R=null;if(p&&p.hasAttribute("formAction")){if(f=p,T=p[Gt]||null)R=T.formAction;else if(Om(f)!==null)continue}else R=T.action;typeof R=="function"?a[l+1]=R:(a.splice(l,3),l-=3),__(a)}}}function E_(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(T){return f=T})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function xm(t){this._internalRoot=t}xh.prototype.render=xm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=ci();h_(a,l,t,r,null,null)},xh.prototype.unmount=xm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;h_(t.current,2,null,t,null,null),hh(),r[kn]=null}};function xh(t){this._internalRoot=t}xh.prototype.unstable_scheduleHydration=function(t){if(t){var r=Os();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Qa.length&&r!==0&&r<Qa[a].priority;a++);Qa.splice(a,0,t),a===0&&y_(t)}};var b_=e.version;if(b_!=="19.2.4")throw Error(s(527,b_,"19.2.4"));Oe.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=b(r),t=t!==null?C(t):null,t=t===null?null:t.stateNode,t};var AS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ue,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nh.isDisabled&&Nh.supportsFiber)try{nr=Nh.inject(AS),pn=Nh}catch{}}return Fu.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",f=Iy,p=Oy,T=Dy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError)),r=u_(t,1,!1,null,null,a,l,null,f,p,T,E_),t[kn]=r.current,fm(t),new xm(r)},Fu.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,f="",p=Iy,T=Oy,R=Dy,L=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.formState!==void 0&&(L=a.formState)),r=u_(t,1,!0,r,a??null,l,f,L,p,T,R,E_),r.context=c_(null),a=r.current,l=ci(),l=Is(l),f=Ma(l),f.callback=null,ka(a,f,l),a=l,r.current.lanes=a,Sr(r,a),ms(r),t[kn]=r.current,fm(t),new xh(r)},Fu.version="19.2.4",Fu}var x_;function VS(){if(x_)return km.exports;x_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),km.exports=kS(),km.exports}var PS=VS();const LS=Cp(PS),US="modulepreload",zS=function(i){return"/public/flashcards/"+i},N_={},Zl=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){let _=function(b){return Promise.all(b.map(C=>Promise.resolve(C).then(O=>({status:"fulfilled",value:O}),O=>({status:"rejected",reason:O}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),y=d?.nonce||d?.getAttribute("nonce");o=_(n.map(b=>{if(b=zS(b),b in N_)return;N_[b]=!0;const C=b.endsWith(".css"),O=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${O}`))return;const x=document.createElement("link");if(x.rel=C?"stylesheet":US,C||(x.as="script"),x.crossOrigin="",x.href=b,y&&x.setAttribute("nonce",y),document.head.appendChild(x),C)return new Promise((Z,fe)=>{x.addEventListener("load",Z),x.addEventListener("error",()=>fe(new Error(`Unable to preload CSS for ${b}`)))})}))}function u(d){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=d,window.dispatchEvent(y),!y.defaultPrevented)throw d}return o.then(d=>{for(const y of d||[])y.status==="rejected"&&u(y.reason);return e().catch(u)})};var Kh={exports:{}},jS=Kh.exports,M_;function BS(){return M_||(M_=1,(function(i,e){(function(n,s){i.exports=s()})(jS,function(){var n=function(h,m){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,E){g.__proto__=E}||function(g,E){for(var A in E)Object.prototype.hasOwnProperty.call(E,A)&&(g[A]=E[A])})(h,m)},s=function(){return(s=Object.assign||function(h){for(var m,g=1,E=arguments.length;g<E;g++)for(var A in m=arguments[g])Object.prototype.hasOwnProperty.call(m,A)&&(h[A]=m[A]);return h}).apply(this,arguments)};function o(h,m,g){for(var E,A=0,w=m.length;A<w;A++)!E&&A in m||((E=E||Array.prototype.slice.call(m,0,A))[A]=m[A]);return h.concat(E||Array.prototype.slice.call(m))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:RS,d=Object.keys,y=Array.isArray;function _(h,m){return typeof m!="object"||d(m).forEach(function(g){h[g]=m[g]}),h}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var b=Object.getPrototypeOf,C={}.hasOwnProperty;function O(h,m){return C.call(h,m)}function x(h,m){typeof m=="function"&&(m=m(b(h))),(typeof Reflect>"u"?d:Reflect.ownKeys)(m).forEach(function(g){fe(h,g,m[g])})}var Z=Object.defineProperty;function fe(h,m,g,E){Z(h,m,_(g&&O(g,"get")&&typeof g.get=="function"?{get:g.get,set:g.set,configurable:!0}:{value:g,configurable:!0,writable:!0},E))}function _e(h){return{from:function(m){return h.prototype=Object.create(m.prototype),fe(h.prototype,"constructor",h),{extend:x.bind(null,h.prototype)}}}}var Ce=Object.getOwnPropertyDescriptor,He=[].slice;function Ye(h,m,g){return He.call(h,m,g)}function Ue(h,m){return m(h)}function ct(h){if(!h)throw new Error("Assertion Failed")}function ft(h){u.setImmediate?setImmediate(h):setTimeout(h,0)}function nt(h,m){if(typeof m=="string"&&O(h,m))return h[m];if(!m)return h;if(typeof m!="string"){for(var g=[],E=0,A=m.length;E<A;++E){var w=nt(h,m[E]);g.push(w)}return g}var D=m.indexOf(".");if(D!==-1){var k=h[m.substr(0,D)];return k==null?void 0:nt(k,m.substr(D+1))}}function V(h,m,g){if(h&&m!==void 0&&!("isFrozen"in Object&&Object.isFrozen(h)))if(typeof m!="string"&&"length"in m){ct(typeof g!="string"&&"length"in g);for(var E=0,A=m.length;E<A;++E)V(h,m[E],g[E])}else{var w,D,k=m.indexOf(".");k!==-1?(w=m.substr(0,k),(D=m.substr(k+1))===""?g===void 0?y(h)&&!isNaN(parseInt(w))?h.splice(w,1):delete h[w]:h[w]=g:V(k=!(k=h[w])||!O(h,w)?h[w]={}:k,D,g)):g===void 0?y(h)&&!isNaN(parseInt(m))?h.splice(m,1):delete h[m]:h[m]=g}}function M(h){var m,g={};for(m in h)O(h,m)&&(g[m]=h[m]);return g}var P=[].concat;function G(h){return P.apply([],h)}var Kr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(G([8,16,32,64].map(function(h){return["Int","Uint","Float"].map(function(m){return m+h+"Array"})}))).filter(function(h){return u[h]}),j=new Set(Kr.map(function(h){return u[h]})),z=null;function N(h){return z=new WeakMap,h=(function m(g){if(!g||typeof g!="object")return g;var E=z.get(g);if(E)return E;if(y(g)){E=[],z.set(g,E);for(var A=0,w=g.length;A<w;++A)E.push(m(g[A]))}else if(j.has(g.constructor))E=g;else{var D,k=b(g);for(D in E=k===Object.prototype?{}:Object.create(k),z.set(g,E),g)O(g,D)&&(E[D]=m(g[D]))}return E})(h),z=null,h}var dt={}.toString;function Ft(h){return dt.call(h).slice(8,-1)}var ue=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Oe=typeof ue=="symbol"?function(h){var m;return h!=null&&(m=h[ue])&&m.apply(h)}:function(){return null};function Be(h,m){return m=h.indexOf(m),0<=m&&h.splice(m,1),0<=m}var je={};function ke(h){var m,g,E,A;if(arguments.length===1){if(y(h))return h.slice();if(this===je&&typeof h=="string")return[h];if(A=Oe(h)){for(g=[];!(E=A.next()).done;)g.push(E.value);return g}if(h==null)return[h];if(typeof(m=h.length)!="number")return[h];for(g=new Array(m);m--;)g[m]=h[m];return g}for(m=arguments.length,g=new Array(m);m--;)g[m]=arguments[m];return g}var B=typeof Symbol<"u"?function(h){return h[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Fr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],yr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Fr),de={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function we(h,m){this.name=h,this.message=m}function Pe(h,m){return h+". Errors: "+Object.keys(m).map(function(g){return m[g].toString()}).filter(function(g,E,A){return A.indexOf(g)===E}).join(`
`)}function $e(h,m,g,E){this.failures=m,this.failedKeys=E,this.successCount=g,this.message=Pe(h,m)}function Ze(h,m){this.name="BulkError",this.failures=Object.keys(m).map(function(g){return m[g]}),this.failuresByPos=m,this.message=Pe(h,this.failures)}_e(we).from(Error).extend({toString:function(){return this.name+": "+this.message}}),_e($e).from(we),_e(Ze).from(we);var pt=yr.reduce(function(h,m){return h[m]=m+"Error",h},{}),mn=we,Me=yr.reduce(function(h,m){var g=m+"Error";function E(A,w){this.name=g,A?typeof A=="string"?(this.message="".concat(A).concat(w?`
 `+w:""),this.inner=w||null):typeof A=="object"&&(this.message="".concat(A.name," ").concat(A.message),this.inner=A):(this.message=de[m]||g,this.inner=null)}return _e(E).from(mn),h[m]=E,h},{});Me.Syntax=SyntaxError,Me.Type=TypeError,Me.Range=RangeError;var es=Fr.reduce(function(h,m){return h[m+"Error"]=Me[m],h},{}),Pi=yr.reduce(function(h,m){return["Syntax","Type","Range"].indexOf(m)===-1&&(h[m+"Error"]=Me[m]),h},{});function wt(){}function hi(h){return h}function fi(h,m){return h==null||h===hi?m:function(g){return m(h(g))}}function Hr(h,m){return function(){h.apply(this,arguments),m.apply(this,arguments)}}function As(h,m){return h===wt?m:function(){var g=h.apply(this,arguments);g!==void 0&&(arguments[0]=g);var E=this.onsuccess,A=this.onerror;this.onsuccess=null,this.onerror=null;var w=m.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?Hr(E,this.onsuccess):E),A&&(this.onerror=this.onerror?Hr(A,this.onerror):A),w!==void 0?w:g}}function yo(h,m){return h===wt?m:function(){h.apply(this,arguments);var g=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,m.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?Hr(g,this.onsuccess):g),E&&(this.onerror=this.onerror?Hr(E,this.onerror):E)}}function vo(h,m){return h===wt?m:function(g){var E=h.apply(this,arguments);_(g,E);var A=this.onsuccess,w=this.onerror;return this.onsuccess=null,this.onerror=null,g=m.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?Hr(A,this.onsuccess):A),w&&(this.onerror=this.onerror?Hr(w,this.onerror):w),E===void 0?g===void 0?void 0:g:_(E,g)}}function cn(h,m){return h===wt?m:function(){return m.apply(this,arguments)!==!1&&h.apply(this,arguments)}}function en(h,m){return h===wt?m:function(){var g=h.apply(this,arguments);if(g&&typeof g.then=="function"){for(var E=this,A=arguments.length,w=new Array(A);A--;)w[A]=arguments[A];return g.then(function(){return m.apply(E,w)})}return m.apply(this,arguments)}}Pi.ModifyError=$e,Pi.DexieError=we,Pi.BulkError=Ze;var Mn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function nl(h){Mn=h}var ts={},zn=100,Kr=typeof Promise>"u"?[]:(function(){var h=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[h,b(h),h];var m=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[m,b(m),h]})(),Fr=Kr[0],yr=Kr[1],Kr=Kr[2],yr=yr&&yr.then,Gr=Fr&&Fr.constructor,di=!!Kr,ws=function(h,m){ns.push([h,m]),Rs&&(queueMicrotask(rl),Rs=!1)},ha=!0,Rs=!0,mi=[],nr=[],pn=hi,gn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:wt,pgp:!1,env:{},finalize:wt},Ne=gn,ns=[],br=0,Cs=[];function Re(h){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var m=this._PSD=Ne;if(typeof h!="function"){if(h!==ts)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Tr(this,this._value))}this._state=null,this._value=null,++m.ref,(function g(E,A){try{A(function(w){if(E._state===null){if(w===E)throw new TypeError("A promise cannot be resolved with itself.");var D=E._lib&&Yn();w&&typeof w.then=="function"?g(E,function(k,q){w instanceof Re?w._then(k,q):w.then(k,q)}):(E._state=!0,E._value=w,Yr(E)),D&&Sr()}},Tr.bind(null,E))}catch(w){Tr(E,w)}})(this,h)}var Li={get:function(){var h=Ne,m=rr;function g(E,A){var w=this,D=!h.global&&(h!==Ne||m!==rr),k=D&&!kn(),q=new Re(function(H,$){dr(w,new tn(Ds(E,h,D,k),Ds(A,h,D,k),H,$,h))});return this._consoleTask&&(q._consoleTask=this._consoleTask),q}return g.prototype=ts,g},set:function(h){fe(this,"then",h&&h.prototype===ts?Li:{get:function(){return h},set:Li.set})}};function tn(h,m,g,E,A){this.onFulfilled=typeof h=="function"?h:null,this.onRejected=typeof m=="function"?m:null,this.resolve=g,this.reject=E,this.psd=A}function Tr(h,m){var g,E;nr.push(m),h._state===null&&(g=h._lib&&Yn(),m=pn(m),h._state=!1,h._value=m,E=h,mi.some(function(A){return A._value===E._value})||mi.push(E),Yr(h),g&&Sr())}function Yr(h){var m=h._listeners;h._listeners=[];for(var g=0,E=m.length;g<E;++g)dr(h,m[g]);var A=h._PSD;--A.ref||A.finalize(),br===0&&(++br,ws(function(){--br==0&&_o()},[]))}function dr(h,m){if(h._state!==null){var g=h._state?m.onFulfilled:m.onRejected;if(g===null)return(h._state?m.resolve:m.reject)(h._value);++m.psd.ref,++br,ws(au,[g,h,m])}else h._listeners.push(m)}function au(h,m,g){try{var E,A=m._value;!m._state&&nr.length&&(nr=[]),E=Mn&&m._consoleTask?m._consoleTask.run(function(){return h(A)}):h(A),m._state||nr.indexOf(A)!==-1||(function(w){for(var D=mi.length;D;)if(mi[--D]._value===w._value)return mi.splice(D,1)})(m),g.resolve(E)}catch(w){g.reject(w)}finally{--br==0&&_o(),--g.psd.ref||g.psd.finalize()}}function rl(){jn(gn,function(){Yn()&&Sr()})}function Yn(){var h=ha;return Rs=ha=!1,h}function Sr(){var h,m,g;do for(;0<ns.length;)for(h=ns,ns=[],g=h.length,m=0;m<g;++m){var E=h[m];E[0].apply(null,E[1])}while(0<ns.length);Rs=ha=!0}function _o(){var h=mi;mi=[],h.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var m=Cs.slice(0),g=m.length;g;)m[--g]()}function pi(h){return new Re(ts,!1,h)}function kt(h,m){var g=Ne;return function(){var E=Yn(),A=Ne;try{return $r(g,!0),h.apply(this,arguments)}catch(w){m&&m(w)}finally{$r(A,!1),E&&Sr()}}}x(Re.prototype,{then:Li,_then:function(h,m){dr(this,new tn(null,null,h,m,Ne))},catch:function(h){if(arguments.length===1)return this.then(null,h);var m=h,g=arguments[1];return typeof m=="function"?this.then(null,function(E){return(E instanceof m?g:pi)(E)}):this.then(null,function(E){return(E&&E.name===m?g:pi)(E)})},finally:function(h){return this.then(function(m){return Re.resolve(h()).then(function(){return m})},function(m){return Re.resolve(h()).then(function(){return pi(m)})})},timeout:function(h,m){var g=this;return h<1/0?new Re(function(E,A){var w=setTimeout(function(){return A(new Me.Timeout(m))},h);g.then(E,A).finally(clearTimeout.bind(null,w))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&fe(Re.prototype,Symbol.toStringTag,"Dexie.Promise"),gn.env=Eo(),x(Re,{all:function(){var h=ke.apply(null,arguments).map(Ui);return new Re(function(m,g){h.length===0&&m([]);var E=h.length;h.forEach(function(A,w){return Re.resolve(A).then(function(D){h[w]=D,--E||m(h)},g)})})},resolve:function(h){return h instanceof Re?h:h&&typeof h.then=="function"?new Re(function(m,g){h.then(m,g)}):new Re(ts,!0,h)},reject:pi,race:function(){var h=ke.apply(null,arguments).map(Ui);return new Re(function(m,g){h.map(function(E){return Re.resolve(E).then(m,g)})})},PSD:{get:function(){return Ne},set:function(h){return Ne=h}},totalEchoes:{get:function(){return rr}},newPSD:Pt,usePSD:jn,scheduler:{get:function(){return ws},set:function(h){ws=h}},rejectionMapper:{get:function(){return pn},set:function(h){pn=h}},follow:function(h,m){return new Re(function(g,E){return Pt(function(A,w){var D=Ne;D.unhandleds=[],D.onunhandled=w,D.finalize=Hr(function(){var k,q=this;k=function(){q.unhandleds.length===0?A():w(q.unhandleds[0])},Cs.push(function H(){k(),Cs.splice(Cs.indexOf(H),1)}),++br,ws(function(){--br==0&&_o()},[])},D.finalize),h()},m,g,E)})}}),Gr&&(Gr.allSettled&&fe(Re,"allSettled",function(){var h=ke.apply(null,arguments).map(Ui);return new Re(function(m){h.length===0&&m([]);var g=h.length,E=new Array(g);h.forEach(function(A,w){return Re.resolve(A).then(function(D){return E[w]={status:"fulfilled",value:D}},function(D){return E[w]={status:"rejected",reason:D}}).then(function(){return--g||m(E)})})})}),Gr.any&&typeof AggregateError<"u"&&fe(Re,"any",function(){var h=ke.apply(null,arguments).map(Ui);return new Re(function(m,g){h.length===0&&g(new AggregateError([]));var E=h.length,A=new Array(E);h.forEach(function(w,D){return Re.resolve(w).then(function(k){return m(k)},function(k){A[D]=k,--E||g(new AggregateError(A))})})})}),Gr.withResolvers&&(Re.withResolvers=Gr.withResolvers));var Jt={awaits:0,echoes:0,id:0},Is=0,Ar=[],Os=0,rr=0,Qr=0;function Pt(h,m,g,E){var A=Ne,w=Object.create(A);return w.parent=A,w.ref=0,w.global=!1,w.id=++Qr,gn.env,w.env=di?{Promise:Re,PromiseProp:{value:Re,configurable:!0,writable:!0},all:Re.all,race:Re.race,allSettled:Re.allSettled,any:Re.any,resolve:Re.resolve,reject:Re.reject}:{},m&&_(w,m),++A.ref,w.finalize=function(){--this.parent.ref||this.parent.finalize()},E=jn(w,h,g,E),w.ref===0&&w.finalize(),E}function Gt(){return Jt.id||(Jt.id=++Is),++Jt.awaits,Jt.echoes+=zn,Jt.id}function kn(){return!!Jt.awaits&&(--Jt.awaits==0&&(Jt.id=0),Jt.echoes=Jt.awaits*zn,!0)}function Ui(h){return Jt.echoes&&h&&h.constructor===Gr?(Gt(),h.then(function(m){return kn(),m},function(m){return kn(),It(m)})):h}function ou(){var h=Ar[Ar.length-1];Ar.pop(),$r(h,!1)}function $r(h,m){var g,E=Ne;(m?!Jt.echoes||Os++&&h===Ne:!Os||--Os&&h===Ne)||queueMicrotask(m?(function(A){++rr,Jt.echoes&&--Jt.echoes!=0||(Jt.echoes=Jt.awaits=Jt.id=0),Ar.push(Ne),$r(A,!0)}).bind(null,h):ou),h!==Ne&&(Ne=h,E===gn&&(gn.env=Eo()),di&&(g=gn.env.Promise,m=h.env,(E.global||h.global)&&(Object.defineProperty(u,"Promise",m.PromiseProp),g.all=m.all,g.race=m.race,g.resolve=m.resolve,g.reject=m.reject,m.allSettled&&(g.allSettled=m.allSettled),m.any&&(g.any=m.any))))}function Eo(){var h=u.Promise;return di?{Promise:h,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:h.all,race:h.race,allSettled:h.allSettled,any:h.any,resolve:h.resolve,reject:h.reject}:{}}function jn(h,m,g,E,A){var w=Ne;try{return $r(h,!0),m(g,E,A)}finally{$r(w,!1)}}function Ds(h,m,g,E){return typeof h!="function"?h:function(){var A=Ne;g&&Gt(),$r(m,!0);try{return h.apply(this,arguments)}finally{$r(A,!1),E&&queueMicrotask(kn)}}}function wr(h){Promise===Gr&&Jt.echoes===0?Os===0?h():enqueueNativeMicroTask(h):setTimeout(h,0)}(""+yr).indexOf("[native code]")===-1&&(Gt=kn=wt);var It=Re.reject,yn="",Sn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",nn="String expected.",gi=[],rs="__dbnames",Rr="readonly",Cr="readwrite";function Xr(h,m){return h?m?function(){return h.apply(this,arguments)&&m.apply(this,arguments)}:h:m}var fa={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function is(h){return typeof h!="string"||/\./.test(h)?function(m){return m}:function(m){return m[h]===void 0&&h in m&&delete(m=N(m))[h],m}}function bo(){throw Me.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ot(h,m){try{var g=ir(h),E=ir(m);if(g!==E)return g==="Array"?1:E==="Array"?-1:g==="binary"?1:E==="binary"?-1:g==="string"?1:E==="string"?-1:g==="Date"?1:E!=="Date"?NaN:-1;switch(g){case"number":case"Date":case"string":return m<h?1:h<m?-1:0;case"binary":return(function(A,w){for(var D=A.length,k=w.length,q=D<k?D:k,H=0;H<q;++H)if(A[H]!==w[H])return A[H]<w[H]?-1:1;return D===k?0:D<k?-1:1})(rn(h),rn(m));case"Array":return(function(A,w){for(var D=A.length,k=w.length,q=D<k?D:k,H=0;H<q;++H){var $=ot(A[H],w[H]);if($!==0)return $}return D===k?0:D<k?-1:1})(h,m)}}catch{}return NaN}function ir(h){var m=typeof h;return m!="object"?m:ArrayBuffer.isView(h)?"binary":(h=Ft(h),h==="ArrayBuffer"?"binary":h)}function rn(h){return h instanceof Uint8Array?h:ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):new Uint8Array(h)}function sn(h,m,g){var E=h.schema.yProps;return E?(m&&0<g.numFailures&&(m=m.filter(function(A,w){return!g.failures[w]})),Promise.all(E.map(function(A){return A=A.updatesTable,m?h.db.table(A).where("k").anyOf(m).delete():h.db.table(A).clear()})).then(function(){return g})):g}var Ir=(da.prototype.execute=function(h){var m=this["@@propmod"];if(m.add!==void 0){var g=m.add;if(y(g))return o(o([],y(h)?h:[],!0),g).sort();if(typeof g=="number")return(Number(h)||0)+g;if(typeof g=="bigint")try{return BigInt(h)+g}catch{return BigInt(0)+g}throw new TypeError("Invalid term ".concat(g))}if(m.remove!==void 0){var E=m.remove;if(y(E))return y(h)?h.filter(function(A){return!E.includes(A)}).sort():[];if(typeof E=="number")return Number(h)-E;if(typeof E=="bigint")try{return BigInt(h)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return g=(g=m.replacePrefix)===null||g===void 0?void 0:g[0],g&&typeof h=="string"&&h.startsWith(g)?m.replacePrefix[1]+h.substring(g.length):h},da);function da(h){this["@@propmod"]=h}function Dt(h,m){for(var g=d(m),E=g.length,A=!1,w=0;w<E;++w){var D=g[w],k=m[D],q=nt(h,D);k instanceof Ir?(V(h,D,k.execute(q)),A=!0):q!==k&&(V(h,D,k),A=!0)}return A}var ss=(yt.prototype._trans=function(h,m,g){var E=this._tx||Ne.trans,A=this.name,w=Mn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(h==="readonly"?"read":"write"," ").concat(this.name));function D(H,$,U){if(!U.schema[A])throw new Me.NotFound("Table "+A+" not part of transaction");return m(U.idbtrans,U)}var k=Yn();try{var q=E&&E.db._novip===this.db._novip?E===Ne.trans?E._promise(h,D,g):Pt(function(){return E._promise(h,D,g)},{trans:E,transless:Ne.transless||Ne}):(function H($,U,J,F){if($.idbdb&&($._state.openComplete||Ne.letThrough||$._vip)){var Y=$._createTransaction(U,J,$._dbSchema);try{Y.create(),$._state.PR1398_maxLoop=3}catch(Q){return Q.name===pt.InvalidState&&$.isOpen()&&0<--$._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),$.close({disableAutoOpen:!1}),$.open().then(function(){return H($,U,J,F)})):It(Q)}return Y._promise(U,function(Q,X){return Pt(function(){return Ne.trans=Y,F(Q,X,Y)})}).then(function(Q){if(U==="readwrite")try{Y.idbtrans.commit()}catch{}return U==="readonly"?Q:Y._completion.then(function(){return Q})})}if($._state.openComplete)return It(new Me.DatabaseClosed($._state.dbOpenError));if(!$._state.isBeingOpened){if(!$._state.autoOpen)return It(new Me.DatabaseClosed);$.open().catch(wt)}return $._state.dbReadyPromise.then(function(){return H($,U,J,F)})})(this.db,h,[this.name],D);return w&&(q._consoleTask=w,q=q.catch(function(H){return console.trace(H),It(H)})),q}finally{k&&Sr()}},yt.prototype.get=function(h,m){var g=this;return h&&h.constructor===Object?this.where(h).first(m):h==null?It(new Me.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return g.core.get({trans:E,key:h}).then(function(A){return g.hook.reading.fire(A)})}).then(m)},yt.prototype.where=function(h){if(typeof h=="string")return new this.db.WhereClause(this,h);if(y(h))return new this.db.WhereClause(this,"[".concat(h.join("+"),"]"));var m=d(h);if(m.length===1)return this.where(m[0]).equals(h[m[0]]);var g=this.schema.indexes.concat(this.schema.primKey).filter(function(k){if(k.compound&&m.every(function(H){return 0<=k.keyPath.indexOf(H)})){for(var q=0;q<m.length;++q)if(m.indexOf(k.keyPath[q])===-1)return!1;return!0}return!1}).sort(function(k,q){return k.keyPath.length-q.keyPath.length})[0];if(g&&this.db._maxKey!==yn){var w=g.keyPath.slice(0,m.length);return this.where(w).equals(w.map(function(q){return h[q]}))}!g&&Mn&&console.warn("The query ".concat(JSON.stringify(h)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(m.join("+"),"]"));var E=this.schema.idxByName;function A(k,q){return ot(k,q)===0}var D=m.reduce(function(U,q){var H=U[0],$=U[1],U=E[q],J=h[q];return[H||U,H||!U?Xr($,U&&U.multi?function(F){return F=nt(F,q),y(F)&&F.some(function(Y){return A(J,Y)})}:function(F){return A(J,nt(F,q))}):$]},[null,null]),w=D[0],D=D[1];return w?this.where(w.name).equals(h[w.keyPath]).filter(D):g?this.filter(D):this.where(m).equals("")},yt.prototype.filter=function(h){return this.toCollection().and(h)},yt.prototype.count=function(h){return this.toCollection().count(h)},yt.prototype.offset=function(h){return this.toCollection().offset(h)},yt.prototype.limit=function(h){return this.toCollection().limit(h)},yt.prototype.each=function(h){return this.toCollection().each(h)},yt.prototype.toArray=function(h){return this.toCollection().toArray(h)},yt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},yt.prototype.orderBy=function(h){return new this.db.Collection(new this.db.WhereClause(this,y(h)?"[".concat(h.join("+"),"]"):h))},yt.prototype.reverse=function(){return this.toCollection().reverse()},yt.prototype.mapToClass=function(h){var m,g=this.db,E=this.name;function A(){return m!==null&&m.apply(this,arguments)||this}(this.schema.mappedClass=h).prototype instanceof bo&&((function(q,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function $(){this.constructor=q}n(q,H),q.prototype=H===null?Object.create(H):($.prototype=H.prototype,new $)})(A,m=h),Object.defineProperty(A.prototype,"db",{get:function(){return g},enumerable:!1,configurable:!0}),A.prototype.table=function(){return E},h=A);for(var w=new Set,D=h.prototype;D;D=b(D))Object.getOwnPropertyNames(D).forEach(function(q){return w.add(q)});function k(q){if(!q)return q;var H,$=Object.create(h.prototype);for(H in q)if(!w.has(H))try{$[H]=q[H]}catch{}return $}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=k,this.hook("reading",k),h},yt.prototype.defineClass=function(){return this.mapToClass(function(h){_(this,h)})},yt.prototype.add=function(h,m){var g=this,E=this.schema.primKey,A=E.auto,w=E.keyPath,D=h;return w&&A&&(D=is(w)(h)),this._trans("readwrite",function(k){return g.core.mutate({trans:k,type:"add",keys:m!=null?[m]:null,values:[D]})}).then(function(k){return k.numFailures?Re.reject(k.failures[0]):k.lastResult}).then(function(k){if(w)try{V(h,w,k)}catch{}return k})},yt.prototype.upsert=function(h,m){var g=this,E=this.schema.primKey.keyPath;return this._trans("readwrite",function(A){return g.core.get({trans:A,key:h}).then(function(w){var D=w??{};return Dt(D,m),E&&V(D,E,h),g.core.mutate({trans:A,type:"put",values:[D],keys:[h],upsert:!0,updates:{keys:[h],changeSpecs:[m]}}).then(function(k){return k.numFailures?Re.reject(k.failures[0]):!!w})})})},yt.prototype.update=function(h,m){return typeof h!="object"||y(h)?this.where(":id").equals(h).modify(m):(h=nt(h,this.schema.primKey.keyPath),h===void 0?It(new Me.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(h).modify(m))},yt.prototype.put=function(h,m){var g=this,E=this.schema.primKey,A=E.auto,w=E.keyPath,D=h;return w&&A&&(D=is(w)(h)),this._trans("readwrite",function(k){return g.core.mutate({trans:k,type:"put",values:[D],keys:m!=null?[m]:null})}).then(function(k){return k.numFailures?Re.reject(k.failures[0]):k.lastResult}).then(function(k){if(w)try{V(h,w,k)}catch{}return k})},yt.prototype.delete=function(h){var m=this;return this._trans("readwrite",function(g){return m.core.mutate({trans:g,type:"delete",keys:[h]}).then(function(E){return sn(m,[h],E)}).then(function(E){return E.numFailures?Re.reject(E.failures[0]):void 0})})},yt.prototype.clear=function(){var h=this;return this._trans("readwrite",function(m){return h.core.mutate({trans:m,type:"deleteRange",range:fa}).then(function(g){return sn(h,null,g)})}).then(function(m){return m.numFailures?Re.reject(m.failures[0]):void 0})},yt.prototype.bulkGet=function(h){var m=this;return this._trans("readonly",function(g){return m.core.getMany({keys:h,trans:g}).then(function(E){return E.map(function(A){return m.hook.reading.fire(A)})})})},yt.prototype.bulkAdd=function(h,m,g){var E=this,A=Array.isArray(m)?m:void 0,w=(g=g||(A?void 0:m))?g.allKeys:void 0;return this._trans("readwrite",function(D){var H=E.schema.primKey,k=H.auto,H=H.keyPath;if(H&&A)throw new Me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(A&&A.length!==h.length)throw new Me.InvalidArgument("Arguments objects and keys must have the same length");var q=h.length,H=H&&k?h.map(is(H)):h;return E.core.mutate({trans:D,type:"add",keys:A,values:H,wantResults:w}).then(function(Y){var U=Y.numFailures,J=Y.results,F=Y.lastResult,Y=Y.failures;if(U===0)return w?J:F;throw new Ze("".concat(E.name,".bulkAdd(): ").concat(U," of ").concat(q," operations failed"),Y)})})},yt.prototype.bulkPut=function(h,m,g){var E=this,A=Array.isArray(m)?m:void 0,w=(g=g||(A?void 0:m))?g.allKeys:void 0;return this._trans("readwrite",function(D){var H=E.schema.primKey,k=H.auto,H=H.keyPath;if(H&&A)throw new Me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(A&&A.length!==h.length)throw new Me.InvalidArgument("Arguments objects and keys must have the same length");var q=h.length,H=H&&k?h.map(is(H)):h;return E.core.mutate({trans:D,type:"put",keys:A,values:H,wantResults:w}).then(function(Y){var U=Y.numFailures,J=Y.results,F=Y.lastResult,Y=Y.failures;if(U===0)return w?J:F;throw new Ze("".concat(E.name,".bulkPut(): ").concat(U," of ").concat(q," operations failed"),Y)})})},yt.prototype.bulkUpdate=function(h){var m=this,g=this.core,E=h.map(function(D){return D.key}),A=h.map(function(D){return D.changes}),w=[];return this._trans("readwrite",function(D){return g.getMany({trans:D,keys:E,cache:"clone"}).then(function(k){var q=[],H=[];h.forEach(function(U,J){var F=U.key,Y=U.changes,Q=k[J];if(Q){for(var X=0,te=Object.keys(Y);X<te.length;X++){var ie=te[X],ce=Y[ie];if(ie===m.schema.primKey.keyPath){if(ot(ce,F)!==0)throw new Me.Constraint("Cannot update primary key in bulkUpdate()")}else V(Q,ie,ce)}w.push(J),q.push(F),H.push(Q)}});var $=q.length;return g.mutate({trans:D,type:"put",keys:q,values:H,updates:{keys:E,changeSpecs:A}}).then(function(U){var J=U.numFailures,F=U.failures;if(J===0)return $;for(var Y=0,Q=Object.keys(F);Y<Q.length;Y++){var X,te=Q[Y],ie=w[Number(te)];ie!=null&&(X=F[te],delete F[te],F[ie]=X)}throw new Ze("".concat(m.name,".bulkUpdate(): ").concat(J," of ").concat($," operations failed"),F)})})})},yt.prototype.bulkDelete=function(h){var m=this,g=h.length;return this._trans("readwrite",function(E){return m.core.mutate({trans:E,type:"delete",keys:h}).then(function(A){return sn(m,h,A)})}).then(function(D){var A=D.numFailures,w=D.lastResult,D=D.failures;if(A===0)return w;throw new Ze("".concat(m.name,".bulkDelete(): ").concat(A," of ").concat(g," operations failed"),D)})},yt);function yt(){}function Jr(h){function m(D,k){if(k){for(var q=arguments.length,H=new Array(q-1);--q;)H[q-1]=arguments[q];return g[D].subscribe.apply(null,H),h}if(typeof D=="string")return g[D]}var g={};m.addEventType=w;for(var E=1,A=arguments.length;E<A;++E)w(arguments[E]);return m;function w(D,k,q){if(typeof D!="object"){var H;k=k||cn;var $={subscribers:[],fire:q=q||wt,subscribe:function(U){$.subscribers.indexOf(U)===-1&&($.subscribers.push(U),$.fire=k($.fire,U))},unsubscribe:function(U){$.subscribers=$.subscribers.filter(function(J){return J!==U}),$.fire=$.subscribers.reduce(k,q)}};return g[D]=m[D]=$}d(H=D).forEach(function(U){var J=H[U];if(y(J))w(U,H[U][0],H[U][1]);else{if(J!=="asap")throw new Me.InvalidArgument("Invalid event config");var F=w(U,hi,function(){for(var Y=arguments.length,Q=new Array(Y);Y--;)Q[Y]=arguments[Y];F.subscribers.forEach(function(X){ft(function(){X.apply(null,Q)})})})}})}}function An(h,m){return _e(m).from({prototype:h}),m}function Zr(h,m){return!(h.filter||h.algorithm||h.or)&&(m?h.justLimit:!h.replayFilter)}function ma(h,m){h.filter=Xr(h.filter,m)}function xs(h,m,g){var E=h.replayFilter;h.replayFilter=E?function(){return Xr(E(),m())}:m,h.justLimit=g&&!E}function Wr(h,m){if(h.isPrimKey)return m.primaryKey;var g=m.getIndexByKeyPath(h.index);if(!g)throw new Me.Schema("KeyPath "+h.index+" on object store "+m.name+" is not indexed");return g}function To(h,m,g){var E=Wr(h,m.schema);return m.openCursor({trans:g,values:!h.keysOnly,reverse:h.dir==="prev",unique:!!h.unique,query:{index:E,range:h.range}})}function ei(h,m,g,E){var A=h.replayFilter?Xr(h.filter,h.replayFilter()):h.filter;if(h.or){var w={},D=function(k,q,H){var $,U;A&&!A(q,H,function(J){return q.stop(J)},function(J){return q.fail(J)})||((U=""+($=q.primaryKey))=="[object ArrayBuffer]"&&(U=""+new Uint8Array($)),O(w,U)||(w[U]=!0,m(k,q,H)))};return Promise.all([h.or._iterate(D,g),Qn(To(h,E,g),h.algorithm,D,!h.keysOnly&&h.valueMapper)])}return Qn(To(h,E,g),Xr(h.algorithm,A),m,!h.keysOnly&&h.valueMapper)}function Qn(h,m,g,E){var A=kt(E?function(w,D,k){return g(E(w),D,k)}:g);return h.then(function(w){if(w)return w.start(function(){var D=function(){return w.continue()};m&&!m(w,function(k){return D=k},function(k){w.stop(k),D=wt},function(k){w.fail(k),D=wt})||A(w.value,w,function(k){return D=k}),D()})})}var il=(gt.prototype._read=function(h,m){var g=this._ctx;return g.error?g.table._trans(null,It.bind(null,g.error)):g.table._trans("readonly",h).then(m)},gt.prototype._write=function(h){var m=this._ctx;return m.error?m.table._trans(null,It.bind(null,m.error)):m.table._trans("readwrite",h,"locked")},gt.prototype._addAlgorithm=function(h){var m=this._ctx;m.algorithm=Xr(m.algorithm,h)},gt.prototype._iterate=function(h,m){return ei(this._ctx,h,m,this._ctx.table.core)},gt.prototype.clone=function(h){var m=Object.create(this.constructor.prototype),g=Object.create(this._ctx);return h&&_(g,h),m._ctx=g,m},gt.prototype.raw=function(){return this._ctx.valueMapper=null,this},gt.prototype.each=function(h){var m=this._ctx;return this._read(function(g){return ei(m,h,g,m.table.core)})},gt.prototype.count=function(h){var m=this;return this._read(function(g){var E=m._ctx,A=E.table.core;if(Zr(E,!0))return A.count({trans:g,query:{index:Wr(E,A.schema),range:E.range}}).then(function(D){return Math.min(D,E.limit)});var w=0;return ei(E,function(){return++w,!1},g,A).then(function(){return w})}).then(h)},gt.prototype.sortBy=function(h,m){var g=h.split(".").reverse(),E=g[0],A=g.length-1;function w(q,H){return H?w(q[g[H]],H-1):q[E]}var D=this._ctx.dir==="next"?1:-1;function k(q,H){return ot(w(q,A),w(H,A))*D}return this.toArray(function(q){return q.sort(k)}).then(m)},gt.prototype.toArray=function(h){var m=this;return this._read(function(g){var E=m._ctx;if(E.dir==="next"&&Zr(E,!0)&&0<E.limit){var A=E.valueMapper,w=Wr(E,E.table.core.schema);return E.table.core.query({trans:g,limit:E.limit,values:!0,query:{index:w,range:E.range}}).then(function(k){return k=k.result,A?k.map(A):k})}var D=[];return ei(E,function(k){return D.push(k)},g,E.table.core).then(function(){return D})},h)},gt.prototype.offset=function(h){var m=this._ctx;return h<=0||(m.offset+=h,Zr(m)?xs(m,function(){var g=h;return function(E,A){return g===0||(g===1?--g:A(function(){E.advance(g),g=0}),!1)}}):xs(m,function(){var g=h;return function(){return--g<0}})),this},gt.prototype.limit=function(h){return this._ctx.limit=Math.min(this._ctx.limit,h),xs(this._ctx,function(){var m=h;return function(g,E,A){return--m<=0&&E(A),0<=m}},!0),this},gt.prototype.until=function(h,m){return ma(this._ctx,function(g,E,A){return!h(g.value)||(E(A),m)}),this},gt.prototype.first=function(h){return this.limit(1).toArray(function(m){return m[0]}).then(h)},gt.prototype.last=function(h){return this.reverse().first(h)},gt.prototype.filter=function(h){var m;return ma(this._ctx,function(g){return h(g.value)}),(m=this._ctx).isMatch=Xr(m.isMatch,h),this},gt.prototype.and=function(h){return this.filter(h)},gt.prototype.or=function(h){return new this.db.WhereClause(this._ctx.table,h,this)},gt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},gt.prototype.desc=function(){return this.reverse()},gt.prototype.eachKey=function(h){var m=this._ctx;return m.keysOnly=!m.isMatch,this.each(function(g,E){h(E.key,E)})},gt.prototype.eachUniqueKey=function(h){return this._ctx.unique="unique",this.eachKey(h)},gt.prototype.eachPrimaryKey=function(h){var m=this._ctx;return m.keysOnly=!m.isMatch,this.each(function(g,E){h(E.primaryKey,E)})},gt.prototype.keys=function(h){var m=this._ctx;m.keysOnly=!m.isMatch;var g=[];return this.each(function(E,A){g.push(A.key)}).then(function(){return g}).then(h)},gt.prototype.primaryKeys=function(h){var m=this._ctx;if(m.dir==="next"&&Zr(m,!0)&&0<m.limit)return this._read(function(E){var A=Wr(m,m.table.core.schema);return m.table.core.query({trans:E,values:!1,limit:m.limit,query:{index:A,range:m.range}})}).then(function(E){return E.result}).then(h);m.keysOnly=!m.isMatch;var g=[];return this.each(function(E,A){g.push(A.primaryKey)}).then(function(){return g}).then(h)},gt.prototype.uniqueKeys=function(h){return this._ctx.unique="unique",this.keys(h)},gt.prototype.firstKey=function(h){return this.limit(1).keys(function(m){return m[0]}).then(h)},gt.prototype.lastKey=function(h){return this.reverse().firstKey(h)},gt.prototype.distinct=function(){var h=this._ctx,h=h.index&&h.table.schema.idxByName[h.index];if(!h||!h.multi)return this;var m={};return ma(this._ctx,function(A){var E=A.primaryKey.toString(),A=O(m,E);return m[E]=!0,!A}),this},gt.prototype.modify=function(h){var m=this,g=this._ctx;return this._write(function(E){var A=typeof h=="function"?h:function(Q){return Dt(Q,h)},w=g.table.core,H=w.schema.primaryKey,D=H.outbound,k=H.extractKey,q=200,H=m.db._options.modifyChunkSize;H&&(q=typeof H=="object"?H[w.name]||H["*"]||200:H);function $(Q,ie){var te=ie.failures,ie=ie.numFailures;J+=Q-ie;for(var ce=0,pe=d(te);ce<pe.length;ce++){var Te=pe[ce];U.push(te[Te])}}var U=[],J=0,F=[],Y=h===pa;return m.clone().primaryKeys().then(function(Q){function X(ie){var ce=Math.min(q,Q.length-ie),pe=Q.slice(ie,ie+ce);return(Y?Promise.resolve([]):w.getMany({trans:E,keys:pe,cache:"immutable"})).then(function(Te){var xe=[],Ee=[],Ae=D?[]:null,De=Y?pe:[];if(!Y)for(var be=0;be<ce;++be){var Ve=Te[be],Ke={value:N(Ve),primKey:Q[ie+be]};A.call(Ke,Ke.value,Ke)!==!1&&(Ke.value==null?De.push(Q[ie+be]):D||ot(k(Ve),k(Ke.value))===0?(Ee.push(Ke.value),D&&Ae.push(Q[ie+be])):(De.push(Q[ie+be]),xe.push(Ke.value)))}return Promise.resolve(0<xe.length&&w.mutate({trans:E,type:"add",values:xe}).then(function(et){for(var lt in et.failures)De.splice(parseInt(lt),1);$(xe.length,et)})).then(function(){return(0<Ee.length||te&&typeof h=="object")&&w.mutate({trans:E,type:"put",keys:Ae,values:Ee,criteria:te,changeSpec:typeof h!="function"&&h,isAdditionalChunk:0<ie}).then(function(et){return $(Ee.length,et)})}).then(function(){return(0<De.length||te&&Y)&&w.mutate({trans:E,type:"delete",keys:De,criteria:te,isAdditionalChunk:0<ie}).then(function(et){return sn(g.table,De,et)}).then(function(et){return $(De.length,et)})}).then(function(){return Q.length>ie+ce&&X(ie+q)})})}var te=Zr(g)&&g.limit===1/0&&(typeof h!="function"||Y)&&{index:g.index,range:g.range};return X(0).then(function(){if(0<U.length)throw new $e("Error modifying one or more objects",U,J,F);return Q.length})})})},gt.prototype.delete=function(){var h=this._ctx,m=h.range;return!Zr(h)||h.table.schema.yProps||!h.isPrimKey&&m.type!==3?this.modify(pa):this._write(function(g){var E=h.table.core.schema.primaryKey,A=m;return h.table.core.count({trans:g,query:{index:E,range:A}}).then(function(w){return h.table.core.mutate({trans:g,type:"deleteRange",range:A}).then(function(q){var k=q.failures,q=q.numFailures;if(q)throw new $e("Could not delete some values",Object.keys(k).map(function(H){return k[H]}),w-q);return w-q})})})},gt);function gt(){}var pa=function(h,m){return m.value=null};function ga(h,m){return h<m?-1:h===m?0:1}function sl(h,m){return m<h?-1:h===m?0:1}function hn(h,m,g){return h=h instanceof zi?new h.Collection(h):h,h._ctx.error=new(g||TypeError)(m),h}function ti(h){return new h.Collection(h,function(){return mr("")}).limit(0)}function sr(h,m,g,E){var A,w,D,k,q,H,$,U=g.length;if(!g.every(function(Y){return typeof Y=="string"}))return hn(h,nn);function J(Y){A=Y==="next"?function(X){return X.toUpperCase()}:function(X){return X.toLowerCase()},w=Y==="next"?function(X){return X.toLowerCase()}:function(X){return X.toUpperCase()},D=Y==="next"?ga:sl;var Q=g.map(function(X){return{lower:w(X),upper:A(X)}}).sort(function(X,te){return D(X.lower,te.lower)});k=Q.map(function(X){return X.upper}),q=Q.map(function(X){return X.lower}),$=(H=Y)==="next"?"":E}J("next"),h=new h.Collection(h,function(){return Or(k[0],q[U-1]+E)}),h._ondirectionchange=function(Y){J(Y)};var F=0;return h._addAlgorithm(function(Y,Q,X){var te=Y.key;if(typeof te!="string")return!1;var ie=w(te);if(m(ie,q,F))return!0;for(var ce=null,pe=F;pe<U;++pe){var Te=(function(xe,Ee,Ae,De,be,Ve){for(var Ke=Math.min(xe.length,De.length),et=-1,lt=0;lt<Ke;++lt){var Hn=Ee[lt];if(Hn!==De[lt])return be(xe[lt],Ae[lt])<0?xe.substr(0,lt)+Ae[lt]+Ae.substr(lt+1):be(xe[lt],De[lt])<0?xe.substr(0,lt)+De[lt]+Ae.substr(lt+1):0<=et?xe.substr(0,et)+Ee[et]+Ae.substr(et+1):null;be(xe[lt],Hn)<0&&(et=lt)}return Ke<De.length&&Ve==="next"?xe+Ae.substr(xe.length):Ke<xe.length&&Ve==="prev"?xe.substr(0,Ae.length):et<0?null:xe.substr(0,et)+De[et]+Ae.substr(et+1)})(te,ie,k[pe],q[pe],D,H);Te===null&&ce===null?F=pe+1:(ce===null||0<D(ce,Te))&&(ce=Te)}return Q(ce!==null?function(){Y.continue(ce+$)}:X),!1}),h}function Or(h,m,g,E){return{type:2,lower:h,upper:m,lowerOpen:g,upperOpen:E}}function mr(h){return{type:1,lower:h,upper:h}}var zi=(Object.defineProperty(Lt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Lt.prototype.between=function(h,m,g,E){g=g!==!1,E=E===!0;try{return 0<this._cmp(h,m)||this._cmp(h,m)===0&&(g||E)&&(!g||!E)?ti(this):new this.Collection(this,function(){return Or(h,m,!g,!E)})}catch{return hn(this,Sn)}},Lt.prototype.equals=function(h){return h==null?hn(this,Sn):new this.Collection(this,function(){return mr(h)})},Lt.prototype.above=function(h){return h==null?hn(this,Sn):new this.Collection(this,function(){return Or(h,void 0,!0)})},Lt.prototype.aboveOrEqual=function(h){return h==null?hn(this,Sn):new this.Collection(this,function(){return Or(h,void 0,!1)})},Lt.prototype.below=function(h){return h==null?hn(this,Sn):new this.Collection(this,function(){return Or(void 0,h,!1,!0)})},Lt.prototype.belowOrEqual=function(h){return h==null?hn(this,Sn):new this.Collection(this,function(){return Or(void 0,h)})},Lt.prototype.startsWith=function(h){return typeof h!="string"?hn(this,nn):this.between(h,h+yn,!0,!0)},Lt.prototype.startsWithIgnoreCase=function(h){return h===""?this.startsWith(h):sr(this,function(m,g){return m.indexOf(g[0])===0},[h],yn)},Lt.prototype.equalsIgnoreCase=function(h){return sr(this,function(m,g){return m===g[0]},[h],"")},Lt.prototype.anyOfIgnoreCase=function(){var h=ke.apply(je,arguments);return h.length===0?ti(this):sr(this,function(m,g){return g.indexOf(m)!==-1},h,"")},Lt.prototype.startsWithAnyOfIgnoreCase=function(){var h=ke.apply(je,arguments);return h.length===0?ti(this):sr(this,function(m,g){return g.some(function(E){return m.indexOf(E)===0})},h,yn)},Lt.prototype.anyOf=function(){var h=this,m=ke.apply(je,arguments),g=this._cmp;try{m.sort(g)}catch{return hn(this,Sn)}if(m.length===0)return ti(this);var E=new this.Collection(this,function(){return Or(m[0],m[m.length-1])});E._ondirectionchange=function(w){g=w==="next"?h._ascending:h._descending,m.sort(g)};var A=0;return E._addAlgorithm(function(w,D,k){for(var q=w.key;0<g(q,m[A]);)if(++A===m.length)return D(k),!1;return g(q,m[A])===0||(D(function(){w.continue(m[A])}),!1)}),E},Lt.prototype.notEqual=function(h){return this.inAnyRange([[-1/0,h],[h,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Lt.prototype.noneOf=function(){var h=ke.apply(je,arguments);if(h.length===0)return new this.Collection(this);try{h.sort(this._ascending)}catch{return hn(this,Sn)}var m=h.reduce(function(g,E){return g?g.concat([[g[g.length-1][1],E]]):[[-1/0,E]]},null);return m.push([h[h.length-1],this.db._maxKey]),this.inAnyRange(m,{includeLowers:!1,includeUppers:!1})},Lt.prototype.inAnyRange=function(te,m){var g=this,E=this._cmp,A=this._ascending,w=this._descending,D=this._min,k=this._max;if(te.length===0)return ti(this);if(!te.every(function(ie){return ie[0]!==void 0&&ie[1]!==void 0&&A(ie[0],ie[1])<=0}))return hn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Me.InvalidArgument);var q=!m||m.includeLowers!==!1,H=m&&m.includeUppers===!0,$,U=A;function J(ie,ce){return U(ie[0],ce[0])}try{($=te.reduce(function(ie,ce){for(var pe=0,Te=ie.length;pe<Te;++pe){var xe=ie[pe];if(E(ce[0],xe[1])<0&&0<E(ce[1],xe[0])){xe[0]=D(xe[0],ce[0]),xe[1]=k(xe[1],ce[1]);break}}return pe===Te&&ie.push(ce),ie},[])).sort(J)}catch{return hn(this,Sn)}var F=0,Y=H?function(ie){return 0<A(ie,$[F][1])}:function(ie){return 0<=A(ie,$[F][1])},Q=q?function(ie){return 0<w(ie,$[F][0])}:function(ie){return 0<=w(ie,$[F][0])},X=Y,te=new this.Collection(this,function(){return Or($[0][0],$[$.length-1][1],!q,!H)});return te._ondirectionchange=function(ie){U=ie==="next"?(X=Y,A):(X=Q,w),$.sort(J)},te._addAlgorithm(function(ie,ce,pe){for(var Te,xe=ie.key;X(xe);)if(++F===$.length)return ce(pe),!1;return!Y(Te=xe)&&!Q(Te)||(g._cmp(xe,$[F][1])===0||g._cmp(xe,$[F][0])===0||ce(function(){U===A?ie.continue($[F][0]):ie.continue($[F][1])}),!1)}),te},Lt.prototype.startsWithAnyOf=function(){var h=ke.apply(je,arguments);return h.every(function(m){return typeof m=="string"})?h.length===0?ti(this):this.inAnyRange(h.map(function(m){return[m,m+yn]})):hn(this,"startsWithAnyOf() only works with strings")},Lt);function Lt(){}function Bn(h){return kt(function(m){return yi(m),h(m.target.error),!1})}function yi(h){h.stopPropagation&&h.stopPropagation(),h.preventDefault&&h.preventDefault()}var Dr="storagemutated",pr="x-storagemutated-1",vn=Jr(null,Dr),Ns=(mt.prototype._lock=function(){return ct(!Ne.global),++this._reculock,this._reculock!==1||Ne.global||(Ne.lockOwnerFor=this),this},mt.prototype._unlock=function(){if(ct(!Ne.global),--this._reculock==0)for(Ne.global||(Ne.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var h=this._blockedFuncs.shift();try{jn(h[1],h[0])}catch{}}return this},mt.prototype._locked=function(){return this._reculock&&Ne.lockOwnerFor!==this},mt.prototype.create=function(h){var m=this;if(!this.mode)return this;var g=this.db.idbdb,E=this.db._state.dbOpenError;if(ct(!this.idbtrans),!h&&!g)switch(E&&E.name){case"DatabaseClosedError":throw new Me.DatabaseClosed(E);case"MissingAPIError":throw new Me.MissingAPI(E.message,E);default:throw new Me.OpenFailed(E)}if(!this.active)throw new Me.TransactionInactive;return ct(this._completion._state===null),(h=this.idbtrans=h||(this.db.core||g).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=kt(function(A){yi(A),m._reject(h.error)}),h.onabort=kt(function(A){yi(A),m.active&&m._reject(new Me.Abort(h.error)),m.active=!1,m.on("abort").fire(A)}),h.oncomplete=kt(function(){m.active=!1,m._resolve(),"mutatedParts"in h&&vn.storagemutated.fire(h.mutatedParts)}),this},mt.prototype._promise=function(h,m,g){var E=this;if(h==="readwrite"&&this.mode!=="readwrite")return It(new Me.ReadOnly("Transaction is readonly"));if(!this.active)return It(new Me.TransactionInactive);if(this._locked())return new Re(function(w,D){E._blockedFuncs.push([function(){E._promise(h,m,g).then(w,D)},Ne])});if(g)return Pt(function(){var w=new Re(function(D,k){E._lock();var q=m(D,k,E);q&&q.then&&q.then(D,k)});return w.finally(function(){return E._unlock()}),w._lib=!0,w});var A=new Re(function(w,D){var k=m(w,D,E);k&&k.then&&k.then(w,D)});return A._lib=!0,A},mt.prototype._root=function(){return this.parent?this.parent._root():this},mt.prototype.waitFor=function(h){var m,g=this._root(),E=Re.resolve(h);g._waitingFor?g._waitingFor=g._waitingFor.then(function(){return E}):(g._waitingFor=E,g._waitingQueue=[],m=g.idbtrans.objectStore(g.storeNames[0]),(function w(){for(++g._spinCount;g._waitingQueue.length;)g._waitingQueue.shift()();g._waitingFor&&(m.get(-1/0).onsuccess=w)})());var A=g._waitingFor;return new Re(function(w,D){E.then(function(k){return g._waitingQueue.push(kt(w.bind(null,k)))},function(k){return g._waitingQueue.push(kt(D.bind(null,k)))}).finally(function(){g._waitingFor===A&&(g._waitingFor=null)})})},mt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Me.Abort))},mt.prototype.table=function(h){var m=this._memoizedTables||(this._memoizedTables={});if(O(m,h))return m[h];var g=this.schema[h];if(!g)throw new Me.NotFound("Table "+h+" not part of transaction");return g=new this.db.Table(h,g,this),g.core=this.db.core.table(h),m[h]=g},mt);function mt(){}function xr(h,m,g,E,A,w,D,k){return{name:h,keyPath:m,unique:g,multi:E,auto:A,compound:w,src:(g&&!D?"&":"")+(E?"*":"")+(A?"++":"")+ya(m),type:k}}function ya(h){return typeof h=="string"?h:h?"["+[].join.call(h,"+")+"]":""}function ji(h,m,g){return{name:h,primKey:m,indexes:g,mappedClass:null,idxByName:(E=function(A){return[A.name,A]},g.reduce(function(A,w,D){return D=E(w,D),D&&(A[D[0]]=D[1]),A},{}))};var E}var Bi=function(h){try{return h.only([[]]),Bi=function(){return[[]]},[[]]}catch{return Bi=function(){return yn},yn}};function qi(h){return h==null?function(){}:typeof h=="string"?(m=h).split(".").length===1?function(g){return g[m]}:function(g){return nt(g,m)}:function(g){return nt(g,h)};var m}function vi(h){return[].slice.call(h)}var ni=0;function an(h){return h==null?":id":typeof h=="string"?h:"[".concat(h.join("+"),"]")}function Hi(h,m,q){function E(X){if(X.type===3)return null;if(X.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var F=X.lower,Y=X.upper,Q=X.lowerOpen,X=X.upperOpen;return F===void 0?Y===void 0?null:m.upperBound(Y,!!X):Y===void 0?m.lowerBound(F,!!Q):m.bound(F,Y,!!Q,!!X)}function A(J){var F,Y=J.name;return{name:Y,schema:J,mutate:function(Q){var X=Q.trans,te=Q.type,ie=Q.keys,ce=Q.values,pe=Q.range;return new Promise(function(Te,xe){Te=kt(Te);var Ee=X.objectStore(Y),Ae=Ee.keyPath==null,De=te==="put"||te==="add";if(!De&&te!=="delete"&&te!=="deleteRange")throw new Error("Invalid operation type: "+te);var be,Ve=(ie||ce||{length:1}).length;if(ie&&ce&&ie.length!==ce.length)throw new Error("Given keys array must have same length as given values array.");if(Ve===0)return Te({numFailures:0,failures:{},results:[],lastResult:void 0});function Ke(Rn){++Hn,yi(Rn)}var et=[],lt=[],Hn=0;if(te==="deleteRange"){if(pe.type===4)return Te({numFailures:Hn,failures:lt,results:[],lastResult:void 0});pe.type===3?et.push(be=Ee.clear()):et.push(be=Ee.delete(E(pe)))}else{var Ae=De?Ae?[ce,ie]:[ce,null]:[ie,null],We=Ae[0],wn=Ae[1];if(De)for(var Zt=0;Zt<Ve;++Zt)et.push(be=wn&&wn[Zt]!==void 0?Ee[te](We[Zt],wn[Zt]):Ee[te](We[Zt])),be.onerror=Ke;else for(Zt=0;Zt<Ve;++Zt)et.push(be=Ee[te](We[Zt])),be.onerror=Ke}function Io(Rn){Rn=Rn.target.result,et.forEach(function(Pr,cu){return Pr.error!=null&&(lt[cu]=Pr.error)}),Te({numFailures:Hn,failures:lt,results:te==="delete"?ie:et.map(function(Pr){return Pr.result}),lastResult:Rn})}be.onerror=function(Rn){Ke(Rn),Io(Rn)},be.onsuccess=Io})},getMany:function(Q){var X=Q.trans,te=Q.keys;return new Promise(function(ie,ce){ie=kt(ie);for(var pe,Te=X.objectStore(Y),xe=te.length,Ee=new Array(xe),Ae=0,De=0,be=function(et){et=et.target,Ee[et._pos]=et.result,++De===Ae&&ie(Ee)},Ve=Bn(ce),Ke=0;Ke<xe;++Ke)te[Ke]!=null&&((pe=Te.get(te[Ke]))._pos=Ke,pe.onsuccess=be,pe.onerror=Ve,++Ae);Ae===0&&ie(Ee)})},get:function(Q){var X=Q.trans,te=Q.key;return new Promise(function(ie,ce){ie=kt(ie);var pe=X.objectStore(Y).get(te);pe.onsuccess=function(Te){return ie(Te.target.result)},pe.onerror=Bn(ce)})},query:(F=H,function(Q){return new Promise(function(X,te){X=kt(X);var ie,ce,pe,Ae=Q.trans,Te=Q.values,xe=Q.limit,be=Q.query,Ee=xe===1/0?void 0:xe,De=be.index,be=be.range,Ae=Ae.objectStore(Y),De=De.isPrimaryKey?Ae:Ae.index(De.name),be=E(be);if(xe===0)return X({result:[]});F?((Ee=Te?De.getAll(be,Ee):De.getAllKeys(be,Ee)).onsuccess=function(Ve){return X({result:Ve.target.result})},Ee.onerror=Bn(te)):(ie=0,ce=!Te&&"openKeyCursor"in De?De.openKeyCursor(be):De.openCursor(be),pe=[],ce.onsuccess=function(Ve){var Ke=ce.result;return Ke?(pe.push(Te?Ke.value:Ke.primaryKey),++ie===xe?X({result:pe}):void Ke.continue()):X({result:pe})},ce.onerror=Bn(te))})}),openCursor:function(Q){var X=Q.trans,te=Q.values,ie=Q.query,ce=Q.reverse,pe=Q.unique;return new Promise(function(Te,xe){Te=kt(Te);var De=ie.index,Ee=ie.range,Ae=X.objectStore(Y),Ae=De.isPrimaryKey?Ae:Ae.index(De.name),De=ce?pe?"prevunique":"prev":pe?"nextunique":"next",be=!te&&"openKeyCursor"in Ae?Ae.openKeyCursor(E(Ee),De):Ae.openCursor(E(Ee),De);be.onerror=Bn(xe),be.onsuccess=kt(function(Ve){var Ke,et,lt,Hn,We=be.result;We?(We.___id=++ni,We.done=!1,Ke=We.continue.bind(We),et=(et=We.continuePrimaryKey)&&et.bind(We),lt=We.advance.bind(We),Hn=function(){throw new Error("Cursor not stopped")},We.trans=X,We.stop=We.continue=We.continuePrimaryKey=We.advance=function(){throw new Error("Cursor not started")},We.fail=kt(xe),We.next=function(){var wn=this,Zt=1;return this.start(function(){return Zt--?wn.continue():wn.stop()}).then(function(){return wn})},We.start=function(wn){function Zt(){if(be.result)try{wn()}catch(Rn){We.fail(Rn)}else We.done=!0,We.start=function(){throw new Error("Cursor behind last entry")},We.stop()}var Io=new Promise(function(Rn,Pr){Rn=kt(Rn),be.onerror=Bn(Pr),We.fail=Pr,We.stop=function(cu){We.stop=We.continue=We.continuePrimaryKey=We.advance=Hn,Rn(cu)}});return be.onsuccess=kt(function(Rn){be.onsuccess=Zt,Zt()}),We.continue=Ke,We.continuePrimaryKey=et,We.advance=lt,Zt(),Io},Te(We)):Te(null)},xe)})},count:function(Q){var X=Q.query,te=Q.trans,ie=X.index,ce=X.range;return new Promise(function(pe,Te){var xe=te.objectStore(Y),Ee=ie.isPrimaryKey?xe:xe.index(ie.name),xe=E(ce),Ee=xe?Ee.count(xe):Ee.count();Ee.onsuccess=kt(function(Ae){return pe(Ae.target.result)}),Ee.onerror=Bn(Te)})}}}var w,D,k,$=(D=q,k=vi((w=h).objectStoreNames),{schema:{name:w.name,tables:k.map(function(J){return D.objectStore(J)}).map(function(J){var F=J.keyPath,X=J.autoIncrement,Y=y(F),Q={},X={name:J.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:F==null,compound:Y,keyPath:F,autoIncrement:X,unique:!0,extractKey:qi(F)},indexes:vi(J.indexNames).map(function(te){return J.index(te)}).map(function(pe){var ie=pe.name,ce=pe.unique,Te=pe.multiEntry,pe=pe.keyPath,Te={name:ie,compound:y(pe),keyPath:pe,unique:ce,multiEntry:Te,extractKey:qi(pe)};return Q[an(pe)]=Te}),getIndexByKeyPath:function(te){return Q[an(te)]}};return Q[":id"]=X.primaryKey,F!=null&&(Q[an(F)]=X.primaryKey),X})},hasGetAll:0<k.length&&"getAll"in D.objectStore(k[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),q=$.schema,H=$.hasGetAll,$=q.tables.map(A),U={};return $.forEach(function(J){return U[J.name]=J}),{stack:"dbcore",transaction:h.transaction.bind(h),table:function(J){if(!U[J])throw new Error("Table '".concat(J,"' not found"));return U[J]},MIN_KEY:-1/0,MAX_KEY:Bi(m),schema:q}}function _i(h,m,g,E){var A=g.IDBKeyRange;return g.indexedDB,{dbcore:(E=Hi(m,A,E),h.dbcore.reduce(function(w,D){return D=D.create,s(s({},w),D(w))},E))}}function ri(h,E){var g=E.db,E=_i(h._middlewares,g,h._deps,E);h.core=E.dbcore,h.tables.forEach(function(A){var w=A.name;h.core.schema.tables.some(function(D){return D.name===w})&&(A.core=h.core.table(w),h[w]instanceof h.Table&&(h[w].core=A.core))})}function as(h,m,g,E){g.forEach(function(A){var w=E[A];m.forEach(function(D){var k=(function q(H,$){return Ce(H,$)||(H=b(H))&&q(H,$)})(D,A);(!k||"value"in k&&k.value===void 0)&&(D===h.Transaction.prototype||D instanceof h.Transaction?fe(D,A,{get:function(){return this.table(A)},set:function(q){Z(this,A,{value:q,writable:!0,configurable:!0,enumerable:!0})}}):D[A]=new h.Table(A,w))})})}function Ei(h,m){m.forEach(function(g){for(var E in g)g[E]instanceof h.Table&&delete g[E]})}function va(h,m){return h._cfg.version-m._cfg.version}function bi(h,m,g,E){var A=h._dbSchema;g.objectStoreNames.contains("$meta")&&!A.$meta&&(A.$meta=ji("$meta",Ao("")[0],[]),h._storeNames.push("$meta"));var w=h._createTransaction("readwrite",h._storeNames,A);w.create(g),w._completion.catch(E);var D=w._reject.bind(w),k=Ne.transless||Ne;Pt(function(){return Ne.trans=w,Ne.transless=k,m!==0?(ri(h,g),H=m,((q=w).storeNames.includes("$meta")?q.table("$meta").get("version").then(function($){return $??H}):Re.resolve(H)).then(function($){return J=$,F=w,Y=g,Q=[],$=(U=h)._versions,X=U._dbSchema=Ti(0,U.idbdb,Y),($=$.filter(function(te){return te._cfg.version>=J})).length!==0?($.forEach(function(te){Q.push(function(){var ie=X,ce=te._cfg.dbschema;os(U,ie,Y),os(U,ce,Y),X=U._dbSchema=ce;var pe=Ms(ie,ce);pe.add.forEach(function(De){Fi(Y,De[0],De[1].primKey,De[1].indexes)}),pe.change.forEach(function(De){if(De.recreate)throw new Me.Upgrade("Not yet support for changing primary key");var be=Y.objectStore(De.name);De.add.forEach(function(Ve){return ks(be,Ve)}),De.change.forEach(function(Ve){be.deleteIndex(Ve.name),ks(be,Ve)}),De.del.forEach(function(Ve){return be.deleteIndex(Ve)})});var Te=te._cfg.contentUpgrade;if(Te&&te._cfg.version>J){ri(U,Y),F._memoizedTables={};var xe=M(ce);pe.del.forEach(function(De){xe[De]=ie[De]}),Ei(U,[U.Transaction.prototype]),as(U,[U.Transaction.prototype],d(xe),xe),F.schema=xe;var Ee,Ae=B(Te);return Ae&&Gt(),pe=Re.follow(function(){var De;(Ee=Te(F))&&Ae&&(De=kn.bind(null,null),Ee.then(De,De))}),Ee&&typeof Ee.then=="function"?Re.resolve(Ee):pe.then(function(){return Ee})}}),Q.push(function(ie){var ce,pe,Te=te._cfg.dbschema;ce=Te,pe=ie,[].slice.call(pe.db.objectStoreNames).forEach(function(xe){return ce[xe]==null&&pe.db.deleteObjectStore(xe)}),Ei(U,[U.Transaction.prototype]),as(U,[U.Transaction.prototype],U._storeNames,U._dbSchema),F.schema=U._dbSchema}),Q.push(function(ie){U.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(U.idbdb.version/10)===te._cfg.version?(U.idbdb.deleteObjectStore("$meta"),delete U._dbSchema.$meta,U._storeNames=U._storeNames.filter(function(ce){return ce!=="$meta"})):ie.objectStore("$meta").put(te._cfg.version,"version"))})}),(function te(){return Q.length?Re.resolve(Q.shift()(F.idbtrans)).then(te):Re.resolve()})().then(function(){So(X,Y)})):Re.resolve();var U,J,F,Y,Q,X}).catch(D)):(d(A).forEach(function($){Fi(g,$,A[$].primKey,A[$].indexes)}),ri(h,g),void Re.follow(function(){return h.on.populate.fire(w)}).catch(D));var q,H})}function _a(h,m){So(h._dbSchema,m),m.db.version%10!=0||m.objectStoreNames.contains("$meta")||m.db.createObjectStore("$meta").add(Math.ceil(m.db.version/10-1),"version");var g=Ti(0,h.idbdb,m);os(h,h._dbSchema,m);for(var E=0,A=Ms(g,h._dbSchema).change;E<A.length;E++){var w=(function(D){if(D.change.length||D.recreate)return console.warn("Unable to patch indexes of table ".concat(D.name," because it has changes on the type of index or primary key.")),{value:void 0};var k=m.objectStore(D.name);D.add.forEach(function(q){Mn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(D.name,".").concat(q.src)),ks(k,q)})})(A[E]);if(typeof w=="object")return w.value}}function Ms(h,m){var g,E={del:[],add:[],change:[]};for(g in h)m[g]||E.del.push(g);for(g in m){var A=h[g],w=m[g];if(A){var D={name:g,def:w,recreate:!1,del:[],add:[],change:[]};if(""+(A.primKey.keyPath||"")!=""+(w.primKey.keyPath||"")||A.primKey.auto!==w.primKey.auto)D.recreate=!0,E.change.push(D);else{var k=A.idxByName,q=w.idxByName,H=void 0;for(H in k)q[H]||D.del.push(H);for(H in q){var $=k[H],U=q[H];$?$.src!==U.src&&D.change.push(U):D.add.push(U)}(0<D.del.length||0<D.add.length||0<D.change.length)&&E.change.push(D)}}else E.add.push([g,w])}return E}function Fi(h,m,g,E){var A=h.db.createObjectStore(m,g.keyPath?{keyPath:g.keyPath,autoIncrement:g.auto}:{autoIncrement:g.auto});return E.forEach(function(w){return ks(A,w)}),A}function So(h,m){d(h).forEach(function(g){m.db.objectStoreNames.contains(g)||(Mn&&console.debug("Dexie: Creating missing table",g),Fi(m,g,h[g].primKey,h[g].indexes))})}function ks(h,m){h.createIndex(m.name,m.keyPath,{unique:m.unique,multiEntry:m.multi})}function Ti(h,m,g){var E={};return Ye(m.objectStoreNames,0).forEach(function(A){for(var w=g.objectStore(A),D=xr(ya(H=w.keyPath),H||"",!0,!1,!!w.autoIncrement,H&&typeof H!="string",!0),k=[],q=0;q<w.indexNames.length;++q){var $=w.index(w.indexNames[q]),H=$.keyPath,$=xr($.name,H,!!$.unique,!!$.multiEntry,!1,H&&typeof H!="string",!1);k.push($)}E[A]=ji(A,D,k)}),E}function os(h,m,g){for(var E=g.db.objectStoreNames,A=0;A<E.length;++A){var w=E[A],D=g.objectStore(w);h._hasGetAll="getAll"in D;for(var k=0;k<D.indexNames.length;++k){var q=D.indexNames[k],H=D.index(q).keyPath,$=typeof H=="string"?H:"["+Ye(H).join("+")+"]";!m[w]||(H=m[w].idxByName[$])&&(H.name=q,delete m[w].idxByName[$],m[w].idxByName[q]=H)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(h._hasGetAll=!1)}function Ao(h){return h.split(",").map(function(m,g){var w=m.split(":"),E=(A=w[1])===null||A===void 0?void 0:A.trim(),A=(m=w[0].trim()).replace(/([&*]|\+\+)/g,""),w=/^\[/.test(A)?A.match(/^\[(.*)\]$/)[1].split("+"):A;return xr(A,w||null,/\&/.test(m),/\*/.test(m),/\+\+/.test(m),y(w),g===0,E)})}var Ea=(Ki.prototype._createTableSchema=ji,Ki.prototype._parseIndexSyntax=Ao,Ki.prototype._parseStoresSpec=function(h,m){var g=this;d(h).forEach(function(E){if(h[E]!==null){var A=g._parseIndexSyntax(h[E]),w=A.shift();if(!w)throw new Me.Schema("Invalid schema for table "+E+": "+h[E]);if(w.unique=!0,w.multi)throw new Me.Schema("Primary key cannot be multiEntry*");A.forEach(function(D){if(D.auto)throw new Me.Schema("Only primary key can be marked as autoIncrement (++)");if(!D.keyPath)throw new Me.Schema("Index must have a name and cannot be an empty string")}),A=g._createTableSchema(E,w,A),m[E]=A}})},Ki.prototype.stores=function(g){var m=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,g):g;var g=m._versions,E={},A={};return g.forEach(function(w){_(E,w._cfg.storesSource),A=w._cfg.dbschema={},w._parseStoresSpec(E,A)}),m._dbSchema=A,Ei(m,[m._allTables,m,m.Transaction.prototype]),as(m,[m._allTables,m,m.Transaction.prototype,this._cfg.tables],d(A),A),m._storeNames=d(A),this},Ki.prototype.upgrade=function(h){return this._cfg.contentUpgrade=en(this._cfg.contentUpgrade||wt,h),this},Ki);function Ki(){}function ba(h,m){var g=h._dbNamesDB;return g||(g=h._dbNamesDB=new Ai(rs,{addons:[],indexedDB:h,IDBKeyRange:m})).version(1).stores({dbnames:"name"}),g.table("dbnames")}function Nr(h){return h&&typeof h.databases=="function"}function Ta(h){return Pt(function(){return Ne.letThrough=!0,h()})}function Sa(h){return!("from"in h)}var _n=function(h,m){if(!this){var g=new _n;return h&&"d"in h&&_(g,h),g}_(this,arguments.length?{d:1,from:h,to:1<arguments.length?m:h}:{d:0})};function ls(h,m,g){var E=ot(m,g);if(!isNaN(E)){if(0<E)throw RangeError();if(Sa(h))return _(h,{from:m,to:g,d:1});var A=h.l,E=h.r;if(ot(g,h.from)<0)return A?ls(A,m,g):h.l={from:m,to:g,d:1,l:null,r:null},wo(h);if(0<ot(m,h.to))return E?ls(E,m,g):h.r={from:m,to:g,d:1,l:null,r:null},wo(h);ot(m,h.from)<0&&(h.from=m,h.l=null,h.d=E?E.d+1:1),0<ot(g,h.to)&&(h.to=g,h.r=null,h.d=h.l?h.l.d+1:1),g=!h.r,A&&!h.l&&Mr(h,A),E&&g&&Mr(h,E)}}function Mr(h,m){Sa(m)||(function g(E,q){var w=q.from,D=q.to,k=q.l,q=q.r;ls(E,w,D),k&&g(E,k),q&&g(E,q)})(h,m)}function qn(h,m){var g=Vs(m),E=g.next();if(E.done)return!1;for(var A=E.value,w=Vs(h),D=w.next(A.from),k=D.value;!E.done&&!D.done;){if(ot(k.from,A.to)<=0&&0<=ot(k.to,A.from))return!0;ot(A.from,k.from)<0?A=(E=g.next(k.from)).value:k=(D=w.next(A.from)).value}return!1}function Vs(h){var m=Sa(h)?null:{s:0,n:h};return{next:function(g){for(var E=0<arguments.length;m;)switch(m.s){case 0:if(m.s=1,E)for(;m.n.l&&ot(g,m.n.from)<0;)m={up:m,n:m.n.l,s:1};else for(;m.n.l;)m={up:m,n:m.n.l,s:1};case 1:if(m.s=2,!E||ot(g,m.n.to)<=0)return{value:m.n,done:!1};case 2:if(m.n.r){m.s=3,m={up:m,n:m.n.r,s:0};continue}case 3:m=m.up}return{done:!0}}}}function wo(h){var m,g,E=(((m=h.r)===null||m===void 0?void 0:m.d)||0)-(((g=h.l)===null||g===void 0?void 0:g.d)||0),A=1<E?"r":E<-1?"l":"";A&&(m=A=="r"?"l":"r",g=s({},h),E=h[A],h.from=E.from,h.to=E.to,h[A]=E[A],g[A]=E[m],(h[m]=g).d=Si(g)),h.d=Si(h)}function Si(g){var m=g.r,g=g.l;return(m?g?Math.max(m.d,g.d):m.d:g?g.d:0)+1}function c(h,m){return d(m).forEach(function(g){h[g]?Mr(h[g],m[g]):h[g]=(function E(A){var w,D,k={};for(w in A)O(A,w)&&(D=A[w],k[w]=!D||typeof D!="object"||j.has(D.constructor)?D:E(D));return k})(m[g])}),h}function v(h,m){return h.all||m.all||Object.keys(h).some(function(g){return m[g]&&qn(m[g],h[g])})}x(_n.prototype,((yr={add:function(h){return Mr(this,h),this},addKey:function(h){return ls(this,h,h),this},addKeys:function(h){var m=this;return h.forEach(function(g){return ls(m,g,g)}),this},hasKey:function(h){var m=Vs(this).next(h).value;return m&&ot(m.from,h)<=0&&0<=ot(m.to,h)}})[ue]=function(){return Vs(this)},yr));var S={},I={},ee=!1;function ae(h){c(I,h),ee||(ee=!0,setTimeout(function(){ee=!1,Se(I,!(I={}))},0))}function Se(h,m){m===void 0&&(m=!1);var g=new Set;if(h.all)for(var E=0,A=Object.values(S);E<A.length;E++)rt(D=A[E],h,g,m);else for(var w in h){var D,k=/^idb\:\/\/(.*)\/(.*)\//.exec(w);k&&(w=k[1],k=k[2],(D=S["idb://".concat(w,"/").concat(k)])&&rt(D,h,g,m))}g.forEach(function(q){return q()})}function rt(h,m,g,E){for(var A=[],w=0,D=Object.entries(h.queries.query);w<D.length;w++){for(var k=D[w],q=k[0],H=[],$=0,U=k[1];$<U.length;$++){var J=U[$];v(m,J.obsSet)?J.subscribers.forEach(function(X){return g.add(X)}):E&&H.push(J)}E&&A.push([q,H])}if(E)for(var F=0,Y=A;F<Y.length;F++){var Q=Y[F],q=Q[0],H=Q[1];h.queries.query[q]=H}}function on(h){var m=h._state,g=h._deps.indexedDB;if(m.isBeingOpened||h.idbdb)return m.dbReadyPromise.then(function(){return m.dbOpenError?It(m.dbOpenError):h});m.isBeingOpened=!0,m.dbOpenError=null,m.openComplete=!1;var E=m.openCanceller,A=Math.round(10*h.verno),w=!1;function D(){if(m.openCanceller!==E)throw new Me.DatabaseClosed("db.open() was cancelled")}function k(){return new Re(function(J,F){if(D(),!g)throw new Me.MissingAPI;var Y=h.name,Q=m.autoSchema||!A?g.open(Y):g.open(Y,A);if(!Q)throw new Me.MissingAPI;Q.onerror=Bn(F),Q.onblocked=kt(h._fireOnBlocked),Q.onupgradeneeded=kt(function(X){var te;$=Q.transaction,m.autoSchema&&!h._options.allowEmptyDB?(Q.onerror=yi,$.abort(),Q.result.close(),(te=g.deleteDatabase(Y)).onsuccess=te.onerror=kt(function(){F(new Me.NoSuchDatabase("Database ".concat(Y," doesnt exist")))})):($.onerror=Bn(F),X=X.oldVersion>Math.pow(2,62)?0:X.oldVersion,U=X<1,h.idbdb=Q.result,w&&_a(h,$),bi(h,X/10,$,F))},F),Q.onsuccess=kt(function(){$=null;var X,te,ie,ce,pe,Te=h.idbdb=Q.result,xe=Ye(Te.objectStoreNames);if(0<xe.length)try{var Ee=Te.transaction((ce=xe).length===1?ce[0]:ce,"readonly");if(m.autoSchema)te=Te,ie=Ee,(X=h).verno=te.version/10,ie=X._dbSchema=Ti(0,te,ie),X._storeNames=Ye(te.objectStoreNames,0),as(X,[X._allTables],d(ie),ie);else if(os(h,h._dbSchema,Ee),((pe=Ms(Ti(0,(pe=h).idbdb,Ee),pe._dbSchema)).add.length||pe.change.some(function(Ae){return Ae.add.length||Ae.change.length}))&&!w)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Te.close(),A=Te.version+1,w=!0,J(k());ri(h,Ee)}catch{}gi.push(h),Te.onversionchange=kt(function(Ae){m.vcFired=!0,h.on("versionchange").fire(Ae)}),Te.onclose=kt(function(){h.close({disableAutoOpen:!1})}),U&&(pe=h._deps,Ee=Y,Te=pe.indexedDB,pe=pe.IDBKeyRange,Nr(Te)||Ee===rs||ba(Te,pe).put({name:Ee}).catch(wt)),J()},F)}).catch(function(J){switch(J?.name){case"UnknownError":if(0<m.PR1398_maxLoop)return m.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),k();break;case"VersionError":if(0<A)return A=0,k()}return Re.reject(J)})}var q,H=m.dbReadyResolve,$=null,U=!1;return Re.race([E,(typeof navigator>"u"?Re.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(J){function F(){return indexedDB.databases().finally(J)}q=setInterval(F,100),F()}).finally(function(){return clearInterval(q)}):Promise.resolve()).then(k)]).then(function(){return D(),m.onReadyBeingFired=[],Re.resolve(Ta(function(){return h.on.ready.fire(h.vip)})).then(function J(){if(0<m.onReadyBeingFired.length){var F=m.onReadyBeingFired.reduce(en,wt);return m.onReadyBeingFired=[],Re.resolve(Ta(function(){return F(h.vip)})).then(J)}})}).finally(function(){m.openCanceller===E&&(m.onReadyBeingFired=null,m.isBeingOpened=!1)}).catch(function(J){m.dbOpenError=J;try{$&&$.abort()}catch{}return E===m.openCanceller&&h._close(),It(J)}).finally(function(){m.openComplete=!0,H()}).then(function(){var J;return U&&(J={},h.tables.forEach(function(F){F.schema.indexes.forEach(function(Y){Y.name&&(J["idb://".concat(h.name,"/").concat(F.name,"/").concat(Y.name)]=new _n(-1/0,[[[]]]))}),J["idb://".concat(h.name,"/").concat(F.name,"/")]=J["idb://".concat(h.name,"/").concat(F.name,"/:dels")]=new _n(-1/0,[[[]]])}),vn(Dr).fire(J),Se(J,!0)),h})}function Rt(h){function m(w){return h.next(w)}var g=A(m),E=A(function(w){return h.throw(w)});function A(w){return function(q){var k=w(q),q=k.value;return k.done?q:q&&typeof q.then=="function"?q.then(g,E):y(q)?Promise.all(q).then(g,E):g(q)}}return A(m)()}function Ut(h,m,g){for(var E=y(h)?h.slice():[h],A=0;A<g;++A)E.push(m);return E}var kr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(h){return s(s({},h),{table:function(m){var g=h.table(m),E=g.schema,A={},w=[];function D(U,J,F){var Y=an(U),Q=A[Y]=A[Y]||[],X=U==null?0:typeof U=="string"?1:U.length,te=0<J,te=s(s({},F),{name:te?"".concat(Y,"(virtual-from:").concat(F.name,")"):F.name,lowLevelIndex:F,isVirtual:te,keyTail:J,keyLength:X,extractKey:qi(U),unique:!te&&F.unique});return Q.push(te),te.isPrimaryKey||w.push(te),1<X&&D(X===2?U[0]:U.slice(0,X-1),J+1,F),Q.sort(function(ie,ce){return ie.keyTail-ce.keyTail}),te}m=D(E.primaryKey.keyPath,0,E.primaryKey),A[":id"]=[m];for(var k=0,q=E.indexes;k<q.length;k++){var H=q[k];D(H.keyPath,0,H)}function $(U){var J,F=U.query.index;return F.isVirtual?s(s({},U),{query:{index:F.lowLevelIndex,range:(J=U.query.range,F=F.keyTail,{type:J.type===1?2:J.type,lower:Ut(J.lower,J.lowerOpen?h.MAX_KEY:h.MIN_KEY,F),lowerOpen:!0,upper:Ut(J.upper,J.upperOpen?h.MIN_KEY:h.MAX_KEY,F),upperOpen:!0})}}):U}return s(s({},g),{schema:s(s({},E),{primaryKey:m,indexes:w,getIndexByKeyPath:function(U){return(U=A[an(U)])&&U[0]}}),count:function(U){return g.count($(U))},query:function(U){return g.query($(U))},openCursor:function(U){var J=U.query.index,F=J.keyTail,Y=J.isVirtual,Q=J.keyLength;return Y?g.openCursor($(U)).then(function(te){return te&&X(te)}):g.openCursor(U);function X(te){return Object.create(te,{continue:{value:function(ie){ie!=null?te.continue(Ut(ie,U.reverse?h.MAX_KEY:h.MIN_KEY,F)):U.unique?te.continue(te.key.slice(0,Q).concat(U.reverse?h.MIN_KEY:h.MAX_KEY,F)):te.continue()}},continuePrimaryKey:{value:function(ie,ce){te.continuePrimaryKey(Ut(ie,h.MAX_KEY,F),ce)}},primaryKey:{get:function(){return te.primaryKey}},key:{get:function(){var ie=te.key;return Q===1?ie[0]:ie.slice(0,Q)}},value:{get:function(){return te.value}}})}}})}})}};function Vr(h,m,g,E){return g=g||{},E=E||"",d(h).forEach(function(A){var w,D,k;O(m,A)?(w=h[A],D=m[A],typeof w=="object"&&typeof D=="object"&&w&&D?(k=Ft(w))!==Ft(D)?g[E+A]=m[A]:k==="Object"?Vr(w,D,g,E+A+"."):w!==D&&(g[E+A]=m[A]):w!==D&&(g[E+A]=m[A])):g[E+A]=void 0}),d(m).forEach(function(A){O(h,A)||(g[E+A]=m[A])}),g}function gr(h,m){return m.type==="delete"?m.keys:m.keys||m.values.map(h.extractKey)}var ii={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(h){return s(s({},h),{table:function(m){var g=h.table(m),E=g.schema.primaryKey;return s(s({},g),{mutate:function(A){var w=Ne.trans,D=w.table(m).hook,k=D.deleting,q=D.creating,H=D.updating;switch(A.type){case"add":if(q.fire===wt)break;return w._promise("readwrite",function(){return $(A)},!0);case"put":if(q.fire===wt&&H.fire===wt)break;return w._promise("readwrite",function(){return $(A)},!0);case"delete":if(k.fire===wt)break;return w._promise("readwrite",function(){return $(A)},!0);case"deleteRange":if(k.fire===wt)break;return w._promise("readwrite",function(){return(function U(J,F,Y){return g.query({trans:J,values:!1,query:{index:E,range:F},limit:Y}).then(function(Q){var X=Q.result;return $({type:"delete",keys:X,trans:J}).then(function(te){return 0<te.numFailures?Promise.reject(te.failures[0]):X.length<Y?{failures:[],numFailures:0,lastResult:void 0}:U(J,s(s({},F),{lower:X[X.length-1],lowerOpen:!0}),Y)})})})(A.trans,A.range,1e4)},!0)}return g.mutate(A);function $(U){var J,F,Y,Q=Ne.trans,X=U.keys||gr(E,U);if(!X)throw new Error("Keys missing");return(U=U.type==="add"||U.type==="put"?s(s({},U),{keys:X}):s({},U)).type!=="delete"&&(U.values=o([],U.values)),U.keys&&(U.keys=o([],U.keys)),J=g,Y=X,((F=U).type==="add"?Promise.resolve([]):J.getMany({trans:F.trans,keys:Y,cache:"immutable"})).then(function(te){var ie=X.map(function(ce,pe){var Te,xe,Ee,Ae=te[pe],De={onerror:null,onsuccess:null};return U.type==="delete"?k.fire.call(De,ce,Ae,Q):U.type==="add"||Ae===void 0?(Te=q.fire.call(De,ce,U.values[pe],Q),ce==null&&Te!=null&&(U.keys[pe]=ce=Te,E.outbound||V(U.values[pe],E.keyPath,ce))):(Te=Vr(Ae,U.values[pe]),(xe=H.fire.call(De,Te,ce,Ae,Q))&&(Ee=U.values[pe],Object.keys(xe).forEach(function(be){O(Ee,be)?Ee[be]=xe[be]:V(Ee,be,xe[be])}))),De});return g.mutate(U).then(function(ce){for(var pe=ce.failures,Te=ce.results,xe=ce.numFailures,ce=ce.lastResult,Ee=0;Ee<X.length;++Ee){var Ae=(Te||X)[Ee],De=ie[Ee];Ae==null?De.onerror&&De.onerror(pe[Ee]):De.onsuccess&&De.onsuccess(U.type==="put"&&te[Ee]?U.values[Ee]:Ae)}return{failures:pe,results:Te,numFailures:xe,lastResult:ce}}).catch(function(ce){return ie.forEach(function(pe){return pe.onerror&&pe.onerror(ce)}),Promise.reject(ce)})})}}})}})}};function us(h,m,g){try{if(!m||m.keys.length<h.length)return null;for(var E=[],A=0,w=0;A<m.keys.length&&w<h.length;++A)ot(m.keys[A],h[w])===0&&(E.push(g?N(m.values[A]):m.values[A]),++w);return E.length===h.length?E:null}catch{return null}}var Aa={stack:"dbcore",level:-1,create:function(h){return{table:function(m){var g=h.table(m);return s(s({},g),{getMany:function(E){if(!E.cache)return g.getMany(E);var A=us(E.keys,E.trans._cache,E.cache==="clone");return A?Re.resolve(A):g.getMany(E).then(function(w){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?N(w):w},w})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),g.mutate(E)}})}}}};function Ps(h,m){return h.trans.mode==="readonly"&&!!h.subscr&&!h.trans.explicit&&h.trans.db._options.cache!=="disabled"&&!m.schema.primaryKey.outbound}function xc(h,m){switch(h){case"query":return m.values&&!m.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Gf={stack:"dbcore",level:0,name:"Observability",create:function(h){var m=h.schema.name,g=new _n(h.MIN_KEY,h.MAX_KEY);return s(s({},h),{transaction:function(E,A,w){if(Ne.subscr&&A!=="readonly")throw new Me.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ne.querier));return h.transaction(E,A,w)},table:function(E){var A=h.table(E),w=A.schema,D=w.primaryKey,U=w.indexes,k=D.extractKey,q=D.outbound,H=D.autoIncrement&&U.filter(function(F){return F.compound&&F.keyPath.includes(D.keyPath)}),$=s(s({},A),{mutate:function(F){function Y(be){return be="idb://".concat(m,"/").concat(E,"/").concat(be),ce[be]||(ce[be]=new _n)}var Q,X,te,ie=F.trans,ce=F.mutatedParts||(F.mutatedParts={}),pe=Y(""),Te=Y(":dels"),xe=F.type,De=F.type==="deleteRange"?[F.range]:F.type==="delete"?[F.keys]:F.values.length<50?[gr(D,F).filter(function(be){return be}),F.values]:[],Ee=De[0],Ae=De[1],De=F.trans._cache;return y(Ee)?(pe.addKeys(Ee),(De=xe==="delete"||Ee.length===Ae.length?us(Ee,De):null)||Te.addKeys(Ee),(De||Ae)&&(Q=Y,X=De,te=Ae,w.indexes.forEach(function(be){var Ve=Q(be.name||"");function Ke(lt){return lt!=null?be.extractKey(lt):null}function et(lt){return be.multiEntry&&y(lt)?lt.forEach(function(Hn){return Ve.addKey(Hn)}):Ve.addKey(lt)}(X||te).forEach(function(lt,wn){var We=X&&Ke(X[wn]),wn=te&&Ke(te[wn]);ot(We,wn)!==0&&(We!=null&&et(We),wn!=null&&et(wn))})}))):Ee?(Ae={from:(Ae=Ee.lower)!==null&&Ae!==void 0?Ae:h.MIN_KEY,to:(Ae=Ee.upper)!==null&&Ae!==void 0?Ae:h.MAX_KEY},Te.add(Ae),pe.add(Ae)):(pe.add(g),Te.add(g),w.indexes.forEach(function(be){return Y(be.name).add(g)})),A.mutate(F).then(function(be){return!Ee||F.type!=="add"&&F.type!=="put"||(pe.addKeys(be.results),H&&H.forEach(function(Ve){for(var Ke=F.values.map(function(We){return Ve.extractKey(We)}),et=Ve.keyPath.findIndex(function(We){return We===D.keyPath}),lt=0,Hn=be.results.length;lt<Hn;++lt)Ke[lt][et]=be.results[lt];Y(Ve.name).addKeys(Ke)})),ie.mutatedParts=c(ie.mutatedParts||{},ce),be})}}),U=function(Y){var Q=Y.query,Y=Q.index,Q=Q.range;return[Y,new _n((Y=Q.lower)!==null&&Y!==void 0?Y:h.MIN_KEY,(Q=Q.upper)!==null&&Q!==void 0?Q:h.MAX_KEY)]},J={get:function(F){return[D,new _n(F.key)]},getMany:function(F){return[D,new _n().addKeys(F.keys)]},count:U,query:U,openCursor:U};return d(J).forEach(function(F){$[F]=function(Y){var Q=Ne.subscr,X=!!Q,te=Ps(Ne,A)&&xc(F,Y)?Y.obsSet={}:Q;if(X){var ie=function(Ae){return Ae="idb://".concat(m,"/").concat(E,"/").concat(Ae),te[Ae]||(te[Ae]=new _n)},ce=ie(""),pe=ie(":dels"),Q=J[F](Y),X=Q[0],Q=Q[1];if((F==="query"&&X.isPrimaryKey&&!Y.values?pe:ie(X.name||"")).add(Q),!X.isPrimaryKey){if(F!=="count"){var Te=F==="query"&&q&&Y.values&&A.query(s(s({},Y),{values:!1}));return A[F].apply(this,arguments).then(function(Ae){if(F==="query"){if(q&&Y.values)return Te.then(function(Ke){return Ke=Ke.result,ce.addKeys(Ke),Ae});var De=Y.values?Ae.result.map(k):Ae.result;(Y.values?ce:pe).addKeys(De)}else if(F==="openCursor"){var be=Ae,Ve=Y.values;return be&&Object.create(be,{key:{get:function(){return pe.addKey(be.primaryKey),be.key}},primaryKey:{get:function(){var Ke=be.primaryKey;return pe.addKey(Ke),Ke}},value:{get:function(){return Ve&&ce.addKey(be.primaryKey),be.value}}})}return Ae})}pe.add(g)}}return A[F].apply(this,arguments)}}),$}})}};function Nc(h,m,g){if(g.numFailures===0)return m;if(m.type==="deleteRange")return null;var E=m.keys?m.keys.length:"values"in m&&m.values?m.values.length:1;return g.numFailures===E?null:(m=s({},m),y(m.keys)&&(m.keys=m.keys.filter(function(A,w){return!(w in g.failures)})),"values"in m&&y(m.values)&&(m.values=m.values.filter(function(A,w){return!(w in g.failures)})),m)}function al(h,m){return g=h,((E=m).lower===void 0||(E.lowerOpen?0<ot(g,E.lower):0<=ot(g,E.lower)))&&(h=h,(m=m).upper===void 0||(m.upperOpen?ot(h,m.upper)<0:ot(h,m.upper)<=0));var g,E}function lu(h,m,J,E,A,w){if(!J||J.length===0)return h;var D=m.query.index,k=D.multiEntry,q=m.query.range,H=E.schema.primaryKey.extractKey,$=D.extractKey,U=(D.lowLevelIndex||D).extractKey,J=J.reduce(function(F,Y){var Q=F,X=[];if(Y.type==="add"||Y.type==="put")for(var te=new _n,ie=Y.values.length-1;0<=ie;--ie){var ce,pe=Y.values[ie],Te=H(pe);te.hasKey(Te)||(ce=$(pe),(k&&y(ce)?ce.some(function(be){return al(be,q)}):al(ce,q))&&(te.addKey(Te),X.push(pe)))}switch(Y.type){case"add":var xe=new _n().addKeys(m.values?F.map(function(Ve){return H(Ve)}):F),Q=F.concat(m.values?X.filter(function(Ve){return Ve=H(Ve),!xe.hasKey(Ve)&&(xe.addKey(Ve),!0)}):X.map(function(Ve){return H(Ve)}).filter(function(Ve){return!xe.hasKey(Ve)&&(xe.addKey(Ve),!0)}));break;case"put":var Ee=new _n().addKeys(Y.values.map(function(Ve){return H(Ve)}));Q=F.filter(function(Ve){return!Ee.hasKey(m.values?H(Ve):Ve)}).concat(m.values?X:X.map(function(Ve){return H(Ve)}));break;case"delete":var Ae=new _n().addKeys(Y.keys);Q=F.filter(function(Ve){return!Ae.hasKey(m.values?H(Ve):Ve)});break;case"deleteRange":var De=Y.range;Q=F.filter(function(Ve){return!al(H(Ve),De)})}return Q},h);return J===h?h:(J.sort(function(F,Y){return ot(U(F),U(Y))||ot(H(F),H(Y))}),m.limit&&m.limit<1/0&&(J.length>m.limit?J.length=m.limit:h.length===m.limit&&J.length<m.limit&&(A.dirty=!0)),w?Object.freeze(J):J)}function wa(h,m){return ot(h.lower,m.lower)===0&&ot(h.upper,m.upper)===0&&!!h.lowerOpen==!!m.lowerOpen&&!!h.upperOpen==!!m.upperOpen}function Ro(h,m){return(function(g,E,A,w){if(g===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=ot(g,E))===0){if(A&&w)return 0;if(A)return 1;if(w)return-1}return E})(h.lower,m.lower,h.lowerOpen,m.lowerOpen)<=0&&0<=(function(g,E,A,w){if(g===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=ot(g,E))===0){if(A&&w)return 0;if(A)return-1;if(w)return 1}return E})(h.upper,m.upper,h.upperOpen,m.upperOpen)}function Yf(h,m,g,E){h.subscribers.add(g),E.addEventListener("abort",function(){var A,w;h.subscribers.delete(g),h.subscribers.size===0&&(A=h,w=m,setTimeout(function(){A.subscribers.size===0&&Be(w,A)},3e3))})}var ol={stack:"dbcore",level:0,name:"Cache",create:function(h){var m=h.schema.name;return s(s({},h),{transaction:function(g,E,A){var w,D,k=h.transaction(g,E,A);return E==="readwrite"&&(D=(w=new AbortController).signal,A=function(q){return function(){if(w.abort(),E==="readwrite"){for(var H=new Set,$=0,U=g;$<U.length;$++){var J=U[$],F=S["idb://".concat(m,"/").concat(J)];if(F){var Y=h.table(J),Q=F.optimisticOps.filter(function(Ve){return Ve.trans===k});if(k._explicit&&q&&k.mutatedParts)for(var X=0,te=Object.values(F.queries.query);X<te.length;X++)for(var ie=0,ce=(xe=te[X]).slice();ie<ce.length;ie++)v((Ee=ce[ie]).obsSet,k.mutatedParts)&&(Be(xe,Ee),Ee.subscribers.forEach(function(Ve){return H.add(Ve)}));else if(0<Q.length){F.optimisticOps=F.optimisticOps.filter(function(Ve){return Ve.trans!==k});for(var pe=0,Te=Object.values(F.queries.query);pe<Te.length;pe++)for(var xe,Ee,Ae,De=0,be=(xe=Te[pe]).slice();De<be.length;De++)(Ee=be[De]).res!=null&&k.mutatedParts&&(q&&!Ee.dirty?(Ae=Object.isFrozen(Ee.res),Ae=lu(Ee.res,Ee.req,Q,Y,Ee,Ae),Ee.dirty?(Be(xe,Ee),Ee.subscribers.forEach(function(Ve){return H.add(Ve)})):Ae!==Ee.res&&(Ee.res=Ae,Ee.promise=Re.resolve({result:Ae}))):(Ee.dirty&&Be(xe,Ee),Ee.subscribers.forEach(function(Ve){return H.add(Ve)})))}}}H.forEach(function(Ve){return Ve()})}}},k.addEventListener("abort",A(!1),{signal:D}),k.addEventListener("error",A(!1),{signal:D}),k.addEventListener("complete",A(!0),{signal:D})),k},table:function(g){var E=h.table(g),A=E.schema.primaryKey;return s(s({},E),{mutate:function(w){var D=Ne.trans;if(A.outbound||D.db._options.cache==="disabled"||D.explicit||D.idbtrans.mode!=="readwrite")return E.mutate(w);var k=S["idb://".concat(m,"/").concat(g)];return k?(D=E.mutate(w),w.type!=="add"&&w.type!=="put"||!(50<=w.values.length||gr(A,w).some(function(q){return q==null}))?(k.optimisticOps.push(w),w.mutatedParts&&ae(w.mutatedParts),D.then(function(q){0<q.numFailures&&(Be(k.optimisticOps,w),(q=Nc(0,w,q))&&k.optimisticOps.push(q),w.mutatedParts&&ae(w.mutatedParts))}),D.catch(function(){Be(k.optimisticOps,w),w.mutatedParts&&ae(w.mutatedParts)})):D.then(function(q){var H=Nc(0,s(s({},w),{values:w.values.map(function($,U){var J;return q.failures[U]?$:($=(J=A.keyPath)!==null&&J!==void 0&&J.includes(".")?N($):s({},$),V($,A.keyPath,q.results[U]),$)})}),q);k.optimisticOps.push(H),queueMicrotask(function(){return w.mutatedParts&&ae(w.mutatedParts)})}),D):E.mutate(w)},query:function(w){if(!Ps(Ne,E)||!xc("query",w))return E.query(w);var D=((H=Ne.trans)===null||H===void 0?void 0:H.db._options.cache)==="immutable",U=Ne,k=U.requery,q=U.signal,H=(function(Y,Q,X,te){var ie=S["idb://".concat(Y,"/").concat(Q)];if(!ie)return[];if(!(Q=ie.queries[X]))return[null,!1,ie,null];var ce=Q[(te.query?te.query.index.name:null)||""];if(!ce)return[null,!1,ie,null];switch(X){case"query":var pe=ce.find(function(Te){return Te.req.limit===te.limit&&Te.req.values===te.values&&wa(Te.req.query.range,te.query.range)});return pe?[pe,!0,ie,ce]:[ce.find(function(Te){return("limit"in Te.req?Te.req.limit:1/0)>=te.limit&&(!te.values||Te.req.values)&&Ro(Te.req.query.range,te.query.range)}),!1,ie,ce];case"count":return pe=ce.find(function(Te){return wa(Te.req.query.range,te.query.range)}),[pe,!!pe,ie,ce]}})(m,g,"query",w),$=H[0],U=H[1],J=H[2],F=H[3];return $&&U?$.obsSet=w.obsSet:(U=E.query(w).then(function(Y){var Q=Y.result;if($&&($.res=Q),D){for(var X=0,te=Q.length;X<te;++X)Object.freeze(Q[X]);Object.freeze(Q)}else Y.result=N(Q);return Y}).catch(function(Y){return F&&$&&Be(F,$),Promise.reject(Y)}),$={obsSet:w.obsSet,promise:U,subscribers:new Set,type:"query",req:w,dirty:!1},F?F.push($):(F=[$],(J=J||(S["idb://".concat(m,"/").concat(g)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[w.query.index.name||""]=F)),Yf($,F,k,q),$.promise.then(function(Y){return{result:lu(Y.result,w,J?.optimisticOps,E,$,D)}})}})}})}};function Co(h,m){return new Proxy(h,{get:function(g,E,A){return E==="db"?m:Reflect.get(g,E,A)}})}var Ai=(Yt.prototype.version=function(h){if(isNaN(h)||h<.1)throw new Me.Type("Given version is not a positive number");if(h=Math.round(10*h)/10,this.idbdb||this._state.isBeingOpened)throw new Me.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,h);var m=this._versions,g=m.filter(function(E){return E._cfg.version===h})[0];return g||(g=new this.Version(h),m.push(g),m.sort(va),g.stores({}),this._state.autoSchema=!1,g)},Yt.prototype._whenReady=function(h){var m=this;return this.idbdb&&(this._state.openComplete||Ne.letThrough||this._vip)?h():new Re(function(g,E){if(m._state.openComplete)return E(new Me.DatabaseClosed(m._state.dbOpenError));if(!m._state.isBeingOpened){if(!m._state.autoOpen)return void E(new Me.DatabaseClosed);m.open().catch(wt)}m._state.dbReadyPromise.then(g,E)}).then(h)},Yt.prototype.use=function(h){var m=h.stack,g=h.create,E=h.level,A=h.name;return A&&this.unuse({stack:m,name:A}),h=this._middlewares[m]||(this._middlewares[m]=[]),h.push({stack:m,create:g,level:E??10,name:A}),h.sort(function(w,D){return w.level-D.level}),this},Yt.prototype.unuse=function(h){var m=h.stack,g=h.name,E=h.create;return m&&this._middlewares[m]&&(this._middlewares[m]=this._middlewares[m].filter(function(A){return E?A.create!==E:!!g&&A.name!==g})),this},Yt.prototype.open=function(){var h=this;return jn(gn,function(){return on(h)})},Yt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var h=this._state,m=gi.indexOf(this);if(0<=m&&gi.splice(m,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}h.isBeingOpened||(h.dbReadyPromise=new Re(function(g){h.dbReadyResolve=g}),h.openCanceller=new Re(function(g,E){h.cancelOpen=E}))},Yt.prototype.close=function(g){var m=(g===void 0?{disableAutoOpen:!0}:g).disableAutoOpen,g=this._state;m?(g.isBeingOpened&&g.cancelOpen(new Me.DatabaseClosed),this._close(),g.autoOpen=!1,g.dbOpenError=new Me.DatabaseClosed):(this._close(),g.autoOpen=this._options.autoOpen||g.isBeingOpened,g.openComplete=!1,g.dbOpenError=null)},Yt.prototype.delete=function(h){var m=this;h===void 0&&(h={disableAutoOpen:!0});var g=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new Re(function(A,w){function D(){m.close(h);var k=m._deps.indexedDB.deleteDatabase(m.name);k.onsuccess=kt(function(){var q,H,$;q=m._deps,H=m.name,$=q.indexedDB,q=q.IDBKeyRange,Nr($)||H===rs||ba($,q).delete(H).catch(wt),A()}),k.onerror=Bn(w),k.onblocked=m._fireOnBlocked}if(g)throw new Me.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(D):D()})},Yt.prototype.backendDB=function(){return this.idbdb},Yt.prototype.isOpen=function(){return this.idbdb!==null},Yt.prototype.hasBeenClosed=function(){var h=this._state.dbOpenError;return h&&h.name==="DatabaseClosed"},Yt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Yt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Yt.prototype,"tables",{get:function(){var h=this;return d(this._allTables).map(function(m){return h._allTables[m]})},enumerable:!1,configurable:!0}),Yt.prototype.transaction=function(){var h=(function(m,g,E){var A=arguments.length;if(A<2)throw new Me.InvalidArgument("Too few arguments");for(var w=new Array(A-1);--A;)w[A-1]=arguments[A];return E=w.pop(),[m,G(w),E]}).apply(this,arguments);return this._transaction.apply(this,h)},Yt.prototype._transaction=function(h,m,g){var E=this,A=Ne.trans;A&&A.db===this&&h.indexOf("!")===-1||(A=null);var w,D,k=h.indexOf("?")!==-1;h=h.replace("!","").replace("?","");try{if(D=m.map(function(H){if(H=H instanceof E.Table?H.name:H,typeof H!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return H}),h=="r"||h===Rr)w=Rr;else{if(h!="rw"&&h!=Cr)throw new Me.InvalidArgument("Invalid transaction mode: "+h);w=Cr}if(A){if(A.mode===Rr&&w===Cr){if(!k)throw new Me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");A=null}A&&D.forEach(function(H){if(A&&A.storeNames.indexOf(H)===-1){if(!k)throw new Me.SubTransaction("Table "+H+" not included in parent transaction.");A=null}}),k&&A&&!A.active&&(A=null)}}catch(H){return A?A._promise(null,function($,U){U(H)}):It(H)}var q=(function H($,U,J,F,Y){return Re.resolve().then(function(){var Q=Ne.transless||Ne,X=$._createTransaction(U,J,$._dbSchema,F);if(X.explicit=!0,Q={trans:X,transless:Q},F)X.idbtrans=F.idbtrans;else try{X.create(),X.idbtrans._explicit=!0,$._state.PR1398_maxLoop=3}catch(ce){return ce.name===pt.InvalidState&&$.isOpen()&&0<--$._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),$.close({disableAutoOpen:!1}),$.open().then(function(){return H($,U,J,null,Y)})):It(ce)}var te,ie=B(Y);return ie&&Gt(),Q=Re.follow(function(){var ce;(te=Y.call(X,X))&&(ie?(ce=kn.bind(null,null),te.then(ce,ce)):typeof te.next=="function"&&typeof te.throw=="function"&&(te=Rt(te)))},Q),(te&&typeof te.then=="function"?Re.resolve(te).then(function(ce){return X.active?ce:It(new Me.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Q.then(function(){return te})).then(function(ce){return F&&X._resolve(),X._completion.then(function(){return ce})}).catch(function(ce){return X._reject(ce),It(ce)})})}).bind(null,this,w,D,A,g);return A?A._promise(w,q,"lock"):Ne.trans?jn(Ne.transless,function(){return E._whenReady(q)}):this._whenReady(q)},Yt.prototype.table=function(h){if(!O(this._allTables,h))throw new Me.InvalidTable("Table ".concat(h," does not exist"));return this._allTables[h]},Yt);function Yt(h,m){var g=this;this._middlewares={},this.verno=0;var E=Yt.dependencies;this._options=m=s({addons:Yt.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},m),this._deps={indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange},E=m.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var A,w,D,k,q,H={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:wt,dbReadyPromise:null,cancelOpen:wt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:m.autoOpen};H.dbReadyPromise=new Re(function(U){H.dbReadyResolve=U}),H.openCanceller=new Re(function(U,J){H.cancelOpen=J}),this._state=H,this.name=h,this.on=Jr(this,"populate","blocked","versionchange","close",{ready:[en,wt]}),this.once=function(U,J){var F=function(){for(var Y=[],Q=0;Q<arguments.length;Q++)Y[Q]=arguments[Q];g.on(U).unsubscribe(F),J.apply(g,Y)};return g.on(U,F)},this.on.ready.subscribe=Ue(this.on.ready.subscribe,function(U){return function(J,F){Yt.vip(function(){var Y,Q=g._state;Q.openComplete?(Q.dbOpenError||Re.resolve().then(J),F&&U(J)):Q.onReadyBeingFired?(Q.onReadyBeingFired.push(J),F&&U(J)):(U(J),Y=g,F||U(function X(){Y.on.ready.unsubscribe(J),Y.on.ready.unsubscribe(X)}))})}}),this.Collection=(A=this,An(il.prototype,function(te,X){this.db=A;var F=fa,Y=null;if(X)try{F=X()}catch(ie){Y=ie}var Q=te._ctx,X=Q.table,te=X.hook.reading.fire;this._ctx={table:X,index:Q.index,isPrimKey:!Q.index||X.schema.primKey.keyPath&&Q.index===X.schema.primKey.name,range:F,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Y,or:Q.or,valueMapper:te!==hi?te:null}})),this.Table=(w=this,An(ss.prototype,function(U,J,F){this.db=w,this._tx=F,this.name=U,this.schema=J,this.hook=w._allTables[U]?w._allTables[U].hook:Jr(null,{creating:[As,wt],reading:[fi,hi],updating:[vo,wt],deleting:[yo,wt]})})),this.Transaction=(D=this,An(Ns.prototype,function(U,J,F,Y,Q){var X=this;U!=="readonly"&&J.forEach(function(te){te=(te=F[te])===null||te===void 0?void 0:te.yProps,te&&(J=J.concat(te.map(function(ie){return ie.updatesTable})))}),this.db=D,this.mode=U,this.storeNames=J,this.schema=F,this.chromeTransactionDurability=Y,this.idbtrans=null,this.on=Jr(this,"complete","error","abort"),this.parent=Q||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Re(function(te,ie){X._resolve=te,X._reject=ie}),this._completion.then(function(){X.active=!1,X.on.complete.fire()},function(te){var ie=X.active;return X.active=!1,X.on.error.fire(te),X.parent?X.parent._reject(te):ie&&X.idbtrans&&X.idbtrans.abort(),It(te)})})),this.Version=(k=this,An(Ea.prototype,function(U){this.db=k,this._cfg={version:U,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(q=this,An(zi.prototype,function(U,J,F){if(this.db=q,this._ctx={table:U,index:J===":id"?null:J,or:F},this._cmp=this._ascending=ot,this._descending=function(Y,Q){return ot(Q,Y)},this._max=function(Y,Q){return 0<ot(Y,Q)?Y:Q},this._min=function(Y,Q){return ot(Y,Q)<0?Y:Q},this._IDBKeyRange=q._deps.IDBKeyRange,!this._IDBKeyRange)throw new Me.MissingAPI})),this.on("versionchange",function(U){0<U.newVersion?console.warn("Another connection wants to upgrade database '".concat(g.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(g.name,"'. Closing db now to resume the delete request.")),g.close({disableAutoOpen:!1})}),this.on("blocked",function(U){!U.newVersion||U.newVersion<U.oldVersion?console.warn("Dexie.delete('".concat(g.name,"') was blocked")):console.warn("Upgrade '".concat(g.name,"' blocked by other connection holding version ").concat(U.oldVersion/10))}),this._maxKey=Bi(m.IDBKeyRange),this._createTransaction=function(U,J,F,Y){return new g.Transaction(U,J,F,g._options.chromeTransactionDurability,Y)},this._fireOnBlocked=function(U){g.on("blocked").fire(U),gi.filter(function(J){return J.name===g.name&&J!==g&&!J._state.vcFired}).map(function(J){return J.on("versionchange").fire(U)})},this.use(Aa),this.use(ol),this.use(Gf),this.use(kr),this.use(ii);var $=new Proxy(this,{get:function(U,J,F){if(J==="_vip")return!0;if(J==="table")return function(Q){return Co(g.table(Q),$)};var Y=Reflect.get(U,J,F);return Y instanceof ss?Co(Y,$):J==="tables"?Y.map(function(Q){return Co(Q,$)}):J==="_createTransaction"?function(){return Co(Y.apply(this,arguments),$)}:Y}});this.vip=$,E.forEach(function(U){return U(g)})}var Ra,yr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Mc=(ll.prototype.subscribe=function(h,m,g){return this._subscribe(h&&typeof h!="function"?h:{next:h,error:m,complete:g})},ll.prototype[yr]=function(){return this},ll);function ll(h){this._subscribe=h}try{Ra={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Ra={indexedDB:null,IDBKeyRange:null}}function kc(h){var m,g=!1,E=new Mc(function(A){var w=B(h),D,k=!1,q={},H={},$={get closed(){return k},unsubscribe:function(){k||(k=!0,D&&D.abort(),U&&vn.storagemutated.unsubscribe(F))}};A.start&&A.start($);var U=!1,J=function(){return wr(Y)},F=function(Q){c(q,Q),v(H,q)&&J()},Y=function(){var Q,X,te;!k&&Ra.indexedDB&&(q={},Q={},D&&D.abort(),D=new AbortController,te=(function(ie){var ce=Yn();try{w&&Gt();var pe=Pt(h,ie);return pe=w?pe.finally(kn):pe}finally{ce&&Sr()}})(X={subscr:Q,signal:D.signal,requery:J,querier:h,trans:null}),Promise.resolve(te).then(function(ie){g=!0,m=ie,k||X.signal.aborted||(q={},(function(ce){for(var pe in ce)if(O(ce,pe))return;return 1})(H=Q)||U||(vn(Dr,F),U=!0),wr(function(){return!k&&A.next&&A.next(ie)}))},function(ie){g=!1,["DatabaseClosedError","AbortError"].includes(ie?.name)||k||wr(function(){k||A.error&&A.error(ie)})}))};return setTimeout(J,0),$});return E.hasValue=function(){return g},E.getValue=function(){return m},E}var Ls=Ai;function uu(h){var m=cs;try{cs=!0,vn.storagemutated.fire(h),Se(h,!0)}finally{cs=m}}x(Ls,s(s({},Pi),{delete:function(h){return new Ls(h,{addons:[]}).delete()},exists:function(h){return new Ls(h,{addons:[]}).open().then(function(m){return m.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(h){try{return m=Ls.dependencies,g=m.indexedDB,m=m.IDBKeyRange,(Nr(g)?Promise.resolve(g.databases()).then(function(E){return E.map(function(A){return A.name}).filter(function(A){return A!==rs})}):ba(g,m).toCollection().primaryKeys()).then(h)}catch{return It(new Me.MissingAPI)}var m,g},defineClass:function(){return function(h){_(this,h)}},ignoreTransaction:function(h){return Ne.trans?jn(Ne.transless,h):h()},vip:Ta,async:function(h){return function(){try{var m=Rt(h.apply(this,arguments));return m&&typeof m.then=="function"?m:Re.resolve(m)}catch(g){return It(g)}}},spawn:function(h,m,g){try{var E=Rt(h.apply(g,m||[]));return E&&typeof E.then=="function"?E:Re.resolve(E)}catch(A){return It(A)}},currentTransaction:{get:function(){return Ne.trans||null}},waitFor:function(h,m){return m=Re.resolve(typeof h=="function"?Ls.ignoreTransaction(h):h).timeout(m||6e4),Ne.trans?Ne.trans.waitFor(m):m},Promise:Re,debug:{get:function(){return Mn},set:function(h){nl(h)}},derive:_e,extend:_,props:x,override:Ue,Events:Jr,on:vn,liveQuery:kc,extendObservabilitySet:c,getByKeyPath:nt,setByKeyPath:V,delByKeyPath:function(h,m){typeof m=="string"?V(h,m,void 0):"length"in m&&[].map.call(m,function(g){V(h,g,void 0)})},shallowClone:M,deepClone:N,getObjectDiff:Vr,cmp:ot,asap:ft,minKey:-1/0,addons:[],connections:gi,errnames:pt,dependencies:Ra,cache:S,semVer:"4.2.1",version:"4.2.1".split(".").map(function(h){return parseInt(h)}).reduce(function(h,m,g){return h+m/Math.pow(10,2*g)})})),Ls.maxKey=Bi(Ls.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(vn(Dr,function(h){cs||(h=new CustomEvent(pr,{detail:h}),cs=!0,dispatchEvent(h),cs=!1)}),addEventListener(pr,function(h){h=h.detail,cs||uu(h)}));var Ca,cs=!1,ar=function(){};return typeof BroadcastChannel<"u"&&((ar=function(){(Ca=new BroadcastChannel(pr)).onmessage=function(h){return h.data&&uu(h.data)}})(),typeof Ca.unref=="function"&&Ca.unref(),vn(Dr,function(h){cs||Ca.postMessage(h)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(h){if(!Ai.disableBfCache&&h.persisted){Mn&&console.debug("Dexie: handling persisted pagehide"),Ca?.close();for(var m=0,g=gi;m<g.length;m++)g[m].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(h){!Ai.disableBfCache&&h.persisted&&(Mn&&console.debug("Dexie: handling persisted pageshow"),ar(),uu({all:new _n(-1/0,[[]])}))})),Re.rejectionMapper=function(h,m){return!h||h instanceof we||h instanceof TypeError||h instanceof SyntaxError||!h.name||!es[h.name]?h:(m=new es[h.name](m||h.message,h),"stack"in h&&fe(m,"stack",{get:function(){return this.inner.stack}}),m)},nl(Mn),s(Ai,Object.freeze({__proto__:null,Dexie:Ai,liveQuery:kc,Entity:bo,cmp:ot,PropModification:Ir,replacePrefix:function(h,m){return new Ir({replacePrefix:[h,m]})},add:function(h){return new Ir({add:h})},remove:function(h){return new Ir({remove:h})},default:Ai,RangeSet:_n,mergeRanges:Mr,rangesOverlap:qn}),{default:Ai}),Ai})})(Kh)),Kh.exports}var qS=BS();const ep=Cp(qS),k_=Symbol.for("Dexie"),sf=globalThis[k_]||(globalThis[k_]=ep);if(ep.semVer!==sf.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ep.semVer} and ${sf.semVer}`);const{liveQuery:cN,mergeRanges:hN,rangesOverlap:fN,RangeSet:dN,cmp:mN,Entity:pN,PropModification:gN,replacePrefix:yN,add:vN,remove:_N,DexieYProvider:EN}=sf,Qi=new sf("GeminiPodcastFlashcards");Qi.version(1).stores({vocab:"id, word, status, nextReview, reviewCount, updatedAt"});Qi.version(2).stores({vocab:"id, word, status, nextReview, reviewCount, updatedAt"});Qi.version(3).stores({vocab:"id, word, status, nextReview, reviewCount, updatedAt",study_logs:"++id, cardId, grade, reviewTime, [cardId+reviewTime]"});async function HS(){if(await Qi.vocab.count()===0)try{const n="/public/flashcards/data.json".replace("//","/");console.log(`Fetching data from: ${n}`);const s=await fetch(n);if(!s.ok)throw new Error(`Failed to fetch data.json (${s.status})`);const u=(await s.json()).map(d=>({...d,status:d.status||"new",reviewCount:d.reviewCount||0,nextReview:d.nextReview||Date.now(),updatedAt:Date.now(),id:d.id||crypto.randomUUID()}));await Qi.vocab.bulkAdd(u),console.log(`Initialized DB with ${u.length} cards.`)}catch(e){console.error("Error initializing database:",e)}}const FS=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),KS=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),V_=i=>{const e=KS(i);return e.charAt(0).toUpperCase()+e.slice(1)},DE=(...i)=>i.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),GS=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var YS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const QS=Ie.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:d,...y},_)=>Ie.createElement("svg",{ref:_,...YS,width:e,height:e,stroke:i,strokeWidth:s?Number(n)*24/Number(e):n,className:DE("lucide",o),...!u&&!GS(y)&&{"aria-hidden":"true"},...y},[...d.map(([b,C])=>Ie.createElement(b,C)),...Array.isArray(u)?u:[u]]));const ua=(i,e)=>{const n=Ie.forwardRef(({className:s,...o},u)=>Ie.createElement(QS,{ref:u,iconNode:e,className:DE(`lucide-${FS(V_(i))}`,`lucide-${i}`,s),...o}));return n.displayName=V_(i),n};const $S=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],XS=ua("layers",$S);const JS=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],P_=ua("lightbulb",JS);const ZS=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],WS=ua("loader-circle",ZS);const eA=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],tA=ua("mic",eA);const nA=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],rA=ua("play",nA);const iA=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],L_=ua("sparkles",iA);const sA=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],aA=ua("square",sA);const oA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],lA=ua("trash-2",oA);const uA=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Mh=ua("volume-2",uA),Ku={AI_PARAPHRASE:15e3,AI_CARD_DETAILS:3e4,AI_TRANSCRIPT:6e4,AI_BATCH:12e4},bN={WORD_MAX_LENGTH:100,DEFINITION_MAX_LENGTH:500,CONTEXT_MAX_LENGTH:1e3,COLLOCATIONS_MAX:5,COLLOCATIONS_ITEM_MAX:50},cA={MIN_EASE_FACTOR:1.3,DEFAULT_EASE_FACTOR:2.5,ONE_MINUTE:6e4,ONE_DAY:864e5,LEARNING_STEP_MINUTES:10},Ml={AGAIN:0,GOOD:3,PERFECT:5},Um={PARAPHRASE:{max:20,window:6e4},CARD_DETAILS:{max:10,window:6e4},TRANSCRIPT_ANALYSIS:{max:3,window:6e4}};function hA(i,e){const n=Date.now(),{ONE_MINUTE:s,ONE_DAY:o,MIN_EASE_FACTOR:u,DEFAULT_EASE_FACTOR:d,LEARNING_STEP_MINUTES:y}=cA,_=Number(e);if(!Number.isInteger(_)||_<Ml.AGAIN||_>Ml.PERFECT)throw new Error(`Grade must be an integer between ${Ml.AGAIN} and ${Ml.PERFECT}. Received: ${e}`);const b=i.easeFactor??d,C=i.reviewCount??0;let O=i.interval??0;_>=Ml.GOOD?O=O===0?1:O===1?6:Math.round(O*b):O=0;const x=.1-(5-_)*(.08+(5-_)*.02);let Z=Math.max(u,b+x);Z=Math.round(Z*100)/100;const fe=O===0?n+y*s:n+O*o,_e=_>=Ml.GOOD?"review":"learning";return{easeFactor:Z,interval:O,nextReview:fe,status:_e,reviewCount:C+1,updatedAt:n}}function fA(){const[i,e]=Ie.useState(!1),[n,s]=Ie.useState(null),[o,u]=Ie.useState(null),d=Ie.useRef(null),y=Ie.useRef([]);return Ie.useEffect(()=>()=>{n&&URL.revokeObjectURL(n)},[n]),{isRecording:i,audioUrl:n,error:o,startRecording:async()=>{try{u(null);const O=await navigator.mediaDevices.getUserMedia({audio:!0});d.current=new MediaRecorder(O),y.current=[],d.current.ondataavailable=x=>{x.data.size>0&&y.current.push(x.data)},d.current.onstop=()=>{const x=new Blob(y.current,{type:"audio/webm"}),Z=URL.createObjectURL(x);s(Z),O.getTracks().forEach(fe=>fe.stop())},d.current.start(),e(!0)}catch(O){console.error("Error accessing microphone:",O),u("Microphone access denied. Please check your permissions.")}},stopRecording:()=>{d.current&&i&&(d.current.stop(),e(!1))},clearRecording:()=>{n&&(URL.revokeObjectURL(n),s(null)),e(!1),u(null)}}}var U_;(function(i){i.STRING="string",i.NUMBER="number",i.INTEGER="integer",i.BOOLEAN="boolean",i.ARRAY="array",i.OBJECT="object"})(U_||(U_={}));var z_;(function(i){i.LANGUAGE_UNSPECIFIED="language_unspecified",i.PYTHON="python"})(z_||(z_={}));var j_;(function(i){i.OUTCOME_UNSPECIFIED="outcome_unspecified",i.OUTCOME_OK="outcome_ok",i.OUTCOME_FAILED="outcome_failed",i.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(j_||(j_={}));const B_=["user","model","function","system"];var q_;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(q_||(q_={}));var H_;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(H_||(H_={}));var F_;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(F_||(F_={}));var K_;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER"})(K_||(K_={}));var Zu;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.OTHER="OTHER"})(Zu||(Zu={}));var G_;(function(i){i.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",i.RETRIEVAL_QUERY="RETRIEVAL_QUERY",i.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",i.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",i.CLASSIFICATION="CLASSIFICATION",i.CLUSTERING="CLUSTERING"})(G_||(G_={}));var Y_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(Y_||(Y_={}));var Q_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Q_||(Q_={}));class hr extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class kl extends hr{constructor(e,n){super(e),this.response=n}}class xE extends hr{constructor(e,n,s,o){super(e),this.status=n,this.statusText=s,this.errorDetails=o}}class ro extends hr{}class NE extends hr{}const dA="https://generativelanguage.googleapis.com",mA="v1beta",pA="0.24.1",gA="genai-js";var Go;(function(i){i.GENERATE_CONTENT="generateContent",i.STREAM_GENERATE_CONTENT="streamGenerateContent",i.COUNT_TOKENS="countTokens",i.EMBED_CONTENT="embedContent",i.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Go||(Go={}));class yA{constructor(e,n,s,o,u){this.model=e,this.task=n,this.apiKey=s,this.stream=o,this.requestOptions=u}toString(){var e,n;const s=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||mA;let u=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||dA}/${s}/${this.model}:${this.task}`;return this.stream&&(u+="?alt=sse"),u}}function vA(i){const e=[];return i?.apiClient&&e.push(i.apiClient),e.push(`${gA}/${pA}`),e.join(" ")}async function _A(i){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",vA(i.requestOptions)),n.append("x-goog-api-key",i.apiKey);let s=(e=i.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(o){throw new ro(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${o.message}`)}for(const[o,u]of s.entries()){if(o==="x-goog-api-key")throw new ro(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new ro(`Header name ${o} can only be set using the apiClient field`);n.append(o,u)}}return n}async function EA(i,e,n,s,o,u){const d=new yA(i,e,n,s,u);return{url:d.toString(),fetchOptions:Object.assign(Object.assign({},AA(u)),{method:"POST",headers:await _A(d),body:o})}}async function _c(i,e,n,s,o,u={},d=fetch){const{url:y,fetchOptions:_}=await EA(i,e,n,s,o,u);return bA(y,_,d)}async function bA(i,e,n=fetch){let s;try{s=await n(i,e)}catch(o){TA(o,i)}return s.ok||await SA(s,i),s}function TA(i,e){let n=i;throw n.name==="AbortError"?(n=new NE(`Request aborted when fetching ${e.toString()}: ${i.message}`),n.stack=i.stack):i instanceof xE||i instanceof ro||(n=new hr(`Error fetching from ${e.toString()}: ${i.message}`),n.stack=i.stack),n}async function SA(i,e){let n="",s;try{const o=await i.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,s=o.error.details)}catch{}throw new xE(`Error fetching from ${e.toString()}: [${i.status} ${i.statusText}] ${n}`,i.status,i.statusText,s)}function AA(i){const e={};if(i?.signal!==void 0||i?.timeout>=0){const n=new AbortController;i?.timeout>=0&&setTimeout(()=>n.abort(),i.timeout),i?.signal&&i.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}function Op(i){return i.text=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Gh(i.candidates[0]))throw new kl(`${Ja(i)}`,i);return wA(i)}else if(i.promptFeedback)throw new kl(`Text not available. ${Ja(i)}`,i);return""},i.functionCall=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Gh(i.candidates[0]))throw new kl(`${Ja(i)}`,i);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),$_(i)[0]}else if(i.promptFeedback)throw new kl(`Function call not available. ${Ja(i)}`,i)},i.functionCalls=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Gh(i.candidates[0]))throw new kl(`${Ja(i)}`,i);return $_(i)}else if(i.promptFeedback)throw new kl(`Function call not available. ${Ja(i)}`,i)},i}function wA(i){var e,n,s,o;const u=[];if(!((n=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const d of(o=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)d.text&&u.push(d.text),d.executableCode&&u.push("\n```"+d.executableCode.language+`
`+d.executableCode.code+"\n```\n"),d.codeExecutionResult&&u.push("\n```\n"+d.codeExecutionResult.output+"\n```\n");return u.length>0?u.join(""):""}function $_(i){var e,n,s,o;const u=[];if(!((n=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const d of(o=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)d.functionCall&&u.push(d.functionCall);if(u.length>0)return u}const RA=[Zu.RECITATION,Zu.SAFETY,Zu.LANGUAGE];function Gh(i){return!!i.finishReason&&RA.includes(i.finishReason)}function Ja(i){var e,n,s;let o="";if((!i.candidates||i.candidates.length===0)&&i.promptFeedback)o+="Response was blocked",!((e=i.promptFeedback)===null||e===void 0)&&e.blockReason&&(o+=` due to ${i.promptFeedback.blockReason}`),!((n=i.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${i.promptFeedback.blockReasonMessage}`);else if(!((s=i.candidates)===null||s===void 0)&&s[0]){const u=i.candidates[0];Gh(u)&&(o+=`Candidate was blocked due to ${u.finishReason}`,u.finishMessage&&(o+=`: ${u.finishMessage}`))}return o}function oc(i){return this instanceof oc?(this.v=i,this):new oc(i)}function CA(i,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(i,e||[]),o,u=[];return o={},d("next"),d("throw"),d("return"),o[Symbol.asyncIterator]=function(){return this},o;function d(x){s[x]&&(o[x]=function(Z){return new Promise(function(fe,_e){u.push([x,Z,fe,_e])>1||y(x,Z)})})}function y(x,Z){try{_(s[x](Z))}catch(fe){O(u[0][3],fe)}}function _(x){x.value instanceof oc?Promise.resolve(x.value.v).then(b,C):O(u[0][2],x)}function b(x){y("next",x)}function C(x){y("throw",x)}function O(x,Z){x(Z),u.shift(),u.length&&y(u[0][0],u[0][1])}}const X_=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function IA(i){const e=i.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=xA(e),[s,o]=n.tee();return{stream:DA(s),response:OA(o)}}async function OA(i){const e=[],n=i.getReader();for(;;){const{done:s,value:o}=await n.read();if(s)return Op(NA(e));e.push(o)}}function DA(i){return CA(this,arguments,function*(){const n=i.getReader();for(;;){const{value:s,done:o}=yield oc(n.read());if(o)break;yield yield oc(Op(s))}})}function xA(i){const e=i.getReader();return new ReadableStream({start(s){let o="";return u();function u(){return e.read().then(({value:d,done:y})=>{if(y){if(o.trim()){s.error(new hr("Failed to parse stream"));return}s.close();return}o+=d;let _=o.match(X_),b;for(;_;){try{b=JSON.parse(_[1])}catch{s.error(new hr(`Error parsing JSON response: "${_[1]}"`));return}s.enqueue(b),o=o.substring(_[0].length),_=o.match(X_)}return u()}).catch(d=>{let y=d;throw y.stack=d.stack,y.name==="AbortError"?y=new NE("Request aborted when reading from the stream"):y=new hr("Error reading from the stream"),y})}}})}function NA(i){const e=i[i.length-1],n={promptFeedback:e?.promptFeedback};for(const s of i){if(s.candidates){let o=0;for(const u of s.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=u.citationMetadata,n.candidates[o].groundingMetadata=u.groundingMetadata,n.candidates[o].finishReason=u.finishReason,n.candidates[o].finishMessage=u.finishMessage,n.candidates[o].safetyRatings=u.safetyRatings,u.content&&u.content.parts){n.candidates[o].content||(n.candidates[o].content={role:u.content.role||"user",parts:[]});const d={};for(const y of u.content.parts)y.text&&(d.text=y.text),y.functionCall&&(d.functionCall=y.functionCall),y.executableCode&&(d.executableCode=y.executableCode),y.codeExecutionResult&&(d.codeExecutionResult=y.codeExecutionResult),Object.keys(d).length===0&&(d.text=""),n.candidates[o].content.parts.push(d)}o++}s.usageMetadata&&(n.usageMetadata=s.usageMetadata)}return n}async function ME(i,e,n,s){const o=await _c(e,Go.STREAM_GENERATE_CONTENT,i,!0,JSON.stringify(n),s);return IA(o)}async function kE(i,e,n,s){const u=await(await _c(e,Go.GENERATE_CONTENT,i,!1,JSON.stringify(n),s)).json();return{response:Op(u)}}function VE(i){if(i!=null){if(typeof i=="string")return{role:"system",parts:[{text:i}]};if(i.text)return{role:"system",parts:[i]};if(i.parts)return i.role?i:{role:"system",parts:i.parts}}}function lc(i){let e=[];if(typeof i=="string")e=[{text:i}];else for(const n of i)typeof n=="string"?e.push({text:n}):e.push(n);return MA(e)}function MA(i){const e={role:"user",parts:[]},n={role:"function",parts:[]};let s=!1,o=!1;for(const u of i)"functionResponse"in u?(n.parts.push(u),o=!0):(e.parts.push(u),s=!0);if(s&&o)throw new hr("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!o)throw new hr("No content is provided for sending chat message.");return s?e:n}function kA(i,e){var n;let s={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(n=e?.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=i.generateContentRequest!=null;if(i.contents){if(o)throw new ro("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=i.contents}else if(o)s=Object.assign(Object.assign({},s),i.generateContentRequest);else{const u=lc(i);s.contents=[u]}return{generateContentRequest:s}}function J_(i){let e;return i.contents?e=i:e={contents:[lc(i)]},i.systemInstruction&&(e.systemInstruction=VE(i.systemInstruction)),e}function VA(i){return typeof i=="string"||Array.isArray(i)?{content:lc(i)}:i}const Z_=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],PA={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function LA(i){let e=!1;for(const n of i){const{role:s,parts:o}=n;if(!e&&s!=="user")throw new hr(`First content should be with role 'user', got ${s}`);if(!B_.includes(s))throw new hr(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(B_)}`);if(!Array.isArray(o))throw new hr("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new hr("Each Content should have at least one part");const u={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const y of o)for(const _ of Z_)_ in y&&(u[_]+=1);const d=PA[s];for(const y of Z_)if(!d.includes(y)&&u[y]>0)throw new hr(`Content with role '${s}' can't contain '${y}' part`);e=!0}}function W_(i){var e;if(i.candidates===void 0||i.candidates.length===0)return!1;const n=(e=i.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const s of n.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}const e0="SILENT_ERROR";class UA{constructor(e,n,s,o={}){this.model=n,this.params=s,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,s?.history&&(LA(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var s,o,u,d,y,_;await this._sendPromise;const b=lc(e),C={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(y=this.params)===null||y===void 0?void 0:y.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,b]},O=Object.assign(Object.assign({},this._requestOptions),n);let x;return this._sendPromise=this._sendPromise.then(()=>kE(this._apiKey,this.model,C,O)).then(Z=>{var fe;if(W_(Z.response)){this._history.push(b);const _e=Object.assign({parts:[],role:"model"},(fe=Z.response.candidates)===null||fe===void 0?void 0:fe[0].content);this._history.push(_e)}else{const _e=Ja(Z.response);_e&&console.warn(`sendMessage() was unsuccessful. ${_e}. Inspect response object for details.`)}x=Z}).catch(Z=>{throw this._sendPromise=Promise.resolve(),Z}),await this._sendPromise,x}async sendMessageStream(e,n={}){var s,o,u,d,y,_;await this._sendPromise;const b=lc(e),C={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(y=this.params)===null||y===void 0?void 0:y.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,b]},O=Object.assign(Object.assign({},this._requestOptions),n),x=ME(this._apiKey,this.model,C,O);return this._sendPromise=this._sendPromise.then(()=>x).catch(Z=>{throw new Error(e0)}).then(Z=>Z.response).then(Z=>{if(W_(Z)){this._history.push(b);const fe=Object.assign({},Z.candidates[0].content);fe.role||(fe.role="model"),this._history.push(fe)}else{const fe=Ja(Z);fe&&console.warn(`sendMessageStream() was unsuccessful. ${fe}. Inspect response object for details.`)}}).catch(Z=>{Z.message!==e0&&console.error(Z)}),x}}async function zA(i,e,n,s){return(await _c(e,Go.COUNT_TOKENS,i,!1,JSON.stringify(n),s)).json()}async function jA(i,e,n,s){return(await _c(e,Go.EMBED_CONTENT,i,!1,JSON.stringify(n),s)).json()}async function BA(i,e,n,s){const o=n.requests.map(d=>Object.assign(Object.assign({},d),{model:e}));return(await _c(e,Go.BATCH_EMBED_CONTENTS,i,!1,JSON.stringify({requests:o}),s)).json()}class t0{constructor(e,n,s={}){this.apiKey=e,this._requestOptions=s,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=VE(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var s;const o=J_(e),u=Object.assign(Object.assign({},this._requestOptions),n);return kE(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),u)}async generateContentStream(e,n={}){var s;const o=J_(e),u=Object.assign(Object.assign({},this._requestOptions),n);return ME(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),u)}startChat(e){var n;return new UA(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const s=kA(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return zA(this.apiKey,this.model,s,o)}async embedContent(e,n={}){const s=VA(e),o=Object.assign(Object.assign({},this._requestOptions),n);return jA(this.apiKey,this.model,s,o)}async batchEmbedContents(e,n={}){const s=Object.assign(Object.assign({},this._requestOptions),n);return BA(this.apiKey,this.model,e,s)}}class kh{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new hr("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new t0(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,s){if(!e.name)throw new ro("Cached content must contain a `name` field.");if(!e.model)throw new ro("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const d of o)if(n?.[d]&&e[d]&&n?.[d]!==e[d]){if(d==="model"){const y=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,_=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(y===_)continue}throw new ro(`Different value for "${d}" specified in modelParams (${n[d]}) and cachedContent (${e[d]})`)}const u=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new t0(this.apiKey,u,s)}}const qA={models:[{name:"gemini-2.5-flash-lite",enabled:1},{name:"gemini-2.5-flash",enabled:1},{name:"gemini-3-flash",enabled:1}]},HA={ai:qA};class Cf extends Error{constructor(e,n,s={}){super(e),this.name="AppError",this.code=n,this.details=s}}const Er={DB_ERROR:"DB_ERROR",NETWORK_ERROR:"NETWORK_ERROR",AUTH_ERROR:"AUTH_ERROR",AI_ERROR:"AI_ERROR",VALIDATION_ERROR:"VALIDATION_ERROR",RATE_LIMIT_ERROR:"RATE_LIMIT_ERROR"},zm={[Er.DB_ERROR]:"Database error. Please refresh the page and try again.",[Er.NETWORK_ERROR]:"Network error. Please check your internet connection.",[Er.AUTH_ERROR]:"Authentication failed. Please try logging in again.",[Er.AI_ERROR]:"AI service unavailable. Please check your API key in Settings.",[Er.VALIDATION_ERROR]:"Invalid input. Please check your data and try again.",[Er.RATE_LIMIT_ERROR]:"Too many requests. Please wait a moment before trying again."},FA={"auth/user-not-found":"User not found. Please check your email address.","auth/wrong-password":"Incorrect password. Please try again.","auth/email-already-in-use":"This email is already registered.","auth/weak-password":"Password is too weak. Please use a stronger password.","auth/network-request-failed":"Network error. Please check your internet connection.","auth/too-many-requests":"Too many failed attempts. Please try again later.","auth/user-disabled":"This account has been disabled.","auth/invalid-email":"Invalid email address.","auth/operation-not-allowed":"This operation is not allowed.","auth/popup-closed-by-user":"Sign-in popup was closed. Please try again."};function Gu(i,e=""){return e?console.error(`[${e}]`,i):console.error(i),i instanceof Cf?{message:i.message,code:i.code,userMessage:zm[i.code]||i.message,details:i.details}:i.code?.startsWith("auth/")?{message:i.message,code:Er.AUTH_ERROR,userMessage:FA[i.code]||"Authentication error. Please try again.",firebaseCode:i.code}:i.code?.startsWith("firestore/")?{message:i.message,code:Er.DB_ERROR,userMessage:"Database error. Please try again.",firestoreCode:i.code}:i.message?.toLowerCase().includes("network")||i.message?.toLowerCase().includes("timeout")||i.message?.toLowerCase().includes("fetch")?{message:i.message,code:Er.NETWORK_ERROR,userMessage:zm[Er.NETWORK_ERROR]}:i.name==="DatabaseError"||i.message?.includes("IndexedDB")?{message:i.message,code:Er.DB_ERROR,userMessage:zm[Er.DB_ERROR]}:{message:i.message||"An unexpected error occurred",code:"UNKNOWN_ERROR",userMessage:i.message||"Something went wrong. Please try again."}}function TN(i,e={}){return new Cf(i,Er.VALIDATION_ERROR,e)}function KA(i,e){return new Cf(`Rate limit exceeded for ${i}`,Er.RATE_LIMIT_ERROR,{operation:i,waitTime:e})}function jm(i,e={}){return new Cf(i,Er.AI_ERROR,e)}class GA{constructor(){this.apiKeyKey="gemini_api_key_byok",this.modelName=HA.ai?.models?.default||"gemini-2.5-flash",this.requestCounts=new Map,Object.keys(Um).forEach(e=>{this.requestCounts.set(e,{count:0,resetAt:Date.now()+Um[e].window})})}_checkRateLimit(e){const n=Date.now(),s=this.requestCounts.get(e),o=Um[e];if(!(!s||!o)){if(n>=s.resetAt&&(s.count=0,s.resetAt=n+o.window),s.count>=o.max){const u=Math.ceil((s.resetAt-n)/1e3);throw KA(e,u)}s.count++}}getApiKey(){return localStorage.getItem(this.apiKeyKey)||sessionStorage.getItem(this.apiKeyKey)}isPersistent(){return!!localStorage.getItem(this.apiKeyKey)}setApiKey(e,n=!1){n?(localStorage.setItem(this.apiKeyKey,e),sessionStorage.removeItem(this.apiKeyKey)):(sessionStorage.setItem(this.apiKeyKey,e),localStorage.removeItem(this.apiKeyKey))}removeApiKey(){sessionStorage.removeItem(this.apiKeyKey),localStorage.removeItem(this.apiKeyKey)}hasKey(){return!!this.getApiKey()}async getParaphrase(e,n){this._checkRateLimit("PARAPHRASE");const s=this.getApiKey();if(!s)throw jm("API Key not found. Please configure it in Settings.");const u=new kh(s).getGenerativeModel({model:this.modelName}),d=`
      Role: English Language Tutor for B1/B2 learners.
      Task: Explain the word or phrase "${e}" in simple English.
      Context: "${n}"
      
      Constraints:
      1. Use simple vocabulary (CEFR B1 level).
      2. Keep it concise (under 30 words).
      3. Do NOT simply repeat the definition; explain it naturally.
      4. Output plain text only (no markdown).
    `;return this._callGemini(u,d,!1,!1,Ku.AI_PARAPHRASE)}async generateCardDetails(e){this._checkRateLimit("CARD_DETAILS");const n=this.getApiKey();if(!n)throw jm("API Key not found. Please configure it in Settings.");const o=new kh(n).getGenerativeModel({model:this.modelName}),u=`
You are an expert English teacher specializing in Vocabulary for Traditional Chinese (Taiwan) learners.
Target Input: "${e}"

**Task:**
Analyze the target input and return a JSON object. 
If the target has multiple meanings, select the **most frequent and practical meaning** for a general learner.
If the target is a phrase (e.g., "take for granted"), treat it as a single unit.

**Output Requirements (Strict JSON):**
Return ONLY a raw JSON object. Do not wrap it in markdown code blocks (no markdown formatting, no code blocks). The keys must be:

1.  "ipa": The IPA phonetic transcription.
    * **STRICTLY** use General American (US) pronunciation.
    * Use // for "bath", /o/ for "go", // for "hot".
    * Always pronounce the rhotic 'r' (/kr/).
2.  "definition": A simple, clear English definition (max 15 words) suitable for a flashcard.
3.  "translation": The Traditional Chinese (Taiwan) translation.
    * **CRITICAL:** Use Taiwan-specific vocabulary (e.g., use "" not ""; "" not "").
4.  "context": A practical, everyday English sentence containing the target "${e}".
    * Ensure the sentence context clarifies the meaning.
5.  "collocations": An array of 2-3 common collocations or related usage patterns (e.g., ["reluctant to admit", "reluctant agreement"]).

**JSON Structure:**
{
  "ipa": "String",
  "definition": "String",
  "translation": "String",
  "context": "String",
  "collocations": ["String", "String", "String"]
}
    `;return this._callGemini(o,u,!1,!0,Ku.AI_CARD_DETAILS)}async analyzeTranscript(e,n){this._checkRateLimit("TRANSCRIPT_ANALYSIS");const s=this.getApiKey();if(!s)throw jm("API Key not found. Please configure it in Settings.");const u=new kh(s).getGenerativeModel({model:this.modelName});let d="";n==="auto"?d='Select the most important vocabulary OR phrases (approx 5-10 items). Prioritize "chunks" and "collocations" over simple words if they are key to understanding.':d=`Select strictly up to ${n} most important vocabulary words or phrases.`;const y=`
You are an expert language tutor analyzing a podcast transcript for Traditional Chinese (Taiwan) learners.

**Task:**
Analyze the provided [Input Text] and extract vocabulary words, phrasal verbs, or idioms.

**Selection Criteria:**
1. Focus on **B2-C2 level words** or **idiomatic expressions** that are valuable for learning.
2. Ignore simple fillers (e.g., "you know", "like", "um") and very basic vocabulary (A1-A2 level).
3. Constraint: ${d}

**Output Requirements (Strict JSON):**
Return ONLY a raw JSON array of objects. Do not use markdown code blocks.
For each extracted item, provide:

1.  "word": The lemma (root form) of the word or the full phrase.
2.  "ipa": IPA phonetic transcription.
    * **STRICTLY** use General American (US) pronunciation.
    * Use // for "bath", /o/ for "go", // for "hot".
    * Always pronounce the rhotic 'r' (/kr/).
3.  "definition": A concise English definition **specifically matching how the word is used in the transcript**.
4.  "context": A NEW, practical sentence using the target word naturally.
5.  "translation": The Traditional Chinese (Taiwan) translation.
    * **CRITICAL:** Use Taiwan-specific vocabulary (e.g., "" not ""; "" not "").
6.  "collocations": An array of 2-3 common collocations or related usage patterns (e.g., ["reluctant to admit", "reluctant agreement"]).

**Input Text:**
"""
${e.substring(0,3e4)}
"""

**JSON Structure:**
[
  {
    "word": "String",
    "ipa": "String or null",
    "definition": "String",
	  "context": "String",
    "translation": "String",
    "collocations": ["String", "String"]
  }
]
    `;return this._callGemini(u,y,!0,!0,Ku.AI_TRANSCRIPT)}async checkSemanticSimilarity(e,n,s){const o=this.getApiKey();if(!o)return!1;const d=new kh(o).getGenerativeModel({model:this.modelName}),y=`
You are a strict linguistic expert.
Word: "${e}"

Definition/Context A: "${n}"
Definition/Context B: "${s}"

Task: Determine if Context A and Context B describe the EXACT SAME meaning or usage of the word "${e}".
If they are semantically equivalent (even if worded differently), answer "YES".
If they describe different nuances, distinct meanings (polysemy), or different parts of speech, answer "NO".

Only output "YES" or "NO".
    `;try{return(await this._callGemini(d,y,!1,!1,Ku.AI_PARAPHRASE)).toUpperCase().includes("YES")}catch(_){return console.warn("Semantic check failed, defaulting to false:",_),!1}}async _fetchWithTimeout(e,n){let s;const o=new Promise((u,d)=>{s=setTimeout(()=>{d(new Error(`Request timed out after ${n/1e3} seconds`))},n)});try{return await Promise.race([e,o])}finally{clearTimeout(s)}}async _callGemini(e,n,s=!1,o=!0,u=Ku.AI_PARAPHRASE){try{console.log(`Calling AI Model: ${this.modelName} (Timeout: ${u}ms)`);const b=(await(await this._fetchWithTimeout(e.generateContent(n),u)).response).text().replace(/```json|```/g,"").trim();if(!o)return b;let C;try{C=JSON.parse(b)}catch(x){const Z=b.indexOf(s?"[":"{"),fe=b.lastIndexOf(s?"]":"}")+1;if(Z!==-1&&fe!==-1)C=JSON.parse(b.substring(Z,fe));else throw x}const O=x=>{x.ipa&&(x.ipa=x.ipa.replace(new RegExp("^[/\\[]|[/\\]]$","g"),""))};return Array.isArray(C)?C.forEach(O):O(C),C}catch(d){throw console.error("AI Generation failed:",d),new Error(`AI Error: ${d.message}`)}}}const YA=new GA;function QA({context:i,word:e,definition:n}){const[s,o]=Ie.useState(!1),[u,d]=Ie.useState(0);Ie.useEffect(()=>{o(!1),d(0)},[e]);const y=Ie.useCallback(()=>{s?d(x=>Math.min(x+1,2)):o(!0)},[s]),_=x=>{x.stopPropagation(),d(Z=>Math.min(Z+1,2))},b=x=>{x.stopPropagation(),y()};Ie.useEffect(()=>{const x=Z=>{(Z.key==="h"||Z.key==="H")&&!["INPUT","TEXTAREA"].includes(document.activeElement.tagName)&&y()};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[y]);const C=()=>{if(!e)return"[......]";switch(u){case 0:return"[......]";case 1:return`${e.charAt(0)}[......]`;case 2:return e;default:return"[......]"}},O=()=>{if(!i||!e)return null;const x=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Z=new RegExp(`\\b${x}\\b`,"gi"),fe=i.split(Z);if(fe.length===1)return console.warn(`[ClozeSentence] Word "${e}" not found in context.`),oe.jsx("div",{style:{fontSize:"1.4rem"},children:i});const _e=!s||u<2;return oe.jsx("div",{style:{fontSize:"1.4rem",lineHeight:"1.6",color:"#e0e0e0",textAlign:"left",position:"relative"},children:fe.map((Ce,He)=>oe.jsxs(OE.Fragment,{children:[Ce,He<fe.length-1&&oe.jsxs(oe.Fragment,{children:[oe.jsx("span",{onClick:_,className:"cloze-gap",title:u<2?"Tap to reveal more":"Fully revealed",style:{color:u>0?"#88ccca":"#666",fontWeight:"bold",margin:"0 2px 0 4px",cursor:u<2?"pointer":"default",borderBottom:u<2?`2px dashed ${u>0?"#88ccca":"#555"}`:"none",backgroundColor:u===0?"rgba(255,255,255,0.05)":"transparent",borderRadius:"4px",padding:"0 4px",transition:"all 0.2s ease",userSelect:"none",...u===2?{backgroundColor:"rgba(136, 204, 202, 0.1)",color:"#88ccca",borderBottom:"2px solid #88ccca"}:{}},children:C()}),_e&&oe.jsx("span",{onClick:b,className:"hint-icon-inline",title:s?"Reveal Answer (H)":"Show Definition (H)",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",marginLeft:"2px",marginRight:"4px",padding:"2px",backgroundColor:"rgba(255, 213, 79, 0.2)",borderRadius:"50%",color:"#ffd54f",cursor:"pointer",transition:"all 0.2s ease",opacity:.8},children:oe.jsx(P_,{size:16,strokeWidth:2.5})})]})]},He))})};return oe.jsxs("div",{className:"cloze-container",style:{width:"100%",padding:"0 0.5rem",position:"relative"},children:[O(),s&&n&&oe.jsxs("div",{style:{marginTop:"1.5rem",padding:"12px",backgroundColor:"rgba(255, 213, 79, 0.08)",borderRadius:"8px",borderLeft:"3px solid #ffd54f",fontSize:"1rem",color:"#eee",textAlign:"left",animation:"fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:[oe.jsxs("strong",{style:{color:"#ffd54f",display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px",fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:[oe.jsx(P_,{size:14})," Definition"]}),n]}),oe.jsx("style",{children:`
        @keyframes fadeIn { 
          from { opacity: 0; transform: translateY(5px); } 
          to { opacity: 1; transform: translateY(0); } 
        }
        .cloze-gap:hover {
          background-color: rgba(136, 204, 202, 0.15) !important;
          color: #88ccca !important;
          border-bottom-color: #88ccca !important;
        }
        .cloze-gap:active {
          transform: scale(0.95);
        }
        .hint-icon-inline:hover {
          background-color: rgba(255, 213, 79, 0.4) !important;
          transform: scale(1.1);
          opacity: 1 !important;
        }
        .hint-icon-inline:active {
          transform: scale(0.9);
        }
      `})]})}function $A({card:i,onUpdate:e}){const[n,s]=Ie.useState(!1),[o,u]=Ie.useState(!1),[d,y]=Ie.useState(null),[_,b]=Ie.useState(!1),[C,O]=Ie.useState(()=>localStorage.getItem("gp_settings_learning_mode")||"sniper"),{isRecording:x,audioUrl:Z,startRecording:fe,stopRecording:_e,clearRecording:Ce,error:He}=fA();Ie.useEffect(()=>{if(!n)y(null),Ce();else if((JSON.parse(localStorage.getItem("gp_settings_autoplay_tts"))||!1)&&i.context){const N=setTimeout(()=>{ft(i.context,{stopPropagation:()=>{}})},300);return()=>clearTimeout(N)}},[n,i.id]),Ie.useEffect(()=>{const z=()=>{O(localStorage.getItem("gp_settings_learning_mode")||"sniper")};return window.addEventListener("storage",z),()=>window.removeEventListener("storage",z)},[]);const Ye=()=>{s(!n),u(!1)},Ue=(z,N)=>{N.stopPropagation();try{const dt=hA(i,z),Ft={...i,...dt};e(Ft),s(!1),u(!1)}catch(dt){console.error("Error updating card:",dt)}},ct=z=>{z.stopPropagation(),u(!o)},ft=(z,N)=>{if(N&&N.stopPropagation(),!z)return;window.speechSynthesis.cancel();const dt=new SpeechSynthesisUtterance(z);dt.lang="en-US",dt.rate=1,window.speechSynthesis.speak(dt)},nt=async z=>{if(z.stopPropagation(),!d){b(!0);try{const N=typeof i.context=="string"?i.context:i.context?.text||"",dt=await YA.getParaphrase(i.word,N);y(dt)}catch{y("Unable to connect to AI Coach. Check your API Key settings.")}finally{b(!1)}}},V=(i.interval||0)<3,M=()=>!(C==="reading"||!i.context||V),P=()=>{if(!M()){const N=i.status==="new"||!i.status&&(i.reviewCount||0)===0,dt=i.status==="learning"||!N&&V;return oe.jsxs(oe.Fragment,{children:[oe.jsx("h2",{style:{fontSize:"2.5rem",margin:0,fontWeight:"bold"},children:i.word}),C==="sniper"&&oe.jsxs(oe.Fragment,{children:[N&&oe.jsx("span",{style:{fontSize:"0.8rem",color:"#4caf50",marginTop:"0.5rem",display:"block",fontWeight:"bold"},children:" New Card"}),dt&&!N&&oe.jsx("span",{style:{fontSize:"0.8rem",color:"#ffb74d",marginTop:"0.5rem",display:"block",fontWeight:"bold"},children:" Learning Phase"})]})]})}return oe.jsx(QA,{context:i.context,word:i.word,definition:i.definition})},G=z=>z.stopPropagation(),j={background:"transparent",border:"none",cursor:"pointer",color:"#88ccca",padding:"4px",marginLeft:"8px",verticalAlign:"middle",transition:"opacity 0.2s",display:"inline-flex",alignItems:"center",justifyContent:"center"};return oe.jsxs("div",{className:"flashcard-container",onClick:Ye,style:{border:"1px solid #444",padding:"1.5rem",borderRadius:"12px",textAlign:"center",cursor:"pointer",minHeight:"220px",display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"#25262b",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"transform 0.2s",color:"#e0e0e0",position:"relative",maxHeight:"75vh",overflow:"hidden"},children:[!n&&oe.jsxs("div",{className:"front",children:[oe.jsxs("div",{style:{marginBottom:"1.5rem",padding:"0 10px",minHeight:"120px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[P(),oe.jsx("button",{onClick:z=>ft(M()?i.context:i.word,z),style:{...j,marginTop:"10px"},title:"Listen",children:oe.jsx(Mh,{size:24})})]}),i.ipa&&!M()&&oe.jsxs("p",{style:{fontSize:"1.2rem",color:"#88ccca",fontFamily:"monospace",margin:"0 0 1.5rem 0"},children:["/",i.ipa,"/"]}),oe.jsx("p",{style:{color:"#666",fontSize:"0.9rem"},children:"(Click to flip)"}),oe.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",fontSize:"0.8rem",color:"#555"},children:["EF: ",i.easeFactor||"2.5"," | Int: ",i.interval||0,"d"]})]}),n&&oe.jsxs("div",{className:"back",style:{display:"flex",flexDirection:"column",height:"100%"},children:[oe.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"0.5rem"},children:[oe.jsx("h2",{style:{fontSize:"1.8rem",color:"#fff",margin:0},children:i.word}),oe.jsx("button",{onClick:z=>ft(i.word,z),style:{...j,color:"#88ccca"},children:oe.jsx(Mh,{size:22})})]}),i.ipa&&oe.jsxs("p",{style:{fontSize:"1rem",color:"#888",fontFamily:"monospace",margin:"0 0 0.8rem 0"},children:["/",i.ipa,"/"]}),oe.jsxs("div",{style:{marginBottom:"0.8rem"},onClick:G,children:[oe.jsx("button",{onClick:ct,style:{background:"transparent",border:"1px solid #555",color:"#888",borderRadius:"15px",padding:"2px 10px",fontSize:"0.75rem",cursor:"pointer",marginBottom:"0.2rem"},children:o?"Hide Translation":"Show Translation"}),o&&oe.jsx("div",{style:{fontSize:"1.1rem",color:"#e91e63",fontWeight:"bold",marginTop:"0.5rem"},children:i.translation||"(No translation)"})]}),oe.jsxs("div",{style:{textAlign:"left",lineHeight:"1.6",flexGrow:1,overflowY:"auto",paddingRight:"4px",marginBottom:"1rem",scrollbarWidth:"thin",scrollbarColor:"#444 transparent"},onClick:G,children:[oe.jsxs("div",{style:{marginBottom:"1rem",backgroundColor:"rgba(255, 255, 255, 0.05)",padding:"10px",borderRadius:"6px",borderLeft:"4px solid #88ccca"},children:[oe.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[oe.jsx("strong",{style:{color:"#88ccca",fontSize:"0.8rem",textTransform:"uppercase"},children:"Definition"}),oe.jsx("button",{onClick:z=>ft(i.definition,z),style:{...j,marginLeft:"8px",padding:0},children:oe.jsx(Mh,{size:16})})]}),oe.jsx("div",{style:{fontSize:"1.1rem",color:"#ffffff",fontWeight:"500",lineHeight:"1.4"},children:i.definition})]}),i.collocations&&i.collocations.length>0&&oe.jsxs("div",{style:{marginBottom:"1rem",padding:"0 5px"},children:[oe.jsxs("strong",{style:{color:"#ffb74d",fontSize:"0.8rem",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"5px"},children:[oe.jsx(XS,{size:12})," Collocations"]}),oe.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginTop:"5px"},children:i.collocations.map((z,N)=>oe.jsx("span",{style:{backgroundColor:"rgba(255, 183, 77, 0.1)",color:"#ffcc80",padding:"2px 8px",borderRadius:"4px",fontSize:"0.9rem",border:"1px solid rgba(255, 183, 77, 0.3)"},children:z},N))})]}),d&&oe.jsxs("div",{style:{marginBottom:"1rem",backgroundColor:"rgba(233, 30, 99, 0.1)",padding:"10px",borderRadius:"6px",borderLeft:"4px solid #e91e63",animation:"fadeIn 0.3s"},children:[oe.jsxs("strong",{style:{color:"#e91e63",fontSize:"0.8rem",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"5px"},children:[oe.jsx(L_,{size:12})," AI Tutor"]}),oe.jsx("p",{style:{margin:"5px 0 0",fontSize:"0.95rem",color:"#ffcdd2"},children:d})]}),oe.jsxs("div",{style:{padding:"0 10px"},children:[oe.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[oe.jsx("strong",{style:{color:"#aaa",fontSize:"0.8rem"},children:"Context:"}),oe.jsx("button",{onClick:z=>ft(i.context,z),style:{...j,marginLeft:"6px",color:"#aaa"},children:oe.jsx(Mh,{size:16})})]}),oe.jsx("div",{style:{marginTop:"2px"},children:oe.jsx("em",{style:{color:"#a5d6a7",fontSize:"0.95rem"},children:i.context})})]})]}),oe.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"8px",marginBottom:"1rem"},onClick:G,children:[oe.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[x?oe.jsx("button",{onClick:_e,title:"Stop Recording",style:{background:"#e53935",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff",animation:"pulse 1.5s infinite"},children:oe.jsx(aA,{size:14,fill:"currentColor"})}):oe.jsx("button",{onClick:fe,title:"Shadowing Record",style:{background:"#333",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff"},children:oe.jsx(tA,{size:16})}),Z&&!x&&oe.jsxs(oe.Fragment,{children:[oe.jsx("audio",{src:Z,style:{display:"none"},id:"shadowing-playback"}),oe.jsx("button",{onClick:()=>document.getElementById("shadowing-playback").play(),style:{background:"transparent",border:"1px solid #4caf50",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#4caf50"},children:oe.jsx(rA,{size:14,fill:"currentColor"})}),oe.jsx("button",{onClick:Ce,style:{background:"transparent",border:"none",cursor:"pointer",color:"#666"},children:oe.jsx(lA,{size:16})})]}),He&&oe.jsx("span",{style:{fontSize:"0.7rem",color:"#e53935"},children:"Mic Error"})]}),oe.jsx("div",{children:oe.jsxs("button",{onClick:nt,disabled:_||!!d,style:{background:"transparent",border:"1px solid #e91e63",borderRadius:"15px",padding:"4px 10px",fontSize:"0.75rem",color:"#e91e63",cursor:_||d?"default":"pointer",opacity:_||d?.5:1,display:"flex",alignItems:"center",gap:"5px"},children:[_?oe.jsx(WS,{size:12,className:"spin"}):oe.jsx(L_,{size:12}),d?"Explained":"Explain Simply"]})})]}),oe.jsxs("div",{className:"actions",onClick:G,style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginTop:"auto",paddingTop:"0.5rem",borderTop:"1px solid #333"},children:[oe.jsxs("button",{onClick:z=>Ue(1,z),style:Vh("#e53935"),title:"Reset",children:["Again ",oe.jsx("div",{style:Ph,children:"< 10m"})]}),oe.jsxs("button",{onClick:z=>Ue(3,z),style:Vh("#fb8c00"),title:"Hard",children:["Hard ",oe.jsxs("div",{style:Ph,children:["~",Bm(Math.round((i.interval||1)*1.2))]})]}),oe.jsxs("button",{onClick:z=>Ue(4,z),style:Vh("#43a047"),title:"Good",children:["Good"," ",oe.jsx("div",{style:Ph,children:Bm(Math.round((i.interval||1)*(i.easeFactor||2.5)))})]}),oe.jsxs("button",{onClick:z=>Ue(5,z),style:Vh("#1e88e5"),title:"Easy",children:["Easy"," ",oe.jsx("div",{style:Ph,children:Bm(Math.round((i.interval||1)*(i.easeFactor||2.5)*1.3))})]})]})]}),oe.jsx("style",{children:`
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }
        .spin { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
      `})]})}const Bm=i=>i===0?"< 1d":i===1?"1d":`${i}d`,Vh=i=>({padding:"0.5rem 0.2rem",backgroundColor:i,color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"0.85rem"}),Ph={fontSize:"0.65rem",opacity:.8,marginTop:"2px"},XA=()=>{};var n0={};const PE=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},JA=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],d=i[n++],y=i[n++],_=((o&7)<<18|(u&63)<<12|(d&63)<<6|y&63)-65536;e[s++]=String.fromCharCode(55296+(_>>10)),e[s++]=String.fromCharCode(56320+(_&1023))}else{const u=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},LE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],d=o+1<i.length,y=d?i[o+1]:0,_=o+2<i.length,b=_?i[o+2]:0,C=u>>2,O=(u&3)<<4|y>>4;let x=(y&15)<<2|b>>6,Z=b&63;_||(Z=64,d||(x=64)),s.push(n[C],n[O],n[x],n[Z])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(PE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):JA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],y=o<i.length?n[i.charAt(o)]:0;++o;const b=o<i.length?n[i.charAt(o)]:64;++o;const O=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||y==null||b==null||O==null)throw new ZA;const x=u<<2|y>>4;if(s.push(x),b!==64){const Z=y<<4&240|b>>2;if(s.push(Z),O!==64){const fe=b<<6&192|O;s.push(fe)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class ZA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WA=function(i){const e=PE(i);return LE.encodeByteArray(e,!0)},af=function(i){return WA(i).replace(/\./g,"")},UE=function(i){try{return LE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ew(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const tw=()=>ew().__FIREBASE_DEFAULTS__,nw=()=>{if(typeof process>"u"||typeof n0>"u")return;const i=n0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},rw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&UE(i[1]);return e&&JSON.parse(e)},If=()=>{try{return XA()||tw()||nw()||rw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},zE=i=>If()?.emulatorHosts?.[i],iw=i=>{const e=zE(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},jE=()=>If()?.config,BE=i=>If()?.[`_${i}`];class sw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Wl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qE(i){return(await fetch(i,{credentials:"include"})).ok}function aw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[af(JSON.stringify(n)),af(JSON.stringify(d)),""].join(".")}const Wu={};function ow(){const i={prod:[],emulator:[]};for(const e of Object.keys(Wu))Wu[e]?i.emulator.push(e):i.prod.push(e);return i}function lw(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let r0=!1;function HE(i,e){if(typeof window>"u"||typeof document>"u"||!Wl(window.location.host)||Wu[i]===e||Wu[i]||r0)return;Wu[i]=e;function n(x){return`__firebase__banner__${x}`}const s="__firebase__banner",u=ow().prod.length>0;function d(){const x=document.getElementById(s);x&&x.remove()}function y(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function _(x,Z){x.setAttribute("width","24"),x.setAttribute("id",Z),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function b(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{r0=!0,d()},x}function C(x,Z){x.setAttribute("id",Z),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function O(){const x=lw(s),Z=n("text"),fe=document.getElementById(Z)||document.createElement("span"),_e=n("learnmore"),Ce=document.getElementById(_e)||document.createElement("a"),He=n("preprendIcon"),Ye=document.getElementById(He)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const Ue=x.element;y(Ue),C(Ce,_e);const ct=b();_(Ye,He),Ue.append(Ye,fe,Ce,ct),document.body.appendChild(Ue)}u?(fe.innerText="Preview backend disconnected.",Ye.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ye.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,fe.innerText="Preview backend running in this workspace."),fe.setAttribute("id",Z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",O):O()}function fr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fr())}function cw(){const i=If()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fw(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function dw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mw(){const i=fr();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function pw(){return!cw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gw(){try{return typeof indexedDB=="object"}catch{return!1}}function yw(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const vw="FirebaseError";class ca extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=vw,Object.setPrototypeOf(this,ca.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ec.prototype.create)}}class Ec{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?_w(u,s):"Error",y=`${this.serviceName}: ${d} (${o}).`;return new ca(o,y,s)}}function _w(i,e){return i.replace(Ew,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Ew=/\{\$([^}]+)}/g;function bw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Yo(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],d=e[o];if(i0(u)&&i0(d)){if(!Yo(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function i0(i){return i!==null&&typeof i=="object"}function bc(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Tw(i,e){const n=new Sw(i,e);return n.subscribe.bind(n)}class Sw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Aw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=qm),o.error===void 0&&(o.error=qm),o.complete===void 0&&(o.complete=qm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Aw(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function qm(){}function Vi(i){return i&&i._delegate?i._delegate:i}class Qo{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Bo="[DEFAULT]";class ww{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new sw;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Cw(e))try{this.getOrInitializeService({instanceIdentifier:Bo})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bo){return this.instances.has(e)}getOptions(e=Bo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(u);s===y&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Rw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Bo){return this.component?this.component.multipleInstances?e:Bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Rw(i){return i===Bo?void 0:i}function Cw(i){return i.instantiationMode==="EAGER"}class Iw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ww(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Tt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Tt||(Tt={}));const Ow={debug:Tt.DEBUG,verbose:Tt.VERBOSE,info:Tt.INFO,warn:Tt.WARN,error:Tt.ERROR,silent:Tt.SILENT},Dw=Tt.INFO,xw={[Tt.DEBUG]:"log",[Tt.VERBOSE]:"log",[Tt.INFO]:"info",[Tt.WARN]:"warn",[Tt.ERROR]:"error"},Nw=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=xw[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dp{constructor(e){this.name=e,this._logLevel=Dw,this._logHandler=Nw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ow[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Tt.DEBUG,...e),this._logHandler(this,Tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Tt.VERBOSE,...e),this._logHandler(this,Tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Tt.INFO,...e),this._logHandler(this,Tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Tt.WARN,...e),this._logHandler(this,Tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Tt.ERROR,...e),this._logHandler(this,Tt.ERROR,...e)}}const Mw=(i,e)=>e.some(n=>i instanceof n);let s0,a0;function kw(){return s0||(s0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Vw(){return a0||(a0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FE=new WeakMap,tp=new WeakMap,KE=new WeakMap,Hm=new WeakMap,xp=new WeakMap;function Pw(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{n(io(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&FE.set(n,i)}).catch(()=>{}),xp.set(e,i),e}function Lw(i){if(tp.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});tp.set(i,e)}let np={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return tp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||KE.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return io(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Uw(i){np=i(np)}function zw(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Fm(this),e,...n);return KE.set(s,e.sort?e.sort():[e]),io(s)}:Vw().includes(i)?function(...e){return i.apply(Fm(this),e),io(FE.get(this))}:function(...e){return io(i.apply(Fm(this),e))}}function jw(i){return typeof i=="function"?zw(i):(i instanceof IDBTransaction&&Lw(i),Mw(i,kw())?new Proxy(i,np):i)}function io(i){if(i instanceof IDBRequest)return Pw(i);if(Hm.has(i))return Hm.get(i);const e=jw(i);return e!==i&&(Hm.set(i,e),xp.set(e,i)),e}const Fm=i=>xp.get(i);function Bw(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(i,e),y=io(d);return s&&d.addEventListener("upgradeneeded",_=>{s(io(d.result),_.oldVersion,_.newVersion,io(d.transaction),_)}),n&&d.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),y.then(_=>{u&&_.addEventListener("close",()=>u()),o&&_.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),y}const qw=["get","getKey","getAll","getAllKeys","count"],Hw=["put","add","delete","clear"],Km=new Map;function o0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Km.get(e))return Km.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=Hw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||qw.includes(n)))return;const u=async function(d,...y){const _=this.transaction(d,o?"readwrite":"readonly");let b=_.store;return s&&(b=b.index(y.shift())),(await Promise.all([b[n](...y),o&&_.done]))[0]};return Km.set(e,u),u}Uw(i=>({...i,get:(e,n,s)=>o0(e,n)||i.get(e,n,s),has:(e,n)=>!!o0(e,n)||i.has(e,n)}));class Fw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Kw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Kw(i){return i.getComponent()?.type==="VERSION"}const rp="@firebase/app",l0="0.14.7";const ia=new Dp("@firebase/app"),Gw="@firebase/app-compat",Yw="@firebase/analytics-compat",Qw="@firebase/analytics",$w="@firebase/app-check-compat",Xw="@firebase/app-check",Jw="@firebase/auth",Zw="@firebase/auth-compat",Ww="@firebase/database",eR="@firebase/data-connect",tR="@firebase/database-compat",nR="@firebase/functions",rR="@firebase/functions-compat",iR="@firebase/installations",sR="@firebase/installations-compat",aR="@firebase/messaging",oR="@firebase/messaging-compat",lR="@firebase/performance",uR="@firebase/performance-compat",cR="@firebase/remote-config",hR="@firebase/remote-config-compat",fR="@firebase/storage",dR="@firebase/storage-compat",mR="@firebase/firestore",pR="@firebase/ai",gR="@firebase/firestore-compat",yR="firebase",vR="12.8.0";const ip="[DEFAULT]",_R={[rp]:"fire-core",[Gw]:"fire-core-compat",[Qw]:"fire-analytics",[Yw]:"fire-analytics-compat",[Xw]:"fire-app-check",[$w]:"fire-app-check-compat",[Jw]:"fire-auth",[Zw]:"fire-auth-compat",[Ww]:"fire-rtdb",[eR]:"fire-data-connect",[tR]:"fire-rtdb-compat",[nR]:"fire-fn",[rR]:"fire-fn-compat",[iR]:"fire-iid",[sR]:"fire-iid-compat",[aR]:"fire-fcm",[oR]:"fire-fcm-compat",[lR]:"fire-perf",[uR]:"fire-perf-compat",[cR]:"fire-rc",[hR]:"fire-rc-compat",[fR]:"fire-gcs",[dR]:"fire-gcs-compat",[mR]:"fire-fst",[gR]:"fire-fst-compat",[pR]:"fire-vertex","fire-js":"fire-js",[yR]:"fire-js-all"};const of=new Map,ER=new Map,sp=new Map;function u0(i,e){try{i.container.addComponent(e)}catch(n){ia.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Fl(i){const e=i.name;if(sp.has(e))return ia.debug(`There were multiple attempts to register component ${e}.`),!1;sp.set(e,i);for(const n of of.values())u0(n,i);for(const n of ER.values())u0(n,i);return!0}function Np(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function $i(i){return i==null?!1:i.settings!==void 0}const bR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},so=new Ec("app","Firebase",bR);class TR{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Qo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw so.create("app-deleted",{appName:this._name})}}const eu=vR;function GE(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:ip,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw so.create("bad-app-name",{appName:String(o)});if(n||(n=jE()),!n)throw so.create("no-options");const u=of.get(o);if(u){if(Yo(n,u.options)&&Yo(s,u.config))return u;throw so.create("duplicate-app",{appName:o})}const d=new Iw(o);for(const _ of sp.values())d.addComponent(_);const y=new TR(n,s,d);return of.set(o,y),y}function YE(i=ip){const e=of.get(i);if(!e&&i===ip&&jE())return GE();if(!e)throw so.create("no-app",{appName:i});return e}function ao(i,e,n){let s=_R[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ia.warn(d.join(" "));return}Fl(new Qo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const SR="firebase-heartbeat-database",AR=1,uc="firebase-heartbeat-store";let Gm=null;function QE(){return Gm||(Gm=Bw(SR,AR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(uc)}catch(n){console.warn(n)}}}}).catch(i=>{throw so.create("idb-open",{originalErrorMessage:i.message})})),Gm}async function wR(i){try{const n=(await QE()).transaction(uc),s=await n.objectStore(uc).get($E(i));return await n.done,s}catch(e){if(e instanceof ca)ia.warn(e.message);else{const n=so.create("idb-get",{originalErrorMessage:e?.message});ia.warn(n.message)}}}async function c0(i,e){try{const s=(await QE()).transaction(uc,"readwrite");await s.objectStore(uc).put(e,$E(i)),await s.done}catch(n){if(n instanceof ca)ia.warn(n.message);else{const s=so.create("idb-set",{originalErrorMessage:n?.message});ia.warn(s.message)}}}function $E(i){return`${i.name}!${i.options.appId}`}const RR=1024,CR=30;class IR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=h0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>CR){const o=xR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ia.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=h0(),{heartbeatsToSend:n,unsentEntries:s}=OR(this._heartbeatsCache.heartbeats),o=af(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ia.warn(e),""}}}function h0(){return new Date().toISOString().substring(0,10)}function OR(i,e=RR){const n=[];let s=i.slice();for(const o of i){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),f0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),f0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class DR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gw()?yw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return c0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return c0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function f0(i){return af(JSON.stringify({version:2,heartbeats:i})).length}function xR(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function NR(i){Fl(new Qo("platform-logger",e=>new Fw(e),"PRIVATE")),Fl(new Qo("heartbeat",e=>new IR(e),"PRIVATE")),ao(rp,l0,i),ao(rp,l0,"esm2020"),ao("fire-js","")}NR("");var MR="firebase",kR="12.8.0";ao(MR,kR,"app");function XE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VR=XE,JE=new Ec("auth","Firebase",XE());const lf=new Dp("@firebase/auth");function PR(i,...e){lf.logLevel<=Tt.WARN&&lf.warn(`Auth (${eu}): ${i}`,...e)}function Yh(i,...e){lf.logLevel<=Tt.ERROR&&lf.error(`Auth (${eu}): ${i}`,...e)}function bs(i,...e){throw kp(i,...e)}function Zi(i,...e){return kp(i,...e)}function Mp(i,e,n){const s={...VR(),[e]:n};return new Ec("auth","Firebase",s).create(e,{appName:i.name})}function Fo(i){return Mp(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function LR(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&bs(i,"argument-error"),Mp(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kp(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return JE.create(i,...e)}function tt(i,e,...n){if(!i)throw kp(e,...n)}function ta(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Yh(e),new Error(e)}function sa(i,e){i||ta(e)}function ap(){return typeof self<"u"&&self.location?.href||""}function UR(){return d0()==="http:"||d0()==="https:"}function d0(){return typeof self<"u"&&self.location?.protocol||null}function zR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UR()||fw()||"connection"in navigator)?navigator.onLine:!0}function jR(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Tc{constructor(e,n){this.shortDelay=e,this.longDelay=n,sa(n>e,"Short delay should be less than long delay!"),this.isMobile=uw()||dw()}get(){return zR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Vp(i,e){sa(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class ZE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ta("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ta("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ta("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const BR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const qR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HR=new Tc(3e4,6e4);function Pp(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function tu(i,e,n,s,o={}){return WE(i,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const y=bc({key:i.config.apiKey,...d}).slice(1),_=await i._getAdditionalHeaders();_["Content-Type"]="application/json",i.languageCode&&(_["X-Firebase-Locale"]=i.languageCode);const b={method:e,headers:_,...u};return hw()||(b.referrerPolicy="no-referrer"),i.emulatorConfig&&Wl(i.emulatorConfig.host)&&(b.credentials="include"),ZE.fetch()(await eb(i,i.config.apiHost,n,y),b)})}async function WE(i,e,n){i._canInitEmulator=!1;const s={...BR,...e};try{const o=new KR(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Lh(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const y=u.ok?d.errorMessage:d.error.message,[_,b]=y.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lh(i,"credential-already-in-use",d);if(_==="EMAIL_EXISTS")throw Lh(i,"email-already-in-use",d);if(_==="USER_DISABLED")throw Lh(i,"user-disabled",d);const C=s[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw Mp(i,C,b);bs(i,C)}}catch(o){if(o instanceof ca)throw o;bs(i,"network-request-failed",{message:String(o)})}}async function FR(i,e,n,s,o={}){const u=await tu(i,e,n,s,o);return"mfaPendingCredential"in u&&bs(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function eb(i,e,n,s){const o=`${e}${n}?${s}`,u=i,d=u.config.emulator?Vp(i.config,o):`${i.config.apiScheme}://${o}`;return qR.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}class KR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Zi(this.auth,"network-request-failed")),HR.get())})}}function Lh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Zi(i,e,s);return o.customData._tokenResponse=n,o}async function GR(i,e){return tu(i,"POST","/v1/accounts:delete",e)}async function uf(i,e){return tu(i,"POST","/v1/accounts:lookup",e)}function ec(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YR(i,e=!1){const n=Vi(i),s=await n.getIdToken(e),o=Lp(s);tt(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:s,authTime:ec(Ym(o.auth_time)),issuedAtTime:ec(Ym(o.iat)),expirationTime:ec(Ym(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Ym(i){return Number(i)*1e3}function Lp(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return Yh("JWT malformed, contained fewer than 3 sections"),null;try{const o=UE(n);return o?JSON.parse(o):(Yh("Failed to decode base64 JWT payload"),null)}catch(o){return Yh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function m0(i){const e=Lp(i);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function cc(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ca&&QR(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function QR({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class $R{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class op{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ec(this.lastLoginAt),this.creationTime=ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function cf(i){const e=i.auth,n=await i.getIdToken(),s=await cc(i,uf(e,{idToken:n}));tt(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?tb(o.providerUserInfo):[],d=JR(i.providerData,u),y=i.isAnonymous,_=!(i.email&&o.passwordHash)&&!d?.length,b=y?_:!1,C={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new op(o.createdAt,o.lastLoginAt),isAnonymous:b};Object.assign(i,C)}async function XR(i){const e=Vi(i);await cf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JR(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function tb(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function ZR(i,e){const n=await WE(i,{},async()=>{const s=bc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,d=await eb(i,o,"/v1/token",`key=${u}`),y=await i._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:y,body:s};return i.emulatorConfig&&Wl(i.emulatorConfig.host)&&(_.credentials="include"),ZE.fetch()(d,_)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function WR(i,e){return tu(i,"POST","/v2/accounts:revokeToken",Pp(i,e))}class zl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):m0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){tt(e.length!==0,"internal-error");const n=m0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await ZR(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new zl;return s&&(tt(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(tt(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(tt(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zl,this.toJSON())}_performRefresh(){return ta("not implemented")}}function Xa(i,e){tt(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Xi{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new $R(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new op(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await cc(this,this.stsTokenManager.getToken(this.auth,e));return tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return YR(this,e)}reload(){return XR(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await cf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($i(this.auth.app))return Promise.reject(Fo(this.auth));const e=await this.getIdToken();return await cc(this,GR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,y=n.tenantId??void 0,_=n._redirectEventId??void 0,b=n.createdAt??void 0,C=n.lastLoginAt??void 0,{uid:O,emailVerified:x,isAnonymous:Z,providerData:fe,stsTokenManager:_e}=n;tt(O&&_e,e,"internal-error");const Ce=zl.fromJSON(this.name,_e);tt(typeof O=="string",e,"internal-error"),Xa(s,e.name),Xa(o,e.name),tt(typeof x=="boolean",e,"internal-error"),tt(typeof Z=="boolean",e,"internal-error"),Xa(u,e.name),Xa(d,e.name),Xa(y,e.name),Xa(_,e.name),Xa(b,e.name),Xa(C,e.name);const He=new Xi({uid:O,auth:e,email:o,emailVerified:x,displayName:s,isAnonymous:Z,photoURL:d,phoneNumber:u,tenantId:y,stsTokenManager:Ce,createdAt:b,lastLoginAt:C});return fe&&Array.isArray(fe)&&(He.providerData=fe.map(Ye=>({...Ye}))),_&&(He._redirectEventId=_),He}static async _fromIdTokenResponse(e,n,s=!1){const o=new zl;o.updateFromServerResponse(n);const u=new Xi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await cf(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];tt(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?tb(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,y=new zl;y.updateFromIdToken(s);const _=new Xi({uid:o.localId,auth:e,stsTokenManager:y,isAnonymous:d}),b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new op(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(_,b),_}}const p0=new Map;function na(i){sa(i instanceof Function,"Expected a class definition");let e=p0.get(i);return e?(sa(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,p0.set(i,e),e)}class nb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nb.type="NONE";const g0=nb;function Qh(i,e,n){return`firebase:${i}:${e}:${n}`}class jl{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Qh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Qh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await uf(this.auth,{idToken:e}).catch(()=>{});return n?Xi._fromGetAccountInfoResponse(this.auth,n,e):null}return Xi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new jl(na(g0),e,s);const o=(await Promise.all(n.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let u=o[0]||na(g0);const d=Qh(s,e.config.apiKey,e.name);let y=null;for(const b of n)try{const C=await b._get(d);if(C){let O;if(typeof C=="string"){const x=await uf(e,{idToken:C}).catch(()=>{});if(!x)break;O=await Xi._fromGetAccountInfoResponse(e,x,C)}else O=Xi._fromJSON(e,C);b!==u&&(y=O),u=b;break}}catch{}const _=o.filter(b=>b._shouldAllowMigration);return!u._shouldAllowMigration||!_.length?new jl(u,e,s):(u=_[0],y&&await u._set(d,y.toJSON()),await Promise.all(n.map(async b=>{if(b!==u)try{await b._remove(d)}catch{}})),new jl(u,e,s))}}function y0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ab(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lb(e))return"Blackberry";if(ub(e))return"Webos";if(ib(e))return"Safari";if((e.includes("chrome/")||sb(e))&&!e.includes("edge/"))return"Chrome";if(ob(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function rb(i=fr()){return/firefox\//i.test(i)}function ib(i=fr()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sb(i=fr()){return/crios\//i.test(i)}function ab(i=fr()){return/iemobile/i.test(i)}function ob(i=fr()){return/android/i.test(i)}function lb(i=fr()){return/blackberry/i.test(i)}function ub(i=fr()){return/webos/i.test(i)}function Up(i=fr()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function eC(i=fr()){return Up(i)&&!!window.navigator?.standalone}function tC(){return mw()&&document.documentMode===10}function cb(i=fr()){return Up(i)||ob(i)||ub(i)||lb(i)||/windows phone/i.test(i)||ab(i)}function hb(i,e=[]){let n;switch(i){case"Browser":n=y0(fr());break;case"Worker":n=`${y0(fr())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${eu}/${s}`}class nC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,y)=>{try{const _=e(u);d(_)}catch(_){y(_)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function rC(i,e={}){return tu(i,"GET","/v2/passwordPolicy",Pp(i,e))}const iC=6;class sC{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??iC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class aC{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new v0(this),this.idTokenSubscription=new v0(this),this.beforeStateQueue=new nC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=na(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await jl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await uf(this,{idToken:e}),s=await Xi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if($i(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=s?._redirectEventId,y=await this.tryRedirectSignIn(e);(!u||u===d)&&y?.user&&(s=y.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($i(this.app))return Promise.reject(Fo(this));const n=e?Vi(e):null;return n&&tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $i(this.app)?Promise.reject(Fo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $i(this.app)?Promise.reject(Fo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(na(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rC(this),n=new sC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ec("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await WR(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&na(e)||this._popupRedirectResolver;tt(n,this,"argument-error"),this.redirectPersistenceManager=await jl.create(this,[na(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(y,this,"internal-error"),y.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const _=e.addObserver(n,s,o);return()=>{d=!0,_()}}else{const _=e.addObserver(n);return()=>{d=!0,_()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if($i(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&PR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Of(i){return Vi(i)}class v0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Tw(n=>this.observer=n)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let zp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oC(i){zp=i}function lC(i){return zp.loadJS(i)}function uC(){return zp.gapiScript}function cC(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function hC(i,e){const n=Np(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Yo(u,e??{}))return o;bs(o,"already-initialized")}return n.initialize({options:e})}function fC(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(na);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function dC(i,e,n){const s=Of(i);tt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=fb(e),{host:d,port:y}=mC(e),_=y===null?"":`:${y}`,b={url:`${u}//${d}${_}/`},C=Object.freeze({host:d,port:y,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){tt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),tt(Yo(b,s.config.emulator)&&Yo(C,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=b,s.emulatorConfig=C,s.settings.appVerificationDisabledForTesting=!0,Wl(d)?(qE(`${u}//${d}${_}`),HE("Auth",!0)):pC()}function fb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function mC(i){const e=fb(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:_0(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:_0(d)}}}function _0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function pC(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class db{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ta("not implemented")}_getIdTokenResponse(e){return ta("not implemented")}_linkToIdToken(e,n){return ta("not implemented")}_getReauthenticationResolver(e){return ta("not implemented")}}async function Bl(i,e){return FR(i,"POST","/v1/accounts:signInWithIdp",Pp(i,e))}const gC="http://localhost";class $o extends db{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const d=new $o(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Bl(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Bl(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bl(e,n)}buildRequest(){const e={requestUri:gC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bc(n)}return e}}class jp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Sc extends jp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Za extends Sc{constructor(){super("facebook.com")}static credential(e){return $o._fromParams({providerId:Za.PROVIDER_ID,signInMethod:Za.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Za.credentialFromTaggedObject(e)}static credentialFromError(e){return Za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Za.credential(e.oauthAccessToken)}catch{return null}}}Za.FACEBOOK_SIGN_IN_METHOD="facebook.com";Za.PROVIDER_ID="facebook.com";class ea extends Sc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $o._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ea.credential(n,s)}catch{return null}}}ea.GOOGLE_SIGN_IN_METHOD="google.com";ea.PROVIDER_ID="google.com";class Wa extends Sc{constructor(){super("github.com")}static credential(e){return $o._fromParams({providerId:Wa.PROVIDER_ID,signInMethod:Wa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wa.credentialFromTaggedObject(e)}static credentialFromError(e){return Wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wa.credential(e.oauthAccessToken)}catch{return null}}}Wa.GITHUB_SIGN_IN_METHOD="github.com";Wa.PROVIDER_ID="github.com";class eo extends Sc{constructor(){super("twitter.com")}static credential(e,n){return $o._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return eo.credential(n,s)}catch{return null}}}eo.TWITTER_SIGN_IN_METHOD="twitter.com";eo.PROVIDER_ID="twitter.com";class Kl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Xi._fromIdTokenResponse(e,s,o),d=E0(s);return new Kl({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=E0(s);return new Kl({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function E0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class hf extends ca{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,hf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new hf(e,n,s,o)}}function mb(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?hf._fromErrorAndOperation(i,u,e,s):u})}async function yC(i,e,n=!1){const s=await cc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Kl._forOperation(i,"link",s)}async function vC(i,e,n=!1){const{auth:s}=i;if($i(s.app))return Promise.reject(Fo(s));const o="reauthenticate";try{const u=await cc(i,mb(s,o,e,i),n);tt(u.idToken,s,"internal-error");const d=Lp(u.idToken);tt(d,s,"internal-error");const{sub:y}=d;return tt(i.uid===y,s,"user-mismatch"),Kl._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&bs(s,"user-mismatch"),u}}async function _C(i,e,n=!1){if($i(i.app))return Promise.reject(Fo(i));const s="signIn",o=await mb(i,s,e),u=await Kl._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}function EC(i,e,n,s){return Vi(i).onIdTokenChanged(e,n,s)}function bC(i,e,n){return Vi(i).beforeAuthStateChanged(e,n)}function TC(i,e,n,s){return Vi(i).onAuthStateChanged(e,n,s)}function b0(i){return Vi(i).signOut()}const ff="__sak";class pb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ff,"1"),this.storage.removeItem(ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const SC=1e3,AC=10;class gb extends pb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,y,_)=>{this.notifyListeners(d,_)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);tC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,AC):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},SC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gb.type="LOCAL";const wC=gb;class yb extends pb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yb.type="SESSION";const vb=yb;function RC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Df{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Df(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const y=Array.from(d).map(async b=>b(n.origin,u)),_=await RC(y);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:_})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Df.receivers=[];function Bp(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class CC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((y,_)=>{const b=Bp("",20);o.port1.start();const C=setTimeout(()=>{_(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(O){const x=O;if(x.data.eventId===b)switch(x.data.status){case"ack":clearTimeout(C),u=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),y(x.data.response);break;default:clearTimeout(C),clearTimeout(u),_(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:b,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ys(){return window}function IC(i){ys().location.href=i}function _b(){return typeof ys().WorkerGlobalScope<"u"&&typeof ys().importScripts=="function"}async function OC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DC(){return navigator?.serviceWorker?.controller||null}function xC(){return _b()?self:null}const Eb="firebaseLocalStorageDb",NC=1,df="firebaseLocalStorage",bb="fbase_key";class Ac{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function xf(i,e){return i.transaction([df],e?"readwrite":"readonly").objectStore(df)}function MC(){const i=indexedDB.deleteDatabase(Eb);return new Ac(i).toPromise()}function lp(){const i=indexedDB.open(Eb,NC);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(df,{keyPath:bb})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(df)?e(s):(s.close(),await MC(),e(await lp()))})})}async function T0(i,e,n){const s=xf(i,!0).put({[bb]:e,value:n});return new Ac(s).toPromise()}async function kC(i,e){const n=xf(i,!1).get(e),s=await new Ac(n).toPromise();return s===void 0?null:s.value}function S0(i,e){const n=xf(i,!0).delete(e);return new Ac(n).toPromise()}const VC=800,PC=3;class Tb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>PC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _b()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Df._getInstance(xC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await OC(),!this.activeServiceWorker)return;this.sender=new CC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lp();return await T0(e,ff,"1"),await S0(e,ff),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>T0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>kC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>S0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=xf(o,!1).getAll();return new Ac(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Tb.type="LOCAL";const LC=Tb;new Tc(3e4,6e4);function Sb(i,e){return e?na(e):(tt(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class qp extends db{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function UC(i){return _C(i.auth,new qp(i),i.bypassAuthState)}function zC(i){const{auth:e,user:n}=i;return tt(n,e,"internal-error"),vC(n,new qp(i),i.bypassAuthState)}async function jC(i){const{auth:e,user:n}=i;return tt(n,e,"internal-error"),yC(n,new qp(i),i.bypassAuthState)}class Ab{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:y}=e;if(d){this.reject(d);return}const _={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(_))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UC;case"linkViaPopup":case"linkViaRedirect":return jC;case"reauthViaPopup":case"reauthViaRedirect":return zC;default:bs(this.auth,"internal-error")}}resolve(e){sa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const BC=new Tc(2e3,1e4);async function qC(i,e,n){if($i(i.app))return Promise.reject(Zi(i,"operation-not-supported-in-this-environment"));const s=Of(i);LR(i,e,jp);const o=Sb(s,n);return new qo(s,"signInViaPopup",e,o).executeNotNull()}class qo extends Ab{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,qo.currentPopupAction&&qo.currentPopupAction.cancel(),qo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){sa(this.filter.length===1,"Popup operations only handle one event");const e=Bp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Zi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BC.get())};e()}}qo.currentPopupAction=null;const HC="pendingRedirect",$h=new Map;class FC extends Ab{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=$h.get(this.auth._key());if(!e){try{const s=await KC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}$h.set(this.auth._key(),e)}return this.bypassAuthState||$h.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KC(i,e){const n=QC(e),s=YC(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function GC(i,e){$h.set(i._key(),e)}function YC(i){return na(i._redirectPersistence)}function QC(i){return Qh(HC,i.config.apiKey,i.name)}async function $C(i,e,n=!1){if($i(i.app))return Promise.reject(Fo(i));const s=Of(i),o=Sb(s,e),d=await new FC(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const XC=600*1e3;class JC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!wb(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Zi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XC&&this.cachedEventUids.clear(),this.cachedEventUids.has(A0(e))}saveEventToCache(e){this.cachedEventUids.add(A0(e)),this.lastProcessedEventTime=Date.now()}}function A0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function wb({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function ZC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wb(i);default:return!1}}async function WC(i,e={}){return tu(i,"GET","/v1/projects",e)}const eI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tI=/^https?/;async function nI(i){if(i.config.emulator)return;const{authorizedDomains:e}=await WC(i);for(const n of e)try{if(rI(n))return}catch{}bs(i,"unauthorized-domain")}function rI(i){const e=ap(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!tI.test(n))return!1;if(eI.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const iI=new Tc(3e4,6e4);function w0(){const i=ys().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function sI(i){return new Promise((e,n)=>{function s(){w0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{w0(),n(Zi(i,"network-request-failed"))},timeout:iI.get()})}if(ys().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ys().gapi?.load)s();else{const o=cC("iframefcb");return ys()[o]=()=>{gapi.load?s():n(Zi(i,"network-request-failed"))},lC(`${uC()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Xh=null,e})}let Xh=null;function aI(i){return Xh=Xh||sI(i),Xh}const oI=new Tc(5e3,15e3),lI="__/auth/iframe",uI="emulator/auth/iframe",cI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fI(i){const e=i.config;tt(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Vp(e,uI):`https://${i.config.authDomain}/${lI}`,s={apiKey:e.apiKey,appName:i.name,v:eu},o=hI.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${bc(s).slice(1)}`}async function dI(i){const e=await aI(i),n=ys().gapi;return tt(n,i,"internal-error"),e.open({where:document.body,url:fI(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cI,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=Zi(i,"network-request-failed"),y=ys().setTimeout(()=>{u(d)},oI.get());function _(){ys().clearTimeout(y),o(s)}s.ping(_).then(_,()=>{u(d)})}))}const mI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pI=500,gI=600,yI="_blank",vI="http://localhost";class R0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _I(i,e,n,s=pI,o=gI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let y="";const _={...mI,width:s.toString(),height:o.toString(),top:u,left:d},b=fr().toLowerCase();n&&(y=sb(b)?yI:n),rb(b)&&(e=e||vI,_.scrollbars="yes");const C=Object.entries(_).reduce((x,[Z,fe])=>`${x}${Z}=${fe},`,"");if(eC(b)&&y!=="_self")return EI(e||"",y),new R0(null);const O=window.open(e||"",y,C);tt(O,i,"popup-blocked");try{O.focus()}catch{}return new R0(O)}function EI(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const bI="__/auth/handler",TI="emulator/auth/handler",SI=encodeURIComponent("fac");async function C0(i,e,n,s,o,u){tt(i.config.authDomain,i,"auth-domain-config-required"),tt(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:eu,eventId:o};if(e instanceof jp){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",bw(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[C,O]of Object.entries({}))d[C]=O}if(e instanceof Sc){const C=e.getScopes().filter(O=>O!=="");C.length>0&&(d.scopes=C.join(","))}i.tenantId&&(d.tid=i.tenantId);const y=d;for(const C of Object.keys(y))y[C]===void 0&&delete y[C];const _=await i._getAppCheckToken(),b=_?`#${SI}=${encodeURIComponent(_)}`:"";return`${AI(i)}?${bc(y).slice(1)}${b}`}function AI({config:i}){return i.emulator?Vp(i,TI):`https://${i.authDomain}/${bI}`}const Qm="webStorageSupport";class wI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vb,this._completeRedirectFn=$C,this._overrideRedirectResult=GC}async _openPopup(e,n,s,o){sa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await C0(e,n,s,ap(),o);return _I(e,u,Bp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await C0(e,n,s,ap(),o);return IC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(sa(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await dI(e),s=new JC(e);return n.register("authEvent",o=>(tt(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qm,{type:Qm},o=>{const u=o?.[0]?.[Qm];u!==void 0&&n(!!u),bs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cb()||ib()||Up()}}const RI=wI;var I0="@firebase/auth",O0="1.12.0";class CI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function II(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OI(i){Fl(new Qo("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:y}=s.options;tt(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const _={apiKey:d,authDomain:y,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hb(i)},b=new aC(s,o,u,_);return fC(b,n),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Fl(new Qo("auth-internal",e=>{const n=Of(e.getProvider("auth").getImmediate());return(s=>new CI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ao(I0,O0,II(i)),ao(I0,O0,"esm2020")}const DI=300,xI=BE("authIdTokenMaxAge")||DI;let D0=null;const NI=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>xI)return;const o=n?.token;D0!==o&&(D0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function MI(i=YE()){const e=Np(i,"auth");if(e.isInitialized())return e.getImmediate();const n=hC(i,{popupRedirectResolver:RI,persistence:[LC,wC,vb]}),s=BE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=NI(u.toString());bC(n,d,()=>d(n.currentUser)),EC(n,y=>d(y))}}const o=zE("auth");return o&&dC(n,`http://${o}`),n}function kI(){return document.getElementsByTagName("head")?.[0]??document}oC({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Zi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",kI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OI("Browser");var x0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var oo,Rb;(function(){var i;function e(V,M){function P(){}P.prototype=M.prototype,V.F=M.prototype,V.prototype=new P,V.prototype.constructor=V,V.D=function(G,j,z){for(var N=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)N[dt-2]=arguments[dt];return M.prototype[j].apply(G,N)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(V,M,P){P||(P=0);const G=Array(16);if(typeof M=="string")for(var j=0;j<16;++j)G[j]=M.charCodeAt(P++)|M.charCodeAt(P++)<<8|M.charCodeAt(P++)<<16|M.charCodeAt(P++)<<24;else for(j=0;j<16;++j)G[j]=M[P++]|M[P++]<<8|M[P++]<<16|M[P++]<<24;M=V.g[0],P=V.g[1],j=V.g[2];let z=V.g[3],N;N=M+(z^P&(j^z))+G[0]+3614090360&4294967295,M=P+(N<<7&4294967295|N>>>25),N=z+(j^M&(P^j))+G[1]+3905402710&4294967295,z=M+(N<<12&4294967295|N>>>20),N=j+(P^z&(M^P))+G[2]+606105819&4294967295,j=z+(N<<17&4294967295|N>>>15),N=P+(M^j&(z^M))+G[3]+3250441966&4294967295,P=j+(N<<22&4294967295|N>>>10),N=M+(z^P&(j^z))+G[4]+4118548399&4294967295,M=P+(N<<7&4294967295|N>>>25),N=z+(j^M&(P^j))+G[5]+1200080426&4294967295,z=M+(N<<12&4294967295|N>>>20),N=j+(P^z&(M^P))+G[6]+2821735955&4294967295,j=z+(N<<17&4294967295|N>>>15),N=P+(M^j&(z^M))+G[7]+4249261313&4294967295,P=j+(N<<22&4294967295|N>>>10),N=M+(z^P&(j^z))+G[8]+1770035416&4294967295,M=P+(N<<7&4294967295|N>>>25),N=z+(j^M&(P^j))+G[9]+2336552879&4294967295,z=M+(N<<12&4294967295|N>>>20),N=j+(P^z&(M^P))+G[10]+4294925233&4294967295,j=z+(N<<17&4294967295|N>>>15),N=P+(M^j&(z^M))+G[11]+2304563134&4294967295,P=j+(N<<22&4294967295|N>>>10),N=M+(z^P&(j^z))+G[12]+1804603682&4294967295,M=P+(N<<7&4294967295|N>>>25),N=z+(j^M&(P^j))+G[13]+4254626195&4294967295,z=M+(N<<12&4294967295|N>>>20),N=j+(P^z&(M^P))+G[14]+2792965006&4294967295,j=z+(N<<17&4294967295|N>>>15),N=P+(M^j&(z^M))+G[15]+1236535329&4294967295,P=j+(N<<22&4294967295|N>>>10),N=M+(j^z&(P^j))+G[1]+4129170786&4294967295,M=P+(N<<5&4294967295|N>>>27),N=z+(P^j&(M^P))+G[6]+3225465664&4294967295,z=M+(N<<9&4294967295|N>>>23),N=j+(M^P&(z^M))+G[11]+643717713&4294967295,j=z+(N<<14&4294967295|N>>>18),N=P+(z^M&(j^z))+G[0]+3921069994&4294967295,P=j+(N<<20&4294967295|N>>>12),N=M+(j^z&(P^j))+G[5]+3593408605&4294967295,M=P+(N<<5&4294967295|N>>>27),N=z+(P^j&(M^P))+G[10]+38016083&4294967295,z=M+(N<<9&4294967295|N>>>23),N=j+(M^P&(z^M))+G[15]+3634488961&4294967295,j=z+(N<<14&4294967295|N>>>18),N=P+(z^M&(j^z))+G[4]+3889429448&4294967295,P=j+(N<<20&4294967295|N>>>12),N=M+(j^z&(P^j))+G[9]+568446438&4294967295,M=P+(N<<5&4294967295|N>>>27),N=z+(P^j&(M^P))+G[14]+3275163606&4294967295,z=M+(N<<9&4294967295|N>>>23),N=j+(M^P&(z^M))+G[3]+4107603335&4294967295,j=z+(N<<14&4294967295|N>>>18),N=P+(z^M&(j^z))+G[8]+1163531501&4294967295,P=j+(N<<20&4294967295|N>>>12),N=M+(j^z&(P^j))+G[13]+2850285829&4294967295,M=P+(N<<5&4294967295|N>>>27),N=z+(P^j&(M^P))+G[2]+4243563512&4294967295,z=M+(N<<9&4294967295|N>>>23),N=j+(M^P&(z^M))+G[7]+1735328473&4294967295,j=z+(N<<14&4294967295|N>>>18),N=P+(z^M&(j^z))+G[12]+2368359562&4294967295,P=j+(N<<20&4294967295|N>>>12),N=M+(P^j^z)+G[5]+4294588738&4294967295,M=P+(N<<4&4294967295|N>>>28),N=z+(M^P^j)+G[8]+2272392833&4294967295,z=M+(N<<11&4294967295|N>>>21),N=j+(z^M^P)+G[11]+1839030562&4294967295,j=z+(N<<16&4294967295|N>>>16),N=P+(j^z^M)+G[14]+4259657740&4294967295,P=j+(N<<23&4294967295|N>>>9),N=M+(P^j^z)+G[1]+2763975236&4294967295,M=P+(N<<4&4294967295|N>>>28),N=z+(M^P^j)+G[4]+1272893353&4294967295,z=M+(N<<11&4294967295|N>>>21),N=j+(z^M^P)+G[7]+4139469664&4294967295,j=z+(N<<16&4294967295|N>>>16),N=P+(j^z^M)+G[10]+3200236656&4294967295,P=j+(N<<23&4294967295|N>>>9),N=M+(P^j^z)+G[13]+681279174&4294967295,M=P+(N<<4&4294967295|N>>>28),N=z+(M^P^j)+G[0]+3936430074&4294967295,z=M+(N<<11&4294967295|N>>>21),N=j+(z^M^P)+G[3]+3572445317&4294967295,j=z+(N<<16&4294967295|N>>>16),N=P+(j^z^M)+G[6]+76029189&4294967295,P=j+(N<<23&4294967295|N>>>9),N=M+(P^j^z)+G[9]+3654602809&4294967295,M=P+(N<<4&4294967295|N>>>28),N=z+(M^P^j)+G[12]+3873151461&4294967295,z=M+(N<<11&4294967295|N>>>21),N=j+(z^M^P)+G[15]+530742520&4294967295,j=z+(N<<16&4294967295|N>>>16),N=P+(j^z^M)+G[2]+3299628645&4294967295,P=j+(N<<23&4294967295|N>>>9),N=M+(j^(P|~z))+G[0]+4096336452&4294967295,M=P+(N<<6&4294967295|N>>>26),N=z+(P^(M|~j))+G[7]+1126891415&4294967295,z=M+(N<<10&4294967295|N>>>22),N=j+(M^(z|~P))+G[14]+2878612391&4294967295,j=z+(N<<15&4294967295|N>>>17),N=P+(z^(j|~M))+G[5]+4237533241&4294967295,P=j+(N<<21&4294967295|N>>>11),N=M+(j^(P|~z))+G[12]+1700485571&4294967295,M=P+(N<<6&4294967295|N>>>26),N=z+(P^(M|~j))+G[3]+2399980690&4294967295,z=M+(N<<10&4294967295|N>>>22),N=j+(M^(z|~P))+G[10]+4293915773&4294967295,j=z+(N<<15&4294967295|N>>>17),N=P+(z^(j|~M))+G[1]+2240044497&4294967295,P=j+(N<<21&4294967295|N>>>11),N=M+(j^(P|~z))+G[8]+1873313359&4294967295,M=P+(N<<6&4294967295|N>>>26),N=z+(P^(M|~j))+G[15]+4264355552&4294967295,z=M+(N<<10&4294967295|N>>>22),N=j+(M^(z|~P))+G[6]+2734768916&4294967295,j=z+(N<<15&4294967295|N>>>17),N=P+(z^(j|~M))+G[13]+1309151649&4294967295,P=j+(N<<21&4294967295|N>>>11),N=M+(j^(P|~z))+G[4]+4149444226&4294967295,M=P+(N<<6&4294967295|N>>>26),N=z+(P^(M|~j))+G[11]+3174756917&4294967295,z=M+(N<<10&4294967295|N>>>22),N=j+(M^(z|~P))+G[2]+718787259&4294967295,j=z+(N<<15&4294967295|N>>>17),N=P+(z^(j|~M))+G[9]+3951481745&4294967295,V.g[0]=V.g[0]+M&4294967295,V.g[1]=V.g[1]+(j+(N<<21&4294967295|N>>>11))&4294967295,V.g[2]=V.g[2]+j&4294967295,V.g[3]=V.g[3]+z&4294967295}s.prototype.v=function(V,M){M===void 0&&(M=V.length);const P=M-this.blockSize,G=this.C;let j=this.h,z=0;for(;z<M;){if(j==0)for(;z<=P;)o(this,V,z),z+=this.blockSize;if(typeof V=="string"){for(;z<M;)if(G[j++]=V.charCodeAt(z++),j==this.blockSize){o(this,G),j=0;break}}else for(;z<M;)if(G[j++]=V[z++],j==this.blockSize){o(this,G),j=0;break}}this.h=j,this.o+=M},s.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var M=1;M<V.length-8;++M)V[M]=0;M=this.o*8;for(var P=V.length-8;P<V.length;++P)V[P]=M&255,M/=256;for(this.v(V),V=Array(16),M=0,P=0;P<4;++P)for(let G=0;G<32;G+=8)V[M++]=this.g[P]>>>G&255;return V};function u(V,M){var P=y;return Object.prototype.hasOwnProperty.call(P,V)?P[V]:P[V]=M(V)}function d(V,M){this.h=M;const P=[];let G=!0;for(let j=V.length-1;j>=0;j--){const z=V[j]|0;G&&z==M||(P[j]=z,G=!1)}this.g=P}var y={};function _(V){return-128<=V&&V<128?u(V,function(M){return new d([M|0],M<0?-1:0)}):new d([V|0],V<0?-1:0)}function b(V){if(isNaN(V)||!isFinite(V))return O;if(V<0)return Ce(b(-V));const M=[];let P=1;for(let G=0;V>=P;G++)M[G]=V/P|0,P*=4294967296;return new d(M,0)}function C(V,M){if(V.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(V.charAt(0)=="-")return Ce(C(V.substring(1),M));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=b(Math.pow(M,8));let G=O;for(let z=0;z<V.length;z+=8){var j=Math.min(8,V.length-z);const N=parseInt(V.substring(z,z+j),M);j<8?(j=b(Math.pow(M,j)),G=G.j(j).add(b(N))):(G=G.j(P),G=G.add(b(N)))}return G}var O=_(0),x=_(1),Z=_(16777216);i=d.prototype,i.m=function(){if(_e(this))return-Ce(this).m();let V=0,M=1;for(let P=0;P<this.g.length;P++){const G=this.i(P);V+=(G>=0?G:4294967296+G)*M,M*=4294967296}return V},i.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(fe(this))return"0";if(_e(this))return"-"+Ce(this).toString(V);const M=b(Math.pow(V,6));var P=this;let G="";for(;;){const j=ct(P,M).g;P=He(P,j.j(M));let z=((P.g.length>0?P.g[0]:P.h)>>>0).toString(V);if(P=j,fe(P))return z+G;for(;z.length<6;)z="0"+z;G=z+G}},i.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function fe(V){if(V.h!=0)return!1;for(let M=0;M<V.g.length;M++)if(V.g[M]!=0)return!1;return!0}function _e(V){return V.h==-1}i.l=function(V){return V=He(this,V),_e(V)?-1:fe(V)?0:1};function Ce(V){const M=V.g.length,P=[];for(let G=0;G<M;G++)P[G]=~V.g[G];return new d(P,~V.h).add(x)}i.abs=function(){return _e(this)?Ce(this):this},i.add=function(V){const M=Math.max(this.g.length,V.g.length),P=[];let G=0;for(let j=0;j<=M;j++){let z=G+(this.i(j)&65535)+(V.i(j)&65535),N=(z>>>16)+(this.i(j)>>>16)+(V.i(j)>>>16);G=N>>>16,z&=65535,N&=65535,P[j]=N<<16|z}return new d(P,P[P.length-1]&-2147483648?-1:0)};function He(V,M){return V.add(Ce(M))}i.j=function(V){if(fe(this)||fe(V))return O;if(_e(this))return _e(V)?Ce(this).j(Ce(V)):Ce(Ce(this).j(V));if(_e(V))return Ce(this.j(Ce(V)));if(this.l(Z)<0&&V.l(Z)<0)return b(this.m()*V.m());const M=this.g.length+V.g.length,P=[];for(var G=0;G<2*M;G++)P[G]=0;for(G=0;G<this.g.length;G++)for(let j=0;j<V.g.length;j++){const z=this.i(G)>>>16,N=this.i(G)&65535,dt=V.i(j)>>>16,Ft=V.i(j)&65535;P[2*G+2*j]+=N*Ft,Ye(P,2*G+2*j),P[2*G+2*j+1]+=z*Ft,Ye(P,2*G+2*j+1),P[2*G+2*j+1]+=N*dt,Ye(P,2*G+2*j+1),P[2*G+2*j+2]+=z*dt,Ye(P,2*G+2*j+2)}for(V=0;V<M;V++)P[V]=P[2*V+1]<<16|P[2*V];for(V=M;V<2*M;V++)P[V]=0;return new d(P,0)};function Ye(V,M){for(;(V[M]&65535)!=V[M];)V[M+1]+=V[M]>>>16,V[M]&=65535,M++}function Ue(V,M){this.g=V,this.h=M}function ct(V,M){if(fe(M))throw Error("division by zero");if(fe(V))return new Ue(O,O);if(_e(V))return M=ct(Ce(V),M),new Ue(Ce(M.g),Ce(M.h));if(_e(M))return M=ct(V,Ce(M)),new Ue(Ce(M.g),M.h);if(V.g.length>30){if(_e(V)||_e(M))throw Error("slowDivide_ only works with positive integers.");for(var P=x,G=M;G.l(V)<=0;)P=ft(P),G=ft(G);var j=nt(P,1),z=nt(G,1);for(G=nt(G,2),P=nt(P,2);!fe(G);){var N=z.add(G);N.l(V)<=0&&(j=j.add(P),z=N),G=nt(G,1),P=nt(P,1)}return M=He(V,j.j(M)),new Ue(j,M)}for(j=O;V.l(M)>=0;){for(P=Math.max(1,Math.floor(V.m()/M.m())),G=Math.ceil(Math.log(P)/Math.LN2),G=G<=48?1:Math.pow(2,G-48),z=b(P),N=z.j(M);_e(N)||N.l(V)>0;)P-=G,z=b(P),N=z.j(M);fe(z)&&(z=x),j=j.add(z),V=He(V,N)}return new Ue(j,V)}i.B=function(V){return ct(this,V).h},i.and=function(V){const M=Math.max(this.g.length,V.g.length),P=[];for(let G=0;G<M;G++)P[G]=this.i(G)&V.i(G);return new d(P,this.h&V.h)},i.or=function(V){const M=Math.max(this.g.length,V.g.length),P=[];for(let G=0;G<M;G++)P[G]=this.i(G)|V.i(G);return new d(P,this.h|V.h)},i.xor=function(V){const M=Math.max(this.g.length,V.g.length),P=[];for(let G=0;G<M;G++)P[G]=this.i(G)^V.i(G);return new d(P,this.h^V.h)};function ft(V){const M=V.g.length+1,P=[];for(let G=0;G<M;G++)P[G]=V.i(G)<<1|V.i(G-1)>>>31;return new d(P,V.h)}function nt(V,M){const P=M>>5;M%=32;const G=V.g.length-P,j=[];for(let z=0;z<G;z++)j[z]=M>0?V.i(z+P)>>>M|V.i(z+P+1)<<32-M:V.i(z+P);return new d(j,V.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Rb=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=b,d.fromString=C,oo=d}).apply(typeof x0<"u"?x0:typeof self<"u"?self:typeof window<"u"?window:{});var Uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Cb,Qu,Ib,Jh,up,Ob,Db,xb;(function(){var i,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uh=="object"&&Uh];for(var v=0;v<c.length;++v){var S=c[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var s=n(this);function o(c,v){if(v)e:{var S=s;c=c.split(".");for(var I=0;I<c.length-1;I++){var ee=c[I];if(!(ee in S))break e;S=S[ee]}c=c[c.length-1],I=S[c],v=v(I),v!=I&&v!=null&&e(S,c,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(v){var S=[],I;for(I in v)Object.prototype.hasOwnProperty.call(v,I)&&S.push([I,v[I]]);return S}});var u=u||{},d=this||self;function y(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function _(c,v,S){return c.call.apply(c.bind,arguments)}function b(c,v,S){return b=_,b.apply(null,arguments)}function C(c,v){var S=Array.prototype.slice.call(arguments,1);return function(){var I=S.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function O(c,v){function S(){}S.prototype=v.prototype,c.Z=v.prototype,c.prototype=new S,c.prototype.constructor=c,c.Ob=function(I,ee,ae){for(var Se=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)Se[rt-2]=arguments[rt];return v.prototype[ee].apply(I,Se)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function Z(c){const v=c.length;if(v>0){const S=Array(v);for(let I=0;I<v;I++)S[I]=c[I];return S}return[]}function fe(c,v){for(let I=1;I<arguments.length;I++){const ee=arguments[I];var S=typeof ee;if(S=S!="object"?S:ee?Array.isArray(ee)?"array":S:"null",S=="array"||S=="object"&&typeof ee.length=="number"){S=c.length||0;const ae=ee.length||0;c.length=S+ae;for(let Se=0;Se<ae;Se++)c[S+Se]=ee[Se]}else c.push(ee)}}class _e{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function Ce(c){d.setTimeout(()=>{throw c},0)}function He(){var c=V;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class Ye{constructor(){this.h=this.g=null}add(v,S){const I=Ue.get();I.set(v,S),this.h?this.h.next=I:this.g=I,this.h=I}}var Ue=new _e(()=>new ct,c=>c.reset());class ct{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let ft,nt=!1,V=new Ye,M=()=>{const c=Promise.resolve(void 0);ft=()=>{c.then(P)}};function P(){for(var c;c=He();){try{c.h.call(c.g)}catch(S){Ce(S)}var v=Ue;v.j(c),v.h<100&&(v.h++,c.next=v.g,v.g=c)}nt=!1}function G(){this.u=this.u,this.C=this.C}G.prototype.u=!1,G.prototype.dispose=function(){this.u||(this.u=!0,this.N())},G.prototype[Symbol.dispose]=function(){this.dispose()},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const S=()=>{};d.addEventListener("test",S,v),d.removeEventListener("test",S,v)}catch{}return c})();function N(c){return/^[\s\xa0]*$/.test(c)}function dt(c,v){j.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,v)}O(dt,j),dt.prototype.init=function(c,v){const S=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget,v||(S=="mouseover"?v=c.fromElement:S=="mouseout"&&(v=c.toElement)),this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&dt.Z.h.call(this)},dt.prototype.h=function(){dt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ft="closure_listenable_"+(Math.random()*1e6|0),ue=0;function Oe(c,v,S,I,ee){this.listener=c,this.proxy=null,this.src=v,this.type=S,this.capture=!!I,this.ha=ee,this.key=++ue,this.da=this.fa=!1}function Be(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function je(c,v,S){for(const I in c)v.call(S,c[I],I,c)}function ke(c,v){for(const S in c)v.call(void 0,c[S],S,c)}function B(c){const v={};for(const S in c)v[S]=c[S];return v}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function we(c,v){let S,I;for(let ee=1;ee<arguments.length;ee++){I=arguments[ee];for(S in I)c[S]=I[S];for(let ae=0;ae<de.length;ae++)S=de[ae],Object.prototype.hasOwnProperty.call(I,S)&&(c[S]=I[S])}}function Pe(c){this.src=c,this.g={},this.h=0}Pe.prototype.add=function(c,v,S,I,ee){const ae=c.toString();c=this.g[ae],c||(c=this.g[ae]=[],this.h++);const Se=Ze(c,v,I,ee);return Se>-1?(v=c[Se],S||(v.fa=!1)):(v=new Oe(v,this.src,ae,!!I,ee),v.fa=S,c.push(v)),v};function $e(c,v){const S=v.type;if(S in c.g){var I=c.g[S],ee=Array.prototype.indexOf.call(I,v,void 0),ae;(ae=ee>=0)&&Array.prototype.splice.call(I,ee,1),ae&&(Be(v),c.g[S].length==0&&(delete c.g[S],c.h--))}}function Ze(c,v,S,I){for(let ee=0;ee<c.length;++ee){const ae=c[ee];if(!ae.da&&ae.listener==v&&ae.capture==!!S&&ae.ha==I)return ee}return-1}var pt="closure_lm_"+(Math.random()*1e6|0),mn={};function Me(c,v,S,I,ee){if(Array.isArray(v)){for(let ae=0;ae<v.length;ae++)Me(c,v[ae],S,I,ee);return null}return S=vo(S),c&&c[Ft]?c.J(v,S,y(I)?!!I.capture:!1,ee):es(c,v,S,!1,I,ee)}function es(c,v,S,I,ee,ae){if(!v)throw Error("Invalid event type");const Se=y(ee)?!!ee.capture:!!ee;let rt=As(c);if(rt||(c[pt]=rt=new Pe(c)),S=rt.add(v,S,I,Se,ae),S.proxy)return S;if(I=Pi(),S.proxy=I,I.src=c,I.listener=S,c.addEventListener)z||(ee=Se),ee===void 0&&(ee=!1),c.addEventListener(v.toString(),I,ee);else if(c.attachEvent)c.attachEvent(fi(v.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Pi(){function c(S){return v.call(c.src,c.listener,S)}const v=Hr;return c}function wt(c,v,S,I,ee){if(Array.isArray(v))for(var ae=0;ae<v.length;ae++)wt(c,v[ae],S,I,ee);else I=y(I)?!!I.capture:!!I,S=vo(S),c&&c[Ft]?(c=c.i,ae=String(v).toString(),ae in c.g&&(v=c.g[ae],S=Ze(v,S,I,ee),S>-1&&(Be(v[S]),Array.prototype.splice.call(v,S,1),v.length==0&&(delete c.g[ae],c.h--)))):c&&(c=As(c))&&(v=c.g[v.toString()],c=-1,v&&(c=Ze(v,S,I,ee)),(S=c>-1?v[c]:null)&&hi(S))}function hi(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[Ft])$e(v.i,c);else{var S=c.type,I=c.proxy;v.removeEventListener?v.removeEventListener(S,I,c.capture):v.detachEvent?v.detachEvent(fi(S),I):v.addListener&&v.removeListener&&v.removeListener(I),(S=As(v))?($e(S,c),S.h==0&&(S.src=null,v[pt]=null)):Be(c)}}}function fi(c){return c in mn?mn[c]:mn[c]="on"+c}function Hr(c,v){if(c.da)c=!0;else{v=new dt(v,this);const S=c.listener,I=c.ha||c.src;c.fa&&hi(c),c=S.call(I,v)}return c}function As(c){return c=c[pt],c instanceof Pe?c:null}var yo="__closure_events_fn_"+(Math.random()*1e9>>>0);function vo(c){return typeof c=="function"?c:(c[yo]||(c[yo]=function(v){return c.handleEvent(v)}),c[yo])}function cn(){G.call(this),this.i=new Pe(this),this.M=this,this.G=null}O(cn,G),cn.prototype[Ft]=!0,cn.prototype.removeEventListener=function(c,v,S,I){wt(this,c,v,S,I)};function en(c,v){var S,I=c.G;if(I)for(S=[];I;I=I.G)S.push(I);if(c=c.M,I=v.type||v,typeof v=="string")v=new j(v,c);else if(v instanceof j)v.target=v.target||c;else{var ee=v;v=new j(I,c),we(v,ee)}ee=!0;let ae,Se;if(S)for(Se=S.length-1;Se>=0;Se--)ae=v.g=S[Se],ee=Mn(ae,I,!0,v)&&ee;if(ae=v.g=c,ee=Mn(ae,I,!0,v)&&ee,ee=Mn(ae,I,!1,v)&&ee,S)for(Se=0;Se<S.length;Se++)ae=v.g=S[Se],ee=Mn(ae,I,!1,v)&&ee}cn.prototype.N=function(){if(cn.Z.N.call(this),this.i){var c=this.i;for(const v in c.g){const S=c.g[v];for(let I=0;I<S.length;I++)Be(S[I]);delete c.g[v],c.h--}}this.G=null},cn.prototype.J=function(c,v,S,I){return this.i.add(String(c),v,!1,S,I)},cn.prototype.K=function(c,v,S,I){return this.i.add(String(c),v,!0,S,I)};function Mn(c,v,S,I){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();let ee=!0;for(let ae=0;ae<v.length;++ae){const Se=v[ae];if(Se&&!Se.da&&Se.capture==S){const rt=Se.listener,on=Se.ha||Se.src;Se.fa&&$e(c.i,Se),ee=rt.call(on,I)!==!1&&ee}}return ee&&!I.defaultPrevented}function nl(c,v){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=b(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(c,v||0)}function ts(c){c.g=nl(()=>{c.g=null,c.i&&(c.i=!1,ts(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class zn extends G{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ts(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fr(c){G.call(this),this.h=c,this.g={}}O(Fr,G);var Kr=[];function Gr(c){je(c.g,function(v,S){this.g.hasOwnProperty(S)&&hi(v)},c),c.g={}}Fr.prototype.N=function(){Fr.Z.N.call(this),Gr(this)},Fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var di=d.JSON.stringify,ws=d.JSON.parse,ha=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Rs(){}function mi(){}var nr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function pn(){j.call(this,"d")}O(pn,j);function gn(){j.call(this,"c")}O(gn,j);var Ne={},ns=null;function br(){return ns=ns||new cn}Ne.Ia="serverreachability";function Cs(c){j.call(this,Ne.Ia,c)}O(Cs,j);function Re(c){const v=br();en(v,new Cs(v))}Ne.STAT_EVENT="statevent";function Li(c,v){j.call(this,Ne.STAT_EVENT,c),this.stat=v}O(Li,j);function tn(c){const v=br();en(v,new Li(v,c))}Ne.Ja="timingevent";function Tr(c,v){j.call(this,Ne.Ja,c),this.size=v}O(Tr,j);function Yr(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},v)}function dr(){this.g=!0}dr.prototype.ua=function(){this.g=!1};function au(c,v,S,I,ee,ae){c.info(function(){if(c.g)if(ae){var Se="",rt=ae.split("&");for(let Rt=0;Rt<rt.length;Rt++){var on=rt[Rt].split("=");if(on.length>1){const Ut=on[0];on=on[1];const kr=Ut.split("_");Se=kr.length>=2&&kr[1]=="type"?Se+(Ut+"="+on+"&"):Se+(Ut+"=redacted&")}}}else Se=null;else Se=ae;return"XMLHTTP REQ ("+I+") [attempt "+ee+"]: "+v+`
`+S+`
`+Se})}function rl(c,v,S,I,ee,ae,Se){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+ee+"]: "+v+`
`+S+`
`+ae+" "+Se})}function Yn(c,v,S,I){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+_o(c,S)+(I?" "+I:"")})}function Sr(c,v){c.info(function(){return"TIMEOUT: "+v})}dr.prototype.info=function(){};function _o(c,v){if(!c.g)return v;if(!v)return null;try{const ae=JSON.parse(v);if(ae){for(c=0;c<ae.length;c++)if(Array.isArray(ae[c])){var S=ae[c];if(!(S.length<2)){var I=S[1];if(Array.isArray(I)&&!(I.length<1)){var ee=I[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(let Se=1;Se<I.length;Se++)I[Se]=""}}}}return di(ae)}catch{return v}}var pi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},kt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Jt;function Is(){}O(Is,Rs),Is.prototype.g=function(){return new XMLHttpRequest},Jt=new Is;function Ar(c){return encodeURIComponent(String(c))}function Os(c){var v=1;c=c.split(":");const S=[];for(;v>0&&c.length;)S.push(c.shift()),v--;return c.length&&S.push(c.join(":")),S}function rr(c,v,S,I){this.j=c,this.i=v,this.l=S,this.S=I||1,this.V=new Fr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qr}function Qr(){this.i=null,this.g="",this.h=!1}var Pt={},Gt={};function kn(c,v,S){c.M=1,c.A=ss(rn(v)),c.u=S,c.R=!0,Ui(c,null)}function Ui(c,v){c.F=Date.now(),jn(c),c.B=rn(c.A);var S=c.B,I=c.S;Array.isArray(I)||(I=[String(I)]),ga(S.i,"t",I),c.C=0,S=c.j.L,c.h=new Qr,c.g=_n(c.j,S?v:null,!c.u),c.P>0&&(c.O=new zn(b(c.Y,c,c.g),c.P)),v=c.V,S=c.g,I=c.ba;var ee="readystatechange";Array.isArray(ee)||(ee&&(Kr[0]=ee.toString()),ee=Kr);for(let ae=0;ae<ee.length;ae++){const Se=Me(S,ee[ae],I||v.handleEvent,!1,v.h||v);if(!Se)break;v.g[Se.key]=Se}v=c.J?B(c.J):{},c.u?(c.v||(c.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,v)):(c.v="GET",c.g.ea(c.B,c.v,null,v)),Re(),au(c.i,c.v,c.B,c.l,c.S,c.u)}rr.prototype.ba=function(c){c=c.target;const v=this.O;v&&ni(c)==3?v.j():this.Y(c)},rr.prototype.Y=function(c){try{if(c==this.g)e:{const rt=ni(this.g),on=this.g.ya(),Rt=this.g.ca();if(!(rt<3)&&(rt!=3||this.g&&(this.h.h||this.g.la()||an(this.g)))){this.K||rt!=4||on==7||(on==8||Rt<=0?Re(3):Re(2)),wr(this);var v=this.g.ca();this.X=v;var S=ou(this);if(this.o=v==200,rl(this.i,this.v,this.B,this.l,this.S,rt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var I,ee=this.g;if((I=ee.g?ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(I)){var ae=I;break t}}ae=null}if(c=ae)Yn(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Sn(this,c);else{this.o=!1,this.m=3,tn(12),yn(this),It(this);break e}}if(this.R){c=!0;let Ut;for(;!this.K&&this.C<S.length;)if(Ut=Eo(this,S),Ut==Gt){rt==4&&(this.m=4,tn(14),c=!1),Yn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==Pt){this.m=4,tn(15),Yn(this.i,this.l,S,"[Invalid Chunk]"),c=!1;break}else Yn(this.i,this.l,Ut,null),Sn(this,Ut);if($r(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||S.length!=0||this.h.h||(this.m=1,tn(16),c=!1),this.o=this.o&&c,!c)Yn(this.i,this.l,S,"[Invalid Chunked Response]"),yn(this),It(this);else if(S.length>0&&!this.W){this.W=!0;var Se=this.j;Se.g==this&&Se.aa&&!Se.P&&(Se.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),os(Se),Se.P=!0,tn(11))}}else Yn(this.i,this.l,S,null),Sn(this,S);rt==4&&yn(this),this.o&&!this.K&&(rt==4?Ki(this.j,this):(this.o=!1,jn(this)))}else Hi(this.g),v==400&&S.indexOf("Unknown SID")>0?(this.m=3,tn(12)):(this.m=0,tn(13)),yn(this),It(this)}}}catch{}};function ou(c){if(!$r(c))return c.g.la();const v=an(c.g);if(v==="")return"";let S="";const I=v.length,ee=ni(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return yn(c),It(c),"";c.h.i=new d.TextDecoder}for(let ae=0;ae<I;ae++)c.h.h=!0,S+=c.h.i.decode(v[ae],{stream:!(ee&&ae==I-1)});return v.length=0,c.h.g+=S,c.C=0,c.h.g}function $r(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Eo(c,v){var S=c.C,I=v.indexOf(`
`,S);return I==-1?Gt:(S=Number(v.substring(S,I)),isNaN(S)?Pt:(I+=1,I+S>v.length?Gt:(v=v.slice(I,I+S),c.C=I+S,v)))}rr.prototype.cancel=function(){this.K=!0,yn(this)};function jn(c){c.T=Date.now()+c.H,Ds(c,c.H)}function Ds(c,v){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Yr(b(c.aa,c),v)}function wr(c){c.D&&(d.clearTimeout(c.D),c.D=null)}rr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Sr(this.i,this.B),this.M!=2&&(Re(),tn(17)),yn(this),this.m=2,It(this)):Ds(this,this.T-c)};function It(c){c.j.I==0||c.K||Ki(c.j,c)}function yn(c){wr(c);var v=c.O;v&&typeof v.dispose=="function"&&v.dispose(),c.O=null,Gr(c.V),c.g&&(v=c.g,c.g=null,v.abort(),v.dispose())}function Sn(c,v){try{var S=c.j;if(S.I!=0&&(S.g==c||Cr(S.h,c))){if(!c.L&&Cr(S.h,c)&&S.I==3){try{var I=S.Ba.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var ee=I;if(ee[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<c.F)Ea(S),Ei(S);else break e;Ti(S),tn(18)}}else S.xa=ee[1],0<S.xa-S.K&&ee[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=Yr(b(S.Va,S),6e3));Rr(S.h)<=1&&S.ta&&(S.ta=void 0)}else Nr(S,11)}else if((c.L||S.g==c)&&Ea(S),!N(v))for(ee=S.Ba.g.parse(v),v=0;v<ee.length;v++){let Rt=ee[v];const Ut=Rt[0];if(!(Ut<=S.K))if(S.K=Ut,Rt=Rt[1],S.I==2)if(Rt[0]=="c"){S.M=Rt[1],S.ba=Rt[2];const kr=Rt[3];kr!=null&&(S.ka=kr,S.j.info("VER="+S.ka));const Vr=Rt[4];Vr!=null&&(S.za=Vr,S.j.info("SVER="+S.za));const gr=Rt[5];gr!=null&&typeof gr=="number"&&gr>0&&(I=1.5*gr,S.O=I,S.j.info("backChannelRequestTimeoutMs_="+I)),I=S;const ii=c.g;if(ii){const us=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(us){var ae=I.h;ae.g||us.indexOf("spdy")==-1&&us.indexOf("quic")==-1&&us.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(Xr(ae,ae.h),ae.h=null))}if(I.G){const Aa=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;Aa&&(I.wa=Aa,Dt(I.J,I.G,Aa))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-c.F,S.j.info("Handshake RTT: "+S.T+"ms")),I=S;var Se=c;if(I.na=Sa(I,I.L?I.ba:null,I.W),Se.L){fa(I.h,Se);var rt=Se,on=I.O;on&&(rt.H=on),rt.D&&(wr(rt),jn(rt)),I.g=Se}else ks(I);S.i.length>0&&bi(S)}else Rt[0]!="stop"&&Rt[0]!="close"||Nr(S,7);else S.I==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?Nr(S,7):as(S):Rt[0]!="noop"&&S.l&&S.l.qa(Rt),S.A=0)}}Re(4)}catch{}}var nn=class{constructor(c,v){this.g=c,this.map=v}};function gi(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function rs(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Rr(c){return c.h?1:c.g?c.g.size:0}function Cr(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function Xr(c,v){c.g?c.g.add(v):c.h=v}function fa(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}gi.prototype.cancel=function(){if(this.i=is(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function is(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const S of c.g.values())v=v.concat(S.G);return v}return Z(c.i)}var bo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(c,v){if(c){c=c.split("&");for(let S=0;S<c.length;S++){const I=c[S].indexOf("=");let ee,ae=null;I>=0?(ee=c[S].substring(0,I),ae=c[S].substring(I+1)):ee=c[S],v(ee,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function ir(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;c instanceof ir?(this.l=c.l,sn(this,c.j),this.o=c.o,this.g=c.g,Ir(this,c.u),this.h=c.h,da(this,sl(c.i)),this.m=c.m):c&&(v=String(c).match(bo))?(this.l=!1,sn(this,v[1]||"",!0),this.o=yt(v[2]||""),this.g=yt(v[3]||"",!0),Ir(this,v[4]),this.h=yt(v[5]||"",!0),da(this,v[6]||"",!0),this.m=yt(v[7]||"")):(this.l=!1,this.i=new ei(null,this.l))}ir.prototype.toString=function(){const c=[];var v=this.j;v&&c.push(Jr(v,Zr,!0),":");var S=this.g;return(S||v=="file")&&(c.push("//"),(v=this.o)&&c.push(Jr(v,Zr,!0),"@"),c.push(Ar(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&c.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&c.push("/"),c.push(Jr(S,S.charAt(0)=="/"?xs:ma,!0))),(S=this.i.toString())&&c.push("?",S),(S=this.m)&&c.push("#",Jr(S,To)),c.join("")},ir.prototype.resolve=function(c){const v=rn(this);let S=!!c.j;S?sn(v,c.j):S=!!c.o,S?v.o=c.o:S=!!c.g,S?v.g=c.g:S=c.u!=null;var I=c.h;if(S)Ir(v,c.u);else if(S=!!c.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var ee=v.h.lastIndexOf("/");ee!=-1&&(I=v.h.slice(0,ee+1)+I)}if(ee=I,ee==".."||ee==".")I="";else if(ee.indexOf("./")!=-1||ee.indexOf("/.")!=-1){I=ee.lastIndexOf("/",0)==0,ee=ee.split("/");const ae=[];for(let Se=0;Se<ee.length;){const rt=ee[Se++];rt=="."?I&&Se==ee.length&&ae.push(""):rt==".."?((ae.length>1||ae.length==1&&ae[0]!="")&&ae.pop(),I&&Se==ee.length&&ae.push("")):(ae.push(rt),I=!0)}I=ae.join("/")}else I=ee}return S?v.h=I:S=c.i.toString()!=="",S?da(v,sl(c.i)):S=!!c.m,S&&(v.m=c.m),v};function rn(c){return new ir(c)}function sn(c,v,S){c.j=S?yt(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function Ir(c,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);c.u=v}else c.u=null}function da(c,v,S){v instanceof ei?(c.i=v,ti(c.i,c.l)):(S||(v=Jr(v,Wr)),c.i=new ei(v,c.l))}function Dt(c,v,S){c.i.set(v,S)}function ss(c){return Dt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function yt(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Jr(c,v,S){return typeof c=="string"?(c=encodeURI(c).replace(v,An),S&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function An(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Zr=/[#\/\?@]/g,ma=/[#\?:]/g,xs=/[#\?]/g,Wr=/[#\?@]/g,To=/#/g;function ei(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function Qn(c){c.g||(c.g=new Map,c.h=0,c.i&&ot(c.i,function(v,S){c.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}i=ei.prototype,i.add=function(c,v){Qn(this),this.i=null,c=hn(this,c);let S=this.g.get(c);return S||this.g.set(c,S=[]),S.push(v),this.h+=1,this};function il(c,v){Qn(c),v=hn(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function gt(c,v){return Qn(c),v=hn(c,v),c.g.has(v)}i.forEach=function(c,v){Qn(this),this.g.forEach(function(S,I){S.forEach(function(ee){c.call(v,ee,I,this)},this)},this)};function pa(c,v){Qn(c);let S=[];if(typeof v=="string")gt(c,v)&&(S=S.concat(c.g.get(hn(c,v))));else for(c=Array.from(c.g.values()),v=0;v<c.length;v++)S=S.concat(c[v]);return S}i.set=function(c,v){return Qn(this),this.i=null,c=hn(this,c),gt(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},i.get=function(c,v){return c?(c=pa(this,c),c.length>0?String(c[0]):v):v};function ga(c,v,S){il(c,v),S.length>0&&(c.i=null,c.g.set(hn(c,v),Z(S)),c.h+=S.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(let I=0;I<v.length;I++){var S=v[I];const ee=Ar(S);S=pa(this,S);for(let ae=0;ae<S.length;ae++){let Se=ee;S[ae]!==""&&(Se+="="+Ar(S[ae])),c.push(Se)}}return this.i=c.join("&")};function sl(c){const v=new ei;return v.i=c.i,c.g&&(v.g=new Map(c.g),v.h=c.h),v}function hn(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function ti(c,v){v&&!c.j&&(Qn(c),c.i=null,c.g.forEach(function(S,I){const ee=I.toLowerCase();I!=ee&&(il(this,I),ga(this,ee,S))},c)),c.j=v}function sr(c,v){const S=new dr;if(d.Image){const I=new Image;I.onload=C(mr,S,"TestLoadImage: loaded",!0,v,I),I.onerror=C(mr,S,"TestLoadImage: error",!1,v,I),I.onabort=C(mr,S,"TestLoadImage: abort",!1,v,I),I.ontimeout=C(mr,S,"TestLoadImage: timeout",!1,v,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else v(!1)}function Or(c,v){const S=new dr,I=new AbortController,ee=setTimeout(()=>{I.abort(),mr(S,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:I.signal}).then(ae=>{clearTimeout(ee),ae.ok?mr(S,"TestPingServer: ok",!0,v):mr(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(ee),mr(S,"TestPingServer: error",!1,v)})}function mr(c,v,S,I,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),I(S)}catch{}}function zi(){this.g=new ha}function Lt(c){this.i=c.Sb||null,this.h=c.ab||!1}O(Lt,Rs),Lt.prototype.g=function(){return new Bn(this.i,this.h)};function Bn(c,v){cn.call(this),this.H=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}O(Bn,cn),i=Bn.prototype,i.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=v,this.readyState=1,pr(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(v.body=c),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Dr(this)),this.readyState=0},i.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,pr(this)),this.g&&(this.readyState=3,pr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yi(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function yi(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}i.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?Dr(this):pr(this),this.readyState==3&&yi(this)}},i.Oa=function(c){this.g&&(this.response=this.responseText=c,Dr(this))},i.Na=function(c){this.g&&(this.response=c,Dr(this))},i.ga=function(){this.g&&Dr(this)};function Dr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,pr(c)}i.setRequestHeader=function(c,v){this.A.append(c,v)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,c.push(S[0]+": "+S[1]),S=v.next();return c.join(`\r
`)};function pr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Bn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function vn(c){let v="";return je(c,function(S,I){v+=I,v+=":",v+=S,v+=`\r
`}),v}function Ns(c,v,S){e:{for(I in S){var I=!1;break e}I=!0}I||(S=vn(S),typeof c=="string"?S!=null&&Ar(S):Dt(c,v,S))}function mt(c){cn.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}O(mt,cn);var xr=/^https?$/i,ya=["POST","PUT"];i=mt.prototype,i.Fa=function(c){this.H=c},i.ea=function(c,v,S,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Jt.g(),this.g.onreadystatechange=x(b(this.Ca,this));try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(ae){ji(this,ae);return}if(c=S||"",S=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var ee in I)S.set(ee,I[ee]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const ae of I.keys())S.set(ae,I.get(ae));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(S.keys()).find(ae=>ae.toLowerCase()=="content-type"),ee=d.FormData&&c instanceof d.FormData,!(Array.prototype.indexOf.call(ya,v,void 0)>=0)||I||ee||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,Se]of S)this.g.setRequestHeader(ae,Se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(ae){ji(this,ae)}};function ji(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.o=5,Bi(c),vi(c)}function Bi(c){c.A||(c.A=!0,en(c,"complete"),en(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,en(this,"complete"),en(this,"abort"),vi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vi(this,!0)),mt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?qi(this):this.Xa())},i.Xa=function(){qi(this)};function qi(c){if(c.h&&typeof u<"u"){if(c.v&&ni(c)==4)setTimeout(c.Ca.bind(c),0);else if(en(c,"readystatechange"),ni(c)==4){c.h=!1;try{const ae=c.ca();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var I;if(I=ae===0){let Se=String(c.D).match(bo)[1]||null;!Se&&d.self&&d.self.location&&(Se=d.self.location.protocol.slice(0,-1)),I=!xr.test(Se?Se.toLowerCase():"")}S=I}if(S)en(c,"complete"),en(c,"success");else{c.o=6;try{var ee=ni(c)>2?c.g.statusText:""}catch{ee=""}c.l=ee+" ["+c.ca()+"]",Bi(c)}}finally{vi(c)}}}}function vi(c,v){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const S=c.g;c.g=null,v||en(c,"ready");try{S.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ni(c){return c.g?c.g.readyState:0}i.ca=function(){try{return ni(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),ws(v)}};function an(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Hi(c){const v={};c=(c.g&&ni(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(N(c[I]))continue;var S=Os(c[I]);const ee=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const ae=v[ee]||[];v[ee]=ae,ae.push(S)}ke(v,function(I){return I.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function _i(c,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[c]||v}function ri(c){this.za=0,this.i=[],this.j=new dr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_i("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_i("baseRetryDelayMs",5e3,c),this.Za=_i("retryDelaySeedMs",1e4,c),this.Ta=_i("forwardChannelMaxRetries",2,c),this.va=_i("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new gi(c&&c.concurrentRequestLimit),this.Ba=new zi,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ri.prototype,i.ka=8,i.I=1,i.connect=function(c,v,S,I){tn(0),this.W=c,this.H=v||{},S&&I!==void 0&&(this.H.OSID=S,this.H.OAID=I),this.F=this.X,this.J=Sa(this,null,this.W),bi(this)};function as(c){if(va(c),c.I==3){var v=c.V++,S=rn(c.J);if(Dt(S,"SID",c.M),Dt(S,"RID",v),Dt(S,"TYPE","terminate"),Fi(c,S),v=new rr(c,c.j,v),v.M=2,v.A=ss(rn(S)),S=!1,d.navigator&&d.navigator.sendBeacon)try{S=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!S&&d.Image&&(new Image().src=v.A,S=!0),S||(v.g=_n(v.j,null),v.g.ea(v.A)),v.F=Date.now(),jn(v)}Ta(c)}function Ei(c){c.g&&(os(c),c.g.cancel(),c.g=null)}function va(c){Ei(c),c.v&&(d.clearTimeout(c.v),c.v=null),Ea(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&d.clearTimeout(c.m),c.m=null)}function bi(c){if(!rs(c.h)&&!c.m){c.m=!0;var v=c.Ea;ft||M(),nt||(ft(),nt=!0),V.add(v,c),c.D=0}}function _a(c,v){return Rr(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=v.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Yr(b(c.Ea,c,v),ba(c,c.D)),c.D++,!0)}i.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const ee=new rr(this,this.j,c);let ae=this.o;if(this.U&&(ae?(ae=B(ae),we(ae,this.U)):ae=this.U),this.u!==null||this.R||(ee.J=ae,ae=null),this.S)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var I=this.i[S];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,v>4096){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=So(this,ee,v),S=rn(this.J),Dt(S,"RID",c),Dt(S,"CVER",22),this.G&&Dt(S,"X-HTTP-Session-Id",this.G),Fi(this,S),ae&&(this.R?v="headers="+Ar(vn(ae))+"&"+v:this.u&&Ns(S,this.u,ae)),Xr(this.h,ee),this.Ra&&Dt(S,"TYPE","init"),this.S?(Dt(S,"$req",v),Dt(S,"SID","null"),ee.U=!0,kn(ee,S,null)):kn(ee,S,v),this.I=2}}else this.I==3&&(c?Ms(this,c):this.i.length==0||rs(this.h)||Ms(this))};function Ms(c,v){var S;v?S=v.l:S=c.V++;const I=rn(c.J);Dt(I,"SID",c.M),Dt(I,"RID",S),Dt(I,"AID",c.K),Fi(c,I),c.u&&c.o&&Ns(I,c.u,c.o),S=new rr(c,c.j,S,c.D+1),c.u===null&&(S.J=c.o),v&&(c.i=v.G.concat(c.i)),v=So(c,S,1e3),S.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Xr(c.h,S),kn(S,I,v)}function Fi(c,v){c.H&&je(c.H,function(S,I){Dt(v,I,S)}),c.l&&je({},function(S,I){Dt(v,I,S)})}function So(c,v,S){S=Math.min(c.i.length,S);const I=c.l?b(c.l.Ka,c.l,c):null;e:{var ee=c.i;let rt=-1;for(;;){const on=["count="+S];rt==-1?S>0?(rt=ee[0].g,on.push("ofs="+rt)):rt=0:on.push("ofs="+rt);let Rt=!0;for(let Ut=0;Ut<S;Ut++){var ae=ee[Ut].g;const kr=ee[Ut].map;if(ae-=rt,ae<0)rt=Math.max(0,ee[Ut].g-100),Rt=!1;else try{ae="req"+ae+"_"||"";try{var Se=kr instanceof Map?kr:Object.entries(kr);for(const[Vr,gr]of Se){let ii=gr;y(gr)&&(ii=di(gr)),on.push(ae+Vr+"="+encodeURIComponent(ii))}}catch(Vr){throw on.push(ae+"type="+encodeURIComponent("_badmap")),Vr}}catch{I&&I(kr)}}if(Rt){Se=on.join("&");break e}}Se=void 0}return c=c.i.splice(0,S),v.G=c,Se}function ks(c){if(!c.g&&!c.v){c.Y=1;var v=c.Da;ft||M(),nt||(ft(),nt=!0),V.add(v,c),c.A=0}}function Ti(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Yr(b(c.Da,c),ba(c,c.A)),c.A++,!0)}i.Da=function(){if(this.v=null,Ao(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Yr(b(this.Wa,this),c)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,tn(10),Ei(this),Ao(this))};function os(c){c.B!=null&&(d.clearTimeout(c.B),c.B=null)}function Ao(c){c.g=new rr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var v=rn(c.na);Dt(v,"RID","rpc"),Dt(v,"SID",c.M),Dt(v,"AID",c.K),Dt(v,"CI",c.F?"0":"1"),!c.F&&c.ia&&Dt(v,"TO",c.ia),Dt(v,"TYPE","xmlhttp"),Fi(c,v),c.u&&c.o&&Ns(v,c.u,c.o),c.O&&(c.g.H=c.O);var S=c.g;c=c.ba,S.M=1,S.A=ss(rn(v)),S.u=null,S.R=!0,Ui(S,c)}i.Va=function(){this.C!=null&&(this.C=null,Ei(this),Ti(this),tn(19))};function Ea(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Ki(c,v){var S=null;if(c.g==v){Ea(c),os(c),c.g=null;var I=2}else if(Cr(c.h,v))S=v.G,fa(c.h,v),I=1;else return;if(c.I!=0){if(v.o)if(I==1){S=v.u?v.u.length:0,v=Date.now()-v.F;var ee=c.D;I=br(),en(I,new Tr(I,S)),bi(c)}else ks(c);else if(ee=v.m,ee==3||ee==0&&v.X>0||!(I==1&&_a(c,v)||I==2&&Ti(c)))switch(S&&S.length>0&&(v=c.h,v.i=v.i.concat(S)),ee){case 1:Nr(c,5);break;case 4:Nr(c,10);break;case 3:Nr(c,6);break;default:Nr(c,2)}}}function ba(c,v){let S=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(S*=2),S*v}function Nr(c,v){if(c.j.info("Error code "+v),v==2){var S=b(c.bb,c),I=c.Ua;const ee=!I;I=new ir(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||sn(I,"https"),ss(I),ee?sr(I.toString(),S):Or(I.toString(),S)}else tn(2);c.I=0,c.l&&c.l.pa(v),Ta(c),va(c)}i.bb=function(c){c?(this.j.info("Successfully pinged google.com"),tn(2)):(this.j.info("Failed to ping google.com"),tn(1))};function Ta(c){if(c.I=0,c.ja=[],c.l){const v=is(c.h);(v.length!=0||c.i.length!=0)&&(fe(c.ja,v),fe(c.ja,c.i),c.h.i.length=0,Z(c.i),c.i.length=0),c.l.oa()}}function Sa(c,v,S){var I=S instanceof ir?rn(S):new ir(S);if(I.g!="")v&&(I.g=v+"."+I.g),Ir(I,I.u);else{var ee=d.location;I=ee.protocol,v=v?v+"."+ee.hostname:ee.hostname,ee=+ee.port;const ae=new ir(null);I&&sn(ae,I),v&&(ae.g=v),ee&&Ir(ae,ee),S&&(ae.h=S),I=ae}return S=c.G,v=c.wa,S&&v&&Dt(I,S,v),Dt(I,"VER",c.ka),Fi(c,I),I}function _n(c,v,S){if(v&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Aa&&!c.ma?new mt(new Lt({ab:S})):new mt(c.ma),v.Fa(c.L),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ls(){}i=ls.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Mr(){}Mr.prototype.g=function(c,v){return new qn(c,v)};function qn(c,v){cn.call(this),this.g=new ri(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(c?c["X-WebChannel-Client-Profile"]=v.sa:c={"X-WebChannel-Client-Profile":v.sa}),this.g.U=c,(c=v&&v.Qb)&&!N(c)&&(this.g.u=c),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!N(v)&&(this.g.G=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new Si(this)}O(qn,cn),qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){as(this.g)},qn.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var S={};S.__data__=c,c=S}else this.v&&(S={},S.__data__=di(c),c=S);v.i.push(new nn(v.Ya++,c)),v.I==3&&bi(v)},qn.prototype.N=function(){this.g.l=null,delete this.j,as(this.g),delete this.g,qn.Z.N.call(this)};function Vs(c){pn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const S in v){c=S;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}O(Vs,pn);function wo(){gn.call(this),this.status=1}O(wo,gn);function Si(c){this.g=c}O(Si,ls),Si.prototype.ra=function(){en(this.g,"a")},Si.prototype.qa=function(c){en(this.g,new Vs(c))},Si.prototype.pa=function(c){en(this.g,new wo)},Si.prototype.oa=function(){en(this.g,"b")},Mr.prototype.createWebChannel=Mr.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,xb=function(){return new Mr},Db=function(){return br()},Ob=Ne,up={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pi.NO_ERROR=0,pi.TIMEOUT=8,pi.HTTP_ERROR=6,Jh=pi,kt.COMPLETE="complete",Ib=kt,mi.EventType=nr,nr.OPEN="a",nr.CLOSE="b",nr.ERROR="c",nr.MESSAGE="d",cn.prototype.listen=cn.prototype.J,Qu=mi,mt.prototype.listenOnce=mt.prototype.K,mt.prototype.getLastError=mt.prototype.Ha,mt.prototype.getLastErrorCode=mt.prototype.ya,mt.prototype.getStatus=mt.prototype.ca,mt.prototype.getResponseJson=mt.prototype.La,mt.prototype.getResponseText=mt.prototype.la,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Fa,Cb=mt}).apply(typeof Uh<"u"?Uh:typeof self<"u"?self:typeof window<"u"?window:{});class ur{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ur.UNAUTHENTICATED=new ur(null),ur.GOOGLE_CREDENTIALS=new ur("google-credentials-uid"),ur.FIRST_PARTY=new ur("first-party-uid"),ur.MOCK_USER=new ur("mock-user");let nu="12.8.0";function VI(i){nu=i}const Xo=new Dp("@firebase/firestore");function Vl(){return Xo.logLevel}function Le(i,...e){if(Xo.logLevel<=Tt.DEBUG){const n=e.map(Hp);Xo.debug(`Firestore (${nu}): ${i}`,...n)}}function aa(i,...e){if(Xo.logLevel<=Tt.ERROR){const n=e.map(Hp);Xo.error(`Firestore (${nu}): ${i}`,...n)}}function Gl(i,...e){if(Xo.logLevel<=Tt.WARN){const n=e.map(Hp);Xo.warn(`Firestore (${nu}): ${i}`,...n)}}function Hp(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function Je(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Nb(i,s,n)}function Nb(i,e,n){let s=`FIRESTORE (${nu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw aa(s),new Error(s)}function Vt(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||Nb(e,o,s)}function at(i,e){return i}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends ca{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class lo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Mb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ur.UNAUTHENTICATED)))}shutdown(){}}class LI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class UI{constructor(e){this.t=e,this.currentUser=ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Vt(this.o===void 0,42304);let s=this.i;const o=_=>this.i!==s?(s=this.i,n(_)):Promise.resolve();let u=new lo;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new lo,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const _=u;e.enqueueRetryable((async()=>{await _.promise,await o(this.currentUser)}))},y=_=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((_=>y(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?y(_):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new lo)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Vt(typeof s.accessToken=="string",31837,{l:s}),new Mb(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Vt(e===null||typeof e=="string",2055,{h:e}),new ur(e)}}class zI{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=ur.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class jI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new zI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ur.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class N0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$i(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Vt(this.o===void 0,3512);const s=u=>{u.error!=null&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Le("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new N0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Vt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new N0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function qI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Fp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=qI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function St(i,e){return i<e?-1:i>e?1:0}function cp(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return $m(o)===$m(u)?St(o,u):$m(o)?1:-1}return St(i.length,e.length)}const HI=55296,FI=57343;function $m(i){const e=i.charCodeAt(0);return e>=HI&&e<=FI}function Yl(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const M0="__name__";class ps{constructor(e,n,s){n===void 0?n=0:n>e.length&&Je(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Je(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return ps.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ps?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=ps.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return St(e.length,n.length)}static compareSegments(e,n){const s=ps.isNumericId(e),o=ps.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?ps.extractNumericId(e).compare(ps.extractNumericId(n)):cp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oo.fromString(e.substring(4,e.length-2))}}class ln extends ps{construct(e,n,s){return new ln(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Fe(ve.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new ln(n)}static emptyPath(){return new ln([])}}const KI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends ps{construct(e,n,s){return new er(e,n,s)}static isValidIdentifier(e){return KI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===M0}static keyField(){return new er([M0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new Fe(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const y=e[o];if(y==="\\"){if(o+1===e.length)throw new Fe(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[o+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new Fe(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=_,o+=2}else y==="`"?(d=!d,o++):y!=="."||d?(s+=y,o++):(u(),o++)}if(u(),d)throw new Fe(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(n)}static emptyPath(){return new er([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(ln.fromString(e))}static fromName(e){return new Qe(ln.fromString(e).popFirst(5))}static empty(){return new Qe(ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ln.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ln.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new ln(e.slice()))}}function GI(i,e,n){if(!n)throw new Fe(ve.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function YI(i,e,n,s){if(e===!0&&s===!0)throw new Fe(ve.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function k0(i){if(!Qe.isDocumentKey(i))throw new Fe(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function kb(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Kp(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Je(12329,{type:typeof i})}function hc(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Fe(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kp(i);throw new Fe(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Nn(i,e){const n={typeString:i};return e&&(n.value=e),n}function wc(i,e){if(!kb(i))throw new Fe(ve.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const d=i[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new Fe(ve.INVALID_ARGUMENT,n);return!0}const V0=-62135596800,P0=1e6;class Xt{static now(){return Xt.fromMillis(Date.now())}static fromDate(e){return Xt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*P0);return new Xt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Fe(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Fe(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<V0)throw new Fe(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/P0}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wc(e,Xt._jsonSchema))return new Xt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-V0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xt._jsonSchemaVersion="firestore/timestamp/1.0",Xt._jsonSchema={type:Nn("string",Xt._jsonSchemaVersion),seconds:Nn("number"),nanoseconds:Nn("number")};class it{static fromTimestamp(e){return new it(e)}static min(){return new it(new Xt(0,0))}static max(){return new it(new Xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const fc=-1;function QI(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=it.fromTimestamp(s===1e9?new Xt(n+1,0):new Xt(n,s));return new uo(o,Qe.empty(),e)}function $I(i){return new uo(i.readTime,i.key,fc)}class uo{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new uo(it.min(),Qe.empty(),fc)}static max(){return new uo(it.max(),Qe.empty(),fc)}}function XI(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Qe.comparator(i.documentKey,e.documentKey),n!==0?n:St(i.largestBatchId,e.largestBatchId))}const JI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ru(i){if(i.code!==ve.FAILED_PRECONDITION||i.message!==JI)throw i;Le("LocalStore","Unexpectedly lost primary lease")}class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ye(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ye?n:ye.resolve(n)}catch(n){return ye.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ye.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ye.reject(n)}static resolve(e){return new ye(((n,s)=>{n(e)}))}static reject(e){return new ye(((n,s)=>{s(e)}))}static waitFor(e){return new ye(((n,s)=>{let o=0,u=0,d=!1;e.forEach((y=>{++o,y.next((()=>{++u,d&&u===o&&n()}),(_=>s(_)))})),d=!0,u===o&&n()}))}static or(e){let n=ye.resolve(!1);for(const s of e)n=n.next((o=>o?ye.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ye(((s,o)=>{const u=e.length,d=new Array(u);let y=0;for(let _=0;_<u;_++){const b=_;n(e[b]).next((C=>{d[b]=C,++y,y===u&&s(d)}),(C=>o(C)))}}))}static doWhile(e,n){return new ye(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function WI(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function iu(i){return i.name==="IndexedDbTransactionError"}class Nf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nf.ce=-1;const Gp=-1;function Mf(i){return i==null}function mf(i){return i===0&&1/i==-1/0}function e2(i){return typeof i=="number"&&Number.isInteger(i)&&!mf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Vb="";function t2(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=L0(e)),e=n2(i.get(n),e);return L0(e)}function n2(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case Vb:n+="";break;default:n+=u}}return n}function L0(i){return i+Vb+""}function U0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Zo(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Pb(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class un{constructor(e,n){this.comparator=e,this.root=n||Wn.EMPTY}insert(e,n){return new un(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wn.BLACK,null,null))}remove(e){return new un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zh(this.root,e,this.comparator,!0)}}class zh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Wn.RED,this.left=o??Wn.EMPTY,this.right=u??Wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Wn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Wn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Je(27949);return e+(this.isRed()?0:1)}}Wn.EMPTY=null,Wn.RED=!0,Wn.BLACK=!1;Wn.EMPTY=new class{constructor(){this.size=0}get key(){throw Je(57766)}get value(){throw Je(16141)}get color(){throw Je(16727)}get left(){throw Je(29726)}get right(){throw Je(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Wn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Un{constructor(e){this.comparator=e,this.data=new un(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new z0(this.data.getIterator())}getIteratorFrom(e){return new z0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Un)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Un(this.comparator);return n.data=e,n}}class z0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ji{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new Ji([])}unionWith(e){let n=new Un(er.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Ji(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yl(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class Lb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class tr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Lb("Invalid base64 string: "+u):u}})(e);return new tr(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new tr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tr.EMPTY_BYTE_STRING=new tr("");const r2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function co(i){if(Vt(!!i,39018),typeof i=="string"){let e=0;const n=r2.exec(i);if(Vt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Tn(i.seconds),nanos:Tn(i.nanos)}}function Tn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ho(i){return typeof i=="string"?tr.fromBase64String(i):tr.fromUint8Array(i)}const Ub="server_timestamp",zb="__type__",jb="__previous_value__",Bb="__local_write_time__";function Yp(i){return(i?.mapValue?.fields||{})[zb]?.stringValue===Ub}function kf(i){const e=i.mapValue.fields[jb];return Yp(e)?kf(e):e}function dc(i){const e=co(i.mapValue.fields[Bb].timestampValue);return new Xt(e.seconds,e.nanos)}class i2{constructor(e,n,s,o,u,d,y,_,b,C,O){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=y,this.longPollingOptions=_,this.useFetchStreams=b,this.isUsingEmulator=C,this.apiKey=O}}const pf="(default)";class mc{constructor(e,n){this.projectId=e,this.database=n||pf}static empty(){return new mc("","")}get isDefaultDatabase(){return this.database===pf}isEqual(e){return e instanceof mc&&e.projectId===this.projectId&&e.database===this.database}}function s2(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Fe(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mc(i.options.projectId,e)}const qb="__type__",a2="__max__",jh={mapValue:{}},Hb="__vector__",gf="value";function fo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Yp(i)?4:l2(i)?9007199254740991:o2(i)?10:11:Je(28295,{value:i})}function Ts(i,e){if(i===e)return!0;const n=fo(i);if(n!==fo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return dc(i).isEqual(dc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=co(o.timestampValue),y=co(u.timestampValue);return d.seconds===y.seconds&&d.nanos===y.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return ho(o.bytesValue).isEqual(ho(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return Tn(o.geoPointValue.latitude)===Tn(u.geoPointValue.latitude)&&Tn(o.geoPointValue.longitude)===Tn(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Tn(o.integerValue)===Tn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Tn(o.doubleValue),y=Tn(u.doubleValue);return d===y?mf(d)===mf(y):isNaN(d)&&isNaN(y)}return!1})(i,e);case 9:return Yl(i.arrayValue.values||[],e.arrayValue.values||[],Ts);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},y=u.mapValue.fields||{};if(U0(d)!==U0(y))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(y[_]===void 0||!Ts(d[_],y[_])))return!1;return!0})(i,e);default:return Je(52216,{left:i})}}function pc(i,e){return(i.values||[]).find((n=>Ts(n,e)))!==void 0}function Ql(i,e){if(i===e)return 0;const n=fo(i),s=fo(e);if(n!==s)return St(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return St(i.booleanValue,e.booleanValue);case 2:return(function(u,d){const y=Tn(u.integerValue||u.doubleValue),_=Tn(d.integerValue||d.doubleValue);return y<_?-1:y>_?1:y===_?0:isNaN(y)?isNaN(_)?0:-1:1})(i,e);case 3:return j0(i.timestampValue,e.timestampValue);case 4:return j0(dc(i),dc(e));case 5:return cp(i.stringValue,e.stringValue);case 6:return(function(u,d){const y=ho(u),_=ho(d);return y.compareTo(_)})(i.bytesValue,e.bytesValue);case 7:return(function(u,d){const y=u.split("/"),_=d.split("/");for(let b=0;b<y.length&&b<_.length;b++){const C=St(y[b],_[b]);if(C!==0)return C}return St(y.length,_.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,d){const y=St(Tn(u.latitude),Tn(d.latitude));return y!==0?y:St(Tn(u.longitude),Tn(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return B0(i.arrayValue,e.arrayValue);case 10:return(function(u,d){const y=u.fields||{},_=d.fields||{},b=y[gf]?.arrayValue,C=_[gf]?.arrayValue,O=St(b?.values?.length||0,C?.values?.length||0);return O!==0?O:B0(b,C)})(i.mapValue,e.mapValue);case 11:return(function(u,d){if(u===jh.mapValue&&d===jh.mapValue)return 0;if(u===jh.mapValue)return 1;if(d===jh.mapValue)return-1;const y=u.fields||{},_=Object.keys(y),b=d.fields||{},C=Object.keys(b);_.sort(),C.sort();for(let O=0;O<_.length&&O<C.length;++O){const x=cp(_[O],C[O]);if(x!==0)return x;const Z=Ql(y[_[O]],b[C[O]]);if(Z!==0)return Z}return St(_.length,C.length)})(i.mapValue,e.mapValue);default:throw Je(23264,{he:n})}}function j0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return St(i,e);const n=co(i),s=co(e),o=St(n.seconds,s.seconds);return o!==0?o:St(n.nanos,s.nanos)}function B0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Ql(n[o],s[o]);if(u)return u}return St(n.length,s.length)}function $l(i){return hp(i)}function hp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=co(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return ho(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Qe.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=hp(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${hp(n.fields[d])}`;return o+"}"})(i.mapValue):Je(61005,{value:i})}function Zh(i){switch(fo(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kf(i);return e?16+Zh(e):16;case 5:return 2*i.stringValue.length;case 6:return ho(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Zh(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Zo(s.fields,((u,d)=>{o+=u.length+Zh(d)})),o})(i.mapValue);default:throw Je(13486,{value:i})}}function fp(i){return!!i&&"integerValue"in i}function Qp(i){return!!i&&"arrayValue"in i}function q0(i){return!!i&&"nullValue"in i}function H0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Wh(i){return!!i&&"mapValue"in i}function o2(i){return(i?.mapValue?.fields||{})[qb]?.stringValue===Hb}function tc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Zo(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=tc(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tc(i.arrayValue.values[n]);return e}return{...i}}function l2(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===a2}class Mi{constructor(e){this.value=e}static empty(){return new Mi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Wh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tc(n)}setAll(e){let n=er.emptyPath(),s={},o=[];e.forEach(((d,y)=>{if(!n.isImmediateParentOf(y)){const _=this.getFieldsMap(n);this.applyChanges(_,s,o),s={},o=[],n=y.popLast()}d?s[y.lastSegment()]=tc(d):o.push(y.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Wh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ts(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Wh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Zo(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Mi(tc(this.value))}}function Fb(i){const e=[];return Zo(i.fields,((n,s)=>{const o=new er([n]);if(Wh(s)){const u=Fb(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new Ji(e)}class cr{constructor(e,n,s,o,u,d,y){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=y}static newInvalidDocument(e){return new cr(e,0,it.min(),it.min(),it.min(),Mi.empty(),0)}static newFoundDocument(e,n,s,o){return new cr(e,1,n,it.min(),s,o,0)}static newNoDocument(e,n){return new cr(e,2,n,it.min(),it.min(),Mi.empty(),0)}static newUnknownDocument(e,n){return new cr(e,3,n,it.min(),it.min(),Mi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(it.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yf{constructor(e,n){this.position=e,this.inclusive=n}}function F0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],d=i.position[o];if(u.field.isKeyField()?s=Qe.comparator(Qe.fromName(d.referenceValue),n.key):s=Ql(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function K0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Ts(i.position[n],e.position[n]))return!1;return!0}class vf{constructor(e,n="asc"){this.field=e,this.dir=n}}function u2(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Kb{}class Ln extends Kb{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new h2(e,n,s):n==="array-contains"?new m2(e,s):n==="in"?new p2(e,s):n==="not-in"?new g2(e,s):n==="array-contains-any"?new y2(e,s):new Ln(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new f2(e,s):new d2(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ql(n,this.value)):n!==null&&fo(this.value)===fo(n)&&this.matchesComparison(Ql(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ss extends Kb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ss(e,n)}matches(e){return Gb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Gb(i){return i.op==="and"}function Yb(i){return c2(i)&&Gb(i)}function c2(i){for(const e of i.filters)if(e instanceof Ss)return!1;return!0}function dp(i){if(i instanceof Ln)return i.field.canonicalString()+i.op.toString()+$l(i.value);if(Yb(i))return i.filters.map((e=>dp(e))).join(",");{const e=i.filters.map((n=>dp(n))).join(",");return`${i.op}(${e})`}}function Qb(i,e){return i instanceof Ln?(function(s,o){return o instanceof Ln&&s.op===o.op&&s.field.isEqual(o.field)&&Ts(s.value,o.value)})(i,e):i instanceof Ss?(function(s,o){return o instanceof Ss&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,d,y)=>u&&Qb(d,o.filters[y])),!0):!1})(i,e):void Je(19439)}function $b(i){return i instanceof Ln?(function(n){return`${n.field.canonicalString()} ${n.op} ${$l(n.value)}`})(i):i instanceof Ss?(function(n){return n.op.toString()+" {"+n.getFilters().map($b).join(" ,")+"}"})(i):"Filter"}class h2 extends Ln{constructor(e,n,s){super(e,n,s),this.key=Qe.fromName(s.referenceValue)}matches(e){const n=Qe.comparator(e.key,this.key);return this.matchesComparison(n)}}class f2 extends Ln{constructor(e,n){super(e,"in",n),this.keys=Xb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class d2 extends Ln{constructor(e,n){super(e,"not-in",n),this.keys=Xb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Xb(i,e){return(e.arrayValue?.values||[]).map((n=>Qe.fromName(n.referenceValue)))}class m2 extends Ln{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qp(n)&&pc(n.arrayValue,this.value)}}class p2 extends Ln{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pc(this.value.arrayValue,n)}}class g2 extends Ln{constructor(e,n){super(e,"not-in",n)}matches(e){if(pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pc(this.value.arrayValue,n)}}class y2 extends Ln{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>pc(this.value.arrayValue,s)))}}class v2{constructor(e,n=null,s=[],o=[],u=null,d=null,y=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=y,this.Te=null}}function G0(i,e=null,n=[],s=[],o=null,u=null,d=null){return new v2(i,e,n,s,o,u,d)}function $p(i){const e=at(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>dp(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Mf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>$l(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>$l(s))).join(",")),e.Te=n}return e.Te}function Xp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!u2(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Qb(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!K0(i.startAt,e.startAt)&&K0(i.endAt,e.endAt)}function mp(i){return Qe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Vf{constructor(e,n=null,s=[],o=[],u=null,d="F",y=null,_=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=y,this.endAt=_,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function _2(i,e,n,s,o,u,d,y){return new Vf(i,e,n,s,o,u,d,y)}function Jp(i){return new Vf(i)}function Y0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function E2(i){return Qe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function b2(i){return i.collectionGroup!==null}function nc(i){const e=at(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let y=new Un(er.comparator);return d.filters.forEach((_=>{_.getFlattenedFilters().forEach((b=>{b.isInequality()&&(y=y.add(b.field))}))})),y})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new vf(u,s))})),n.has(er.keyField().canonicalString())||e.Ie.push(new vf(er.keyField(),s))}return e.Ie}function vs(i){const e=at(i);return e.Ee||(e.Ee=T2(e,nc(i))),e.Ee}function T2(i,e){if(i.limitType==="F")return G0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new vf(o.field,u)}));const n=i.endAt?new yf(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new yf(i.startAt.position,i.startAt.inclusive):null;return G0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function pp(i,e,n){return new Vf(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Pf(i,e){return Xp(vs(i),vs(e))&&i.limitType===e.limitType}function Jb(i){return`${$p(vs(i))}|lt:${i.limitType}`}function Pl(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>$b(o))).join(", ")}]`),Mf(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>$l(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>$l(o))).join(",")),`Target(${s})`})(vs(i))}; limitType=${i.limitType})`}function Lf(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Qe.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of nc(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(d,y,_){const b=F0(d,y,_);return d.inclusive?b<=0:b<0})(s.startAt,nc(s),o)||s.endAt&&!(function(d,y,_){const b=F0(d,y,_);return d.inclusive?b>=0:b>0})(s.endAt,nc(s),o))})(i,e)}function S2(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Zb(i){return(e,n)=>{let s=!1;for(const o of nc(i)){const u=A2(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function A2(i,e,n){const s=i.field.isKeyField()?Qe.comparator(e.key,n.key):(function(u,d,y){const _=d.data.field(u),b=y.data.field(u);return _!==null&&b!==null?Ql(_,b):Je(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Je(19790,{direction:i.dir})}}class Wo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Zo(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return Pb(this.inner)}size(){return this.innerSize}}const w2=new un(Qe.comparator);function oa(){return w2}const Wb=new un(Qe.comparator);function $u(...i){let e=Wb;for(const n of i)e=e.insert(n.key,n);return e}function eT(i){let e=Wb;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Ho(){return rc()}function tT(){return rc()}function rc(){return new Wo((i=>i.toString()),((i,e)=>i.isEqual(e)))}const R2=new un(Qe.comparator),C2=new Un(Qe.comparator);function At(...i){let e=C2;for(const n of i)e=e.add(n);return e}const I2=new Un(St);function O2(){return I2}function Zp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mf(e)?"-0":e}}function nT(i){return{integerValue:""+i}}function D2(i,e){return e2(e)?nT(e):Zp(i,e)}class Uf{constructor(){this._=void 0}}function x2(i,e,n){return i instanceof _f?(function(o,u){const d={fields:{[zb]:{stringValue:Ub},[Bb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Yp(u)&&(u=kf(u)),u&&(d.fields[jb]=u),{mapValue:d}})(n,e):i instanceof gc?iT(i,e):i instanceof yc?sT(i,e):(function(o,u){const d=rT(o,u),y=Q0(d)+Q0(o.Ae);return fp(d)&&fp(o.Ae)?nT(y):Zp(o.serializer,y)})(i,e)}function N2(i,e,n){return i instanceof gc?iT(i,e):i instanceof yc?sT(i,e):n}function rT(i,e){return i instanceof Ef?(function(s){return fp(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class _f extends Uf{}class gc extends Uf{constructor(e){super(),this.elements=e}}function iT(i,e){const n=aT(e);for(const s of i.elements)n.some((o=>Ts(o,s)))||n.push(s);return{arrayValue:{values:n}}}class yc extends Uf{constructor(e){super(),this.elements=e}}function sT(i,e){let n=aT(e);for(const s of i.elements)n=n.filter((o=>!Ts(o,s)));return{arrayValue:{values:n}}}class Ef extends Uf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Q0(i){return Tn(i.integerValue||i.doubleValue)}function aT(i){return Qp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function M2(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof gc&&o instanceof gc||s instanceof yc&&o instanceof yc?Yl(s.elements,o.elements,Ts):s instanceof Ef&&o instanceof Ef?Ts(s.Ae,o.Ae):s instanceof _f&&o instanceof _f})(i.transform,e.transform)}class k2{constructor(e,n){this.version=e,this.transformResults=n}}class ra{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ra}static exists(e){return new ra(void 0,e)}static updateTime(e){return new ra(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ef(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class zf{}function oT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new uT(i.key,ra.none()):new Rc(i.key,i.data,ra.none());{const n=i.data,s=Mi.empty();let o=new Un(er.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new el(i.key,s,new Ji(o.toArray()),ra.none())}}function V2(i,e,n){i instanceof Rc?(function(o,u,d){const y=o.value.clone(),_=X0(o.fieldTransforms,u,d.transformResults);y.setAll(_),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(i,e,n):i instanceof el?(function(o,u,d){if(!ef(o.precondition,u))return void u.convertToUnknownDocument(d.version);const y=X0(o.fieldTransforms,u,d.transformResults),_=u.data;_.setAll(lT(o)),_.setAll(y),u.convertToFoundDocument(d.version,_).setHasCommittedMutations()})(i,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function ic(i,e,n,s){return i instanceof Rc?(function(u,d,y,_){if(!ef(u.precondition,d))return y;const b=u.value.clone(),C=J0(u.fieldTransforms,_,d);return b.setAll(C),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),null})(i,e,n,s):i instanceof el?(function(u,d,y,_){if(!ef(u.precondition,d))return y;const b=J0(u.fieldTransforms,_,d),C=d.data;return C.setAll(lT(u)),C.setAll(b),d.convertToFoundDocument(d.version,C).setHasLocalMutations(),y===null?null:y.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((O=>O.field)))})(i,e,n,s):(function(u,d,y){return ef(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):y})(i,e,n)}function P2(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=rT(s.transform,o||null);u!=null&&(n===null&&(n=Mi.empty()),n.set(s.field,u))}return n||null}function $0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Yl(s,o,((u,d)=>M2(u,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Rc extends zf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class el extends zf{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function lT(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function X0(i,e,n){const s=new Map;Vt(i.length===n.length,32656,{Ve:n.length,de:i.length});for(let o=0;o<n.length;o++){const u=i[o],d=u.transform,y=e.data.field(u.field);s.set(u.field,N2(d,y,n[o]))}return s}function J0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,d=n.data.field(o.field);s.set(o.field,x2(u,d,e))}return s}class uT extends zf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class L2 extends zf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class U2{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&V2(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ic(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ic(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=tT();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let y=this.applyToLocalView(d,u.mutatedFields);y=n.has(o.key)?null:y;const _=oT(d,y);_!==null&&s.set(o.key,_),d.isValidDocument()||d.convertToNoDocument(it.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),At())}isEqual(e){return this.batchId===e.batchId&&Yl(this.mutations,e.mutations,((n,s)=>$0(n,s)))&&Yl(this.baseMutations,e.baseMutations,((n,s)=>$0(n,s)))}}class Wp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Vt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return R2})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new Wp(e,n,s,o)}}class z2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class j2{constructor(e,n){this.count=e,this.unchangedNames=n}}var xn,Ot;function B2(i){switch(i){case ve.OK:return Je(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return Je(15467,{code:i})}}function cT(i){if(i===void 0)return aa("GRPC error has no .code"),ve.UNKNOWN;switch(i){case xn.OK:return ve.OK;case xn.CANCELLED:return ve.CANCELLED;case xn.UNKNOWN:return ve.UNKNOWN;case xn.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case xn.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case xn.INTERNAL:return ve.INTERNAL;case xn.UNAVAILABLE:return ve.UNAVAILABLE;case xn.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case xn.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case xn.NOT_FOUND:return ve.NOT_FOUND;case xn.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case xn.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case xn.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case xn.ABORTED:return ve.ABORTED;case xn.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case xn.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case xn.DATA_LOSS:return ve.DATA_LOSS;default:return Je(39323,{code:i})}}(Ot=xn||(xn={}))[Ot.OK=0]="OK",Ot[Ot.CANCELLED=1]="CANCELLED",Ot[Ot.UNKNOWN=2]="UNKNOWN",Ot[Ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ot[Ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ot[Ot.NOT_FOUND=5]="NOT_FOUND",Ot[Ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ot[Ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ot[Ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ot[Ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ot[Ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ot[Ot.ABORTED=10]="ABORTED",Ot[Ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ot[Ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ot[Ot.INTERNAL=13]="INTERNAL",Ot[Ot.UNAVAILABLE=14]="UNAVAILABLE",Ot[Ot.DATA_LOSS=15]="DATA_LOSS";function q2(){return new TextEncoder}const H2=new oo([4294967295,4294967295],0);function Z0(i){const e=q2().encode(i),n=new Rb;return n.update(e),new Uint8Array(n.digest())}function W0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new oo([n,s],0),new oo([o,u],0)]}class eg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Xu(`Invalid padding: ${n}`);if(s<0)throw new Xu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Xu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Xu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=oo.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(oo.fromNumber(s)));return o.compare(H2)===1&&(o=new oo([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Z0(e),[s,o]=W0(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new eg(u,o,n);return s.forEach((y=>d.insert(y))),d}insert(e){if(this.ge===0)return;const n=Z0(e),[s,o]=W0(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);this.be(d)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Xu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class jf{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Cc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new jf(it.min(),o,new un(St),oa(),At())}}class Cc{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Cc(s,n,At(),At(),At())}}class tf{constructor(e,n,s,o){this.Se=e,this.removedTargetIds=n,this.key=s,this.De=o}}class hT{constructor(e,n){this.targetId=e,this.Ce=n}}class fT{constructor(e,n,s=tr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class eE{constructor(){this.ve=0,this.Fe=tE(),this.Me=tr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=At(),n=At(),s=At();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Je(38017,{changeType:u})}})),new Cc(this.Me,this.xe,e,n,s)}Ke(){this.Oe=!1,this.Fe=tE()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Vt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class F2{constructor(e){this.Ge=e,this.ze=new Map,this.je=oa(),this.He=Bh(),this.Je=Bh(),this.Ze=new un(St)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Je(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(mp(u))if(s===0){const d=new Qe(u.path);this.et(n,d,cr.newNoDocument(d,it.min()))}else Vt(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const y=this.ut(e),_=y?this.ct(y,e,d):1;if(_!==0){this.it(n);const b=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,b)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,y;try{d=ho(s).toUint8Array()}catch(_){if(_ instanceof Lb)return Gl("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{y=new eg(d,o,u)}catch(_){return Gl(_ instanceof Xu?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return y.ge===0?null:y}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const d=this.Ge.ht(),y=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(y)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const y=this.ot(d);if(y){if(u.current&&mp(y.target)){const _=new Qe(y.target.path);this.It(_).has(d)||this.Et(d,_)||this.et(d,_,cr.newNoDocument(_,e))}u.Be&&(n.set(d,u.ke()),u.Ke())}}));let s=At();this.Je.forEach(((u,d)=>{let y=!0;d.forEachWhile((_=>{const b=this.ot(_);return!b||b.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(s=s.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new jf(e,n,this.Ze,this.je,s);return this.je=oa(),this.He=Bh(),this.Je=Bh(),this.Ze=new un(St),o}Ye(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,s),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new eE,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Un(St),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Un(St),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Le("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new eE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Bh(){return new un(Qe.comparator)}function tE(){return new un(Qe.comparator)}const K2={asc:"ASCENDING",desc:"DESCENDING"},G2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y2={and:"AND",or:"OR"};class Q2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gp(i,e){return i.useProto3Json||Mf(e)?e:{value:e}}function bf(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function $2(i,e){return bf(i,e.toTimestamp())}function _s(i){return Vt(!!i,49232),it.fromTimestamp((function(n){const s=co(n);return new Xt(s.seconds,s.nanos)})(i))}function tg(i,e){return yp(i,e).canonicalString()}function yp(i,e){const n=(function(o){return new ln(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function mT(i){const e=ln.fromString(i);return Vt(_T(e),10190,{key:e.toString()}),e}function vp(i,e){return tg(i.databaseId,e.path)}function Xm(i,e){const n=mT(e);if(n.get(1)!==i.databaseId.projectId)throw new Fe(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Fe(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Qe(gT(n))}function pT(i,e){return tg(i.databaseId,e)}function X2(i){const e=mT(i);return e.length===4?ln.emptyPath():gT(e)}function _p(i){return new ln(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function gT(i){return Vt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function nE(i,e,n){return{name:vp(i,e),fields:n.value.mapValue.fields}}function J2(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:Je(39313,{state:b})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(b,C){return b.useProto3Json?(Vt(C===void 0||typeof C=="string",58123),tr.fromBase64String(C||"")):(Vt(C===void 0||C instanceof Buffer||C instanceof Uint8Array,16193),tr.fromUint8Array(C||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,y=d&&(function(b){const C=b.code===void 0?ve.UNKNOWN:cT(b.code);return new Fe(C,b.message||"")})(d);n=new fT(s,o,u,y||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Xm(i,s.document.name),u=_s(s.document.updateTime),d=s.document.createTime?_s(s.document.createTime):it.min(),y=new Mi({mapValue:{fields:s.document.fields}}),_=cr.newFoundDocument(o,u,d,y),b=s.targetIds||[],C=s.removedTargetIds||[];n=new tf(b,C,_.key,_)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Xm(i,s.document),u=s.readTime?_s(s.readTime):it.min(),d=cr.newNoDocument(o,u),y=s.removedTargetIds||[];n=new tf([],y,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Xm(i,s.document),u=s.removedTargetIds||[];n=new tf([],u,o,null)}else{if(!("filter"in e))return Je(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new j2(o,u),y=s.targetId;n=new hT(y,d)}}return n}function Z2(i,e){let n;if(e instanceof Rc)n={update:nE(i,e.key,e.value)};else if(e instanceof uT)n={delete:vp(i,e.key)};else if(e instanceof el)n={update:nE(i,e.key,e.data),updateMask:oO(e.fieldMask)};else{if(!(e instanceof L2))return Je(16599,{dt:e.type});n={verify:vp(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,d){const y=d.transform;if(y instanceof _f)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof gc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof yc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof Ef)return{fieldPath:d.field.canonicalString(),increment:y.Ae};throw Je(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:$2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Je(27497)})(i,e.precondition)),n}function W2(i,e){return i&&i.length>0?(Vt(e!==void 0,14353),i.map((n=>(function(o,u){let d=o.updateTime?_s(o.updateTime):_s(u);return d.isEqual(it.min())&&(d=_s(u)),new k2(d,o.transformResults||[])})(n,e)))):[]}function eO(i,e){return{documents:[pT(i,e.path)]}}function tO(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=pT(i,o);const u=(function(b){if(b.length!==0)return vT(Ss.create(b,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(b){if(b.length!==0)return b.map((C=>(function(x){return{field:Ll(x.field),direction:iO(x.dir)}})(C)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const y=gp(i,e.limit);return y!==null&&(n.structuredQuery.limit=y),e.startAt&&(n.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(e.endAt)),{ft:n,parent:o}}function nO(i){let e=X2(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Vt(s===1,65062);const C=n.from[0];C.allDescendants?o=C.collectionId:e=e.child(C.collectionId)}let u=[];n.where&&(u=(function(O){const x=yT(O);return x instanceof Ss&&Yb(x)?x.getFilters():[x]})(n.where));let d=[];n.orderBy&&(d=(function(O){return O.map((x=>(function(fe){return new vf(Ul(fe.field),(function(Ce){switch(Ce){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(fe.direction))})(x)))})(n.orderBy));let y=null;n.limit&&(y=(function(O){let x;return x=typeof O=="object"?O.value:O,Mf(x)?null:x})(n.limit));let _=null;n.startAt&&(_=(function(O){const x=!!O.before,Z=O.values||[];return new yf(Z,x)})(n.startAt));let b=null;return n.endAt&&(b=(function(O){const x=!O.before,Z=O.values||[];return new yf(Z,x)})(n.endAt)),_2(e,o,d,u,y,"F",_,b)}function rO(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Je(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yT(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ul(n.unaryFilter.field);return Ln.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Ul(n.unaryFilter.field);return Ln.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ul(n.unaryFilter.field);return Ln.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ul(n.unaryFilter.field);return Ln.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Je(61313);default:return Je(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Ln.create(Ul(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Je(58110);default:return Je(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Ss.create(n.compositeFilter.filters.map((s=>yT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Je(1026)}})(n.compositeFilter.op))})(i):Je(30097,{filter:i})}function iO(i){return K2[i]}function sO(i){return G2[i]}function aO(i){return Y2[i]}function Ll(i){return{fieldPath:i.canonicalString()}}function Ul(i){return er.fromServerFormat(i.fieldPath)}function vT(i){return i instanceof Ln?(function(n){if(n.op==="=="){if(H0(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NAN"}};if(q0(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(H0(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NOT_NAN"}};if(q0(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ll(n.field),op:sO(n.op),value:n.value}}})(i):i instanceof Ss?(function(n){const s=n.getFilters().map((o=>vT(o)));return s.length===1?s[0]:{compositeFilter:{op:aO(n.op),filters:s}}})(i):Je(54877,{filter:i})}function oO(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function _T(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function ET(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}class no{constructor(e,n,s,o,u=it.min(),d=it.min(),y=tr.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=y,this.expectedCount=_}withSequenceNumber(e){return new no(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class lO{constructor(e){this.yt=e}}function uO(i){const e=nO({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?pp(e,e.limit,"L"):e}class cO{constructor(){this.Sn=new hO}addToCollectionParentIndex(e,n){return this.Sn.add(n),ye.resolve()}getCollectionParents(e,n){return ye.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return ye.resolve()}deleteFieldIndex(e,n){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,n){return ye.resolve()}getDocumentsMatchingTarget(e,n){return ye.resolve(null)}getIndexType(e,n){return ye.resolve(0)}getFieldIndexes(e,n){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,n){return ye.resolve(uo.min())}getMinOffsetFromCollectionGroup(e,n){return ye.resolve(uo.min())}updateCollectionGroup(e,n,s){return ye.resolve()}updateIndexEntries(e,n){return ye.resolve()}}class hO{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Un(ln.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Un(ln.comparator)).toArray()}}const rE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bT=41943040;class qr{static withCacheSize(e){return new qr(e,qr.DEFAULT_COLLECTION_PERCENTILE,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}qr.DEFAULT_COLLECTION_PERCENTILE=10,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qr.DEFAULT=new qr(bT,qr.DEFAULT_COLLECTION_PERCENTILE,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qr.DISABLED=new qr(-1,0,0);class Xl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Xl(0)}static ar(){return new Xl(-1)}}const iE="LruGarbageCollector",fO=1048576;function sE([i,e],[n,s]){const o=St(i,n);return o===0?St(e,s):o}class dO{constructor(e){this.Pr=e,this.buffer=new Un(sE),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();sE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class mO{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Le(iE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){iu(n)?Le(iE,"Ignoring IndexedDB error during garbage collection: ",n):await ru(n)}await this.Ar(3e5)}))}}class pO{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ye.resolve(Nf.ce);const s=new dO(n);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(rE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rE):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let s,o,u,d,y,_,b;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((O=>(O>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),o=this.params.maximumSequenceNumbersToCollect):o=O,d=Date.now(),this.nthSequenceNumber(e,o)))).next((O=>(s=O,y=Date.now(),this.removeTargets(e,s,n)))).next((O=>(u=O,_=Date.now(),this.removeOrphanedDocuments(e,s)))).next((O=>(b=Date.now(),Vl()<=Tt.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-C}ms
	Determined least recently used ${o} in `+(y-d)+`ms
	Removed ${u} targets in `+(_-y)+`ms
	Removed ${O} documents in `+(b-_)+`ms
Total Duration: ${b-C}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:O}))))}}function gO(i,e){return new pO(i,e)}class yO{constructor(){this.changes=new Wo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ye.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class _O{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&ic(s.mutation,o,Ji.empty(),Xt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,At()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=At()){const o=Ho();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let d=$u();return u.forEach(((y,_)=>{d=d.insert(y,_.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=Ho();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,At())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,y)=>{n.set(d,y)}))}))}computeViews(e,n,s,o){let u=oa();const d=rc(),y=(function(){return rc()})();return n.forEach(((_,b)=>{const C=s.get(b.key);o.has(b.key)&&(C===void 0||C.mutation instanceof el)?u=u.insert(b.key,b):C!==void 0?(d.set(b.key,C.mutation.getFieldMask()),ic(C.mutation,b,C.mutation.getFieldMask(),Xt.now())):d.set(b.key,Ji.empty())})),this.recalculateAndSaveOverlays(e,u).next((_=>(_.forEach(((b,C)=>d.set(b,C))),n.forEach(((b,C)=>y.set(b,new vO(C,d.get(b)??null)))),y)))}recalculateAndSaveOverlays(e,n){const s=rc();let o=new un(((d,y)=>d-y)),u=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const y of d)y.keys().forEach((_=>{const b=n.get(_);if(b===null)return;let C=s.get(_)||Ji.empty();C=y.applyToLocalView(b,C),s.set(_,C);const O=(o.get(y.batchId)||At()).add(_);o=o.insert(y.batchId,O)}))})).next((()=>{const d=[],y=o.getReverseIterator();for(;y.hasNext();){const _=y.getNext(),b=_.key,C=_.value,O=tT();C.forEach((x=>{if(!u.has(x)){const Z=oT(n.get(x),s.get(x));Z!==null&&O.set(x,Z),u=u.add(x)}})),d.push(this.documentOverlayCache.saveOverlays(e,b,O))}return ye.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return E2(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):b2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ye.resolve(Ho());let y=fc,_=u;return d.next((b=>ye.forEach(b,((C,O)=>(y<O.largestBatchId&&(y=O.largestBatchId),u.get(C)?ye.resolve():this.remoteDocumentCache.getEntry(e,C).next((x=>{_=_.insert(C,x)}))))).next((()=>this.populateOverlays(e,b,u))).next((()=>this.computeViews(e,_,b,At()))).next((C=>({batchId:y,changes:eT(C)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Qe(n)).next((s=>{let o=$u();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=$u();return this.indexManager.getCollectionParents(e,u).next((y=>ye.forEach(y,(_=>{const b=(function(O,x){return new Vf(x,null,O.explicitOrderBy.slice(),O.filters.slice(),O.limit,O.limitType,O.startAt,O.endAt)})(n,_.child(u));return this.getDocumentsMatchingCollectionQuery(e,b,s,o).next((C=>{C.forEach(((O,x)=>{d=d.insert(O,x)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((d=>{u.forEach(((_,b)=>{const C=b.getKey();d.get(C)===null&&(d=d.insert(C,cr.newInvalidDocument(C)))}));let y=$u();return d.forEach(((_,b)=>{const C=u.get(_);C!==void 0&&ic(C.mutation,b,Ji.empty(),Xt.now()),Lf(n,b)&&(y=y.insert(_,b))})),y}))}}class EO{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return ye.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:_s(o.createTime)}})(n)),ye.resolve()}getNamedQuery(e,n){return ye.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:uO(o.bundledQuery),readTime:_s(o.readTime)}})(n)),ye.resolve()}}class bO{constructor(){this.overlays=new un(Qe.comparator),this.Lr=new Map}getOverlay(e,n){return ye.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ho();return ye.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.bt(e,n,u)})),ye.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(s)),ye.resolve()}getOverlaysForCollection(e,n,s){const o=Ho(),u=n.length+1,d=new Qe(n.child("")),y=this.overlays.getIteratorFrom(d);for(;y.hasNext();){const _=y.getNext().value,b=_.getKey();if(!n.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>s&&o.set(_.getKey(),_)}return ye.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new un(((b,C)=>b-C));const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===n&&b.largestBatchId>s){let C=u.get(b.largestBatchId);C===null&&(C=Ho(),u=u.insert(b.largestBatchId,C)),C.set(b.getKey(),b)}}const y=Ho(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((b,C)=>y.set(b,C))),!(y.size()>=o)););return ye.resolve(y)}bt(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new z2(n,s));let u=this.Lr.get(n);u===void 0&&(u=At(),this.Lr.set(n,u)),this.Lr.set(n,u.add(s.key))}}class TO{constructor(){this.sessionToken=tr.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ye.resolve()}}class ng{constructor(){this.kr=new Un(Kn.Kr),this.qr=new Un(Kn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const s=new Kn(e,n);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Wr(new Kn(e,n))}Qr(e,n){e.forEach((s=>this.removeReference(s,n)))}Gr(e){const n=new Qe(new ln([])),s=new Kn(n,e),o=new Kn(n,e+1),u=[];return this.qr.forEachInRange([s,o],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Qe(new ln([])),s=new Kn(n,e),o=new Kn(n,e+1);let u=At();return this.qr.forEachInRange([s,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new Kn(e,0),s=this.kr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Kn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Qe.comparator(e.key,n.key)||St(e.Hr,n.Hr)}static Ur(e,n){return St(e.Hr,n.Hr)||Qe.comparator(e.key,n.key)}}class SO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Un(Kn.Kr)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new U2(u,n,s,o);this.mutationQueue.push(d);for(const y of o)this.Jr=this.Jr.add(new Kn(y.key,u)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return ye.resolve(d)}lookupMutationBatch(e,n){return ye.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Xr(s),u=o<0?0:o;return ye.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?Gp:this.Yn-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Kn(n,0),o=new Kn(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([s,o],(d=>{const y=this.Zr(d.Hr);u.push(y)})),ye.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Un(St);return n.forEach((o=>{const u=new Kn(o,0),d=new Kn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(y=>{s=s.add(y.Hr)}))})),ye.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Qe.isDocumentKey(u)||(u=u.child(""));const d=new Kn(new Qe(u),0);let y=new Un(St);return this.Jr.forEachWhile((_=>{const b=_.key.path;return!!s.isPrefixOf(b)&&(b.length===o&&(y=y.add(_.Hr)),!0)}),d),ye.resolve(this.Yr(y))}Yr(e){const n=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Vt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return ye.forEach(n.mutations,(o=>{const u=new Kn(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,n){const s=new Kn(n,0),o=this.Jr.firstAfterOrEqual(s);return ye.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class AO{constructor(e){this.ti=e,this.docs=(function(){return new un(Qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.ti(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ye.resolve(s?s.document.mutableCopy():cr.newInvalidDocument(n))}getEntries(e,n){let s=oa();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():cr.newInvalidDocument(o))})),ye.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=oa();const d=n.path,y=new Qe(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(y);for(;_.hasNext();){const{key:b,value:{document:C}}=_.getNext();if(!d.isPrefixOf(b.path))break;b.path.length>d.length+1||XI($I(C),s)<=0||(o.has(C.key)||Lf(n,C))&&(u=u.insert(C.key,C.mutableCopy()))}return ye.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Je(9500)}ni(e,n){return ye.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new wO(this)}getSize(e){return ye.resolve(this.size)}}class wO extends yO{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),ye.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class RO{constructor(e){this.persistence=e,this.ri=new Wo((n=>$p(n)),Xp),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.ii=0,this.si=new ng,this.targetCount=0,this.oi=Xl._r()}forEachTarget(e,n){return this.ri.forEach(((s,o)=>n(o))),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ii&&(this.ii=n),ye.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Xl(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,ye.resolve()}updateTargetData(e,n){return this.lr(n),ye.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.ri.forEach(((d,y)=>{y.sequenceNumber<=n&&s.get(y.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,y.targetId)),o++)})),ye.waitFor(u).next((()=>o))}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,n){const s=this.ri.get(n)||null;return ye.resolve(s)}addMatchingKeys(e,n,s){return this.si.$r(n,s),ye.resolve()}removeMatchingKeys(e,n,s){this.si.Qr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),ye.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),ye.resolve()}getMatchingKeysForTargetId(e,n){const s=this.si.jr(n);return ye.resolve(s)}containsKey(e,n){return ye.resolve(this.si.containsKey(n))}}class TT{constructor(e,n){this._i={},this.overlays={},this.ai=new Nf(0),this.ui=!1,this.ui=!0,this.ci=new TO,this.referenceDelegate=e(this),this.li=new RO(this),this.indexManager=new cO,this.remoteDocumentCache=(function(o){return new AO(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new lO(n),this.Pi=new EO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new bO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this._i[e.toKey()];return s||(s=new SO(n,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,s){Le("MemoryPersistence","Starting transaction:",e);const o=new CO(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return ye.or(Object.values(this._i).map((s=>()=>s.containsKey(e,n))))}}class CO extends ZI{constructor(e){super(),this.currentSequenceNumber=e}}class rg{constructor(e){this.persistence=e,this.Ri=new ng,this.Ai=null}static Vi(e){return new rg(e)}get di(){if(this.Ai)return this.Ai;throw Je(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.di.delete(s.toString()),ye.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.di.add(s.toString()),ye.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),ye.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.di,(s=>{const o=Qe.fromPath(s);return this.mi(e,o).next((u=>{u||n.removeEntry(o,it.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return ye.or([()=>ye.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Tf{constructor(e,n){this.persistence=e,this.fi=new Wo((s=>t2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=gO(this,n)}static Vi(e,n){return new Tf(e,n)}Ti(){}Ii(e){return ye.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}pr(e){let n=0;return this.mr(e,(s=>{n++})).next((()=>n))}mr(e,n){return ye.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((u=>u?ye.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(d=>this.wr(e,d,n).next((y=>{y||(s++,u.removeEntry(d,it.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),ye.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),ye.resolve()}removeReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),ye.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Zh(e.data.value)),n}wr(e,n,s){return ye.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return ye.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ig{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Ts=s,this.Is=o}static Es(e,n){let s=At(),o=At();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new ig(e,n.fromCache,s,o)}}class IO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class OO{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return pw()?8:WI(fr())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.gs(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,n,o,s).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new IO;return this.ys(e,n,d).next((y=>{if(u.result=y,this.As)return this.ws(e,n,d,y.size)}))})).next((()=>u.result))}ws(e,n,s,o){return s.documentReadCount<this.Vs?(Vl()<=Tt.DEBUG&&Le("QueryEngine","SDK will not create cache indexes for query:",Pl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ye.resolve()):(Vl()<=Tt.DEBUG&&Le("QueryEngine","Query:",Pl(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(Vl()<=Tt.DEBUG&&Le("QueryEngine","The SDK decides to create cache indexes for query:",Pl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vs(n))):ye.resolve())}gs(e,n){if(Y0(n))return ye.resolve(null);let s=vs(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=pp(n,null,"F"),s=vs(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const d=At(...u);return this.fs.getDocuments(e,d).next((y=>this.indexManager.getMinOffset(e,s).next((_=>{const b=this.bs(n,y);return this.Ss(n,b,d,_.readTime)?this.gs(e,pp(n,null,"F")):this.Ds(e,b,n,_)}))))})))))}ps(e,n,s,o){return Y0(n)||o.isEqual(it.min())?ye.resolve(null):this.fs.getDocuments(e,s).next((u=>{const d=this.bs(n,u);return this.Ss(n,d,s,o)?ye.resolve(null):(Vl()<=Tt.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Pl(n)),this.Ds(e,d,n,QI(o,fc)).next((y=>y)))}))}bs(e,n){let s=new Un(Zb(e));return n.forEach(((o,u)=>{Lf(e,u)&&(s=s.add(u))})),s}Ss(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,s){return Vl()<=Tt.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",Pl(n)),this.fs.getDocumentsMatchingQuery(e,n,uo.min(),s)}Ds(e,n,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const sg="LocalStore",DO=3e8;class xO{constructor(e,n,s,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new un(St),this.Fs=new Wo((u=>$p(u)),Xp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _O(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function NO(i,e,n,s){return new xO(i,e,n,s)}async function ST(i,e){const n=at(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const d=[],y=[];let _=At();for(const b of o){d.push(b.batchId);for(const C of b.mutations)_=_.add(C.key)}for(const b of u){y.push(b.batchId);for(const C of b.mutations)_=_.add(C.key)}return n.localDocuments.getDocuments(s,_).next((b=>({Ns:b,removedBatchIds:d,addedBatchIds:y})))}))}))}function MO(i,e){const n=at(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(y,_,b,C){const O=b.batch,x=O.keys();let Z=ye.resolve();return x.forEach((fe=>{Z=Z.next((()=>C.getEntry(_,fe))).next((_e=>{const Ce=b.docVersions.get(fe);Vt(Ce!==null,48541),_e.version.compareTo(Ce)<0&&(O.applyToRemoteDocument(_e,b),_e.isValidDocument()&&(_e.setReadTime(b.commitVersion),C.addEntry(_e)))}))})),Z.next((()=>y.mutationQueue.removeMutationBatch(_,O)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(y){let _=At();for(let b=0;b<y.mutationResults.length;++b)y.mutationResults[b].transformResults.length>0&&(_=_.add(y.batch.mutations[b].key));return _})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function AT(i){const e=at(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function kO(i,e){const n=at(i),s=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const y=[];e.targetChanges.forEach(((C,O)=>{const x=o.get(O);if(!x)return;y.push(n.li.removeMatchingKeys(u,C.removedDocuments,O).next((()=>n.li.addMatchingKeys(u,C.addedDocuments,O))));let Z=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(O)!==null?Z=Z.withResumeToken(tr.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):C.resumeToken.approximateByteSize()>0&&(Z=Z.withResumeToken(C.resumeToken,s)),o=o.insert(O,Z),(function(_e,Ce,He){return _e.resumeToken.approximateByteSize()===0||Ce.snapshotVersion.toMicroseconds()-_e.snapshotVersion.toMicroseconds()>=DO?!0:He.addedDocuments.size+He.modifiedDocuments.size+He.removedDocuments.size>0})(x,Z,C)&&y.push(n.li.updateTargetData(u,Z))}));let _=oa(),b=At();if(e.documentUpdates.forEach((C=>{e.resolvedLimboDocuments.has(C)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(u,C))})),y.push(VO(u,d,e.documentUpdates).next((C=>{_=C.Bs,b=C.Ls}))),!s.isEqual(it.min())){const C=n.li.getLastRemoteSnapshotVersion(u).next((O=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,s)));y.push(C)}return ye.waitFor(y).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,_,b))).next((()=>_))})).then((u=>(n.vs=o,u)))}function VO(i,e,n){let s=At(),o=At();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let d=oa();return n.forEach(((y,_)=>{const b=u.get(y);_.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(y)),_.isNoDocument()&&_.version.isEqual(it.min())?(e.removeEntry(y,_.readTime),d=d.insert(y,_)):!b.isValidDocument()||_.version.compareTo(b.version)>0||_.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(_),d=d.insert(y,_)):Le(sg,"Ignoring outdated watch update for ",y,". Current version:",b.version," Watch version:",_.version)})),{Bs:d,Ls:o}}))}function PO(i,e){const n=at(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Gp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function LO(i,e){const n=at(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.li.getTargetData(s,e).next((u=>u?(o=u,ye.resolve(o)):n.li.allocateTargetId(s).next((d=>(o=new no(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(s.targetId,s),n.Fs.set(e,s.targetId)),s}))}async function Ep(i,e,n){const s=at(i),o=s.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!iu(d))throw d;Le(sg,`Failed to update sequence numbers for target ${e}: ${d}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function aE(i,e,n){const s=at(i);let o=it.min(),u=At();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(_,b,C){const O=at(_),x=O.Fs.get(C);return x!==void 0?ye.resolve(O.vs.get(x)):O.li.getTargetData(b,C)})(s,d,vs(e)).next((y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(d,y.targetId).next((_=>{u=_}))})).next((()=>s.Cs.getDocumentsMatchingQuery(d,e,n?o:it.min(),n?u:At()))).next((y=>(UO(s,S2(e),y),{documents:y,ks:u})))))}function UO(i,e,n){let s=i.Ms.get(e)||it.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Ms.set(e,s)}class oE{constructor(){this.activeTargetIds=O2()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zO{constructor(){this.vo=new oE,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,s){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new oE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jO{Mo(e){}shutdown(){}}const lE="ConnectivityMonitor";class uE{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Le(lE,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Le(lE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let qh=null;function bp(){return qh===null?qh=(function(){return 268435456+Math.round(2147483648*Math.random())})():qh++,"0x"+qh.toString(16)}const Jm="RestConnection",BO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class qO{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===pf?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,n,s,o,u){const d=bp(),y=this.Qo(e,n.toUriEncodedString());Le(Jm,`Sending RPC '${e}' ${d}:`,y,s);const _={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(_,o,u);const{host:b}=new URL(y),C=Wl(b);return this.zo(e,y,_,s,C).then((O=>(Le(Jm,`Received RPC '${e}' ${d}: `,O),O)),(O=>{throw Gl(Jm,`RPC '${e}' ${d} failed with error: `,O,"url: ",y,"request:",s),O}))}jo(e,n,s,o,u,d){return this.Wo(e,n,s,o,u)}Go(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+nu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const s=BO[e];let o=`${this.qo}/v1/${n}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class HO{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const lr="WebChannelConnection",Yu=(i,e,n)=>{i.listen(e,(s=>{try{n(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class ql extends qO{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ql.c_){const e=Db();Yu(e,Ob.STAT_EVENT,(n=>{n.stat===up.PROXY?Le(lr,"STAT_EVENT: detected buffering proxy"):n.stat===up.NOPROXY&&Le(lr,"STAT_EVENT: detected no buffering proxy")})),ql.c_=!0}}zo(e,n,s,o,u){const d=bp();return new Promise(((y,_)=>{const b=new Cb;b.setWithCredentials(!0),b.listenOnce(Ib.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case Jh.NO_ERROR:const O=b.getResponseJson();Le(lr,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(O)),y(O);break;case Jh.TIMEOUT:Le(lr,`RPC '${e}' ${d} timed out`),_(new Fe(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Jh.HTTP_ERROR:const x=b.getStatus();if(Le(lr,`RPC '${e}' ${d} failed with status:`,x,"response text:",b.getResponseText()),x>0){let Z=b.getResponseJson();Array.isArray(Z)&&(Z=Z[0]);const fe=Z?.error;if(fe&&fe.status&&fe.message){const _e=(function(He){const Ye=He.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(Ye)>=0?Ye:ve.UNKNOWN})(fe.status);_(new Fe(_e,fe.message))}else _(new Fe(ve.UNKNOWN,"Server responded with status "+b.getStatus()))}else _(new Fe(ve.UNAVAILABLE,"Connection failed."));break;default:Je(9055,{l_:e,streamId:d,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{Le(lr,`RPC '${e}' ${d} completed.`)}}));const C=JSON.stringify(o);Le(lr,`RPC '${e}' ${d} sending request:`,o),b.send(n,"POST",C,s,15)}))}T_(e,n,s){const o=bp(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Go(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const b=u.join("");Le(lr,`Creating RPC '${e}' stream ${o}: ${b}`,y);const C=d.createWebChannel(b,y);this.I_(C);let O=!1,x=!1;const Z=new HO({Ho:fe=>{x?Le(lr,`Not sending because RPC '${e}' stream ${o} is closed:`,fe):(O||(Le(lr,`Opening RPC '${e}' stream ${o} transport.`),C.open(),O=!0),Le(lr,`RPC '${e}' stream ${o} sending:`,fe),C.send(fe))},Jo:()=>C.close()});return Yu(C,Qu.EventType.OPEN,(()=>{x||(Le(lr,`RPC '${e}' stream ${o} transport opened.`),Z.i_())})),Yu(C,Qu.EventType.CLOSE,(()=>{x||(x=!0,Le(lr,`RPC '${e}' stream ${o} transport closed`),Z.o_(),this.E_(C))})),Yu(C,Qu.EventType.ERROR,(fe=>{x||(x=!0,Gl(lr,`RPC '${e}' stream ${o} transport errored. Name:`,fe.name,"Message:",fe.message),Z.o_(new Fe(ve.UNAVAILABLE,"The operation could not be completed")))})),Yu(C,Qu.EventType.MESSAGE,(fe=>{if(!x){const _e=fe.data[0];Vt(!!_e,16349);const Ce=_e,He=Ce?.error||Ce[0]?.error;if(He){Le(lr,`RPC '${e}' stream ${o} received error:`,He);const Ye=He.status;let Ue=(function(nt){const V=xn[nt];if(V!==void 0)return cT(V)})(Ye),ct=He.message;Ue===void 0&&(Ue=ve.INTERNAL,ct="Unknown error status: "+Ye+" with message "+He.message),x=!0,Z.o_(new Fe(Ue,ct)),C.close()}else Le(lr,`RPC '${e}' stream ${o} received:`,_e),Z.__(_e)}})),ql.u_(),setTimeout((()=>{Z.s_()}),0),Z}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,s){super.Go(e,n,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return xb()}}function FO(i){return new ql(i)}function Zm(){return typeof document<"u"?document:null}function Bf(i){return new Q2(i,!0)}ql.c_=!1;class wT{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=s,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&Le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const cE="PersistentStream";class RT{constructor(e,n,s,o,u,d,y,_){this.Ci=e,this.b_=s,this.S_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=y,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(aa(n.toString()),aa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new Fe(ve.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Le(cE,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Le(cE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KO extends RT{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=J2(this.serializer,e),s=(function(u){if(!("targetChange"in u))return it.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?it.min():d.readTime?_s(d.readTime):it.min()})(e);return this.listener.J_(n,s)}Z_(e){const n={};n.database=_p(this.serializer),n.addTarget=(function(u,d){let y;const _=d.target;if(y=mp(_)?{documents:eO(u,_)}:{query:tO(u,_).ft},y.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){y.resumeToken=dT(u,d.resumeToken);const b=gp(u,d.expectedCount);b!==null&&(y.expectedCount=b)}else if(d.snapshotVersion.compareTo(it.min())>0){y.readTime=bf(u,d.snapshotVersion.toTimestamp());const b=gp(u,d.expectedCount);b!==null&&(y.expectedCount=b)}return y})(this.serializer,e);const s=rO(this.serializer,e);s&&(n.labels=s),this.K_(n)}X_(e){const n={};n.database=_p(this.serializer),n.removeTarget=e,this.K_(n)}}class GO extends RT{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=W2(e.writeResults,e.commitTime),s=_s(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=_p(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>Z2(this.serializer,s)))};this.K_(n)}}class YO{}class QO extends YO{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Fe(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,yp(n,s),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Fe(ve.UNKNOWN,u.toString())}))}jo(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,y])=>this.connection.jo(e,yp(n,s),o,d,y,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Fe(ve.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function $O(i,e,n,s){return new QO(i,e,n,s)}class XO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(aa(n),this.aa=!1):Le("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Jo="RemoteStore";class JO{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{s.enqueueAndForget((async()=>{tl(this)&&(Le(Jo,"Restarting streams for network reachability change."),await(async function(_){const b=at(_);b.Ea.add(4),await Ic(b),b.Va.set("Unknown"),b.Ea.delete(4),await qf(b)})(this))}))})),this.Va=new XO(s,o)}}async function qf(i){if(tl(i))for(const e of i.Ra)await e(!0)}async function Ic(i){for(const e of i.Ra)await e(!1)}function CT(i,e){const n=at(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ug(n)?lg(n):su(n).O_()&&og(n,e))}function ag(i,e){const n=at(i),s=su(n);n.Ia.delete(e),s.O_()&&IT(n,e),n.Ia.size===0&&(s.O_()?s.L_():tl(n)&&n.Va.set("Unknown"))}function og(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(it.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}su(i).Z_(e)}function IT(i,e){i.da.$e(e),su(i).X_(e)}function lg(i){i.da=new F2({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),su(i).start(),i.Va.ua()}function ug(i){return tl(i)&&!su(i).x_()&&i.Ia.size>0}function tl(i){return at(i).Ea.size===0}function OT(i){i.da=void 0}async function ZO(i){i.Va.set("Online")}async function WO(i){i.Ia.forEach(((e,n)=>{og(i,e)}))}async function eD(i,e){OT(i),ug(i)?(i.Va.ha(e),lg(i)):i.Va.set("Unknown")}async function tD(i,e,n){if(i.Va.set("Online"),e instanceof fT&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const y of u.targetIds)o.Ia.has(y)&&(await o.remoteSyncer.rejectListen(y,d),o.Ia.delete(y),o.da.removeTarget(y))})(i,e)}catch(s){Le(Jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Sf(i,s)}else if(e instanceof tf?i.da.Xe(e):e instanceof hT?i.da.st(e):i.da.tt(e),!n.isEqual(it.min()))try{const s=await AT(i.localStore);n.compareTo(s)>=0&&await(function(u,d){const y=u.da.Tt(d);return y.targetChanges.forEach(((_,b)=>{if(_.resumeToken.approximateByteSize()>0){const C=u.Ia.get(b);C&&u.Ia.set(b,C.withResumeToken(_.resumeToken,d))}})),y.targetMismatches.forEach(((_,b)=>{const C=u.Ia.get(_);if(!C)return;u.Ia.set(_,C.withResumeToken(tr.EMPTY_BYTE_STRING,C.snapshotVersion)),IT(u,_);const O=new no(C.target,_,b,C.sequenceNumber);og(u,O)})),u.remoteSyncer.applyRemoteEvent(y)})(i,n)}catch(s){Le(Jo,"Failed to raise snapshot:",s),await Sf(i,s)}}async function Sf(i,e,n){if(!iu(e))throw e;i.Ea.add(1),await Ic(i),i.Va.set("Offline"),n||(n=()=>AT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Le(Jo,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await qf(i)}))}function DT(i,e){return e().catch((n=>Sf(i,n,e)))}async function Hf(i){const e=at(i),n=mo(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Gp;for(;nD(e);)try{const o=await PO(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,rD(e,o)}catch(o){await Sf(e,o)}xT(e)&&NT(e)}function nD(i){return tl(i)&&i.Ta.length<10}function rD(i,e){i.Ta.push(e);const n=mo(i);n.O_()&&n.Y_&&n.ea(e.mutations)}function xT(i){return tl(i)&&!mo(i).x_()&&i.Ta.length>0}function NT(i){mo(i).start()}async function iD(i){mo(i).ra()}async function sD(i){const e=mo(i);for(const n of i.Ta)e.ea(n.mutations)}async function aD(i,e,n){const s=i.Ta.shift(),o=Wp.from(s,e,n);await DT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Hf(i)}async function oD(i,e){e&&mo(i).Y_&&await(async function(s,o){if((function(d){return B2(d)&&d!==ve.ABORTED})(o.code)){const u=s.Ta.shift();mo(s).B_(),await DT(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Hf(s)}})(i,e),xT(i)&&NT(i)}async function hE(i,e){const n=at(i);n.asyncQueue.verifyOperationInProgress(),Le(Jo,"RemoteStore received new credentials");const s=tl(n);n.Ea.add(3),await Ic(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await qf(n)}async function lD(i,e){const n=at(i);e?(n.Ea.delete(2),await qf(n)):e||(n.Ea.add(2),await Ic(n),n.Va.set("Unknown"))}function su(i){return i.ma||(i.ma=(function(n,s,o){const u=at(n);return u.sa(),new KO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Zo:ZO.bind(null,i),Yo:WO.bind(null,i),t_:eD.bind(null,i),J_:tD.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),ug(i)?lg(i):i.Va.set("Unknown")):(await i.ma.stop(),OT(i))}))),i.ma}function mo(i){return i.fa||(i.fa=(function(n,s,o){const u=at(n);return u.sa(),new GO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:iD.bind(null,i),t_:oD.bind(null,i),ta:sD.bind(null,i),na:aD.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await Hf(i)):(await i.fa.stop(),i.Ta.length>0&&(Le(Jo,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class cg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new lo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,y=new cg(e,n,d,o,u);return y.start(s),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Fe(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hg(i,e){if(aa("AsyncQueue",`${e}: ${i}`),iu(i))return new Fe(ve.UNAVAILABLE,`${e}: ${i}`);throw i}class Hl{static emptySet(e){return new Hl(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Qe.comparator(n.key,s.key):(n,s)=>Qe.comparator(n.key,s.key),this.keyedMap=$u(),this.sortedSet=new un(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Hl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Hl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class fE{constructor(){this.ga=new un(Qe.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Je(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Jl{constructor(e,n,s,o,u,d,y,_,b){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=y,this.excludesMetadataChanges=_,this.hasCachedResults=b}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach((y=>{d.push({type:0,doc:y})})),new Jl(e,n,Hl.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class uD{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class cD{constructor(){this.queries=dE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=at(n),u=o.queries;o.queries=dE(),u.forEach(((d,y)=>{for(const _ of y.ba)_.onError(s)}))})(this,new Fe(ve.ABORTED,"Firestore shutting down"))}}function dE(){return new Wo((i=>Jb(i)),Pf)}async function hD(i,e){const n=at(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(s=2):(u=new uD,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const y=hg(d,`Initialization of query '${Pl(e.query)}' failed`);return void e.onError(y)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&fg(n)}async function fD(i,e){const n=at(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function dD(i,e){const n=at(i);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const y of d.ba)y.Fa(o)&&(s=!0);d.wa=o}}s&&fg(n)}function mD(i,e,n){const s=at(i),o=s.queries.get(e);if(o)for(const u of o.ba)u.onError(n);s.queries.delete(e)}function fg(i){i.Ca.forEach((e=>{e.next()}))}var Tp,mE;(mE=Tp||(Tp={})).Ma="default",mE.Cache="cache";class pD{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Jl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tp.Cache}}class MT{constructor(e){this.key=e}}class kT{constructor(e){this.key=e}}class gD{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=At(),this.mutatedKeys=At(),this.eu=Zb(e),this.tu=new Hl(this.eu)}get nu(){return this.Za}ru(e,n){const s=n?n.iu:new fE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,y=!1;const _=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((C,O)=>{const x=o.get(C),Z=Lf(this.query,O)?O:null,fe=!!x&&this.mutatedKeys.has(x.key),_e=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let Ce=!1;x&&Z?x.data.isEqual(Z.data)?fe!==_e&&(s.track({type:3,doc:Z}),Ce=!0):this.su(x,Z)||(s.track({type:2,doc:Z}),Ce=!0,(_&&this.eu(Z,_)>0||b&&this.eu(Z,b)<0)&&(y=!0)):!x&&Z?(s.track({type:0,doc:Z}),Ce=!0):x&&!Z&&(s.track({type:1,doc:x}),Ce=!0,(_||b)&&(y=!0)),Ce&&(Z?(d=d.add(Z),u=_e?u.add(C):u.delete(C)):(d=d.delete(C),u=u.delete(C)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const C=this.query.limitType==="F"?d.last():d.first();d=d.delete(C.key),u=u.delete(C.key),s.track({type:1,doc:C})}return{tu:d,iu:s,Ss:y,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((C,O)=>(function(Z,fe){const _e=Ce=>{switch(Ce){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je(20277,{Vt:Ce})}};return _e(Z)-_e(fe)})(C.type,O.type)||this.eu(C.doc,O.doc))),this.ou(s),o=o??!1;const y=n&&!o?this._u():[],_=this.Ya.size===0&&this.current&&!o?1:0,b=_!==this.Xa;return this.Xa=_,d.length!==0||b?{snapshot:new Jl(this.query,e.tu,u,d,e.mutatedKeys,_===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new fE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=At(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const n=[];return e.forEach((s=>{this.Ya.has(s)||n.push(new kT(s))})),this.Ya.forEach((s=>{e.has(s)||n.push(new MT(s))})),n}cu(e){this.Za=e.ks,this.Ya=At();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Jl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const dg="SyncEngine";class yD{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class vD{constructor(e){this.key=e,this.hu=!1}}class _D{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Wo((y=>Jb(y)),Pf),this.Iu=new Map,this.Eu=new Set,this.Ru=new un(Qe.comparator),this.Au=new Map,this.Vu=new ng,this.du={},this.mu=new Map,this.fu=Xl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ED(i,e,n=!0){const s=jT(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await VT(s,e,n,!0),o}async function bD(i,e){const n=jT(i);await VT(n,e,!0,!1)}async function VT(i,e,n,s){const o=await LO(i.localStore,vs(e)),u=o.targetId,d=i.sharedClientState.addLocalQueryTarget(u,n);let y;return s&&(y=await TD(i,e,u,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&CT(i.remoteStore,o),y}async function TD(i,e,n,s,o){i.pu=(O,x,Z)=>(async function(_e,Ce,He,Ye){let Ue=Ce.view.ru(He);Ue.Ss&&(Ue=await aE(_e.localStore,Ce.query,!1).then((({documents:V})=>Ce.view.ru(V,Ue))));const ct=Ye&&Ye.targetChanges.get(Ce.targetId),ft=Ye&&Ye.targetMismatches.get(Ce.targetId)!=null,nt=Ce.view.applyChanges(Ue,_e.isPrimaryClient,ct,ft);return gE(_e,Ce.targetId,nt.au),nt.snapshot})(i,O,x,Z);const u=await aE(i.localStore,e,!0),d=new gD(e,u.ks),y=d.ru(u.documents),_=Cc.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),b=d.applyChanges(y,i.isPrimaryClient,_);gE(i,n,b.au);const C=new yD(e,n,d);return i.Tu.set(e,C),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),b.snapshot}async function SD(i,e,n){const s=at(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((d=>!Pf(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Ep(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&ag(s.remoteStore,o.targetId),Sp(s,o.targetId)})).catch(ru)):(Sp(s,o.targetId),await Ep(s.localStore,o.targetId,!0))}async function AD(i,e){const n=at(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ag(n.remoteStore,s.targetId))}async function wD(i,e,n){const s=ND(i);try{const o=await(function(d,y){const _=at(d),b=Xt.now(),C=y.reduce(((Z,fe)=>Z.add(fe.key)),At());let O,x;return _.persistence.runTransaction("Locally write mutations","readwrite",(Z=>{let fe=oa(),_e=At();return _.xs.getEntries(Z,C).next((Ce=>{fe=Ce,fe.forEach(((He,Ye)=>{Ye.isValidDocument()||(_e=_e.add(He))}))})).next((()=>_.localDocuments.getOverlayedDocuments(Z,fe))).next((Ce=>{O=Ce;const He=[];for(const Ye of y){const Ue=P2(Ye,O.get(Ye.key).overlayedDocument);Ue!=null&&He.push(new el(Ye.key,Ue,Fb(Ue.value.mapValue),ra.exists(!0)))}return _.mutationQueue.addMutationBatch(Z,b,He,y)})).next((Ce=>{x=Ce;const He=Ce.applyToLocalDocumentSet(O,_e);return _.documentOverlayCache.saveOverlays(Z,Ce.batchId,He)}))})).then((()=>({batchId:x.batchId,changes:eT(O)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,y,_){let b=d.du[d.currentUser.toKey()];b||(b=new un(St)),b=b.insert(y,_),d.du[d.currentUser.toKey()]=b})(s,o.batchId,n),await Oc(s,o.changes),await Hf(s.remoteStore)}catch(o){const u=hg(o,"Failed to persist write");n.reject(u)}}async function PT(i,e){const n=at(i);try{const s=await kO(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(Vt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Vt(d.hu,14607):o.removedDocuments.size>0&&(Vt(d.hu,42227),d.hu=!1))})),await Oc(n,s,e)}catch(s){await ru(s)}}function pE(i,e,n){const s=at(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,d)=>{const y=d.view.va(e);y.snapshot&&o.push(y.snapshot)})),(function(d,y){const _=at(d);_.onlineState=y;let b=!1;_.queries.forEach(((C,O)=>{for(const x of O.ba)x.va(y)&&(b=!0)})),b&&fg(_)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function RD(i,e,n){const s=at(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let d=new un(Qe.comparator);d=d.insert(u,cr.newNoDocument(u,it.min()));const y=At().add(u),_=new jf(it.min(),new Map,new un(St),d,y);await PT(s,_),s.Ru=s.Ru.remove(u),s.Au.delete(e),mg(s)}else await Ep(s.localStore,e,!1).then((()=>Sp(s,e,n))).catch(ru)}async function CD(i,e){const n=at(i),s=e.batch.batchId;try{const o=await MO(n.localStore,e);UT(n,s,null),LT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Oc(n,o)}catch(o){await ru(o)}}async function ID(i,e,n){const s=at(i);try{const o=await(function(d,y){const _=at(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let C;return _.mutationQueue.lookupMutationBatch(b,y).next((O=>(Vt(O!==null,37113),C=O.keys(),_.mutationQueue.removeMutationBatch(b,O)))).next((()=>_.mutationQueue.performConsistencyCheck(b))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(b,C,y))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,C))).next((()=>_.localDocuments.getDocuments(b,C)))}))})(s.localStore,e);UT(s,e,n),LT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Oc(s,o)}catch(o){await ru(o)}}function LT(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function UT(i,e,n){const s=at(i);let o=s.du[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function Sp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((s=>{i.Vu.containsKey(s)||zT(i,s)}))}function zT(i,e){i.Eu.delete(e.path.canonicalString());const n=i.Ru.get(e);n!==null&&(ag(i.remoteStore,n),i.Ru=i.Ru.remove(e),i.Au.delete(n),mg(i))}function gE(i,e,n){for(const s of n)s instanceof MT?(i.Vu.addReference(s.key,e),OD(i,s)):s instanceof kT?(Le(dg,"Document no longer in limbo: "+s.key),i.Vu.removeReference(s.key,e),i.Vu.containsKey(s.key)||zT(i,s.key)):Je(19791,{wu:s})}function OD(i,e){const n=e.key,s=n.path.canonicalString();i.Ru.get(n)||i.Eu.has(s)||(Le(dg,"New document in limbo: "+n),i.Eu.add(s),mg(i))}function mg(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Qe(ln.fromString(e)),s=i.fu.next();i.Au.set(s,new vD(n)),i.Ru=i.Ru.insert(n,s),CT(i.remoteStore,new no(vs(Jp(n.path)),s,"TargetPurposeLimboResolution",Nf.ce))}}async function Oc(i,e,n){const s=at(i),o=[],u=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((y,_)=>{d.push(s.pu(_,e,n).then((b=>{if((b||n)&&s.isPrimaryClient){const C=b?!b.fromCache:n?.targetChanges.get(_.targetId)?.current;s.sharedClientState.updateQueryState(_.targetId,C?"current":"not-current")}if(b){o.push(b);const C=ig.Es(_.targetId,b);u.push(C)}})))})),await Promise.all(d),s.Pu.J_(o),await(async function(_,b){const C=at(_);try{await C.persistence.runTransaction("notifyLocalViewChanges","readwrite",(O=>ye.forEach(b,(x=>ye.forEach(x.Ts,(Z=>C.persistence.referenceDelegate.addReference(O,x.targetId,Z))).next((()=>ye.forEach(x.Is,(Z=>C.persistence.referenceDelegate.removeReference(O,x.targetId,Z)))))))))}catch(O){if(!iu(O))throw O;Le(sg,"Failed to update sequence numbers: "+O)}for(const O of b){const x=O.targetId;if(!O.fromCache){const Z=C.vs.get(x),fe=Z.snapshotVersion,_e=Z.withLastLimboFreeSnapshotVersion(fe);C.vs=C.vs.insert(x,_e)}}})(s.localStore,u))}async function DD(i,e){const n=at(i);if(!n.currentUser.isEqual(e)){Le(dg,"User change. New user:",e.toKey());const s=await ST(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((y=>{y.forEach((_=>{_.reject(new Fe(ve.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Oc(n,s.Ns)}}function xD(i,e){const n=at(i),s=n.Au.get(e);if(s&&s.hu)return At().add(s.key);{let o=At();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const y=n.Tu.get(d);o=o.unionWith(y.view.nu)}return o}}function jT(i){const e=at(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=PT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RD.bind(null,e),e.Pu.J_=dD.bind(null,e.eventManager),e.Pu.yu=mD.bind(null,e.eventManager),e}function ND(i){const e=at(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ID.bind(null,e),e}class Af{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return NO(this.persistence,new OO,e.initialUser,this.serializer)}Cu(e){return new TT(rg.Vi,this.serializer)}Du(e){return new zO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Af.provider={build:()=>new Af};class MD extends Af{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Vt(this.persistence.referenceDelegate instanceof Tf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new mO(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?qr.withCacheSize(this.cacheSizeBytes):qr.DEFAULT;return new TT((s=>Tf.Vi(s,n)),this.serializer)}}class Ap{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>pE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=DD.bind(null,this.syncEngine),await lD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new cD})()}createDatastore(e){const n=Bf(e.databaseInfo.databaseId),s=FO(e.databaseInfo);return $O(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,d,y){return new JO(s,o,u,d,y)})(this.localStore,this.datastore,e.asyncQueue,(n=>pE(this.syncEngine,n,0)),(function(){return uE.v()?new uE:new jO})())}createSyncEngine(e,n){return(function(o,u,d,y,_,b,C){const O=new _D(o,u,d,y,_,b);return C&&(O.gu=!0),O})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=at(n);Le(Jo,"RemoteStore shutting down."),s.Ea.add(5),await Ic(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ap.provider={build:()=>new Ap};class kD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):aa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const po="FirestoreClient";class VD{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this._databaseInfo=o,this.user=ur.UNAUTHENTICATED,this.clientId=Fp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async d=>{Le(po,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(Le(po,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=hg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Wm(i,e){i.asyncQueue.verifyOperationInProgress(),Le(po,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await ST(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function yE(i,e){i.asyncQueue.verifyOperationInProgress();const n=await PD(i);Le(po,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>hE(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>hE(e.remoteStore,o))),i._onlineComponents=e}async function PD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Le(po,"Using user provided OfflineComponentProvider");try{await Wm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ve.FAILED_PRECONDITION||o.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Gl("Error using user provided cache. Falling back to memory cache: "+n),await Wm(i,new Af)}}else Le(po,"Using default OfflineComponentProvider"),await Wm(i,new MD(void 0));return i._offlineComponents}async function BT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Le(po,"Using user provided OnlineComponentProvider"),await yE(i,i._uninitializedComponentsProvider._online)):(Le(po,"Using default OnlineComponentProvider"),await yE(i,new Ap))),i._onlineComponents}function LD(i){return BT(i).then((e=>e.syncEngine))}async function UD(i){const e=await BT(i),n=e.eventManager;return n.onListen=ED.bind(null,e.syncEngine),n.onUnlisten=SD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=AD.bind(null,e.syncEngine),n}function zD(i,e,n={}){const s=new lo;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,y,_,b){const C=new kD({next:x=>{C.Nu(),d.enqueueAndForget((()=>fD(u,O)));const Z=x.docs.has(y);!Z&&x.fromCache?b.reject(new Fe(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):Z&&x.fromCache&&_&&_.source==="server"?b.reject(new Fe(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(x)},error:x=>b.reject(x)}),O=new pD(Jp(y.path),C,{includeMetadataChanges:!0,Ka:!0});return hD(u,O)})(await UD(i),i.asyncQueue,e,n,s))),s.promise}function jD(i,e){const n=new lo;return i.asyncQueue.enqueueAndForget((async()=>wD(await LD(i),e,n))),n.promise}function qT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const BD="ComponentProvider",vE=new Map;function qD(i,e,n,s,o){return new i2(i,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,qT(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}const HT="firestore.googleapis.com",_E=!0;class EE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Fe(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=HT,this.ssl=_E}else this.host=e.host,this.ssl=e.ssl??_E;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fO)throw new Fe(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Fe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Fe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Fe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pg{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Fe(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Fe(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new PI;switch(s.type){case"firstParty":return new jI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Fe(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=vE.get(n);s&&(Le(BD,"Removing Datastore"),vE.delete(n),s.terminate())})(this),Promise.resolve()}}function HD(i,e,n,s={}){i=hc(i,pg);const o=Wl(e),u=i._getSettings(),d={...u,emulatorOptions:i._getEmulatorOptions()},y=`${e}:${n}`;o&&(qE(`https://${y}`),HE("Firestore",!0)),u.host!==HT&&u.host!==y&&Gl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...u,host:y,ssl:o,emulatorOptions:s};if(!Yo(_,d)&&(i._setSettings(_),s.mockUserToken)){let b,C;if(typeof s.mockUserToken=="string")b=s.mockUserToken,C=ur.MOCK_USER;else{b=aw(s.mockUserToken,i._app?.options.projectId);const O=s.mockUserToken.sub||s.mockUserToken.user_id;if(!O)throw new Fe(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new ur(O)}i._authCredentials=new LI(new Mb(b,C))}}class gg{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new gg(this.firestore,e,this._query)}}class Gn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}toJSON(){return{type:Gn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(wc(n,Gn._jsonSchema))return new Gn(e,s||null,new Qe(ln.fromString(n.referencePath)))}}Gn._jsonSchemaVersion="firestore/documentReference/1.0",Gn._jsonSchema={type:Nn("string",Gn._jsonSchemaVersion),referencePath:Nn("string")};class vc extends gg{constructor(e,n,s){super(e,n,Jp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new Qe(e))}withConverter(e){return new vc(this.firestore,e,this._path)}}function FT(i,e,...n){if(i=Vi(i),arguments.length===1&&(e=Fp.newId()),GI("doc","path",e),i instanceof pg){const s=ln.fromString(e,...n);return k0(s),new Gn(i,null,new Qe(s))}{if(!(i instanceof Gn||i instanceof vc))throw new Fe(ve.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ln.fromString(e,...n));return k0(s),new Gn(i.firestore,i instanceof vc?i.converter:null,new Qe(s))}}const bE="AsyncQueue";class TE{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wT(this,"async_queue_retry"),this._c=()=>{const s=Zm();s&&Le(bE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Zm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Zm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new lo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!iu(e))throw e;Le(bE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,aa("INTERNAL UNHANDLED ERROR: ",SE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=cg.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Je(47125,{Pc:SE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function SE(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class yg extends pg{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new TE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new TE(e),this._firestoreClient=void 0,await e}}}function FD(i,e){const n=typeof i=="object"?i:YE(),s=typeof i=="string"?i:pf,o=Np(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=iw("firestore");u&&HD(o,...u)}return o}function KT(i){if(i._terminated)throw new Fe(ve.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||KD(i),i._firestoreClient}function KD(i){const e=i._freezeSettings(),n=qD(i._databaseId,i._app?.options.appId||"",i._persistenceKey,i._app?.options.apiKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new VD(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class ki{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ki(tr.fromBase64String(e))}catch(n){throw new Fe(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ki(tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ki._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wc(e,ki._jsonSchema))return ki.fromBase64String(e.bytes)}}ki._jsonSchemaVersion="firestore/bytes/1.0",ki._jsonSchema={type:Nn("string",ki._jsonSchemaVersion),bytes:Nn("string")};class GT{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Fe(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class YT{constructor(e){this._methodName=e}}class Es{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Fe(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Fe(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Es._jsonSchemaVersion}}static fromJSON(e){if(wc(e,Es._jsonSchema))return new Es(e.latitude,e.longitude)}}Es._jsonSchemaVersion="firestore/geoPoint/1.0",Es._jsonSchema={type:Nn("string",Es._jsonSchemaVersion),latitude:Nn("number"),longitude:Nn("number")};class Wi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Wi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wc(e,Wi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Wi(e.vectorValues);throw new Fe(ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wi._jsonSchemaVersion="firestore/vectorValue/1.0",Wi._jsonSchema={type:Nn("string",Wi._jsonSchemaVersion),vectorValues:Nn("object")};const GD=/^__.*__$/;class YD{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new el(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rc(e,this.data,n,this.fieldTransforms)}}function QT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je(40011,{dataSource:i})}}class vg{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new vg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return wf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(QT(this.dataSource)&&GD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class QD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Bf(e)}createContext(e,n,s,o=!1){return new vg({dataSource:e,methodName:n,targetDoc:s,path:er.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $D(i){const e=i._freezeSettings(),n=Bf(i._databaseId);return new QD(i._databaseId,!!e.ignoreUndefinedProperties,n)}function XD(i,e,n,s,o,u={}){const d=i.createContext(u.merge||u.mergeFields?2:0,e,n,o);ZT("Data must be an object, but it was:",d,s);const y=XT(s,d);let _,b;if(u.merge)_=new Ji(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const C=[];for(const O of u.mergeFields){const x=_g(e,O,n);if(!d.contains(x))throw new Fe(ve.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);WD(C,x)||C.push(x)}_=new Ji(C),b=d.fieldTransforms.filter((O=>_.covers(O.field)))}else _=null,b=d.fieldTransforms;return new YD(new Mi(y),_,b)}function $T(i,e){if(JT(i=Vi(i)))return ZT("Unsupported field value:",e,i),XT(i,e);if(i instanceof YT)return(function(s,o){if(!QT(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const u=[];let d=0;for(const y of s){let _=$T(y,o.childContextForArray(d));_==null&&(_={nullValue:"NULL_VALUE"}),u.push(_),d++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=Vi(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return D2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Xt.fromDate(s);return{timestampValue:bf(o.serializer,u)}}if(s instanceof Xt){const u=new Xt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:bf(o.serializer,u)}}if(s instanceof Es)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ki)return{bytesValue:dT(o.serializer,s._byteString)};if(s instanceof Gn){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:tg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Wi)return(function(d,y){const _=d instanceof Wi?d.toArray():d;return{mapValue:{fields:{[qb]:{stringValue:Hb},[gf]:{arrayValue:{values:_.map((C=>{if(typeof C!="number")throw y.createError("VectorValues must only contain numeric values.");return Zp(y.serializer,C)}))}}}}}})(s,o);if(ET(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Kp(s)}`)})(i,e)}function XT(i,e){const n={};return Pb(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zo(i,((s,o)=>{const u=$T(o,e.childContextForField(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function JT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Xt||i instanceof Es||i instanceof ki||i instanceof Gn||i instanceof YT||i instanceof Wi||ET(i))}function ZT(i,e,n){if(!JT(n)||!kb(n)){const s=Kp(n);throw s==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+s)}}function _g(i,e,n){if((e=Vi(e))instanceof GT)return e._internalPath;if(typeof e=="string")return ZD(i,e);throw wf("Field path arguments must be of type string or ",i,!1,void 0,n)}const JD=new RegExp("[~\\*/\\[\\]]");function ZD(i,e,n){if(e.search(JD)>=0)throw wf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new GT(...e.split("."))._internalPath}catch{throw wf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function wf(i,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let y=`Function ${e}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let _="";return(u||d)&&(_+=" (found",u&&(_+=` in field ${s}`),d&&(_+=` in document ${o}`),_+=")"),new Fe(ve.INVALID_ARGUMENT,y+i+_)}function WD(i,e){return i.some((n=>n.isEqual(e)))}class ex{convertValue(e,n="none"){switch(fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Je(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Zo(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[gf].arrayValue?.values?.map((s=>Tn(s.doubleValue)));return new Wi(n)}convertGeoPoint(e){return new Es(Tn(e.latitude),Tn(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=kf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(dc(e));default:return null}}convertTimestamp(e){const n=co(e);return new Xt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ln.fromString(e);Vt(_T(s),9688,{name:e});const o=new mc(s.get(1),s.get(3)),u=new Qe(s.popFirst(5));return o.isEqual(n)||aa(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class tx extends ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new ki(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,n)}}const AE="@firebase/firestore",wE="4.10.0";class WT{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(_g("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nx extends WT{data(){return super.data()}}function rx(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class Ju{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ko extends WT{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(_g("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Fe(ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ko._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ko._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ko._jsonSchema={type:Nn("string",Ko._jsonSchemaVersion),bundleSource:Nn("string","DocumentSnapshot"),bundleName:Nn("string"),bundle:Nn("string")};class nf extends Ko{data(e={}){return super.data(e)}}class sc{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ju(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new nf(this._firestore,this._userDataWriter,s.key,s,new Ju(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Fe(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((y=>{const _=new nf(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Ju(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);return y.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((y=>u||y.type!==3)).map((y=>{const _=new nf(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Ju(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,C=-1;return y.type!==0&&(b=d.indexOf(y.doc.key),d=d.delete(y.doc.key)),y.type!==1&&(d=d.add(y.doc),C=d.indexOf(y.doc.key)),{type:ix(y.type),doc:_,oldIndex:b,newIndex:C}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Fe(ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=sc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ix(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je(61501,{type:i})}}sc._jsonSchemaVersion="firestore/querySnapshot/1.0",sc._jsonSchema={type:Nn("string",sc._jsonSchemaVersion),bundleSource:Nn("string","QuerySnapshot"),bundleName:Nn("string"),bundle:Nn("string")};function sx(i){i=hc(i,Gn);const e=hc(i.firestore,yg),n=KT(e);return zD(n,i._key).then((s=>lx(e,i,s)))}function ax(i,e,n){i=hc(i,Gn);const s=hc(i.firestore,yg),o=rx(i.converter,e),u=$D(s);return ox(s,[XD(u,"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,ra.none())])}function ox(i,e){const n=KT(i);return jD(n,e)}function lx(i,e,n){const s=n.docs.get(e._key),o=new tx(i);return new Ko(i,o,e._key,s,new Ju(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){VI(eu),Fl(new Qo("firestore",((s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),y=new yg(new UI(s.getProvider("auth-internal")),new BI(d,s.getProvider("app-check-internal")),s2(d,o),d);return u={useFetchStreams:n,...u},y._setSettings(u),y}),"PUBLIC").setMultipleInstances(!0)),ao(AE,wE,e),ao(AE,wE,"esm2020")})();const ux={apiKey:"AIzaSyCGabs1zTYUI0-yPRp2RD7_Zk4HLsd3kSc",authDomain:"gemini-podcast-cards.firebaseapp.com",projectId:"gemini-podcast-cards",storageBucket:"gemini-podcast-cards.firebasestorage.app",messagingSenderId:"535172285628",appId:"1:535172285628:web:1fa37b46cf2bdf89257cb9"},e1=GE(ux),Hh=MI(e1),cx=new ea,t1=FD(e1),n1="users";async function hx(i,e){if(!i)throw new Error("User ID is required");try{const n=JSON.stringify(e),s=FT(t1,n1,i);await ax(s,{vocab_data:n,last_synced:Date.now()}),console.log(`Successfully synced ${e.length} cards for user ${i}`)}catch(n){throw console.error("Sync upload failed:",n),n}}async function fx(i){if(!i)throw new Error("User ID is required");try{const e=FT(t1,n1,i),n=await sx(e);if(n.exists()){const s=n.data();if(s.vocab_data)return JSON.parse(s.vocab_data)}return null}catch(e){throw console.error("Sync download failed:",e),e}}let dx={data:""},mx=i=>{if(typeof window=="object"){let e=(i?i.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(i||document.head).appendChild(e),e.firstChild}return i||dx},px=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,gx=/\/\*[^]*?\*\/|  +/g,RE=/\n+/g,to=(i,e)=>{let n="",s="",o="";for(let u in i){let d=i[u];u[0]=="@"?u[1]=="i"?n=u+" "+d+";":s+=u[1]=="f"?to(d,u):u+"{"+to(d,u[1]=="k"?"":e)+"}":typeof d=="object"?s+=to(d,e?e.replace(/([^,])+/g,y=>u.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,_=>/&/.test(_)?_.replace(/&/g,y):y?y+" "+_:_)):u):d!=null&&(u=/^--/.test(u)?u:u.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=to.p?to.p(u,d):u+":"+d+";")}return n+(e&&o?e+"{"+o+"}":o)+s},Ws={},r1=i=>{if(typeof i=="object"){let e="";for(let n in i)e+=n+r1(i[n]);return e}return i},yx=(i,e,n,s,o)=>{let u=r1(i),d=Ws[u]||(Ws[u]=(_=>{let b=0,C=11;for(;b<_.length;)C=101*C+_.charCodeAt(b++)>>>0;return"go"+C})(u));if(!Ws[d]){let _=u!==i?i:(b=>{let C,O,x=[{}];for(;C=px.exec(b.replace(gx,""));)C[4]?x.shift():C[3]?(O=C[3].replace(RE," ").trim(),x.unshift(x[0][O]=x[0][O]||{})):x[0][C[1]]=C[2].replace(RE," ").trim();return x[0]})(i);Ws[d]=to(o?{["@keyframes "+d]:_}:_,n?"":"."+d)}let y=n&&Ws.g?Ws.g:null;return n&&(Ws.g=Ws[d]),((_,b,C,O)=>{O?b.data=b.data.replace(O,_):b.data.indexOf(_)===-1&&(b.data=C?_+b.data:b.data+_)})(Ws[d],e,s,y),d},vx=(i,e,n)=>i.reduce((s,o,u)=>{let d=e[u];if(d&&d.call){let y=d(n),_=y&&y.props&&y.props.className||/^go/.test(y)&&y;d=_?"."+_:y&&typeof y=="object"?y.props?"":to(y,""):y===!1?"":y}return s+o+(d??"")},"");function Ff(i){let e=this||{},n=i.call?i(e.p):i;return yx(n.unshift?n.raw?vx(n,[].slice.call(arguments,1),e.p):n.reduce((s,o)=>Object.assign(s,o&&o.call?o(e.p):o),{}):n,mx(e.target),e.g,e.o,e.k)}let i1,wp,Rp;Ff.bind({g:1});let la=Ff.bind({k:1});function _x(i,e,n,s){to.p=e,i1=i,wp=n,Rp=s}function go(i,e){let n=this||{};return function(){let s=arguments;function o(u,d){let y=Object.assign({},u),_=y.className||o.className;n.p=Object.assign({theme:wp&&wp()},y),n.o=/ *go\d+/.test(_),y.className=Ff.apply(n,s)+(_?" "+_:"");let b=i;return i[0]&&(b=y.as||i,delete y.as),Rp&&b[0]&&Rp(y),i1(b,y)}return o}}var Ex=i=>typeof i=="function",Rf=(i,e)=>Ex(i)?i(e):i,bx=(()=>{let i=0;return()=>(++i).toString()})(),s1=(()=>{let i;return()=>{if(i===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");i=!e||e.matches}return i}})(),Tx=20,Eg="default",a1=(i,e)=>{let{toastLimit:n}=i.settings;switch(e.type){case 0:return{...i,toasts:[e.toast,...i.toasts].slice(0,n)};case 1:return{...i,toasts:i.toasts.map(d=>d.id===e.toast.id?{...d,...e.toast}:d)};case 2:let{toast:s}=e;return a1(i,{type:i.toasts.find(d=>d.id===s.id)?1:0,toast:s});case 3:let{toastId:o}=e;return{...i,toasts:i.toasts.map(d=>d.id===o||o===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return e.toastId===void 0?{...i,toasts:[]}:{...i,toasts:i.toasts.filter(d=>d.id!==e.toastId)};case 5:return{...i,pausedAt:e.time};case 6:let u=e.time-(i.pausedAt||0);return{...i,pausedAt:void 0,toasts:i.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+u}))}}},rf=[],o1={toasts:[],pausedAt:void 0,settings:{toastLimit:Tx}},gs={},l1=(i,e=Eg)=>{gs[e]=a1(gs[e]||o1,i),rf.forEach(([n,s])=>{n===e&&s(gs[e])})},u1=i=>Object.keys(gs).forEach(e=>l1(i,e)),Sx=i=>Object.keys(gs).find(e=>gs[e].toasts.some(n=>n.id===i)),Kf=(i=Eg)=>e=>{l1(e,i)},Ax={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},wx=(i={},e=Eg)=>{let[n,s]=Ie.useState(gs[e]||o1),o=Ie.useRef(gs[e]);Ie.useEffect(()=>(o.current!==gs[e]&&s(gs[e]),rf.push([e,s]),()=>{let d=rf.findIndex(([y])=>y===e);d>-1&&rf.splice(d,1)}),[e]);let u=n.toasts.map(d=>{var y,_,b;return{...i,...i[d.type],...d,removeDelay:d.removeDelay||((y=i[d.type])==null?void 0:y.removeDelay)||i?.removeDelay,duration:d.duration||((_=i[d.type])==null?void 0:_.duration)||i?.duration||Ax[d.type],style:{...i.style,...(b=i[d.type])==null?void 0:b.style,...d.style}}});return{...n,toasts:u}},Rx=(i,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:i,pauseDuration:0,...n,id:n?.id||bx()}),Dc=i=>(e,n)=>{let s=Rx(e,i,n);return Kf(s.toasterId||Sx(s.id))({type:2,toast:s}),s.id},Pn=(i,e)=>Dc("blank")(i,e);Pn.error=Dc("error");Pn.success=Dc("success");Pn.loading=Dc("loading");Pn.custom=Dc("custom");Pn.dismiss=(i,e)=>{let n={type:3,toastId:i};e?Kf(e)(n):u1(n)};Pn.dismissAll=i=>Pn.dismiss(void 0,i);Pn.remove=(i,e)=>{let n={type:4,toastId:i};e?Kf(e)(n):u1(n)};Pn.removeAll=i=>Pn.remove(void 0,i);Pn.promise=(i,e,n)=>{let s=Pn.loading(e.loading,{...n,...n?.loading});return typeof i=="function"&&(i=i()),i.then(o=>{let u=e.success?Rf(e.success,o):void 0;return u?Pn.success(u,{id:s,...n,...n?.success}):Pn.dismiss(s),o}).catch(o=>{let u=e.error?Rf(e.error,o):void 0;u?Pn.error(u,{id:s,...n,...n?.error}):Pn.dismiss(s)}),i};var Cx=1e3,Ix=(i,e="default")=>{let{toasts:n,pausedAt:s}=wx(i,e),o=Ie.useRef(new Map).current,u=Ie.useCallback((O,x=Cx)=>{if(o.has(O))return;let Z=setTimeout(()=>{o.delete(O),d({type:4,toastId:O})},x);o.set(O,Z)},[]);Ie.useEffect(()=>{if(s)return;let O=Date.now(),x=n.map(Z=>{if(Z.duration===1/0)return;let fe=(Z.duration||0)+Z.pauseDuration-(O-Z.createdAt);if(fe<0){Z.visible&&Pn.dismiss(Z.id);return}return setTimeout(()=>Pn.dismiss(Z.id,e),fe)});return()=>{x.forEach(Z=>Z&&clearTimeout(Z))}},[n,s,e]);let d=Ie.useCallback(Kf(e),[e]),y=Ie.useCallback(()=>{d({type:5,time:Date.now()})},[d]),_=Ie.useCallback((O,x)=>{d({type:1,toast:{id:O,height:x}})},[d]),b=Ie.useCallback(()=>{s&&d({type:6,time:Date.now()})},[s,d]),C=Ie.useCallback((O,x)=>{let{reverseOrder:Z=!1,gutter:fe=8,defaultPosition:_e}=x||{},Ce=n.filter(Ue=>(Ue.position||_e)===(O.position||_e)&&Ue.height),He=Ce.findIndex(Ue=>Ue.id===O.id),Ye=Ce.filter((Ue,ct)=>ct<He&&Ue.visible).length;return Ce.filter(Ue=>Ue.visible).slice(...Z?[Ye+1]:[0,Ye]).reduce((Ue,ct)=>Ue+(ct.height||0)+fe,0)},[n]);return Ie.useEffect(()=>{n.forEach(O=>{if(O.dismissed)u(O.id,O.removeDelay);else{let x=o.get(O.id);x&&(clearTimeout(x),o.delete(O.id))}})},[n,u]),{toasts:n,handlers:{updateHeight:_,startPause:y,endPause:b,calculateOffset:C}}},Ox=la`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Dx=la`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,xx=la`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Nx=go("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ox} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Dx} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${i=>i.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${xx} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Mx=la`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,kx=go("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${i=>i.secondary||"#e0e0e0"};
  border-right-color: ${i=>i.primary||"#616161"};
  animation: ${Mx} 1s linear infinite;
`,Vx=la`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Px=la`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Lx=go("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Vx} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Px} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${i=>i.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Ux=go("div")`
  position: absolute;
`,zx=go("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,jx=la`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Bx=go("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${jx} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,qx=({toast:i})=>{let{icon:e,type:n,iconTheme:s}=i;return e!==void 0?typeof e=="string"?Ie.createElement(Bx,null,e):e:n==="blank"?null:Ie.createElement(zx,null,Ie.createElement(kx,{...s}),n!=="loading"&&Ie.createElement(Ux,null,n==="error"?Ie.createElement(Nx,{...s}):Ie.createElement(Lx,{...s})))},Hx=i=>`
0% {transform: translate3d(0,${i*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Fx=i=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${i*-150}%,-1px) scale(.6); opacity:0;}
`,Kx="0%{opacity:0;} 100%{opacity:1;}",Gx="0%{opacity:1;} 100%{opacity:0;}",Yx=go("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Qx=go("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,$x=(i,e)=>{let n=i.includes("top")?1:-1,[s,o]=s1()?[Kx,Gx]:[Hx(n),Fx(n)];return{animation:e?`${la(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${la(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Xx=Ie.memo(({toast:i,position:e,style:n,children:s})=>{let o=i.height?$x(i.position||e||"top-center",i.visible):{opacity:0},u=Ie.createElement(qx,{toast:i}),d=Ie.createElement(Qx,{...i.ariaProps},Rf(i.message,i));return Ie.createElement(Yx,{className:i.className,style:{...o,...n,...i.style}},typeof s=="function"?s({icon:u,message:d}):Ie.createElement(Ie.Fragment,null,u,d))});_x(Ie.createElement);var Jx=({id:i,className:e,style:n,onHeightUpdate:s,children:o})=>{let u=Ie.useCallback(d=>{if(d){let y=()=>{let _=d.getBoundingClientRect().height;s(i,_)};y(),new MutationObserver(y).observe(d,{subtree:!0,childList:!0,characterData:!0})}},[i,s]);return Ie.createElement("div",{ref:u,className:e,style:n},o)},Zx=(i,e)=>{let n=i.includes("top"),s=n?{top:0}:{bottom:0},o=i.includes("center")?{justifyContent:"center"}:i.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:s1()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...s,...o}},Wx=Ff`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Fh=16,eN=({reverseOrder:i,position:e="top-center",toastOptions:n,gutter:s,children:o,toasterId:u,containerStyle:d,containerClassName:y})=>{let{toasts:_,handlers:b}=Ix(n,u);return Ie.createElement("div",{"data-rht-toaster":u||"",style:{position:"fixed",zIndex:9999,top:Fh,left:Fh,right:Fh,bottom:Fh,pointerEvents:"none",...d},className:y,onMouseEnter:b.startPause,onMouseLeave:b.endPause},_.map(C=>{let O=C.position||e,x=b.calculateOffset(C,{reverseOrder:i,gutter:s,defaultPosition:e}),Z=Zx(O,x);return Ie.createElement(Jx,{id:C.id,key:C.id,onHeightUpdate:b.updateHeight,className:C.visible?Wx:"",style:Z},C.type==="custom"?Rf(C.message,C):o?o(C):Ie.createElement(Xx,{toast:C,position:O}))}))},_r=Pn;const tN=Ie.lazy(()=>Zl(()=>import("./ImportModal-BMOn5hl9.js"),__vite__mapDeps([0,1]))),nN=Ie.lazy(()=>Zl(()=>import("./Settings-BUUidBdD.js"),[])),rN=Ie.lazy(()=>Zl(()=>import("./CardEditor-CzvM0W-m.js"),__vite__mapDeps([2,1]))),iN=Ie.lazy(()=>Zl(()=>import("./CardManager-C8_INYGH.js"),__vite__mapDeps([3,1]))),sN=Ie.lazy(()=>Zl(()=>import("./SmartReviewGenerator-CrBz8L80.js"),__vite__mapDeps([4,1]))),aN=Ie.lazy(()=>Zl(()=>import("./Dashboard-D2YwJ5uu.js"),[])),CE="zanta0529@gmail.com,amy.webhd@gmail.com".split(",").map(i=>i.trim()).filter(i=>i!==""),oN=({isOpen:i,onClose:e,onConfirm:n,title:s,message:o})=>{const[u,d]=Ie.useState(3);return Ie.useEffect(()=>{if(i){d(3);const y=setInterval(()=>{d(_=>_<=1?(clearInterval(y),0):_-1)},1e3);return()=>clearInterval(y)}},[i]),i?oe.jsx("div",{style:IE.overlay,children:oe.jsxs("div",{style:IE.content,children:[oe.jsxs("h3",{style:{marginTop:0,color:"#ff6b6b"},children:[" ",s]}),oe.jsx("p",{style:{color:"#ccc",lineHeight:"1.5"},children:o}),oe.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[oe.jsx("button",{onClick:e,style:{...ac,backgroundColor:"#666"},children:"Cancel"}),oe.jsx("button",{onClick:()=>{n(),e()},disabled:u>0,style:{...ac,backgroundColor:u>0?"#CCC":"#e03131",cursor:u>0?"not-allowed":"pointer",opacity:u>0?.7:1},children:u>0?`Wait (${u})...`:"Execute!"})]})]})}):null};function lN(){const[i,e]=Ie.useState([]),[n,s]=Ie.useState("home"),[o,u]=Ie.useState(!0),[d,y]=Ie.useState(0),[_,b]=Ie.useState(null),[C,O]=Ie.useState(!1),[x,Z]=Ie.useState(!1),[fe,_e]=Ie.useState(!1),[Ce,He]=Ie.useState(!1),[Ye,Ue]=Ie.useState(!1),[ct,ft]=Ie.useState(!1),[nt,V]=Ie.useState(!1),[M,P]=Ie.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),G=(je,ke,B)=>{P({isOpen:!0,title:je,message:ke,onConfirm:B})};Ie.useEffect(()=>{const je=TC(Hh,async ke=>{ke?CE.length===0||CE.includes(ke.email)?(b(ke),_r.success(`Welcome, ${ke.displayName}`)):(console.warn(`Unauthorized: ${ke.email}`),_r.error(`Access denied for ${ke.email}`),await b0(Hh),b(null)):b(null)});return()=>je()},[]);const j=async()=>{try{u(!0),await HS();const je=Date.now(),[ke,B]=await Promise.all([Qi.vocab.where("nextReview").belowOrEqual(je).toArray(),Qi.vocab.where("status").equals("new").toArray()]),de=new Map;[...ke,...B].forEach(we=>de.set(we.id,we)),e(Array.from(de.values()))}catch(je){const ke=Gu(je,"loadData");_r.error(ke.userMessage)}finally{u(!1)}};Ie.useEffect(()=>{j()},[]);const z=Ie.useCallback(async je=>{try{await Qi.vocab.put(je),y(ke=>ke+1)}catch(ke){const B=Gu(ke,"handleUpdate");_r.error(B.userMessage)}},[]),N=Ie.useCallback(async()=>{try{await qC(Hh,cx),ft(!1)}catch(je){const ke=Gu(je,"handleLogin");_r.error(ke.userMessage)}},[]),dt=async()=>{await b0(Hh),window.location.reload()},Ft=Ie.useCallback(async()=>{if(!_)return;O(!0),ft(!1);const je=_r.loading("Backing up...");try{const ke=await Qi.vocab.toArray();if(ke.length===0){_r.info("No cards to backup",{id:je});return}await hx(_.uid,ke),_r.success(`Backed up ${ke.length} cards!`,{id:je})}catch(ke){const B=Gu(ke,"handleUpload");_r.error(B.userMessage,{id:je})}finally{O(!1),setTimeout(()=>_r.dismiss(je),3e3)}},[_]),ue=async()=>{_&&G("Overwrite Warning","Are you sure you want to overwrite local data with cloud backup? This action cannot be undone.",async()=>{O(!0),ft(!1);const je=_r.loading("Restoring...");try{const ke=await fx(_.uid);ke&&Array.isArray(ke)&&ke.length>0?(await Qi.vocab.clear(),await Qi.vocab.bulkAdd(ke),_r.success(`Restored ${ke.length} cards! Reloading...`,{id:je}),setTimeout(()=>window.location.reload(),1500)):_r.info("No backup found in cloud storage.",{id:je})}catch(ke){const B=Gu(ke,"handleDownload");_r.error(B.userMessage,{id:je})}finally{O(!1),setTimeout(()=>_r.dismiss(je),3e3)}})},Oe=Ie.useMemo(()=>i[d],[i,d]);if(o)return oe.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1b1e",color:"#fff"},children:"Loading..."});const Be=()=>n==="dashboard"?oe.jsx(Ie.Suspense,{fallback:oe.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#88ccca"},children:"Loading Dashboard..."}),children:oe.jsx(aN,{onBack:()=>s("home")})}):Oe?oe.jsx($A,{card:Oe,onUpdate:z},Oe.id):oe.jsxs("div",{style:{textAlign:"center",padding:"3rem",border:"1px dashed #555",borderRadius:"8px"},children:[oe.jsx("h2",{children:" All caught up!"}),oe.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"1rem",padding:"0.5rem 1rem",cursor:"pointer"},children:"Refresh"})]});return oe.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",padding:"1rem",minHeight:"100vh",backgroundColor:"#1a1b1e",color:"#ffffff",fontFamily:"sans-serif",display:"flex",flexDirection:"column",gap:"0.5rem",alignItems:"center",position:"relative"},children:[oe.jsx(eN,{position:"top-center",toastOptions:{duration:4e3,style:{background:"#333",color:"#fff"},error:{duration:6e3}}}),oe.jsx(oN,{isOpen:M.isOpen,onClose:()=>P(je=>({...je,isOpen:!1})),onConfirm:M.onConfirm,title:M.title,message:M.message}),oe.jsxs("nav",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",padding:"0.5rem",borderBottom:"1px solid #333",position:"relative"},children:[oe.jsxs("div",{style:{fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px"},children:["GPF",oe.jsx("button",{onClick:()=>_e(!0),style:uN,title:"Settings",children:""})]}),oe.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[oe.jsx("button",{onClick:()=>He(!0),style:{...ac,backgroundColor:"#2196f3"},children:"+ Add"}),oe.jsx("button",{onClick:()=>Z(!0),style:{...ac,backgroundColor:"#e91e63"},children:"Import"}),oe.jsx("button",{onClick:()=>ft(!ct),style:{...ac,backgroundColor:"#333",padding:"0.5rem 0.8rem",fontSize:"1.1rem"},children:""}),ct&&oe.jsxs(oe.Fragment,{children:[oe.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99},onClick:()=>ft(!1)}),oe.jsxs("div",{style:Ni.container,children:[oe.jsx("button",{onClick:()=>{s("dashboard"),ft(!1)},style:Ni.item,children:" Learning Dashboard"}),oe.jsx("div",{style:Ni.divider}),oe.jsx("button",{onClick:()=>{Ue(!0),ft(!1)},style:Ni.item,children:" Manage Cards"}),oe.jsx("button",{onClick:()=>{V(!0),ft(!1)},style:Ni.item,children:" AI Smart Review"}),oe.jsx("div",{style:Ni.divider}),_?oe.jsxs(oe.Fragment,{children:[oe.jsx("button",{onClick:Ft,disabled:C,style:Ni.item,children:" Backup Data"}),oe.jsx("button",{onClick:ue,disabled:C,style:Ni.item,children:" Restore Data"}),oe.jsx("div",{style:Ni.divider}),oe.jsx("div",{style:Ni.userEmail,children:_.email}),oe.jsx("button",{onClick:dt,style:{...Ni.item,color:"#ff6b6b"},children:"Logout"})]}):oe.jsx("button",{onClick:N,style:{...Ni.item,color:"#4285F4"},children:"Login with Google"})]})]})]})]}),oe.jsxs("header",{style:{marginBottom:"0.5rem",width:"100%",textAlign:"center"},children:[oe.jsx("h1",{style:{fontSize:"1.5rem",margin:"0 0 0.3rem 0"},children:"Gemini Flashcards"}),oe.jsx("p",{style:{color:"#888",margin:0,fontSize:"0.9rem"},children:i.length>0?`Progress: ${d} / ${i.length}`:"No cards due"})]}),oe.jsx("main",{style:{width:"100%",flex:1,display:"flex",flexDirection:"column"},children:Be()}),oe.jsxs(Ie.Suspense,{fallback:null,children:[oe.jsx(tN,{isOpen:x,onClose:()=>Z(!1),onSuccess:j}),oe.jsx(nN,{isOpen:fe,onClose:()=>_e(!1)}),oe.jsx(rN,{isOpen:Ce,onClose:()=>He(!1),onSuccess:j}),oe.jsx(iN,{isOpen:Ye,onClose:()=>{Ue(!1),j()}}),oe.jsx(sN,{isOpen:nt,onClose:()=>V(!1)})]})]})}const ac={padding:"0.5rem 1rem",fontSize:"0.9rem",borderRadius:"6px",border:"none",cursor:"pointer",color:"white",whiteSpace:"nowrap",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.3rem",transition:"opacity 0.2s"},uN={background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem"},Ni={container:{position:"absolute",top:"3.5rem",right:"0.5rem",backgroundColor:"#25262b",border:"1px solid #444",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.5)",zIndex:100,display:"flex",flexDirection:"column",minWidth:"180px",padding:"0.5rem"},item:{background:"none",border:"none",color:"#e0e0e0",padding:"0.8rem 1rem",textAlign:"left",cursor:"pointer",borderRadius:"4px",fontSize:"0.95rem",transition:"background 0.2s"},divider:{height:"1px",backgroundColor:"#444",margin:"0.5rem 0"},userEmail:{padding:"0.5rem 1rem",fontSize:"0.75rem",color:"#888",borderBottom:"1px solid #333",marginBottom:"0.5rem"}},IE={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},content:{backgroundColor:"#25262b",padding:"2rem",borderRadius:"12px",maxWidth:"400px",width:"90%",border:"1px solid #444",boxShadow:"0 8px 30px rgba(0,0,0,0.5)"}};LS.createRoot(document.getElementById("root")).render(oe.jsx(OE.StrictMode,{children:oe.jsx(lN,{})}));export{bN as L,YA as a,TN as b,ua as c,Qi as d,hA as e,Gu as h,oe as j,Ie as r,_r as z};
