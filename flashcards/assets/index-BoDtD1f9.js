(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Cw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Np={exports:{}},Yu={};var T_;function Rw(){if(T_)return Yu;T_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:u}}return Yu.Fragment=e,Yu.jsx=n,Yu.jsxs=n,Yu}var w_;function xw(){return w_||(w_=1,Np.exports=Rw()),Np.exports}var O=xw(),kp={exports:{}},ot={};var S_;function Iw(){if(S_)return ot;S_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),N=Symbol.iterator;function Q(H){return H===null||typeof H!="object"?null:(H=N&&H[N]||H["@@iterator"],typeof H=="function"?H:null)}var te={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},de=Object.assign,be={};function je(H,pe,xe){this.props=H,this.context=pe,this.refs=be,this.updater=xe||te}je.prototype.isReactComponent={},je.prototype.setState=function(H,pe){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,pe,"setState")},je.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function Fe(){}Fe.prototype=je.prototype;function Ve(H,pe,xe){this.props=H,this.context=pe,this.refs=be,this.updater=xe||te}var rt=Ve.prototype=new Fe;rt.constructor=Ve,de(rt,je.prototype),rt.isPureReactComponent=!0;var it=Array.isArray;function $e(){}var P={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function L(H,pe,xe){var Pe=xe.ref;return{$$typeof:i,type:H,key:pe,ref:Pe!==void 0?Pe:null,props:xe}}function Y(H,pe){return L(H.type,pe,H.props)}function j(H){return typeof H=="object"&&H!==null&&H.$$typeof===i}function B(H){var pe={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(xe){return pe[xe]})}var M=/\/+/g;function ut(H,pe){return typeof H=="object"&&H!==null&&H.key!=null?B(""+H.key):pe.toString(36)}function Gt(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then($e,$e):(H.status="pending",H.then(function(pe){H.status==="pending"&&(H.status="fulfilled",H.value=pe)},function(pe){H.status==="pending"&&(H.status="rejected",H.reason=pe)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function ce(H,pe,xe,Pe,Xe){var Ze=typeof H;(Ze==="undefined"||Ze==="boolean")&&(H=null);var yt=!1;if(H===null)yt=!0;else switch(Ze){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(H.$$typeof){case i:case e:yt=!0;break;case R:return yt=H._init,ce(yt(H._payload),pe,xe,Pe,Xe)}}if(yt)return Xe=Xe(H),yt=Pe===""?"."+ut(H,0):Pe,it(Xe)?(xe="",yt!=null&&(xe=yt.replace(M,"$&/")+"/"),ce(Xe,pe,xe,"",function(ss){return ss})):Xe!=null&&(j(Xe)&&(Xe=Y(Xe,xe+(Xe.key==null||H&&H.key===Xe.key?"":(""+Xe.key).replace(M,"$&/")+"/")+yt)),pe.push(Xe)),1;yt=0;var vn=Pe===""?".":Pe+":";if(it(H))for(var ke=0;ke<H.length;ke++)Pe=H[ke],Ze=vn+ut(Pe,ke),yt+=ce(Pe,pe,xe,Ze,Xe);else if(ke=Q(H),typeof ke=="function")for(H=ke.call(H),ke=0;!(Pe=H.next()).done;)Pe=Pe.value,Ze=vn+ut(Pe,ke++),yt+=ce(Pe,pe,xe,Ze,Xe);else if(Ze==="object"){if(typeof H.then=="function")return ce(Gt(H),pe,xe,Pe,Xe);throw pe=String(H),Error("Objects are not valid as a React child (found: "+(pe==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":pe)+"). If you meant to render a collection of children, use an array instead.")}return yt}function Ie(H,pe,xe){if(H==null)return H;var Pe=[],Xe=0;return ce(H,Pe,"","",function(Ze){return pe.call(xe,Ze,Xe++)}),Pe}function Be(H){if(H._status===-1){var pe=H._result;pe=pe(),pe.then(function(xe){(H._status===0||H._status===-1)&&(H._status=1,H._result=xe)},function(xe){(H._status===0||H._status===-1)&&(H._status=2,H._result=xe)}),H._status===-1&&(H._status=0,H._result=pe)}if(H._status===1)return H._result.default;throw H._result}var ze=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var pe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(pe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},qe={map:Ie,forEach:function(H,pe,xe){Ie(H,function(){pe.apply(this,arguments)},xe)},count:function(H){var pe=0;return Ie(H,function(){pe++}),pe},toArray:function(H){return Ie(H,function(pe){return pe})||[]},only:function(H){if(!j(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return ot.Activity=x,ot.Children=qe,ot.Component=je,ot.Fragment=n,ot.Profiler=o,ot.PureComponent=Ve,ot.StrictMode=s,ot.Suspense=_,ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,ot.__COMPILER_RUNTIME={__proto__:null,c:function(H){return P.H.useMemoCache(H)}},ot.cache=function(H){return function(){return H.apply(null,arguments)}},ot.cacheSignal=function(){return null},ot.cloneElement=function(H,pe,xe){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var Pe=de({},H.props),Xe=H.key;if(pe!=null)for(Ze in pe.key!==void 0&&(Xe=""+pe.key),pe)!k.call(pe,Ze)||Ze==="key"||Ze==="__self"||Ze==="__source"||Ze==="ref"&&pe.ref===void 0||(Pe[Ze]=pe[Ze]);var Ze=arguments.length-2;if(Ze===1)Pe.children=xe;else if(1<Ze){for(var yt=Array(Ze),vn=0;vn<Ze;vn++)yt[vn]=arguments[vn+2];Pe.children=yt}return L(H.type,Xe,Pe)},ot.createContext=function(H){return H={$$typeof:d,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:u,_context:H},H},ot.createElement=function(H,pe,xe){var Pe,Xe={},Ze=null;if(pe!=null)for(Pe in pe.key!==void 0&&(Ze=""+pe.key),pe)k.call(pe,Pe)&&Pe!=="key"&&Pe!=="__self"&&Pe!=="__source"&&(Xe[Pe]=pe[Pe]);var yt=arguments.length-2;if(yt===1)Xe.children=xe;else if(1<yt){for(var vn=Array(yt),ke=0;ke<yt;ke++)vn[ke]=arguments[ke+2];Xe.children=vn}if(H&&H.defaultProps)for(Pe in yt=H.defaultProps,yt)Xe[Pe]===void 0&&(Xe[Pe]=yt[Pe]);return L(H,Ze,Xe)},ot.createRef=function(){return{current:null}},ot.forwardRef=function(H){return{$$typeof:g,render:H}},ot.isValidElement=j,ot.lazy=function(H){return{$$typeof:R,_payload:{_status:-1,_result:H},_init:Be}},ot.memo=function(H,pe){return{$$typeof:b,type:H,compare:pe===void 0?null:pe}},ot.startTransition=function(H){var pe=P.T,xe={};P.T=xe;try{var Pe=H(),Xe=P.S;Xe!==null&&Xe(xe,Pe),typeof Pe=="object"&&Pe!==null&&typeof Pe.then=="function"&&Pe.then($e,ze)}catch(Ze){ze(Ze)}finally{pe!==null&&xe.types!==null&&(pe.types=xe.types),P.T=pe}},ot.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},ot.use=function(H){return P.H.use(H)},ot.useActionState=function(H,pe,xe){return P.H.useActionState(H,pe,xe)},ot.useCallback=function(H,pe){return P.H.useCallback(H,pe)},ot.useContext=function(H){return P.H.useContext(H)},ot.useDebugValue=function(){},ot.useDeferredValue=function(H,pe){return P.H.useDeferredValue(H,pe)},ot.useEffect=function(H,pe){return P.H.useEffect(H,pe)},ot.useEffectEvent=function(H){return P.H.useEffectEvent(H)},ot.useId=function(){return P.H.useId()},ot.useImperativeHandle=function(H,pe,xe){return P.H.useImperativeHandle(H,pe,xe)},ot.useInsertionEffect=function(H,pe){return P.H.useInsertionEffect(H,pe)},ot.useLayoutEffect=function(H,pe){return P.H.useLayoutEffect(H,pe)},ot.useMemo=function(H,pe){return P.H.useMemo(H,pe)},ot.useOptimistic=function(H,pe){return P.H.useOptimistic(H,pe)},ot.useReducer=function(H,pe,xe){return P.H.useReducer(H,pe,xe)},ot.useRef=function(H){return P.H.useRef(H)},ot.useState=function(H){return P.H.useState(H)},ot.useSyncExternalStore=function(H,pe,xe){return P.H.useSyncExternalStore(H,pe,xe)},ot.useTransition=function(){return P.H.useTransition()},ot.version="19.2.1",ot}var A_;function xm(){return A_||(A_=1,kp.exports=Iw()),kp.exports}var _e=xm();const xb=Rm(_e);var Mp={exports:{}},Qu={},Vp={exports:{}},Pp={};var C_;function Ow(){return C_||(C_=1,(function(i){function e(ce,Ie){var Be=ce.length;ce.push(Ie);e:for(;0<Be;){var ze=Be-1>>>1,qe=ce[ze];if(0<o(qe,Ie))ce[ze]=Ie,ce[Be]=qe,Be=ze;else break e}}function n(ce){return ce.length===0?null:ce[0]}function s(ce){if(ce.length===0)return null;var Ie=ce[0],Be=ce.pop();if(Be!==Ie){ce[0]=Be;e:for(var ze=0,qe=ce.length,H=qe>>>1;ze<H;){var pe=2*(ze+1)-1,xe=ce[pe],Pe=pe+1,Xe=ce[Pe];if(0>o(xe,Be))Pe<qe&&0>o(Xe,xe)?(ce[ze]=Xe,ce[Pe]=Be,ze=Pe):(ce[ze]=xe,ce[pe]=Be,ze=pe);else if(Pe<qe&&0>o(Xe,Be))ce[ze]=Xe,ce[Pe]=Be,ze=Pe;else break e}}return Ie}function o(ce,Ie){var Be=ce.sortIndex-Ie.sortIndex;return Be!==0?Be:ce.id-Ie.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,g=d.now();i.unstable_now=function(){return d.now()-g}}var _=[],b=[],R=1,x=null,N=3,Q=!1,te=!1,de=!1,be=!1,je=typeof setTimeout=="function"?setTimeout:null,Fe=typeof clearTimeout=="function"?clearTimeout:null,Ve=typeof setImmediate<"u"?setImmediate:null;function rt(ce){for(var Ie=n(b);Ie!==null;){if(Ie.callback===null)s(b);else if(Ie.startTime<=ce)s(b),Ie.sortIndex=Ie.expirationTime,e(_,Ie);else break;Ie=n(b)}}function it(ce){if(de=!1,rt(ce),!te)if(n(_)!==null)te=!0,$e||($e=!0,B());else{var Ie=n(b);Ie!==null&&Gt(it,Ie.startTime-ce)}}var $e=!1,P=-1,k=5,L=-1;function Y(){return be?!0:!(i.unstable_now()-L<k)}function j(){if(be=!1,$e){var ce=i.unstable_now();L=ce;var Ie=!0;try{e:{te=!1,de&&(de=!1,Fe(P),P=-1),Q=!0;var Be=N;try{t:{for(rt(ce),x=n(_);x!==null&&!(x.expirationTime>ce&&Y());){var ze=x.callback;if(typeof ze=="function"){x.callback=null,N=x.priorityLevel;var qe=ze(x.expirationTime<=ce);if(ce=i.unstable_now(),typeof qe=="function"){x.callback=qe,rt(ce),Ie=!0;break t}x===n(_)&&s(_),rt(ce)}else s(_);x=n(_)}if(x!==null)Ie=!0;else{var H=n(b);H!==null&&Gt(it,H.startTime-ce),Ie=!1}}break e}finally{x=null,N=Be,Q=!1}Ie=void 0}}finally{Ie?B():$e=!1}}}var B;if(typeof Ve=="function")B=function(){Ve(j)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,ut=M.port2;M.port1.onmessage=j,B=function(){ut.postMessage(null)}}else B=function(){je(j,0)};function Gt(ce,Ie){P=je(function(){ce(i.unstable_now())},Ie)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ce){ce.callback=null},i.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ce?Math.floor(1e3/ce):5},i.unstable_getCurrentPriorityLevel=function(){return N},i.unstable_next=function(ce){switch(N){case 1:case 2:case 3:var Ie=3;break;default:Ie=N}var Be=N;N=Ie;try{return ce()}finally{N=Be}},i.unstable_requestPaint=function(){be=!0},i.unstable_runWithPriority=function(ce,Ie){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var Be=N;N=ce;try{return Ie()}finally{N=Be}},i.unstable_scheduleCallback=function(ce,Ie,Be){var ze=i.unstable_now();switch(typeof Be=="object"&&Be!==null?(Be=Be.delay,Be=typeof Be=="number"&&0<Be?ze+Be:ze):Be=ze,ce){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=Be+qe,ce={id:R++,callback:Ie,priorityLevel:ce,startTime:Be,expirationTime:qe,sortIndex:-1},Be>ze?(ce.sortIndex=Be,e(b,ce),n(_)===null&&ce===n(b)&&(de?(Fe(P),P=-1):de=!0,Gt(it,Be-ze))):(ce.sortIndex=qe,e(_,ce),te||Q||(te=!0,$e||($e=!0,B()))),ce},i.unstable_shouldYield=Y,i.unstable_wrapCallback=function(ce){var Ie=N;return function(){var Be=N;N=Ie;try{return ce.apply(this,arguments)}finally{N=Be}}}})(Pp)),Pp}var R_;function Dw(){return R_||(R_=1,Vp.exports=Ow()),Vp.exports}var jp={exports:{}},fr={};var x_;function Nw(){if(x_)return fr;x_=1;var i=xm();function e(_){var b="https://react.dev/errors/"+_;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)b+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+_+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(_,b,R){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:_,containerInfo:b,implementation:R}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(_,b){if(_==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return fr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,fr.createPortal=function(_,b){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(e(299));return u(_,b,null,R)},fr.flushSync=function(_){var b=d.T,R=s.p;try{if(d.T=null,s.p=2,_)return _()}finally{d.T=b,s.p=R,s.d.f()}},fr.preconnect=function(_,b){typeof _=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,s.d.C(_,b))},fr.prefetchDNS=function(_){typeof _=="string"&&s.d.D(_)},fr.preinit=function(_,b){if(typeof _=="string"&&b&&typeof b.as=="string"){var R=b.as,x=g(R,b.crossOrigin),N=typeof b.integrity=="string"?b.integrity:void 0,Q=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;R==="style"?s.d.S(_,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:x,integrity:N,fetchPriority:Q}):R==="script"&&s.d.X(_,{crossOrigin:x,integrity:N,fetchPriority:Q,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},fr.preinitModule=function(_,b){if(typeof _=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var R=g(b.as,b.crossOrigin);s.d.M(_,{crossOrigin:R,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&s.d.M(_)},fr.preload=function(_,b){if(typeof _=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var R=b.as,x=g(R,b.crossOrigin);s.d.L(_,R,{crossOrigin:x,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},fr.preloadModule=function(_,b){if(typeof _=="string")if(b){var R=g(b.as,b.crossOrigin);s.d.m(_,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:R,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else s.d.m(_)},fr.requestFormReset=function(_){s.d.r(_)},fr.unstable_batchedUpdates=function(_,b){return _(b)},fr.useFormState=function(_,b,R){return d.H.useFormState(_,b,R)},fr.useFormStatus=function(){return d.H.useHostTransitionStatus()},fr.version="19.2.1",fr}var I_;function kw(){if(I_)return jp.exports;I_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),jp.exports=Nw(),jp.exports}var O_;function Mw(){if(O_)return Qu;O_=1;var i=Dw(),e=xm(),n=kw();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function _(t){if(u(t)!==t)throw Error(s(188))}function b(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return _(f),t;if(m===l)return _(f),r;m=m.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=m;else{for(var T=!1,C=f.child;C;){if(C===a){T=!0,a=f,l=m;break}if(C===l){T=!0,l=f,a=m;break}C=C.sibling}if(!T){for(C=m.child;C;){if(C===a){T=!0,a=m,l=f;break}if(C===l){T=!0,l=m,a=f;break}C=C.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function R(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=R(t),r!==null)return r;t=t.sibling}return null}var x=Object.assign,N=Symbol.for("react.element"),Q=Symbol.for("react.transitional.element"),te=Symbol.for("react.portal"),de=Symbol.for("react.fragment"),be=Symbol.for("react.strict_mode"),je=Symbol.for("react.profiler"),Fe=Symbol.for("react.consumer"),Ve=Symbol.for("react.context"),rt=Symbol.for("react.forward_ref"),it=Symbol.for("react.suspense"),$e=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function B(t){return t===null||typeof t!="object"?null:(t=j&&t[j]||t["@@iterator"],typeof t=="function"?t:null)}var M=Symbol.for("react.client.reference");function ut(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===M?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case de:return"Fragment";case je:return"Profiler";case be:return"StrictMode";case it:return"Suspense";case $e:return"SuspenseList";case L:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case te:return"Portal";case Ve:return t.displayName||"Context";case Fe:return(t._context.displayName||"Context")+".Consumer";case rt:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case P:return r=t.displayName||null,r!==null?r:ut(t.type)||"Memo";case k:r=t._payload,t=t._init;try{return ut(t(r))}catch{}}return null}var Gt=Array.isArray,ce=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Be={pending:!1,data:null,method:null,action:null},ze=[],qe=-1;function H(t){return{current:t}}function pe(t){0>qe||(t.current=ze[qe],ze[qe]=null,qe--)}function xe(t,r){qe++,ze[qe]=t.current,t.current=r}var Pe=H(null),Xe=H(null),Ze=H(null),yt=H(null);function vn(t,r){switch(xe(Ze,r),xe(Xe,t),xe(Pe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Kv(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Kv(r),t=Gv(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}pe(Pe),xe(Pe,t)}function ke(){pe(Pe),pe(Xe),pe(Ze)}function ss(t){t.memoizedState!==null&&xe(yt,t);var r=Pe.current,a=Gv(r,t.type);r!==a&&(xe(Xe,t),xe(Pe,a))}function Hi(t){Xe.current===t&&(pe(Pe),pe(Xe)),yt.current===t&&(pe(yt),Hu._currentValue=Be)}var Rt,gi;function yi(t){if(Rt===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Rt=r&&r[1]||"",gi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rt+t+gi}var Qr=!1;function Ds(t,r){if(!t||Qr)return"";Qr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(ue){var oe=ue}Reflect.construct(t,[],ye)}else{try{ye.call()}catch(ue){oe=ue}t.call(ye.prototype)}}else{try{throw Error()}catch(ue){oe=ue}(ye=t())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(ue){if(ue&&oe&&typeof ue.stack=="string")return[ue.stack,oe.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),T=m[0],C=m[1];if(T&&C){var U=T.split(`
`),se=C.split(`
`);for(f=l=0;l<U.length&&!U[l].includes("DetermineComponentFrameRoot");)l++;for(;f<se.length&&!se[f].includes("DetermineComponentFrameRoot");)f++;if(l===U.length||f===se.length)for(l=U.length-1,f=se.length-1;1<=l&&0<=f&&U[l]!==se[f];)f--;for(;1<=l&&0<=f;l--,f--)if(U[l]!==se[f]){if(l!==1||f!==1)do if(l--,f--,0>f||U[l]!==se[f]){var fe=`
`+U[l].replace(" at new "," at ");return t.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",t.displayName)),fe}while(1<=l&&0<=f);break}}}finally{Qr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?yi(a):""}function wo(t,r){switch(t.tag){case 26:case 27:case 5:return yi(t.type);case 16:return yi("Lazy");case 13:return t.child!==r&&r!==null?yi("Suspense Fallback"):yi("Suspense");case 19:return yi("SuspenseList");case 0:case 15:return Ds(t.type,!1);case 11:return Ds(t.type.render,!1);case 1:return Ds(t.type,!0);case 31:return yi("Activity");default:return""}}function So(t){try{var r="",a=null;do r+=wo(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var pn=Object.prototype.hasOwnProperty,sn=i.unstable_scheduleCallback,jn=i.unstable_cancelCallback,ll=i.unstable_shouldYield,as=i.unstable_requestPaint,Hn=i.unstable_now,$r=i.unstable_getCurrentPriorityLevel,Xr=i.unstable_ImmediatePriority,Wr=i.unstable_UserBlockingPriority,vi=i.unstable_NormalPriority,Ns=i.unstable_LowPriority,ya=i.unstable_IdlePriority,ks=i.log,_i=i.unstable_setDisableYieldValue,or=null,_n=null;function bn(t){if(typeof ks=="function"&&_i(t),_n&&typeof _n.setStrictMode=="function")try{_n.setStrictMode(or,t)}catch{}}var Ne=Math.clz32?Math.clz32:Ms,os=Math.log,Cr=Math.LN2;function Ms(t){return t>>>=0,t===0?32:31-(os(t)/Cr|0)|0}var Re=256,Fi=262144,an=4194304;function Rr(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Jr(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var C=l&134217727;return C!==0?(l=C&~m,l!==0?f=Rr(l):(T&=C,T!==0?f=Rr(T):a||(a=C&~t,a!==0&&(f=Rr(a))))):(C=l&~m,C!==0?f=Rr(C):T!==0?f=Rr(T):a||(a=l&~t,a!==0&&(f=Rr(a)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,a=r&-r,m>=a||m===32&&(a&4194048)!==0)?r:f}function _r(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function cu(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ul(){var t=an;return an<<=1,(an&62914560)===0&&(an=4194304),t}function Wn(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function xr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ao(t,r,a,l,f,m){var T=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var C=t.entanglements,U=t.expirationTimes,se=t.hiddenUpdates;for(a=T&~a;0<a;){var fe=31-Ne(a),ye=1<<fe;C[fe]=0,U[fe]=-1;var oe=se[fe];if(oe!==null)for(se[fe]=null,fe=0;fe<oe.length;fe++){var ue=oe[fe];ue!==null&&(ue.lane&=-536870913)}a&=~ye}l!==0&&bi(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(T&~r))}function bi(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Ne(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Pt(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Ne(a),f=1<<l;f&r|t[l]&r&&(t[l]|=r),a&=~f}}function en(t,r){var a=r&-r;return a=(a&42)!==0?1:Vs(a),(a&(t.suspendedLanes|r))!==0?0:a}function Vs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ir(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ps(){var t=Ie.p;return t!==0?t:(t=window.event,t===void 0?32:m_(t.type))}function lr(t,r){var a=Ie.p;try{return Ie.p=t,r()}finally{Ie.p=a}}var Zr=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Zr,$t="__reactProps$"+Zr,Ln="__reactContainer$"+Zr,Ki="__reactEvents$"+Zr,hu="__reactListeners$"+Zr,ei="__reactHandles$"+Zr,Co="__reactResources$"+Zr,Fn="__reactMarker$"+Zr;function js(t){delete t[Lt],delete t[$t],delete t[Ki],delete t[hu],delete t[ei]}function Or(t){var r=t[Lt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Ln]||a[Lt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=Zv(t);t!==null;){if(a=t[Lt])return a;t=Zv(t)}return r}t=a,a=t.parentNode}return null}function Ot(t){if(t=t[Lt]||t[Ln]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function En(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function Rn(t){var r=t[Co];return r||(r=t[Co]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function on(t){t[Fn]=!0}var Ei=new Set,ls={};function Dr(t,r){Nr(t,r),Nr(t+"Capture",r)}function Nr(t,r){for(ls[t]=r,t=0;t<r.length;t++)Ei.add(r[t])}var ti=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),va={},us={};function Ro(t){return pn.call(us,t)?!0:pn.call(va,t)?!1:ti.test(t)?us[t]=!0:(va[t]=!0,!1)}function ct(t,r,a){if(Ro(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function ur(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function ln(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function un(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kr(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function _a(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(T){a=""+T,m.call(this,T)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(T){a=""+T},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Nt(t){if(!t._valueTracker){var r=kr(t)?"checked":"value";t._valueTracker=_a(t,r,""+t[r])}}function cs(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=kr(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function _t(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ni=/[\n"\\]/g;function xn(t){return t.replace(ni,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ri(t,r,a,l,f,m,T,C){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),r!=null?T==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+un(r)):t.value!==""+un(r)&&(t.value=""+un(r)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),r!=null?Ls(t,T,un(r)):a!=null?Ls(t,T,un(a)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?t.name=""+un(C):t.removeAttribute("name")}function ba(t,r,a,l,f,m,T,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Nt(t);return}a=a!=null?""+un(a):"",r=r!=null?""+un(r):a,C||r===t.value||(t.value=r),t.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=C?t.checked:!!l,t.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),Nt(t)}function Ls(t,r,a){r==="number"&&_t(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ii(t,r,a,l){if(t=t.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=r.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+un(a),r=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function xo(t,r,a){if(r!=null&&(r=""+un(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+un(a):""}function si(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Gt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=un(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Nt(t)}function Jn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var cl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vt(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||cl.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Ea(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&vt(t,f,l)}else for(var m in r)r.hasOwnProperty(m)&&vt(t,m,r[m])}function Ta(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ai(t){return mn.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function cr(){}var Mr=null;function br(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gi=null,Ut=null;function Kn(t){var r=Ot(t);if(r&&(t=r.stateNode)){var a=t[$t]||null;e:switch(t=r.stateNode,r.type){case"input":if(ri(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+xn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var f=l[$t]||null;if(!f)throw Error(s(90));ri(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&cs(l)}break e;case"textarea":xo(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&ii(t,!!a.multiple,r,!1)}}}var Ti=!1;function Vr(t,r,a){if(Ti)return t(r,a);Ti=!0;try{var l=t(r);return l}finally{if(Ti=!1,(Gi!==null||Ut!==null)&&(fh(),Gi&&(r=Gi,t=Ut,Ut=Gi=null,Kn(r),t)))for(r=0;r<t.length;r++)Kn(t[r])}}function Er(t,r){var a=t.stateNode;if(a===null)return null;var l=a[$t]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Us=!1;if(Tn)try{var mt={};Object.defineProperty(mt,"passive",{get:function(){Us=!0}}),window.addEventListener("test",mt,mt),window.removeEventListener("test",mt,mt)}catch{Us=!1}var Pr=null,wa=null,Yi=null;function Qi(){if(Yi)return Yi;var t,r=wa,a=r.length,l,f="value"in Pr?Pr.value:Pr.textContent,m=f.length;for(t=0;t<a&&r[t]===f[t];t++);var T=a-t;for(l=1;l<=T&&r[a-l]===f[m-l];l++);return Yi=f.slice(t,1<l?1-l:void 0)}function $i(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function wi(){return!0}function oi(){return!1}function cn(t){function r(a,l,f,m,T){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=T,this.currentTarget=null;for(var C in t)t.hasOwnProperty(C)&&(a=t[C],this[C]=a?a(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?wi:oi,this.isPropagationStopped=oi,this}return x(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=wi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=wi)},persist:function(){},isPersistent:wi}),r}var Xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Si=cn(Xi),li=x({},Xi,{view:0,detail:0}),hs=cn(li),Ai,Sa,Ci,Aa=x({},li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ci&&(Ci&&t.type==="mousemove"?(Ai=t.screenX-Ci.screenX,Sa=t.screenY-Ci.screenY):Sa=Ai=0,Ci=t),Ai)},movementY:function(t){return"movementY"in t?t.movementY:Sa}}),zs=cn(Aa),Wi=x({},Aa,{dataTransfer:0}),Io=cn(Wi),Bs=x({},li,{relatedTarget:0}),Ri=cn(Bs),fs=x({},Xi,{animationName:0,elapsedTime:0,pseudoElement:0}),Oo=cn(fs),Ca=x({},Xi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ji=cn(Ca),Ra=x({},Xi,{data:0}),jr=cn(Ra),xa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ia={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ds(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=wn[t])?!!r[t]:!1}function Lr(){return ds}var Gn=x({},li,{key:function(t){if(t.key){var r=xa[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=$i(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ia[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lr,charCode:function(t){return t.type==="keypress"?$i(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$i(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qs=cn(Gn),Do=x({},Aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xi=cn(Do),c=x({},li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lr}),v=cn(c),w=x({},Xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=cn(w),ne=x({},Aa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),le=cn(ne),Ae=x({},Xi,{newState:0,oldState:0}),st=cn(Ae),hn=[9,13,27,32],xt=Tn&&"CompositionEvent"in window,zt=null;Tn&&"documentMode"in document&&(zt=document.documentMode);var Ur=Tn&&"TextEvent"in window&&!zt,zr=Tn&&(!xt||zt&&8<zt&&11>=zt),Tr=" ",ui=!1;function ps(t,r){switch(t){case"keyup":return hn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hs=!1;function Nc(t,r){switch(t){case"compositionend":return Oa(r);case"keypress":return r.which!==32?null:(ui=!0,Tr);case"textInput":return t=r.data,t===Tr&&ui?null:t;default:return null}}function Gf(t,r){if(Hs)return t==="compositionend"||!xt&&ps(t,r)?(t=Qi(),Yi=wa=Pr=null,Hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return zr&&r.locale!=="ko"?null:r.data;default:return null}}var kc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fl(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!kc[t.type]:r==="textarea"}function fu(t,r,a,l){Gi?Ut?Ut.push(l):Ut=[l]:Gi=l,r=_h(r,"onChange"),0<r.length&&(a=new Si("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Da=null,No=null;function Yf(t){Uv(t,0)}function dl(t){var r=En(t);if(cs(r))return t}function ko(t,r){if(t==="change")return r}var Ii=!1;if(Tn){var Xt;if(Tn){var Na="oninput"in document;if(!Na){var wr=document.createElement("div");wr.setAttribute("oninput","return;"),Na=typeof wr.oninput=="function"}Xt=Na}else Xt=!1;Ii=Xt&&(!document.documentMode||9<document.documentMode)}function Mc(){Da&&(Da.detachEvent("onpropertychange",pl),No=Da=null)}function pl(t){if(t.propertyName==="value"&&dl(No)){var r=[];fu(r,No,t,br(t)),Vr(Yf,r)}}function Vc(t,r,a){t==="focusin"?(Mc(),Da=r,No=a,Da.attachEvent("onpropertychange",pl)):t==="focusout"&&Mc()}function Fs(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dl(No)}function du(t,r){if(t==="click")return dl(r)}function ka(t,r){if(t==="input"||t==="change")return dl(r)}function ms(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var hr=typeof Object.is=="function"?Object.is:ms;function h(t,r){if(hr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!pn.call(r,f)||!hr(t[f],r[f]))return!1}return!0}function p(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function y(t,r){var a=p(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=p(a)}}function E(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?E(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function S(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=_t(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=_t(t.document)}return r}function A(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var D=Tn&&"documentMode"in document&&11>=document.documentMode,V=null,q=null,F=null,W=!1;function z(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;W||V==null||V!==_t(l)||(l=V,"selectionStart"in l&&A(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),F&&h(F,l)||(F=l,l=_h(q,"onSelect"),0<l.length&&(r=new Si("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=V)))}function Z(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var K={animationend:Z("Animation","AnimationEnd"),animationiteration:Z("Animation","AnimationIteration"),animationstart:Z("Animation","AnimationStart"),transitionrun:Z("Transition","TransitionRun"),transitionstart:Z("Transition","TransitionStart"),transitioncancel:Z("Transition","TransitionCancel"),transitionend:Z("Transition","TransitionEnd")},$={},X={};Tn&&(X=document.createElement("div").style,"AnimationEvent"in window||(delete K.animationend.animation,delete K.animationiteration.animation,delete K.animationstart.animation),"TransitionEvent"in window||delete K.transitionend.transition);function J(t){if($[t])return $[t];if(!K[t])return t;var r=K[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in X)return $[t]=r[a];return t}var re=J("animationend"),ae=J("animationiteration"),he=J("animationstart"),ge=J("transitionrun"),Se=J("transitionstart"),De=J("transitioncancel"),Te=J("transitionend"),Ce=new Map,Oe="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Oe.push("scrollEnd");function we(t,r){Ce.set(t,r),Dr(r,[t])}var Me=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ge=[],tt=0,ht=0;function Yn(){for(var t=tt,r=ht=tt=0;r<t;){var a=Ge[r];Ge[r++]=null;var l=Ge[r];Ge[r++]=null;var f=Ge[r];Ge[r++]=null;var m=Ge[r];if(Ge[r++]=null,l!==null&&f!==null){var T=l.pending;T===null?f.next=f:(f.next=T.next,T.next=f),l.pending=f}m!==0&&Mo(a,f,m)}}function et(t,r,a,l){Ge[tt++]=t,Ge[tt++]=r,Ge[tt++]=a,Ge[tt++]=l,ht|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function In(t,r,a,l){return et(t,r,a,l),On(t)}function tn(t,r){return et(t,null,null,r),On(t)}function Mo(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-Ne(a),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[r]:l.push(r),r.lane=a|536870912),m):null}function On(t){if(50<Pu)throw Pu=0,np=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Br={};function pu(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(t,r,a,l){return new pu(t,r,a,l)}function Qf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ks(t,r){var a=t.alternate;return a===null?(a=ci(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Eg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Pc(t,r,a,l,f,m){var T=0;if(l=t,typeof t=="function")Qf(t)&&(T=1);else if(typeof t=="string")T=pw(t,a,Pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case L:return t=ci(31,a,r,f),t.elementType=L,t.lanes=m,t;case de:return Vo(a.children,f,m,r);case be:T=8,f|=24;break;case je:return t=ci(12,a,r,f|2),t.elementType=je,t.lanes=m,t;case it:return t=ci(13,a,r,f),t.elementType=it,t.lanes=m,t;case $e:return t=ci(19,a,r,f),t.elementType=$e,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ve:T=10;break e;case Fe:T=9;break e;case rt:T=11;break e;case P:T=14;break e;case k:T=16,l=null;break e}T=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=ci(T,a,r,f),r.elementType=t,r.type=l,r.lanes=m,r}function Vo(t,r,a,l){return t=ci(7,t,l,r),t.lanes=a,t}function $f(t,r,a){return t=ci(6,t,null,r),t.lanes=a,t}function Tg(t){var r=ci(18,null,null,0);return r.stateNode=t,r}function Xf(t,r,a){return r=ci(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var wg=new WeakMap;function Oi(t,r){if(typeof t=="object"&&t!==null){var a=wg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:So(r)},wg.set(t,r),r)}return{value:t,source:r,stack:So(r)}}var ml=[],gl=0,jc=null,mu=0,Di=[],Ni=0,Ma=null,gs=1,ys="";function Gs(t,r){ml[gl++]=mu,ml[gl++]=jc,jc=t,mu=r}function Sg(t,r,a){Di[Ni++]=gs,Di[Ni++]=ys,Di[Ni++]=Ma,Ma=t;var l=gs;t=ys;var f=32-Ne(l)-1;l&=~(1<<f),a+=1;var m=32-Ne(r)+f;if(30<m){var T=f-f%5;m=(l&(1<<T)-1).toString(32),l>>=T,f-=T,gs=1<<32-Ne(r)+f|a<<f|l,ys=m+t}else gs=1<<m|a<<f|l,ys=t}function Wf(t){t.return!==null&&(Gs(t,1),Sg(t,1,0))}function Jf(t){for(;t===jc;)jc=ml[--gl],ml[gl]=null,mu=ml[--gl],ml[gl]=null;for(;t===Ma;)Ma=Di[--Ni],Di[Ni]=null,ys=Di[--Ni],Di[Ni]=null,gs=Di[--Ni],Di[Ni]=null}function Ag(t,r){Di[Ni++]=gs,Di[Ni++]=ys,Di[Ni++]=Ma,gs=r.id,ys=r.overflow,Ma=t}var Zn=null,Wt=null,It=!1,Va=null,ki=!1,Zf=Error(s(519));function Pa(t){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gu(Oi(r,t)),Zf}function Cg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Lt]=t,r[$t]=l,a){case"dialog":Et("cancel",r),Et("close",r);break;case"iframe":case"object":case"embed":Et("load",r);break;case"video":case"audio":for(a=0;a<Lu.length;a++)Et(Lu[a],r);break;case"source":Et("error",r);break;case"img":case"image":case"link":Et("error",r),Et("load",r);break;case"details":Et("toggle",r);break;case"input":Et("invalid",r),ba(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Et("invalid",r);break;case"textarea":Et("invalid",r),si(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||Hv(r.textContent,a)?(l.popover!=null&&(Et("beforetoggle",r),Et("toggle",r)),l.onScroll!=null&&Et("scroll",r),l.onScrollEnd!=null&&Et("scrollend",r),l.onClick!=null&&(r.onclick=cr),r=!0):r=!1,r||Pa(t,!0)}function Rg(t){for(Zn=t.return;Zn;)switch(Zn.tag){case 5:case 31:case 13:ki=!1;return;case 27:case 3:ki=!0;return;default:Zn=Zn.return}}function yl(t){if(t!==Zn)return!1;if(!It)return Rg(t),It=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||yp(t.type,t.memoizedProps)),a=!a),a&&Wt&&Pa(t),Rg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Wt=Jv(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Wt=Jv(t)}else r===27?(r=Wt,Xa(t.type)?(t=Tp,Tp=null,Wt=t):Wt=r):Wt=Zn?Vi(t.stateNode.nextSibling):null;return!0}function Po(){Wt=Zn=null,It=!1}function ed(){var t=Va;return t!==null&&(Kr===null?Kr=t:Kr.push.apply(Kr,t),Va=null),t}function gu(t){Va===null?Va=[t]:Va.push(t)}var td=H(null),jo=null,Ys=null;function ja(t,r,a){xe(td,r._currentValue),r._currentValue=a}function Qs(t){t._currentValue=td.current,pe(td)}function nd(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function rd(t,r,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var T=f.child;m=m.firstContext;e:for(;m!==null;){var C=m;m=f;for(var U=0;U<r.length;U++)if(C.context===r[U]){m.lanes|=a,C=m.alternate,C!==null&&(C.lanes|=a),nd(m.return,a,t),l||(T=null);break e}m=C.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(s(341));T.lanes|=a,m=T.alternate,m!==null&&(m.lanes|=a),nd(T,a,t),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===t){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function vl(t,r,a,l){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var C=f.type;hr(f.pendingProps.value,T.value)||(t!==null?t.push(C):t=[C])}}else if(f===yt.current){if(T=f.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Hu):t=[Hu])}f=f.return}t!==null&&rd(r,t,a,l),r.flags|=262144}function Lc(t){for(t=t.firstContext;t!==null;){if(!hr(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Lo(t){jo=t,Ys=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function er(t){return xg(jo,t)}function Uc(t,r){return jo===null&&Lo(t),xg(t,r)}function xg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Ys===null){if(t===null)throw Error(s(308));Ys=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Ys=Ys.next=r;return a}var cT=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},hT=i.unstable_scheduleCallback,fT=i.unstable_NormalPriority,Dn={$$typeof:Ve,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function id(){return{controller:new cT,data:new Map,refCount:0}}function yu(t){t.refCount--,t.refCount===0&&hT(fT,function(){t.controller.abort()})}var vu=null,sd=0,_l=0,bl=null;function dT(t,r){if(vu===null){var a=vu=[];sd=0,_l=lp(),bl={status:"pending",value:void 0,then:function(l){a.push(l)}}}return sd++,r.then(Ig,Ig),r}function Ig(){if(--sd===0&&vu!==null){bl!==null&&(bl.status="fulfilled");var t=vu;vu=null,_l=0,bl=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function pT(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Og=ce.S;ce.S=function(t,r){dv=Hn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&dT(t,r),Og!==null&&Og(t,r)};var Uo=H(null);function ad(){var t=Uo.current;return t!==null?t:Yt.pooledCache}function zc(t,r){r===null?xe(Uo,Uo.current):xe(Uo,r.pool)}function Dg(){var t=ad();return t===null?null:{parent:Dn._currentValue,pool:t}}var El=Error(s(460)),od=Error(s(474)),Bc=Error(s(542)),qc={then:function(){}};function Ng(t){return t=t.status,t==="fulfilled"||t==="rejected"}function kg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(cr,cr),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Vg(t),t;default:if(typeof r.status=="string")r.then(cr,cr);else{if(t=Yt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Vg(t),t}throw Bo=r,El}}function zo(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Bo=a,El):a}}var Bo=null;function Mg(){if(Bo===null)throw Error(s(459));var t=Bo;return Bo=null,t}function Vg(t){if(t===El||t===Bc)throw Error(s(483))}var Tl=null,_u=0;function Hc(t){var r=_u;return _u+=1,Tl===null&&(Tl=[]),kg(Tl,t,r)}function bu(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Fc(t,r){throw r.$$typeof===N?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Pg(t){function r(ee,G){if(t){var ie=ee.deletions;ie===null?(ee.deletions=[G],ee.flags|=16):ie.push(G)}}function a(ee,G){if(!t)return null;for(;G!==null;)r(ee,G),G=G.sibling;return null}function l(ee){for(var G=new Map;ee!==null;)ee.key!==null?G.set(ee.key,ee):G.set(ee.index,ee),ee=ee.sibling;return G}function f(ee,G){return ee=Ks(ee,G),ee.index=0,ee.sibling=null,ee}function m(ee,G,ie){return ee.index=ie,t?(ie=ee.alternate,ie!==null?(ie=ie.index,ie<G?(ee.flags|=67108866,G):ie):(ee.flags|=67108866,G)):(ee.flags|=1048576,G)}function T(ee){return t&&ee.alternate===null&&(ee.flags|=67108866),ee}function C(ee,G,ie,me){return G===null||G.tag!==6?(G=$f(ie,ee.mode,me),G.return=ee,G):(G=f(G,ie),G.return=ee,G)}function U(ee,G,ie,me){var Ye=ie.type;return Ye===de?fe(ee,G,ie.props.children,me,ie.key):G!==null&&(G.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===k&&zo(Ye)===G.type)?(G=f(G,ie.props),bu(G,ie),G.return=ee,G):(G=Pc(ie.type,ie.key,ie.props,null,ee.mode,me),bu(G,ie),G.return=ee,G)}function se(ee,G,ie,me){return G===null||G.tag!==4||G.stateNode.containerInfo!==ie.containerInfo||G.stateNode.implementation!==ie.implementation?(G=Xf(ie,ee.mode,me),G.return=ee,G):(G=f(G,ie.children||[]),G.return=ee,G)}function fe(ee,G,ie,me,Ye){return G===null||G.tag!==7?(G=Vo(ie,ee.mode,me,Ye),G.return=ee,G):(G=f(G,ie),G.return=ee,G)}function ye(ee,G,ie){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=$f(""+G,ee.mode,ie),G.return=ee,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Q:return ie=Pc(G.type,G.key,G.props,null,ee.mode,ie),bu(ie,G),ie.return=ee,ie;case te:return G=Xf(G,ee.mode,ie),G.return=ee,G;case k:return G=zo(G),ye(ee,G,ie)}if(Gt(G)||B(G))return G=Vo(G,ee.mode,ie,null),G.return=ee,G;if(typeof G.then=="function")return ye(ee,Hc(G),ie);if(G.$$typeof===Ve)return ye(ee,Uc(ee,G),ie);Fc(ee,G)}return null}function oe(ee,G,ie,me){var Ye=G!==null?G.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Ye!==null?null:C(ee,G,""+ie,me);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case Q:return ie.key===Ye?U(ee,G,ie,me):null;case te:return ie.key===Ye?se(ee,G,ie,me):null;case k:return ie=zo(ie),oe(ee,G,ie,me)}if(Gt(ie)||B(ie))return Ye!==null?null:fe(ee,G,ie,me,null);if(typeof ie.then=="function")return oe(ee,G,Hc(ie),me);if(ie.$$typeof===Ve)return oe(ee,G,Uc(ee,ie),me);Fc(ee,ie)}return null}function ue(ee,G,ie,me,Ye){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return ee=ee.get(ie)||null,C(G,ee,""+me,Ye);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case Q:return ee=ee.get(me.key===null?ie:me.key)||null,U(G,ee,me,Ye);case te:return ee=ee.get(me.key===null?ie:me.key)||null,se(G,ee,me,Ye);case k:return me=zo(me),ue(ee,G,ie,me,Ye)}if(Gt(me)||B(me))return ee=ee.get(ie)||null,fe(G,ee,me,Ye,null);if(typeof me.then=="function")return ue(ee,G,ie,Hc(me),Ye);if(me.$$typeof===Ve)return ue(ee,G,ie,Uc(G,me),Ye);Fc(G,me)}return null}function Ue(ee,G,ie,me){for(var Ye=null,kt=null,He=G,pt=G=0,wt=null;He!==null&&pt<ie.length;pt++){He.index>pt?(wt=He,He=null):wt=He.sibling;var Mt=oe(ee,He,ie[pt],me);if(Mt===null){He===null&&(He=wt);break}t&&He&&Mt.alternate===null&&r(ee,He),G=m(Mt,G,pt),kt===null?Ye=Mt:kt.sibling=Mt,kt=Mt,He=wt}if(pt===ie.length)return a(ee,He),It&&Gs(ee,pt),Ye;if(He===null){for(;pt<ie.length;pt++)He=ye(ee,ie[pt],me),He!==null&&(G=m(He,G,pt),kt===null?Ye=He:kt.sibling=He,kt=He);return It&&Gs(ee,pt),Ye}for(He=l(He);pt<ie.length;pt++)wt=ue(He,ee,pt,ie[pt],me),wt!==null&&(t&&wt.alternate!==null&&He.delete(wt.key===null?pt:wt.key),G=m(wt,G,pt),kt===null?Ye=wt:kt.sibling=wt,kt=wt);return t&&He.forEach(function(to){return r(ee,to)}),It&&Gs(ee,pt),Ye}function We(ee,G,ie,me){if(ie==null)throw Error(s(151));for(var Ye=null,kt=null,He=G,pt=G=0,wt=null,Mt=ie.next();He!==null&&!Mt.done;pt++,Mt=ie.next()){He.index>pt?(wt=He,He=null):wt=He.sibling;var to=oe(ee,He,Mt.value,me);if(to===null){He===null&&(He=wt);break}t&&He&&to.alternate===null&&r(ee,He),G=m(to,G,pt),kt===null?Ye=to:kt.sibling=to,kt=to,He=wt}if(Mt.done)return a(ee,He),It&&Gs(ee,pt),Ye;if(He===null){for(;!Mt.done;pt++,Mt=ie.next())Mt=ye(ee,Mt.value,me),Mt!==null&&(G=m(Mt,G,pt),kt===null?Ye=Mt:kt.sibling=Mt,kt=Mt);return It&&Gs(ee,pt),Ye}for(He=l(He);!Mt.done;pt++,Mt=ie.next())Mt=ue(He,ee,pt,Mt.value,me),Mt!==null&&(t&&Mt.alternate!==null&&He.delete(Mt.key===null?pt:Mt.key),G=m(Mt,G,pt),kt===null?Ye=Mt:kt.sibling=Mt,kt=Mt);return t&&He.forEach(function(Aw){return r(ee,Aw)}),It&&Gs(ee,pt),Ye}function Kt(ee,G,ie,me){if(typeof ie=="object"&&ie!==null&&ie.type===de&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case Q:e:{for(var Ye=ie.key;G!==null;){if(G.key===Ye){if(Ye=ie.type,Ye===de){if(G.tag===7){a(ee,G.sibling),me=f(G,ie.props.children),me.return=ee,ee=me;break e}}else if(G.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===k&&zo(Ye)===G.type){a(ee,G.sibling),me=f(G,ie.props),bu(me,ie),me.return=ee,ee=me;break e}a(ee,G);break}else r(ee,G);G=G.sibling}ie.type===de?(me=Vo(ie.props.children,ee.mode,me,ie.key),me.return=ee,ee=me):(me=Pc(ie.type,ie.key,ie.props,null,ee.mode,me),bu(me,ie),me.return=ee,ee=me)}return T(ee);case te:e:{for(Ye=ie.key;G!==null;){if(G.key===Ye)if(G.tag===4&&G.stateNode.containerInfo===ie.containerInfo&&G.stateNode.implementation===ie.implementation){a(ee,G.sibling),me=f(G,ie.children||[]),me.return=ee,ee=me;break e}else{a(ee,G);break}else r(ee,G);G=G.sibling}me=Xf(ie,ee.mode,me),me.return=ee,ee=me}return T(ee);case k:return ie=zo(ie),Kt(ee,G,ie,me)}if(Gt(ie))return Ue(ee,G,ie,me);if(B(ie)){if(Ye=B(ie),typeof Ye!="function")throw Error(s(150));return ie=Ye.call(ie),We(ee,G,ie,me)}if(typeof ie.then=="function")return Kt(ee,G,Hc(ie),me);if(ie.$$typeof===Ve)return Kt(ee,G,Uc(ee,ie),me);Fc(ee,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,G!==null&&G.tag===6?(a(ee,G.sibling),me=f(G,ie),me.return=ee,ee=me):(a(ee,G),me=$f(ie,ee.mode,me),me.return=ee,ee=me),T(ee)):a(ee,G)}return function(ee,G,ie,me){try{_u=0;var Ye=Kt(ee,G,ie,me);return Tl=null,Ye}catch(He){if(He===El||He===Bc)throw He;var kt=ci(29,He,null,ee.mode);return kt.lanes=me,kt.return=ee,kt}finally{}}}var qo=Pg(!0),jg=Pg(!1),La=!1;function ld(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ud(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ua(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function za(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Vt&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=On(t),Mo(t,null,a),r}return et(t,l,r,a),On(t)}function Eu(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Pt(t,a)}}function cd(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=T:m=m.next=T,a=a.next}while(a!==null);m===null?f=m=r:m=m.next=r}else f=m=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var hd=!1;function Tu(){if(hd){var t=bl;if(t!==null)throw t}}function wu(t,r,a,l){hd=!1;var f=t.updateQueue;La=!1;var m=f.firstBaseUpdate,T=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var U=C,se=U.next;U.next=null,T===null?m=se:T.next=se,T=U;var fe=t.alternate;fe!==null&&(fe=fe.updateQueue,C=fe.lastBaseUpdate,C!==T&&(C===null?fe.firstBaseUpdate=se:C.next=se,fe.lastBaseUpdate=U))}if(m!==null){var ye=f.baseState;T=0,fe=se=U=null,C=m;do{var oe=C.lane&-536870913,ue=oe!==C.lane;if(ue?(Tt&oe)===oe:(l&oe)===oe){oe!==0&&oe===_l&&(hd=!0),fe!==null&&(fe=fe.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Ue=t,We=C;oe=r;var Kt=a;switch(We.tag){case 1:if(Ue=We.payload,typeof Ue=="function"){ye=Ue.call(Kt,ye,oe);break e}ye=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=We.payload,oe=typeof Ue=="function"?Ue.call(Kt,ye,oe):Ue,oe==null)break e;ye=x({},ye,oe);break e;case 2:La=!0}}oe=C.callback,oe!==null&&(t.flags|=64,ue&&(t.flags|=8192),ue=f.callbacks,ue===null?f.callbacks=[oe]:ue.push(oe))}else ue={lane:oe,tag:C.tag,payload:C.payload,callback:C.callback,next:null},fe===null?(se=fe=ue,U=ye):fe=fe.next=ue,T|=oe;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;ue=C,C=ue.next,ue.next=null,f.lastBaseUpdate=ue,f.shared.pending=null}}while(!0);fe===null&&(U=ye),f.baseState=U,f.firstBaseUpdate=se,f.lastBaseUpdate=fe,m===null&&(f.shared.lanes=0),Ka|=T,t.lanes=T,t.memoizedState=ye}}function Lg(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function Ug(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Lg(a[t],r)}var wl=H(null),Kc=H(0);function zg(t,r){t=ra,xe(Kc,t),xe(wl,r),ra=t|r.baseLanes}function fd(){xe(Kc,ra),xe(wl,wl.current)}function dd(){ra=Kc.current,pe(wl),pe(Kc)}var hi=H(null),Mi=null;function Ba(t){var r=t.alternate;xe(Sn,Sn.current&1),xe(hi,t),Mi===null&&(r===null||wl.current!==null||r.memoizedState!==null)&&(Mi=t)}function pd(t){xe(Sn,Sn.current),xe(hi,t),Mi===null&&(Mi=t)}function Bg(t){t.tag===22?(xe(Sn,Sn.current),xe(hi,t),Mi===null&&(Mi=t)):qa()}function qa(){xe(Sn,Sn.current),xe(hi,hi.current)}function fi(t){pe(hi),Mi===t&&(Mi=null),pe(Sn)}var Sn=H(0);function Gc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||bp(a)||Ep(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var $s=0,ft=null,Ht=null,Nn=null,Yc=!1,Sl=!1,Ho=!1,Qc=0,Su=0,Al=null,mT=0;function gn(){throw Error(s(321))}function md(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!hr(t[a],r[a]))return!1;return!0}function gd(t,r,a,l,f,m){return $s=m,ft=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ce.H=t===null||t.memoizedState===null?Sy:Dd,Ho=!1,m=a(l,f),Ho=!1,Sl&&(m=Hg(r,a,l,f)),qg(t),m}function qg(t){ce.H=Ru;var r=Ht!==null&&Ht.next!==null;if($s=0,Nn=Ht=ft=null,Yc=!1,Su=0,Al=null,r)throw Error(s(300));t===null||kn||(t=t.dependencies,t!==null&&Lc(t)&&(kn=!0))}function Hg(t,r,a,l){ft=t;var f=0;do{if(Sl&&(Al=null),Su=0,Sl=!1,25<=f)throw Error(s(301));if(f+=1,Nn=Ht=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}ce.H=Ay,m=r(a,l)}while(Sl);return m}function gT(){var t=ce.H,r=t.useState()[0];return r=typeof r.then=="function"?Au(r):r,t=t.useState()[0],(Ht!==null?Ht.memoizedState:null)!==t&&(ft.flags|=1024),r}function yd(){var t=Qc!==0;return Qc=0,t}function vd(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function _d(t){if(Yc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Yc=!1}$s=0,Nn=Ht=ft=null,Sl=!1,Su=Qc=0,Al=null}function Sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?ft.memoizedState=Nn=t:Nn=Nn.next=t,Nn}function An(){if(Ht===null){var t=ft.alternate;t=t!==null?t.memoizedState:null}else t=Ht.next;var r=Nn===null?ft.memoizedState:Nn.next;if(r!==null)Nn=r,Ht=t;else{if(t===null)throw ft.alternate===null?Error(s(467)):Error(s(310));Ht=t,t={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Nn===null?ft.memoizedState=Nn=t:Nn=Nn.next=t}return Nn}function $c(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Au(t){var r=Su;return Su+=1,Al===null&&(Al=[]),t=kg(Al,t,r),r=ft,(Nn===null?r.memoizedState:Nn.next)===null&&(r=r.alternate,ce.H=r===null||r.memoizedState===null?Sy:Dd),t}function Xc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Au(t);if(t.$$typeof===Ve)return er(t)}throw Error(s(438,String(t)))}function bd(t){var r=null,a=ft.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=ft.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=$c(),ft.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=Y;return r.index++,a}function Xs(t,r){return typeof r=="function"?r(t):r}function Wc(t){var r=An();return Ed(r,Ht,t)}function Ed(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var T=f.next;f.next=m.next,m.next=T}r.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var C=T=null,U=null,se=r,fe=!1;do{var ye=se.lane&-536870913;if(ye!==se.lane?(Tt&ye)===ye:($s&ye)===ye){var oe=se.revertLane;if(oe===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),ye===_l&&(fe=!0);else if(($s&oe)===oe){se=se.next,oe===_l&&(fe=!0);continue}else ye={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},U===null?(C=U=ye,T=m):U=U.next=ye,ft.lanes|=oe,Ka|=oe;ye=se.action,Ho&&a(m,ye),m=se.hasEagerState?se.eagerState:a(m,ye)}else oe={lane:ye,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},U===null?(C=U=oe,T=m):U=U.next=oe,ft.lanes|=ye,Ka|=ye;se=se.next}while(se!==null&&se!==r);if(U===null?T=m:U.next=C,!hr(m,t.memoizedState)&&(kn=!0,fe&&(a=bl,a!==null)))throw a;t.memoizedState=m,t.baseState=T,t.baseQueue=U,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Td(t){var r=An(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,m=r.memoizedState;if(f!==null){a.pending=null;var T=f=f.next;do m=t(m,T.action),T=T.next;while(T!==f);hr(m,r.memoizedState)||(kn=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,l]}function Fg(t,r,a){var l=ft,f=An(),m=It;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=r();var T=!hr((Ht||f).memoizedState,a);if(T&&(f.memoizedState=a,kn=!0),f=f.queue,Ad(Yg.bind(null,l,f,t),[t]),f.getSnapshot!==r||T||Nn!==null&&Nn.memoizedState.tag&1){if(l.flags|=2048,Cl(9,{destroy:void 0},Gg.bind(null,l,f,a,r),null),Yt===null)throw Error(s(349));m||($s&127)!==0||Kg(l,r,a)}return a}function Kg(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=ft.updateQueue,r===null?(r=$c(),ft.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Gg(t,r,a,l){r.value=a,r.getSnapshot=l,Qg(r)&&$g(t)}function Yg(t,r,a){return a(function(){Qg(r)&&$g(t)})}function Qg(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!hr(t,a)}catch{return!0}}function $g(t){var r=tn(t,2);r!==null&&Gr(r,t,2)}function wd(t){var r=Sr();if(typeof t=="function"){var a=t;if(t=a(),Ho){bn(!0);try{a()}finally{bn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:t},r}function Xg(t,r,a,l){return t.baseState=a,Ed(t,Ht,typeof l=="function"?l:Xs)}function yT(t,r,a,l,f){if(eh(t))throw Error(s(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){m.listeners.push(T)}};ce.T!==null?a(!0):m.isTransition=!1,l(m),a=r.pending,a===null?(m.next=r.pending=m,Wg(r,m)):(m.next=a.next,r.pending=a.next=m)}}function Wg(t,r){var a=r.action,l=r.payload,f=t.state;if(r.isTransition){var m=ce.T,T={};ce.T=T;try{var C=a(f,l),U=ce.S;U!==null&&U(T,C),Jg(t,r,C)}catch(se){Sd(t,r,se)}finally{m!==null&&T.types!==null&&(m.types=T.types),ce.T=m}}else try{m=a(f,l),Jg(t,r,m)}catch(se){Sd(t,r,se)}}function Jg(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Zg(t,r,l)},function(l){return Sd(t,r,l)}):Zg(t,r,a)}function Zg(t,r,a){r.status="fulfilled",r.value=a,ey(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Wg(t,a)))}function Sd(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,ey(r),r=r.next;while(r!==l)}t.action=null}function ey(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function ty(t,r){return r}function ny(t,r){if(It){var a=Yt.formState;if(a!==null){e:{var l=ft;if(It){if(Wt){t:{for(var f=Wt,m=ki;f.nodeType!==8;){if(!m){f=null;break t}if(f=Vi(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Wt=Vi(f.nextSibling),l=f.data==="F!";break e}}Pa(l)}l=!1}l&&(r=a[0])}}return a=Sr(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ty,lastRenderedState:r},a.queue=l,a=Ey.bind(null,ft,l),l.dispatch=a,l=wd(!1),m=Od.bind(null,ft,!1,l.queue),l=Sr(),f={state:r,dispatch:null,action:t,pending:null},l.queue=f,a=yT.bind(null,ft,f,m,a),f.dispatch=a,l.memoizedState=t,[r,a,!1]}function ry(t){var r=An();return iy(r,Ht,t)}function iy(t,r,a){if(r=Ed(t,r,ty)[0],t=Wc(Xs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Au(r)}catch(T){throw T===El?Bc:T}else l=r;r=An();var f=r.queue,m=f.dispatch;return a!==r.memoizedState&&(ft.flags|=2048,Cl(9,{destroy:void 0},vT.bind(null,f,a),null)),[l,m,t]}function vT(t,r){t.action=r}function sy(t){var r=An(),a=Ht;if(a!==null)return iy(r,a,t);An(),r=r.memoizedState,a=An();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Cl(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=ft.updateQueue,r===null&&(r=$c(),ft.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function ay(){return An().memoizedState}function Jc(t,r,a,l){var f=Sr();ft.flags|=t,f.memoizedState=Cl(1|r,{destroy:void 0},a,l===void 0?null:l)}function Zc(t,r,a,l){var f=An();l=l===void 0?null:l;var m=f.memoizedState.inst;Ht!==null&&l!==null&&md(l,Ht.memoizedState.deps)?f.memoizedState=Cl(r,m,a,l):(ft.flags|=t,f.memoizedState=Cl(1|r,m,a,l))}function oy(t,r){Jc(8390656,8,t,r)}function Ad(t,r){Zc(2048,8,t,r)}function _T(t){ft.flags|=4;var r=ft.updateQueue;if(r===null)r=$c(),ft.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function ly(t){var r=An().memoizedState;return _T({ref:r,nextImpl:t}),function(){if((Vt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function uy(t,r){return Zc(4,2,t,r)}function cy(t,r){return Zc(4,4,t,r)}function hy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function fy(t,r,a){a=a!=null?a.concat([t]):null,Zc(4,4,hy.bind(null,r,t),a)}function Cd(){}function dy(t,r){var a=An();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&md(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function py(t,r){var a=An();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&md(r,l[1]))return l[0];if(l=t(),Ho){bn(!0);try{t()}finally{bn(!1)}}return a.memoizedState=[l,r],l}function Rd(t,r,a){return a===void 0||($s&1073741824)!==0&&(Tt&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=mv(),ft.lanes|=t,Ka|=t,a)}function my(t,r,a,l){return hr(a,r)?a:wl.current!==null?(t=Rd(t,a,l),hr(t,r)||(kn=!0),t):($s&42)===0||($s&1073741824)!==0&&(Tt&261930)===0?(kn=!0,t.memoizedState=a):(t=mv(),ft.lanes|=t,Ka|=t,r)}function gy(t,r,a,l,f){var m=Ie.p;Ie.p=m!==0&&8>m?m:8;var T=ce.T,C={};ce.T=C,Od(t,!1,r,a);try{var U=f(),se=ce.S;if(se!==null&&se(C,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var fe=pT(U,l);Cu(t,r,fe,mi(t))}else Cu(t,r,l,mi(t))}catch(ye){Cu(t,r,{then:function(){},status:"rejected",reason:ye},mi())}finally{Ie.p=m,T!==null&&C.types!==null&&(T.types=C.types),ce.T=T}}function bT(){}function xd(t,r,a,l){if(t.tag!==5)throw Error(s(476));var f=yy(t).queue;gy(t,f,r,Be,a===null?bT:function(){return vy(t),a(l)})}function yy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:Be,baseState:Be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:Be},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function vy(t){var r=yy(t);r.next===null&&(r=t.alternate.memoizedState),Cu(t,r.next.queue,{},mi())}function Id(){return er(Hu)}function _y(){return An().memoizedState}function by(){return An().memoizedState}function ET(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=mi();t=Ua(a);var l=za(r,t,a);l!==null&&(Gr(l,r,a),Eu(l,r,a)),r={cache:id()},t.payload=r;return}r=r.return}}function TT(t,r,a){var l=mi();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},eh(t)?Ty(r,a):(a=In(t,r,a,l),a!==null&&(Gr(a,t,l),wy(a,r,l)))}function Ey(t,r,a){var l=mi();Cu(t,r,a,l)}function Cu(t,r,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(eh(t))Ty(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var T=r.lastRenderedState,C=m(T,a);if(f.hasEagerState=!0,f.eagerState=C,hr(C,T))return et(t,r,f,0),Yt===null&&Yn(),!1}catch{}finally{}if(a=In(t,r,f,l),a!==null)return Gr(a,t,l),wy(a,r,l),!0}return!1}function Od(t,r,a,l){if(l={lane:2,revertLane:lp(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},eh(t)){if(r)throw Error(s(479))}else r=In(t,a,l,2),r!==null&&Gr(r,t,2)}function eh(t){var r=t.alternate;return t===ft||r!==null&&r===ft}function Ty(t,r){Sl=Yc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function wy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Pt(t,a)}}var Ru={readContext:er,use:Xc,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useLayoutEffect:gn,useInsertionEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useSyncExternalStore:gn,useId:gn,useHostTransitionStatus:gn,useFormState:gn,useActionState:gn,useOptimistic:gn,useMemoCache:gn,useCacheRefresh:gn};Ru.useEffectEvent=gn;var Sy={readContext:er,use:Xc,useCallback:function(t,r){return Sr().memoizedState=[t,r===void 0?null:r],t},useContext:er,useEffect:oy,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Jc(4194308,4,hy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Jc(4194308,4,t,r)},useInsertionEffect:function(t,r){Jc(4,2,t,r)},useMemo:function(t,r){var a=Sr();r=r===void 0?null:r;var l=t();if(Ho){bn(!0);try{t()}finally{bn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=Sr();if(a!==void 0){var f=a(r);if(Ho){bn(!0);try{a(r)}finally{bn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=TT.bind(null,ft,t),[l.memoizedState,t]},useRef:function(t){var r=Sr();return t={current:t},r.memoizedState=t},useState:function(t){t=wd(t);var r=t.queue,a=Ey.bind(null,ft,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Cd,useDeferredValue:function(t,r){var a=Sr();return Rd(a,t,r)},useTransition:function(){var t=wd(!1);return t=gy.bind(null,ft,t.queue,!0,!1),Sr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=ft,f=Sr();if(It){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),Yt===null)throw Error(s(349));(Tt&127)!==0||Kg(l,r,a)}f.memoizedState=a;var m={value:a,getSnapshot:r};return f.queue=m,oy(Yg.bind(null,l,m,t),[t]),l.flags|=2048,Cl(9,{destroy:void 0},Gg.bind(null,l,m,a,r),null),a},useId:function(){var t=Sr(),r=Yt.identifierPrefix;if(It){var a=ys,l=gs;a=(l&~(1<<32-Ne(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Qc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=mT++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Id,useFormState:ny,useActionState:ny,useOptimistic:function(t){var r=Sr();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Od.bind(null,ft,!0,a),a.dispatch=r,[t,r]},useMemoCache:bd,useCacheRefresh:function(){return Sr().memoizedState=ET.bind(null,ft)},useEffectEvent:function(t){var r=Sr(),a={impl:t};return r.memoizedState=a,function(){if((Vt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Dd={readContext:er,use:Xc,useCallback:dy,useContext:er,useEffect:Ad,useImperativeHandle:fy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:py,useReducer:Wc,useRef:ay,useState:function(){return Wc(Xs)},useDebugValue:Cd,useDeferredValue:function(t,r){var a=An();return my(a,Ht.memoizedState,t,r)},useTransition:function(){var t=Wc(Xs)[0],r=An().memoizedState;return[typeof t=="boolean"?t:Au(t),r]},useSyncExternalStore:Fg,useId:_y,useHostTransitionStatus:Id,useFormState:ry,useActionState:ry,useOptimistic:function(t,r){var a=An();return Xg(a,Ht,t,r)},useMemoCache:bd,useCacheRefresh:by};Dd.useEffectEvent=ly;var Ay={readContext:er,use:Xc,useCallback:dy,useContext:er,useEffect:Ad,useImperativeHandle:fy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:py,useReducer:Td,useRef:ay,useState:function(){return Td(Xs)},useDebugValue:Cd,useDeferredValue:function(t,r){var a=An();return Ht===null?Rd(a,t,r):my(a,Ht.memoizedState,t,r)},useTransition:function(){var t=Td(Xs)[0],r=An().memoizedState;return[typeof t=="boolean"?t:Au(t),r]},useSyncExternalStore:Fg,useId:_y,useHostTransitionStatus:Id,useFormState:sy,useActionState:sy,useOptimistic:function(t,r){var a=An();return Ht!==null?Xg(a,Ht,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:bd,useCacheRefresh:by};Ay.useEffectEvent=ly;function Nd(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:x({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var kd={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=mi(),f=Ua(l);f.payload=r,a!=null&&(f.callback=a),r=za(t,f,l),r!==null&&(Gr(r,t,l),Eu(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=mi(),f=Ua(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=za(t,f,l),r!==null&&(Gr(r,t,l),Eu(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=mi(),l=Ua(a);l.tag=2,r!=null&&(l.callback=r),r=za(t,l,a),r!==null&&(Gr(r,t,a),Eu(r,t,a))}};function Cy(t,r,a,l,f,m,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,T):r.prototype&&r.prototype.isPureReactComponent?!h(a,l)||!h(f,m):!0}function Ry(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&kd.enqueueReplaceState(r,r.state,null)}function Fo(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=x({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function xy(t){Me(t)}function Iy(t){console.error(t)}function Oy(t){Me(t)}function th(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Dy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Md(t,r,a){return a=Ua(a),a.tag=3,a.payload={element:null},a.callback=function(){th(t,r)},a}function Ny(t){return t=Ua(t),t.tag=3,t}function ky(t,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){Dy(r,a,l)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Dy(r,a,l),typeof f!="function"&&(Ga===null?Ga=new Set([this]):Ga.add(this));var C=l.stack;this.componentDidCatch(l.value,{componentStack:C!==null?C:""})})}function wT(t,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&vl(r,a,f,!0),a=hi.current,a!==null){switch(a.tag){case 31:case 13:return Mi===null?dh():a.alternate===null&&yn===0&&(yn=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===qc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),sp(t,l,f)),!1;case 22:return a.flags|=65536,l===qc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),sp(t,l,f)),!1}throw Error(s(435,a.tag))}return sp(t,l,f),dh(),!1}if(It)return r=hi.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==Zf&&(t=Error(s(422),{cause:l}),gu(Oi(t,a)))):(l!==Zf&&(r=Error(s(423),{cause:l}),gu(Oi(r,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Oi(l,a),f=Md(t.stateNode,l,f),cd(t,f),yn!==4&&(yn=2)),!1;var m=Error(s(520),{cause:l});if(m=Oi(m,a),Vu===null?Vu=[m]:Vu.push(m),yn!==4&&(yn=2),r===null)return!0;l=Oi(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=Md(a.stateNode,l,t),cd(a,t),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ga===null||!Ga.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Ny(f),ky(f,t,a,l),cd(a,f),!1}a=a.return}while(a!==null);return!1}var Vd=Error(s(461)),kn=!1;function tr(t,r,a,l){r.child=t===null?jg(r,null,a,l):qo(r,t.child,a,l)}function My(t,r,a,l,f){a=a.render;var m=r.ref;if("ref"in l){var T={};for(var C in l)C!=="ref"&&(T[C]=l[C])}else T=l;return Lo(r),l=gd(t,r,a,T,m,f),C=yd(),t!==null&&!kn?(vd(t,r,f),Ws(t,r,f)):(It&&C&&Wf(r),r.flags|=1,tr(t,r,l,f),r.child)}function Vy(t,r,a,l,f){if(t===null){var m=a.type;return typeof m=="function"&&!Qf(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,Py(t,r,m,l,f)):(t=Pc(a.type,null,l,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!Hd(t,f)){var T=m.memoizedProps;if(a=a.compare,a=a!==null?a:h,a(T,l)&&t.ref===r.ref)return Ws(t,r,f)}return r.flags|=1,t=Ks(m,l),t.ref=r.ref,t.return=r,r.child=t}function Py(t,r,a,l,f){if(t!==null){var m=t.memoizedProps;if(h(m,l)&&t.ref===r.ref)if(kn=!1,r.pendingProps=l=m,Hd(t,f))(t.flags&131072)!==0&&(kn=!0);else return r.lanes=t.lanes,Ws(t,r,f)}return Pd(t,r,a,l,f)}function jy(t,r,a,l){var f=l.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=r.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,r.child=null;return Ly(t,r,m,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&zc(r,m!==null?m.cachePool:null),m!==null?zg(r,m):fd(),Bg(r);else return l=r.lanes=536870912,Ly(t,r,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(zc(r,m.cachePool),zg(r,m),qa(),r.memoizedState=null):(t!==null&&zc(r,null),fd(),qa());return tr(t,r,f,a),r.child}function xu(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Ly(t,r,a,l,f){var m=ad();return m=m===null?null:{parent:Dn._currentValue,pool:m},r.memoizedState={baseLanes:a,cachePool:m},t!==null&&zc(r,null),fd(),Bg(r),t!==null&&vl(t,r,l,!0),r.childLanes=f,null}function nh(t,r){return r=ih({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Uy(t,r,a){return qo(r,t.child,null,a),t=nh(r,r.pendingProps),t.flags|=2,fi(r),r.memoizedState=null,t}function ST(t,r,a){var l=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(It){if(l.mode==="hidden")return t=nh(r,l),r.lanes=536870912,xu(null,t);if(pd(r),(t=Wt)?(t=Wv(t,ki),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ma!==null?{id:gs,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},a=Tg(t),a.return=r,r.child=a,Zn=r,Wt=null)):t=null,t===null)throw Pa(r);return r.lanes=536870912,null}return nh(r,l)}var m=t.memoizedState;if(m!==null){var T=m.dehydrated;if(pd(r),f)if(r.flags&256)r.flags&=-257,r=Uy(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(s(558));else if(kn||vl(t,r,a,!1),f=(a&t.childLanes)!==0,kn||f){if(l=Yt,l!==null&&(T=en(l,a),T!==0&&T!==m.retryLane))throw m.retryLane=T,tn(t,T),Gr(l,t,T),Vd;dh(),r=Uy(t,r,a)}else t=m.treeContext,Wt=Vi(T.nextSibling),Zn=r,It=!0,Va=null,ki=!1,t!==null&&Ag(r,t),r=nh(r,l),r.flags|=4096;return r}return t=Ks(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function rh(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Pd(t,r,a,l,f){return Lo(r),a=gd(t,r,a,l,void 0,f),l=yd(),t!==null&&!kn?(vd(t,r,f),Ws(t,r,f)):(It&&l&&Wf(r),r.flags|=1,tr(t,r,a,f),r.child)}function zy(t,r,a,l,f,m){return Lo(r),r.updateQueue=null,a=Hg(r,l,a,f),qg(t),l=yd(),t!==null&&!kn?(vd(t,r,m),Ws(t,r,m)):(It&&l&&Wf(r),r.flags|=1,tr(t,r,a,m),r.child)}function By(t,r,a,l,f){if(Lo(r),r.stateNode===null){var m=Br,T=a.contextType;typeof T=="object"&&T!==null&&(m=er(T)),m=new a(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=kd,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},ld(r),T=a.contextType,m.context=typeof T=="object"&&T!==null?er(T):Br,m.state=r.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(Nd(r,a,T,l),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(T=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),T!==m.state&&kd.enqueueReplaceState(m,m.state,null),wu(r,l,m,f),Tu(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var C=r.memoizedProps,U=Fo(a,C);m.props=U;var se=m.context,fe=a.contextType;T=Br,typeof fe=="object"&&fe!==null&&(T=er(fe));var ye=a.getDerivedStateFromProps;fe=typeof ye=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=r.pendingProps!==C,fe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||se!==T)&&Ry(r,m,l,T),La=!1;var oe=r.memoizedState;m.state=oe,wu(r,l,m,f),Tu(),se=r.memoizedState,C||oe!==se||La?(typeof ye=="function"&&(Nd(r,a,ye,l),se=r.memoizedState),(U=La||Cy(r,a,U,l,oe,se,T))?(fe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=se),m.props=l,m.state=se,m.context=T,l=U):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,ud(t,r),T=r.memoizedProps,fe=Fo(a,T),m.props=fe,ye=r.pendingProps,oe=m.context,se=a.contextType,U=Br,typeof se=="object"&&se!==null&&(U=er(se)),C=a.getDerivedStateFromProps,(se=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T!==ye||oe!==U)&&Ry(r,m,l,U),La=!1,oe=r.memoizedState,m.state=oe,wu(r,l,m,f),Tu();var ue=r.memoizedState;T!==ye||oe!==ue||La||t!==null&&t.dependencies!==null&&Lc(t.dependencies)?(typeof C=="function"&&(Nd(r,a,C,l),ue=r.memoizedState),(fe=La||Cy(r,a,fe,l,oe,ue,U)||t!==null&&t.dependencies!==null&&Lc(t.dependencies))?(se||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ue,U),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ue,U)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||T===t.memoizedProps&&oe===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&oe===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=ue),m.props=l,m.state=ue,m.context=U,l=fe):(typeof m.componentDidUpdate!="function"||T===t.memoizedProps&&oe===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&oe===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,rh(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=qo(r,t.child,null,f),r.child=qo(r,null,a,f)):tr(t,r,a,f),r.memoizedState=m.state,t=r.child):t=Ws(t,r,f),t}function qy(t,r,a,l){return Po(),r.flags|=256,tr(t,r,a,l),r.child}var jd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ld(t){return{baseLanes:t,cachePool:Dg()}}function Ud(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=pi),t}function Hy(t,r,a){var l=r.pendingProps,f=!1,m=(r.flags&128)!==0,T;if((T=m)||(T=t!==null&&t.memoizedState===null?!1:(Sn.current&2)!==0),T&&(f=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,t===null){if(It){if(f?Ba(r):qa(),(t=Wt)?(t=Wv(t,ki),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ma!==null?{id:gs,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},a=Tg(t),a.return=r,r.child=a,Zn=r,Wt=null)):t=null,t===null)throw Pa(r);return Ep(t)?r.lanes=32:r.lanes=536870912,null}var C=l.children;return l=l.fallback,f?(qa(),f=r.mode,C=ih({mode:"hidden",children:C},f),l=Vo(l,f,a,null),C.return=r,l.return=r,C.sibling=l,r.child=C,l=r.child,l.memoizedState=Ld(a),l.childLanes=Ud(t,T,a),r.memoizedState=jd,xu(null,l)):(Ba(r),zd(r,C))}var U=t.memoizedState;if(U!==null&&(C=U.dehydrated,C!==null)){if(m)r.flags&256?(Ba(r),r.flags&=-257,r=Bd(t,r,a)):r.memoizedState!==null?(qa(),r.child=t.child,r.flags|=128,r=null):(qa(),C=l.fallback,f=r.mode,l=ih({mode:"visible",children:l.children},f),C=Vo(C,f,a,null),C.flags|=2,l.return=r,C.return=r,l.sibling=C,r.child=l,qo(r,t.child,null,a),l=r.child,l.memoizedState=Ld(a),l.childLanes=Ud(t,T,a),r.memoizedState=jd,r=xu(null,l));else if(Ba(r),Ep(C)){if(T=C.nextSibling&&C.nextSibling.dataset,T)var se=T.dgst;T=se,l=Error(s(419)),l.stack="",l.digest=T,gu({value:l,source:null,stack:null}),r=Bd(t,r,a)}else if(kn||vl(t,r,a,!1),T=(a&t.childLanes)!==0,kn||T){if(T=Yt,T!==null&&(l=en(T,a),l!==0&&l!==U.retryLane))throw U.retryLane=l,tn(t,l),Gr(T,t,l),Vd;bp(C)||dh(),r=Bd(t,r,a)}else bp(C)?(r.flags|=192,r.child=t.child,r=null):(t=U.treeContext,Wt=Vi(C.nextSibling),Zn=r,It=!0,Va=null,ki=!1,t!==null&&Ag(r,t),r=zd(r,l.children),r.flags|=4096);return r}return f?(qa(),C=l.fallback,f=r.mode,U=t.child,se=U.sibling,l=Ks(U,{mode:"hidden",children:l.children}),l.subtreeFlags=U.subtreeFlags&65011712,se!==null?C=Ks(se,C):(C=Vo(C,f,a,null),C.flags|=2),C.return=r,l.return=r,l.sibling=C,r.child=l,xu(null,l),l=r.child,C=t.child.memoizedState,C===null?C=Ld(a):(f=C.cachePool,f!==null?(U=Dn._currentValue,f=f.parent!==U?{parent:U,pool:U}:f):f=Dg(),C={baseLanes:C.baseLanes|a,cachePool:f}),l.memoizedState=C,l.childLanes=Ud(t,T,a),r.memoizedState=jd,xu(t.child,l)):(Ba(r),a=t.child,t=a.sibling,a=Ks(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(T=r.deletions,T===null?(r.deletions=[t],r.flags|=16):T.push(t)),r.child=a,r.memoizedState=null,a)}function zd(t,r){return r=ih({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function ih(t,r){return t=ci(22,t,null,r),t.lanes=0,t}function Bd(t,r,a){return qo(r,t.child,null,a),t=zd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Fy(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),nd(t.return,r,a)}function qd(t,r,a,l,f,m){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:m}:(T.isBackwards=r,T.rendering=null,T.renderingStartTime=0,T.last=l,T.tail=a,T.tailMode=f,T.treeForkCount=m)}function Ky(t,r,a){var l=r.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var T=Sn.current,C=(T&2)!==0;if(C?(T=T&1|2,r.flags|=128):T&=1,xe(Sn,T),tr(t,r,l,a),l=It?mu:0,!C&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fy(t,a,r);else if(t.tag===19)Fy(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=r.child,f=null;a!==null;)t=a.alternate,t!==null&&Gc(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),qd(r,!1,f,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&Gc(t)===null){r.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}qd(r,!0,a,null,m,l);break;case"together":qd(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function Ws(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Ka|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(vl(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=Ks(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Ks(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Hd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Lc(t)))}function AT(t,r,a){switch(r.tag){case 3:vn(r,r.stateNode.containerInfo),ja(r,Dn,t.memoizedState.cache),Po();break;case 27:case 5:ss(r);break;case 4:vn(r,r.stateNode.containerInfo);break;case 10:ja(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,pd(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Ba(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Hy(t,r,a):(Ba(r),t=Ws(t,r,a),t!==null?t.sibling:null);Ba(r);break;case 19:var f=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(vl(t,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return Ky(t,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),xe(Sn,Sn.current),l)break;return null;case 22:return r.lanes=0,jy(t,r,a,r.pendingProps);case 24:ja(r,Dn,t.memoizedState.cache)}return Ws(t,r,a)}function Gy(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)kn=!0;else{if(!Hd(t,a)&&(r.flags&128)===0)return kn=!1,AT(t,r,a);kn=(t.flags&131072)!==0}else kn=!1,It&&(r.flags&1048576)!==0&&Sg(r,mu,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=zo(r.elementType),r.type=t,typeof t=="function")Qf(t)?(l=Fo(t,l),r.tag=1,r=By(null,r,t,l,a)):(r.tag=0,r=Pd(null,r,t,l,a));else{if(t!=null){var f=t.$$typeof;if(f===rt){r.tag=11,r=My(null,r,t,l,a);break e}else if(f===P){r.tag=14,r=Vy(null,r,t,l,a);break e}}throw r=ut(t)||t,Error(s(306,r,""))}}return r;case 0:return Pd(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=Fo(l,r.pendingProps),By(t,r,l,f,a);case 3:e:{if(vn(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var m=r.memoizedState;f=m.element,ud(t,r),wu(r,l,null,a);var T=r.memoizedState;if(l=T.cache,ja(r,Dn,l),l!==m.cache&&rd(r,[Dn],a,!0),Tu(),l=T.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=qy(t,r,l,a);break e}else if(l!==f){f=Oi(Error(s(424)),r),gu(f),r=qy(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Wt=Vi(t.firstChild),Zn=r,It=!0,Va=null,ki=!0,a=jg(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Po(),l===f){r=Ws(t,r,a);break e}tr(t,r,l,a)}r=r.child}return r;case 26:return rh(t,r),t===null?(a=r_(r.type,null,r.pendingProps,null))?r.memoizedState=a:It||(a=r.type,t=r.pendingProps,l=bh(Ze.current).createElement(a),l[Lt]=r,l[$t]=t,nr(l,a,t),on(l),r.stateNode=l):r.memoizedState=r_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return ss(r),t===null&&It&&(l=r.stateNode=e_(r.type,r.pendingProps,Ze.current),Zn=r,ki=!0,f=Wt,Xa(r.type)?(Tp=f,Wt=Vi(l.firstChild)):Wt=f),tr(t,r,r.pendingProps.children,a),rh(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&It&&((f=l=Wt)&&(l=tw(l,r.type,r.pendingProps,ki),l!==null?(r.stateNode=l,Zn=r,Wt=Vi(l.firstChild),ki=!1,f=!0):f=!1),f||Pa(r)),ss(r),f=r.type,m=r.pendingProps,T=t!==null?t.memoizedProps:null,l=m.children,yp(f,m)?l=null:T!==null&&yp(f,T)&&(r.flags|=32),r.memoizedState!==null&&(f=gd(t,r,gT,null,null,a),Hu._currentValue=f),rh(t,r),tr(t,r,l,a),r.child;case 6:return t===null&&It&&((t=a=Wt)&&(a=nw(a,r.pendingProps,ki),a!==null?(r.stateNode=a,Zn=r,Wt=null,t=!0):t=!1),t||Pa(r)),null;case 13:return Hy(t,r,a);case 4:return vn(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=qo(r,null,l,a):tr(t,r,l,a),r.child;case 11:return My(t,r,r.type,r.pendingProps,a);case 7:return tr(t,r,r.pendingProps,a),r.child;case 8:return tr(t,r,r.pendingProps.children,a),r.child;case 12:return tr(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,ja(r,r.type,l.value),tr(t,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,Lo(r),f=er(f),l=l(f),r.flags|=1,tr(t,r,l,a),r.child;case 14:return Vy(t,r,r.type,r.pendingProps,a);case 15:return Py(t,r,r.type,r.pendingProps,a);case 19:return Ky(t,r,a);case 31:return ST(t,r,a);case 22:return jy(t,r,a,r.pendingProps);case 24:return Lo(r),l=er(Dn),t===null?(f=ad(),f===null&&(f=Yt,m=id(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),r.memoizedState={parent:l,cache:f},ld(r),ja(r,Dn,f)):((t.lanes&a)!==0&&(ud(t,r),wu(r,null,null,a),Tu()),f=t.memoizedState,m=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),ja(r,Dn,l)):(l=m.cache,ja(r,Dn,l),l!==f.cache&&rd(r,[Dn],a,!0))),tr(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Js(t){t.flags|=4}function Fd(t,r,a,l,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(_v())t.flags|=8192;else throw Bo=qc,od}else t.flags&=-16777217}function Yy(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!l_(r))if(_v())t.flags|=8192;else throw Bo=qc,od}function sh(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?ul():536870912,t.lanes|=r,Ol|=r)}function Iu(t,r){if(!It)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Jt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function CT(t,r,a){var l=r.pendingProps;switch(Jf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(r),null;case 1:return Jt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Qs(Dn),ke(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(yl(r)?Js(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ed())),Jt(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(Js(r),m!==null?(Jt(r),Yy(r,m)):(Jt(r),Fd(r,f,null,l,a))):m?m!==t.memoizedState?(Js(r),Jt(r),Yy(r,m)):(Jt(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&Js(r),Jt(r),Fd(r,f,t,l,a)),null;case 27:if(Hi(r),a=Ze.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Js(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Jt(r),null}t=Pe.current,yl(r)?Cg(r):(t=e_(f,l,a),r.stateNode=t,Js(r))}return Jt(r),null;case 5:if(Hi(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Js(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Jt(r),null}if(m=Pe.current,yl(r))Cg(r);else{var T=bh(Ze.current);switch(m){case 1:m=T.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=T.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=T.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?T.createElement("select",{is:l.is}):T.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?T.createElement(f,{is:l.is}):T.createElement(f)}}m[Lt]=r,m[$t]=l;e:for(T=r.child;T!==null;){if(T.tag===5||T.tag===6)m.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===r)break e;for(;T.sibling===null;){if(T.return===null||T.return===r)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}r.stateNode=m;e:switch(nr(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Js(r)}}return Jt(r),Fd(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Js(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=Ze.current,yl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,f=Zn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[Lt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Hv(t.nodeValue,a)),t||Pa(r,!0)}else t=bh(t).createTextNode(l),t[Lt]=r,r.stateNode=t}return Jt(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=yl(r),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Lt]=r}else Po(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Jt(r),t=!1}else a=ed(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(fi(r),r):(fi(r),null);if((r.flags&128)!==0)throw Error(s(558))}return Jt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=yl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Lt]=r}else Po(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Jt(r),f=!1}else f=ed(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(fi(r),r):(fi(r),null)}return fi(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),sh(r,r.updateQueue),Jt(r),null);case 4:return ke(),t===null&&fp(r.stateNode.containerInfo),Jt(r),null;case 10:return Qs(r.type),Jt(r),null;case 19:if(pe(Sn),l=r.memoizedState,l===null)return Jt(r),null;if(f=(r.flags&128)!==0,m=l.rendering,m===null)if(f)Iu(l,!1);else{if(yn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=Gc(t),m!==null){for(r.flags|=128,Iu(l,!1),t=m.updateQueue,r.updateQueue=t,sh(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Eg(a,t),a=a.sibling;return xe(Sn,Sn.current&1|2),It&&Gs(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&Hn()>ch&&(r.flags|=128,f=!0,Iu(l,!1),r.lanes=4194304)}else{if(!f)if(t=Gc(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,sh(r,t),Iu(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!It)return Jt(r),null}else 2*Hn()-l.renderingStartTime>ch&&a!==536870912&&(r.flags|=128,f=!0,Iu(l,!1),r.lanes=4194304);l.isBackwards?(m.sibling=r.child,r.child=m):(t=l.last,t!==null?t.sibling=m:r.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Hn(),t.sibling=null,a=Sn.current,xe(Sn,f?a&1|2:a&1),It&&Gs(r,l.treeForkCount),t):(Jt(r),null);case 22:case 23:return fi(r),dd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(Jt(r),r.subtreeFlags&6&&(r.flags|=8192)):Jt(r),a=r.updateQueue,a!==null&&sh(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&pe(Uo),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Qs(Dn),Jt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function RT(t,r){switch(Jf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Qs(Dn),ke(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Hi(r),null;case 31:if(r.memoizedState!==null){if(fi(r),r.alternate===null)throw Error(s(340));Po()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(fi(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Po()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return pe(Sn),null;case 4:return ke(),null;case 10:return Qs(r.type),null;case 22:case 23:return fi(r),dd(),t!==null&&pe(Uo),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Qs(Dn),null;case 25:return null;default:return null}}function Qy(t,r){switch(Jf(r),r.tag){case 3:Qs(Dn),ke();break;case 26:case 27:case 5:Hi(r);break;case 4:ke();break;case 31:r.memoizedState!==null&&fi(r);break;case 13:fi(r);break;case 19:pe(Sn);break;case 10:Qs(r.type);break;case 22:case 23:fi(r),dd(),t!==null&&pe(Uo);break;case 24:Qs(Dn)}}function Ou(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var m=a.create,T=a.inst;l=m(),T.destroy=l}a=a.next}while(a!==f)}}catch(C){qt(r,r.return,C)}}function Ha(t,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var T=l.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,f=r;var U=a,se=C;try{se()}catch(fe){qt(f,U,fe)}}}l=l.next}while(l!==m)}}catch(fe){qt(r,r.return,fe)}}function $y(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Ug(r,a)}catch(l){qt(t,t.return,l)}}}function Xy(t,r,a){a.props=Fo(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){qt(t,r,l)}}function Du(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){qt(t,r,f)}}function vs(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){qt(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){qt(t,r,f)}else a.current=null}function Wy(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){qt(t,t.return,f)}}function Kd(t,r,a){try{var l=t.stateNode;$T(l,t.type,a,r),l[$t]=r}catch(f){qt(t,t.return,f)}}function Jy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Xa(t.type)||t.tag===4}function Gd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Xa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yd(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=cr));else if(l!==4&&(l===27&&Xa(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Yd(t,r,a),t=t.sibling;t!==null;)Yd(t,r,a),t=t.sibling}function ah(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Xa(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(ah(t,r,a),t=t.sibling;t!==null;)ah(t,r,a),t=t.sibling}function Zy(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);nr(r,l,a),r[Lt]=t,r[$t]=a}catch(m){qt(t,t.return,m)}}var Zs=!1,Mn=!1,Qd=!1,ev=typeof WeakSet=="function"?WeakSet:Set,Qn=null;function xT(t,r){if(t=t.containerInfo,mp=Rh,t=S(t),A(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var T=0,C=-1,U=-1,se=0,fe=0,ye=t,oe=null;t:for(;;){for(var ue;ye!==a||f!==0&&ye.nodeType!==3||(C=T+f),ye!==m||l!==0&&ye.nodeType!==3||(U=T+l),ye.nodeType===3&&(T+=ye.nodeValue.length),(ue=ye.firstChild)!==null;)oe=ye,ye=ue;for(;;){if(ye===t)break t;if(oe===a&&++se===f&&(C=T),oe===m&&++fe===l&&(U=T),(ue=ye.nextSibling)!==null)break;ye=oe,oe=ye.parentNode}ye=ue}a=C===-1||U===-1?null:{start:C,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(gp={focusedElem:t,selectionRange:a},Rh=!1,Qn=r;Qn!==null;)if(r=Qn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Qn=t;else for(;Qn!==null;){switch(r=Qn,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=r,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Ue=Fo(a.type,f);t=l.getSnapshotBeforeUpdate(Ue,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(We){qt(a,a.return,We)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)_p(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":_p(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Qn=t;break}Qn=r.return}}function tv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ta(t,a),l&4&&Ou(5,a);break;case 1:if(ta(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(T){qt(a,a.return,T)}else{var f=Fo(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(T){qt(a,a.return,T)}}l&64&&$y(a),l&512&&Du(a,a.return);break;case 3:if(ta(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Ug(t,r)}catch(T){qt(a,a.return,T)}}break;case 27:r===null&&l&4&&Zy(a);case 26:case 5:ta(t,a),r===null&&l&4&&Wy(a),l&512&&Du(a,a.return);break;case 12:ta(t,a);break;case 31:ta(t,a),l&4&&iv(t,a);break;case 13:ta(t,a),l&4&&sv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=jT.bind(null,a),rw(t,a))));break;case 22:if(l=a.memoizedState!==null||Zs,!l){r=r!==null&&r.memoizedState!==null||Mn,f=Zs;var m=Mn;Zs=l,(Mn=r)&&!m?na(t,a,(a.subtreeFlags&8772)!==0):ta(t,a),Zs=f,Mn=m}break;case 30:break;default:ta(t,a)}}function nv(t){var r=t.alternate;r!==null&&(t.alternate=null,nv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&js(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var nn=null,qr=!1;function ea(t,r,a){for(a=a.child;a!==null;)rv(t,r,a),a=a.sibling}function rv(t,r,a){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(or,a)}catch{}switch(a.tag){case 26:Mn||vs(a,r),ea(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Mn||vs(a,r);var l=nn,f=qr;Xa(a.type)&&(nn=a.stateNode,qr=!1),ea(t,r,a),zu(a.stateNode),nn=l,qr=f;break;case 5:Mn||vs(a,r);case 6:if(l=nn,f=qr,nn=null,ea(t,r,a),nn=l,qr=f,nn!==null)if(qr)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(a.stateNode)}catch(m){qt(a,r,m)}else try{nn.removeChild(a.stateNode)}catch(m){qt(a,r,m)}break;case 18:nn!==null&&(qr?(t=nn,$v(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ll(t)):$v(nn,a.stateNode));break;case 4:l=nn,f=qr,nn=a.stateNode.containerInfo,qr=!0,ea(t,r,a),nn=l,qr=f;break;case 0:case 11:case 14:case 15:Ha(2,a,r),Mn||Ha(4,a,r),ea(t,r,a);break;case 1:Mn||(vs(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Xy(a,r,l)),ea(t,r,a);break;case 21:ea(t,r,a);break;case 22:Mn=(l=Mn)||a.memoizedState!==null,ea(t,r,a),Mn=l;break;default:ea(t,r,a)}}function iv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ll(t)}catch(a){qt(r,r.return,a)}}}function sv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ll(t)}catch(a){qt(r,r.return,a)}}function IT(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new ev),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new ev),r;default:throw Error(s(435,t.tag))}}function oh(t,r){var a=IT(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var f=LT.bind(null,t,l);l.then(f,f)}})}function Hr(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=t,T=r,C=T;e:for(;C!==null;){switch(C.tag){case 27:if(Xa(C.type)){nn=C.stateNode,qr=!1;break e}break;case 5:nn=C.stateNode,qr=!1;break e;case 3:case 4:nn=C.stateNode.containerInfo,qr=!0;break e}C=C.return}if(nn===null)throw Error(s(160));rv(m,T,f),nn=null,qr=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)av(r,t),r=r.sibling}var Zi=null;function av(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Hr(r,t),Fr(t),l&4&&(Ha(3,t,t.return),Ou(3,t),Ha(5,t,t.return));break;case 1:Hr(r,t),Fr(t),l&512&&(Mn||a===null||vs(a,a.return)),l&64&&Zs&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Zi;if(Hr(r,t),Fr(t),l&512&&(Mn||a===null||vs(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Fn]||m[Lt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),nr(m,l,a),m[Lt]=t,on(m),l=m;break e;case"link":var T=a_("link","href",f).get(l+(a.href||""));if(T){for(var C=0;C<T.length;C++)if(m=T[C],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(C,1);break t}}m=f.createElement(l),nr(m,l,a),f.head.appendChild(m);break;case"meta":if(T=a_("meta","content",f).get(l+(a.content||""))){for(C=0;C<T.length;C++)if(m=T[C],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(C,1);break t}}m=f.createElement(l),nr(m,l,a),f.head.appendChild(m);break;default:throw Error(s(468,l))}m[Lt]=t,on(m),l=m}t.stateNode=l}else o_(f,t.type,t.stateNode);else t.stateNode=s_(f,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?o_(f,t.type,t.stateNode):s_(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Kd(t,t.memoizedProps,a.memoizedProps)}break;case 27:Hr(r,t),Fr(t),l&512&&(Mn||a===null||vs(a,a.return)),a!==null&&l&4&&Kd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Hr(r,t),Fr(t),l&512&&(Mn||a===null||vs(a,a.return)),t.flags&32){f=t.stateNode;try{Jn(f,"")}catch(Ue){qt(t,t.return,Ue)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Kd(t,f,a!==null?a.memoizedProps:f)),l&1024&&(Qd=!0);break;case 6:if(Hr(r,t),Fr(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Ue){qt(t,t.return,Ue)}}break;case 3:if(wh=null,f=Zi,Zi=Eh(r.containerInfo),Hr(r,t),Zi=f,Fr(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ll(r.containerInfo)}catch(Ue){qt(t,t.return,Ue)}Qd&&(Qd=!1,ov(t));break;case 4:l=Zi,Zi=Eh(t.stateNode.containerInfo),Hr(r,t),Fr(t),Zi=l;break;case 12:Hr(r,t),Fr(t);break;case 31:Hr(r,t),Fr(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,oh(t,l)));break;case 13:Hr(r,t),Fr(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uh=Hn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,oh(t,l)));break;case 22:f=t.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,se=Zs,fe=Mn;if(Zs=se||f,Mn=fe||U,Hr(r,t),Mn=fe,Zs=se,Fr(t),l&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||U||Zs||Mn||Ko(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){U=a=r;try{if(m=U.stateNode,f)T=m.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{C=U.stateNode;var ye=U.memoizedProps.style,oe=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;C.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(Ue){qt(U,U.return,Ue)}}}else if(r.tag===6){if(a===null){U=r;try{U.stateNode.nodeValue=f?"":U.memoizedProps}catch(Ue){qt(U,U.return,Ue)}}}else if(r.tag===18){if(a===null){U=r;try{var ue=U.stateNode;f?Xv(ue,!0):Xv(U.stateNode,!1)}catch(Ue){qt(U,U.return,Ue)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,oh(t,a))));break;case 19:Hr(r,t),Fr(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,oh(t,l)));break;case 30:break;case 21:break;default:Hr(r,t),Fr(t)}}function Fr(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Jy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,m=Gd(t);ah(t,m,f);break;case 5:var T=a.stateNode;a.flags&32&&(Jn(T,""),a.flags&=-33);var C=Gd(t);ah(t,C,T);break;case 3:case 4:var U=a.stateNode.containerInfo,se=Gd(t);Yd(t,se,U);break;default:throw Error(s(161))}}catch(fe){qt(t,t.return,fe)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function ov(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;ov(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function ta(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)tv(t,r.alternate,r),r=r.sibling}function Ko(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Ha(4,r,r.return),Ko(r);break;case 1:vs(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Xy(r,r.return,a),Ko(r);break;case 27:zu(r.stateNode);case 26:case 5:vs(r,r.return),Ko(r);break;case 22:r.memoizedState===null&&Ko(r);break;case 30:Ko(r);break;default:Ko(r)}t=t.sibling}}function na(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=t,m=r,T=m.flags;switch(m.tag){case 0:case 11:case 15:na(f,m,a),Ou(4,m);break;case 1:if(na(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(se){qt(l,l.return,se)}if(l=m,f=l.updateQueue,f!==null){var C=l.stateNode;try{var U=f.shared.hiddenCallbacks;if(U!==null)for(f.shared.hiddenCallbacks=null,f=0;f<U.length;f++)Lg(U[f],C)}catch(se){qt(l,l.return,se)}}a&&T&64&&$y(m),Du(m,m.return);break;case 27:Zy(m);case 26:case 5:na(f,m,a),a&&l===null&&T&4&&Wy(m),Du(m,m.return);break;case 12:na(f,m,a);break;case 31:na(f,m,a),a&&T&4&&iv(f,m);break;case 13:na(f,m,a),a&&T&4&&sv(f,m);break;case 22:m.memoizedState===null&&na(f,m,a),Du(m,m.return);break;case 30:break;default:na(f,m,a)}r=r.sibling}}function $d(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&yu(a))}function Xd(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&yu(t))}function es(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)lv(t,r,a,l),r=r.sibling}function lv(t,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:es(t,r,a,l),f&2048&&Ou(9,r);break;case 1:es(t,r,a,l);break;case 3:es(t,r,a,l),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&yu(t)));break;case 12:if(f&2048){es(t,r,a,l),t=r.stateNode;try{var m=r.memoizedProps,T=m.id,C=m.onPostCommit;typeof C=="function"&&C(T,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(U){qt(r,r.return,U)}}else es(t,r,a,l);break;case 31:es(t,r,a,l);break;case 13:es(t,r,a,l);break;case 23:break;case 22:m=r.stateNode,T=r.alternate,r.memoizedState!==null?m._visibility&2?es(t,r,a,l):Nu(t,r):m._visibility&2?es(t,r,a,l):(m._visibility|=2,Rl(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),f&2048&&$d(T,r);break;case 24:es(t,r,a,l),f&2048&&Xd(r.alternate,r);break;default:es(t,r,a,l)}}function Rl(t,r,a,l,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,T=r,C=a,U=l,se=T.flags;switch(T.tag){case 0:case 11:case 15:Rl(m,T,C,U,f),Ou(8,T);break;case 23:break;case 22:var fe=T.stateNode;T.memoizedState!==null?fe._visibility&2?Rl(m,T,C,U,f):Nu(m,T):(fe._visibility|=2,Rl(m,T,C,U,f)),f&&se&2048&&$d(T.alternate,T);break;case 24:Rl(m,T,C,U,f),f&&se&2048&&Xd(T.alternate,T);break;default:Rl(m,T,C,U,f)}r=r.sibling}}function Nu(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,f=l.flags;switch(l.tag){case 22:Nu(a,l),f&2048&&$d(l.alternate,l);break;case 24:Nu(a,l),f&2048&&Xd(l.alternate,l);break;default:Nu(a,l)}r=r.sibling}}var ku=8192;function xl(t,r,a){if(t.subtreeFlags&ku)for(t=t.child;t!==null;)uv(t,r,a),t=t.sibling}function uv(t,r,a){switch(t.tag){case 26:xl(t,r,a),t.flags&ku&&t.memoizedState!==null&&mw(a,Zi,t.memoizedState,t.memoizedProps);break;case 5:xl(t,r,a);break;case 3:case 4:var l=Zi;Zi=Eh(t.stateNode.containerInfo),xl(t,r,a),Zi=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=ku,ku=16777216,xl(t,r,a),ku=l):xl(t,r,a));break;default:xl(t,r,a)}}function cv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Mu(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Qn=l,fv(l,t)}cv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)hv(t),t=t.sibling}function hv(t){switch(t.tag){case 0:case 11:case 15:Mu(t),t.flags&2048&&Ha(9,t,t.return);break;case 3:Mu(t);break;case 12:Mu(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,lh(t)):Mu(t);break;default:Mu(t)}}function lh(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Qn=l,fv(l,t)}cv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Ha(8,r,r.return),lh(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,lh(r));break;default:lh(r)}t=t.sibling}}function fv(t,r){for(;Qn!==null;){var a=Qn;switch(a.tag){case 0:case 11:case 15:Ha(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:yu(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Qn=l;else e:for(a=t;Qn!==null;){l=Qn;var f=l.sibling,m=l.return;if(nv(l),l===a){Qn=null;break e}if(f!==null){f.return=m,Qn=f;break e}Qn=m}}}var OT={getCacheForType:function(t){var r=er(Dn),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return er(Dn).controller.signal}},DT=typeof WeakMap=="function"?WeakMap:Map,Vt=0,Yt=null,bt=null,Tt=0,Bt=0,di=null,Fa=!1,Il=!1,Wd=!1,ra=0,yn=0,Ka=0,Go=0,Jd=0,pi=0,Ol=0,Vu=null,Kr=null,Zd=!1,uh=0,dv=0,ch=1/0,hh=null,Ga=null,Un=0,Ya=null,Dl=null,ia=0,ep=0,tp=null,pv=null,Pu=0,np=null;function mi(){return(Vt&2)!==0&&Tt!==0?Tt&-Tt:ce.T!==null?lp():Ps()}function mv(){if(pi===0)if((Tt&536870912)===0||It){var t=Fi;Fi<<=1,(Fi&3932160)===0&&(Fi=262144),pi=t}else pi=536870912;return t=hi.current,t!==null&&(t.flags|=32),pi}function Gr(t,r,a){(t===Yt&&(Bt===2||Bt===9)||t.cancelPendingCommit!==null)&&(Nl(t,0),Qa(t,Tt,pi,!1)),xr(t,a),((Vt&2)===0||t!==Yt)&&(t===Yt&&((Vt&2)===0&&(Go|=a),yn===4&&Qa(t,Tt,pi,!1)),_s(t))}function gv(t,r,a){if((Vt&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||_r(t,r),f=l?MT(t,r):ip(t,r,!0),m=l;do{if(f===0){Il&&!l&&Qa(t,r,0,!1);break}else{if(a=t.current.alternate,m&&!NT(a)){f=ip(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;e:{var C=t;f=Vu;var U=C.current.memoizedState.isDehydrated;if(U&&(Nl(C,T).flags|=256),T=ip(C,T,!1),T!==2){if(Wd&&!U){C.errorRecoveryDisabledLanes|=m,Go|=m,f=4;break e}m=Kr,Kr=f,m!==null&&(Kr===null?Kr=m:Kr.push.apply(Kr,m))}f=T}if(m=!1,f!==2)continue}}if(f===1){Nl(t,0),Qa(t,r,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Qa(l,r,pi,!Fa);break e;case 2:Kr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=uh+300-Hn(),10<f)){if(Qa(l,r,pi,!Fa),Jr(l,0,!0)!==0)break e;ia=r,l.timeoutHandle=Yv(yv.bind(null,l,a,Kr,hh,Zd,r,pi,Go,Ol,Fa,m,"Throttled",-0,0),f);break e}yv(l,a,Kr,hh,Zd,r,pi,Go,Ol,Fa,m,null,-0,0)}}break}while(!0);_s(t)}function yv(t,r,a,l,f,m,T,C,U,se,fe,ye,oe,ue){if(t.timeoutHandle=-1,ye=r.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:cr},uv(r,m,ye);var Ue=(m&62914560)===m?uh-Hn():(m&4194048)===m?dv-Hn():0;if(Ue=gw(ye,Ue),Ue!==null){ia=m,t.cancelPendingCommit=Ue(Av.bind(null,t,r,m,a,l,f,T,C,U,fe,ye,null,oe,ue)),Qa(t,m,T,!se);return}}Av(t,r,m,a,l,f,T,C,U)}function NT(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!hr(m(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Qa(t,r,a,l){r&=~Jd,r&=~Go,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var f=r;0<f;){var m=31-Ne(f),T=1<<m;l[m]=-1,f&=~T}a!==0&&bi(t,a,r)}function fh(){return(Vt&6)===0?(ju(0),!1):!0}function rp(){if(bt!==null){if(Bt===0)var t=bt.return;else t=bt,Ys=jo=null,_d(t),Tl=null,_u=0,t=bt;for(;t!==null;)Qy(t.alternate,t),t=t.return;bt=null}}function Nl(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,JT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ia=0,rp(),Yt=t,bt=a=Ks(t.current,null),Tt=r,Bt=0,di=null,Fa=!1,Il=_r(t,r),Wd=!1,Ol=pi=Jd=Go=Ka=yn=0,Kr=Vu=null,Zd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var f=31-Ne(l),m=1<<f;r|=t[f],l&=~m}return ra=r,Yn(),a}function vv(t,r){ft=null,ce.H=Ru,r===El||r===Bc?(r=Mg(),Bt=3):r===od?(r=Mg(),Bt=4):Bt=r===Vd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,di=r,bt===null&&(yn=1,th(t,Oi(r,t.current)))}function _v(){var t=hi.current;return t===null?!0:(Tt&4194048)===Tt?Mi===null:(Tt&62914560)===Tt||(Tt&536870912)!==0?t===Mi:!1}function bv(){var t=ce.H;return ce.H=Ru,t===null?Ru:t}function Ev(){var t=ce.A;return ce.A=OT,t}function dh(){yn=4,Fa||(Tt&4194048)!==Tt&&hi.current!==null||(Il=!0),(Ka&134217727)===0&&(Go&134217727)===0||Yt===null||Qa(Yt,Tt,pi,!1)}function ip(t,r,a){var l=Vt;Vt|=2;var f=bv(),m=Ev();(Yt!==t||Tt!==r)&&(hh=null,Nl(t,r)),r=!1;var T=yn;e:do try{if(Bt!==0&&bt!==null){var C=bt,U=di;switch(Bt){case 8:rp(),T=6;break e;case 3:case 2:case 9:case 6:hi.current===null&&(r=!0);var se=Bt;if(Bt=0,di=null,kl(t,C,U,se),a&&Il){T=0;break e}break;default:se=Bt,Bt=0,di=null,kl(t,C,U,se)}}kT(),T=yn;break}catch(fe){vv(t,fe)}while(!0);return r&&t.shellSuspendCounter++,Ys=jo=null,Vt=l,ce.H=f,ce.A=m,bt===null&&(Yt=null,Tt=0,Yn()),T}function kT(){for(;bt!==null;)Tv(bt)}function MT(t,r){var a=Vt;Vt|=2;var l=bv(),f=Ev();Yt!==t||Tt!==r?(hh=null,ch=Hn()+500,Nl(t,r)):Il=_r(t,r);e:do try{if(Bt!==0&&bt!==null){r=bt;var m=di;t:switch(Bt){case 1:Bt=0,di=null,kl(t,r,m,1);break;case 2:case 9:if(Ng(m)){Bt=0,di=null,wv(r);break}r=function(){Bt!==2&&Bt!==9||Yt!==t||(Bt=7),_s(t)},m.then(r,r);break e;case 3:Bt=7;break e;case 4:Bt=5;break e;case 7:Ng(m)?(Bt=0,di=null,wv(r)):(Bt=0,di=null,kl(t,r,m,7));break;case 5:var T=null;switch(bt.tag){case 26:T=bt.memoizedState;case 5:case 27:var C=bt;if(T?l_(T):C.stateNode.complete){Bt=0,di=null;var U=C.sibling;if(U!==null)bt=U;else{var se=C.return;se!==null?(bt=se,ph(se)):bt=null}break t}}Bt=0,di=null,kl(t,r,m,5);break;case 6:Bt=0,di=null,kl(t,r,m,6);break;case 8:rp(),yn=6;break e;default:throw Error(s(462))}}VT();break}catch(fe){vv(t,fe)}while(!0);return Ys=jo=null,ce.H=l,ce.A=f,Vt=a,bt!==null?0:(Yt=null,Tt=0,Yn(),yn)}function VT(){for(;bt!==null&&!ll();)Tv(bt)}function Tv(t){var r=Gy(t.alternate,t,ra);t.memoizedProps=t.pendingProps,r===null?ph(t):bt=r}function wv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=zy(a,r,r.pendingProps,r.type,void 0,Tt);break;case 11:r=zy(a,r,r.pendingProps,r.type.render,r.ref,Tt);break;case 5:_d(r);default:Qy(a,r),r=bt=Eg(r,ra),r=Gy(a,r,ra)}t.memoizedProps=t.pendingProps,r===null?ph(t):bt=r}function kl(t,r,a,l){Ys=jo=null,_d(r),Tl=null,_u=0;var f=r.return;try{if(wT(t,f,r,a,Tt)){yn=1,th(t,Oi(a,t.current)),bt=null;return}}catch(m){if(f!==null)throw bt=f,m;yn=1,th(t,Oi(a,t.current)),bt=null;return}r.flags&32768?(It||l===1?t=!0:Il||(Tt&536870912)!==0?t=!1:(Fa=t=!0,(l===2||l===9||l===3||l===6)&&(l=hi.current,l!==null&&l.tag===13&&(l.flags|=16384))),Sv(r,t)):ph(r)}function ph(t){var r=t;do{if((r.flags&32768)!==0){Sv(r,Fa);return}t=r.return;var a=CT(r.alternate,r,ra);if(a!==null){bt=a;return}if(r=r.sibling,r!==null){bt=r;return}bt=r=t}while(r!==null);yn===0&&(yn=5)}function Sv(t,r){do{var a=RT(t.alternate,t);if(a!==null){a.flags&=32767,bt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){bt=t;return}bt=t=a}while(t!==null);yn=6,bt=null}function Av(t,r,a,l,f,m,T,C,U){t.cancelPendingCommit=null;do mh();while(Un!==0);if((Vt&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(m=r.lanes|r.childLanes,m|=ht,Ao(t,a,m,T,C,U),t===Yt&&(bt=Yt=null,Tt=0),Dl=r,Ya=t,ia=a,ep=m,tp=f,pv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,UT(vi,function(){return Ov(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=ce.T,ce.T=null,f=Ie.p,Ie.p=2,T=Vt,Vt|=4;try{xT(t,r,a)}finally{Vt=T,Ie.p=f,ce.T=l}}Un=1,Cv(),Rv(),xv()}}function Cv(){if(Un===1){Un=0;var t=Ya,r=Dl,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=ce.T,ce.T=null;var l=Ie.p;Ie.p=2;var f=Vt;Vt|=4;try{av(r,t);var m=gp,T=S(t.containerInfo),C=m.focusedElem,U=m.selectionRange;if(T!==C&&C&&C.ownerDocument&&E(C.ownerDocument.documentElement,C)){if(U!==null&&A(C)){var se=U.start,fe=U.end;if(fe===void 0&&(fe=se),"selectionStart"in C)C.selectionStart=se,C.selectionEnd=Math.min(fe,C.value.length);else{var ye=C.ownerDocument||document,oe=ye&&ye.defaultView||window;if(oe.getSelection){var ue=oe.getSelection(),Ue=C.textContent.length,We=Math.min(U.start,Ue),Kt=U.end===void 0?We:Math.min(U.end,Ue);!ue.extend&&We>Kt&&(T=Kt,Kt=We,We=T);var ee=y(C,We),G=y(C,Kt);if(ee&&G&&(ue.rangeCount!==1||ue.anchorNode!==ee.node||ue.anchorOffset!==ee.offset||ue.focusNode!==G.node||ue.focusOffset!==G.offset)){var ie=ye.createRange();ie.setStart(ee.node,ee.offset),ue.removeAllRanges(),We>Kt?(ue.addRange(ie),ue.extend(G.node,G.offset)):(ie.setEnd(G.node,G.offset),ue.addRange(ie))}}}}for(ye=[],ue=C;ue=ue.parentNode;)ue.nodeType===1&&ye.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<ye.length;C++){var me=ye[C];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Rh=!!mp,gp=mp=null}finally{Vt=f,Ie.p=l,ce.T=a}}t.current=r,Un=2}}function Rv(){if(Un===2){Un=0;var t=Ya,r=Dl,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=ce.T,ce.T=null;var l=Ie.p;Ie.p=2;var f=Vt;Vt|=4;try{tv(t,r.alternate,r)}finally{Vt=f,Ie.p=l,ce.T=a}}Un=3}}function xv(){if(Un===4||Un===3){Un=0,as();var t=Ya,r=Dl,a=ia,l=pv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Un=5:(Un=0,Dl=Ya=null,Iv(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Ga=null),Ir(a),r=r.stateNode,_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(or,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=ce.T,f=Ie.p,Ie.p=2,ce.T=null;try{for(var m=t.onRecoverableError,T=0;T<l.length;T++){var C=l[T];m(C.value,{componentStack:C.stack})}}finally{ce.T=r,Ie.p=f}}(ia&3)!==0&&mh(),_s(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===np?Pu++:(Pu=0,np=t):Pu=0,ju(0)}}function Iv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,yu(r)))}function mh(){return Cv(),Rv(),xv(),Ov()}function Ov(){if(Un!==5)return!1;var t=Ya,r=ep;ep=0;var a=Ir(ia),l=ce.T,f=Ie.p;try{Ie.p=32>a?32:a,ce.T=null,a=tp,tp=null;var m=Ya,T=ia;if(Un=0,Dl=Ya=null,ia=0,(Vt&6)!==0)throw Error(s(331));var C=Vt;if(Vt|=4,hv(m.current),lv(m,m.current,T,a),Vt=C,ju(0,!1),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(or,m)}catch{}return!0}finally{Ie.p=f,ce.T=l,Iv(t,r)}}function Dv(t,r,a){r=Oi(a,r),r=Md(t.stateNode,r,2),t=za(t,r,2),t!==null&&(xr(t,2),_s(t))}function qt(t,r,a){if(t.tag===3)Dv(t,t,a);else for(;r!==null;){if(r.tag===3){Dv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ga===null||!Ga.has(l))){t=Oi(a,t),a=Ny(2),l=za(r,a,2),l!==null&&(ky(a,l,r,t),xr(l,2),_s(l));break}}r=r.return}}function sp(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new DT;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(Wd=!0,f.add(a),t=PT.bind(null,t,r,a),r.then(t,t))}function PT(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Yt===t&&(Tt&a)===a&&(yn===4||yn===3&&(Tt&62914560)===Tt&&300>Hn()-uh?(Vt&2)===0&&Nl(t,0):Jd|=a,Ol===Tt&&(Ol=0)),_s(t)}function Nv(t,r){r===0&&(r=ul()),t=tn(t,r),t!==null&&(xr(t,r),_s(t))}function jT(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Nv(t,a)}function LT(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),Nv(t,a)}function UT(t,r){return sn(t,r)}var gh=null,Ml=null,ap=!1,yh=!1,op=!1,$a=0;function _s(t){t!==Ml&&t.next===null&&(Ml===null?gh=Ml=t:Ml=Ml.next=t),yh=!0,ap||(ap=!0,BT())}function ju(t,r){if(!op&&yh){op=!0;do for(var a=!1,l=gh;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var T=l.suspendedLanes,C=l.pingedLanes;m=(1<<31-Ne(42|t)+1)-1,m&=f&~(T&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Pv(l,m))}else m=Tt,m=Jr(l,l===Yt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||_r(l,m)||(a=!0,Pv(l,m));l=l.next}while(a);op=!1}}function zT(){kv()}function kv(){yh=ap=!1;var t=0;$a!==0&&WT()&&(t=$a);for(var r=Hn(),a=null,l=gh;l!==null;){var f=l.next,m=Mv(l,r);m===0?(l.next=null,a===null?gh=f:a.next=f,f===null&&(Ml=a)):(a=l,(t!==0||(m&3)!==0)&&(yh=!0)),l=f}Un!==0&&Un!==5||ju(t),$a!==0&&($a=0)}function Mv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var T=31-Ne(m),C=1<<T,U=f[T];U===-1?((C&a)===0||(C&l)!==0)&&(f[T]=cu(C,r)):U<=r&&(t.expiredLanes|=C),m&=~C}if(r=Yt,a=Tt,a=Jr(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Bt===2||Bt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&jn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||_r(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&jn(l),Ir(a)){case 2:case 8:a=Wr;break;case 32:a=vi;break;case 268435456:a=ya;break;default:a=vi}return l=Vv.bind(null,t),a=sn(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&jn(l),t.callbackPriority=2,t.callbackNode=null,2}function Vv(t,r){if(Un!==0&&Un!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(mh()&&t.callbackNode!==a)return null;var l=Tt;return l=Jr(t,t===Yt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(gv(t,l,r),Mv(t,Hn()),t.callbackNode!=null&&t.callbackNode===a?Vv.bind(null,t):null)}function Pv(t,r){if(mh())return null;gv(t,r,!0)}function BT(){ZT(function(){(Vt&6)!==0?sn(Xr,zT):kv()})}function lp(){if($a===0){var t=_l;t===0&&(t=Re,Re<<=1,(Re&261888)===0&&(Re=256)),$a=t}return $a}function jv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ai(""+t)}function Lv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function qT(t,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var m=jv((f[$t]||null).action),T=l.submitter;T&&(r=(r=T[$t]||null)?jv(r.formAction):T.getAttribute("formAction"),r!==null&&(m=r,T=null));var C=new Si("action","action",null,l,f);t.push({event:C,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if($a!==0){var U=T?Lv(f,T):new FormData(f);xd(a,{pending:!0,data:U,method:f.method,action:m},null,U)}}else typeof m=="function"&&(C.preventDefault(),U=T?Lv(f,T):new FormData(f),xd(a,{pending:!0,data:U,method:f.method,action:m},m,U))},currentTarget:f}]})}}for(var up=0;up<Oe.length;up++){var cp=Oe[up],HT=cp.toLowerCase(),FT=cp[0].toUpperCase()+cp.slice(1);we(HT,"on"+FT)}we(re,"onAnimationEnd"),we(ae,"onAnimationIteration"),we(he,"onAnimationStart"),we("dblclick","onDoubleClick"),we("focusin","onFocus"),we("focusout","onBlur"),we(ge,"onTransitionRun"),we(Se,"onTransitionStart"),we(De,"onTransitionCancel"),we(Te,"onTransitionEnd"),Nr("onMouseEnter",["mouseout","mouseover"]),Nr("onMouseLeave",["mouseout","mouseover"]),Nr("onPointerEnter",["pointerout","pointerover"]),Nr("onPointerLeave",["pointerout","pointerover"]),Dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function Uv(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var T=l.length-1;0<=T;T--){var C=l[T],U=C.instance,se=C.currentTarget;if(C=C.listener,U!==m&&f.isPropagationStopped())break e;m=C,f.currentTarget=se;try{m(f)}catch(fe){Me(fe)}f.currentTarget=null,m=U}else for(T=0;T<l.length;T++){if(C=l[T],U=C.instance,se=C.currentTarget,C=C.listener,U!==m&&f.isPropagationStopped())break e;m=C,f.currentTarget=se;try{m(f)}catch(fe){Me(fe)}f.currentTarget=null,m=U}}}}function Et(t,r){var a=r[Ki];a===void 0&&(a=r[Ki]=new Set);var l=t+"__bubble";a.has(l)||(zv(r,t,2,!1),a.add(l))}function hp(t,r,a){var l=0;r&&(l|=4),zv(a,t,l,r)}var vh="_reactListening"+Math.random().toString(36).slice(2);function fp(t){if(!t[vh]){t[vh]=!0,Ei.forEach(function(a){a!=="selectionchange"&&(KT.has(a)||hp(a,!1,t),hp(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[vh]||(r[vh]=!0,hp("selectionchange",!1,r))}}function zv(t,r,a,l){switch(m_(r)){case 2:var f=_w;break;case 8:f=bw;break;default:f=Rp}a=f.bind(null,r,a,t),f=void 0,!Us||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(r,a,{capture:!0,passive:f}):t.addEventListener(r,a,!0):f!==void 0?t.addEventListener(r,a,{passive:f}):t.addEventListener(r,a,!1)}function dp(t,r,a,l,f){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var C=l.stateNode.containerInfo;if(C===f)break;if(T===4)for(T=l.return;T!==null;){var U=T.tag;if((U===3||U===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;C!==null;){if(T=Or(C),T===null)return;if(U=T.tag,U===5||U===6||U===26||U===27){l=m=T;continue e}C=C.parentNode}}l=l.return}Vr(function(){var se=m,fe=br(a),ye=[];e:{var oe=Ce.get(t);if(oe!==void 0){var ue=Si,Ue=t;switch(t){case"keypress":if($i(a)===0)break e;case"keydown":case"keyup":ue=qs;break;case"focusin":Ue="focus",ue=Ri;break;case"focusout":Ue="blur",ue=Ri;break;case"beforeblur":case"afterblur":ue=Ri;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=zs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Io;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=v;break;case re:case ae:case he:ue=Oo;break;case Te:ue=I;break;case"scroll":case"scrollend":ue=hs;break;case"wheel":ue=le;break;case"copy":case"cut":case"paste":ue=Ji;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=xi;break;case"toggle":case"beforetoggle":ue=st}var We=(r&4)!==0,Kt=!We&&(t==="scroll"||t==="scrollend"),ee=We?oe!==null?oe+"Capture":null:oe;We=[];for(var G=se,ie;G!==null;){var me=G;if(ie=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||ie===null||ee===null||(me=Er(G,ee),me!=null&&We.push(Uu(G,me,ie))),Kt)break;G=G.return}0<We.length&&(oe=new ue(oe,Ue,null,a,fe),ye.push({event:oe,listeners:We}))}}if((r&7)===0){e:{if(oe=t==="mouseover"||t==="pointerover",ue=t==="mouseout"||t==="pointerout",oe&&a!==Mr&&(Ue=a.relatedTarget||a.fromElement)&&(Or(Ue)||Ue[Ln]))break e;if((ue||oe)&&(oe=fe.window===fe?fe:(oe=fe.ownerDocument)?oe.defaultView||oe.parentWindow:window,ue?(Ue=a.relatedTarget||a.toElement,ue=se,Ue=Ue?Or(Ue):null,Ue!==null&&(Kt=u(Ue),We=Ue.tag,Ue!==Kt||We!==5&&We!==27&&We!==6)&&(Ue=null)):(ue=null,Ue=se),ue!==Ue)){if(We=zs,me="onMouseLeave",ee="onMouseEnter",G="mouse",(t==="pointerout"||t==="pointerover")&&(We=xi,me="onPointerLeave",ee="onPointerEnter",G="pointer"),Kt=ue==null?oe:En(ue),ie=Ue==null?oe:En(Ue),oe=new We(me,G+"leave",ue,a,fe),oe.target=Kt,oe.relatedTarget=ie,me=null,Or(fe)===se&&(We=new We(ee,G+"enter",Ue,a,fe),We.target=ie,We.relatedTarget=Kt,me=We),Kt=me,ue&&Ue)t:{for(We=GT,ee=ue,G=Ue,ie=0,me=ee;me;me=We(me))ie++;me=0;for(var Ye=G;Ye;Ye=We(Ye))me++;for(;0<ie-me;)ee=We(ee),ie--;for(;0<me-ie;)G=We(G),me--;for(;ie--;){if(ee===G||G!==null&&ee===G.alternate){We=ee;break t}ee=We(ee),G=We(G)}We=null}else We=null;ue!==null&&Bv(ye,oe,ue,We,!1),Ue!==null&&Kt!==null&&Bv(ye,Kt,Ue,We,!0)}}e:{if(oe=se?En(se):window,ue=oe.nodeName&&oe.nodeName.toLowerCase(),ue==="select"||ue==="input"&&oe.type==="file")var kt=ko;else if(fl(oe))if(Ii)kt=ka;else{kt=Fs;var He=Vc}else ue=oe.nodeName,!ue||ue.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?se&&Ta(se.elementType)&&(kt=ko):kt=du;if(kt&&(kt=kt(t,se))){fu(ye,kt,a,fe);break e}He&&He(t,oe,se),t==="focusout"&&se&&oe.type==="number"&&se.memoizedProps.value!=null&&Ls(oe,"number",oe.value)}switch(He=se?En(se):window,t){case"focusin":(fl(He)||He.contentEditable==="true")&&(V=He,q=se,F=null);break;case"focusout":F=q=V=null;break;case"mousedown":W=!0;break;case"contextmenu":case"mouseup":case"dragend":W=!1,z(ye,a,fe);break;case"selectionchange":if(D)break;case"keydown":case"keyup":z(ye,a,fe)}var pt;if(xt)e:{switch(t){case"compositionstart":var wt="onCompositionStart";break e;case"compositionend":wt="onCompositionEnd";break e;case"compositionupdate":wt="onCompositionUpdate";break e}wt=void 0}else Hs?ps(t,a)&&(wt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(wt="onCompositionStart");wt&&(zr&&a.locale!=="ko"&&(Hs||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&Hs&&(pt=Qi()):(Pr=fe,wa="value"in Pr?Pr.value:Pr.textContent,Hs=!0)),He=_h(se,wt),0<He.length&&(wt=new jr(wt,t,null,a,fe),ye.push({event:wt,listeners:He}),pt?wt.data=pt:(pt=Oa(a),pt!==null&&(wt.data=pt)))),(pt=Ur?Nc(t,a):Gf(t,a))&&(wt=_h(se,"onBeforeInput"),0<wt.length&&(He=new jr("onBeforeInput","beforeinput",null,a,fe),ye.push({event:He,listeners:wt}),He.data=pt)),qT(ye,t,se,a,fe)}Uv(ye,r)})}function Uu(t,r,a){return{instance:t,listener:r,currentTarget:a}}function _h(t,r){for(var a=r+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Er(t,a),f!=null&&l.unshift(Uu(t,f,m)),f=Er(t,r),f!=null&&l.push(Uu(t,f,m))),t.tag===3)return l;t=t.return}return[]}function GT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Bv(t,r,a,l,f){for(var m=r._reactName,T=[];a!==null&&a!==l;){var C=a,U=C.alternate,se=C.stateNode;if(C=C.tag,U!==null&&U===l)break;C!==5&&C!==26&&C!==27||se===null||(U=se,f?(se=Er(a,m),se!=null&&T.unshift(Uu(a,se,U))):f||(se=Er(a,m),se!=null&&T.push(Uu(a,se,U)))),a=a.return}T.length!==0&&t.push({event:r,listeners:T})}var YT=/\r\n?/g,QT=/\u0000|\uFFFD/g;function qv(t){return(typeof t=="string"?t:""+t).replace(YT,`
`).replace(QT,"")}function Hv(t,r){return r=qv(r),qv(t)===r}function Ft(t,r,a,l,f,m){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Jn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Jn(t,""+l);break;case"className":ur(t,"class",l);break;case"tabIndex":ur(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ur(t,a,l);break;case"style":Ea(t,l,m);break;case"data":if(r!=="object"){ur(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ai(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&Ft(t,r,"name",f.name,f,null),Ft(t,r,"formEncType",f.formEncType,f,null),Ft(t,r,"formMethod",f.formMethod,f,null),Ft(t,r,"formTarget",f.formTarget,f,null)):(Ft(t,r,"encType",f.encType,f,null),Ft(t,r,"method",f.method,f,null),Ft(t,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ai(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=cr);break;case"onScroll":l!=null&&Et("scroll",t);break;case"onScrollEnd":l!=null&&Et("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ai(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Et("beforetoggle",t),Et("toggle",t),ct(t,"popover",l);break;case"xlinkActuate":ln(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ln(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ln(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ln(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ln(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ln(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ln(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ln(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ln(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ct(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=hl.get(a)||a,ct(t,a,l))}}function pp(t,r,a,l,f,m){switch(a){case"style":Ea(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Jn(t,l):(typeof l=="number"||typeof l=="bigint")&&Jn(t,""+l);break;case"onScroll":l!=null&&Et("scroll",t);break;case"onScrollEnd":l!=null&&Et("scrollend",t);break;case"onClick":l!=null&&(t.onclick=cr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ls.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),m=t[$t]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ct(t,a,l)}}}function nr(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",t),Et("load",t);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var T=a[m];if(T!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ft(t,r,m,T,a,null)}}f&&Ft(t,r,"srcSet",a.srcSet,a,null),l&&Ft(t,r,"src",a.src,a,null);return;case"input":Et("invalid",t);var C=m=T=f=null,U=null,se=null;for(l in a)if(a.hasOwnProperty(l)){var fe=a[l];if(fe!=null)switch(l){case"name":f=fe;break;case"type":T=fe;break;case"checked":U=fe;break;case"defaultChecked":se=fe;break;case"value":m=fe;break;case"defaultValue":C=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(s(137,r));break;default:Ft(t,r,l,fe,a,null)}}ba(t,m,C,U,se,T,f,!1);return;case"select":Et("invalid",t),l=T=m=null;for(f in a)if(a.hasOwnProperty(f)&&(C=a[f],C!=null))switch(f){case"value":m=C;break;case"defaultValue":T=C;break;case"multiple":l=C;default:Ft(t,r,f,C,a,null)}r=m,a=T,t.multiple=!!l,r!=null?ii(t,!!l,r,!1):a!=null&&ii(t,!!l,a,!0);return;case"textarea":Et("invalid",t),m=f=l=null;for(T in a)if(a.hasOwnProperty(T)&&(C=a[T],C!=null))switch(T){case"value":l=C;break;case"defaultValue":f=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:Ft(t,r,T,C,a,null)}si(t,l,f,m);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(l=a[U],l!=null))switch(U){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ft(t,r,U,l,a,null)}return;case"dialog":Et("beforetoggle",t),Et("toggle",t),Et("cancel",t),Et("close",t);break;case"iframe":case"object":Et("load",t);break;case"video":case"audio":for(l=0;l<Lu.length;l++)Et(Lu[l],t);break;case"image":Et("error",t),Et("load",t);break;case"details":Et("toggle",t);break;case"embed":case"source":case"link":Et("error",t),Et("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in a)if(a.hasOwnProperty(se)&&(l=a[se],l!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ft(t,r,se,l,a,null)}return;default:if(Ta(r)){for(fe in a)a.hasOwnProperty(fe)&&(l=a[fe],l!==void 0&&pp(t,r,fe,l,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(l=a[C],l!=null&&Ft(t,r,C,l,a,null))}function $T(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,T=null,C=null,U=null,se=null,fe=null;for(ue in a){var ye=a[ue];if(a.hasOwnProperty(ue)&&ye!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":U=ye;default:l.hasOwnProperty(ue)||Ft(t,r,ue,null,l,ye)}}for(var oe in l){var ue=l[oe];if(ye=a[oe],l.hasOwnProperty(oe)&&(ue!=null||ye!=null))switch(oe){case"type":m=ue;break;case"name":f=ue;break;case"checked":se=ue;break;case"defaultChecked":fe=ue;break;case"value":T=ue;break;case"defaultValue":C=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(s(137,r));break;default:ue!==ye&&Ft(t,r,oe,ue,l,ye)}}ri(t,T,C,U,se,fe,m,f);return;case"select":ue=T=C=oe=null;for(m in a)if(U=a[m],a.hasOwnProperty(m)&&U!=null)switch(m){case"value":break;case"multiple":ue=U;default:l.hasOwnProperty(m)||Ft(t,r,m,null,l,U)}for(f in l)if(m=l[f],U=a[f],l.hasOwnProperty(f)&&(m!=null||U!=null))switch(f){case"value":oe=m;break;case"defaultValue":C=m;break;case"multiple":T=m;default:m!==U&&Ft(t,r,f,m,l,U)}r=C,a=T,l=ue,oe!=null?ii(t,!!a,oe,!1):!!l!=!!a&&(r!=null?ii(t,!!a,r,!0):ii(t,!!a,a?[]:"",!1));return;case"textarea":ue=oe=null;for(C in a)if(f=a[C],a.hasOwnProperty(C)&&f!=null&&!l.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Ft(t,r,C,null,l,f)}for(T in l)if(f=l[T],m=a[T],l.hasOwnProperty(T)&&(f!=null||m!=null))switch(T){case"value":oe=f;break;case"defaultValue":ue=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&Ft(t,r,T,f,l,m)}xo(t,oe,ue);return;case"option":for(var Ue in a)if(oe=a[Ue],a.hasOwnProperty(Ue)&&oe!=null&&!l.hasOwnProperty(Ue))switch(Ue){case"selected":t.selected=!1;break;default:Ft(t,r,Ue,null,l,oe)}for(U in l)if(oe=l[U],ue=a[U],l.hasOwnProperty(U)&&oe!==ue&&(oe!=null||ue!=null))switch(U){case"selected":t.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:Ft(t,r,U,oe,l,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var We in a)oe=a[We],a.hasOwnProperty(We)&&oe!=null&&!l.hasOwnProperty(We)&&Ft(t,r,We,null,l,oe);for(se in l)if(oe=l[se],ue=a[se],l.hasOwnProperty(se)&&oe!==ue&&(oe!=null||ue!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(137,r));break;default:Ft(t,r,se,oe,l,ue)}return;default:if(Ta(r)){for(var Kt in a)oe=a[Kt],a.hasOwnProperty(Kt)&&oe!==void 0&&!l.hasOwnProperty(Kt)&&pp(t,r,Kt,void 0,l,oe);for(fe in l)oe=l[fe],ue=a[fe],!l.hasOwnProperty(fe)||oe===ue||oe===void 0&&ue===void 0||pp(t,r,fe,oe,l,ue);return}}for(var ee in a)oe=a[ee],a.hasOwnProperty(ee)&&oe!=null&&!l.hasOwnProperty(ee)&&Ft(t,r,ee,null,l,oe);for(ye in l)oe=l[ye],ue=a[ye],!l.hasOwnProperty(ye)||oe===ue||oe==null&&ue==null||Ft(t,r,ye,oe,l,ue)}function Fv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function XT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],m=f.transferSize,T=f.initiatorType,C=f.duration;if(m&&C&&Fv(T)){for(T=0,C=f.responseEnd,l+=1;l<a.length;l++){var U=a[l],se=U.startTime;if(se>C)break;var fe=U.transferSize,ye=U.initiatorType;fe&&Fv(ye)&&(U=U.responseEnd,T+=fe*(U<C?1:(C-se)/(U-se)))}if(--l,r+=8*(m+T)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var mp=null,gp=null;function bh(t){return t.nodeType===9?t:t.ownerDocument}function Kv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gv(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function yp(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var vp=null;function WT(){var t=window.event;return t&&t.type==="popstate"?t===vp?!1:(vp=t,!0):(vp=null,!1)}var Yv=typeof setTimeout=="function"?setTimeout:void 0,JT=typeof clearTimeout=="function"?clearTimeout:void 0,Qv=typeof Promise=="function"?Promise:void 0,ZT=typeof queueMicrotask=="function"?queueMicrotask:typeof Qv<"u"?function(t){return Qv.resolve(null).then(t).catch(ew)}:Yv;function ew(t){setTimeout(function(){throw t})}function Xa(t){return t==="head"}function $v(t,r){var a=r,l=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(f),Ll(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")zu(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,zu(a);for(var m=a.firstChild;m;){var T=m.nextSibling,C=m.nodeName;m[Fn]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=T}}else a==="body"&&zu(t.ownerDocument.body);a=f}while(a);Ll(r)}function Xv(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function _p(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":_p(a),js(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function tw(t,r,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Fn])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Vi(t.nextSibling),t===null)break}return null}function nw(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Vi(t.nextSibling),t===null))return null;return t}function Wv(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Vi(t.nextSibling),t===null))return null;return t}function bp(t){return t.data==="$?"||t.data==="$~"}function Ep(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function rw(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Vi(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Tp=null;function Jv(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Vi(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function Zv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function e_(t,r,a){switch(r=bh(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function zu(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);js(t)}var Pi=new Map,t_=new Set;function Eh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var sa=Ie.d;Ie.d={f:iw,r:sw,D:aw,C:ow,L:lw,m:uw,X:hw,S:cw,M:fw};function iw(){var t=sa.f(),r=fh();return t||r}function sw(t){var r=Ot(t);r!==null&&r.tag===5&&r.type==="form"?vy(r):sa.r(t)}var Vl=typeof document>"u"?null:document;function n_(t,r,a){var l=Vl;if(l&&typeof r=="string"&&r){var f=xn(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),t_.has(f)||(t_.add(f),t={rel:t,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),nr(r,"link",t),on(r),l.head.appendChild(r)))}}function aw(t){sa.D(t),n_("dns-prefetch",t,null)}function ow(t,r){sa.C(t,r),n_("preconnect",t,r)}function lw(t,r,a){sa.L(t,r,a);var l=Vl;if(l&&t&&r){var f='link[rel="preload"][as="'+xn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+xn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+xn(a.imageSizes)+'"]')):f+='[href="'+xn(t)+'"]';var m=f;switch(r){case"style":m=Pl(t);break;case"script":m=jl(t)}Pi.has(m)||(t=x({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Pi.set(m,t),l.querySelector(f)!==null||r==="style"&&l.querySelector(Bu(m))||r==="script"&&l.querySelector(qu(m))||(r=l.createElement("link"),nr(r,"link",t),on(r),l.head.appendChild(r)))}}function uw(t,r){sa.m(t,r);var a=Vl;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+xn(l)+'"][href="'+xn(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=jl(t)}if(!Pi.has(m)&&(t=x({rel:"modulepreload",href:t},r),Pi.set(m,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(qu(m)))return}l=a.createElement("link"),nr(l,"link",t),on(l),a.head.appendChild(l)}}}function cw(t,r,a){sa.S(t,r,a);var l=Vl;if(l&&t){var f=Rn(l).hoistableStyles,m=Pl(t);r=r||"default";var T=f.get(m);if(!T){var C={loading:0,preload:null};if(T=l.querySelector(Bu(m)))C.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Pi.get(m))&&wp(t,a);var U=T=l.createElement("link");on(U),nr(U,"link",t),U._p=new Promise(function(se,fe){U.onload=se,U.onerror=fe}),U.addEventListener("load",function(){C.loading|=1}),U.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Th(T,r,l)}T={type:"stylesheet",instance:T,count:1,state:C},f.set(m,T)}}}function hw(t,r){sa.X(t,r);var a=Vl;if(a&&t){var l=Rn(a).hoistableScripts,f=jl(t),m=l.get(f);m||(m=a.querySelector(qu(f)),m||(t=x({src:t,async:!0},r),(r=Pi.get(f))&&Sp(t,r),m=a.createElement("script"),on(m),nr(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function fw(t,r){sa.M(t,r);var a=Vl;if(a&&t){var l=Rn(a).hoistableScripts,f=jl(t),m=l.get(f);m||(m=a.querySelector(qu(f)),m||(t=x({src:t,async:!0,type:"module"},r),(r=Pi.get(f))&&Sp(t,r),m=a.createElement("script"),on(m),nr(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function r_(t,r,a,l){var f=(f=Ze.current)?Eh(f):null;if(!f)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Pl(a.href),a=Rn(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Pl(a.href);var m=Rn(f).hoistableStyles,T=m.get(t);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,T),(m=f.querySelector(Bu(t)))&&!m._p&&(T.instance=m,T.state.loading=5),Pi.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Pi.set(t,a),m||dw(f,t,a,T.state))),r&&l===null)throw Error(s(528,""));return T}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=jl(a),a=Rn(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Pl(t){return'href="'+xn(t)+'"'}function Bu(t){return'link[rel="stylesheet"]['+t+"]"}function i_(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function dw(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),nr(r,"link",a),on(r),t.head.appendChild(r))}function jl(t){return'[src="'+xn(t)+'"]'}function qu(t){return"script[async]"+t}function s_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+xn(a.href)+'"]');if(l)return r.instance=l,on(l),l;var f=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),on(l),nr(l,"style",f),Th(l,a.precedence,t),r.instance=l;case"stylesheet":f=Pl(a.href);var m=t.querySelector(Bu(f));if(m)return r.state.loading|=4,r.instance=m,on(m),m;l=i_(a),(f=Pi.get(f))&&wp(l,f),m=(t.ownerDocument||t).createElement("link"),on(m);var T=m;return T._p=new Promise(function(C,U){T.onload=C,T.onerror=U}),nr(m,"link",l),r.state.loading|=4,Th(m,a.precedence,t),r.instance=m;case"script":return m=jl(a.src),(f=t.querySelector(qu(m)))?(r.instance=f,on(f),f):(l=a,(f=Pi.get(m))&&(l=x({},a),Sp(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),on(f),nr(f,"link",l),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Th(l,a.precedence,t));return r.instance}function Th(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,T=0;T<l.length;T++){var C=l[T];if(C.dataset.precedence===r)m=C;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function wp(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Sp(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var wh=null;function a_(t,r,a){if(wh===null){var l=new Map,f=wh=new Map;f.set(a,l)}else f=wh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var m=a[f];if(!(m[Fn]||m[Lt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var T=m.getAttribute(r)||"";T=t+T;var C=l.get(T);C?C.push(m):l.set(T,[m])}}return l}function o_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function pw(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function l_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function mw(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Pl(l.href),m=r.querySelector(Bu(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Sh.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=m,on(m);return}m=r.ownerDocument||r,l=i_(l),(f=Pi.get(f))&&wp(l,f),m=m.createElement("link"),on(m);var T=m;T._p=new Promise(function(C,U){T.onload=C,T.onerror=U}),nr(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Sh.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var Ap=0;function gw(t,r){return t.stylesheets&&t.count===0&&Ch(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Ch(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&Ap===0&&(Ap=62500*XT());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ch(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Ap?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Sh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ch(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ah=null;function Ch(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ah=new Map,r.forEach(yw,t),Ah=null,Sh.call(t))}function yw(t,r){if(!(r.state.loading&4)){var a=Ah.get(t);if(a)var l=a.get(null);else{a=new Map,Ah.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var T=f[m];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),l=T)}l&&a.set(null,l)}f=r.instance,T=f.getAttribute("data-precedence"),m=a.get(T)||l,m===l&&a.set(null,f),a.set(T,f),this.count++,l=Sh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Hu={$$typeof:Ve,Provider:null,Consumer:null,_currentValue:Be,_currentValue2:Be,_threadCount:0};function vw(t,r,a,l,f,m,T,C,U){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wn(0),this.hiddenUpdates=Wn(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function u_(t,r,a,l,f,m,T,C,U,se,fe,ye){return t=new vw(t,r,a,T,U,se,fe,ye,C),r=1,m===!0&&(r|=24),m=ci(3,null,null,r),t.current=m,m.stateNode=t,r=id(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:r},ld(m),t}function c_(t){return t?(t=Br,t):Br}function h_(t,r,a,l,f,m){f=c_(f),l.context===null?l.context=f:l.pendingContext=f,l=Ua(r),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=za(t,l,r),a!==null&&(Gr(a,t,r),Eu(a,t,r))}function f_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Cp(t,r){f_(t,r),(t=t.alternate)&&f_(t,r)}function d_(t){if(t.tag===13||t.tag===31){var r=tn(t,67108864);r!==null&&Gr(r,t,67108864),Cp(t,67108864)}}function p_(t){if(t.tag===13||t.tag===31){var r=mi();r=Vs(r);var a=tn(t,r);a!==null&&Gr(a,t,r),Cp(t,r)}}var Rh=!0;function _w(t,r,a,l){var f=ce.T;ce.T=null;var m=Ie.p;try{Ie.p=2,Rp(t,r,a,l)}finally{Ie.p=m,ce.T=f}}function bw(t,r,a,l){var f=ce.T;ce.T=null;var m=Ie.p;try{Ie.p=8,Rp(t,r,a,l)}finally{Ie.p=m,ce.T=f}}function Rp(t,r,a,l){if(Rh){var f=xp(l);if(f===null)dp(t,r,l,xh,a),g_(t,l);else if(Tw(f,t,r,a,l))l.stopPropagation();else if(g_(t,l),r&4&&-1<Ew.indexOf(t)){for(;f!==null;){var m=Ot(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var T=Rr(m.pendingLanes);if(T!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var U=1<<31-Ne(T);C.entanglements[1]|=U,T&=~U}_s(m),(Vt&6)===0&&(ch=Hn()+500,ju(0))}}break;case 31:case 13:C=tn(m,2),C!==null&&Gr(C,m,2),fh(),Cp(m,2)}if(m=xp(l),m===null&&dp(t,r,l,xh,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else dp(t,r,l,null,a)}}function xp(t){return t=br(t),Ip(t)}var xh=null;function Ip(t){if(xh=null,t=Or(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===31){if(t=g(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return xh=t,null}function m_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($r()){case Xr:return 2;case Wr:return 8;case vi:case Ns:return 32;case ya:return 268435456;default:return 32}default:return 32}}var Op=!1,Wa=null,Ja=null,Za=null,Fu=new Map,Ku=new Map,eo=[],Ew="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function g_(t,r){switch(t){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":Za=null;break;case"pointerover":case"pointerout":Fu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ku.delete(r.pointerId)}}function Gu(t,r,a,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Ot(r),r!==null&&d_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function Tw(t,r,a,l,f){switch(r){case"focusin":return Wa=Gu(Wa,t,r,a,l,f),!0;case"dragenter":return Ja=Gu(Ja,t,r,a,l,f),!0;case"mouseover":return Za=Gu(Za,t,r,a,l,f),!0;case"pointerover":var m=f.pointerId;return Fu.set(m,Gu(Fu.get(m)||null,t,r,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,Ku.set(m,Gu(Ku.get(m)||null,t,r,a,l,f)),!0}return!1}function y_(t){var r=Or(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,lr(t.priority,function(){p_(a)});return}}else if(r===31){if(r=g(a),r!==null){t.blockedOn=r,lr(t.priority,function(){p_(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ih(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=xp(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Mr=l,a.target.dispatchEvent(l),Mr=null}else return r=Ot(a),r!==null&&d_(r),t.blockedOn=a,!1;r.shift()}return!0}function v_(t,r,a){Ih(t)&&a.delete(r)}function ww(){Op=!1,Wa!==null&&Ih(Wa)&&(Wa=null),Ja!==null&&Ih(Ja)&&(Ja=null),Za!==null&&Ih(Za)&&(Za=null),Fu.forEach(v_),Ku.forEach(v_)}function Oh(t,r){t.blockedOn===r&&(t.blockedOn=null,Op||(Op=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,ww)))}var Dh=null;function __(t){Dh!==t&&(Dh=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Dh===t&&(Dh=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],f=t[r+2];if(typeof l!="function"){if(Ip(l||a)===null)continue;break}var m=Ot(a);m!==null&&(t.splice(r,3),r-=3,xd(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Ll(t){function r(U){return Oh(U,t)}Wa!==null&&Oh(Wa,t),Ja!==null&&Oh(Ja,t),Za!==null&&Oh(Za,t),Fu.forEach(r),Ku.forEach(r);for(var a=0;a<eo.length;a++){var l=eo[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<eo.length&&(a=eo[0],a.blockedOn===null);)y_(a),a.blockedOn===null&&eo.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],T=f[$t]||null;if(typeof m=="function")T||__(a);else if(T){var C=null;if(m&&m.hasAttribute("formAction")){if(f=m,T=m[$t]||null)C=T.formAction;else if(Ip(f)!==null)continue}else C=T.action;typeof C=="function"?a[l+1]=C:(a.splice(l,3),l-=3),__(a)}}}function b_(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(T){return f=T})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Dp(t){this._internalRoot=t}Nh.prototype.render=Dp.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=mi();h_(a,l,t,r,null,null)},Nh.prototype.unmount=Dp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;h_(t.current,2,null,t,null,null),fh(),r[Ln]=null}};function Nh(t){this._internalRoot=t}Nh.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ps();t={blockedOn:null,target:t,priority:r};for(var a=0;a<eo.length&&r!==0&&r<eo[a].priority;a++);eo.splice(a,0,t),a===0&&y_(t)}};var E_=e.version;if(E_!=="19.2.1")throw Error(s(527,E_,"19.2.1"));Ie.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=b(r),t=t!==null?R(t):null,t=t===null?null:t.stateNode,t};var Sw={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:ce,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kh.isDisabled&&kh.supportsFiber)try{or=kh.inject(Sw),_n=kh}catch{}}return Qu.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",f=xy,m=Iy,T=Oy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError)),r=u_(t,1,!1,null,null,a,l,null,f,m,T,b_),t[Ln]=r.current,fp(t),new Dp(r)},Qu.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,f="",m=xy,T=Iy,C=Oy,U=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.formState!==void 0&&(U=a.formState)),r=u_(t,1,!0,r,a??null,l,f,U,m,T,C,b_),r.context=c_(null),a=r.current,l=mi(),l=Vs(l),f=Ua(l),f.callback=null,za(a,f,l),a=l,r.current.lanes=a,xr(r,a),_s(r),t[Ln]=r.current,fp(t),new Nh(r)},Qu.version="19.2.1",Qu}var D_;function Vw(){if(D_)return Mp.exports;D_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Mp.exports=Mw(),Mp.exports}var Pw=Vw();const jw=Rm(Pw);var Gh={exports:{}},Lw=Gh.exports,N_;function Uw(){return N_||(N_=1,(function(i,e){(function(n,s){i.exports=s()})(Lw,function(){var n=function(h,p){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var S in E)Object.prototype.hasOwnProperty.call(E,S)&&(y[S]=E[S])})(h,p)},s=function(){return(s=Object.assign||function(h){for(var p,y=1,E=arguments.length;y<E;y++)for(var S in p=arguments[y])Object.prototype.hasOwnProperty.call(p,S)&&(h[S]=p[S]);return h}).apply(this,arguments)};function o(h,p,y){for(var E,S=0,A=p.length;S<A;S++)!E&&S in p||((E=E||Array.prototype.slice.call(p,0,S))[S]=p[S]);return h.concat(E||Array.prototype.slice.call(p))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Cw,d=Object.keys,g=Array.isArray;function _(h,p){return typeof p!="object"||d(p).forEach(function(y){h[y]=p[y]}),h}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var b=Object.getPrototypeOf,R={}.hasOwnProperty;function x(h,p){return R.call(h,p)}function N(h,p){typeof p=="function"&&(p=p(b(h))),(typeof Reflect>"u"?d:Reflect.ownKeys)(p).forEach(function(y){te(h,y,p[y])})}var Q=Object.defineProperty;function te(h,p,y,E){Q(h,p,_(y&&x(y,"get")&&typeof y.get=="function"?{get:y.get,set:y.set,configurable:!0}:{value:y,configurable:!0,writable:!0},E))}function de(h){return{from:function(p){return h.prototype=Object.create(p.prototype),te(h.prototype,"constructor",h),{extend:N.bind(null,h.prototype)}}}}var be=Object.getOwnPropertyDescriptor,je=[].slice;function Fe(h,p,y){return je.call(h,p,y)}function Ve(h,p){return p(h)}function rt(h){if(!h)throw new Error("Assertion Failed")}function it(h){u.setImmediate?setImmediate(h):setTimeout(h,0)}function $e(h,p){if(typeof p=="string"&&x(h,p))return h[p];if(!p)return h;if(typeof p!="string"){for(var y=[],E=0,S=p.length;E<S;++E){var A=$e(h,p[E]);y.push(A)}return y}var D=p.indexOf(".");if(D!==-1){var V=h[p.substr(0,D)];return V==null?void 0:$e(V,p.substr(D+1))}}function P(h,p,y){if(h&&p!==void 0&&!("isFrozen"in Object&&Object.isFrozen(h)))if(typeof p!="string"&&"length"in p){rt(typeof y!="string"&&"length"in y);for(var E=0,S=p.length;E<S;++E)P(h,p[E],y[E])}else{var A,D,V=p.indexOf(".");V!==-1?(A=p.substr(0,V),(D=p.substr(V+1))===""?y===void 0?g(h)&&!isNaN(parseInt(A))?h.splice(A,1):delete h[A]:h[A]=y:P(V=!(V=h[A])||!x(h,A)?h[A]={}:V,D,y)):y===void 0?g(h)&&!isNaN(parseInt(p))?h.splice(p,1):delete h[p]:h[p]=y}}function k(h){var p,y={};for(p in h)x(h,p)&&(y[p]=h[p]);return y}var L=[].concat;function Y(h){return L.apply([],h)}var Xr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Y([8,16,32,64].map(function(h){return["Int","Uint","Float"].map(function(p){return p+h+"Array"})}))).filter(function(h){return u[h]}),j=new Set(Xr.map(function(h){return u[h]})),B=null;function M(h){return B=new WeakMap,h=(function p(y){if(!y||typeof y!="object")return y;var E=B.get(y);if(E)return E;if(g(y)){E=[],B.set(y,E);for(var S=0,A=y.length;S<A;++S)E.push(p(y[S]))}else if(j.has(y.constructor))E=y;else{var D,V=b(y);for(D in E=V===Object.prototype?{}:Object.create(V),B.set(y,E),y)x(y,D)&&(E[D]=p(y[D]))}return E})(h),B=null,h}var ut={}.toString;function Gt(h){return ut.call(h).slice(8,-1)}var ce=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ie=typeof ce=="symbol"?function(h){var p;return h!=null&&(p=h[ce])&&p.apply(h)}:function(){return null};function Be(h,p){return p=h.indexOf(p),0<=p&&h.splice(p,1),0<=p}var ze={};function qe(h){var p,y,E,S;if(arguments.length===1){if(g(h))return h.slice();if(this===ze&&typeof h=="string")return[h];if(S=Ie(h)){for(y=[];!(E=S.next()).done;)y.push(E.value);return y}if(h==null)return[h];if(typeof(p=h.length)!="number")return[h];for(y=new Array(p);p--;)y[p]=h[p];return y}for(p=arguments.length,y=new Array(p);p--;)y[p]=arguments[p];return y}var H=typeof Symbol<"u"?function(h){return h[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},$r=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],wr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat($r),pe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function xe(h,p){this.name=h,this.message=p}function Pe(h,p){return h+". Errors: "+Object.keys(p).map(function(y){return p[y].toString()}).filter(function(y,E,S){return S.indexOf(y)===E}).join(`
`)}function Xe(h,p,y,E){this.failures=p,this.failedKeys=E,this.successCount=y,this.message=Pe(h,p)}function Ze(h,p){this.name="BulkError",this.failures=Object.keys(p).map(function(y){return p[y]}),this.failuresByPos=p,this.message=Pe(h,this.failures)}de(xe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),de(Xe).from(xe),de(Ze).from(xe);var yt=wr.reduce(function(h,p){return h[p]=p+"Error",h},{}),vn=xe,ke=wr.reduce(function(h,p){var y=p+"Error";function E(S,A){this.name=y,S?typeof S=="string"?(this.message="".concat(S).concat(A?`
 `+A:""),this.inner=A||null):typeof S=="object"&&(this.message="".concat(S.name," ").concat(S.message),this.inner=S):(this.message=pe[p]||y,this.inner=null)}return de(E).from(vn),h[p]=E,h},{});ke.Syntax=SyntaxError,ke.Type=TypeError,ke.Range=RangeError;var ss=$r.reduce(function(h,p){return h[p+"Error"]=ke[p],h},{}),Hi=wr.reduce(function(h,p){return["Syntax","Type","Range"].indexOf(p)===-1&&(h[p+"Error"]=ke[p]),h},{});function Rt(){}function gi(h){return h}function yi(h,p){return h==null||h===gi?p:function(y){return p(h(y))}}function Qr(h,p){return function(){h.apply(this,arguments),p.apply(this,arguments)}}function Ds(h,p){return h===Rt?p:function(){var y=h.apply(this,arguments);y!==void 0&&(arguments[0]=y);var E=this.onsuccess,S=this.onerror;this.onsuccess=null,this.onerror=null;var A=p.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?Qr(E,this.onsuccess):E),S&&(this.onerror=this.onerror?Qr(S,this.onerror):S),A!==void 0?A:y}}function wo(h,p){return h===Rt?p:function(){h.apply(this,arguments);var y=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,p.apply(this,arguments),y&&(this.onsuccess=this.onsuccess?Qr(y,this.onsuccess):y),E&&(this.onerror=this.onerror?Qr(E,this.onerror):E)}}function So(h,p){return h===Rt?p:function(y){var E=h.apply(this,arguments);_(y,E);var S=this.onsuccess,A=this.onerror;return this.onsuccess=null,this.onerror=null,y=p.apply(this,arguments),S&&(this.onsuccess=this.onsuccess?Qr(S,this.onsuccess):S),A&&(this.onerror=this.onerror?Qr(A,this.onerror):A),E===void 0?y===void 0?void 0:y:_(E,y)}}function pn(h,p){return h===Rt?p:function(){return p.apply(this,arguments)!==!1&&h.apply(this,arguments)}}function sn(h,p){return h===Rt?p:function(){var y=h.apply(this,arguments);if(y&&typeof y.then=="function"){for(var E=this,S=arguments.length,A=new Array(S);S--;)A[S]=arguments[S];return y.then(function(){return p.apply(E,A)})}return p.apply(this,arguments)}}Hi.ModifyError=Xe,Hi.DexieError=xe,Hi.BulkError=Ze;var jn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ll(h){jn=h}var as={},Hn=100,Xr=typeof Promise>"u"?[]:(function(){var h=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[h,b(h),h];var p=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[p,b(p),h]})(),$r=Xr[0],wr=Xr[1],Xr=Xr[2],wr=wr&&wr.then,Wr=$r&&$r.constructor,vi=!!Xr,Ns=function(h,p){os.push([h,p]),ks&&(queueMicrotask(ul),ks=!1)},ya=!0,ks=!0,_i=[],or=[],_n=gi,bn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Rt,pgp:!1,env:{},finalize:Rt},Ne=bn,os=[],Cr=0,Ms=[];function Re(h){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var p=this._PSD=Ne;if(typeof h!="function"){if(h!==as)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Rr(this,this._value))}this._state=null,this._value=null,++p.ref,(function y(E,S){try{S(function(A){if(E._state===null){if(A===E)throw new TypeError("A promise cannot be resolved with itself.");var D=E._lib&&Wn();A&&typeof A.then=="function"?y(E,function(V,q){A instanceof Re?A._then(V,q):A.then(V,q)}):(E._state=!0,E._value=A,Jr(E)),D&&xr()}},Rr.bind(null,E))}catch(A){Rr(E,A)}})(this,h)}var Fi={get:function(){var h=Ne,p=lr;function y(E,S){var A=this,D=!h.global&&(h!==Ne||p!==lr),V=D&&!Ln(),q=new Re(function(F,W){_r(A,new an(js(E,h,D,V),js(S,h,D,V),F,W,h))});return this._consoleTask&&(q._consoleTask=this._consoleTask),q}return y.prototype=as,y},set:function(h){te(this,"then",h&&h.prototype===as?Fi:{get:function(){return h},set:Fi.set})}};function an(h,p,y,E,S){this.onFulfilled=typeof h=="function"?h:null,this.onRejected=typeof p=="function"?p:null,this.resolve=y,this.reject=E,this.psd=S}function Rr(h,p){var y,E;or.push(p),h._state===null&&(y=h._lib&&Wn(),p=_n(p),h._state=!1,h._value=p,E=h,_i.some(function(S){return S._value===E._value})||_i.push(E),Jr(h),y&&xr())}function Jr(h){var p=h._listeners;h._listeners=[];for(var y=0,E=p.length;y<E;++y)_r(h,p[y]);var S=h._PSD;--S.ref||S.finalize(),Cr===0&&(++Cr,Ns(function(){--Cr==0&&Ao()},[]))}function _r(h,p){if(h._state!==null){var y=h._state?p.onFulfilled:p.onRejected;if(y===null)return(h._state?p.resolve:p.reject)(h._value);++p.psd.ref,++Cr,Ns(cu,[y,h,p])}else h._listeners.push(p)}function cu(h,p,y){try{var E,S=p._value;!p._state&&or.length&&(or=[]),E=jn&&p._consoleTask?p._consoleTask.run(function(){return h(S)}):h(S),p._state||or.indexOf(S)!==-1||(function(A){for(var D=_i.length;D;)if(_i[--D]._value===A._value)return _i.splice(D,1)})(p),y.resolve(E)}catch(A){y.reject(A)}finally{--Cr==0&&Ao(),--y.psd.ref||y.psd.finalize()}}function ul(){Fn(bn,function(){Wn()&&xr()})}function Wn(){var h=ya;return ks=ya=!1,h}function xr(){var h,p,y;do for(;0<os.length;)for(h=os,os=[],y=h.length,p=0;p<y;++p){var E=h[p];E[0].apply(null,E[1])}while(0<os.length);ks=ya=!0}function Ao(){var h=_i;_i=[],h.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var p=Ms.slice(0),y=p.length;y;)p[--y]()}function bi(h){return new Re(as,!1,h)}function Pt(h,p){var y=Ne;return function(){var E=Wn(),S=Ne;try{return ei(y,!0),h.apply(this,arguments)}catch(A){p&&p(A)}finally{ei(S,!1),E&&xr()}}}N(Re.prototype,{then:Fi,_then:function(h,p){_r(this,new an(null,null,h,p,Ne))},catch:function(h){if(arguments.length===1)return this.then(null,h);var p=h,y=arguments[1];return typeof p=="function"?this.then(null,function(E){return(E instanceof p?y:bi)(E)}):this.then(null,function(E){return(E&&E.name===p?y:bi)(E)})},finally:function(h){return this.then(function(p){return Re.resolve(h()).then(function(){return p})},function(p){return Re.resolve(h()).then(function(){return bi(p)})})},timeout:function(h,p){var y=this;return h<1/0?new Re(function(E,S){var A=setTimeout(function(){return S(new ke.Timeout(p))},h);y.then(E,S).finally(clearTimeout.bind(null,A))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&te(Re.prototype,Symbol.toStringTag,"Dexie.Promise"),bn.env=Co(),N(Re,{all:function(){var h=qe.apply(null,arguments).map(Ki);return new Re(function(p,y){h.length===0&&p([]);var E=h.length;h.forEach(function(S,A){return Re.resolve(S).then(function(D){h[A]=D,--E||p(h)},y)})})},resolve:function(h){return h instanceof Re?h:h&&typeof h.then=="function"?new Re(function(p,y){h.then(p,y)}):new Re(as,!0,h)},reject:bi,race:function(){var h=qe.apply(null,arguments).map(Ki);return new Re(function(p,y){h.map(function(E){return Re.resolve(E).then(p,y)})})},PSD:{get:function(){return Ne},set:function(h){return Ne=h}},totalEchoes:{get:function(){return lr}},newPSD:Lt,usePSD:Fn,scheduler:{get:function(){return Ns},set:function(h){Ns=h}},rejectionMapper:{get:function(){return _n},set:function(h){_n=h}},follow:function(h,p){return new Re(function(y,E){return Lt(function(S,A){var D=Ne;D.unhandleds=[],D.onunhandled=A,D.finalize=Qr(function(){var V,q=this;V=function(){q.unhandleds.length===0?S():A(q.unhandleds[0])},Ms.push(function F(){V(),Ms.splice(Ms.indexOf(F),1)}),++Cr,Ns(function(){--Cr==0&&Ao()},[])},D.finalize),h()},p,y,E)})}}),Wr&&(Wr.allSettled&&te(Re,"allSettled",function(){var h=qe.apply(null,arguments).map(Ki);return new Re(function(p){h.length===0&&p([]);var y=h.length,E=new Array(y);h.forEach(function(S,A){return Re.resolve(S).then(function(D){return E[A]={status:"fulfilled",value:D}},function(D){return E[A]={status:"rejected",reason:D}}).then(function(){return--y||p(E)})})})}),Wr.any&&typeof AggregateError<"u"&&te(Re,"any",function(){var h=qe.apply(null,arguments).map(Ki);return new Re(function(p,y){h.length===0&&y(new AggregateError([]));var E=h.length,S=new Array(E);h.forEach(function(A,D){return Re.resolve(A).then(function(V){return p(V)},function(V){S[D]=V,--E||y(new AggregateError(S))})})})}),Wr.withResolvers&&(Re.withResolvers=Wr.withResolvers));var en={awaits:0,echoes:0,id:0},Vs=0,Ir=[],Ps=0,lr=0,Zr=0;function Lt(h,p,y,E){var S=Ne,A=Object.create(S);return A.parent=S,A.ref=0,A.global=!1,A.id=++Zr,bn.env,A.env=vi?{Promise:Re,PromiseProp:{value:Re,configurable:!0,writable:!0},all:Re.all,race:Re.race,allSettled:Re.allSettled,any:Re.any,resolve:Re.resolve,reject:Re.reject}:{},p&&_(A,p),++S.ref,A.finalize=function(){--this.parent.ref||this.parent.finalize()},E=Fn(A,h,y,E),A.ref===0&&A.finalize(),E}function $t(){return en.id||(en.id=++Vs),++en.awaits,en.echoes+=Hn,en.id}function Ln(){return!!en.awaits&&(--en.awaits==0&&(en.id=0),en.echoes=en.awaits*Hn,!0)}function Ki(h){return en.echoes&&h&&h.constructor===Wr?($t(),h.then(function(p){return Ln(),p},function(p){return Ln(),Ot(p)})):h}function hu(){var h=Ir[Ir.length-1];Ir.pop(),ei(h,!1)}function ei(h,p){var y,E=Ne;(p?!en.echoes||Ps++&&h===Ne:!Ps||--Ps&&h===Ne)||queueMicrotask(p?(function(S){++lr,en.echoes&&--en.echoes!=0||(en.echoes=en.awaits=en.id=0),Ir.push(Ne),ei(S,!0)}).bind(null,h):hu),h!==Ne&&(Ne=h,E===bn&&(bn.env=Co()),vi&&(y=bn.env.Promise,p=h.env,(E.global||h.global)&&(Object.defineProperty(u,"Promise",p.PromiseProp),y.all=p.all,y.race=p.race,y.resolve=p.resolve,y.reject=p.reject,p.allSettled&&(y.allSettled=p.allSettled),p.any&&(y.any=p.any))))}function Co(){var h=u.Promise;return vi?{Promise:h,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:h.all,race:h.race,allSettled:h.allSettled,any:h.any,resolve:h.resolve,reject:h.reject}:{}}function Fn(h,p,y,E,S){var A=Ne;try{return ei(h,!0),p(y,E,S)}finally{ei(A,!1)}}function js(h,p,y,E){return typeof h!="function"?h:function(){var S=Ne;y&&$t(),ei(p,!0);try{return h.apply(this,arguments)}finally{ei(S,!1),E&&queueMicrotask(Ln)}}}function Or(h){Promise===Wr&&en.echoes===0?Ps===0?h():enqueueNativeMicroTask(h):setTimeout(h,0)}(""+wr).indexOf("[native code]")===-1&&($t=Ln=Rt);var Ot=Re.reject,En="",Rn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",on="String expected.",Ei=[],ls="__dbnames",Dr="readonly",Nr="readwrite";function ti(h,p){return h?p?function(){return h.apply(this,arguments)&&p.apply(this,arguments)}:h:p}var va={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function us(h){return typeof h!="string"||/\./.test(h)?function(p){return p}:function(p){return p[h]===void 0&&h in p&&delete(p=M(p))[h],p}}function Ro(){throw ke.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ct(h,p){try{var y=ur(h),E=ur(p);if(y!==E)return y==="Array"?1:E==="Array"?-1:y==="binary"?1:E==="binary"?-1:y==="string"?1:E==="string"?-1:y==="Date"?1:E!=="Date"?NaN:-1;switch(y){case"number":case"Date":case"string":return p<h?1:h<p?-1:0;case"binary":return(function(S,A){for(var D=S.length,V=A.length,q=D<V?D:V,F=0;F<q;++F)if(S[F]!==A[F])return S[F]<A[F]?-1:1;return D===V?0:D<V?-1:1})(ln(h),ln(p));case"Array":return(function(S,A){for(var D=S.length,V=A.length,q=D<V?D:V,F=0;F<q;++F){var W=ct(S[F],A[F]);if(W!==0)return W}return D===V?0:D<V?-1:1})(h,p)}}catch{}return NaN}function ur(h){var p=typeof h;return p!="object"?p:ArrayBuffer.isView(h)?"binary":(h=Gt(h),h==="ArrayBuffer"?"binary":h)}function ln(h){return h instanceof Uint8Array?h:ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):new Uint8Array(h)}function un(h,p,y){var E=h.schema.yProps;return E?(p&&0<y.numFailures&&(p=p.filter(function(S,A){return!y.failures[A]})),Promise.all(E.map(function(S){return S=S.updatesTable,p?h.db.table(S).where("k").anyOf(p).delete():h.db.table(S).clear()})).then(function(){return y})):y}var kr=(_a.prototype.execute=function(h){var p=this["@@propmod"];if(p.add!==void 0){var y=p.add;if(g(y))return o(o([],g(h)?h:[],!0),y).sort();if(typeof y=="number")return(Number(h)||0)+y;if(typeof y=="bigint")try{return BigInt(h)+y}catch{return BigInt(0)+y}throw new TypeError("Invalid term ".concat(y))}if(p.remove!==void 0){var E=p.remove;if(g(E))return g(h)?h.filter(function(S){return!E.includes(S)}).sort():[];if(typeof E=="number")return Number(h)-E;if(typeof E=="bigint")try{return BigInt(h)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return y=(y=p.replacePrefix)===null||y===void 0?void 0:y[0],y&&typeof h=="string"&&h.startsWith(y)?p.replacePrefix[1]+h.substring(y.length):h},_a);function _a(h){this["@@propmod"]=h}function Nt(h,p){for(var y=d(p),E=y.length,S=!1,A=0;A<E;++A){var D=y[A],V=p[D],q=$e(h,D);V instanceof kr?(P(h,D,V.execute(q)),S=!0):q!==V&&(P(h,D,V),S=!0)}return S}var cs=(_t.prototype._trans=function(h,p,y){var E=this._tx||Ne.trans,S=this.name,A=jn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(h==="readonly"?"read":"write"," ").concat(this.name));function D(F,W,z){if(!z.schema[S])throw new ke.NotFound("Table "+S+" not part of transaction");return p(z.idbtrans,z)}var V=Wn();try{var q=E&&E.db._novip===this.db._novip?E===Ne.trans?E._promise(h,D,y):Lt(function(){return E._promise(h,D,y)},{trans:E,transless:Ne.transless||Ne}):(function F(W,z,Z,K){if(W.idbdb&&(W._state.openComplete||Ne.letThrough||W._vip)){var $=W._createTransaction(z,Z,W._dbSchema);try{$.create(),W._state.PR1398_maxLoop=3}catch(X){return X.name===yt.InvalidState&&W.isOpen()&&0<--W._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),W.close({disableAutoOpen:!1}),W.open().then(function(){return F(W,z,Z,K)})):Ot(X)}return $._promise(z,function(X,J){return Lt(function(){return Ne.trans=$,K(X,J,$)})}).then(function(X){if(z==="readwrite")try{$.idbtrans.commit()}catch{}return z==="readonly"?X:$._completion.then(function(){return X})})}if(W._state.openComplete)return Ot(new ke.DatabaseClosed(W._state.dbOpenError));if(!W._state.isBeingOpened){if(!W._state.autoOpen)return Ot(new ke.DatabaseClosed);W.open().catch(Rt)}return W._state.dbReadyPromise.then(function(){return F(W,z,Z,K)})})(this.db,h,[this.name],D);return A&&(q._consoleTask=A,q=q.catch(function(F){return console.trace(F),Ot(F)})),q}finally{V&&xr()}},_t.prototype.get=function(h,p){var y=this;return h&&h.constructor===Object?this.where(h).first(p):h==null?Ot(new ke.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return y.core.get({trans:E,key:h}).then(function(S){return y.hook.reading.fire(S)})}).then(p)},_t.prototype.where=function(h){if(typeof h=="string")return new this.db.WhereClause(this,h);if(g(h))return new this.db.WhereClause(this,"[".concat(h.join("+"),"]"));var p=d(h);if(p.length===1)return this.where(p[0]).equals(h[p[0]]);var y=this.schema.indexes.concat(this.schema.primKey).filter(function(V){if(V.compound&&p.every(function(F){return 0<=V.keyPath.indexOf(F)})){for(var q=0;q<p.length;++q)if(p.indexOf(V.keyPath[q])===-1)return!1;return!0}return!1}).sort(function(V,q){return V.keyPath.length-q.keyPath.length})[0];if(y&&this.db._maxKey!==En){var A=y.keyPath.slice(0,p.length);return this.where(A).equals(A.map(function(q){return h[q]}))}!y&&jn&&console.warn("The query ".concat(JSON.stringify(h)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(p.join("+"),"]"));var E=this.schema.idxByName;function S(V,q){return ct(V,q)===0}var D=p.reduce(function(z,q){var F=z[0],W=z[1],z=E[q],Z=h[q];return[F||z,F||!z?ti(W,z&&z.multi?function(K){return K=$e(K,q),g(K)&&K.some(function($){return S(Z,$)})}:function(K){return S(Z,$e(K,q))}):W]},[null,null]),A=D[0],D=D[1];return A?this.where(A.name).equals(h[A.keyPath]).filter(D):y?this.filter(D):this.where(p).equals("")},_t.prototype.filter=function(h){return this.toCollection().and(h)},_t.prototype.count=function(h){return this.toCollection().count(h)},_t.prototype.offset=function(h){return this.toCollection().offset(h)},_t.prototype.limit=function(h){return this.toCollection().limit(h)},_t.prototype.each=function(h){return this.toCollection().each(h)},_t.prototype.toArray=function(h){return this.toCollection().toArray(h)},_t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},_t.prototype.orderBy=function(h){return new this.db.Collection(new this.db.WhereClause(this,g(h)?"[".concat(h.join("+"),"]"):h))},_t.prototype.reverse=function(){return this.toCollection().reverse()},_t.prototype.mapToClass=function(h){var p,y=this.db,E=this.name;function S(){return p!==null&&p.apply(this,arguments)||this}(this.schema.mappedClass=h).prototype instanceof Ro&&((function(q,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function W(){this.constructor=q}n(q,F),q.prototype=F===null?Object.create(F):(W.prototype=F.prototype,new W)})(S,p=h),Object.defineProperty(S.prototype,"db",{get:function(){return y},enumerable:!1,configurable:!0}),S.prototype.table=function(){return E},h=S);for(var A=new Set,D=h.prototype;D;D=b(D))Object.getOwnPropertyNames(D).forEach(function(q){return A.add(q)});function V(q){if(!q)return q;var F,W=Object.create(h.prototype);for(F in q)if(!A.has(F))try{W[F]=q[F]}catch{}return W}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=V,this.hook("reading",V),h},_t.prototype.defineClass=function(){return this.mapToClass(function(h){_(this,h)})},_t.prototype.add=function(h,p){var y=this,E=this.schema.primKey,S=E.auto,A=E.keyPath,D=h;return A&&S&&(D=us(A)(h)),this._trans("readwrite",function(V){return y.core.mutate({trans:V,type:"add",keys:p!=null?[p]:null,values:[D]})}).then(function(V){return V.numFailures?Re.reject(V.failures[0]):V.lastResult}).then(function(V){if(A)try{P(h,A,V)}catch{}return V})},_t.prototype.upsert=function(h,p){var y=this,E=this.schema.primKey.keyPath;return this._trans("readwrite",function(S){return y.core.get({trans:S,key:h}).then(function(A){var D=A??{};return Nt(D,p),E&&P(D,E,h),y.core.mutate({trans:S,type:"put",values:[D],keys:[h],upsert:!0,updates:{keys:[h],changeSpecs:[p]}}).then(function(V){return V.numFailures?Re.reject(V.failures[0]):!!A})})})},_t.prototype.update=function(h,p){return typeof h!="object"||g(h)?this.where(":id").equals(h).modify(p):(h=$e(h,this.schema.primKey.keyPath),h===void 0?Ot(new ke.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(h).modify(p))},_t.prototype.put=function(h,p){var y=this,E=this.schema.primKey,S=E.auto,A=E.keyPath,D=h;return A&&S&&(D=us(A)(h)),this._trans("readwrite",function(V){return y.core.mutate({trans:V,type:"put",values:[D],keys:p!=null?[p]:null})}).then(function(V){return V.numFailures?Re.reject(V.failures[0]):V.lastResult}).then(function(V){if(A)try{P(h,A,V)}catch{}return V})},_t.prototype.delete=function(h){var p=this;return this._trans("readwrite",function(y){return p.core.mutate({trans:y,type:"delete",keys:[h]}).then(function(E){return un(p,[h],E)}).then(function(E){return E.numFailures?Re.reject(E.failures[0]):void 0})})},_t.prototype.clear=function(){var h=this;return this._trans("readwrite",function(p){return h.core.mutate({trans:p,type:"deleteRange",range:va}).then(function(y){return un(h,null,y)})}).then(function(p){return p.numFailures?Re.reject(p.failures[0]):void 0})},_t.prototype.bulkGet=function(h){var p=this;return this._trans("readonly",function(y){return p.core.getMany({keys:h,trans:y}).then(function(E){return E.map(function(S){return p.hook.reading.fire(S)})})})},_t.prototype.bulkAdd=function(h,p,y){var E=this,S=Array.isArray(p)?p:void 0,A=(y=y||(S?void 0:p))?y.allKeys:void 0;return this._trans("readwrite",function(D){var F=E.schema.primKey,V=F.auto,F=F.keyPath;if(F&&S)throw new ke.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(S&&S.length!==h.length)throw new ke.InvalidArgument("Arguments objects and keys must have the same length");var q=h.length,F=F&&V?h.map(us(F)):h;return E.core.mutate({trans:D,type:"add",keys:S,values:F,wantResults:A}).then(function($){var z=$.numFailures,Z=$.results,K=$.lastResult,$=$.failures;if(z===0)return A?Z:K;throw new Ze("".concat(E.name,".bulkAdd(): ").concat(z," of ").concat(q," operations failed"),$)})})},_t.prototype.bulkPut=function(h,p,y){var E=this,S=Array.isArray(p)?p:void 0,A=(y=y||(S?void 0:p))?y.allKeys:void 0;return this._trans("readwrite",function(D){var F=E.schema.primKey,V=F.auto,F=F.keyPath;if(F&&S)throw new ke.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(S&&S.length!==h.length)throw new ke.InvalidArgument("Arguments objects and keys must have the same length");var q=h.length,F=F&&V?h.map(us(F)):h;return E.core.mutate({trans:D,type:"put",keys:S,values:F,wantResults:A}).then(function($){var z=$.numFailures,Z=$.results,K=$.lastResult,$=$.failures;if(z===0)return A?Z:K;throw new Ze("".concat(E.name,".bulkPut(): ").concat(z," of ").concat(q," operations failed"),$)})})},_t.prototype.bulkUpdate=function(h){var p=this,y=this.core,E=h.map(function(D){return D.key}),S=h.map(function(D){return D.changes}),A=[];return this._trans("readwrite",function(D){return y.getMany({trans:D,keys:E,cache:"clone"}).then(function(V){var q=[],F=[];h.forEach(function(z,Z){var K=z.key,$=z.changes,X=V[Z];if(X){for(var J=0,re=Object.keys($);J<re.length;J++){var ae=re[J],he=$[ae];if(ae===p.schema.primKey.keyPath){if(ct(he,K)!==0)throw new ke.Constraint("Cannot update primary key in bulkUpdate()")}else P(X,ae,he)}A.push(Z),q.push(K),F.push(X)}});var W=q.length;return y.mutate({trans:D,type:"put",keys:q,values:F,updates:{keys:E,changeSpecs:S}}).then(function(z){var Z=z.numFailures,K=z.failures;if(Z===0)return W;for(var $=0,X=Object.keys(K);$<X.length;$++){var J,re=X[$],ae=A[Number(re)];ae!=null&&(J=K[re],delete K[re],K[ae]=J)}throw new Ze("".concat(p.name,".bulkUpdate(): ").concat(Z," of ").concat(W," operations failed"),K)})})})},_t.prototype.bulkDelete=function(h){var p=this,y=h.length;return this._trans("readwrite",function(E){return p.core.mutate({trans:E,type:"delete",keys:h}).then(function(S){return un(p,h,S)})}).then(function(D){var S=D.numFailures,A=D.lastResult,D=D.failures;if(S===0)return A;throw new Ze("".concat(p.name,".bulkDelete(): ").concat(S," of ").concat(y," operations failed"),D)})},_t);function _t(){}function ni(h){function p(D,V){if(V){for(var q=arguments.length,F=new Array(q-1);--q;)F[q-1]=arguments[q];return y[D].subscribe.apply(null,F),h}if(typeof D=="string")return y[D]}var y={};p.addEventType=A;for(var E=1,S=arguments.length;E<S;++E)A(arguments[E]);return p;function A(D,V,q){if(typeof D!="object"){var F;V=V||pn;var W={subscribers:[],fire:q=q||Rt,subscribe:function(z){W.subscribers.indexOf(z)===-1&&(W.subscribers.push(z),W.fire=V(W.fire,z))},unsubscribe:function(z){W.subscribers=W.subscribers.filter(function(Z){return Z!==z}),W.fire=W.subscribers.reduce(V,q)}};return y[D]=p[D]=W}d(F=D).forEach(function(z){var Z=F[z];if(g(Z))A(z,F[z][0],F[z][1]);else{if(Z!=="asap")throw new ke.InvalidArgument("Invalid event config");var K=A(z,gi,function(){for(var $=arguments.length,X=new Array($);$--;)X[$]=arguments[$];K.subscribers.forEach(function(J){it(function(){J.apply(null,X)})})})}})}}function xn(h,p){return de(p).from({prototype:h}),p}function ri(h,p){return!(h.filter||h.algorithm||h.or)&&(p?h.justLimit:!h.replayFilter)}function ba(h,p){h.filter=ti(h.filter,p)}function Ls(h,p,y){var E=h.replayFilter;h.replayFilter=E?function(){return ti(E(),p())}:p,h.justLimit=y&&!E}function ii(h,p){if(h.isPrimKey)return p.primaryKey;var y=p.getIndexByKeyPath(h.index);if(!y)throw new ke.Schema("KeyPath "+h.index+" on object store "+p.name+" is not indexed");return y}function xo(h,p,y){var E=ii(h,p.schema);return p.openCursor({trans:y,values:!h.keysOnly,reverse:h.dir==="prev",unique:!!h.unique,query:{index:E,range:h.range}})}function si(h,p,y,E){var S=h.replayFilter?ti(h.filter,h.replayFilter()):h.filter;if(h.or){var A={},D=function(V,q,F){var W,z;S&&!S(q,F,function(Z){return q.stop(Z)},function(Z){return q.fail(Z)})||((z=""+(W=q.primaryKey))=="[object ArrayBuffer]"&&(z=""+new Uint8Array(W)),x(A,z)||(A[z]=!0,p(V,q,F)))};return Promise.all([h.or._iterate(D,y),Jn(xo(h,E,y),h.algorithm,D,!h.keysOnly&&h.valueMapper)])}return Jn(xo(h,E,y),ti(h.algorithm,S),p,!h.keysOnly&&h.valueMapper)}function Jn(h,p,y,E){var S=Pt(E?function(A,D,V){return y(E(A),D,V)}:y);return h.then(function(A){if(A)return A.start(function(){var D=function(){return A.continue()};p&&!p(A,function(V){return D=V},function(V){A.stop(V),D=Rt},function(V){A.fail(V),D=Rt})||S(A.value,A,function(V){return D=V}),D()})})}var cl=(vt.prototype._read=function(h,p){var y=this._ctx;return y.error?y.table._trans(null,Ot.bind(null,y.error)):y.table._trans("readonly",h).then(p)},vt.prototype._write=function(h){var p=this._ctx;return p.error?p.table._trans(null,Ot.bind(null,p.error)):p.table._trans("readwrite",h,"locked")},vt.prototype._addAlgorithm=function(h){var p=this._ctx;p.algorithm=ti(p.algorithm,h)},vt.prototype._iterate=function(h,p){return si(this._ctx,h,p,this._ctx.table.core)},vt.prototype.clone=function(h){var p=Object.create(this.constructor.prototype),y=Object.create(this._ctx);return h&&_(y,h),p._ctx=y,p},vt.prototype.raw=function(){return this._ctx.valueMapper=null,this},vt.prototype.each=function(h){var p=this._ctx;return this._read(function(y){return si(p,h,y,p.table.core)})},vt.prototype.count=function(h){var p=this;return this._read(function(y){var E=p._ctx,S=E.table.core;if(ri(E,!0))return S.count({trans:y,query:{index:ii(E,S.schema),range:E.range}}).then(function(D){return Math.min(D,E.limit)});var A=0;return si(E,function(){return++A,!1},y,S).then(function(){return A})}).then(h)},vt.prototype.sortBy=function(h,p){var y=h.split(".").reverse(),E=y[0],S=y.length-1;function A(q,F){return F?A(q[y[F]],F-1):q[E]}var D=this._ctx.dir==="next"?1:-1;function V(q,F){return ct(A(q,S),A(F,S))*D}return this.toArray(function(q){return q.sort(V)}).then(p)},vt.prototype.toArray=function(h){var p=this;return this._read(function(y){var E=p._ctx;if(E.dir==="next"&&ri(E,!0)&&0<E.limit){var S=E.valueMapper,A=ii(E,E.table.core.schema);return E.table.core.query({trans:y,limit:E.limit,values:!0,query:{index:A,range:E.range}}).then(function(V){return V=V.result,S?V.map(S):V})}var D=[];return si(E,function(V){return D.push(V)},y,E.table.core).then(function(){return D})},h)},vt.prototype.offset=function(h){var p=this._ctx;return h<=0||(p.offset+=h,ri(p)?Ls(p,function(){var y=h;return function(E,S){return y===0||(y===1?--y:S(function(){E.advance(y),y=0}),!1)}}):Ls(p,function(){var y=h;return function(){return--y<0}})),this},vt.prototype.limit=function(h){return this._ctx.limit=Math.min(this._ctx.limit,h),Ls(this._ctx,function(){var p=h;return function(y,E,S){return--p<=0&&E(S),0<=p}},!0),this},vt.prototype.until=function(h,p){return ba(this._ctx,function(y,E,S){return!h(y.value)||(E(S),p)}),this},vt.prototype.first=function(h){return this.limit(1).toArray(function(p){return p[0]}).then(h)},vt.prototype.last=function(h){return this.reverse().first(h)},vt.prototype.filter=function(h){var p;return ba(this._ctx,function(y){return h(y.value)}),(p=this._ctx).isMatch=ti(p.isMatch,h),this},vt.prototype.and=function(h){return this.filter(h)},vt.prototype.or=function(h){return new this.db.WhereClause(this._ctx.table,h,this)},vt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},vt.prototype.desc=function(){return this.reverse()},vt.prototype.eachKey=function(h){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(y,E){h(E.key,E)})},vt.prototype.eachUniqueKey=function(h){return this._ctx.unique="unique",this.eachKey(h)},vt.prototype.eachPrimaryKey=function(h){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(y,E){h(E.primaryKey,E)})},vt.prototype.keys=function(h){var p=this._ctx;p.keysOnly=!p.isMatch;var y=[];return this.each(function(E,S){y.push(S.key)}).then(function(){return y}).then(h)},vt.prototype.primaryKeys=function(h){var p=this._ctx;if(p.dir==="next"&&ri(p,!0)&&0<p.limit)return this._read(function(E){var S=ii(p,p.table.core.schema);return p.table.core.query({trans:E,values:!1,limit:p.limit,query:{index:S,range:p.range}})}).then(function(E){return E.result}).then(h);p.keysOnly=!p.isMatch;var y=[];return this.each(function(E,S){y.push(S.primaryKey)}).then(function(){return y}).then(h)},vt.prototype.uniqueKeys=function(h){return this._ctx.unique="unique",this.keys(h)},vt.prototype.firstKey=function(h){return this.limit(1).keys(function(p){return p[0]}).then(h)},vt.prototype.lastKey=function(h){return this.reverse().firstKey(h)},vt.prototype.distinct=function(){var h=this._ctx,h=h.index&&h.table.schema.idxByName[h.index];if(!h||!h.multi)return this;var p={};return ba(this._ctx,function(S){var E=S.primaryKey.toString(),S=x(p,E);return p[E]=!0,!S}),this},vt.prototype.modify=function(h){var p=this,y=this._ctx;return this._write(function(E){var S=typeof h=="function"?h:function(X){return Nt(X,h)},A=y.table.core,F=A.schema.primaryKey,D=F.outbound,V=F.extractKey,q=200,F=p.db._options.modifyChunkSize;F&&(q=typeof F=="object"?F[A.name]||F["*"]||200:F);function W(X,ae){var re=ae.failures,ae=ae.numFailures;Z+=X-ae;for(var he=0,ge=d(re);he<ge.length;he++){var Se=ge[he];z.push(re[Se])}}var z=[],Z=0,K=[],$=h===Ea;return p.clone().primaryKeys().then(function(X){function J(ae){var he=Math.min(q,X.length-ae),ge=X.slice(ae,ae+he);return($?Promise.resolve([]):A.getMany({trans:E,keys:ge,cache:"immutable"})).then(function(Se){var De=[],Te=[],Ce=D?[]:null,Oe=$?ge:[];if(!$)for(var we=0;we<he;++we){var Me=Se[we],Ge={value:M(Me),primKey:X[ae+we]};S.call(Ge,Ge.value,Ge)!==!1&&(Ge.value==null?Oe.push(X[ae+we]):D||ct(V(Me),V(Ge.value))===0?(Te.push(Ge.value),D&&Ce.push(X[ae+we])):(Oe.push(X[ae+we]),De.push(Ge.value)))}return Promise.resolve(0<De.length&&A.mutate({trans:E,type:"add",values:De}).then(function(tt){for(var ht in tt.failures)Oe.splice(parseInt(ht),1);W(De.length,tt)})).then(function(){return(0<Te.length||re&&typeof h=="object")&&A.mutate({trans:E,type:"put",keys:Ce,values:Te,criteria:re,changeSpec:typeof h!="function"&&h,isAdditionalChunk:0<ae}).then(function(tt){return W(Te.length,tt)})}).then(function(){return(0<Oe.length||re&&$)&&A.mutate({trans:E,type:"delete",keys:Oe,criteria:re,isAdditionalChunk:0<ae}).then(function(tt){return un(y.table,Oe,tt)}).then(function(tt){return W(Oe.length,tt)})}).then(function(){return X.length>ae+he&&J(ae+q)})})}var re=ri(y)&&y.limit===1/0&&(typeof h!="function"||$)&&{index:y.index,range:y.range};return J(0).then(function(){if(0<z.length)throw new Xe("Error modifying one or more objects",z,Z,K);return X.length})})})},vt.prototype.delete=function(){var h=this._ctx,p=h.range;return!ri(h)||h.table.schema.yProps||!h.isPrimKey&&p.type!==3?this.modify(Ea):this._write(function(y){var E=h.table.core.schema.primaryKey,S=p;return h.table.core.count({trans:y,query:{index:E,range:S}}).then(function(A){return h.table.core.mutate({trans:y,type:"deleteRange",range:S}).then(function(q){var V=q.failures,q=q.numFailures;if(q)throw new Xe("Could not delete some values",Object.keys(V).map(function(F){return V[F]}),A-q);return A-q})})})},vt);function vt(){}var Ea=function(h,p){return p.value=null};function Ta(h,p){return h<p?-1:h===p?0:1}function hl(h,p){return p<h?-1:h===p?0:1}function mn(h,p,y){return h=h instanceof Gi?new h.Collection(h):h,h._ctx.error=new(y||TypeError)(p),h}function ai(h){return new h.Collection(h,function(){return br("")}).limit(0)}function cr(h,p,y,E){var S,A,D,V,q,F,W,z=y.length;if(!y.every(function($){return typeof $=="string"}))return mn(h,on);function Z($){S=$==="next"?function(J){return J.toUpperCase()}:function(J){return J.toLowerCase()},A=$==="next"?function(J){return J.toLowerCase()}:function(J){return J.toUpperCase()},D=$==="next"?Ta:hl;var X=y.map(function(J){return{lower:A(J),upper:S(J)}}).sort(function(J,re){return D(J.lower,re.lower)});V=X.map(function(J){return J.upper}),q=X.map(function(J){return J.lower}),W=(F=$)==="next"?"":E}Z("next"),h=new h.Collection(h,function(){return Mr(V[0],q[z-1]+E)}),h._ondirectionchange=function($){Z($)};var K=0;return h._addAlgorithm(function($,X,J){var re=$.key;if(typeof re!="string")return!1;var ae=A(re);if(p(ae,q,K))return!0;for(var he=null,ge=K;ge<z;++ge){var Se=(function(De,Te,Ce,Oe,we,Me){for(var Ge=Math.min(De.length,Oe.length),tt=-1,ht=0;ht<Ge;++ht){var Yn=Te[ht];if(Yn!==Oe[ht])return we(De[ht],Ce[ht])<0?De.substr(0,ht)+Ce[ht]+Ce.substr(ht+1):we(De[ht],Oe[ht])<0?De.substr(0,ht)+Oe[ht]+Ce.substr(ht+1):0<=tt?De.substr(0,tt)+Te[tt]+Ce.substr(tt+1):null;we(De[ht],Yn)<0&&(tt=ht)}return Ge<Oe.length&&Me==="next"?De+Ce.substr(De.length):Ge<De.length&&Me==="prev"?De.substr(0,Ce.length):tt<0?null:De.substr(0,tt)+Oe[tt]+Ce.substr(tt+1)})(re,ae,V[ge],q[ge],D,F);Se===null&&he===null?K=ge+1:(he===null||0<D(he,Se))&&(he=Se)}return X(he!==null?function(){$.continue(he+W)}:J),!1}),h}function Mr(h,p,y,E){return{type:2,lower:h,upper:p,lowerOpen:y,upperOpen:E}}function br(h){return{type:1,lower:h,upper:h}}var Gi=(Object.defineProperty(Ut.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ut.prototype.between=function(h,p,y,E){y=y!==!1,E=E===!0;try{return 0<this._cmp(h,p)||this._cmp(h,p)===0&&(y||E)&&(!y||!E)?ai(this):new this.Collection(this,function(){return Mr(h,p,!y,!E)})}catch{return mn(this,Rn)}},Ut.prototype.equals=function(h){return h==null?mn(this,Rn):new this.Collection(this,function(){return br(h)})},Ut.prototype.above=function(h){return h==null?mn(this,Rn):new this.Collection(this,function(){return Mr(h,void 0,!0)})},Ut.prototype.aboveOrEqual=function(h){return h==null?mn(this,Rn):new this.Collection(this,function(){return Mr(h,void 0,!1)})},Ut.prototype.below=function(h){return h==null?mn(this,Rn):new this.Collection(this,function(){return Mr(void 0,h,!1,!0)})},Ut.prototype.belowOrEqual=function(h){return h==null?mn(this,Rn):new this.Collection(this,function(){return Mr(void 0,h)})},Ut.prototype.startsWith=function(h){return typeof h!="string"?mn(this,on):this.between(h,h+En,!0,!0)},Ut.prototype.startsWithIgnoreCase=function(h){return h===""?this.startsWith(h):cr(this,function(p,y){return p.indexOf(y[0])===0},[h],En)},Ut.prototype.equalsIgnoreCase=function(h){return cr(this,function(p,y){return p===y[0]},[h],"")},Ut.prototype.anyOfIgnoreCase=function(){var h=qe.apply(ze,arguments);return h.length===0?ai(this):cr(this,function(p,y){return y.indexOf(p)!==-1},h,"")},Ut.prototype.startsWithAnyOfIgnoreCase=function(){var h=qe.apply(ze,arguments);return h.length===0?ai(this):cr(this,function(p,y){return y.some(function(E){return p.indexOf(E)===0})},h,En)},Ut.prototype.anyOf=function(){var h=this,p=qe.apply(ze,arguments),y=this._cmp;try{p.sort(y)}catch{return mn(this,Rn)}if(p.length===0)return ai(this);var E=new this.Collection(this,function(){return Mr(p[0],p[p.length-1])});E._ondirectionchange=function(A){y=A==="next"?h._ascending:h._descending,p.sort(y)};var S=0;return E._addAlgorithm(function(A,D,V){for(var q=A.key;0<y(q,p[S]);)if(++S===p.length)return D(V),!1;return y(q,p[S])===0||(D(function(){A.continue(p[S])}),!1)}),E},Ut.prototype.notEqual=function(h){return this.inAnyRange([[-1/0,h],[h,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ut.prototype.noneOf=function(){var h=qe.apply(ze,arguments);if(h.length===0)return new this.Collection(this);try{h.sort(this._ascending)}catch{return mn(this,Rn)}var p=h.reduce(function(y,E){return y?y.concat([[y[y.length-1][1],E]]):[[-1/0,E]]},null);return p.push([h[h.length-1],this.db._maxKey]),this.inAnyRange(p,{includeLowers:!1,includeUppers:!1})},Ut.prototype.inAnyRange=function(re,p){var y=this,E=this._cmp,S=this._ascending,A=this._descending,D=this._min,V=this._max;if(re.length===0)return ai(this);if(!re.every(function(ae){return ae[0]!==void 0&&ae[1]!==void 0&&S(ae[0],ae[1])<=0}))return mn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ke.InvalidArgument);var q=!p||p.includeLowers!==!1,F=p&&p.includeUppers===!0,W,z=S;function Z(ae,he){return z(ae[0],he[0])}try{(W=re.reduce(function(ae,he){for(var ge=0,Se=ae.length;ge<Se;++ge){var De=ae[ge];if(E(he[0],De[1])<0&&0<E(he[1],De[0])){De[0]=D(De[0],he[0]),De[1]=V(De[1],he[1]);break}}return ge===Se&&ae.push(he),ae},[])).sort(Z)}catch{return mn(this,Rn)}var K=0,$=F?function(ae){return 0<S(ae,W[K][1])}:function(ae){return 0<=S(ae,W[K][1])},X=q?function(ae){return 0<A(ae,W[K][0])}:function(ae){return 0<=A(ae,W[K][0])},J=$,re=new this.Collection(this,function(){return Mr(W[0][0],W[W.length-1][1],!q,!F)});return re._ondirectionchange=function(ae){z=ae==="next"?(J=$,S):(J=X,A),W.sort(Z)},re._addAlgorithm(function(ae,he,ge){for(var Se,De=ae.key;J(De);)if(++K===W.length)return he(ge),!1;return!$(Se=De)&&!X(Se)||(y._cmp(De,W[K][1])===0||y._cmp(De,W[K][0])===0||he(function(){z===S?ae.continue(W[K][0]):ae.continue(W[K][1])}),!1)}),re},Ut.prototype.startsWithAnyOf=function(){var h=qe.apply(ze,arguments);return h.every(function(p){return typeof p=="string"})?h.length===0?ai(this):this.inAnyRange(h.map(function(p){return[p,p+En]})):mn(this,"startsWithAnyOf() only works with strings")},Ut);function Ut(){}function Kn(h){return Pt(function(p){return Ti(p),h(p.target.error),!1})}function Ti(h){h.stopPropagation&&h.stopPropagation(),h.preventDefault&&h.preventDefault()}var Vr="storagemutated",Er="x-storagemutated-1",Tn=ni(null,Vr),Us=(mt.prototype._lock=function(){return rt(!Ne.global),++this._reculock,this._reculock!==1||Ne.global||(Ne.lockOwnerFor=this),this},mt.prototype._unlock=function(){if(rt(!Ne.global),--this._reculock==0)for(Ne.global||(Ne.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var h=this._blockedFuncs.shift();try{Fn(h[1],h[0])}catch{}}return this},mt.prototype._locked=function(){return this._reculock&&Ne.lockOwnerFor!==this},mt.prototype.create=function(h){var p=this;if(!this.mode)return this;var y=this.db.idbdb,E=this.db._state.dbOpenError;if(rt(!this.idbtrans),!h&&!y)switch(E&&E.name){case"DatabaseClosedError":throw new ke.DatabaseClosed(E);case"MissingAPIError":throw new ke.MissingAPI(E.message,E);default:throw new ke.OpenFailed(E)}if(!this.active)throw new ke.TransactionInactive;return rt(this._completion._state===null),(h=this.idbtrans=h||(this.db.core||y).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Pt(function(S){Ti(S),p._reject(h.error)}),h.onabort=Pt(function(S){Ti(S),p.active&&p._reject(new ke.Abort(h.error)),p.active=!1,p.on("abort").fire(S)}),h.oncomplete=Pt(function(){p.active=!1,p._resolve(),"mutatedParts"in h&&Tn.storagemutated.fire(h.mutatedParts)}),this},mt.prototype._promise=function(h,p,y){var E=this;if(h==="readwrite"&&this.mode!=="readwrite")return Ot(new ke.ReadOnly("Transaction is readonly"));if(!this.active)return Ot(new ke.TransactionInactive);if(this._locked())return new Re(function(A,D){E._blockedFuncs.push([function(){E._promise(h,p,y).then(A,D)},Ne])});if(y)return Lt(function(){var A=new Re(function(D,V){E._lock();var q=p(D,V,E);q&&q.then&&q.then(D,V)});return A.finally(function(){return E._unlock()}),A._lib=!0,A});var S=new Re(function(A,D){var V=p(A,D,E);V&&V.then&&V.then(A,D)});return S._lib=!0,S},mt.prototype._root=function(){return this.parent?this.parent._root():this},mt.prototype.waitFor=function(h){var p,y=this._root(),E=Re.resolve(h);y._waitingFor?y._waitingFor=y._waitingFor.then(function(){return E}):(y._waitingFor=E,y._waitingQueue=[],p=y.idbtrans.objectStore(y.storeNames[0]),(function A(){for(++y._spinCount;y._waitingQueue.length;)y._waitingQueue.shift()();y._waitingFor&&(p.get(-1/0).onsuccess=A)})());var S=y._waitingFor;return new Re(function(A,D){E.then(function(V){return y._waitingQueue.push(Pt(A.bind(null,V)))},function(V){return y._waitingQueue.push(Pt(D.bind(null,V)))}).finally(function(){y._waitingFor===S&&(y._waitingFor=null)})})},mt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ke.Abort))},mt.prototype.table=function(h){var p=this._memoizedTables||(this._memoizedTables={});if(x(p,h))return p[h];var y=this.schema[h];if(!y)throw new ke.NotFound("Table "+h+" not part of transaction");return y=new this.db.Table(h,y,this),y.core=this.db.core.table(h),p[h]=y},mt);function mt(){}function Pr(h,p,y,E,S,A,D,V){return{name:h,keyPath:p,unique:y,multi:E,auto:S,compound:A,src:(y&&!D?"&":"")+(E?"*":"")+(S?"++":"")+wa(p),type:V}}function wa(h){return typeof h=="string"?h:h?"["+[].join.call(h,"+")+"]":""}function Yi(h,p,y){return{name:h,primKey:p,indexes:y,mappedClass:null,idxByName:(E=function(S){return[S.name,S]},y.reduce(function(S,A,D){return D=E(A,D),D&&(S[D[0]]=D[1]),S},{}))};var E}var Qi=function(h){try{return h.only([[]]),Qi=function(){return[[]]},[[]]}catch{return Qi=function(){return En},En}};function $i(h){return h==null?function(){}:typeof h=="string"?(p=h).split(".").length===1?function(y){return y[p]}:function(y){return $e(y,p)}:function(y){return $e(y,h)};var p}function wi(h){return[].slice.call(h)}var oi=0;function cn(h){return h==null?":id":typeof h=="string"?h:"[".concat(h.join("+"),"]")}function Xi(h,p,q){function E(J){if(J.type===3)return null;if(J.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var K=J.lower,$=J.upper,X=J.lowerOpen,J=J.upperOpen;return K===void 0?$===void 0?null:p.upperBound($,!!J):$===void 0?p.lowerBound(K,!!X):p.bound(K,$,!!X,!!J)}function S(Z){var K,$=Z.name;return{name:$,schema:Z,mutate:function(X){var J=X.trans,re=X.type,ae=X.keys,he=X.values,ge=X.range;return new Promise(function(Se,De){Se=Pt(Se);var Te=J.objectStore($),Ce=Te.keyPath==null,Oe=re==="put"||re==="add";if(!Oe&&re!=="delete"&&re!=="deleteRange")throw new Error("Invalid operation type: "+re);var we,Me=(ae||he||{length:1}).length;if(ae&&he&&ae.length!==he.length)throw new Error("Given keys array must have same length as given values array.");if(Me===0)return Se({numFailures:0,failures:{},results:[],lastResult:void 0});function Ge(On){++Yn,Ti(On)}var tt=[],ht=[],Yn=0;if(re==="deleteRange"){if(ge.type===4)return Se({numFailures:Yn,failures:ht,results:[],lastResult:void 0});ge.type===3?tt.push(we=Te.clear()):tt.push(we=Te.delete(E(ge)))}else{var Ce=Oe?Ce?[he,ae]:[he,null]:[ae,null],et=Ce[0],In=Ce[1];if(Oe)for(var tn=0;tn<Me;++tn)tt.push(we=In&&In[tn]!==void 0?Te[re](et[tn],In[tn]):Te[re](et[tn])),we.onerror=Ge;else for(tn=0;tn<Me;++tn)tt.push(we=Te[re](et[tn])),we.onerror=Ge}function Mo(On){On=On.target.result,tt.forEach(function(Br,pu){return Br.error!=null&&(ht[pu]=Br.error)}),Se({numFailures:Yn,failures:ht,results:re==="delete"?ae:tt.map(function(Br){return Br.result}),lastResult:On})}we.onerror=function(On){Ge(On),Mo(On)},we.onsuccess=Mo})},getMany:function(X){var J=X.trans,re=X.keys;return new Promise(function(ae,he){ae=Pt(ae);for(var ge,Se=J.objectStore($),De=re.length,Te=new Array(De),Ce=0,Oe=0,we=function(tt){tt=tt.target,Te[tt._pos]=tt.result,++Oe===Ce&&ae(Te)},Me=Kn(he),Ge=0;Ge<De;++Ge)re[Ge]!=null&&((ge=Se.get(re[Ge]))._pos=Ge,ge.onsuccess=we,ge.onerror=Me,++Ce);Ce===0&&ae(Te)})},get:function(X){var J=X.trans,re=X.key;return new Promise(function(ae,he){ae=Pt(ae);var ge=J.objectStore($).get(re);ge.onsuccess=function(Se){return ae(Se.target.result)},ge.onerror=Kn(he)})},query:(K=F,function(X){return new Promise(function(J,re){J=Pt(J);var ae,he,ge,Ce=X.trans,Se=X.values,De=X.limit,we=X.query,Te=De===1/0?void 0:De,Oe=we.index,we=we.range,Ce=Ce.objectStore($),Oe=Oe.isPrimaryKey?Ce:Ce.index(Oe.name),we=E(we);if(De===0)return J({result:[]});K?((Te=Se?Oe.getAll(we,Te):Oe.getAllKeys(we,Te)).onsuccess=function(Me){return J({result:Me.target.result})},Te.onerror=Kn(re)):(ae=0,he=!Se&&"openKeyCursor"in Oe?Oe.openKeyCursor(we):Oe.openCursor(we),ge=[],he.onsuccess=function(Me){var Ge=he.result;return Ge?(ge.push(Se?Ge.value:Ge.primaryKey),++ae===De?J({result:ge}):void Ge.continue()):J({result:ge})},he.onerror=Kn(re))})}),openCursor:function(X){var J=X.trans,re=X.values,ae=X.query,he=X.reverse,ge=X.unique;return new Promise(function(Se,De){Se=Pt(Se);var Oe=ae.index,Te=ae.range,Ce=J.objectStore($),Ce=Oe.isPrimaryKey?Ce:Ce.index(Oe.name),Oe=he?ge?"prevunique":"prev":ge?"nextunique":"next",we=!re&&"openKeyCursor"in Ce?Ce.openKeyCursor(E(Te),Oe):Ce.openCursor(E(Te),Oe);we.onerror=Kn(De),we.onsuccess=Pt(function(Me){var Ge,tt,ht,Yn,et=we.result;et?(et.___id=++oi,et.done=!1,Ge=et.continue.bind(et),tt=(tt=et.continuePrimaryKey)&&tt.bind(et),ht=et.advance.bind(et),Yn=function(){throw new Error("Cursor not stopped")},et.trans=J,et.stop=et.continue=et.continuePrimaryKey=et.advance=function(){throw new Error("Cursor not started")},et.fail=Pt(De),et.next=function(){var In=this,tn=1;return this.start(function(){return tn--?In.continue():In.stop()}).then(function(){return In})},et.start=function(In){function tn(){if(we.result)try{In()}catch(On){et.fail(On)}else et.done=!0,et.start=function(){throw new Error("Cursor behind last entry")},et.stop()}var Mo=new Promise(function(On,Br){On=Pt(On),we.onerror=Kn(Br),et.fail=Br,et.stop=function(pu){et.stop=et.continue=et.continuePrimaryKey=et.advance=Yn,On(pu)}});return we.onsuccess=Pt(function(On){we.onsuccess=tn,tn()}),et.continue=Ge,et.continuePrimaryKey=tt,et.advance=ht,tn(),Mo},Se(et)):Se(null)},De)})},count:function(X){var J=X.query,re=X.trans,ae=J.index,he=J.range;return new Promise(function(ge,Se){var De=re.objectStore($),Te=ae.isPrimaryKey?De:De.index(ae.name),De=E(he),Te=De?Te.count(De):Te.count();Te.onsuccess=Pt(function(Ce){return ge(Ce.target.result)}),Te.onerror=Kn(Se)})}}}var A,D,V,W=(D=q,V=wi((A=h).objectStoreNames),{schema:{name:A.name,tables:V.map(function(Z){return D.objectStore(Z)}).map(function(Z){var K=Z.keyPath,J=Z.autoIncrement,$=g(K),X={},J={name:Z.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:K==null,compound:$,keyPath:K,autoIncrement:J,unique:!0,extractKey:$i(K)},indexes:wi(Z.indexNames).map(function(re){return Z.index(re)}).map(function(ge){var ae=ge.name,he=ge.unique,Se=ge.multiEntry,ge=ge.keyPath,Se={name:ae,compound:g(ge),keyPath:ge,unique:he,multiEntry:Se,extractKey:$i(ge)};return X[cn(ge)]=Se}),getIndexByKeyPath:function(re){return X[cn(re)]}};return X[":id"]=J.primaryKey,K!=null&&(X[cn(K)]=J.primaryKey),J})},hasGetAll:0<V.length&&"getAll"in D.objectStore(V[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),q=W.schema,F=W.hasGetAll,W=q.tables.map(S),z={};return W.forEach(function(Z){return z[Z.name]=Z}),{stack:"dbcore",transaction:h.transaction.bind(h),table:function(Z){if(!z[Z])throw new Error("Table '".concat(Z,"' not found"));return z[Z]},MIN_KEY:-1/0,MAX_KEY:Qi(p),schema:q}}function Si(h,p,y,E){var S=y.IDBKeyRange;return y.indexedDB,{dbcore:(E=Xi(p,S,E),h.dbcore.reduce(function(A,D){return D=D.create,s(s({},A),D(A))},E))}}function li(h,E){var y=E.db,E=Si(h._middlewares,y,h._deps,E);h.core=E.dbcore,h.tables.forEach(function(S){var A=S.name;h.core.schema.tables.some(function(D){return D.name===A})&&(S.core=h.core.table(A),h[A]instanceof h.Table&&(h[A].core=S.core))})}function hs(h,p,y,E){y.forEach(function(S){var A=E[S];p.forEach(function(D){var V=(function q(F,W){return be(F,W)||(F=b(F))&&q(F,W)})(D,S);(!V||"value"in V&&V.value===void 0)&&(D===h.Transaction.prototype||D instanceof h.Transaction?te(D,S,{get:function(){return this.table(S)},set:function(q){Q(this,S,{value:q,writable:!0,configurable:!0,enumerable:!0})}}):D[S]=new h.Table(S,A))})})}function Ai(h,p){p.forEach(function(y){for(var E in y)y[E]instanceof h.Table&&delete y[E]})}function Sa(h,p){return h._cfg.version-p._cfg.version}function Ci(h,p,y,E){var S=h._dbSchema;y.objectStoreNames.contains("$meta")&&!S.$meta&&(S.$meta=Yi("$meta",Oo("")[0],[]),h._storeNames.push("$meta"));var A=h._createTransaction("readwrite",h._storeNames,S);A.create(y),A._completion.catch(E);var D=A._reject.bind(A),V=Ne.transless||Ne;Lt(function(){return Ne.trans=A,Ne.transless=V,p!==0?(li(h,y),F=p,((q=A).storeNames.includes("$meta")?q.table("$meta").get("version").then(function(W){return W??F}):Re.resolve(F)).then(function(W){return Z=W,K=A,$=y,X=[],W=(z=h)._versions,J=z._dbSchema=Ri(0,z.idbdb,$),(W=W.filter(function(re){return re._cfg.version>=Z})).length!==0?(W.forEach(function(re){X.push(function(){var ae=J,he=re._cfg.dbschema;fs(z,ae,$),fs(z,he,$),J=z._dbSchema=he;var ge=zs(ae,he);ge.add.forEach(function(Oe){Wi($,Oe[0],Oe[1].primKey,Oe[1].indexes)}),ge.change.forEach(function(Oe){if(Oe.recreate)throw new ke.Upgrade("Not yet support for changing primary key");var we=$.objectStore(Oe.name);Oe.add.forEach(function(Me){return Bs(we,Me)}),Oe.change.forEach(function(Me){we.deleteIndex(Me.name),Bs(we,Me)}),Oe.del.forEach(function(Me){return we.deleteIndex(Me)})});var Se=re._cfg.contentUpgrade;if(Se&&re._cfg.version>Z){li(z,$),K._memoizedTables={};var De=k(he);ge.del.forEach(function(Oe){De[Oe]=ae[Oe]}),Ai(z,[z.Transaction.prototype]),hs(z,[z.Transaction.prototype],d(De),De),K.schema=De;var Te,Ce=H(Se);return Ce&&$t(),ge=Re.follow(function(){var Oe;(Te=Se(K))&&Ce&&(Oe=Ln.bind(null,null),Te.then(Oe,Oe))}),Te&&typeof Te.then=="function"?Re.resolve(Te):ge.then(function(){return Te})}}),X.push(function(ae){var he,ge,Se=re._cfg.dbschema;he=Se,ge=ae,[].slice.call(ge.db.objectStoreNames).forEach(function(De){return he[De]==null&&ge.db.deleteObjectStore(De)}),Ai(z,[z.Transaction.prototype]),hs(z,[z.Transaction.prototype],z._storeNames,z._dbSchema),K.schema=z._dbSchema}),X.push(function(ae){z.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(z.idbdb.version/10)===re._cfg.version?(z.idbdb.deleteObjectStore("$meta"),delete z._dbSchema.$meta,z._storeNames=z._storeNames.filter(function(he){return he!=="$meta"})):ae.objectStore("$meta").put(re._cfg.version,"version"))})}),(function re(){return X.length?Re.resolve(X.shift()(K.idbtrans)).then(re):Re.resolve()})().then(function(){Io(J,$)})):Re.resolve();var z,Z,K,$,X,J}).catch(D)):(d(S).forEach(function(W){Wi(y,W,S[W].primKey,S[W].indexes)}),li(h,y),void Re.follow(function(){return h.on.populate.fire(A)}).catch(D));var q,F})}function Aa(h,p){Io(h._dbSchema,p),p.db.version%10!=0||p.objectStoreNames.contains("$meta")||p.db.createObjectStore("$meta").add(Math.ceil(p.db.version/10-1),"version");var y=Ri(0,h.idbdb,p);fs(h,h._dbSchema,p);for(var E=0,S=zs(y,h._dbSchema).change;E<S.length;E++){var A=(function(D){if(D.change.length||D.recreate)return console.warn("Unable to patch indexes of table ".concat(D.name," because it has changes on the type of index or primary key.")),{value:void 0};var V=p.objectStore(D.name);D.add.forEach(function(q){jn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(D.name,".").concat(q.src)),Bs(V,q)})})(S[E]);if(typeof A=="object")return A.value}}function zs(h,p){var y,E={del:[],add:[],change:[]};for(y in h)p[y]||E.del.push(y);for(y in p){var S=h[y],A=p[y];if(S){var D={name:y,def:A,recreate:!1,del:[],add:[],change:[]};if(""+(S.primKey.keyPath||"")!=""+(A.primKey.keyPath||"")||S.primKey.auto!==A.primKey.auto)D.recreate=!0,E.change.push(D);else{var V=S.idxByName,q=A.idxByName,F=void 0;for(F in V)q[F]||D.del.push(F);for(F in q){var W=V[F],z=q[F];W?W.src!==z.src&&D.change.push(z):D.add.push(z)}(0<D.del.length||0<D.add.length||0<D.change.length)&&E.change.push(D)}}else E.add.push([y,A])}return E}function Wi(h,p,y,E){var S=h.db.createObjectStore(p,y.keyPath?{keyPath:y.keyPath,autoIncrement:y.auto}:{autoIncrement:y.auto});return E.forEach(function(A){return Bs(S,A)}),S}function Io(h,p){d(h).forEach(function(y){p.db.objectStoreNames.contains(y)||(jn&&console.debug("Dexie: Creating missing table",y),Wi(p,y,h[y].primKey,h[y].indexes))})}function Bs(h,p){h.createIndex(p.name,p.keyPath,{unique:p.unique,multiEntry:p.multi})}function Ri(h,p,y){var E={};return Fe(p.objectStoreNames,0).forEach(function(S){for(var A=y.objectStore(S),D=Pr(wa(F=A.keyPath),F||"",!0,!1,!!A.autoIncrement,F&&typeof F!="string",!0),V=[],q=0;q<A.indexNames.length;++q){var W=A.index(A.indexNames[q]),F=W.keyPath,W=Pr(W.name,F,!!W.unique,!!W.multiEntry,!1,F&&typeof F!="string",!1);V.push(W)}E[S]=Yi(S,D,V)}),E}function fs(h,p,y){for(var E=y.db.objectStoreNames,S=0;S<E.length;++S){var A=E[S],D=y.objectStore(A);h._hasGetAll="getAll"in D;for(var V=0;V<D.indexNames.length;++V){var q=D.indexNames[V],F=D.index(q).keyPath,W=typeof F=="string"?F:"["+Fe(F).join("+")+"]";!p[A]||(F=p[A].idxByName[W])&&(F.name=q,delete p[A].idxByName[W],p[A].idxByName[q]=F)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(h._hasGetAll=!1)}function Oo(h){return h.split(",").map(function(p,y){var A=p.split(":"),E=(S=A[1])===null||S===void 0?void 0:S.trim(),S=(p=A[0].trim()).replace(/([&*]|\+\+)/g,""),A=/^\[/.test(S)?S.match(/^\[(.*)\]$/)[1].split("+"):S;return Pr(S,A||null,/\&/.test(p),/\*/.test(p),/\+\+/.test(p),g(A),y===0,E)})}var Ca=(Ji.prototype._createTableSchema=Yi,Ji.prototype._parseIndexSyntax=Oo,Ji.prototype._parseStoresSpec=function(h,p){var y=this;d(h).forEach(function(E){if(h[E]!==null){var S=y._parseIndexSyntax(h[E]),A=S.shift();if(!A)throw new ke.Schema("Invalid schema for table "+E+": "+h[E]);if(A.unique=!0,A.multi)throw new ke.Schema("Primary key cannot be multiEntry*");S.forEach(function(D){if(D.auto)throw new ke.Schema("Only primary key can be marked as autoIncrement (++)");if(!D.keyPath)throw new ke.Schema("Index must have a name and cannot be an empty string")}),S=y._createTableSchema(E,A,S),p[E]=S}})},Ji.prototype.stores=function(y){var p=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,y):y;var y=p._versions,E={},S={};return y.forEach(function(A){_(E,A._cfg.storesSource),S=A._cfg.dbschema={},A._parseStoresSpec(E,S)}),p._dbSchema=S,Ai(p,[p._allTables,p,p.Transaction.prototype]),hs(p,[p._allTables,p,p.Transaction.prototype,this._cfg.tables],d(S),S),p._storeNames=d(S),this},Ji.prototype.upgrade=function(h){return this._cfg.contentUpgrade=sn(this._cfg.contentUpgrade||Rt,h),this},Ji);function Ji(){}function Ra(h,p){var y=h._dbNamesDB;return y||(y=h._dbNamesDB=new Ii(ls,{addons:[],indexedDB:h,IDBKeyRange:p})).version(1).stores({dbnames:"name"}),y.table("dbnames")}function jr(h){return h&&typeof h.databases=="function"}function xa(h){return Lt(function(){return Ne.letThrough=!0,h()})}function Ia(h){return!("from"in h)}var wn=function(h,p){if(!this){var y=new wn;return h&&"d"in h&&_(y,h),y}_(this,arguments.length?{d:1,from:h,to:1<arguments.length?p:h}:{d:0})};function ds(h,p,y){var E=ct(p,y);if(!isNaN(E)){if(0<E)throw RangeError();if(Ia(h))return _(h,{from:p,to:y,d:1});var S=h.l,E=h.r;if(ct(y,h.from)<0)return S?ds(S,p,y):h.l={from:p,to:y,d:1,l:null,r:null},Do(h);if(0<ct(p,h.to))return E?ds(E,p,y):h.r={from:p,to:y,d:1,l:null,r:null},Do(h);ct(p,h.from)<0&&(h.from=p,h.l=null,h.d=E?E.d+1:1),0<ct(y,h.to)&&(h.to=y,h.r=null,h.d=h.l?h.l.d+1:1),y=!h.r,S&&!h.l&&Lr(h,S),E&&y&&Lr(h,E)}}function Lr(h,p){Ia(p)||(function y(E,q){var A=q.from,D=q.to,V=q.l,q=q.r;ds(E,A,D),V&&y(E,V),q&&y(E,q)})(h,p)}function Gn(h,p){var y=qs(p),E=y.next();if(E.done)return!1;for(var S=E.value,A=qs(h),D=A.next(S.from),V=D.value;!E.done&&!D.done;){if(ct(V.from,S.to)<=0&&0<=ct(V.to,S.from))return!0;ct(S.from,V.from)<0?S=(E=y.next(V.from)).value:V=(D=A.next(S.from)).value}return!1}function qs(h){var p=Ia(h)?null:{s:0,n:h};return{next:function(y){for(var E=0<arguments.length;p;)switch(p.s){case 0:if(p.s=1,E)for(;p.n.l&&ct(y,p.n.from)<0;)p={up:p,n:p.n.l,s:1};else for(;p.n.l;)p={up:p,n:p.n.l,s:1};case 1:if(p.s=2,!E||ct(y,p.n.to)<=0)return{value:p.n,done:!1};case 2:if(p.n.r){p.s=3,p={up:p,n:p.n.r,s:0};continue}case 3:p=p.up}return{done:!0}}}}function Do(h){var p,y,E=(((p=h.r)===null||p===void 0?void 0:p.d)||0)-(((y=h.l)===null||y===void 0?void 0:y.d)||0),S=1<E?"r":E<-1?"l":"";S&&(p=S=="r"?"l":"r",y=s({},h),E=h[S],h.from=E.from,h.to=E.to,h[S]=E[S],y[S]=E[p],(h[p]=y).d=xi(y)),h.d=xi(h)}function xi(y){var p=y.r,y=y.l;return(p?y?Math.max(p.d,y.d):p.d:y?y.d:0)+1}function c(h,p){return d(p).forEach(function(y){h[y]?Lr(h[y],p[y]):h[y]=(function E(S){var A,D,V={};for(A in S)x(S,A)&&(D=S[A],V[A]=!D||typeof D!="object"||j.has(D.constructor)?D:E(D));return V})(p[y])}),h}function v(h,p){return h.all||p.all||Object.keys(h).some(function(y){return p[y]&&Gn(p[y],h[y])})}N(wn.prototype,((wr={add:function(h){return Lr(this,h),this},addKey:function(h){return ds(this,h,h),this},addKeys:function(h){var p=this;return h.forEach(function(y){return ds(p,y,y)}),this},hasKey:function(h){var p=qs(this).next(h).value;return p&&ct(p.from,h)<=0&&0<=ct(p.to,h)}})[ce]=function(){return qs(this)},wr));var w={},I={},ne=!1;function le(h){c(I,h),ne||(ne=!0,setTimeout(function(){ne=!1,Ae(I,!(I={}))},0))}function Ae(h,p){p===void 0&&(p=!1);var y=new Set;if(h.all)for(var E=0,S=Object.values(w);E<S.length;E++)st(D=S[E],h,y,p);else for(var A in h){var D,V=/^idb\:\/\/(.*)\/(.*)\//.exec(A);V&&(A=V[1],V=V[2],(D=w["idb://".concat(A,"/").concat(V)])&&st(D,h,y,p))}y.forEach(function(q){return q()})}function st(h,p,y,E){for(var S=[],A=0,D=Object.entries(h.queries.query);A<D.length;A++){for(var V=D[A],q=V[0],F=[],W=0,z=V[1];W<z.length;W++){var Z=z[W];v(p,Z.obsSet)?Z.subscribers.forEach(function(J){return y.add(J)}):E&&F.push(Z)}E&&S.push([q,F])}if(E)for(var K=0,$=S;K<$.length;K++){var X=$[K],q=X[0],F=X[1];h.queries.query[q]=F}}function hn(h){var p=h._state,y=h._deps.indexedDB;if(p.isBeingOpened||h.idbdb)return p.dbReadyPromise.then(function(){return p.dbOpenError?Ot(p.dbOpenError):h});p.isBeingOpened=!0,p.dbOpenError=null,p.openComplete=!1;var E=p.openCanceller,S=Math.round(10*h.verno),A=!1;function D(){if(p.openCanceller!==E)throw new ke.DatabaseClosed("db.open() was cancelled")}function V(){return new Re(function(Z,K){if(D(),!y)throw new ke.MissingAPI;var $=h.name,X=p.autoSchema||!S?y.open($):y.open($,S);if(!X)throw new ke.MissingAPI;X.onerror=Kn(K),X.onblocked=Pt(h._fireOnBlocked),X.onupgradeneeded=Pt(function(J){var re;W=X.transaction,p.autoSchema&&!h._options.allowEmptyDB?(X.onerror=Ti,W.abort(),X.result.close(),(re=y.deleteDatabase($)).onsuccess=re.onerror=Pt(function(){K(new ke.NoSuchDatabase("Database ".concat($," doesnt exist")))})):(W.onerror=Kn(K),J=J.oldVersion>Math.pow(2,62)?0:J.oldVersion,z=J<1,h.idbdb=X.result,A&&Aa(h,W),Ci(h,J/10,W,K))},K),X.onsuccess=Pt(function(){W=null;var J,re,ae,he,ge,Se=h.idbdb=X.result,De=Fe(Se.objectStoreNames);if(0<De.length)try{var Te=Se.transaction((he=De).length===1?he[0]:he,"readonly");if(p.autoSchema)re=Se,ae=Te,(J=h).verno=re.version/10,ae=J._dbSchema=Ri(0,re,ae),J._storeNames=Fe(re.objectStoreNames,0),hs(J,[J._allTables],d(ae),ae);else if(fs(h,h._dbSchema,Te),((ge=zs(Ri(0,(ge=h).idbdb,Te),ge._dbSchema)).add.length||ge.change.some(function(Ce){return Ce.add.length||Ce.change.length}))&&!A)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Se.close(),S=Se.version+1,A=!0,Z(V());li(h,Te)}catch{}Ei.push(h),Se.onversionchange=Pt(function(Ce){p.vcFired=!0,h.on("versionchange").fire(Ce)}),Se.onclose=Pt(function(){h.close({disableAutoOpen:!1})}),z&&(ge=h._deps,Te=$,Se=ge.indexedDB,ge=ge.IDBKeyRange,jr(Se)||Te===ls||Ra(Se,ge).put({name:Te}).catch(Rt)),Z()},K)}).catch(function(Z){switch(Z?.name){case"UnknownError":if(0<p.PR1398_maxLoop)return p.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),V();break;case"VersionError":if(0<S)return S=0,V()}return Re.reject(Z)})}var q,F=p.dbReadyResolve,W=null,z=!1;return Re.race([E,(typeof navigator>"u"?Re.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Z){function K(){return indexedDB.databases().finally(Z)}q=setInterval(K,100),K()}).finally(function(){return clearInterval(q)}):Promise.resolve()).then(V)]).then(function(){return D(),p.onReadyBeingFired=[],Re.resolve(xa(function(){return h.on.ready.fire(h.vip)})).then(function Z(){if(0<p.onReadyBeingFired.length){var K=p.onReadyBeingFired.reduce(sn,Rt);return p.onReadyBeingFired=[],Re.resolve(xa(function(){return K(h.vip)})).then(Z)}})}).finally(function(){p.openCanceller===E&&(p.onReadyBeingFired=null,p.isBeingOpened=!1)}).catch(function(Z){p.dbOpenError=Z;try{W&&W.abort()}catch{}return E===p.openCanceller&&h._close(),Ot(Z)}).finally(function(){p.openComplete=!0,F()}).then(function(){var Z;return z&&(Z={},h.tables.forEach(function(K){K.schema.indexes.forEach(function($){$.name&&(Z["idb://".concat(h.name,"/").concat(K.name,"/").concat($.name)]=new wn(-1/0,[[[]]]))}),Z["idb://".concat(h.name,"/").concat(K.name,"/")]=Z["idb://".concat(h.name,"/").concat(K.name,"/:dels")]=new wn(-1/0,[[[]]])}),Tn(Vr).fire(Z),Ae(Z,!0)),h})}function xt(h){function p(A){return h.next(A)}var y=S(p),E=S(function(A){return h.throw(A)});function S(A){return function(q){var V=A(q),q=V.value;return V.done?q:q&&typeof q.then=="function"?q.then(y,E):g(q)?Promise.all(q).then(y,E):y(q)}}return S(p)()}function zt(h,p,y){for(var E=g(h)?h.slice():[h],S=0;S<y;++S)E.push(p);return E}var Ur={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(h){return s(s({},h),{table:function(p){var y=h.table(p),E=y.schema,S={},A=[];function D(z,Z,K){var $=cn(z),X=S[$]=S[$]||[],J=z==null?0:typeof z=="string"?1:z.length,re=0<Z,re=s(s({},K),{name:re?"".concat($,"(virtual-from:").concat(K.name,")"):K.name,lowLevelIndex:K,isVirtual:re,keyTail:Z,keyLength:J,extractKey:$i(z),unique:!re&&K.unique});return X.push(re),re.isPrimaryKey||A.push(re),1<J&&D(J===2?z[0]:z.slice(0,J-1),Z+1,K),X.sort(function(ae,he){return ae.keyTail-he.keyTail}),re}p=D(E.primaryKey.keyPath,0,E.primaryKey),S[":id"]=[p];for(var V=0,q=E.indexes;V<q.length;V++){var F=q[V];D(F.keyPath,0,F)}function W(z){var Z,K=z.query.index;return K.isVirtual?s(s({},z),{query:{index:K.lowLevelIndex,range:(Z=z.query.range,K=K.keyTail,{type:Z.type===1?2:Z.type,lower:zt(Z.lower,Z.lowerOpen?h.MAX_KEY:h.MIN_KEY,K),lowerOpen:!0,upper:zt(Z.upper,Z.upperOpen?h.MIN_KEY:h.MAX_KEY,K),upperOpen:!0})}}):z}return s(s({},y),{schema:s(s({},E),{primaryKey:p,indexes:A,getIndexByKeyPath:function(z){return(z=S[cn(z)])&&z[0]}}),count:function(z){return y.count(W(z))},query:function(z){return y.query(W(z))},openCursor:function(z){var Z=z.query.index,K=Z.keyTail,$=Z.isVirtual,X=Z.keyLength;return $?y.openCursor(W(z)).then(function(re){return re&&J(re)}):y.openCursor(z);function J(re){return Object.create(re,{continue:{value:function(ae){ae!=null?re.continue(zt(ae,z.reverse?h.MAX_KEY:h.MIN_KEY,K)):z.unique?re.continue(re.key.slice(0,X).concat(z.reverse?h.MIN_KEY:h.MAX_KEY,K)):re.continue()}},continuePrimaryKey:{value:function(ae,he){re.continuePrimaryKey(zt(ae,h.MAX_KEY,K),he)}},primaryKey:{get:function(){return re.primaryKey}},key:{get:function(){var ae=re.key;return X===1?ae[0]:ae.slice(0,X)}},value:{get:function(){return re.value}}})}}})}})}};function zr(h,p,y,E){return y=y||{},E=E||"",d(h).forEach(function(S){var A,D,V;x(p,S)?(A=h[S],D=p[S],typeof A=="object"&&typeof D=="object"&&A&&D?(V=Gt(A))!==Gt(D)?y[E+S]=p[S]:V==="Object"?zr(A,D,y,E+S+"."):A!==D&&(y[E+S]=p[S]):A!==D&&(y[E+S]=p[S])):y[E+S]=void 0}),d(p).forEach(function(S){x(h,S)||(y[E+S]=p[S])}),y}function Tr(h,p){return p.type==="delete"?p.keys:p.keys||p.values.map(h.extractKey)}var ui={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(h){return s(s({},h),{table:function(p){var y=h.table(p),E=y.schema.primaryKey;return s(s({},y),{mutate:function(S){var A=Ne.trans,D=A.table(p).hook,V=D.deleting,q=D.creating,F=D.updating;switch(S.type){case"add":if(q.fire===Rt)break;return A._promise("readwrite",function(){return W(S)},!0);case"put":if(q.fire===Rt&&F.fire===Rt)break;return A._promise("readwrite",function(){return W(S)},!0);case"delete":if(V.fire===Rt)break;return A._promise("readwrite",function(){return W(S)},!0);case"deleteRange":if(V.fire===Rt)break;return A._promise("readwrite",function(){return(function z(Z,K,$){return y.query({trans:Z,values:!1,query:{index:E,range:K},limit:$}).then(function(X){var J=X.result;return W({type:"delete",keys:J,trans:Z}).then(function(re){return 0<re.numFailures?Promise.reject(re.failures[0]):J.length<$?{failures:[],numFailures:0,lastResult:void 0}:z(Z,s(s({},K),{lower:J[J.length-1],lowerOpen:!0}),$)})})})(S.trans,S.range,1e4)},!0)}return y.mutate(S);function W(z){var Z,K,$,X=Ne.trans,J=z.keys||Tr(E,z);if(!J)throw new Error("Keys missing");return(z=z.type==="add"||z.type==="put"?s(s({},z),{keys:J}):s({},z)).type!=="delete"&&(z.values=o([],z.values)),z.keys&&(z.keys=o([],z.keys)),Z=y,$=J,((K=z).type==="add"?Promise.resolve([]):Z.getMany({trans:K.trans,keys:$,cache:"immutable"})).then(function(re){var ae=J.map(function(he,ge){var Se,De,Te,Ce=re[ge],Oe={onerror:null,onsuccess:null};return z.type==="delete"?V.fire.call(Oe,he,Ce,X):z.type==="add"||Ce===void 0?(Se=q.fire.call(Oe,he,z.values[ge],X),he==null&&Se!=null&&(z.keys[ge]=he=Se,E.outbound||P(z.values[ge],E.keyPath,he))):(Se=zr(Ce,z.values[ge]),(De=F.fire.call(Oe,Se,he,Ce,X))&&(Te=z.values[ge],Object.keys(De).forEach(function(we){x(Te,we)?Te[we]=De[we]:P(Te,we,De[we])}))),Oe});return y.mutate(z).then(function(he){for(var ge=he.failures,Se=he.results,De=he.numFailures,he=he.lastResult,Te=0;Te<J.length;++Te){var Ce=(Se||J)[Te],Oe=ae[Te];Ce==null?Oe.onerror&&Oe.onerror(ge[Te]):Oe.onsuccess&&Oe.onsuccess(z.type==="put"&&re[Te]?z.values[Te]:Ce)}return{failures:ge,results:Se,numFailures:De,lastResult:he}}).catch(function(he){return ae.forEach(function(ge){return ge.onerror&&ge.onerror(he)}),Promise.reject(he)})})}}})}})}};function ps(h,p,y){try{if(!p||p.keys.length<h.length)return null;for(var E=[],S=0,A=0;S<p.keys.length&&A<h.length;++S)ct(p.keys[S],h[A])===0&&(E.push(y?M(p.values[S]):p.values[S]),++A);return E.length===h.length?E:null}catch{return null}}var Oa={stack:"dbcore",level:-1,create:function(h){return{table:function(p){var y=h.table(p);return s(s({},y),{getMany:function(E){if(!E.cache)return y.getMany(E);var S=ps(E.keys,E.trans._cache,E.cache==="clone");return S?Re.resolve(S):y.getMany(E).then(function(A){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?M(A):A},A})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),y.mutate(E)}})}}}};function Hs(h,p){return h.trans.mode==="readonly"&&!!h.subscr&&!h.trans.explicit&&h.trans.db._options.cache!=="disabled"&&!p.schema.primaryKey.outbound}function Nc(h,p){switch(h){case"query":return p.values&&!p.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Gf={stack:"dbcore",level:0,name:"Observability",create:function(h){var p=h.schema.name,y=new wn(h.MIN_KEY,h.MAX_KEY);return s(s({},h),{transaction:function(E,S,A){if(Ne.subscr&&S!=="readonly")throw new ke.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ne.querier));return h.transaction(E,S,A)},table:function(E){var S=h.table(E),A=S.schema,D=A.primaryKey,z=A.indexes,V=D.extractKey,q=D.outbound,F=D.autoIncrement&&z.filter(function(K){return K.compound&&K.keyPath.includes(D.keyPath)}),W=s(s({},S),{mutate:function(K){function $(we){return we="idb://".concat(p,"/").concat(E,"/").concat(we),he[we]||(he[we]=new wn)}var X,J,re,ae=K.trans,he=K.mutatedParts||(K.mutatedParts={}),ge=$(""),Se=$(":dels"),De=K.type,Oe=K.type==="deleteRange"?[K.range]:K.type==="delete"?[K.keys]:K.values.length<50?[Tr(D,K).filter(function(we){return we}),K.values]:[],Te=Oe[0],Ce=Oe[1],Oe=K.trans._cache;return g(Te)?(ge.addKeys(Te),(Oe=De==="delete"||Te.length===Ce.length?ps(Te,Oe):null)||Se.addKeys(Te),(Oe||Ce)&&(X=$,J=Oe,re=Ce,A.indexes.forEach(function(we){var Me=X(we.name||"");function Ge(ht){return ht!=null?we.extractKey(ht):null}function tt(ht){return we.multiEntry&&g(ht)?ht.forEach(function(Yn){return Me.addKey(Yn)}):Me.addKey(ht)}(J||re).forEach(function(ht,In){var et=J&&Ge(J[In]),In=re&&Ge(re[In]);ct(et,In)!==0&&(et!=null&&tt(et),In!=null&&tt(In))})}))):Te?(Ce={from:(Ce=Te.lower)!==null&&Ce!==void 0?Ce:h.MIN_KEY,to:(Ce=Te.upper)!==null&&Ce!==void 0?Ce:h.MAX_KEY},Se.add(Ce),ge.add(Ce)):(ge.add(y),Se.add(y),A.indexes.forEach(function(we){return $(we.name).add(y)})),S.mutate(K).then(function(we){return!Te||K.type!=="add"&&K.type!=="put"||(ge.addKeys(we.results),F&&F.forEach(function(Me){for(var Ge=K.values.map(function(et){return Me.extractKey(et)}),tt=Me.keyPath.findIndex(function(et){return et===D.keyPath}),ht=0,Yn=we.results.length;ht<Yn;++ht)Ge[ht][tt]=we.results[ht];$(Me.name).addKeys(Ge)})),ae.mutatedParts=c(ae.mutatedParts||{},he),we})}}),z=function($){var X=$.query,$=X.index,X=X.range;return[$,new wn(($=X.lower)!==null&&$!==void 0?$:h.MIN_KEY,(X=X.upper)!==null&&X!==void 0?X:h.MAX_KEY)]},Z={get:function(K){return[D,new wn(K.key)]},getMany:function(K){return[D,new wn().addKeys(K.keys)]},count:z,query:z,openCursor:z};return d(Z).forEach(function(K){W[K]=function($){var X=Ne.subscr,J=!!X,re=Hs(Ne,S)&&Nc(K,$)?$.obsSet={}:X;if(J){var ae=function(Ce){return Ce="idb://".concat(p,"/").concat(E,"/").concat(Ce),re[Ce]||(re[Ce]=new wn)},he=ae(""),ge=ae(":dels"),X=Z[K]($),J=X[0],X=X[1];if((K==="query"&&J.isPrimaryKey&&!$.values?ge:ae(J.name||"")).add(X),!J.isPrimaryKey){if(K!=="count"){var Se=K==="query"&&q&&$.values&&S.query(s(s({},$),{values:!1}));return S[K].apply(this,arguments).then(function(Ce){if(K==="query"){if(q&&$.values)return Se.then(function(Ge){return Ge=Ge.result,he.addKeys(Ge),Ce});var Oe=$.values?Ce.result.map(V):Ce.result;($.values?he:ge).addKeys(Oe)}else if(K==="openCursor"){var we=Ce,Me=$.values;return we&&Object.create(we,{key:{get:function(){return ge.addKey(we.primaryKey),we.key}},primaryKey:{get:function(){var Ge=we.primaryKey;return ge.addKey(Ge),Ge}},value:{get:function(){return Me&&he.addKey(we.primaryKey),we.value}}})}return Ce})}ge.add(y)}}return S[K].apply(this,arguments)}}),W}})}};function kc(h,p,y){if(y.numFailures===0)return p;if(p.type==="deleteRange")return null;var E=p.keys?p.keys.length:"values"in p&&p.values?p.values.length:1;return y.numFailures===E?null:(p=s({},p),g(p.keys)&&(p.keys=p.keys.filter(function(S,A){return!(A in y.failures)})),"values"in p&&g(p.values)&&(p.values=p.values.filter(function(S,A){return!(A in y.failures)})),p)}function fl(h,p){return y=h,((E=p).lower===void 0||(E.lowerOpen?0<ct(y,E.lower):0<=ct(y,E.lower)))&&(h=h,(p=p).upper===void 0||(p.upperOpen?ct(h,p.upper)<0:ct(h,p.upper)<=0));var y,E}function fu(h,p,Z,E,S,A){if(!Z||Z.length===0)return h;var D=p.query.index,V=D.multiEntry,q=p.query.range,F=E.schema.primaryKey.extractKey,W=D.extractKey,z=(D.lowLevelIndex||D).extractKey,Z=Z.reduce(function(K,$){var X=K,J=[];if($.type==="add"||$.type==="put")for(var re=new wn,ae=$.values.length-1;0<=ae;--ae){var he,ge=$.values[ae],Se=F(ge);re.hasKey(Se)||(he=W(ge),(V&&g(he)?he.some(function(we){return fl(we,q)}):fl(he,q))&&(re.addKey(Se),J.push(ge)))}switch($.type){case"add":var De=new wn().addKeys(p.values?K.map(function(Me){return F(Me)}):K),X=K.concat(p.values?J.filter(function(Me){return Me=F(Me),!De.hasKey(Me)&&(De.addKey(Me),!0)}):J.map(function(Me){return F(Me)}).filter(function(Me){return!De.hasKey(Me)&&(De.addKey(Me),!0)}));break;case"put":var Te=new wn().addKeys($.values.map(function(Me){return F(Me)}));X=K.filter(function(Me){return!Te.hasKey(p.values?F(Me):Me)}).concat(p.values?J:J.map(function(Me){return F(Me)}));break;case"delete":var Ce=new wn().addKeys($.keys);X=K.filter(function(Me){return!Ce.hasKey(p.values?F(Me):Me)});break;case"deleteRange":var Oe=$.range;X=K.filter(function(Me){return!fl(F(Me),Oe)})}return X},h);return Z===h?h:(Z.sort(function(K,$){return ct(z(K),z($))||ct(F(K),F($))}),p.limit&&p.limit<1/0&&(Z.length>p.limit?Z.length=p.limit:h.length===p.limit&&Z.length<p.limit&&(S.dirty=!0)),A?Object.freeze(Z):Z)}function Da(h,p){return ct(h.lower,p.lower)===0&&ct(h.upper,p.upper)===0&&!!h.lowerOpen==!!p.lowerOpen&&!!h.upperOpen==!!p.upperOpen}function No(h,p){return(function(y,E,S,A){if(y===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=ct(y,E))===0){if(S&&A)return 0;if(S)return 1;if(A)return-1}return E})(h.lower,p.lower,h.lowerOpen,p.lowerOpen)<=0&&0<=(function(y,E,S,A){if(y===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=ct(y,E))===0){if(S&&A)return 0;if(S)return-1;if(A)return 1}return E})(h.upper,p.upper,h.upperOpen,p.upperOpen)}function Yf(h,p,y,E){h.subscribers.add(y),E.addEventListener("abort",function(){var S,A;h.subscribers.delete(y),h.subscribers.size===0&&(S=h,A=p,setTimeout(function(){S.subscribers.size===0&&Be(A,S)},3e3))})}var dl={stack:"dbcore",level:0,name:"Cache",create:function(h){var p=h.schema.name;return s(s({},h),{transaction:function(y,E,S){var A,D,V=h.transaction(y,E,S);return E==="readwrite"&&(D=(A=new AbortController).signal,S=function(q){return function(){if(A.abort(),E==="readwrite"){for(var F=new Set,W=0,z=y;W<z.length;W++){var Z=z[W],K=w["idb://".concat(p,"/").concat(Z)];if(K){var $=h.table(Z),X=K.optimisticOps.filter(function(Me){return Me.trans===V});if(V._explicit&&q&&V.mutatedParts)for(var J=0,re=Object.values(K.queries.query);J<re.length;J++)for(var ae=0,he=(De=re[J]).slice();ae<he.length;ae++)v((Te=he[ae]).obsSet,V.mutatedParts)&&(Be(De,Te),Te.subscribers.forEach(function(Me){return F.add(Me)}));else if(0<X.length){K.optimisticOps=K.optimisticOps.filter(function(Me){return Me.trans!==V});for(var ge=0,Se=Object.values(K.queries.query);ge<Se.length;ge++)for(var De,Te,Ce,Oe=0,we=(De=Se[ge]).slice();Oe<we.length;Oe++)(Te=we[Oe]).res!=null&&V.mutatedParts&&(q&&!Te.dirty?(Ce=Object.isFrozen(Te.res),Ce=fu(Te.res,Te.req,X,$,Te,Ce),Te.dirty?(Be(De,Te),Te.subscribers.forEach(function(Me){return F.add(Me)})):Ce!==Te.res&&(Te.res=Ce,Te.promise=Re.resolve({result:Ce}))):(Te.dirty&&Be(De,Te),Te.subscribers.forEach(function(Me){return F.add(Me)})))}}}F.forEach(function(Me){return Me()})}}},V.addEventListener("abort",S(!1),{signal:D}),V.addEventListener("error",S(!1),{signal:D}),V.addEventListener("complete",S(!0),{signal:D})),V},table:function(y){var E=h.table(y),S=E.schema.primaryKey;return s(s({},E),{mutate:function(A){var D=Ne.trans;if(S.outbound||D.db._options.cache==="disabled"||D.explicit||D.idbtrans.mode!=="readwrite")return E.mutate(A);var V=w["idb://".concat(p,"/").concat(y)];return V?(D=E.mutate(A),A.type!=="add"&&A.type!=="put"||!(50<=A.values.length||Tr(S,A).some(function(q){return q==null}))?(V.optimisticOps.push(A),A.mutatedParts&&le(A.mutatedParts),D.then(function(q){0<q.numFailures&&(Be(V.optimisticOps,A),(q=kc(0,A,q))&&V.optimisticOps.push(q),A.mutatedParts&&le(A.mutatedParts))}),D.catch(function(){Be(V.optimisticOps,A),A.mutatedParts&&le(A.mutatedParts)})):D.then(function(q){var F=kc(0,s(s({},A),{values:A.values.map(function(W,z){var Z;return q.failures[z]?W:(W=(Z=S.keyPath)!==null&&Z!==void 0&&Z.includes(".")?M(W):s({},W),P(W,S.keyPath,q.results[z]),W)})}),q);V.optimisticOps.push(F),queueMicrotask(function(){return A.mutatedParts&&le(A.mutatedParts)})}),D):E.mutate(A)},query:function(A){if(!Hs(Ne,E)||!Nc("query",A))return E.query(A);var D=((F=Ne.trans)===null||F===void 0?void 0:F.db._options.cache)==="immutable",z=Ne,V=z.requery,q=z.signal,F=(function($,X,J,re){var ae=w["idb://".concat($,"/").concat(X)];if(!ae)return[];if(!(X=ae.queries[J]))return[null,!1,ae,null];var he=X[(re.query?re.query.index.name:null)||""];if(!he)return[null,!1,ae,null];switch(J){case"query":var ge=he.find(function(Se){return Se.req.limit===re.limit&&Se.req.values===re.values&&Da(Se.req.query.range,re.query.range)});return ge?[ge,!0,ae,he]:[he.find(function(Se){return("limit"in Se.req?Se.req.limit:1/0)>=re.limit&&(!re.values||Se.req.values)&&No(Se.req.query.range,re.query.range)}),!1,ae,he];case"count":return ge=he.find(function(Se){return Da(Se.req.query.range,re.query.range)}),[ge,!!ge,ae,he]}})(p,y,"query",A),W=F[0],z=F[1],Z=F[2],K=F[3];return W&&z?W.obsSet=A.obsSet:(z=E.query(A).then(function($){var X=$.result;if(W&&(W.res=X),D){for(var J=0,re=X.length;J<re;++J)Object.freeze(X[J]);Object.freeze(X)}else $.result=M(X);return $}).catch(function($){return K&&W&&Be(K,W),Promise.reject($)}),W={obsSet:A.obsSet,promise:z,subscribers:new Set,type:"query",req:A,dirty:!1},K?K.push(W):(K=[W],(Z=Z||(w["idb://".concat(p,"/").concat(y)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[A.query.index.name||""]=K)),Yf(W,K,V,q),W.promise.then(function($){return{result:fu($.result,A,Z?.optimisticOps,E,W,D)}})}})}})}};function ko(h,p){return new Proxy(h,{get:function(y,E,S){return E==="db"?p:Reflect.get(y,E,S)}})}var Ii=(Xt.prototype.version=function(h){if(isNaN(h)||h<.1)throw new ke.Type("Given version is not a positive number");if(h=Math.round(10*h)/10,this.idbdb||this._state.isBeingOpened)throw new ke.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,h);var p=this._versions,y=p.filter(function(E){return E._cfg.version===h})[0];return y||(y=new this.Version(h),p.push(y),p.sort(Sa),y.stores({}),this._state.autoSchema=!1,y)},Xt.prototype._whenReady=function(h){var p=this;return this.idbdb&&(this._state.openComplete||Ne.letThrough||this._vip)?h():new Re(function(y,E){if(p._state.openComplete)return E(new ke.DatabaseClosed(p._state.dbOpenError));if(!p._state.isBeingOpened){if(!p._state.autoOpen)return void E(new ke.DatabaseClosed);p.open().catch(Rt)}p._state.dbReadyPromise.then(y,E)}).then(h)},Xt.prototype.use=function(h){var p=h.stack,y=h.create,E=h.level,S=h.name;return S&&this.unuse({stack:p,name:S}),h=this._middlewares[p]||(this._middlewares[p]=[]),h.push({stack:p,create:y,level:E??10,name:S}),h.sort(function(A,D){return A.level-D.level}),this},Xt.prototype.unuse=function(h){var p=h.stack,y=h.name,E=h.create;return p&&this._middlewares[p]&&(this._middlewares[p]=this._middlewares[p].filter(function(S){return E?S.create!==E:!!y&&S.name!==y})),this},Xt.prototype.open=function(){var h=this;return Fn(bn,function(){return hn(h)})},Xt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var h=this._state,p=Ei.indexOf(this);if(0<=p&&Ei.splice(p,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}h.isBeingOpened||(h.dbReadyPromise=new Re(function(y){h.dbReadyResolve=y}),h.openCanceller=new Re(function(y,E){h.cancelOpen=E}))},Xt.prototype.close=function(y){var p=(y===void 0?{disableAutoOpen:!0}:y).disableAutoOpen,y=this._state;p?(y.isBeingOpened&&y.cancelOpen(new ke.DatabaseClosed),this._close(),y.autoOpen=!1,y.dbOpenError=new ke.DatabaseClosed):(this._close(),y.autoOpen=this._options.autoOpen||y.isBeingOpened,y.openComplete=!1,y.dbOpenError=null)},Xt.prototype.delete=function(h){var p=this;h===void 0&&(h={disableAutoOpen:!0});var y=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new Re(function(S,A){function D(){p.close(h);var V=p._deps.indexedDB.deleteDatabase(p.name);V.onsuccess=Pt(function(){var q,F,W;q=p._deps,F=p.name,W=q.indexedDB,q=q.IDBKeyRange,jr(W)||F===ls||Ra(W,q).delete(F).catch(Rt),S()}),V.onerror=Kn(A),V.onblocked=p._fireOnBlocked}if(y)throw new ke.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(D):D()})},Xt.prototype.backendDB=function(){return this.idbdb},Xt.prototype.isOpen=function(){return this.idbdb!==null},Xt.prototype.hasBeenClosed=function(){var h=this._state.dbOpenError;return h&&h.name==="DatabaseClosed"},Xt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Xt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Xt.prototype,"tables",{get:function(){var h=this;return d(this._allTables).map(function(p){return h._allTables[p]})},enumerable:!1,configurable:!0}),Xt.prototype.transaction=function(){var h=(function(p,y,E){var S=arguments.length;if(S<2)throw new ke.InvalidArgument("Too few arguments");for(var A=new Array(S-1);--S;)A[S-1]=arguments[S];return E=A.pop(),[p,Y(A),E]}).apply(this,arguments);return this._transaction.apply(this,h)},Xt.prototype._transaction=function(h,p,y){var E=this,S=Ne.trans;S&&S.db===this&&h.indexOf("!")===-1||(S=null);var A,D,V=h.indexOf("?")!==-1;h=h.replace("!","").replace("?","");try{if(D=p.map(function(F){if(F=F instanceof E.Table?F.name:F,typeof F!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return F}),h=="r"||h===Dr)A=Dr;else{if(h!="rw"&&h!=Nr)throw new ke.InvalidArgument("Invalid transaction mode: "+h);A=Nr}if(S){if(S.mode===Dr&&A===Nr){if(!V)throw new ke.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");S=null}S&&D.forEach(function(F){if(S&&S.storeNames.indexOf(F)===-1){if(!V)throw new ke.SubTransaction("Table "+F+" not included in parent transaction.");S=null}}),V&&S&&!S.active&&(S=null)}}catch(F){return S?S._promise(null,function(W,z){z(F)}):Ot(F)}var q=(function F(W,z,Z,K,$){return Re.resolve().then(function(){var X=Ne.transless||Ne,J=W._createTransaction(z,Z,W._dbSchema,K);if(J.explicit=!0,X={trans:J,transless:X},K)J.idbtrans=K.idbtrans;else try{J.create(),J.idbtrans._explicit=!0,W._state.PR1398_maxLoop=3}catch(he){return he.name===yt.InvalidState&&W.isOpen()&&0<--W._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),W.close({disableAutoOpen:!1}),W.open().then(function(){return F(W,z,Z,null,$)})):Ot(he)}var re,ae=H($);return ae&&$t(),X=Re.follow(function(){var he;(re=$.call(J,J))&&(ae?(he=Ln.bind(null,null),re.then(he,he)):typeof re.next=="function"&&typeof re.throw=="function"&&(re=xt(re)))},X),(re&&typeof re.then=="function"?Re.resolve(re).then(function(he){return J.active?he:Ot(new ke.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):X.then(function(){return re})).then(function(he){return K&&J._resolve(),J._completion.then(function(){return he})}).catch(function(he){return J._reject(he),Ot(he)})})}).bind(null,this,A,D,S,y);return S?S._promise(A,q,"lock"):Ne.trans?Fn(Ne.transless,function(){return E._whenReady(q)}):this._whenReady(q)},Xt.prototype.table=function(h){if(!x(this._allTables,h))throw new ke.InvalidTable("Table ".concat(h," does not exist"));return this._allTables[h]},Xt);function Xt(h,p){var y=this;this._middlewares={},this.verno=0;var E=Xt.dependencies;this._options=p=s({addons:Xt.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},p),this._deps={indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},E=p.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var S,A,D,V,q,F={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Rt,dbReadyPromise:null,cancelOpen:Rt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:p.autoOpen};F.dbReadyPromise=new Re(function(z){F.dbReadyResolve=z}),F.openCanceller=new Re(function(z,Z){F.cancelOpen=Z}),this._state=F,this.name=h,this.on=ni(this,"populate","blocked","versionchange","close",{ready:[sn,Rt]}),this.once=function(z,Z){var K=function(){for(var $=[],X=0;X<arguments.length;X++)$[X]=arguments[X];y.on(z).unsubscribe(K),Z.apply(y,$)};return y.on(z,K)},this.on.ready.subscribe=Ve(this.on.ready.subscribe,function(z){return function(Z,K){Xt.vip(function(){var $,X=y._state;X.openComplete?(X.dbOpenError||Re.resolve().then(Z),K&&z(Z)):X.onReadyBeingFired?(X.onReadyBeingFired.push(Z),K&&z(Z)):(z(Z),$=y,K||z(function J(){$.on.ready.unsubscribe(Z),$.on.ready.unsubscribe(J)}))})}}),this.Collection=(S=this,xn(cl.prototype,function(re,J){this.db=S;var K=va,$=null;if(J)try{K=J()}catch(ae){$=ae}var X=re._ctx,J=X.table,re=J.hook.reading.fire;this._ctx={table:J,index:X.index,isPrimKey:!X.index||J.schema.primKey.keyPath&&X.index===J.schema.primKey.name,range:K,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:$,or:X.or,valueMapper:re!==gi?re:null}})),this.Table=(A=this,xn(cs.prototype,function(z,Z,K){this.db=A,this._tx=K,this.name=z,this.schema=Z,this.hook=A._allTables[z]?A._allTables[z].hook:ni(null,{creating:[Ds,Rt],reading:[yi,gi],updating:[So,Rt],deleting:[wo,Rt]})})),this.Transaction=(D=this,xn(Us.prototype,function(z,Z,K,$,X){var J=this;z!=="readonly"&&Z.forEach(function(re){re=(re=K[re])===null||re===void 0?void 0:re.yProps,re&&(Z=Z.concat(re.map(function(ae){return ae.updatesTable})))}),this.db=D,this.mode=z,this.storeNames=Z,this.schema=K,this.chromeTransactionDurability=$,this.idbtrans=null,this.on=ni(this,"complete","error","abort"),this.parent=X||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Re(function(re,ae){J._resolve=re,J._reject=ae}),this._completion.then(function(){J.active=!1,J.on.complete.fire()},function(re){var ae=J.active;return J.active=!1,J.on.error.fire(re),J.parent?J.parent._reject(re):ae&&J.idbtrans&&J.idbtrans.abort(),Ot(re)})})),this.Version=(V=this,xn(Ca.prototype,function(z){this.db=V,this._cfg={version:z,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(q=this,xn(Gi.prototype,function(z,Z,K){if(this.db=q,this._ctx={table:z,index:Z===":id"?null:Z,or:K},this._cmp=this._ascending=ct,this._descending=function($,X){return ct(X,$)},this._max=function($,X){return 0<ct($,X)?$:X},this._min=function($,X){return ct($,X)<0?$:X},this._IDBKeyRange=q._deps.IDBKeyRange,!this._IDBKeyRange)throw new ke.MissingAPI})),this.on("versionchange",function(z){0<z.newVersion?console.warn("Another connection wants to upgrade database '".concat(y.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(y.name,"'. Closing db now to resume the delete request.")),y.close({disableAutoOpen:!1})}),this.on("blocked",function(z){!z.newVersion||z.newVersion<z.oldVersion?console.warn("Dexie.delete('".concat(y.name,"') was blocked")):console.warn("Upgrade '".concat(y.name,"' blocked by other connection holding version ").concat(z.oldVersion/10))}),this._maxKey=Qi(p.IDBKeyRange),this._createTransaction=function(z,Z,K,$){return new y.Transaction(z,Z,K,y._options.chromeTransactionDurability,$)},this._fireOnBlocked=function(z){y.on("blocked").fire(z),Ei.filter(function(Z){return Z.name===y.name&&Z!==y&&!Z._state.vcFired}).map(function(Z){return Z.on("versionchange").fire(z)})},this.use(Oa),this.use(dl),this.use(Gf),this.use(Ur),this.use(ui);var W=new Proxy(this,{get:function(z,Z,K){if(Z==="_vip")return!0;if(Z==="table")return function(X){return ko(y.table(X),W)};var $=Reflect.get(z,Z,K);return $ instanceof cs?ko($,W):Z==="tables"?$.map(function(X){return ko(X,W)}):Z==="_createTransaction"?function(){return ko($.apply(this,arguments),W)}:$}});this.vip=W,E.forEach(function(z){return z(y)})}var Na,wr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Mc=(pl.prototype.subscribe=function(h,p,y){return this._subscribe(h&&typeof h!="function"?h:{next:h,error:p,complete:y})},pl.prototype[wr]=function(){return this},pl);function pl(h){this._subscribe=h}try{Na={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Na={indexedDB:null,IDBKeyRange:null}}function Vc(h){var p,y=!1,E=new Mc(function(S){var A=H(h),D,V=!1,q={},F={},W={get closed(){return V},unsubscribe:function(){V||(V=!0,D&&D.abort(),z&&Tn.storagemutated.unsubscribe(K))}};S.start&&S.start(W);var z=!1,Z=function(){return Or($)},K=function(X){c(q,X),v(F,q)&&Z()},$=function(){var X,J,re;!V&&Na.indexedDB&&(q={},X={},D&&D.abort(),D=new AbortController,re=(function(ae){var he=Wn();try{A&&$t();var ge=Lt(h,ae);return ge=A?ge.finally(Ln):ge}finally{he&&xr()}})(J={subscr:X,signal:D.signal,requery:Z,querier:h,trans:null}),Promise.resolve(re).then(function(ae){y=!0,p=ae,V||J.signal.aborted||(q={},(function(he){for(var ge in he)if(x(he,ge))return;return 1})(F=X)||z||(Tn(Vr,K),z=!0),Or(function(){return!V&&S.next&&S.next(ae)}))},function(ae){y=!1,["DatabaseClosedError","AbortError"].includes(ae?.name)||V||Or(function(){V||S.error&&S.error(ae)})}))};return setTimeout(Z,0),W});return E.hasValue=function(){return y},E.getValue=function(){return p},E}var Fs=Ii;function du(h){var p=ms;try{ms=!0,Tn.storagemutated.fire(h),Ae(h,!0)}finally{ms=p}}N(Fs,s(s({},Hi),{delete:function(h){return new Fs(h,{addons:[]}).delete()},exists:function(h){return new Fs(h,{addons:[]}).open().then(function(p){return p.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(h){try{return p=Fs.dependencies,y=p.indexedDB,p=p.IDBKeyRange,(jr(y)?Promise.resolve(y.databases()).then(function(E){return E.map(function(S){return S.name}).filter(function(S){return S!==ls})}):Ra(y,p).toCollection().primaryKeys()).then(h)}catch{return Ot(new ke.MissingAPI)}var p,y},defineClass:function(){return function(h){_(this,h)}},ignoreTransaction:function(h){return Ne.trans?Fn(Ne.transless,h):h()},vip:xa,async:function(h){return function(){try{var p=xt(h.apply(this,arguments));return p&&typeof p.then=="function"?p:Re.resolve(p)}catch(y){return Ot(y)}}},spawn:function(h,p,y){try{var E=xt(h.apply(y,p||[]));return E&&typeof E.then=="function"?E:Re.resolve(E)}catch(S){return Ot(S)}},currentTransaction:{get:function(){return Ne.trans||null}},waitFor:function(h,p){return p=Re.resolve(typeof h=="function"?Fs.ignoreTransaction(h):h).timeout(p||6e4),Ne.trans?Ne.trans.waitFor(p):p},Promise:Re,debug:{get:function(){return jn},set:function(h){ll(h)}},derive:de,extend:_,props:N,override:Ve,Events:ni,on:Tn,liveQuery:Vc,extendObservabilitySet:c,getByKeyPath:$e,setByKeyPath:P,delByKeyPath:function(h,p){typeof p=="string"?P(h,p,void 0):"length"in p&&[].map.call(p,function(y){P(h,y,void 0)})},shallowClone:k,deepClone:M,getObjectDiff:zr,cmp:ct,asap:it,minKey:-1/0,addons:[],connections:Ei,errnames:yt,dependencies:Na,cache:w,semVer:"4.2.1",version:"4.2.1".split(".").map(function(h){return parseInt(h)}).reduce(function(h,p,y){return h+p/Math.pow(10,2*y)})})),Fs.maxKey=Qi(Fs.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Tn(Vr,function(h){ms||(h=new CustomEvent(Er,{detail:h}),ms=!0,dispatchEvent(h),ms=!1)}),addEventListener(Er,function(h){h=h.detail,ms||du(h)}));var ka,ms=!1,hr=function(){};return typeof BroadcastChannel<"u"&&((hr=function(){(ka=new BroadcastChannel(Er)).onmessage=function(h){return h.data&&du(h.data)}})(),typeof ka.unref=="function"&&ka.unref(),Tn(Vr,function(h){ms||ka.postMessage(h)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(h){if(!Ii.disableBfCache&&h.persisted){jn&&console.debug("Dexie: handling persisted pagehide"),ka?.close();for(var p=0,y=Ei;p<y.length;p++)y[p].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(h){!Ii.disableBfCache&&h.persisted&&(jn&&console.debug("Dexie: handling persisted pageshow"),hr(),du({all:new wn(-1/0,[[]])}))})),Re.rejectionMapper=function(h,p){return!h||h instanceof xe||h instanceof TypeError||h instanceof SyntaxError||!h.name||!ss[h.name]?h:(p=new ss[h.name](p||h.message,h),"stack"in h&&te(p,"stack",{get:function(){return this.inner.stack}}),p)},ll(jn),s(Ii,Object.freeze({__proto__:null,Dexie:Ii,liveQuery:Vc,Entity:Ro,cmp:ct,PropModification:kr,replacePrefix:function(h,p){return new kr({replacePrefix:[h,p]})},add:function(h){return new kr({add:h})},remove:function(h){return new kr({remove:h})},default:Ii,RangeSet:wn,mergeRanges:Lr,rangesOverlap:Gn}),{default:Ii}),Ii})})(Gh)),Gh.exports}var zw=Uw();const em=Rm(zw),k_=Symbol.for("Dexie"),af=globalThis[k_]||(globalThis[k_]=em);if(em.semVer!==af.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${em.semVer} and ${af.semVer}`);const{liveQuery:fN,mergeRanges:dN,rangesOverlap:pN,RangeSet:mN,cmp:gN,Entity:yN,PropModification:vN,replacePrefix:_N,add:bN,remove:EN,DexieYProvider:TN}=af,Qt=new af("GeminiPodcastFlashcards");Qt.version(1).stores({vocab:"id, word, status, nextReview, reviewCount, updatedAt"});Qt.version(2).stores({vocab:"id, word, status, nextReview, reviewCount, updatedAt"});Qt.version(3).stores({vocab:"id, word, status, nextReview, reviewCount, updatedAt",study_logs:"++id, cardId, grade, reviewTime, [cardId+reviewTime]"});async function Bw(){if(await Qt.vocab.count()===0)try{const n="/public/flashcards/data.json".replace("//","/");console.log(`Fetching data from: ${n}`);const s=await fetch(n);if(!s.ok)throw new Error(`Failed to fetch data.json (${s.status})`);const u=(await s.json()).map(d=>({...d,status:d.status||"new",reviewCount:d.reviewCount||0,nextReview:d.nextReview||Date.now(),updatedAt:Date.now(),id:d.id||crypto.randomUUID()}));await Qt.vocab.bulkAdd(u),console.log(`Initialized DB with ${u.length} cards.`)}catch(e){console.error("Error initializing database:",e)}}const qw=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Hw=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),M_=i=>{const e=Hw(i);return e.charAt(0).toUpperCase()+e.slice(1)},Ib=(...i)=>i.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),Fw=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Kw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Gw=_e.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:d,...g},_)=>_e.createElement("svg",{ref:_,...Kw,width:e,height:e,stroke:i,strokeWidth:s?Number(n)*24/Number(e):n,className:Ib("lucide",o),...!u&&!Fw(g)&&{"aria-hidden":"true"},...g},[...d.map(([b,R])=>_e.createElement(b,R)),...Array.isArray(u)?u:[u]]));const Ar=(i,e)=>{const n=_e.forwardRef(({className:s,...o},u)=>_e.createElement(Gw,{ref:u,iconNode:e,className:Ib(`lucide-${qw(M_(i))}`,`lucide-${i}`,s),...o}));return n.displayName=M_(i),n};const Yw=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Qw=Ar("activity",Yw);const $w=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Xw=Ar("arrow-left",$w);const Ww=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Jw=Ar("book-open",Ww);const Zw=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],eS=Ar("layers",Zw);const tS=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],V_=Ar("lightbulb",tS);const nS=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],rS=Ar("loader-circle",nS);const iS=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],sS=Ar("mic",iS);const aS=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],oS=Ar("pen-tool",aS);const lS=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],uS=Ar("play",lS);const cS=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],hS=Ar("search",cS);const fS=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],P_=Ar("sparkles",fS);const dS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],pS=Ar("square",dS);const mS=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],gS=Ar("trash-2",mS);const yS=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],vS=Ar("trending-up",yS);const _S=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Mh=Ar("volume-2",_S);function Ob(i,e){const n=Date.now(),s=60*1e3,o=1440*60*1e3,u=Number(e);if(isNaN(u)||u<0||u>5)throw new Error("Grade must be a number between 0 and 5");let{easeFactor:d=2.5,interval:g=0,reviewCount:_=0}=i;u>=3?g===0?g=1:g===1?g=6:g=Math.round(g*d):g=0,_+=1;let b=d+(.1-(5-u)*(.08+(5-u)*.02));b<1.3&&(b=1.3);const R=g===0?n+10*s:n+g*o,x=u>=3?"review":"learning";return{easeFactor:parseFloat(b.toFixed(2)),interval:g,nextReview:R,status:x,reviewCount:_,updatedAt:n}}function bS(){const[i,e]=_e.useState(!1),[n,s]=_e.useState(null),[o,u]=_e.useState(null),d=_e.useRef(null),g=_e.useRef([]);return _e.useEffect(()=>()=>{n&&URL.revokeObjectURL(n)},[n]),{isRecording:i,audioUrl:n,error:o,startRecording:async()=>{try{u(null);const x=await navigator.mediaDevices.getUserMedia({audio:!0});d.current=new MediaRecorder(x),g.current=[],d.current.ondataavailable=N=>{N.data.size>0&&g.current.push(N.data)},d.current.onstop=()=>{const N=new Blob(g.current,{type:"audio/webm"}),Q=URL.createObjectURL(N);s(Q),x.getTracks().forEach(te=>te.stop())},d.current.start(),e(!0)}catch(x){console.error("Error accessing microphone:",x),u("Microphone access denied. Please check your permissions.")}},stopRecording:()=>{d.current&&i&&(d.current.stop(),e(!1))},clearRecording:()=>{n&&(URL.revokeObjectURL(n),s(null)),e(!1),u(null)}}}var j_;(function(i){i.STRING="string",i.NUMBER="number",i.INTEGER="integer",i.BOOLEAN="boolean",i.ARRAY="array",i.OBJECT="object"})(j_||(j_={}));var L_;(function(i){i.LANGUAGE_UNSPECIFIED="language_unspecified",i.PYTHON="python"})(L_||(L_={}));var U_;(function(i){i.OUTCOME_UNSPECIFIED="outcome_unspecified",i.OUTCOME_OK="outcome_ok",i.OUTCOME_FAILED="outcome_failed",i.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(U_||(U_={}));const z_=["user","model","function","system"];var B_;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(B_||(B_={}));var q_;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(q_||(q_={}));var H_;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(H_||(H_={}));var F_;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER"})(F_||(F_={}));var Zu;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.OTHER="OTHER"})(Zu||(Zu={}));var K_;(function(i){i.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",i.RETRIEVAL_QUERY="RETRIEVAL_QUERY",i.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",i.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",i.CLASSIFICATION="CLASSIFICATION",i.CLUSTERING="CLUSTERING"})(K_||(K_={}));var G_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(G_||(G_={}));var Y_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Y_||(Y_={}));class yr extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Ul extends yr{constructor(e,n){super(e),this.response=n}}class Db extends yr{constructor(e,n,s,o){super(e),this.status=n,this.statusText=s,this.errorDetails=o}}class uo extends yr{}class Nb extends yr{}const ES="https://generativelanguage.googleapis.com",TS="v1beta",wS="0.24.1",SS="genai-js";var Jo;(function(i){i.GENERATE_CONTENT="generateContent",i.STREAM_GENERATE_CONTENT="streamGenerateContent",i.COUNT_TOKENS="countTokens",i.EMBED_CONTENT="embedContent",i.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Jo||(Jo={}));class AS{constructor(e,n,s,o,u){this.model=e,this.task=n,this.apiKey=s,this.stream=o,this.requestOptions=u}toString(){var e,n;const s=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||TS;let u=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||ES}/${s}/${this.model}:${this.task}`;return this.stream&&(u+="?alt=sse"),u}}function CS(i){const e=[];return i?.apiClient&&e.push(i.apiClient),e.push(`${SS}/${wS}`),e.join(" ")}async function RS(i){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",CS(i.requestOptions)),n.append("x-goog-api-key",i.apiKey);let s=(e=i.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(o){throw new uo(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${o.message}`)}for(const[o,u]of s.entries()){if(o==="x-goog-api-key")throw new uo(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new uo(`Header name ${o} can only be set using the apiClient field`);n.append(o,u)}}return n}async function xS(i,e,n,s,o,u){const d=new AS(i,e,n,s,u);return{url:d.toString(),fetchOptions:Object.assign(Object.assign({},NS(u)),{method:"POST",headers:await RS(d),body:o})}}async function bc(i,e,n,s,o,u={},d=fetch){const{url:g,fetchOptions:_}=await xS(i,e,n,s,o,u);return IS(g,_,d)}async function IS(i,e,n=fetch){let s;try{s=await n(i,e)}catch(o){OS(o,i)}return s.ok||await DS(s,i),s}function OS(i,e){let n=i;throw n.name==="AbortError"?(n=new Nb(`Request aborted when fetching ${e.toString()}: ${i.message}`),n.stack=i.stack):i instanceof Db||i instanceof uo||(n=new yr(`Error fetching from ${e.toString()}: ${i.message}`),n.stack=i.stack),n}async function DS(i,e){let n="",s;try{const o=await i.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,s=o.error.details)}catch{}throw new Db(`Error fetching from ${e.toString()}: [${i.status} ${i.statusText}] ${n}`,i.status,i.statusText,s)}function NS(i){const e={};if(i?.signal!==void 0||i?.timeout>=0){const n=new AbortController;i?.timeout>=0&&setTimeout(()=>n.abort(),i.timeout),i?.signal&&i.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}function Im(i){return i.text=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Yh(i.candidates[0]))throw new Ul(`${ro(i)}`,i);return kS(i)}else if(i.promptFeedback)throw new Ul(`Text not available. ${ro(i)}`,i);return""},i.functionCall=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Yh(i.candidates[0]))throw new Ul(`${ro(i)}`,i);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Q_(i)[0]}else if(i.promptFeedback)throw new Ul(`Function call not available. ${ro(i)}`,i)},i.functionCalls=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Yh(i.candidates[0]))throw new Ul(`${ro(i)}`,i);return Q_(i)}else if(i.promptFeedback)throw new Ul(`Function call not available. ${ro(i)}`,i)},i}function kS(i){var e,n,s,o;const u=[];if(!((n=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const d of(o=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)d.text&&u.push(d.text),d.executableCode&&u.push("\n```"+d.executableCode.language+`
`+d.executableCode.code+"\n```\n"),d.codeExecutionResult&&u.push("\n```\n"+d.codeExecutionResult.output+"\n```\n");return u.length>0?u.join(""):""}function Q_(i){var e,n,s,o;const u=[];if(!((n=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const d of(o=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)d.functionCall&&u.push(d.functionCall);if(u.length>0)return u}const MS=[Zu.RECITATION,Zu.SAFETY,Zu.LANGUAGE];function Yh(i){return!!i.finishReason&&MS.includes(i.finishReason)}function ro(i){var e,n,s;let o="";if((!i.candidates||i.candidates.length===0)&&i.promptFeedback)o+="Response was blocked",!((e=i.promptFeedback)===null||e===void 0)&&e.blockReason&&(o+=` due to ${i.promptFeedback.blockReason}`),!((n=i.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${i.promptFeedback.blockReasonMessage}`);else if(!((s=i.candidates)===null||s===void 0)&&s[0]){const u=i.candidates[0];Yh(u)&&(o+=`Candidate was blocked due to ${u.finishReason}`,u.finishMessage&&(o+=`: ${u.finishMessage}`))}return o}function lc(i){return this instanceof lc?(this.v=i,this):new lc(i)}function VS(i,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(i,e||[]),o,u=[];return o={},d("next"),d("throw"),d("return"),o[Symbol.asyncIterator]=function(){return this},o;function d(N){s[N]&&(o[N]=function(Q){return new Promise(function(te,de){u.push([N,Q,te,de])>1||g(N,Q)})})}function g(N,Q){try{_(s[N](Q))}catch(te){x(u[0][3],te)}}function _(N){N.value instanceof lc?Promise.resolve(N.value.v).then(b,R):x(u[0][2],N)}function b(N){g("next",N)}function R(N){g("throw",N)}function x(N,Q){N(Q),u.shift(),u.length&&g(u[0][0],u[0][1])}}const $_=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function PS(i){const e=i.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=US(e),[s,o]=n.tee();return{stream:LS(s),response:jS(o)}}async function jS(i){const e=[],n=i.getReader();for(;;){const{done:s,value:o}=await n.read();if(s)return Im(zS(e));e.push(o)}}function LS(i){return VS(this,arguments,function*(){const n=i.getReader();for(;;){const{value:s,done:o}=yield lc(n.read());if(o)break;yield yield lc(Im(s))}})}function US(i){const e=i.getReader();return new ReadableStream({start(s){let o="";return u();function u(){return e.read().then(({value:d,done:g})=>{if(g){if(o.trim()){s.error(new yr("Failed to parse stream"));return}s.close();return}o+=d;let _=o.match($_),b;for(;_;){try{b=JSON.parse(_[1])}catch{s.error(new yr(`Error parsing JSON response: "${_[1]}"`));return}s.enqueue(b),o=o.substring(_[0].length),_=o.match($_)}return u()}).catch(d=>{let g=d;throw g.stack=d.stack,g.name==="AbortError"?g=new Nb("Request aborted when reading from the stream"):g=new yr("Error reading from the stream"),g})}}})}function zS(i){const e=i[i.length-1],n={promptFeedback:e?.promptFeedback};for(const s of i){if(s.candidates){let o=0;for(const u of s.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=u.citationMetadata,n.candidates[o].groundingMetadata=u.groundingMetadata,n.candidates[o].finishReason=u.finishReason,n.candidates[o].finishMessage=u.finishMessage,n.candidates[o].safetyRatings=u.safetyRatings,u.content&&u.content.parts){n.candidates[o].content||(n.candidates[o].content={role:u.content.role||"user",parts:[]});const d={};for(const g of u.content.parts)g.text&&(d.text=g.text),g.functionCall&&(d.functionCall=g.functionCall),g.executableCode&&(d.executableCode=g.executableCode),g.codeExecutionResult&&(d.codeExecutionResult=g.codeExecutionResult),Object.keys(d).length===0&&(d.text=""),n.candidates[o].content.parts.push(d)}o++}s.usageMetadata&&(n.usageMetadata=s.usageMetadata)}return n}async function kb(i,e,n,s){const o=await bc(e,Jo.STREAM_GENERATE_CONTENT,i,!0,JSON.stringify(n),s);return PS(o)}async function Mb(i,e,n,s){const u=await(await bc(e,Jo.GENERATE_CONTENT,i,!1,JSON.stringify(n),s)).json();return{response:Im(u)}}function Vb(i){if(i!=null){if(typeof i=="string")return{role:"system",parts:[{text:i}]};if(i.text)return{role:"system",parts:[i]};if(i.parts)return i.role?i:{role:"system",parts:i.parts}}}function uc(i){let e=[];if(typeof i=="string")e=[{text:i}];else for(const n of i)typeof n=="string"?e.push({text:n}):e.push(n);return BS(e)}function BS(i){const e={role:"user",parts:[]},n={role:"function",parts:[]};let s=!1,o=!1;for(const u of i)"functionResponse"in u?(n.parts.push(u),o=!0):(e.parts.push(u),s=!0);if(s&&o)throw new yr("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!o)throw new yr("No content is provided for sending chat message.");return s?e:n}function qS(i,e){var n;let s={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(n=e?.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=i.generateContentRequest!=null;if(i.contents){if(o)throw new uo("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=i.contents}else if(o)s=Object.assign(Object.assign({},s),i.generateContentRequest);else{const u=uc(i);s.contents=[u]}return{generateContentRequest:s}}function X_(i){let e;return i.contents?e=i:e={contents:[uc(i)]},i.systemInstruction&&(e.systemInstruction=Vb(i.systemInstruction)),e}function HS(i){return typeof i=="string"||Array.isArray(i)?{content:uc(i)}:i}const W_=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],FS={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function KS(i){let e=!1;for(const n of i){const{role:s,parts:o}=n;if(!e&&s!=="user")throw new yr(`First content should be with role 'user', got ${s}`);if(!z_.includes(s))throw new yr(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(z_)}`);if(!Array.isArray(o))throw new yr("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new yr("Each Content should have at least one part");const u={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const g of o)for(const _ of W_)_ in g&&(u[_]+=1);const d=FS[s];for(const g of W_)if(!d.includes(g)&&u[g]>0)throw new yr(`Content with role '${s}' can't contain '${g}' part`);e=!0}}function J_(i){var e;if(i.candidates===void 0||i.candidates.length===0)return!1;const n=(e=i.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const s of n.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}const Z_="SILENT_ERROR";class GS{constructor(e,n,s,o={}){this.model=n,this.params=s,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,s?.history&&(KS(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var s,o,u,d,g,_;await this._sendPromise;const b=uc(e),R={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(g=this.params)===null||g===void 0?void 0:g.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,b]},x=Object.assign(Object.assign({},this._requestOptions),n);let N;return this._sendPromise=this._sendPromise.then(()=>Mb(this._apiKey,this.model,R,x)).then(Q=>{var te;if(J_(Q.response)){this._history.push(b);const de=Object.assign({parts:[],role:"model"},(te=Q.response.candidates)===null||te===void 0?void 0:te[0].content);this._history.push(de)}else{const de=ro(Q.response);de&&console.warn(`sendMessage() was unsuccessful. ${de}. Inspect response object for details.`)}N=Q}).catch(Q=>{throw this._sendPromise=Promise.resolve(),Q}),await this._sendPromise,N}async sendMessageStream(e,n={}){var s,o,u,d,g,_;await this._sendPromise;const b=uc(e),R={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(g=this.params)===null||g===void 0?void 0:g.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,b]},x=Object.assign(Object.assign({},this._requestOptions),n),N=kb(this._apiKey,this.model,R,x);return this._sendPromise=this._sendPromise.then(()=>N).catch(Q=>{throw new Error(Z_)}).then(Q=>Q.response).then(Q=>{if(J_(Q)){this._history.push(b);const te=Object.assign({},Q.candidates[0].content);te.role||(te.role="model"),this._history.push(te)}else{const te=ro(Q);te&&console.warn(`sendMessageStream() was unsuccessful. ${te}. Inspect response object for details.`)}}).catch(Q=>{Q.message!==Z_&&console.error(Q)}),N}}async function YS(i,e,n,s){return(await bc(e,Jo.COUNT_TOKENS,i,!1,JSON.stringify(n),s)).json()}async function QS(i,e,n,s){return(await bc(e,Jo.EMBED_CONTENT,i,!1,JSON.stringify(n),s)).json()}async function $S(i,e,n,s){const o=n.requests.map(d=>Object.assign(Object.assign({},d),{model:e}));return(await bc(e,Jo.BATCH_EMBED_CONTENTS,i,!1,JSON.stringify({requests:o}),s)).json()}class e0{constructor(e,n,s={}){this.apiKey=e,this._requestOptions=s,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=Vb(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var s;const o=X_(e),u=Object.assign(Object.assign({},this._requestOptions),n);return Mb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),u)}async generateContentStream(e,n={}){var s;const o=X_(e),u=Object.assign(Object.assign({},this._requestOptions),n);return kb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),u)}startChat(e){var n;return new GS(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const s=qS(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return YS(this.apiKey,this.model,s,o)}async embedContent(e,n={}){const s=HS(e),o=Object.assign(Object.assign({},this._requestOptions),n);return QS(this.apiKey,this.model,s,o)}async batchEmbedContents(e,n={}){const s=Object.assign(Object.assign({},this._requestOptions),n);return $S(this.apiKey,this.model,e,s)}}class Lp{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new yr("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new e0(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,s){if(!e.name)throw new uo("Cached content must contain a `name` field.");if(!e.model)throw new uo("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const d of o)if(n?.[d]&&e[d]&&n?.[d]!==e[d]){if(d==="model"){const g=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,_=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(g===_)continue}throw new uo(`Different value for "${d}" specified in modelParams (${n[d]}) and cachedContent (${e[d]})`)}const u=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new e0(this.apiKey,u,s)}}const XS={models:{default:"gemini-2.5-flash-lite"}},WS={ai:XS},Up=3e4,JS=12e4;class ZS{constructor(){this.apiKeyKey="gemini_api_key_byok",this.modelName=WS.ai?.models?.default}getApiKey(){return localStorage.getItem(this.apiKeyKey)||sessionStorage.getItem(this.apiKeyKey)}isPersistent(){return!!localStorage.getItem(this.apiKeyKey)}setApiKey(e,n=!1){n?(localStorage.setItem(this.apiKeyKey,e),sessionStorage.removeItem(this.apiKeyKey)):(sessionStorage.setItem(this.apiKeyKey,e),localStorage.removeItem(this.apiKeyKey))}removeApiKey(){sessionStorage.removeItem(this.apiKeyKey),localStorage.removeItem(this.apiKeyKey)}hasKey(){return!!this.getApiKey()}async getParaphrase(e,n){const s=this.getApiKey();if(!s)throw new Error("API Key not found. Please configure it in Settings.");const u=new Lp(s).getGenerativeModel({model:this.modelName}),d=`
      Role: English Language Tutor for B1/B2 learners.
      Task: Explain the word or phrase "${e}" in simple English.
      Context: "${n}"
      
      Constraints:
      1. Use simple vocabulary (CEFR B1 level).
      2. Keep it concise (under 30 words).
      3. Do NOT simply repeat the definition; explain it naturally.
      4. Output plain text only (no markdown).
    `;return this._callGemini(u,d,!1,!1,Up)}async generateCardDetails(e){const n=this.getApiKey();if(!n)throw new Error("API Key not found in session. Please configure it in Settings again.");const o=new Lp(n).getGenerativeModel({model:this.modelName}),u=`
      You are an English vocabulary expert helping a Traditional Chinese (Taiwan) learner.
      Target: "${e}"
      
      Instructions:
      1. If the target is a common phrase or idiom (e.g., "take for granted"), treat it as a single learning unit.
      2. If it's a phrase, the "ipa" field can be simplified or null.
      
      Return ONLY a raw JSON object (no markdown formatting, no code blocks) with the following keys:
      - "definition": A clear, concise English definition suitable for a flashcard.
      - "ipa": The IPA phonetic transcription (optional for phrases).
      - "context": A short, natural example sentence that MUST contain the target "${e}". (Keep this in English).
      - "translation": The Traditional Chinese (Taiwan) translation of the target. Ensure it is NOT Simplified Chinese.
      - "collocations": An array of 2-3 common collocations or related usage patterns (e.g., ["reluctant to admit", "reluctant agreement"]).
    `;return this._callGemini(o,u,!1,!0,Up)}async analyzeTranscript(e,n){const s=this.getApiKey();if(!s)throw new Error("API Key not found. Please configure it in Settings.");const u=new Lp(s).getGenerativeModel({model:this.modelName});let d="";n==="auto"?d='Select the most important vocabulary OR phrases (approx 5-15 items). Prioritize "chunks" and "collocations" over simple words if they are key to understanding.':d=`Select strictly up to ${n} most important vocabulary words or phrases.`;const g=`
      You are an expert language tutor analyzing a podcast transcript for a Traditional Chinese (Taiwan) learner.
      
      Goal: Extract vocabulary words AND common phrases/collocations from the provided text.
      Constraint: ${d}
      
      For each item, provide:
      1. "word": The target word or phrase (lemma).
      2. "ipa": IPA phonetic transcription (can be null for long phrases).
      3. "definition": A concise English definition relevant to the context in the transcript.
      4. "context": An exact sentence (or slightly simplified) from the text that MUST explicitly contain the target.
      5. "translation": The Traditional Chinese (Taiwan) translation. Strictly NO Simplified Chinese.
      6. "collocations": An array of 2-3 common collocations found in the text or generally associated with the item.

      Input Text:
      """
      ${e.substring(0,3e4)} 
      """

      Return ONLY a raw JSON array (no markdown, no code blocks) of objects.
    `;return this._callGemini(u,g,!0,!0,JS)}async _fetchWithTimeout(e,n){let s;const o=new Promise((u,d)=>{s=setTimeout(()=>{d(new Error(`Request timed out after ${n/1e3} seconds`))},n)});try{return await Promise.race([e,o])}finally{clearTimeout(s)}}async _callGemini(e,n,s=!1,o=!0,u=Up){try{console.log(`Calling AI Model: ${this.modelName} (Timeout: ${u}ms)`);const b=(await(await this._fetchWithTimeout(e.generateContent(n),u)).response).text().replace(/```json|```/g,"").trim();if(!o)return b;let R;try{R=JSON.parse(b)}catch(N){const Q=b.indexOf(s?"[":"{"),te=b.lastIndexOf(s?"]":"}")+1;if(Q!==-1&&te!==-1)R=JSON.parse(b.substring(Q,te));else throw N}const x=N=>{N.ipa&&(N.ipa=N.ipa.replace(new RegExp("^[/\\[]|[/\\]]$","g"),""))};return Array.isArray(R)?R.forEach(x):x(R),R}catch(d){throw console.error("AI Generation failed:",d),new Error(`AI Error: ${d.message}`)}}}const Es=new ZS;function eA({context:i,word:e,definition:n}){const[s,o]=_e.useState(!1),[u,d]=_e.useState(0);_e.useEffect(()=>{o(!1),d(0)},[e]);const g=_e.useCallback(()=>{s?d(N=>Math.min(N+1,2)):o(!0)},[s]),_=N=>{N.stopPropagation(),d(Q=>Math.min(Q+1,2))},b=N=>{N.stopPropagation(),g()};_e.useEffect(()=>{const N=Q=>{(Q.key==="h"||Q.key==="H")&&!["INPUT","TEXTAREA"].includes(document.activeElement.tagName)&&g()};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[g]);const R=()=>{if(!e)return"[......]";switch(u){case 0:return"[......]";case 1:return`${e.charAt(0)}[......]`;case 2:return e;default:return"[......]"}},x=()=>{if(!i||!e)return null;const N=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Q=new RegExp(`\\b${N}\\b`,"gi"),te=i.split(Q);if(te.length===1)return console.warn(`[ClozeSentence] Word "${e}" not found in context.`),O.jsx("div",{style:{fontSize:"1.4rem"},children:i});const de=!s||u<2;return O.jsx("div",{style:{fontSize:"1.4rem",lineHeight:"1.6",color:"#e0e0e0",textAlign:"left",position:"relative"},children:te.map((be,je)=>O.jsxs(xb.Fragment,{children:[be,je<te.length-1&&O.jsxs(O.Fragment,{children:[O.jsx("span",{onClick:_,className:"cloze-gap",title:u<2?"Tap to reveal more":"Fully revealed",style:{color:u>0?"#88ccca":"#666",fontWeight:"bold",margin:"0 2px 0 4px",cursor:u<2?"pointer":"default",borderBottom:u<2?`2px dashed ${u>0?"#88ccca":"#555"}`:"none",backgroundColor:u===0?"rgba(255,255,255,0.05)":"transparent",borderRadius:"4px",padding:"0 4px",transition:"all 0.2s ease",userSelect:"none",...u===2?{backgroundColor:"rgba(136, 204, 202, 0.1)",color:"#88ccca",borderBottom:"2px solid #88ccca"}:{}},children:R()}),de&&O.jsx("span",{onClick:b,className:"hint-icon-inline",title:s?"Reveal Answer (H)":"Show Definition (H)",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",marginLeft:"2px",marginRight:"4px",padding:"2px",backgroundColor:"rgba(255, 213, 79, 0.2)",borderRadius:"50%",color:"#ffd54f",cursor:"pointer",transition:"all 0.2s ease",opacity:.8},children:O.jsx(V_,{size:16,strokeWidth:2.5})})]})]},je))})};return O.jsxs("div",{className:"cloze-container",style:{width:"100%",padding:"0 0.5rem",position:"relative"},children:[x(),s&&n&&O.jsxs("div",{style:{marginTop:"1.5rem",padding:"12px",backgroundColor:"rgba(255, 213, 79, 0.08)",borderRadius:"8px",borderLeft:"3px solid #ffd54f",fontSize:"1rem",color:"#eee",textAlign:"left",animation:"fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:[O.jsxs("strong",{style:{color:"#ffd54f",display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px",fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:[O.jsx(V_,{size:14})," Definition"]}),n]}),O.jsx("style",{children:`
        @keyframes fadeIn { 
          from { opacity: 0; transform: translateY(5px); } 
          to { opacity: 1; transform: translateY(0); } 
        }
        .cloze-gap:hover {
          background-color: rgba(136, 204, 202, 0.15) !important;
          color: #88ccca !important;
          border-bottom-color: #88ccca !important;
        }
        .cloze-gap:active {
          transform: scale(0.95);
        }
        .hint-icon-inline:hover {
          background-color: rgba(255, 213, 79, 0.4) !important;
          transform: scale(1.1);
          opacity: 1 !important;
        }
        .hint-icon-inline:active {
          transform: scale(0.9);
        }
      `})]})}function tA({card:i,onUpdate:e}){const[n,s]=_e.useState(!1),[o,u]=_e.useState(!1),[d,g]=_e.useState(null),[_,b]=_e.useState(!1),[R,x]=_e.useState(()=>localStorage.getItem("gp_settings_learning_mode")||"sniper"),{isRecording:N,audioUrl:Q,startRecording:te,stopRecording:de,clearRecording:be,error:je}=bS();_e.useEffect(()=>{if(!n)g(null),be();else if((JSON.parse(localStorage.getItem("gp_settings_autoplay_tts"))||!1)&&i.context){const M=setTimeout(()=>{it(i.context,{stopPropagation:()=>{}})},300);return()=>clearTimeout(M)}},[n,i.id]),_e.useEffect(()=>{const B=()=>{x(localStorage.getItem("gp_settings_learning_mode")||"sniper")};return window.addEventListener("storage",B),()=>window.removeEventListener("storage",B)},[]);const Fe=()=>{s(!n),u(!1)},Ve=(B,M)=>{M.stopPropagation();try{const ut=Ob(i,B),Gt={...i,...ut};e(Gt),s(!1),u(!1)}catch(ut){console.error("Error updating card:",ut)}},rt=B=>{B.stopPropagation(),u(!o)},it=(B,M)=>{if(M&&M.stopPropagation(),!B)return;window.speechSynthesis.cancel();const ut=new SpeechSynthesisUtterance(B);ut.lang="en-US",ut.rate=1,window.speechSynthesis.speak(ut)},$e=async B=>{if(B.stopPropagation(),!d){b(!0);try{const M=typeof i.context=="string"?i.context:i.context?.text||"",ut=await Es.getParaphrase(i.word,M);g(ut)}catch{g("Unable to connect to AI Coach. Check your API Key settings.")}finally{b(!1)}}},P=(i.interval||0)<3,k=()=>!(R==="reading"||!i.context||P),L=()=>{if(!k()){const M=i.status==="new"||!i.status&&(i.reviewCount||0)===0,ut=i.status==="learning"||!M&&P;return O.jsxs(O.Fragment,{children:[O.jsx("h2",{style:{fontSize:"2.5rem",margin:0,fontWeight:"bold"},children:i.word}),R==="sniper"&&O.jsxs(O.Fragment,{children:[M&&O.jsx("span",{style:{fontSize:"0.8rem",color:"#4caf50",marginTop:"0.5rem",display:"block",fontWeight:"bold"},children:" New Card"}),ut&&!M&&O.jsx("span",{style:{fontSize:"0.8rem",color:"#ffb74d",marginTop:"0.5rem",display:"block",fontWeight:"bold"},children:" Learning Phase"})]})]})}return O.jsx(eA,{context:i.context,word:i.word,definition:i.definition})},Y=B=>B.stopPropagation(),j={background:"transparent",border:"none",cursor:"pointer",color:"#88ccca",padding:"4px",marginLeft:"8px",verticalAlign:"middle",transition:"opacity 0.2s",display:"inline-flex",alignItems:"center",justifyContent:"center"};return O.jsxs("div",{className:"flashcard-container",onClick:Fe,style:{border:"1px solid #444",padding:"1.5rem",borderRadius:"12px",textAlign:"center",cursor:"pointer",minHeight:"220px",display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"#25262b",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"transform 0.2s",color:"#e0e0e0",position:"relative",maxHeight:"75vh",overflow:"hidden"},children:[!n&&O.jsxs("div",{className:"front",children:[O.jsxs("div",{style:{marginBottom:"1.5rem",padding:"0 10px",minHeight:"120px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[L(),O.jsx("button",{onClick:B=>it(k()?i.context:i.word,B),style:{...j,marginTop:"10px"},title:"Listen",children:O.jsx(Mh,{size:24})})]}),i.ipa&&!k()&&O.jsxs("p",{style:{fontSize:"1.2rem",color:"#88ccca",fontFamily:"monospace",margin:"0 0 1.5rem 0"},children:["/",i.ipa,"/"]}),O.jsx("p",{style:{color:"#666",fontSize:"0.9rem"},children:"(Click to flip)"}),O.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",fontSize:"0.8rem",color:"#555"},children:["EF: ",i.easeFactor||"2.5"," | Int: ",i.interval||0,"d"]})]}),n&&O.jsxs("div",{className:"back",style:{display:"flex",flexDirection:"column",height:"100%"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"0.5rem"},children:[O.jsx("h2",{style:{fontSize:"1.8rem",color:"#fff",margin:0},children:i.word}),O.jsx("button",{onClick:B=>it(i.word,B),style:{...j,color:"#88ccca"},children:O.jsx(Mh,{size:22})})]}),i.ipa&&O.jsxs("p",{style:{fontSize:"1rem",color:"#888",fontFamily:"monospace",margin:"0 0 0.8rem 0"},children:["/",i.ipa,"/"]}),O.jsxs("div",{style:{marginBottom:"0.8rem"},onClick:Y,children:[O.jsx("button",{onClick:rt,style:{background:"transparent",border:"1px solid #555",color:"#888",borderRadius:"15px",padding:"2px 10px",fontSize:"0.75rem",cursor:"pointer",marginBottom:"0.2rem"},children:o?"Hide Translation":"Show Translation"}),o&&O.jsx("div",{style:{fontSize:"1.1rem",color:"#e91e63",fontWeight:"bold",marginTop:"0.5rem"},children:i.translation||"(No translation)"})]}),O.jsxs("div",{style:{textAlign:"left",lineHeight:"1.6",flexGrow:1,overflowY:"auto",paddingRight:"4px",marginBottom:"1rem",scrollbarWidth:"thin",scrollbarColor:"#444 transparent"},onClick:Y,children:[O.jsxs("div",{style:{marginBottom:"1rem",backgroundColor:"rgba(255, 255, 255, 0.05)",padding:"10px",borderRadius:"6px",borderLeft:"4px solid #88ccca"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[O.jsx("strong",{style:{color:"#88ccca",fontSize:"0.8rem",textTransform:"uppercase"},children:"Definition"}),O.jsx("button",{onClick:B=>it(i.definition,B),style:{...j,marginLeft:"8px",padding:0},children:O.jsx(Mh,{size:16})})]}),O.jsx("div",{style:{fontSize:"1.1rem",color:"#ffffff",fontWeight:"500",lineHeight:"1.4"},children:i.definition})]}),i.collocations&&i.collocations.length>0&&O.jsxs("div",{style:{marginBottom:"1rem",padding:"0 5px"},children:[O.jsxs("strong",{style:{color:"#ffb74d",fontSize:"0.8rem",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"5px"},children:[O.jsx(eS,{size:12})," Collocations"]}),O.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginTop:"5px"},children:i.collocations.map((B,M)=>O.jsx("span",{style:{backgroundColor:"rgba(255, 183, 77, 0.1)",color:"#ffcc80",padding:"2px 8px",borderRadius:"4px",fontSize:"0.9rem",border:"1px solid rgba(255, 183, 77, 0.3)"},children:B},M))})]}),d&&O.jsxs("div",{style:{marginBottom:"1rem",backgroundColor:"rgba(233, 30, 99, 0.1)",padding:"10px",borderRadius:"6px",borderLeft:"4px solid #e91e63",animation:"fadeIn 0.3s"},children:[O.jsxs("strong",{style:{color:"#e91e63",fontSize:"0.8rem",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"5px"},children:[O.jsx(P_,{size:12})," AI Tutor"]}),O.jsx("p",{style:{margin:"5px 0 0",fontSize:"0.95rem",color:"#ffcdd2"},children:d})]}),O.jsxs("div",{style:{padding:"0 10px"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[O.jsx("strong",{style:{color:"#aaa",fontSize:"0.8rem"},children:"Context:"}),O.jsx("button",{onClick:B=>it(i.context,B),style:{...j,marginLeft:"6px",color:"#aaa"},children:O.jsx(Mh,{size:16})})]}),O.jsx("div",{style:{marginTop:"2px"},children:O.jsx("em",{style:{color:"#a5d6a7",fontSize:"0.95rem"},children:i.context})})]})]}),O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"8px",marginBottom:"1rem"},onClick:Y,children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[N?O.jsx("button",{onClick:de,title:"Stop Recording",style:{background:"#e53935",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff",animation:"pulse 1.5s infinite"},children:O.jsx(pS,{size:14,fill:"currentColor"})}):O.jsx("button",{onClick:te,title:"Shadowing Record",style:{background:"#333",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff"},children:O.jsx(sS,{size:16})}),Q&&!N&&O.jsxs(O.Fragment,{children:[O.jsx("audio",{src:Q,style:{display:"none"},id:"shadowing-playback"}),O.jsx("button",{onClick:()=>document.getElementById("shadowing-playback").play(),style:{background:"transparent",border:"1px solid #4caf50",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#4caf50"},children:O.jsx(uS,{size:14,fill:"currentColor"})}),O.jsx("button",{onClick:be,style:{background:"transparent",border:"none",cursor:"pointer",color:"#666"},children:O.jsx(gS,{size:16})})]}),je&&O.jsx("span",{style:{fontSize:"0.7rem",color:"#e53935"},children:"Mic Error"})]}),O.jsx("div",{children:O.jsxs("button",{onClick:$e,disabled:_||!!d,style:{background:"transparent",border:"1px solid #e91e63",borderRadius:"15px",padding:"4px 10px",fontSize:"0.75rem",color:"#e91e63",cursor:_||d?"default":"pointer",opacity:_||d?.5:1,display:"flex",alignItems:"center",gap:"5px"},children:[_?O.jsx(rS,{size:12,className:"spin"}):O.jsx(P_,{size:12}),d?"Explained":"Explain Simply"]})})]}),O.jsxs("div",{className:"actions",onClick:Y,style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginTop:"auto",paddingTop:"0.5rem",borderTop:"1px solid #333"},children:[O.jsxs("button",{onClick:B=>Ve(1,B),style:Vh("#e53935"),title:"Reset",children:["Again ",O.jsx("div",{style:Ph,children:"< 10m"})]}),O.jsxs("button",{onClick:B=>Ve(3,B),style:Vh("#fb8c00"),title:"Hard",children:["Hard ",O.jsxs("div",{style:Ph,children:["~",zp(Math.round((i.interval||1)*1.2))]})]}),O.jsxs("button",{onClick:B=>Ve(4,B),style:Vh("#43a047"),title:"Good",children:["Good"," ",O.jsx("div",{style:Ph,children:zp(Math.round((i.interval||1)*(i.easeFactor||2.5)))})]}),O.jsxs("button",{onClick:B=>Ve(5,B),style:Vh("#1e88e5"),title:"Easy",children:["Easy"," ",O.jsx("div",{style:Ph,children:zp(Math.round((i.interval||1)*(i.easeFactor||2.5)*1.3))})]})]})]}),O.jsx("style",{children:`
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }
        .spin { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
      `})]})}const zp=i=>i===0?"< 1d":i===1?"1d":`${i}d`,Vh=i=>({padding:"0.5rem 0.2rem",backgroundColor:i,color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"0.85rem"}),Ph={fontSize:"0.65rem",opacity:.8,marginTop:"2px"};class nA{_generateId(){const e=Date.now(),n=Math.random().toString(36).substring(2,8);return`${e}_${n}`}_isContextSimilar(e,n){if(!e||!n)return!1;const s=d=>d.toLowerCase().replace(/[^\w\s]|_/g,"").replace(/\s+/g," ").trim(),o=s(e),u=s(n);return o===u||o.includes(u)||u.includes(o)}async importCards(e){try{let n;try{n=JSON.parse(e)}catch(u){throw new Error("Input must be a valid JSON string",u)}if(!Array.isArray(n))throw new Error("Input must be a JSON array");const s=[];let o=0;for(const u of n){if(!u.word)continue;const d=u.word.trim(),g=await Qt.vocab.where("word").equals(d).toArray();let _=!1;if(g.length>0){for(const b of g)if(this._isContextSimilar(u.context,b.context)){_=!0;break}}_?o++:s.push({...u,word:d,id:this._generateId(),status:"new",reviewCount:0,nextReview:Date.now(),easeFactor:2.5,interval:0,updatedAt:Date.now(),createdAt:Date.now()})}return s.length>0&&await Qt.vocab.bulkAdd(s),{addedCount:s.length,skippedCount:o}}catch(n){throw console.error("Import failed:",n),n}}async addCard(e){const n=e.word.trim();if((await Qt.vocab.where("word").equals(n).toArray()).some(d=>this._isContextSimilar(e.context,d.context)))throw new Error(`Duplicate card: "${n}" with similar context already exists.`);const u={...e,word:n,id:this._generateId(),status:"new",reviewCount:0,nextReview:Date.now(),easeFactor:2.5,interval:0,updatedAt:Date.now(),createdAt:Date.now()};return await Qt.vocab.add(u),u}async updateCard(e){const n={...e,updatedAt:Date.now()};return await Qt.vocab.put(n),n}async deleteCard(e){await Qt.vocab.delete(e)}async getAllCards(){return await Qt.vocab.toArray()}async clearAllCards(){await Qt.vocab.clear()}async getDueCards(e=20){const n=Date.now();return(await Qt.vocab.where("nextReview").belowOrEqual(n).and(o=>o.status!=="new").toArray()).sort((o,u)=>{const d=o.easeFactor||2.5,g=u.easeFactor||2.5;return d!==g?d-g:o.nextReview-u.nextReview}).slice(0,e)}async processReview(e,n){const s=Ob(e,n),o={...e,...s};await this.updateCard(o);try{await Qt.study_logs.add({cardId:o.id,grade:Number(n),reviewTime:Date.now(),easeFactor:o.easeFactor,interval:o.interval})}catch(u){console.warn("Failed to save study log",u)}return o}}const Fl=new nA;let rA={data:""},iA=i=>{if(typeof window=="object"){let e=(i?i.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(i||document.head).appendChild(e),e.firstChild}return i||rA},sA=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,aA=/\/\*[^]*?\*\/|  +/g,t0=/\n+/g,io=(i,e)=>{let n="",s="",o="";for(let u in i){let d=i[u];u[0]=="@"?u[1]=="i"?n=u+" "+d+";":s+=u[1]=="f"?io(d,u):u+"{"+io(d,u[1]=="k"?"":e)+"}":typeof d=="object"?s+=io(d,e?e.replace(/([^,])+/g,g=>u.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,_=>/&/.test(_)?_.replace(/&/g,g):g?g+" "+_:_)):u):d!=null&&(u=/^--/.test(u)?u:u.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=io.p?io.p(u,d):u+":"+d+";")}return n+(e&&o?e+"{"+o+"}":o)+s},aa={},Pb=i=>{if(typeof i=="object"){let e="";for(let n in i)e+=n+Pb(i[n]);return e}return i},oA=(i,e,n,s,o)=>{let u=Pb(i),d=aa[u]||(aa[u]=(_=>{let b=0,R=11;for(;b<_.length;)R=101*R+_.charCodeAt(b++)>>>0;return"go"+R})(u));if(!aa[d]){let _=u!==i?i:(b=>{let R,x,N=[{}];for(;R=sA.exec(b.replace(aA,""));)R[4]?N.shift():R[3]?(x=R[3].replace(t0," ").trim(),N.unshift(N[0][x]=N[0][x]||{})):N[0][R[1]]=R[2].replace(t0," ").trim();return N[0]})(i);aa[d]=io(o?{["@keyframes "+d]:_}:_,n?"":"."+d)}let g=n&&aa.g?aa.g:null;return n&&(aa.g=aa[d]),((_,b,R,x)=>{x?b.data=b.data.replace(x,_):b.data.indexOf(_)===-1&&(b.data=R?_+b.data:b.data+_)})(aa[d],e,s,g),d},lA=(i,e,n)=>i.reduce((s,o,u)=>{let d=e[u];if(d&&d.call){let g=d(n),_=g&&g.props&&g.props.className||/^go/.test(g)&&g;d=_?"."+_:g&&typeof g=="object"?g.props?"":io(g,""):g===!1?"":g}return s+o+(d??"")},"");function xf(i){let e=this||{},n=i.call?i(e.p):i;return oA(n.unshift?n.raw?lA(n,[].slice.call(arguments,1),e.p):n.reduce((s,o)=>Object.assign(s,o&&o.call?o(e.p):o),{}):n,iA(e.target),e.g,e.o,e.k)}let jb,tm,nm;xf.bind({g:1});let ha=xf.bind({k:1});function uA(i,e,n,s){io.p=e,jb=i,tm=n,nm=s}function To(i,e){let n=this||{};return function(){let s=arguments;function o(u,d){let g=Object.assign({},u),_=g.className||o.className;n.p=Object.assign({theme:tm&&tm()},g),n.o=/ *go\d+/.test(_),g.className=xf.apply(n,s)+(_?" "+_:"");let b=i;return i[0]&&(b=g.as||i,delete g.as),nm&&b[0]&&nm(g),jb(b,g)}return o}}var cA=i=>typeof i=="function",of=(i,e)=>cA(i)?i(e):i,hA=(()=>{let i=0;return()=>(++i).toString()})(),Lb=(()=>{let i;return()=>{if(i===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");i=!e||e.matches}return i}})(),fA=20,Om="default",Ub=(i,e)=>{let{toastLimit:n}=i.settings;switch(e.type){case 0:return{...i,toasts:[e.toast,...i.toasts].slice(0,n)};case 1:return{...i,toasts:i.toasts.map(d=>d.id===e.toast.id?{...d,...e.toast}:d)};case 2:let{toast:s}=e;return Ub(i,{type:i.toasts.find(d=>d.id===s.id)?1:0,toast:s});case 3:let{toastId:o}=e;return{...i,toasts:i.toasts.map(d=>d.id===o||o===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return e.toastId===void 0?{...i,toasts:[]}:{...i,toasts:i.toasts.filter(d=>d.id!==e.toastId)};case 5:return{...i,pausedAt:e.time};case 6:let u=e.time-(i.pausedAt||0);return{...i,pausedAt:void 0,toasts:i.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+u}))}}},Qh=[],zb={toasts:[],pausedAt:void 0,settings:{toastLimit:fA}},Ts={},Bb=(i,e=Om)=>{Ts[e]=Ub(Ts[e]||zb,i),Qh.forEach(([n,s])=>{n===e&&s(Ts[e])})},qb=i=>Object.keys(Ts).forEach(e=>Bb(i,e)),dA=i=>Object.keys(Ts).find(e=>Ts[e].toasts.some(n=>n.id===i)),If=(i=Om)=>e=>{Bb(e,i)},pA={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},mA=(i={},e=Om)=>{let[n,s]=_e.useState(Ts[e]||zb),o=_e.useRef(Ts[e]);_e.useEffect(()=>(o.current!==Ts[e]&&s(Ts[e]),Qh.push([e,s]),()=>{let d=Qh.findIndex(([g])=>g===e);d>-1&&Qh.splice(d,1)}),[e]);let u=n.toasts.map(d=>{var g,_,b;return{...i,...i[d.type],...d,removeDelay:d.removeDelay||((g=i[d.type])==null?void 0:g.removeDelay)||i?.removeDelay,duration:d.duration||((_=i[d.type])==null?void 0:_.duration)||i?.duration||pA[d.type],style:{...i.style,...(b=i[d.type])==null?void 0:b.style,...d.style}}});return{...n,toasts:u}},gA=(i,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:i,pauseDuration:0,...n,id:n?.id||hA()}),Ec=i=>(e,n)=>{let s=gA(e,i,n);return If(s.toasterId||dA(s.id))({type:2,toast:s}),s.id},zn=(i,e)=>Ec("blank")(i,e);zn.error=Ec("error");zn.success=Ec("success");zn.loading=Ec("loading");zn.custom=Ec("custom");zn.dismiss=(i,e)=>{let n={type:3,toastId:i};e?If(e)(n):qb(n)};zn.dismissAll=i=>zn.dismiss(void 0,i);zn.remove=(i,e)=>{let n={type:4,toastId:i};e?If(e)(n):qb(n)};zn.removeAll=i=>zn.remove(void 0,i);zn.promise=(i,e,n)=>{let s=zn.loading(e.loading,{...n,...n?.loading});return typeof i=="function"&&(i=i()),i.then(o=>{let u=e.success?of(e.success,o):void 0;return u?zn.success(u,{id:s,...n,...n?.success}):zn.dismiss(s),o}).catch(o=>{let u=e.error?of(e.error,o):void 0;u?zn.error(u,{id:s,...n,...n?.error}):zn.dismiss(s)}),i};var yA=1e3,vA=(i,e="default")=>{let{toasts:n,pausedAt:s}=mA(i,e),o=_e.useRef(new Map).current,u=_e.useCallback((x,N=yA)=>{if(o.has(x))return;let Q=setTimeout(()=>{o.delete(x),d({type:4,toastId:x})},N);o.set(x,Q)},[]);_e.useEffect(()=>{if(s)return;let x=Date.now(),N=n.map(Q=>{if(Q.duration===1/0)return;let te=(Q.duration||0)+Q.pauseDuration-(x-Q.createdAt);if(te<0){Q.visible&&zn.dismiss(Q.id);return}return setTimeout(()=>zn.dismiss(Q.id,e),te)});return()=>{N.forEach(Q=>Q&&clearTimeout(Q))}},[n,s,e]);let d=_e.useCallback(If(e),[e]),g=_e.useCallback(()=>{d({type:5,time:Date.now()})},[d]),_=_e.useCallback((x,N)=>{d({type:1,toast:{id:x,height:N}})},[d]),b=_e.useCallback(()=>{s&&d({type:6,time:Date.now()})},[s,d]),R=_e.useCallback((x,N)=>{let{reverseOrder:Q=!1,gutter:te=8,defaultPosition:de}=N||{},be=n.filter(Ve=>(Ve.position||de)===(x.position||de)&&Ve.height),je=be.findIndex(Ve=>Ve.id===x.id),Fe=be.filter((Ve,rt)=>rt<je&&Ve.visible).length;return be.filter(Ve=>Ve.visible).slice(...Q?[Fe+1]:[0,Fe]).reduce((Ve,rt)=>Ve+(rt.height||0)+te,0)},[n]);return _e.useEffect(()=>{n.forEach(x=>{if(x.dismissed)u(x.id,x.removeDelay);else{let N=o.get(x.id);N&&(clearTimeout(N),o.delete(x.id))}})},[n,u]),{toasts:n,handlers:{updateHeight:_,startPause:g,endPause:b,calculateOffset:R}}},_A=ha`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,bA=ha`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,EA=ha`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,TA=To("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_A} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${bA} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${i=>i.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${EA} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,wA=ha`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,SA=To("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${i=>i.secondary||"#e0e0e0"};
  border-right-color: ${i=>i.primary||"#616161"};
  animation: ${wA} 1s linear infinite;
`,AA=ha`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,CA=ha`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,RA=To("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${AA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${CA} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${i=>i.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,xA=To("div")`
  position: absolute;
`,IA=To("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,OA=ha`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,DA=To("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${OA} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,NA=({toast:i})=>{let{icon:e,type:n,iconTheme:s}=i;return e!==void 0?typeof e=="string"?_e.createElement(DA,null,e):e:n==="blank"?null:_e.createElement(IA,null,_e.createElement(SA,{...s}),n!=="loading"&&_e.createElement(xA,null,n==="error"?_e.createElement(TA,{...s}):_e.createElement(RA,{...s})))},kA=i=>`
0% {transform: translate3d(0,${i*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,MA=i=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${i*-150}%,-1px) scale(.6); opacity:0;}
`,VA="0%{opacity:0;} 100%{opacity:1;}",PA="0%{opacity:1;} 100%{opacity:0;}",jA=To("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,LA=To("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,UA=(i,e)=>{let n=i.includes("top")?1:-1,[s,o]=Lb()?[VA,PA]:[kA(n),MA(n)];return{animation:e?`${ha(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ha(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},zA=_e.memo(({toast:i,position:e,style:n,children:s})=>{let o=i.height?UA(i.position||e||"top-center",i.visible):{opacity:0},u=_e.createElement(NA,{toast:i}),d=_e.createElement(LA,{...i.ariaProps},of(i.message,i));return _e.createElement(jA,{className:i.className,style:{...o,...n,...i.style}},typeof s=="function"?s({icon:u,message:d}):_e.createElement(_e.Fragment,null,u,d))});uA(_e.createElement);var BA=({id:i,className:e,style:n,onHeightUpdate:s,children:o})=>{let u=_e.useCallback(d=>{if(d){let g=()=>{let _=d.getBoundingClientRect().height;s(i,_)};g(),new MutationObserver(g).observe(d,{subtree:!0,childList:!0,characterData:!0})}},[i,s]);return _e.createElement("div",{ref:u,className:e,style:n},o)},qA=(i,e)=>{let n=i.includes("top"),s=n?{top:0}:{bottom:0},o=i.includes("center")?{justifyContent:"center"}:i.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Lb()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...s,...o}},HA=xf`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,jh=16,FA=({reverseOrder:i,position:e="top-center",toastOptions:n,gutter:s,children:o,toasterId:u,containerStyle:d,containerClassName:g})=>{let{toasts:_,handlers:b}=vA(n,u);return _e.createElement("div",{"data-rht-toaster":u||"",style:{position:"fixed",zIndex:9999,top:jh,left:jh,right:jh,bottom:jh,pointerEvents:"none",...d},className:g,onMouseEnter:b.startPause,onMouseLeave:b.endPause},_.map(R=>{let x=R.position||e,N=b.calculateOffset(R,{reverseOrder:i,gutter:s,defaultPosition:e}),Q=qA(x,N);return _e.createElement(BA,{id:R.id,key:R.id,onHeightUpdate:b.updateHeight,className:R.visible?HA:"",style:Q},R.type==="custom"?of(R.message,R):o?o(R):_e.createElement(zA,{toast:R,position:x}))}))},dt=zn;function KA({isOpen:i,onClose:e,onSuccess:n}){const[s,o]=_e.useState(""),[u,d]=_e.useState(!1),[g,_]=_e.useState("auto"),[b,R]=_e.useState(null);if(!i)return null;const x=async()=>{if(!s.trim())return;if(!Es.hasKey()){dt.error("Please set your Gemini API Key in Settings first.");return}d(!0),R(null);const Q=dt.loading("AI is analyzing transcript...");try{const te=await Es.analyzeTranscript(s,g);if(!Array.isArray(te)||te.length===0)throw new Error("AI found no vocabulary or returned invalid format.");dt.loading(`Found ${te.length} words. Saving...`,{id:Q});const de=JSON.stringify(te),be=await Fl.importCards(de);dt.success(`Success!
Added: ${be.addedCount}
Skipped (Duplicate): ${be.skippedCount}`,{id:Q,duration:4e3}),o(""),n(),e()}catch(te){console.error(te);const de=te.message||"Unknown error";R(de),dt.error(`Failed: ${de}`,{id:Q})}finally{d(!1),setTimeout(()=>dt.dismiss(Q),3e3)}},N=[{label:"AUTO",value:"auto"},{label:"5",value:5},{label:"10",value:10},{label:"20",value:20}];return O.jsx("div",{style:ji.overlay,children:O.jsxs("div",{style:ji.modal,children:[O.jsx("h2",{style:{marginTop:0,color:"#fff",marginBottom:"1.5rem"},children:"Import from Podcast"}),O.jsxs("div",{style:ji.settingRow,children:[O.jsx("span",{style:ji.settingLabel,children:"Max Words:"}),O.jsx("div",{style:ji.optionGroup,children:N.map(Q=>O.jsx("button",{onClick:()=>_(Q.value),style:{...ji.optionBtn,...g===Q.value?ji.optionBtnActive:{}},children:Q.label},Q.value))})]}),O.jsx("p",{style:{color:"#aaa",fontSize:"0.9rem",marginBottom:"0.5rem"},children:"Paste the full podcast transcript text below. Gemini will extract key vocabulary for you."}),O.jsx("textarea",{value:s,onChange:Q=>o(Q.target.value),placeholder:"Paste transcript text here...",style:ji.textarea,disabled:u}),b&&O.jsxs("div",{style:ji.error,children:[" ",b]}),O.jsxs("div",{style:ji.actions,children:[O.jsx("button",{onClick:e,disabled:u,style:{...ji.btn,backgroundColor:"#555"},children:"Cancel"}),O.jsx("button",{onClick:x,disabled:u||!s.trim(),style:{...ji.btn,backgroundColor:u?"#777":"#6366f1",opacity:!s.trim()||u?.6:1},children:u?"Analyzing...":"Analyze & Import"})]})]})})}const ji={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,backdropFilter:"blur(3px)"},modal:{backgroundColor:"#1e2024",padding:"2rem",borderRadius:"12px",width:"90%",maxWidth:"600px",boxShadow:"0 10px 25px rgba(0,0,0,0.5)",border:"1px solid #333"},settingRow:{display:"flex",alignItems:"center",marginBottom:"1.5rem",gap:"1rem",flexWrap:"wrap"},settingLabel:{color:"#ccc",fontSize:"0.9rem",fontWeight:"500"},optionGroup:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},optionBtn:{padding:"0.4rem 1rem",backgroundColor:"#2c2e33",border:"1px solid #444",borderRadius:"6px",color:"#aaa",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease"},optionBtnActive:{backgroundColor:"#6366f1",color:"#fff",borderColor:"#6366f1",boxShadow:"0 0 8px rgba(99, 102, 241, 0.4)"},textarea:{width:"100%",height:"250px",backgroundColor:"#131416",color:"#e0e0e0",border:"1px solid #444",borderRadius:"6px",padding:"0.8rem",fontFamily:"inherit",fontSize:"0.95rem",resize:"vertical",lineHeight:"1.5"},error:{color:"#ff6b6b",marginTop:"1rem",fontSize:"0.9rem",padding:"0.5rem",backgroundColor:"rgba(255, 107, 107, 0.1)",borderRadius:"4px"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"1.5rem"},btn:{padding:"0.6rem 1.5rem",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"1rem"}};function GA({isOpen:i,onClose:e}){const[n,s]=_e.useState(""),[o,u]=_e.useState(!1),[d,g]=_e.useState(!1);_e.useEffect(()=>{i&&(s(Es.getApiKey()||""),g(Es.isPersistent()))},[i]);const[_,b]=_e.useState(()=>JSON.parse(localStorage.getItem("gp_settings_autoplay_tts"))||!1),[R,x]=_e.useState(()=>localStorage.getItem("gp_settings_learning_mode")||"sniper"),N=()=>{localStorage.setItem("gp_settings_autoplay_tts",JSON.stringify(_)),n.trim()?(Es.setApiKey(n.trim(),d),d?dt.success("API Key  ()"):dt.success("API Key  ( Session)")):(Es.removeApiKey(),dt("API Key ")),localStorage.setItem("gp_settings_learning_mode",R),window.dispatchEvent(new Event("storage")),dt.success("Settings saved!"),e()},Q=()=>{s(""),g(!1),Es.removeApiKey(),dt("API Key ")};return i?O.jsx("div",{style:dr.overlay,children:O.jsxs("div",{style:dr.modal,children:[O.jsx("h2",{style:{marginTop:0,color:"#fff"},children:"Settings"}),O.jsx("hr",{style:{borderColor:"#444",margin:"1.5rem 0"}}),O.jsxs("div",{style:dr.section,children:[O.jsx("h3",{style:{...dr.label,color:"#fff",fontSize:"1rem"},children:"Preferences"}),O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[O.jsxs("label",{style:{color:"#ccc",fontSize:"0.9rem"},children:["Auto-play TTS on Flip",O.jsx("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"4px"},children:"Automatically read the example sentence when flipping to the back."})]}),O.jsx("div",{onClick:()=>b(!_),style:{width:"40px",height:"20px",backgroundColor:_?"#4caf50":"#444",borderRadius:"10px",position:"relative",cursor:"pointer",transition:"background-color 0.2s"},children:O.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:"#fff",borderRadius:"50%",position:"absolute",top:"2px",left:_?"22px":"2px",transition:"left 0.2s"}})})]})]}),O.jsxs("div",{style:dr.field,children:[O.jsx("h3",{style:{...dr.label,color:"#fff",fontSize:"1rem",marginBottom:"1rem"},children:"Learning Mode"}),O.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[O.jsxs("div",{onClick:()=>x("sniper"),style:{flex:1,padding:"1rem",borderRadius:"8px",border:R==="sniper"?"2px solid #2196f3":"1px solid #444",backgroundColor:R==="sniper"?"rgba(33, 150, 243, 0.1)":"transparent",cursor:"pointer",transition:"all 0.2s"},children:[O.jsx("strong",{style:{color:R==="sniper"?"#2196f3":"#aaa",display:"block",marginBottom:"0.5rem"},children:" Sniper Mode"}),O.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"#888"},children:"Context-first. Best for active recall and deep learning. (Auto-adapts based on progress)"})]}),O.jsxs("div",{onClick:()=>x("reading"),style:{flex:1,padding:"1rem",borderRadius:"8px",border:R==="reading"?"2px solid #4caf50":"1px solid #444",backgroundColor:R==="reading"?"rgba(76, 175, 80, 0.1)":"transparent",cursor:"pointer",transition:"all 0.2s"},children:[O.jsx("strong",{style:{color:R==="reading"?"#4caf50":"#aaa",display:"block",marginBottom:"0.5rem"},children:" Reading Mode"}),O.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"#888"},children:"Word-first. Best for quick review or low-energy sessions."})]})]})]}),O.jsx("hr",{style:{borderColor:"#444",margin:"1.5rem 0"}}),O.jsxs("div",{style:{marginBottom:"2rem"},children:[O.jsx("label",{style:dr.label,children:"Gemini API Key (BYOK)"}),O.jsxs("p",{style:dr.hint,children:[" Key  Google Gemini API",O.jsx("br",{}),""]}),O.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[O.jsx("input",{type:o?"text":"password",value:n,onChange:te=>s(te.target.value),placeholder:"AIzaSy...",style:dr.input}),O.jsx("button",{onClick:()=>u(!o),style:dr.iconBtn,title:"Toggle Visibility",children:o?"":""})]}),O.jsxs("div",{style:dr.checkboxContainer,children:[O.jsx("input",{type:"checkbox",id:"rememberKey",checked:d,onChange:te=>g(te.target.checked),style:{cursor:"pointer"}}),O.jsx("label",{htmlFor:"rememberKey",style:{...dr.label,marginBottom:0,cursor:"pointer",fontWeight:"normal",fontSize:"0.9rem"},children:" ()"})]}),d&&O.jsx("p",{style:{color:"#ff9800",fontSize:"0.8rem",marginTop:"0.2rem",marginLeft:"1.5rem"},children:"  Key  LocalStorage"})]}),O.jsx("hr",{style:{borderColor:"#444",margin:"1.5rem 0"}}),O.jsxs("div",{style:dr.actions,children:[O.jsx("button",{onClick:Q,style:{...dr.btn,backgroundColor:"#d32f2f",marginRight:"auto"},children:"Clear Key"}),O.jsx("button",{onClick:e,style:{...dr.btn,backgroundColor:"#555"},children:"Close"}),O.jsx("button",{onClick:N,style:{...dr.btn,backgroundColor:"#4caf50"},children:"Save"})]})]})}):null}const dr={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},modal:{backgroundColor:"#2c2e33",padding:"2rem",borderRadius:"8px",width:"90%",maxWidth:"400px",boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},label:{display:"block",color:"#e0e0e0",fontWeight:"bold",marginBottom:"0.5rem"},hint:{color:"#aaa",fontSize:"0.85rem",marginBottom:"0.5rem",lineHeight:"1.4"},input:{flex:1,padding:"0.6rem",borderRadius:"4px",border:"1px solid #444",backgroundColor:"#1a1b1e",color:"#fff",fontFamily:"monospace"},iconBtn:{padding:"0 0.8rem",backgroundColor:"#444",border:"none",borderRadius:"4px",cursor:"pointer",color:"#fff"},checkboxContainer:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.5rem"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem"},btn:{padding:"0.5rem 1.2rem",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"}};function YA({isOpen:i,onClose:e,onSuccess:n}){const[s,o]=_e.useState("context"),[u,d]=_e.useState(""),[g,_]=_e.useState(""),[b,R]=_e.useState(""),[x,N]=_e.useState(""),[Q,te]=_e.useState(""),[de,be]=_e.useState([]),[je,Fe]=_e.useState(!1),[Ve,rt]=_e.useState(""),it=_e.useRef(null);if(!i)return null;const $e=j=>{const B=j.target.selectionStart,M=j.target.selectionEnd,ut=j.target.value.substring(B,M).trim();ut&&(d(ut),N(j.target.value))},P=async()=>{if(!u.trim()){dt.error("Please enter or select a word first");return}if(!Es.hasKey()){dt.error("Please set your API Key in Settings first");return}Fe(!0);const j=dt.loading(`Asking Gemini about "${u}"...`);try{const B=await Es.generateCardDetails(u);_(B.ipa||""),R(B.definition||""),N(B.context||x),te(B.translation||""),be(B.collocations||[]),dt.success("Auto-filled!",{id:j}),s==="context"&&o("manual")}catch(B){console.error(B),dt.error(B.message,{id:j})}finally{Fe(!1),setTimeout(()=>dt.dismiss(j),3e3)}},k=async()=>{if(!u||!b){dt.error("Word and Definition are required");return}try{await Fl.addCard({word:u,ipa:g,definition:b,context:x,translation:Q,collocations:de,sourceType:s==="context"?"raw_sentence":"word_only"}),dt.success(`Added "${u}"`),d(""),_(""),R(""),N(""),te(""),be([]),rt(""),n(),e()}catch(j){console.error(j),dt.error(j.message)}},L=j=>{be(j.target.value.split(","))},Y=je||!u||!b;return O.jsx("div",{style:gt.overlay,children:O.jsxs("div",{style:gt.modal,children:[O.jsxs("div",{style:gt.header,children:[O.jsx("h2",{style:{margin:0,color:"#fff"},children:"Add New Card"}),O.jsxs("div",{style:gt.tabContainer,children:[O.jsxs("button",{style:s==="context"?gt.activeTab:gt.tab,onClick:()=>o("context"),children:[O.jsx(hS,{size:16,style:{marginRight:6}})," Context First"]}),O.jsxs("button",{style:s==="manual"?gt.activeTab:gt.tab,onClick:()=>o("manual"),children:[O.jsx(oS,{size:16,style:{marginRight:6}})," Manual / Edit"]})]})]}),s==="context"&&O.jsxs("div",{style:gt.tabContent,children:[O.jsx("div",{style:gt.infoBox,children:O.jsxs("p",{style:{margin:0},children:["Paste the full sentence, then ",O.jsx("strong",{children:"highlight"})," the word you want to learn."]})}),O.jsxs("div",{style:gt.field,children:[O.jsx("label",{style:gt.label,children:"Source Sentence / Podcast Transcript"}),O.jsx("textarea",{ref:it,style:{...gt.input,height:"120px",resize:"vertical"},value:Ve,onChange:j=>rt(j.target.value),onSelect:$e,onTouchEnd:$e,onKeyUp:$e,placeholder:"e.g., The government is reluctant to change the law...",autoFocus:!0})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"1rem",gap:"1rem"},children:[O.jsxs("div",{style:{flex:1,minWidth:0},children:[O.jsx("label",{style:gt.label,children:"Target Word"}),O.jsx("div",{style:gt.readOnlyField,children:u||O.jsx("span",{style:{color:"#555",fontStyle:"italic"},children:"Highlight text..."})})]}),O.jsx("button",{onClick:P,disabled:je||!u,style:{...gt.magicBtn,opacity:!u||je?.5:1,cursor:!u||je?"not-allowed":"pointer"},children:je?"Processing...":" Analyze"})]})]}),s==="manual"&&O.jsxs("div",{style:gt.tabContent,children:[O.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:O.jsx("button",{onClick:P,disabled:je,style:gt.magicBtn,title:"Regenerate",children:je?"...":" Auto-fill by Word"})}),O.jsxs("div",{style:gt.field,children:[O.jsx("label",{style:gt.label,children:"Word"}),O.jsx("input",{style:gt.input,value:u,onChange:j=>d(j.target.value),placeholder:"e.g. Serendipity"})]}),O.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[O.jsxs("div",{style:{...gt.field,flex:1},children:[O.jsx("label",{style:gt.label,children:"IPA"}),O.jsx("input",{style:gt.input,value:g,onChange:j=>_(j.target.value)})]}),O.jsxs("div",{style:{...gt.field,flex:1},children:[O.jsx("label",{style:gt.label,children:"Translation"}),O.jsx("input",{style:gt.input,value:Q,onChange:j=>te(j.target.value)})]})]}),O.jsxs("div",{style:gt.field,children:[O.jsx("label",{style:gt.label,children:"Definition"}),O.jsx("textarea",{style:{...gt.input,height:"60px"},value:b,onChange:j=>R(j.target.value)})]}),O.jsxs("div",{style:gt.field,children:[O.jsx("label",{style:gt.label,children:"Context / Example"}),O.jsx("textarea",{style:{...gt.input,height:"60px"},value:x,onChange:j=>N(j.target.value)})]}),O.jsxs("div",{style:gt.field,children:[O.jsx("label",{style:gt.label,children:"Collocations"}),O.jsx("input",{style:gt.input,value:de.join(", "),onChange:L,placeholder:"e.g. reluctant to, deeply reluctant"})]})]}),O.jsxs("div",{style:gt.actions,children:[O.jsx("button",{onClick:e,style:{...gt.btn,backgroundColor:"#555"},children:"Cancel"}),O.jsx("button",{onClick:k,disabled:Y,style:{...gt.btn,backgroundColor:Y?"#444":"#2196f3",color:Y?"#888":"white",cursor:Y?"not-allowed":"pointer",opacity:Y?.7:1},children:"Save Card"})]})]})})}const gt={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},modal:{backgroundColor:"#2c2e33",padding:"1.5rem",borderRadius:"12px",width:"95%",maxWidth:"550px",boxShadow:"0 10px 25px rgba(0,0,0,0.5)",maxHeight:"90vh",overflowY:"auto"},header:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"1.5rem",borderBottom:"1px solid #444",paddingBottom:"1rem"},tabContainer:{display:"flex",gap:"0.5rem",backgroundColor:"#1a1b1e",padding:"4px",borderRadius:"8px",width:"100%"},tab:{flex:1,padding:"8px 12px",backgroundColor:"transparent",border:"none",color:"#888",cursor:"pointer",borderRadius:"6px",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center"},activeTab:{flex:1,padding:"8px 12px",backgroundColor:"#2196f3",border:"none",color:"white",cursor:"pointer",borderRadius:"6px",fontSize:"0.9rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center"},infoBox:{backgroundColor:"rgba(33, 150, 243, 0.1)",border:"1px solid #2196f3",borderRadius:"6px",padding:"0.8rem",color:"#90caf9",fontSize:"0.9rem",marginBottom:"1rem"},field:{marginBottom:"1rem"},label:{display:"block",color:"#aaa",fontSize:"0.85rem",marginBottom:"0.3rem"},input:{width:"100%",padding:"0.8rem",borderRadius:"4px",border:"1px solid #444",backgroundColor:"#1a1b1e",color:"#fff",fontSize:"1rem",boxSizing:"border-box",fontFamily:"inherit"},readOnlyField:{padding:"0.8rem",borderRadius:"4px",backgroundColor:"#25262b",border:"1px dashed #444",color:"#e91e63",fontWeight:"bold",minHeight:"45px",display:"flex",alignItems:"center",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},magicBtn:{padding:"0.8rem 1.2rem",backgroundColor:"transparent",border:"1px solid #e91e63",borderRadius:"30px",color:"#e91e63",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s",fontWeight:"bold",whiteSpace:"nowrap"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"2rem"},btn:{padding:"0.8rem 1.5rem",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"1rem"}};function QA({isOpen:i,onClose:e}){const[n,s]=_e.useState([]),[o,u]=_e.useState(null),[d,g]=_e.useState(!1),[_,b]=_e.useState(0),R=_e.useRef(null);_e.useEffect(()=>{i&&(x(),g(!1),b(0),u(null))},[i]),_e.useEffect(()=>(d&&_>0?R.current=setTimeout(()=>{b(te=>te-1)},1e3):d&&_===0&&g(!1),()=>clearTimeout(R.current)),[d,_]);const x=async()=>{try{const te=await Fl.getAllCards();te.sort((de,be)=>be.updatedAt-de.updatedAt),s(te)}catch(te){console.error(te),dt.error("Failed to load cards")}},N=async te=>{if(o!==te){u(te),setTimeout(()=>{u(de=>de===te?null:de)},3e3);return}try{await Fl.deleteCard(te),dt.success("Card deleted"),u(null),x()}catch(de){console.error(de),dt.error("Delete failed")}},Q=async()=>{if(!d){g(!0),b(3);return}try{await Fl.clearAllCards(),dt.success("All data cleared"),s([]),g(!1)}catch(te){console.error(te),dt.error("Clear failed")}};return i?O.jsx("div",{style:Li.overlay,children:O.jsxs("div",{style:Li.modal,children:[O.jsxs("div",{style:Li.header,children:[O.jsxs("h2",{style:{margin:0,color:"#fff"},children:["Manage Cards (",n.length,")"]}),O.jsx("button",{onClick:e,style:Li.closeBtn,children:""})]}),O.jsx("div",{style:Li.listContainer,children:n.length===0?O.jsx("p",{style:{color:"#888",textAlign:"center"},children:"No cards found."}):n.map(te=>O.jsxs("div",{style:Li.cardRow,children:[O.jsxs("div",{style:Li.cardInfo,children:[O.jsx("div",{style:Li.word,children:te.word}),O.jsxs("div",{style:Li.def,children:[te.definition?.substring(0,50),"..."]})]}),O.jsx("button",{onClick:()=>N(te.id),style:{...Li.deleteBtn,backgroundColor:o===te.id?"#d32f2f":"#333",color:o===te.id?"#fff":"#888",border:o===te.id?"1px solid #ff5252":"1px solid #444",width:o===te.id?"100px":"40px"},children:o===te.id?"Sure?":""})]},te.id))}),O.jsx("div",{style:Li.footer,children:O.jsx("button",{onClick:Q,style:{...Li.dangerBtn,backgroundColor:d?"#d32f2f":"#3a1c1c",color:d?"#ffeb3b":"#ff6b6b",border:d?"1px solid #ffeb3b":"1px solid #ff6b6b"},children:d?`Confirm Clear All? (${_})`:"Clear All Local Data"})})]})}):null}const Li={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1050},modal:{backgroundColor:"#1e2024",width:"90%",maxWidth:"500px",maxHeight:"80vh",borderRadius:"12px",display:"flex",flexDirection:"column",boxShadow:"0 10px 25px rgba(0,0,0,0.5)",border:"1px solid #333"},header:{padding:"1.5rem",borderBottom:"1px solid #333",display:"flex",justifyContent:"space-between",alignItems:"center"},closeBtn:{background:"none",border:"none",color:"#888",fontSize:"1.2rem",cursor:"pointer"},listContainer:{flex:1,overflowY:"auto",padding:"1rem"},cardRow:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.8rem",borderBottom:"1px solid #2c2e33"},cardInfo:{flex:1,marginRight:"1rem",overflow:"hidden"},word:{color:"#e0e0e0",fontWeight:"bold",marginBottom:"0.2rem"},def:{color:"#888",fontSize:"0.85rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},deleteBtn:{padding:"0.4rem",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.9rem",whiteSpace:"nowrap",display:"flex",justifyContent:"center",alignItems:"center"},footer:{padding:"1.5rem",borderTop:"1px solid #333"},dangerBtn:{width:"100%",padding:"0.8rem",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",transition:"all 0.2s ease"}};function $A({isOpen:i,onClose:e}){const[n,s]=_e.useState(""),[o,u]=_e.useState(!1),[d,g]=_e.useState([]),[_,b]=_e.useState(new Set);_e.useEffect(()=>{i&&R()},[i]),_e.useEffect(()=>{d.length>0&&x(Array.from(_))},[_,d]);const R=async()=>{u(!0);try{const te=await Fl.getDueCards(5);te.length===0?(dt.error("No review data found."),g([])):(g(te),b(new Set(te.map(de=>de.word))))}catch(te){console.error("Error fetching data:",te),dt.error("Failed to load review data")}finally{u(!1)}},x=te=>{if(te.length===0){s("Please select at least one word to generate the prompt.");return}const be=`Create an engaging podcast script on a broad and interesting topic aligned with your persona's expertise. 

Your task is to naturally weave the following target vocabulary into this larger narrative: [${te.join(", ")}]. 

IMPORTANT: 
1. The content must NOT be limited only to these vocabularies. 
2. Build a rich, immersive context with a coherent storyline or argument including target vocabularies. 
3. Use the target words only as natural touchpoints within a flowing, full-length conversation. 
4. Keep the tone casual, authentic, conversational and educational. 
`;s(be)},N=te=>{const de=new Set(_);de.has(te)?de.delete(te):de.add(te),b(de)},Q=()=>{navigator.clipboard.writeText(n),dt.success("Prompt copied to clipboard!")};return i?O.jsx("div",{style:rn.overlay,children:O.jsxs("div",{style:rn.modal,children:[O.jsxs("div",{style:rn.header,children:[O.jsx("h2",{style:rn.title,children:"Review Session Ready"}),O.jsx("button",{onClick:e,style:rn.closeBtn,children:""})]}),o?O.jsxs("div",{style:rn.loadingState,children:[O.jsx("div",{style:rn.spinner}),O.jsx("p",{children:"Analyzing your progress..."})]}):O.jsxs("div",{style:rn.content,children:[O.jsx("div",{style:rn.statsRow,children:O.jsxs("div",{style:{...rn.statCard,backgroundColor:"rgba(52, 152, 219, 0.15)",borderColor:"#3498db"},children:[O.jsx("div",{style:rn.statLabel,children:"Target Vocabulary Count"}),O.jsx("div",{style:{...rn.statValue,color:"#3498db"},children:_.size})]})}),O.jsxs("div",{style:rn.section,children:[O.jsxs("div",{style:rn.sectionHeader,children:[O.jsx("span",{style:rn.sectionTitle,children:"Target Words"}),O.jsx("span",{style:rn.sectionSubtitle,children:"Click to include/exclude"})]}),O.jsx("div",{style:rn.chipsContainer,children:d.map(te=>{const de=_.has(te.word);return O.jsx("button",{onClick:()=>N(te.word),style:{...rn.chip,...de?rn.chipSelected:rn.chipUnselected},children:te.word},te.word)})})]}),O.jsxs("div",{style:rn.section,children:[O.jsx("div",{style:rn.sectionTitle,children:"Generated Prompt"}),O.jsx("textarea",{value:n,readOnly:!0,style:rn.textarea})]}),O.jsx("button",{onClick:Q,disabled:_.size===0,style:{...rn.copyBtn,opacity:_.size===0?.5:1,cursor:_.size===0?"not-allowed":"pointer"},children:"Copy Prompt to Clipboard"})]})]})}):null}const rn={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,backdropFilter:"blur(3px)"},modal:{backgroundColor:"#1e1e1e",padding:"2rem",borderRadius:"16px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 50px rgba(0,0,0,0.5)",color:"#e0e0e0",fontFamily:"'Inter', system-ui, sans-serif",border:"1px solid #333"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.5rem",fontWeight:"700",color:"#fff",letterSpacing:"-0.02em"},closeBtn:{background:"none",border:"none",color:"#666",fontSize:"2rem",cursor:"pointer",lineHeight:1,padding:"0 0.5rem",transition:"color 0.2s"},loadingState:{padding:"3rem",textAlign:"center",color:"#888"},content:{display:"flex",flexDirection:"column",gap:"1.5rem"},statsRow:{display:"flex",width:"100%"},statCard:{flex:1,padding:"1rem",borderRadius:"12px",border:"1px solid",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},statLabel:{fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"#aaa",marginBottom:"0.3rem",fontWeight:"600"},statValue:{fontSize:"1.8rem",fontWeight:"800"},section:{display:"flex",flexDirection:"column",gap:"0.8rem"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},sectionTitle:{fontSize:"0.95rem",fontWeight:"600",color:"#ccc"},sectionSubtitle:{fontSize:"0.75rem",color:"#666"},chipsContainer:{display:"flex",flexWrap:"wrap",gap:"0.6rem",padding:"1rem",backgroundColor:"#25262b",borderRadius:"12px",border:"1px solid #333",maxHeight:"150px",overflowY:"auto"},chip:{padding:"0.4rem 0.9rem",borderRadius:"50px",fontSize:"0.85rem",fontWeight:"500",cursor:"pointer",border:"1px solid",transition:"all 0.2s ease",outline:"none"},chipSelected:{backgroundColor:"rgba(52, 152, 219, 0.2)",borderColor:"#3498db",color:"#3498db",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},chipUnselected:{backgroundColor:"transparent",borderColor:"#444",color:"#666",textDecoration:"line-through",opacity:.6},textarea:{width:"100%",height:"120px",backgroundColor:"#25262b",border:"1px solid #333",borderRadius:"12px",padding:"1rem",color:"#aaa",fontSize:"0.85rem",lineHeight:"1.6",resize:"none",boxSizing:"border-box"},copyBtn:{backgroundColor:"#3498db",color:"white",border:"none",padding:"1rem",borderRadius:"12px",fontSize:"1rem",fontWeight:"600",width:"100%",transition:"transform 0.1s, background 0.2s",boxShadow:"0 4px 15px rgba(52, 152, 219, 0.3)",cursor:"pointer"}};class XA{async getStats(){const[e,n,s]=await Promise.all([this.getMasteryDistribution(),this.getWeeklyActivity(),this.getRetentionStats()]);return{distribution:e,activity:n,retention:s}}async getMasteryDistribution(){const e=await Qt.vocab.count(),n=await Qt.vocab.where("status").equals("new").count(),s=await Qt.vocab.where("status").equals("learning").count(),o=await Qt.vocab.where("status").equals("review").count();return{total:e,breakdown:[{label:"New",count:n,color:"#94a3b8"},{label:"Learning",count:s,color:"#facc15"},{label:"Review",count:o,color:"#4ade80"}]}}async getWeeklyActivity(){const e=new Date,n=[],s=new Date;s.setDate(e.getDate()-6),s.setHours(0,0,0,0);const o=await Qt.study_logs.where("reviewTime").aboveOrEqual(s.getTime()).toArray();for(let u=0;u<7;u++){const d=new Date(s);d.setDate(d.getDate()+u);const g=d.setHours(0,0,0,0),_=d.setHours(23,59,59,999),b=o.filter(R=>R.reviewTime>=g&&R.reviewTime<=_).length;n.push({date:d.toLocaleDateString("en-US",{month:"short",day:"numeric"}),weekday:d.toLocaleDateString("en-US",{weekday:"short"}),count:b,height:0})}return n}async getRetentionStats(){const e=await Qt.study_logs.orderBy("reviewTime").reverse().limit(50).toArray();if(e.length===0)return{accuracy:0,count:0};const n=e.filter(o=>o.grade>=3).length;return{accuracy:Math.round(n/e.length*100),sampleSize:e.length}}}const WA=new XA;function JA({onBack:i}){const[e,n]=_e.useState(null),[s,o]=_e.useState(!0);_e.useEffect(()=>{u()},[]);const u=async()=>{try{const g=await WA.getStats();n(g)}catch(g){console.error("Failed to load dashboard stats:",g)}finally{o(!1)}};if(s)return O.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#888"},children:"Loading Stats..."});if(!e)return null;const d=Math.max(...e.activity.map(g=>g.count),1);return O.jsxs("div",{style:rr.container,children:[O.jsxs("div",{style:rr.header,children:[O.jsx("button",{onClick:i,style:rr.backBtn,children:O.jsx(Xw,{size:24,color:"#e0e0e0"})}),O.jsx("h1",{style:rr.title,children:"Learning Dashboard"})]}),O.jsxs("div",{style:rr.grid,children:[O.jsx(Bp,{icon:O.jsx(Jw,{size:20,color:"#4dabf7"}),label:"Total Cards",value:e.distribution.total,subtext:"Vocabulary & Phrases"}),O.jsx(Bp,{icon:O.jsx(Qw,{size:20,color:"#69db7c"}),label:"7-Day Reviews",value:e.activity.reduce((g,_)=>g+_.count,0),subtext:"Cards reviewed"}),O.jsx(Bp,{icon:O.jsx(vS,{size:20,color:"#da77f2"}),label:"Retention Rate",value:`${e.retention.accuracy}%`,subtext:`Last ${e.retention.sampleSize} reviews`})]}),O.jsxs("div",{style:rr.chartsGrid,children:[O.jsxs("div",{style:rr.card,children:[O.jsx("h3",{style:rr.cardTitle,children:"Weekly Activity"}),O.jsx("div",{style:rr.barChartContainer,children:e.activity.map((g,_)=>O.jsxs("div",{style:rr.barGroup,children:[O.jsx("div",{title:`${g.count} cards`,style:{...rr.bar,height:`${g.count/d*100}%`}}),O.jsx("span",{style:rr.label,children:g.weekday})]},_))})]}),O.jsxs("div",{style:rr.card,children:[O.jsx("h3",{style:rr.cardTitle,children:"Mastery Distribution"}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem"},children:[O.jsxs("div",{style:{position:"relative",width:"160px",height:"160px",flexShrink:0},children:[O.jsx("div",{style:{width:"100%",height:"100%",borderRadius:"50%",background:`conic-gradient(
                    ${e.distribution.breakdown[0].color} 0% ${Lh(e.distribution,0)}%, 
                    ${e.distribution.breakdown[1].color} ${Lh(e.distribution,0)}% ${Lh(e.distribution,1)}%,
                    ${e.distribution.breakdown[2].color} ${Lh(e.distribution,1)}% 100%
                  )`}}),O.jsxs("div",{style:rr.donutInner,children:[O.jsx("span",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#e0e0e0"},children:e.distribution.total}),O.jsx("span",{style:{fontSize:"0.8rem",color:"#888"},children:"Cards"})]})]}),O.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.8rem"},children:e.distribution.breakdown.map((g,_)=>O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[O.jsx("span",{style:{width:"12px",height:"12px",borderRadius:"50%",marginRight:"8px",backgroundColor:g.color}}),O.jsx("span",{style:{fontSize:"0.9rem",color:"#ccc"},children:g.label})]}),O.jsx("span",{style:{fontSize:"0.9rem",fontWeight:"600",color:"#e0e0e0"},children:g.count})]},_))})]})]})]})]})}function Lh(i,e){if(i.total===0)return 0;let n=0;for(let s=0;s<=e;s++)n+=i.breakdown[s].count;return n/i.total*100}function Bp({icon:i,label:e,value:n,subtext:s}){return O.jsxs("div",{style:{...rr.card,display:"flex",alignItems:"flex-start",gap:"1rem"},children:[O.jsx("div",{style:rr.iconWrapper,children:i}),O.jsxs("div",{children:[O.jsx("p",{style:{fontSize:"0.85rem",color:"#888",margin:0},children:e}),O.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#e0e0e0",margin:"0.2rem 0"},children:n}),O.jsx("p",{style:{fontSize:"0.75rem",color:"#666",margin:0},children:s})]})]})}const rr={container:{maxWidth:"900px",width:"100%",margin:"0 auto",paddingBottom:"5rem"},header:{display:"flex",alignItems:"center",marginBottom:"1.5rem",gap:"1rem"},backBtn:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s"},title:{fontSize:"1.5rem",fontWeight:"bold",color:"#e0e0e0",margin:0},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},chartsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},card:{backgroundColor:"#25262b",padding:"1.5rem",borderRadius:"12px",border:"1px solid #333",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},cardTitle:{fontSize:"1.1rem",fontWeight:"600",color:"#e0e0e0",marginBottom:"1.5rem",marginTop:0},iconWrapper:{padding:"0.75rem",backgroundColor:"#2c2e33",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},barChartContainer:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",height:"180px",gap:"0.5rem"},barGroup:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,height:"100%",justifyContent:"flex-end"},bar:{width:"100%",maxWidth:"30px",backgroundColor:"#339af0",borderRadius:"4px 4px 0 0",minHeight:"4px",transition:"height 0.5s ease"},label:{fontSize:"0.75rem",color:"#888",marginTop:"0.5rem",fontWeight:"500"},donutInner:{position:"absolute",inset:"16px",backgroundColor:"#25262b",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.2)"}},ZA=()=>{};var n0={};const Hb=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},eC=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],d=i[n++],g=i[n++],_=((o&7)<<18|(u&63)<<12|(d&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(_>>10)),e[s++]=String.fromCharCode(56320+(_&1023))}else{const u=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},Fb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],d=o+1<i.length,g=d?i[o+1]:0,_=o+2<i.length,b=_?i[o+2]:0,R=u>>2,x=(u&3)<<4|g>>4;let N=(g&15)<<2|b>>6,Q=b&63;_||(Q=64,d||(N=64)),s.push(n[R],n[x],n[N],n[Q])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Hb(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):eC(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],g=o<i.length?n[i.charAt(o)]:0;++o;const b=o<i.length?n[i.charAt(o)]:64;++o;const x=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||g==null||b==null||x==null)throw new tC;const N=u<<2|g>>4;if(s.push(N),b!==64){const Q=g<<4&240|b>>2;if(s.push(Q),x!==64){const te=b<<6&192|x;s.push(te)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class tC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nC=function(i){const e=Hb(i);return Fb.encodeByteArray(e,!0)},lf=function(i){return nC(i).replace(/\./g,"")},Kb=function(i){try{return Fb.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function rC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const iC=()=>rC().__FIREBASE_DEFAULTS__,sC=()=>{if(typeof process>"u"||typeof n0>"u")return;const i=n0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},aC=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Kb(i[1]);return e&&JSON.parse(e)},Of=()=>{try{return ZA()||iC()||sC()||aC()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Gb=i=>Of()?.emulatorHosts?.[i],oC=i=>{const e=Gb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Yb=()=>Of()?.config,Qb=i=>Of()?.[`_${i}`];class lC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function ru(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $b(i){return(await fetch(i,{credentials:"include"})).ok}function uC(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[lf(JSON.stringify(n)),lf(JSON.stringify(d)),""].join(".")}const ec={};function cC(){const i={prod:[],emulator:[]};for(const e of Object.keys(ec))ec[e]?i.emulator.push(e):i.prod.push(e);return i}function hC(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let r0=!1;function Xb(i,e){if(typeof window>"u"||typeof document>"u"||!ru(window.location.host)||ec[i]===e||ec[i]||r0)return;ec[i]=e;function n(N){return`__firebase__banner__${N}`}const s="__firebase__banner",u=cC().prod.length>0;function d(){const N=document.getElementById(s);N&&N.remove()}function g(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function _(N,Q){N.setAttribute("width","24"),N.setAttribute("id",Q),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function b(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{r0=!0,d()},N}function R(N,Q){N.setAttribute("id",Q),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function x(){const N=hC(s),Q=n("text"),te=document.getElementById(Q)||document.createElement("span"),de=n("learnmore"),be=document.getElementById(de)||document.createElement("a"),je=n("preprendIcon"),Fe=document.getElementById(je)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const Ve=N.element;g(Ve),R(be,de);const rt=b();_(Fe,je),Ve.append(Fe,te,be,rt),document.body.appendChild(Ve)}u?(te.innerText="Preview backend disconnected.",Fe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Fe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,te.innerText="Preview backend running in this workspace."),te.setAttribute("id",Q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}function vr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vr())}function dC(){const i=Of()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mC(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function gC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yC(){const i=vr();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function vC(){return!dC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _C(){try{return typeof indexedDB=="object"}catch{return!1}}function bC(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const EC="FirebaseError";class ga extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=EC,Object.setPrototypeOf(this,ga.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tc.prototype.create)}}class Tc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?TC(u,s):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new ga(o,g,s)}}function TC(i,e){return i.replace(wC,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const wC=/\{\$([^}]+)}/g;function SC(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Zo(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],d=e[o];if(i0(u)&&i0(d)){if(!Zo(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function i0(i){return i!==null&&typeof i=="object"}function wc(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function AC(i,e){const n=new CC(i,e);return n.subscribe.bind(n)}class CC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");RC(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=qp),o.error===void 0&&(o.error=qp),o.complete===void 0&&(o.complete=qp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RC(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function qp(){}function qi(i){return i&&i._delegate?i._delegate:i}class el{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Yo="[DEFAULT]";class xC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new lC;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OC(e))try{this.getOrInitializeService({instanceIdentifier:Yo})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yo){return this.instances.has(e)}getOptions(e=Yo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);s===g&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:IC(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Yo){return this.component?this.component.multipleInstances?e:Yo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IC(i){return i===Yo?void 0:i}function OC(i){return i.instantiationMode==="EAGER"}class DC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var St;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(St||(St={}));const NC={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},kC=St.INFO,MC={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},VC=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=MC[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dm{constructor(e){this.name=e,this._logLevel=kC,this._logHandler=VC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in St))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...e),this._logHandler(this,St.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...e),this._logHandler(this,St.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,St.INFO,...e),this._logHandler(this,St.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,St.WARN,...e),this._logHandler(this,St.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...e),this._logHandler(this,St.ERROR,...e)}}const PC=(i,e)=>e.some(n=>i instanceof n);let s0,a0;function jC(){return s0||(s0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LC(){return a0||(a0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wb=new WeakMap,rm=new WeakMap,Jb=new WeakMap,Hp=new WeakMap,Nm=new WeakMap;function UC(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{n(co(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Wb.set(n,i)}).catch(()=>{}),Nm.set(e,i),e}function zC(i){if(rm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});rm.set(i,e)}let im={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return rm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Jb.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return co(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function BC(i){im=i(im)}function qC(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Fp(this),e,...n);return Jb.set(s,e.sort?e.sort():[e]),co(s)}:LC().includes(i)?function(...e){return i.apply(Fp(this),e),co(Wb.get(this))}:function(...e){return co(i.apply(Fp(this),e))}}function HC(i){return typeof i=="function"?qC(i):(i instanceof IDBTransaction&&zC(i),PC(i,jC())?new Proxy(i,im):i)}function co(i){if(i instanceof IDBRequest)return UC(i);if(Hp.has(i))return Hp.get(i);const e=HC(i);return e!==i&&(Hp.set(i,e),Nm.set(e,i)),e}const Fp=i=>Nm.get(i);function FC(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(i,e),g=co(d);return s&&d.addEventListener("upgradeneeded",_=>{s(co(d.result),_.oldVersion,_.newVersion,co(d.transaction),_)}),n&&d.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),g.then(_=>{u&&_.addEventListener("close",()=>u()),o&&_.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),g}const KC=["get","getKey","getAll","getAllKeys","count"],GC=["put","add","delete","clear"],Kp=new Map;function o0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Kp.get(e))return Kp.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=GC.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||KC.includes(n)))return;const u=async function(d,...g){const _=this.transaction(d,o?"readwrite":"readonly");let b=_.store;return s&&(b=b.index(g.shift())),(await Promise.all([b[n](...g),o&&_.done]))[0]};return Kp.set(e,u),u}BC(i=>({...i,get:(e,n,s)=>o0(e,n)||i.get(e,n,s),has:(e,n)=>!!o0(e,n)||i.has(e,n)}));class YC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QC(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function QC(i){return i.getComponent()?.type==="VERSION"}const sm="@firebase/app",l0="0.14.6";const fa=new Dm("@firebase/app"),$C="@firebase/app-compat",XC="@firebase/analytics-compat",WC="@firebase/analytics",JC="@firebase/app-check-compat",ZC="@firebase/app-check",eR="@firebase/auth",tR="@firebase/auth-compat",nR="@firebase/database",rR="@firebase/data-connect",iR="@firebase/database-compat",sR="@firebase/functions",aR="@firebase/functions-compat",oR="@firebase/installations",lR="@firebase/installations-compat",uR="@firebase/messaging",cR="@firebase/messaging-compat",hR="@firebase/performance",fR="@firebase/performance-compat",dR="@firebase/remote-config",pR="@firebase/remote-config-compat",mR="@firebase/storage",gR="@firebase/storage-compat",yR="@firebase/firestore",vR="@firebase/ai",_R="@firebase/firestore-compat",bR="firebase",ER="12.6.0";const am="[DEFAULT]",TR={[sm]:"fire-core",[$C]:"fire-core-compat",[WC]:"fire-analytics",[XC]:"fire-analytics-compat",[ZC]:"fire-app-check",[JC]:"fire-app-check-compat",[eR]:"fire-auth",[tR]:"fire-auth-compat",[nR]:"fire-rtdb",[rR]:"fire-data-connect",[iR]:"fire-rtdb-compat",[sR]:"fire-fn",[aR]:"fire-fn-compat",[oR]:"fire-iid",[lR]:"fire-iid-compat",[uR]:"fire-fcm",[cR]:"fire-fcm-compat",[hR]:"fire-perf",[fR]:"fire-perf-compat",[dR]:"fire-rc",[pR]:"fire-rc-compat",[mR]:"fire-gcs",[gR]:"fire-gcs-compat",[yR]:"fire-fst",[_R]:"fire-fst-compat",[vR]:"fire-vertex","fire-js":"fire-js",[bR]:"fire-js-all"};const uf=new Map,wR=new Map,om=new Map;function u0(i,e){try{i.container.addComponent(e)}catch(n){fa.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function $l(i){const e=i.name;if(om.has(e))return fa.debug(`There were multiple attempts to register component ${e}.`),!1;om.set(e,i);for(const n of uf.values())u0(n,i);for(const n of wR.values())u0(n,i);return!0}function km(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function ts(i){return i==null?!1:i.settings!==void 0}const SR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ho=new Tc("app","Firebase",SR);class AR{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new el("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ho.create("app-deleted",{appName:this._name})}}const iu=ER;function Zb(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:am,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ho.create("bad-app-name",{appName:String(o)});if(n||(n=Yb()),!n)throw ho.create("no-options");const u=uf.get(o);if(u){if(Zo(n,u.options)&&Zo(s,u.config))return u;throw ho.create("duplicate-app",{appName:o})}const d=new DC(o);for(const _ of om.values())d.addComponent(_);const g=new AR(n,s,d);return uf.set(o,g),g}function eE(i=am){const e=uf.get(i);if(!e&&i===am&&Yb())return Zb();if(!e)throw ho.create("no-app",{appName:i});return e}function fo(i,e,n){let s=TR[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fa.warn(d.join(" "));return}$l(new el(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const CR="firebase-heartbeat-database",RR=1,cc="firebase-heartbeat-store";let Gp=null;function tE(){return Gp||(Gp=FC(CR,RR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(cc)}catch(n){console.warn(n)}}}}).catch(i=>{throw ho.create("idb-open",{originalErrorMessage:i.message})})),Gp}async function xR(i){try{const n=(await tE()).transaction(cc),s=await n.objectStore(cc).get(nE(i));return await n.done,s}catch(e){if(e instanceof ga)fa.warn(e.message);else{const n=ho.create("idb-get",{originalErrorMessage:e?.message});fa.warn(n.message)}}}async function c0(i,e){try{const s=(await tE()).transaction(cc,"readwrite");await s.objectStore(cc).put(e,nE(i)),await s.done}catch(n){if(n instanceof ga)fa.warn(n.message);else{const s=ho.create("idb-set",{originalErrorMessage:n?.message});fa.warn(s.message)}}}function nE(i){return`${i.name}!${i.options.appId}`}const IR=1024,OR=30;class DR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=h0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>OR){const o=MR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=h0(),{heartbeatsToSend:n,unsentEntries:s}=NR(this._heartbeatsCache.heartbeats),o=lf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return fa.warn(e),""}}}function h0(){return new Date().toISOString().substring(0,10)}function NR(i,e=IR){const n=[];let s=i.slice();for(const o of i){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),f0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),f0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class kR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _C()?bC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return c0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return c0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function f0(i){return lf(JSON.stringify({version:2,heartbeats:i})).length}function MR(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function VR(i){$l(new el("platform-logger",e=>new YC(e),"PRIVATE")),$l(new el("heartbeat",e=>new DR(e),"PRIVATE")),fo(sm,l0,i),fo(sm,l0,"esm2020"),fo("fire-js","")}VR("");var PR="firebase",jR="12.6.0";fo(PR,jR,"app");function rE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LR=rE,iE=new Tc("auth","Firebase",rE());const cf=new Dm("@firebase/auth");function UR(i,...e){cf.logLevel<=St.WARN&&cf.warn(`Auth (${iu}): ${i}`,...e)}function $h(i,...e){cf.logLevel<=St.ERROR&&cf.error(`Auth (${iu}): ${i}`,...e)}function xs(i,...e){throw Vm(i,...e)}function is(i,...e){return Vm(i,...e)}function Mm(i,e,n){const s={...LR(),[e]:n};return new Tc("auth","Firebase",s).create(e,{appName:i.name})}function Xo(i){return Mm(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zR(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&xs(i,"argument-error"),Mm(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Vm(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return iE.create(i,...e)}function nt(i,e,...n){if(!i)throw Vm(e,...n)}function la(i){const e="INTERNAL ASSERTION FAILED: "+i;throw $h(e),new Error(e)}function da(i,e){i||la(e)}function lm(){return typeof self<"u"&&self.location?.href||""}function BR(){return d0()==="http:"||d0()==="https:"}function d0(){return typeof self<"u"&&self.location?.protocol||null}function qR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BR()||mC()||"connection"in navigator)?navigator.onLine:!0}function HR(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Sc{constructor(e,n){this.shortDelay=e,this.longDelay=n,da(n>e,"Short delay should be less than long delay!"),this.isMobile=fC()||gC()}get(){return qR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pm(i,e){da(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class sE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;la("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;la("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;la("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const FR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const KR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GR=new Sc(3e4,6e4);function jm(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function su(i,e,n,s,o={}){return aE(i,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const g=wc({key:i.config.apiKey,...d}).slice(1),_=await i._getAdditionalHeaders();_["Content-Type"]="application/json",i.languageCode&&(_["X-Firebase-Locale"]=i.languageCode);const b={method:e,headers:_,...u};return pC()||(b.referrerPolicy="no-referrer"),i.emulatorConfig&&ru(i.emulatorConfig.host)&&(b.credentials="include"),sE.fetch()(await oE(i,i.config.apiHost,n,g),b)})}async function aE(i,e,n){i._canInitEmulator=!1;const s={...FR,...e};try{const o=new QR(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Uh(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const g=u.ok?d.errorMessage:d.error.message,[_,b]=g.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uh(i,"credential-already-in-use",d);if(_==="EMAIL_EXISTS")throw Uh(i,"email-already-in-use",d);if(_==="USER_DISABLED")throw Uh(i,"user-disabled",d);const R=s[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw Mm(i,R,b);xs(i,R)}}catch(o){if(o instanceof ga)throw o;xs(i,"network-request-failed",{message:String(o)})}}async function YR(i,e,n,s,o={}){const u=await su(i,e,n,s,o);return"mfaPendingCredential"in u&&xs(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function oE(i,e,n,s){const o=`${e}${n}?${s}`,u=i,d=u.config.emulator?Pm(i.config,o):`${i.config.apiScheme}://${o}`;return KR.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}class QR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(is(this.auth,"network-request-failed")),GR.get())})}}function Uh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=is(i,e,s);return o.customData._tokenResponse=n,o}async function $R(i,e){return su(i,"POST","/v1/accounts:delete",e)}async function hf(i,e){return su(i,"POST","/v1/accounts:lookup",e)}function tc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XR(i,e=!1){const n=qi(i),s=await n.getIdToken(e),o=Lm(s);nt(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:s,authTime:tc(Yp(o.auth_time)),issuedAtTime:tc(Yp(o.iat)),expirationTime:tc(Yp(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Yp(i){return Number(i)*1e3}function Lm(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return $h("JWT malformed, contained fewer than 3 sections"),null;try{const o=Kb(n);return o?JSON.parse(o):($h("Failed to decode base64 JWT payload"),null)}catch(o){return $h("Caught error parsing JWT payload as JSON",o?.toString()),null}}function p0(i){const e=Lm(i);return nt(e,"internal-error"),nt(typeof e.exp<"u","internal-error"),nt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function hc(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ga&&WR(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function WR({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class JR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class um{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=tc(this.lastLoginAt),this.creationTime=tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ff(i){const e=i.auth,n=await i.getIdToken(),s=await hc(i,hf(e,{idToken:n}));nt(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?lE(o.providerUserInfo):[],d=ex(i.providerData,u),g=i.isAnonymous,_=!(i.email&&o.passwordHash)&&!d?.length,b=g?_:!1,R={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new um(o.createdAt,o.lastLoginAt),isAnonymous:b};Object.assign(i,R)}async function ZR(i){const e=qi(i);await ff(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ex(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function lE(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function tx(i,e){const n=await aE(i,{},async()=>{const s=wc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,d=await oE(i,o,"/v1/token",`key=${u}`),g=await i._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:g,body:s};return i.emulatorConfig&&ru(i.emulatorConfig.host)&&(_.credentials="include"),sE.fetch()(d,_)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nx(i,e){return su(i,"POST","/v2/accounts:revokeToken",jm(i,e))}class Kl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nt(e.idToken,"internal-error"),nt(typeof e.idToken<"u","internal-error"),nt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):p0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){nt(e.length!==0,"internal-error");const n=p0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(nt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await tx(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new Kl;return s&&(nt(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(nt(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(nt(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kl,this.toJSON())}_performRefresh(){return la("not implemented")}}function no(i,e){nt(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ns{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new JR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new um(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await hc(this,this.stsTokenManager.getToken(this.auth,e));return nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return XR(this,e)}reload(){return ZR(this)}_assign(e){this!==e&&(nt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ns({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ff(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ts(this.auth.app))return Promise.reject(Xo(this.auth));const e=await this.getIdToken();return await hc(this,$R(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,g=n.tenantId??void 0,_=n._redirectEventId??void 0,b=n.createdAt??void 0,R=n.lastLoginAt??void 0,{uid:x,emailVerified:N,isAnonymous:Q,providerData:te,stsTokenManager:de}=n;nt(x&&de,e,"internal-error");const be=Kl.fromJSON(this.name,de);nt(typeof x=="string",e,"internal-error"),no(s,e.name),no(o,e.name),nt(typeof N=="boolean",e,"internal-error"),nt(typeof Q=="boolean",e,"internal-error"),no(u,e.name),no(d,e.name),no(g,e.name),no(_,e.name),no(b,e.name),no(R,e.name);const je=new ns({uid:x,auth:e,email:o,emailVerified:N,displayName:s,isAnonymous:Q,photoURL:d,phoneNumber:u,tenantId:g,stsTokenManager:be,createdAt:b,lastLoginAt:R});return te&&Array.isArray(te)&&(je.providerData=te.map(Fe=>({...Fe}))),_&&(je._redirectEventId=_),je}static async _fromIdTokenResponse(e,n,s=!1){const o=new Kl;o.updateFromServerResponse(n);const u=new ns({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await ff(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];nt(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?lE(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,g=new Kl;g.updateFromIdToken(s);const _=new ns({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:d}),b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new um(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(_,b),_}}const m0=new Map;function ua(i){da(i instanceof Function,"Expected a class definition");let e=m0.get(i);return e?(da(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,m0.set(i,e),e)}class uE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uE.type="NONE";const g0=uE;function Xh(i,e,n){return`firebase:${i}:${e}:${n}`}class Gl{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Xh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Xh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await hf(this.auth,{idToken:e}).catch(()=>{});return n?ns._fromGetAccountInfoResponse(this.auth,n,e):null}return ns._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Gl(ua(g0),e,s);const o=(await Promise.all(n.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let u=o[0]||ua(g0);const d=Xh(s,e.config.apiKey,e.name);let g=null;for(const b of n)try{const R=await b._get(d);if(R){let x;if(typeof R=="string"){const N=await hf(e,{idToken:R}).catch(()=>{});if(!N)break;x=await ns._fromGetAccountInfoResponse(e,N,R)}else x=ns._fromJSON(e,R);b!==u&&(g=x),u=b;break}}catch{}const _=o.filter(b=>b._shouldAllowMigration);return!u._shouldAllowMigration||!_.length?new Gl(u,e,s):(u=_[0],g&&await u._set(d,g.toJSON()),await Promise.all(n.map(async b=>{if(b!==u)try{await b._remove(d)}catch{}})),new Gl(u,e,s))}}function y0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mE(e))return"Blackberry";if(gE(e))return"Webos";if(hE(e))return"Safari";if((e.includes("chrome/")||fE(e))&&!e.includes("edge/"))return"Chrome";if(pE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function cE(i=vr()){return/firefox\//i.test(i)}function hE(i=vr()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fE(i=vr()){return/crios\//i.test(i)}function dE(i=vr()){return/iemobile/i.test(i)}function pE(i=vr()){return/android/i.test(i)}function mE(i=vr()){return/blackberry/i.test(i)}function gE(i=vr()){return/webos/i.test(i)}function Um(i=vr()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function rx(i=vr()){return Um(i)&&!!window.navigator?.standalone}function ix(){return yC()&&document.documentMode===10}function yE(i=vr()){return Um(i)||pE(i)||gE(i)||mE(i)||/windows phone/i.test(i)||dE(i)}function vE(i,e=[]){let n;switch(i){case"Browser":n=y0(vr());break;case"Worker":n=`${y0(vr())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${iu}/${s}`}class sx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,g)=>{try{const _=e(u);d(_)}catch(_){g(_)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function ax(i,e={}){return su(i,"GET","/v2/passwordPolicy",jm(i,e))}const ox=6;class lx{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ox,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class ux{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new v0(this),this.idTokenSubscription=new v0(this),this.beforeStateQueue=new sx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ua(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Gl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await hf(this,{idToken:e}),s=await ns._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ts(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=s?._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===d)&&g?.user&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ff(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ts(this.app))return Promise.reject(Xo(this));const n=e?qi(e):null;return n&&nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&nt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ts(this.app)?Promise.reject(Xo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ts(this.app)?Promise.reject(Xo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ua(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ax(this),n=new lx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await nx(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ua(e)||this._popupRedirectResolver;nt(n,this,"argument-error"),this.redirectPersistenceManager=await Gl.create(this,[ua(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(nt(g,this,"internal-error"),g.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const _=e.addObserver(n,s,o);return()=>{d=!0,_()}}else{const _=e.addObserver(n);return()=>{d=!0,_()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(ts(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&UR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Df(i){return qi(i)}class v0{constructor(e){this.auth=e,this.observer=null,this.addObserver=AC(n=>this.observer=n)}get next(){return nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let zm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cx(i){zm=i}function hx(i){return zm.loadJS(i)}function fx(){return zm.gapiScript}function dx(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function px(i,e){const n=km(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Zo(u,e??{}))return o;xs(o,"already-initialized")}return n.initialize({options:e})}function mx(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(ua);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function gx(i,e,n){const s=Df(i);nt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=_E(e),{host:d,port:g}=yx(e),_=g===null?"":`:${g}`,b={url:`${u}//${d}${_}/`},R=Object.freeze({host:d,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){nt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),nt(Zo(b,s.config.emulator)&&Zo(R,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=b,s.emulatorConfig=R,s.settings.appVerificationDisabledForTesting=!0,ru(d)?($b(`${u}//${d}${_}`),Xb("Auth",!0)):vx()}function _E(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function yx(i){const e=_E(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:_0(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:_0(d)}}}function _0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function vx(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class bE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return la("not implemented")}_getIdTokenResponse(e){return la("not implemented")}_linkToIdToken(e,n){return la("not implemented")}_getReauthenticationResolver(e){return la("not implemented")}}async function Yl(i,e){return YR(i,"POST","/v1/accounts:signInWithIdp",jm(i,e))}const _x="http://localhost";class tl extends bE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new tl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const d=new tl(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Yl(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Yl(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yl(e,n)}buildRequest(){const e={requestUri:_x,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wc(n)}return e}}class Bm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ac extends Bm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class so extends Ac{constructor(){super("facebook.com")}static credential(e){return tl._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return so.credential(e.oauthAccessToken)}catch{return null}}}so.FACEBOOK_SIGN_IN_METHOD="facebook.com";so.PROVIDER_ID="facebook.com";class oa extends Ac{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return tl._fromParams({providerId:oa.PROVIDER_ID,signInMethod:oa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return oa.credentialFromTaggedObject(e)}static credentialFromError(e){return oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return oa.credential(n,s)}catch{return null}}}oa.GOOGLE_SIGN_IN_METHOD="google.com";oa.PROVIDER_ID="google.com";class ao extends Ac{constructor(){super("github.com")}static credential(e){return tl._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ao.credential(e.oauthAccessToken)}catch{return null}}}ao.GITHUB_SIGN_IN_METHOD="github.com";ao.PROVIDER_ID="github.com";class oo extends Ac{constructor(){super("twitter.com")}static credential(e,n){return tl._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return oo.credential(n,s)}catch{return null}}}oo.TWITTER_SIGN_IN_METHOD="twitter.com";oo.PROVIDER_ID="twitter.com";class Xl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await ns._fromIdTokenResponse(e,s,o),d=b0(s);return new Xl({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=b0(s);return new Xl({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function b0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class df extends ga{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,df.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new df(e,n,s,o)}}function EE(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?df._fromErrorAndOperation(i,u,e,s):u})}async function bx(i,e,n=!1){const s=await hc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Xl._forOperation(i,"link",s)}async function Ex(i,e,n=!1){const{auth:s}=i;if(ts(s.app))return Promise.reject(Xo(s));const o="reauthenticate";try{const u=await hc(i,EE(s,o,e,i),n);nt(u.idToken,s,"internal-error");const d=Lm(u.idToken);nt(d,s,"internal-error");const{sub:g}=d;return nt(i.uid===g,s,"user-mismatch"),Xl._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&xs(s,"user-mismatch"),u}}async function Tx(i,e,n=!1){if(ts(i.app))return Promise.reject(Xo(i));const s="signIn",o=await EE(i,s,e),u=await Xl._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}function wx(i,e,n,s){return qi(i).onIdTokenChanged(e,n,s)}function Sx(i,e,n){return qi(i).beforeAuthStateChanged(e,n)}function Ax(i,e,n,s){return qi(i).onAuthStateChanged(e,n,s)}function E0(i){return qi(i).signOut()}const pf="__sak";class TE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pf,"1"),this.storage.removeItem(pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Cx=1e3,Rx=10;class wE extends TE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,g,_)=>{this.notifyListeners(d,_)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);ix()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Rx):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Cx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}wE.type="LOCAL";const xx=wE;class SE extends TE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}SE.type="SESSION";const AE=SE;function Ix(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Nf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Nf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const g=Array.from(d).map(async b=>b(n.origin,u)),_=await Ix(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:_})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nf.receivers=[];function qm(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class Ox{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((g,_)=>{const b=qm("",20);o.port1.start();const R=setTimeout(()=>{_(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(x){const N=x;if(N.data.eventId===b)switch(N.data.status){case"ack":clearTimeout(R),u=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(N.data.response);break;default:clearTimeout(R),clearTimeout(u),_(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:b,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ws(){return window}function Dx(i){ws().location.href=i}function CE(){return typeof ws().WorkerGlobalScope<"u"&&typeof ws().importScripts=="function"}async function Nx(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kx(){return navigator?.serviceWorker?.controller||null}function Mx(){return CE()?self:null}const RE="firebaseLocalStorageDb",Vx=1,mf="firebaseLocalStorage",xE="fbase_key";class Cc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kf(i,e){return i.transaction([mf],e?"readwrite":"readonly").objectStore(mf)}function Px(){const i=indexedDB.deleteDatabase(RE);return new Cc(i).toPromise()}function cm(){const i=indexedDB.open(RE,Vx);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(mf,{keyPath:xE})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(mf)?e(s):(s.close(),await Px(),e(await cm()))})})}async function T0(i,e,n){const s=kf(i,!0).put({[xE]:e,value:n});return new Cc(s).toPromise()}async function jx(i,e){const n=kf(i,!1).get(e),s=await new Cc(n).toPromise();return s===void 0?null:s.value}function w0(i,e){const n=kf(i,!0).delete(e);return new Cc(n).toPromise()}const Lx=800,Ux=3;class IE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Ux)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nf._getInstance(Mx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Nx(),!this.activeServiceWorker)return;this.sender=new Ox(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cm();return await T0(e,pf,"1"),await w0(e,pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>T0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>jx(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>w0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=kf(o,!1).getAll();return new Cc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Lx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IE.type="LOCAL";const zx=IE;new Sc(3e4,6e4);function OE(i,e){return e?ua(e):(nt(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Hm extends bE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Bx(i){return Tx(i.auth,new Hm(i),i.bypassAuthState)}function qx(i){const{auth:e,user:n}=i;return nt(n,e,"internal-error"),Ex(n,new Hm(i),i.bypassAuthState)}async function Hx(i){const{auth:e,user:n}=i;return nt(n,e,"internal-error"),bx(n,new Hm(i),i.bypassAuthState)}class DE{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:g}=e;if(d){this.reject(d);return}const _={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(_))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Bx;case"linkViaPopup":case"linkViaRedirect":return Hx;case"reauthViaPopup":case"reauthViaRedirect":return qx;default:xs(this.auth,"internal-error")}}resolve(e){da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Fx=new Sc(2e3,1e4);async function Kx(i,e,n){if(ts(i.app))return Promise.reject(is(i,"operation-not-supported-in-this-environment"));const s=Df(i);zR(i,e,Bm);const o=OE(s,n);return new Qo(s,"signInViaPopup",e,o).executeNotNull()}class Qo extends DE{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Qo.currentPopupAction&&Qo.currentPopupAction.cancel(),Qo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nt(e,this.auth,"internal-error"),e}async onExecution(){da(this.filter.length===1,"Popup operations only handle one event");const e=qm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(is(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(is(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(is(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Fx.get())};e()}}Qo.currentPopupAction=null;const Gx="pendingRedirect",Wh=new Map;class Yx extends DE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Wh.get(this.auth._key());if(!e){try{const s=await Qx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Wh.set(this.auth._key(),e)}return this.bypassAuthState||Wh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Qx(i,e){const n=Wx(e),s=Xx(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function $x(i,e){Wh.set(i._key(),e)}function Xx(i){return ua(i._redirectPersistence)}function Wx(i){return Xh(Gx,i.config.apiKey,i.name)}async function Jx(i,e,n=!1){if(ts(i.app))return Promise.reject(Xo(i));const s=Df(i),o=OE(s,e),d=await new Yx(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const Zx=600*1e3;class eI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!NE(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(is(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Zx&&this.cachedEventUids.clear(),this.cachedEventUids.has(S0(e))}saveEventToCache(e){this.cachedEventUids.add(S0(e)),this.lastProcessedEventTime=Date.now()}}function S0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function NE({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function tI(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NE(i);default:return!1}}async function nI(i,e={}){return su(i,"GET","/v1/projects",e)}const rI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iI=/^https?/;async function sI(i){if(i.config.emulator)return;const{authorizedDomains:e}=await nI(i);for(const n of e)try{if(aI(n))return}catch{}xs(i,"unauthorized-domain")}function aI(i){const e=lm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!iI.test(n))return!1;if(rI.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const oI=new Sc(3e4,6e4);function A0(){const i=ws().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function lI(i){return new Promise((e,n)=>{function s(){A0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{A0(),n(is(i,"network-request-failed"))},timeout:oI.get()})}if(ws().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ws().gapi?.load)s();else{const o=dx("iframefcb");return ws()[o]=()=>{gapi.load?s():n(is(i,"network-request-failed"))},hx(`${fx()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Jh=null,e})}let Jh=null;function uI(i){return Jh=Jh||lI(i),Jh}const cI=new Sc(5e3,15e3),hI="__/auth/iframe",fI="emulator/auth/iframe",dI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mI(i){const e=i.config;nt(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Pm(e,fI):`https://${i.config.authDomain}/${hI}`,s={apiKey:e.apiKey,appName:i.name,v:iu},o=pI.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${wc(s).slice(1)}`}async function gI(i){const e=await uI(i),n=ws().gapi;return nt(n,i,"internal-error"),e.open({where:document.body,url:mI(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dI,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=is(i,"network-request-failed"),g=ws().setTimeout(()=>{u(d)},cI.get());function _(){ws().clearTimeout(g),o(s)}s.ping(_).then(_,()=>{u(d)})}))}const yI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vI=500,_I=600,bI="_blank",EI="http://localhost";class C0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TI(i,e,n,s=vI,o=_I){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const _={...yI,width:s.toString(),height:o.toString(),top:u,left:d},b=vr().toLowerCase();n&&(g=fE(b)?bI:n),cE(b)&&(e=e||EI,_.scrollbars="yes");const R=Object.entries(_).reduce((N,[Q,te])=>`${N}${Q}=${te},`,"");if(rx(b)&&g!=="_self")return wI(e||"",g),new C0(null);const x=window.open(e||"",g,R);nt(x,i,"popup-blocked");try{x.focus()}catch{}return new C0(x)}function wI(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const SI="__/auth/handler",AI="emulator/auth/handler",CI=encodeURIComponent("fac");async function R0(i,e,n,s,o,u){nt(i.config.authDomain,i,"auth-domain-config-required"),nt(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:iu,eventId:o};if(e instanceof Bm){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",SC(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[R,x]of Object.entries({}))d[R]=x}if(e instanceof Ac){const R=e.getScopes().filter(x=>x!=="");R.length>0&&(d.scopes=R.join(","))}i.tenantId&&(d.tid=i.tenantId);const g=d;for(const R of Object.keys(g))g[R]===void 0&&delete g[R];const _=await i._getAppCheckToken(),b=_?`#${CI}=${encodeURIComponent(_)}`:"";return`${RI(i)}?${wc(g).slice(1)}${b}`}function RI({config:i}){return i.emulator?Pm(i,AI):`https://${i.authDomain}/${SI}`}const Qp="webStorageSupport";class xI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AE,this._completeRedirectFn=Jx,this._overrideRedirectResult=$x}async _openPopup(e,n,s,o){da(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await R0(e,n,s,lm(),o);return TI(e,u,qm())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await R0(e,n,s,lm(),o);return Dx(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(da(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await gI(e),s=new eI(e);return n.register("authEvent",o=>(nt(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qp,{type:Qp},o=>{const u=o?.[0]?.[Qp];u!==void 0&&n(!!u),xs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yE()||hE()||Um()}}const II=xI;var x0="@firebase/auth",I0="1.11.1";class OI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function DI(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NI(i){$l(new el("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=s.options;nt(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const _={apiKey:d,authDomain:g,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vE(i)},b=new ux(s,o,u,_);return mx(b,n),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),$l(new el("auth-internal",e=>{const n=Df(e.getProvider("auth").getImmediate());return(s=>new OI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fo(x0,I0,DI(i)),fo(x0,I0,"esm2020")}const kI=300,MI=Qb("authIdTokenMaxAge")||kI;let O0=null;const VI=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>MI)return;const o=n?.token;O0!==o&&(O0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function PI(i=eE()){const e=km(i,"auth");if(e.isInitialized())return e.getImmediate();const n=px(i,{popupRedirectResolver:II,persistence:[zx,xx,AE]}),s=Qb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=VI(u.toString());Sx(n,d,()=>d(n.currentUser)),wx(n,g=>d(g))}}const o=Gb("auth");return o&&gx(n,`http://${o}`),n}function jI(){return document.getElementsByTagName("head")?.[0]??document}cx({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=is("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",jI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NI("Browser");var D0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var po,kE;(function(){var i;function e(P,k){function L(){}L.prototype=k.prototype,P.F=k.prototype,P.prototype=new L,P.prototype.constructor=P,P.D=function(Y,j,B){for(var M=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)M[ut-2]=arguments[ut];return k.prototype[j].apply(Y,M)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,k,L){L||(L=0);const Y=Array(16);if(typeof k=="string")for(var j=0;j<16;++j)Y[j]=k.charCodeAt(L++)|k.charCodeAt(L++)<<8|k.charCodeAt(L++)<<16|k.charCodeAt(L++)<<24;else for(j=0;j<16;++j)Y[j]=k[L++]|k[L++]<<8|k[L++]<<16|k[L++]<<24;k=P.g[0],L=P.g[1],j=P.g[2];let B=P.g[3],M;M=k+(B^L&(j^B))+Y[0]+3614090360&4294967295,k=L+(M<<7&4294967295|M>>>25),M=B+(j^k&(L^j))+Y[1]+3905402710&4294967295,B=k+(M<<12&4294967295|M>>>20),M=j+(L^B&(k^L))+Y[2]+606105819&4294967295,j=B+(M<<17&4294967295|M>>>15),M=L+(k^j&(B^k))+Y[3]+3250441966&4294967295,L=j+(M<<22&4294967295|M>>>10),M=k+(B^L&(j^B))+Y[4]+4118548399&4294967295,k=L+(M<<7&4294967295|M>>>25),M=B+(j^k&(L^j))+Y[5]+1200080426&4294967295,B=k+(M<<12&4294967295|M>>>20),M=j+(L^B&(k^L))+Y[6]+2821735955&4294967295,j=B+(M<<17&4294967295|M>>>15),M=L+(k^j&(B^k))+Y[7]+4249261313&4294967295,L=j+(M<<22&4294967295|M>>>10),M=k+(B^L&(j^B))+Y[8]+1770035416&4294967295,k=L+(M<<7&4294967295|M>>>25),M=B+(j^k&(L^j))+Y[9]+2336552879&4294967295,B=k+(M<<12&4294967295|M>>>20),M=j+(L^B&(k^L))+Y[10]+4294925233&4294967295,j=B+(M<<17&4294967295|M>>>15),M=L+(k^j&(B^k))+Y[11]+2304563134&4294967295,L=j+(M<<22&4294967295|M>>>10),M=k+(B^L&(j^B))+Y[12]+1804603682&4294967295,k=L+(M<<7&4294967295|M>>>25),M=B+(j^k&(L^j))+Y[13]+4254626195&4294967295,B=k+(M<<12&4294967295|M>>>20),M=j+(L^B&(k^L))+Y[14]+2792965006&4294967295,j=B+(M<<17&4294967295|M>>>15),M=L+(k^j&(B^k))+Y[15]+1236535329&4294967295,L=j+(M<<22&4294967295|M>>>10),M=k+(j^B&(L^j))+Y[1]+4129170786&4294967295,k=L+(M<<5&4294967295|M>>>27),M=B+(L^j&(k^L))+Y[6]+3225465664&4294967295,B=k+(M<<9&4294967295|M>>>23),M=j+(k^L&(B^k))+Y[11]+643717713&4294967295,j=B+(M<<14&4294967295|M>>>18),M=L+(B^k&(j^B))+Y[0]+3921069994&4294967295,L=j+(M<<20&4294967295|M>>>12),M=k+(j^B&(L^j))+Y[5]+3593408605&4294967295,k=L+(M<<5&4294967295|M>>>27),M=B+(L^j&(k^L))+Y[10]+38016083&4294967295,B=k+(M<<9&4294967295|M>>>23),M=j+(k^L&(B^k))+Y[15]+3634488961&4294967295,j=B+(M<<14&4294967295|M>>>18),M=L+(B^k&(j^B))+Y[4]+3889429448&4294967295,L=j+(M<<20&4294967295|M>>>12),M=k+(j^B&(L^j))+Y[9]+568446438&4294967295,k=L+(M<<5&4294967295|M>>>27),M=B+(L^j&(k^L))+Y[14]+3275163606&4294967295,B=k+(M<<9&4294967295|M>>>23),M=j+(k^L&(B^k))+Y[3]+4107603335&4294967295,j=B+(M<<14&4294967295|M>>>18),M=L+(B^k&(j^B))+Y[8]+1163531501&4294967295,L=j+(M<<20&4294967295|M>>>12),M=k+(j^B&(L^j))+Y[13]+2850285829&4294967295,k=L+(M<<5&4294967295|M>>>27),M=B+(L^j&(k^L))+Y[2]+4243563512&4294967295,B=k+(M<<9&4294967295|M>>>23),M=j+(k^L&(B^k))+Y[7]+1735328473&4294967295,j=B+(M<<14&4294967295|M>>>18),M=L+(B^k&(j^B))+Y[12]+2368359562&4294967295,L=j+(M<<20&4294967295|M>>>12),M=k+(L^j^B)+Y[5]+4294588738&4294967295,k=L+(M<<4&4294967295|M>>>28),M=B+(k^L^j)+Y[8]+2272392833&4294967295,B=k+(M<<11&4294967295|M>>>21),M=j+(B^k^L)+Y[11]+1839030562&4294967295,j=B+(M<<16&4294967295|M>>>16),M=L+(j^B^k)+Y[14]+4259657740&4294967295,L=j+(M<<23&4294967295|M>>>9),M=k+(L^j^B)+Y[1]+2763975236&4294967295,k=L+(M<<4&4294967295|M>>>28),M=B+(k^L^j)+Y[4]+1272893353&4294967295,B=k+(M<<11&4294967295|M>>>21),M=j+(B^k^L)+Y[7]+4139469664&4294967295,j=B+(M<<16&4294967295|M>>>16),M=L+(j^B^k)+Y[10]+3200236656&4294967295,L=j+(M<<23&4294967295|M>>>9),M=k+(L^j^B)+Y[13]+681279174&4294967295,k=L+(M<<4&4294967295|M>>>28),M=B+(k^L^j)+Y[0]+3936430074&4294967295,B=k+(M<<11&4294967295|M>>>21),M=j+(B^k^L)+Y[3]+3572445317&4294967295,j=B+(M<<16&4294967295|M>>>16),M=L+(j^B^k)+Y[6]+76029189&4294967295,L=j+(M<<23&4294967295|M>>>9),M=k+(L^j^B)+Y[9]+3654602809&4294967295,k=L+(M<<4&4294967295|M>>>28),M=B+(k^L^j)+Y[12]+3873151461&4294967295,B=k+(M<<11&4294967295|M>>>21),M=j+(B^k^L)+Y[15]+530742520&4294967295,j=B+(M<<16&4294967295|M>>>16),M=L+(j^B^k)+Y[2]+3299628645&4294967295,L=j+(M<<23&4294967295|M>>>9),M=k+(j^(L|~B))+Y[0]+4096336452&4294967295,k=L+(M<<6&4294967295|M>>>26),M=B+(L^(k|~j))+Y[7]+1126891415&4294967295,B=k+(M<<10&4294967295|M>>>22),M=j+(k^(B|~L))+Y[14]+2878612391&4294967295,j=B+(M<<15&4294967295|M>>>17),M=L+(B^(j|~k))+Y[5]+4237533241&4294967295,L=j+(M<<21&4294967295|M>>>11),M=k+(j^(L|~B))+Y[12]+1700485571&4294967295,k=L+(M<<6&4294967295|M>>>26),M=B+(L^(k|~j))+Y[3]+2399980690&4294967295,B=k+(M<<10&4294967295|M>>>22),M=j+(k^(B|~L))+Y[10]+4293915773&4294967295,j=B+(M<<15&4294967295|M>>>17),M=L+(B^(j|~k))+Y[1]+2240044497&4294967295,L=j+(M<<21&4294967295|M>>>11),M=k+(j^(L|~B))+Y[8]+1873313359&4294967295,k=L+(M<<6&4294967295|M>>>26),M=B+(L^(k|~j))+Y[15]+4264355552&4294967295,B=k+(M<<10&4294967295|M>>>22),M=j+(k^(B|~L))+Y[6]+2734768916&4294967295,j=B+(M<<15&4294967295|M>>>17),M=L+(B^(j|~k))+Y[13]+1309151649&4294967295,L=j+(M<<21&4294967295|M>>>11),M=k+(j^(L|~B))+Y[4]+4149444226&4294967295,k=L+(M<<6&4294967295|M>>>26),M=B+(L^(k|~j))+Y[11]+3174756917&4294967295,B=k+(M<<10&4294967295|M>>>22),M=j+(k^(B|~L))+Y[2]+718787259&4294967295,j=B+(M<<15&4294967295|M>>>17),M=L+(B^(j|~k))+Y[9]+3951481745&4294967295,P.g[0]=P.g[0]+k&4294967295,P.g[1]=P.g[1]+(j+(M<<21&4294967295|M>>>11))&4294967295,P.g[2]=P.g[2]+j&4294967295,P.g[3]=P.g[3]+B&4294967295}s.prototype.v=function(P,k){k===void 0&&(k=P.length);const L=k-this.blockSize,Y=this.C;let j=this.h,B=0;for(;B<k;){if(j==0)for(;B<=L;)o(this,P,B),B+=this.blockSize;if(typeof P=="string"){for(;B<k;)if(Y[j++]=P.charCodeAt(B++),j==this.blockSize){o(this,Y),j=0;break}}else for(;B<k;)if(Y[j++]=P[B++],j==this.blockSize){o(this,Y),j=0;break}}this.h=j,this.o+=k},s.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var k=1;k<P.length-8;++k)P[k]=0;k=this.o*8;for(var L=P.length-8;L<P.length;++L)P[L]=k&255,k/=256;for(this.v(P),P=Array(16),k=0,L=0;L<4;++L)for(let Y=0;Y<32;Y+=8)P[k++]=this.g[L]>>>Y&255;return P};function u(P,k){var L=g;return Object.prototype.hasOwnProperty.call(L,P)?L[P]:L[P]=k(P)}function d(P,k){this.h=k;const L=[];let Y=!0;for(let j=P.length-1;j>=0;j--){const B=P[j]|0;Y&&B==k||(L[j]=B,Y=!1)}this.g=L}var g={};function _(P){return-128<=P&&P<128?u(P,function(k){return new d([k|0],k<0?-1:0)}):new d([P|0],P<0?-1:0)}function b(P){if(isNaN(P)||!isFinite(P))return x;if(P<0)return be(b(-P));const k=[];let L=1;for(let Y=0;P>=L;Y++)k[Y]=P/L|0,L*=4294967296;return new d(k,0)}function R(P,k){if(P.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(P.charAt(0)=="-")return be(R(P.substring(1),k));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const L=b(Math.pow(k,8));let Y=x;for(let B=0;B<P.length;B+=8){var j=Math.min(8,P.length-B);const M=parseInt(P.substring(B,B+j),k);j<8?(j=b(Math.pow(k,j)),Y=Y.j(j).add(b(M))):(Y=Y.j(L),Y=Y.add(b(M)))}return Y}var x=_(0),N=_(1),Q=_(16777216);i=d.prototype,i.m=function(){if(de(this))return-be(this).m();let P=0,k=1;for(let L=0;L<this.g.length;L++){const Y=this.i(L);P+=(Y>=0?Y:4294967296+Y)*k,k*=4294967296}return P},i.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(te(this))return"0";if(de(this))return"-"+be(this).toString(P);const k=b(Math.pow(P,6));var L=this;let Y="";for(;;){const j=rt(L,k).g;L=je(L,j.j(k));let B=((L.g.length>0?L.g[0]:L.h)>>>0).toString(P);if(L=j,te(L))return B+Y;for(;B.length<6;)B="0"+B;Y=B+Y}},i.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function te(P){if(P.h!=0)return!1;for(let k=0;k<P.g.length;k++)if(P.g[k]!=0)return!1;return!0}function de(P){return P.h==-1}i.l=function(P){return P=je(this,P),de(P)?-1:te(P)?0:1};function be(P){const k=P.g.length,L=[];for(let Y=0;Y<k;Y++)L[Y]=~P.g[Y];return new d(L,~P.h).add(N)}i.abs=function(){return de(this)?be(this):this},i.add=function(P){const k=Math.max(this.g.length,P.g.length),L=[];let Y=0;for(let j=0;j<=k;j++){let B=Y+(this.i(j)&65535)+(P.i(j)&65535),M=(B>>>16)+(this.i(j)>>>16)+(P.i(j)>>>16);Y=M>>>16,B&=65535,M&=65535,L[j]=M<<16|B}return new d(L,L[L.length-1]&-2147483648?-1:0)};function je(P,k){return P.add(be(k))}i.j=function(P){if(te(this)||te(P))return x;if(de(this))return de(P)?be(this).j(be(P)):be(be(this).j(P));if(de(P))return be(this.j(be(P)));if(this.l(Q)<0&&P.l(Q)<0)return b(this.m()*P.m());const k=this.g.length+P.g.length,L=[];for(var Y=0;Y<2*k;Y++)L[Y]=0;for(Y=0;Y<this.g.length;Y++)for(let j=0;j<P.g.length;j++){const B=this.i(Y)>>>16,M=this.i(Y)&65535,ut=P.i(j)>>>16,Gt=P.i(j)&65535;L[2*Y+2*j]+=M*Gt,Fe(L,2*Y+2*j),L[2*Y+2*j+1]+=B*Gt,Fe(L,2*Y+2*j+1),L[2*Y+2*j+1]+=M*ut,Fe(L,2*Y+2*j+1),L[2*Y+2*j+2]+=B*ut,Fe(L,2*Y+2*j+2)}for(P=0;P<k;P++)L[P]=L[2*P+1]<<16|L[2*P];for(P=k;P<2*k;P++)L[P]=0;return new d(L,0)};function Fe(P,k){for(;(P[k]&65535)!=P[k];)P[k+1]+=P[k]>>>16,P[k]&=65535,k++}function Ve(P,k){this.g=P,this.h=k}function rt(P,k){if(te(k))throw Error("division by zero");if(te(P))return new Ve(x,x);if(de(P))return k=rt(be(P),k),new Ve(be(k.g),be(k.h));if(de(k))return k=rt(P,be(k)),new Ve(be(k.g),k.h);if(P.g.length>30){if(de(P)||de(k))throw Error("slowDivide_ only works with positive integers.");for(var L=N,Y=k;Y.l(P)<=0;)L=it(L),Y=it(Y);var j=$e(L,1),B=$e(Y,1);for(Y=$e(Y,2),L=$e(L,2);!te(Y);){var M=B.add(Y);M.l(P)<=0&&(j=j.add(L),B=M),Y=$e(Y,1),L=$e(L,1)}return k=je(P,j.j(k)),new Ve(j,k)}for(j=x;P.l(k)>=0;){for(L=Math.max(1,Math.floor(P.m()/k.m())),Y=Math.ceil(Math.log(L)/Math.LN2),Y=Y<=48?1:Math.pow(2,Y-48),B=b(L),M=B.j(k);de(M)||M.l(P)>0;)L-=Y,B=b(L),M=B.j(k);te(B)&&(B=N),j=j.add(B),P=je(P,M)}return new Ve(j,P)}i.B=function(P){return rt(this,P).h},i.and=function(P){const k=Math.max(this.g.length,P.g.length),L=[];for(let Y=0;Y<k;Y++)L[Y]=this.i(Y)&P.i(Y);return new d(L,this.h&P.h)},i.or=function(P){const k=Math.max(this.g.length,P.g.length),L=[];for(let Y=0;Y<k;Y++)L[Y]=this.i(Y)|P.i(Y);return new d(L,this.h|P.h)},i.xor=function(P){const k=Math.max(this.g.length,P.g.length),L=[];for(let Y=0;Y<k;Y++)L[Y]=this.i(Y)^P.i(Y);return new d(L,this.h^P.h)};function it(P){const k=P.g.length+1,L=[];for(let Y=0;Y<k;Y++)L[Y]=P.i(Y)<<1|P.i(Y-1)>>>31;return new d(L,P.h)}function $e(P,k){const L=k>>5;k%=32;const Y=P.g.length-L,j=[];for(let B=0;B<Y;B++)j[B]=k>0?P.i(B+L)>>>k|P.i(B+L+1)<<32-k:P.i(B+L);return new d(j,P.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,kE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=b,d.fromString=R,po=d}).apply(typeof D0<"u"?D0:typeof self<"u"?self:typeof window<"u"?window:{});var zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ME,$u,VE,Zh,hm,PE,jE,LE;(function(){var i,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof zh=="object"&&zh];for(var v=0;v<c.length;++v){var w=c[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=n(this);function o(c,v){if(v)e:{var w=s;c=c.split(".");for(var I=0;I<c.length-1;I++){var ne=c[I];if(!(ne in w))break e;w=w[ne]}c=c[c.length-1],I=w[c],v=v(I),v!=I&&v!=null&&e(w,c,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(v){var w=[],I;for(I in v)Object.prototype.hasOwnProperty.call(v,I)&&w.push([I,v[I]]);return w}});var u=u||{},d=this||self;function g(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function _(c,v,w){return c.call.apply(c.bind,arguments)}function b(c,v,w){return b=_,b.apply(null,arguments)}function R(c,v){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function x(c,v){function w(){}w.prototype=v.prototype,c.Z=v.prototype,c.prototype=new w,c.prototype.constructor=c,c.Ob=function(I,ne,le){for(var Ae=Array(arguments.length-2),st=2;st<arguments.length;st++)Ae[st-2]=arguments[st];return v.prototype[ne].apply(I,Ae)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function Q(c){const v=c.length;if(v>0){const w=Array(v);for(let I=0;I<v;I++)w[I]=c[I];return w}return[]}function te(c,v){for(let I=1;I<arguments.length;I++){const ne=arguments[I];var w=typeof ne;if(w=w!="object"?w:ne?Array.isArray(ne)?"array":w:"null",w=="array"||w=="object"&&typeof ne.length=="number"){w=c.length||0;const le=ne.length||0;c.length=w+le;for(let Ae=0;Ae<le;Ae++)c[w+Ae]=ne[Ae]}else c.push(ne)}}class de{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function be(c){d.setTimeout(()=>{throw c},0)}function je(){var c=P;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class Fe{constructor(){this.h=this.g=null}add(v,w){const I=Ve.get();I.set(v,w),this.h?this.h.next=I:this.g=I,this.h=I}}var Ve=new de(()=>new rt,c=>c.reset());class rt{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let it,$e=!1,P=new Fe,k=()=>{const c=Promise.resolve(void 0);it=()=>{c.then(L)}};function L(){for(var c;c=je();){try{c.h.call(c.g)}catch(w){be(w)}var v=Ve;v.j(c),v.h<100&&(v.h++,c.next=v.g,v.g=c)}$e=!1}function Y(){this.u=this.u,this.C=this.C}Y.prototype.u=!1,Y.prototype.dispose=function(){this.u||(this.u=!0,this.N())},Y.prototype[Symbol.dispose]=function(){this.dispose()},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};d.addEventListener("test",w,v),d.removeEventListener("test",w,v)}catch{}return c})();function M(c){return/^[\s\xa0]*$/.test(c)}function ut(c,v){j.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,v)}x(ut,j),ut.prototype.init=function(c,v){const w=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget,v||(w=="mouseover"?v=c.fromElement:w=="mouseout"&&(v=c.toElement)),this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ut.Z.h.call(this)},ut.prototype.h=function(){ut.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Gt="closure_listenable_"+(Math.random()*1e6|0),ce=0;function Ie(c,v,w,I,ne){this.listener=c,this.proxy=null,this.src=v,this.type=w,this.capture=!!I,this.ha=ne,this.key=++ce,this.da=this.fa=!1}function Be(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ze(c,v,w){for(const I in c)v.call(w,c[I],I,c)}function qe(c,v){for(const w in c)v.call(void 0,c[w],w,c)}function H(c){const v={};for(const w in c)v[w]=c[w];return v}const pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xe(c,v){let w,I;for(let ne=1;ne<arguments.length;ne++){I=arguments[ne];for(w in I)c[w]=I[w];for(let le=0;le<pe.length;le++)w=pe[le],Object.prototype.hasOwnProperty.call(I,w)&&(c[w]=I[w])}}function Pe(c){this.src=c,this.g={},this.h=0}Pe.prototype.add=function(c,v,w,I,ne){const le=c.toString();c=this.g[le],c||(c=this.g[le]=[],this.h++);const Ae=Ze(c,v,I,ne);return Ae>-1?(v=c[Ae],w||(v.fa=!1)):(v=new Ie(v,this.src,le,!!I,ne),v.fa=w,c.push(v)),v};function Xe(c,v){const w=v.type;if(w in c.g){var I=c.g[w],ne=Array.prototype.indexOf.call(I,v,void 0),le;(le=ne>=0)&&Array.prototype.splice.call(I,ne,1),le&&(Be(v),c.g[w].length==0&&(delete c.g[w],c.h--))}}function Ze(c,v,w,I){for(let ne=0;ne<c.length;++ne){const le=c[ne];if(!le.da&&le.listener==v&&le.capture==!!w&&le.ha==I)return ne}return-1}var yt="closure_lm_"+(Math.random()*1e6|0),vn={};function ke(c,v,w,I,ne){if(Array.isArray(v)){for(let le=0;le<v.length;le++)ke(c,v[le],w,I,ne);return null}return w=So(w),c&&c[Gt]?c.J(v,w,g(I)?!!I.capture:!1,ne):ss(c,v,w,!1,I,ne)}function ss(c,v,w,I,ne,le){if(!v)throw Error("Invalid event type");const Ae=g(ne)?!!ne.capture:!!ne;let st=Ds(c);if(st||(c[yt]=st=new Pe(c)),w=st.add(v,w,I,Ae,le),w.proxy)return w;if(I=Hi(),w.proxy=I,I.src=c,I.listener=w,c.addEventListener)B||(ne=Ae),ne===void 0&&(ne=!1),c.addEventListener(v.toString(),I,ne);else if(c.attachEvent)c.attachEvent(yi(v.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Hi(){function c(w){return v.call(c.src,c.listener,w)}const v=Qr;return c}function Rt(c,v,w,I,ne){if(Array.isArray(v))for(var le=0;le<v.length;le++)Rt(c,v[le],w,I,ne);else I=g(I)?!!I.capture:!!I,w=So(w),c&&c[Gt]?(c=c.i,le=String(v).toString(),le in c.g&&(v=c.g[le],w=Ze(v,w,I,ne),w>-1&&(Be(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete c.g[le],c.h--)))):c&&(c=Ds(c))&&(v=c.g[v.toString()],c=-1,v&&(c=Ze(v,w,I,ne)),(w=c>-1?v[c]:null)&&gi(w))}function gi(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[Gt])Xe(v.i,c);else{var w=c.type,I=c.proxy;v.removeEventListener?v.removeEventListener(w,I,c.capture):v.detachEvent?v.detachEvent(yi(w),I):v.addListener&&v.removeListener&&v.removeListener(I),(w=Ds(v))?(Xe(w,c),w.h==0&&(w.src=null,v[yt]=null)):Be(c)}}}function yi(c){return c in vn?vn[c]:vn[c]="on"+c}function Qr(c,v){if(c.da)c=!0;else{v=new ut(v,this);const w=c.listener,I=c.ha||c.src;c.fa&&gi(c),c=w.call(I,v)}return c}function Ds(c){return c=c[yt],c instanceof Pe?c:null}var wo="__closure_events_fn_"+(Math.random()*1e9>>>0);function So(c){return typeof c=="function"?c:(c[wo]||(c[wo]=function(v){return c.handleEvent(v)}),c[wo])}function pn(){Y.call(this),this.i=new Pe(this),this.M=this,this.G=null}x(pn,Y),pn.prototype[Gt]=!0,pn.prototype.removeEventListener=function(c,v,w,I){Rt(this,c,v,w,I)};function sn(c,v){var w,I=c.G;if(I)for(w=[];I;I=I.G)w.push(I);if(c=c.M,I=v.type||v,typeof v=="string")v=new j(v,c);else if(v instanceof j)v.target=v.target||c;else{var ne=v;v=new j(I,c),xe(v,ne)}ne=!0;let le,Ae;if(w)for(Ae=w.length-1;Ae>=0;Ae--)le=v.g=w[Ae],ne=jn(le,I,!0,v)&&ne;if(le=v.g=c,ne=jn(le,I,!0,v)&&ne,ne=jn(le,I,!1,v)&&ne,w)for(Ae=0;Ae<w.length;Ae++)le=v.g=w[Ae],ne=jn(le,I,!1,v)&&ne}pn.prototype.N=function(){if(pn.Z.N.call(this),this.i){var c=this.i;for(const v in c.g){const w=c.g[v];for(let I=0;I<w.length;I++)Be(w[I]);delete c.g[v],c.h--}}this.G=null},pn.prototype.J=function(c,v,w,I){return this.i.add(String(c),v,!1,w,I)},pn.prototype.K=function(c,v,w,I){return this.i.add(String(c),v,!0,w,I)};function jn(c,v,w,I){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();let ne=!0;for(let le=0;le<v.length;++le){const Ae=v[le];if(Ae&&!Ae.da&&Ae.capture==w){const st=Ae.listener,hn=Ae.ha||Ae.src;Ae.fa&&Xe(c.i,Ae),ne=st.call(hn,I)!==!1&&ne}}return ne&&!I.defaultPrevented}function ll(c,v){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=b(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(c,v||0)}function as(c){c.g=ll(()=>{c.g=null,c.i&&(c.i=!1,as(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class Hn extends Y{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:as(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $r(c){Y.call(this),this.h=c,this.g={}}x($r,Y);var Xr=[];function Wr(c){ze(c.g,function(v,w){this.g.hasOwnProperty(w)&&gi(v)},c),c.g={}}$r.prototype.N=function(){$r.Z.N.call(this),Wr(this)},$r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vi=d.JSON.stringify,Ns=d.JSON.parse,ya=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function ks(){}function _i(){}var or={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function _n(){j.call(this,"d")}x(_n,j);function bn(){j.call(this,"c")}x(bn,j);var Ne={},os=null;function Cr(){return os=os||new pn}Ne.Ia="serverreachability";function Ms(c){j.call(this,Ne.Ia,c)}x(Ms,j);function Re(c){const v=Cr();sn(v,new Ms(v))}Ne.STAT_EVENT="statevent";function Fi(c,v){j.call(this,Ne.STAT_EVENT,c),this.stat=v}x(Fi,j);function an(c){const v=Cr();sn(v,new Fi(v,c))}Ne.Ja="timingevent";function Rr(c,v){j.call(this,Ne.Ja,c),this.size=v}x(Rr,j);function Jr(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},v)}function _r(){this.g=!0}_r.prototype.ua=function(){this.g=!1};function cu(c,v,w,I,ne,le){c.info(function(){if(c.g)if(le){var Ae="",st=le.split("&");for(let xt=0;xt<st.length;xt++){var hn=st[xt].split("=");if(hn.length>1){const zt=hn[0];hn=hn[1];const Ur=zt.split("_");Ae=Ur.length>=2&&Ur[1]=="type"?Ae+(zt+"="+hn+"&"):Ae+(zt+"=redacted&")}}}else Ae=null;else Ae=le;return"XMLHTTP REQ ("+I+") [attempt "+ne+"]: "+v+`
`+w+`
`+Ae})}function ul(c,v,w,I,ne,le,Ae){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+ne+"]: "+v+`
`+w+`
`+le+" "+Ae})}function Wn(c,v,w,I){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ao(c,w)+(I?" "+I:"")})}function xr(c,v){c.info(function(){return"TIMEOUT: "+v})}_r.prototype.info=function(){};function Ao(c,v){if(!c.g)return v;if(!v)return null;try{const le=JSON.parse(v);if(le){for(c=0;c<le.length;c++)if(Array.isArray(le[c])){var w=le[c];if(!(w.length<2)){var I=w[1];if(Array.isArray(I)&&!(I.length<1)){var ne=I[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(let Ae=1;Ae<I.length;Ae++)I[Ae]=""}}}}return vi(le)}catch{return v}}var bi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},en;function Vs(){}x(Vs,ks),Vs.prototype.g=function(){return new XMLHttpRequest},en=new Vs;function Ir(c){return encodeURIComponent(String(c))}function Ps(c){var v=1;c=c.split(":");const w=[];for(;v>0&&c.length;)w.push(c.shift()),v--;return c.length&&w.push(c.join(":")),w}function lr(c,v,w,I){this.j=c,this.i=v,this.l=w,this.S=I||1,this.V=new $r(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zr}function Zr(){this.i=null,this.g="",this.h=!1}var Lt={},$t={};function Ln(c,v,w){c.M=1,c.A=cs(ln(v)),c.u=w,c.R=!0,Ki(c,null)}function Ki(c,v){c.F=Date.now(),Fn(c),c.B=ln(c.A);var w=c.B,I=c.S;Array.isArray(I)||(I=[String(I)]),Ta(w.i,"t",I),c.C=0,w=c.j.L,c.h=new Zr,c.g=wn(c.j,w?v:null,!c.u),c.P>0&&(c.O=new Hn(b(c.Y,c,c.g),c.P)),v=c.V,w=c.g,I=c.ba;var ne="readystatechange";Array.isArray(ne)||(ne&&(Xr[0]=ne.toString()),ne=Xr);for(let le=0;le<ne.length;le++){const Ae=ke(w,ne[le],I||v.handleEvent,!1,v.h||v);if(!Ae)break;v.g[Ae.key]=Ae}v=c.J?H(c.J):{},c.u?(c.v||(c.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,v)):(c.v="GET",c.g.ea(c.B,c.v,null,v)),Re(),cu(c.i,c.v,c.B,c.l,c.S,c.u)}lr.prototype.ba=function(c){c=c.target;const v=this.O;v&&oi(c)==3?v.j():this.Y(c)},lr.prototype.Y=function(c){try{if(c==this.g)e:{const st=oi(this.g),hn=this.g.ya(),xt=this.g.ca();if(!(st<3)&&(st!=3||this.g&&(this.h.h||this.g.la()||cn(this.g)))){this.K||st!=4||hn==7||(hn==8||xt<=0?Re(3):Re(2)),Or(this);var v=this.g.ca();this.X=v;var w=hu(this);if(this.o=v==200,ul(this.i,this.v,this.B,this.l,this.S,st,v),this.o){if(this.U&&!this.L){t:{if(this.g){var I,ne=this.g;if((I=ne.g?ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(I)){var le=I;break t}}le=null}if(c=le)Wn(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rn(this,c);else{this.o=!1,this.m=3,an(12),En(this),Ot(this);break e}}if(this.R){c=!0;let zt;for(;!this.K&&this.C<w.length;)if(zt=Co(this,w),zt==$t){st==4&&(this.m=4,an(14),c=!1),Wn(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==Lt){this.m=4,an(15),Wn(this.i,this.l,w,"[Invalid Chunk]"),c=!1;break}else Wn(this.i,this.l,zt,null),Rn(this,zt);if(ei(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||w.length!=0||this.h.h||(this.m=1,an(16),c=!1),this.o=this.o&&c,!c)Wn(this.i,this.l,w,"[Invalid Chunked Response]"),En(this),Ot(this);else if(w.length>0&&!this.W){this.W=!0;var Ae=this.j;Ae.g==this&&Ae.aa&&!Ae.P&&(Ae.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),fs(Ae),Ae.P=!0,an(11))}}else Wn(this.i,this.l,w,null),Rn(this,w);st==4&&En(this),this.o&&!this.K&&(st==4?Ji(this.j,this):(this.o=!1,Fn(this)))}else Xi(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,an(12)):(this.m=0,an(13)),En(this),Ot(this)}}}catch{}finally{}};function hu(c){if(!ei(c))return c.g.la();const v=cn(c.g);if(v==="")return"";let w="";const I=v.length,ne=oi(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return En(c),Ot(c),"";c.h.i=new d.TextDecoder}for(let le=0;le<I;le++)c.h.h=!0,w+=c.h.i.decode(v[le],{stream:!(ne&&le==I-1)});return v.length=0,c.h.g+=w,c.C=0,c.h.g}function ei(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Co(c,v){var w=c.C,I=v.indexOf(`
`,w);return I==-1?$t:(w=Number(v.substring(w,I)),isNaN(w)?Lt:(I+=1,I+w>v.length?$t:(v=v.slice(I,I+w),c.C=I+w,v)))}lr.prototype.cancel=function(){this.K=!0,En(this)};function Fn(c){c.T=Date.now()+c.H,js(c,c.H)}function js(c,v){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Jr(b(c.aa,c),v)}function Or(c){c.D&&(d.clearTimeout(c.D),c.D=null)}lr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(xr(this.i,this.B),this.M!=2&&(Re(),an(17)),En(this),this.m=2,Ot(this)):js(this,this.T-c)};function Ot(c){c.j.I==0||c.K||Ji(c.j,c)}function En(c){Or(c);var v=c.O;v&&typeof v.dispose=="function"&&v.dispose(),c.O=null,Wr(c.V),c.g&&(v=c.g,c.g=null,v.abort(),v.dispose())}function Rn(c,v){try{var w=c.j;if(w.I!=0&&(w.g==c||Nr(w.h,c))){if(!c.L&&Nr(w.h,c)&&w.I==3){try{var I=w.Ba.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var ne=I;if(ne[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<c.F)Ca(w),Ai(w);else break e;Ri(w),an(18)}}else w.xa=ne[1],0<w.xa-w.K&&ne[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Jr(b(w.Va,w),6e3));Dr(w.h)<=1&&w.ta&&(w.ta=void 0)}else jr(w,11)}else if((c.L||w.g==c)&&Ca(w),!M(v))for(ne=w.Ba.g.parse(v),v=0;v<ne.length;v++){let xt=ne[v];const zt=xt[0];if(!(zt<=w.K))if(w.K=zt,xt=xt[1],w.I==2)if(xt[0]=="c"){w.M=xt[1],w.ba=xt[2];const Ur=xt[3];Ur!=null&&(w.ka=Ur,w.j.info("VER="+w.ka));const zr=xt[4];zr!=null&&(w.za=zr,w.j.info("SVER="+w.za));const Tr=xt[5];Tr!=null&&typeof Tr=="number"&&Tr>0&&(I=1.5*Tr,w.O=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const ui=c.g;if(ui){const ps=ui.g?ui.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ps){var le=I.h;le.g||ps.indexOf("spdy")==-1&&ps.indexOf("quic")==-1&&ps.indexOf("h2")==-1||(le.j=le.l,le.g=new Set,le.h&&(ti(le,le.h),le.h=null))}if(I.G){const Oa=ui.g?ui.g.getResponseHeader("X-HTTP-Session-Id"):null;Oa&&(I.wa=Oa,Nt(I.J,I.G,Oa))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-c.F,w.j.info("Handshake RTT: "+w.T+"ms")),I=w;var Ae=c;if(I.na=Ia(I,I.L?I.ba:null,I.W),Ae.L){va(I.h,Ae);var st=Ae,hn=I.O;hn&&(st.H=hn),st.D&&(Or(st),Fn(st)),I.g=Ae}else Bs(I);w.i.length>0&&Ci(w)}else xt[0]!="stop"&&xt[0]!="close"||jr(w,7);else w.I==3&&(xt[0]=="stop"||xt[0]=="close"?xt[0]=="stop"?jr(w,7):hs(w):xt[0]!="noop"&&w.l&&w.l.qa(xt),w.A=0)}}Re(4)}catch{}}var on=class{constructor(c,v){this.g=c,this.map=v}};function Ei(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ls(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Dr(c){return c.h?1:c.g?c.g.size:0}function Nr(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function ti(c,v){c.g?c.g.add(v):c.h=v}function va(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}Ei.prototype.cancel=function(){if(this.i=us(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function us(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const w of c.g.values())v=v.concat(w.G);return v}return Q(c.i)}var Ro=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ct(c,v){if(c){c=c.split("&");for(let w=0;w<c.length;w++){const I=c[w].indexOf("=");let ne,le=null;I>=0?(ne=c[w].substring(0,I),le=c[w].substring(I+1)):ne=c[w],v(ne,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function ur(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;c instanceof ur?(this.l=c.l,un(this,c.j),this.o=c.o,this.g=c.g,kr(this,c.u),this.h=c.h,_a(this,hl(c.i)),this.m=c.m):c&&(v=String(c).match(Ro))?(this.l=!1,un(this,v[1]||"",!0),this.o=_t(v[2]||""),this.g=_t(v[3]||"",!0),kr(this,v[4]),this.h=_t(v[5]||"",!0),_a(this,v[6]||"",!0),this.m=_t(v[7]||"")):(this.l=!1,this.i=new si(null,this.l))}ur.prototype.toString=function(){const c=[];var v=this.j;v&&c.push(ni(v,ri,!0),":");var w=this.g;return(w||v=="file")&&(c.push("//"),(v=this.o)&&c.push(ni(v,ri,!0),"@"),c.push(Ir(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&c.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(ni(w,w.charAt(0)=="/"?Ls:ba,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",ni(w,xo)),c.join("")},ur.prototype.resolve=function(c){const v=ln(this);let w=!!c.j;w?un(v,c.j):w=!!c.o,w?v.o=c.o:w=!!c.g,w?v.g=c.g:w=c.u!=null;var I=c.h;if(w)kr(v,c.u);else if(w=!!c.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var ne=v.h.lastIndexOf("/");ne!=-1&&(I=v.h.slice(0,ne+1)+I)}if(ne=I,ne==".."||ne==".")I="";else if(ne.indexOf("./")!=-1||ne.indexOf("/.")!=-1){I=ne.lastIndexOf("/",0)==0,ne=ne.split("/");const le=[];for(let Ae=0;Ae<ne.length;){const st=ne[Ae++];st=="."?I&&Ae==ne.length&&le.push(""):st==".."?((le.length>1||le.length==1&&le[0]!="")&&le.pop(),I&&Ae==ne.length&&le.push("")):(le.push(st),I=!0)}I=le.join("/")}else I=ne}return w?v.h=I:w=c.i.toString()!=="",w?_a(v,hl(c.i)):w=!!c.m,w&&(v.m=c.m),v};function ln(c){return new ur(c)}function un(c,v,w){c.j=w?_t(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function kr(c,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);c.u=v}else c.u=null}function _a(c,v,w){v instanceof si?(c.i=v,ai(c.i,c.l)):(w||(v=ni(v,ii)),c.i=new si(v,c.l))}function Nt(c,v,w){c.i.set(v,w)}function cs(c){return Nt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function _t(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ni(c,v,w){return typeof c=="string"?(c=encodeURI(c).replace(v,xn),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function xn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ri=/[#\/\?@]/g,ba=/[#\?:]/g,Ls=/[#\?]/g,ii=/[#\?@]/g,xo=/#/g;function si(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function Jn(c){c.g||(c.g=new Map,c.h=0,c.i&&ct(c.i,function(v,w){c.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}i=si.prototype,i.add=function(c,v){Jn(this),this.i=null,c=mn(this,c);let w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(v),this.h+=1,this};function cl(c,v){Jn(c),v=mn(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function vt(c,v){return Jn(c),v=mn(c,v),c.g.has(v)}i.forEach=function(c,v){Jn(this),this.g.forEach(function(w,I){w.forEach(function(ne){c.call(v,ne,I,this)},this)},this)};function Ea(c,v){Jn(c);let w=[];if(typeof v=="string")vt(c,v)&&(w=w.concat(c.g.get(mn(c,v))));else for(c=Array.from(c.g.values()),v=0;v<c.length;v++)w=w.concat(c[v]);return w}i.set=function(c,v){return Jn(this),this.i=null,c=mn(this,c),vt(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},i.get=function(c,v){return c?(c=Ea(this,c),c.length>0?String(c[0]):v):v};function Ta(c,v,w){cl(c,v),w.length>0&&(c.i=null,c.g.set(mn(c,v),Q(w)),c.h+=w.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(let I=0;I<v.length;I++){var w=v[I];const ne=Ir(w);w=Ea(this,w);for(let le=0;le<w.length;le++){let Ae=ne;w[le]!==""&&(Ae+="="+Ir(w[le])),c.push(Ae)}}return this.i=c.join("&")};function hl(c){const v=new si;return v.i=c.i,c.g&&(v.g=new Map(c.g),v.h=c.h),v}function mn(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function ai(c,v){v&&!c.j&&(Jn(c),c.i=null,c.g.forEach(function(w,I){const ne=I.toLowerCase();I!=ne&&(cl(this,I),Ta(this,ne,w))},c)),c.j=v}function cr(c,v){const w=new _r;if(d.Image){const I=new Image;I.onload=R(br,w,"TestLoadImage: loaded",!0,v,I),I.onerror=R(br,w,"TestLoadImage: error",!1,v,I),I.onabort=R(br,w,"TestLoadImage: abort",!1,v,I),I.ontimeout=R(br,w,"TestLoadImage: timeout",!1,v,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else v(!1)}function Mr(c,v){const w=new _r,I=new AbortController,ne=setTimeout(()=>{I.abort(),br(w,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:I.signal}).then(le=>{clearTimeout(ne),le.ok?br(w,"TestPingServer: ok",!0,v):br(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(ne),br(w,"TestPingServer: error",!1,v)})}function br(c,v,w,I,ne){try{ne&&(ne.onload=null,ne.onerror=null,ne.onabort=null,ne.ontimeout=null),I(w)}catch{}}function Gi(){this.g=new ya}function Ut(c){this.i=c.Sb||null,this.h=c.ab||!1}x(Ut,ks),Ut.prototype.g=function(){return new Kn(this.i,this.h)};function Kn(c,v){pn.call(this),this.H=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Kn,pn),i=Kn.prototype,i.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=v,this.readyState=1,Er(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(v.body=c),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vr(this)),this.readyState=0},i.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Er(this)),this.g&&(this.readyState=3,Er(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ti(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ti(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}i.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?Vr(this):Er(this),this.readyState==3&&Ti(this)}},i.Oa=function(c){this.g&&(this.response=this.responseText=c,Vr(this))},i.Na=function(c){this.g&&(this.response=c,Vr(this))},i.ga=function(){this.g&&Vr(this)};function Vr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Er(c)}i.setRequestHeader=function(c,v){this.A.append(c,v)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=v.next();return c.join(`\r
`)};function Er(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Kn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Tn(c){let v="";return ze(c,function(w,I){v+=I,v+=":",v+=w,v+=`\r
`}),v}function Us(c,v,w){e:{for(I in w){var I=!1;break e}I=!0}I||(w=Tn(w),typeof c=="string"?w!=null&&Ir(w):Nt(c,v,w))}function mt(c){pn.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(mt,pn);var Pr=/^https?$/i,wa=["POST","PUT"];i=mt.prototype,i.Fa=function(c){this.H=c},i.ea=function(c,v,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():en.g(),this.g.onreadystatechange=N(b(this.Ca,this));try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(le){Yi(this,le);return}if(c=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var ne in I)w.set(ne,I[ne]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const le of I.keys())w.set(le,I.get(le));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find(le=>le.toLowerCase()=="content-type"),ne=d.FormData&&c instanceof d.FormData,!(Array.prototype.indexOf.call(wa,v,void 0)>=0)||I||ne||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[le,Ae]of w)this.g.setRequestHeader(le,Ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(le){Yi(this,le)}};function Yi(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.o=5,Qi(c),wi(c)}function Qi(c){c.A||(c.A=!0,sn(c,"complete"),sn(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,sn(this,"complete"),sn(this,"abort"),wi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wi(this,!0)),mt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?$i(this):this.Xa())},i.Xa=function(){$i(this)};function $i(c){if(c.h&&typeof u<"u"){if(c.v&&oi(c)==4)setTimeout(c.Ca.bind(c),0);else if(sn(c,"readystatechange"),oi(c)==4){c.h=!1;try{const le=c.ca();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var I;if(I=le===0){let Ae=String(c.D).match(Ro)[1]||null;!Ae&&d.self&&d.self.location&&(Ae=d.self.location.protocol.slice(0,-1)),I=!Pr.test(Ae?Ae.toLowerCase():"")}w=I}if(w)sn(c,"complete"),sn(c,"success");else{c.o=6;try{var ne=oi(c)>2?c.g.statusText:""}catch{ne=""}c.l=ne+" ["+c.ca()+"]",Qi(c)}}finally{wi(c)}}}}function wi(c,v){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const w=c.g;c.g=null,v||sn(c,"ready");try{w.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function oi(c){return c.g?c.g.readyState:0}i.ca=function(){try{return oi(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),Ns(v)}};function cn(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Xi(c){const v={};c=(c.g&&oi(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(M(c[I]))continue;var w=Ps(c[I]);const ne=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const le=v[ne]||[];v[ne]=le,le.push(w)}qe(v,function(I){return I.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Si(c,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||v}function li(c){this.za=0,this.i=[],this.j=new _r,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Si("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Si("baseRetryDelayMs",5e3,c),this.Za=Si("retryDelaySeedMs",1e4,c),this.Ta=Si("forwardChannelMaxRetries",2,c),this.va=Si("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Ei(c&&c.concurrentRequestLimit),this.Ba=new Gi,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=li.prototype,i.ka=8,i.I=1,i.connect=function(c,v,w,I){an(0),this.W=c,this.H=v||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.J=Ia(this,null,this.W),Ci(this)};function hs(c){if(Sa(c),c.I==3){var v=c.V++,w=ln(c.J);if(Nt(w,"SID",c.M),Nt(w,"RID",v),Nt(w,"TYPE","terminate"),Wi(c,w),v=new lr(c,c.j,v),v.M=2,v.A=cs(ln(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&d.Image&&(new Image().src=v.A,w=!0),w||(v.g=wn(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Fn(v)}xa(c)}function Ai(c){c.g&&(fs(c),c.g.cancel(),c.g=null)}function Sa(c){Ai(c),c.v&&(d.clearTimeout(c.v),c.v=null),Ca(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&d.clearTimeout(c.m),c.m=null)}function Ci(c){if(!ls(c.h)&&!c.m){c.m=!0;var v=c.Ea;it||k(),$e||(it(),$e=!0),P.add(v,c),c.D=0}}function Aa(c,v){return Dr(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=v.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Jr(b(c.Ea,c,v),Ra(c,c.D)),c.D++,!0)}i.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const ne=new lr(this,this.j,c);let le=this.o;if(this.U&&(le?(le=H(le),xe(le,this.U)):le=this.U),this.u!==null||this.R||(ne.J=le,le=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=Io(this,ne,v),w=ln(this.J),Nt(w,"RID",c),Nt(w,"CVER",22),this.G&&Nt(w,"X-HTTP-Session-Id",this.G),Wi(this,w),le&&(this.R?v="headers="+Ir(Tn(le))+"&"+v:this.u&&Us(w,this.u,le)),ti(this.h,ne),this.Ra&&Nt(w,"TYPE","init"),this.S?(Nt(w,"$req",v),Nt(w,"SID","null"),ne.U=!0,Ln(ne,w,null)):Ln(ne,w,v),this.I=2}}else this.I==3&&(c?zs(this,c):this.i.length==0||ls(this.h)||zs(this))};function zs(c,v){var w;v?w=v.l:w=c.V++;const I=ln(c.J);Nt(I,"SID",c.M),Nt(I,"RID",w),Nt(I,"AID",c.K),Wi(c,I),c.u&&c.o&&Us(I,c.u,c.o),w=new lr(c,c.j,w,c.D+1),c.u===null&&(w.J=c.o),v&&(c.i=v.G.concat(c.i)),v=Io(c,w,1e3),w.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),ti(c.h,w),Ln(w,I,v)}function Wi(c,v){c.H&&ze(c.H,function(w,I){Nt(v,I,w)}),c.l&&ze({},function(w,I){Nt(v,I,w)})}function Io(c,v,w){w=Math.min(c.i.length,w);const I=c.l?b(c.l.Ka,c.l,c):null;e:{var ne=c.i;let st=-1;for(;;){const hn=["count="+w];st==-1?w>0?(st=ne[0].g,hn.push("ofs="+st)):st=0:hn.push("ofs="+st);let xt=!0;for(let zt=0;zt<w;zt++){var le=ne[zt].g;const Ur=ne[zt].map;if(le-=st,le<0)st=Math.max(0,ne[zt].g-100),xt=!1;else try{le="req"+le+"_"||"";try{var Ae=Ur instanceof Map?Ur:Object.entries(Ur);for(const[zr,Tr]of Ae){let ui=Tr;g(Tr)&&(ui=vi(Tr)),hn.push(le+zr+"="+encodeURIComponent(ui))}}catch(zr){throw hn.push(le+"type="+encodeURIComponent("_badmap")),zr}}catch{I&&I(Ur)}}if(xt){Ae=hn.join("&");break e}}Ae=void 0}return c=c.i.splice(0,w),v.G=c,Ae}function Bs(c){if(!c.g&&!c.v){c.Y=1;var v=c.Da;it||k(),$e||(it(),$e=!0),P.add(v,c),c.A=0}}function Ri(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Jr(b(c.Da,c),Ra(c,c.A)),c.A++,!0)}i.Da=function(){if(this.v=null,Oo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Jr(b(this.Wa,this),c)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,an(10),Ai(this),Oo(this))};function fs(c){c.B!=null&&(d.clearTimeout(c.B),c.B=null)}function Oo(c){c.g=new lr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var v=ln(c.na);Nt(v,"RID","rpc"),Nt(v,"SID",c.M),Nt(v,"AID",c.K),Nt(v,"CI",c.F?"0":"1"),!c.F&&c.ia&&Nt(v,"TO",c.ia),Nt(v,"TYPE","xmlhttp"),Wi(c,v),c.u&&c.o&&Us(v,c.u,c.o),c.O&&(c.g.H=c.O);var w=c.g;c=c.ba,w.M=1,w.A=cs(ln(v)),w.u=null,w.R=!0,Ki(w,c)}i.Va=function(){this.C!=null&&(this.C=null,Ai(this),Ri(this),an(19))};function Ca(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Ji(c,v){var w=null;if(c.g==v){Ca(c),fs(c),c.g=null;var I=2}else if(Nr(c.h,v))w=v.G,va(c.h,v),I=1;else return;if(c.I!=0){if(v.o)if(I==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var ne=c.D;I=Cr(),sn(I,new Rr(I,w)),Ci(c)}else Bs(c);else if(ne=v.m,ne==3||ne==0&&v.X>0||!(I==1&&Aa(c,v)||I==2&&Ri(c)))switch(w&&w.length>0&&(v=c.h,v.i=v.i.concat(w)),ne){case 1:jr(c,5);break;case 4:jr(c,10);break;case 3:jr(c,6);break;default:jr(c,2)}}}function Ra(c,v){let w=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(w*=2),w*v}function jr(c,v){if(c.j.info("Error code "+v),v==2){var w=b(c.bb,c),I=c.Ua;const ne=!I;I=new ur(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||un(I,"https"),cs(I),ne?cr(I.toString(),w):Mr(I.toString(),w)}else an(2);c.I=0,c.l&&c.l.pa(v),xa(c),Sa(c)}i.bb=function(c){c?(this.j.info("Successfully pinged google.com"),an(2)):(this.j.info("Failed to ping google.com"),an(1))};function xa(c){if(c.I=0,c.ja=[],c.l){const v=us(c.h);(v.length!=0||c.i.length!=0)&&(te(c.ja,v),te(c.ja,c.i),c.h.i.length=0,Q(c.i),c.i.length=0),c.l.oa()}}function Ia(c,v,w){var I=w instanceof ur?ln(w):new ur(w);if(I.g!="")v&&(I.g=v+"."+I.g),kr(I,I.u);else{var ne=d.location;I=ne.protocol,v=v?v+"."+ne.hostname:ne.hostname,ne=+ne.port;const le=new ur(null);I&&un(le,I),v&&(le.g=v),ne&&kr(le,ne),w&&(le.h=w),I=le}return w=c.G,v=c.wa,w&&v&&Nt(I,w,v),Nt(I,"VER",c.ka),Wi(c,I),I}function wn(c,v,w){if(v&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Aa&&!c.ma?new mt(new Ut({ab:w})):new mt(c.ma),v.Fa(c.L),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ds(){}i=ds.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Lr(){}Lr.prototype.g=function(c,v){return new Gn(c,v)};function Gn(c,v){pn.call(this),this.g=new li(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(c?c["X-WebChannel-Client-Profile"]=v.sa:c={"X-WebChannel-Client-Profile":v.sa}),this.g.U=c,(c=v&&v.Qb)&&!M(c)&&(this.g.u=c),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!M(v)&&(this.g.G=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new xi(this)}x(Gn,pn),Gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){hs(this.g)},Gn.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.v&&(w={},w.__data__=vi(c),c=w);v.i.push(new on(v.Ya++,c)),v.I==3&&Ci(v)},Gn.prototype.N=function(){this.g.l=null,delete this.j,hs(this.g),delete this.g,Gn.Z.N.call(this)};function qs(c){_n.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const w in v){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}x(qs,_n);function Do(){bn.call(this),this.status=1}x(Do,bn);function xi(c){this.g=c}x(xi,ds),xi.prototype.ra=function(){sn(this.g,"a")},xi.prototype.qa=function(c){sn(this.g,new qs(c))},xi.prototype.pa=function(c){sn(this.g,new Do)},xi.prototype.oa=function(){sn(this.g,"b")},Lr.prototype.createWebChannel=Lr.prototype.g,Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,LE=function(){return new Lr},jE=function(){return Cr()},PE=Ne,hm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},bi.NO_ERROR=0,bi.TIMEOUT=8,bi.HTTP_ERROR=6,Zh=bi,Pt.COMPLETE="complete",VE=Pt,_i.EventType=or,or.OPEN="a",or.CLOSE="b",or.ERROR="c",or.MESSAGE="d",pn.prototype.listen=pn.prototype.J,$u=_i,mt.prototype.listenOnce=mt.prototype.K,mt.prototype.getLastError=mt.prototype.Ha,mt.prototype.getLastErrorCode=mt.prototype.ya,mt.prototype.getStatus=mt.prototype.ca,mt.prototype.getResponseJson=mt.prototype.La,mt.prototype.getResponseText=mt.prototype.la,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Fa,ME=mt}).apply(typeof zh<"u"?zh:typeof self<"u"?self:typeof window<"u"?window:{});const N0="@firebase/firestore",k0="4.9.2";class mr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mr.UNAUTHENTICATED=new mr(null),mr.GOOGLE_CREDENTIALS=new mr("google-credentials-uid"),mr.FIRST_PARTY=new mr("first-party-uid"),mr.MOCK_USER=new mr("mock-user");let au="12.3.0";const nl=new Dm("@firebase/firestore");function zl(){return nl.logLevel}function Le(i,...e){if(nl.logLevel<=St.DEBUG){const n=e.map(Fm);nl.debug(`Firestore (${au}): ${i}`,...n)}}function pa(i,...e){if(nl.logLevel<=St.ERROR){const n=e.map(Fm);nl.error(`Firestore (${au}): ${i}`,...n)}}function Wl(i,...e){if(nl.logLevel<=St.WARN){const n=e.map(Fm);nl.warn(`Firestore (${au}): ${i}`,...n)}}function Fm(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function Je(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,UE(i,s,n)}function UE(i,e,n){let s=`FIRESTORE (${au}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw pa(s),new Error(s)}function jt(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||UE(e,o,s)}function lt(i,e){return i}const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ke extends ga{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class mo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class zE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(mr.UNAUTHENTICATED)))}shutdown(){}}class UI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class zI{constructor(e){this.t=e,this.currentUser=mr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){jt(this.o===void 0,42304);let s=this.i;const o=_=>this.i!==s?(s=this.i,n(_)):Promise.resolve();let u=new mo;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new mo,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const _=u;e.enqueueRetryable((async()=>{await _.promise,await o(this.currentUser)}))},g=_=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((_=>g(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?g(_):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new mo)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(jt(typeof s.accessToken=="string",31837,{l:s}),new zE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return jt(e===null||typeof e=="string",2055,{h:e}),new mr(e)}}class BI{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=mr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new BI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(mr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class M0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ts(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){jt(this.o===void 0,3512);const s=u=>{u.error!=null&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Le("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new M0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(jt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new M0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function FI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Km{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=FI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function At(i,e){return i<e?-1:i>e?1:0}function fm(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return $p(o)===$p(u)?At(o,u):$p(o)?1:-1}return At(i.length,e.length)}const KI=55296,GI=57343;function $p(i){const e=i.charCodeAt(0);return e>=KI&&e<=GI}function Jl(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const V0="__name__";class bs{constructor(e,n,s){n===void 0?n=0:n>e.length&&Je(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Je(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return bs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof bs?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=bs.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return At(e.length,n.length)}static compareSegments(e,n){const s=bs.isNumericId(e),o=bs.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?bs.extractNumericId(e).compare(bs.extractNumericId(n)):fm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return po.fromString(e.substring(4,e.length-2))}}class fn extends bs{construct(e,n,s){return new fn(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ke(Ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new fn(n)}static emptyPath(){return new fn([])}}const YI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sr extends bs{construct(e,n,s){return new sr(e,n,s)}static isValidIdentifier(e){return YI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===V0}static keyField(){return new sr([V0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new Ke(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new Ke(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[o+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new Ke(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=_,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(s+=g,o++):(u(),o++)}if(u(),d)throw new Ke(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sr(n)}static emptyPath(){return new sr([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(fn.fromString(e))}static fromName(e){return new Qe(fn.fromString(e).popFirst(5))}static empty(){return new Qe(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new fn(e.slice()))}}function QI(i,e,n){if(!n)throw new Ke(Ee.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function $I(i,e,n,s){if(e===!0&&s===!0)throw new Ke(Ee.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function P0(i){if(!Qe.isDocumentKey(i))throw new Ke(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function BE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Gm(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Je(12329,{type:typeof i})}function fc(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ke(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gm(i);throw new Ke(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Pn(i,e){const n={typeString:i};return e&&(n.value=e),n}function Rc(i,e){if(!BE(i))throw new Ke(Ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const d=i[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new Ke(Ee.INVALID_ARGUMENT,n);return!0}const j0=-62135596800,L0=1e6;class Zt{static now(){return Zt.fromMillis(Date.now())}static fromDate(e){return Zt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*L0);return new Zt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ke(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ke(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<j0)throw new Ke(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ke(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/L0}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rc(e,Zt._jsonSchema))return new Zt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-j0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Zt._jsonSchemaVersion="firestore/timestamp/1.0",Zt._jsonSchema={type:Pn("string",Zt._jsonSchemaVersion),seconds:Pn("number"),nanoseconds:Pn("number")};class at{static fromTimestamp(e){return new at(e)}static min(){return new at(new Zt(0,0))}static max(){return new at(new Zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const dc=-1;function XI(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=at.fromTimestamp(s===1e9?new Zt(n+1,0):new Zt(n,s));return new go(o,Qe.empty(),e)}function WI(i){return new go(i.readTime,i.key,dc)}class go{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new go(at.min(),Qe.empty(),dc)}static max(){return new go(at.max(),Qe.empty(),dc)}}function JI(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Qe.comparator(i.documentKey,e.documentKey),n!==0?n:At(i.largestBatchId,e.largestBatchId))}const ZI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ou(i){if(i.code!==Ee.FAILED_PRECONDITION||i.message!==ZI)throw i;Le("LocalStore","Unexpectedly lost primary lease")}class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ve(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ve?n:ve.resolve(n)}catch(n){return ve.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ve.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ve.reject(n)}static resolve(e){return new ve(((n,s)=>{n(e)}))}static reject(e){return new ve(((n,s)=>{s(e)}))}static waitFor(e){return new ve(((n,s)=>{let o=0,u=0,d=!1;e.forEach((g=>{++o,g.next((()=>{++u,d&&u===o&&n()}),(_=>s(_)))})),d=!0,u===o&&n()}))}static or(e){let n=ve.resolve(!1);for(const s of e)n=n.next((o=>o?ve.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ve(((s,o)=>{const u=e.length,d=new Array(u);let g=0;for(let _=0;_<u;_++){const b=_;n(e[b]).next((R=>{d[b]=R,++g,g===u&&s(d)}),(R=>o(R)))}}))}static doWhile(e,n){return new ve(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function t2(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function lu(i){return i.name==="IndexedDbTransactionError"}class Mf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mf.ce=-1;const Ym=-1;function Vf(i){return i==null}function gf(i){return i===0&&1/i==-1/0}function n2(i){return typeof i=="number"&&Number.isInteger(i)&&!gf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const qE="";function r2(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=U0(e)),e=i2(i.get(n),e);return U0(e)}function i2(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case qE:n+="";break;default:n+=u}}return n}function U0(i){return i+qE+""}function z0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function il(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function HE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class dn{constructor(e,n){this.comparator=e,this.root=n||ir.EMPTY}insert(e,n){return new dn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ir.BLACK,null,null))}remove(e){return new dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ir.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bh(this.root,e,this.comparator,!0)}}class Bh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ir{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??ir.RED,this.left=o??ir.EMPTY,this.right=u??ir.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new ir(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ir.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return ir.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ir.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ir.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Je(27949);return e+(this.isRed()?0:1)}}ir.EMPTY=null,ir.RED=!0,ir.BLACK=!1;ir.EMPTY=new class{constructor(){this.size=0}get key(){throw Je(57766)}get value(){throw Je(16141)}get color(){throw Je(16727)}get left(){throw Je(29726)}get right(){throw Je(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new ir(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qn{constructor(e){this.comparator=e,this.data=new dn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new B0(this.data.getIterator())}getIteratorFrom(e){return new B0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof qn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new qn(this.comparator);return n.data=e,n}}class B0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class rs{constructor(e){this.fields=e,e.sort(sr.comparator)}static empty(){return new rs([])}unionWith(e){let n=new qn(sr.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new rs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class FE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ar{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new FE("Invalid base64 string: "+u):u}})(e);return new ar(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new ar(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ar.EMPTY_BYTE_STRING=new ar("");const s2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yo(i){if(jt(!!i,39018),typeof i=="string"){let e=0;const n=s2.exec(i);if(jt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Cn(i.seconds),nanos:Cn(i.nanos)}}function Cn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function vo(i){return typeof i=="string"?ar.fromBase64String(i):ar.fromUint8Array(i)}const KE="server_timestamp",GE="__type__",YE="__previous_value__",QE="__local_write_time__";function Qm(i){return(i?.mapValue?.fields||{})[GE]?.stringValue===KE}function Pf(i){const e=i.mapValue.fields[YE];return Qm(e)?Pf(e):e}function pc(i){const e=yo(i.mapValue.fields[QE].timestampValue);return new Zt(e.seconds,e.nanos)}class a2{constructor(e,n,s,o,u,d,g,_,b,R){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=b,this.isUsingEmulator=R}}const yf="(default)";class mc{constructor(e,n){this.projectId=e,this.database=n||yf}static empty(){return new mc("","")}get isDefaultDatabase(){return this.database===yf}isEqual(e){return e instanceof mc&&e.projectId===this.projectId&&e.database===this.database}}const $E="__type__",o2="__max__",qh={mapValue:{}},XE="__vector__",vf="value";function _o(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Qm(i)?4:u2(i)?9007199254740991:l2(i)?10:11:Je(28295,{value:i})}function Is(i,e){if(i===e)return!0;const n=_o(i);if(n!==_o(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return pc(i).isEqual(pc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=yo(o.timestampValue),g=yo(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return vo(o.bytesValue).isEqual(vo(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return Cn(o.geoPointValue.latitude)===Cn(u.geoPointValue.latitude)&&Cn(o.geoPointValue.longitude)===Cn(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Cn(o.integerValue)===Cn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Cn(o.doubleValue),g=Cn(u.doubleValue);return d===g?gf(d)===gf(g):isNaN(d)&&isNaN(g)}return!1})(i,e);case 9:return Jl(i.arrayValue.values||[],e.arrayValue.values||[],Is);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},g=u.mapValue.fields||{};if(z0(d)!==z0(g))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(g[_]===void 0||!Is(d[_],g[_])))return!1;return!0})(i,e);default:return Je(52216,{left:i})}}function gc(i,e){return(i.values||[]).find((n=>Is(n,e)))!==void 0}function Zl(i,e){if(i===e)return 0;const n=_o(i),s=_o(e);if(n!==s)return At(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return At(i.booleanValue,e.booleanValue);case 2:return(function(u,d){const g=Cn(u.integerValue||u.doubleValue),_=Cn(d.integerValue||d.doubleValue);return g<_?-1:g>_?1:g===_?0:isNaN(g)?isNaN(_)?0:-1:1})(i,e);case 3:return q0(i.timestampValue,e.timestampValue);case 4:return q0(pc(i),pc(e));case 5:return fm(i.stringValue,e.stringValue);case 6:return(function(u,d){const g=vo(u),_=vo(d);return g.compareTo(_)})(i.bytesValue,e.bytesValue);case 7:return(function(u,d){const g=u.split("/"),_=d.split("/");for(let b=0;b<g.length&&b<_.length;b++){const R=At(g[b],_[b]);if(R!==0)return R}return At(g.length,_.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,d){const g=At(Cn(u.latitude),Cn(d.latitude));return g!==0?g:At(Cn(u.longitude),Cn(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return H0(i.arrayValue,e.arrayValue);case 10:return(function(u,d){const g=u.fields||{},_=d.fields||{},b=g[vf]?.arrayValue,R=_[vf]?.arrayValue,x=At(b?.values?.length||0,R?.values?.length||0);return x!==0?x:H0(b,R)})(i.mapValue,e.mapValue);case 11:return(function(u,d){if(u===qh.mapValue&&d===qh.mapValue)return 0;if(u===qh.mapValue)return 1;if(d===qh.mapValue)return-1;const g=u.fields||{},_=Object.keys(g),b=d.fields||{},R=Object.keys(b);_.sort(),R.sort();for(let x=0;x<_.length&&x<R.length;++x){const N=fm(_[x],R[x]);if(N!==0)return N;const Q=Zl(g[_[x]],b[R[x]]);if(Q!==0)return Q}return At(_.length,R.length)})(i.mapValue,e.mapValue);default:throw Je(23264,{he:n})}}function q0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return At(i,e);const n=yo(i),s=yo(e),o=At(n.seconds,s.seconds);return o!==0?o:At(n.nanos,s.nanos)}function H0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Zl(n[o],s[o]);if(u)return u}return At(n.length,s.length)}function eu(i){return dm(i)}function dm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=yo(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return vo(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Qe.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=dm(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${dm(n.fields[d])}`;return o+"}"})(i.mapValue):Je(61005,{value:i})}function ef(i){switch(_o(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pf(i);return e?16+ef(e):16;case 5:return 2*i.stringValue.length;case 6:return vo(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+ef(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return il(s.fields,((u,d)=>{o+=u.length+ef(d)})),o})(i.mapValue);default:throw Je(13486,{value:i})}}function pm(i){return!!i&&"integerValue"in i}function $m(i){return!!i&&"arrayValue"in i}function F0(i){return!!i&&"nullValue"in i}function K0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function tf(i){return!!i&&"mapValue"in i}function l2(i){return(i?.mapValue?.fields||{})[$E]?.stringValue===XE}function nc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return il(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=nc(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nc(i.arrayValue.values[n]);return e}return{...i}}function u2(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===o2}class zi{constructor(e){this.value=e}static empty(){return new zi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!tf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nc(n)}setAll(e){let n=sr.emptyPath(),s={},o=[];e.forEach(((d,g)=>{if(!n.isImmediateParentOf(g)){const _=this.getFieldsMap(n);this.applyChanges(_,s,o),s={},o=[],n=g.popLast()}d?s[g.lastSegment()]=nc(d):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());tf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Is(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];tf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){il(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new zi(nc(this.value))}}function WE(i){const e=[];return il(i.fields,((n,s)=>{const o=new sr([n]);if(tf(s)){const u=WE(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new rs(e)}class gr{constructor(e,n,s,o,u,d,g){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new gr(e,0,at.min(),at.min(),at.min(),zi.empty(),0)}static newFoundDocument(e,n,s,o){return new gr(e,1,n,at.min(),s,o,0)}static newNoDocument(e,n){return new gr(e,2,n,at.min(),at.min(),zi.empty(),0)}static newUnknownDocument(e,n){return new gr(e,3,n,at.min(),at.min(),zi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(at.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=at.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _f{constructor(e,n){this.position=e,this.inclusive=n}}function G0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],d=i.position[o];if(u.field.isKeyField()?s=Qe.comparator(Qe.fromName(d.referenceValue),n.key):s=Zl(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function Y0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Is(i.position[n],e.position[n]))return!1;return!0}class bf{constructor(e,n="asc"){this.field=e,this.dir=n}}function c2(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class JE{}class Bn extends JE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new f2(e,n,s):n==="array-contains"?new m2(e,s):n==="in"?new g2(e,s):n==="not-in"?new y2(e,s):n==="array-contains-any"?new v2(e,s):new Bn(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new d2(e,s):new p2(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zl(n,this.value)):n!==null&&_o(this.value)===_o(n)&&this.matchesComparison(Zl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Os extends JE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Os(e,n)}matches(e){return ZE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ZE(i){return i.op==="and"}function e1(i){return h2(i)&&ZE(i)}function h2(i){for(const e of i.filters)if(e instanceof Os)return!1;return!0}function mm(i){if(i instanceof Bn)return i.field.canonicalString()+i.op.toString()+eu(i.value);if(e1(i))return i.filters.map((e=>mm(e))).join(",");{const e=i.filters.map((n=>mm(n))).join(",");return`${i.op}(${e})`}}function t1(i,e){return i instanceof Bn?(function(s,o){return o instanceof Bn&&s.op===o.op&&s.field.isEqual(o.field)&&Is(s.value,o.value)})(i,e):i instanceof Os?(function(s,o){return o instanceof Os&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,d,g)=>u&&t1(d,o.filters[g])),!0):!1})(i,e):void Je(19439)}function n1(i){return i instanceof Bn?(function(n){return`${n.field.canonicalString()} ${n.op} ${eu(n.value)}`})(i):i instanceof Os?(function(n){return n.op.toString()+" {"+n.getFilters().map(n1).join(" ,")+"}"})(i):"Filter"}class f2 extends Bn{constructor(e,n,s){super(e,n,s),this.key=Qe.fromName(s.referenceValue)}matches(e){const n=Qe.comparator(e.key,this.key);return this.matchesComparison(n)}}class d2 extends Bn{constructor(e,n){super(e,"in",n),this.keys=r1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class p2 extends Bn{constructor(e,n){super(e,"not-in",n),this.keys=r1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function r1(i,e){return(e.arrayValue?.values||[]).map((n=>Qe.fromName(n.referenceValue)))}class m2 extends Bn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $m(n)&&gc(n.arrayValue,this.value)}}class g2 extends Bn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gc(this.value.arrayValue,n)}}class y2 extends Bn{constructor(e,n){super(e,"not-in",n)}matches(e){if(gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!gc(this.value.arrayValue,n)}}class v2 extends Bn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$m(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>gc(this.value.arrayValue,s)))}}class _2{constructor(e,n=null,s=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this.Te=null}}function Q0(i,e=null,n=[],s=[],o=null,u=null,d=null){return new _2(i,e,n,s,o,u,d)}function Xm(i){const e=lt(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>mm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Vf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>eu(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>eu(s))).join(",")),e.Te=n}return e.Te}function Wm(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!c2(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!t1(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Y0(i.startAt,e.startAt)&&Y0(i.endAt,e.endAt)}function gm(i){return Qe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class jf{constructor(e,n=null,s=[],o=[],u=null,d="F",g=null,_=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function b2(i,e,n,s,o,u,d,g){return new jf(i,e,n,s,o,u,d,g)}function Jm(i){return new jf(i)}function $0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function E2(i){return i.collectionGroup!==null}function rc(i){const e=lt(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new qn(sr.comparator);return d.filters.forEach((_=>{_.getFlattenedFilters().forEach((b=>{b.isInequality()&&(g=g.add(b.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new bf(u,s))})),n.has(sr.keyField().canonicalString())||e.Ie.push(new bf(sr.keyField(),s))}return e.Ie}function Ss(i){const e=lt(i);return e.Ee||(e.Ee=T2(e,rc(i))),e.Ee}function T2(i,e){if(i.limitType==="F")return Q0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new bf(o.field,u)}));const n=i.endAt?new _f(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new _f(i.startAt.position,i.startAt.inclusive):null;return Q0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function ym(i,e,n){return new jf(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Lf(i,e){return Wm(Ss(i),Ss(e))&&i.limitType===e.limitType}function i1(i){return`${Xm(Ss(i))}|lt:${i.limitType}`}function Bl(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>n1(o))).join(", ")}]`),Vf(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>eu(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>eu(o))).join(",")),`Target(${s})`})(Ss(i))}; limitType=${i.limitType})`}function Uf(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Qe.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of rc(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(d,g,_){const b=G0(d,g,_);return d.inclusive?b<=0:b<0})(s.startAt,rc(s),o)||s.endAt&&!(function(d,g,_){const b=G0(d,g,_);return d.inclusive?b>=0:b>0})(s.endAt,rc(s),o))})(i,e)}function w2(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function s1(i){return(e,n)=>{let s=!1;for(const o of rc(i)){const u=S2(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function S2(i,e,n){const s=i.field.isKeyField()?Qe.comparator(e.key,n.key):(function(u,d,g){const _=d.data.field(u),b=g.data.field(u);return _!==null&&b!==null?Zl(_,b):Je(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Je(19790,{direction:i.dir})}}class sl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){il(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return HE(this.inner)}size(){return this.innerSize}}const A2=new dn(Qe.comparator);function ma(){return A2}const a1=new dn(Qe.comparator);function Xu(...i){let e=a1;for(const n of i)e=e.insert(n.key,n);return e}function o1(i){let e=a1;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function $o(){return ic()}function l1(){return ic()}function ic(){return new sl((i=>i.toString()),((i,e)=>i.isEqual(e)))}const C2=new dn(Qe.comparator),R2=new qn(Qe.comparator);function Ct(...i){let e=R2;for(const n of i)e=e.add(n);return e}const x2=new qn(At);function I2(){return x2}function Zm(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gf(e)?"-0":e}}function u1(i){return{integerValue:""+i}}function O2(i,e){return n2(e)?u1(e):Zm(i,e)}class zf{constructor(){this._=void 0}}function D2(i,e,n){return i instanceof Ef?(function(o,u){const d={fields:{[GE]:{stringValue:KE},[QE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Qm(u)&&(u=Pf(u)),u&&(d.fields[YE]=u),{mapValue:d}})(n,e):i instanceof yc?h1(i,e):i instanceof vc?f1(i,e):(function(o,u){const d=c1(o,u),g=X0(d)+X0(o.Ae);return pm(d)&&pm(o.Ae)?u1(g):Zm(o.serializer,g)})(i,e)}function N2(i,e,n){return i instanceof yc?h1(i,e):i instanceof vc?f1(i,e):n}function c1(i,e){return i instanceof Tf?(function(s){return pm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Ef extends zf{}class yc extends zf{constructor(e){super(),this.elements=e}}function h1(i,e){const n=d1(e);for(const s of i.elements)n.some((o=>Is(o,s)))||n.push(s);return{arrayValue:{values:n}}}class vc extends zf{constructor(e){super(),this.elements=e}}function f1(i,e){let n=d1(e);for(const s of i.elements)n=n.filter((o=>!Is(o,s)));return{arrayValue:{values:n}}}class Tf extends zf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function X0(i){return Cn(i.integerValue||i.doubleValue)}function d1(i){return $m(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function k2(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof yc&&o instanceof yc||s instanceof vc&&o instanceof vc?Jl(s.elements,o.elements,Is):s instanceof Tf&&o instanceof Tf?Is(s.Ae,o.Ae):s instanceof Ef&&o instanceof Ef})(i.transform,e.transform)}class M2{constructor(e,n){this.version=e,this.transformResults=n}}class ca{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ca}static exists(e){return new ca(void 0,e)}static updateTime(e){return new ca(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nf(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Bf{}function p1(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new g1(i.key,ca.none()):new xc(i.key,i.data,ca.none());{const n=i.data,s=zi.empty();let o=new qn(sr.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new al(i.key,s,new rs(o.toArray()),ca.none())}}function V2(i,e,n){i instanceof xc?(function(o,u,d){const g=o.value.clone(),_=J0(o.fieldTransforms,u,d.transformResults);g.setAll(_),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(i,e,n):i instanceof al?(function(o,u,d){if(!nf(o.precondition,u))return void u.convertToUnknownDocument(d.version);const g=J0(o.fieldTransforms,u,d.transformResults),_=u.data;_.setAll(m1(o)),_.setAll(g),u.convertToFoundDocument(d.version,_).setHasCommittedMutations()})(i,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function sc(i,e,n,s){return i instanceof xc?(function(u,d,g,_){if(!nf(u.precondition,d))return g;const b=u.value.clone(),R=Z0(u.fieldTransforms,_,d);return b.setAll(R),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),null})(i,e,n,s):i instanceof al?(function(u,d,g,_){if(!nf(u.precondition,d))return g;const b=Z0(u.fieldTransforms,_,d),R=d.data;return R.setAll(m1(u)),R.setAll(b),d.convertToFoundDocument(d.version,R).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((x=>x.field)))})(i,e,n,s):(function(u,d,g){return nf(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(i,e,n)}function P2(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=c1(s.transform,o||null);u!=null&&(n===null&&(n=zi.empty()),n.set(s.field,u))}return n||null}function W0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Jl(s,o,((u,d)=>k2(u,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class xc extends Bf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class al extends Bf{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function m1(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function J0(i,e,n){const s=new Map;jt(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],d=u.transform,g=e.data.field(u.field);s.set(u.field,N2(d,g,n[o]))}return s}function Z0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,d=n.data.field(o.field);s.set(o.field,D2(u,d,e))}return s}class g1 extends Bf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class j2 extends Bf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class L2{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&V2(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=sc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=sc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=l1();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=n.has(o.key)?null:g;const _=p1(d,g);_!==null&&s.set(o.key,_),d.isValidDocument()||d.convertToNoDocument(at.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ct())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,((n,s)=>W0(n,s)))&&Jl(this.baseMutations,e.baseMutations,((n,s)=>W0(n,s)))}}class eg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){jt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return C2})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new eg(e,n,s,o)}}class U2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class z2{constructor(e,n){this.count=e,this.unchangedNames=n}}var Vn,Dt;function B2(i){switch(i){case Ee.OK:return Je(64938);case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return Je(15467,{code:i})}}function y1(i){if(i===void 0)return pa("GRPC error has no .code"),Ee.UNKNOWN;switch(i){case Vn.OK:return Ee.OK;case Vn.CANCELLED:return Ee.CANCELLED;case Vn.UNKNOWN:return Ee.UNKNOWN;case Vn.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case Vn.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case Vn.INTERNAL:return Ee.INTERNAL;case Vn.UNAVAILABLE:return Ee.UNAVAILABLE;case Vn.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case Vn.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case Vn.NOT_FOUND:return Ee.NOT_FOUND;case Vn.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case Vn.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case Vn.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case Vn.ABORTED:return Ee.ABORTED;case Vn.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case Vn.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case Vn.DATA_LOSS:return Ee.DATA_LOSS;default:return Je(39323,{code:i})}}(Dt=Vn||(Vn={}))[Dt.OK=0]="OK",Dt[Dt.CANCELLED=1]="CANCELLED",Dt[Dt.UNKNOWN=2]="UNKNOWN",Dt[Dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dt[Dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dt[Dt.NOT_FOUND=5]="NOT_FOUND",Dt[Dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dt[Dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dt[Dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dt[Dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dt[Dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dt[Dt.ABORTED=10]="ABORTED",Dt[Dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dt[Dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dt[Dt.INTERNAL=13]="INTERNAL",Dt[Dt.UNAVAILABLE=14]="UNAVAILABLE",Dt[Dt.DATA_LOSS=15]="DATA_LOSS";function q2(){return new TextEncoder}const H2=new po([4294967295,4294967295],0);function eb(i){const e=q2().encode(i),n=new kE;return n.update(e),new Uint8Array(n.digest())}function tb(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new po([n,s],0),new po([o,u],0)]}class tg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Wu(`Invalid padding: ${n}`);if(s<0)throw new Wu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Wu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Wu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=po.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(po.fromNumber(s)));return o.compare(H2)===1&&(o=new po([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=eb(e),[s,o]=tb(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new tg(u,o,n);return s.forEach((g=>d.insert(g))),d}insert(e){if(this.ge===0)return;const n=eb(e),[s,o]=tb(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class qf{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new qf(at.min(),o,new dn(At),ma(),Ct())}}class Ic{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Ic(s,n,Ct(),Ct(),Ct())}}class rf{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class v1{constructor(e,n){this.targetId=e,this.Ce=n}}class _1{constructor(e,n,s=ar.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class nb{constructor(){this.ve=0,this.Fe=rb(),this.Me=ar.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ct(),n=Ct(),s=Ct();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Je(38017,{changeType:u})}})),new Ic(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=rb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,jt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class F2{constructor(e){this.Ge=e,this.ze=new Map,this.je=ma(),this.Je=Hh(),this.He=Hh(),this.Ye=new dn(At)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Je(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(gm(u))if(s===0){const d=new Qe(u.path);this.et(n,d,gr.newNoDocument(d,at.min()))}else jt(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const g=this.ut(e),_=g?this.ct(g,e,d):1;if(_!==0){this.it(n);const b=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,b)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,g;try{d=vo(s).toUint8Array()}catch(_){if(_ instanceof FE)return Wl("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{g=new tg(d,o,u)}catch(_){return Wl(_ instanceof Wu?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return g.ge===0?null:g}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const g=this.ot(d);if(g){if(u.current&&gm(g.target)){const _=new Qe(g.target.path);this.It(_).has(d)||this.Et(d,_)||this.et(d,_,gr.newNoDocument(_,e))}u.Be&&(n.set(d,u.ke()),u.qe())}}));let s=Ct();this.He.forEach(((u,d)=>{let g=!0;d.forEachWhile((_=>{const b=this.ot(_);return!b||b.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new qf(e,n,this.Ye,this.je,s);return this.je=ma(),this.Je=Hh(),this.He=Hh(),this.Ye=new dn(At),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new nb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qn(At),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qn(At),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Le("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Hh(){return new dn(Qe.comparator)}function rb(){return new dn(Qe.comparator)}const K2={asc:"ASCENDING",desc:"DESCENDING"},G2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y2={and:"AND",or:"OR"};class Q2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vm(i,e){return i.useProto3Json||Vf(e)?e:{value:e}}function wf(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function b1(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function $2(i,e){return wf(i,e.toTimestamp())}function As(i){return jt(!!i,49232),at.fromTimestamp((function(n){const s=yo(n);return new Zt(s.seconds,s.nanos)})(i))}function ng(i,e){return _m(i,e).canonicalString()}function _m(i,e){const n=(function(o){return new fn(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function E1(i){const e=fn.fromString(i);return jt(C1(e),10190,{key:e.toString()}),e}function bm(i,e){return ng(i.databaseId,e.path)}function Xp(i,e){const n=E1(e);if(n.get(1)!==i.databaseId.projectId)throw new Ke(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Ke(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Qe(w1(n))}function T1(i,e){return ng(i.databaseId,e)}function X2(i){const e=E1(i);return e.length===4?fn.emptyPath():w1(e)}function Em(i){return new fn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function w1(i){return jt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function ib(i,e,n){return{name:bm(i,e),fields:n.value.mapValue.fields}}function W2(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:Je(39313,{state:b})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(b,R){return b.useProto3Json?(jt(R===void 0||typeof R=="string",58123),ar.fromBase64String(R||"")):(jt(R===void 0||R instanceof Buffer||R instanceof Uint8Array,16193),ar.fromUint8Array(R||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(b){const R=b.code===void 0?Ee.UNKNOWN:y1(b.code);return new Ke(R,b.message||"")})(d);n=new _1(s,o,u,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Xp(i,s.document.name),u=As(s.document.updateTime),d=s.document.createTime?As(s.document.createTime):at.min(),g=new zi({mapValue:{fields:s.document.fields}}),_=gr.newFoundDocument(o,u,d,g),b=s.targetIds||[],R=s.removedTargetIds||[];n=new rf(b,R,_.key,_)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Xp(i,s.document),u=s.readTime?As(s.readTime):at.min(),d=gr.newNoDocument(o,u),g=s.removedTargetIds||[];n=new rf([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Xp(i,s.document),u=s.removedTargetIds||[];n=new rf([],u,o,null)}else{if(!("filter"in e))return Je(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new z2(o,u),g=s.targetId;n=new v1(g,d)}}return n}function J2(i,e){let n;if(e instanceof xc)n={update:ib(i,e.key,e.value)};else if(e instanceof g1)n={delete:bm(i,e.key)};else if(e instanceof al)n={update:ib(i,e.key,e.data),updateMask:oO(e.fieldMask)};else{if(!(e instanceof j2))return Je(16599,{Vt:e.type});n={verify:bm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,d){const g=d.transform;if(g instanceof Ef)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof yc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof vc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Tf)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw Je(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:$2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Je(27497)})(i,e.precondition)),n}function Z2(i,e){return i&&i.length>0?(jt(e!==void 0,14353),i.map((n=>(function(o,u){let d=o.updateTime?As(o.updateTime):As(u);return d.isEqual(at.min())&&(d=As(u)),new M2(d,o.transformResults||[])})(n,e)))):[]}function eO(i,e){return{documents:[T1(i,e.path)]}}function tO(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=T1(i,o);const u=(function(b){if(b.length!==0)return A1(Os.create(b,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(b){if(b.length!==0)return b.map((R=>(function(N){return{field:ql(N.field),direction:iO(N.dir)}})(R)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const g=vm(i,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(e.endAt)),{ft:n,parent:o}}function nO(i){let e=X2(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){jt(s===1,65062);const R=n.from[0];R.allDescendants?o=R.collectionId:e=e.child(R.collectionId)}let u=[];n.where&&(u=(function(x){const N=S1(x);return N instanceof Os&&e1(N)?N.getFilters():[N]})(n.where));let d=[];n.orderBy&&(d=(function(x){return x.map((N=>(function(te){return new bf(Hl(te.field),(function(be){switch(be){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(te.direction))})(N)))})(n.orderBy));let g=null;n.limit&&(g=(function(x){let N;return N=typeof x=="object"?x.value:x,Vf(N)?null:N})(n.limit));let _=null;n.startAt&&(_=(function(x){const N=!!x.before,Q=x.values||[];return new _f(Q,N)})(n.startAt));let b=null;return n.endAt&&(b=(function(x){const N=!x.before,Q=x.values||[];return new _f(Q,N)})(n.endAt)),b2(e,o,d,u,g,"F",_,b)}function rO(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Je(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function S1(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Hl(n.unaryFilter.field);return Bn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Hl(n.unaryFilter.field);return Bn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Hl(n.unaryFilter.field);return Bn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Hl(n.unaryFilter.field);return Bn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Je(61313);default:return Je(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Bn.create(Hl(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Je(58110);default:return Je(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Os.create(n.compositeFilter.filters.map((s=>S1(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Je(1026)}})(n.compositeFilter.op))})(i):Je(30097,{filter:i})}function iO(i){return K2[i]}function sO(i){return G2[i]}function aO(i){return Y2[i]}function ql(i){return{fieldPath:i.canonicalString()}}function Hl(i){return sr.fromServerFormat(i.fieldPath)}function A1(i){return i instanceof Bn?(function(n){if(n.op==="=="){if(K0(n.value))return{unaryFilter:{field:ql(n.field),op:"IS_NAN"}};if(F0(n.value))return{unaryFilter:{field:ql(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(K0(n.value))return{unaryFilter:{field:ql(n.field),op:"IS_NOT_NAN"}};if(F0(n.value))return{unaryFilter:{field:ql(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ql(n.field),op:sO(n.op),value:n.value}}})(i):i instanceof Os?(function(n){const s=n.getFilters().map((o=>A1(o)));return s.length===1?s[0]:{compositeFilter:{op:aO(n.op),filters:s}}})(i):Je(54877,{filter:i})}function oO(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function C1(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class lo{constructor(e,n,s,o,u=at.min(),d=at.min(),g=ar.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new lo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class lO{constructor(e){this.yt=e}}function uO(i){const e=nO({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?ym(e,e.limit,"L"):e}class cO{constructor(){this.Cn=new hO}addToCollectionParentIndex(e,n){return this.Cn.add(n),ve.resolve()}getCollectionParents(e,n){return ve.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ve.resolve()}deleteFieldIndex(e,n){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,n){return ve.resolve()}getDocumentsMatchingTarget(e,n){return ve.resolve(null)}getIndexType(e,n){return ve.resolve(0)}getFieldIndexes(e,n){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,n){return ve.resolve(go.min())}getMinOffsetFromCollectionGroup(e,n){return ve.resolve(go.min())}updateCollectionGroup(e,n,s){return ve.resolve()}updateIndexEntries(e,n){return ve.resolve()}}class hO{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new qn(fn.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new qn(fn.comparator)).toArray()}}const sb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},R1=41943040;class Yr{static withCacheSize(e){return new Yr(e,Yr.DEFAULT_COLLECTION_PERCENTILE,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Yr.DEFAULT_COLLECTION_PERCENTILE=10,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yr.DEFAULT=new Yr(R1,Yr.DEFAULT_COLLECTION_PERCENTILE,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yr.DISABLED=new Yr(-1,0,0);class tu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tu(0)}static cr(){return new tu(-1)}}const ab="LruGarbageCollector",fO=1048576;function ob([i,e],[n,s]){const o=At(i,n);return o===0?At(e,s):o}class dO{constructor(e){this.Ir=e,this.buffer=new qn(ob),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();ob(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class pO{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Le(ab,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){lu(n)?Le(ab,"Ignoring IndexedDB error during garbage collection: ",n):await ou(n)}await this.Vr(3e5)}))}}class mO{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ve.resolve(Mf.ce);const s=new dO(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(sb)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sb):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,d,g,_,b;const R=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,d=Date.now(),this.nthSequenceNumber(e,o)))).next((x=>(s=x,g=Date.now(),this.removeTargets(e,s,n)))).next((x=>(u=x,_=Date.now(),this.removeOrphanedDocuments(e,s)))).next((x=>(b=Date.now(),zl()<=St.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-R}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${u} targets in `+(_-g)+`ms
	Removed ${x} documents in `+(b-_)+`ms
Total Duration: ${b-R}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:x}))))}}function gO(i,e){return new mO(i,e)}class yO{constructor(){this.changes=new sl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ve.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class _O{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&sc(s.mutation,o,rs.empty(),Zt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Ct()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Ct()){const o=$o();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let d=Xu();return u.forEach(((g,_)=>{d=d.insert(g,_.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=$o();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Ct())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,g)=>{n.set(d,g)}))}))}computeViews(e,n,s,o){let u=ma();const d=ic(),g=(function(){return ic()})();return n.forEach(((_,b)=>{const R=s.get(b.key);o.has(b.key)&&(R===void 0||R.mutation instanceof al)?u=u.insert(b.key,b):R!==void 0?(d.set(b.key,R.mutation.getFieldMask()),sc(R.mutation,b,R.mutation.getFieldMask(),Zt.now())):d.set(b.key,rs.empty())})),this.recalculateAndSaveOverlays(e,u).next((_=>(_.forEach(((b,R)=>d.set(b,R))),n.forEach(((b,R)=>g.set(b,new vO(R,d.get(b)??null)))),g)))}recalculateAndSaveOverlays(e,n){const s=ic();let o=new dn(((d,g)=>d-g)),u=Ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const g of d)g.keys().forEach((_=>{const b=n.get(_);if(b===null)return;let R=s.get(_)||rs.empty();R=g.applyToLocalView(b,R),s.set(_,R);const x=(o.get(g.batchId)||Ct()).add(_);o=o.insert(g.batchId,x)}))})).next((()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),b=_.key,R=_.value,x=l1();R.forEach((N=>{if(!u.has(N)){const Q=p1(n.get(N),s.get(N));Q!==null&&x.set(N,Q),u=u.add(N)}})),d.push(this.documentOverlayCache.saveOverlays(e,b,x))}return ve.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return Qe.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):E2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ve.resolve($o());let g=dc,_=u;return d.next((b=>ve.forEach(b,((R,x)=>(g<x.largestBatchId&&(g=x.largestBatchId),u.get(R)?ve.resolve():this.remoteDocumentCache.getEntry(e,R).next((N=>{_=_.insert(R,N)}))))).next((()=>this.populateOverlays(e,b,u))).next((()=>this.computeViews(e,_,b,Ct()))).next((R=>({batchId:g,changes:o1(R)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Qe(n)).next((s=>{let o=Xu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=Xu();return this.indexManager.getCollectionParents(e,u).next((g=>ve.forEach(g,(_=>{const b=(function(x,N){return new jf(N,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,_.child(u));return this.getDocumentsMatchingCollectionQuery(e,b,s,o).next((R=>{R.forEach(((x,N)=>{d=d.insert(x,N)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((d=>{u.forEach(((_,b)=>{const R=b.getKey();d.get(R)===null&&(d=d.insert(R,gr.newInvalidDocument(R)))}));let g=Xu();return d.forEach(((_,b)=>{const R=u.get(_);R!==void 0&&sc(R.mutation,b,rs.empty(),Zt.now()),Uf(n,b)&&(g=g.insert(_,b))})),g}))}}class bO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ve.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:As(o.createTime)}})(n)),ve.resolve()}getNamedQuery(e,n){return ve.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:uO(o.bundledQuery),readTime:As(o.readTime)}})(n)),ve.resolve()}}class EO{constructor(){this.overlays=new dn(Qe.comparator),this.qr=new Map}getOverlay(e,n){return ve.resolve(this.overlays.get(n))}getOverlays(e,n){const s=$o();return ve.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),ve.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ve.resolve()}getOverlaysForCollection(e,n,s){const o=$o(),u=n.length+1,d=new Qe(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const _=g.getNext().value,b=_.getKey();if(!n.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>s&&o.set(_.getKey(),_)}return ve.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new dn(((b,R)=>b-R));const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===n&&b.largestBatchId>s){let R=u.get(b.largestBatchId);R===null&&(R=$o(),u=u.insert(b.largestBatchId,R)),R.set(b.getKey(),b)}}const g=$o(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((b,R)=>g.set(b,R))),!(g.size()>=o)););return ve.resolve(g)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new U2(n,s));let u=this.qr.get(n);u===void 0&&(u=Ct(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class TO{constructor(){this.sessionToken=ar.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ve.resolve()}}class rg{constructor(){this.Qr=new qn($n.$r),this.Ur=new qn($n.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new $n(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new $n(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Qe(new fn([])),s=new $n(n,e),o=new $n(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Qe(new fn([])),s=new $n(n,e),o=new $n(n,e+1);let u=Ct();return this.Ur.forEachInRange([s,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new $n(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class $n{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Qe.comparator(e.key,n.key)||At(e.Yr,n.Yr)}static Kr(e,n){return At(e.Yr,n.Yr)||Qe.comparator(e.key,n.key)}}class wO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qn($n.$r)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new L2(u,n,s,o);this.mutationQueue.push(d);for(const g of o)this.Zr=this.Zr.add(new $n(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ve.resolve(d)}lookupMutationBatch(e,n){return ve.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return ve.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?Ym:this.tr-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new $n(n,0),o=new $n(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(d=>{const g=this.Xr(d.Yr);u.push(g)})),ve.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new qn(At);return n.forEach((o=>{const u=new $n(o,0),d=new $n(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(g=>{s=s.add(g.Yr)}))})),ve.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Qe.isDocumentKey(u)||(u=u.child(""));const d=new $n(new Qe(u),0);let g=new qn(At);return this.Zr.forEachWhile((_=>{const b=_.key.path;return!!s.isPrefixOf(b)&&(b.length===o&&(g=g.add(_.Yr)),!0)}),d),ve.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){jt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ve.forEach(n.mutations,(o=>{const u=new $n(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new $n(n,0),o=this.Zr.firstAfterOrEqual(s);return ve.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class SO{constructor(e){this.ri=e,this.docs=(function(){return new dn(Qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ve.resolve(s?s.document.mutableCopy():gr.newInvalidDocument(n))}getEntries(e,n){let s=ma();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():gr.newInvalidDocument(o))})),ve.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=ma();const d=n.path,g=new Qe(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:b,value:{document:R}}=_.getNext();if(!d.isPrefixOf(b.path))break;b.path.length>d.length+1||JI(WI(R),s)<=0||(o.has(R.key)||Uf(n,R))&&(u=u.insert(R.key,R.mutableCopy()))}return ve.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Je(9500)}ii(e,n){return ve.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new AO(this)}getSize(e){return ve.resolve(this.size)}}class AO extends yO{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ve.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class CO{constructor(e){this.persistence=e,this.si=new sl((n=>Xm(n)),Wm),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this.oi=0,this._i=new rg,this.targetCount=0,this.ai=tu.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ve.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new tu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ve.resolve()}updateTargetData(e,n){return this.Pr(n),ve.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ve.waitFor(u).next((()=>o))}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ve.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ve.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),ve.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ve.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ve.resolve(s)}containsKey(e,n){return ve.resolve(this._i.containsKey(n))}}class x1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Mf(0),this.li=!1,this.li=!0,this.hi=new TO,this.referenceDelegate=e(this),this.Pi=new CO(this),this.indexManager=new cO,this.remoteDocumentCache=(function(o){return new SO(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new lO(n),this.Ii=new bO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new EO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new wO(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Le("MemoryPersistence","Starting transaction:",e);const o=new RO(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ve.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class RO extends e2{constructor(e){super(),this.currentSequenceNumber=e}}class ig{constructor(e){this.persistence=e,this.Ri=new rg,this.Vi=null}static mi(e){return new ig(e)}get fi(){if(this.Vi)return this.Vi;throw Je(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ve.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ve.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ve.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.fi,(s=>{const o=Qe.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,at.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ve.or([()=>ve.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Sf{constructor(e,n){this.persistence=e,this.pi=new sl((s=>r2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=gO(this,n)}static mi(e,n){return new Sf(e,n)}Ei(){}di(e){return ve.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ve.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?ve.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((g=>{g||(s++,u.removeEntry(d,at.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ve.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ve.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ve.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ef(e.data.value)),n}br(e,n,s){return ve.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ve.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class sg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Ct(),o=Ct();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new sg(e,n.fromCache,s,o)}}class xO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class IO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return vC()?8:t2(vr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new xO;return this.Ss(e,n,d).next((g=>{if(u.result=g,this.Vs)return this.bs(e,n,d,g.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(zl()<=St.DEBUG&&Le("QueryEngine","SDK will not create cache indexes for query:",Bl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ve.resolve()):(zl()<=St.DEBUG&&Le("QueryEngine","Query:",Bl(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(zl()<=St.DEBUG&&Le("QueryEngine","The SDK decides to create cache indexes for query:",Bl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ss(n))):ve.resolve())}ys(e,n){if($0(n))return ve.resolve(null);let s=Ss(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=ym(n,null,"F"),s=Ss(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const d=Ct(...u);return this.ps.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,s).next((_=>{const b=this.Ds(n,g);return this.Cs(n,b,d,_.readTime)?this.ys(e,ym(n,null,"F")):this.vs(e,b,n,_)}))))})))))}ws(e,n,s,o){return $0(n)||o.isEqual(at.min())?ve.resolve(null):this.ps.getDocuments(e,s).next((u=>{const d=this.Ds(n,u);return this.Cs(n,d,s,o)?ve.resolve(null):(zl()<=St.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Bl(n)),this.vs(e,d,n,XI(o,dc)).next((g=>g)))}))}Ds(e,n){let s=new qn(s1(e));return n.forEach(((o,u)=>{Uf(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return zl()<=St.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",Bl(n)),this.ps.getDocumentsMatchingQuery(e,n,go.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const ag="LocalStore",OO=3e8;class DO{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new dn(At),this.xs=new sl((u=>Xm(u)),Wm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _O(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function NO(i,e,n,s){return new DO(i,e,n,s)}async function I1(i,e){const n=lt(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const d=[],g=[];let _=Ct();for(const b of o){d.push(b.batchId);for(const R of b.mutations)_=_.add(R.key)}for(const b of u){g.push(b.batchId);for(const R of b.mutations)_=_.add(R.key)}return n.localDocuments.getDocuments(s,_).next((b=>({Ls:b,removedBatchIds:d,addedBatchIds:g})))}))}))}function kO(i,e){const n=lt(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,_,b,R){const x=b.batch,N=x.keys();let Q=ve.resolve();return N.forEach((te=>{Q=Q.next((()=>R.getEntry(_,te))).next((de=>{const be=b.docVersions.get(te);jt(be!==null,48541),de.version.compareTo(be)<0&&(x.applyToRemoteDocument(de,b),de.isValidDocument()&&(de.setReadTime(b.commitVersion),R.addEntry(de)))}))})),Q.next((()=>g.mutationQueue.removeMutationBatch(_,x)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let _=Ct();for(let b=0;b<g.mutationResults.length;++b)g.mutationResults[b].transformResults.length>0&&(_=_.add(g.batch.mutations[b].key));return _})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function O1(i){const e=lt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function MO(i,e){const n=lt(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((R,x)=>{const N=o.get(x);if(!N)return;g.push(n.Pi.removeMatchingKeys(u,R.removedDocuments,x).next((()=>n.Pi.addMatchingKeys(u,R.addedDocuments,x))));let Q=N.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(x)!==null?Q=Q.withResumeToken(ar.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):R.resumeToken.approximateByteSize()>0&&(Q=Q.withResumeToken(R.resumeToken,s)),o=o.insert(x,Q),(function(de,be,je){return de.resumeToken.approximateByteSize()===0||be.snapshotVersion.toMicroseconds()-de.snapshotVersion.toMicroseconds()>=OO?!0:je.addedDocuments.size+je.modifiedDocuments.size+je.removedDocuments.size>0})(N,Q,R)&&g.push(n.Pi.updateTargetData(u,Q))}));let _=ma(),b=Ct();if(e.documentUpdates.forEach((R=>{e.resolvedLimboDocuments.has(R)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,R))})),g.push(VO(u,d,e.documentUpdates).next((R=>{_=R.ks,b=R.qs}))),!s.isEqual(at.min())){const R=n.Pi.getLastRemoteSnapshotVersion(u).next((x=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));g.push(R)}return ve.waitFor(g).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,_,b))).next((()=>_))})).then((u=>(n.Ms=o,u)))}function VO(i,e,n){let s=Ct(),o=Ct();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let d=ma();return n.forEach(((g,_)=>{const b=u.get(g);_.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(g)),_.isNoDocument()&&_.version.isEqual(at.min())?(e.removeEntry(g,_.readTime),d=d.insert(g,_)):!b.isValidDocument()||_.version.compareTo(b.version)>0||_.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(_),d=d.insert(g,_)):Le(ag,"Ignoring outdated watch update for ",g,". Current version:",b.version," Watch version:",_.version)})),{ks:d,qs:o}}))}function PO(i,e){const n=lt(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Ym),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function jO(i,e){const n=lt(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,ve.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new lo(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Tm(i,e,n){const s=lt(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!lu(d))throw d;Le(ag,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function lb(i,e,n){const s=lt(i);let o=at.min(),u=Ct();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(_,b,R){const x=lt(_),N=x.xs.get(R);return N!==void 0?ve.resolve(x.Ms.get(N)):x.Pi.getTargetData(b,R)})(s,d,Ss(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,g.targetId).next((_=>{u=_}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:at.min(),n?u:Ct()))).next((g=>(LO(s,w2(e),g),{documents:g,Qs:u})))))}function LO(i,e,n){let s=i.Os.get(e)||at.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class ub{constructor(){this.activeTargetIds=I2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UO{constructor(){this.Mo=new ub,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ub,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zO{Oo(e){}shutdown(){}}const cb="ConnectivityMonitor";class hb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Le(cb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Le(cb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Fh=null;function wm(){return Fh===null?Fh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fh++,"0x"+Fh.toString(16)}const Wp="RestConnection",BO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===yf?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const d=wm(),g=this.zo(e,n.toUriEncodedString());Le(Wp,`Sending RPC '${e}' ${d}:`,g,s);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,o,u);const{host:b}=new URL(g),R=ru(b);return this.Jo(e,g,_,s,R).then((x=>(Le(Wp,`Received RPC '${e}' ${d}: `,x),x)),(x=>{throw Wl(Wp,`RPC '${e}' ${d} failed with error: `,x,"url: ",g,"request:",s),x}))}Ho(e,n,s,o,u,d){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+au})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=BO[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class HO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const pr="WebChannelConnection";class FO extends qO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const d=wm();return new Promise(((g,_)=>{const b=new ME;b.setWithCredentials(!0),b.listenOnce(VE.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case Zh.NO_ERROR:const x=b.getResponseJson();Le(pr,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(x)),g(x);break;case Zh.TIMEOUT:Le(pr,`RPC '${e}' ${d} timed out`),_(new Ke(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case Zh.HTTP_ERROR:const N=b.getStatus();if(Le(pr,`RPC '${e}' ${d} failed with status:`,N,"response text:",b.getResponseText()),N>0){let Q=b.getResponseJson();Array.isArray(Q)&&(Q=Q[0]);const te=Q?.error;if(te&&te.status&&te.message){const de=(function(je){const Fe=je.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(Fe)>=0?Fe:Ee.UNKNOWN})(te.status);_(new Ke(de,te.message))}else _(new Ke(Ee.UNKNOWN,"Server responded with status "+b.getStatus()))}else _(new Ke(Ee.UNAVAILABLE,"Connection failed."));break;default:Je(9055,{l_:e,streamId:d,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{Le(pr,`RPC '${e}' ${d} completed.`)}}));const R=JSON.stringify(o);Le(pr,`RPC '${e}' ${d} sending request:`,o),b.send(n,"POST",R,s,15)}))}T_(e,n,s){const o=wm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=LE(),g=jE(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(_.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,n,s),_.encodeInitMessageHeaders=!0;const R=u.join("");Le(pr,`Creating RPC '${e}' stream ${o}: ${R}`,_);const x=d.createWebChannel(R,_);this.I_(x);let N=!1,Q=!1;const te=new HO({Yo:be=>{Q?Le(pr,`Not sending because RPC '${e}' stream ${o} is closed:`,be):(N||(Le(pr,`Opening RPC '${e}' stream ${o} transport.`),x.open(),N=!0),Le(pr,`RPC '${e}' stream ${o} sending:`,be),x.send(be))},Zo:()=>x.close()}),de=(be,je,Fe)=>{be.listen(je,(Ve=>{try{Fe(Ve)}catch(rt){setTimeout((()=>{throw rt}),0)}}))};return de(x,$u.EventType.OPEN,(()=>{Q||(Le(pr,`RPC '${e}' stream ${o} transport opened.`),te.o_())})),de(x,$u.EventType.CLOSE,(()=>{Q||(Q=!0,Le(pr,`RPC '${e}' stream ${o} transport closed`),te.a_(),this.E_(x))})),de(x,$u.EventType.ERROR,(be=>{Q||(Q=!0,Wl(pr,`RPC '${e}' stream ${o} transport errored. Name:`,be.name,"Message:",be.message),te.a_(new Ke(Ee.UNAVAILABLE,"The operation could not be completed")))})),de(x,$u.EventType.MESSAGE,(be=>{if(!Q){const je=be.data[0];jt(!!je,16349);const Fe=je,Ve=Fe?.error||Fe[0]?.error;if(Ve){Le(pr,`RPC '${e}' stream ${o} received error:`,Ve);const rt=Ve.status;let it=(function(k){const L=Vn[k];if(L!==void 0)return y1(L)})(rt),$e=Ve.message;it===void 0&&(it=Ee.INTERNAL,$e="Unknown error status: "+rt+" with message "+Ve.message),Q=!0,te.a_(new Ke(it,$e)),x.close()}else Le(pr,`RPC '${e}' stream ${o} received:`,je),te.u_(je)}})),de(g,PE.STAT_EVENT,(be=>{be.stat===hm.PROXY?Le(pr,`RPC '${e}' stream ${o} detected buffering proxy`):be.stat===hm.NOPROXY&&Le(pr,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{te.__()}),0),te}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Jp(){return typeof document<"u"?document:null}function Hf(i){return new Q2(i,!0)}class D1{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&Le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const fb="PersistentStream";class N1{constructor(e,n,s,o,u,d,g,_){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new D1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ee.RESOURCE_EXHAUSTED?(pa(n.toString()),pa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new Ke(Ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Le(fb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Le(fb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KO extends N1{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=W2(this.serializer,e),s=(function(u){if(!("targetChange"in u))return at.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?at.min():d.readTime?As(d.readTime):at.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Em(this.serializer),n.addTarget=(function(u,d){let g;const _=d.target;if(g=gm(_)?{documents:eO(u,_)}:{query:tO(u,_).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=b1(u,d.resumeToken);const b=vm(u,d.expectedCount);b!==null&&(g.expectedCount=b)}else if(d.snapshotVersion.compareTo(at.min())>0){g.readTime=wf(u,d.snapshotVersion.toTimestamp());const b=vm(u,d.expectedCount);b!==null&&(g.expectedCount=b)}return g})(this.serializer,e);const s=rO(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Em(this.serializer),n.removeTarget=e,this.q_(n)}}class GO extends N1{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return jt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,jt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){jt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Z2(e.writeResults,e.commitTime),s=As(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Em(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>J2(this.serializer,s)))};this.q_(n)}}class YO{}class QO extends YO{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ke(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,_m(n,s),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ke(Ee.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(e,_m(n,s),o,d,g,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ke(Ee.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class $O{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pa(n),this.aa=!1):Le("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const rl="RemoteStore";class XO{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{ol(this)&&(Le(rl,"Restarting streams for network reachability change."),await(async function(_){const b=lt(_);b.Ea.add(4),await Oc(b),b.Ra.set("Unknown"),b.Ea.delete(4),await Ff(b)})(this))}))})),this.Ra=new $O(s,o)}}async function Ff(i){if(ol(i))for(const e of i.da)await e(!0)}async function Oc(i){for(const e of i.da)await e(!1)}function k1(i,e){const n=lt(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),cg(n)?ug(n):uu(n).O_()&&lg(n,e))}function og(i,e){const n=lt(i),s=uu(n);n.Ia.delete(e),s.O_()&&M1(n,e),n.Ia.size===0&&(s.O_()?s.L_():ol(n)&&n.Ra.set("Unknown"))}function lg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(at.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uu(i).Y_(e)}function M1(i,e){i.Va.Ue(e),uu(i).Z_(e)}function ug(i){i.Va=new F2({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),uu(i).start(),i.Ra.ua()}function cg(i){return ol(i)&&!uu(i).x_()&&i.Ia.size>0}function ol(i){return lt(i).Ea.size===0}function V1(i){i.Va=void 0}async function WO(i){i.Ra.set("Online")}async function JO(i){i.Ia.forEach(((e,n)=>{lg(i,e)}))}async function ZO(i,e){V1(i),cg(i)?(i.Ra.ha(e),ug(i)):i.Ra.set("Unknown")}async function eD(i,e,n){if(i.Ra.set("Online"),e instanceof _1&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ia.delete(g),o.Va.removeTarget(g))})(i,e)}catch(s){Le(rl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Af(i,s)}else if(e instanceof rf?i.Va.Ze(e):e instanceof v1?i.Va.st(e):i.Va.tt(e),!n.isEqual(at.min()))try{const s=await O1(i.localStore);n.compareTo(s)>=0&&await(function(u,d){const g=u.Va.Tt(d);return g.targetChanges.forEach(((_,b)=>{if(_.resumeToken.approximateByteSize()>0){const R=u.Ia.get(b);R&&u.Ia.set(b,R.withResumeToken(_.resumeToken,d))}})),g.targetMismatches.forEach(((_,b)=>{const R=u.Ia.get(_);if(!R)return;u.Ia.set(_,R.withResumeToken(ar.EMPTY_BYTE_STRING,R.snapshotVersion)),M1(u,_);const x=new lo(R.target,_,b,R.sequenceNumber);lg(u,x)})),u.remoteSyncer.applyRemoteEvent(g)})(i,n)}catch(s){Le(rl,"Failed to raise snapshot:",s),await Af(i,s)}}async function Af(i,e,n){if(!lu(e))throw e;i.Ea.add(1),await Oc(i),i.Ra.set("Offline"),n||(n=()=>O1(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Le(rl,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Ff(i)}))}function P1(i,e){return e().catch((n=>Af(i,n,e)))}async function Kf(i){const e=lt(i),n=bo(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ym;for(;tD(e);)try{const o=await PO(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,nD(e,o)}catch(o){await Af(e,o)}j1(e)&&L1(e)}function tD(i){return ol(i)&&i.Ta.length<10}function nD(i,e){i.Ta.push(e);const n=bo(i);n.O_()&&n.X_&&n.ea(e.mutations)}function j1(i){return ol(i)&&!bo(i).x_()&&i.Ta.length>0}function L1(i){bo(i).start()}async function rD(i){bo(i).ra()}async function iD(i){const e=bo(i);for(const n of i.Ta)e.ea(n.mutations)}async function sD(i,e,n){const s=i.Ta.shift(),o=eg.from(s,e,n);await P1(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Kf(i)}async function aD(i,e){e&&bo(i).X_&&await(async function(s,o){if((function(d){return B2(d)&&d!==Ee.ABORTED})(o.code)){const u=s.Ta.shift();bo(s).B_(),await P1(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Kf(s)}})(i,e),j1(i)&&L1(i)}async function db(i,e){const n=lt(i);n.asyncQueue.verifyOperationInProgress(),Le(rl,"RemoteStore received new credentials");const s=ol(n);n.Ea.add(3),await Oc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ff(n)}async function oD(i,e){const n=lt(i);e?(n.Ea.delete(2),await Ff(n)):e||(n.Ea.add(2),await Oc(n),n.Ra.set("Unknown"))}function uu(i){return i.ma||(i.ma=(function(n,s,o){const u=lt(n);return u.sa(),new KO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:WO.bind(null,i),t_:JO.bind(null,i),r_:ZO.bind(null,i),H_:eD.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),cg(i)?ug(i):i.Ra.set("Unknown")):(await i.ma.stop(),V1(i))}))),i.ma}function bo(i){return i.fa||(i.fa=(function(n,s,o){const u=lt(n);return u.sa(),new GO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:rD.bind(null,i),r_:aD.bind(null,i),ta:iD.bind(null,i),na:sD.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Kf(i)):(await i.fa.stop(),i.Ta.length>0&&(Le(rl,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class hg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new mo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,g=new hg(e,n,d,o,u);return g.start(s),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ke(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fg(i,e){if(pa("AsyncQueue",`${e}: ${i}`),lu(i))return new Ke(Ee.UNAVAILABLE,`${e}: ${i}`);throw i}class Ql{static emptySet(e){return new Ql(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Qe.comparator(n.key,s.key):(n,s)=>Qe.comparator(n.key,s.key),this.keyedMap=Xu(),this.sortedSet=new dn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ql)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ql;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class pb{constructor(){this.ga=new dn(Qe.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Je(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class nu{constructor(e,n,s,o,u,d,g,_,b){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=b}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach((g=>{d.push({type:0,doc:g})})),new nu(e,n,Ql.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class lD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class uD{constructor(){this.queries=mb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=lt(n),u=o.queries;o.queries=mb(),u.forEach(((d,g)=>{for(const _ of g.Sa)_.onError(s)}))})(this,new Ke(Ee.ABORTED,"Firestore shutting down"))}}function mb(){return new sl((i=>i1(i)),Lf)}async function cD(i,e){const n=lt(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new lD,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const g=fg(d,`Initialization of query '${Bl(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&dg(n)}async function hD(i,e){const n=lt(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function fD(i,e){const n=lt(i);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const g of d.Sa)g.Fa(o)&&(s=!0);d.wa=o}}s&&dg(n)}function dD(i,e,n){const s=lt(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function dg(i){i.Ca.forEach((e=>{e.next()}))}var Sm,gb;(gb=Sm||(Sm={})).Ma="default",gb.Cache="cache";class pD{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new nu(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=nu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Sm.Cache}}class U1{constructor(e){this.key=e}}class z1{constructor(e){this.key=e}}class mD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ct(),this.mutatedKeys=Ct(),this.eu=s1(e),this.tu=new Ql(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new pb,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,g=!1;const _=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((R,x)=>{const N=o.get(R),Q=Uf(this.query,x)?x:null,te=!!N&&this.mutatedKeys.has(N.key),de=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let be=!1;N&&Q?N.data.isEqual(Q.data)?te!==de&&(s.track({type:3,doc:Q}),be=!0):this.su(N,Q)||(s.track({type:2,doc:Q}),be=!0,(_&&this.eu(Q,_)>0||b&&this.eu(Q,b)<0)&&(g=!0)):!N&&Q?(s.track({type:0,doc:Q}),be=!0):N&&!Q&&(s.track({type:1,doc:N}),be=!0,(_||b)&&(g=!0)),be&&(Q?(d=d.add(Q),u=de?u.add(R):u.delete(R)):(d=d.delete(R),u=u.delete(R)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const R=this.query.limitType==="F"?d.last():d.first();d=d.delete(R.key),u=u.delete(R.key),s.track({type:1,doc:R})}return{tu:d,iu:s,Cs:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((R,x)=>(function(Q,te){const de=be=>{switch(be){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je(20277,{Rt:be})}};return de(Q)-de(te)})(R.type,x.type)||this.eu(R.doc,x.doc))),this.ou(s),o=o??!1;const g=n&&!o?this._u():[],_=this.Xa.size===0&&this.current&&!o?1:0,b=_!==this.Za;return this.Za=_,d.length!==0||b?{snapshot:new nu(this.query,e.tu,u,d,e.mutatedKeys,_===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ct(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new z1(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new U1(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ct();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return nu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pg="SyncEngine";class gD{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class yD{constructor(e){this.key=e,this.hu=!1}}class vD{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new sl((g=>i1(g)),Lf),this.Iu=new Map,this.Eu=new Set,this.du=new dn(Qe.comparator),this.Au=new Map,this.Ru=new rg,this.Vu={},this.mu=new Map,this.fu=tu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _D(i,e,n=!0){const s=G1(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await B1(s,e,n,!0),o}async function bD(i,e){const n=G1(i);await B1(n,e,!0,!1)}async function B1(i,e,n,s){const o=await jO(i.localStore,Ss(e)),u=o.targetId,d=i.sharedClientState.addLocalQueryTarget(u,n);let g;return s&&(g=await ED(i,e,u,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&k1(i.remoteStore,o),g}async function ED(i,e,n,s,o){i.pu=(x,N,Q)=>(async function(de,be,je,Fe){let Ve=be.view.ru(je);Ve.Cs&&(Ve=await lb(de.localStore,be.query,!1).then((({documents:P})=>be.view.ru(P,Ve))));const rt=Fe&&Fe.targetChanges.get(be.targetId),it=Fe&&Fe.targetMismatches.get(be.targetId)!=null,$e=be.view.applyChanges(Ve,de.isPrimaryClient,rt,it);return vb(de,be.targetId,$e.au),$e.snapshot})(i,x,N,Q);const u=await lb(i.localStore,e,!0),d=new mD(e,u.Qs),g=d.ru(u.documents),_=Ic.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),b=d.applyChanges(g,i.isPrimaryClient,_);vb(i,n,b.au);const R=new gD(e,n,d);return i.Tu.set(e,R),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),b.snapshot}async function TD(i,e,n){const s=lt(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((d=>!Lf(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Tm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&og(s.remoteStore,o.targetId),Am(s,o.targetId)})).catch(ou)):(Am(s,o.targetId),await Tm(s.localStore,o.targetId,!0))}async function wD(i,e){const n=lt(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),og(n.remoteStore,s.targetId))}async function SD(i,e,n){const s=DD(i);try{const o=await(function(d,g){const _=lt(d),b=Zt.now(),R=g.reduce(((Q,te)=>Q.add(te.key)),Ct());let x,N;return _.persistence.runTransaction("Locally write mutations","readwrite",(Q=>{let te=ma(),de=Ct();return _.Ns.getEntries(Q,R).next((be=>{te=be,te.forEach(((je,Fe)=>{Fe.isValidDocument()||(de=de.add(je))}))})).next((()=>_.localDocuments.getOverlayedDocuments(Q,te))).next((be=>{x=be;const je=[];for(const Fe of g){const Ve=P2(Fe,x.get(Fe.key).overlayedDocument);Ve!=null&&je.push(new al(Fe.key,Ve,WE(Ve.value.mapValue),ca.exists(!0)))}return _.mutationQueue.addMutationBatch(Q,b,je,g)})).next((be=>{N=be;const je=be.applyToLocalDocumentSet(x,de);return _.documentOverlayCache.saveOverlays(Q,be.batchId,je)}))})).then((()=>({batchId:N.batchId,changes:o1(x)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,g,_){let b=d.Vu[d.currentUser.toKey()];b||(b=new dn(At)),b=b.insert(g,_),d.Vu[d.currentUser.toKey()]=b})(s,o.batchId,n),await Dc(s,o.changes),await Kf(s.remoteStore)}catch(o){const u=fg(o,"Failed to persist write");n.reject(u)}}async function q1(i,e){const n=lt(i);try{const s=await MO(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(jt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?jt(d.hu,14607):o.removedDocuments.size>0&&(jt(d.hu,42227),d.hu=!1))})),await Dc(n,s,e)}catch(s){await ou(s)}}function yb(i,e,n){const s=lt(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,d)=>{const g=d.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(d,g){const _=lt(d);_.onlineState=g;let b=!1;_.queries.forEach(((R,x)=>{for(const N of x.Sa)N.va(g)&&(b=!0)})),b&&dg(_)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function AD(i,e,n){const s=lt(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let d=new dn(Qe.comparator);d=d.insert(u,gr.newNoDocument(u,at.min()));const g=Ct().add(u),_=new qf(at.min(),new Map,new dn(At),d,g);await q1(s,_),s.du=s.du.remove(u),s.Au.delete(e),mg(s)}else await Tm(s.localStore,e,!1).then((()=>Am(s,e,n))).catch(ou)}async function CD(i,e){const n=lt(i),s=e.batch.batchId;try{const o=await kO(n.localStore,e);F1(n,s,null),H1(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Dc(n,o)}catch(o){await ou(o)}}async function RD(i,e,n){const s=lt(i);try{const o=await(function(d,g){const _=lt(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let R;return _.mutationQueue.lookupMutationBatch(b,g).next((x=>(jt(x!==null,37113),R=x.keys(),_.mutationQueue.removeMutationBatch(b,x)))).next((()=>_.mutationQueue.performConsistencyCheck(b))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(b,R,g))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,R))).next((()=>_.localDocuments.getDocuments(b,R)))}))})(s.localStore,e);F1(s,e,n),H1(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Dc(s,o)}catch(o){await ou(o)}}function H1(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function F1(i,e,n){const s=lt(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Am(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||K1(i,s)}))}function K1(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(og(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),mg(i))}function vb(i,e,n){for(const s of n)s instanceof U1?(i.Ru.addReference(s.key,e),xD(i,s)):s instanceof z1?(Le(pg,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||K1(i,s.key)):Je(19791,{wu:s})}function xD(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(Le(pg,"New document in limbo: "+n),i.Eu.add(s),mg(i))}function mg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Qe(fn.fromString(e)),s=i.fu.next();i.Au.set(s,new yD(n)),i.du=i.du.insert(n,s),k1(i.remoteStore,new lo(Ss(Jm(n.path)),s,"TargetPurposeLimboResolution",Mf.ce))}}async function Dc(i,e,n){const s=lt(i),o=[],u=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,_)=>{d.push(s.pu(_,e,n).then((b=>{if((b||n)&&s.isPrimaryClient){const R=b?!b.fromCache:n?.targetChanges.get(_.targetId)?.current;s.sharedClientState.updateQueryState(_.targetId,R?"current":"not-current")}if(b){o.push(b);const R=sg.As(_.targetId,b);u.push(R)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(_,b){const R=lt(_);try{await R.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>ve.forEach(b,(N=>ve.forEach(N.Es,(Q=>R.persistence.referenceDelegate.addReference(x,N.targetId,Q))).next((()=>ve.forEach(N.ds,(Q=>R.persistence.referenceDelegate.removeReference(x,N.targetId,Q)))))))))}catch(x){if(!lu(x))throw x;Le(ag,"Failed to update sequence numbers: "+x)}for(const x of b){const N=x.targetId;if(!x.fromCache){const Q=R.Ms.get(N),te=Q.snapshotVersion,de=Q.withLastLimboFreeSnapshotVersion(te);R.Ms=R.Ms.insert(N,de)}}})(s.localStore,u))}async function ID(i,e){const n=lt(i);if(!n.currentUser.isEqual(e)){Le(pg,"User change. New user:",e.toKey());const s=await I1(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((g=>{g.forEach((_=>{_.reject(new Ke(Ee.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Dc(n,s.Ls)}}function OD(i,e){const n=lt(i),s=n.Au.get(e);if(s&&s.hu)return Ct().add(s.key);{let o=Ct();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const g=n.Tu.get(d);o=o.unionWith(g.view.nu)}return o}}function G1(i){const e=lt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=q1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AD.bind(null,e),e.Pu.H_=fD.bind(null,e.eventManager),e.Pu.yu=dD.bind(null,e.eventManager),e}function DD(i){const e=lt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RD.bind(null,e),e}class Cf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return NO(this.persistence,new IO,e.initialUser,this.serializer)}Cu(e){return new x1(ig.mi,this.serializer)}Du(e){return new UO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cf.provider={build:()=>new Cf};class ND extends Cf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){jt(this.persistence.referenceDelegate instanceof Sf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new pO(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Yr.withCacheSize(this.cacheSizeBytes):Yr.DEFAULT;return new x1((s=>Sf.mi(s,n)),this.serializer)}}class Cm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>yb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ID.bind(null,this.syncEngine),await oD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new uD})()}createDatastore(e){const n=Hf(e.databaseInfo.databaseId),s=(function(u){return new FO(u)})(e.databaseInfo);return(function(u,d,g,_){return new QO(u,d,g,_)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,d,g){return new XO(s,o,u,d,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>yb(this.syncEngine,n,0)),(function(){return hb.v()?new hb:new zO})())}createSyncEngine(e,n){return(function(o,u,d,g,_,b,R){const x=new vD(o,u,d,g,_,b);return R&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=lt(n);Le(rl,"RemoteStore shutting down."),s.Ea.add(5),await Oc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Cm.provider={build:()=>new Cm};class kD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):pa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Eo="FirestoreClient";class MD{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=mr.UNAUTHENTICATED,this.clientId=Km.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async d=>{Le(Eo,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(Le(Eo,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=fg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Zp(i,e){i.asyncQueue.verifyOperationInProgress(),Le(Eo,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await I1(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function _b(i,e){i.asyncQueue.verifyOperationInProgress();const n=await VD(i);Le(Eo,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>db(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>db(e.remoteStore,o))),i._onlineComponents=e}async function VD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Le(Eo,"Using user provided OfflineComponentProvider");try{await Zp(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Ee.FAILED_PRECONDITION||o.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Wl("Error using user provided cache. Falling back to memory cache: "+n),await Zp(i,new Cf)}}else Le(Eo,"Using default OfflineComponentProvider"),await Zp(i,new ND(void 0));return i._offlineComponents}async function Y1(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Le(Eo,"Using user provided OnlineComponentProvider"),await _b(i,i._uninitializedComponentsProvider._online)):(Le(Eo,"Using default OnlineComponentProvider"),await _b(i,new Cm))),i._onlineComponents}function PD(i){return Y1(i).then((e=>e.syncEngine))}async function jD(i){const e=await Y1(i),n=e.eventManager;return n.onListen=_D.bind(null,e.syncEngine),n.onUnlisten=TD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wD.bind(null,e.syncEngine),n}function LD(i,e,n={}){const s=new mo;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,g,_,b){const R=new kD({next:N=>{R.Nu(),d.enqueueAndForget((()=>hD(u,x)));const Q=N.docs.has(g);!Q&&N.fromCache?b.reject(new Ke(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):Q&&N.fromCache&&_&&_.source==="server"?b.reject(new Ke(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(N)},error:N=>b.reject(N)}),x=new pD(Jm(g.path),R,{includeMetadataChanges:!0,qa:!0});return cD(u,x)})(await jD(i),i.asyncQueue,e,n,s))),s.promise}function Q1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const bb=new Map;const $1="firestore.googleapis.com",Eb=!0;class Tb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ke(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$1,this.ssl=Eb}else this.host=e.host,this.ssl=e.ssl??Eb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=R1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fO)throw new Ke(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$I("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q1(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ke(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ke(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ke(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gg{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ke(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ke(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new LI;switch(s.type){case"firstParty":return new qI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ke(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=bb.get(n);s&&(Le("ComponentProvider","Removing Datastore"),bb.delete(n),s.terminate())})(this),Promise.resolve()}}function UD(i,e,n,s={}){i=fc(i,gg);const o=ru(e),u=i._getSettings(),d={...u,emulatorOptions:i._getEmulatorOptions()},g=`${e}:${n}`;o&&($b(`https://${g}`),Xb("Firestore",!0)),u.host!==$1&&u.host!==g&&Wl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...u,host:g,ssl:o,emulatorOptions:s};if(!Zo(_,d)&&(i._setSettings(_),s.mockUserToken)){let b,R;if(typeof s.mockUserToken=="string")b=s.mockUserToken,R=mr.MOCK_USER;else{b=uC(s.mockUserToken,i._app?.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new Ke(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new mr(x)}i._authCredentials=new UI(new zE(b,R))}}class yg{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new yg(this.firestore,e,this._query)}}class Xn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _c(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xn(this.firestore,e,this._key)}toJSON(){return{type:Xn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Rc(n,Xn._jsonSchema))return new Xn(e,s||null,new Qe(fn.fromString(n.referencePath)))}}Xn._jsonSchemaVersion="firestore/documentReference/1.0",Xn._jsonSchema={type:Pn("string",Xn._jsonSchemaVersion),referencePath:Pn("string")};class _c extends yg{constructor(e,n,s){super(e,n,Jm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xn(this.firestore,null,new Qe(e))}withConverter(e){return new _c(this.firestore,e,this._path)}}function X1(i,e,...n){if(i=qi(i),arguments.length===1&&(e=Km.newId()),QI("doc","path",e),i instanceof gg){const s=fn.fromString(e,...n);return P0(s),new Xn(i,null,new Qe(s))}{if(!(i instanceof Xn||i instanceof _c))throw new Ke(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(fn.fromString(e,...n));return P0(s),new Xn(i.firestore,i instanceof _c?i.converter:null,new Qe(s))}}const wb="AsyncQueue";class Sb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new D1(this,"async_queue_retry"),this._c=()=>{const s=Jp();s&&Le(wb,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Jp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Jp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new mo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!lu(e))throw e;Le(wb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,pa("INTERNAL UNHANDLED ERROR: ",Ab(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=hg.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Je(47125,{Pc:Ab(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ab(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class vg extends gg{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new Sb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sb(e),this._firestoreClient=void 0,await e}}}function zD(i,e){const n=typeof i=="object"?i:eE(),s=typeof i=="string"?i:yf,o=km(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=oC("firestore");u&&UD(o,...u)}return o}function W1(i){if(i._terminated)throw new Ke(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||BD(i),i._firestoreClient}function BD(i){const e=i._freezeSettings(),n=(function(o,u,d,g){return new a2(o,u,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,Q1(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new MD(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class Bi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bi(ar.fromBase64String(e))}catch(n){throw new Ke(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bi(ar.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rc(e,Bi._jsonSchema))return Bi.fromBase64String(e.bytes)}}Bi._jsonSchemaVersion="firestore/bytes/1.0",Bi._jsonSchema={type:Pn("string",Bi._jsonSchemaVersion),bytes:Pn("string")};class _g{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ke(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class J1{constructor(e){this._methodName=e}}class Cs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ke(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ke(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cs._jsonSchemaVersion}}static fromJSON(e){if(Rc(e,Cs._jsonSchema))return new Cs(e.latitude,e.longitude)}}Cs._jsonSchemaVersion="firestore/geoPoint/1.0",Cs._jsonSchema={type:Pn("string",Cs._jsonSchemaVersion),latitude:Pn("number"),longitude:Pn("number")};class Rs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Rs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rc(e,Rs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Rs(e.vectorValues);throw new Ke(Ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Rs._jsonSchemaVersion="firestore/vectorValue/1.0",Rs._jsonSchema={type:Pn("string",Rs._jsonSchemaVersion),vectorValues:Pn("object")};const qD=/^__.*__$/;class HD{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new al(e,this.data,this.fieldMask,n,this.fieldTransforms):new xc(e,this.data,n,this.fieldTransforms)}}function Z1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je(40011,{Ac:i})}}class bg{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Rf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Z1(this.Ac)&&qD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class FD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Hf(e)}Cc(e,n,s,o=!1){return new bg({Ac:e,methodName:n,Dc:s,path:sr.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function KD(i){const e=i._freezeSettings(),n=Hf(i._databaseId);return new FD(i._databaseId,!!e.ignoreUndefinedProperties,n)}function GD(i,e,n,s,o,u={}){const d=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);rT("Data must be an object, but it was:",d,s);const g=tT(s,d);let _,b;if(u.merge)_=new rs(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const R=[];for(const x of u.mergeFields){const N=YD(e,x,n);if(!d.contains(N))throw new Ke(Ee.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);$D(R,N)||R.push(N)}_=new rs(R),b=d.fieldTransforms.filter((x=>_.covers(x.field)))}else _=null,b=d.fieldTransforms;return new HD(new zi(g),_,b)}function eT(i,e){if(nT(i=qi(i)))return rT("Unsupported field value:",e,i),tT(i,e);if(i instanceof J1)return(function(s,o){if(!Z1(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let d=0;for(const g of s){let _=eT(g,o.wc(d));_==null&&(_={nullValue:"NULL_VALUE"}),u.push(_),d++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=qi(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return O2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Zt.fromDate(s);return{timestampValue:wf(o.serializer,u)}}if(s instanceof Zt){const u=new Zt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:wf(o.serializer,u)}}if(s instanceof Cs)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Bi)return{bytesValue:b1(o.serializer,s._byteString)};if(s instanceof Xn){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ng(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Rs)return(function(d,g){return{mapValue:{fields:{[$E]:{stringValue:XE},[vf]:{arrayValue:{values:d.toArray().map((b=>{if(typeof b!="number")throw g.Sc("VectorValues must only contain numeric values.");return Zm(g.serializer,b)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Gm(s)}`)})(i,e)}function tT(i,e){const n={};return HE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):il(i,((s,o)=>{const u=eT(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function nT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Zt||i instanceof Cs||i instanceof Bi||i instanceof Xn||i instanceof J1||i instanceof Rs)}function rT(i,e,n){if(!nT(n)||!BE(n)){const s=Gm(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function YD(i,e,n){if((e=qi(e))instanceof _g)return e._internalPath;if(typeof e=="string")return iT(i,e);throw Rf("Field path arguments must be of type string or ",i,!1,void 0,n)}const QD=new RegExp("[~\\*/\\[\\]]");function iT(i,e,n){if(e.search(QD)>=0)throw Rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new _g(...e.split("."))._internalPath}catch{throw Rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Rf(i,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||d)&&(_+=" (found",u&&(_+=` in field ${s}`),d&&(_+=` in document ${o}`),_+=")"),new Ke(Ee.INVALID_ARGUMENT,g+i+_)}function $D(i,e){return i.some((n=>n.isEqual(e)))}class sT{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(aT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class XD extends sT{data(){return super.data()}}function aT(i,e){return typeof e=="string"?iT(i,e):e instanceof _g?e._internalPath:e._delegate._internalPath}class WD{convertValue(e,n="none"){switch(_o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Je(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return il(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[vf].arrayValue?.values?.map((s=>Cn(s.doubleValue)));return new Rs(n)}convertGeoPoint(e){return new Cs(Cn(e.latitude),Cn(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Pf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(pc(e));default:return null}}convertTimestamp(e){const n=yo(e);return new Zt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=fn.fromString(e);jt(C1(s),9688,{name:e});const o=new mc(s.get(1),s.get(3)),u=new Qe(s.popFirst(5));return o.isEqual(n)||pa(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function JD(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class Ju{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wo extends sT{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(aT("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ke(Ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Wo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Wo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wo._jsonSchema={type:Pn("string",Wo._jsonSchemaVersion),bundleSource:Pn("string","DocumentSnapshot"),bundleName:Pn("string"),bundle:Pn("string")};class sf extends Wo{data(e={}){return super.data(e)}}class ac{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ju(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new sf(this._firestore,this._userDataWriter,s.key,s,new Ju(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ke(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((g=>{const _=new sf(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Ju(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const _=new sf(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Ju(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,R=-1;return g.type!==0&&(b=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),R=d.indexOf(g.doc.key)),{type:ZD(g.type),doc:_,oldIndex:b,newIndex:R}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ke(Ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ac._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Km.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ZD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je(61501,{type:i})}}function eN(i){i=fc(i,Xn);const e=fc(i.firestore,vg);return LD(W1(e),i._key).then((n=>iN(e,i,n)))}ac._jsonSchemaVersion="firestore/querySnapshot/1.0",ac._jsonSchema={type:Pn("string",ac._jsonSchemaVersion),bundleSource:Pn("string","QuerySnapshot"),bundleName:Pn("string"),bundle:Pn("string")};class tN extends WD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,n)}}function nN(i,e,n){i=fc(i,Xn);const s=fc(i.firestore,vg),o=JD(i.converter,e);return rN(s,[GD(KD(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,ca.none())])}function rN(i,e){return(function(s,o){const u=new mo;return s.asyncQueue.enqueueAndForget((async()=>SD(await PD(s),o,u))),u.promise})(W1(i),e)}function iN(i,e,n){const s=n.docs.get(e._key),o=new tN(i);return new Wo(i,o,e._key,s,new Ju(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){au=o})(iu),$l(new el("firestore",((s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),g=new vg(new zI(s.getProvider("auth-internal")),new HI(d,s.getProvider("app-check-internal")),(function(b,R){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new Ke(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mc(b.options.projectId,R)})(d,o),d);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),fo(N0,k0,e),fo(N0,k0,"esm2020")})();const sN={apiKey:"AIzaSyCGabs1zTYUI0-yPRp2RD7_Zk4HLsd3kSc",authDomain:"gemini-podcast-cards.firebaseapp.com",projectId:"gemini-podcast-cards",storageBucket:"gemini-podcast-cards.firebasestorage.app",messagingSenderId:"535172285628",appId:"1:535172285628:web:1fa37b46cf2bdf89257cb9"},oT=Zb(sN),Kh=PI(oT),aN=new oa,lT=zD(oT),uT="users";async function oN(i,e){if(!i)throw new Error("User ID is required");try{const n=JSON.stringify(e),s=X1(lT,uT,i);await nN(s,{vocab_data:n,last_synced:Date.now()}),console.log(`Successfully synced ${e.length} cards for user ${i}`)}catch(n){throw console.error("Sync upload failed:",n),n}}async function lN(i){if(!i)throw new Error("User ID is required");try{const e=X1(lT,uT,i),n=await eN(e);if(n.exists()){const s=n.data();if(s.vocab_data)return JSON.parse(s.vocab_data)}return null}catch(e){throw console.error("Sync download failed:",e),e}}const Cb="zanta0529@gmail.com,amy.webhd@gmail.com".split(",").map(i=>i.trim()).filter(i=>i!==""),uN=({isOpen:i,onClose:e,onConfirm:n,title:s,message:o})=>{const[u,d]=_e.useState(3);return _e.useEffect(()=>{if(i){d(3);const g=setInterval(()=>{d(_=>_<=1?(clearInterval(g),0):_-1)},1e3);return()=>clearInterval(g)}},[i]),i?O.jsx("div",{style:Rb.overlay,children:O.jsxs("div",{style:Rb.content,children:[O.jsxs("h3",{style:{marginTop:0,color:"#ff6b6b"},children:[" ",s]}),O.jsx("p",{style:{color:"#ccc",lineHeight:"1.5"},children:o}),O.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[O.jsx("button",{onClick:e,style:{...oc,backgroundColor:"#666"},children:"Cancel"}),O.jsx("button",{onClick:()=>{n(),e()},disabled:u>0,style:{...oc,backgroundColor:u>0?"#CCC":"#e03131",cursor:u>0?"not-allowed":"pointer",opacity:u>0?.7:1},children:u>0?`Wait (${u})...`:"Execute!"})]})]})}):null};function cN(){const[i,e]=_e.useState([]),[n,s]=_e.useState("home"),[o,u]=_e.useState(!0),[d,g]=_e.useState(0),[_,b]=_e.useState(null),[R,x]=_e.useState(!1),[N,Q]=_e.useState(!1),[te,de]=_e.useState(!1),[be,je]=_e.useState(!1),[Fe,Ve]=_e.useState(!1),[rt,it]=_e.useState(!1),[$e,P]=_e.useState(!1),[k,L]=_e.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),Y=(ze,qe,H)=>{L({isOpen:!0,title:ze,message:qe,onConfirm:H})};_e.useEffect(()=>{const ze=Ax(Kh,async qe=>{qe?Cb.length===0||Cb.includes(qe.email)?(b(qe),dt.success(`Welcome, ${qe.displayName}`)):(console.warn(`Unauthorized: ${qe.email}`),dt.error(`Access denied for ${qe.email}`),await E0(Kh),b(null)):b(null)});return()=>ze()},[]);const j=async()=>{try{u(!0),await Bw();const ze=await Qt.vocab.toArray(),qe=Date.now(),H=ze.filter(pe=>pe.nextReview<=qe||pe.status==="new");e(H)}catch(ze){console.error("Failed to load cards:",ze),dt.error("Load failed: "+ze.message)}finally{u(!1)}};_e.useEffect(()=>{j()},[]);const B=async ze=>{try{await Qt.vocab.put(ze),g(qe=>qe+1)}catch(qe){console.error("Update failed:",qe),dt.error("Update failed")}},M=async()=>{try{await Kx(Kh,aN),it(!1)}catch(ze){console.error("Login failed:",ze),dt.error("Login failed")}},ut=async()=>{await E0(Kh),window.location.reload()},Gt=async()=>{if(!_)return;x(!0),it(!1);const ze=dt.loading("Backing up...");try{const qe=await Qt.vocab.toArray();await oN(_.uid,qe),dt.success("Backup complete!",{id:ze})}catch(qe){console.error(qe),dt.error("Backup failed",{id:ze})}finally{x(!1),setTimeout(()=>dt.dismiss(ze),3e3)}},ce=async()=>{_&&Y("Overwrite Warning","Are you sure you want to overwrite local data with cloud backup? This action cannot be undone.",async()=>{x(!0),it(!1);const ze=dt.loading("Restoring...");try{const qe=await lN(_.uid);qe?(await Qt.vocab.clear(),await Qt.vocab.bulkAdd(qe),dt.success("Restore complete! Reloading...",{id:ze}),setTimeout(()=>window.location.reload(),1500)):dt("No backup found.",{id:ze,icon:""})}catch(qe){console.error(qe),dt.error("Restore failed",{id:ze})}finally{x(!1),setTimeout(()=>dt.dismiss(ze),3e3)}})};if(o)return O.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1b1e",color:"#fff"},children:"Loading..."});const Ie=i[d],Be=()=>n==="dashboard"?O.jsx(JA,{onBack:()=>s("home")}):Ie?O.jsx(tA,{card:Ie,onUpdate:B},Ie.id):O.jsxs("div",{style:{textAlign:"center",padding:"3rem",border:"1px dashed #555",borderRadius:"8px"},children:[O.jsx("h2",{children:" All caught up!"}),O.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"1rem",padding:"0.5rem 1rem",cursor:"pointer"},children:"Refresh"})]});return O.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",padding:"1rem",minHeight:"100vh",backgroundColor:"#1a1b1e",color:"#ffffff",fontFamily:"sans-serif",display:"flex",flexDirection:"column",gap:"0.5rem",alignItems:"center",position:"relative"},children:[O.jsx(FA,{position:"top-center",toastOptions:{duration:4e3,style:{background:"#333",color:"#fff"},error:{duration:6e3}}}),O.jsx(uN,{isOpen:k.isOpen,onClose:()=>L(ze=>({...ze,isOpen:!1})),onConfirm:k.onConfirm,title:k.title,message:k.message}),O.jsxs("nav",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",padding:"0.5rem",borderBottom:"1px solid #333",position:"relative"},children:[O.jsxs("div",{style:{fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px"},children:["GPF",O.jsx("button",{onClick:()=>de(!0),style:hN,title:"Settings",children:""})]}),O.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[O.jsx("button",{onClick:()=>je(!0),style:{...oc,backgroundColor:"#2196f3"},children:"+ Add"}),O.jsx("button",{onClick:()=>Q(!0),style:{...oc,backgroundColor:"#e91e63"},children:"Import"}),O.jsx("button",{onClick:()=>it(!rt),style:{...oc,backgroundColor:"#333",padding:"0.5rem 0.8rem",fontSize:"1.1rem"},children:""}),rt&&O.jsxs(O.Fragment,{children:[O.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99},onClick:()=>it(!1)}),O.jsxs("div",{style:Ui.container,children:[O.jsx("button",{onClick:()=>{s("dashboard"),it(!1)},style:Ui.item,children:" Learning Dashboard"}),O.jsx("div",{style:Ui.divider}),O.jsx("button",{onClick:()=>{Ve(!0),it(!1)},style:Ui.item,children:" Manage Cards"}),O.jsx("button",{onClick:()=>{P(!0),it(!1)},style:Ui.item,children:" AI Smart Review"}),O.jsx("div",{style:Ui.divider}),_?O.jsxs(O.Fragment,{children:[O.jsx("button",{onClick:Gt,disabled:R,style:Ui.item,children:" Backup Data"}),O.jsx("button",{onClick:ce,disabled:R,style:Ui.item,children:" Restore Data"}),O.jsx("div",{style:Ui.divider}),O.jsx("div",{style:Ui.userEmail,children:_.email}),O.jsx("button",{onClick:ut,style:{...Ui.item,color:"#ff6b6b"},children:"Logout"})]}):O.jsx("button",{onClick:M,style:{...Ui.item,color:"#4285F4"},children:"Login with Google"})]})]})]})]}),O.jsxs("header",{style:{marginBottom:"0.5rem",width:"100%",textAlign:"center"},children:[O.jsx("h1",{style:{fontSize:"1.5rem",margin:"0 0 0.3rem 0"},children:"Gemini Flashcards"}),O.jsx("p",{style:{color:"#888",margin:0,fontSize:"0.9rem"},children:i.length>0?`Progress: ${d} / ${i.length}`:"No cards due"})]}),O.jsx("main",{style:{width:"100%",flex:1,display:"flex",flexDirection:"column"},children:Be()}),O.jsx(KA,{isOpen:N,onClose:()=>Q(!1),onSuccess:j}),O.jsx(GA,{isOpen:te,onClose:()=>de(!1)}),O.jsx(YA,{isOpen:be,onClose:()=>je(!1),onSuccess:j}),O.jsx(QA,{isOpen:Fe,onClose:()=>{Ve(!1),j()}}),O.jsx($A,{isOpen:$e,onClose:()=>P(!1)})]})}const oc={padding:"0.5rem 1rem",fontSize:"0.9rem",borderRadius:"6px",border:"none",cursor:"pointer",color:"white",whiteSpace:"nowrap",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.3rem",transition:"opacity 0.2s"},hN={background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem"},Ui={container:{position:"absolute",top:"3.5rem",right:"0.5rem",backgroundColor:"#25262b",border:"1px solid #444",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.5)",zIndex:100,display:"flex",flexDirection:"column",minWidth:"180px",padding:"0.5rem"},item:{background:"none",border:"none",color:"#e0e0e0",padding:"0.8rem 1rem",textAlign:"left",cursor:"pointer",borderRadius:"4px",fontSize:"0.95rem",transition:"background 0.2s"},divider:{height:"1px",backgroundColor:"#444",margin:"0.5rem 0"},userEmail:{padding:"0.5rem 1rem",fontSize:"0.75rem",color:"#888",borderBottom:"1px solid #333",marginBottom:"0.5rem"}},Rb={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},content:{backgroundColor:"#25262b",padding:"2rem",borderRadius:"12px",maxWidth:"400px",width:"90%",border:"1px solid #444",boxShadow:"0 8px 30px rgba(0,0,0,0.5)"}};jw.createRoot(document.getElementById("root")).render(O.jsx(xb.StrictMode,{children:O.jsx(cN,{})}));
