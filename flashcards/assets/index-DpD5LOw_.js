const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ImportModal-oFl3otQF.js","assets/cardService-Dr3V7M-O.js","assets/CardEditor-BdeTQPNG.js","assets/CardManager-Dg3t0S6n.js","assets/SmartReviewGenerator-CqyHOxKM.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var wS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var xm={exports:{}},qu={};var b_;function RS(){if(b_)return qu;b_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var y in o)y!=="key"&&(u[y]=o[y])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:u}}return qu.Fragment=e,qu.jsx=n,qu.jsxs=n,qu}var T_;function CS(){return T_||(T_=1,xm.exports=RS()),xm.exports}var oe=CS(),Nm={exports:{}},at={};var S_;function IS(){if(S_)return at;S_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),N=Symbol.iterator;function X(j){return j===null||typeof j!="object"?null:(j=N&&j[N]||j["@@iterator"],typeof j=="function"?j:null)}var de={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},be=Object.assign,Re={};function He(j,ce,Oe){this.props=j,this.context=ce,this.refs=Re,this.updater=Oe||de}He.prototype.isReactComponent={},He.prototype.setState=function(j,ce){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ce,"setState")},He.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function Ye(){}Ye.prototype=He.prototype;function Le(j,ce,Oe){this.props=j,this.context=ce,this.refs=Re,this.updater=Oe||de}var it=Le.prototype=new Ye;it.constructor=Le,be(it,He.prototype),it.isPureReactComponent=!0;var ht=Array.isArray;function et(){}var V={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function P(j,ce,Oe){var Ne=Oe.ref;return{$$typeof:i,type:j,key:ce,ref:Ne!==void 0?Ne:null,props:Oe}}function $(j,ce){return P(j.type,ce,j.props)}function z(j){return typeof j=="object"&&j!==null&&j.$$typeof===i}function U(j){var ce={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Oe){return ce[Oe]})}var M=/\/+/g;function dt(j,ce){return typeof j=="object"&&j!==null&&j.key!=null?U(""+j.key):ce.toString(36)}function Gt(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(et,et):(j.status="pending",j.then(function(ce){j.status==="pending"&&(j.status="fulfilled",j.value=ce)},function(ce){j.status==="pending"&&(j.status="rejected",j.reason=ce)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function ue(j,ce,Oe,Ne,Xe){var tt=typeof j;(tt==="undefined"||tt==="boolean")&&(j=null);var ct=!1;if(j===null)ct=!0;else switch(tt){case"bigint":case"string":case"number":ct=!0;break;case"object":switch(j.$$typeof){case i:case e:ct=!0;break;case C:return ct=j._init,ue(ct(j._payload),ce,Oe,Ne,Xe)}}if(ct)return Xe=Xe(j),ct=Ne===""?"."+dt(j,0):Ne,ht(Xe)?(Oe="",ct!=null&&(Oe=ct.replace(M,"$&/")+"/"),ue(Xe,ce,Oe,"",function(Be){return Be})):Xe!=null&&(z(Xe)&&(Xe=$(Xe,Oe+(Xe.key==null||j&&j.key===Xe.key?"":(""+Xe.key).replace(M,"$&/")+"/")+ct)),ce.push(Xe)),1;ct=0;var nn=Ne===""?".":Ne+":";if(ht(j))for(var Qt=0;Qt<j.length;Qt++)Ne=j[Qt],tt=nn+dt(Ne,Qt),ct+=ue(Ne,ce,Oe,tt,Xe);else if(Qt=X(j),typeof Qt=="function")for(j=Qt.call(j),Qt=0;!(Ne=j.next()).done;)Ne=Ne.value,tt=nn+dt(Ne,Qt++),ct+=ue(Ne,ce,Oe,tt,Xe);else if(tt==="object"){if(typeof j.then=="function")return ue(Gt(j),ce,Oe,Ne,Xe);throw ce=String(j),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return ct}function Ie(j,ce,Oe){if(j==null)return j;var Ne=[],Xe=0;return ue(j,Ne,"","",function(tt){return ce.call(Oe,tt,Xe++)}),Ne}function je(j){if(j._status===-1){var ce=j._result;ce=ce(),ce.then(function(Oe){(j._status===0||j._status===-1)&&(j._status=1,j._result=Oe)},function(Oe){(j._status===0||j._status===-1)&&(j._status=2,j._result=Oe)}),j._status===-1&&(j._status=0,j._result=ce)}if(j._status===1)return j._result.default;throw j._result}var ze=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Me={map:Ie,forEach:function(j,ce,Oe){Ie(j,function(){ce.apply(this,arguments)},Oe)},count:function(j){var ce=0;return Ie(j,function(){ce++}),ce},toArray:function(j){return Ie(j,function(ce){return ce})||[]},only:function(j){if(!z(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return at.Activity=D,at.Children=Me,at.Component=He,at.Fragment=n,at.Profiler=o,at.PureComponent=Le,at.StrictMode=s,at.Suspense=E,at.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,at.__COMPILER_RUNTIME={__proto__:null,c:function(j){return V.H.useMemoCache(j)}},at.cache=function(j){return function(){return j.apply(null,arguments)}},at.cacheSignal=function(){return null},at.cloneElement=function(j,ce,Oe){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var Ne=be({},j.props),Xe=j.key;if(ce!=null)for(tt in ce.key!==void 0&&(Xe=""+ce.key),ce)!k.call(ce,tt)||tt==="key"||tt==="__self"||tt==="__source"||tt==="ref"&&ce.ref===void 0||(Ne[tt]=ce[tt]);var tt=arguments.length-2;if(tt===1)Ne.children=Oe;else if(1<tt){for(var ct=Array(tt),nn=0;nn<tt;nn++)ct[nn]=arguments[nn+2];Ne.children=ct}return P(j.type,Xe,Ne)},at.createContext=function(j){return j={$$typeof:d,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:u,_context:j},j},at.createElement=function(j,ce,Oe){var Ne,Xe={},tt=null;if(ce!=null)for(Ne in ce.key!==void 0&&(tt=""+ce.key),ce)k.call(ce,Ne)&&Ne!=="key"&&Ne!=="__self"&&Ne!=="__source"&&(Xe[Ne]=ce[Ne]);var ct=arguments.length-2;if(ct===1)Xe.children=Oe;else if(1<ct){for(var nn=Array(ct),Qt=0;Qt<ct;Qt++)nn[Qt]=arguments[Qt+2];Xe.children=nn}if(j&&j.defaultProps)for(Ne in ct=j.defaultProps,ct)Xe[Ne]===void 0&&(Xe[Ne]=ct[Ne]);return P(j,tt,Xe)},at.createRef=function(){return{current:null}},at.forwardRef=function(j){return{$$typeof:y,render:j}},at.isValidElement=z,at.lazy=function(j){return{$$typeof:C,_payload:{_status:-1,_result:j},_init:je}},at.memo=function(j,ce){return{$$typeof:b,type:j,compare:ce===void 0?null:ce}},at.startTransition=function(j){var ce=V.T,Oe={};V.T=Oe;try{var Ne=j(),Xe=V.S;Xe!==null&&Xe(Oe,Ne),typeof Ne=="object"&&Ne!==null&&typeof Ne.then=="function"&&Ne.then(et,ze)}catch(tt){ze(tt)}finally{ce!==null&&Oe.types!==null&&(ce.types=Oe.types),V.T=ce}},at.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},at.use=function(j){return V.H.use(j)},at.useActionState=function(j,ce,Oe){return V.H.useActionState(j,ce,Oe)},at.useCallback=function(j,ce){return V.H.useCallback(j,ce)},at.useContext=function(j){return V.H.useContext(j)},at.useDebugValue=function(){},at.useDeferredValue=function(j,ce){return V.H.useDeferredValue(j,ce)},at.useEffect=function(j,ce){return V.H.useEffect(j,ce)},at.useEffectEvent=function(j){return V.H.useEffectEvent(j)},at.useId=function(){return V.H.useId()},at.useImperativeHandle=function(j,ce,Oe){return V.H.useImperativeHandle(j,ce,Oe)},at.useInsertionEffect=function(j,ce){return V.H.useInsertionEffect(j,ce)},at.useLayoutEffect=function(j,ce){return V.H.useLayoutEffect(j,ce)},at.useMemo=function(j,ce){return V.H.useMemo(j,ce)},at.useOptimistic=function(j,ce){return V.H.useOptimistic(j,ce)},at.useReducer=function(j,ce,Oe){return V.H.useReducer(j,ce,Oe)},at.useRef=function(j){return V.H.useRef(j)},at.useState=function(j){return V.H.useState(j)},at.useSyncExternalStore=function(j,ce,Oe){return V.H.useSyncExternalStore(j,ce,Oe)},at.useTransition=function(){return V.H.useTransition()},at.version="19.2.4",at}var A_;function Cp(){return A_||(A_=1,Nm.exports=IS()),Nm.exports}var Ce=Cp();const CE=Rp(Ce);var Mm={exports:{}},Hu={},km={exports:{}},Vm={};var w_;function OS(){return w_||(w_=1,(function(i){function e(ue,Ie){var je=ue.length;ue.push(Ie);e:for(;0<je;){var ze=je-1>>>1,Me=ue[ze];if(0<o(Me,Ie))ue[ze]=Ie,ue[je]=Me,je=ze;else break e}}function n(ue){return ue.length===0?null:ue[0]}function s(ue){if(ue.length===0)return null;var Ie=ue[0],je=ue.pop();if(je!==Ie){ue[0]=je;e:for(var ze=0,Me=ue.length,j=Me>>>1;ze<j;){var ce=2*(ze+1)-1,Oe=ue[ce],Ne=ce+1,Xe=ue[Ne];if(0>o(Oe,je))Ne<Me&&0>o(Xe,Oe)?(ue[ze]=Xe,ue[Ne]=je,ze=Ne):(ue[ze]=Oe,ue[ce]=je,ze=ce);else if(Ne<Me&&0>o(Xe,je))ue[ze]=Xe,ue[Ne]=je,ze=Ne;else break e}}return Ie}function o(ue,Ie){var je=ue.sortIndex-Ie.sortIndex;return je!==0?je:ue.id-Ie.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,y=d.now();i.unstable_now=function(){return d.now()-y}}var E=[],b=[],C=1,D=null,N=3,X=!1,de=!1,be=!1,Re=!1,He=typeof setTimeout=="function"?setTimeout:null,Ye=typeof clearTimeout=="function"?clearTimeout:null,Le=typeof setImmediate<"u"?setImmediate:null;function it(ue){for(var Ie=n(b);Ie!==null;){if(Ie.callback===null)s(b);else if(Ie.startTime<=ue)s(b),Ie.sortIndex=Ie.expirationTime,e(E,Ie);else break;Ie=n(b)}}function ht(ue){if(be=!1,it(ue),!de)if(n(E)!==null)de=!0,et||(et=!0,U());else{var Ie=n(b);Ie!==null&&Gt(ht,Ie.startTime-ue)}}var et=!1,V=-1,k=5,P=-1;function $(){return Re?!0:!(i.unstable_now()-P<k)}function z(){if(Re=!1,et){var ue=i.unstable_now();P=ue;var Ie=!0;try{e:{de=!1,be&&(be=!1,Ye(V),V=-1),X=!0;var je=N;try{t:{for(it(ue),D=n(E);D!==null&&!(D.expirationTime>ue&&$());){var ze=D.callback;if(typeof ze=="function"){D.callback=null,N=D.priorityLevel;var Me=ze(D.expirationTime<=ue);if(ue=i.unstable_now(),typeof Me=="function"){D.callback=Me,it(ue),Ie=!0;break t}D===n(E)&&s(E),it(ue)}else s(E);D=n(E)}if(D!==null)Ie=!0;else{var j=n(b);j!==null&&Gt(ht,j.startTime-ue),Ie=!1}}break e}finally{D=null,N=je,X=!1}Ie=void 0}}finally{Ie?U():et=!1}}}var U;if(typeof Le=="function")U=function(){Le(z)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,dt=M.port2;M.port1.onmessage=z,U=function(){dt.postMessage(null)}}else U=function(){He(z,0)};function Gt(ue,Ie){V=He(function(){ue(i.unstable_now())},Ie)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ue){ue.callback=null},i.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ue?Math.floor(1e3/ue):5},i.unstable_getCurrentPriorityLevel=function(){return N},i.unstable_next=function(ue){switch(N){case 1:case 2:case 3:var Ie=3;break;default:Ie=N}var je=N;N=Ie;try{return ue()}finally{N=je}},i.unstable_requestPaint=function(){Re=!0},i.unstable_runWithPriority=function(ue,Ie){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var je=N;N=ue;try{return Ie()}finally{N=je}},i.unstable_scheduleCallback=function(ue,Ie,je){var ze=i.unstable_now();switch(typeof je=="object"&&je!==null?(je=je.delay,je=typeof je=="number"&&0<je?ze+je:ze):je=ze,ue){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=je+Me,ue={id:C++,callback:Ie,priorityLevel:ue,startTime:je,expirationTime:Me,sortIndex:-1},je>ze?(ue.sortIndex=je,e(b,ue),n(E)===null&&ue===n(b)&&(be?(Ye(V),V=-1):be=!0,Gt(ht,je-ze))):(ue.sortIndex=Me,e(E,ue),de||X||(de=!0,et||(et=!0,U()))),ue},i.unstable_shouldYield=$,i.unstable_wrapCallback=function(ue){var Ie=N;return function(){var je=N;N=Ie;try{return ue.apply(this,arguments)}finally{N=je}}}})(Vm)),Vm}var R_;function DS(){return R_||(R_=1,km.exports=OS()),km.exports}var Pm={exports:{}},lr={};var C_;function xS(){if(C_)return lr;C_=1;var i=Cp();function e(E){var b="https://react.dev/errors/"+E;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)b+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+E+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(E,b,C){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:D==null?null:""+D,children:E,containerInfo:b,implementation:C}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(E,b){if(E==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return lr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,lr.createPortal=function(E,b){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(e(299));return u(E,b,null,C)},lr.flushSync=function(E){var b=d.T,C=s.p;try{if(d.T=null,s.p=2,E)return E()}finally{d.T=b,s.p=C,s.d.f()}},lr.preconnect=function(E,b){typeof E=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,s.d.C(E,b))},lr.prefetchDNS=function(E){typeof E=="string"&&s.d.D(E)},lr.preinit=function(E,b){if(typeof E=="string"&&b&&typeof b.as=="string"){var C=b.as,D=y(C,b.crossOrigin),N=typeof b.integrity=="string"?b.integrity:void 0,X=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;C==="style"?s.d.S(E,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:D,integrity:N,fetchPriority:X}):C==="script"&&s.d.X(E,{crossOrigin:D,integrity:N,fetchPriority:X,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},lr.preinitModule=function(E,b){if(typeof E=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var C=y(b.as,b.crossOrigin);s.d.M(E,{crossOrigin:C,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&s.d.M(E)},lr.preload=function(E,b){if(typeof E=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var C=b.as,D=y(C,b.crossOrigin);s.d.L(E,C,{crossOrigin:D,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},lr.preloadModule=function(E,b){if(typeof E=="string")if(b){var C=y(b.as,b.crossOrigin);s.d.m(E,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:C,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else s.d.m(E)},lr.requestFormReset=function(E){s.d.r(E)},lr.unstable_batchedUpdates=function(E,b){return E(b)},lr.useFormState=function(E,b,C){return d.H.useFormState(E,b,C)},lr.useFormStatus=function(){return d.H.useHostTransitionStatus()},lr.version="19.2.4",lr}var I_;function NS(){if(I_)return Pm.exports;I_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Pm.exports=xS(),Pm.exports}var O_;function MS(){if(O_)return Hu;O_=1;var i=DS(),e=Cp(),n=NS();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function y(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function E(t){if(u(t)!==t)throw Error(s(188))}function b(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return E(h),t;if(m===l)return E(h),r;m=m.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=m;else{for(var T=!1,R=h.child;R;){if(R===a){T=!0,a=h,l=m;break}if(R===l){T=!0,l=h,a=m;break}R=R.sibling}if(!T){for(R=m.child;R;){if(R===a){T=!0,a=m,l=h;break}if(R===l){T=!0,l=m,a=h;break}R=R.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function C(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=C(t),r!==null)return r;t=t.sibling}return null}var D=Object.assign,N=Symbol.for("react.element"),X=Symbol.for("react.transitional.element"),de=Symbol.for("react.portal"),be=Symbol.for("react.fragment"),Re=Symbol.for("react.strict_mode"),He=Symbol.for("react.profiler"),Ye=Symbol.for("react.consumer"),Le=Symbol.for("react.context"),it=Symbol.for("react.forward_ref"),ht=Symbol.for("react.suspense"),et=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=z&&t[z]||t["@@iterator"],typeof t=="function"?t:null)}var M=Symbol.for("react.client.reference");function dt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===M?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case be:return"Fragment";case He:return"Profiler";case Re:return"StrictMode";case ht:return"Suspense";case et:return"SuspenseList";case P:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case de:return"Portal";case Le:return t.displayName||"Context";case Ye:return(t._context.displayName||"Context")+".Consumer";case it:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return r=t.displayName||null,r!==null?r:dt(t.type)||"Memo";case k:r=t._payload,t=t._init;try{return dt(t(r))}catch{}}return null}var Gt=Array.isArray,ue=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,je={pending:!1,data:null,method:null,action:null},ze=[],Me=-1;function j(t){return{current:t}}function ce(t){0>Me||(t.current=ze[Me],ze[Me]=null,Me--)}function Oe(t,r){Me++,ze[Me]=t.current,t.current=r}var Ne=j(null),Xe=j(null),tt=j(null),ct=j(null);function nn(t,r){switch(Oe(tt,r),Oe(Xe,t),Oe(Ne,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Fv(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Fv(r),t=Kv(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ce(Ne),Oe(Ne,t)}function Qt(){ce(Ne),ce(Xe),ce(tt)}function Be(t){t.memoizedState!==null&&Oe(ct,t);var r=Ne.current,a=Kv(r,t.type);r!==a&&(Oe(Xe,t),Oe(Ne,a))}function bs(t){Xe.current===t&&(ce(Ne),ce(Xe)),ct.current===t&&(ce(ct),Uu._currentValue=je)}var wt,ui;function ci(t){if(wt===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);wt=r&&r[1]||"",ui=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wt+t+ui}var qr=!1;function Ts(t,r){if(!t||qr)return"";qr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(le){var se=le}Reflect.construct(t,[],pe)}else{try{pe.call()}catch(le){se=le}t.call(pe.prototype)}}else{try{throw Error()}catch(le){se=le}(pe=t())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(le){if(le&&se&&typeof le.stack=="string")return[le.stack,se.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),T=m[0],R=m[1];if(T&&R){var L=T.split(`
`),re=R.split(`
`);for(h=l=0;l<L.length&&!L[l].includes("DetermineComponentFrameRoot");)l++;for(;h<re.length&&!re[h].includes("DetermineComponentFrameRoot");)h++;if(l===L.length||h===re.length)for(l=L.length-1,h=re.length-1;1<=l&&0<=h&&L[l]!==re[h];)h--;for(;1<=l&&0<=h;l--,h--)if(L[l]!==re[h]){if(l!==1||h!==1)do if(l--,h--,0>h||L[l]!==re[h]){var he=`
`+L[l].replace(" at new "," at ");return t.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",t.displayName)),he}while(1<=l&&0<=h);break}}}finally{qr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ci(a):""}function yo(t,r){switch(t.tag){case 26:case 27:case 5:return ci(t.type);case 16:return ci("Lazy");case 13:return t.child!==r&&r!==null?ci("Suspense Fallback"):ci("Suspense");case 19:return ci("SuspenseList");case 0:case 15:return Ts(t.type,!1);case 11:return Ts(t.type.render,!1);case 1:return Ts(t.type,!0);case 31:return ci("Activity");default:return""}}function vo(t){try{var r="",a=null;do r+=yo(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var dn=Object.prototype.hasOwnProperty,rn=i.unstable_scheduleCallback,Mn=i.unstable_cancelCallback,nl=i.unstable_shouldYield,Ji=i.unstable_requestPaint,jn=i.unstable_now,Hr=i.unstable_getCurrentPriorityLevel,kn=i.unstable_ImmediatePriority,Fr=i.unstable_UserBlockingPriority,fi=i.unstable_NormalPriority,Ss=i.unstable_LowPriority,ca=i.unstable_IdlePriority,As=i.log,hi=i.unstable_setDisableYieldValue,nr=null,yn=null;function vn(t){if(typeof As=="function"&&hi(t),yn&&typeof yn.setStrictMode=="function")try{yn.setStrictMode(nr,t)}catch{}}var De=Math.clz32?Math.clz32:ws,Zi=Math.log,br=Math.LN2;function ws(t){return t>>>=0,t===0?32:31-(Zi(t)/br|0)|0}var Se=256,ki=262144,sn=4194304;function Tr(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Kr(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var R=l&134217727;return R!==0?(l=R&~m,l!==0?h=Tr(l):(T&=R,T!==0?h=Tr(T):a||(a=R&~t,a!==0&&(h=Tr(a))))):(R=l&~m,R!==0?h=Tr(R):T!==0?h=Tr(T):a||(a=l&~t,a!==0&&(h=Tr(a)))),h===0?0:r!==0&&r!==h&&(r&m)===0&&(m=h&-h,a=r&-r,m>=a||m===32&&(a&4194048)!==0)?r:h}function mr(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function au(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rl(){var t=sn;return sn<<=1,(sn&62914560)===0&&(sn=4194304),t}function Yn(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Sr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function _o(t,r,a,l,h,m){var T=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var R=t.entanglements,L=t.expirationTimes,re=t.hiddenUpdates;for(a=T&~a;0<a;){var he=31-De(a),pe=1<<he;R[he]=0,L[he]=-1;var se=re[he];if(se!==null)for(re[he]=null,he=0;he<se.length;he++){var le=se[he];le!==null&&(le.lane&=-536870913)}a&=~pe}l!==0&&di(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(T&~r))}function di(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-De(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function kt(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-De(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function en(t,r){var a=r&-r;return a=(a&42)!==0?1:Rs(a),(a&(t.suspendedLanes|r))!==0?0:a}function Rs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ar(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Cs(){var t=Ie.p;return t!==0?t:(t=window.event,t===void 0?32:m_(t.type))}function rr(t,r){var a=Ie.p;try{return Ie.p=t,r()}finally{Ie.p=a}}var Gr=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Gr,$t="__reactProps$"+Gr,Vn="__reactContainer$"+Gr,Vi="__reactEvents$"+Gr,ou="__reactListeners$"+Gr,Yr="__reactHandles$"+Gr,Eo="__reactResources$"+Gr,Bn="__reactMarker$"+Gr;function Is(t){delete t[Lt],delete t[$t],delete t[Vi],delete t[ou],delete t[Yr]}function wr(t){var r=t[Lt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Vn]||a[Lt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=Zv(t);t!==null;){if(a=t[Lt])return a;t=Zv(t)}return r}t=a,a=t.parentNode}return null}function It(t){if(t=t[Lt]||t[Vn]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function _n(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function wn(t){var r=t[Eo];return r||(r=t[Eo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function an(t){t[Bn]=!0}var mi=new Set,Wi={};function Rr(t,r){Cr(t,r),Cr(t+"Capture",r)}function Cr(t,r){for(Wi[t]=r,t=0;t<r.length;t++)mi.add(r[t])}var Qr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fa={},es={};function bo(t){return dn.call(es,t)?!0:dn.call(fa,t)?!1:Qr.test(t)?es[t]=!0:(fa[t]=!0,!1)}function lt(t,r,a){if(bo(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function ir(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function on(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function ln(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ir(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ha(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,m=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(T){a=""+T,m.call(this,T)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(T){a=""+T},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Dt(t){if(!t._valueTracker){var r=Ir(t)?"checked":"value";t._valueTracker=ha(t,r,""+t[r])}}function ts(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Ir(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function yt(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var $r=/[\n"\\]/g;function Rn(t){return t.replace($r,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Xr(t,r,a,l,h,m,T,R){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),r!=null?T==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+ln(r)):t.value!==""+ln(r)&&(t.value=""+ln(r)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),r!=null?Os(t,T,ln(r)):a!=null?Os(t,T,ln(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?t.name=""+ln(R):t.removeAttribute("name")}function da(t,r,a,l,h,m,T,R){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Dt(t);return}a=a!=null?""+ln(a):"",r=r!=null?""+ln(r):a,R||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=R?t.checked:!!l,t.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),Dt(t)}function Os(t,r,a){r==="number"&&yt(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Jr(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+ln(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function To(t,r,a){if(r!=null&&(r=""+ln(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+ln(a):""}function Zr(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Gt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=ln(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Dt(t)}function Qn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var il=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gt(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||il.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function ma(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&gt(t,h,l)}else for(var m in r)r.hasOwnProperty(m)&&gt(t,m,r[m])}function pa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wr(t){return mn.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function sr(){}var Or=null;function pr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pi=null,Ut=null;function qn(t){var r=It(t);if(r&&(t=r.stateNode)){var a=t[$t]||null;e:switch(t=r.stateNode,r.type){case"input":if(Xr(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Rn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[$t]||null;if(!h)throw Error(s(90));Xr(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&ts(l)}break e;case"textarea":To(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Jr(t,!!a.multiple,r,!1)}}}var pi=!1;function Dr(t,r,a){if(pi)return t(r,a);pi=!0;try{var l=t(r);return l}finally{if(pi=!1,(Pi!==null||Ut!==null)&&(ff(),Pi&&(r=Pi,t=Ut,Ut=Pi=null,qn(r),t)))for(r=0;r<t.length;r++)qn(t[r])}}function gr(t,r){var a=t.stateNode;if(a===null)return null;var l=a[$t]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ds=!1;if(En)try{var mt={};Object.defineProperty(mt,"passive",{get:function(){Ds=!0}}),window.addEventListener("test",mt,mt),window.removeEventListener("test",mt,mt)}catch{Ds=!1}var xr=null,ga=null,Li=null;function Ui(){if(Li)return Li;var t,r=ga,a=r.length,l,h="value"in xr?xr.value:xr.textContent,m=h.length;for(t=0;t<a&&r[t]===h[t];t++);var T=a-t;for(l=1;l<=T&&r[a-l]===h[m-l];l++);return Li=h.slice(t,1<l?1-l:void 0)}function zi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function gi(){return!0}function ei(){return!1}function un(t){function r(a,l,h,m,T){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=T,this.currentTarget=null;for(var R in t)t.hasOwnProperty(R)&&(a=t[R],this[R]=a?a(m):m[R]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?gi:ei,this.isPropagationStopped=ei,this}return D(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=gi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=gi)},persist:function(){},isPersistent:gi}),r}var ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yi=un(ji),ti=D({},ji,{view:0,detail:0}),ns=un(ti),vi,ya,_i,va=D({},ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_i&&(_i&&t.type==="mousemove"?(vi=t.screenX-_i.screenX,ya=t.screenY-_i.screenY):ya=vi=0,_i=t),vi)},movementY:function(t){return"movementY"in t?t.movementY:ya}}),xs=un(va),Bi=D({},va,{dataTransfer:0}),So=un(Bi),Ns=D({},ti,{relatedTarget:0}),Ei=un(Ns),rs=D({},ji,{animationName:0,elapsedTime:0,pseudoElement:0}),Ao=un(rs),_a=D({},ji,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qi=un(_a),Ea=D({},ji,{data:0}),Nr=un(Ea),ba={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ta={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function is(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=bn[t])?!!r[t]:!1}function Mr(){return is}var Hn=D({},ti,{key:function(t){if(t.key){var r=ba[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=zi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ta[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mr,charCode:function(t){return t.type==="keypress"?zi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ms=un(Hn),wo=D({},va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bi=un(wo),c=D({},ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mr}),v=un(c),S=D({},ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=un(S),te=D({},va,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ae=un(te),Te=D({},ji,{newState:0,oldState:0}),nt=un(Te),cn=[9,13,27,32],Rt=En&&"CompositionEvent"in window,zt=null;En&&"documentMode"in document&&(zt=document.documentMode);var kr=En&&"TextEvent"in window&&!zt,Vr=En&&(!Rt||zt&&8<zt&&11>=zt),yr=" ",ni=!1;function ss(t,r){switch(t){case"keyup":return cn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ks=!1;function Dc(t,r){switch(t){case"compositionend":return Sa(r);case"keypress":return r.which!==32?null:(ni=!0,yr);case"textInput":return t=r.data,t===yr&&ni?null:t;default:return null}}function Kh(t,r){if(ks)return t==="compositionend"||!Rt&&ss(t,r)?(t=Ui(),Li=ga=xr=null,ks=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Vr&&r.locale!=="ko"?null:r.data;default:return null}}var xc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function al(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!xc[t.type]:r==="textarea"}function lu(t,r,a,l){Pi?Ut?Ut.push(l):Ut=[l]:Pi=l,r=vf(r,"onChange"),0<r.length&&(a=new yi("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Aa=null,Ro=null;function Gh(t){Uv(t,0)}function ol(t){var r=_n(t);if(ts(r))return t}function Co(t,r){if(t==="change")return r}var Ti=!1;if(En){var Xt;if(En){var wa="oninput"in document;if(!wa){var Vs=document.createElement("div");Vs.setAttribute("oninput","return;"),wa=typeof Vs.oninput=="function"}Xt=wa}else Xt=!1;Ti=Xt&&(!document.documentMode||9<document.documentMode)}function Nc(){Aa&&(Aa.detachEvent("onpropertychange",ll),Ro=Aa=null)}function ll(t){if(t.propertyName==="value"&&ol(Ro)){var r=[];lu(r,Ro,t,pr(t)),Dr(Gh,r)}}function Mc(t,r,a){t==="focusin"?(Nc(),Aa=r,Ro=a,Aa.attachEvent("onpropertychange",ll)):t==="focusout"&&Nc()}function Ps(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ol(Ro)}function uu(t,r){if(t==="click")return ol(r)}function Ra(t,r){if(t==="input"||t==="change")return ol(r)}function as(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var ar=typeof Object.is=="function"?Object.is:as;function f(t,r){if(ar(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!dn.call(r,h)||!ar(t[h],r[h]))return!1}return!0}function p(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g(t,r){var a=p(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=p(a)}}function _(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?_(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function A(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=yt(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=yt(t.document)}return r}function w(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var O=En&&"documentMode"in document&&11>=document.documentMode,x=null,q=null,Z=null,H=!1;function B(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;H||x==null||x!==yt(l)||(l=x,"selectionStart"in l&&w(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Z&&f(Z,l)||(Z=l,l=vf(q,"onSelect"),0<l.length&&(r=new yi("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=x)))}function G(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Q={animationend:G("Animation","AnimationEnd"),animationiteration:G("Animation","AnimationIteration"),animationstart:G("Animation","AnimationStart"),transitionrun:G("Transition","TransitionRun"),transitionstart:G("Transition","TransitionStart"),transitioncancel:G("Transition","TransitionCancel"),transitionend:G("Transition","TransitionEnd")},F={},K={};En&&(K=document.createElement("div").style,"AnimationEvent"in window||(delete Q.animationend.animation,delete Q.animationiteration.animation,delete Q.animationstart.animation),"TransitionEvent"in window||delete Q.transitionend.transition);function ee(t){if(F[t])return F[t];if(!Q[t])return t;var r=Q[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in K)return F[t]=r[a];return t}var ie=ee("animationend"),W=ee("animationiteration"),fe=ee("animationstart"),ye=ee("transitionrun"),Ae=ee("transitionstart"),we=ee("transitioncancel"),_e=ee("transitionend"),ke=new Map,xe="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xe.push("scrollEnd");function Ee(t,r){ke.set(t,r),Rr(r,[t])}var Ve=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ze=[],pt=0,Ke=0;function st(){for(var t=pt,r=Ke=pt=0;r<t;){var a=Ze[r];Ze[r++]=null;var l=Ze[r];Ze[r++]=null;var h=Ze[r];Ze[r++]=null;var m=Ze[r];if(Ze[r++]=null,l!==null&&h!==null){var T=l.pending;T===null?h.next=h:(h.next=T.next,T.next=h),l.pending=h}m!==0&&os(a,h,m)}}function qt(t,r,a,l){Ze[pt++]=t,Ze[pt++]=r,Ze[pt++]=a,Ze[pt++]=l,Ke|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function or(t,r,a,l){return qt(t,r,a,l),Ca(t)}function Vt(t,r){return qt(t,null,null,r),Ca(t)}function os(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&r!==null&&(h=31-De(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),m):null}function Ca(t){if(50<xu)throw xu=0,tm=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var ul={};function l1(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(t,r,a,l){return new l1(t,r,a,l)}function Yh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ls(t,r){var a=t.alternate;return a===null?(a=ri(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Eg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function kc(t,r,a,l,h,m){var T=0;if(l=t,typeof t=="function")Yh(t)&&(T=1);else if(typeof t=="string")T=dS(t,a,Ne.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case P:return t=ri(31,a,r,h),t.elementType=P,t.lanes=m,t;case be:return Io(a.children,h,m,r);case Re:T=8,h|=24;break;case He:return t=ri(12,a,r,h|2),t.elementType=He,t.lanes=m,t;case ht:return t=ri(13,a,r,h),t.elementType=ht,t.lanes=m,t;case et:return t=ri(19,a,r,h),t.elementType=et,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Le:T=10;break e;case Ye:T=9;break e;case it:T=11;break e;case V:T=14;break e;case k:T=16,l=null;break e}T=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=ri(T,a,r,h),r.elementType=t,r.type=l,r.lanes=m,r}function Io(t,r,a,l){return t=ri(7,t,l,r),t.lanes=a,t}function Qh(t,r,a){return t=ri(6,t,null,r),t.lanes=a,t}function bg(t){var r=ri(18,null,null,0);return r.stateNode=t,r}function $h(t,r,a){return r=ri(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Tg=new WeakMap;function Si(t,r){if(typeof t=="object"&&t!==null){var a=Tg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:vo(r)},Tg.set(t,r),r)}return{value:t,source:r,stack:vo(r)}}var cl=[],fl=0,Vc=null,cu=0,Ai=[],wi=0,Ia=null,ls=1,us="";function Us(t,r){cl[fl++]=cu,cl[fl++]=Vc,Vc=t,cu=r}function Sg(t,r,a){Ai[wi++]=ls,Ai[wi++]=us,Ai[wi++]=Ia,Ia=t;var l=ls;t=us;var h=32-De(l)-1;l&=~(1<<h),a+=1;var m=32-De(r)+h;if(30<m){var T=h-h%5;m=(l&(1<<T)-1).toString(32),l>>=T,h-=T,ls=1<<32-De(r)+h|a<<h|l,us=m+t}else ls=1<<m|a<<h|l,us=t}function Xh(t){t.return!==null&&(Us(t,1),Sg(t,1,0))}function Jh(t){for(;t===Vc;)Vc=cl[--fl],cl[fl]=null,cu=cl[--fl],cl[fl]=null;for(;t===Ia;)Ia=Ai[--wi],Ai[wi]=null,us=Ai[--wi],Ai[wi]=null,ls=Ai[--wi],Ai[wi]=null}function Ag(t,r){Ai[wi++]=ls,Ai[wi++]=us,Ai[wi++]=Ia,ls=r.id,us=r.overflow,Ia=t}var $n=null,Jt=null,Ct=!1,Oa=null,Ri=!1,Zh=Error(s(519));function Da(t){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fu(Si(r,t)),Zh}function wg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Lt]=t,r[$t]=l,a){case"dialog":_t("cancel",r),_t("close",r);break;case"iframe":case"object":case"embed":_t("load",r);break;case"video":case"audio":for(a=0;a<Mu.length;a++)_t(Mu[a],r);break;case"source":_t("error",r);break;case"img":case"image":case"link":_t("error",r),_t("load",r);break;case"details":_t("toggle",r);break;case"input":_t("invalid",r),da(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":_t("invalid",r);break;case"textarea":_t("invalid",r),Zr(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||qv(r.textContent,a)?(l.popover!=null&&(_t("beforetoggle",r),_t("toggle",r)),l.onScroll!=null&&_t("scroll",r),l.onScrollEnd!=null&&_t("scrollend",r),l.onClick!=null&&(r.onclick=sr),r=!0):r=!1,r||Da(t,!0)}function Rg(t){for($n=t.return;$n;)switch($n.tag){case 5:case 31:case 13:Ri=!1;return;case 27:case 3:Ri=!0;return;default:$n=$n.return}}function hl(t){if(t!==$n)return!1;if(!Ct)return Rg(t),Ct=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||gm(t.type,t.memoizedProps)),a=!a),a&&Jt&&Da(t),Rg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Jt=Jv(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Jt=Jv(t)}else r===27?(r=Jt,Fa(t.type)?(t=bm,bm=null,Jt=t):Jt=r):Jt=$n?Ii(t.stateNode.nextSibling):null;return!0}function Oo(){Jt=$n=null,Ct=!1}function Wh(){var t=Oa;return t!==null&&(zr===null?zr=t:zr.push.apply(zr,t),Oa=null),t}function fu(t){Oa===null?Oa=[t]:Oa.push(t)}var ed=j(null),Do=null,zs=null;function xa(t,r,a){Oe(ed,r._currentValue),r._currentValue=a}function js(t){t._currentValue=ed.current,ce(ed)}function td(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function nd(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var T=h.child;m=m.firstContext;e:for(;m!==null;){var R=m;m=h;for(var L=0;L<r.length;L++)if(R.context===r[L]){m.lanes|=a,R=m.alternate,R!==null&&(R.lanes|=a),td(m.return,a,t),l||(T=null);break e}m=R.next}}else if(h.tag===18){if(T=h.return,T===null)throw Error(s(341));T.lanes|=a,m=T.alternate,m!==null&&(m.lanes|=a),td(T,a,t),T=null}else T=h.child;if(T!==null)T.return=h;else for(T=h;T!==null;){if(T===t){T=null;break}if(h=T.sibling,h!==null){h.return=T.return,T=h;break}T=T.return}h=T}}function dl(t,r,a,l){t=null;for(var h=r,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var T=h.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var R=h.type;ar(h.pendingProps.value,T.value)||(t!==null?t.push(R):t=[R])}}else if(h===ct.current){if(T=h.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Uu):t=[Uu])}h=h.return}t!==null&&nd(r,t,a,l),r.flags|=262144}function Pc(t){for(t=t.firstContext;t!==null;){if(!ar(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function xo(t){Do=t,zs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Xn(t){return Cg(Do,t)}function Lc(t,r){return Do===null&&xo(t),Cg(t,r)}function Cg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},zs===null){if(t===null)throw Error(s(308));zs=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else zs=zs.next=r;return a}var u1=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},c1=i.unstable_scheduleCallback,f1=i.unstable_NormalPriority,Cn={$$typeof:Le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rd(){return{controller:new u1,data:new Map,refCount:0}}function hu(t){t.refCount--,t.refCount===0&&c1(f1,function(){t.controller.abort()})}var du=null,id=0,ml=0,pl=null;function h1(t,r){if(du===null){var a=du=[];id=0,ml=om(),pl={status:"pending",value:void 0,then:function(l){a.push(l)}}}return id++,r.then(Ig,Ig),r}function Ig(){if(--id===0&&du!==null){pl!==null&&(pl.status="fulfilled");var t=du;du=null,ml=0,pl=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function d1(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Og=ue.S;ue.S=function(t,r){hv=jn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&h1(t,r),Og!==null&&Og(t,r)};var No=j(null);function sd(){var t=No.current;return t!==null?t:Yt.pooledCache}function Uc(t,r){r===null?Oe(No,No.current):Oe(No,r.pool)}function Dg(){var t=sd();return t===null?null:{parent:Cn._currentValue,pool:t}}var gl=Error(s(460)),ad=Error(s(474)),zc=Error(s(542)),jc={then:function(){}};function xg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ng(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(sr,sr),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,kg(t),t;default:if(typeof r.status=="string")r.then(sr,sr);else{if(t=Yt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,kg(t),t}throw ko=r,gl}}function Mo(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ko=a,gl):a}}var ko=null;function Mg(){if(ko===null)throw Error(s(459));var t=ko;return ko=null,t}function kg(t){if(t===gl||t===zc)throw Error(s(483))}var yl=null,mu=0;function Bc(t){var r=mu;return mu+=1,yl===null&&(yl=[]),Ng(yl,t,r)}function pu(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function qc(t,r){throw r.$$typeof===N?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Vg(t){function r(J,Y){if(t){var ne=J.deletions;ne===null?(J.deletions=[Y],J.flags|=16):ne.push(Y)}}function a(J,Y){if(!t)return null;for(;Y!==null;)r(J,Y),Y=Y.sibling;return null}function l(J){for(var Y=new Map;J!==null;)J.key!==null?Y.set(J.key,J):Y.set(J.index,J),J=J.sibling;return Y}function h(J,Y){return J=Ls(J,Y),J.index=0,J.sibling=null,J}function m(J,Y,ne){return J.index=ne,t?(ne=J.alternate,ne!==null?(ne=ne.index,ne<Y?(J.flags|=67108866,Y):ne):(J.flags|=67108866,Y)):(J.flags|=1048576,Y)}function T(J){return t&&J.alternate===null&&(J.flags|=67108866),J}function R(J,Y,ne,me){return Y===null||Y.tag!==6?(Y=Qh(ne,J.mode,me),Y.return=J,Y):(Y=h(Y,ne),Y.return=J,Y)}function L(J,Y,ne,me){var Ge=ne.type;return Ge===be?he(J,Y,ne.props.children,me,ne.key):Y!==null&&(Y.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===k&&Mo(Ge)===Y.type)?(Y=h(Y,ne.props),pu(Y,ne),Y.return=J,Y):(Y=kc(ne.type,ne.key,ne.props,null,J.mode,me),pu(Y,ne),Y.return=J,Y)}function re(J,Y,ne,me){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ne.containerInfo||Y.stateNode.implementation!==ne.implementation?(Y=$h(ne,J.mode,me),Y.return=J,Y):(Y=h(Y,ne.children||[]),Y.return=J,Y)}function he(J,Y,ne,me,Ge){return Y===null||Y.tag!==7?(Y=Io(ne,J.mode,me,Ge),Y.return=J,Y):(Y=h(Y,ne),Y.return=J,Y)}function pe(J,Y,ne){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Qh(""+Y,J.mode,ne),Y.return=J,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case X:return ne=kc(Y.type,Y.key,Y.props,null,J.mode,ne),pu(ne,Y),ne.return=J,ne;case de:return Y=$h(Y,J.mode,ne),Y.return=J,Y;case k:return Y=Mo(Y),pe(J,Y,ne)}if(Gt(Y)||U(Y))return Y=Io(Y,J.mode,ne,null),Y.return=J,Y;if(typeof Y.then=="function")return pe(J,Bc(Y),ne);if(Y.$$typeof===Le)return pe(J,Lc(J,Y),ne);qc(J,Y)}return null}function se(J,Y,ne,me){var Ge=Y!==null?Y.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Ge!==null?null:R(J,Y,""+ne,me);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case X:return ne.key===Ge?L(J,Y,ne,me):null;case de:return ne.key===Ge?re(J,Y,ne,me):null;case k:return ne=Mo(ne),se(J,Y,ne,me)}if(Gt(ne)||U(ne))return Ge!==null?null:he(J,Y,ne,me,null);if(typeof ne.then=="function")return se(J,Y,Bc(ne),me);if(ne.$$typeof===Le)return se(J,Y,Lc(J,ne),me);qc(J,ne)}return null}function le(J,Y,ne,me,Ge){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return J=J.get(ne)||null,R(Y,J,""+me,Ge);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case X:return J=J.get(me.key===null?ne:me.key)||null,L(Y,J,me,Ge);case de:return J=J.get(me.key===null?ne:me.key)||null,re(Y,J,me,Ge);case k:return me=Mo(me),le(J,Y,ne,me,Ge)}if(Gt(me)||U(me))return J=J.get(ne)||null,he(Y,J,me,Ge,null);if(typeof me.then=="function")return le(J,Y,ne,Bc(me),Ge);if(me.$$typeof===Le)return le(J,Y,ne,Lc(Y,me),Ge);qc(Y,me)}return null}function Ue(J,Y,ne,me){for(var Ge=null,xt=null,qe=Y,ft=Y=0,bt=null;qe!==null&&ft<ne.length;ft++){qe.index>ft?(bt=qe,qe=null):bt=qe.sibling;var Nt=se(J,qe,ne[ft],me);if(Nt===null){qe===null&&(qe=bt);break}t&&qe&&Nt.alternate===null&&r(J,qe),Y=m(Nt,Y,ft),xt===null?Ge=Nt:xt.sibling=Nt,xt=Nt,qe=bt}if(ft===ne.length)return a(J,qe),Ct&&Us(J,ft),Ge;if(qe===null){for(;ft<ne.length;ft++)qe=pe(J,ne[ft],me),qe!==null&&(Y=m(qe,Y,ft),xt===null?Ge=qe:xt.sibling=qe,xt=qe);return Ct&&Us(J,ft),Ge}for(qe=l(qe);ft<ne.length;ft++)bt=le(qe,J,ft,ne[ft],me),bt!==null&&(t&&bt.alternate!==null&&qe.delete(bt.key===null?ft:bt.key),Y=m(bt,Y,ft),xt===null?Ge=bt:xt.sibling=bt,xt=bt);return t&&qe.forEach(function($a){return r(J,$a)}),Ct&&Us(J,ft),Ge}function $e(J,Y,ne,me){if(ne==null)throw Error(s(151));for(var Ge=null,xt=null,qe=Y,ft=Y=0,bt=null,Nt=ne.next();qe!==null&&!Nt.done;ft++,Nt=ne.next()){qe.index>ft?(bt=qe,qe=null):bt=qe.sibling;var $a=se(J,qe,Nt.value,me);if($a===null){qe===null&&(qe=bt);break}t&&qe&&$a.alternate===null&&r(J,qe),Y=m($a,Y,ft),xt===null?Ge=$a:xt.sibling=$a,xt=$a,qe=bt}if(Nt.done)return a(J,qe),Ct&&Us(J,ft),Ge;if(qe===null){for(;!Nt.done;ft++,Nt=ne.next())Nt=pe(J,Nt.value,me),Nt!==null&&(Y=m(Nt,Y,ft),xt===null?Ge=Nt:xt.sibling=Nt,xt=Nt);return Ct&&Us(J,ft),Ge}for(qe=l(qe);!Nt.done;ft++,Nt=ne.next())Nt=le(qe,J,ft,Nt.value,me),Nt!==null&&(t&&Nt.alternate!==null&&qe.delete(Nt.key===null?ft:Nt.key),Y=m(Nt,Y,ft),xt===null?Ge=Nt:xt.sibling=Nt,xt=Nt);return t&&qe.forEach(function(AS){return r(J,AS)}),Ct&&Us(J,ft),Ge}function Kt(J,Y,ne,me){if(typeof ne=="object"&&ne!==null&&ne.type===be&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case X:e:{for(var Ge=ne.key;Y!==null;){if(Y.key===Ge){if(Ge=ne.type,Ge===be){if(Y.tag===7){a(J,Y.sibling),me=h(Y,ne.props.children),me.return=J,J=me;break e}}else if(Y.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===k&&Mo(Ge)===Y.type){a(J,Y.sibling),me=h(Y,ne.props),pu(me,ne),me.return=J,J=me;break e}a(J,Y);break}else r(J,Y);Y=Y.sibling}ne.type===be?(me=Io(ne.props.children,J.mode,me,ne.key),me.return=J,J=me):(me=kc(ne.type,ne.key,ne.props,null,J.mode,me),pu(me,ne),me.return=J,J=me)}return T(J);case de:e:{for(Ge=ne.key;Y!==null;){if(Y.key===Ge)if(Y.tag===4&&Y.stateNode.containerInfo===ne.containerInfo&&Y.stateNode.implementation===ne.implementation){a(J,Y.sibling),me=h(Y,ne.children||[]),me.return=J,J=me;break e}else{a(J,Y);break}else r(J,Y);Y=Y.sibling}me=$h(ne,J.mode,me),me.return=J,J=me}return T(J);case k:return ne=Mo(ne),Kt(J,Y,ne,me)}if(Gt(ne))return Ue(J,Y,ne,me);if(U(ne)){if(Ge=U(ne),typeof Ge!="function")throw Error(s(150));return ne=Ge.call(ne),$e(J,Y,ne,me)}if(typeof ne.then=="function")return Kt(J,Y,Bc(ne),me);if(ne.$$typeof===Le)return Kt(J,Y,Lc(J,ne),me);qc(J,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,Y!==null&&Y.tag===6?(a(J,Y.sibling),me=h(Y,ne),me.return=J,J=me):(a(J,Y),me=Qh(ne,J.mode,me),me.return=J,J=me),T(J)):a(J,Y)}return function(J,Y,ne,me){try{mu=0;var Ge=Kt(J,Y,ne,me);return yl=null,Ge}catch(qe){if(qe===gl||qe===zc)throw qe;var xt=ri(29,qe,null,J.mode);return xt.lanes=me,xt.return=J,xt}}}var Vo=Vg(!0),Pg=Vg(!1),Na=!1;function od(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ld(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ma(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ka(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Mt&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=Ca(t),os(t,null,a),r}return qt(t,l,r,a),Ca(t)}function gu(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,kt(t,a)}}function ud(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=T:m=m.next=T,a=a.next}while(a!==null);m===null?h=m=r:m=m.next=r}else h=m=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var cd=!1;function yu(){if(cd){var t=pl;if(t!==null)throw t}}function vu(t,r,a,l){cd=!1;var h=t.updateQueue;Na=!1;var m=h.firstBaseUpdate,T=h.lastBaseUpdate,R=h.shared.pending;if(R!==null){h.shared.pending=null;var L=R,re=L.next;L.next=null,T===null?m=re:T.next=re,T=L;var he=t.alternate;he!==null&&(he=he.updateQueue,R=he.lastBaseUpdate,R!==T&&(R===null?he.firstBaseUpdate=re:R.next=re,he.lastBaseUpdate=L))}if(m!==null){var pe=h.baseState;T=0,he=re=L=null,R=m;do{var se=R.lane&-536870913,le=se!==R.lane;if(le?(Et&se)===se:(l&se)===se){se!==0&&se===ml&&(cd=!0),he!==null&&(he=he.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Ue=t,$e=R;se=r;var Kt=a;switch($e.tag){case 1:if(Ue=$e.payload,typeof Ue=="function"){pe=Ue.call(Kt,pe,se);break e}pe=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=$e.payload,se=typeof Ue=="function"?Ue.call(Kt,pe,se):Ue,se==null)break e;pe=D({},pe,se);break e;case 2:Na=!0}}se=R.callback,se!==null&&(t.flags|=64,le&&(t.flags|=8192),le=h.callbacks,le===null?h.callbacks=[se]:le.push(se))}else le={lane:se,tag:R.tag,payload:R.payload,callback:R.callback,next:null},he===null?(re=he=le,L=pe):he=he.next=le,T|=se;if(R=R.next,R===null){if(R=h.shared.pending,R===null)break;le=R,R=le.next,le.next=null,h.lastBaseUpdate=le,h.shared.pending=null}}while(!0);he===null&&(L=pe),h.baseState=L,h.firstBaseUpdate=re,h.lastBaseUpdate=he,m===null&&(h.shared.lanes=0),za|=T,t.lanes=T,t.memoizedState=pe}}function Lg(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function Ug(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Lg(a[t],r)}var vl=j(null),Hc=j(0);function zg(t,r){t=$s,Oe(Hc,t),Oe(vl,r),$s=t|r.baseLanes}function fd(){Oe(Hc,$s),Oe(vl,vl.current)}function hd(){$s=Hc.current,ce(vl),ce(Hc)}var ii=j(null),Ci=null;function Va(t){var r=t.alternate;Oe(Tn,Tn.current&1),Oe(ii,t),Ci===null&&(r===null||vl.current!==null||r.memoizedState!==null)&&(Ci=t)}function dd(t){Oe(Tn,Tn.current),Oe(ii,t),Ci===null&&(Ci=t)}function jg(t){t.tag===22?(Oe(Tn,Tn.current),Oe(ii,t),Ci===null&&(Ci=t)):Pa()}function Pa(){Oe(Tn,Tn.current),Oe(ii,ii.current)}function si(t){ce(ii),Ci===t&&(Ci=null),ce(Tn)}var Tn=j(0);function Fc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||_m(a)||Em(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Bs=0,ut=null,Ht=null,In=null,Kc=!1,_l=!1,Po=!1,Gc=0,_u=0,El=null,m1=0;function pn(){throw Error(s(321))}function md(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!ar(t[a],r[a]))return!1;return!0}function pd(t,r,a,l,h,m){return Bs=m,ut=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ue.H=t===null||t.memoizedState===null?Sy:Dd,Po=!1,m=a(l,h),Po=!1,_l&&(m=qg(r,a,l,h)),Bg(t),m}function Bg(t){ue.H=Tu;var r=Ht!==null&&Ht.next!==null;if(Bs=0,In=Ht=ut=null,Kc=!1,_u=0,El=null,r)throw Error(s(300));t===null||On||(t=t.dependencies,t!==null&&Pc(t)&&(On=!0))}function qg(t,r,a,l){ut=t;var h=0;do{if(_l&&(El=null),_u=0,_l=!1,25<=h)throw Error(s(301));if(h+=1,In=Ht=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}ue.H=Ay,m=r(a,l)}while(_l);return m}function p1(){var t=ue.H,r=t.useState()[0];return r=typeof r.then=="function"?Eu(r):r,t=t.useState()[0],(Ht!==null?Ht.memoizedState:null)!==t&&(ut.flags|=1024),r}function gd(){var t=Gc!==0;return Gc=0,t}function yd(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function vd(t){if(Kc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Kc=!1}Bs=0,In=Ht=ut=null,_l=!1,_u=Gc=0,El=null}function vr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?ut.memoizedState=In=t:In=In.next=t,In}function Sn(){if(Ht===null){var t=ut.alternate;t=t!==null?t.memoizedState:null}else t=Ht.next;var r=In===null?ut.memoizedState:In.next;if(r!==null)In=r,Ht=t;else{if(t===null)throw ut.alternate===null?Error(s(467)):Error(s(310));Ht=t,t={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},In===null?ut.memoizedState=In=t:In=In.next=t}return In}function Yc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eu(t){var r=_u;return _u+=1,El===null&&(El=[]),t=Ng(El,t,r),r=ut,(In===null?r.memoizedState:In.next)===null&&(r=r.alternate,ue.H=r===null||r.memoizedState===null?Sy:Dd),t}function Qc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Eu(t);if(t.$$typeof===Le)return Xn(t)}throw Error(s(438,String(t)))}function _d(t){var r=null,a=ut.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=ut.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Yc(),ut.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=$;return r.index++,a}function qs(t,r){return typeof r=="function"?r(t):r}function $c(t){var r=Sn();return Ed(r,Ht,t)}function Ed(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var T=h.next;h.next=m.next,m.next=T}r.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{r=h.next;var R=T=null,L=null,re=r,he=!1;do{var pe=re.lane&-536870913;if(pe!==re.lane?(Et&pe)===pe:(Bs&pe)===pe){var se=re.revertLane;if(se===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),pe===ml&&(he=!0);else if((Bs&se)===se){re=re.next,se===ml&&(he=!0);continue}else pe={lane:0,revertLane:re.revertLane,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},L===null?(R=L=pe,T=m):L=L.next=pe,ut.lanes|=se,za|=se;pe=re.action,Po&&a(m,pe),m=re.hasEagerState?re.eagerState:a(m,pe)}else se={lane:pe,revertLane:re.revertLane,gesture:re.gesture,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},L===null?(R=L=se,T=m):L=L.next=se,ut.lanes|=pe,za|=pe;re=re.next}while(re!==null&&re!==r);if(L===null?T=m:L.next=R,!ar(m,t.memoizedState)&&(On=!0,he&&(a=pl,a!==null)))throw a;t.memoizedState=m,t.baseState=T,t.baseQueue=L,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function bd(t){var r=Sn(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=r.memoizedState;if(h!==null){a.pending=null;var T=h=h.next;do m=t(m,T.action),T=T.next;while(T!==h);ar(m,r.memoizedState)||(On=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,l]}function Hg(t,r,a){var l=ut,h=Sn(),m=Ct;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=r();var T=!ar((Ht||h).memoizedState,a);if(T&&(h.memoizedState=a,On=!0),h=h.queue,Ad(Gg.bind(null,l,h,t),[t]),h.getSnapshot!==r||T||In!==null&&In.memoizedState.tag&1){if(l.flags|=2048,bl(9,{destroy:void 0},Kg.bind(null,l,h,a,r),null),Yt===null)throw Error(s(349));m||(Bs&127)!==0||Fg(l,r,a)}return a}function Fg(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=ut.updateQueue,r===null?(r=Yc(),ut.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Kg(t,r,a,l){r.value=a,r.getSnapshot=l,Yg(r)&&Qg(t)}function Gg(t,r,a){return a(function(){Yg(r)&&Qg(t)})}function Yg(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!ar(t,a)}catch{return!0}}function Qg(t){var r=Vt(t,2);r!==null&&jr(r,t,2)}function Td(t){var r=vr();if(typeof t=="function"){var a=t;if(t=a(),Po){vn(!0);try{a()}finally{vn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:t},r}function $g(t,r,a,l){return t.baseState=a,Ed(t,Ht,typeof l=="function"?l:qs)}function g1(t,r,a,l,h){if(Zc(t))throw Error(s(485));if(t=r.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){m.listeners.push(T)}};ue.T!==null?a(!0):m.isTransition=!1,l(m),a=r.pending,a===null?(m.next=r.pending=m,Xg(r,m)):(m.next=a.next,r.pending=a.next=m)}}function Xg(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var m=ue.T,T={};ue.T=T;try{var R=a(h,l),L=ue.S;L!==null&&L(T,R),Jg(t,r,R)}catch(re){Sd(t,r,re)}finally{m!==null&&T.types!==null&&(m.types=T.types),ue.T=m}}else try{m=a(h,l),Jg(t,r,m)}catch(re){Sd(t,r,re)}}function Jg(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Zg(t,r,l)},function(l){return Sd(t,r,l)}):Zg(t,r,a)}function Zg(t,r,a){r.status="fulfilled",r.value=a,Wg(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Xg(t,a)))}function Sd(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Wg(r),r=r.next;while(r!==l)}t.action=null}function Wg(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function ey(t,r){return r}function ty(t,r){if(Ct){var a=Yt.formState;if(a!==null){e:{var l=ut;if(Ct){if(Jt){t:{for(var h=Jt,m=Ri;h.nodeType!==8;){if(!m){h=null;break t}if(h=Ii(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){Jt=Ii(h.nextSibling),l=h.data==="F!";break e}}Da(l)}l=!1}l&&(r=a[0])}}return a=vr(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ey,lastRenderedState:r},a.queue=l,a=Ey.bind(null,ut,l),l.dispatch=a,l=Td(!1),m=Od.bind(null,ut,!1,l.queue),l=vr(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=g1.bind(null,ut,h,m,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function ny(t){var r=Sn();return ry(r,Ht,t)}function ry(t,r,a){if(r=Ed(t,r,ey)[0],t=$c(qs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Eu(r)}catch(T){throw T===gl?zc:T}else l=r;r=Sn();var h=r.queue,m=h.dispatch;return a!==r.memoizedState&&(ut.flags|=2048,bl(9,{destroy:void 0},y1.bind(null,h,a),null)),[l,m,t]}function y1(t,r){t.action=r}function iy(t){var r=Sn(),a=Ht;if(a!==null)return ry(r,a,t);Sn(),r=r.memoizedState,a=Sn();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function bl(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=ut.updateQueue,r===null&&(r=Yc(),ut.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function sy(){return Sn().memoizedState}function Xc(t,r,a,l){var h=vr();ut.flags|=t,h.memoizedState=bl(1|r,{destroy:void 0},a,l===void 0?null:l)}function Jc(t,r,a,l){var h=Sn();l=l===void 0?null:l;var m=h.memoizedState.inst;Ht!==null&&l!==null&&md(l,Ht.memoizedState.deps)?h.memoizedState=bl(r,m,a,l):(ut.flags|=t,h.memoizedState=bl(1|r,m,a,l))}function ay(t,r){Xc(8390656,8,t,r)}function Ad(t,r){Jc(2048,8,t,r)}function v1(t){ut.flags|=4;var r=ut.updateQueue;if(r===null)r=Yc(),ut.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function oy(t){var r=Sn().memoizedState;return v1({ref:r,nextImpl:t}),function(){if((Mt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function ly(t,r){return Jc(4,2,t,r)}function uy(t,r){return Jc(4,4,t,r)}function cy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function fy(t,r,a){a=a!=null?a.concat([t]):null,Jc(4,4,cy.bind(null,r,t),a)}function wd(){}function hy(t,r){var a=Sn();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&md(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function dy(t,r){var a=Sn();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&md(r,l[1]))return l[0];if(l=t(),Po){vn(!0);try{t()}finally{vn(!1)}}return a.memoizedState=[l,r],l}function Rd(t,r,a){return a===void 0||(Bs&1073741824)!==0&&(Et&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=mv(),ut.lanes|=t,za|=t,a)}function my(t,r,a,l){return ar(a,r)?a:vl.current!==null?(t=Rd(t,a,l),ar(t,r)||(On=!0),t):(Bs&42)===0||(Bs&1073741824)!==0&&(Et&261930)===0?(On=!0,t.memoizedState=a):(t=mv(),ut.lanes|=t,za|=t,r)}function py(t,r,a,l,h){var m=Ie.p;Ie.p=m!==0&&8>m?m:8;var T=ue.T,R={};ue.T=R,Od(t,!1,r,a);try{var L=h(),re=ue.S;if(re!==null&&re(R,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var he=d1(L,l);bu(t,r,he,li(t))}else bu(t,r,l,li(t))}catch(pe){bu(t,r,{then:function(){},status:"rejected",reason:pe},li())}finally{Ie.p=m,T!==null&&R.types!==null&&(T.types=R.types),ue.T=T}}function _1(){}function Cd(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=gy(t).queue;py(t,h,r,je,a===null?_1:function(){return yy(t),a(l)})}function gy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:je,baseState:je,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:je},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function yy(t){var r=gy(t);r.next===null&&(r=t.alternate.memoizedState),bu(t,r.next.queue,{},li())}function Id(){return Xn(Uu)}function vy(){return Sn().memoizedState}function _y(){return Sn().memoizedState}function E1(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=li();t=Ma(a);var l=ka(r,t,a);l!==null&&(jr(l,r,a),gu(l,r,a)),r={cache:rd()},t.payload=r;return}r=r.return}}function b1(t,r,a){var l=li();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Zc(t)?by(r,a):(a=or(t,r,a,l),a!==null&&(jr(a,t,l),Ty(a,r,l)))}function Ey(t,r,a){var l=li();bu(t,r,a,l)}function bu(t,r,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Zc(t))by(r,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var T=r.lastRenderedState,R=m(T,a);if(h.hasEagerState=!0,h.eagerState=R,ar(R,T))return qt(t,r,h,0),Yt===null&&st(),!1}catch{}if(a=or(t,r,h,l),a!==null)return jr(a,t,l),Ty(a,r,l),!0}return!1}function Od(t,r,a,l){if(l={lane:2,revertLane:om(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Zc(t)){if(r)throw Error(s(479))}else r=or(t,a,l,2),r!==null&&jr(r,t,2)}function Zc(t){var r=t.alternate;return t===ut||r!==null&&r===ut}function by(t,r){_l=Kc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Ty(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,kt(t,a)}}var Tu={readContext:Xn,use:Qc,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useLayoutEffect:pn,useInsertionEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useSyncExternalStore:pn,useId:pn,useHostTransitionStatus:pn,useFormState:pn,useActionState:pn,useOptimistic:pn,useMemoCache:pn,useCacheRefresh:pn};Tu.useEffectEvent=pn;var Sy={readContext:Xn,use:Qc,useCallback:function(t,r){return vr().memoizedState=[t,r===void 0?null:r],t},useContext:Xn,useEffect:ay,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Xc(4194308,4,cy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Xc(4194308,4,t,r)},useInsertionEffect:function(t,r){Xc(4,2,t,r)},useMemo:function(t,r){var a=vr();r=r===void 0?null:r;var l=t();if(Po){vn(!0);try{t()}finally{vn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=vr();if(a!==void 0){var h=a(r);if(Po){vn(!0);try{a(r)}finally{vn(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=b1.bind(null,ut,t),[l.memoizedState,t]},useRef:function(t){var r=vr();return t={current:t},r.memoizedState=t},useState:function(t){t=Td(t);var r=t.queue,a=Ey.bind(null,ut,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:wd,useDeferredValue:function(t,r){var a=vr();return Rd(a,t,r)},useTransition:function(){var t=Td(!1);return t=py.bind(null,ut,t.queue,!0,!1),vr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=ut,h=vr();if(Ct){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),Yt===null)throw Error(s(349));(Et&127)!==0||Fg(l,r,a)}h.memoizedState=a;var m={value:a,getSnapshot:r};return h.queue=m,ay(Gg.bind(null,l,m,t),[t]),l.flags|=2048,bl(9,{destroy:void 0},Kg.bind(null,l,m,a,r),null),a},useId:function(){var t=vr(),r=Yt.identifierPrefix;if(Ct){var a=us,l=ls;a=(l&~(1<<32-De(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Gc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=m1++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Id,useFormState:ty,useActionState:ty,useOptimistic:function(t){var r=vr();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Od.bind(null,ut,!0,a),a.dispatch=r,[t,r]},useMemoCache:_d,useCacheRefresh:function(){return vr().memoizedState=E1.bind(null,ut)},useEffectEvent:function(t){var r=vr(),a={impl:t};return r.memoizedState=a,function(){if((Mt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Dd={readContext:Xn,use:Qc,useCallback:hy,useContext:Xn,useEffect:Ad,useImperativeHandle:fy,useInsertionEffect:ly,useLayoutEffect:uy,useMemo:dy,useReducer:$c,useRef:sy,useState:function(){return $c(qs)},useDebugValue:wd,useDeferredValue:function(t,r){var a=Sn();return my(a,Ht.memoizedState,t,r)},useTransition:function(){var t=$c(qs)[0],r=Sn().memoizedState;return[typeof t=="boolean"?t:Eu(t),r]},useSyncExternalStore:Hg,useId:vy,useHostTransitionStatus:Id,useFormState:ny,useActionState:ny,useOptimistic:function(t,r){var a=Sn();return $g(a,Ht,t,r)},useMemoCache:_d,useCacheRefresh:_y};Dd.useEffectEvent=oy;var Ay={readContext:Xn,use:Qc,useCallback:hy,useContext:Xn,useEffect:Ad,useImperativeHandle:fy,useInsertionEffect:ly,useLayoutEffect:uy,useMemo:dy,useReducer:bd,useRef:sy,useState:function(){return bd(qs)},useDebugValue:wd,useDeferredValue:function(t,r){var a=Sn();return Ht===null?Rd(a,t,r):my(a,Ht.memoizedState,t,r)},useTransition:function(){var t=bd(qs)[0],r=Sn().memoizedState;return[typeof t=="boolean"?t:Eu(t),r]},useSyncExternalStore:Hg,useId:vy,useHostTransitionStatus:Id,useFormState:iy,useActionState:iy,useOptimistic:function(t,r){var a=Sn();return Ht!==null?$g(a,Ht,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:_d,useCacheRefresh:_y};Ay.useEffectEvent=oy;function xd(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:D({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Nd={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=li(),h=Ma(l);h.payload=r,a!=null&&(h.callback=a),r=ka(t,h,l),r!==null&&(jr(r,t,l),gu(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=li(),h=Ma(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=ka(t,h,l),r!==null&&(jr(r,t,l),gu(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=li(),l=Ma(a);l.tag=2,r!=null&&(l.callback=r),r=ka(t,l,a),r!==null&&(jr(r,t,a),gu(r,t,a))}};function wy(t,r,a,l,h,m,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,T):r.prototype&&r.prototype.isPureReactComponent?!f(a,l)||!f(h,m):!0}function Ry(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&Nd.enqueueReplaceState(r,r.state,null)}function Lo(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=D({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Cy(t){Ve(t)}function Iy(t){console.error(t)}function Oy(t){Ve(t)}function Wc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Dy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Md(t,r,a){return a=Ma(a),a.tag=3,a.payload={element:null},a.callback=function(){Wc(t,r)},a}function xy(t){return t=Ma(t),t.tag=3,t}function Ny(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){Dy(r,a,l)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Dy(r,a,l),typeof h!="function"&&(ja===null?ja=new Set([this]):ja.add(this));var R=l.stack;this.componentDidCatch(l.value,{componentStack:R!==null?R:""})})}function T1(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&dl(r,a,h,!0),a=ii.current,a!==null){switch(a.tag){case 31:case 13:return Ci===null?hf():a.alternate===null&&gn===0&&(gn=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===jc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),im(t,l,h)),!1;case 22:return a.flags|=65536,l===jc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),im(t,l,h)),!1}throw Error(s(435,a.tag))}return im(t,l,h),hf(),!1}if(Ct)return r=ii.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Zh&&(t=Error(s(422),{cause:l}),fu(Si(t,a)))):(l!==Zh&&(r=Error(s(423),{cause:l}),fu(Si(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Si(l,a),h=Md(t.stateNode,l,h),ud(t,h),gn!==4&&(gn=2)),!1;var m=Error(s(520),{cause:l});if(m=Si(m,a),Du===null?Du=[m]:Du.push(m),gn!==4&&(gn=2),r===null)return!0;l=Si(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Md(a.stateNode,l,t),ud(a,t),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ja===null||!ja.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=xy(h),Ny(h,t,a,l),ud(a,h),!1}a=a.return}while(a!==null);return!1}var kd=Error(s(461)),On=!1;function Jn(t,r,a,l){r.child=t===null?Pg(r,null,a,l):Vo(r,t.child,a,l)}function My(t,r,a,l,h){a=a.render;var m=r.ref;if("ref"in l){var T={};for(var R in l)R!=="ref"&&(T[R]=l[R])}else T=l;return xo(r),l=pd(t,r,a,T,m,h),R=gd(),t!==null&&!On?(yd(t,r,h),Hs(t,r,h)):(Ct&&R&&Xh(r),r.flags|=1,Jn(t,r,l,h),r.child)}function ky(t,r,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!Yh(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,Vy(t,r,m,l,h)):(t=kc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!qd(t,h)){var T=m.memoizedProps;if(a=a.compare,a=a!==null?a:f,a(T,l)&&t.ref===r.ref)return Hs(t,r,h)}return r.flags|=1,t=Ls(m,l),t.ref=r.ref,t.return=r,r.child=t}function Vy(t,r,a,l,h){if(t!==null){var m=t.memoizedProps;if(f(m,l)&&t.ref===r.ref)if(On=!1,r.pendingProps=l=m,qd(t,h))(t.flags&131072)!==0&&(On=!0);else return r.lanes=t.lanes,Hs(t,r,h)}return Vd(t,r,a,l,h)}function Py(t,r,a,l){var h=l.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=r.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~m}else l=0,r.child=null;return Ly(t,r,m,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Uc(r,m!==null?m.cachePool:null),m!==null?zg(r,m):fd(),jg(r);else return l=r.lanes=536870912,Ly(t,r,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(Uc(r,m.cachePool),zg(r,m),Pa(),r.memoizedState=null):(t!==null&&Uc(r,null),fd(),Pa());return Jn(t,r,h,a),r.child}function Su(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Ly(t,r,a,l,h){var m=sd();return m=m===null?null:{parent:Cn._currentValue,pool:m},r.memoizedState={baseLanes:a,cachePool:m},t!==null&&Uc(r,null),fd(),jg(r),t!==null&&dl(t,r,l,!0),r.childLanes=h,null}function ef(t,r){return r=nf({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Uy(t,r,a){return Vo(r,t.child,null,a),t=ef(r,r.pendingProps),t.flags|=2,si(r),r.memoizedState=null,t}function S1(t,r,a){var l=r.pendingProps,h=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Ct){if(l.mode==="hidden")return t=ef(r,l),r.lanes=536870912,Su(null,t);if(dd(r),(t=Jt)?(t=Xv(t,Ri),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ia!==null?{id:ls,overflow:us}:null,retryLane:536870912,hydrationErrors:null},a=bg(t),a.return=r,r.child=a,$n=r,Jt=null)):t=null,t===null)throw Da(r);return r.lanes=536870912,null}return ef(r,l)}var m=t.memoizedState;if(m!==null){var T=m.dehydrated;if(dd(r),h)if(r.flags&256)r.flags&=-257,r=Uy(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(s(558));else if(On||dl(t,r,a,!1),h=(a&t.childLanes)!==0,On||h){if(l=Yt,l!==null&&(T=en(l,a),T!==0&&T!==m.retryLane))throw m.retryLane=T,Vt(t,T),jr(l,t,T),kd;hf(),r=Uy(t,r,a)}else t=m.treeContext,Jt=Ii(T.nextSibling),$n=r,Ct=!0,Oa=null,Ri=!1,t!==null&&Ag(r,t),r=ef(r,l),r.flags|=4096;return r}return t=Ls(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function tf(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Vd(t,r,a,l,h){return xo(r),a=pd(t,r,a,l,void 0,h),l=gd(),t!==null&&!On?(yd(t,r,h),Hs(t,r,h)):(Ct&&l&&Xh(r),r.flags|=1,Jn(t,r,a,h),r.child)}function zy(t,r,a,l,h,m){return xo(r),r.updateQueue=null,a=qg(r,l,a,h),Bg(t),l=gd(),t!==null&&!On?(yd(t,r,m),Hs(t,r,m)):(Ct&&l&&Xh(r),r.flags|=1,Jn(t,r,a,m),r.child)}function jy(t,r,a,l,h){if(xo(r),r.stateNode===null){var m=ul,T=a.contextType;typeof T=="object"&&T!==null&&(m=Xn(T)),m=new a(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Nd,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},od(r),T=a.contextType,m.context=typeof T=="object"&&T!==null?Xn(T):ul,m.state=r.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(xd(r,a,T,l),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(T=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),T!==m.state&&Nd.enqueueReplaceState(m,m.state,null),vu(r,l,m,h),yu(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var R=r.memoizedProps,L=Lo(a,R);m.props=L;var re=m.context,he=a.contextType;T=ul,typeof he=="object"&&he!==null&&(T=Xn(he));var pe=a.getDerivedStateFromProps;he=typeof pe=="function"||typeof m.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,he||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(R||re!==T)&&Ry(r,m,l,T),Na=!1;var se=r.memoizedState;m.state=se,vu(r,l,m,h),yu(),re=r.memoizedState,R||se!==re||Na?(typeof pe=="function"&&(xd(r,a,pe,l),re=r.memoizedState),(L=Na||wy(r,a,L,l,se,re,T))?(he||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=re),m.props=l,m.state=re,m.context=T,l=L):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,ld(t,r),T=r.memoizedProps,he=Lo(a,T),m.props=he,pe=r.pendingProps,se=m.context,re=a.contextType,L=ul,typeof re=="object"&&re!==null&&(L=Xn(re)),R=a.getDerivedStateFromProps,(re=typeof R=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T!==pe||se!==L)&&Ry(r,m,l,L),Na=!1,se=r.memoizedState,m.state=se,vu(r,l,m,h),yu();var le=r.memoizedState;T!==pe||se!==le||Na||t!==null&&t.dependencies!==null&&Pc(t.dependencies)?(typeof R=="function"&&(xd(r,a,R,l),le=r.memoizedState),(he=Na||wy(r,a,he,l,se,le,L)||t!==null&&t.dependencies!==null&&Pc(t.dependencies))?(re||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,le,L),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,le,L)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||T===t.memoizedProps&&se===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&se===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=le),m.props=l,m.state=le,m.context=L,l=he):(typeof m.componentDidUpdate!="function"||T===t.memoizedProps&&se===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&se===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,tf(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=Vo(r,t.child,null,h),r.child=Vo(r,null,a,h)):Jn(t,r,a,h),r.memoizedState=m.state,t=r.child):t=Hs(t,r,h),t}function By(t,r,a,l){return Oo(),r.flags|=256,Jn(t,r,a,l),r.child}var Pd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ld(t){return{baseLanes:t,cachePool:Dg()}}function Ud(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=oi),t}function qy(t,r,a){var l=r.pendingProps,h=!1,m=(r.flags&128)!==0,T;if((T=m)||(T=t!==null&&t.memoizedState===null?!1:(Tn.current&2)!==0),T&&(h=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,t===null){if(Ct){if(h?Va(r):Pa(),(t=Jt)?(t=Xv(t,Ri),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ia!==null?{id:ls,overflow:us}:null,retryLane:536870912,hydrationErrors:null},a=bg(t),a.return=r,r.child=a,$n=r,Jt=null)):t=null,t===null)throw Da(r);return Em(t)?r.lanes=32:r.lanes=536870912,null}var R=l.children;return l=l.fallback,h?(Pa(),h=r.mode,R=nf({mode:"hidden",children:R},h),l=Io(l,h,a,null),R.return=r,l.return=r,R.sibling=l,r.child=R,l=r.child,l.memoizedState=Ld(a),l.childLanes=Ud(t,T,a),r.memoizedState=Pd,Su(null,l)):(Va(r),zd(r,R))}var L=t.memoizedState;if(L!==null&&(R=L.dehydrated,R!==null)){if(m)r.flags&256?(Va(r),r.flags&=-257,r=jd(t,r,a)):r.memoizedState!==null?(Pa(),r.child=t.child,r.flags|=128,r=null):(Pa(),R=l.fallback,h=r.mode,l=nf({mode:"visible",children:l.children},h),R=Io(R,h,a,null),R.flags|=2,l.return=r,R.return=r,l.sibling=R,r.child=l,Vo(r,t.child,null,a),l=r.child,l.memoizedState=Ld(a),l.childLanes=Ud(t,T,a),r.memoizedState=Pd,r=Su(null,l));else if(Va(r),Em(R)){if(T=R.nextSibling&&R.nextSibling.dataset,T)var re=T.dgst;T=re,l=Error(s(419)),l.stack="",l.digest=T,fu({value:l,source:null,stack:null}),r=jd(t,r,a)}else if(On||dl(t,r,a,!1),T=(a&t.childLanes)!==0,On||T){if(T=Yt,T!==null&&(l=en(T,a),l!==0&&l!==L.retryLane))throw L.retryLane=l,Vt(t,l),jr(T,t,l),kd;_m(R)||hf(),r=jd(t,r,a)}else _m(R)?(r.flags|=192,r.child=t.child,r=null):(t=L.treeContext,Jt=Ii(R.nextSibling),$n=r,Ct=!0,Oa=null,Ri=!1,t!==null&&Ag(r,t),r=zd(r,l.children),r.flags|=4096);return r}return h?(Pa(),R=l.fallback,h=r.mode,L=t.child,re=L.sibling,l=Ls(L,{mode:"hidden",children:l.children}),l.subtreeFlags=L.subtreeFlags&65011712,re!==null?R=Ls(re,R):(R=Io(R,h,a,null),R.flags|=2),R.return=r,l.return=r,l.sibling=R,r.child=l,Su(null,l),l=r.child,R=t.child.memoizedState,R===null?R=Ld(a):(h=R.cachePool,h!==null?(L=Cn._currentValue,h=h.parent!==L?{parent:L,pool:L}:h):h=Dg(),R={baseLanes:R.baseLanes|a,cachePool:h}),l.memoizedState=R,l.childLanes=Ud(t,T,a),r.memoizedState=Pd,Su(t.child,l)):(Va(r),a=t.child,t=a.sibling,a=Ls(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(T=r.deletions,T===null?(r.deletions=[t],r.flags|=16):T.push(t)),r.child=a,r.memoizedState=null,a)}function zd(t,r){return r=nf({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function nf(t,r){return t=ri(22,t,null,r),t.lanes=0,t}function jd(t,r,a){return Vo(r,t.child,null,a),t=zd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Hy(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),td(t.return,r,a)}function Bd(t,r,a,l,h,m){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:m}:(T.isBackwards=r,T.rendering=null,T.renderingStartTime=0,T.last=l,T.tail=a,T.tailMode=h,T.treeForkCount=m)}function Fy(t,r,a){var l=r.pendingProps,h=l.revealOrder,m=l.tail;l=l.children;var T=Tn.current,R=(T&2)!==0;if(R?(T=T&1|2,r.flags|=128):T&=1,Oe(Tn,T),Jn(t,r,l,a),l=Ct?cu:0,!R&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hy(t,a,r);else if(t.tag===19)Hy(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&Fc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Bd(r,!1,h,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Fc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Bd(r,!0,a,null,m,l);break;case"together":Bd(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function Hs(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),za|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(dl(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=Ls(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Ls(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function qd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Pc(t)))}function A1(t,r,a){switch(r.tag){case 3:nn(r,r.stateNode.containerInfo),xa(r,Cn,t.memoizedState.cache),Oo();break;case 27:case 5:Be(r);break;case 4:nn(r,r.stateNode.containerInfo);break;case 10:xa(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,dd(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Va(r),r.flags|=128,null):(a&r.child.childLanes)!==0?qy(t,r,a):(Va(r),t=Hs(t,r,a),t!==null?t.sibling:null);Va(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(dl(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return Fy(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Oe(Tn,Tn.current),l)break;return null;case 22:return r.lanes=0,Py(t,r,a,r.pendingProps);case 24:xa(r,Cn,t.memoizedState.cache)}return Hs(t,r,a)}function Ky(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)On=!0;else{if(!qd(t,a)&&(r.flags&128)===0)return On=!1,A1(t,r,a);On=(t.flags&131072)!==0}else On=!1,Ct&&(r.flags&1048576)!==0&&Sg(r,cu,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=Mo(r.elementType),r.type=t,typeof t=="function")Yh(t)?(l=Lo(t,l),r.tag=1,r=jy(null,r,t,l,a)):(r.tag=0,r=Vd(null,r,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===it){r.tag=11,r=My(null,r,t,l,a);break e}else if(h===V){r.tag=14,r=ky(null,r,t,l,a);break e}}throw r=dt(t)||t,Error(s(306,r,""))}}return r;case 0:return Vd(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=Lo(l,r.pendingProps),jy(t,r,l,h,a);case 3:e:{if(nn(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var m=r.memoizedState;h=m.element,ld(t,r),vu(r,l,null,a);var T=r.memoizedState;if(l=T.cache,xa(r,Cn,l),l!==m.cache&&nd(r,[Cn],a,!0),yu(),l=T.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=By(t,r,l,a);break e}else if(l!==h){h=Si(Error(s(424)),r),fu(h),r=By(t,r,l,a);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Jt=Ii(t.firstChild),$n=r,Ct=!0,Oa=null,Ri=!0,a=Pg(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Oo(),l===h){r=Hs(t,r,a);break e}Jn(t,r,l,a)}r=r.child}return r;case 26:return tf(t,r),t===null?(a=n_(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ct||(a=r.type,t=r.pendingProps,l=_f(tt.current).createElement(a),l[Lt]=r,l[$t]=t,Zn(l,a,t),an(l),r.stateNode=l):r.memoizedState=n_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Be(r),t===null&&Ct&&(l=r.stateNode=Wv(r.type,r.pendingProps,tt.current),$n=r,Ri=!0,h=Jt,Fa(r.type)?(bm=h,Jt=Ii(l.firstChild)):Jt=h),Jn(t,r,r.pendingProps.children,a),tf(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Ct&&((h=l=Jt)&&(l=eS(l,r.type,r.pendingProps,Ri),l!==null?(r.stateNode=l,$n=r,Jt=Ii(l.firstChild),Ri=!1,h=!0):h=!1),h||Da(r)),Be(r),h=r.type,m=r.pendingProps,T=t!==null?t.memoizedProps:null,l=m.children,gm(h,m)?l=null:T!==null&&gm(h,T)&&(r.flags|=32),r.memoizedState!==null&&(h=pd(t,r,p1,null,null,a),Uu._currentValue=h),tf(t,r),Jn(t,r,l,a),r.child;case 6:return t===null&&Ct&&((t=a=Jt)&&(a=tS(a,r.pendingProps,Ri),a!==null?(r.stateNode=a,$n=r,Jt=null,t=!0):t=!1),t||Da(r)),null;case 13:return qy(t,r,a);case 4:return nn(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Vo(r,null,l,a):Jn(t,r,l,a),r.child;case 11:return My(t,r,r.type,r.pendingProps,a);case 7:return Jn(t,r,r.pendingProps,a),r.child;case 8:return Jn(t,r,r.pendingProps.children,a),r.child;case 12:return Jn(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,xa(r,r.type,l.value),Jn(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,xo(r),h=Xn(h),l=l(h),r.flags|=1,Jn(t,r,l,a),r.child;case 14:return ky(t,r,r.type,r.pendingProps,a);case 15:return Vy(t,r,r.type,r.pendingProps,a);case 19:return Fy(t,r,a);case 31:return S1(t,r,a);case 22:return Py(t,r,a,r.pendingProps);case 24:return xo(r),l=Xn(Cn),t===null?(h=sd(),h===null&&(h=Yt,m=rd(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),r.memoizedState={parent:l,cache:h},od(r),xa(r,Cn,h)):((t.lanes&a)!==0&&(ld(t,r),vu(r,null,null,a),yu()),h=t.memoizedState,m=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),xa(r,Cn,l)):(l=m.cache,xa(r,Cn,l),l!==h.cache&&nd(r,[Cn],a,!0))),Jn(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Fs(t){t.flags|=4}function Hd(t,r,a,l,h){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(vv())t.flags|=8192;else throw ko=jc,ad}else t.flags&=-16777217}function Gy(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!o_(r))if(vv())t.flags|=8192;else throw ko=jc,ad}function rf(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?rl():536870912,t.lanes|=r,wl|=r)}function Au(t,r){if(!Ct)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Zt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function w1(t,r,a){var l=r.pendingProps;switch(Jh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(r),null;case 1:return Zt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),js(Cn),Qt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(hl(r)?Fs(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Wh())),Zt(r),null;case 26:var h=r.type,m=r.memoizedState;return t===null?(Fs(r),m!==null?(Zt(r),Gy(r,m)):(Zt(r),Hd(r,h,null,l,a))):m?m!==t.memoizedState?(Fs(r),Zt(r),Gy(r,m)):(Zt(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&Fs(r),Zt(r),Hd(r,h,t,l,a)),null;case 27:if(bs(r),a=tt.current,h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Fs(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Zt(r),null}t=Ne.current,hl(r)?wg(r):(t=Wv(h,l,a),r.stateNode=t,Fs(r))}return Zt(r),null;case 5:if(bs(r),h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Fs(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Zt(r),null}if(m=Ne.current,hl(r))wg(r);else{var T=_f(tt.current);switch(m){case 1:m=T.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=T.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=T.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=T.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=T.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?T.createElement("select",{is:l.is}):T.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?T.createElement(h,{is:l.is}):T.createElement(h)}}m[Lt]=r,m[$t]=l;e:for(T=r.child;T!==null;){if(T.tag===5||T.tag===6)m.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===r)break e;for(;T.sibling===null;){if(T.return===null||T.return===r)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}r.stateNode=m;e:switch(Zn(m,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Fs(r)}}return Zt(r),Hd(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Fs(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=tt.current,hl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=$n,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Lt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||qv(t.nodeValue,a)),t||Da(r,!0)}else t=_f(t).createTextNode(l),t[Lt]=r,r.stateNode=t}return Zt(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=hl(r),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Lt]=r}else Oo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Zt(r),t=!1}else a=Wh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(si(r),r):(si(r),null);if((r.flags&128)!==0)throw Error(s(558))}return Zt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=hl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Lt]=r}else Oo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Zt(r),h=!1}else h=Wh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(si(r),r):(si(r),null)}return si(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),rf(r,r.updateQueue),Zt(r),null);case 4:return Qt(),t===null&&fm(r.stateNode.containerInfo),Zt(r),null;case 10:return js(r.type),Zt(r),null;case 19:if(ce(Tn),l=r.memoizedState,l===null)return Zt(r),null;if(h=(r.flags&128)!==0,m=l.rendering,m===null)if(h)Au(l,!1);else{if(gn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=Fc(t),m!==null){for(r.flags|=128,Au(l,!1),t=m.updateQueue,r.updateQueue=t,rf(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Eg(a,t),a=a.sibling;return Oe(Tn,Tn.current&1|2),Ct&&Us(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&jn()>uf&&(r.flags|=128,h=!0,Au(l,!1),r.lanes=4194304)}else{if(!h)if(t=Fc(m),t!==null){if(r.flags|=128,h=!0,t=t.updateQueue,r.updateQueue=t,rf(r,t),Au(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Ct)return Zt(r),null}else 2*jn()-l.renderingStartTime>uf&&a!==536870912&&(r.flags|=128,h=!0,Au(l,!1),r.lanes=4194304);l.isBackwards?(m.sibling=r.child,r.child=m):(t=l.last,t!==null?t.sibling=m:r.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=jn(),t.sibling=null,a=Tn.current,Oe(Tn,h?a&1|2:a&1),Ct&&Us(r,l.treeForkCount),t):(Zt(r),null);case 22:case 23:return si(r),hd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(Zt(r),r.subtreeFlags&6&&(r.flags|=8192)):Zt(r),a=r.updateQueue,a!==null&&rf(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&ce(No),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),js(Cn),Zt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function R1(t,r){switch(Jh(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return js(Cn),Qt(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return bs(r),null;case 31:if(r.memoizedState!==null){if(si(r),r.alternate===null)throw Error(s(340));Oo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(si(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Oo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return ce(Tn),null;case 4:return Qt(),null;case 10:return js(r.type),null;case 22:case 23:return si(r),hd(),t!==null&&ce(No),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return js(Cn),null;case 25:return null;default:return null}}function Yy(t,r){switch(Jh(r),r.tag){case 3:js(Cn),Qt();break;case 26:case 27:case 5:bs(r);break;case 4:Qt();break;case 31:r.memoizedState!==null&&si(r);break;case 13:si(r);break;case 19:ce(Tn);break;case 10:js(r.type);break;case 22:case 23:si(r),hd(),t!==null&&ce(No);break;case 24:js(Cn)}}function wu(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,T=a.inst;l=m(),T.destroy=l}a=a.next}while(a!==h)}}catch(R){Bt(r,r.return,R)}}function La(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var T=l.inst,R=T.destroy;if(R!==void 0){T.destroy=void 0,h=r;var L=a,re=R;try{re()}catch(he){Bt(h,L,he)}}}l=l.next}while(l!==m)}}catch(he){Bt(r,r.return,he)}}function Qy(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Ug(r,a)}catch(l){Bt(t,t.return,l)}}}function $y(t,r,a){a.props=Lo(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Bt(t,r,l)}}function Ru(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){Bt(t,r,h)}}function cs(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Bt(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Bt(t,r,h)}else a.current=null}function Xy(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Bt(t,t.return,h)}}function Fd(t,r,a){try{var l=t.stateNode;Q1(l,t.type,a,r),l[$t]=r}catch(h){Bt(t,t.return,h)}}function Jy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Fa(t.type)||t.tag===4}function Kd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Fa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gd(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=sr));else if(l!==4&&(l===27&&Fa(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Gd(t,r,a),t=t.sibling;t!==null;)Gd(t,r,a),t=t.sibling}function sf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Fa(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(sf(t,r,a),t=t.sibling;t!==null;)sf(t,r,a),t=t.sibling}function Zy(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);Zn(r,l,a),r[Lt]=t,r[$t]=a}catch(m){Bt(t,t.return,m)}}var Ks=!1,Dn=!1,Yd=!1,Wy=typeof WeakSet=="function"?WeakSet:Set,Fn=null;function C1(t,r){if(t=t.containerInfo,mm=Rf,t=A(t),w(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var T=0,R=-1,L=-1,re=0,he=0,pe=t,se=null;t:for(;;){for(var le;pe!==a||h!==0&&pe.nodeType!==3||(R=T+h),pe!==m||l!==0&&pe.nodeType!==3||(L=T+l),pe.nodeType===3&&(T+=pe.nodeValue.length),(le=pe.firstChild)!==null;)se=pe,pe=le;for(;;){if(pe===t)break t;if(se===a&&++re===h&&(R=T),se===m&&++he===l&&(L=T),(le=pe.nextSibling)!==null)break;pe=se,se=pe.parentNode}pe=le}a=R===-1||L===-1?null:{start:R,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(pm={focusedElem:t,selectionRange:a},Rf=!1,Fn=r;Fn!==null;)if(r=Fn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Fn=t;else for(;Fn!==null;){switch(r=Fn,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=r,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Ue=Lo(a.type,h);t=l.getSnapshotBeforeUpdate(Ue,m),l.__reactInternalSnapshotBeforeUpdate=t}catch($e){Bt(a,a.return,$e)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)vm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":vm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Fn=t;break}Fn=r.return}}function ev(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ys(t,a),l&4&&wu(5,a);break;case 1:if(Ys(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(T){Bt(a,a.return,T)}else{var h=Lo(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(T){Bt(a,a.return,T)}}l&64&&Qy(a),l&512&&Ru(a,a.return);break;case 3:if(Ys(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Ug(t,r)}catch(T){Bt(a,a.return,T)}}break;case 27:r===null&&l&4&&Zy(a);case 26:case 5:Ys(t,a),r===null&&l&4&&Xy(a),l&512&&Ru(a,a.return);break;case 12:Ys(t,a);break;case 31:Ys(t,a),l&4&&rv(t,a);break;case 13:Ys(t,a),l&4&&iv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=P1.bind(null,a),nS(t,a))));break;case 22:if(l=a.memoizedState!==null||Ks,!l){r=r!==null&&r.memoizedState!==null||Dn,h=Ks;var m=Dn;Ks=l,(Dn=r)&&!m?Qs(t,a,(a.subtreeFlags&8772)!==0):Ys(t,a),Ks=h,Dn=m}break;case 30:break;default:Ys(t,a)}}function tv(t){var r=t.alternate;r!==null&&(t.alternate=null,tv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Is(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var tn=null,Pr=!1;function Gs(t,r,a){for(a=a.child;a!==null;)nv(t,r,a),a=a.sibling}function nv(t,r,a){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(nr,a)}catch{}switch(a.tag){case 26:Dn||cs(a,r),Gs(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Dn||cs(a,r);var l=tn,h=Pr;Fa(a.type)&&(tn=a.stateNode,Pr=!1),Gs(t,r,a),Vu(a.stateNode),tn=l,Pr=h;break;case 5:Dn||cs(a,r);case 6:if(l=tn,h=Pr,tn=null,Gs(t,r,a),tn=l,Pr=h,tn!==null)if(Pr)try{(tn.nodeType===9?tn.body:tn.nodeName==="HTML"?tn.ownerDocument.body:tn).removeChild(a.stateNode)}catch(m){Bt(a,r,m)}else try{tn.removeChild(a.stateNode)}catch(m){Bt(a,r,m)}break;case 18:tn!==null&&(Pr?(t=tn,Qv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ml(t)):Qv(tn,a.stateNode));break;case 4:l=tn,h=Pr,tn=a.stateNode.containerInfo,Pr=!0,Gs(t,r,a),tn=l,Pr=h;break;case 0:case 11:case 14:case 15:La(2,a,r),Dn||La(4,a,r),Gs(t,r,a);break;case 1:Dn||(cs(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&$y(a,r,l)),Gs(t,r,a);break;case 21:Gs(t,r,a);break;case 22:Dn=(l=Dn)||a.memoizedState!==null,Gs(t,r,a),Dn=l;break;default:Gs(t,r,a)}}function rv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ml(t)}catch(a){Bt(r,r.return,a)}}}function iv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ml(t)}catch(a){Bt(r,r.return,a)}}function I1(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Wy),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Wy),r;default:throw Error(s(435,t.tag))}}function af(t,r){var a=I1(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var h=L1.bind(null,t,l);l.then(h,h)}})}function Lr(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,T=r,R=T;e:for(;R!==null;){switch(R.tag){case 27:if(Fa(R.type)){tn=R.stateNode,Pr=!1;break e}break;case 5:tn=R.stateNode,Pr=!1;break e;case 3:case 4:tn=R.stateNode.containerInfo,Pr=!0;break e}R=R.return}if(tn===null)throw Error(s(160));nv(m,T,h),tn=null,Pr=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)sv(r,t),r=r.sibling}var Hi=null;function sv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Lr(r,t),Ur(t),l&4&&(La(3,t,t.return),wu(3,t),La(5,t,t.return));break;case 1:Lr(r,t),Ur(t),l&512&&(Dn||a===null||cs(a,a.return)),l&64&&Ks&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Hi;if(Lr(r,t),Ur(t),l&512&&(Dn||a===null||cs(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Bn]||m[Lt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),Zn(m,l,a),m[Lt]=t,an(m),l=m;break e;case"link":var T=s_("link","href",h).get(l+(a.href||""));if(T){for(var R=0;R<T.length;R++)if(m=T[R],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(R,1);break t}}m=h.createElement(l),Zn(m,l,a),h.head.appendChild(m);break;case"meta":if(T=s_("meta","content",h).get(l+(a.content||""))){for(R=0;R<T.length;R++)if(m=T[R],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(R,1);break t}}m=h.createElement(l),Zn(m,l,a),h.head.appendChild(m);break;default:throw Error(s(468,l))}m[Lt]=t,an(m),l=m}t.stateNode=l}else a_(h,t.type,t.stateNode);else t.stateNode=i_(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?a_(h,t.type,t.stateNode):i_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Fd(t,t.memoizedProps,a.memoizedProps)}break;case 27:Lr(r,t),Ur(t),l&512&&(Dn||a===null||cs(a,a.return)),a!==null&&l&4&&Fd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Lr(r,t),Ur(t),l&512&&(Dn||a===null||cs(a,a.return)),t.flags&32){h=t.stateNode;try{Qn(h,"")}catch(Ue){Bt(t,t.return,Ue)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Fd(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Yd=!0);break;case 6:if(Lr(r,t),Ur(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Ue){Bt(t,t.return,Ue)}}break;case 3:if(Tf=null,h=Hi,Hi=Ef(r.containerInfo),Lr(r,t),Hi=h,Ur(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ml(r.containerInfo)}catch(Ue){Bt(t,t.return,Ue)}Yd&&(Yd=!1,av(t));break;case 4:l=Hi,Hi=Ef(t.stateNode.containerInfo),Lr(r,t),Ur(t),Hi=l;break;case 12:Lr(r,t),Ur(t);break;case 31:Lr(r,t),Ur(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,af(t,l)));break;case 13:Lr(r,t),Ur(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(lf=jn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,af(t,l)));break;case 22:h=t.memoizedState!==null;var L=a!==null&&a.memoizedState!==null,re=Ks,he=Dn;if(Ks=re||h,Dn=he||L,Lr(r,t),Dn=he,Ks=re,Ur(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||L||Ks||Dn||Uo(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){L=a=r;try{if(m=L.stateNode,h)T=m.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{R=L.stateNode;var pe=L.memoizedProps.style,se=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;R.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Ue){Bt(L,L.return,Ue)}}}else if(r.tag===6){if(a===null){L=r;try{L.stateNode.nodeValue=h?"":L.memoizedProps}catch(Ue){Bt(L,L.return,Ue)}}}else if(r.tag===18){if(a===null){L=r;try{var le=L.stateNode;h?$v(le,!0):$v(L.stateNode,!1)}catch(Ue){Bt(L,L.return,Ue)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,af(t,a))));break;case 19:Lr(r,t),Ur(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,af(t,l)));break;case 30:break;case 21:break;default:Lr(r,t),Ur(t)}}function Ur(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Jy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,m=Kd(t);sf(t,m,h);break;case 5:var T=a.stateNode;a.flags&32&&(Qn(T,""),a.flags&=-33);var R=Kd(t);sf(t,R,T);break;case 3:case 4:var L=a.stateNode.containerInfo,re=Kd(t);Gd(t,re,L);break;default:throw Error(s(161))}}catch(he){Bt(t,t.return,he)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function av(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;av(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Ys(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)ev(t,r.alternate,r),r=r.sibling}function Uo(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:La(4,r,r.return),Uo(r);break;case 1:cs(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&$y(r,r.return,a),Uo(r);break;case 27:Vu(r.stateNode);case 26:case 5:cs(r,r.return),Uo(r);break;case 22:r.memoizedState===null&&Uo(r);break;case 30:Uo(r);break;default:Uo(r)}t=t.sibling}}function Qs(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,m=r,T=m.flags;switch(m.tag){case 0:case 11:case 15:Qs(h,m,a),wu(4,m);break;case 1:if(Qs(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(re){Bt(l,l.return,re)}if(l=m,h=l.updateQueue,h!==null){var R=l.stateNode;try{var L=h.shared.hiddenCallbacks;if(L!==null)for(h.shared.hiddenCallbacks=null,h=0;h<L.length;h++)Lg(L[h],R)}catch(re){Bt(l,l.return,re)}}a&&T&64&&Qy(m),Ru(m,m.return);break;case 27:Zy(m);case 26:case 5:Qs(h,m,a),a&&l===null&&T&4&&Xy(m),Ru(m,m.return);break;case 12:Qs(h,m,a);break;case 31:Qs(h,m,a),a&&T&4&&rv(h,m);break;case 13:Qs(h,m,a),a&&T&4&&iv(h,m);break;case 22:m.memoizedState===null&&Qs(h,m,a),Ru(m,m.return);break;case 30:break;default:Qs(h,m,a)}r=r.sibling}}function Qd(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&hu(a))}function $d(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&hu(t))}function Fi(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ov(t,r,a,l),r=r.sibling}function ov(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Fi(t,r,a,l),h&2048&&wu(9,r);break;case 1:Fi(t,r,a,l);break;case 3:Fi(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&hu(t)));break;case 12:if(h&2048){Fi(t,r,a,l),t=r.stateNode;try{var m=r.memoizedProps,T=m.id,R=m.onPostCommit;typeof R=="function"&&R(T,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(L){Bt(r,r.return,L)}}else Fi(t,r,a,l);break;case 31:Fi(t,r,a,l);break;case 13:Fi(t,r,a,l);break;case 23:break;case 22:m=r.stateNode,T=r.alternate,r.memoizedState!==null?m._visibility&2?Fi(t,r,a,l):Cu(t,r):m._visibility&2?Fi(t,r,a,l):(m._visibility|=2,Tl(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),h&2048&&Qd(T,r);break;case 24:Fi(t,r,a,l),h&2048&&$d(r.alternate,r);break;default:Fi(t,r,a,l)}}function Tl(t,r,a,l,h){for(h=h&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,T=r,R=a,L=l,re=T.flags;switch(T.tag){case 0:case 11:case 15:Tl(m,T,R,L,h),wu(8,T);break;case 23:break;case 22:var he=T.stateNode;T.memoizedState!==null?he._visibility&2?Tl(m,T,R,L,h):Cu(m,T):(he._visibility|=2,Tl(m,T,R,L,h)),h&&re&2048&&Qd(T.alternate,T);break;case 24:Tl(m,T,R,L,h),h&&re&2048&&$d(T.alternate,T);break;default:Tl(m,T,R,L,h)}r=r.sibling}}function Cu(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:Cu(a,l),h&2048&&Qd(l.alternate,l);break;case 24:Cu(a,l),h&2048&&$d(l.alternate,l);break;default:Cu(a,l)}r=r.sibling}}var Iu=8192;function Sl(t,r,a){if(t.subtreeFlags&Iu)for(t=t.child;t!==null;)lv(t,r,a),t=t.sibling}function lv(t,r,a){switch(t.tag){case 26:Sl(t,r,a),t.flags&Iu&&t.memoizedState!==null&&mS(a,Hi,t.memoizedState,t.memoizedProps);break;case 5:Sl(t,r,a);break;case 3:case 4:var l=Hi;Hi=Ef(t.stateNode.containerInfo),Sl(t,r,a),Hi=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Iu,Iu=16777216,Sl(t,r,a),Iu=l):Sl(t,r,a));break;default:Sl(t,r,a)}}function uv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Ou(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Fn=l,fv(l,t)}uv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)cv(t),t=t.sibling}function cv(t){switch(t.tag){case 0:case 11:case 15:Ou(t),t.flags&2048&&La(9,t,t.return);break;case 3:Ou(t);break;case 12:Ou(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,of(t)):Ou(t);break;default:Ou(t)}}function of(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Fn=l,fv(l,t)}uv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:La(8,r,r.return),of(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,of(r));break;default:of(r)}t=t.sibling}}function fv(t,r){for(;Fn!==null;){var a=Fn;switch(a.tag){case 0:case 11:case 15:La(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:hu(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Fn=l;else e:for(a=t;Fn!==null;){l=Fn;var h=l.sibling,m=l.return;if(tv(l),l===a){Fn=null;break e}if(h!==null){h.return=m,Fn=h;break e}Fn=m}}}var O1={getCacheForType:function(t){var r=Xn(Cn),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return Xn(Cn).controller.signal}},D1=typeof WeakMap=="function"?WeakMap:Map,Mt=0,Yt=null,vt=null,Et=0,jt=0,ai=null,Ua=!1,Al=!1,Xd=!1,$s=0,gn=0,za=0,zo=0,Jd=0,oi=0,wl=0,Du=null,zr=null,Zd=!1,lf=0,hv=0,uf=1/0,cf=null,ja=null,Pn=0,Ba=null,Rl=null,Xs=0,Wd=0,em=null,dv=null,xu=0,tm=null;function li(){return(Mt&2)!==0&&Et!==0?Et&-Et:ue.T!==null?om():Cs()}function mv(){if(oi===0)if((Et&536870912)===0||Ct){var t=ki;ki<<=1,(ki&3932160)===0&&(ki=262144),oi=t}else oi=536870912;return t=ii.current,t!==null&&(t.flags|=32),oi}function jr(t,r,a){(t===Yt&&(jt===2||jt===9)||t.cancelPendingCommit!==null)&&(Cl(t,0),qa(t,Et,oi,!1)),Sr(t,a),((Mt&2)===0||t!==Yt)&&(t===Yt&&((Mt&2)===0&&(zo|=a),gn===4&&qa(t,Et,oi,!1)),fs(t))}function pv(t,r,a){if((Mt&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||mr(t,r),h=l?M1(t,r):rm(t,r,!0),m=l;do{if(h===0){Al&&!l&&qa(t,r,0,!1);break}else{if(a=t.current.alternate,m&&!x1(a)){h=rm(t,r,!1),m=!1;continue}if(h===2){if(m=r,t.errorRecoveryDisabledLanes&m)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;e:{var R=t;h=Du;var L=R.current.memoizedState.isDehydrated;if(L&&(Cl(R,T).flags|=256),T=rm(R,T,!1),T!==2){if(Xd&&!L){R.errorRecoveryDisabledLanes|=m,zo|=m,h=4;break e}m=zr,zr=h,m!==null&&(zr===null?zr=m:zr.push.apply(zr,m))}h=T}if(m=!1,h!==2)continue}}if(h===1){Cl(t,0),qa(t,r,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:qa(l,r,oi,!Ua);break e;case 2:zr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=lf+300-jn(),10<h)){if(qa(l,r,oi,!Ua),Kr(l,0,!0)!==0)break e;Xs=r,l.timeoutHandle=Gv(gv.bind(null,l,a,zr,cf,Zd,r,oi,zo,wl,Ua,m,"Throttled",-0,0),h);break e}gv(l,a,zr,cf,Zd,r,oi,zo,wl,Ua,m,null,-0,0)}}break}while(!0);fs(t)}function gv(t,r,a,l,h,m,T,R,L,re,he,pe,se,le){if(t.timeoutHandle=-1,pe=r.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:sr},lv(r,m,pe);var Ue=(m&62914560)===m?lf-jn():(m&4194048)===m?hv-jn():0;if(Ue=pS(pe,Ue),Ue!==null){Xs=m,t.cancelPendingCommit=Ue(Av.bind(null,t,r,m,a,l,h,T,R,L,he,pe,null,se,le)),qa(t,m,T,!re);return}}Av(t,r,m,a,l,h,T,R,L)}function x1(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!ar(m(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function qa(t,r,a,l){r&=~Jd,r&=~zo,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var m=31-De(h),T=1<<m;l[m]=-1,h&=~T}a!==0&&di(t,a,r)}function ff(){return(Mt&6)===0?(Nu(0),!1):!0}function nm(){if(vt!==null){if(jt===0)var t=vt.return;else t=vt,zs=Do=null,vd(t),yl=null,mu=0,t=vt;for(;t!==null;)Yy(t.alternate,t),t=t.return;vt=null}}function Cl(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,J1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Xs=0,nm(),Yt=t,vt=a=Ls(t.current,null),Et=r,jt=0,ai=null,Ua=!1,Al=mr(t,r),Xd=!1,wl=oi=Jd=zo=za=gn=0,zr=Du=null,Zd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-De(l),m=1<<h;r|=t[h],l&=~m}return $s=r,st(),a}function yv(t,r){ut=null,ue.H=Tu,r===gl||r===zc?(r=Mg(),jt=3):r===ad?(r=Mg(),jt=4):jt=r===kd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ai=r,vt===null&&(gn=1,Wc(t,Si(r,t.current)))}function vv(){var t=ii.current;return t===null?!0:(Et&4194048)===Et?Ci===null:(Et&62914560)===Et||(Et&536870912)!==0?t===Ci:!1}function _v(){var t=ue.H;return ue.H=Tu,t===null?Tu:t}function Ev(){var t=ue.A;return ue.A=O1,t}function hf(){gn=4,Ua||(Et&4194048)!==Et&&ii.current!==null||(Al=!0),(za&134217727)===0&&(zo&134217727)===0||Yt===null||qa(Yt,Et,oi,!1)}function rm(t,r,a){var l=Mt;Mt|=2;var h=_v(),m=Ev();(Yt!==t||Et!==r)&&(cf=null,Cl(t,r)),r=!1;var T=gn;e:do try{if(jt!==0&&vt!==null){var R=vt,L=ai;switch(jt){case 8:nm(),T=6;break e;case 3:case 2:case 9:case 6:ii.current===null&&(r=!0);var re=jt;if(jt=0,ai=null,Il(t,R,L,re),a&&Al){T=0;break e}break;default:re=jt,jt=0,ai=null,Il(t,R,L,re)}}N1(),T=gn;break}catch(he){yv(t,he)}while(!0);return r&&t.shellSuspendCounter++,zs=Do=null,Mt=l,ue.H=h,ue.A=m,vt===null&&(Yt=null,Et=0,st()),T}function N1(){for(;vt!==null;)bv(vt)}function M1(t,r){var a=Mt;Mt|=2;var l=_v(),h=Ev();Yt!==t||Et!==r?(cf=null,uf=jn()+500,Cl(t,r)):Al=mr(t,r);e:do try{if(jt!==0&&vt!==null){r=vt;var m=ai;t:switch(jt){case 1:jt=0,ai=null,Il(t,r,m,1);break;case 2:case 9:if(xg(m)){jt=0,ai=null,Tv(r);break}r=function(){jt!==2&&jt!==9||Yt!==t||(jt=7),fs(t)},m.then(r,r);break e;case 3:jt=7;break e;case 4:jt=5;break e;case 7:xg(m)?(jt=0,ai=null,Tv(r)):(jt=0,ai=null,Il(t,r,m,7));break;case 5:var T=null;switch(vt.tag){case 26:T=vt.memoizedState;case 5:case 27:var R=vt;if(T?o_(T):R.stateNode.complete){jt=0,ai=null;var L=R.sibling;if(L!==null)vt=L;else{var re=R.return;re!==null?(vt=re,df(re)):vt=null}break t}}jt=0,ai=null,Il(t,r,m,5);break;case 6:jt=0,ai=null,Il(t,r,m,6);break;case 8:nm(),gn=6;break e;default:throw Error(s(462))}}k1();break}catch(he){yv(t,he)}while(!0);return zs=Do=null,ue.H=l,ue.A=h,Mt=a,vt!==null?0:(Yt=null,Et=0,st(),gn)}function k1(){for(;vt!==null&&!nl();)bv(vt)}function bv(t){var r=Ky(t.alternate,t,$s);t.memoizedProps=t.pendingProps,r===null?df(t):vt=r}function Tv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=zy(a,r,r.pendingProps,r.type,void 0,Et);break;case 11:r=zy(a,r,r.pendingProps,r.type.render,r.ref,Et);break;case 5:vd(r);default:Yy(a,r),r=vt=Eg(r,$s),r=Ky(a,r,$s)}t.memoizedProps=t.pendingProps,r===null?df(t):vt=r}function Il(t,r,a,l){zs=Do=null,vd(r),yl=null,mu=0;var h=r.return;try{if(T1(t,h,r,a,Et)){gn=1,Wc(t,Si(a,t.current)),vt=null;return}}catch(m){if(h!==null)throw vt=h,m;gn=1,Wc(t,Si(a,t.current)),vt=null;return}r.flags&32768?(Ct||l===1?t=!0:Al||(Et&536870912)!==0?t=!1:(Ua=t=!0,(l===2||l===9||l===3||l===6)&&(l=ii.current,l!==null&&l.tag===13&&(l.flags|=16384))),Sv(r,t)):df(r)}function df(t){var r=t;do{if((r.flags&32768)!==0){Sv(r,Ua);return}t=r.return;var a=w1(r.alternate,r,$s);if(a!==null){vt=a;return}if(r=r.sibling,r!==null){vt=r;return}vt=r=t}while(r!==null);gn===0&&(gn=5)}function Sv(t,r){do{var a=R1(t.alternate,t);if(a!==null){a.flags&=32767,vt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){vt=t;return}vt=t=a}while(t!==null);gn=6,vt=null}function Av(t,r,a,l,h,m,T,R,L){t.cancelPendingCommit=null;do mf();while(Pn!==0);if((Mt&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(m=r.lanes|r.childLanes,m|=Ke,_o(t,a,m,T,R,L),t===Yt&&(vt=Yt=null,Et=0),Rl=r,Ba=t,Xs=a,Wd=m,em=h,dv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,U1(fi,function(){return Ov(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=ue.T,ue.T=null,h=Ie.p,Ie.p=2,T=Mt,Mt|=4;try{C1(t,r,a)}finally{Mt=T,Ie.p=h,ue.T=l}}Pn=1,wv(),Rv(),Cv()}}function wv(){if(Pn===1){Pn=0;var t=Ba,r=Rl,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=ue.T,ue.T=null;var l=Ie.p;Ie.p=2;var h=Mt;Mt|=4;try{sv(r,t);var m=pm,T=A(t.containerInfo),R=m.focusedElem,L=m.selectionRange;if(T!==R&&R&&R.ownerDocument&&_(R.ownerDocument.documentElement,R)){if(L!==null&&w(R)){var re=L.start,he=L.end;if(he===void 0&&(he=re),"selectionStart"in R)R.selectionStart=re,R.selectionEnd=Math.min(he,R.value.length);else{var pe=R.ownerDocument||document,se=pe&&pe.defaultView||window;if(se.getSelection){var le=se.getSelection(),Ue=R.textContent.length,$e=Math.min(L.start,Ue),Kt=L.end===void 0?$e:Math.min(L.end,Ue);!le.extend&&$e>Kt&&(T=Kt,Kt=$e,$e=T);var J=g(R,$e),Y=g(R,Kt);if(J&&Y&&(le.rangeCount!==1||le.anchorNode!==J.node||le.anchorOffset!==J.offset||le.focusNode!==Y.node||le.focusOffset!==Y.offset)){var ne=pe.createRange();ne.setStart(J.node,J.offset),le.removeAllRanges(),$e>Kt?(le.addRange(ne),le.extend(Y.node,Y.offset)):(ne.setEnd(Y.node,Y.offset),le.addRange(ne))}}}}for(pe=[],le=R;le=le.parentNode;)le.nodeType===1&&pe.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<pe.length;R++){var me=pe[R];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Rf=!!mm,pm=mm=null}finally{Mt=h,Ie.p=l,ue.T=a}}t.current=r,Pn=2}}function Rv(){if(Pn===2){Pn=0;var t=Ba,r=Rl,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=ue.T,ue.T=null;var l=Ie.p;Ie.p=2;var h=Mt;Mt|=4;try{ev(t,r.alternate,r)}finally{Mt=h,Ie.p=l,ue.T=a}}Pn=3}}function Cv(){if(Pn===4||Pn===3){Pn=0,Ji();var t=Ba,r=Rl,a=Xs,l=dv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Pn=5:(Pn=0,Rl=Ba=null,Iv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ja=null),Ar(a),r=r.stateNode,yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(nr,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=ue.T,h=Ie.p,Ie.p=2,ue.T=null;try{for(var m=t.onRecoverableError,T=0;T<l.length;T++){var R=l[T];m(R.value,{componentStack:R.stack})}}finally{ue.T=r,Ie.p=h}}(Xs&3)!==0&&mf(),fs(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===tm?xu++:(xu=0,tm=t):xu=0,Nu(0)}}function Iv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,hu(r)))}function mf(){return wv(),Rv(),Cv(),Ov()}function Ov(){if(Pn!==5)return!1;var t=Ba,r=Wd;Wd=0;var a=Ar(Xs),l=ue.T,h=Ie.p;try{Ie.p=32>a?32:a,ue.T=null,a=em,em=null;var m=Ba,T=Xs;if(Pn=0,Rl=Ba=null,Xs=0,(Mt&6)!==0)throw Error(s(331));var R=Mt;if(Mt|=4,cv(m.current),ov(m,m.current,T,a),Mt=R,Nu(0,!1),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(nr,m)}catch{}return!0}finally{Ie.p=h,ue.T=l,Iv(t,r)}}function Dv(t,r,a){r=Si(a,r),r=Md(t.stateNode,r,2),t=ka(t,r,2),t!==null&&(Sr(t,2),fs(t))}function Bt(t,r,a){if(t.tag===3)Dv(t,t,a);else for(;r!==null;){if(r.tag===3){Dv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ja===null||!ja.has(l))){t=Si(a,t),a=xy(2),l=ka(r,a,2),l!==null&&(Ny(a,l,r,t),Sr(l,2),fs(l));break}}r=r.return}}function im(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new D1;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(Xd=!0,h.add(a),t=V1.bind(null,t,r,a),r.then(t,t))}function V1(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Yt===t&&(Et&a)===a&&(gn===4||gn===3&&(Et&62914560)===Et&&300>jn()-lf?(Mt&2)===0&&Cl(t,0):Jd|=a,wl===Et&&(wl=0)),fs(t)}function xv(t,r){r===0&&(r=rl()),t=Vt(t,r),t!==null&&(Sr(t,r),fs(t))}function P1(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),xv(t,a)}function L1(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),xv(t,a)}function U1(t,r){return rn(t,r)}var pf=null,Ol=null,sm=!1,gf=!1,am=!1,Ha=0;function fs(t){t!==Ol&&t.next===null&&(Ol===null?pf=Ol=t:Ol=Ol.next=t),gf=!0,sm||(sm=!0,j1())}function Nu(t,r){if(!am&&gf){am=!0;do for(var a=!1,l=pf;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var T=l.suspendedLanes,R=l.pingedLanes;m=(1<<31-De(42|t)+1)-1,m&=h&~(T&~R),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Vv(l,m))}else m=Et,m=Kr(l,l===Yt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||mr(l,m)||(a=!0,Vv(l,m));l=l.next}while(a);am=!1}}function z1(){Nv()}function Nv(){gf=sm=!1;var t=0;Ha!==0&&X1()&&(t=Ha);for(var r=jn(),a=null,l=pf;l!==null;){var h=l.next,m=Mv(l,r);m===0?(l.next=null,a===null?pf=h:a.next=h,h===null&&(Ol=a)):(a=l,(t!==0||(m&3)!==0)&&(gf=!0)),l=h}Pn!==0&&Pn!==5||Nu(t),Ha!==0&&(Ha=0)}function Mv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var T=31-De(m),R=1<<T,L=h[T];L===-1?((R&a)===0||(R&l)!==0)&&(h[T]=au(R,r)):L<=r&&(t.expiredLanes|=R),m&=~R}if(r=Yt,a=Et,a=Kr(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(jt===2||jt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Mn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||mr(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Mn(l),Ar(a)){case 2:case 8:a=Fr;break;case 32:a=fi;break;case 268435456:a=ca;break;default:a=fi}return l=kv.bind(null,t),a=rn(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Mn(l),t.callbackPriority=2,t.callbackNode=null,2}function kv(t,r){if(Pn!==0&&Pn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(mf()&&t.callbackNode!==a)return null;var l=Et;return l=Kr(t,t===Yt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(pv(t,l,r),Mv(t,jn()),t.callbackNode!=null&&t.callbackNode===a?kv.bind(null,t):null)}function Vv(t,r){if(mf())return null;pv(t,r,!0)}function j1(){Z1(function(){(Mt&6)!==0?rn(kn,z1):Nv()})}function om(){if(Ha===0){var t=ml;t===0&&(t=Se,Se<<=1,(Se&261888)===0&&(Se=256)),Ha=t}return Ha}function Pv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Wr(""+t)}function Lv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function B1(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var m=Pv((h[$t]||null).action),T=l.submitter;T&&(r=(r=T[$t]||null)?Pv(r.formAction):T.getAttribute("formAction"),r!==null&&(m=r,T=null));var R=new yi("action","action",null,l,h);t.push({event:R,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ha!==0){var L=T?Lv(h,T):new FormData(h);Cd(a,{pending:!0,data:L,method:h.method,action:m},null,L)}}else typeof m=="function"&&(R.preventDefault(),L=T?Lv(h,T):new FormData(h),Cd(a,{pending:!0,data:L,method:h.method,action:m},m,L))},currentTarget:h}]})}}for(var lm=0;lm<xe.length;lm++){var um=xe[lm],q1=um.toLowerCase(),H1=um[0].toUpperCase()+um.slice(1);Ee(q1,"on"+H1)}Ee(ie,"onAnimationEnd"),Ee(W,"onAnimationIteration"),Ee(fe,"onAnimationStart"),Ee("dblclick","onDoubleClick"),Ee("focusin","onFocus"),Ee("focusout","onBlur"),Ee(ye,"onTransitionRun"),Ee(Ae,"onTransitionStart"),Ee(we,"onTransitionCancel"),Ee(_e,"onTransitionEnd"),Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),Rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mu));function Uv(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var T=l.length-1;0<=T;T--){var R=l[T],L=R.instance,re=R.currentTarget;if(R=R.listener,L!==m&&h.isPropagationStopped())break e;m=R,h.currentTarget=re;try{m(h)}catch(he){Ve(he)}h.currentTarget=null,m=L}else for(T=0;T<l.length;T++){if(R=l[T],L=R.instance,re=R.currentTarget,R=R.listener,L!==m&&h.isPropagationStopped())break e;m=R,h.currentTarget=re;try{m(h)}catch(he){Ve(he)}h.currentTarget=null,m=L}}}}function _t(t,r){var a=r[Vi];a===void 0&&(a=r[Vi]=new Set);var l=t+"__bubble";a.has(l)||(zv(r,t,2,!1),a.add(l))}function cm(t,r,a){var l=0;r&&(l|=4),zv(a,t,l,r)}var yf="_reactListening"+Math.random().toString(36).slice(2);function fm(t){if(!t[yf]){t[yf]=!0,mi.forEach(function(a){a!=="selectionchange"&&(F1.has(a)||cm(a,!1,t),cm(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[yf]||(r[yf]=!0,cm("selectionchange",!1,r))}}function zv(t,r,a,l){switch(m_(r)){case 2:var h=vS;break;case 8:h=_S;break;default:h=Rm}a=h.bind(null,r,a,t),h=void 0,!Ds||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function hm(t,r,a,l,h){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var R=l.stateNode.containerInfo;if(R===h)break;if(T===4)for(T=l.return;T!==null;){var L=T.tag;if((L===3||L===4)&&T.stateNode.containerInfo===h)return;T=T.return}for(;R!==null;){if(T=wr(R),T===null)return;if(L=T.tag,L===5||L===6||L===26||L===27){l=m=T;continue e}R=R.parentNode}}l=l.return}Dr(function(){var re=m,he=pr(a),pe=[];e:{var se=ke.get(t);if(se!==void 0){var le=yi,Ue=t;switch(t){case"keypress":if(zi(a)===0)break e;case"keydown":case"keyup":le=Ms;break;case"focusin":Ue="focus",le=Ei;break;case"focusout":Ue="blur",le=Ei;break;case"beforeblur":case"afterblur":le=Ei;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=xs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=So;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=v;break;case ie:case W:case fe:le=Ao;break;case _e:le=I;break;case"scroll":case"scrollend":le=ns;break;case"wheel":le=ae;break;case"copy":case"cut":case"paste":le=qi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=bi;break;case"toggle":case"beforetoggle":le=nt}var $e=(r&4)!==0,Kt=!$e&&(t==="scroll"||t==="scrollend"),J=$e?se!==null?se+"Capture":null:se;$e=[];for(var Y=re,ne;Y!==null;){var me=Y;if(ne=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||ne===null||J===null||(me=gr(Y,J),me!=null&&$e.push(ku(Y,me,ne))),Kt)break;Y=Y.return}0<$e.length&&(se=new le(se,Ue,null,a,he),pe.push({event:se,listeners:$e}))}}if((r&7)===0){e:{if(se=t==="mouseover"||t==="pointerover",le=t==="mouseout"||t==="pointerout",se&&a!==Or&&(Ue=a.relatedTarget||a.fromElement)&&(wr(Ue)||Ue[Vn]))break e;if((le||se)&&(se=he.window===he?he:(se=he.ownerDocument)?se.defaultView||se.parentWindow:window,le?(Ue=a.relatedTarget||a.toElement,le=re,Ue=Ue?wr(Ue):null,Ue!==null&&(Kt=u(Ue),$e=Ue.tag,Ue!==Kt||$e!==5&&$e!==27&&$e!==6)&&(Ue=null)):(le=null,Ue=re),le!==Ue)){if($e=xs,me="onMouseLeave",J="onMouseEnter",Y="mouse",(t==="pointerout"||t==="pointerover")&&($e=bi,me="onPointerLeave",J="onPointerEnter",Y="pointer"),Kt=le==null?se:_n(le),ne=Ue==null?se:_n(Ue),se=new $e(me,Y+"leave",le,a,he),se.target=Kt,se.relatedTarget=ne,me=null,wr(he)===re&&($e=new $e(J,Y+"enter",Ue,a,he),$e.target=ne,$e.relatedTarget=Kt,me=$e),Kt=me,le&&Ue)t:{for($e=K1,J=le,Y=Ue,ne=0,me=J;me;me=$e(me))ne++;me=0;for(var Ge=Y;Ge;Ge=$e(Ge))me++;for(;0<ne-me;)J=$e(J),ne--;for(;0<me-ne;)Y=$e(Y),me--;for(;ne--;){if(J===Y||Y!==null&&J===Y.alternate){$e=J;break t}J=$e(J),Y=$e(Y)}$e=null}else $e=null;le!==null&&jv(pe,se,le,$e,!1),Ue!==null&&Kt!==null&&jv(pe,Kt,Ue,$e,!0)}}e:{if(se=re?_n(re):window,le=se.nodeName&&se.nodeName.toLowerCase(),le==="select"||le==="input"&&se.type==="file")var xt=Co;else if(al(se))if(Ti)xt=Ra;else{xt=Ps;var qe=Mc}else le=se.nodeName,!le||le.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?re&&pa(re.elementType)&&(xt=Co):xt=uu;if(xt&&(xt=xt(t,re))){lu(pe,xt,a,he);break e}qe&&qe(t,se,re),t==="focusout"&&re&&se.type==="number"&&re.memoizedProps.value!=null&&Os(se,"number",se.value)}switch(qe=re?_n(re):window,t){case"focusin":(al(qe)||qe.contentEditable==="true")&&(x=qe,q=re,Z=null);break;case"focusout":Z=q=x=null;break;case"mousedown":H=!0;break;case"contextmenu":case"mouseup":case"dragend":H=!1,B(pe,a,he);break;case"selectionchange":if(O)break;case"keydown":case"keyup":B(pe,a,he)}var ft;if(Rt)e:{switch(t){case"compositionstart":var bt="onCompositionStart";break e;case"compositionend":bt="onCompositionEnd";break e;case"compositionupdate":bt="onCompositionUpdate";break e}bt=void 0}else ks?ss(t,a)&&(bt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(bt="onCompositionStart");bt&&(Vr&&a.locale!=="ko"&&(ks||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&ks&&(ft=Ui()):(xr=he,ga="value"in xr?xr.value:xr.textContent,ks=!0)),qe=vf(re,bt),0<qe.length&&(bt=new Nr(bt,t,null,a,he),pe.push({event:bt,listeners:qe}),ft?bt.data=ft:(ft=Sa(a),ft!==null&&(bt.data=ft)))),(ft=kr?Dc(t,a):Kh(t,a))&&(bt=vf(re,"onBeforeInput"),0<bt.length&&(qe=new Nr("onBeforeInput","beforeinput",null,a,he),pe.push({event:qe,listeners:bt}),qe.data=ft)),B1(pe,t,re,a,he)}Uv(pe,r)})}function ku(t,r,a){return{instance:t,listener:r,currentTarget:a}}function vf(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=gr(t,a),h!=null&&l.unshift(ku(t,h,m)),h=gr(t,r),h!=null&&l.push(ku(t,h,m))),t.tag===3)return l;t=t.return}return[]}function K1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function jv(t,r,a,l,h){for(var m=r._reactName,T=[];a!==null&&a!==l;){var R=a,L=R.alternate,re=R.stateNode;if(R=R.tag,L!==null&&L===l)break;R!==5&&R!==26&&R!==27||re===null||(L=re,h?(re=gr(a,m),re!=null&&T.unshift(ku(a,re,L))):h||(re=gr(a,m),re!=null&&T.push(ku(a,re,L)))),a=a.return}T.length!==0&&t.push({event:r,listeners:T})}var G1=/\r\n?/g,Y1=/\u0000|\uFFFD/g;function Bv(t){return(typeof t=="string"?t:""+t).replace(G1,`
`).replace(Y1,"")}function qv(t,r){return r=Bv(r),Bv(t)===r}function Ft(t,r,a,l,h,m){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Qn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Qn(t,""+l);break;case"className":ir(t,"class",l);break;case"tabIndex":ir(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ir(t,a,l);break;case"style":ma(t,l,m);break;case"data":if(r!=="object"){ir(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Wr(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&Ft(t,r,"name",h.name,h,null),Ft(t,r,"formEncType",h.formEncType,h,null),Ft(t,r,"formMethod",h.formMethod,h,null),Ft(t,r,"formTarget",h.formTarget,h,null)):(Ft(t,r,"encType",h.encType,h,null),Ft(t,r,"method",h.method,h,null),Ft(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Wr(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=sr);break;case"onScroll":l!=null&&_t("scroll",t);break;case"onScrollEnd":l!=null&&_t("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Wr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":_t("beforetoggle",t),_t("toggle",t),lt(t,"popover",l);break;case"xlinkActuate":on(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":on(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":on(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":on(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":on(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":on(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":on(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":on(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":on(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":lt(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=sl.get(a)||a,lt(t,a,l))}}function dm(t,r,a,l,h,m){switch(a){case"style":ma(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Qn(t,l):(typeof l=="number"||typeof l=="bigint")&&Qn(t,""+l);break;case"onScroll":l!=null&&_t("scroll",t);break;case"onScrollEnd":l!=null&&_t("scrollend",t);break;case"onClick":l!=null&&(t.onclick=sr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wi.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),m=t[$t]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(r,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):lt(t,a,l)}}}function Zn(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",t),_t("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var T=a[m];if(T!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ft(t,r,m,T,a,null)}}h&&Ft(t,r,"srcSet",a.srcSet,a,null),l&&Ft(t,r,"src",a.src,a,null);return;case"input":_t("invalid",t);var R=m=T=h=null,L=null,re=null;for(l in a)if(a.hasOwnProperty(l)){var he=a[l];if(he!=null)switch(l){case"name":h=he;break;case"type":T=he;break;case"checked":L=he;break;case"defaultChecked":re=he;break;case"value":m=he;break;case"defaultValue":R=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(s(137,r));break;default:Ft(t,r,l,he,a,null)}}da(t,m,R,L,re,T,h,!1);return;case"select":_t("invalid",t),l=T=m=null;for(h in a)if(a.hasOwnProperty(h)&&(R=a[h],R!=null))switch(h){case"value":m=R;break;case"defaultValue":T=R;break;case"multiple":l=R;default:Ft(t,r,h,R,a,null)}r=m,a=T,t.multiple=!!l,r!=null?Jr(t,!!l,r,!1):a!=null&&Jr(t,!!l,a,!0);return;case"textarea":_t("invalid",t),m=h=l=null;for(T in a)if(a.hasOwnProperty(T)&&(R=a[T],R!=null))switch(T){case"value":l=R;break;case"defaultValue":h=R;break;case"children":m=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(s(91));break;default:Ft(t,r,T,R,a,null)}Zr(t,l,h,m);return;case"option":for(L in a)a.hasOwnProperty(L)&&(l=a[L],l!=null)&&(L==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":Ft(t,r,L,l,a,null));return;case"dialog":_t("beforetoggle",t),_t("toggle",t),_t("cancel",t),_t("close",t);break;case"iframe":case"object":_t("load",t);break;case"video":case"audio":for(l=0;l<Mu.length;l++)_t(Mu[l],t);break;case"image":_t("error",t),_t("load",t);break;case"details":_t("toggle",t);break;case"embed":case"source":case"link":_t("error",t),_t("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in a)if(a.hasOwnProperty(re)&&(l=a[re],l!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ft(t,r,re,l,a,null)}return;default:if(pa(r)){for(he in a)a.hasOwnProperty(he)&&(l=a[he],l!==void 0&&dm(t,r,he,l,a,void 0));return}}for(R in a)a.hasOwnProperty(R)&&(l=a[R],l!=null&&Ft(t,r,R,l,a,null))}function Q1(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,T=null,R=null,L=null,re=null,he=null;for(le in a){var pe=a[le];if(a.hasOwnProperty(le)&&pe!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":L=pe;default:l.hasOwnProperty(le)||Ft(t,r,le,null,l,pe)}}for(var se in l){var le=l[se];if(pe=a[se],l.hasOwnProperty(se)&&(le!=null||pe!=null))switch(se){case"type":m=le;break;case"name":h=le;break;case"checked":re=le;break;case"defaultChecked":he=le;break;case"value":T=le;break;case"defaultValue":R=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(s(137,r));break;default:le!==pe&&Ft(t,r,se,le,l,pe)}}Xr(t,T,R,L,re,he,m,h);return;case"select":le=T=R=se=null;for(m in a)if(L=a[m],a.hasOwnProperty(m)&&L!=null)switch(m){case"value":break;case"multiple":le=L;default:l.hasOwnProperty(m)||Ft(t,r,m,null,l,L)}for(h in l)if(m=l[h],L=a[h],l.hasOwnProperty(h)&&(m!=null||L!=null))switch(h){case"value":se=m;break;case"defaultValue":R=m;break;case"multiple":T=m;default:m!==L&&Ft(t,r,h,m,l,L)}r=R,a=T,l=le,se!=null?Jr(t,!!a,se,!1):!!l!=!!a&&(r!=null?Jr(t,!!a,r,!0):Jr(t,!!a,a?[]:"",!1));return;case"textarea":le=se=null;for(R in a)if(h=a[R],a.hasOwnProperty(R)&&h!=null&&!l.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Ft(t,r,R,null,l,h)}for(T in l)if(h=l[T],m=a[T],l.hasOwnProperty(T)&&(h!=null||m!=null))switch(T){case"value":se=h;break;case"defaultValue":le=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==m&&Ft(t,r,T,h,l,m)}To(t,se,le);return;case"option":for(var Ue in a)se=a[Ue],a.hasOwnProperty(Ue)&&se!=null&&!l.hasOwnProperty(Ue)&&(Ue==="selected"?t.selected=!1:Ft(t,r,Ue,null,l,se));for(L in l)se=l[L],le=a[L],l.hasOwnProperty(L)&&se!==le&&(se!=null||le!=null)&&(L==="selected"?t.selected=se&&typeof se!="function"&&typeof se!="symbol":Ft(t,r,L,se,l,le));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in a)se=a[$e],a.hasOwnProperty($e)&&se!=null&&!l.hasOwnProperty($e)&&Ft(t,r,$e,null,l,se);for(re in l)if(se=l[re],le=a[re],l.hasOwnProperty(re)&&se!==le&&(se!=null||le!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,r));break;default:Ft(t,r,re,se,l,le)}return;default:if(pa(r)){for(var Kt in a)se=a[Kt],a.hasOwnProperty(Kt)&&se!==void 0&&!l.hasOwnProperty(Kt)&&dm(t,r,Kt,void 0,l,se);for(he in l)se=l[he],le=a[he],!l.hasOwnProperty(he)||se===le||se===void 0&&le===void 0||dm(t,r,he,se,l,le);return}}for(var J in a)se=a[J],a.hasOwnProperty(J)&&se!=null&&!l.hasOwnProperty(J)&&Ft(t,r,J,null,l,se);for(pe in l)se=l[pe],le=a[pe],!l.hasOwnProperty(pe)||se===le||se==null&&le==null||Ft(t,r,pe,se,l,le)}function Hv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],m=h.transferSize,T=h.initiatorType,R=h.duration;if(m&&R&&Hv(T)){for(T=0,R=h.responseEnd,l+=1;l<a.length;l++){var L=a[l],re=L.startTime;if(re>R)break;var he=L.transferSize,pe=L.initiatorType;he&&Hv(pe)&&(L=L.responseEnd,T+=he*(L<R?1:(R-re)/(L-re)))}if(--l,r+=8*(m+T)/(h.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var mm=null,pm=null;function _f(t){return t.nodeType===9?t:t.ownerDocument}function Fv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kv(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function gm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ym=null;function X1(){var t=window.event;return t&&t.type==="popstate"?t===ym?!1:(ym=t,!0):(ym=null,!1)}var Gv=typeof setTimeout=="function"?setTimeout:void 0,J1=typeof clearTimeout=="function"?clearTimeout:void 0,Yv=typeof Promise=="function"?Promise:void 0,Z1=typeof queueMicrotask=="function"?queueMicrotask:typeof Yv<"u"?function(t){return Yv.resolve(null).then(t).catch(W1)}:Gv;function W1(t){setTimeout(function(){throw t})}function Fa(t){return t==="head"}function Qv(t,r){var a=r,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),Ml(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Vu(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Vu(a);for(var m=a.firstChild;m;){var T=m.nextSibling,R=m.nodeName;m[Bn]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=T}}else a==="body"&&Vu(t.ownerDocument.body);a=h}while(a);Ml(r)}function $v(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function vm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":vm(a),Is(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function eS(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Bn])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Ii(t.nextSibling),t===null)break}return null}function tS(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Ii(t.nextSibling),t===null))return null;return t}function Xv(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Ii(t.nextSibling),t===null))return null;return t}function _m(t){return t.data==="$?"||t.data==="$~"}function Em(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function nS(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Ii(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var bm=null;function Jv(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Ii(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function Zv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function Wv(t,r,a){switch(r=_f(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Vu(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Is(t)}var Oi=new Map,e_=new Set;function Ef(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Js=Ie.d;Ie.d={f:rS,r:iS,D:sS,C:aS,L:oS,m:lS,X:cS,S:uS,M:fS};function rS(){var t=Js.f(),r=ff();return t||r}function iS(t){var r=It(t);r!==null&&r.tag===5&&r.type==="form"?yy(r):Js.r(t)}var Dl=typeof document>"u"?null:document;function t_(t,r,a){var l=Dl;if(l&&typeof r=="string"&&r){var h=Rn(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),e_.has(h)||(e_.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),Zn(r,"link",t),an(r),l.head.appendChild(r)))}}function sS(t){Js.D(t),t_("dns-prefetch",t,null)}function aS(t,r){Js.C(t,r),t_("preconnect",t,r)}function oS(t,r,a){Js.L(t,r,a);var l=Dl;if(l&&t&&r){var h='link[rel="preload"][as="'+Rn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Rn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Rn(a.imageSizes)+'"]')):h+='[href="'+Rn(t)+'"]';var m=h;switch(r){case"style":m=xl(t);break;case"script":m=Nl(t)}Oi.has(m)||(t=D({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Oi.set(m,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(Pu(m))||r==="script"&&l.querySelector(Lu(m))||(r=l.createElement("link"),Zn(r,"link",t),an(r),l.head.appendChild(r)))}}function lS(t,r){Js.m(t,r);var a=Dl;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+Rn(l)+'"][href="'+Rn(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Nl(t)}if(!Oi.has(m)&&(t=D({rel:"modulepreload",href:t},r),Oi.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Lu(m)))return}l=a.createElement("link"),Zn(l,"link",t),an(l),a.head.appendChild(l)}}}function uS(t,r,a){Js.S(t,r,a);var l=Dl;if(l&&t){var h=wn(l).hoistableStyles,m=xl(t);r=r||"default";var T=h.get(m);if(!T){var R={loading:0,preload:null};if(T=l.querySelector(Pu(m)))R.loading=5;else{t=D({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Oi.get(m))&&Tm(t,a);var L=T=l.createElement("link");an(L),Zn(L,"link",t),L._p=new Promise(function(re,he){L.onload=re,L.onerror=he}),L.addEventListener("load",function(){R.loading|=1}),L.addEventListener("error",function(){R.loading|=2}),R.loading|=4,bf(T,r,l)}T={type:"stylesheet",instance:T,count:1,state:R},h.set(m,T)}}}function cS(t,r){Js.X(t,r);var a=Dl;if(a&&t){var l=wn(a).hoistableScripts,h=Nl(t),m=l.get(h);m||(m=a.querySelector(Lu(h)),m||(t=D({src:t,async:!0},r),(r=Oi.get(h))&&Sm(t,r),m=a.createElement("script"),an(m),Zn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function fS(t,r){Js.M(t,r);var a=Dl;if(a&&t){var l=wn(a).hoistableScripts,h=Nl(t),m=l.get(h);m||(m=a.querySelector(Lu(h)),m||(t=D({src:t,async:!0,type:"module"},r),(r=Oi.get(h))&&Sm(t,r),m=a.createElement("script"),an(m),Zn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function n_(t,r,a,l){var h=(h=tt.current)?Ef(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=xl(a.href),a=wn(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=xl(a.href);var m=wn(h).hoistableStyles,T=m.get(t);if(T||(h=h.ownerDocument||h,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,T),(m=h.querySelector(Pu(t)))&&!m._p&&(T.instance=m,T.state.loading=5),Oi.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Oi.set(t,a),m||hS(h,t,a,T.state))),r&&l===null)throw Error(s(528,""));return T}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Nl(a),a=wn(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function xl(t){return'href="'+Rn(t)+'"'}function Pu(t){return'link[rel="stylesheet"]['+t+"]"}function r_(t){return D({},t,{"data-precedence":t.precedence,precedence:null})}function hS(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Zn(r,"link",a),an(r),t.head.appendChild(r))}function Nl(t){return'[src="'+Rn(t)+'"]'}function Lu(t){return"script[async]"+t}function i_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Rn(a.href)+'"]');if(l)return r.instance=l,an(l),l;var h=D({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),an(l),Zn(l,"style",h),bf(l,a.precedence,t),r.instance=l;case"stylesheet":h=xl(a.href);var m=t.querySelector(Pu(h));if(m)return r.state.loading|=4,r.instance=m,an(m),m;l=r_(a),(h=Oi.get(h))&&Tm(l,h),m=(t.ownerDocument||t).createElement("link"),an(m);var T=m;return T._p=new Promise(function(R,L){T.onload=R,T.onerror=L}),Zn(m,"link",l),r.state.loading|=4,bf(m,a.precedence,t),r.instance=m;case"script":return m=Nl(a.src),(h=t.querySelector(Lu(m)))?(r.instance=h,an(h),h):(l=a,(h=Oi.get(m))&&(l=D({},a),Sm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),an(h),Zn(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,bf(l,a.precedence,t));return r.instance}function bf(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,T=0;T<l.length;T++){var R=l[T];if(R.dataset.precedence===r)m=R;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function Tm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Sm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Tf=null;function s_(t,r,a){if(Tf===null){var l=new Map,h=Tf=new Map;h.set(a,l)}else h=Tf,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Bn]||m[Lt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var T=m.getAttribute(r)||"";T=t+T;var R=l.get(T);R?R.push(m):l.set(T,[m])}}return l}function a_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function dS(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function o_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function mS(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=xl(l.href),m=r.querySelector(Pu(h));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Sf.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=m,an(m);return}m=r.ownerDocument||r,l=r_(l),(h=Oi.get(h))&&Tm(l,h),m=m.createElement("link"),an(m);var T=m;T._p=new Promise(function(R,L){T.onload=R,T.onerror=L}),Zn(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Sf.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var Am=0;function pS(t,r){return t.stylesheets&&t.count===0&&wf(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&wf(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&Am===0&&(Am=62500*$1());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&wf(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Am?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Sf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Af=null;function wf(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Af=new Map,r.forEach(gS,t),Af=null,Sf.call(t))}function gS(t,r){if(!(r.state.loading&4)){var a=Af.get(t);if(a)var l=a.get(null);else{a=new Map,Af.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var T=h[m];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),l=T)}l&&a.set(null,l)}h=r.instance,T=h.getAttribute("data-precedence"),m=a.get(T)||l,m===l&&a.set(null,h),a.set(T,h),this.count++,l=Sf.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Uu={$$typeof:Le,Provider:null,Consumer:null,_currentValue:je,_currentValue2:je,_threadCount:0};function yS(t,r,a,l,h,m,T,R,L){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yn(0),this.hiddenUpdates=Yn(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function l_(t,r,a,l,h,m,T,R,L,re,he,pe){return t=new yS(t,r,a,T,L,re,he,pe,R),r=1,m===!0&&(r|=24),m=ri(3,null,null,r),t.current=m,m.stateNode=t,r=rd(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:r},od(m),t}function u_(t){return t?(t=ul,t):ul}function c_(t,r,a,l,h,m){h=u_(h),l.context===null?l.context=h:l.pendingContext=h,l=Ma(r),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=ka(t,l,r),a!==null&&(jr(a,t,r),gu(a,t,r))}function f_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function wm(t,r){f_(t,r),(t=t.alternate)&&f_(t,r)}function h_(t){if(t.tag===13||t.tag===31){var r=Vt(t,67108864);r!==null&&jr(r,t,67108864),wm(t,67108864)}}function d_(t){if(t.tag===13||t.tag===31){var r=li();r=Rs(r);var a=Vt(t,r);a!==null&&jr(a,t,r),wm(t,r)}}var Rf=!0;function vS(t,r,a,l){var h=ue.T;ue.T=null;var m=Ie.p;try{Ie.p=2,Rm(t,r,a,l)}finally{Ie.p=m,ue.T=h}}function _S(t,r,a,l){var h=ue.T;ue.T=null;var m=Ie.p;try{Ie.p=8,Rm(t,r,a,l)}finally{Ie.p=m,ue.T=h}}function Rm(t,r,a,l){if(Rf){var h=Cm(l);if(h===null)hm(t,r,l,Cf,a),p_(t,l);else if(bS(h,t,r,a,l))l.stopPropagation();else if(p_(t,l),r&4&&-1<ES.indexOf(t)){for(;h!==null;){var m=It(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var T=Tr(m.pendingLanes);if(T!==0){var R=m;for(R.pendingLanes|=2,R.entangledLanes|=2;T;){var L=1<<31-De(T);R.entanglements[1]|=L,T&=~L}fs(m),(Mt&6)===0&&(uf=jn()+500,Nu(0))}}break;case 31:case 13:R=Vt(m,2),R!==null&&jr(R,m,2),ff(),wm(m,2)}if(m=Cm(l),m===null&&hm(t,r,l,Cf,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else hm(t,r,l,null,a)}}function Cm(t){return t=pr(t),Im(t)}var Cf=null;function Im(t){if(Cf=null,t=wr(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===31){if(t=y(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Cf=t,null}function m_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Hr()){case kn:return 2;case Fr:return 8;case fi:case Ss:return 32;case ca:return 268435456;default:return 32}default:return 32}}var Om=!1,Ka=null,Ga=null,Ya=null,zu=new Map,ju=new Map,Qa=[],ES="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function p_(t,r){switch(t){case"focusin":case"focusout":Ka=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":zu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(r.pointerId)}}function Bu(t,r,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},r!==null&&(r=It(r),r!==null&&h_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function bS(t,r,a,l,h){switch(r){case"focusin":return Ka=Bu(Ka,t,r,a,l,h),!0;case"dragenter":return Ga=Bu(Ga,t,r,a,l,h),!0;case"mouseover":return Ya=Bu(Ya,t,r,a,l,h),!0;case"pointerover":var m=h.pointerId;return zu.set(m,Bu(zu.get(m)||null,t,r,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,ju.set(m,Bu(ju.get(m)||null,t,r,a,l,h)),!0}return!1}function g_(t){var r=wr(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,rr(t.priority,function(){d_(a)});return}}else if(r===31){if(r=y(a),r!==null){t.blockedOn=r,rr(t.priority,function(){d_(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function If(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Cm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Or=l,a.target.dispatchEvent(l),Or=null}else return r=It(a),r!==null&&h_(r),t.blockedOn=a,!1;r.shift()}return!0}function y_(t,r,a){If(t)&&a.delete(r)}function TS(){Om=!1,Ka!==null&&If(Ka)&&(Ka=null),Ga!==null&&If(Ga)&&(Ga=null),Ya!==null&&If(Ya)&&(Ya=null),zu.forEach(y_),ju.forEach(y_)}function Of(t,r){t.blockedOn===r&&(t.blockedOn=null,Om||(Om=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,TS)))}var Df=null;function v_(t){Df!==t&&(Df=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Df===t&&(Df=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(Im(l||a)===null)continue;break}var m=It(a);m!==null&&(t.splice(r,3),r-=3,Cd(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Ml(t){function r(L){return Of(L,t)}Ka!==null&&Of(Ka,t),Ga!==null&&Of(Ga,t),Ya!==null&&Of(Ya,t),zu.forEach(r),ju.forEach(r);for(var a=0;a<Qa.length;a++){var l=Qa[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Qa.length&&(a=Qa[0],a.blockedOn===null);)g_(a),a.blockedOn===null&&Qa.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],T=h[$t]||null;if(typeof m=="function")T||v_(a);else if(T){var R=null;if(m&&m.hasAttribute("formAction")){if(h=m,T=m[$t]||null)R=T.formAction;else if(Im(h)!==null)continue}else R=T.action;typeof R=="function"?a[l+1]=R:(a.splice(l,3),l-=3),v_(a)}}}function __(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(T){return h=T})},focusReset:"manual",scroll:"manual"})}function r(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),h!==null&&(h(),h=null)}}}function Dm(t){this._internalRoot=t}xf.prototype.render=Dm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=li();c_(a,l,t,r,null,null)},xf.prototype.unmount=Dm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;c_(t.current,2,null,t,null,null),ff(),r[Vn]=null}};function xf(t){this._internalRoot=t}xf.prototype.unstable_scheduleHydration=function(t){if(t){var r=Cs();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Qa.length&&r!==0&&r<Qa[a].priority;a++);Qa.splice(a,0,t),a===0&&g_(t)}};var E_=e.version;if(E_!=="19.2.4")throw Error(s(527,E_,"19.2.4"));Ie.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=b(r),t=t!==null?C(t):null,t=t===null?null:t.stateNode,t};var SS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ue,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nf.isDisabled&&Nf.supportsFiber)try{nr=Nf.inject(SS),yn=Nf}catch{}}return Hu.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=Cy,m=Iy,T=Oy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError)),r=l_(t,1,!1,null,null,a,l,null,h,m,T,__),t[Vn]=r.current,fm(t),new Dm(r)},Hu.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",m=Cy,T=Iy,R=Oy,L=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.formState!==void 0&&(L=a.formState)),r=l_(t,1,!0,r,a??null,l,h,L,m,T,R,__),r.context=u_(null),a=r.current,l=li(),l=Rs(l),h=Ma(l),h.callback=null,ka(a,h,l),a=l,r.current.lanes=a,Sr(r,a),fs(r),t[Vn]=r.current,fm(t),new xf(r)},Hu.version="19.2.4",Hu}var D_;function kS(){if(D_)return Mm.exports;D_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Mm.exports=MS(),Mm.exports}var VS=kS();const PS=Rp(VS),LS="modulepreload",US=function(i){return"/public/flashcards/"+i},x_={},Zl=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){let E=function(b){return Promise.all(b.map(C=>Promise.resolve(C).then(D=>({status:"fulfilled",value:D}),D=>({status:"rejected",reason:D}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),y=d?.nonce||d?.getAttribute("nonce");o=E(n.map(b=>{if(b=US(b),b in x_)return;x_[b]=!0;const C=b.endsWith(".css"),D=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${D}`))return;const N=document.createElement("link");if(N.rel=C?"stylesheet":LS,C||(N.as="script"),N.crossOrigin="",N.href=b,y&&N.setAttribute("nonce",y),document.head.appendChild(N),C)return new Promise((X,de)=>{N.addEventListener("load",X),N.addEventListener("error",()=>de(new Error(`Unable to preload CSS for ${b}`)))})}))}function u(d){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=d,window.dispatchEvent(y),!y.defaultPrevented)throw d}return o.then(d=>{for(const y of d||[])y.status==="rejected"&&u(y.reason);return e().catch(u)})};var Kf={exports:{}},zS=Kf.exports,N_;function jS(){return N_||(N_=1,(function(i,e){((n,s)=>{i.exports=s()})(zS,function(){var n=function(f,p){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(g,_){g.__proto__=_}:function(g,_){for(var A in _)Object.prototype.hasOwnProperty.call(_,A)&&(g[A]=_[A])}))(f,p)},s=function(){return(s=Object.assign||function(f){for(var p,g=1,_=arguments.length;g<_;g++)for(var A in p=arguments[g])Object.prototype.hasOwnProperty.call(p,A)&&(f[A]=p[A]);return f}).apply(this,arguments)};function o(f,p,g){for(var _,A=0,w=p.length;A<w;A++)!_&&A in p||((_=_||Array.prototype.slice.call(p,0,A))[A]=p[A]);return f.concat(_||Array.prototype.slice.call(p))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:wS,d=Object.keys,y=Array.isArray;function E(f,p){return typeof p=="object"&&d(p).forEach(function(g){f[g]=p[g]}),f}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var b=Object.getPrototypeOf,C={}.hasOwnProperty;function D(f,p){return C.call(f,p)}function N(f,p){typeof p=="function"&&(p=p(b(f))),(typeof Reflect>"u"?d:Reflect.ownKeys)(p).forEach(function(g){de(f,g,p[g])})}var X=Object.defineProperty;function de(f,p,g,_){X(f,p,E(g&&D(g,"get")&&typeof g.get=="function"?{get:g.get,set:g.set,configurable:!0}:{value:g,configurable:!0,writable:!0},_))}function be(f){return{from:function(p){return f.prototype=Object.create(p.prototype),de(f.prototype,"constructor",f),{extend:N.bind(null,f.prototype)}}}}var Re=Object.getOwnPropertyDescriptor,He=[].slice;function Ye(f,p,g){return He.call(f,p,g)}function Le(f,p){return p(f)}function it(f){if(!f)throw new Error("Assertion Failed")}function ht(f){u.setImmediate?setImmediate(f):setTimeout(f,0)}function et(f,p){if(typeof p=="string"&&D(f,p))return f[p];if(!p)return f;if(typeof p!="string"){for(var g=[],_=0,A=p.length;_<A;++_){var w=et(f,p[_]);g.push(w)}return g}var O,x=p.indexOf(".");return x===-1||(O=f[p.substr(0,x)])==null?void 0:et(O,p.substr(x+1))}function V(f,p,g){if(f&&p!==void 0&&!("isFrozen"in Object&&Object.isFrozen(f)))if(typeof p!="string"&&"length"in p){it(typeof g!="string"&&"length"in g);for(var _=0,A=p.length;_<A;++_)V(f,p[_],g[_])}else{var w,O,x=p.indexOf(".");x!==-1?(w=p.substr(0,x),(x=p.substr(x+1))===""?g===void 0?y(f)&&!isNaN(parseInt(w))?f.splice(w,1):delete f[w]:f[w]=g:V(O=(O=f[w])&&D(f,w)?O:f[w]={},x,g)):g===void 0?y(f)&&!isNaN(parseInt(p))?f.splice(p,1):delete f[p]:f[p]=g}}function k(f){var p,g={};for(p in f)D(f,p)&&(g[p]=f[p]);return g}var P=[].concat;function $(f){return P.apply([],f)}var ce="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat($([8,16,32,64].map(function(f){return["Int","Uint","Float"].map(function(p){return p+f+"Array"})}))).filter(function(f){return u[f]}),z=new Set(ce.map(function(f){return u[f]})),U=null;function M(f){return U=new WeakMap,f=(function p(g){if(!g||typeof g!="object")return g;var _=U.get(g);if(_)return _;if(y(g)){_=[],U.set(g,_);for(var A=0,w=g.length;A<w;++A)_.push(p(g[A]))}else if(z.has(g.constructor))_=g;else{var O,x=b(g);for(O in _=x===Object.prototype?{}:Object.create(x),U.set(g,_),g)D(g,O)&&(_[O]=p(g[O]))}return _})(f),U=null,f}var dt={}.toString;function Gt(f){return dt.call(f).slice(8,-1)}var ue=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ie=typeof ue=="symbol"?function(f){var p;return f!=null&&(p=f[ue])&&p.apply(f)}:function(){return null};function je(f,p){p=f.indexOf(p),0<=p&&f.splice(p,1)}var ze={};function Me(f){var p,g,_,A;if(arguments.length===1){if(y(f))return f.slice();if(this===ze&&typeof f=="string")return[f];if(A=Ie(f))for(g=[];!(_=A.next()).done;)g.push(_.value);else{if(f==null)return[f];if(typeof(p=f.length)!="number")return[f];for(g=new Array(p);p--;)g[p]=f[p]}}else for(p=arguments.length,g=new Array(p);p--;)g[p]=arguments[p];return g}var j=typeof Symbol<"u"?function(f){return f[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ce=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],kn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ce),Oe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ne(f,p){this.name=f,this.message=p}function Xe(f,p){return f+". Errors: "+Object.keys(p).map(function(g){return p[g].toString()}).filter(function(g,_,A){return A.indexOf(g)===_}).join(`
`)}function tt(f,p,g,_){this.failures=p,this.failedKeys=_,this.successCount=g,this.message=Xe(f,p)}function ct(f,p){this.name="BulkError",this.failures=Object.keys(p).map(function(g){return p[g]}),this.failuresByPos=p,this.message=Xe(f,this.failures)}be(Ne).from(Error).extend({toString:function(){return this.name+": "+this.message}}),be(tt).from(Ne),be(ct).from(Ne);var nn=kn.reduce(function(f,p){return f[p]=p+"Error",f},{}),Qt=Ne,Be=kn.reduce(function(f,p){var g=p+"Error";function _(A,w){this.name=g,A?typeof A=="string"?(this.message="".concat(A).concat(w?`
 `+w:""),this.inner=w||null):typeof A=="object"&&(this.message="".concat(A.name," ").concat(A.message),this.inner=A):(this.message=Oe[p]||g,this.inner=null)}return be(_).from(Qt),f[p]=_,f},{}),bs=(Be.Syntax=SyntaxError,Be.Type=TypeError,Be.Range=RangeError,ce.reduce(function(f,p){return f[p+"Error"]=Be[p],f},{}));ce=kn.reduce(function(f,p){return["Syntax","Type","Range"].indexOf(p)===-1&&(f[p+"Error"]=Be[p]),f},{});function wt(){}function ui(f){return f}function ci(f,p){return f==null||f===ui?p:function(g){return p(f(g))}}function qr(f,p){return function(){f.apply(this,arguments),p.apply(this,arguments)}}function Ts(f,p){return f===wt?p:function(){var g=f.apply(this,arguments),_=(g!==void 0&&(arguments[0]=g),this.onsuccess),A=this.onerror,w=(this.onsuccess=null,this.onerror=null,p.apply(this,arguments));return _&&(this.onsuccess=this.onsuccess?qr(_,this.onsuccess):_),A&&(this.onerror=this.onerror?qr(A,this.onerror):A),w!==void 0?w:g}}function yo(f,p){return f===wt?p:function(){f.apply(this,arguments);var g=this.onsuccess,_=this.onerror;this.onsuccess=this.onerror=null,p.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?qr(g,this.onsuccess):g),_&&(this.onerror=this.onerror?qr(_,this.onerror):_)}}function vo(f,p){return f===wt?p:function(A){var _=f.apply(this,arguments),A=(E(A,_),this.onsuccess),w=this.onerror,O=(this.onsuccess=null,this.onerror=null,p.apply(this,arguments));return A&&(this.onsuccess=this.onsuccess?qr(A,this.onsuccess):A),w&&(this.onerror=this.onerror?qr(w,this.onerror):w),_===void 0?O===void 0?void 0:O:E(_,O)}}function dn(f,p){return f===wt?p:function(){return p.apply(this,arguments)!==!1&&f.apply(this,arguments)}}function rn(f,p){return f===wt?p:function(){var g=f.apply(this,arguments);if(g&&typeof g.then=="function"){for(var _=this,A=arguments.length,w=new Array(A);A--;)w[A]=arguments[A];return g.then(function(){return p.apply(_,w)})}return p.apply(this,arguments)}}ce.ModifyError=tt,ce.DexieError=Ne,ce.BulkError=ct;var Mn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function nl(f){Mn=f}var Ji={},jn=100,Hr=typeof Promise>"u"?[]:(kn=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[Hr=crypto.subtle.digest("SHA-512",new Uint8Array([0])),b(Hr),kn]:[kn,b(kn),kn]),kn=Hr[0],Vs=Hr[1],Vs=Vs&&Vs.then,Fr=kn&&kn.constructor,fi=!!Hr[2],Ss=function(f,p){Zi.push([f,p]),As&&(queueMicrotask(rl),As=!1)},ca=!0,As=!0,hi=[],nr=[],yn=ui,vn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:wt,pgp:!1,env:{},finalize:wt},De=vn,Zi=[],br=0,ws=[];function Se(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var p=this._PSD=De;if(typeof f!="function"){if(f!==Ji)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Tr(this,this._value)}else this._state=null,this._value=null,++p.ref,(function g(_,A){try{A(function(w){if(_._state===null){if(w===_)throw new TypeError("A promise cannot be resolved with itself.");var O=_._lib&&Yn();w&&typeof w.then=="function"?g(_,function(x,q){w instanceof Se?w._then(x,q):w.then(x,q)}):(_._state=!0,_._value=w,Kr(_)),O&&Sr()}},Tr.bind(null,_))}catch(w){Tr(_,w)}})(this,f)}var ki={get:function(){var f=De,p=rr;function g(_,A){var w=this,O=!f.global&&(f!==De||p!==rr),x=O&&!Vn(),q=new Se(function(Z,H){mr(w,new sn(Is(_,f,O,x),Is(A,f,O,x),Z,H,f))});return this._consoleTask&&(q._consoleTask=this._consoleTask),q}return g.prototype=Ji,g},set:function(f){de(this,"then",f&&f.prototype===Ji?ki:{get:function(){return f},set:ki.set})}};function sn(f,p,g,_,A){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof p=="function"?p:null,this.resolve=g,this.reject=_,this.psd=A}function Tr(f,p){var g,_;nr.push(p),f._state===null&&(g=f._lib&&Yn(),p=yn(p),f._state=!1,f._value=p,_=f,hi.some(function(A){return A._value===_._value})||hi.push(_),Kr(f),g)&&Sr()}function Kr(f){var p=f._listeners;f._listeners=[];for(var g=0,_=p.length;g<_;++g)mr(f,p[g]);var A=f._PSD;--A.ref||A.finalize(),br===0&&(++br,Ss(function(){--br==0&&_o()},[]))}function mr(f,p){if(f._state===null)f._listeners.push(p);else{var g=f._state?p.onFulfilled:p.onRejected;if(g===null)return(f._state?p.resolve:p.reject)(f._value);++p.psd.ref,++br,Ss(au,[g,f,p])}}function au(f,p,g){try{var _,A=p._value;!p._state&&nr.length&&(nr=[]),_=Mn&&p._consoleTask?p._consoleTask.run(function(){return f(A)}):f(A),p._state||nr.indexOf(A)!==-1||(w=>{for(var O=hi.length;O;)if(hi[--O]._value===w._value)return hi.splice(O,1)})(p),g.resolve(_)}catch(w){g.reject(w)}finally{--br==0&&_o(),--g.psd.ref||g.psd.finalize()}}function rl(){Bn(vn,function(){Yn()&&Sr()})}function Yn(){var f=ca;return As=ca=!1,f}function Sr(){var f,p,g;do for(;0<Zi.length;)for(f=Zi,Zi=[],g=f.length,p=0;p<g;++p){var _=f[p];_[0].apply(null,_[1])}while(0<Zi.length);As=ca=!0}function _o(){for(var f=hi,p=(hi=[],f.forEach(function(_){_._PSD.onunhandled.call(null,_._value,_)}),ws.slice(0)),g=p.length;g;)p[--g]()}function di(f){return new Se(Ji,!1,f)}function kt(f,p){var g=De;return function(){var _=Yn(),A=De;try{return Yr(g,!0),f.apply(this,arguments)}catch(w){p&&p(w)}finally{Yr(A,!1),_&&Sr()}}}N(Se.prototype,{then:ki,_then:function(f,p){mr(this,new sn(null,null,f,p,De))},catch:function(f){var p,g;return arguments.length===1?this.then(null,f):(p=f,g=arguments[1],typeof p=="function"?this.then(null,function(_){return(_ instanceof p?g:di)(_)}):this.then(null,function(_){return(_&&_.name===p?g:di)(_)}))},finally:function(f){return this.then(function(p){return Se.resolve(f()).then(function(){return p})},function(p){return Se.resolve(f()).then(function(){return di(p)})})},timeout:function(f,p){var g=this;return f<1/0?new Se(function(_,A){var w=setTimeout(function(){return A(new Be.Timeout(p))},f);g.then(_,A).finally(clearTimeout.bind(null,w))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&de(Se.prototype,Symbol.toStringTag,"Dexie.Promise"),vn.env=Eo(),N(Se,{all:function(){var f=Me.apply(null,arguments).map(Vi);return new Se(function(p,g){f.length===0&&p([]);var _=f.length;f.forEach(function(A,w){return Se.resolve(A).then(function(O){f[w]=O,--_||p(f)},g)})})},resolve:function(f){return f instanceof Se?f:f&&typeof f.then=="function"?new Se(function(p,g){f.then(p,g)}):new Se(Ji,!0,f)},reject:di,race:function(){var f=Me.apply(null,arguments).map(Vi);return new Se(function(p,g){f.map(function(_){return Se.resolve(_).then(p,g)})})},PSD:{get:function(){return De},set:function(f){return De=f}},totalEchoes:{get:function(){return rr}},newPSD:Lt,usePSD:Bn,scheduler:{get:function(){return Ss},set:function(f){Ss=f}},rejectionMapper:{get:function(){return yn},set:function(f){yn=f}},follow:function(f,p){return new Se(function(g,_){return Lt(function(A,w){var O=De;O.unhandleds=[],O.onunhandled=w,O.finalize=qr(function(){var x,q=this;x=function(){q.unhandleds.length===0?A():w(q.unhandleds[0])},ws.push(function Z(){x(),ws.splice(ws.indexOf(Z),1)}),++br,Ss(function(){--br==0&&_o()},[])},O.finalize),f()},p,g,_)})}}),Fr&&(Fr.allSettled&&de(Se,"allSettled",function(){var f=Me.apply(null,arguments).map(Vi);return new Se(function(p){f.length===0&&p([]);var g=f.length,_=new Array(g);f.forEach(function(A,w){return Se.resolve(A).then(function(O){return _[w]={status:"fulfilled",value:O}},function(O){return _[w]={status:"rejected",reason:O}}).then(function(){return--g||p(_)})})})}),Fr.any&&typeof AggregateError<"u"&&de(Se,"any",function(){var f=Me.apply(null,arguments).map(Vi);return new Se(function(p,g){f.length===0&&g(new AggregateError([]));var _=f.length,A=new Array(_);f.forEach(function(w,O){return Se.resolve(w).then(function(x){return p(x)},function(x){A[O]=x,--_||g(new AggregateError(A))})})})}),Fr.withResolvers)&&(Se.withResolvers=Fr.withResolvers);var en={awaits:0,echoes:0,id:0},Rs=0,Ar=[],Cs=0,rr=0,Gr=0;function Lt(f,O,g,_){var A=De,w=Object.create(A),O=(w.parent=A,w.ref=0,w.global=!1,w.id=++Gr,vn.env,w.env=fi?{Promise:Se,PromiseProp:{value:Se,configurable:!0,writable:!0},all:Se.all,race:Se.race,allSettled:Se.allSettled,any:Se.any,resolve:Se.resolve,reject:Se.reject}:{},O&&E(w,O),++A.ref,w.finalize=function(){--this.parent.ref||this.parent.finalize()},Bn(w,f,g,_));return w.ref===0&&w.finalize(),O}function $t(){return en.id||(en.id=++Rs),++en.awaits,en.echoes+=jn,en.id}function Vn(){return!!en.awaits&&(--en.awaits==0&&(en.id=0),en.echoes=en.awaits*jn,!0)}function Vi(f){return en.echoes&&f&&f.constructor===Fr?($t(),f.then(function(p){return Vn(),p},function(p){return Vn(),It(p)})):f}function ou(){var f=Ar[Ar.length-1];Ar.pop(),Yr(f,!1)}function Yr(f,p){var g,_,A=De;(p?!en.echoes||Cs++&&f===De:!Cs||--Cs&&f===De)||queueMicrotask(p?(function(w){++rr,en.echoes&&--en.echoes!=0||(en.echoes=en.awaits=en.id=0),Ar.push(De),Yr(w,!0)}).bind(null,f):ou),f!==De&&(De=f,A===vn&&(vn.env=Eo()),fi)&&(g=vn.env.Promise,_=f.env,A.global||f.global)&&(Object.defineProperty(u,"Promise",_.PromiseProp),g.all=_.all,g.race=_.race,g.resolve=_.resolve,g.reject=_.reject,_.allSettled&&(g.allSettled=_.allSettled),_.any)&&(g.any=_.any)}function Eo(){var f=u.Promise;return fi?{Promise:f,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:f.all,race:f.race,allSettled:f.allSettled,any:f.any,resolve:f.resolve,reject:f.reject}:{}}function Bn(f,p,g,_,A){var w=De;try{return Yr(f,!0),p(g,_,A)}finally{Yr(w,!1)}}function Is(f,p,g,_){return typeof f!="function"?f:function(){var A=De;g&&$t(),Yr(p,!0);try{return f.apply(this,arguments)}finally{Yr(A,!1),_&&queueMicrotask(Vn)}}}function wr(f){Promise===Fr&&en.echoes===0?Cs===0?f():enqueueNativeMicroTask(f):setTimeout(f,0)}(""+Vs).indexOf("[native code]")===-1&&($t=Vn=wt);var It=Se.reject,_n="",wn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",an="String expected.",mi=[],Wi="__dbnames",Rr="readonly",Cr="readwrite";function Qr(f,p){return f?p?function(){return f.apply(this,arguments)&&p.apply(this,arguments)}:f:p}var fa={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function es(f){return typeof f!="string"||/\./.test(f)?function(p){return p}:function(p){return p[f]===void 0&&f in p&&delete(p=M(p))[f],p}}function bo(){throw Be.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function lt(f,p){try{var g=ir(f),_=ir(p);if(g!==_)return g==="Array"?1:_==="Array"?-1:g==="binary"?1:_==="binary"?-1:g==="string"?1:_==="string"?-1:g==="Date"?1:_!=="Date"?NaN:-1;switch(g){case"number":case"Date":case"string":return p<f?1:f<p?-1:0;case"binary":for(var A=on(f),w=on(p),O=A.length,x=w.length,q=O<x?O:x,Z=0;Z<q;++Z)if(A[Z]!==w[Z])return A[Z]<w[Z]?-1:1;return O===x?0:O<x?-1:1;case"Array":for(var H=f,B=p,G=H.length,Q=B.length,F=G<Q?G:Q,K=0;K<F;++K){var ee=lt(H[K],B[K]);if(ee!==0)return ee}return G===Q?0:G<Q?-1:1}}catch{}return NaN}function ir(f){var p=typeof f;return p=="object"&&(ArrayBuffer.isView(f)||(p=Gt(f))==="ArrayBuffer")?"binary":p}function on(f){return f instanceof Uint8Array?f:ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(f)}function ln(f,p,g){var _=f.schema.yProps;return _?(p&&0<g.numFailures&&(p=p.filter(function(A,w){return!g.failures[w]})),Promise.all(_.map(function(A){return A=A.updatesTable,p?f.db.table(A).where("k").anyOf(p).delete():f.db.table(A).clear()})).then(function(){return g})):g}ha.prototype.execute=function(f){var p=this["@@propmod"];if(p.add!==void 0){var g=p.add;if(y(g))return o(o([],y(f)?f:[],!0),g).sort();if(typeof g=="number")return(Number(f)||0)+g;if(typeof g=="bigint")try{return BigInt(f)+g}catch{return BigInt(0)+g}throw new TypeError("Invalid term ".concat(g))}if(p.remove!==void 0){var _=p.remove;if(y(_))return y(f)?f.filter(function(A){return!_.includes(A)}).sort():[];if(typeof _=="number")return Number(f)-_;if(typeof _=="bigint")try{return BigInt(f)-_}catch{return BigInt(0)-_}throw new TypeError("Invalid subtrahend ".concat(_))}return g=(g=p.replacePrefix)==null?void 0:g[0],g&&typeof f=="string"&&f.startsWith(g)?p.replacePrefix[1]+f.substring(g.length):f};var Ir=ha;function ha(f){this["@@propmod"]=f}function Dt(f,p){for(var g=d(p),_=g.length,A=!1,w=0;w<_;++w){var O=g[w],x=p[O],q=et(f,O);x instanceof Ir?(V(f,O,x.execute(q)),A=!0):q!==x&&(V(f,O,x),A=!0)}return A}yt.prototype._trans=function(f,p,g){var _=this._tx||De.trans,A=this.name,w=Mn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(f==="readonly"?"read":"write"," ").concat(this.name));function O(Z,H,B){if(B.schema[A])return p(B.idbtrans,B);throw new Be.NotFound("Table "+A+" not part of transaction")}var x=Yn();try{var q=_&&_.db._novip===this.db._novip?_===De.trans?_._promise(f,O,g):Lt(function(){return _._promise(f,O,g)},{trans:_,transless:De.transless||De}):(function Z(H,B,G,Q){if(H.idbdb&&(H._state.openComplete||De.letThrough||H._vip)){var F=H._createTransaction(B,G,H._dbSchema);try{F.create(),H._state.PR1398_maxLoop=3}catch(K){return K.name===nn.InvalidState&&H.isOpen()&&0<--H._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),H.close({disableAutoOpen:!1}),H.open().then(function(){return Z(H,B,G,Q)})):It(K)}return F._promise(B,function(K,ee){return Lt(function(){return De.trans=F,Q(K,ee,F)})}).then(function(K){if(B==="readwrite")try{F.idbtrans.commit()}catch{}return B==="readonly"?K:F._completion.then(function(){return K})})}if(H._state.openComplete)return It(new Be.DatabaseClosed(H._state.dbOpenError));if(!H._state.isBeingOpened){if(!H._state.autoOpen)return It(new Be.DatabaseClosed);H.open().catch(wt)}return H._state.dbReadyPromise.then(function(){return Z(H,B,G,Q)})})(this.db,f,[this.name],O);return w&&(q._consoleTask=w,q=q.catch(function(Z){return console.trace(Z),It(Z)})),q}finally{x&&Sr()}},yt.prototype.get=function(f,p){var g=this;return f&&f.constructor===Object?this.where(f).first(p):f==null?It(new Be.Type("Invalid argument to Table.get()")):this._trans("readonly",function(_){return g.core.get({trans:_,key:f}).then(function(A){return g.hook.reading.fire(A)})}).then(p)},yt.prototype.where=function(f){if(typeof f=="string")return new this.db.WhereClause(this,f);if(y(f))return new this.db.WhereClause(this,"[".concat(f.join("+"),"]"));var p=d(f);if(p.length===1)return this.where(p[0]).equals(f[p[0]]);var g=this.schema.indexes.concat(this.schema.primKey).filter(function(x){if(x.compound&&p.every(function(Z){return 0<=x.keyPath.indexOf(Z)})){for(var q=0;q<p.length;++q)if(p.indexOf(x.keyPath[q])===-1)return!1;return!0}return!1}).sort(function(x,q){return x.keyPath.length-q.keyPath.length})[0];if(g&&this.db._maxKey!==_n)return O=g.keyPath.slice(0,p.length),this.where(O).equals(O.map(function(x){return f[x]}));!g&&Mn&&console.warn("The query ".concat(JSON.stringify(f)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(p.join("+"),"]"));var _=this.schema.idxByName;function A(x,q){return lt(x,q)===0}var O=p.reduce(function(H,q){var Z=H[0],H=H[1],B=_[q],G=f[q];return[Z||B,Z||!B?Qr(H,B&&B.multi?function(Q){return Q=et(Q,q),y(Q)&&Q.some(function(F){return A(G,F)})}:function(Q){return A(G,et(Q,q))}):H]},[null,null]),w=O[0],O=O[1];return w?this.where(w.name).equals(f[w.keyPath]).filter(O):g?this.filter(O):this.where(p).equals("")},yt.prototype.filter=function(f){return this.toCollection().and(f)},yt.prototype.count=function(f){return this.toCollection().count(f)},yt.prototype.offset=function(f){return this.toCollection().offset(f)},yt.prototype.limit=function(f){return this.toCollection().limit(f)},yt.prototype.each=function(f){return this.toCollection().each(f)},yt.prototype.toArray=function(f){return this.toCollection().toArray(f)},yt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},yt.prototype.orderBy=function(f){return new this.db.Collection(new this.db.WhereClause(this,y(f)?"[".concat(f.join("+"),"]"):f))},yt.prototype.reverse=function(){return this.toCollection().reverse()},yt.prototype.mapToClass=function(f){for(var p=this.db,g=this.name,_=((this.schema.mappedClass=f).prototype instanceof bo&&(f=(O=>{var x=H,q=O;if(typeof q!="function"&&q!==null)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function Z(){this.constructor=x}function H(){return O!==null&&O.apply(this,arguments)||this}return n(x,q),x.prototype=q===null?Object.create(q):(Z.prototype=q.prototype,new Z),Object.defineProperty(H.prototype,"db",{get:function(){return p},enumerable:!1,configurable:!0}),H.prototype.table=function(){return g},H})(f)),new Set),A=f.prototype;A;A=b(A))Object.getOwnPropertyNames(A).forEach(function(O){return _.add(O)});function w(O){if(!O)return O;var x,q=Object.create(f.prototype);for(x in O)if(!_.has(x))try{q[x]=O[x]}catch{}return q}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=w,this.hook("reading",w),f},yt.prototype.defineClass=function(){return this.mapToClass(function(f){E(this,f)})},yt.prototype.add=function(f,p){var g=this,_=this.schema.primKey,A=_.auto,w=_.keyPath,O=f;return w&&A&&(O=es(w)(f)),this._trans("readwrite",function(x){return g.core.mutate({trans:x,type:"add",keys:p!=null?[p]:null,values:[O]})}).then(function(x){return x.numFailures?Se.reject(x.failures[0]):x.lastResult}).then(function(x){if(w)try{V(f,w,x)}catch{}return x})},yt.prototype.upsert=function(f,p){var g=this,_=this.schema.primKey.keyPath;return this._trans("readwrite",function(A){return g.core.get({trans:A,key:f}).then(function(w){var O=w??{};return Dt(O,p),_&&V(O,_,f),g.core.mutate({trans:A,type:"put",values:[O],keys:[f],upsert:!0,updates:{keys:[f],changeSpecs:[p]}}).then(function(x){return x.numFailures?Se.reject(x.failures[0]):!!w})})})},yt.prototype.update=function(f,p){return typeof f!="object"||y(f)?this.where(":id").equals(f).modify(p):(f=et(f,this.schema.primKey.keyPath))===void 0?It(new Be.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(f).modify(p)},yt.prototype.put=function(f,p){var g=this,_=this.schema.primKey,A=_.auto,w=_.keyPath,O=f;return w&&A&&(O=es(w)(f)),this._trans("readwrite",function(x){return g.core.mutate({trans:x,type:"put",values:[O],keys:p!=null?[p]:null})}).then(function(x){return x.numFailures?Se.reject(x.failures[0]):x.lastResult}).then(function(x){if(w)try{V(f,w,x)}catch{}return x})},yt.prototype.delete=function(f){var p=this;return this._trans("readwrite",function(g){return p.core.mutate({trans:g,type:"delete",keys:[f]}).then(function(_){return ln(p,[f],_)}).then(function(_){return _.numFailures?Se.reject(_.failures[0]):void 0})})},yt.prototype.clear=function(){var f=this;return this._trans("readwrite",function(p){return f.core.mutate({trans:p,type:"deleteRange",range:fa}).then(function(g){return ln(f,null,g)})}).then(function(p){return p.numFailures?Se.reject(p.failures[0]):void 0})},yt.prototype.bulkGet=function(f){var p=this;return this._trans("readonly",function(g){return p.core.getMany({keys:f,trans:g}).then(function(_){return _.map(function(A){return p.hook.reading.fire(A)})})})},yt.prototype.bulkAdd=function(f,p,g){var _=this,A=Array.isArray(p)?p:void 0,w=(g=g||(A?void 0:p))?g.allKeys:void 0;return this._trans("readwrite",function(O){var x=_.schema.primKey,Z=x.auto,x=x.keyPath;if(x&&A)throw new Be.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(A&&A.length!==f.length)throw new Be.InvalidArgument("Arguments objects and keys must have the same length");var q=f.length,Z=x&&Z?f.map(es(x)):f;return _.core.mutate({trans:O,type:"add",keys:A,values:Z,wantResults:w}).then(function(H){var B=H.numFailures,G=H.failures;if(B===0)return w?H.results:H.lastResult;throw new ct("".concat(_.name,".bulkAdd(): ").concat(B," of ").concat(q," operations failed"),G)})})},yt.prototype.bulkPut=function(f,p,g){var _=this,A=Array.isArray(p)?p:void 0,w=(g=g||(A?void 0:p))?g.allKeys:void 0;return this._trans("readwrite",function(O){var x=_.schema.primKey,Z=x.auto,x=x.keyPath;if(x&&A)throw new Be.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(A&&A.length!==f.length)throw new Be.InvalidArgument("Arguments objects and keys must have the same length");var q=f.length,Z=x&&Z?f.map(es(x)):f;return _.core.mutate({trans:O,type:"put",keys:A,values:Z,wantResults:w}).then(function(H){var B=H.numFailures,G=H.failures;if(B===0)return w?H.results:H.lastResult;throw new ct("".concat(_.name,".bulkPut(): ").concat(B," of ").concat(q," operations failed"),G)})})},yt.prototype.bulkUpdate=function(f){var p=this,g=this.core,_=f.map(function(O){return O.key}),A=f.map(function(O){return O.changes}),w=[];return this._trans("readwrite",function(O){return g.getMany({trans:O,keys:_,cache:"clone"}).then(function(x){var q=[],Z=[],H=(f.forEach(function(B,G){var Q=B.key,F=B.changes,K=x[G];if(K){for(var ee=0,ie=Object.keys(F);ee<ie.length;ee++){var W=ie[ee],fe=F[W];if(W===p.schema.primKey.keyPath){if(lt(fe,Q)!==0)throw new Be.Constraint("Cannot update primary key in bulkUpdate()")}else V(K,W,fe)}w.push(G),q.push(Q),Z.push(K)}}),q.length);return g.mutate({trans:O,type:"put",keys:q,values:Z,updates:{keys:_,changeSpecs:A}}).then(function(B){var G=B.numFailures,Q=B.failures;if(G===0)return H;for(var F=0,K=Object.keys(Q);F<K.length;F++){var ee,ie=K[F],W=w[Number(ie)];W!=null&&(ee=Q[ie],delete Q[ie],Q[W]=ee)}throw new ct("".concat(p.name,".bulkUpdate(): ").concat(G," of ").concat(H," operations failed"),Q)})})})},yt.prototype.bulkDelete=function(f){var p=this,g=f.length;return this._trans("readwrite",function(_){return p.core.mutate({trans:_,type:"delete",keys:f}).then(function(A){return ln(p,f,A)})}).then(function(_){var A=_.numFailures,w=_.failures;if(A===0)return _.lastResult;throw new ct("".concat(p.name,".bulkDelete(): ").concat(A," of ").concat(g," operations failed"),w)})};var ts=yt;function yt(){}function $r(f){function p(O,x){if(x){for(var q=arguments.length,Z=new Array(q-1);--q;)Z[q-1]=arguments[q];return g[O].subscribe.apply(null,Z),f}if(typeof O=="string")return g[O]}var g={};p.addEventType=w;for(var _=1,A=arguments.length;_<A;++_)w(arguments[_]);return p;function w(O,x,q){var Z,H;if(typeof O!="object")return x=x||dn,H={subscribers:[],fire:q=q||wt,subscribe:function(B){H.subscribers.indexOf(B)===-1&&(H.subscribers.push(B),H.fire=x(H.fire,B))},unsubscribe:function(B){H.subscribers=H.subscribers.filter(function(G){return G!==B}),H.fire=H.subscribers.reduce(x,q)}},g[O]=p[O]=H;d(Z=O).forEach(function(B){var G=Z[B];if(y(G))w(B,Z[B][0],Z[B][1]);else{if(G!=="asap")throw new Be.InvalidArgument("Invalid event config");var Q=w(B,ui,function(){for(var F=arguments.length,K=new Array(F);F--;)K[F]=arguments[F];Q.subscribers.forEach(function(ee){ht(function(){ee.apply(null,K)})})})}})}}function Rn(f,p){return be(p).from({prototype:f}),p}function Xr(f,p){return!(f.filter||f.algorithm||f.or)&&(p?f.justLimit:!f.replayFilter)}function da(f,p){f.filter=Qr(f.filter,p)}function Os(f,p,g){var _=f.replayFilter;f.replayFilter=_?function(){return Qr(_(),p())}:p,f.justLimit=g&&!_}function Jr(f,p){if(f.isPrimKey)return p.primaryKey;var g=p.getIndexByKeyPath(f.index);if(g)return g;throw new Be.Schema("KeyPath "+f.index+" on object store "+p.name+" is not indexed")}function To(f,p,g){var _=Jr(f,p.schema);return p.openCursor({trans:g,values:!f.keysOnly,reverse:f.dir==="prev",unique:!!f.unique,query:{index:_,range:f.range}})}function Zr(f,p,g,_){var A,w,O=f.replayFilter?Qr(f.filter,f.replayFilter()):f.filter;return f.or?(A={},w=function(x,q,Z){var H,B;O&&!O(q,Z,function(G){return q.stop(G)},function(G){return q.fail(G)})||((B=""+(H=q.primaryKey))=="[object ArrayBuffer]"&&(B=""+new Uint8Array(H)),D(A,B))||(A[B]=!0,p(x,q,Z))},Promise.all([f.or._iterate(w,g),Qn(To(f,_,g),f.algorithm,w,!f.keysOnly&&f.valueMapper)])):Qn(To(f,_,g),Qr(f.algorithm,O),p,!f.keysOnly&&f.valueMapper)}function Qn(f,p,g,_){var A=kt(_?function(w,O,x){return g(_(w),O,x)}:g);return f.then(function(w){if(w)return w.start(function(){var O=function(){return w.continue()};p&&!p(w,function(x){return O=x},function(x){w.stop(x),O=wt},function(x){w.fail(x),O=wt})||A(w.value,w,function(x){return O=x}),O()})})}gt.prototype._read=function(f,p){var g=this._ctx;return g.error?g.table._trans(null,It.bind(null,g.error)):g.table._trans("readonly",f).then(p)},gt.prototype._write=function(f){var p=this._ctx;return p.error?p.table._trans(null,It.bind(null,p.error)):p.table._trans("readwrite",f,"locked")},gt.prototype._addAlgorithm=function(f){var p=this._ctx;p.algorithm=Qr(p.algorithm,f)},gt.prototype._iterate=function(f,p){return Zr(this._ctx,f,p,this._ctx.table.core)},gt.prototype.clone=function(f){var p=Object.create(this.constructor.prototype),g=Object.create(this._ctx);return f&&E(g,f),p._ctx=g,p},gt.prototype.raw=function(){return this._ctx.valueMapper=null,this},gt.prototype.each=function(f){var p=this._ctx;return this._read(function(g){return Zr(p,f,g,p.table.core)})},gt.prototype.count=function(f){var p=this;return this._read(function(g){var _,A=p._ctx,w=A.table.core;return Xr(A,!0)?w.count({trans:g,query:{index:Jr(A,w.schema),range:A.range}}).then(function(O){return Math.min(O,A.limit)}):(_=0,Zr(A,function(){return++_,!1},g,w).then(function(){return _}))}).then(f)},gt.prototype.sortBy=function(f,p){var g=f.split(".").reverse(),_=g[0],A=g.length-1;function w(q,Z){return Z?w(q[g[Z]],Z-1):q[_]}var O=this._ctx.dir==="next"?1:-1;function x(q,Z){return lt(w(q,A),w(Z,A))*O}return this.toArray(function(q){return q.sort(x)}).then(p)},gt.prototype.toArray=function(f){var p=this;return this._read(function(g){var _,A,w,O=p._ctx;return O.dir==="next"&&Xr(O,!0)&&0<O.limit?(_=O.valueMapper,A=Jr(O,O.table.core.schema),O.table.core.query({trans:g,limit:O.limit,values:!0,query:{index:A,range:O.range}}).then(function(x){return x=x.result,_?x.map(_):x})):(w=[],Zr(O,function(x){return w.push(x)},g,O.table.core).then(function(){return w}))},f)},gt.prototype.offset=function(f){var p=this._ctx;return f<=0||(p.offset+=f,Xr(p)?Os(p,function(){var g=f;return function(_,A){return g===0||(g===1?--g:A(function(){_.advance(g),g=0}),!1)}}):Os(p,function(){var g=f;return function(){return--g<0}})),this},gt.prototype.limit=function(f){return this._ctx.limit=Math.min(this._ctx.limit,f),Os(this._ctx,function(){var p=f;return function(g,_,A){return--p<=0&&_(A),0<=p}},!0),this},gt.prototype.until=function(f,p){return da(this._ctx,function(g,_,A){return!f(g.value)||(_(A),p)}),this},gt.prototype.first=function(f){return this.limit(1).toArray(function(p){return p[0]}).then(f)},gt.prototype.last=function(f){return this.reverse().first(f)},gt.prototype.filter=function(f){var p;return da(this._ctx,function(g){return f(g.value)}),(p=this._ctx).isMatch=Qr(p.isMatch,f),this},gt.prototype.and=function(f){return this.filter(f)},gt.prototype.or=function(f){return new this.db.WhereClause(this._ctx.table,f,this)},gt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},gt.prototype.desc=function(){return this.reverse()},gt.prototype.eachKey=function(f){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(g,_){f(_.key,_)})},gt.prototype.eachUniqueKey=function(f){return this._ctx.unique="unique",this.eachKey(f)},gt.prototype.eachPrimaryKey=function(f){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(g,_){f(_.primaryKey,_)})},gt.prototype.keys=function(f){var p=this._ctx,g=(p.keysOnly=!p.isMatch,[]);return this.each(function(_,A){g.push(A.key)}).then(function(){return g}).then(f)},gt.prototype.primaryKeys=function(f){var p=this._ctx;if(p.dir==="next"&&Xr(p,!0)&&0<p.limit)return this._read(function(_){var A=Jr(p,p.table.core.schema);return p.table.core.query({trans:_,values:!1,limit:p.limit,query:{index:A,range:p.range}})}).then(function(_){return _.result}).then(f);p.keysOnly=!p.isMatch;var g=[];return this.each(function(_,A){g.push(A.primaryKey)}).then(function(){return g}).then(f)},gt.prototype.uniqueKeys=function(f){return this._ctx.unique="unique",this.keys(f)},gt.prototype.firstKey=function(f){return this.limit(1).keys(function(p){return p[0]}).then(f)},gt.prototype.lastKey=function(f){return this.reverse().firstKey(f)},gt.prototype.distinct=function(){var f,p=this._ctx,p=p.index&&p.table.schema.idxByName[p.index];return p&&p.multi&&(f={},da(this._ctx,function(_){var _=_.primaryKey.toString(),A=D(f,_);return f[_]=!0,!A})),this},gt.prototype.modify=function(f){var p=this,g=this._ctx;return this._write(function(_){function A(K,ee){var ie=ee.failures;G+=K-ee.numFailures;for(var W=0,fe=d(ie);W<fe.length;W++){var ye=fe[W];B.push(ie[ye])}}var w=typeof f=="function"?f:function(K){return Dt(K,f)},O=g.table.core,H=O.schema.primaryKey,x=H.outbound,q=H.extractKey,Z=200,H=p.db._options.modifyChunkSize,B=(H&&(Z=typeof H=="object"?H[O.name]||H["*"]||200:H),[]),G=0,Q=[],F=f===ma;return p.clone().primaryKeys().then(function(K){function ee(W){var fe=Math.min(Z,K.length-W),ye=K.slice(W,W+fe);return(F?Promise.resolve([]):O.getMany({trans:_,keys:ye,cache:"immutable"})).then(function(Ae){var we=[],_e=[],ke=x?[]:null,xe=F?ye:[];if(!F)for(var Ee=0;Ee<fe;++Ee){var Ve=Ae[Ee],Ze={value:M(Ve),primKey:K[W+Ee]};w.call(Ze,Ze.value,Ze)!==!1&&(Ze.value==null?xe.push(K[W+Ee]):x||lt(q(Ve),q(Ze.value))===0?(_e.push(Ze.value),x&&ke.push(K[W+Ee])):(xe.push(K[W+Ee]),we.push(Ze.value)))}return Promise.resolve(0<we.length&&O.mutate({trans:_,type:"add",values:we}).then(function(pt){for(var Ke in pt.failures)xe.splice(parseInt(Ke),1);A(we.length,pt)})).then(function(){return(0<_e.length||ie&&typeof f=="object")&&O.mutate({trans:_,type:"put",keys:ke,values:_e,criteria:ie,changeSpec:typeof f!="function"&&f,isAdditionalChunk:0<W}).then(function(pt){return A(_e.length,pt)})}).then(function(){return(0<xe.length||ie&&F)&&O.mutate({trans:_,type:"delete",keys:xe,criteria:ie,isAdditionalChunk:0<W}).then(function(pt){return ln(g.table,xe,pt)}).then(function(pt){return A(xe.length,pt)})}).then(function(){return K.length>W+fe&&ee(W+Z)})})}var ie=Xr(g)&&g.limit===1/0&&(typeof f!="function"||F)&&{index:g.index,range:g.range};return ee(0).then(function(){if(0<B.length)throw new tt("Error modifying one or more objects",B,G,Q);return K.length})})})},gt.prototype.delete=function(){var f=this._ctx,p=f.range;return!Xr(f)||f.table.schema.yProps||!f.isPrimKey&&p.type!==3?this.modify(ma):this._write(function(g){var _=f.table.core.schema.primaryKey,A=p;return f.table.core.count({trans:g,query:{index:_,range:A}}).then(function(w){return f.table.core.mutate({trans:g,type:"deleteRange",range:A}).then(function(q){var x=q.failures,q=q.numFailures;if(q)throw new tt("Could not delete some values",Object.keys(x).map(function(Z){return x[Z]}),w-q);return w-q})})})};var il=gt;function gt(){}var ma=function(f,p){return p.value=null};function pa(f,p){return f<p?-1:f===p?0:1}function sl(f,p){return p<f?-1:f===p?0:1}function mn(f,p,g){return f=f instanceof Pi?new f.Collection(f):f,f._ctx.error=new(g||TypeError)(p),f}function Wr(f){return new f.Collection(f,function(){return pr("")}).limit(0)}function sr(Q,p,g,_){var A,w,O,x,q,Z,H,B=g.length;if(!g.every(function(K){return typeof K=="string"}))return mn(Q,an);function G(K){A=K==="next"?function(ie){return ie.toUpperCase()}:function(ie){return ie.toLowerCase()},w=K==="next"?function(ie){return ie.toLowerCase()}:function(ie){return ie.toUpperCase()},O=K==="next"?pa:sl;var ee=g.map(function(ie){return{lower:w(ie),upper:A(ie)}}).sort(function(ie,W){return O(ie.lower,W.lower)});x=ee.map(function(ie){return ie.upper}),q=ee.map(function(ie){return ie.lower}),H=(Z=K)==="next"?"":_}G("next");var Q=new Q.Collection(Q,function(){return Or(x[0],q[B-1]+_)}),F=(Q._ondirectionchange=function(K){G(K)},0);return Q._addAlgorithm(function(K,ee,ie){var W=K.key;if(typeof W=="string"){var fe=w(W);if(p(fe,q,F))return!0;for(var ye=null,Ae=F;Ae<B;++Ae){var we=((_e,ke,xe,Ee,Ve,Ze)=>{for(var pt=Math.min(_e.length,Ee.length),Ke=-1,st=0;st<pt;++st){var qt=ke[st];if(qt!==Ee[st])return Ve(_e[st],xe[st])<0?_e.substr(0,st)+xe[st]+xe.substr(st+1):Ve(_e[st],Ee[st])<0?_e.substr(0,st)+Ee[st]+xe.substr(st+1):0<=Ke?_e.substr(0,Ke)+ke[Ke]+xe.substr(Ke+1):null;Ve(_e[st],qt)<0&&(Ke=st)}return pt<Ee.length&&Ze==="next"?_e+xe.substr(_e.length):pt<_e.length&&Ze==="prev"?_e.substr(0,xe.length):Ke<0?null:_e.substr(0,Ke)+Ee[Ke]+xe.substr(Ke+1)})(W,fe,x[Ae],q[Ae],O,Z);we===null&&ye===null?F=Ae+1:(ye===null||0<O(ye,we))&&(ye=we)}ee(ye!==null?function(){K.continue(ye+H)}:ie)}return!1}),Q}function Or(f,p,g,_){return{type:2,lower:f,upper:p,lowerOpen:g,upperOpen:_}}function pr(f){return{type:1,lower:f,upper:f}}Object.defineProperty(Ut.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ut.prototype.between=function(f,p,g,_){g=g!==!1,_=_===!0;try{return 0<this._cmp(f,p)||this._cmp(f,p)===0&&(g||_)&&(!g||!_)?Wr(this):new this.Collection(this,function(){return Or(f,p,!g,!_)})}catch{return mn(this,wn)}},Ut.prototype.equals=function(f){return f==null?mn(this,wn):new this.Collection(this,function(){return pr(f)})},Ut.prototype.above=function(f){return f==null?mn(this,wn):new this.Collection(this,function(){return Or(f,void 0,!0)})},Ut.prototype.aboveOrEqual=function(f){return f==null?mn(this,wn):new this.Collection(this,function(){return Or(f,void 0,!1)})},Ut.prototype.below=function(f){return f==null?mn(this,wn):new this.Collection(this,function(){return Or(void 0,f,!1,!0)})},Ut.prototype.belowOrEqual=function(f){return f==null?mn(this,wn):new this.Collection(this,function(){return Or(void 0,f)})},Ut.prototype.startsWith=function(f){return typeof f!="string"?mn(this,an):this.between(f,f+_n,!0,!0)},Ut.prototype.startsWithIgnoreCase=function(f){return f===""?this.startsWith(f):sr(this,function(p,g){return p.indexOf(g[0])===0},[f],_n)},Ut.prototype.equalsIgnoreCase=function(f){return sr(this,function(p,g){return p===g[0]},[f],"")},Ut.prototype.anyOfIgnoreCase=function(){var f=Me.apply(ze,arguments);return f.length===0?Wr(this):sr(this,function(p,g){return g.indexOf(p)!==-1},f,"")},Ut.prototype.startsWithAnyOfIgnoreCase=function(){var f=Me.apply(ze,arguments);return f.length===0?Wr(this):sr(this,function(p,g){return g.some(function(_){return p.indexOf(_)===0})},f,_n)},Ut.prototype.anyOf=function(){var f,p,g=this,_=Me.apply(ze,arguments),A=this._cmp;try{_.sort(A)}catch{return mn(this,wn)}return _.length===0?Wr(this):((f=new this.Collection(this,function(){return Or(_[0],_[_.length-1])}))._ondirectionchange=function(w){A=w==="next"?g._ascending:g._descending,_.sort(A)},p=0,f._addAlgorithm(function(w,O,x){for(var q=w.key;0<A(q,_[p]);)if(++p===_.length)return O(x),!1;return A(q,_[p])===0||(O(function(){w.continue(_[p])}),!1)}),f)},Ut.prototype.notEqual=function(f){return this.inAnyRange([[-1/0,f],[f,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ut.prototype.noneOf=function(){var f=Me.apply(ze,arguments);if(f.length===0)return new this.Collection(this);try{f.sort(this._ascending)}catch{return mn(this,wn)}var p=f.reduce(function(g,_){return g?g.concat([[g[g.length-1][1],_]]):[[-1/0,_]]},null);return p.push([f[f.length-1],this.db._maxKey]),this.inAnyRange(p,{includeLowers:!1,includeUppers:!1})},Ut.prototype.inAnyRange=function(f,ie){var g=this,_=this._cmp,A=this._ascending,w=this._descending,O=this._min,x=this._max;if(f.length===0)return Wr(this);if(!f.every(function(W){return W[0]!==void 0&&W[1]!==void 0&&A(W[0],W[1])<=0}))return mn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Be.InvalidArgument);var q=!ie||ie.includeLowers!==!1,Z=ie&&ie.includeUppers===!0,H,B=A;function G(W,fe){return B(W[0],fe[0])}try{(H=f.reduce(function(W,fe){for(var ye=0,Ae=W.length;ye<Ae;++ye){var we=W[ye];if(_(fe[0],we[1])<0&&0<_(fe[1],we[0])){we[0]=O(we[0],fe[0]),we[1]=x(we[1],fe[1]);break}}return ye===Ae&&W.push(fe),W},[])).sort(G)}catch{return mn(this,wn)}var Q=0,F=Z?function(W){return 0<A(W,H[Q][1])}:function(W){return 0<=A(W,H[Q][1])},K=q?function(W){return 0<w(W,H[Q][0])}:function(W){return 0<=w(W,H[Q][0])},ee=F,ie=new this.Collection(this,function(){return Or(H[0][0],H[H.length-1][1],!q,!Z)});return ie._ondirectionchange=function(W){B=W==="next"?(ee=F,A):(ee=K,w),H.sort(G)},ie._addAlgorithm(function(W,fe,ye){for(var Ae,we=W.key;ee(we);)if(++Q===H.length)return fe(ye),!1;return!F(Ae=we)&&!K(Ae)||(g._cmp(we,H[Q][1])===0||g._cmp(we,H[Q][0])===0||fe(function(){B===A?W.continue(H[Q][0]):W.continue(H[Q][1])}),!1)}),ie},Ut.prototype.startsWithAnyOf=function(){var f=Me.apply(ze,arguments);return f.every(function(p){return typeof p=="string"})?f.length===0?Wr(this):this.inAnyRange(f.map(function(p){return[p,p+_n]})):mn(this,"startsWithAnyOf() only works with strings")};var Pi=Ut;function Ut(){}function qn(f){return kt(function(p){return pi(p),f(p.target.error),!1})}function pi(f){f.stopPropagation&&f.stopPropagation(),f.preventDefault&&f.preventDefault()}var Dr="storagemutated",gr="x-storagemutated-1",En=$r(null,Dr),Ds=(mt.prototype._lock=function(){return it(!De.global),++this._reculock,this._reculock!==1||De.global||(De.lockOwnerFor=this),this},mt.prototype._unlock=function(){if(it(!De.global),--this._reculock==0)for(De.global||(De.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var f=this._blockedFuncs.shift();try{Bn(f[1],f[0])}catch{}}return this},mt.prototype._locked=function(){return this._reculock&&De.lockOwnerFor!==this},mt.prototype.create=function(f){var p=this;if(this.mode){var g=this.db.idbdb,_=this.db._state.dbOpenError;if(it(!this.idbtrans),!f&&!g)switch(_&&_.name){case"DatabaseClosedError":throw new Be.DatabaseClosed(_);case"MissingAPIError":throw new Be.MissingAPI(_.message,_);default:throw new Be.OpenFailed(_)}if(!this.active)throw new Be.TransactionInactive;it(this._completion._state===null),(f=this.idbtrans=f||(this.db.core||g).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=kt(function(A){pi(A),p._reject(f.error)}),f.onabort=kt(function(A){pi(A),p.active&&p._reject(new Be.Abort(f.error)),p.active=!1,p.on("abort").fire(A)}),f.oncomplete=kt(function(){p.active=!1,p._resolve(),"mutatedParts"in f&&En.storagemutated.fire(f.mutatedParts)})}return this},mt.prototype._promise=function(f,p,g){var _,A=this;return f==="readwrite"&&this.mode!=="readwrite"?It(new Be.ReadOnly("Transaction is readonly")):this.active?this._locked()?new Se(function(w,O){A._blockedFuncs.push([function(){A._promise(f,p,g).then(w,O)},De])}):g?Lt(function(){var w=new Se(function(O,x){A._lock();var q=p(O,x,A);q&&q.then&&q.then(O,x)});return w.finally(function(){return A._unlock()}),w._lib=!0,w}):((_=new Se(function(w,O){var x=p(w,O,A);x&&x.then&&x.then(w,O)}))._lib=!0,_):It(new Be.TransactionInactive)},mt.prototype._root=function(){return this.parent?this.parent._root():this},mt.prototype.waitFor=function(f){var p,g=this._root(),_=Se.resolve(f),A=(g._waitingFor?g._waitingFor=g._waitingFor.then(function(){return _}):(g._waitingFor=_,g._waitingQueue=[],p=g.idbtrans.objectStore(g.storeNames[0]),(function w(){for(++g._spinCount;g._waitingQueue.length;)g._waitingQueue.shift()();g._waitingFor&&(p.get(-1/0).onsuccess=w)})()),g._waitingFor);return new Se(function(w,O){_.then(function(x){return g._waitingQueue.push(kt(w.bind(null,x)))},function(x){return g._waitingQueue.push(kt(O.bind(null,x)))}).finally(function(){g._waitingFor===A&&(g._waitingFor=null)})})},mt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Be.Abort))},mt.prototype.table=function(f){var p=this._memoizedTables||(this._memoizedTables={});if(D(p,f))return p[f];var g=this.schema[f];if(g)return(g=new this.db.Table(f,g,this)).core=this.db.core.table(f),p[f]=g;throw new Be.NotFound("Table "+f+" not part of transaction")},mt);function mt(){}function xr(f,p,g,_,A,w,O,x){return{name:f,keyPath:p,unique:g,multi:_,auto:A,compound:w,src:(g&&!O?"&":"")+(_?"*":"")+(A?"++":"")+ga(p),type:x}}function ga(f){return typeof f=="string"?f:f?"["+[].join.call(f,"+")+"]":""}function Li(f,p,g){return{name:f,primKey:p,indexes:g,mappedClass:null,idxByName:(_=function(A){return[A.name,A]},g.reduce(function(A,w,O){return w=_(w,O),w&&(A[w[0]]=w[1]),A},{}))};var _}var Ui=function(f){try{return f.only([[]]),Ui=function(){return[[]]},[[]]}catch{return Ui=function(){return _n},_n}};function zi(f){return f==null?function(){}:typeof f=="string"?(p=f).split(".").length===1?function(g){return g[p]}:function(g){return et(g,p)}:function(g){return et(g,f)};var p}function gi(f){return[].slice.call(f)}var ei=0;function un(f){return f==null?":id":typeof f=="string"?f:"[".concat(f.join("+"),"]")}function ji(f,p,q){function _(F){if(F.type===3)return null;if(F.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var B=F.lower,G=F.upper,Q=F.lowerOpen,F=F.upperOpen;return B===void 0?G===void 0?null:p.upperBound(G,!!F):G===void 0?p.lowerBound(B,!!Q):p.bound(B,G,!!Q,!!F)}function A(H){var B,G=H.name;return{name:G,schema:H,mutate:function(Q){var F=Q.trans,K=Q.type,ee=Q.keys,ie=Q.values,W=Q.range;return new Promise(function(fe,ye){fe=kt(fe);var Ae=F.objectStore(G),we=Ae.keyPath==null,_e=K==="put"||K==="add";if(!_e&&K!=="delete"&&K!=="deleteRange")throw new Error("Invalid operation type: "+K);var ke,xe=(ee||ie||{length:1}).length;if(ee&&ie&&ee.length!==ie.length)throw new Error("Given keys array must have same length as given values array.");if(xe===0)return fe({numFailures:0,failures:{},results:[],lastResult:void 0});function Ee(Vt){++pt,pi(Vt)}var Ve=[],Ze=[],pt=0;if(K==="deleteRange"){if(W.type===4)return fe({numFailures:pt,failures:Ze,results:[],lastResult:void 0});W.type===3?Ve.push(ke=Ae.clear()):Ve.push(ke=Ae.delete(_(W)))}else{var we=_e?we?[ie,ee]:[ie,null]:[ee,null],Ke=we[0],st=we[1];if(_e)for(var qt=0;qt<xe;++qt)Ve.push(ke=st&&st[qt]!==void 0?Ae[K](Ke[qt],st[qt]):Ae[K](Ke[qt])),ke.onerror=Ee;else for(qt=0;qt<xe;++qt)Ve.push(ke=Ae[K](Ke[qt])),ke.onerror=Ee}function or(Vt){Vt=Vt.target.result,Ve.forEach(function(os,Ca){return os.error!=null&&(Ze[Ca]=os.error)}),fe({numFailures:pt,failures:Ze,results:K==="delete"?ee:Ve.map(function(os){return os.result}),lastResult:Vt})}ke.onerror=function(Vt){Ee(Vt),or(Vt)},ke.onsuccess=or})},getMany:function(Q){var F=Q.trans,K=Q.keys;return new Promise(function(ee,ie){ee=kt(ee);for(var W,fe=F.objectStore(G),ye=K.length,Ae=new Array(ye),we=0,_e=0,ke=function(Ve){Ve=Ve.target,Ae[Ve._pos]=Ve.result,++_e===we&&ee(Ae)},xe=qn(ie),Ee=0;Ee<ye;++Ee)K[Ee]!=null&&((W=fe.get(K[Ee]))._pos=Ee,W.onsuccess=ke,W.onerror=xe,++we);we===0&&ee(Ae)})},get:function(Q){var F=Q.trans,K=Q.key;return new Promise(function(ee,ie){ee=kt(ee);var W=F.objectStore(G).get(K);W.onsuccess=function(fe){return ee(fe.target.result)},W.onerror=qn(ie)})},query:(B=x,function(Q){return new Promise(function(F,K){F=kt(F);var ee,ie,W,_e=Q.trans,fe=Q.values,ye=Q.limit,we=Q.query,Ae=ye===1/0?void 0:ye,ke=we.index,we=we.range,_e=_e.objectStore(G),_e=ke.isPrimaryKey?_e:_e.index(ke.name),ke=_(we);if(ye===0)return F({result:[]});B?((we=fe?_e.getAll(ke,Ae):_e.getAllKeys(ke,Ae)).onsuccess=function(xe){return F({result:xe.target.result})},we.onerror=qn(K)):(ee=0,ie=!fe&&"openKeyCursor"in _e?_e.openKeyCursor(ke):_e.openCursor(ke),W=[],ie.onsuccess=function(xe){var Ee=ie.result;return!Ee||(W.push(fe?Ee.value:Ee.primaryKey),++ee===ye)?F({result:W}):void Ee.continue()},ie.onerror=qn(K))})}),openCursor:function(Q){var F=Q.trans,K=Q.values,ee=Q.query,ie=Q.reverse,W=Q.unique;return new Promise(function(fe,ye){fe=kt(fe);var _e=ee.index,Ae=ee.range,we=F.objectStore(G),we=_e.isPrimaryKey?we:we.index(_e.name),_e=ie?W?"prevunique":"prev":W?"nextunique":"next",ke=!K&&"openKeyCursor"in we?we.openKeyCursor(_(Ae),_e):we.openCursor(_(Ae),_e);ke.onerror=qn(ye),ke.onsuccess=kt(function(xe){var Ee,Ve,Ze,pt,Ke=ke.result;Ke?(Ke.___id=++ei,Ke.done=!1,Ee=Ke.continue.bind(Ke),Ve=(Ve=Ke.continuePrimaryKey)&&Ve.bind(Ke),Ze=Ke.advance.bind(Ke),pt=function(){throw new Error("Cursor not stopped")},Ke.trans=F,Ke.stop=Ke.continue=Ke.continuePrimaryKey=Ke.advance=function(){throw new Error("Cursor not started")},Ke.fail=kt(ye),Ke.next=function(){var st=this,qt=1;return this.start(function(){return qt--?st.continue():st.stop()}).then(function(){return st})},Ke.start=function(st){function qt(){if(ke.result)try{st()}catch(Vt){Ke.fail(Vt)}else Ke.done=!0,Ke.start=function(){throw new Error("Cursor behind last entry")},Ke.stop()}var or=new Promise(function(Vt,os){Vt=kt(Vt),ke.onerror=qn(os),Ke.fail=os,Ke.stop=function(Ca){Ke.stop=Ke.continue=Ke.continuePrimaryKey=Ke.advance=pt,Vt(Ca)}});return ke.onsuccess=kt(function(Vt){ke.onsuccess=qt,qt()}),Ke.continue=Ee,Ke.continuePrimaryKey=Ve,Ke.advance=Ze,qt(),or},fe(Ke)):fe(null)},ye)})},count:function(Q){var F=Q.query,K=Q.trans,ee=F.index,ie=F.range;return new Promise(function(W,fe){var ye=K.objectStore(G),ye=ee.isPrimaryKey?ye:ye.index(ee.name),Ae=_(ie),Ae=Ae?ye.count(Ae):ye.count();Ae.onsuccess=kt(function(we){return W(we.target.result)}),Ae.onerror=qn(fe)})}}}w=q,O=gi((q=f).objectStoreNames);var w,q={schema:{name:q.name,tables:O.map(function(H){return w.objectStore(H)}).map(function(H){var B=H.keyPath,G=H.autoIncrement,F=y(B),Q={},F={name:H.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:B==null,compound:F,keyPath:B,autoIncrement:G,unique:!0,extractKey:zi(B)},indexes:gi(H.indexNames).map(function(K){return H.index(K)}).map(function(W){var fe=W.name,ee=W.unique,ie=W.multiEntry,W=W.keyPath,fe={name:fe,compound:y(W),keyPath:W,unique:ee,multiEntry:ie,extractKey:zi(W)};return Q[un(W)]=fe}),getIndexByKeyPath:function(K){return Q[un(K)]}};return Q[":id"]=F.primaryKey,B!=null&&(Q[un(B)]=F.primaryKey),F})},hasGetAll:0<O.length&&"getAll"in w.objectStore(O[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},O=q.schema,x=q.hasGetAll,q=O.tables.map(A),Z={};return q.forEach(function(H){return Z[H.name]=H}),{stack:"dbcore",transaction:f.transaction.bind(f),table:function(H){if(Z[H])return Z[H];throw new Error("Table '".concat(H,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Ui(p),schema:O}}function yi(f,p,g,_){return g=g.IDBKeyRange,p=ji(p,g,_),{dbcore:f.dbcore.reduce(function(A,w){return w=w.create,s(s({},A),w(A))},p)}}function ti(f,p){var g=p.db,g=yi(f._middlewares,g,f._deps,p);f.core=g.dbcore,f.tables.forEach(function(_){var A=_.name;f.core.schema.tables.some(function(w){return w.name===A})&&(_.core=f.core.table(A),f[A]instanceof f.Table)&&(f[A].core=_.core)})}function ns(f,p,g,_){g.forEach(function(A){var w=_[A];p.forEach(function(O){var x=(function q(Z,H){return Re(Z,H)||(Z=b(Z))&&q(Z,H)})(O,A);(!x||"value"in x&&x.value===void 0)&&(O===f.Transaction.prototype||O instanceof f.Transaction?de(O,A,{get:function(){return this.table(A)},set:function(q){X(this,A,{value:q,writable:!0,configurable:!0,enumerable:!0})}}):O[A]=new f.Table(A,w))})})}function vi(f,p){p.forEach(function(g){for(var _ in g)g[_]instanceof f.Table&&delete g[_]})}function ya(f,p){return f._cfg.version-p._cfg.version}function _i(f,p,g,_){var A=f._dbSchema,w=(g.objectStoreNames.contains("$meta")&&!A.$meta&&(A.$meta=Li("$meta",Ao("")[0],[]),f._storeNames.push("$meta")),f._createTransaction("readwrite",f._storeNames,A)),O=(w.create(g),w._completion.catch(_),w._reject.bind(w)),x=De.transless||De;Lt(function(){if(De.trans=w,De.transless=x,p!==0)return ti(f,g),Z=p,((q=w).storeNames.includes("$meta")?q.table("$meta").get("version").then(function(H){return H??Z}):Se.resolve(Z)).then(function(ee){var B=f,G=ee,Q=w,F=g,K=[],ee=B._versions,ie=B._dbSchema=Ei(0,B.idbdb,F);return(ee=ee.filter(function(W){return W._cfg.version>=G})).length===0?Se.resolve():(ee.forEach(function(W){K.push(function(){var fe,ye,Ae,we=ie,_e=W._cfg.dbschema,ke=(rs(B,we,F),rs(B,_e,F),ie=B._dbSchema=_e,xs(we,_e)),xe=(ke.add.forEach(function(Ee){Bi(F,Ee[0],Ee[1].primKey,Ee[1].indexes)}),ke.change.forEach(function(Ee){if(Ee.recreate)throw new Be.Upgrade("Not yet support for changing primary key");var Ve=F.objectStore(Ee.name);Ee.add.forEach(function(Ze){return Ns(Ve,Ze)}),Ee.change.forEach(function(Ze){Ve.deleteIndex(Ze.name),Ns(Ve,Ze)}),Ee.del.forEach(function(Ze){return Ve.deleteIndex(Ze)})}),W._cfg.contentUpgrade);if(xe&&W._cfg.version>G)return ti(B,F),Q._memoizedTables={},fe=k(_e),ke.del.forEach(function(Ee){fe[Ee]=we[Ee]}),vi(B,[B.Transaction.prototype]),ns(B,[B.Transaction.prototype],d(fe),fe),Q.schema=fe,(ye=j(xe))&&$t(),_e=Se.follow(function(){var Ee;(Ae=xe(Q))&&ye&&(Ee=Vn.bind(null,null),Ae.then(Ee,Ee))}),Ae&&typeof Ae.then=="function"?Se.resolve(Ae):_e.then(function(){return Ae})}),K.push(function(fe){var ye,Ae,we=W._cfg.dbschema;ye=we,Ae=fe,[].slice.call(Ae.db.objectStoreNames).forEach(function(_e){return ye[_e]==null&&Ae.db.deleteObjectStore(_e)}),vi(B,[B.Transaction.prototype]),ns(B,[B.Transaction.prototype],B._storeNames,B._dbSchema),Q.schema=B._dbSchema}),K.push(function(fe){B.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(B.idbdb.version/10)===W._cfg.version?(B.idbdb.deleteObjectStore("$meta"),delete B._dbSchema.$meta,B._storeNames=B._storeNames.filter(function(ye){return ye!=="$meta"})):fe.objectStore("$meta").put(W._cfg.version,"version"))})}),(function W(){return K.length?Se.resolve(K.shift()(Q.idbtrans)).then(W):Se.resolve()})().then(function(){So(ie,F)}))}).catch(O);var q,Z;d(A).forEach(function(H){Bi(g,H,A[H].primKey,A[H].indexes)}),ti(f,g),Se.follow(function(){return f.on.populate.fire(w)}).catch(O)})}function va(f,p){So(f._dbSchema,p),p.db.version%10!=0||p.objectStoreNames.contains("$meta")||p.db.createObjectStore("$meta").add(Math.ceil(p.db.version/10-1),"version");var g=Ei(0,f.idbdb,p);rs(f,f._dbSchema,p);for(var _=0,A=xs(g,f._dbSchema).change;_<A.length;_++){var w=(O=>{if(O.change.length||O.recreate)return console.warn("Unable to patch indexes of table ".concat(O.name," because it has changes on the type of index or primary key.")),{value:void 0};var x=p.objectStore(O.name);O.add.forEach(function(q){Mn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(O.name,".").concat(q.src)),Ns(x,q)})})(A[_]);if(typeof w=="object")return w.value}}function xs(f,p){var g,_={del:[],add:[],change:[]};for(g in f)p[g]||_.del.push(g);for(g in p){var A=f[g],w=p[g];if(A){var O={name:g,def:w,recreate:!1,del:[],add:[],change:[]};if(""+(A.primKey.keyPath||"")!=""+(w.primKey.keyPath||"")||A.primKey.auto!==w.primKey.auto)O.recreate=!0,_.change.push(O);else{var x=A.idxByName,q=w.idxByName,Z=void 0;for(Z in x)q[Z]||O.del.push(Z);for(Z in q){var H=x[Z],B=q[Z];H?H.src!==B.src&&O.change.push(B):O.add.push(B)}(0<O.del.length||0<O.add.length||0<O.change.length)&&_.change.push(O)}}else _.add.push([g,w])}return _}function Bi(f,p,g,_){var A=f.db.createObjectStore(p,g.keyPath?{keyPath:g.keyPath,autoIncrement:g.auto}:{autoIncrement:g.auto});_.forEach(function(w){return Ns(A,w)})}function So(f,p){d(f).forEach(function(g){p.db.objectStoreNames.contains(g)||(Mn&&console.debug("Dexie: Creating missing table",g),Bi(p,g,f[g].primKey,f[g].indexes))})}function Ns(f,p){f.createIndex(p.name,p.keyPath,{unique:p.unique,multiEntry:p.multi})}function Ei(f,p,g){var _={};return Ye(p.objectStoreNames,0).forEach(function(A){for(var w=g.objectStore(A),O=xr(ga(Z=w.keyPath),Z||"",!0,!1,!!w.autoIncrement,Z&&typeof Z!="string",!0),x=[],q=0;q<w.indexNames.length;++q){var H=w.index(w.indexNames[q]),Z=H.keyPath,H=xr(H.name,Z,!!H.unique,!!H.multiEntry,!1,Z&&typeof Z!="string",!1);x.push(H)}_[A]=Li(A,O,x)}),_}function rs(f,p,g){for(var _=g.db.objectStoreNames,A=0;A<_.length;++A){var w=_[A],O=g.objectStore(w);f._hasGetAll="getAll"in O;for(var x=0;x<O.indexNames.length;++x){var q,Z=O.indexNames[x],H=O.index(Z).keyPath,H=typeof H=="string"?H:"["+Ye(H).join("+")+"]";p[w]&&(q=p[w].idxByName[H])&&(q.name=Z,delete p[w].idxByName[H],p[w].idxByName[Z]=q)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(f._hasGetAll=!1)}function Ao(f){return f.split(",").map(function(p,g){var A=p.split(":"),_=(_=A[1])==null?void 0:_.trim(),A=(p=A[0].trim()).replace(/([&*]|\+\+)/g,""),w=/^\[/.test(A)?A.match(/^\[(.*)\]$/)[1].split("+"):A;return xr(A,w||null,/\&/.test(p),/\*/.test(p),/\+\+/.test(p),y(w),g===0,_)})}qi.prototype._createTableSchema=Li,qi.prototype._parseIndexSyntax=Ao,qi.prototype._parseStoresSpec=function(f,p){var g=this;d(f).forEach(function(_){if(f[_]!==null){var A=g._parseIndexSyntax(f[_]),w=A.shift();if(!w)throw new Be.Schema("Invalid schema for table "+_+": "+f[_]);if(w.unique=!0,w.multi)throw new Be.Schema("Primary key cannot be multiEntry*");A.forEach(function(O){if(O.auto)throw new Be.Schema("Only primary key can be marked as autoIncrement (++)");if(!O.keyPath)throw new Be.Schema("Index must have a name and cannot be an empty string")}),w=g._createTableSchema(_,w,A),p[_]=w}})},qi.prototype.stores=function(g){var p=this.db,g=(this._cfg.storesSource=this._cfg.storesSource?E(this._cfg.storesSource,g):g,p._versions),_={},A={};return g.forEach(function(w){E(_,w._cfg.storesSource),A=w._cfg.dbschema={},w._parseStoresSpec(_,A)}),p._dbSchema=A,vi(p,[p._allTables,p,p.Transaction.prototype]),ns(p,[p._allTables,p,p.Transaction.prototype,this._cfg.tables],d(A),A),p._storeNames=d(A),this},qi.prototype.upgrade=function(f){return this._cfg.contentUpgrade=rn(this._cfg.contentUpgrade||wt,f),this};var _a=qi;function qi(){}function Ea(f,p){var g=f._dbNamesDB;return g||(g=f._dbNamesDB=new Ti(Wi,{addons:[],indexedDB:f,IDBKeyRange:p})).version(1).stores({dbnames:"name"}),g.table("dbnames")}function Nr(f){return f&&typeof f.databases=="function"}function ba(f){return Lt(function(){return De.letThrough=!0,f()})}function Ta(f){return!("from"in f)}var bn=function(f,p){var g;if(!this)return g=new bn,f&&"d"in f&&E(g,f),g;E(this,arguments.length?{d:1,from:f,to:1<arguments.length?p:f}:{d:0})};function is(f,p,g){var _=lt(p,g);if(!isNaN(_)){if(0<_)throw RangeError();if(Ta(f))return E(f,{from:p,to:g,d:1});var _=f.l,A=f.r;if(lt(g,f.from)<0)return _?is(_,p,g):f.l={from:p,to:g,d:1,l:null,r:null},wo(f);if(0<lt(p,f.to))return A?is(A,p,g):f.r={from:p,to:g,d:1,l:null,r:null},wo(f);lt(p,f.from)<0&&(f.from=p,f.l=null,f.d=A?A.d+1:1),0<lt(g,f.to)&&(f.to=g,f.r=null,f.d=f.l?f.l.d+1:1),p=!f.r,_&&!f.l&&Mr(f,_),A&&p&&Mr(f,A)}}function Mr(f,p){Ta(p)||(function g(_,A){var w=A.from,O=A.l,x=A.r;is(_,w,A.to),O&&g(_,O),x&&g(_,x)})(f,p)}function Hn(f,p){var g=Ms(p),_=g.next();if(!_.done)for(var A=_.value,w=Ms(f),O=w.next(A.from),x=O.value;!_.done&&!O.done;){if(lt(x.from,A.to)<=0&&0<=lt(x.to,A.from))return!0;lt(A.from,x.from)<0?A=(_=g.next(x.from)).value:x=(O=w.next(A.from)).value}return!1}function Ms(f){var p=Ta(f)?null:{s:0,n:f};return{next:function(g){for(var _=0<arguments.length;p;)switch(p.s){case 0:if(p.s=1,_)for(;p.n.l&&lt(g,p.n.from)<0;)p={up:p,n:p.n.l,s:1};else for(;p.n.l;)p={up:p,n:p.n.l,s:1};case 1:if(p.s=2,!_||lt(g,p.n.to)<=0)return{value:p.n,done:!1};case 2:if(p.n.r){p.s=3,p={up:p,n:p.n.r,s:0};continue}case 3:p=p.up}return{done:!0}}}}function wo(f){var p,g,_,A=(((A=f.r)==null?void 0:A.d)||0)-(((A=f.l)==null?void 0:A.d)||0),A=1<A?"r":A<-1?"l":"";A&&(p=A=="r"?"l":"r",g=s({},f),_=f[A],f.from=_.from,f.to=_.to,f[A]=_[A],g[A]=_[p],(f[p]=g).d=bi(g)),f.d=bi(f)}function bi(g){var p=g.r,g=g.l;return(p?g?Math.max(p.d,g.d):p.d:g?g.d:0)+1}function c(f,p){return d(p).forEach(function(g){f[g]?Mr(f[g],p[g]):f[g]=(function _(A){var w,O,x={};for(w in A)D(A,w)&&(O=A[w],x[w]=!O||typeof O!="object"||z.has(O.constructor)?O:_(O));return x})(p[g])}),f}function v(f,p){return f.all||p.all||Object.keys(f).some(function(g){return p[g]&&Hn(p[g],f[g])})}N(bn.prototype,((kn={add:function(f){return Mr(this,f),this},addKey:function(f){return is(this,f,f),this},addKeys:function(f){var p=this;return f.forEach(function(g){return is(p,g,g)}),this},hasKey:function(f){var p=Ms(this).next(f).value;return p&&lt(p.from,f)<=0&&0<=lt(p.to,f)}})[ue]=function(){return Ms(this)},kn));var S={},I={},te=!1;function ae(f){c(I,f),te||(te=!0,setTimeout(function(){te=!1,Te(I,!(I={}))},0))}function Te(f,p){p===void 0&&(p=!1);var g=new Set;if(f.all)for(var _=0,A=Object.values(S);_<A.length;_++)nt(x=A[_],f,g,p);else for(var w in f){var O,x,w=/^idb\:\/\/(.*)\/(.*)\//.exec(w);w&&(O=w[1],w=w[2],x=S["idb://".concat(O,"/").concat(w)])&&nt(x,f,g,p)}g.forEach(function(q){return q()})}function nt(f,p,g,_){for(var A=[],w=0,O=Object.entries(f.queries.query);w<O.length;w++){for(var x=O[w],q=x[0],Z=[],H=0,B=x[1];H<B.length;H++){var G=B[H];v(p,G.obsSet)?G.subscribers.forEach(function(ee){return g.add(ee)}):_&&Z.push(G)}_&&A.push([q,Z])}if(_)for(var Q=0,F=A;Q<F.length;Q++){var K=F[Q],q=K[0],Z=K[1];f.queries.query[q]=Z}}function cn(f){var p=f._state,g=f._deps.indexedDB;if(p.isBeingOpened||f.idbdb)return p.dbReadyPromise.then(function(){return p.dbOpenError?It(p.dbOpenError):f});p.isBeingOpened=!0,p.dbOpenError=null,p.openComplete=!1;var _=p.openCanceller,A=Math.round(10*f.verno),w=!1;function O(){if(p.openCanceller!==_)throw new Be.DatabaseClosed("db.open() was cancelled")}function x(){return new Se(function(G,Q){if(O(),!g)throw new Be.MissingAPI;var F=f.name,K=p.autoSchema||!A?g.open(F):g.open(F,A);if(!K)throw new Be.MissingAPI;K.onerror=qn(Q),K.onblocked=kt(f._fireOnBlocked),K.onupgradeneeded=kt(function(ee){var ie;H=K.transaction,p.autoSchema&&!f._options.allowEmptyDB?(K.onerror=pi,H.abort(),K.result.close(),(ie=g.deleteDatabase(F)).onsuccess=ie.onerror=kt(function(){Q(new Be.NoSuchDatabase("Database ".concat(F," doesnt exist")))})):(H.onerror=qn(Q),ie=ee.oldVersion>Math.pow(2,62)?0:ee.oldVersion,B=ie<1,f.idbdb=K.result,w&&va(f,H),_i(f,ie/10,H,Q))},Q),K.onsuccess=kt(function(){H=null;var ee,ie,W,fe,ye,Ae,we=f.idbdb=K.result,_e=Ye(we.objectStoreNames);if(0<_e.length)try{var ke=we.transaction((ye=_e).length===1?ye[0]:ye,"readonly");if(p.autoSchema)Ae=we,fe=ke,(W=f).verno=Ae.version/10,fe=W._dbSchema=Ei(0,Ae,fe),W._storeNames=Ye(Ae.objectStoreNames,0),ns(W,[W._allTables],d(fe),fe);else if(rs(f,f._dbSchema,ke),ie=ke,((ie=xs(Ei(0,(ee=f).idbdb,ie),ee._dbSchema)).add.length||ie.change.some(function(xe){return xe.add.length||xe.change.length}))&&!w)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),we.close(),A=we.version+1,w=!0,G(x());ti(f,ke)}catch{}mi.push(f),we.onversionchange=kt(function(xe){p.vcFired=!0,f.on("versionchange").fire(xe)}),we.onclose=kt(function(){f.close({disableAutoOpen:!1})}),B&&(_e=f._deps,ye=F,Nr(Ae=_e.indexedDB)||ye===Wi||Ea(Ae,_e.IDBKeyRange).put({name:ye}).catch(wt)),G()},Q)}).catch(function(G){switch(G?.name){case"UnknownError":if(0<p.PR1398_maxLoop)return p.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),x();break;case"VersionError":if(0<A)return A=0,x()}return Se.reject(G)})}var q,Z=p.dbReadyResolve,H=null,B=!1;return Se.race([_,(typeof navigator>"u"?Se.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(G){function Q(){return indexedDB.databases().finally(G)}q=setInterval(Q,100),Q()}).finally(function(){return clearInterval(q)}):Promise.resolve()).then(x)]).then(function(){return O(),p.onReadyBeingFired=[],Se.resolve(ba(function(){return f.on.ready.fire(f.vip)})).then(function G(){var Q;if(0<p.onReadyBeingFired.length)return Q=p.onReadyBeingFired.reduce(rn,wt),p.onReadyBeingFired=[],Se.resolve(ba(function(){return Q(f.vip)})).then(G)})}).finally(function(){p.openCanceller===_&&(p.onReadyBeingFired=null,p.isBeingOpened=!1)}).catch(function(G){p.dbOpenError=G;try{H&&H.abort()}catch{}return _===p.openCanceller&&f._close(),It(G)}).finally(function(){p.openComplete=!0,Z()}).then(function(){var G;return B&&(G={},f.tables.forEach(function(Q){Q.schema.indexes.forEach(function(F){F.name&&(G["idb://".concat(f.name,"/").concat(Q.name,"/").concat(F.name)]=new bn(-1/0,[[[]]]))}),G["idb://".concat(f.name,"/").concat(Q.name,"/")]=G["idb://".concat(f.name,"/").concat(Q.name,"/:dels")]=new bn(-1/0,[[[]]])}),En(Dr).fire(G),Te(G,!0)),f})}function Rt(f){function p(w){return f.next(w)}var g=A(p),_=A(function(w){return f.throw(w)});function A(w){return function(x){var x=w(x),q=x.value;return x.done?q:q&&typeof q.then=="function"?q.then(g,_):y(q)?Promise.all(q).then(g,_):g(q)}}return A(p)()}function zt(f,p,g){for(var _=y(f)?f.slice():[f],A=0;A<g;++A)_.push(p);return _}var kr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(f){return s(s({},f),{table:function(_){var g=f.table(_),_=g.schema,A={},w=[];function O(G,Q,F){var W=un(G),K=A[W]=A[W]||[],ee=G==null?0:typeof G=="string"?1:G.length,ie=0<Q,W=s(s({},F),{name:ie?"".concat(W,"(virtual-from:").concat(F.name,")"):F.name,lowLevelIndex:F,isVirtual:ie,keyTail:Q,keyLength:ee,extractKey:zi(G),unique:!ie&&F.unique});return K.push(W),W.isPrimaryKey||w.push(W),1<ee&&O(ee===2?G[0]:G.slice(0,ee-1),Q+1,F),K.sort(function(fe,ye){return fe.keyTail-ye.keyTail}),W}var x=O(_.primaryKey.keyPath,0,_.primaryKey);A[":id"]=[x];for(var q=0,Z=_.indexes;q<Z.length;q++){var H=Z[q];O(H.keyPath,0,H)}function B(G){var Q,F=G.query.index;return F.isVirtual?s(s({},G),{query:{index:F.lowLevelIndex,range:(Q=G.query.range,F=F.keyTail,{type:Q.type===1?2:Q.type,lower:zt(Q.lower,Q.lowerOpen?f.MAX_KEY:f.MIN_KEY,F),lowerOpen:!0,upper:zt(Q.upper,Q.upperOpen?f.MIN_KEY:f.MAX_KEY,F),upperOpen:!0})}}):G}return s(s({},g),{schema:s(s({},_),{primaryKey:x,indexes:w,getIndexByKeyPath:function(G){return(G=A[un(G)])&&G[0]}}),count:function(G){return g.count(B(G))},query:function(G){return g.query(B(G))},openCursor:function(G){var Q=G.query.index,F=Q.keyTail,K=Q.keyLength;return Q.isVirtual?g.openCursor(B(G)).then(function(ie){return ie&&ee(ie)}):g.openCursor(G);function ee(ie){return Object.create(ie,{continue:{value:function(W){W!=null?ie.continue(zt(W,G.reverse?f.MAX_KEY:f.MIN_KEY,F)):G.unique?ie.continue(ie.key.slice(0,K).concat(G.reverse?f.MIN_KEY:f.MAX_KEY,F)):ie.continue()}},continuePrimaryKey:{value:function(W,fe){ie.continuePrimaryKey(zt(W,f.MAX_KEY,F),fe)}},primaryKey:{get:function(){return ie.primaryKey}},key:{get:function(){var W=ie.key;return K===1?W[0]:W.slice(0,K)}},value:{get:function(){return ie.value}}})}}})}})}};function Vr(f,p,g,_){return g=g||{},_=_||"",d(f).forEach(function(A){var w,O,x;D(p,A)?(w=f[A],O=p[A],typeof w=="object"&&typeof O=="object"&&w&&O?(x=Gt(w))!==Gt(O)?g[_+A]=p[A]:x==="Object"?Vr(w,O,g,_+A+"."):w!==O&&(g[_+A]=p[A]):w!==O&&(g[_+A]=p[A])):g[_+A]=void 0}),d(p).forEach(function(A){D(f,A)||(g[_+A]=p[A])}),g}function yr(f,p){return p.type==="delete"?p.keys:p.keys||p.values.map(f.extractKey)}var ni={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(f){return s(s({},f),{table:function(p){var g=f.table(p),_=g.schema.primaryKey;return s(s({},g),{mutate:function(A){var w=De.trans,O=w.table(p).hook,x=O.deleting,q=O.creating,Z=O.updating;switch(A.type){case"add":if(q.fire===wt)break;return w._promise("readwrite",function(){return H(A)},!0);case"put":if(q.fire===wt&&Z.fire===wt)break;return w._promise("readwrite",function(){return H(A)},!0);case"delete":if(x.fire===wt)break;return w._promise("readwrite",function(){return H(A)},!0);case"deleteRange":if(x.fire===wt)break;return w._promise("readwrite",function(){return(function B(G,Q,F){return g.query({trans:G,values:!1,query:{index:_,range:Q},limit:F}).then(function(K){var ee=K.result;return H({type:"delete",keys:ee,trans:G}).then(function(ie){return 0<ie.numFailures?Promise.reject(ie.failures[0]):ee.length<F?{failures:[],numFailures:0,lastResult:void 0}:B(G,s(s({},Q),{lower:ee[ee.length-1],lowerOpen:!0}),F)})})})(A.trans,A.range,1e4)},!0)}return g.mutate(A);function H(B){var G,Q,F,K=De.trans,ee=B.keys||yr(_,B);if(ee)return(B=B.type==="add"||B.type==="put"?s(s({},B),{keys:ee}):s({},B)).type!=="delete"&&(B.values=o([],B.values)),B.keys&&(B.keys=o([],B.keys)),G=g,F=ee,((Q=B).type==="add"?Promise.resolve([]):G.getMany({trans:Q.trans,keys:F,cache:"immutable"})).then(function(ie){var W=ee.map(function(fe,ye){var Ae,we,_e,ke=ie[ye],xe={onerror:null,onsuccess:null};return B.type==="delete"?x.fire.call(xe,fe,ke,K):B.type==="add"||ke===void 0?(Ae=q.fire.call(xe,fe,B.values[ye],K),fe==null&&Ae!=null&&(B.keys[ye]=fe=Ae,_.outbound||V(B.values[ye],_.keyPath,fe))):(Ae=Vr(ke,B.values[ye]),(we=Z.fire.call(xe,Ae,fe,ke,K))&&(_e=B.values[ye],Object.keys(we).forEach(function(Ee){D(_e,Ee)?_e[Ee]=we[Ee]:V(_e,Ee,we[Ee])}))),xe});return g.mutate(B).then(function(fe){for(var ye=fe.failures,Ae=fe.results,we=fe.numFailures,fe=fe.lastResult,_e=0;_e<ee.length;++_e){var ke=(Ae||ee)[_e],xe=W[_e];ke==null?xe.onerror&&xe.onerror(ye[_e]):xe.onsuccess&&xe.onsuccess(B.type==="put"&&ie[_e]?B.values[_e]:ke)}return{failures:ye,results:Ae,numFailures:we,lastResult:fe}}).catch(function(fe){return W.forEach(function(ye){return ye.onerror&&ye.onerror(fe)}),Promise.reject(fe)})});throw new Error("Keys missing")}}})}})}};function ss(f,p,g){try{if(!p||p.keys.length<f.length)return null;for(var _=[],A=0,w=0;A<p.keys.length&&w<f.length;++A)lt(p.keys[A],f[w])===0&&(_.push(g?M(p.values[A]):p.values[A]),++w);return _.length===f.length?_:null}catch{return null}}var Sa={stack:"dbcore",level:-1,create:function(f){return{table:function(p){var g=f.table(p);return s(s({},g),{getMany:function(_){var A;return _.cache?(A=ss(_.keys,_.trans._cache,_.cache==="clone"))?Se.resolve(A):g.getMany(_).then(function(w){return _.trans._cache={keys:_.keys,values:_.cache==="clone"?M(w):w},w}):g.getMany(_)},mutate:function(_){return _.type!=="add"&&(_.trans._cache=null),g.mutate(_)}})}}}};function ks(f,p){return f.trans.mode==="readonly"&&!!f.subscr&&!f.trans.explicit&&f.trans.db._options.cache!=="disabled"&&!p.schema.primaryKey.outbound}function Dc(f,p){switch(f){case"query":return p.values&&!p.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Kh={stack:"dbcore",level:0,name:"Observability",create:function(f){var p=f.schema.name,g=new bn(f.MIN_KEY,f.MAX_KEY);return s(s({},f),{transaction:function(_,A,w){if(De.subscr&&A!=="readonly")throw new Be.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(De.querier));return f.transaction(_,A,w)},table:function(_){function A(ee){var K,ee=ee.query;return[K=ee.index,new bn((K=(ee=ee.range).lower)!=null?K:f.MIN_KEY,(K=ee.upper)!=null?K:f.MAX_KEY)]}var w=f.table(_),O=w.schema,x=O.primaryKey,q=O.indexes,Z=x.extractKey,H=x.outbound,B=x.autoIncrement&&q.filter(function(F){return F.compound&&F.keyPath.includes(x.keyPath)}),G=s(s({},w),{mutate:function(F){function K(Ve){return Ve="idb://".concat(p,"/").concat(_,"/").concat(Ve),ye[Ve]||(ye[Ve]=new bn)}var ee,ie,W,fe=F.trans,ye=F.mutatedParts||(F.mutatedParts={}),Ae=K(""),we=K(":dels"),_e=F.type,xe=F.type==="deleteRange"?[F.range]:F.type==="delete"?[F.keys]:F.values.length<50?[yr(x,F).filter(function(Ve){return Ve}),F.values]:[],ke=xe[0],xe=xe[1],Ee=F.trans._cache;return y(ke)?(Ae.addKeys(ke),(_e=_e==="delete"||ke.length===xe.length?ss(ke,Ee):null)||we.addKeys(ke),(_e||xe)&&(ee=K,ie=_e,W=xe,O.indexes.forEach(function(Ve){var Ze=ee(Ve.name||"");function pt(st){return st!=null?Ve.extractKey(st):null}function Ke(st){Ve.multiEntry&&y(st)?st.forEach(function(qt){return Ze.addKey(qt)}):Ze.addKey(st)}(ie||W).forEach(function(st,Vt){var or=ie&&pt(ie[Vt]),Vt=W&&pt(W[Vt]);lt(or,Vt)!==0&&(or!=null&&Ke(or),Vt!=null)&&Ke(Vt)})}))):ke?(xe={from:(Ee=ke.lower)!=null?Ee:f.MIN_KEY,to:(_e=ke.upper)!=null?_e:f.MAX_KEY},we.add(xe),Ae.add(xe)):(Ae.add(g),we.add(g),O.indexes.forEach(function(Ve){return K(Ve.name).add(g)})),w.mutate(F).then(function(Ve){return!ke||F.type!=="add"&&F.type!=="put"||(Ae.addKeys(Ve.results),B&&B.forEach(function(Ze){for(var pt=F.values.map(function(or){return Ze.extractKey(or)}),Ke=Ze.keyPath.findIndex(function(or){return or===x.keyPath}),st=0,qt=Ve.results.length;st<qt;++st)pt[st][Ke]=Ve.results[st];K(Ze.name).addKeys(pt)})),fe.mutatedParts=c(fe.mutatedParts||{},ye),Ve})}}),Q={get:function(F){return[x,new bn(F.key)]},getMany:function(F){return[x,new bn().addKeys(F.keys)]},count:A,query:A,openCursor:A};return d(Q).forEach(function(F){G[F]=function(K){var ee=De.subscr,ie=!!ee,W=ks(De,w)&&Dc(F,K)?K.obsSet={}:ee;if(ie){var fe,ee=function(xe){return xe="idb://".concat(p,"/").concat(_,"/").concat(xe),W[xe]||(W[xe]=new bn)},ye=ee(""),Ae=ee(":dels"),ie=Q[F](K),we=ie[0],ie=ie[1];if((F==="query"&&we.isPrimaryKey&&!K.values?Ae:ee(we.name||"")).add(ie),!we.isPrimaryKey){if(F!=="count")return fe=F==="query"&&H&&K.values&&w.query(s(s({},K),{values:!1})),w[F].apply(this,arguments).then(function(xe){if(F==="query"){if(H&&K.values)return fe.then(function(pt){return pt=pt.result,ye.addKeys(pt),xe});var Ee=K.values?xe.result.map(Z):xe.result;(K.values?ye:Ae).addKeys(Ee)}else{var Ve,Ze;if(F==="openCursor")return Ze=K.values,(Ve=xe)&&Object.create(Ve,{key:{get:function(){return Ae.addKey(Ve.primaryKey),Ve.key}},primaryKey:{get:function(){var pt=Ve.primaryKey;return Ae.addKey(pt),pt}},value:{get:function(){return Ze&&ye.addKey(Ve.primaryKey),Ve.value}}})}return xe});Ae.add(g)}}return w[F].apply(this,arguments)}}),G}})}};function xc(f,p,g){var _;return g.numFailures===0?p:p.type==="deleteRange"||(_=p.keys?p.keys.length:"values"in p&&p.values?p.values.length:1,g.numFailures===_)?null:(_=s({},p),y(_.keys)&&(_.keys=_.keys.filter(function(A,w){return!(w in g.failures)})),"values"in _&&y(_.values)&&(_.values=_.values.filter(function(A,w){return!(w in g.failures)})),_)}function al(f,p){return g=f,((_=p).lower===void 0||(_.lowerOpen?0<lt(g,_.lower):0<=lt(g,_.lower)))&&(g=f,(_=p).upper===void 0||(_.upperOpen?lt(g,_.upper)<0:lt(g,_.upper)<=0));var g,_}function lu(f,p,g,_,A,w){var O,x,q,Z,H,B;return!g||g.length===0||(O=p.query.index,x=O.multiEntry,q=p.query.range,Z=_.schema.primaryKey.extractKey,H=O.extractKey,B=(O.lowLevelIndex||O).extractKey,(_=g.reduce(function(G,Q){var F=G,K=[];if(Q.type==="add"||Q.type==="put")for(var ee=new bn,ie=Q.values.length-1;0<=ie;--ie){var W,fe=Q.values[ie],ye=Z(fe);!ee.hasKey(ye)&&(W=H(fe),x&&y(W)?W.some(function(xe){return al(xe,q)}):al(W,q))&&(ee.addKey(ye),K.push(fe))}switch(Q.type){case"add":var Ae=new bn().addKeys(p.values?G.map(function(Ee){return Z(Ee)}):G),F=G.concat(p.values?K.filter(function(Ee){return Ee=Z(Ee),!Ae.hasKey(Ee)&&(Ae.addKey(Ee),!0)}):K.map(function(Ee){return Z(Ee)}).filter(function(Ee){return!Ae.hasKey(Ee)&&(Ae.addKey(Ee),!0)}));break;case"put":var we=new bn().addKeys(Q.values.map(function(Ee){return Z(Ee)}));F=G.filter(function(Ee){return!we.hasKey(p.values?Z(Ee):Ee)}).concat(p.values?K:K.map(function(Ee){return Z(Ee)}));break;case"delete":var _e=new bn().addKeys(Q.keys);F=G.filter(function(Ee){return!_e.hasKey(p.values?Z(Ee):Ee)});break;case"deleteRange":var ke=Q.range;F=G.filter(function(Ee){return!al(Z(Ee),ke)})}return F},f))===f)?f:(_.sort(function(G,Q){return lt(B(G),B(Q))||lt(Z(G),Z(Q))}),p.limit&&p.limit<1/0&&(_.length>p.limit?_.length=p.limit:f.length===p.limit&&_.length<p.limit&&(A.dirty=!0)),w?Object.freeze(_):_)}function Aa(f,p){return lt(f.lower,p.lower)===0&&lt(f.upper,p.upper)===0&&!!f.lowerOpen==!!p.lowerOpen&&!!f.upperOpen==!!p.upperOpen}function Ro(f,p){return((g,_,A,w)=>{if(g===void 0)return _!==void 0?-1:0;if(_===void 0)return 1;if((g=lt(g,_))===0){if(A&&w)return 0;if(A)return 1;if(w)return-1}return g})(f.lower,p.lower,f.lowerOpen,p.lowerOpen)<=0&&0<=((g,_,A,w)=>{if(g===void 0)return _!==void 0?1:0;if(_===void 0)return-1;if((g=lt(g,_))===0){if(A&&w)return 0;if(A)return-1;if(w)return 1}return g})(f.upper,p.upper,f.upperOpen,p.upperOpen)}function Gh(f,p,g,_){f.subscribers.add(g),_.addEventListener("abort",function(){var A,w;f.subscribers.delete(g),f.subscribers.size===0&&(A=f,w=p,setTimeout(function(){A.subscribers.size===0&&je(w,A)},3e3))})}var ol={stack:"dbcore",level:0,name:"Cache",create:function(f){var p=f.schema.name;return s(s({},f),{transaction:function(g,_,A){var w,O,x=f.transaction(g,_,A);return _==="readwrite"&&(A=(w=new AbortController).signal,x.addEventListener("abort",(O=function(q){return function(){if(w.abort(),_==="readwrite"){for(var Z=new Set,H=0,B=g;H<B.length;H++){var G=B[H],Q=S["idb://".concat(p,"/").concat(G)];if(Q){var F=f.table(G),K=Q.optimisticOps.filter(function(Ve){return Ve.trans===x});if(x._explicit&&q&&x.mutatedParts)for(var ee=0,ie=Object.values(Q.queries.query);ee<ie.length;ee++)for(var W=0,fe=(we=ie[ee]).slice();W<fe.length;W++)v((_e=fe[W]).obsSet,x.mutatedParts)&&(je(we,_e),_e.subscribers.forEach(function(Ve){return Z.add(Ve)}));else if(0<K.length){Q.optimisticOps=Q.optimisticOps.filter(function(Ve){return Ve.trans!==x});for(var ye=0,Ae=Object.values(Q.queries.query);ye<Ae.length;ye++)for(var we,_e,ke,xe=0,Ee=(we=Ae[ye]).slice();xe<Ee.length;xe++)(_e=Ee[xe]).res!=null&&x.mutatedParts&&(q&&!_e.dirty?(ke=Object.isFrozen(_e.res),ke=lu(_e.res,_e.req,K,F,_e,ke),_e.dirty?(je(we,_e),_e.subscribers.forEach(function(Ve){return Z.add(Ve)})):ke!==_e.res&&(_e.res=ke,_e.promise=Se.resolve({result:ke}))):(_e.dirty&&je(we,_e),_e.subscribers.forEach(function(Ve){return Z.add(Ve)})))}}}Z.forEach(function(Ve){return Ve()})}}})(!1),{signal:A}),x.addEventListener("error",O(!1),{signal:A}),x.addEventListener("complete",O(!0),{signal:A})),x},table:function(g){var _=f.table(g),A=_.schema.primaryKey;return s(s({},_),{mutate:function(w){var O,x=De.trans;return!A.outbound&&x.db._options.cache!=="disabled"&&!x.explicit&&x.idbtrans.mode==="readwrite"&&(O=S["idb://".concat(p,"/").concat(g)])?(x=_.mutate(w),w.type!=="add"&&w.type!=="put"||!(50<=w.values.length||yr(A,w).some(function(q){return q==null}))?(O.optimisticOps.push(w),w.mutatedParts&&ae(w.mutatedParts),x.then(function(q){0<q.numFailures&&(je(O.optimisticOps,w),(q=xc(0,w,q))&&O.optimisticOps.push(q),w.mutatedParts)&&ae(w.mutatedParts)}),x.catch(function(){je(O.optimisticOps,w),w.mutatedParts&&ae(w.mutatedParts)})):x.then(function(q){var Z=xc(0,s(s({},w),{values:w.values.map(function(H,B){var G;return q.failures[B]?H:(V(G=(G=A.keyPath)!=null&&G.includes(".")?M(H):s({},H),A.keyPath,q.results[B]),G)})}),q);O.optimisticOps.push(Z),queueMicrotask(function(){return w.mutatedParts&&ae(w.mutatedParts)})}),x):_.mutate(w)},query:function(w){var O,x,q,Z,H,B,G;return ks(De,_)&&Dc("query",w)?(O=((q=De.trans)==null?void 0:q.db._options.cache)==="immutable",x=(q=De).requery,q=q.signal,B=((Q,F,K,ee)=>{var ie=S["idb://".concat(Q,"/").concat(F)];if(!ie)return[];if(!(Q=ie.queries[K]))return[null,!1,ie,null];var W=Q[(ee.query?ee.query.index.name:null)||""];if(!W)return[null,!1,ie,null];switch(K){case"query":var fe=W.find(function(ye){return ye.req.limit===ee.limit&&ye.req.values===ee.values&&Aa(ye.req.query.range,ee.query.range)});return fe?[fe,!0,ie,W]:[W.find(function(ye){return("limit"in ye.req?ye.req.limit:1/0)>=ee.limit&&(!ee.values||ye.req.values)&&Ro(ye.req.query.range,ee.query.range)}),!1,ie,W];case"count":return fe=W.find(function(ye){return Aa(ye.req.query.range,ee.query.range)}),[fe,!!fe,ie,W]}})(p,g,"query",w),G=B[0],Z=B[2],H=B[3],G&&B[1]?G.obsSet=w.obsSet:(B=_.query(w).then(function(Q){var F=Q.result;if(G&&(G.res=F),O){for(var K=0,ee=F.length;K<ee;++K)Object.freeze(F[K]);Object.freeze(F)}else Q.result=M(F);return Q}).catch(function(Q){return H&&G&&je(H,G),Promise.reject(Q)}),G={obsSet:w.obsSet,promise:B,subscribers:new Set,type:"query",req:w,dirty:!1},H?H.push(G):(H=[G],(Z=Z||(S["idb://".concat(p,"/").concat(g)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[w.query.index.name||""]=H)),Gh(G,H,x,q),G.promise.then(function(Q){return{result:lu(Q.result,w,Z?.optimisticOps,_,G,O)}})):_.query(w)}})}})}};function Co(f,p){return new Proxy(f,{get:function(g,_,A){return _==="db"?p:Reflect.get(g,_,A)}})}Xt.prototype.version=function(f){if(isNaN(f)||f<.1)throw new Be.Type("Given version is not a positive number");if(f=Math.round(10*f)/10,this.idbdb||this._state.isBeingOpened)throw new Be.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,f);var p=this._versions,g=p.filter(function(_){return _._cfg.version===f})[0];return g||(g=new this.Version(f),p.push(g),p.sort(ya),g.stores({}),this._state.autoSchema=!1),g},Xt.prototype._whenReady=function(f){var p=this;return this.idbdb&&(this._state.openComplete||De.letThrough||this._vip)?f():new Se(function(g,_){if(p._state.openComplete)return _(new Be.DatabaseClosed(p._state.dbOpenError));if(!p._state.isBeingOpened){if(!p._state.autoOpen)return void _(new Be.DatabaseClosed);p.open().catch(wt)}p._state.dbReadyPromise.then(g,_)}).then(f)},Xt.prototype.use=function(A){var p=A.stack,g=A.create,_=A.level,A=A.name,w=(A&&this.unuse({stack:p,name:A}),this._middlewares[p]||(this._middlewares[p]=[]));return w.push({stack:p,create:g,level:_??10,name:A}),w.sort(function(O,x){return O.level-x.level}),this},Xt.prototype.unuse=function(f){var p=f.stack,g=f.name,_=f.create;return p&&this._middlewares[p]&&(this._middlewares[p]=this._middlewares[p].filter(function(A){return _?A.create!==_:!!g&&A.name!==g})),this},Xt.prototype.open=function(){var f=this;return Bn(vn,function(){return cn(f)})},Xt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var f=this._state,p=mi.indexOf(this);if(0<=p&&mi.splice(p,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}f.isBeingOpened||(f.dbReadyPromise=new Se(function(g){f.dbReadyResolve=g}),f.openCanceller=new Se(function(g,_){f.cancelOpen=_}))},Xt.prototype.close=function(p){var p=(p===void 0?{disableAutoOpen:!0}:p).disableAutoOpen,g=this._state;p?(g.isBeingOpened&&g.cancelOpen(new Be.DatabaseClosed),this._close(),g.autoOpen=!1,g.dbOpenError=new Be.DatabaseClosed):(this._close(),g.autoOpen=this._options.autoOpen||g.isBeingOpened,g.openComplete=!1,g.dbOpenError=null)},Xt.prototype.delete=function(f){var p=this,g=(f===void 0&&(f={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),_=this._state;return new Se(function(A,w){function O(){p.close(f);var x=p._deps.indexedDB.deleteDatabase(p.name);x.onsuccess=kt(function(){var q,Z,H;q=p._deps,Z=p.name,Nr(H=q.indexedDB)||Z===Wi||Ea(H,q.IDBKeyRange).delete(Z).catch(wt),A()}),x.onerror=qn(w),x.onblocked=p._fireOnBlocked}if(g)throw new Be.InvalidArgument("Invalid closeOptions argument to db.delete()");_.isBeingOpened?_.dbReadyPromise.then(O):O()})},Xt.prototype.backendDB=function(){return this.idbdb},Xt.prototype.isOpen=function(){return this.idbdb!==null},Xt.prototype.hasBeenClosed=function(){var f=this._state.dbOpenError;return f&&f.name==="DatabaseClosed"},Xt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Xt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Xt.prototype,"tables",{get:function(){var f=this;return d(this._allTables).map(function(p){return f._allTables[p]})},enumerable:!1,configurable:!0}),Xt.prototype.transaction=function(){var f=(function(p,g,_){var A=arguments.length;if(A<2)throw new Be.InvalidArgument("Too few arguments");for(var w=new Array(A-1);--A;)w[A-1]=arguments[A];return _=w.pop(),[p,$(w),_]}).apply(this,arguments);return this._transaction.apply(this,f)},Xt.prototype._transaction=function(f,p,g){var _,A,w=this,O=De.trans,x=(O&&O.db===this&&f.indexOf("!")===-1||(O=null),f.indexOf("?")!==-1);f=f.replace("!","").replace("?","");try{if(A=p.map(function(Z){if(Z=Z instanceof w.Table?Z.name:Z,typeof Z!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Z}),f=="r"||f===Rr)_=Rr;else{if(f!="rw"&&f!=Cr)throw new Be.InvalidArgument("Invalid transaction mode: "+f);_=Cr}if(O){if(O.mode===Rr&&_===Cr){if(!x)throw new Be.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");O=null}O&&A.forEach(function(Z){if(O&&O.storeNames.indexOf(Z)===-1){if(!x)throw new Be.SubTransaction("Table "+Z+" not included in parent transaction.");O=null}}),x&&O&&!O.active&&(O=null)}}catch(Z){return O?O._promise(null,function(H,B){B(Z)}):It(Z)}var q=(function Z(H,B,G,Q,F){return Se.resolve().then(function(){var W=De.transless||De,K=H._createTransaction(B,G,H._dbSchema,Q),W=(K.explicit=!0,{trans:K,transless:W});if(Q)K.idbtrans=Q.idbtrans;else try{K.create(),K.idbtrans._explicit=!0,H._state.PR1398_maxLoop=3}catch(fe){return fe.name===nn.InvalidState&&H.isOpen()&&0<--H._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),H.close({disableAutoOpen:!1}),H.open().then(function(){return Z(H,B,G,null,F)})):It(fe)}var ee,ie=j(F),W=(ie&&$t(),Se.follow(function(){var fe;(ee=F.call(K,K))&&(ie?(fe=Vn.bind(null,null),ee.then(fe,fe)):typeof ee.next=="function"&&typeof ee.throw=="function"&&(ee=Rt(ee)))},W));return(ee&&typeof ee.then=="function"?Se.resolve(ee).then(function(fe){return K.active?fe:It(new Be.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):W.then(function(){return ee})).then(function(fe){return Q&&K._resolve(),K._completion.then(function(){return fe})}).catch(function(fe){return K._reject(fe),It(fe)})})}).bind(null,this,_,A,O,g);return O?O._promise(_,q,"lock"):De.trans?Bn(De.transless,function(){return w._whenReady(q)}):this._whenReady(q)},Xt.prototype.table=function(f){if(D(this._allTables,f))return this._allTables[f];throw new Be.InvalidTable("Table ".concat(f," does not exist"))};var Ti=Xt;function Xt(f,p){var g,_,A,w,O,x=this,q=(this._middlewares={},this.verno=0,Xt.dependencies),q=(this._options=p=s({addons:Xt.addons,autoOpen:!0,indexedDB:q.indexedDB,IDBKeyRange:q.IDBKeyRange,cache:"cloned"},p),this._deps={indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},p.addons),Z=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:wt,dbReadyPromise:null,cancelOpen:wt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:p.autoOpen}),H=(Z.dbReadyPromise=new Se(function(B){Z.dbReadyResolve=B}),Z.openCanceller=new Se(function(B,G){Z.cancelOpen=G}),this._state=Z,this.name=f,this.on=$r(this,"populate","blocked","versionchange","close",{ready:[rn,wt]}),this.once=function(B,G){var Q=function(){for(var F=[],K=0;K<arguments.length;K++)F[K]=arguments[K];x.on(B).unsubscribe(Q),G.apply(x,F)};return x.on(B,Q)},this.on.ready.subscribe=Le(this.on.ready.subscribe,function(B){return function(G,Q){Xt.vip(function(){var F,K=x._state;K.openComplete?(K.dbOpenError||Se.resolve().then(G),Q&&B(G)):K.onReadyBeingFired?(K.onReadyBeingFired.push(G),Q&&B(G)):(B(G),F=x,Q||B(function ee(){F.on.ready.unsubscribe(G),F.on.ready.unsubscribe(ee)}))})}}),this.Collection=(g=this,Rn(il.prototype,function(ee,K){this.db=g;var Q=fa,F=null;if(K)try{Q=K()}catch(W){F=W}var K=ee._ctx,ee=K.table,ie=ee.hook.reading.fire;this._ctx={table:ee,index:K.index,isPrimKey:!K.index||ee.schema.primKey.keyPath&&K.index===ee.schema.primKey.name,range:Q,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:F,or:K.or,valueMapper:ie!==ui?ie:null}})),this.Table=(_=this,Rn(ts.prototype,function(B,G,Q){this.db=_,this._tx=Q,this.name=B,this.schema=G,this.hook=_._allTables[B]?_._allTables[B].hook:$r(null,{creating:[Ts,wt],reading:[ci,ui],updating:[vo,wt],deleting:[yo,wt]})})),this.Transaction=(A=this,Rn(Ds.prototype,function(B,G,Q,F,K){var ee=this;B!=="readonly"&&G.forEach(function(ie){ie=(ie=Q[ie])==null?void 0:ie.yProps,ie&&(G=G.concat(ie.map(function(W){return W.updatesTable})))}),this.db=A,this.mode=B,this.storeNames=G,this.schema=Q,this.chromeTransactionDurability=F,this.idbtrans=null,this.on=$r(this,"complete","error","abort"),this.parent=K||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Se(function(ie,W){ee._resolve=ie,ee._reject=W}),this._completion.then(function(){ee.active=!1,ee.on.complete.fire()},function(ie){var W=ee.active;return ee.active=!1,ee.on.error.fire(ie),ee.parent?ee.parent._reject(ie):W&&ee.idbtrans&&ee.idbtrans.abort(),It(ie)})})),this.Version=(w=this,Rn(_a.prototype,function(B){this.db=w,this._cfg={version:B,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(O=this,Rn(Pi.prototype,function(B,G,Q){if(this.db=O,this._ctx={table:B,index:G===":id"?null:G,or:Q},this._cmp=this._ascending=lt,this._descending=function(F,K){return lt(K,F)},this._max=function(F,K){return 0<lt(F,K)?F:K},this._min=function(F,K){return lt(F,K)<0?F:K},this._IDBKeyRange=O._deps.IDBKeyRange,!this._IDBKeyRange)throw new Be.MissingAPI})),this.on("versionchange",function(B){0<B.newVersion?console.warn("Another connection wants to upgrade database '".concat(x.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(x.name,"'. Closing db now to resume the delete request.")),x.close({disableAutoOpen:!1})}),this.on("blocked",function(B){!B.newVersion||B.newVersion<B.oldVersion?console.warn("Dexie.delete('".concat(x.name,"') was blocked")):console.warn("Upgrade '".concat(x.name,"' blocked by other connection holding version ").concat(B.oldVersion/10))}),this._maxKey=Ui(p.IDBKeyRange),this._createTransaction=function(B,G,Q,F){return new x.Transaction(B,G,Q,x._options.chromeTransactionDurability,F)},this._fireOnBlocked=function(B){x.on("blocked").fire(B),mi.filter(function(G){return G.name===x.name&&G!==x&&!G._state.vcFired}).map(function(G){return G.on("versionchange").fire(B)})},this.use(Sa),this.use(ol),this.use(Kh),this.use(kr),this.use(ni),new Proxy(this,{get:function(B,G,Q){var F;return G==="_vip"||(G==="table"?function(K){return Co(x.table(K),H)}:(F=Reflect.get(B,G,Q))instanceof ts?Co(F,H):G==="tables"?F.map(function(K){return Co(K,H)}):G==="_createTransaction"?function(){return Co(F.apply(this,arguments),H)}:F)}}));this.vip=H,q.forEach(function(B){return B(x)})}var wa,Vs=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Nc=(ll.prototype.subscribe=function(f,p,g){return this._subscribe(f&&typeof f!="function"?f:{next:f,error:p,complete:g})},ll.prototype[Vs]=function(){return this},ll);function ll(f){this._subscribe=f}try{wa={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{wa={indexedDB:null,IDBKeyRange:null}}function Mc(f){var p,g=!1,_=new Nc(function(A){var w=j(f),O,x=!1,q={},Z={},H={get closed(){return x},unsubscribe:function(){x||(x=!0,O&&O.abort(),B&&En.storagemutated.unsubscribe(Q))}},B=(A.start&&A.start(H),!1),G=function(){return wr(F)},Q=function(K){c(q,K),v(Z,q)&&G()},F=function(){var K,ee,ie;!x&&wa.indexedDB&&(q={},K={},O&&O.abort(),O=new AbortController,ie=(W=>{var fe=Yn();try{w&&$t();var ye=Lt(f,W);return ye=w?ye.finally(Vn):ye}finally{fe&&Sr()}})(ee={subscr:K,signal:O.signal,requery:G,querier:f,trans:null}),Promise.resolve(ie).then(function(W){g=!0,p=W,x||ee.signal.aborted||(q={},(fe=>{for(var ye in fe)if(D(fe,ye))return;return 1})(Z=K)||B||(En(Dr,Q),B=!0),wr(function(){return!x&&A.next&&A.next(W)}))},function(W){g=!1,["DatabaseClosedError","AbortError"].includes(W?.name)||x||wr(function(){x||A.error&&A.error(W)})}))};return setTimeout(G,0),H});return _.hasValue=function(){return g},_.getValue=function(){return p},_}var Ps=Ti;function uu(f){var p=as;try{as=!0,En.storagemutated.fire(f),Te(f,!0)}finally{as=p}}N(Ps,s(s({},ce),{delete:function(f){return new Ps(f,{addons:[]}).delete()},exists:function(f){return new Ps(f,{addons:[]}).open().then(function(p){return p.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(f){try{return p=Ps.dependencies,g=p.indexedDB,p=p.IDBKeyRange,(Nr(g)?Promise.resolve(g.databases()).then(function(_){return _.map(function(A){return A.name}).filter(function(A){return A!==Wi})}):Ea(g,p).toCollection().primaryKeys()).then(f)}catch{return It(new Be.MissingAPI)}var p,g},defineClass:function(){return function(f){E(this,f)}},ignoreTransaction:function(f){return De.trans?Bn(De.transless,f):f()},vip:ba,async:function(f){return function(){try{var p=Rt(f.apply(this,arguments));return p&&typeof p.then=="function"?p:Se.resolve(p)}catch(g){return It(g)}}},spawn:function(f,p,g){try{var _=Rt(f.apply(g,p||[]));return _&&typeof _.then=="function"?_:Se.resolve(_)}catch(A){return It(A)}},currentTransaction:{get:function(){return De.trans||null}},waitFor:function(f,p){return f=Se.resolve(typeof f=="function"?Ps.ignoreTransaction(f):f).timeout(p||6e4),De.trans?De.trans.waitFor(f):f},Promise:Se,debug:{get:function(){return Mn},set:function(f){nl(f)}},derive:be,extend:E,props:N,override:Le,Events:$r,on:En,liveQuery:Mc,extendObservabilitySet:c,getByKeyPath:et,setByKeyPath:V,delByKeyPath:function(f,p){typeof p=="string"?V(f,p,void 0):"length"in p&&[].map.call(p,function(g){V(f,g,void 0)})},shallowClone:k,deepClone:M,getObjectDiff:Vr,cmp:lt,asap:ht,minKey:-1/0,addons:[],connections:mi,errnames:nn,dependencies:wa,cache:S,semVer:"4.3.0",version:"4.3.0".split(".").map(function(f){return parseInt(f)}).reduce(function(f,p,g){return f+p/Math.pow(10,2*g)})})),Ps.maxKey=Ui(Ps.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(En(Dr,function(f){as||(f=new CustomEvent(gr,{detail:f}),as=!0,dispatchEvent(f),as=!1)}),addEventListener(gr,function(f){f=f.detail,as||uu(f)}));var Ra,as=!1,ar=function(){};return typeof BroadcastChannel<"u"&&((ar=function(){(Ra=new BroadcastChannel(gr)).onmessage=function(f){return f.data&&uu(f.data)}})(),typeof Ra.unref=="function"&&Ra.unref(),En(Dr,function(f){as||Ra.postMessage(f)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(f){if(!Ti.disableBfCache&&f.persisted){Mn&&console.debug("Dexie: handling persisted pagehide"),Ra?.close();for(var p=0,g=mi;p<g.length;p++)g[p].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(f){!Ti.disableBfCache&&f.persisted&&(Mn&&console.debug("Dexie: handling persisted pageshow"),ar(),uu({all:new bn(-1/0,[[]])}))})),Se.rejectionMapper=function(f,p){return!f||f instanceof Ne||f instanceof TypeError||f instanceof SyntaxError||!f.name||!bs[f.name]?f:(p=new bs[f.name](p||f.message,f),"stack"in f&&de(p,"stack",{get:function(){return this.inner.stack}}),p)},nl(Mn),s(Ti,Object.freeze({__proto__:null,Dexie:Ti,Entity:bo,PropModification:Ir,RangeSet:bn,add:function(f){return new Ir({add:f})},cmp:lt,default:Ti,liveQuery:Mc,mergeRanges:Mr,rangesOverlap:Hn,remove:function(f){return new Ir({remove:f})},replacePrefix:function(f,p){return new Ir({replacePrefix:[f,p]})}}),{default:Ti}),Ti})})(Kf)),Kf.exports}var BS=jS();const Wm=Rp(BS),M_=Symbol.for("Dexie"),ih=globalThis[M_]||(globalThis[M_]=Wm);if(Wm.semVer!==ih.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Wm.semVer} and ${ih.semVer}`);const{liveQuery:uN,mergeRanges:cN,rangesOverlap:fN,RangeSet:hN,cmp:dN,Entity:mN,PropModification:pN,replacePrefix:gN,add:yN,remove:vN,DexieYProvider:_N}=ih,Ki=new ih("GeminiPodcastFlashcards");Ki.version(1).stores({vocab:"id, word, status, nextReview, reviewCount, updatedAt"});Ki.version(2).stores({vocab:"id, word, status, nextReview, reviewCount, updatedAt"});Ki.version(3).stores({vocab:"id, word, status, nextReview, reviewCount, updatedAt",study_logs:"++id, cardId, grade, reviewTime, [cardId+reviewTime]"});async function qS(){if(await Ki.vocab.count()===0)try{const n="/public/flashcards/data.json".replace("//","/");console.log(`Fetching data from: ${n}`);const s=await fetch(n);if(!s.ok)throw new Error(`Failed to fetch data.json (${s.status})`);const u=(await s.json()).map(d=>({...d,status:d.status||"new",reviewCount:d.reviewCount||0,nextReview:d.nextReview||Date.now(),updatedAt:Date.now(),id:d.id||crypto.randomUUID()}));await Ki.vocab.bulkAdd(u),console.log(`Initialized DB with ${u.length} cards.`)}catch(e){console.error("Error initializing database:",e)}}const HS=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),FS=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),k_=i=>{const e=FS(i);return e.charAt(0).toUpperCase()+e.slice(1)},IE=(...i)=>i.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),KS=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var GS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const YS=Ce.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:d,...y},E)=>Ce.createElement("svg",{ref:E,...GS,width:e,height:e,stroke:i,strokeWidth:s?Number(n)*24/Number(e):n,className:IE("lucide",o),...!u&&!KS(y)&&{"aria-hidden":"true"},...y},[...d.map(([b,C])=>Ce.createElement(b,C)),...Array.isArray(u)?u:[u]]));const la=(i,e)=>{const n=Ce.forwardRef(({className:s,...o},u)=>Ce.createElement(YS,{ref:u,iconNode:e,className:IE(`lucide-${HS(k_(i))}`,`lucide-${i}`,s),...o}));return n.displayName=k_(i),n};const QS=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],$S=la("layers",QS);const XS=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],V_=la("lightbulb",XS);const JS=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ZS=la("loader-circle",JS);const WS=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],eA=la("mic",WS);const tA=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],nA=la("play",tA);const rA=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],P_=la("sparkles",rA);const iA=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],sA=la("square",iA);const aA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],oA=la("trash-2",aA);const lA=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Mf=la("volume-2",lA),Fu={AI_PARAPHRASE:15e3,AI_CARD_DETAILS:3e4,AI_TRANSCRIPT:6e4,AI_BATCH:12e4},EN={WORD_MAX_LENGTH:100,DEFINITION_MAX_LENGTH:500,CONTEXT_MAX_LENGTH:1e3,COLLOCATIONS_MAX:5,COLLOCATIONS_ITEM_MAX:50},uA={MIN_EASE_FACTOR:1.3,DEFAULT_EASE_FACTOR:2.5,ONE_MINUTE:6e4,ONE_DAY:864e5,LEARNING_STEP_MINUTES:10},kl={AGAIN:0,GOOD:3,PERFECT:5},Lm={PARAPHRASE:{max:20,window:6e4},CARD_DETAILS:{max:10,window:6e4},TRANSCRIPT_ANALYSIS:{max:3,window:6e4}};function cA(i,e){const n=Date.now(),{ONE_MINUTE:s,ONE_DAY:o,MIN_EASE_FACTOR:u,DEFAULT_EASE_FACTOR:d,LEARNING_STEP_MINUTES:y}=uA,E=Number(e);if(!Number.isInteger(E)||E<kl.AGAIN||E>kl.PERFECT)throw new Error(`Grade must be an integer between ${kl.AGAIN} and ${kl.PERFECT}. Received: ${e}`);const b=i.easeFactor??d,C=i.reviewCount??0;let D=i.interval??0;E>=kl.GOOD?D=D===0?1:D===1?6:Math.round(D*b):D=0;const N=.1-(5-E)*(.08+(5-E)*.02);let X=Math.max(u,b+N);X=Math.round(X*100)/100;const de=D===0?n+y*s:n+D*o,be=E>=kl.GOOD?"review":"learning";return{easeFactor:X,interval:D,nextReview:de,status:be,reviewCount:C+1,updatedAt:n}}function fA(){const[i,e]=Ce.useState(!1),[n,s]=Ce.useState(null),[o,u]=Ce.useState(null),d=Ce.useRef(null),y=Ce.useRef([]);return Ce.useEffect(()=>()=>{n&&URL.revokeObjectURL(n)},[n]),{isRecording:i,audioUrl:n,error:o,startRecording:async()=>{try{u(null);const D=await navigator.mediaDevices.getUserMedia({audio:!0});d.current=new MediaRecorder(D),y.current=[],d.current.ondataavailable=N=>{N.data.size>0&&y.current.push(N.data)},d.current.onstop=()=>{const N=new Blob(y.current,{type:"audio/webm"}),X=URL.createObjectURL(N);s(X),D.getTracks().forEach(de=>de.stop())},d.current.start(),e(!0)}catch(D){console.error("Error accessing microphone:",D),u("Microphone access denied. Please check your permissions.")}},stopRecording:()=>{d.current&&i&&(d.current.stop(),e(!1))},clearRecording:()=>{n&&(URL.revokeObjectURL(n),s(null)),e(!1),u(null)}}}var L_;(function(i){i.STRING="string",i.NUMBER="number",i.INTEGER="integer",i.BOOLEAN="boolean",i.ARRAY="array",i.OBJECT="object"})(L_||(L_={}));var U_;(function(i){i.LANGUAGE_UNSPECIFIED="language_unspecified",i.PYTHON="python"})(U_||(U_={}));var z_;(function(i){i.OUTCOME_UNSPECIFIED="outcome_unspecified",i.OUTCOME_OK="outcome_ok",i.OUTCOME_FAILED="outcome_failed",i.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(z_||(z_={}));const j_=["user","model","function","system"];var B_;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(B_||(B_={}));var q_;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(q_||(q_={}));var H_;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(H_||(H_={}));var F_;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER"})(F_||(F_={}));var Ju;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.OTHER="OTHER"})(Ju||(Ju={}));var K_;(function(i){i.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",i.RETRIEVAL_QUERY="RETRIEVAL_QUERY",i.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",i.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",i.CLASSIFICATION="CLASSIFICATION",i.CLUSTERING="CLUSTERING"})(K_||(K_={}));var G_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(G_||(G_={}));var Y_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Y_||(Y_={}));class hr extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Vl extends hr{constructor(e,n){super(e),this.response=n}}class OE extends hr{constructor(e,n,s,o){super(e),this.status=n,this.statusText=s,this.errorDetails=o}}class ro extends hr{}class DE extends hr{}const hA="https://generativelanguage.googleapis.com",dA="v1beta",mA="0.24.1",pA="genai-js";var Ko;(function(i){i.GENERATE_CONTENT="generateContent",i.STREAM_GENERATE_CONTENT="streamGenerateContent",i.COUNT_TOKENS="countTokens",i.EMBED_CONTENT="embedContent",i.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Ko||(Ko={}));class gA{constructor(e,n,s,o,u){this.model=e,this.task=n,this.apiKey=s,this.stream=o,this.requestOptions=u}toString(){var e,n;const s=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||dA;let u=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||hA}/${s}/${this.model}:${this.task}`;return this.stream&&(u+="?alt=sse"),u}}function yA(i){const e=[];return i?.apiClient&&e.push(i.apiClient),e.push(`${pA}/${mA}`),e.join(" ")}async function vA(i){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",yA(i.requestOptions)),n.append("x-goog-api-key",i.apiKey);let s=(e=i.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(o){throw new ro(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${o.message}`)}for(const[o,u]of s.entries()){if(o==="x-goog-api-key")throw new ro(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new ro(`Header name ${o} can only be set using the apiClient field`);n.append(o,u)}}return n}async function _A(i,e,n,s,o,u){const d=new gA(i,e,n,s,u);return{url:d.toString(),fetchOptions:Object.assign(Object.assign({},SA(u)),{method:"POST",headers:await vA(d),body:o})}}async function vc(i,e,n,s,o,u={},d=fetch){const{url:y,fetchOptions:E}=await _A(i,e,n,s,o,u);return EA(y,E,d)}async function EA(i,e,n=fetch){let s;try{s=await n(i,e)}catch(o){bA(o,i)}return s.ok||await TA(s,i),s}function bA(i,e){let n=i;throw n.name==="AbortError"?(n=new DE(`Request aborted when fetching ${e.toString()}: ${i.message}`),n.stack=i.stack):i instanceof OE||i instanceof ro||(n=new hr(`Error fetching from ${e.toString()}: ${i.message}`),n.stack=i.stack),n}async function TA(i,e){let n="",s;try{const o=await i.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,s=o.error.details)}catch{}throw new OE(`Error fetching from ${e.toString()}: [${i.status} ${i.statusText}] ${n}`,i.status,i.statusText,s)}function SA(i){const e={};if(i?.signal!==void 0||i?.timeout>=0){const n=new AbortController;i?.timeout>=0&&setTimeout(()=>n.abort(),i.timeout),i?.signal&&i.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}function Ip(i){return i.text=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Gf(i.candidates[0]))throw new Vl(`${Ja(i)}`,i);return AA(i)}else if(i.promptFeedback)throw new Vl(`Text not available. ${Ja(i)}`,i);return""},i.functionCall=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Gf(i.candidates[0]))throw new Vl(`${Ja(i)}`,i);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Q_(i)[0]}else if(i.promptFeedback)throw new Vl(`Function call not available. ${Ja(i)}`,i)},i.functionCalls=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Gf(i.candidates[0]))throw new Vl(`${Ja(i)}`,i);return Q_(i)}else if(i.promptFeedback)throw new Vl(`Function call not available. ${Ja(i)}`,i)},i}function AA(i){var e,n,s,o;const u=[];if(!((n=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const d of(o=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)d.text&&u.push(d.text),d.executableCode&&u.push("\n```"+d.executableCode.language+`
`+d.executableCode.code+"\n```\n"),d.codeExecutionResult&&u.push("\n```\n"+d.codeExecutionResult.output+"\n```\n");return u.length>0?u.join(""):""}function Q_(i){var e,n,s,o;const u=[];if(!((n=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const d of(o=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)d.functionCall&&u.push(d.functionCall);if(u.length>0)return u}const wA=[Ju.RECITATION,Ju.SAFETY,Ju.LANGUAGE];function Gf(i){return!!i.finishReason&&wA.includes(i.finishReason)}function Ja(i){var e,n,s;let o="";if((!i.candidates||i.candidates.length===0)&&i.promptFeedback)o+="Response was blocked",!((e=i.promptFeedback)===null||e===void 0)&&e.blockReason&&(o+=` due to ${i.promptFeedback.blockReason}`),!((n=i.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${i.promptFeedback.blockReasonMessage}`);else if(!((s=i.candidates)===null||s===void 0)&&s[0]){const u=i.candidates[0];Gf(u)&&(o+=`Candidate was blocked due to ${u.finishReason}`,u.finishMessage&&(o+=`: ${u.finishMessage}`))}return o}function ac(i){return this instanceof ac?(this.v=i,this):new ac(i)}function RA(i,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(i,e||[]),o,u=[];return o={},d("next"),d("throw"),d("return"),o[Symbol.asyncIterator]=function(){return this},o;function d(N){s[N]&&(o[N]=function(X){return new Promise(function(de,be){u.push([N,X,de,be])>1||y(N,X)})})}function y(N,X){try{E(s[N](X))}catch(de){D(u[0][3],de)}}function E(N){N.value instanceof ac?Promise.resolve(N.value.v).then(b,C):D(u[0][2],N)}function b(N){y("next",N)}function C(N){y("throw",N)}function D(N,X){N(X),u.shift(),u.length&&y(u[0][0],u[0][1])}}const $_=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function CA(i){const e=i.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=DA(e),[s,o]=n.tee();return{stream:OA(s),response:IA(o)}}async function IA(i){const e=[],n=i.getReader();for(;;){const{done:s,value:o}=await n.read();if(s)return Ip(xA(e));e.push(o)}}function OA(i){return RA(this,arguments,function*(){const n=i.getReader();for(;;){const{value:s,done:o}=yield ac(n.read());if(o)break;yield yield ac(Ip(s))}})}function DA(i){const e=i.getReader();return new ReadableStream({start(s){let o="";return u();function u(){return e.read().then(({value:d,done:y})=>{if(y){if(o.trim()){s.error(new hr("Failed to parse stream"));return}s.close();return}o+=d;let E=o.match($_),b;for(;E;){try{b=JSON.parse(E[1])}catch{s.error(new hr(`Error parsing JSON response: "${E[1]}"`));return}s.enqueue(b),o=o.substring(E[0].length),E=o.match($_)}return u()}).catch(d=>{let y=d;throw y.stack=d.stack,y.name==="AbortError"?y=new DE("Request aborted when reading from the stream"):y=new hr("Error reading from the stream"),y})}}})}function xA(i){const e=i[i.length-1],n={promptFeedback:e?.promptFeedback};for(const s of i){if(s.candidates){let o=0;for(const u of s.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=u.citationMetadata,n.candidates[o].groundingMetadata=u.groundingMetadata,n.candidates[o].finishReason=u.finishReason,n.candidates[o].finishMessage=u.finishMessage,n.candidates[o].safetyRatings=u.safetyRatings,u.content&&u.content.parts){n.candidates[o].content||(n.candidates[o].content={role:u.content.role||"user",parts:[]});const d={};for(const y of u.content.parts)y.text&&(d.text=y.text),y.functionCall&&(d.functionCall=y.functionCall),y.executableCode&&(d.executableCode=y.executableCode),y.codeExecutionResult&&(d.codeExecutionResult=y.codeExecutionResult),Object.keys(d).length===0&&(d.text=""),n.candidates[o].content.parts.push(d)}o++}s.usageMetadata&&(n.usageMetadata=s.usageMetadata)}return n}async function xE(i,e,n,s){const o=await vc(e,Ko.STREAM_GENERATE_CONTENT,i,!0,JSON.stringify(n),s);return CA(o)}async function NE(i,e,n,s){const u=await(await vc(e,Ko.GENERATE_CONTENT,i,!1,JSON.stringify(n),s)).json();return{response:Ip(u)}}function ME(i){if(i!=null){if(typeof i=="string")return{role:"system",parts:[{text:i}]};if(i.text)return{role:"system",parts:[i]};if(i.parts)return i.role?i:{role:"system",parts:i.parts}}}function oc(i){let e=[];if(typeof i=="string")e=[{text:i}];else for(const n of i)typeof n=="string"?e.push({text:n}):e.push(n);return NA(e)}function NA(i){const e={role:"user",parts:[]},n={role:"function",parts:[]};let s=!1,o=!1;for(const u of i)"functionResponse"in u?(n.parts.push(u),o=!0):(e.parts.push(u),s=!0);if(s&&o)throw new hr("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!o)throw new hr("No content is provided for sending chat message.");return s?e:n}function MA(i,e){var n;let s={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(n=e?.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=i.generateContentRequest!=null;if(i.contents){if(o)throw new ro("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=i.contents}else if(o)s=Object.assign(Object.assign({},s),i.generateContentRequest);else{const u=oc(i);s.contents=[u]}return{generateContentRequest:s}}function X_(i){let e;return i.contents?e=i:e={contents:[oc(i)]},i.systemInstruction&&(e.systemInstruction=ME(i.systemInstruction)),e}function kA(i){return typeof i=="string"||Array.isArray(i)?{content:oc(i)}:i}const J_=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],VA={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function PA(i){let e=!1;for(const n of i){const{role:s,parts:o}=n;if(!e&&s!=="user")throw new hr(`First content should be with role 'user', got ${s}`);if(!j_.includes(s))throw new hr(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(j_)}`);if(!Array.isArray(o))throw new hr("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new hr("Each Content should have at least one part");const u={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const y of o)for(const E of J_)E in y&&(u[E]+=1);const d=VA[s];for(const y of J_)if(!d.includes(y)&&u[y]>0)throw new hr(`Content with role '${s}' can't contain '${y}' part`);e=!0}}function Z_(i){var e;if(i.candidates===void 0||i.candidates.length===0)return!1;const n=(e=i.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const s of n.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}const W_="SILENT_ERROR";class LA{constructor(e,n,s,o={}){this.model=n,this.params=s,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,s?.history&&(PA(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var s,o,u,d,y,E;await this._sendPromise;const b=oc(e),C={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(y=this.params)===null||y===void 0?void 0:y.systemInstruction,cachedContent:(E=this.params)===null||E===void 0?void 0:E.cachedContent,contents:[...this._history,b]},D=Object.assign(Object.assign({},this._requestOptions),n);let N;return this._sendPromise=this._sendPromise.then(()=>NE(this._apiKey,this.model,C,D)).then(X=>{var de;if(Z_(X.response)){this._history.push(b);const be=Object.assign({parts:[],role:"model"},(de=X.response.candidates)===null||de===void 0?void 0:de[0].content);this._history.push(be)}else{const be=Ja(X.response);be&&console.warn(`sendMessage() was unsuccessful. ${be}. Inspect response object for details.`)}N=X}).catch(X=>{throw this._sendPromise=Promise.resolve(),X}),await this._sendPromise,N}async sendMessageStream(e,n={}){var s,o,u,d,y,E;await this._sendPromise;const b=oc(e),C={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(y=this.params)===null||y===void 0?void 0:y.systemInstruction,cachedContent:(E=this.params)===null||E===void 0?void 0:E.cachedContent,contents:[...this._history,b]},D=Object.assign(Object.assign({},this._requestOptions),n),N=xE(this._apiKey,this.model,C,D);return this._sendPromise=this._sendPromise.then(()=>N).catch(X=>{throw new Error(W_)}).then(X=>X.response).then(X=>{if(Z_(X)){this._history.push(b);const de=Object.assign({},X.candidates[0].content);de.role||(de.role="model"),this._history.push(de)}else{const de=Ja(X);de&&console.warn(`sendMessageStream() was unsuccessful. ${de}. Inspect response object for details.`)}}).catch(X=>{X.message!==W_&&console.error(X)}),N}}async function UA(i,e,n,s){return(await vc(e,Ko.COUNT_TOKENS,i,!1,JSON.stringify(n),s)).json()}async function zA(i,e,n,s){return(await vc(e,Ko.EMBED_CONTENT,i,!1,JSON.stringify(n),s)).json()}async function jA(i,e,n,s){const o=n.requests.map(d=>Object.assign(Object.assign({},d),{model:e}));return(await vc(e,Ko.BATCH_EMBED_CONTENTS,i,!1,JSON.stringify({requests:o}),s)).json()}class e0{constructor(e,n,s={}){this.apiKey=e,this._requestOptions=s,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=ME(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var s;const o=X_(e),u=Object.assign(Object.assign({},this._requestOptions),n);return NE(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),u)}async generateContentStream(e,n={}){var s;const o=X_(e),u=Object.assign(Object.assign({},this._requestOptions),n);return xE(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),u)}startChat(e){var n;return new LA(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const s=MA(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return UA(this.apiKey,this.model,s,o)}async embedContent(e,n={}){const s=kA(e),o=Object.assign(Object.assign({},this._requestOptions),n);return zA(this.apiKey,this.model,s,o)}async batchEmbedContents(e,n={}){const s=Object.assign(Object.assign({},this._requestOptions),n);return jA(this.apiKey,this.model,e,s)}}class kf{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new hr("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new e0(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,s){if(!e.name)throw new ro("Cached content must contain a `name` field.");if(!e.model)throw new ro("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const d of o)if(n?.[d]&&e[d]&&n?.[d]!==e[d]){if(d==="model"){const y=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,E=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(y===E)continue}throw new ro(`Different value for "${d}" specified in modelParams (${n[d]}) and cachedContent (${e[d]})`)}const u=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new e0(this.apiKey,u,s)}}const BA={models:[{name:"gemini-2.5-flash-lite",enabled:1},{name:"gemini-2.5-flash",enabled:1},{name:"gemini-3-flash",enabled:1}]},qA={ai:BA};class Rh extends Error{constructor(e,n,s={}){super(e),this.name="AppError",this.code=n,this.details=s}}const Er={DB_ERROR:"DB_ERROR",NETWORK_ERROR:"NETWORK_ERROR",AUTH_ERROR:"AUTH_ERROR",AI_ERROR:"AI_ERROR",VALIDATION_ERROR:"VALIDATION_ERROR",RATE_LIMIT_ERROR:"RATE_LIMIT_ERROR"},Um={[Er.DB_ERROR]:"Database error. Please refresh the page and try again.",[Er.NETWORK_ERROR]:"Network error. Please check your internet connection.",[Er.AUTH_ERROR]:"Authentication failed. Please try logging in again.",[Er.AI_ERROR]:"AI service unavailable. Please check your API key in Settings.",[Er.VALIDATION_ERROR]:"Invalid input. Please check your data and try again.",[Er.RATE_LIMIT_ERROR]:"Too many requests. Please wait a moment before trying again."},HA={"auth/user-not-found":"User not found. Please check your email address.","auth/wrong-password":"Incorrect password. Please try again.","auth/email-already-in-use":"This email is already registered.","auth/weak-password":"Password is too weak. Please use a stronger password.","auth/network-request-failed":"Network error. Please check your internet connection.","auth/too-many-requests":"Too many failed attempts. Please try again later.","auth/user-disabled":"This account has been disabled.","auth/invalid-email":"Invalid email address.","auth/operation-not-allowed":"This operation is not allowed.","auth/popup-closed-by-user":"Sign-in popup was closed. Please try again."};function Ku(i,e=""){return e?console.error(`[${e}]`,i):console.error(i),i instanceof Rh?{message:i.message,code:i.code,userMessage:Um[i.code]||i.message,details:i.details}:i.code?.startsWith("auth/")?{message:i.message,code:Er.AUTH_ERROR,userMessage:HA[i.code]||"Authentication error. Please try again.",firebaseCode:i.code}:i.code?.startsWith("firestore/")?{message:i.message,code:Er.DB_ERROR,userMessage:"Database error. Please try again.",firestoreCode:i.code}:i.message?.toLowerCase().includes("network")||i.message?.toLowerCase().includes("timeout")||i.message?.toLowerCase().includes("fetch")?{message:i.message,code:Er.NETWORK_ERROR,userMessage:Um[Er.NETWORK_ERROR]}:i.name==="DatabaseError"||i.message?.includes("IndexedDB")?{message:i.message,code:Er.DB_ERROR,userMessage:Um[Er.DB_ERROR]}:{message:i.message||"An unexpected error occurred",code:"UNKNOWN_ERROR",userMessage:i.message||"Something went wrong. Please try again."}}function bN(i,e={}){return new Rh(i,Er.VALIDATION_ERROR,e)}function FA(i,e){return new Rh(`Rate limit exceeded for ${i}`,Er.RATE_LIMIT_ERROR,{operation:i,waitTime:e})}function zm(i,e={}){return new Rh(i,Er.AI_ERROR,e)}class KA{constructor(){this.apiKeyKey="gemini_api_key_byok",this.modelName=qA.ai?.models?.default||"gemini-2.5-flash",this.requestCounts=new Map,Object.keys(Lm).forEach(e=>{this.requestCounts.set(e,{count:0,resetAt:Date.now()+Lm[e].window})})}_checkRateLimit(e){const n=Date.now(),s=this.requestCounts.get(e),o=Lm[e];if(!(!s||!o)){if(n>=s.resetAt&&(s.count=0,s.resetAt=n+o.window),s.count>=o.max){const u=Math.ceil((s.resetAt-n)/1e3);throw FA(e,u)}s.count++}}getApiKey(){return localStorage.getItem(this.apiKeyKey)||sessionStorage.getItem(this.apiKeyKey)}isPersistent(){return!!localStorage.getItem(this.apiKeyKey)}setApiKey(e,n=!1){n?(localStorage.setItem(this.apiKeyKey,e),sessionStorage.removeItem(this.apiKeyKey)):(sessionStorage.setItem(this.apiKeyKey,e),localStorage.removeItem(this.apiKeyKey))}removeApiKey(){sessionStorage.removeItem(this.apiKeyKey),localStorage.removeItem(this.apiKeyKey)}hasKey(){return!!this.getApiKey()}async getParaphrase(e,n){this._checkRateLimit("PARAPHRASE");const s=this.getApiKey();if(!s)throw zm("API Key not found. Please configure it in Settings.");const u=new kf(s).getGenerativeModel({model:this.modelName}),d=`
      Role: English Language Tutor for B1/B2 learners.
      Task: Explain the word or phrase "${e}" in simple English.
      Context: "${n}"
      
      Constraints:
      1. Use simple vocabulary (CEFR B1 level).
      2. Keep it concise (under 30 words).
      3. Do NOT simply repeat the definition; explain it naturally.
      4. Output plain text only (no markdown).
    `;return this._callGemini(u,d,!1,!1,Fu.AI_PARAPHRASE)}async generateCardDetails(e){this._checkRateLimit("CARD_DETAILS");const n=this.getApiKey();if(!n)throw zm("API Key not found. Please configure it in Settings.");const o=new kf(n).getGenerativeModel({model:this.modelName}),u=`
You are an expert English teacher specializing in Vocabulary for Traditional Chinese (Taiwan) learners.
Target Input: "${e}"

**Task:**
Analyze the target input and return a JSON object. 
If the target has multiple meanings, select the **most frequent and practical meaning** for a general learner.
If the target is a phrase (e.g., "take for granted"), treat it as a single unit.

**Output Requirements (Strict JSON):**
Return ONLY a raw JSON object. Do not wrap it in markdown code blocks (no markdown formatting, no code blocks). The keys must be:

1.  "ipa": The IPA phonetic transcription.
    * **STRICTLY** use General American (US) pronunciation.
    * Use // for "bath", /o/ for "go", // for "hot".
    * Always pronounce the rhotic 'r' (/kr/).
2.  "definition": A simple, clear English definition (max 15 words) suitable for a flashcard.
3.  "translation": The Traditional Chinese (Taiwan) translation.
    * **CRITICAL:** Use Taiwan-specific vocabulary (e.g., use "" not ""; "" not "").
4.  "context": A practical, everyday English sentence containing the target "${e}".
    * Ensure the sentence context clarifies the meaning.
5.  "collocations": An array of 2-3 common collocations or related usage patterns (e.g., ["reluctant to admit", "reluctant agreement"]).

**JSON Structure:**
{
  "ipa": "String",
  "definition": "String",
  "translation": "String",
  "context": "String",
  "collocations": ["String", "String", "String"]
}
    `;return this._callGemini(o,u,!1,!0,Fu.AI_CARD_DETAILS)}async analyzeTranscript(e,n){this._checkRateLimit("TRANSCRIPT_ANALYSIS");const s=this.getApiKey();if(!s)throw zm("API Key not found. Please configure it in Settings.");const u=new kf(s).getGenerativeModel({model:this.modelName});let d="";n==="auto"?d='Select the most important vocabulary OR phrases (approx 5-10 items). Prioritize "chunks" and "collocations" over simple words if they are key to understanding.':d=`Select strictly up to ${n} most important vocabulary words or phrases.`;const y=`
You are an expert language tutor analyzing a podcast transcript for Traditional Chinese (Taiwan) learners.

**Task:**
Analyze the provided [Input Text] and extract vocabulary words, phrasal verbs, or idioms.

**Selection Criteria:**
1. Focus on **B2-C2 level words** or **idiomatic expressions** that are valuable for learning.
2. Ignore simple fillers (e.g., "you know", "like", "um") and very basic vocabulary (A1-A2 level).
3. Constraint: ${d}

**Output Requirements (Strict JSON):**
Return ONLY a raw JSON array of objects. Do not use markdown code blocks.
For each extracted item, provide:

1.  "word": The lemma (root form) of the word or the full phrase.
2.  "ipa": IPA phonetic transcription.
    * **STRICTLY** use General American (US) pronunciation.
    * Use // for "bath", /o/ for "go", // for "hot".
    * Always pronounce the rhotic 'r' (/kr/).
3.  "definition": A concise English definition **specifically matching how the word is used in the transcript**.
4.  "context": A NEW, practical sentence using the target word naturally.
5.  "translation": The Traditional Chinese (Taiwan) translation.
    * **CRITICAL:** Use Taiwan-specific vocabulary (e.g., "" not ""; "" not "").
6.  "collocations": An array of 2-3 common collocations or related usage patterns (e.g., ["reluctant to admit", "reluctant agreement"]).

**Input Text:**
"""
${e.substring(0,3e4)}
"""

**JSON Structure:**
[
  {
    "word": "String",
    "ipa": "String or null",
    "definition": "String",
	  "context": "String",
    "translation": "String",
    "collocations": ["String", "String"]
  }
]
    `;return this._callGemini(u,y,!0,!0,Fu.AI_TRANSCRIPT)}async checkSemanticSimilarity(e,n,s){const o=this.getApiKey();if(!o)return!1;const d=new kf(o).getGenerativeModel({model:this.modelName}),y=`
You are a strict linguistic expert.
Word: "${e}"

Definition/Context A: "${n}"
Definition/Context B: "${s}"

Task: Determine if Context A and Context B describe the EXACT SAME meaning or usage of the word "${e}".
If they are semantically equivalent (even if worded differently), answer "YES".
If they describe different nuances, distinct meanings (polysemy), or different parts of speech, answer "NO".

Only output "YES" or "NO".
    `;try{return(await this._callGemini(d,y,!1,!1,Fu.AI_PARAPHRASE)).toUpperCase().includes("YES")}catch(E){return console.warn("Semantic check failed, defaulting to false:",E),!1}}async _fetchWithTimeout(e,n){let s;const o=new Promise((u,d)=>{s=setTimeout(()=>{d(new Error(`Request timed out after ${n/1e3} seconds`))},n)});try{return await Promise.race([e,o])}finally{clearTimeout(s)}}async _callGemini(e,n,s=!1,o=!0,u=Fu.AI_PARAPHRASE){try{console.log(`Calling AI Model: ${this.modelName} (Timeout: ${u}ms)`);const b=(await(await this._fetchWithTimeout(e.generateContent(n),u)).response).text().replace(/```json|```/g,"").trim();if(!o)return b;let C;try{C=JSON.parse(b)}catch(N){const X=b.indexOf(s?"[":"{"),de=b.lastIndexOf(s?"]":"}")+1;if(X!==-1&&de!==-1)C=JSON.parse(b.substring(X,de));else throw N}const D=N=>{N.ipa&&(N.ipa=N.ipa.replace(new RegExp("^[/\\[]|[/\\]]$","g"),""))};return Array.isArray(C)?C.forEach(D):D(C),C}catch(d){throw console.error("AI Generation failed:",d),new Error(`AI Error: ${d.message}`)}}}const GA=new KA;function YA({context:i,word:e,definition:n}){const[s,o]=Ce.useState(!1),[u,d]=Ce.useState(0);Ce.useEffect(()=>{o(!1),d(0)},[e]);const y=Ce.useCallback(()=>{s?d(N=>Math.min(N+1,2)):o(!0)},[s]),E=N=>{N.stopPropagation(),d(X=>Math.min(X+1,2))},b=N=>{N.stopPropagation(),y()};Ce.useEffect(()=>{const N=X=>{(X.key==="h"||X.key==="H")&&!["INPUT","TEXTAREA"].includes(document.activeElement.tagName)&&y()};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[y]);const C=()=>{if(!e)return"[......]";switch(u){case 0:return"[......]";case 1:return`${e.charAt(0)}[......]`;case 2:return e;default:return"[......]"}},D=()=>{if(!i||!e)return null;const N=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),X=new RegExp(`\\b${N}\\b`,"gi"),de=i.split(X);if(de.length===1)return console.warn(`[ClozeSentence] Word "${e}" not found in context.`),oe.jsx("div",{style:{fontSize:"1.4rem"},children:i});const be=!s||u<2;return oe.jsx("div",{style:{fontSize:"1.4rem",lineHeight:"1.6",color:"#e0e0e0",textAlign:"left",position:"relative"},children:de.map((Re,He)=>oe.jsxs(CE.Fragment,{children:[Re,He<de.length-1&&oe.jsxs(oe.Fragment,{children:[oe.jsx("span",{onClick:E,className:"cloze-gap",title:u<2?"Tap to reveal more":"Fully revealed",style:{color:u>0?"#88ccca":"#666",fontWeight:"bold",margin:"0 2px 0 4px",cursor:u<2?"pointer":"default",borderBottom:u<2?`2px dashed ${u>0?"#88ccca":"#555"}`:"none",backgroundColor:u===0?"rgba(255,255,255,0.05)":"transparent",borderRadius:"4px",padding:"0 4px",transition:"all 0.2s ease",userSelect:"none",...u===2?{backgroundColor:"rgba(136, 204, 202, 0.1)",color:"#88ccca",borderBottom:"2px solid #88ccca"}:{}},children:C()}),be&&oe.jsx("span",{onClick:b,className:"hint-icon-inline",title:s?"Reveal Answer (H)":"Show Definition (H)",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",marginLeft:"2px",marginRight:"4px",padding:"2px",backgroundColor:"rgba(255, 213, 79, 0.2)",borderRadius:"50%",color:"#ffd54f",cursor:"pointer",transition:"all 0.2s ease",opacity:.8},children:oe.jsx(V_,{size:16,strokeWidth:2.5})})]})]},He))})};return oe.jsxs("div",{className:"cloze-container",style:{width:"100%",padding:"0 0.5rem",position:"relative"},children:[D(),s&&n&&oe.jsxs("div",{style:{marginTop:"1.5rem",padding:"12px",backgroundColor:"rgba(255, 213, 79, 0.08)",borderRadius:"8px",borderLeft:"3px solid #ffd54f",fontSize:"1rem",color:"#eee",textAlign:"left",animation:"fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:[oe.jsxs("strong",{style:{color:"#ffd54f",display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px",fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:[oe.jsx(V_,{size:14})," Definition"]}),n]}),oe.jsx("style",{children:`
        @keyframes fadeIn { 
          from { opacity: 0; transform: translateY(5px); } 
          to { opacity: 1; transform: translateY(0); } 
        }
        .cloze-gap:hover {
          background-color: rgba(136, 204, 202, 0.15) !important;
          color: #88ccca !important;
          border-bottom-color: #88ccca !important;
        }
        .cloze-gap:active {
          transform: scale(0.95);
        }
        .hint-icon-inline:hover {
          background-color: rgba(255, 213, 79, 0.4) !important;
          transform: scale(1.1);
          opacity: 1 !important;
        }
        .hint-icon-inline:active {
          transform: scale(0.9);
        }
      `})]})}function QA({card:i,onUpdate:e}){const[n,s]=Ce.useState(!1),[o,u]=Ce.useState(!1),[d,y]=Ce.useState(null),[E,b]=Ce.useState(!1),[C,D]=Ce.useState(()=>localStorage.getItem("gp_settings_learning_mode")||"sniper"),{isRecording:N,audioUrl:X,startRecording:de,stopRecording:be,clearRecording:Re,error:He}=fA();Ce.useEffect(()=>{if(!n)y(null),Re();else if((JSON.parse(localStorage.getItem("gp_settings_autoplay_tts"))||!1)&&i.context){const M=setTimeout(()=>{ht(i.context,{stopPropagation:()=>{}})},300);return()=>clearTimeout(M)}},[n,i.id]),Ce.useEffect(()=>{const U=()=>{D(localStorage.getItem("gp_settings_learning_mode")||"sniper")};return window.addEventListener("storage",U),()=>window.removeEventListener("storage",U)},[]);const Ye=()=>{s(!n),u(!1)},Le=(U,M)=>{M.stopPropagation();try{const dt=cA(i,U),Gt={...i,...dt};e(Gt),s(!1),u(!1)}catch(dt){console.error("Error updating card:",dt)}},it=U=>{U.stopPropagation(),u(!o)},ht=(U,M)=>{if(M&&M.stopPropagation(),!U)return;window.speechSynthesis.cancel();const dt=new SpeechSynthesisUtterance(U);dt.lang="en-US",dt.rate=1,window.speechSynthesis.speak(dt)},et=async U=>{if(U.stopPropagation(),!d){b(!0);try{const M=typeof i.context=="string"?i.context:i.context?.text||"",dt=await GA.getParaphrase(i.word,M);y(dt)}catch{y("Unable to connect to AI Coach. Check your API Key settings.")}finally{b(!1)}}},V=(i.interval||0)<3,k=()=>!(C==="reading"||!i.context||V),P=()=>{if(!k()){const M=i.status==="new"||!i.status&&(i.reviewCount||0)===0,dt=i.status==="learning"||!M&&V;return oe.jsxs(oe.Fragment,{children:[oe.jsx("h2",{style:{fontSize:"2.5rem",margin:0,fontWeight:"bold"},children:i.word}),C==="sniper"&&oe.jsxs(oe.Fragment,{children:[M&&oe.jsx("span",{style:{fontSize:"0.8rem",color:"#4caf50",marginTop:"0.5rem",display:"block",fontWeight:"bold"},children:" New Card"}),dt&&!M&&oe.jsx("span",{style:{fontSize:"0.8rem",color:"#ffb74d",marginTop:"0.5rem",display:"block",fontWeight:"bold"},children:" Learning Phase"})]})]})}return oe.jsx(YA,{context:i.context,word:i.word,definition:i.definition})},$=U=>U.stopPropagation(),z={background:"transparent",border:"none",cursor:"pointer",color:"#88ccca",padding:"4px",marginLeft:"8px",verticalAlign:"middle",transition:"opacity 0.2s",display:"inline-flex",alignItems:"center",justifyContent:"center"};return oe.jsxs("div",{className:"flashcard-container",onClick:Ye,style:{border:"1px solid #444",padding:"1.5rem",borderRadius:"12px",textAlign:"center",cursor:"pointer",minHeight:"220px",display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"#25262b",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"transform 0.2s",color:"#e0e0e0",position:"relative",maxHeight:"75vh",overflow:"hidden"},children:[!n&&oe.jsxs("div",{className:"front",children:[oe.jsxs("div",{style:{marginBottom:"1.5rem",padding:"0 10px",minHeight:"120px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[P(),oe.jsx("button",{onClick:U=>ht(k()?i.context:i.word,U),style:{...z,marginTop:"10px"},title:"Listen",children:oe.jsx(Mf,{size:24})})]}),i.ipa&&!k()&&oe.jsxs("p",{style:{fontSize:"1.2rem",color:"#88ccca",fontFamily:"monospace",margin:"0 0 1.5rem 0"},children:["/",i.ipa,"/"]}),oe.jsx("p",{style:{color:"#666",fontSize:"0.9rem"},children:"(Click to flip)"}),oe.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",fontSize:"0.8rem",color:"#555"},children:["EF: ",i.easeFactor||"2.5"," | Int: ",i.interval||0,"d"]})]}),n&&oe.jsxs("div",{className:"back",style:{display:"flex",flexDirection:"column",height:"100%"},children:[oe.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"0.5rem"},children:[oe.jsx("h2",{style:{fontSize:"1.8rem",color:"#fff",margin:0},children:i.word}),oe.jsx("button",{onClick:U=>ht(i.word,U),style:{...z,color:"#88ccca"},children:oe.jsx(Mf,{size:22})})]}),i.ipa&&oe.jsxs("p",{style:{fontSize:"1rem",color:"#888",fontFamily:"monospace",margin:"0 0 0.8rem 0"},children:["/",i.ipa,"/"]}),oe.jsxs("div",{style:{marginBottom:"0.8rem"},onClick:$,children:[oe.jsx("button",{onClick:it,style:{background:"transparent",border:"1px solid #555",color:"#888",borderRadius:"15px",padding:"2px 10px",fontSize:"0.75rem",cursor:"pointer",marginBottom:"0.2rem"},children:o?"Hide Translation":"Show Translation"}),o&&oe.jsx("div",{style:{fontSize:"1.1rem",color:"#e91e63",fontWeight:"bold",marginTop:"0.5rem"},children:i.translation||"(No translation)"})]}),oe.jsxs("div",{style:{textAlign:"left",lineHeight:"1.6",flexGrow:1,overflowY:"auto",paddingRight:"4px",marginBottom:"1rem",scrollbarWidth:"thin",scrollbarColor:"#444 transparent"},onClick:$,children:[oe.jsxs("div",{style:{marginBottom:"1rem",backgroundColor:"rgba(255, 255, 255, 0.05)",padding:"10px",borderRadius:"6px",borderLeft:"4px solid #88ccca"},children:[oe.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[oe.jsx("strong",{style:{color:"#88ccca",fontSize:"0.8rem",textTransform:"uppercase"},children:"Definition"}),oe.jsx("button",{onClick:U=>ht(i.definition,U),style:{...z,marginLeft:"8px",padding:0},children:oe.jsx(Mf,{size:16})})]}),oe.jsx("div",{style:{fontSize:"1.1rem",color:"#ffffff",fontWeight:"500",lineHeight:"1.4"},children:i.definition})]}),i.collocations&&i.collocations.length>0&&oe.jsxs("div",{style:{marginBottom:"1rem",padding:"0 5px"},children:[oe.jsxs("strong",{style:{color:"#ffb74d",fontSize:"0.8rem",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"5px"},children:[oe.jsx($S,{size:12})," Collocations"]}),oe.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginTop:"5px"},children:i.collocations.map((U,M)=>oe.jsx("span",{style:{backgroundColor:"rgba(255, 183, 77, 0.1)",color:"#ffcc80",padding:"2px 8px",borderRadius:"4px",fontSize:"0.9rem",border:"1px solid rgba(255, 183, 77, 0.3)"},children:U},M))})]}),d&&oe.jsxs("div",{style:{marginBottom:"1rem",backgroundColor:"rgba(233, 30, 99, 0.1)",padding:"10px",borderRadius:"6px",borderLeft:"4px solid #e91e63",animation:"fadeIn 0.3s"},children:[oe.jsxs("strong",{style:{color:"#e91e63",fontSize:"0.8rem",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"5px"},children:[oe.jsx(P_,{size:12})," AI Tutor"]}),oe.jsx("p",{style:{margin:"5px 0 0",fontSize:"0.95rem",color:"#ffcdd2"},children:d})]}),oe.jsxs("div",{style:{padding:"0 10px"},children:[oe.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[oe.jsx("strong",{style:{color:"#aaa",fontSize:"0.8rem"},children:"Context:"}),oe.jsx("button",{onClick:U=>ht(i.context,U),style:{...z,marginLeft:"6px",color:"#aaa"},children:oe.jsx(Mf,{size:16})})]}),oe.jsx("div",{style:{marginTop:"2px"},children:oe.jsx("em",{style:{color:"#a5d6a7",fontSize:"0.95rem"},children:i.context})})]})]}),oe.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"8px",marginBottom:"1rem"},onClick:$,children:[oe.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[N?oe.jsx("button",{onClick:be,title:"Stop Recording",style:{background:"#e53935",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff",animation:"pulse 1.5s infinite"},children:oe.jsx(sA,{size:14,fill:"currentColor"})}):oe.jsx("button",{onClick:de,title:"Shadowing Record",style:{background:"#333",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff"},children:oe.jsx(eA,{size:16})}),X&&!N&&oe.jsxs(oe.Fragment,{children:[oe.jsx("audio",{src:X,style:{display:"none"},id:"shadowing-playback"}),oe.jsx("button",{onClick:()=>document.getElementById("shadowing-playback").play(),style:{background:"transparent",border:"1px solid #4caf50",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#4caf50"},children:oe.jsx(nA,{size:14,fill:"currentColor"})}),oe.jsx("button",{onClick:Re,style:{background:"transparent",border:"none",cursor:"pointer",color:"#666"},children:oe.jsx(oA,{size:16})})]}),He&&oe.jsx("span",{style:{fontSize:"0.7rem",color:"#e53935"},children:"Mic Error"})]}),oe.jsx("div",{children:oe.jsxs("button",{onClick:et,disabled:E||!!d,style:{background:"transparent",border:"1px solid #e91e63",borderRadius:"15px",padding:"4px 10px",fontSize:"0.75rem",color:"#e91e63",cursor:E||d?"default":"pointer",opacity:E||d?.5:1,display:"flex",alignItems:"center",gap:"5px"},children:[E?oe.jsx(ZS,{size:12,className:"spin"}):oe.jsx(P_,{size:12}),d?"Explained":"Explain Simply"]})})]}),oe.jsxs("div",{className:"actions",onClick:$,style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginTop:"auto",paddingTop:"0.5rem",borderTop:"1px solid #333"},children:[oe.jsxs("button",{onClick:U=>Le(1,U),style:Vf("#e53935"),title:"Reset",children:["Again ",oe.jsx("div",{style:Pf,children:"< 10m"})]}),oe.jsxs("button",{onClick:U=>Le(3,U),style:Vf("#fb8c00"),title:"Hard",children:["Hard ",oe.jsxs("div",{style:Pf,children:["~",jm(Math.round((i.interval||1)*1.2))]})]}),oe.jsxs("button",{onClick:U=>Le(4,U),style:Vf("#43a047"),title:"Good",children:["Good"," ",oe.jsx("div",{style:Pf,children:jm(Math.round((i.interval||1)*(i.easeFactor||2.5)))})]}),oe.jsxs("button",{onClick:U=>Le(5,U),style:Vf("#1e88e5"),title:"Easy",children:["Easy"," ",oe.jsx("div",{style:Pf,children:jm(Math.round((i.interval||1)*(i.easeFactor||2.5)*1.3))})]})]})]}),oe.jsx("style",{children:`
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }
        .spin { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
      `})]})}const jm=i=>i===0?"< 1d":i===1?"1d":`${i}d`,Vf=i=>({padding:"0.5rem 0.2rem",backgroundColor:i,color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"0.85rem"}),Pf={fontSize:"0.65rem",opacity:.8,marginTop:"2px"},$A=()=>{};var t0={};const kE=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},XA=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],d=i[n++],y=i[n++],E=((o&7)<<18|(u&63)<<12|(d&63)<<6|y&63)-65536;e[s++]=String.fromCharCode(55296+(E>>10)),e[s++]=String.fromCharCode(56320+(E&1023))}else{const u=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},VE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],d=o+1<i.length,y=d?i[o+1]:0,E=o+2<i.length,b=E?i[o+2]:0,C=u>>2,D=(u&3)<<4|y>>4;let N=(y&15)<<2|b>>6,X=b&63;E||(X=64,d||(N=64)),s.push(n[C],n[D],n[N],n[X])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(kE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):XA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],y=o<i.length?n[i.charAt(o)]:0;++o;const b=o<i.length?n[i.charAt(o)]:64;++o;const D=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||y==null||b==null||D==null)throw new JA;const N=u<<2|y>>4;if(s.push(N),b!==64){const X=y<<4&240|b>>2;if(s.push(X),D!==64){const de=b<<6&192|D;s.push(de)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class JA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZA=function(i){const e=kE(i);return VE.encodeByteArray(e,!0)},sh=function(i){return ZA(i).replace(/\./g,"")},PE=function(i){try{return VE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function WA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ew=()=>WA().__FIREBASE_DEFAULTS__,tw=()=>{if(typeof process>"u"||typeof t0>"u")return;const i=t0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},nw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&PE(i[1]);return e&&JSON.parse(e)},Ch=()=>{try{return $A()||ew()||tw()||nw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},LE=i=>Ch()?.emulatorHosts?.[i],rw=i=>{const e=LE(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},UE=()=>Ch()?.config,zE=i=>Ch()?.[`_${i}`];class iw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Wl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jE(i){return(await fetch(i,{credentials:"include"})).ok}function sw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[sh(JSON.stringify(n)),sh(JSON.stringify(d)),""].join(".")}const Zu={};function aw(){const i={prod:[],emulator:[]};for(const e of Object.keys(Zu))Zu[e]?i.emulator.push(e):i.prod.push(e);return i}function ow(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let n0=!1;function BE(i,e){if(typeof window>"u"||typeof document>"u"||!Wl(window.location.host)||Zu[i]===e||Zu[i]||n0)return;Zu[i]=e;function n(N){return`__firebase__banner__${N}`}const s="__firebase__banner",u=aw().prod.length>0;function d(){const N=document.getElementById(s);N&&N.remove()}function y(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function E(N,X){N.setAttribute("width","24"),N.setAttribute("id",X),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function b(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{n0=!0,d()},N}function C(N,X){N.setAttribute("id",X),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function D(){const N=ow(s),X=n("text"),de=document.getElementById(X)||document.createElement("span"),be=n("learnmore"),Re=document.getElementById(be)||document.createElement("a"),He=n("preprendIcon"),Ye=document.getElementById(He)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const Le=N.element;y(Le),C(Re,be);const it=b();E(Ye,He),Le.append(Ye,de,Re,it),document.body.appendChild(Le)}u?(de.innerText="Preview backend disconnected.",Ye.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ye.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,de.innerText="Preview backend running in this workspace."),de.setAttribute("id",X)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",D):D()}function dr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dr())}function uw(){const i=Ch()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fw(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function hw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dw(){const i=dr();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function mw(){return!uw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pw(){try{return typeof indexedDB=="object"}catch{return!1}}function gw(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const yw="FirebaseError";class ua extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=yw,Object.setPrototypeOf(this,ua.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_c.prototype.create)}}class _c{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?vw(u,s):"Error",y=`${this.serviceName}: ${d} (${o}).`;return new ua(o,y,s)}}function vw(i,e){return i.replace(_w,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const _w=/\{\$([^}]+)}/g;function Ew(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Go(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],d=e[o];if(r0(u)&&r0(d)){if(!Go(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function r0(i){return i!==null&&typeof i=="object"}function Ec(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function bw(i,e){const n=new Tw(i,e);return n.subscribe.bind(n)}class Tw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Sw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Bm),o.error===void 0&&(o.error=Bm),o.complete===void 0&&(o.complete=Bm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sw(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Bm(){}function Mi(i){return i&&i._delegate?i._delegate:i}class Yo{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const jo="[DEFAULT]";class Aw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new iw;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Rw(e))try{this.getOrInitializeService({instanceIdentifier:jo})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=jo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jo){return this.instances.has(e)}getOptions(e=jo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(u);s===y&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:ww(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=jo){return this.component?this.component.multipleInstances?e:jo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ww(i){return i===jo?void 0:i}function Rw(i){return i.instantiationMode==="EAGER"}class Cw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Aw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Tt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Tt||(Tt={}));const Iw={debug:Tt.DEBUG,verbose:Tt.VERBOSE,info:Tt.INFO,warn:Tt.WARN,error:Tt.ERROR,silent:Tt.SILENT},Ow=Tt.INFO,Dw={[Tt.DEBUG]:"log",[Tt.VERBOSE]:"log",[Tt.INFO]:"info",[Tt.WARN]:"warn",[Tt.ERROR]:"error"},xw=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=Dw[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Op{constructor(e){this.name=e,this._logLevel=Ow,this._logHandler=xw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Iw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Tt.DEBUG,...e),this._logHandler(this,Tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Tt.VERBOSE,...e),this._logHandler(this,Tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Tt.INFO,...e),this._logHandler(this,Tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Tt.WARN,...e),this._logHandler(this,Tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Tt.ERROR,...e),this._logHandler(this,Tt.ERROR,...e)}}const Nw=(i,e)=>e.some(n=>i instanceof n);let i0,s0;function Mw(){return i0||(i0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kw(){return s0||(s0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qE=new WeakMap,ep=new WeakMap,HE=new WeakMap,qm=new WeakMap,Dp=new WeakMap;function Vw(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{n(io(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&qE.set(n,i)}).catch(()=>{}),Dp.set(e,i),e}function Pw(i){if(ep.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});ep.set(i,e)}let tp={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return ep.get(i);if(e==="objectStoreNames")return i.objectStoreNames||HE.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return io(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Lw(i){tp=i(tp)}function Uw(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Hm(this),e,...n);return HE.set(s,e.sort?e.sort():[e]),io(s)}:kw().includes(i)?function(...e){return i.apply(Hm(this),e),io(qE.get(this))}:function(...e){return io(i.apply(Hm(this),e))}}function zw(i){return typeof i=="function"?Uw(i):(i instanceof IDBTransaction&&Pw(i),Nw(i,Mw())?new Proxy(i,tp):i)}function io(i){if(i instanceof IDBRequest)return Vw(i);if(qm.has(i))return qm.get(i);const e=zw(i);return e!==i&&(qm.set(i,e),Dp.set(e,i)),e}const Hm=i=>Dp.get(i);function jw(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(i,e),y=io(d);return s&&d.addEventListener("upgradeneeded",E=>{s(io(d.result),E.oldVersion,E.newVersion,io(d.transaction),E)}),n&&d.addEventListener("blocked",E=>n(E.oldVersion,E.newVersion,E)),y.then(E=>{u&&E.addEventListener("close",()=>u()),o&&E.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),y}const Bw=["get","getKey","getAll","getAllKeys","count"],qw=["put","add","delete","clear"],Fm=new Map;function a0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Fm.get(e))return Fm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=qw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Bw.includes(n)))return;const u=async function(d,...y){const E=this.transaction(d,o?"readwrite":"readonly");let b=E.store;return s&&(b=b.index(y.shift())),(await Promise.all([b[n](...y),o&&E.done]))[0]};return Fm.set(e,u),u}Lw(i=>({...i,get:(e,n,s)=>a0(e,n)||i.get(e,n,s),has:(e,n)=>!!a0(e,n)||i.has(e,n)}));class Hw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Fw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Fw(i){return i.getComponent()?.type==="VERSION"}const np="@firebase/app",o0="0.14.8";const ra=new Op("@firebase/app"),Kw="@firebase/app-compat",Gw="@firebase/analytics-compat",Yw="@firebase/analytics",Qw="@firebase/app-check-compat",$w="@firebase/app-check",Xw="@firebase/auth",Jw="@firebase/auth-compat",Zw="@firebase/database",Ww="@firebase/data-connect",eR="@firebase/database-compat",tR="@firebase/functions",nR="@firebase/functions-compat",rR="@firebase/installations",iR="@firebase/installations-compat",sR="@firebase/messaging",aR="@firebase/messaging-compat",oR="@firebase/performance",lR="@firebase/performance-compat",uR="@firebase/remote-config",cR="@firebase/remote-config-compat",fR="@firebase/storage",hR="@firebase/storage-compat",dR="@firebase/firestore",mR="@firebase/ai",pR="@firebase/firestore-compat",gR="firebase",yR="12.9.0";const rp="[DEFAULT]",vR={[np]:"fire-core",[Kw]:"fire-core-compat",[Yw]:"fire-analytics",[Gw]:"fire-analytics-compat",[$w]:"fire-app-check",[Qw]:"fire-app-check-compat",[Xw]:"fire-auth",[Jw]:"fire-auth-compat",[Zw]:"fire-rtdb",[Ww]:"fire-data-connect",[eR]:"fire-rtdb-compat",[tR]:"fire-fn",[nR]:"fire-fn-compat",[rR]:"fire-iid",[iR]:"fire-iid-compat",[sR]:"fire-fcm",[aR]:"fire-fcm-compat",[oR]:"fire-perf",[lR]:"fire-perf-compat",[uR]:"fire-rc",[cR]:"fire-rc-compat",[fR]:"fire-gcs",[hR]:"fire-gcs-compat",[dR]:"fire-fst",[pR]:"fire-fst-compat",[mR]:"fire-vertex","fire-js":"fire-js",[gR]:"fire-js-all"};const ah=new Map,_R=new Map,ip=new Map;function l0(i,e){try{i.container.addComponent(e)}catch(n){ra.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Kl(i){const e=i.name;if(ip.has(e))return ra.debug(`There were multiple attempts to register component ${e}.`),!1;ip.set(e,i);for(const n of ah.values())l0(n,i);for(const n of _R.values())l0(n,i);return!0}function xp(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Gi(i){return i==null?!1:i.settings!==void 0}const ER={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},so=new _c("app","Firebase",ER);class bR{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw so.create("app-deleted",{appName:this._name})}}const eu=yR;function FE(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:rp,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw so.create("bad-app-name",{appName:String(o)});if(n||(n=UE()),!n)throw so.create("no-options");const u=ah.get(o);if(u){if(Go(n,u.options)&&Go(s,u.config))return u;throw so.create("duplicate-app",{appName:o})}const d=new Cw(o);for(const E of ip.values())d.addComponent(E);const y=new bR(n,s,d);return ah.set(o,y),y}function KE(i=rp){const e=ah.get(i);if(!e&&i===rp&&UE())return FE();if(!e)throw so.create("no-app",{appName:i});return e}function ao(i,e,n){let s=vR[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ra.warn(d.join(" "));return}Kl(new Yo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const TR="firebase-heartbeat-database",SR=1,lc="firebase-heartbeat-store";let Km=null;function GE(){return Km||(Km=jw(TR,SR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(lc)}catch(n){console.warn(n)}}}}).catch(i=>{throw so.create("idb-open",{originalErrorMessage:i.message})})),Km}async function AR(i){try{const n=(await GE()).transaction(lc),s=await n.objectStore(lc).get(YE(i));return await n.done,s}catch(e){if(e instanceof ua)ra.warn(e.message);else{const n=so.create("idb-get",{originalErrorMessage:e?.message});ra.warn(n.message)}}}async function u0(i,e){try{const s=(await GE()).transaction(lc,"readwrite");await s.objectStore(lc).put(e,YE(i)),await s.done}catch(n){if(n instanceof ua)ra.warn(n.message);else{const s=so.create("idb-set",{originalErrorMessage:n?.message});ra.warn(s.message)}}}function YE(i){return`${i.name}!${i.options.appId}`}const wR=1024,RR=30;class CR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new OR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=c0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>RR){const o=DR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ra.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=c0(),{heartbeatsToSend:n,unsentEntries:s}=IR(this._heartbeatsCache.heartbeats),o=sh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ra.warn(e),""}}}function c0(){return new Date().toISOString().substring(0,10)}function IR(i,e=wR){const n=[];let s=i.slice();for(const o of i){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),f0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),f0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class OR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pw()?gw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return u0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return u0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function f0(i){return sh(JSON.stringify({version:2,heartbeats:i})).length}function DR(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function xR(i){Kl(new Yo("platform-logger",e=>new Hw(e),"PRIVATE")),Kl(new Yo("heartbeat",e=>new CR(e),"PRIVATE")),ao(np,o0,i),ao(np,o0,"esm2020"),ao("fire-js","")}xR("");var NR="firebase",MR="12.9.0";ao(NR,MR,"app");function QE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kR=QE,$E=new _c("auth","Firebase",QE());const oh=new Op("@firebase/auth");function VR(i,...e){oh.logLevel<=Tt.WARN&&oh.warn(`Auth (${eu}): ${i}`,...e)}function Yf(i,...e){oh.logLevel<=Tt.ERROR&&oh.error(`Auth (${eu}): ${i}`,...e)}function vs(i,...e){throw Mp(i,...e)}function $i(i,...e){return Mp(i,...e)}function Np(i,e,n){const s={...kR(),[e]:n};return new _c("auth","Firebase",s).create(e,{appName:i.name})}function Ho(i){return Np(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function PR(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&vs(i,"argument-error"),Np(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mp(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return $E.create(i,...e)}function We(i,e,...n){if(!i)throw Mp(e,...n)}function ea(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Yf(e),new Error(e)}function ia(i,e){i||ea(e)}function sp(){return typeof self<"u"&&self.location?.href||""}function LR(){return h0()==="http:"||h0()==="https:"}function h0(){return typeof self<"u"&&self.location?.protocol||null}function UR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LR()||fw()||"connection"in navigator)?navigator.onLine:!0}function zR(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class bc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ia(n>e,"Short delay should be less than long delay!"),this.isMobile=lw()||hw()}get(){return UR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function kp(i,e){ia(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class XE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ea("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ea("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ea("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const jR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const BR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qR=new bc(3e4,6e4);function Vp(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function tu(i,e,n,s,o={}){return JE(i,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const y=Ec({key:i.config.apiKey,...d}).slice(1),E=await i._getAdditionalHeaders();E["Content-Type"]="application/json",i.languageCode&&(E["X-Firebase-Locale"]=i.languageCode);const b={method:e,headers:E,...u};return cw()||(b.referrerPolicy="no-referrer"),i.emulatorConfig&&Wl(i.emulatorConfig.host)&&(b.credentials="include"),XE.fetch()(await ZE(i,i.config.apiHost,n,y),b)})}async function JE(i,e,n){i._canInitEmulator=!1;const s={...jR,...e};try{const o=new FR(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Lf(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const y=u.ok?d.errorMessage:d.error.message,[E,b]=y.split(" : ");if(E==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lf(i,"credential-already-in-use",d);if(E==="EMAIL_EXISTS")throw Lf(i,"email-already-in-use",d);if(E==="USER_DISABLED")throw Lf(i,"user-disabled",d);const C=s[E]||E.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw Np(i,C,b);vs(i,C)}}catch(o){if(o instanceof ua)throw o;vs(i,"network-request-failed",{message:String(o)})}}async function HR(i,e,n,s,o={}){const u=await tu(i,e,n,s,o);return"mfaPendingCredential"in u&&vs(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function ZE(i,e,n,s){const o=`${e}${n}?${s}`,u=i,d=u.config.emulator?kp(i.config,o):`${i.config.apiScheme}://${o}`;return BR.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}class FR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s($i(this.auth,"network-request-failed")),qR.get())})}}function Lf(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=$i(i,e,s);return o.customData._tokenResponse=n,o}async function KR(i,e){return tu(i,"POST","/v1/accounts:delete",e)}async function lh(i,e){return tu(i,"POST","/v1/accounts:lookup",e)}function Wu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GR(i,e=!1){const n=Mi(i),s=await n.getIdToken(e),o=Pp(s);We(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:s,authTime:Wu(Gm(o.auth_time)),issuedAtTime:Wu(Gm(o.iat)),expirationTime:Wu(Gm(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Gm(i){return Number(i)*1e3}function Pp(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return Yf("JWT malformed, contained fewer than 3 sections"),null;try{const o=PE(n);return o?JSON.parse(o):(Yf("Failed to decode base64 JWT payload"),null)}catch(o){return Yf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function d0(i){const e=Pp(i);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function uc(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ua&&YR(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function YR({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class QR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ap{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wu(this.lastLoginAt),this.creationTime=Wu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function uh(i){const e=i.auth,n=await i.getIdToken(),s=await uc(i,lh(e,{idToken:n}));We(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?WE(o.providerUserInfo):[],d=XR(i.providerData,u),y=i.isAnonymous,E=!(i.email&&o.passwordHash)&&!d?.length,b=y?E:!1,C={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new ap(o.createdAt,o.lastLoginAt),isAnonymous:b};Object.assign(i,C)}async function $R(i){const e=Mi(i);await uh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XR(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function WE(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function JR(i,e){const n=await JE(i,{},async()=>{const s=Ec({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,d=await ZE(i,o,"/v1/token",`key=${u}`),y=await i._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const E={method:"POST",headers:y,body:s};return i.emulatorConfig&&Wl(i.emulatorConfig.host)&&(E.credentials="include"),XE.fetch()(d,E)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZR(i,e){return tu(i,"POST","/v2/accounts:revokeToken",Vp(i,e))}class jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):d0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){We(e.length!==0,"internal-error");const n=d0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await JR(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new jl;return s&&(We(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(We(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(We(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jl,this.toJSON())}_performRefresh(){return ea("not implemented")}}function Xa(i,e){We(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Yi{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new QR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ap(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await uc(this,this.stsTokenManager.getToken(this.auth,e));return We(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return GR(this,e)}reload(){return $R(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Yi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await uh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gi(this.auth.app))return Promise.reject(Ho(this.auth));const e=await this.getIdToken();return await uc(this,KR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,y=n.tenantId??void 0,E=n._redirectEventId??void 0,b=n.createdAt??void 0,C=n.lastLoginAt??void 0,{uid:D,emailVerified:N,isAnonymous:X,providerData:de,stsTokenManager:be}=n;We(D&&be,e,"internal-error");const Re=jl.fromJSON(this.name,be);We(typeof D=="string",e,"internal-error"),Xa(s,e.name),Xa(o,e.name),We(typeof N=="boolean",e,"internal-error"),We(typeof X=="boolean",e,"internal-error"),Xa(u,e.name),Xa(d,e.name),Xa(y,e.name),Xa(E,e.name),Xa(b,e.name),Xa(C,e.name);const He=new Yi({uid:D,auth:e,email:o,emailVerified:N,displayName:s,isAnonymous:X,photoURL:d,phoneNumber:u,tenantId:y,stsTokenManager:Re,createdAt:b,lastLoginAt:C});return de&&Array.isArray(de)&&(He.providerData=de.map(Ye=>({...Ye}))),E&&(He._redirectEventId=E),He}static async _fromIdTokenResponse(e,n,s=!1){const o=new jl;o.updateFromServerResponse(n);const u=new Yi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await uh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];We(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?WE(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,y=new jl;y.updateFromIdToken(s);const E=new Yi({uid:o.localId,auth:e,stsTokenManager:y,isAnonymous:d}),b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new ap(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(E,b),E}}const m0=new Map;function ta(i){ia(i instanceof Function,"Expected a class definition");let e=m0.get(i);return e?(ia(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,m0.set(i,e),e)}class eb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}eb.type="NONE";const p0=eb;function Qf(i,e,n){return`firebase:${i}:${e}:${n}`}class Bl{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Qf(this.userKey,o.apiKey,u),this.fullPersistenceKey=Qf("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await lh(this.auth,{idToken:e}).catch(()=>{});return n?Yi._fromGetAccountInfoResponse(this.auth,n,e):null}return Yi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Bl(ta(p0),e,s);const o=(await Promise.all(n.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let u=o[0]||ta(p0);const d=Qf(s,e.config.apiKey,e.name);let y=null;for(const b of n)try{const C=await b._get(d);if(C){let D;if(typeof C=="string"){const N=await lh(e,{idToken:C}).catch(()=>{});if(!N)break;D=await Yi._fromGetAccountInfoResponse(e,N,C)}else D=Yi._fromJSON(e,C);b!==u&&(y=D),u=b;break}}catch{}const E=o.filter(b=>b._shouldAllowMigration);return!u._shouldAllowMigration||!E.length?new Bl(u,e,s):(u=E[0],y&&await u._set(d,y.toJSON()),await Promise.all(n.map(async b=>{if(b!==u)try{await b._remove(d)}catch{}})),new Bl(u,e,s))}}function g0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ib(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ab(e))return"Blackberry";if(ob(e))return"Webos";if(nb(e))return"Safari";if((e.includes("chrome/")||rb(e))&&!e.includes("edge/"))return"Chrome";if(sb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function tb(i=dr()){return/firefox\//i.test(i)}function nb(i=dr()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rb(i=dr()){return/crios\//i.test(i)}function ib(i=dr()){return/iemobile/i.test(i)}function sb(i=dr()){return/android/i.test(i)}function ab(i=dr()){return/blackberry/i.test(i)}function ob(i=dr()){return/webos/i.test(i)}function Lp(i=dr()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function WR(i=dr()){return Lp(i)&&!!window.navigator?.standalone}function eC(){return dw()&&document.documentMode===10}function lb(i=dr()){return Lp(i)||sb(i)||ob(i)||ab(i)||/windows phone/i.test(i)||ib(i)}function ub(i,e=[]){let n;switch(i){case"Browser":n=g0(dr());break;case"Worker":n=`${g0(dr())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${eu}/${s}`}class tC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,y)=>{try{const E=e(u);d(E)}catch(E){y(E)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function nC(i,e={}){return tu(i,"GET","/v2/passwordPolicy",Vp(i,e))}const rC=6;class iC{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class sC{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new y0(this),this.idTokenSubscription=new y0(this),this.beforeStateQueue=new tC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$E,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ta(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Bl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lh(this,{idToken:e}),s=await Yi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Gi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=s?._redirectEventId,y=await this.tryRedirectSignIn(e);(!u||u===d)&&y?.user&&(s=y.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await uh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gi(this.app))return Promise.reject(Ho(this));const n=e?Mi(e):null;return n&&We(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gi(this.app)?Promise.reject(Ho(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gi(this.app)?Promise.reject(Ho(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ta(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nC(this),n=new iC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _c("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await ZR(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ta(e)||this._popupRedirectResolver;We(n,this,"argument-error"),this.redirectPersistenceManager=await Bl.create(this,[ta(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(y,this,"internal-error"),y.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const E=e.addObserver(n,s,o);return()=>{d=!0,E()}}else{const E=e.addObserver(n);return()=>{d=!0,E()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ub(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Gi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&VR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ih(i){return Mi(i)}class y0{constructor(e){this.auth=e,this.observer=null,this.addObserver=bw(n=>this.observer=n)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Up={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aC(i){Up=i}function oC(i){return Up.loadJS(i)}function lC(){return Up.gapiScript}function uC(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function cC(i,e){const n=xp(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Go(u,e??{}))return o;vs(o,"already-initialized")}return n.initialize({options:e})}function fC(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(ta);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function hC(i,e,n){const s=Ih(i);We(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=cb(e),{host:d,port:y}=dC(e),E=y===null?"":`:${y}`,b={url:`${u}//${d}${E}/`},C=Object.freeze({host:d,port:y,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){We(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),We(Go(b,s.config.emulator)&&Go(C,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=b,s.emulatorConfig=C,s.settings.appVerificationDisabledForTesting=!0,Wl(d)?(jE(`${u}//${d}${E}`),BE("Auth",!0)):mC()}function cb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function dC(i){const e=cb(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:v0(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:v0(d)}}}function v0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function mC(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class fb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ea("not implemented")}_getIdTokenResponse(e){return ea("not implemented")}_linkToIdToken(e,n){return ea("not implemented")}_getReauthenticationResolver(e){return ea("not implemented")}}async function ql(i,e){return HR(i,"POST","/v1/accounts:signInWithIdp",Vp(i,e))}const pC="http://localhost";class Qo extends fb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Qo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const d=new Qo(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return ql(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ql(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ql(e,n)}buildRequest(){const e={requestUri:pC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ec(n)}return e}}class zp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Tc extends zp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Za extends Tc{constructor(){super("facebook.com")}static credential(e){return Qo._fromParams({providerId:Za.PROVIDER_ID,signInMethod:Za.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Za.credentialFromTaggedObject(e)}static credentialFromError(e){return Za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Za.credential(e.oauthAccessToken)}catch{return null}}}Za.FACEBOOK_SIGN_IN_METHOD="facebook.com";Za.PROVIDER_ID="facebook.com";class Ws extends Tc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Qo._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ws.credential(n,s)}catch{return null}}}Ws.GOOGLE_SIGN_IN_METHOD="google.com";Ws.PROVIDER_ID="google.com";class Wa extends Tc{constructor(){super("github.com")}static credential(e){return Qo._fromParams({providerId:Wa.PROVIDER_ID,signInMethod:Wa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wa.credentialFromTaggedObject(e)}static credentialFromError(e){return Wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wa.credential(e.oauthAccessToken)}catch{return null}}}Wa.GITHUB_SIGN_IN_METHOD="github.com";Wa.PROVIDER_ID="github.com";class eo extends Tc{constructor(){super("twitter.com")}static credential(e,n){return Qo._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return eo.credential(n,s)}catch{return null}}}eo.TWITTER_SIGN_IN_METHOD="twitter.com";eo.PROVIDER_ID="twitter.com";class Gl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Yi._fromIdTokenResponse(e,s,o),d=_0(s);return new Gl({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=_0(s);return new Gl({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function _0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class ch extends ua{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,ch.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new ch(e,n,s,o)}}function hb(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?ch._fromErrorAndOperation(i,u,e,s):u})}async function gC(i,e,n=!1){const s=await uc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Gl._forOperation(i,"link",s)}async function yC(i,e,n=!1){const{auth:s}=i;if(Gi(s.app))return Promise.reject(Ho(s));const o="reauthenticate";try{const u=await uc(i,hb(s,o,e,i),n);We(u.idToken,s,"internal-error");const d=Pp(u.idToken);We(d,s,"internal-error");const{sub:y}=d;return We(i.uid===y,s,"user-mismatch"),Gl._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&vs(s,"user-mismatch"),u}}async function vC(i,e,n=!1){if(Gi(i.app))return Promise.reject(Ho(i));const s="signIn",o=await hb(i,s,e),u=await Gl._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}function _C(i,e,n,s){return Mi(i).onIdTokenChanged(e,n,s)}function EC(i,e,n){return Mi(i).beforeAuthStateChanged(e,n)}function bC(i,e,n,s){return Mi(i).onAuthStateChanged(e,n,s)}function E0(i){return Mi(i).signOut()}const fh="__sak";class db{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fh,"1"),this.storage.removeItem(fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const TC=1e3,SC=10;class mb extends db{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,y,E)=>{this.notifyListeners(d,E)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);eC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,SC):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},TC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}mb.type="LOCAL";const AC=mb;class pb extends db{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}pb.type="SESSION";const gb=pb;function wC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Oh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Oh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const y=Array.from(d).map(async b=>b(n.origin,u)),E=await wC(y);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:E})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oh.receivers=[];function jp(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class RC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((y,E)=>{const b=jp("",20);o.port1.start();const C=setTimeout(()=>{E(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(D){const N=D;if(N.data.eventId===b)switch(N.data.status){case"ack":clearTimeout(C),u=setTimeout(()=>{E(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),y(N.data.response);break;default:clearTimeout(C),clearTimeout(u),E(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:b,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ms(){return window}function CC(i){ms().location.href=i}function yb(){return typeof ms().WorkerGlobalScope<"u"&&typeof ms().importScripts=="function"}async function IC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OC(){return navigator?.serviceWorker?.controller||null}function DC(){return yb()?self:null}const vb="firebaseLocalStorageDb",xC=1,hh="firebaseLocalStorage",_b="fbase_key";class Sc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dh(i,e){return i.transaction([hh],e?"readwrite":"readonly").objectStore(hh)}function NC(){const i=indexedDB.deleteDatabase(vb);return new Sc(i).toPromise()}function op(){const i=indexedDB.open(vb,xC);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(hh,{keyPath:_b})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(hh)?e(s):(s.close(),await NC(),e(await op()))})})}async function b0(i,e,n){const s=Dh(i,!0).put({[_b]:e,value:n});return new Sc(s).toPromise()}async function MC(i,e){const n=Dh(i,!1).get(e),s=await new Sc(n).toPromise();return s===void 0?null:s.value}function T0(i,e){const n=Dh(i,!0).delete(e);return new Sc(n).toPromise()}const kC=800,VC=3;class Eb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await op(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>VC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oh._getInstance(DC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await IC(),!this.activeServiceWorker)return;this.sender=new RC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await op();return await b0(e,fh,"1"),await T0(e,fh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>b0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>MC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>T0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Dh(o,!1).getAll();return new Sc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Eb.type="LOCAL";const PC=Eb;new bc(3e4,6e4);function bb(i,e){return e?ta(e):(We(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Bp extends fb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ql(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ql(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ql(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function LC(i){return vC(i.auth,new Bp(i),i.bypassAuthState)}function UC(i){const{auth:e,user:n}=i;return We(n,e,"internal-error"),yC(n,new Bp(i),i.bypassAuthState)}async function zC(i){const{auth:e,user:n}=i;return We(n,e,"internal-error"),gC(n,new Bp(i),i.bypassAuthState)}class Tb{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:y}=e;if(d){this.reject(d);return}const E={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(E))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LC;case"linkViaPopup":case"linkViaRedirect":return zC;case"reauthViaPopup":case"reauthViaRedirect":return UC;default:vs(this.auth,"internal-error")}}resolve(e){ia(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ia(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const jC=new bc(2e3,1e4);async function BC(i,e,n){if(Gi(i.app))return Promise.reject($i(i,"operation-not-supported-in-this-environment"));const s=Ih(i);PR(i,e,zp);const o=bb(s,n);return new Bo(s,"signInViaPopup",e,o).executeNotNull()}class Bo extends Tb{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Bo.currentPopupAction&&Bo.currentPopupAction.cancel(),Bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){ia(this.filter.length===1,"Popup operations only handle one event");const e=jp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject($i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jC.get())};e()}}Bo.currentPopupAction=null;const qC="pendingRedirect",$f=new Map;class HC extends Tb{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=$f.get(this.auth._key());if(!e){try{const s=await FC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}$f.set(this.auth._key(),e)}return this.bypassAuthState||$f.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FC(i,e){const n=YC(e),s=GC(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function KC(i,e){$f.set(i._key(),e)}function GC(i){return ta(i._redirectPersistence)}function YC(i){return Qf(qC,i.config.apiKey,i.name)}async function QC(i,e,n=!1){if(Gi(i.app))return Promise.reject(Ho(i));const s=Ih(i),o=bb(s,e),d=await new HC(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const $C=600*1e3;class XC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Sb(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError($i(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$C&&this.cachedEventUids.clear(),this.cachedEventUids.has(S0(e))}saveEventToCache(e){this.cachedEventUids.add(S0(e)),this.lastProcessedEventTime=Date.now()}}function S0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Sb({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function JC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sb(i);default:return!1}}async function ZC(i,e={}){return tu(i,"GET","/v1/projects",e)}const WC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eI=/^https?/;async function tI(i){if(i.config.emulator)return;const{authorizedDomains:e}=await ZC(i);for(const n of e)try{if(nI(n))return}catch{}vs(i,"unauthorized-domain")}function nI(i){const e=sp(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!eI.test(n))return!1;if(WC.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const rI=new bc(3e4,6e4);function A0(){const i=ms().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function iI(i){return new Promise((e,n)=>{function s(){A0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{A0(),n($i(i,"network-request-failed"))},timeout:rI.get()})}if(ms().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ms().gapi?.load)s();else{const o=uC("iframefcb");return ms()[o]=()=>{gapi.load?s():n($i(i,"network-request-failed"))},oC(`${lC()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Xf=null,e})}let Xf=null;function sI(i){return Xf=Xf||iI(i),Xf}const aI=new bc(5e3,15e3),oI="__/auth/iframe",lI="emulator/auth/iframe",uI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fI(i){const e=i.config;We(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?kp(e,lI):`https://${i.config.authDomain}/${oI}`,s={apiKey:e.apiKey,appName:i.name,v:eu},o=cI.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Ec(s).slice(1)}`}async function hI(i){const e=await sI(i),n=ms().gapi;return We(n,i,"internal-error"),e.open({where:document.body,url:fI(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uI,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=$i(i,"network-request-failed"),y=ms().setTimeout(()=>{u(d)},aI.get());function E(){ms().clearTimeout(y),o(s)}s.ping(E).then(E,()=>{u(d)})}))}const dI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mI=500,pI=600,gI="_blank",yI="http://localhost";class w0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vI(i,e,n,s=mI,o=pI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let y="";const E={...dI,width:s.toString(),height:o.toString(),top:u,left:d},b=dr().toLowerCase();n&&(y=rb(b)?gI:n),tb(b)&&(e=e||yI,E.scrollbars="yes");const C=Object.entries(E).reduce((N,[X,de])=>`${N}${X}=${de},`,"");if(WR(b)&&y!=="_self")return _I(e||"",y),new w0(null);const D=window.open(e||"",y,C);We(D,i,"popup-blocked");try{D.focus()}catch{}return new w0(D)}function _I(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const EI="__/auth/handler",bI="emulator/auth/handler",TI=encodeURIComponent("fac");async function R0(i,e,n,s,o,u){We(i.config.authDomain,i,"auth-domain-config-required"),We(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:eu,eventId:o};if(e instanceof zp){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",Ew(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[C,D]of Object.entries({}))d[C]=D}if(e instanceof Tc){const C=e.getScopes().filter(D=>D!=="");C.length>0&&(d.scopes=C.join(","))}i.tenantId&&(d.tid=i.tenantId);const y=d;for(const C of Object.keys(y))y[C]===void 0&&delete y[C];const E=await i._getAppCheckToken(),b=E?`#${TI}=${encodeURIComponent(E)}`:"";return`${SI(i)}?${Ec(y).slice(1)}${b}`}function SI({config:i}){return i.emulator?kp(i,bI):`https://${i.authDomain}/${EI}`}const Ym="webStorageSupport";class AI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gb,this._completeRedirectFn=QC,this._overrideRedirectResult=KC}async _openPopup(e,n,s,o){ia(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await R0(e,n,s,sp(),o);return vI(e,u,jp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await R0(e,n,s,sp(),o);return CC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ia(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await hI(e),s=new XC(e);return n.register("authEvent",o=>(We(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ym,{type:Ym},o=>{const u=o?.[0]?.[Ym];u!==void 0&&n(!!u),vs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lb()||nb()||Lp()}}const wI=AI;var C0="@firebase/auth",I0="1.12.0";class RI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function CI(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function II(i){Kl(new Yo("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:y}=s.options;We(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const E={apiKey:d,authDomain:y,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ub(i)},b=new sC(s,o,u,E);return fC(b,n),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Kl(new Yo("auth-internal",e=>{const n=Ih(e.getProvider("auth").getImmediate());return(s=>new RI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ao(C0,I0,CI(i)),ao(C0,I0,"esm2020")}const OI=300,DI=zE("authIdTokenMaxAge")||OI;let O0=null;const xI=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>DI)return;const o=n?.token;O0!==o&&(O0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function NI(i=KE()){const e=xp(i,"auth");if(e.isInitialized())return e.getImmediate();const n=cC(i,{popupRedirectResolver:wI,persistence:[PC,AC,gb]}),s=zE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=xI(u.toString());EC(n,d,()=>d(n.currentUser)),_C(n,y=>d(y))}}const o=LE("auth");return o&&hC(n,`http://${o}`),n}function MI(){return document.getElementsByTagName("head")?.[0]??document}aC({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=$i("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",MI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});II("Browser");var D0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var oo,Ab;(function(){var i;function e(V,k){function P(){}P.prototype=k.prototype,V.F=k.prototype,V.prototype=new P,V.prototype.constructor=V,V.D=function($,z,U){for(var M=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)M[dt-2]=arguments[dt];return k.prototype[z].apply($,M)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(V,k,P){P||(P=0);const $=Array(16);if(typeof k=="string")for(var z=0;z<16;++z)$[z]=k.charCodeAt(P++)|k.charCodeAt(P++)<<8|k.charCodeAt(P++)<<16|k.charCodeAt(P++)<<24;else for(z=0;z<16;++z)$[z]=k[P++]|k[P++]<<8|k[P++]<<16|k[P++]<<24;k=V.g[0],P=V.g[1],z=V.g[2];let U=V.g[3],M;M=k+(U^P&(z^U))+$[0]+3614090360&4294967295,k=P+(M<<7&4294967295|M>>>25),M=U+(z^k&(P^z))+$[1]+3905402710&4294967295,U=k+(M<<12&4294967295|M>>>20),M=z+(P^U&(k^P))+$[2]+606105819&4294967295,z=U+(M<<17&4294967295|M>>>15),M=P+(k^z&(U^k))+$[3]+3250441966&4294967295,P=z+(M<<22&4294967295|M>>>10),M=k+(U^P&(z^U))+$[4]+4118548399&4294967295,k=P+(M<<7&4294967295|M>>>25),M=U+(z^k&(P^z))+$[5]+1200080426&4294967295,U=k+(M<<12&4294967295|M>>>20),M=z+(P^U&(k^P))+$[6]+2821735955&4294967295,z=U+(M<<17&4294967295|M>>>15),M=P+(k^z&(U^k))+$[7]+4249261313&4294967295,P=z+(M<<22&4294967295|M>>>10),M=k+(U^P&(z^U))+$[8]+1770035416&4294967295,k=P+(M<<7&4294967295|M>>>25),M=U+(z^k&(P^z))+$[9]+2336552879&4294967295,U=k+(M<<12&4294967295|M>>>20),M=z+(P^U&(k^P))+$[10]+4294925233&4294967295,z=U+(M<<17&4294967295|M>>>15),M=P+(k^z&(U^k))+$[11]+2304563134&4294967295,P=z+(M<<22&4294967295|M>>>10),M=k+(U^P&(z^U))+$[12]+1804603682&4294967295,k=P+(M<<7&4294967295|M>>>25),M=U+(z^k&(P^z))+$[13]+4254626195&4294967295,U=k+(M<<12&4294967295|M>>>20),M=z+(P^U&(k^P))+$[14]+2792965006&4294967295,z=U+(M<<17&4294967295|M>>>15),M=P+(k^z&(U^k))+$[15]+1236535329&4294967295,P=z+(M<<22&4294967295|M>>>10),M=k+(z^U&(P^z))+$[1]+4129170786&4294967295,k=P+(M<<5&4294967295|M>>>27),M=U+(P^z&(k^P))+$[6]+3225465664&4294967295,U=k+(M<<9&4294967295|M>>>23),M=z+(k^P&(U^k))+$[11]+643717713&4294967295,z=U+(M<<14&4294967295|M>>>18),M=P+(U^k&(z^U))+$[0]+3921069994&4294967295,P=z+(M<<20&4294967295|M>>>12),M=k+(z^U&(P^z))+$[5]+3593408605&4294967295,k=P+(M<<5&4294967295|M>>>27),M=U+(P^z&(k^P))+$[10]+38016083&4294967295,U=k+(M<<9&4294967295|M>>>23),M=z+(k^P&(U^k))+$[15]+3634488961&4294967295,z=U+(M<<14&4294967295|M>>>18),M=P+(U^k&(z^U))+$[4]+3889429448&4294967295,P=z+(M<<20&4294967295|M>>>12),M=k+(z^U&(P^z))+$[9]+568446438&4294967295,k=P+(M<<5&4294967295|M>>>27),M=U+(P^z&(k^P))+$[14]+3275163606&4294967295,U=k+(M<<9&4294967295|M>>>23),M=z+(k^P&(U^k))+$[3]+4107603335&4294967295,z=U+(M<<14&4294967295|M>>>18),M=P+(U^k&(z^U))+$[8]+1163531501&4294967295,P=z+(M<<20&4294967295|M>>>12),M=k+(z^U&(P^z))+$[13]+2850285829&4294967295,k=P+(M<<5&4294967295|M>>>27),M=U+(P^z&(k^P))+$[2]+4243563512&4294967295,U=k+(M<<9&4294967295|M>>>23),M=z+(k^P&(U^k))+$[7]+1735328473&4294967295,z=U+(M<<14&4294967295|M>>>18),M=P+(U^k&(z^U))+$[12]+2368359562&4294967295,P=z+(M<<20&4294967295|M>>>12),M=k+(P^z^U)+$[5]+4294588738&4294967295,k=P+(M<<4&4294967295|M>>>28),M=U+(k^P^z)+$[8]+2272392833&4294967295,U=k+(M<<11&4294967295|M>>>21),M=z+(U^k^P)+$[11]+1839030562&4294967295,z=U+(M<<16&4294967295|M>>>16),M=P+(z^U^k)+$[14]+4259657740&4294967295,P=z+(M<<23&4294967295|M>>>9),M=k+(P^z^U)+$[1]+2763975236&4294967295,k=P+(M<<4&4294967295|M>>>28),M=U+(k^P^z)+$[4]+1272893353&4294967295,U=k+(M<<11&4294967295|M>>>21),M=z+(U^k^P)+$[7]+4139469664&4294967295,z=U+(M<<16&4294967295|M>>>16),M=P+(z^U^k)+$[10]+3200236656&4294967295,P=z+(M<<23&4294967295|M>>>9),M=k+(P^z^U)+$[13]+681279174&4294967295,k=P+(M<<4&4294967295|M>>>28),M=U+(k^P^z)+$[0]+3936430074&4294967295,U=k+(M<<11&4294967295|M>>>21),M=z+(U^k^P)+$[3]+3572445317&4294967295,z=U+(M<<16&4294967295|M>>>16),M=P+(z^U^k)+$[6]+76029189&4294967295,P=z+(M<<23&4294967295|M>>>9),M=k+(P^z^U)+$[9]+3654602809&4294967295,k=P+(M<<4&4294967295|M>>>28),M=U+(k^P^z)+$[12]+3873151461&4294967295,U=k+(M<<11&4294967295|M>>>21),M=z+(U^k^P)+$[15]+530742520&4294967295,z=U+(M<<16&4294967295|M>>>16),M=P+(z^U^k)+$[2]+3299628645&4294967295,P=z+(M<<23&4294967295|M>>>9),M=k+(z^(P|~U))+$[0]+4096336452&4294967295,k=P+(M<<6&4294967295|M>>>26),M=U+(P^(k|~z))+$[7]+1126891415&4294967295,U=k+(M<<10&4294967295|M>>>22),M=z+(k^(U|~P))+$[14]+2878612391&4294967295,z=U+(M<<15&4294967295|M>>>17),M=P+(U^(z|~k))+$[5]+4237533241&4294967295,P=z+(M<<21&4294967295|M>>>11),M=k+(z^(P|~U))+$[12]+1700485571&4294967295,k=P+(M<<6&4294967295|M>>>26),M=U+(P^(k|~z))+$[3]+2399980690&4294967295,U=k+(M<<10&4294967295|M>>>22),M=z+(k^(U|~P))+$[10]+4293915773&4294967295,z=U+(M<<15&4294967295|M>>>17),M=P+(U^(z|~k))+$[1]+2240044497&4294967295,P=z+(M<<21&4294967295|M>>>11),M=k+(z^(P|~U))+$[8]+1873313359&4294967295,k=P+(M<<6&4294967295|M>>>26),M=U+(P^(k|~z))+$[15]+4264355552&4294967295,U=k+(M<<10&4294967295|M>>>22),M=z+(k^(U|~P))+$[6]+2734768916&4294967295,z=U+(M<<15&4294967295|M>>>17),M=P+(U^(z|~k))+$[13]+1309151649&4294967295,P=z+(M<<21&4294967295|M>>>11),M=k+(z^(P|~U))+$[4]+4149444226&4294967295,k=P+(M<<6&4294967295|M>>>26),M=U+(P^(k|~z))+$[11]+3174756917&4294967295,U=k+(M<<10&4294967295|M>>>22),M=z+(k^(U|~P))+$[2]+718787259&4294967295,z=U+(M<<15&4294967295|M>>>17),M=P+(U^(z|~k))+$[9]+3951481745&4294967295,V.g[0]=V.g[0]+k&4294967295,V.g[1]=V.g[1]+(z+(M<<21&4294967295|M>>>11))&4294967295,V.g[2]=V.g[2]+z&4294967295,V.g[3]=V.g[3]+U&4294967295}s.prototype.v=function(V,k){k===void 0&&(k=V.length);const P=k-this.blockSize,$=this.C;let z=this.h,U=0;for(;U<k;){if(z==0)for(;U<=P;)o(this,V,U),U+=this.blockSize;if(typeof V=="string"){for(;U<k;)if($[z++]=V.charCodeAt(U++),z==this.blockSize){o(this,$),z=0;break}}else for(;U<k;)if($[z++]=V[U++],z==this.blockSize){o(this,$),z=0;break}}this.h=z,this.o+=k},s.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var k=1;k<V.length-8;++k)V[k]=0;k=this.o*8;for(var P=V.length-8;P<V.length;++P)V[P]=k&255,k/=256;for(this.v(V),V=Array(16),k=0,P=0;P<4;++P)for(let $=0;$<32;$+=8)V[k++]=this.g[P]>>>$&255;return V};function u(V,k){var P=y;return Object.prototype.hasOwnProperty.call(P,V)?P[V]:P[V]=k(V)}function d(V,k){this.h=k;const P=[];let $=!0;for(let z=V.length-1;z>=0;z--){const U=V[z]|0;$&&U==k||(P[z]=U,$=!1)}this.g=P}var y={};function E(V){return-128<=V&&V<128?u(V,function(k){return new d([k|0],k<0?-1:0)}):new d([V|0],V<0?-1:0)}function b(V){if(isNaN(V)||!isFinite(V))return D;if(V<0)return Re(b(-V));const k=[];let P=1;for(let $=0;V>=P;$++)k[$]=V/P|0,P*=4294967296;return new d(k,0)}function C(V,k){if(V.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(V.charAt(0)=="-")return Re(C(V.substring(1),k));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=b(Math.pow(k,8));let $=D;for(let U=0;U<V.length;U+=8){var z=Math.min(8,V.length-U);const M=parseInt(V.substring(U,U+z),k);z<8?(z=b(Math.pow(k,z)),$=$.j(z).add(b(M))):($=$.j(P),$=$.add(b(M)))}return $}var D=E(0),N=E(1),X=E(16777216);i=d.prototype,i.m=function(){if(be(this))return-Re(this).m();let V=0,k=1;for(let P=0;P<this.g.length;P++){const $=this.i(P);V+=($>=0?$:4294967296+$)*k,k*=4294967296}return V},i.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(de(this))return"0";if(be(this))return"-"+Re(this).toString(V);const k=b(Math.pow(V,6));var P=this;let $="";for(;;){const z=it(P,k).g;P=He(P,z.j(k));let U=((P.g.length>0?P.g[0]:P.h)>>>0).toString(V);if(P=z,de(P))return U+$;for(;U.length<6;)U="0"+U;$=U+$}},i.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function de(V){if(V.h!=0)return!1;for(let k=0;k<V.g.length;k++)if(V.g[k]!=0)return!1;return!0}function be(V){return V.h==-1}i.l=function(V){return V=He(this,V),be(V)?-1:de(V)?0:1};function Re(V){const k=V.g.length,P=[];for(let $=0;$<k;$++)P[$]=~V.g[$];return new d(P,~V.h).add(N)}i.abs=function(){return be(this)?Re(this):this},i.add=function(V){const k=Math.max(this.g.length,V.g.length),P=[];let $=0;for(let z=0;z<=k;z++){let U=$+(this.i(z)&65535)+(V.i(z)&65535),M=(U>>>16)+(this.i(z)>>>16)+(V.i(z)>>>16);$=M>>>16,U&=65535,M&=65535,P[z]=M<<16|U}return new d(P,P[P.length-1]&-2147483648?-1:0)};function He(V,k){return V.add(Re(k))}i.j=function(V){if(de(this)||de(V))return D;if(be(this))return be(V)?Re(this).j(Re(V)):Re(Re(this).j(V));if(be(V))return Re(this.j(Re(V)));if(this.l(X)<0&&V.l(X)<0)return b(this.m()*V.m());const k=this.g.length+V.g.length,P=[];for(var $=0;$<2*k;$++)P[$]=0;for($=0;$<this.g.length;$++)for(let z=0;z<V.g.length;z++){const U=this.i($)>>>16,M=this.i($)&65535,dt=V.i(z)>>>16,Gt=V.i(z)&65535;P[2*$+2*z]+=M*Gt,Ye(P,2*$+2*z),P[2*$+2*z+1]+=U*Gt,Ye(P,2*$+2*z+1),P[2*$+2*z+1]+=M*dt,Ye(P,2*$+2*z+1),P[2*$+2*z+2]+=U*dt,Ye(P,2*$+2*z+2)}for(V=0;V<k;V++)P[V]=P[2*V+1]<<16|P[2*V];for(V=k;V<2*k;V++)P[V]=0;return new d(P,0)};function Ye(V,k){for(;(V[k]&65535)!=V[k];)V[k+1]+=V[k]>>>16,V[k]&=65535,k++}function Le(V,k){this.g=V,this.h=k}function it(V,k){if(de(k))throw Error("division by zero");if(de(V))return new Le(D,D);if(be(V))return k=it(Re(V),k),new Le(Re(k.g),Re(k.h));if(be(k))return k=it(V,Re(k)),new Le(Re(k.g),k.h);if(V.g.length>30){if(be(V)||be(k))throw Error("slowDivide_ only works with positive integers.");for(var P=N,$=k;$.l(V)<=0;)P=ht(P),$=ht($);var z=et(P,1),U=et($,1);for($=et($,2),P=et(P,2);!de($);){var M=U.add($);M.l(V)<=0&&(z=z.add(P),U=M),$=et($,1),P=et(P,1)}return k=He(V,z.j(k)),new Le(z,k)}for(z=D;V.l(k)>=0;){for(P=Math.max(1,Math.floor(V.m()/k.m())),$=Math.ceil(Math.log(P)/Math.LN2),$=$<=48?1:Math.pow(2,$-48),U=b(P),M=U.j(k);be(M)||M.l(V)>0;)P-=$,U=b(P),M=U.j(k);de(U)&&(U=N),z=z.add(U),V=He(V,M)}return new Le(z,V)}i.B=function(V){return it(this,V).h},i.and=function(V){const k=Math.max(this.g.length,V.g.length),P=[];for(let $=0;$<k;$++)P[$]=this.i($)&V.i($);return new d(P,this.h&V.h)},i.or=function(V){const k=Math.max(this.g.length,V.g.length),P=[];for(let $=0;$<k;$++)P[$]=this.i($)|V.i($);return new d(P,this.h|V.h)},i.xor=function(V){const k=Math.max(this.g.length,V.g.length),P=[];for(let $=0;$<k;$++)P[$]=this.i($)^V.i($);return new d(P,this.h^V.h)};function ht(V){const k=V.g.length+1,P=[];for(let $=0;$<k;$++)P[$]=V.i($)<<1|V.i($-1)>>>31;return new d(P,V.h)}function et(V,k){const P=k>>5;k%=32;const $=V.g.length-P,z=[];for(let U=0;U<$;U++)z[U]=k>0?V.i(U+P)>>>k|V.i(U+P+1)<<32-k:V.i(U+P);return new d(z,V.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Ab=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=b,d.fromString=C,oo=d}).apply(typeof D0<"u"?D0:typeof self<"u"?self:typeof window<"u"?window:{});var Uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var wb,Yu,Rb,Jf,lp,Cb,Ib,Ob;(function(){var i,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uf=="object"&&Uf];for(var v=0;v<c.length;++v){var S=c[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var s=n(this);function o(c,v){if(v)e:{var S=s;c=c.split(".");for(var I=0;I<c.length-1;I++){var te=c[I];if(!(te in S))break e;S=S[te]}c=c[c.length-1],I=S[c],v=v(I),v!=I&&v!=null&&e(S,c,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(v){var S=[],I;for(I in v)Object.prototype.hasOwnProperty.call(v,I)&&S.push([I,v[I]]);return S}});var u=u||{},d=this||self;function y(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function E(c,v,S){return c.call.apply(c.bind,arguments)}function b(c,v,S){return b=E,b.apply(null,arguments)}function C(c,v){var S=Array.prototype.slice.call(arguments,1);return function(){var I=S.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function D(c,v){function S(){}S.prototype=v.prototype,c.Z=v.prototype,c.prototype=new S,c.prototype.constructor=c,c.Ob=function(I,te,ae){for(var Te=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)Te[nt-2]=arguments[nt];return v.prototype[te].apply(I,Te)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function X(c){const v=c.length;if(v>0){const S=Array(v);for(let I=0;I<v;I++)S[I]=c[I];return S}return[]}function de(c,v){for(let I=1;I<arguments.length;I++){const te=arguments[I];var S=typeof te;if(S=S!="object"?S:te?Array.isArray(te)?"array":S:"null",S=="array"||S=="object"&&typeof te.length=="number"){S=c.length||0;const ae=te.length||0;c.length=S+ae;for(let Te=0;Te<ae;Te++)c[S+Te]=te[Te]}else c.push(te)}}class be{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function Re(c){d.setTimeout(()=>{throw c},0)}function He(){var c=V;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class Ye{constructor(){this.h=this.g=null}add(v,S){const I=Le.get();I.set(v,S),this.h?this.h.next=I:this.g=I,this.h=I}}var Le=new be(()=>new it,c=>c.reset());class it{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let ht,et=!1,V=new Ye,k=()=>{const c=Promise.resolve(void 0);ht=()=>{c.then(P)}};function P(){for(var c;c=He();){try{c.h.call(c.g)}catch(S){Re(S)}var v=Le;v.j(c),v.h<100&&(v.h++,c.next=v.g,v.g=c)}et=!1}function $(){this.u=this.u,this.C=this.C}$.prototype.u=!1,$.prototype.dispose=function(){this.u||(this.u=!0,this.N())},$.prototype[Symbol.dispose]=function(){this.dispose()},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const S=()=>{};d.addEventListener("test",S,v),d.removeEventListener("test",S,v)}catch{}return c})();function M(c){return/^[\s\xa0]*$/.test(c)}function dt(c,v){z.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,v)}D(dt,z),dt.prototype.init=function(c,v){const S=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget,v||(S=="mouseover"?v=c.fromElement:S=="mouseout"&&(v=c.toElement)),this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&dt.Z.h.call(this)},dt.prototype.h=function(){dt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Gt="closure_listenable_"+(Math.random()*1e6|0),ue=0;function Ie(c,v,S,I,te){this.listener=c,this.proxy=null,this.src=v,this.type=S,this.capture=!!I,this.ha=te,this.key=++ue,this.da=this.fa=!1}function je(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ze(c,v,S){for(const I in c)v.call(S,c[I],I,c)}function Me(c,v){for(const S in c)v.call(void 0,c[S],S,c)}function j(c){const v={};for(const S in c)v[S]=c[S];return v}const ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Oe(c,v){let S,I;for(let te=1;te<arguments.length;te++){I=arguments[te];for(S in I)c[S]=I[S];for(let ae=0;ae<ce.length;ae++)S=ce[ae],Object.prototype.hasOwnProperty.call(I,S)&&(c[S]=I[S])}}function Ne(c){this.src=c,this.g={},this.h=0}Ne.prototype.add=function(c,v,S,I,te){const ae=c.toString();c=this.g[ae],c||(c=this.g[ae]=[],this.h++);const Te=tt(c,v,I,te);return Te>-1?(v=c[Te],S||(v.fa=!1)):(v=new Ie(v,this.src,ae,!!I,te),v.fa=S,c.push(v)),v};function Xe(c,v){const S=v.type;if(S in c.g){var I=c.g[S],te=Array.prototype.indexOf.call(I,v,void 0),ae;(ae=te>=0)&&Array.prototype.splice.call(I,te,1),ae&&(je(v),c.g[S].length==0&&(delete c.g[S],c.h--))}}function tt(c,v,S,I){for(let te=0;te<c.length;++te){const ae=c[te];if(!ae.da&&ae.listener==v&&ae.capture==!!S&&ae.ha==I)return te}return-1}var ct="closure_lm_"+(Math.random()*1e6|0),nn={};function Qt(c,v,S,I,te){if(Array.isArray(v)){for(let ae=0;ae<v.length;ae++)Qt(c,v[ae],S,I,te);return null}return S=vo(S),c&&c[Gt]?c.J(v,S,y(I)?!!I.capture:!1,te):Be(c,v,S,!1,I,te)}function Be(c,v,S,I,te,ae){if(!v)throw Error("Invalid event type");const Te=y(te)?!!te.capture:!!te;let nt=Ts(c);if(nt||(c[ct]=nt=new Ne(c)),S=nt.add(v,S,I,Te,ae),S.proxy)return S;if(I=bs(),S.proxy=I,I.src=c,I.listener=S,c.addEventListener)U||(te=Te),te===void 0&&(te=!1),c.addEventListener(v.toString(),I,te);else if(c.attachEvent)c.attachEvent(ci(v.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return S}function bs(){function c(S){return v.call(c.src,c.listener,S)}const v=qr;return c}function wt(c,v,S,I,te){if(Array.isArray(v))for(var ae=0;ae<v.length;ae++)wt(c,v[ae],S,I,te);else I=y(I)?!!I.capture:!!I,S=vo(S),c&&c[Gt]?(c=c.i,ae=String(v).toString(),ae in c.g&&(v=c.g[ae],S=tt(v,S,I,te),S>-1&&(je(v[S]),Array.prototype.splice.call(v,S,1),v.length==0&&(delete c.g[ae],c.h--)))):c&&(c=Ts(c))&&(v=c.g[v.toString()],c=-1,v&&(c=tt(v,S,I,te)),(S=c>-1?v[c]:null)&&ui(S))}function ui(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[Gt])Xe(v.i,c);else{var S=c.type,I=c.proxy;v.removeEventListener?v.removeEventListener(S,I,c.capture):v.detachEvent?v.detachEvent(ci(S),I):v.addListener&&v.removeListener&&v.removeListener(I),(S=Ts(v))?(Xe(S,c),S.h==0&&(S.src=null,v[ct]=null)):je(c)}}}function ci(c){return c in nn?nn[c]:nn[c]="on"+c}function qr(c,v){if(c.da)c=!0;else{v=new dt(v,this);const S=c.listener,I=c.ha||c.src;c.fa&&ui(c),c=S.call(I,v)}return c}function Ts(c){return c=c[ct],c instanceof Ne?c:null}var yo="__closure_events_fn_"+(Math.random()*1e9>>>0);function vo(c){return typeof c=="function"?c:(c[yo]||(c[yo]=function(v){return c.handleEvent(v)}),c[yo])}function dn(){$.call(this),this.i=new Ne(this),this.M=this,this.G=null}D(dn,$),dn.prototype[Gt]=!0,dn.prototype.removeEventListener=function(c,v,S,I){wt(this,c,v,S,I)};function rn(c,v){var S,I=c.G;if(I)for(S=[];I;I=I.G)S.push(I);if(c=c.M,I=v.type||v,typeof v=="string")v=new z(v,c);else if(v instanceof z)v.target=v.target||c;else{var te=v;v=new z(I,c),Oe(v,te)}te=!0;let ae,Te;if(S)for(Te=S.length-1;Te>=0;Te--)ae=v.g=S[Te],te=Mn(ae,I,!0,v)&&te;if(ae=v.g=c,te=Mn(ae,I,!0,v)&&te,te=Mn(ae,I,!1,v)&&te,S)for(Te=0;Te<S.length;Te++)ae=v.g=S[Te],te=Mn(ae,I,!1,v)&&te}dn.prototype.N=function(){if(dn.Z.N.call(this),this.i){var c=this.i;for(const v in c.g){const S=c.g[v];for(let I=0;I<S.length;I++)je(S[I]);delete c.g[v],c.h--}}this.G=null},dn.prototype.J=function(c,v,S,I){return this.i.add(String(c),v,!1,S,I)},dn.prototype.K=function(c,v,S,I){return this.i.add(String(c),v,!0,S,I)};function Mn(c,v,S,I){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();let te=!0;for(let ae=0;ae<v.length;++ae){const Te=v[ae];if(Te&&!Te.da&&Te.capture==S){const nt=Te.listener,cn=Te.ha||Te.src;Te.fa&&Xe(c.i,Te),te=nt.call(cn,I)!==!1&&te}}return te&&!I.defaultPrevented}function nl(c,v){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=b(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(c,v||0)}function Ji(c){c.g=nl(()=>{c.g=null,c.i&&(c.i=!1,Ji(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class jn extends ${constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Ji(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hr(c){$.call(this),this.h=c,this.g={}}D(Hr,$);var kn=[];function Fr(c){ze(c.g,function(v,S){this.g.hasOwnProperty(S)&&ui(v)},c),c.g={}}Hr.prototype.N=function(){Hr.Z.N.call(this),Fr(this)},Hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fi=d.JSON.stringify,Ss=d.JSON.parse,ca=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function As(){}function hi(){}var nr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function yn(){z.call(this,"d")}D(yn,z);function vn(){z.call(this,"c")}D(vn,z);var De={},Zi=null;function br(){return Zi=Zi||new dn}De.Ia="serverreachability";function ws(c){z.call(this,De.Ia,c)}D(ws,z);function Se(c){const v=br();rn(v,new ws(v))}De.STAT_EVENT="statevent";function ki(c,v){z.call(this,De.STAT_EVENT,c),this.stat=v}D(ki,z);function sn(c){const v=br();rn(v,new ki(v,c))}De.Ja="timingevent";function Tr(c,v){z.call(this,De.Ja,c),this.size=v}D(Tr,z);function Kr(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},v)}function mr(){this.g=!0}mr.prototype.ua=function(){this.g=!1};function au(c,v,S,I,te,ae){c.info(function(){if(c.g)if(ae){var Te="",nt=ae.split("&");for(let Rt=0;Rt<nt.length;Rt++){var cn=nt[Rt].split("=");if(cn.length>1){const zt=cn[0];cn=cn[1];const kr=zt.split("_");Te=kr.length>=2&&kr[1]=="type"?Te+(zt+"="+cn+"&"):Te+(zt+"=redacted&")}}}else Te=null;else Te=ae;return"XMLHTTP REQ ("+I+") [attempt "+te+"]: "+v+`
`+S+`
`+Te})}function rl(c,v,S,I,te,ae,Te){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+te+"]: "+v+`
`+S+`
`+ae+" "+Te})}function Yn(c,v,S,I){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+_o(c,S)+(I?" "+I:"")})}function Sr(c,v){c.info(function(){return"TIMEOUT: "+v})}mr.prototype.info=function(){};function _o(c,v){if(!c.g)return v;if(!v)return null;try{const ae=JSON.parse(v);if(ae){for(c=0;c<ae.length;c++)if(Array.isArray(ae[c])){var S=ae[c];if(!(S.length<2)){var I=S[1];if(Array.isArray(I)&&!(I.length<1)){var te=I[0];if(te!="noop"&&te!="stop"&&te!="close")for(let Te=1;Te<I.length;Te++)I[Te]=""}}}}return fi(ae)}catch{return v}}var di={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},kt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},en;function Rs(){}D(Rs,As),Rs.prototype.g=function(){return new XMLHttpRequest},en=new Rs;function Ar(c){return encodeURIComponent(String(c))}function Cs(c){var v=1;c=c.split(":");const S=[];for(;v>0&&c.length;)S.push(c.shift()),v--;return c.length&&S.push(c.join(":")),S}function rr(c,v,S,I){this.j=c,this.i=v,this.l=S,this.S=I||1,this.V=new Hr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Gr}function Gr(){this.i=null,this.g="",this.h=!1}var Lt={},$t={};function Vn(c,v,S){c.M=1,c.A=ts(on(v)),c.u=S,c.R=!0,Vi(c,null)}function Vi(c,v){c.F=Date.now(),Bn(c),c.B=on(c.A);var S=c.B,I=c.S;Array.isArray(I)||(I=[String(I)]),pa(S.i,"t",I),c.C=0,S=c.j.L,c.h=new Gr,c.g=bn(c.j,S?v:null,!c.u),c.P>0&&(c.O=new jn(b(c.Y,c,c.g),c.P)),v=c.V,S=c.g,I=c.ba;var te="readystatechange";Array.isArray(te)||(te&&(kn[0]=te.toString()),te=kn);for(let ae=0;ae<te.length;ae++){const Te=Qt(S,te[ae],I||v.handleEvent,!1,v.h||v);if(!Te)break;v.g[Te.key]=Te}v=c.J?j(c.J):{},c.u?(c.v||(c.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,v)):(c.v="GET",c.g.ea(c.B,c.v,null,v)),Se(),au(c.i,c.v,c.B,c.l,c.S,c.u)}rr.prototype.ba=function(c){c=c.target;const v=this.O;v&&ei(c)==3?v.j():this.Y(c)},rr.prototype.Y=function(c){try{if(c==this.g)e:{const nt=ei(this.g),cn=this.g.ya(),Rt=this.g.ca();if(!(nt<3)&&(nt!=3||this.g&&(this.h.h||this.g.la()||un(this.g)))){this.K||nt!=4||cn==7||(cn==8||Rt<=0?Se(3):Se(2)),wr(this);var v=this.g.ca();this.X=v;var S=ou(this);if(this.o=v==200,rl(this.i,this.v,this.B,this.l,this.S,nt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var I,te=this.g;if((I=te.g?te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(I)){var ae=I;break t}}ae=null}if(c=ae)Yn(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wn(this,c);else{this.o=!1,this.m=3,sn(12),_n(this),It(this);break e}}if(this.R){c=!0;let zt;for(;!this.K&&this.C<S.length;)if(zt=Eo(this,S),zt==$t){nt==4&&(this.m=4,sn(14),c=!1),Yn(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==Lt){this.m=4,sn(15),Yn(this.i,this.l,S,"[Invalid Chunk]"),c=!1;break}else Yn(this.i,this.l,zt,null),wn(this,zt);if(Yr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||S.length!=0||this.h.h||(this.m=1,sn(16),c=!1),this.o=this.o&&c,!c)Yn(this.i,this.l,S,"[Invalid Chunked Response]"),_n(this),It(this);else if(S.length>0&&!this.W){this.W=!0;var Te=this.j;Te.g==this&&Te.aa&&!Te.P&&(Te.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),rs(Te),Te.P=!0,sn(11))}}else Yn(this.i,this.l,S,null),wn(this,S);nt==4&&_n(this),this.o&&!this.K&&(nt==4?qi(this.j,this):(this.o=!1,Bn(this)))}else ji(this.g),v==400&&S.indexOf("Unknown SID")>0?(this.m=3,sn(12)):(this.m=0,sn(13)),_n(this),It(this)}}}catch{}};function ou(c){if(!Yr(c))return c.g.la();const v=un(c.g);if(v==="")return"";let S="";const I=v.length,te=ei(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return _n(c),It(c),"";c.h.i=new d.TextDecoder}for(let ae=0;ae<I;ae++)c.h.h=!0,S+=c.h.i.decode(v[ae],{stream:!(te&&ae==I-1)});return v.length=0,c.h.g+=S,c.C=0,c.h.g}function Yr(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Eo(c,v){var S=c.C,I=v.indexOf(`
`,S);return I==-1?$t:(S=Number(v.substring(S,I)),isNaN(S)?Lt:(I+=1,I+S>v.length?$t:(v=v.slice(I,I+S),c.C=I+S,v)))}rr.prototype.cancel=function(){this.K=!0,_n(this)};function Bn(c){c.T=Date.now()+c.H,Is(c,c.H)}function Is(c,v){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Kr(b(c.aa,c),v)}function wr(c){c.D&&(d.clearTimeout(c.D),c.D=null)}rr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Sr(this.i,this.B),this.M!=2&&(Se(),sn(17)),_n(this),this.m=2,It(this)):Is(this,this.T-c)};function It(c){c.j.I==0||c.K||qi(c.j,c)}function _n(c){wr(c);var v=c.O;v&&typeof v.dispose=="function"&&v.dispose(),c.O=null,Fr(c.V),c.g&&(v=c.g,c.g=null,v.abort(),v.dispose())}function wn(c,v){try{var S=c.j;if(S.I!=0&&(S.g==c||Cr(S.h,c))){if(!c.L&&Cr(S.h,c)&&S.I==3){try{var I=S.Ba.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var te=I;if(te[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<c.F)_a(S),vi(S);else break e;Ei(S),sn(18)}}else S.xa=te[1],0<S.xa-S.K&&te[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=Kr(b(S.Va,S),6e3));Rr(S.h)<=1&&S.ta&&(S.ta=void 0)}else Nr(S,11)}else if((c.L||S.g==c)&&_a(S),!M(v))for(te=S.Ba.g.parse(v),v=0;v<te.length;v++){let Rt=te[v];const zt=Rt[0];if(!(zt<=S.K))if(S.K=zt,Rt=Rt[1],S.I==2)if(Rt[0]=="c"){S.M=Rt[1],S.ba=Rt[2];const kr=Rt[3];kr!=null&&(S.ka=kr,S.j.info("VER="+S.ka));const Vr=Rt[4];Vr!=null&&(S.za=Vr,S.j.info("SVER="+S.za));const yr=Rt[5];yr!=null&&typeof yr=="number"&&yr>0&&(I=1.5*yr,S.O=I,S.j.info("backChannelRequestTimeoutMs_="+I)),I=S;const ni=c.g;if(ni){const ss=ni.g?ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ss){var ae=I.h;ae.g||ss.indexOf("spdy")==-1&&ss.indexOf("quic")==-1&&ss.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(Qr(ae,ae.h),ae.h=null))}if(I.G){const Sa=ni.g?ni.g.getResponseHeader("X-HTTP-Session-Id"):null;Sa&&(I.wa=Sa,Dt(I.J,I.G,Sa))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-c.F,S.j.info("Handshake RTT: "+S.T+"ms")),I=S;var Te=c;if(I.na=Ta(I,I.L?I.ba:null,I.W),Te.L){fa(I.h,Te);var nt=Te,cn=I.O;cn&&(nt.H=cn),nt.D&&(wr(nt),Bn(nt)),I.g=Te}else Ns(I);S.i.length>0&&_i(S)}else Rt[0]!="stop"&&Rt[0]!="close"||Nr(S,7);else S.I==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?Nr(S,7):ns(S):Rt[0]!="noop"&&S.l&&S.l.qa(Rt),S.A=0)}}Se(4)}catch{}}var an=class{constructor(c,v){this.g=c,this.map=v}};function mi(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Wi(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Rr(c){return c.h?1:c.g?c.g.size:0}function Cr(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function Qr(c,v){c.g?c.g.add(v):c.h=v}function fa(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}mi.prototype.cancel=function(){if(this.i=es(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function es(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const S of c.g.values())v=v.concat(S.G);return v}return X(c.i)}var bo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lt(c,v){if(c){c=c.split("&");for(let S=0;S<c.length;S++){const I=c[S].indexOf("=");let te,ae=null;I>=0?(te=c[S].substring(0,I),ae=c[S].substring(I+1)):te=c[S],v(te,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function ir(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;c instanceof ir?(this.l=c.l,ln(this,c.j),this.o=c.o,this.g=c.g,Ir(this,c.u),this.h=c.h,ha(this,sl(c.i)),this.m=c.m):c&&(v=String(c).match(bo))?(this.l=!1,ln(this,v[1]||"",!0),this.o=yt(v[2]||""),this.g=yt(v[3]||"",!0),Ir(this,v[4]),this.h=yt(v[5]||"",!0),ha(this,v[6]||"",!0),this.m=yt(v[7]||"")):(this.l=!1,this.i=new Zr(null,this.l))}ir.prototype.toString=function(){const c=[];var v=this.j;v&&c.push($r(v,Xr,!0),":");var S=this.g;return(S||v=="file")&&(c.push("//"),(v=this.o)&&c.push($r(v,Xr,!0),"@"),c.push(Ar(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&c.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&c.push("/"),c.push($r(S,S.charAt(0)=="/"?Os:da,!0))),(S=this.i.toString())&&c.push("?",S),(S=this.m)&&c.push("#",$r(S,To)),c.join("")},ir.prototype.resolve=function(c){const v=on(this);let S=!!c.j;S?ln(v,c.j):S=!!c.o,S?v.o=c.o:S=!!c.g,S?v.g=c.g:S=c.u!=null;var I=c.h;if(S)Ir(v,c.u);else if(S=!!c.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var te=v.h.lastIndexOf("/");te!=-1&&(I=v.h.slice(0,te+1)+I)}if(te=I,te==".."||te==".")I="";else if(te.indexOf("./")!=-1||te.indexOf("/.")!=-1){I=te.lastIndexOf("/",0)==0,te=te.split("/");const ae=[];for(let Te=0;Te<te.length;){const nt=te[Te++];nt=="."?I&&Te==te.length&&ae.push(""):nt==".."?((ae.length>1||ae.length==1&&ae[0]!="")&&ae.pop(),I&&Te==te.length&&ae.push("")):(ae.push(nt),I=!0)}I=ae.join("/")}else I=te}return S?v.h=I:S=c.i.toString()!=="",S?ha(v,sl(c.i)):S=!!c.m,S&&(v.m=c.m),v};function on(c){return new ir(c)}function ln(c,v,S){c.j=S?yt(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function Ir(c,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);c.u=v}else c.u=null}function ha(c,v,S){v instanceof Zr?(c.i=v,Wr(c.i,c.l)):(S||(v=$r(v,Jr)),c.i=new Zr(v,c.l))}function Dt(c,v,S){c.i.set(v,S)}function ts(c){return Dt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function yt(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function $r(c,v,S){return typeof c=="string"?(c=encodeURI(c).replace(v,Rn),S&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Rn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Xr=/[#\/\?@]/g,da=/[#\?:]/g,Os=/[#\?]/g,Jr=/[#\?@]/g,To=/#/g;function Zr(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function Qn(c){c.g||(c.g=new Map,c.h=0,c.i&&lt(c.i,function(v,S){c.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}i=Zr.prototype,i.add=function(c,v){Qn(this),this.i=null,c=mn(this,c);let S=this.g.get(c);return S||this.g.set(c,S=[]),S.push(v),this.h+=1,this};function il(c,v){Qn(c),v=mn(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function gt(c,v){return Qn(c),v=mn(c,v),c.g.has(v)}i.forEach=function(c,v){Qn(this),this.g.forEach(function(S,I){S.forEach(function(te){c.call(v,te,I,this)},this)},this)};function ma(c,v){Qn(c);let S=[];if(typeof v=="string")gt(c,v)&&(S=S.concat(c.g.get(mn(c,v))));else for(c=Array.from(c.g.values()),v=0;v<c.length;v++)S=S.concat(c[v]);return S}i.set=function(c,v){return Qn(this),this.i=null,c=mn(this,c),gt(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},i.get=function(c,v){return c?(c=ma(this,c),c.length>0?String(c[0]):v):v};function pa(c,v,S){il(c,v),S.length>0&&(c.i=null,c.g.set(mn(c,v),X(S)),c.h+=S.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(let I=0;I<v.length;I++){var S=v[I];const te=Ar(S);S=ma(this,S);for(let ae=0;ae<S.length;ae++){let Te=te;S[ae]!==""&&(Te+="="+Ar(S[ae])),c.push(Te)}}return this.i=c.join("&")};function sl(c){const v=new Zr;return v.i=c.i,c.g&&(v.g=new Map(c.g),v.h=c.h),v}function mn(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function Wr(c,v){v&&!c.j&&(Qn(c),c.i=null,c.g.forEach(function(S,I){const te=I.toLowerCase();I!=te&&(il(this,I),pa(this,te,S))},c)),c.j=v}function sr(c,v){const S=new mr;if(d.Image){const I=new Image;I.onload=C(pr,S,"TestLoadImage: loaded",!0,v,I),I.onerror=C(pr,S,"TestLoadImage: error",!1,v,I),I.onabort=C(pr,S,"TestLoadImage: abort",!1,v,I),I.ontimeout=C(pr,S,"TestLoadImage: timeout",!1,v,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else v(!1)}function Or(c,v){const S=new mr,I=new AbortController,te=setTimeout(()=>{I.abort(),pr(S,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:I.signal}).then(ae=>{clearTimeout(te),ae.ok?pr(S,"TestPingServer: ok",!0,v):pr(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(te),pr(S,"TestPingServer: error",!1,v)})}function pr(c,v,S,I,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),I(S)}catch{}}function Pi(){this.g=new ca}function Ut(c){this.i=c.Sb||null,this.h=c.ab||!1}D(Ut,As),Ut.prototype.g=function(){return new qn(this.i,this.h)};function qn(c,v){dn.call(this),this.H=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}D(qn,dn),i=qn.prototype,i.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=v,this.readyState=1,gr(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(v.body=c),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Dr(this)),this.readyState=0},i.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;pi(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function pi(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}i.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?Dr(this):gr(this),this.readyState==3&&pi(this)}},i.Oa=function(c){this.g&&(this.response=this.responseText=c,Dr(this))},i.Na=function(c){this.g&&(this.response=c,Dr(this))},i.ga=function(){this.g&&Dr(this)};function Dr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,gr(c)}i.setRequestHeader=function(c,v){this.A.append(c,v)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,c.push(S[0]+": "+S[1]),S=v.next();return c.join(`\r
`)};function gr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(qn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function En(c){let v="";return ze(c,function(S,I){v+=I,v+=":",v+=S,v+=`\r
`}),v}function Ds(c,v,S){e:{for(I in S){var I=!1;break e}I=!0}I||(S=En(S),typeof c=="string"?S!=null&&Ar(S):Dt(c,v,S))}function mt(c){dn.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}D(mt,dn);var xr=/^https?$/i,ga=["POST","PUT"];i=mt.prototype,i.Fa=function(c){this.H=c},i.ea=function(c,v,S,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():en.g(),this.g.onreadystatechange=N(b(this.Ca,this));try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(ae){Li(this,ae);return}if(c=S||"",S=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var te in I)S.set(te,I[te]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const ae of I.keys())S.set(ae,I.get(ae));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(S.keys()).find(ae=>ae.toLowerCase()=="content-type"),te=d.FormData&&c instanceof d.FormData,!(Array.prototype.indexOf.call(ga,v,void 0)>=0)||I||te||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,Te]of S)this.g.setRequestHeader(ae,Te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(ae){Li(this,ae)}};function Li(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.o=5,Ui(c),gi(c)}function Ui(c){c.A||(c.A=!0,rn(c,"complete"),rn(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,rn(this,"complete"),rn(this,"abort"),gi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gi(this,!0)),mt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?zi(this):this.Xa())},i.Xa=function(){zi(this)};function zi(c){if(c.h&&typeof u<"u"){if(c.v&&ei(c)==4)setTimeout(c.Ca.bind(c),0);else if(rn(c,"readystatechange"),ei(c)==4){c.h=!1;try{const ae=c.ca();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var I;if(I=ae===0){let Te=String(c.D).match(bo)[1]||null;!Te&&d.self&&d.self.location&&(Te=d.self.location.protocol.slice(0,-1)),I=!xr.test(Te?Te.toLowerCase():"")}S=I}if(S)rn(c,"complete"),rn(c,"success");else{c.o=6;try{var te=ei(c)>2?c.g.statusText:""}catch{te=""}c.l=te+" ["+c.ca()+"]",Ui(c)}}finally{gi(c)}}}}function gi(c,v){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const S=c.g;c.g=null,v||rn(c,"ready");try{S.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ei(c){return c.g?c.g.readyState:0}i.ca=function(){try{return ei(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),Ss(v)}};function un(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ji(c){const v={};c=(c.g&&ei(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(M(c[I]))continue;var S=Cs(c[I]);const te=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const ae=v[te]||[];v[te]=ae,ae.push(S)}Me(v,function(I){return I.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function yi(c,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[c]||v}function ti(c){this.za=0,this.i=[],this.j=new mr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=yi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=yi("baseRetryDelayMs",5e3,c),this.Za=yi("retryDelaySeedMs",1e4,c),this.Ta=yi("forwardChannelMaxRetries",2,c),this.va=yi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new mi(c&&c.concurrentRequestLimit),this.Ba=new Pi,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ti.prototype,i.ka=8,i.I=1,i.connect=function(c,v,S,I){sn(0),this.W=c,this.H=v||{},S&&I!==void 0&&(this.H.OSID=S,this.H.OAID=I),this.F=this.X,this.J=Ta(this,null,this.W),_i(this)};function ns(c){if(ya(c),c.I==3){var v=c.V++,S=on(c.J);if(Dt(S,"SID",c.M),Dt(S,"RID",v),Dt(S,"TYPE","terminate"),Bi(c,S),v=new rr(c,c.j,v),v.M=2,v.A=ts(on(S)),S=!1,d.navigator&&d.navigator.sendBeacon)try{S=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!S&&d.Image&&(new Image().src=v.A,S=!0),S||(v.g=bn(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Bn(v)}ba(c)}function vi(c){c.g&&(rs(c),c.g.cancel(),c.g=null)}function ya(c){vi(c),c.v&&(d.clearTimeout(c.v),c.v=null),_a(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&d.clearTimeout(c.m),c.m=null)}function _i(c){if(!Wi(c.h)&&!c.m){c.m=!0;var v=c.Ea;ht||k(),et||(ht(),et=!0),V.add(v,c),c.D=0}}function va(c,v){return Rr(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=v.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Kr(b(c.Ea,c,v),Ea(c,c.D)),c.D++,!0)}i.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const te=new rr(this,this.j,c);let ae=this.o;if(this.U&&(ae?(ae=j(ae),Oe(ae,this.U)):ae=this.U),this.u!==null||this.R||(te.J=ae,ae=null),this.S)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var I=this.i[S];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,v>4096){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=So(this,te,v),S=on(this.J),Dt(S,"RID",c),Dt(S,"CVER",22),this.G&&Dt(S,"X-HTTP-Session-Id",this.G),Bi(this,S),ae&&(this.R?v="headers="+Ar(En(ae))+"&"+v:this.u&&Ds(S,this.u,ae)),Qr(this.h,te),this.Ra&&Dt(S,"TYPE","init"),this.S?(Dt(S,"$req",v),Dt(S,"SID","null"),te.U=!0,Vn(te,S,null)):Vn(te,S,v),this.I=2}}else this.I==3&&(c?xs(this,c):this.i.length==0||Wi(this.h)||xs(this))};function xs(c,v){var S;v?S=v.l:S=c.V++;const I=on(c.J);Dt(I,"SID",c.M),Dt(I,"RID",S),Dt(I,"AID",c.K),Bi(c,I),c.u&&c.o&&Ds(I,c.u,c.o),S=new rr(c,c.j,S,c.D+1),c.u===null&&(S.J=c.o),v&&(c.i=v.G.concat(c.i)),v=So(c,S,1e3),S.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Qr(c.h,S),Vn(S,I,v)}function Bi(c,v){c.H&&ze(c.H,function(S,I){Dt(v,I,S)}),c.l&&ze({},function(S,I){Dt(v,I,S)})}function So(c,v,S){S=Math.min(c.i.length,S);const I=c.l?b(c.l.Ka,c.l,c):null;e:{var te=c.i;let nt=-1;for(;;){const cn=["count="+S];nt==-1?S>0?(nt=te[0].g,cn.push("ofs="+nt)):nt=0:cn.push("ofs="+nt);let Rt=!0;for(let zt=0;zt<S;zt++){var ae=te[zt].g;const kr=te[zt].map;if(ae-=nt,ae<0)nt=Math.max(0,te[zt].g-100),Rt=!1;else try{ae="req"+ae+"_"||"";try{var Te=kr instanceof Map?kr:Object.entries(kr);for(const[Vr,yr]of Te){let ni=yr;y(yr)&&(ni=fi(yr)),cn.push(ae+Vr+"="+encodeURIComponent(ni))}}catch(Vr){throw cn.push(ae+"type="+encodeURIComponent("_badmap")),Vr}}catch{I&&I(kr)}}if(Rt){Te=cn.join("&");break e}}Te=void 0}return c=c.i.splice(0,S),v.G=c,Te}function Ns(c){if(!c.g&&!c.v){c.Y=1;var v=c.Da;ht||k(),et||(ht(),et=!0),V.add(v,c),c.A=0}}function Ei(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Kr(b(c.Da,c),Ea(c,c.A)),c.A++,!0)}i.Da=function(){if(this.v=null,Ao(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Kr(b(this.Wa,this),c)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,sn(10),vi(this),Ao(this))};function rs(c){c.B!=null&&(d.clearTimeout(c.B),c.B=null)}function Ao(c){c.g=new rr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var v=on(c.na);Dt(v,"RID","rpc"),Dt(v,"SID",c.M),Dt(v,"AID",c.K),Dt(v,"CI",c.F?"0":"1"),!c.F&&c.ia&&Dt(v,"TO",c.ia),Dt(v,"TYPE","xmlhttp"),Bi(c,v),c.u&&c.o&&Ds(v,c.u,c.o),c.O&&(c.g.H=c.O);var S=c.g;c=c.ba,S.M=1,S.A=ts(on(v)),S.u=null,S.R=!0,Vi(S,c)}i.Va=function(){this.C!=null&&(this.C=null,vi(this),Ei(this),sn(19))};function _a(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function qi(c,v){var S=null;if(c.g==v){_a(c),rs(c),c.g=null;var I=2}else if(Cr(c.h,v))S=v.G,fa(c.h,v),I=1;else return;if(c.I!=0){if(v.o)if(I==1){S=v.u?v.u.length:0,v=Date.now()-v.F;var te=c.D;I=br(),rn(I,new Tr(I,S)),_i(c)}else Ns(c);else if(te=v.m,te==3||te==0&&v.X>0||!(I==1&&va(c,v)||I==2&&Ei(c)))switch(S&&S.length>0&&(v=c.h,v.i=v.i.concat(S)),te){case 1:Nr(c,5);break;case 4:Nr(c,10);break;case 3:Nr(c,6);break;default:Nr(c,2)}}}function Ea(c,v){let S=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(S*=2),S*v}function Nr(c,v){if(c.j.info("Error code "+v),v==2){var S=b(c.bb,c),I=c.Ua;const te=!I;I=new ir(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ln(I,"https"),ts(I),te?sr(I.toString(),S):Or(I.toString(),S)}else sn(2);c.I=0,c.l&&c.l.pa(v),ba(c),ya(c)}i.bb=function(c){c?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function ba(c){if(c.I=0,c.ja=[],c.l){const v=es(c.h);(v.length!=0||c.i.length!=0)&&(de(c.ja,v),de(c.ja,c.i),c.h.i.length=0,X(c.i),c.i.length=0),c.l.oa()}}function Ta(c,v,S){var I=S instanceof ir?on(S):new ir(S);if(I.g!="")v&&(I.g=v+"."+I.g),Ir(I,I.u);else{var te=d.location;I=te.protocol,v=v?v+"."+te.hostname:te.hostname,te=+te.port;const ae=new ir(null);I&&ln(ae,I),v&&(ae.g=v),te&&Ir(ae,te),S&&(ae.h=S),I=ae}return S=c.G,v=c.wa,S&&v&&Dt(I,S,v),Dt(I,"VER",c.ka),Bi(c,I),I}function bn(c,v,S){if(v&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Aa&&!c.ma?new mt(new Ut({ab:S})):new mt(c.ma),v.Fa(c.L),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function is(){}i=is.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Mr(){}Mr.prototype.g=function(c,v){return new Hn(c,v)};function Hn(c,v){dn.call(this),this.g=new ti(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(c?c["X-WebChannel-Client-Profile"]=v.sa:c={"X-WebChannel-Client-Profile":v.sa}),this.g.U=c,(c=v&&v.Qb)&&!M(c)&&(this.g.u=c),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!M(v)&&(this.g.G=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new bi(this)}D(Hn,dn),Hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){ns(this.g)},Hn.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var S={};S.__data__=c,c=S}else this.v&&(S={},S.__data__=fi(c),c=S);v.i.push(new an(v.Ya++,c)),v.I==3&&_i(v)},Hn.prototype.N=function(){this.g.l=null,delete this.j,ns(this.g),delete this.g,Hn.Z.N.call(this)};function Ms(c){yn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const S in v){c=S;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}D(Ms,yn);function wo(){vn.call(this),this.status=1}D(wo,vn);function bi(c){this.g=c}D(bi,is),bi.prototype.ra=function(){rn(this.g,"a")},bi.prototype.qa=function(c){rn(this.g,new Ms(c))},bi.prototype.pa=function(c){rn(this.g,new wo)},bi.prototype.oa=function(){rn(this.g,"b")},Mr.prototype.createWebChannel=Mr.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,Ob=function(){return new Mr},Ib=function(){return br()},Cb=De,lp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},di.NO_ERROR=0,di.TIMEOUT=8,di.HTTP_ERROR=6,Jf=di,kt.COMPLETE="complete",Rb=kt,hi.EventType=nr,nr.OPEN="a",nr.CLOSE="b",nr.ERROR="c",nr.MESSAGE="d",dn.prototype.listen=dn.prototype.J,Yu=hi,mt.prototype.listenOnce=mt.prototype.K,mt.prototype.getLastError=mt.prototype.Ha,mt.prototype.getLastErrorCode=mt.prototype.ya,mt.prototype.getStatus=mt.prototype.ca,mt.prototype.getResponseJson=mt.prototype.La,mt.prototype.getResponseText=mt.prototype.la,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Fa,wb=mt}).apply(typeof Uf<"u"?Uf:typeof self<"u"?self:typeof window<"u"?window:{});class cr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cr.UNAUTHENTICATED=new cr(null),cr.GOOGLE_CREDENTIALS=new cr("google-credentials-uid"),cr.FIRST_PARTY=new cr("first-party-uid"),cr.MOCK_USER=new cr("mock-user");let nu="12.9.0";function kI(i){nu=i}const $o=new Op("@firebase/firestore");function Pl(){return $o.logLevel}function Pe(i,...e){if($o.logLevel<=Tt.DEBUG){const n=e.map(qp);$o.debug(`Firestore (${nu}): ${i}`,...n)}}function sa(i,...e){if($o.logLevel<=Tt.ERROR){const n=e.map(qp);$o.error(`Firestore (${nu}): ${i}`,...n)}}function Xo(i,...e){if($o.logLevel<=Tt.WARN){const n=e.map(qp);$o.warn(`Firestore (${nu}): ${i}`,...n)}}function qp(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function Je(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Db(i,s,n)}function Db(i,e,n){let s=`FIRESTORE (${nu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw sa(s),new Error(s)}function Pt(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||Db(e,o,s)}function ot(i,e){return i}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends ua{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class lo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class xb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(cr.UNAUTHENTICATED)))}shutdown(){}}class PI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class LI{constructor(e){this.t=e,this.currentUser=cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pt(this.o===void 0,42304);let s=this.i;const o=E=>this.i!==s?(s=this.i,n(E)):Promise.resolve();let u=new lo;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new lo,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const E=u;e.enqueueRetryable((async()=>{await E.promise,await o(this.currentUser)}))},y=E=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((E=>y(E))),setTimeout((()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?y(E):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new lo)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Pt(typeof s.accessToken=="string",31837,{l:s}),new xb(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pt(e===null||typeof e=="string",2055,{h:e}),new cr(e)}}class UI{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=cr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class zI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new UI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(cr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class x0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Pt(this.o===void 0,3512);const s=u=>{u.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new x0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Pt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new x0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function BI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Hp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=BI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function St(i,e){return i<e?-1:i>e?1:0}function up(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return Qm(o)===Qm(u)?St(o,u):Qm(o)?1:-1}return St(i.length,e.length)}const qI=55296,HI=57343;function Qm(i){const e=i.charCodeAt(0);return e>=qI&&e<=HI}function Yl(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const N0="__name__";class hs{constructor(e,n,s){n===void 0?n=0:n>e.length&&Je(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Je(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return hs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hs?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=hs.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return St(e.length,n.length)}static compareSegments(e,n){const s=hs.isNumericId(e),o=hs.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?hs.extractNumericId(e).compare(hs.extractNumericId(n)):up(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oo.fromString(e.substring(4,e.length-2))}}class fn extends hs{construct(e,n,s){return new fn(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Fe(ve.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new fn(n)}static emptyPath(){return new fn([])}}const FI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends hs{construct(e,n,s){return new er(e,n,s)}static isValidIdentifier(e){return FI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===N0}static keyField(){return new er([N0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new Fe(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const y=e[o];if(y==="\\"){if(o+1===e.length)throw new Fe(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if(E!=="\\"&&E!=="."&&E!=="`")throw new Fe(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=E,o+=2}else y==="`"?(d=!d,o++):y!=="."||d?(s+=y,o++):(u(),o++)}if(u(),d)throw new Fe(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(n)}static emptyPath(){return new er([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(fn.fromString(e))}static fromName(e){return new Qe(fn.fromString(e).popFirst(5))}static empty(){return new Qe(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new fn(e.slice()))}}function KI(i,e,n){if(!n)throw new Fe(ve.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function GI(i,e,n,s){if(e===!0&&s===!0)throw new Fe(ve.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function M0(i){if(!Qe.isDocumentKey(i))throw new Fe(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Nb(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Fp(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Je(12329,{type:typeof i})}function cc(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Fe(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fp(i);throw new Fe(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Nn(i,e){const n={typeString:i};return e&&(n.value=e),n}function Ac(i,e){if(!Nb(i))throw new Fe(ve.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const d=i[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new Fe(ve.INVALID_ARGUMENT,n);return!0}const k0=-62135596800,V0=1e6;class Wt{static now(){return Wt.fromMillis(Date.now())}static fromDate(e){return Wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*V0);return new Wt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Fe(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Fe(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<k0)throw new Fe(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/V0}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ac(e,Wt._jsonSchema))return new Wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-k0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Wt._jsonSchemaVersion="firestore/timestamp/1.0",Wt._jsonSchema={type:Nn("string",Wt._jsonSchemaVersion),seconds:Nn("number"),nanoseconds:Nn("number")};class rt{static fromTimestamp(e){return new rt(e)}static min(){return new rt(new Wt(0,0))}static max(){return new rt(new Wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const fc=-1;function YI(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=rt.fromTimestamp(s===1e9?new Wt(n+1,0):new Wt(n,s));return new uo(o,Qe.empty(),e)}function QI(i){return new uo(i.readTime,i.key,fc)}class uo{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new uo(rt.min(),Qe.empty(),fc)}static max(){return new uo(rt.max(),Qe.empty(),fc)}}function $I(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Qe.comparator(i.documentKey,e.documentKey),n!==0?n:St(i.largestBatchId,e.largestBatchId))}const XI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ru(i){if(i.code!==ve.FAILED_PRECONDITION||i.message!==XI)throw i;Pe("LocalStore","Unexpectedly lost primary lease")}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ge(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ge?n:ge.resolve(n)}catch(n){return ge.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ge.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ge.reject(n)}static resolve(e){return new ge(((n,s)=>{n(e)}))}static reject(e){return new ge(((n,s)=>{s(e)}))}static waitFor(e){return new ge(((n,s)=>{let o=0,u=0,d=!1;e.forEach((y=>{++o,y.next((()=>{++u,d&&u===o&&n()}),(E=>s(E)))})),d=!0,u===o&&n()}))}static or(e){let n=ge.resolve(!1);for(const s of e)n=n.next((o=>o?ge.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ge(((s,o)=>{const u=e.length,d=new Array(u);let y=0;for(let E=0;E<u;E++){const b=E;n(e[b]).next((C=>{d[b]=C,++y,y===u&&s(d)}),(C=>o(C)))}}))}static doWhile(e,n){return new ge(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function ZI(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function iu(i){return i.name==="IndexedDbTransactionError"}class xh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xh.ce=-1;const Kp=-1;function Nh(i){return i==null}function dh(i){return i===0&&1/i==-1/0}function WI(i){return typeof i=="number"&&Number.isInteger(i)&&!dh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Mb="";function e2(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=P0(e)),e=t2(i.get(n),e);return P0(e)}function t2(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case Mb:n+="";break;default:n+=u}}return n}function P0(i){return i+Mb+""}function L0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Zo(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function kb(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class hn{constructor(e,n){this.comparator=e,this.root=n||Wn.EMPTY}insert(e,n){return new hn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wn.BLACK,null,null))}remove(e){return new hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zf(this.root,e,this.comparator,!1)}getReverseIterator(){return new zf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zf(this.root,e,this.comparator,!0)}}class zf{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Wn.RED,this.left=o??Wn.EMPTY,this.right=u??Wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Wn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Wn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Je(27949);return e+(this.isRed()?0:1)}}Wn.EMPTY=null,Wn.RED=!0,Wn.BLACK=!1;Wn.EMPTY=new class{constructor(){this.size=0}get key(){throw Je(57766)}get value(){throw Je(16141)}get color(){throw Je(16727)}get left(){throw Je(29726)}get right(){throw Je(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Wn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zn{constructor(e){this.comparator=e,this.data=new hn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new U0(this.data.getIterator())}getIteratorFrom(e){return new U0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new zn(this.comparator);return n.data=e,n}}class U0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Qi{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new Qi([])}unionWith(e){let n=new zn(er.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Qi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yl(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class Vb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class tr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Vb("Invalid base64 string: "+u):u}})(e);return new tr(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new tr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tr.EMPTY_BYTE_STRING=new tr("");const n2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function co(i){if(Pt(!!i,39018),typeof i=="string"){let e=0;const n=n2.exec(i);if(Pt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:An(i.seconds),nanos:An(i.nanos)}}function An(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function fo(i){return typeof i=="string"?tr.fromBase64String(i):tr.fromUint8Array(i)}const Pb="server_timestamp",Lb="__type__",Ub="__previous_value__",zb="__local_write_time__";function Gp(i){return(i?.mapValue?.fields||{})[Lb]?.stringValue===Pb}function Mh(i){const e=i.mapValue.fields[Ub];return Gp(e)?Mh(e):e}function hc(i){const e=co(i.mapValue.fields[zb].timestampValue);return new Wt(e.seconds,e.nanos)}class r2{constructor(e,n,s,o,u,d,y,E,b,C,D){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=y,this.longPollingOptions=E,this.useFetchStreams=b,this.isUsingEmulator=C,this.apiKey=D}}const mh="(default)";class dc{constructor(e,n){this.projectId=e,this.database=n||mh}static empty(){return new dc("","")}get isDefaultDatabase(){return this.database===mh}isEqual(e){return e instanceof dc&&e.projectId===this.projectId&&e.database===this.database}}function i2(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Fe(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dc(i.options.projectId,e)}const jb="__type__",s2="__max__",jf={mapValue:{}},Bb="__vector__",ph="value";function ho(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Gp(i)?4:o2(i)?9007199254740991:a2(i)?10:11:Je(28295,{value:i})}function _s(i,e){if(i===e)return!0;const n=ho(i);if(n!==ho(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return hc(i).isEqual(hc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=co(o.timestampValue),y=co(u.timestampValue);return d.seconds===y.seconds&&d.nanos===y.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return fo(o.bytesValue).isEqual(fo(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return An(o.geoPointValue.latitude)===An(u.geoPointValue.latitude)&&An(o.geoPointValue.longitude)===An(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return An(o.integerValue)===An(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=An(o.doubleValue),y=An(u.doubleValue);return d===y?dh(d)===dh(y):isNaN(d)&&isNaN(y)}return!1})(i,e);case 9:return Yl(i.arrayValue.values||[],e.arrayValue.values||[],_s);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},y=u.mapValue.fields||{};if(L0(d)!==L0(y))return!1;for(const E in d)if(d.hasOwnProperty(E)&&(y[E]===void 0||!_s(d[E],y[E])))return!1;return!0})(i,e);default:return Je(52216,{left:i})}}function mc(i,e){return(i.values||[]).find((n=>_s(n,e)))!==void 0}function Ql(i,e){if(i===e)return 0;const n=ho(i),s=ho(e);if(n!==s)return St(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return St(i.booleanValue,e.booleanValue);case 2:return(function(u,d){const y=An(u.integerValue||u.doubleValue),E=An(d.integerValue||d.doubleValue);return y<E?-1:y>E?1:y===E?0:isNaN(y)?isNaN(E)?0:-1:1})(i,e);case 3:return z0(i.timestampValue,e.timestampValue);case 4:return z0(hc(i),hc(e));case 5:return up(i.stringValue,e.stringValue);case 6:return(function(u,d){const y=fo(u),E=fo(d);return y.compareTo(E)})(i.bytesValue,e.bytesValue);case 7:return(function(u,d){const y=u.split("/"),E=d.split("/");for(let b=0;b<y.length&&b<E.length;b++){const C=St(y[b],E[b]);if(C!==0)return C}return St(y.length,E.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,d){const y=St(An(u.latitude),An(d.latitude));return y!==0?y:St(An(u.longitude),An(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return j0(i.arrayValue,e.arrayValue);case 10:return(function(u,d){const y=u.fields||{},E=d.fields||{},b=y[ph]?.arrayValue,C=E[ph]?.arrayValue,D=St(b?.values?.length||0,C?.values?.length||0);return D!==0?D:j0(b,C)})(i.mapValue,e.mapValue);case 11:return(function(u,d){if(u===jf.mapValue&&d===jf.mapValue)return 0;if(u===jf.mapValue)return 1;if(d===jf.mapValue)return-1;const y=u.fields||{},E=Object.keys(y),b=d.fields||{},C=Object.keys(b);E.sort(),C.sort();for(let D=0;D<E.length&&D<C.length;++D){const N=up(E[D],C[D]);if(N!==0)return N;const X=Ql(y[E[D]],b[C[D]]);if(X!==0)return X}return St(E.length,C.length)})(i.mapValue,e.mapValue);default:throw Je(23264,{he:n})}}function z0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return St(i,e);const n=co(i),s=co(e),o=St(n.seconds,s.seconds);return o!==0?o:St(n.nanos,s.nanos)}function j0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Ql(n[o],s[o]);if(u)return u}return St(n.length,s.length)}function $l(i){return cp(i)}function cp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=co(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return fo(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Qe.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=cp(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${cp(n.fields[d])}`;return o+"}"})(i.mapValue):Je(61005,{value:i})}function Zf(i){switch(ho(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mh(i);return e?16+Zf(e):16;case 5:return 2*i.stringValue.length;case 6:return fo(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Zf(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Zo(s.fields,((u,d)=>{o+=u.length+Zf(d)})),o})(i.mapValue);default:throw Je(13486,{value:i})}}function fp(i){return!!i&&"integerValue"in i}function Yp(i){return!!i&&"arrayValue"in i}function B0(i){return!!i&&"nullValue"in i}function q0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Wf(i){return!!i&&"mapValue"in i}function a2(i){return(i?.mapValue?.fields||{})[jb]?.stringValue===Bb}function ec(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Zo(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=ec(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ec(i.arrayValue.values[n]);return e}return{...i}}function o2(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===s2}class xi{constructor(e){this.value=e}static empty(){return new xi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Wf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ec(n)}setAll(e){let n=er.emptyPath(),s={},o=[];e.forEach(((d,y)=>{if(!n.isImmediateParentOf(y)){const E=this.getFieldsMap(n);this.applyChanges(E,s,o),s={},o=[],n=y.popLast()}d?s[y.lastSegment()]=ec(d):o.push(y.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Wf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _s(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Wf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Zo(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new xi(ec(this.value))}}function qb(i){const e=[];return Zo(i.fields,((n,s)=>{const o=new er([n]);if(Wf(s)){const u=qb(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new Qi(e)}class fr{constructor(e,n,s,o,u,d,y){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=y}static newInvalidDocument(e){return new fr(e,0,rt.min(),rt.min(),rt.min(),xi.empty(),0)}static newFoundDocument(e,n,s,o){return new fr(e,1,n,rt.min(),s,o,0)}static newNoDocument(e,n){return new fr(e,2,n,rt.min(),rt.min(),xi.empty(),0)}static newUnknownDocument(e,n){return new fr(e,3,n,rt.min(),rt.min(),xi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gh{constructor(e,n){this.position=e,this.inclusive=n}}function H0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],d=i.position[o];if(u.field.isKeyField()?s=Qe.comparator(Qe.fromName(d.referenceValue),n.key):s=Ql(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function F0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!_s(i.position[n],e.position[n]))return!1;return!0}class yh{constructor(e,n="asc"){this.field=e,this.dir=n}}function l2(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Hb{}class Un extends Hb{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new c2(e,n,s):n==="array-contains"?new d2(e,s):n==="in"?new m2(e,s):n==="not-in"?new p2(e,s):n==="array-contains-any"?new g2(e,s):new Un(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new f2(e,s):new h2(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ql(n,this.value)):n!==null&&ho(this.value)===ho(n)&&this.matchesComparison(Ql(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Es extends Hb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Es(e,n)}matches(e){return Fb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Fb(i){return i.op==="and"}function Kb(i){return u2(i)&&Fb(i)}function u2(i){for(const e of i.filters)if(e instanceof Es)return!1;return!0}function hp(i){if(i instanceof Un)return i.field.canonicalString()+i.op.toString()+$l(i.value);if(Kb(i))return i.filters.map((e=>hp(e))).join(",");{const e=i.filters.map((n=>hp(n))).join(",");return`${i.op}(${e})`}}function Gb(i,e){return i instanceof Un?(function(s,o){return o instanceof Un&&s.op===o.op&&s.field.isEqual(o.field)&&_s(s.value,o.value)})(i,e):i instanceof Es?(function(s,o){return o instanceof Es&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,d,y)=>u&&Gb(d,o.filters[y])),!0):!1})(i,e):void Je(19439)}function Yb(i){return i instanceof Un?(function(n){return`${n.field.canonicalString()} ${n.op} ${$l(n.value)}`})(i):i instanceof Es?(function(n){return n.op.toString()+" {"+n.getFilters().map(Yb).join(" ,")+"}"})(i):"Filter"}class c2 extends Un{constructor(e,n,s){super(e,n,s),this.key=Qe.fromName(s.referenceValue)}matches(e){const n=Qe.comparator(e.key,this.key);return this.matchesComparison(n)}}class f2 extends Un{constructor(e,n){super(e,"in",n),this.keys=Qb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class h2 extends Un{constructor(e,n){super(e,"not-in",n),this.keys=Qb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Qb(i,e){return(e.arrayValue?.values||[]).map((n=>Qe.fromName(n.referenceValue)))}class d2 extends Un{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yp(n)&&mc(n.arrayValue,this.value)}}class m2 extends Un{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mc(this.value.arrayValue,n)}}class p2 extends Un{constructor(e,n){super(e,"not-in",n)}matches(e){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!mc(this.value.arrayValue,n)}}class g2 extends Un{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>mc(this.value.arrayValue,s)))}}class y2{constructor(e,n=null,s=[],o=[],u=null,d=null,y=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=y,this.Te=null}}function K0(i,e=null,n=[],s=[],o=null,u=null,d=null){return new y2(i,e,n,s,o,u,d)}function Qp(i){const e=ot(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>hp(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Nh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>$l(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>$l(s))).join(",")),e.Te=n}return e.Te}function $p(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!l2(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Gb(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!F0(i.startAt,e.startAt)&&F0(i.endAt,e.endAt)}function dp(i){return Qe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class kh{constructor(e,n=null,s=[],o=[],u=null,d="F",y=null,E=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=y,this.endAt=E,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function v2(i,e,n,s,o,u,d,y){return new kh(i,e,n,s,o,u,d,y)}function Xp(i){return new kh(i)}function G0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function _2(i){return Qe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function E2(i){return i.collectionGroup!==null}function tc(i){const e=ot(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let y=new zn(er.comparator);return d.filters.forEach((E=>{E.getFlattenedFilters().forEach((b=>{b.isInequality()&&(y=y.add(b.field))}))})),y})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new yh(u,s))})),n.has(er.keyField().canonicalString())||e.Ie.push(new yh(er.keyField(),s))}return e.Ie}function ps(i){const e=ot(i);return e.Ee||(e.Ee=b2(e,tc(i))),e.Ee}function b2(i,e){if(i.limitType==="F")return K0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new yh(o.field,u)}));const n=i.endAt?new gh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new gh(i.startAt.position,i.startAt.inclusive):null;return K0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function mp(i,e,n){return new kh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Vh(i,e){return $p(ps(i),ps(e))&&i.limitType===e.limitType}function $b(i){return`${Qp(ps(i))}|lt:${i.limitType}`}function Ll(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>Yb(o))).join(", ")}]`),Nh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>$l(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>$l(o))).join(",")),`Target(${s})`})(ps(i))}; limitType=${i.limitType})`}function Ph(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Qe.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of tc(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(d,y,E){const b=H0(d,y,E);return d.inclusive?b<=0:b<0})(s.startAt,tc(s),o)||s.endAt&&!(function(d,y,E){const b=H0(d,y,E);return d.inclusive?b>=0:b>0})(s.endAt,tc(s),o))})(i,e)}function T2(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Xb(i){return(e,n)=>{let s=!1;for(const o of tc(i)){const u=S2(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function S2(i,e,n){const s=i.field.isKeyField()?Qe.comparator(e.key,n.key):(function(u,d,y){const E=d.data.field(u),b=y.data.field(u);return E!==null&&b!==null?Ql(E,b):Je(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Je(19790,{direction:i.dir})}}class Wo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Zo(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return kb(this.inner)}size(){return this.innerSize}}const A2=new hn(Qe.comparator);function aa(){return A2}const Jb=new hn(Qe.comparator);function Qu(...i){let e=Jb;for(const n of i)e=e.insert(n.key,n);return e}function Zb(i){let e=Jb;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function qo(){return nc()}function Wb(){return nc()}function nc(){return new Wo((i=>i.toString()),((i,e)=>i.isEqual(e)))}const w2=new hn(Qe.comparator),R2=new zn(Qe.comparator);function At(...i){let e=R2;for(const n of i)e=e.add(n);return e}const C2=new zn(St);function I2(){return C2}function Jp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dh(e)?"-0":e}}function eT(i){return{integerValue:""+i}}function O2(i,e){return WI(e)?eT(e):Jp(i,e)}class Lh{constructor(){this._=void 0}}function D2(i,e,n){return i instanceof vh?(function(o,u){const d={fields:{[Lb]:{stringValue:Pb},[zb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Gp(u)&&(u=Mh(u)),u&&(d.fields[Ub]=u),{mapValue:d}})(n,e):i instanceof pc?nT(i,e):i instanceof gc?rT(i,e):(function(o,u){const d=tT(o,u),y=Y0(d)+Y0(o.Ae);return fp(d)&&fp(o.Ae)?eT(y):Jp(o.serializer,y)})(i,e)}function x2(i,e,n){return i instanceof pc?nT(i,e):i instanceof gc?rT(i,e):n}function tT(i,e){return i instanceof _h?(function(s){return fp(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class vh extends Lh{}class pc extends Lh{constructor(e){super(),this.elements=e}}function nT(i,e){const n=iT(e);for(const s of i.elements)n.some((o=>_s(o,s)))||n.push(s);return{arrayValue:{values:n}}}class gc extends Lh{constructor(e){super(),this.elements=e}}function rT(i,e){let n=iT(e);for(const s of i.elements)n=n.filter((o=>!_s(o,s)));return{arrayValue:{values:n}}}class _h extends Lh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Y0(i){return An(i.integerValue||i.doubleValue)}function iT(i){return Yp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function N2(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof pc&&o instanceof pc||s instanceof gc&&o instanceof gc?Yl(s.elements,o.elements,_s):s instanceof _h&&o instanceof _h?_s(s.Ae,o.Ae):s instanceof vh&&o instanceof vh})(i.transform,e.transform)}class M2{constructor(e,n){this.version=e,this.transformResults=n}}class na{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new na}static exists(e){return new na(void 0,e)}static updateTime(e){return new na(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Uh{}function sT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new oT(i.key,na.none()):new wc(i.key,i.data,na.none());{const n=i.data,s=xi.empty();let o=new zn(er.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new el(i.key,s,new Qi(o.toArray()),na.none())}}function k2(i,e,n){i instanceof wc?(function(o,u,d){const y=o.value.clone(),E=$0(o.fieldTransforms,u,d.transformResults);y.setAll(E),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(i,e,n):i instanceof el?(function(o,u,d){if(!eh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const y=$0(o.fieldTransforms,u,d.transformResults),E=u.data;E.setAll(aT(o)),E.setAll(y),u.convertToFoundDocument(d.version,E).setHasCommittedMutations()})(i,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function rc(i,e,n,s){return i instanceof wc?(function(u,d,y,E){if(!eh(u.precondition,d))return y;const b=u.value.clone(),C=X0(u.fieldTransforms,E,d);return b.setAll(C),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),null})(i,e,n,s):i instanceof el?(function(u,d,y,E){if(!eh(u.precondition,d))return y;const b=X0(u.fieldTransforms,E,d),C=d.data;return C.setAll(aT(u)),C.setAll(b),d.convertToFoundDocument(d.version,C).setHasLocalMutations(),y===null?null:y.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((D=>D.field)))})(i,e,n,s):(function(u,d,y){return eh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):y})(i,e,n)}function V2(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=tT(s.transform,o||null);u!=null&&(n===null&&(n=xi.empty()),n.set(s.field,u))}return n||null}function Q0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Yl(s,o,((u,d)=>N2(u,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class wc extends Uh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class el extends Uh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function aT(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function $0(i,e,n){const s=new Map;Pt(i.length===n.length,32656,{Ve:n.length,de:i.length});for(let o=0;o<n.length;o++){const u=i[o],d=u.transform,y=e.data.field(u.field);s.set(u.field,x2(d,y,n[o]))}return s}function X0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,d=n.data.field(o.field);s.set(o.field,D2(u,d,e))}return s}class oT extends Uh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class P2 extends Uh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class L2{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&k2(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=rc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=rc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Wb();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let y=this.applyToLocalView(d,u.mutatedFields);y=n.has(o.key)?null:y;const E=sT(d,y);E!==null&&s.set(o.key,E),d.isValidDocument()||d.convertToNoDocument(rt.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),At())}isEqual(e){return this.batchId===e.batchId&&Yl(this.mutations,e.mutations,((n,s)=>Q0(n,s)))&&Yl(this.baseMutations,e.baseMutations,((n,s)=>Q0(n,s)))}}class Zp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Pt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return w2})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new Zp(e,n,s,o)}}class U2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class z2{constructor(e,n){this.count=e,this.unchangedNames=n}}var xn,Ot;function j2(i){switch(i){case ve.OK:return Je(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return Je(15467,{code:i})}}function lT(i){if(i===void 0)return sa("GRPC error has no .code"),ve.UNKNOWN;switch(i){case xn.OK:return ve.OK;case xn.CANCELLED:return ve.CANCELLED;case xn.UNKNOWN:return ve.UNKNOWN;case xn.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case xn.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case xn.INTERNAL:return ve.INTERNAL;case xn.UNAVAILABLE:return ve.UNAVAILABLE;case xn.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case xn.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case xn.NOT_FOUND:return ve.NOT_FOUND;case xn.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case xn.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case xn.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case xn.ABORTED:return ve.ABORTED;case xn.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case xn.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case xn.DATA_LOSS:return ve.DATA_LOSS;default:return Je(39323,{code:i})}}(Ot=xn||(xn={}))[Ot.OK=0]="OK",Ot[Ot.CANCELLED=1]="CANCELLED",Ot[Ot.UNKNOWN=2]="UNKNOWN",Ot[Ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ot[Ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ot[Ot.NOT_FOUND=5]="NOT_FOUND",Ot[Ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ot[Ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ot[Ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ot[Ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ot[Ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ot[Ot.ABORTED=10]="ABORTED",Ot[Ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ot[Ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ot[Ot.INTERNAL=13]="INTERNAL",Ot[Ot.UNAVAILABLE=14]="UNAVAILABLE",Ot[Ot.DATA_LOSS=15]="DATA_LOSS";function B2(){return new TextEncoder}const q2=new oo([4294967295,4294967295],0);function J0(i){const e=B2().encode(i),n=new Ab;return n.update(e),new Uint8Array(n.digest())}function Z0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new oo([n,s],0),new oo([o,u],0)]}class Wp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new $u(`Invalid padding: ${n}`);if(s<0)throw new $u(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new $u(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new $u(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=oo.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(oo.fromNumber(s)));return o.compare(q2)===1&&(o=new oo([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=J0(e),[s,o]=Z0(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Wp(u,o,n);return s.forEach((y=>d.insert(y))),d}insert(e){if(this.ge===0)return;const n=J0(e),[s,o]=Z0(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);this.be(d)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class $u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Rc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new zh(rt.min(),o,new hn(St),aa(),At())}}class Rc{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Rc(s,n,At(),At(),At())}}class th{constructor(e,n,s,o){this.Se=e,this.removedTargetIds=n,this.key=s,this.De=o}}class uT{constructor(e,n){this.targetId=e,this.Ce=n}}class cT{constructor(e,n,s=tr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class W0{constructor(){this.ve=0,this.Fe=eE(),this.Me=tr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=At(),n=At(),s=At();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Je(38017,{changeType:u})}})),new Rc(this.Me,this.xe,e,n,s)}Ke(){this.Oe=!1,this.Fe=eE()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Pt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class H2{constructor(e){this.Ge=e,this.ze=new Map,this.je=aa(),this.He=Bf(),this.Je=Bf(),this.Ze=new hn(St)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Je(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(dp(u))if(s===0){const d=new Qe(u.path);this.et(n,d,fr.newNoDocument(d,rt.min()))}else Pt(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const y=this.ut(e),E=y?this.ct(y,e,d):1;if(E!==0){this.it(n);const b=E===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,b)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,y;try{d=fo(s).toUint8Array()}catch(E){if(E instanceof Vb)return Xo("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw E}try{y=new Wp(d,o,u)}catch(E){return Xo(E instanceof $u?"BloomFilter error: ":"Applying bloom filter failed: ",E),null}return y.ge===0?null:y}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const d=this.Ge.ht(),y=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(y)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const y=this.ot(d);if(y){if(u.current&&dp(y.target)){const E=new Qe(y.target.path);this.It(E).has(d)||this.Et(d,E)||this.et(d,E,fr.newNoDocument(E,e))}u.Be&&(n.set(d,u.ke()),u.Ke())}}));let s=At();this.Je.forEach(((u,d)=>{let y=!0;d.forEachWhile((E=>{const b=this.ot(E);return!b||b.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(s=s.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new zh(e,n,this.Ze,this.je,s);return this.je=aa(),this.He=Bf(),this.Je=Bf(),this.Ze=new hn(St),o}Ye(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,s),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new W0,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new zn(St),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new zn(St),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Pe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new W0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Bf(){return new hn(Qe.comparator)}function eE(){return new hn(Qe.comparator)}const F2={asc:"ASCENDING",desc:"DESCENDING"},K2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},G2={and:"AND",or:"OR"};class Y2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pp(i,e){return i.useProto3Json||Nh(e)?e:{value:e}}function Eh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Q2(i,e){return Eh(i,e.toTimestamp())}function gs(i){return Pt(!!i,49232),rt.fromTimestamp((function(n){const s=co(n);return new Wt(s.seconds,s.nanos)})(i))}function eg(i,e){return gp(i,e).canonicalString()}function gp(i,e){const n=(function(o){return new fn(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function hT(i){const e=fn.fromString(i);return Pt(yT(e),10190,{key:e.toString()}),e}function yp(i,e){return eg(i.databaseId,e.path)}function $m(i,e){const n=hT(e);if(n.get(1)!==i.databaseId.projectId)throw new Fe(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Fe(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Qe(mT(n))}function dT(i,e){return eg(i.databaseId,e)}function $2(i){const e=hT(i);return e.length===4?fn.emptyPath():mT(e)}function vp(i){return new fn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function mT(i){return Pt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function tE(i,e,n){return{name:yp(i,e),fields:n.value.mapValue.fields}}function X2(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:Je(39313,{state:b})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(b,C){return b.useProto3Json?(Pt(C===void 0||typeof C=="string",58123),tr.fromBase64String(C||"")):(Pt(C===void 0||C instanceof Buffer||C instanceof Uint8Array,16193),tr.fromUint8Array(C||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,y=d&&(function(b){const C=b.code===void 0?ve.UNKNOWN:lT(b.code);return new Fe(C,b.message||"")})(d);n=new cT(s,o,u,y||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=$m(i,s.document.name),u=gs(s.document.updateTime),d=s.document.createTime?gs(s.document.createTime):rt.min(),y=new xi({mapValue:{fields:s.document.fields}}),E=fr.newFoundDocument(o,u,d,y),b=s.targetIds||[],C=s.removedTargetIds||[];n=new th(b,C,E.key,E)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=$m(i,s.document),u=s.readTime?gs(s.readTime):rt.min(),d=fr.newNoDocument(o,u),y=s.removedTargetIds||[];n=new th([],y,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=$m(i,s.document),u=s.removedTargetIds||[];n=new th([],u,o,null)}else{if(!("filter"in e))return Je(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new z2(o,u),y=s.targetId;n=new uT(y,d)}}return n}function J2(i,e){let n;if(e instanceof wc)n={update:tE(i,e.key,e.value)};else if(e instanceof oT)n={delete:yp(i,e.key)};else if(e instanceof el)n={update:tE(i,e.key,e.data),updateMask:aO(e.fieldMask)};else{if(!(e instanceof P2))return Je(16599,{dt:e.type});n={verify:yp(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,d){const y=d.transform;if(y instanceof vh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof pc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof gc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof _h)return{fieldPath:d.field.canonicalString(),increment:y.Ae};throw Je(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:Q2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Je(27497)})(i,e.precondition)),n}function Z2(i,e){return i&&i.length>0?(Pt(e!==void 0,14353),i.map((n=>(function(o,u){let d=o.updateTime?gs(o.updateTime):gs(u);return d.isEqual(rt.min())&&(d=gs(u)),new M2(d,o.transformResults||[])})(n,e)))):[]}function W2(i,e){return{documents:[dT(i,e.path)]}}function eO(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=dT(i,o);const u=(function(b){if(b.length!==0)return gT(Es.create(b,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(b){if(b.length!==0)return b.map((C=>(function(N){return{field:Ul(N.field),direction:rO(N.dir)}})(C)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const y=pp(i,e.limit);return y!==null&&(n.structuredQuery.limit=y),e.startAt&&(n.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(e.endAt)),{ft:n,parent:o}}function tO(i){let e=$2(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Pt(s===1,65062);const C=n.from[0];C.allDescendants?o=C.collectionId:e=e.child(C.collectionId)}let u=[];n.where&&(u=(function(D){const N=pT(D);return N instanceof Es&&Kb(N)?N.getFilters():[N]})(n.where));let d=[];n.orderBy&&(d=(function(D){return D.map((N=>(function(de){return new yh(zl(de.field),(function(Re){switch(Re){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(de.direction))})(N)))})(n.orderBy));let y=null;n.limit&&(y=(function(D){let N;return N=typeof D=="object"?D.value:D,Nh(N)?null:N})(n.limit));let E=null;n.startAt&&(E=(function(D){const N=!!D.before,X=D.values||[];return new gh(X,N)})(n.startAt));let b=null;return n.endAt&&(b=(function(D){const N=!D.before,X=D.values||[];return new gh(X,N)})(n.endAt)),v2(e,o,d,u,y,"F",E,b)}function nO(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Je(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pT(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=zl(n.unaryFilter.field);return Un.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=zl(n.unaryFilter.field);return Un.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=zl(n.unaryFilter.field);return Un.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=zl(n.unaryFilter.field);return Un.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Je(61313);default:return Je(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Un.create(zl(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Je(58110);default:return Je(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Es.create(n.compositeFilter.filters.map((s=>pT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Je(1026)}})(n.compositeFilter.op))})(i):Je(30097,{filter:i})}function rO(i){return F2[i]}function iO(i){return K2[i]}function sO(i){return G2[i]}function Ul(i){return{fieldPath:i.canonicalString()}}function zl(i){return er.fromServerFormat(i.fieldPath)}function gT(i){return i instanceof Un?(function(n){if(n.op==="=="){if(q0(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NAN"}};if(B0(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(q0(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NOT_NAN"}};if(B0(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ul(n.field),op:iO(n.op),value:n.value}}})(i):i instanceof Es?(function(n){const s=n.getFilters().map((o=>gT(o)));return s.length===1?s[0]:{compositeFilter:{op:sO(n.op),filters:s}}})(i):Je(54877,{filter:i})}function aO(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function yT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function vT(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}class no{constructor(e,n,s,o,u=rt.min(),d=rt.min(),y=tr.EMPTY_BYTE_STRING,E=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=y,this.expectedCount=E}withSequenceNumber(e){return new no(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class oO{constructor(e){this.yt=e}}function lO(i){const e=tO({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?mp(e,e.limit,"L"):e}class uO{constructor(){this.Sn=new cO}addToCollectionParentIndex(e,n){return this.Sn.add(n),ge.resolve()}getCollectionParents(e,n){return ge.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return ge.resolve()}deleteFieldIndex(e,n){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,n){return ge.resolve()}getDocumentsMatchingTarget(e,n){return ge.resolve(null)}getIndexType(e,n){return ge.resolve(0)}getFieldIndexes(e,n){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,n){return ge.resolve(uo.min())}getMinOffsetFromCollectionGroup(e,n){return ge.resolve(uo.min())}updateCollectionGroup(e,n,s){return ge.resolve()}updateIndexEntries(e,n){return ge.resolve()}}class cO{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new zn(fn.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new zn(fn.comparator)).toArray()}}const nE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_T=41943040;class Br{static withCacheSize(e){return new Br(e,Br.DEFAULT_COLLECTION_PERCENTILE,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Br.DEFAULT_COLLECTION_PERCENTILE=10,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Br.DEFAULT=new Br(_T,Br.DEFAULT_COLLECTION_PERCENTILE,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Br.DISABLED=new Br(-1,0,0);class Xl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Xl(0)}static ar(){return new Xl(-1)}}const rE="LruGarbageCollector",fO=1048576;function iE([i,e],[n,s]){const o=St(i,n);return o===0?St(e,s):o}class hO{constructor(e){this.Pr=e,this.buffer=new zn(iE),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();iE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class dO{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Pe(rE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){iu(n)?Pe(rE,"Ignoring IndexedDB error during garbage collection: ",n):await ru(n)}await this.Ar(3e5)}))}}class mO{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ge.resolve(xh.ce);const s=new hO(n);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(nE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nE):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let s,o,u,d,y,E,b;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((D=>(D>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),o=this.params.maximumSequenceNumbersToCollect):o=D,d=Date.now(),this.nthSequenceNumber(e,o)))).next((D=>(s=D,y=Date.now(),this.removeTargets(e,s,n)))).next((D=>(u=D,E=Date.now(),this.removeOrphanedDocuments(e,s)))).next((D=>(b=Date.now(),Pl()<=Tt.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-C}ms
	Determined least recently used ${o} in `+(y-d)+`ms
	Removed ${u} targets in `+(E-y)+`ms
	Removed ${D} documents in `+(b-E)+`ms
Total Duration: ${b-C}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:D}))))}}function pO(i,e){return new mO(i,e)}class gO{constructor(){this.changes=new Wo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,fr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ge.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class vO{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&rc(s.mutation,o,Qi.empty(),Wt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,At()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=At()){const o=qo();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let d=Qu();return u.forEach(((y,E)=>{d=d.insert(y,E.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=qo();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,At())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,y)=>{n.set(d,y)}))}))}computeViews(e,n,s,o){let u=aa();const d=nc(),y=(function(){return nc()})();return n.forEach(((E,b)=>{const C=s.get(b.key);o.has(b.key)&&(C===void 0||C.mutation instanceof el)?u=u.insert(b.key,b):C!==void 0?(d.set(b.key,C.mutation.getFieldMask()),rc(C.mutation,b,C.mutation.getFieldMask(),Wt.now())):d.set(b.key,Qi.empty())})),this.recalculateAndSaveOverlays(e,u).next((E=>(E.forEach(((b,C)=>d.set(b,C))),n.forEach(((b,C)=>y.set(b,new yO(C,d.get(b)??null)))),y)))}recalculateAndSaveOverlays(e,n){const s=nc();let o=new hn(((d,y)=>d-y)),u=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const y of d)y.keys().forEach((E=>{const b=n.get(E);if(b===null)return;let C=s.get(E)||Qi.empty();C=y.applyToLocalView(b,C),s.set(E,C);const D=(o.get(y.batchId)||At()).add(E);o=o.insert(y.batchId,D)}))})).next((()=>{const d=[],y=o.getReverseIterator();for(;y.hasNext();){const E=y.getNext(),b=E.key,C=E.value,D=Wb();C.forEach((N=>{if(!u.has(N)){const X=sT(n.get(N),s.get(N));X!==null&&D.set(N,X),u=u.add(N)}})),d.push(this.documentOverlayCache.saveOverlays(e,b,D))}return ge.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return _2(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):E2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ge.resolve(qo());let y=fc,E=u;return d.next((b=>ge.forEach(b,((C,D)=>(y<D.largestBatchId&&(y=D.largestBatchId),u.get(C)?ge.resolve():this.remoteDocumentCache.getEntry(e,C).next((N=>{E=E.insert(C,N)}))))).next((()=>this.populateOverlays(e,b,u))).next((()=>this.computeViews(e,E,b,At()))).next((C=>({batchId:y,changes:Zb(C)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Qe(n)).next((s=>{let o=Qu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=Qu();return this.indexManager.getCollectionParents(e,u).next((y=>ge.forEach(y,(E=>{const b=(function(D,N){return new kh(N,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt)})(n,E.child(u));return this.getDocumentsMatchingCollectionQuery(e,b,s,o).next((C=>{C.forEach(((D,N)=>{d=d.insert(D,N)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((d=>{u.forEach(((E,b)=>{const C=b.getKey();d.get(C)===null&&(d=d.insert(C,fr.newInvalidDocument(C)))}));let y=Qu();return d.forEach(((E,b)=>{const C=u.get(E);C!==void 0&&rc(C.mutation,b,Qi.empty(),Wt.now()),Ph(n,b)&&(y=y.insert(E,b))})),y}))}}class _O{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return ge.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:gs(o.createTime)}})(n)),ge.resolve()}getNamedQuery(e,n){return ge.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:lO(o.bundledQuery),readTime:gs(o.readTime)}})(n)),ge.resolve()}}class EO{constructor(){this.overlays=new hn(Qe.comparator),this.Lr=new Map}getOverlay(e,n){return ge.resolve(this.overlays.get(n))}getOverlays(e,n){const s=qo();return ge.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.bt(e,n,u)})),ge.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(s)),ge.resolve()}getOverlaysForCollection(e,n,s){const o=qo(),u=n.length+1,d=new Qe(n.child("")),y=this.overlays.getIteratorFrom(d);for(;y.hasNext();){const E=y.getNext().value,b=E.getKey();if(!n.isPrefixOf(b.path))break;b.path.length===u&&E.largestBatchId>s&&o.set(E.getKey(),E)}return ge.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new hn(((b,C)=>b-C));const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===n&&b.largestBatchId>s){let C=u.get(b.largestBatchId);C===null&&(C=qo(),u=u.insert(b.largestBatchId,C)),C.set(b.getKey(),b)}}const y=qo(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach(((b,C)=>y.set(b,C))),!(y.size()>=o)););return ge.resolve(y)}bt(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new U2(n,s));let u=this.Lr.get(n);u===void 0&&(u=At(),this.Lr.set(n,u)),this.Lr.set(n,u.add(s.key))}}class bO{constructor(){this.sessionToken=tr.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ge.resolve()}}class tg{constructor(){this.kr=new zn(Kn.Kr),this.qr=new zn(Kn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const s=new Kn(e,n);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Wr(new Kn(e,n))}Qr(e,n){e.forEach((s=>this.removeReference(s,n)))}Gr(e){const n=new Qe(new fn([])),s=new Kn(n,e),o=new Kn(n,e+1),u=[];return this.qr.forEachInRange([s,o],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Qe(new fn([])),s=new Kn(n,e),o=new Kn(n,e+1);let u=At();return this.qr.forEachInRange([s,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new Kn(e,0),s=this.kr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Kn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Qe.comparator(e.key,n.key)||St(e.Hr,n.Hr)}static Ur(e,n){return St(e.Hr,n.Hr)||Qe.comparator(e.key,n.key)}}class TO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new zn(Kn.Kr)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new L2(u,n,s,o);this.mutationQueue.push(d);for(const y of o)this.Jr=this.Jr.add(new Kn(y.key,u)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return ge.resolve(d)}lookupMutationBatch(e,n){return ge.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Xr(s),u=o<0?0:o;return ge.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?Kp:this.Yn-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Kn(n,0),o=new Kn(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([s,o],(d=>{const y=this.Zr(d.Hr);u.push(y)})),ge.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new zn(St);return n.forEach((o=>{const u=new Kn(o,0),d=new Kn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(y=>{s=s.add(y.Hr)}))})),ge.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Qe.isDocumentKey(u)||(u=u.child(""));const d=new Kn(new Qe(u),0);let y=new zn(St);return this.Jr.forEachWhile((E=>{const b=E.key.path;return!!s.isPrefixOf(b)&&(b.length===o&&(y=y.add(E.Hr)),!0)}),d),ge.resolve(this.Yr(y))}Yr(e){const n=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Pt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return ge.forEach(n.mutations,(o=>{const u=new Kn(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,n){const s=new Kn(n,0),o=this.Jr.firstAfterOrEqual(s);return ge.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class SO{constructor(e){this.ti=e,this.docs=(function(){return new hn(Qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.ti(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ge.resolve(s?s.document.mutableCopy():fr.newInvalidDocument(n))}getEntries(e,n){let s=aa();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():fr.newInvalidDocument(o))})),ge.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=aa();const d=n.path,y=new Qe(d.child("__id-9223372036854775808__")),E=this.docs.getIteratorFrom(y);for(;E.hasNext();){const{key:b,value:{document:C}}=E.getNext();if(!d.isPrefixOf(b.path))break;b.path.length>d.length+1||$I(QI(C),s)<=0||(o.has(C.key)||Ph(n,C))&&(u=u.insert(C.key,C.mutableCopy()))}return ge.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Je(9500)}ni(e,n){return ge.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new AO(this)}getSize(e){return ge.resolve(this.size)}}class AO extends gO{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),ge.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class wO{constructor(e){this.persistence=e,this.ri=new Wo((n=>Qp(n)),$p),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.ii=0,this.si=new tg,this.targetCount=0,this.oi=Xl._r()}forEachTarget(e,n){return this.ri.forEach(((s,o)=>n(o))),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ii&&(this.ii=n),ge.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Xl(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,ge.resolve()}updateTargetData(e,n){return this.lr(n),ge.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.ri.forEach(((d,y)=>{y.sequenceNumber<=n&&s.get(y.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,y.targetId)),o++)})),ge.waitFor(u).next((()=>o))}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,n){const s=this.ri.get(n)||null;return ge.resolve(s)}addMatchingKeys(e,n,s){return this.si.$r(n,s),ge.resolve()}removeMatchingKeys(e,n,s){this.si.Qr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),ge.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),ge.resolve()}getMatchingKeysForTargetId(e,n){const s=this.si.jr(n);return ge.resolve(s)}containsKey(e,n){return ge.resolve(this.si.containsKey(n))}}class ET{constructor(e,n){this._i={},this.overlays={},this.ai=new xh(0),this.ui=!1,this.ui=!0,this.ci=new bO,this.referenceDelegate=e(this),this.li=new wO(this),this.indexManager=new uO,this.remoteDocumentCache=(function(o){return new SO(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new oO(n),this.Pi=new _O(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new EO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this._i[e.toKey()];return s||(s=new TO(n,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,s){Pe("MemoryPersistence","Starting transaction:",e);const o=new RO(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return ge.or(Object.values(this._i).map((s=>()=>s.containsKey(e,n))))}}class RO extends JI{constructor(e){super(),this.currentSequenceNumber=e}}class ng{constructor(e){this.persistence=e,this.Ri=new tg,this.Ai=null}static Vi(e){return new ng(e)}get di(){if(this.Ai)return this.Ai;throw Je(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.di.delete(s.toString()),ge.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.di.add(s.toString()),ge.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),ge.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.di,(s=>{const o=Qe.fromPath(s);return this.mi(e,o).next((u=>{u||n.removeEntry(o,rt.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return ge.or([()=>ge.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class bh{constructor(e,n){this.persistence=e,this.fi=new Wo((s=>e2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=pO(this,n)}static Vi(e,n){return new bh(e,n)}Ti(){}Ii(e){return ge.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}pr(e){let n=0;return this.mr(e,(s=>{n++})).next((()=>n))}mr(e,n){return ge.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((u=>u?ge.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(d=>this.wr(e,d,n).next((y=>{y||(s++,u.removeEntry(d,rt.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),ge.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),ge.resolve()}removeReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),ge.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Zf(e.data.value)),n}wr(e,n,s){return ge.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return ge.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class rg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Ts=s,this.Is=o}static Es(e,n){let s=At(),o=At();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new rg(e,n.fromCache,s,o)}}class CO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class IO{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return mw()?8:ZI(dr())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.gs(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,n,o,s).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new CO;return this.ys(e,n,d).next((y=>{if(u.result=y,this.As)return this.ws(e,n,d,y.size)}))})).next((()=>u.result))}ws(e,n,s,o){return s.documentReadCount<this.Vs?(Pl()<=Tt.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",Ll(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ge.resolve()):(Pl()<=Tt.DEBUG&&Pe("QueryEngine","Query:",Ll(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(Pl()<=Tt.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",Ll(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ps(n))):ge.resolve())}gs(e,n){if(G0(n))return ge.resolve(null);let s=ps(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=mp(n,null,"F"),s=ps(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const d=At(...u);return this.fs.getDocuments(e,d).next((y=>this.indexManager.getMinOffset(e,s).next((E=>{const b=this.bs(n,y);return this.Ss(n,b,d,E.readTime)?this.gs(e,mp(n,null,"F")):this.Ds(e,b,n,E)}))))})))))}ps(e,n,s,o){return G0(n)||o.isEqual(rt.min())?ge.resolve(null):this.fs.getDocuments(e,s).next((u=>{const d=this.bs(n,u);return this.Ss(n,d,s,o)?ge.resolve(null):(Pl()<=Tt.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ll(n)),this.Ds(e,d,n,YI(o,fc)).next((y=>y)))}))}bs(e,n){let s=new zn(Xb(e));return n.forEach(((o,u)=>{Ph(e,u)&&(s=s.add(u))})),s}Ss(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,s){return Pl()<=Tt.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Ll(n)),this.fs.getDocumentsMatchingQuery(e,n,uo.min(),s)}Ds(e,n,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const ig="LocalStore",OO=3e8;class DO{constructor(e,n,s,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new hn(St),this.Fs=new Wo((u=>Qp(u)),$p),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vO(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function xO(i,e,n,s){return new DO(i,e,n,s)}async function bT(i,e){const n=ot(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const d=[],y=[];let E=At();for(const b of o){d.push(b.batchId);for(const C of b.mutations)E=E.add(C.key)}for(const b of u){y.push(b.batchId);for(const C of b.mutations)E=E.add(C.key)}return n.localDocuments.getDocuments(s,E).next((b=>({Ns:b,removedBatchIds:d,addedBatchIds:y})))}))}))}function NO(i,e){const n=ot(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(y,E,b,C){const D=b.batch,N=D.keys();let X=ge.resolve();return N.forEach((de=>{X=X.next((()=>C.getEntry(E,de))).next((be=>{const Re=b.docVersions.get(de);Pt(Re!==null,48541),be.version.compareTo(Re)<0&&(D.applyToRemoteDocument(be,b),be.isValidDocument()&&(be.setReadTime(b.commitVersion),C.addEntry(be)))}))})),X.next((()=>y.mutationQueue.removeMutationBatch(E,D)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(y){let E=At();for(let b=0;b<y.mutationResults.length;++b)y.mutationResults[b].transformResults.length>0&&(E=E.add(y.batch.mutations[b].key));return E})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function TT(i){const e=ot(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function MO(i,e){const n=ot(i),s=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const y=[];e.targetChanges.forEach(((C,D)=>{const N=o.get(D);if(!N)return;y.push(n.li.removeMatchingKeys(u,C.removedDocuments,D).next((()=>n.li.addMatchingKeys(u,C.addedDocuments,D))));let X=N.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(D)!==null?X=X.withResumeToken(tr.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):C.resumeToken.approximateByteSize()>0&&(X=X.withResumeToken(C.resumeToken,s)),o=o.insert(D,X),(function(be,Re,He){return be.resumeToken.approximateByteSize()===0||Re.snapshotVersion.toMicroseconds()-be.snapshotVersion.toMicroseconds()>=OO?!0:He.addedDocuments.size+He.modifiedDocuments.size+He.removedDocuments.size>0})(N,X,C)&&y.push(n.li.updateTargetData(u,X))}));let E=aa(),b=At();if(e.documentUpdates.forEach((C=>{e.resolvedLimboDocuments.has(C)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(u,C))})),y.push(kO(u,d,e.documentUpdates).next((C=>{E=C.Bs,b=C.Ls}))),!s.isEqual(rt.min())){const C=n.li.getLastRemoteSnapshotVersion(u).next((D=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,s)));y.push(C)}return ge.waitFor(y).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,E,b))).next((()=>E))})).then((u=>(n.vs=o,u)))}function kO(i,e,n){let s=At(),o=At();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let d=aa();return n.forEach(((y,E)=>{const b=u.get(y);E.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(y)),E.isNoDocument()&&E.version.isEqual(rt.min())?(e.removeEntry(y,E.readTime),d=d.insert(y,E)):!b.isValidDocument()||E.version.compareTo(b.version)>0||E.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(E),d=d.insert(y,E)):Pe(ig,"Ignoring outdated watch update for ",y,". Current version:",b.version," Watch version:",E.version)})),{Bs:d,Ls:o}}))}function VO(i,e){const n=ot(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Kp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function PO(i,e){const n=ot(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.li.getTargetData(s,e).next((u=>u?(o=u,ge.resolve(o)):n.li.allocateTargetId(s).next((d=>(o=new no(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(s.targetId,s),n.Fs.set(e,s.targetId)),s}))}async function _p(i,e,n){const s=ot(i),o=s.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!iu(d))throw d;Pe(ig,`Failed to update sequence numbers for target ${e}: ${d}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function sE(i,e,n){const s=ot(i);let o=rt.min(),u=At();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(E,b,C){const D=ot(E),N=D.Fs.get(C);return N!==void 0?ge.resolve(D.vs.get(N)):D.li.getTargetData(b,C)})(s,d,ps(e)).next((y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(d,y.targetId).next((E=>{u=E}))})).next((()=>s.Cs.getDocumentsMatchingQuery(d,e,n?o:rt.min(),n?u:At()))).next((y=>(LO(s,T2(e),y),{documents:y,ks:u})))))}function LO(i,e,n){let s=i.Ms.get(e)||rt.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Ms.set(e,s)}class aE{constructor(){this.activeTargetIds=I2()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UO{constructor(){this.vo=new aE,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,s){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new aE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zO{Mo(e){}shutdown(){}}const oE="ConnectivityMonitor";class lE{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Pe(oE,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Pe(oE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let qf=null;function Ep(){return qf===null?qf=(function(){return 268435456+Math.round(2147483648*Math.random())})():qf++,"0x"+qf.toString(16)}const Xm="RestConnection",jO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class BO{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===mh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,n,s,o,u){const d=Ep(),y=this.Qo(e,n.toUriEncodedString());Pe(Xm,`Sending RPC '${e}' ${d}:`,y,s);const E={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(E,o,u);const{host:b}=new URL(y),C=Wl(b);return this.zo(e,y,E,s,C).then((D=>(Pe(Xm,`Received RPC '${e}' ${d}: `,D),D)),(D=>{throw Xo(Xm,`RPC '${e}' ${d} failed with error: `,D,"url: ",y,"request:",s),D}))}jo(e,n,s,o,u,d){return this.Wo(e,n,s,o,u)}Go(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+nu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const s=jO[e];let o=`${this.qo}/v1/${n}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class qO{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const ur="WebChannelConnection",Gu=(i,e,n)=>{i.listen(e,(s=>{try{n(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Hl extends BO{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Hl.c_){const e=Ib();Gu(e,Cb.STAT_EVENT,(n=>{n.stat===lp.PROXY?Pe(ur,"STAT_EVENT: detected buffering proxy"):n.stat===lp.NOPROXY&&Pe(ur,"STAT_EVENT: detected no buffering proxy")})),Hl.c_=!0}}zo(e,n,s,o,u){const d=Ep();return new Promise(((y,E)=>{const b=new wb;b.setWithCredentials(!0),b.listenOnce(Rb.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case Jf.NO_ERROR:const D=b.getResponseJson();Pe(ur,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(D)),y(D);break;case Jf.TIMEOUT:Pe(ur,`RPC '${e}' ${d} timed out`),E(new Fe(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Jf.HTTP_ERROR:const N=b.getStatus();if(Pe(ur,`RPC '${e}' ${d} failed with status:`,N,"response text:",b.getResponseText()),N>0){let X=b.getResponseJson();Array.isArray(X)&&(X=X[0]);const de=X?.error;if(de&&de.status&&de.message){const be=(function(He){const Ye=He.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(Ye)>=0?Ye:ve.UNKNOWN})(de.status);E(new Fe(be,de.message))}else E(new Fe(ve.UNKNOWN,"Server responded with status "+b.getStatus()))}else E(new Fe(ve.UNAVAILABLE,"Connection failed."));break;default:Je(9055,{l_:e,streamId:d,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{Pe(ur,`RPC '${e}' ${d} completed.`)}}));const C=JSON.stringify(o);Pe(ur,`RPC '${e}' ${d} sending request:`,o),b.send(n,"POST",C,s,15)}))}T_(e,n,s){const o=Ep(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(y.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Go(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const b=u.join("");Pe(ur,`Creating RPC '${e}' stream ${o}: ${b}`,y);const C=d.createWebChannel(b,y);this.I_(C);let D=!1,N=!1;const X=new qO({Ho:de=>{N?Pe(ur,`Not sending because RPC '${e}' stream ${o} is closed:`,de):(D||(Pe(ur,`Opening RPC '${e}' stream ${o} transport.`),C.open(),D=!0),Pe(ur,`RPC '${e}' stream ${o} sending:`,de),C.send(de))},Jo:()=>C.close()});return Gu(C,Yu.EventType.OPEN,(()=>{N||(Pe(ur,`RPC '${e}' stream ${o} transport opened.`),X.i_())})),Gu(C,Yu.EventType.CLOSE,(()=>{N||(N=!0,Pe(ur,`RPC '${e}' stream ${o} transport closed`),X.o_(),this.E_(C))})),Gu(C,Yu.EventType.ERROR,(de=>{N||(N=!0,Xo(ur,`RPC '${e}' stream ${o} transport errored. Name:`,de.name,"Message:",de.message),X.o_(new Fe(ve.UNAVAILABLE,"The operation could not be completed")))})),Gu(C,Yu.EventType.MESSAGE,(de=>{if(!N){const be=de.data[0];Pt(!!be,16349);const Re=be,He=Re?.error||Re[0]?.error;if(He){Pe(ur,`RPC '${e}' stream ${o} received error:`,He);const Ye=He.status;let Le=(function(et){const V=xn[et];if(V!==void 0)return lT(V)})(Ye),it=He.message;Ye==="NOT_FOUND"&&it.includes("database")&&it.includes("does not exist")&&it.includes(this.databaseId.database)&&Xo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),Le===void 0&&(Le=ve.INTERNAL,it="Unknown error status: "+Ye+" with message "+He.message),N=!0,X.o_(new Fe(Le,it)),C.close()}else Pe(ur,`RPC '${e}' stream ${o} received:`,be),X.__(be)}})),Hl.u_(),setTimeout((()=>{X.s_()}),0),X}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,s){super.Go(e,n,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Ob()}}function HO(i){return new Hl(i)}function Jm(){return typeof document<"u"?document:null}function jh(i){return new Y2(i,!0)}Hl.c_=!1;class ST{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=s,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&Pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const uE="PersistentStream";class AT{constructor(e,n,s,o,u,d,y,E){this.Ci=e,this.b_=s,this.S_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=y,this.listener=E,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ST(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(sa(n.toString()),sa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new Fe(ve.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Pe(uE,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Pe(uE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class FO extends AT{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=X2(this.serializer,e),s=(function(u){if(!("targetChange"in u))return rt.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?rt.min():d.readTime?gs(d.readTime):rt.min()})(e);return this.listener.J_(n,s)}Z_(e){const n={};n.database=vp(this.serializer),n.addTarget=(function(u,d){let y;const E=d.target;if(y=dp(E)?{documents:W2(u,E)}:{query:eO(u,E).ft},y.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){y.resumeToken=fT(u,d.resumeToken);const b=pp(u,d.expectedCount);b!==null&&(y.expectedCount=b)}else if(d.snapshotVersion.compareTo(rt.min())>0){y.readTime=Eh(u,d.snapshotVersion.toTimestamp());const b=pp(u,d.expectedCount);b!==null&&(y.expectedCount=b)}return y})(this.serializer,e);const s=nO(this.serializer,e);s&&(n.labels=s),this.K_(n)}X_(e){const n={};n.database=vp(this.serializer),n.removeTarget=e,this.K_(n)}}class KO extends AT{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Z2(e.writeResults,e.commitTime),s=gs(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=vp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>J2(this.serializer,s)))};this.K_(n)}}class GO{}class YO extends GO{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Fe(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,gp(n,s),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Fe(ve.UNKNOWN,u.toString())}))}jo(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,y])=>this.connection.jo(e,gp(n,s),o,d,y,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Fe(ve.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function QO(i,e,n,s){return new YO(i,e,n,s)}class $O{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(sa(n),this.aa=!1):Pe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Jo="RemoteStore";class XO{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{s.enqueueAndForget((async()=>{tl(this)&&(Pe(Jo,"Restarting streams for network reachability change."),await(async function(E){const b=ot(E);b.Ea.add(4),await Cc(b),b.Va.set("Unknown"),b.Ea.delete(4),await Bh(b)})(this))}))})),this.Va=new $O(s,o)}}async function Bh(i){if(tl(i))for(const e of i.Ra)await e(!0)}async function Cc(i){for(const e of i.Ra)await e(!1)}function wT(i,e){const n=ot(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),lg(n)?og(n):su(n).O_()&&ag(n,e))}function sg(i,e){const n=ot(i),s=su(n);n.Ia.delete(e),s.O_()&&RT(n,e),n.Ia.size===0&&(s.O_()?s.L_():tl(n)&&n.Va.set("Unknown"))}function ag(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(rt.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}su(i).Z_(e)}function RT(i,e){i.da.$e(e),su(i).X_(e)}function og(i){i.da=new H2({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),su(i).start(),i.Va.ua()}function lg(i){return tl(i)&&!su(i).x_()&&i.Ia.size>0}function tl(i){return ot(i).Ea.size===0}function CT(i){i.da=void 0}async function JO(i){i.Va.set("Online")}async function ZO(i){i.Ia.forEach(((e,n)=>{ag(i,e)}))}async function WO(i,e){CT(i),lg(i)?(i.Va.ha(e),og(i)):i.Va.set("Unknown")}async function eD(i,e,n){if(i.Va.set("Online"),e instanceof cT&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const y of u.targetIds)o.Ia.has(y)&&(await o.remoteSyncer.rejectListen(y,d),o.Ia.delete(y),o.da.removeTarget(y))})(i,e)}catch(s){Pe(Jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Th(i,s)}else if(e instanceof th?i.da.Xe(e):e instanceof uT?i.da.st(e):i.da.tt(e),!n.isEqual(rt.min()))try{const s=await TT(i.localStore);n.compareTo(s)>=0&&await(function(u,d){const y=u.da.Tt(d);return y.targetChanges.forEach(((E,b)=>{if(E.resumeToken.approximateByteSize()>0){const C=u.Ia.get(b);C&&u.Ia.set(b,C.withResumeToken(E.resumeToken,d))}})),y.targetMismatches.forEach(((E,b)=>{const C=u.Ia.get(E);if(!C)return;u.Ia.set(E,C.withResumeToken(tr.EMPTY_BYTE_STRING,C.snapshotVersion)),RT(u,E);const D=new no(C.target,E,b,C.sequenceNumber);ag(u,D)})),u.remoteSyncer.applyRemoteEvent(y)})(i,n)}catch(s){Pe(Jo,"Failed to raise snapshot:",s),await Th(i,s)}}async function Th(i,e,n){if(!iu(e))throw e;i.Ea.add(1),await Cc(i),i.Va.set("Offline"),n||(n=()=>TT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Pe(Jo,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Bh(i)}))}function IT(i,e){return e().catch((n=>Th(i,n,e)))}async function qh(i){const e=ot(i),n=mo(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Kp;for(;tD(e);)try{const o=await VO(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,nD(e,o)}catch(o){await Th(e,o)}OT(e)&&DT(e)}function tD(i){return tl(i)&&i.Ta.length<10}function nD(i,e){i.Ta.push(e);const n=mo(i);n.O_()&&n.Y_&&n.ea(e.mutations)}function OT(i){return tl(i)&&!mo(i).x_()&&i.Ta.length>0}function DT(i){mo(i).start()}async function rD(i){mo(i).ra()}async function iD(i){const e=mo(i);for(const n of i.Ta)e.ea(n.mutations)}async function sD(i,e,n){const s=i.Ta.shift(),o=Zp.from(s,e,n);await IT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await qh(i)}async function aD(i,e){e&&mo(i).Y_&&await(async function(s,o){if((function(d){return j2(d)&&d!==ve.ABORTED})(o.code)){const u=s.Ta.shift();mo(s).B_(),await IT(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await qh(s)}})(i,e),OT(i)&&DT(i)}async function cE(i,e){const n=ot(i);n.asyncQueue.verifyOperationInProgress(),Pe(Jo,"RemoteStore received new credentials");const s=tl(n);n.Ea.add(3),await Cc(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bh(n)}async function oD(i,e){const n=ot(i);e?(n.Ea.delete(2),await Bh(n)):e||(n.Ea.add(2),await Cc(n),n.Va.set("Unknown"))}function su(i){return i.ma||(i.ma=(function(n,s,o){const u=ot(n);return u.sa(),new FO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Zo:JO.bind(null,i),Yo:ZO.bind(null,i),t_:WO.bind(null,i),J_:eD.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),lg(i)?og(i):i.Va.set("Unknown")):(await i.ma.stop(),CT(i))}))),i.ma}function mo(i){return i.fa||(i.fa=(function(n,s,o){const u=ot(n);return u.sa(),new KO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:rD.bind(null,i),t_:aD.bind(null,i),ta:iD.bind(null,i),na:sD.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await qh(i)):(await i.fa.stop(),i.Ta.length>0&&(Pe(Jo,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class ug{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new lo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,y=new ug(e,n,d,o,u);return y.start(s),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Fe(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cg(i,e){if(sa("AsyncQueue",`${e}: ${i}`),iu(i))return new Fe(ve.UNAVAILABLE,`${e}: ${i}`);throw i}class Fl{static emptySet(e){return new Fl(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Qe.comparator(n.key,s.key):(n,s)=>Qe.comparator(n.key,s.key),this.keyedMap=Qu(),this.sortedSet=new hn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Fl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Fl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class fE{constructor(){this.ga=new hn(Qe.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Je(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Jl{constructor(e,n,s,o,u,d,y,E,b){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=y,this.excludesMetadataChanges=E,this.hasCachedResults=b}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach((y=>{d.push({type:0,doc:y})})),new Jl(e,n,Fl.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class lD{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class uD{constructor(){this.queries=hE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=ot(n),u=o.queries;o.queries=hE(),u.forEach(((d,y)=>{for(const E of y.ba)E.onError(s)}))})(this,new Fe(ve.ABORTED,"Firestore shutting down"))}}function hE(){return new Wo((i=>$b(i)),Vh)}async function cD(i,e){const n=ot(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(s=2):(u=new lD,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const y=cg(d,`Initialization of query '${Ll(e.query)}' failed`);return void e.onError(y)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&fg(n)}async function fD(i,e){const n=ot(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function hD(i,e){const n=ot(i);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const y of d.ba)y.Fa(o)&&(s=!0);d.wa=o}}s&&fg(n)}function dD(i,e,n){const s=ot(i),o=s.queries.get(e);if(o)for(const u of o.ba)u.onError(n);s.queries.delete(e)}function fg(i){i.Ca.forEach((e=>{e.next()}))}var bp,dE;(dE=bp||(bp={})).Ma="default",dE.Cache="cache";class mD{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Jl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bp.Cache}}class xT{constructor(e){this.key=e}}class NT{constructor(e){this.key=e}}class pD{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=At(),this.mutatedKeys=At(),this.eu=Xb(e),this.tu=new Fl(this.eu)}get nu(){return this.Za}ru(e,n){const s=n?n.iu:new fE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,y=!1;const E=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((C,D)=>{const N=o.get(C),X=Ph(this.query,D)?D:null,de=!!N&&this.mutatedKeys.has(N.key),be=!!X&&(X.hasLocalMutations||this.mutatedKeys.has(X.key)&&X.hasCommittedMutations);let Re=!1;N&&X?N.data.isEqual(X.data)?de!==be&&(s.track({type:3,doc:X}),Re=!0):this.su(N,X)||(s.track({type:2,doc:X}),Re=!0,(E&&this.eu(X,E)>0||b&&this.eu(X,b)<0)&&(y=!0)):!N&&X?(s.track({type:0,doc:X}),Re=!0):N&&!X&&(s.track({type:1,doc:N}),Re=!0,(E||b)&&(y=!0)),Re&&(X?(d=d.add(X),u=be?u.add(C):u.delete(C)):(d=d.delete(C),u=u.delete(C)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const C=this.query.limitType==="F"?d.last():d.first();d=d.delete(C.key),u=u.delete(C.key),s.track({type:1,doc:C})}return{tu:d,iu:s,Ss:y,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((C,D)=>(function(X,de){const be=Re=>{switch(Re){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je(20277,{Vt:Re})}};return be(X)-be(de)})(C.type,D.type)||this.eu(C.doc,D.doc))),this.ou(s),o=o??!1;const y=n&&!o?this._u():[],E=this.Ya.size===0&&this.current&&!o?1:0,b=E!==this.Xa;return this.Xa=E,d.length!==0||b?{snapshot:new Jl(this.query,e.tu,u,d,e.mutatedKeys,E===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new fE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=At(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const n=[];return e.forEach((s=>{this.Ya.has(s)||n.push(new NT(s))})),this.Ya.forEach((s=>{e.has(s)||n.push(new xT(s))})),n}cu(e){this.Za=e.ks,this.Ya=At();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Jl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const hg="SyncEngine";class gD{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class yD{constructor(e){this.key=e,this.hu=!1}}class vD{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Wo((y=>$b(y)),Vh),this.Iu=new Map,this.Eu=new Set,this.Ru=new hn(Qe.comparator),this.Au=new Map,this.Vu=new tg,this.du={},this.mu=new Map,this.fu=Xl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _D(i,e,n=!0){const s=UT(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await MT(s,e,n,!0),o}async function ED(i,e){const n=UT(i);await MT(n,e,!0,!1)}async function MT(i,e,n,s){const o=await PO(i.localStore,ps(e)),u=o.targetId,d=i.sharedClientState.addLocalQueryTarget(u,n);let y;return s&&(y=await bD(i,e,u,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&wT(i.remoteStore,o),y}async function bD(i,e,n,s,o){i.pu=(D,N,X)=>(async function(be,Re,He,Ye){let Le=Re.view.ru(He);Le.Ss&&(Le=await sE(be.localStore,Re.query,!1).then((({documents:V})=>Re.view.ru(V,Le))));const it=Ye&&Ye.targetChanges.get(Re.targetId),ht=Ye&&Ye.targetMismatches.get(Re.targetId)!=null,et=Re.view.applyChanges(Le,be.isPrimaryClient,it,ht);return pE(be,Re.targetId,et.au),et.snapshot})(i,D,N,X);const u=await sE(i.localStore,e,!0),d=new pD(e,u.ks),y=d.ru(u.documents),E=Rc.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),b=d.applyChanges(y,i.isPrimaryClient,E);pE(i,n,b.au);const C=new gD(e,n,d);return i.Tu.set(e,C),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),b.snapshot}async function TD(i,e,n){const s=ot(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((d=>!Vh(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await _p(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&sg(s.remoteStore,o.targetId),Tp(s,o.targetId)})).catch(ru)):(Tp(s,o.targetId),await _p(s.localStore,o.targetId,!0))}async function SD(i,e){const n=ot(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),sg(n.remoteStore,s.targetId))}async function AD(i,e,n){const s=xD(i);try{const o=await(function(d,y){const E=ot(d),b=Wt.now(),C=y.reduce(((X,de)=>X.add(de.key)),At());let D,N;return E.persistence.runTransaction("Locally write mutations","readwrite",(X=>{let de=aa(),be=At();return E.xs.getEntries(X,C).next((Re=>{de=Re,de.forEach(((He,Ye)=>{Ye.isValidDocument()||(be=be.add(He))}))})).next((()=>E.localDocuments.getOverlayedDocuments(X,de))).next((Re=>{D=Re;const He=[];for(const Ye of y){const Le=V2(Ye,D.get(Ye.key).overlayedDocument);Le!=null&&He.push(new el(Ye.key,Le,qb(Le.value.mapValue),na.exists(!0)))}return E.mutationQueue.addMutationBatch(X,b,He,y)})).next((Re=>{N=Re;const He=Re.applyToLocalDocumentSet(D,be);return E.documentOverlayCache.saveOverlays(X,Re.batchId,He)}))})).then((()=>({batchId:N.batchId,changes:Zb(D)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,y,E){let b=d.du[d.currentUser.toKey()];b||(b=new hn(St)),b=b.insert(y,E),d.du[d.currentUser.toKey()]=b})(s,o.batchId,n),await Ic(s,o.changes),await qh(s.remoteStore)}catch(o){const u=cg(o,"Failed to persist write");n.reject(u)}}async function kT(i,e){const n=ot(i);try{const s=await MO(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(Pt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Pt(d.hu,14607):o.removedDocuments.size>0&&(Pt(d.hu,42227),d.hu=!1))})),await Ic(n,s,e)}catch(s){await ru(s)}}function mE(i,e,n){const s=ot(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,d)=>{const y=d.view.va(e);y.snapshot&&o.push(y.snapshot)})),(function(d,y){const E=ot(d);E.onlineState=y;let b=!1;E.queries.forEach(((C,D)=>{for(const N of D.ba)N.va(y)&&(b=!0)})),b&&fg(E)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function wD(i,e,n){const s=ot(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let d=new hn(Qe.comparator);d=d.insert(u,fr.newNoDocument(u,rt.min()));const y=At().add(u),E=new zh(rt.min(),new Map,new hn(St),d,y);await kT(s,E),s.Ru=s.Ru.remove(u),s.Au.delete(e),dg(s)}else await _p(s.localStore,e,!1).then((()=>Tp(s,e,n))).catch(ru)}async function RD(i,e){const n=ot(i),s=e.batch.batchId;try{const o=await NO(n.localStore,e);PT(n,s,null),VT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ic(n,o)}catch(o){await ru(o)}}async function CD(i,e,n){const s=ot(i);try{const o=await(function(d,y){const E=ot(d);return E.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let C;return E.mutationQueue.lookupMutationBatch(b,y).next((D=>(Pt(D!==null,37113),C=D.keys(),E.mutationQueue.removeMutationBatch(b,D)))).next((()=>E.mutationQueue.performConsistencyCheck(b))).next((()=>E.documentOverlayCache.removeOverlaysForBatchId(b,C,y))).next((()=>E.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,C))).next((()=>E.localDocuments.getDocuments(b,C)))}))})(s.localStore,e);PT(s,e,n),VT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Ic(s,o)}catch(o){await ru(o)}}function VT(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function PT(i,e,n){const s=ot(i);let o=s.du[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function Tp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((s=>{i.Vu.containsKey(s)||LT(i,s)}))}function LT(i,e){i.Eu.delete(e.path.canonicalString());const n=i.Ru.get(e);n!==null&&(sg(i.remoteStore,n),i.Ru=i.Ru.remove(e),i.Au.delete(n),dg(i))}function pE(i,e,n){for(const s of n)s instanceof xT?(i.Vu.addReference(s.key,e),ID(i,s)):s instanceof NT?(Pe(hg,"Document no longer in limbo: "+s.key),i.Vu.removeReference(s.key,e),i.Vu.containsKey(s.key)||LT(i,s.key)):Je(19791,{wu:s})}function ID(i,e){const n=e.key,s=n.path.canonicalString();i.Ru.get(n)||i.Eu.has(s)||(Pe(hg,"New document in limbo: "+n),i.Eu.add(s),dg(i))}function dg(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Qe(fn.fromString(e)),s=i.fu.next();i.Au.set(s,new yD(n)),i.Ru=i.Ru.insert(n,s),wT(i.remoteStore,new no(ps(Xp(n.path)),s,"TargetPurposeLimboResolution",xh.ce))}}async function Ic(i,e,n){const s=ot(i),o=[],u=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((y,E)=>{d.push(s.pu(E,e,n).then((b=>{if((b||n)&&s.isPrimaryClient){const C=b?!b.fromCache:n?.targetChanges.get(E.targetId)?.current;s.sharedClientState.updateQueryState(E.targetId,C?"current":"not-current")}if(b){o.push(b);const C=rg.Es(E.targetId,b);u.push(C)}})))})),await Promise.all(d),s.Pu.J_(o),await(async function(E,b){const C=ot(E);try{await C.persistence.runTransaction("notifyLocalViewChanges","readwrite",(D=>ge.forEach(b,(N=>ge.forEach(N.Ts,(X=>C.persistence.referenceDelegate.addReference(D,N.targetId,X))).next((()=>ge.forEach(N.Is,(X=>C.persistence.referenceDelegate.removeReference(D,N.targetId,X)))))))))}catch(D){if(!iu(D))throw D;Pe(ig,"Failed to update sequence numbers: "+D)}for(const D of b){const N=D.targetId;if(!D.fromCache){const X=C.vs.get(N),de=X.snapshotVersion,be=X.withLastLimboFreeSnapshotVersion(de);C.vs=C.vs.insert(N,be)}}})(s.localStore,u))}async function OD(i,e){const n=ot(i);if(!n.currentUser.isEqual(e)){Pe(hg,"User change. New user:",e.toKey());const s=await bT(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((y=>{y.forEach((E=>{E.reject(new Fe(ve.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ic(n,s.Ns)}}function DD(i,e){const n=ot(i),s=n.Au.get(e);if(s&&s.hu)return At().add(s.key);{let o=At();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const y=n.Tu.get(d);o=o.unionWith(y.view.nu)}return o}}function UT(i){const e=ot(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=kT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wD.bind(null,e),e.Pu.J_=hD.bind(null,e.eventManager),e.Pu.yu=dD.bind(null,e.eventManager),e}function xD(i){const e=ot(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CD.bind(null,e),e}class Sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return xO(this.persistence,new IO,e.initialUser,this.serializer)}Cu(e){return new ET(ng.Vi,this.serializer)}Du(e){return new UO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sh.provider={build:()=>new Sh};class ND extends Sh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Pt(this.persistence.referenceDelegate instanceof bh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new dO(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Br.withCacheSize(this.cacheSizeBytes):Br.DEFAULT;return new ET((s=>bh.Vi(s,n)),this.serializer)}}class Sp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>mE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=OD.bind(null,this.syncEngine),await oD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new uD})()}createDatastore(e){const n=jh(e.databaseInfo.databaseId),s=HO(e.databaseInfo);return QO(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,d,y){return new XO(s,o,u,d,y)})(this.localStore,this.datastore,e.asyncQueue,(n=>mE(this.syncEngine,n,0)),(function(){return lE.v()?new lE:new zO})())}createSyncEngine(e,n){return(function(o,u,d,y,E,b,C){const D=new vD(o,u,d,y,E,b);return C&&(D.gu=!0),D})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=ot(n);Pe(Jo,"RemoteStore shutting down."),s.Ea.add(5),await Cc(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Sp.provider={build:()=>new Sp};class MD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):sa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const po="FirestoreClient";class kD{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this._databaseInfo=o,this.user=cr.UNAUTHENTICATED,this.clientId=Hp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async d=>{Pe(po,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(Pe(po,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=cg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Zm(i,e){i.asyncQueue.verifyOperationInProgress(),Pe(po,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await bT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function gE(i,e){i.asyncQueue.verifyOperationInProgress();const n=await VD(i);Pe(po,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>cE(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>cE(e.remoteStore,o))),i._onlineComponents=e}async function VD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Pe(po,"Using user provided OfflineComponentProvider");try{await Zm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ve.FAILED_PRECONDITION||o.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Xo("Error using user provided cache. Falling back to memory cache: "+n),await Zm(i,new Sh)}}else Pe(po,"Using default OfflineComponentProvider"),await Zm(i,new ND(void 0));return i._offlineComponents}async function zT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Pe(po,"Using user provided OnlineComponentProvider"),await gE(i,i._uninitializedComponentsProvider._online)):(Pe(po,"Using default OnlineComponentProvider"),await gE(i,new Sp))),i._onlineComponents}function PD(i){return zT(i).then((e=>e.syncEngine))}async function LD(i){const e=await zT(i),n=e.eventManager;return n.onListen=_D.bind(null,e.syncEngine),n.onUnlisten=TD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ED.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SD.bind(null,e.syncEngine),n}function UD(i,e,n={}){const s=new lo;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,y,E,b){const C=new MD({next:N=>{C.Nu(),d.enqueueAndForget((()=>fD(u,D)));const X=N.docs.has(y);!X&&N.fromCache?b.reject(new Fe(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):X&&N.fromCache&&E&&E.source==="server"?b.reject(new Fe(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(N)},error:N=>b.reject(N)}),D=new mD(Xp(y.path),C,{includeMetadataChanges:!0,Ka:!0});return cD(u,D)})(await LD(i),i.asyncQueue,e,n,s))),s.promise}function zD(i,e){const n=new lo;return i.asyncQueue.enqueueAndForget((async()=>AD(await PD(i),e,n))),n.promise}function jT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const jD="ComponentProvider",yE=new Map;function BD(i,e,n,s,o){return new r2(i,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,jT(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}const BT="firestore.googleapis.com",vE=!0;class _E{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Fe(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=BT,this.ssl=vE}else this.host=e.host,this.ssl=e.ssl??vE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_T;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fO)throw new Fe(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Fe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Fe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Fe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mg{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _E({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Fe(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Fe(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _E(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new VI;switch(s.type){case"firstParty":return new zI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Fe(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=yE.get(n);s&&(Pe(jD,"Removing Datastore"),yE.delete(n),s.terminate())})(this),Promise.resolve()}}function qD(i,e,n,s={}){i=cc(i,mg);const o=Wl(e),u=i._getSettings(),d={...u,emulatorOptions:i._getEmulatorOptions()},y=`${e}:${n}`;o&&(jE(`https://${y}`),BE("Firestore",!0)),u.host!==BT&&u.host!==y&&Xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const E={...u,host:y,ssl:o,emulatorOptions:s};if(!Go(E,d)&&(i._setSettings(E),s.mockUserToken)){let b,C;if(typeof s.mockUserToken=="string")b=s.mockUserToken,C=cr.MOCK_USER;else{b=sw(s.mockUserToken,i._app?.options.projectId);const D=s.mockUserToken.sub||s.mockUserToken.user_id;if(!D)throw new Fe(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new cr(D)}i._authCredentials=new PI(new xb(b,C))}}class pg{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new pg(this.firestore,e,this._query)}}class Gn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}toJSON(){return{type:Gn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Ac(n,Gn._jsonSchema))return new Gn(e,s||null,new Qe(fn.fromString(n.referencePath)))}}Gn._jsonSchemaVersion="firestore/documentReference/1.0",Gn._jsonSchema={type:Nn("string",Gn._jsonSchemaVersion),referencePath:Nn("string")};class yc extends pg{constructor(e,n,s){super(e,n,Xp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new Qe(e))}withConverter(e){return new yc(this.firestore,e,this._path)}}function qT(i,e,...n){if(i=Mi(i),arguments.length===1&&(e=Hp.newId()),KI("doc","path",e),i instanceof mg){const s=fn.fromString(e,...n);return M0(s),new Gn(i,null,new Qe(s))}{if(!(i instanceof Gn||i instanceof yc))throw new Fe(ve.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(fn.fromString(e,...n));return M0(s),new Gn(i.firestore,i instanceof yc?i.converter:null,new Qe(s))}}const EE="AsyncQueue";class bE{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ST(this,"async_queue_retry"),this._c=()=>{const s=Jm();s&&Pe(EE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Jm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Jm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new lo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!iu(e))throw e;Pe(EE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,sa("INTERNAL UNHANDLED ERROR: ",TE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=ug.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Je(47125,{Pc:TE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function TE(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class gg extends mg{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new bE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bE(e),this._firestoreClient=void 0,await e}}}function HD(i,e){const n=typeof i=="object"?i:KE(),s=typeof i=="string"?i:mh,o=xp(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=rw("firestore");u&&qD(o,...u)}return o}function HT(i){if(i._terminated)throw new Fe(ve.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||FD(i),i._firestoreClient}function FD(i){const e=i._freezeSettings(),n=BD(i._databaseId,i._app?.options.appId||"",i._persistenceKey,i._app?.options.apiKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new kD(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class Ni{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ni(tr.fromBase64String(e))}catch(n){throw new Fe(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ni(tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ni._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ac(e,Ni._jsonSchema))return Ni.fromBase64String(e.bytes)}}Ni._jsonSchemaVersion="firestore/bytes/1.0",Ni._jsonSchema={type:Nn("string",Ni._jsonSchemaVersion),bytes:Nn("string")};class FT{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Fe(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class KT{constructor(e){this._methodName=e}}class ys{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Fe(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Fe(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ys._jsonSchemaVersion}}static fromJSON(e){if(Ac(e,ys._jsonSchema))return new ys(e.latitude,e.longitude)}}ys._jsonSchemaVersion="firestore/geoPoint/1.0",ys._jsonSchema={type:Nn("string",ys._jsonSchemaVersion),latitude:Nn("number"),longitude:Nn("number")};class Xi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Xi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ac(e,Xi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Xi(e.vectorValues);throw new Fe(ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xi._jsonSchemaVersion="firestore/vectorValue/1.0",Xi._jsonSchema={type:Nn("string",Xi._jsonSchemaVersion),vectorValues:Nn("object")};const KD=/^__.*__$/;class GD{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new el(e,this.data,this.fieldMask,n,this.fieldTransforms):new wc(e,this.data,n,this.fieldTransforms)}}function GT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je(40011,{dataSource:i})}}class yg{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new yg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ah(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(GT(this.dataSource)&&KD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class YD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||jh(e)}createContext(e,n,s,o=!1){return new yg({dataSource:e,methodName:n,targetDoc:s,path:er.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function QD(i){const e=i._freezeSettings(),n=jh(i._databaseId);return new YD(i._databaseId,!!e.ignoreUndefinedProperties,n)}function $D(i,e,n,s,o,u={}){const d=i.createContext(u.merge||u.mergeFields?2:0,e,n,o);XT("Data must be an object, but it was:",d,s);const y=QT(s,d);let E,b;if(u.merge)E=new Qi(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const C=[];for(const D of u.mergeFields){const N=vg(e,D,n);if(!d.contains(N))throw new Fe(ve.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);ZD(C,N)||C.push(N)}E=new Qi(C),b=d.fieldTransforms.filter((D=>E.covers(D.field)))}else E=null,b=d.fieldTransforms;return new GD(new xi(y),E,b)}function YT(i,e){if($T(i=Mi(i)))return XT("Unsupported field value:",e,i),QT(i,e);if(i instanceof KT)return(function(s,o){if(!GT(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const u=[];let d=0;for(const y of s){let E=YT(y,o.childContextForArray(d));E==null&&(E={nullValue:"NULL_VALUE"}),u.push(E),d++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=Mi(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return O2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Wt.fromDate(s);return{timestampValue:Eh(o.serializer,u)}}if(s instanceof Wt){const u=new Wt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Eh(o.serializer,u)}}if(s instanceof ys)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ni)return{bytesValue:fT(o.serializer,s._byteString)};if(s instanceof Gn){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:eg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Xi)return(function(d,y){const E=d instanceof Xi?d.toArray():d;return{mapValue:{fields:{[jb]:{stringValue:Bb},[ph]:{arrayValue:{values:E.map((C=>{if(typeof C!="number")throw y.createError("VectorValues must only contain numeric values.");return Jp(y.serializer,C)}))}}}}}})(s,o);if(vT(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Fp(s)}`)})(i,e)}function QT(i,e){const n={};return kb(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zo(i,((s,o)=>{const u=YT(o,e.childContextForField(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function $T(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Wt||i instanceof ys||i instanceof Ni||i instanceof Gn||i instanceof KT||i instanceof Xi||vT(i))}function XT(i,e,n){if(!$T(n)||!Nb(n)){const s=Fp(n);throw s==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+s)}}function vg(i,e,n){if((e=Mi(e))instanceof FT)return e._internalPath;if(typeof e=="string")return JD(i,e);throw Ah("Field path arguments must be of type string or ",i,!1,void 0,n)}const XD=new RegExp("[~\\*/\\[\\]]");function JD(i,e,n){if(e.search(XD)>=0)throw Ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new FT(...e.split("."))._internalPath}catch{throw Ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Ah(i,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let y=`Function ${e}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let E="";return(u||d)&&(E+=" (found",u&&(E+=` in field ${s}`),d&&(E+=` in document ${o}`),E+=")"),new Fe(ve.INVALID_ARGUMENT,y+i+E)}function ZD(i,e){return i.some((n=>n.isEqual(e)))}class WD{convertValue(e,n="none"){switch(ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return An(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Je(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Zo(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[ph].arrayValue?.values?.map((s=>An(s.doubleValue)));return new Xi(n)}convertGeoPoint(e){return new ys(An(e.latitude),An(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Mh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(hc(e));default:return null}}convertTimestamp(e){const n=co(e);return new Wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=fn.fromString(e);Pt(yT(s),9688,{name:e});const o=new dc(s.get(1),s.get(3)),u=new Qe(s.popFirst(5));return o.isEqual(n)||sa(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class ex extends WD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ni(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,n)}}const SE="@firebase/firestore",AE="4.11.0";class JT{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(vg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tx extends JT{data(){return super.data()}}function nx(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class Xu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fo extends JT{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(vg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Fe(ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Fo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Fo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fo._jsonSchema={type:Nn("string",Fo._jsonSchemaVersion),bundleSource:Nn("string","DocumentSnapshot"),bundleName:Nn("string"),bundle:Nn("string")};class nh extends Fo{data(e={}){return super.data(e)}}class ic{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Xu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new nh(this._firestore,this._userDataWriter,s.key,s,new Xu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Fe(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((y=>{const E=new nh(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Xu(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);return y.doc,{type:"added",doc:E,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((y=>u||y.type!==3)).map((y=>{const E=new nh(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Xu(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,C=-1;return y.type!==0&&(b=d.indexOf(y.doc.key),d=d.delete(y.doc.key)),y.type!==1&&(d=d.add(y.doc),C=d.indexOf(y.doc.key)),{type:rx(y.type),doc:E,oldIndex:b,newIndex:C}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Fe(ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ic._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Hp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function rx(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je(61501,{type:i})}}ic._jsonSchemaVersion="firestore/querySnapshot/1.0",ic._jsonSchema={type:Nn("string",ic._jsonSchemaVersion),bundleSource:Nn("string","QuerySnapshot"),bundleName:Nn("string"),bundle:Nn("string")};function ix(i){i=cc(i,Gn);const e=cc(i.firestore,gg),n=HT(e);return UD(n,i._key).then((s=>ox(e,i,s)))}function sx(i,e,n){i=cc(i,Gn);const s=cc(i.firestore,gg),o=nx(i.converter,e),u=QD(s);return ax(s,[$D(u,"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,na.none())])}function ax(i,e){const n=HT(i);return zD(n,e)}function ox(i,e,n){const s=n.docs.get(e._key),o=new ex(i);return new Fo(i,o,e._key,s,new Xu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){kI(eu),Kl(new Yo("firestore",((s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),y=new gg(new LI(s.getProvider("auth-internal")),new jI(d,s.getProvider("app-check-internal")),i2(d,o),d);return u={useFetchStreams:n,...u},y._setSettings(u),y}),"PUBLIC").setMultipleInstances(!0)),ao(SE,AE,e),ao(SE,AE,"esm2020")})();const lx={apiKey:"AIzaSyCGabs1zTYUI0-yPRp2RD7_Zk4HLsd3kSc",authDomain:"gemini-podcast-cards.firebaseapp.com",projectId:"gemini-podcast-cards",storageBucket:"gemini-podcast-cards.firebasestorage.app",messagingSenderId:"535172285628",appId:"1:535172285628:web:1fa37b46cf2bdf89257cb9"},ZT=FE(lx),Hf=NI(ZT),ux=new Ws,WT=HD(ZT),e1="users";async function cx(i,e){if(!i)throw new Error("User ID is required");try{const n=JSON.stringify(e),s=qT(WT,e1,i);await sx(s,{vocab_data:n,last_synced:Date.now()}),console.log(`Successfully synced ${e.length} cards for user ${i}`)}catch(n){throw console.error("Sync upload failed:",n),n}}async function fx(i){if(!i)throw new Error("User ID is required");try{const e=qT(WT,e1,i),n=await ix(e);if(n.exists()){const s=n.data();if(s.vocab_data)return JSON.parse(s.vocab_data)}return null}catch(e){throw console.error("Sync download failed:",e),e}}let hx={data:""},dx=i=>{if(typeof window=="object"){let e=(i?i.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(i||document.head).appendChild(e),e.firstChild}return i||hx},mx=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,px=/\/\*[^]*?\*\/|  +/g,wE=/\n+/g,to=(i,e)=>{let n="",s="",o="";for(let u in i){let d=i[u];u[0]=="@"?u[1]=="i"?n=u+" "+d+";":s+=u[1]=="f"?to(d,u):u+"{"+to(d,u[1]=="k"?"":e)+"}":typeof d=="object"?s+=to(d,e?e.replace(/([^,])+/g,y=>u.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,E=>/&/.test(E)?E.replace(/&/g,y):y?y+" "+E:E)):u):d!=null&&(u=/^--/.test(u)?u:u.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=to.p?to.p(u,d):u+":"+d+";")}return n+(e&&o?e+"{"+o+"}":o)+s},Zs={},t1=i=>{if(typeof i=="object"){let e="";for(let n in i)e+=n+t1(i[n]);return e}return i},gx=(i,e,n,s,o)=>{let u=t1(i),d=Zs[u]||(Zs[u]=(E=>{let b=0,C=11;for(;b<E.length;)C=101*C+E.charCodeAt(b++)>>>0;return"go"+C})(u));if(!Zs[d]){let E=u!==i?i:(b=>{let C,D,N=[{}];for(;C=mx.exec(b.replace(px,""));)C[4]?N.shift():C[3]?(D=C[3].replace(wE," ").trim(),N.unshift(N[0][D]=N[0][D]||{})):N[0][C[1]]=C[2].replace(wE," ").trim();return N[0]})(i);Zs[d]=to(o?{["@keyframes "+d]:E}:E,n?"":"."+d)}let y=n&&Zs.g?Zs.g:null;return n&&(Zs.g=Zs[d]),((E,b,C,D)=>{D?b.data=b.data.replace(D,E):b.data.indexOf(E)===-1&&(b.data=C?E+b.data:b.data+E)})(Zs[d],e,s,y),d},yx=(i,e,n)=>i.reduce((s,o,u)=>{let d=e[u];if(d&&d.call){let y=d(n),E=y&&y.props&&y.props.className||/^go/.test(y)&&y;d=E?"."+E:y&&typeof y=="object"?y.props?"":to(y,""):y===!1?"":y}return s+o+(d??"")},"");function Hh(i){let e=this||{},n=i.call?i(e.p):i;return gx(n.unshift?n.raw?yx(n,[].slice.call(arguments,1),e.p):n.reduce((s,o)=>Object.assign(s,o&&o.call?o(e.p):o),{}):n,dx(e.target),e.g,e.o,e.k)}let n1,Ap,wp;Hh.bind({g:1});let oa=Hh.bind({k:1});function vx(i,e,n,s){to.p=e,n1=i,Ap=n,wp=s}function go(i,e){let n=this||{};return function(){let s=arguments;function o(u,d){let y=Object.assign({},u),E=y.className||o.className;n.p=Object.assign({theme:Ap&&Ap()},y),n.o=/ *go\d+/.test(E),y.className=Hh.apply(n,s)+(E?" "+E:"");let b=i;return i[0]&&(b=y.as||i,delete y.as),wp&&b[0]&&wp(y),n1(b,y)}return o}}var _x=i=>typeof i=="function",wh=(i,e)=>_x(i)?i(e):i,Ex=(()=>{let i=0;return()=>(++i).toString()})(),r1=(()=>{let i;return()=>{if(i===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");i=!e||e.matches}return i}})(),bx=20,_g="default",i1=(i,e)=>{let{toastLimit:n}=i.settings;switch(e.type){case 0:return{...i,toasts:[e.toast,...i.toasts].slice(0,n)};case 1:return{...i,toasts:i.toasts.map(d=>d.id===e.toast.id?{...d,...e.toast}:d)};case 2:let{toast:s}=e;return i1(i,{type:i.toasts.find(d=>d.id===s.id)?1:0,toast:s});case 3:let{toastId:o}=e;return{...i,toasts:i.toasts.map(d=>d.id===o||o===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return e.toastId===void 0?{...i,toasts:[]}:{...i,toasts:i.toasts.filter(d=>d.id!==e.toastId)};case 5:return{...i,pausedAt:e.time};case 6:let u=e.time-(i.pausedAt||0);return{...i,pausedAt:void 0,toasts:i.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+u}))}}},rh=[],s1={toasts:[],pausedAt:void 0,settings:{toastLimit:bx}},ds={},a1=(i,e=_g)=>{ds[e]=i1(ds[e]||s1,i),rh.forEach(([n,s])=>{n===e&&s(ds[e])})},o1=i=>Object.keys(ds).forEach(e=>a1(i,e)),Tx=i=>Object.keys(ds).find(e=>ds[e].toasts.some(n=>n.id===i)),Fh=(i=_g)=>e=>{a1(e,i)},Sx={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Ax=(i={},e=_g)=>{let[n,s]=Ce.useState(ds[e]||s1),o=Ce.useRef(ds[e]);Ce.useEffect(()=>(o.current!==ds[e]&&s(ds[e]),rh.push([e,s]),()=>{let d=rh.findIndex(([y])=>y===e);d>-1&&rh.splice(d,1)}),[e]);let u=n.toasts.map(d=>{var y,E,b;return{...i,...i[d.type],...d,removeDelay:d.removeDelay||((y=i[d.type])==null?void 0:y.removeDelay)||i?.removeDelay,duration:d.duration||((E=i[d.type])==null?void 0:E.duration)||i?.duration||Sx[d.type],style:{...i.style,...(b=i[d.type])==null?void 0:b.style,...d.style}}});return{...n,toasts:u}},wx=(i,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:i,pauseDuration:0,...n,id:n?.id||Ex()}),Oc=i=>(e,n)=>{let s=wx(e,i,n);return Fh(s.toasterId||Tx(s.id))({type:2,toast:s}),s.id},Ln=(i,e)=>Oc("blank")(i,e);Ln.error=Oc("error");Ln.success=Oc("success");Ln.loading=Oc("loading");Ln.custom=Oc("custom");Ln.dismiss=(i,e)=>{let n={type:3,toastId:i};e?Fh(e)(n):o1(n)};Ln.dismissAll=i=>Ln.dismiss(void 0,i);Ln.remove=(i,e)=>{let n={type:4,toastId:i};e?Fh(e)(n):o1(n)};Ln.removeAll=i=>Ln.remove(void 0,i);Ln.promise=(i,e,n)=>{let s=Ln.loading(e.loading,{...n,...n?.loading});return typeof i=="function"&&(i=i()),i.then(o=>{let u=e.success?wh(e.success,o):void 0;return u?Ln.success(u,{id:s,...n,...n?.success}):Ln.dismiss(s),o}).catch(o=>{let u=e.error?wh(e.error,o):void 0;u?Ln.error(u,{id:s,...n,...n?.error}):Ln.dismiss(s)}),i};var Rx=1e3,Cx=(i,e="default")=>{let{toasts:n,pausedAt:s}=Ax(i,e),o=Ce.useRef(new Map).current,u=Ce.useCallback((D,N=Rx)=>{if(o.has(D))return;let X=setTimeout(()=>{o.delete(D),d({type:4,toastId:D})},N);o.set(D,X)},[]);Ce.useEffect(()=>{if(s)return;let D=Date.now(),N=n.map(X=>{if(X.duration===1/0)return;let de=(X.duration||0)+X.pauseDuration-(D-X.createdAt);if(de<0){X.visible&&Ln.dismiss(X.id);return}return setTimeout(()=>Ln.dismiss(X.id,e),de)});return()=>{N.forEach(X=>X&&clearTimeout(X))}},[n,s,e]);let d=Ce.useCallback(Fh(e),[e]),y=Ce.useCallback(()=>{d({type:5,time:Date.now()})},[d]),E=Ce.useCallback((D,N)=>{d({type:1,toast:{id:D,height:N}})},[d]),b=Ce.useCallback(()=>{s&&d({type:6,time:Date.now()})},[s,d]),C=Ce.useCallback((D,N)=>{let{reverseOrder:X=!1,gutter:de=8,defaultPosition:be}=N||{},Re=n.filter(Le=>(Le.position||be)===(D.position||be)&&Le.height),He=Re.findIndex(Le=>Le.id===D.id),Ye=Re.filter((Le,it)=>it<He&&Le.visible).length;return Re.filter(Le=>Le.visible).slice(...X?[Ye+1]:[0,Ye]).reduce((Le,it)=>Le+(it.height||0)+de,0)},[n]);return Ce.useEffect(()=>{n.forEach(D=>{if(D.dismissed)u(D.id,D.removeDelay);else{let N=o.get(D.id);N&&(clearTimeout(N),o.delete(D.id))}})},[n,u]),{toasts:n,handlers:{updateHeight:E,startPause:y,endPause:b,calculateOffset:C}}},Ix=oa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Ox=oa`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Dx=oa`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,xx=go("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ix} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Ox} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${i=>i.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Dx} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Nx=oa`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Mx=go("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${i=>i.secondary||"#e0e0e0"};
  border-right-color: ${i=>i.primary||"#616161"};
  animation: ${Nx} 1s linear infinite;
`,kx=oa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Vx=oa`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Px=go("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${kx} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Vx} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${i=>i.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Lx=go("div")`
  position: absolute;
`,Ux=go("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,zx=oa`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,jx=go("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${zx} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Bx=({toast:i})=>{let{icon:e,type:n,iconTheme:s}=i;return e!==void 0?typeof e=="string"?Ce.createElement(jx,null,e):e:n==="blank"?null:Ce.createElement(Ux,null,Ce.createElement(Mx,{...s}),n!=="loading"&&Ce.createElement(Lx,null,n==="error"?Ce.createElement(xx,{...s}):Ce.createElement(Px,{...s})))},qx=i=>`
0% {transform: translate3d(0,${i*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Hx=i=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${i*-150}%,-1px) scale(.6); opacity:0;}
`,Fx="0%{opacity:0;} 100%{opacity:1;}",Kx="0%{opacity:1;} 100%{opacity:0;}",Gx=go("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Yx=go("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Qx=(i,e)=>{let n=i.includes("top")?1:-1,[s,o]=r1()?[Fx,Kx]:[qx(n),Hx(n)];return{animation:e?`${oa(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${oa(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},$x=Ce.memo(({toast:i,position:e,style:n,children:s})=>{let o=i.height?Qx(i.position||e||"top-center",i.visible):{opacity:0},u=Ce.createElement(Bx,{toast:i}),d=Ce.createElement(Yx,{...i.ariaProps},wh(i.message,i));return Ce.createElement(Gx,{className:i.className,style:{...o,...n,...i.style}},typeof s=="function"?s({icon:u,message:d}):Ce.createElement(Ce.Fragment,null,u,d))});vx(Ce.createElement);var Xx=({id:i,className:e,style:n,onHeightUpdate:s,children:o})=>{let u=Ce.useCallback(d=>{if(d){let y=()=>{let E=d.getBoundingClientRect().height;s(i,E)};y(),new MutationObserver(y).observe(d,{subtree:!0,childList:!0,characterData:!0})}},[i,s]);return Ce.createElement("div",{ref:u,className:e,style:n},o)},Jx=(i,e)=>{let n=i.includes("top"),s=n?{top:0}:{bottom:0},o=i.includes("center")?{justifyContent:"center"}:i.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:r1()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...s,...o}},Zx=Hh`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ff=16,Wx=({reverseOrder:i,position:e="top-center",toastOptions:n,gutter:s,children:o,toasterId:u,containerStyle:d,containerClassName:y})=>{let{toasts:E,handlers:b}=Cx(n,u);return Ce.createElement("div",{"data-rht-toaster":u||"",style:{position:"fixed",zIndex:9999,top:Ff,left:Ff,right:Ff,bottom:Ff,pointerEvents:"none",...d},className:y,onMouseEnter:b.startPause,onMouseLeave:b.endPause},E.map(C=>{let D=C.position||e,N=b.calculateOffset(C,{reverseOrder:i,gutter:s,defaultPosition:e}),X=Jx(D,N);return Ce.createElement(Xx,{id:C.id,key:C.id,onHeightUpdate:b.updateHeight,className:C.visible?Zx:"",style:X},C.type==="custom"?wh(C.message,C):o?o(C):Ce.createElement($x,{toast:C,position:D}))}))},_r=Ln;const eN=Ce.lazy(()=>Zl(()=>import("./ImportModal-oFl3otQF.js"),__vite__mapDeps([0,1]))),tN=Ce.lazy(()=>Zl(()=>import("./Settings-B6_buRJs.js"),[])),nN=Ce.lazy(()=>Zl(()=>import("./CardEditor-BdeTQPNG.js"),__vite__mapDeps([2,1]))),rN=Ce.lazy(()=>Zl(()=>import("./CardManager-Dg3t0S6n.js"),__vite__mapDeps([3,1]))),iN=Ce.lazy(()=>Zl(()=>import("./SmartReviewGenerator-CqyHOxKM.js"),__vite__mapDeps([4,1]))),sN=Ce.lazy(()=>Zl(()=>import("./Dashboard-BWyIXVmb.js"),[])),aN=({isOpen:i,onClose:e,onConfirm:n,title:s,message:o})=>{const[u,d]=Ce.useState(3);return Ce.useEffect(()=>{if(i){d(3);const y=setInterval(()=>{d(E=>E<=1?(clearInterval(y),0):E-1)},1e3);return()=>clearInterval(y)}},[i]),i?oe.jsx("div",{style:RE.overlay,children:oe.jsxs("div",{style:RE.content,children:[oe.jsxs("h3",{style:{marginTop:0,color:"#ff6b6b"},children:[" ",s]}),oe.jsx("p",{style:{color:"#ccc",lineHeight:"1.5"},children:o}),oe.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[oe.jsx("button",{onClick:e,style:{...sc,backgroundColor:"#666"},children:"Cancel"}),oe.jsx("button",{onClick:()=>{n(),e()},disabled:u>0,style:{...sc,backgroundColor:u>0?"#CCC":"#e03131",cursor:u>0?"not-allowed":"pointer",opacity:u>0?.7:1},children:u>0?`Wait (${u})...`:"Execute!"})]})]})}):null};function oN(){const[i,e]=Ce.useState([]),[n,s]=Ce.useState("home"),[o,u]=Ce.useState(!0),[d,y]=Ce.useState(0),[E,b]=Ce.useState(null),[C,D]=Ce.useState(!1),[N,X]=Ce.useState(!1),[de,be]=Ce.useState(!1),[Re,He]=Ce.useState(!1),[Ye,Le]=Ce.useState(!1),[it,ht]=Ce.useState(!1),[et,V]=Ce.useState(!1),[k,P]=Ce.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),$=(ze,Me,j)=>{P({isOpen:!0,title:ze,message:Me,onConfirm:j})};Ce.useEffect(()=>{const ze=bC(Hf,async Me=>{Me?ALLOWED_EMAILS.length===0||ALLOWED_EMAILS.includes(Me.email)?(b(Me),_r.success(`Welcome, ${Me.displayName}`)):(console.warn(`Unauthorized: ${Me.email}`),_r.error(`Access denied for ${Me.email}`),await E0(Hf),b(null)):b(null)});return()=>ze()},[]);const z=async()=>{try{u(!0),await qS();const ze=Date.now(),[Me,j]=await Promise.all([Ki.vocab.where("nextReview").belowOrEqual(ze).toArray(),Ki.vocab.where("status").equals("new").toArray()]),ce=new Map;[...Me,...j].forEach(Oe=>ce.set(Oe.id,Oe)),e(Array.from(ce.values()))}catch(ze){const Me=Ku(ze,"loadData");_r.error(Me.userMessage)}finally{u(!1)}};Ce.useEffect(()=>{z()},[]);const U=Ce.useCallback(async ze=>{try{await Ki.vocab.put(ze),y(Me=>Me+1)}catch(Me){const j=Ku(Me,"handleUpdate");_r.error(j.userMessage)}},[]),M=Ce.useCallback(async()=>{try{await BC(Hf,ux),ht(!1)}catch(ze){const Me=Ku(ze,"handleLogin");_r.error(Me.userMessage)}},[]),dt=async()=>{await E0(Hf),window.location.reload()},Gt=Ce.useCallback(async()=>{if(!E)return;D(!0),ht(!1);const ze=_r.loading("Backing up...");try{const Me=await Ki.vocab.toArray();if(Me.length===0){_r.info("No cards to backup",{id:ze});return}await cx(E.uid,Me),_r.success(`Backed up ${Me.length} cards!`,{id:ze})}catch(Me){const j=Ku(Me,"handleUpload");_r.error(j.userMessage,{id:ze})}finally{D(!1),setTimeout(()=>_r.dismiss(ze),3e3)}},[E]),ue=async()=>{E&&$("Overwrite Warning","Are you sure you want to overwrite local data with cloud backup? This action cannot be undone.",async()=>{D(!0),ht(!1);const ze=_r.loading("Restoring...");try{const Me=await fx(E.uid);Me&&Array.isArray(Me)&&Me.length>0?(await Ki.vocab.clear(),await Ki.vocab.bulkAdd(Me),_r.success(`Restored ${Me.length} cards! Reloading...`,{id:ze}),setTimeout(()=>window.location.reload(),1500)):_r.info("No backup found in cloud storage.",{id:ze})}catch(Me){const j=Ku(Me,"handleDownload");_r.error(j.userMessage,{id:ze})}finally{D(!1),setTimeout(()=>_r.dismiss(ze),3e3)}})},Ie=Ce.useMemo(()=>i[d],[i,d]);if(o)return oe.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1b1e",color:"#fff"},children:"Loading..."});const je=()=>n==="dashboard"?oe.jsx(Ce.Suspense,{fallback:oe.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#88ccca"},children:"Loading Dashboard..."}),children:oe.jsx(sN,{onBack:()=>s("home")})}):Ie?oe.jsx(QA,{card:Ie,onUpdate:U},Ie.id):oe.jsxs("div",{style:{textAlign:"center",padding:"3rem",border:"1px dashed #555",borderRadius:"8px"},children:[oe.jsx("h2",{children:" All caught up!"}),oe.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"1rem",padding:"0.5rem 1rem",cursor:"pointer"},children:"Refresh"})]});return oe.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",padding:"1rem",minHeight:"100vh",backgroundColor:"#1a1b1e",color:"#ffffff",fontFamily:"sans-serif",display:"flex",flexDirection:"column",gap:"0.5rem",alignItems:"center",position:"relative"},children:[oe.jsx(Wx,{position:"top-center",toastOptions:{duration:4e3,style:{background:"#333",color:"#fff"},error:{duration:6e3}}}),oe.jsx(aN,{isOpen:k.isOpen,onClose:()=>P(ze=>({...ze,isOpen:!1})),onConfirm:k.onConfirm,title:k.title,message:k.message}),oe.jsxs("nav",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",padding:"0.5rem",borderBottom:"1px solid #333",position:"relative"},children:[oe.jsxs("div",{style:{fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px"},children:["GPF",oe.jsx("button",{onClick:()=>be(!0),style:lN,title:"Settings",children:""})]}),oe.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[oe.jsx("button",{onClick:()=>He(!0),style:{...sc,backgroundColor:"#2196f3"},children:"+ Add"}),oe.jsx("button",{onClick:()=>X(!0),style:{...sc,backgroundColor:"#e91e63"},children:"Import"}),oe.jsx("button",{onClick:()=>ht(!it),style:{...sc,backgroundColor:"#333",padding:"0.5rem 0.8rem",fontSize:"1.1rem"},children:""}),it&&oe.jsxs(oe.Fragment,{children:[oe.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99},onClick:()=>ht(!1)}),oe.jsxs("div",{style:Di.container,children:[oe.jsx("button",{onClick:()=>{s("dashboard"),ht(!1)},style:Di.item,children:" Learning Dashboard"}),oe.jsx("div",{style:Di.divider}),oe.jsx("button",{onClick:()=>{Le(!0),ht(!1)},style:Di.item,children:" Manage Cards"}),oe.jsx("button",{onClick:()=>{V(!0),ht(!1)},style:Di.item,children:" AI Smart Review"}),oe.jsx("div",{style:Di.divider}),E?oe.jsxs(oe.Fragment,{children:[oe.jsx("button",{onClick:Gt,disabled:C,style:Di.item,children:" Backup Data"}),oe.jsx("button",{onClick:ue,disabled:C,style:Di.item,children:" Restore Data"}),oe.jsx("div",{style:Di.divider}),oe.jsx("div",{style:Di.userEmail,children:E.email}),oe.jsx("button",{onClick:dt,style:{...Di.item,color:"#ff6b6b"},children:"Logout"})]}):oe.jsx("button",{onClick:M,style:{...Di.item,color:"#4285F4"},children:"Login with Google"})]})]})]})]}),oe.jsxs("header",{style:{marginBottom:"0.5rem",width:"100%",textAlign:"center"},children:[oe.jsx("h1",{style:{fontSize:"1.5rem",margin:"0 0 0.3rem 0"},children:"Gemini Flashcards"}),oe.jsx("p",{style:{color:"#888",margin:0,fontSize:"0.9rem"},children:i.length>0?`Progress: ${d} / ${i.length}`:"No cards due"})]}),oe.jsx("main",{style:{width:"100%",flex:1,display:"flex",flexDirection:"column"},children:je()}),oe.jsxs(Ce.Suspense,{fallback:null,children:[oe.jsx(eN,{isOpen:N,onClose:()=>X(!1),onSuccess:z}),oe.jsx(tN,{isOpen:de,onClose:()=>be(!1)}),oe.jsx(nN,{isOpen:Re,onClose:()=>He(!1),onSuccess:z}),oe.jsx(rN,{isOpen:Ye,onClose:()=>{Le(!1),z()}}),oe.jsx(iN,{isOpen:et,onClose:()=>V(!1)})]})]})}const sc={padding:"0.5rem 1rem",fontSize:"0.9rem",borderRadius:"6px",border:"none",cursor:"pointer",color:"white",whiteSpace:"nowrap",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.3rem",transition:"opacity 0.2s"},lN={background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem"},Di={container:{position:"absolute",top:"3.5rem",right:"0.5rem",backgroundColor:"#25262b",border:"1px solid #444",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.5)",zIndex:100,display:"flex",flexDirection:"column",minWidth:"180px",padding:"0.5rem"},item:{background:"none",border:"none",color:"#e0e0e0",padding:"0.8rem 1rem",textAlign:"left",cursor:"pointer",borderRadius:"4px",fontSize:"0.95rem",transition:"background 0.2s"},divider:{height:"1px",backgroundColor:"#444",margin:"0.5rem 0"},userEmail:{padding:"0.5rem 1rem",fontSize:"0.75rem",color:"#888",borderBottom:"1px solid #333",marginBottom:"0.5rem"}},RE={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},content:{backgroundColor:"#25262b",padding:"2rem",borderRadius:"12px",maxWidth:"400px",width:"90%",border:"1px solid #444",boxShadow:"0 8px 30px rgba(0,0,0,0.5)"}};PS.createRoot(document.getElementById("root")).render(oe.jsx(CE.StrictMode,{children:oe.jsx(oN,{})}));export{EN as L,GA as a,bN as b,la as c,Ki as d,cA as e,Ku as h,oe as j,Ce as r,_r as z};
