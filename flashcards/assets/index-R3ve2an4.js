(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Tw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Op={exports:{}},Gu={};var v_;function ww(){if(v_)return Gu;v_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var y in o)y!=="key"&&(u[y]=o[y])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:u}}return Gu.Fragment=e,Gu.jsx=n,Gu.jsxs=n,Gu}var __;function Sw(){return __||(__=1,Op.exports=ww()),Op.exports}var D=Sw(),Dp={exports:{}},it={};var b_;function Aw(){if(b_)return it;b_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.iterator;function $(G){return G===null||typeof G!="object"?null:(G=M&&G[M]||G["@@iterator"],typeof G=="function"?G:null)}var te={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pe=Object.assign,_e={};function je(G,me,xe){this.props=G,this.context=me,this.refs=_e,this.updater=xe||te}je.prototype.isReactComponent={},je.prototype.setState=function(G,me){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,me,"setState")},je.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function qe(){}qe.prototype=je.prototype;function ke(G,me,xe){this.props=G,this.context=me,this.refs=_e,this.updater=xe||te}var tt=ke.prototype=new qe;tt.constructor=ke,pe(tt,je.prototype),tt.isPureReactComponent=!0;var ht=Array.isArray;function Ge(){}var L={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function j(G,me,xe){var Pe=xe.ref;return{$$typeof:i,type:G,key:me,ref:Pe!==void 0?Pe:null,props:xe}}function Y(G,me){return j(G.type,me,G.props)}function N(G){return typeof G=="object"&&G!==null&&G.$$typeof===i}function F(G){var me={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(xe){return me[xe]})}var V=/\/+/g;function Dt(G,me){return typeof G=="object"&&G!==null&&G.key!=null?F(""+G.key):me.toString(36)}function Gt(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(Ge,Ge):(G.status="pending",G.then(function(me){G.status==="pending"&&(G.status="fulfilled",G.value=me)},function(me){G.status==="pending"&&(G.status="rejected",G.reason=me)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function oe(G,me,xe,Pe,Qe){var Je=typeof G;(Je==="undefined"||Je==="boolean")&&(G=null);var gt=!1;if(G===null)gt=!0;else switch(Je){case"bigint":case"string":case"number":gt=!0;break;case"object":switch(G.$$typeof){case i:case e:gt=!0;break;case R:return gt=G._init,oe(gt(G._payload),me,xe,Pe,Qe)}}if(gt)return Qe=Qe(G),gt=Pe===""?"."+Dt(G,0):Pe,ht(Qe)?(xe="",gt!=null&&(xe=gt.replace(V,"$&/")+"/"),oe(Qe,me,xe,"",function(rs){return rs})):Qe!=null&&(N(Qe)&&(Qe=Y(Qe,xe+(Qe.key==null||G&&G.key===Qe.key?"":(""+Qe.key).replace(V,"$&/")+"/")+gt)),me.push(Qe)),1;gt=0;var yn=Pe===""?".":Pe+":";if(ht(G))for(var Me=0;Me<G.length;Me++)Pe=G[Me],Je=yn+Dt(Pe,Me),gt+=oe(Pe,me,xe,Je,Qe);else if(Me=$(G),typeof Me=="function")for(G=Me.call(G),Me=0;!(Pe=G.next()).done;)Pe=Pe.value,Je=yn+Dt(Pe,Me++),gt+=oe(Pe,me,xe,Je,Qe);else if(Je==="object"){if(typeof G.then=="function")return oe(Gt(G),me,xe,Pe,Qe);throw me=String(G),Error("Objects are not valid as a React child (found: "+(me==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":me)+"). If you meant to render a collection of children, use an array instead.")}return gt}function be(G,me,xe){if(G==null)return G;var Pe=[],Qe=0;return oe(G,Pe,"","",function(Je){return me.call(xe,Je,Qe++)}),Pe}function Ue(G){if(G._status===-1){var me=G._result;me=me(),me.then(function(xe){(G._status===0||G._status===-1)&&(G._status=1,G._result=xe)},function(xe){(G._status===0||G._status===-1)&&(G._status=2,G._result=xe)}),G._status===-1&&(G._status=0,G._result=me)}if(G._status===1)return G._result.default;throw G._result}var at=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var me=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(me))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},dt={map:be,forEach:function(G,me,xe){be(G,function(){me.apply(this,arguments)},xe)},count:function(G){var me=0;return be(G,function(){me++}),me},toArray:function(G){return be(G,function(me){return me})||[]},only:function(G){if(!N(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return it.Activity=I,it.Children=dt,it.Component=je,it.Fragment=n,it.Profiler=o,it.PureComponent=ke,it.StrictMode=s,it.Suspense=_,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,it.__COMPILER_RUNTIME={__proto__:null,c:function(G){return L.H.useMemoCache(G)}},it.cache=function(G){return function(){return G.apply(null,arguments)}},it.cacheSignal=function(){return null},it.cloneElement=function(G,me,xe){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var Pe=pe({},G.props),Qe=G.key;if(me!=null)for(Je in me.key!==void 0&&(Qe=""+me.key),me)!k.call(me,Je)||Je==="key"||Je==="__self"||Je==="__source"||Je==="ref"&&me.ref===void 0||(Pe[Je]=me[Je]);var Je=arguments.length-2;if(Je===1)Pe.children=xe;else if(1<Je){for(var gt=Array(Je),yn=0;yn<Je;yn++)gt[yn]=arguments[yn+2];Pe.children=gt}return j(G.type,Qe,Pe)},it.createContext=function(G){return G={$$typeof:d,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:u,_context:G},G},it.createElement=function(G,me,xe){var Pe,Qe={},Je=null;if(me!=null)for(Pe in me.key!==void 0&&(Je=""+me.key),me)k.call(me,Pe)&&Pe!=="key"&&Pe!=="__self"&&Pe!=="__source"&&(Qe[Pe]=me[Pe]);var gt=arguments.length-2;if(gt===1)Qe.children=xe;else if(1<gt){for(var yn=Array(gt),Me=0;Me<gt;Me++)yn[Me]=arguments[Me+2];Qe.children=yn}if(G&&G.defaultProps)for(Pe in gt=G.defaultProps,gt)Qe[Pe]===void 0&&(Qe[Pe]=gt[Pe]);return j(G,Je,Qe)},it.createRef=function(){return{current:null}},it.forwardRef=function(G){return{$$typeof:y,render:G}},it.isValidElement=N,it.lazy=function(G){return{$$typeof:R,_payload:{_status:-1,_result:G},_init:Ue}},it.memo=function(G,me){return{$$typeof:b,type:G,compare:me===void 0?null:me}},it.startTransition=function(G){var me=L.T,xe={};L.T=xe;try{var Pe=G(),Qe=L.S;Qe!==null&&Qe(xe,Pe),typeof Pe=="object"&&Pe!==null&&typeof Pe.then=="function"&&Pe.then(Ge,at)}catch(Je){at(Je)}finally{me!==null&&xe.types!==null&&(me.types=xe.types),L.T=me}},it.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},it.use=function(G){return L.H.use(G)},it.useActionState=function(G,me,xe){return L.H.useActionState(G,me,xe)},it.useCallback=function(G,me){return L.H.useCallback(G,me)},it.useContext=function(G){return L.H.useContext(G)},it.useDebugValue=function(){},it.useDeferredValue=function(G,me){return L.H.useDeferredValue(G,me)},it.useEffect=function(G,me){return L.H.useEffect(G,me)},it.useEffectEvent=function(G){return L.H.useEffectEvent(G)},it.useId=function(){return L.H.useId()},it.useImperativeHandle=function(G,me,xe){return L.H.useImperativeHandle(G,me,xe)},it.useInsertionEffect=function(G,me){return L.H.useInsertionEffect(G,me)},it.useLayoutEffect=function(G,me){return L.H.useLayoutEffect(G,me)},it.useMemo=function(G,me){return L.H.useMemo(G,me)},it.useOptimistic=function(G,me){return L.H.useOptimistic(G,me)},it.useReducer=function(G,me,xe){return L.H.useReducer(G,me,xe)},it.useRef=function(G){return L.H.useRef(G)},it.useState=function(G){return L.H.useState(G)},it.useSyncExternalStore=function(G,me,xe){return L.H.useSyncExternalStore(G,me,xe)},it.useTransition=function(){return L.H.useTransition()},it.version="19.2.0",it}var E_;function Sm(){return E_||(E_=1,Dp.exports=Aw()),Dp.exports}var Te=Sm();const Sb=wm(Te);var Np={exports:{}},Yu={},Mp={exports:{}},kp={};var T_;function Cw(){return T_||(T_=1,(function(i){function e(oe,be){var Ue=oe.length;oe.push(be);e:for(;0<Ue;){var at=Ue-1>>>1,dt=oe[at];if(0<o(dt,be))oe[at]=be,oe[Ue]=dt,Ue=at;else break e}}function n(oe){return oe.length===0?null:oe[0]}function s(oe){if(oe.length===0)return null;var be=oe[0],Ue=oe.pop();if(Ue!==be){oe[0]=Ue;e:for(var at=0,dt=oe.length,G=dt>>>1;at<G;){var me=2*(at+1)-1,xe=oe[me],Pe=me+1,Qe=oe[Pe];if(0>o(xe,Ue))Pe<dt&&0>o(Qe,xe)?(oe[at]=Qe,oe[Pe]=Ue,at=Pe):(oe[at]=xe,oe[me]=Ue,at=me);else if(Pe<dt&&0>o(Qe,Ue))oe[at]=Qe,oe[Pe]=Ue,at=Pe;else break e}}return be}function o(oe,be){var Ue=oe.sortIndex-be.sortIndex;return Ue!==0?Ue:oe.id-be.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,y=d.now();i.unstable_now=function(){return d.now()-y}}var _=[],b=[],R=1,I=null,M=3,$=!1,te=!1,pe=!1,_e=!1,je=typeof setTimeout=="function"?setTimeout:null,qe=typeof clearTimeout=="function"?clearTimeout:null,ke=typeof setImmediate<"u"?setImmediate:null;function tt(oe){for(var be=n(b);be!==null;){if(be.callback===null)s(b);else if(be.startTime<=oe)s(b),be.sortIndex=be.expirationTime,e(_,be);else break;be=n(b)}}function ht(oe){if(pe=!1,tt(oe),!te)if(n(_)!==null)te=!0,Ge||(Ge=!0,F());else{var be=n(b);be!==null&&Gt(ht,be.startTime-oe)}}var Ge=!1,L=-1,k=5,j=-1;function Y(){return _e?!0:!(i.unstable_now()-j<k)}function N(){if(_e=!1,Ge){var oe=i.unstable_now();j=oe;var be=!0;try{e:{te=!1,pe&&(pe=!1,qe(L),L=-1),$=!0;var Ue=M;try{t:{for(tt(oe),I=n(_);I!==null&&!(I.expirationTime>oe&&Y());){var at=I.callback;if(typeof at=="function"){I.callback=null,M=I.priorityLevel;var dt=at(I.expirationTime<=oe);if(oe=i.unstable_now(),typeof dt=="function"){I.callback=dt,tt(oe),be=!0;break t}I===n(_)&&s(_),tt(oe)}else s(_);I=n(_)}if(I!==null)be=!0;else{var G=n(b);G!==null&&Gt(ht,G.startTime-oe),be=!1}}break e}finally{I=null,M=Ue,$=!1}be=void 0}}finally{be?F():Ge=!1}}}var F;if(typeof ke=="function")F=function(){ke(N)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Dt=V.port2;V.port1.onmessage=N,F=function(){Dt.postMessage(null)}}else F=function(){je(N,0)};function Gt(oe,be){L=je(function(){oe(i.unstable_now())},be)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(oe){oe.callback=null},i.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<oe?Math.floor(1e3/oe):5},i.unstable_getCurrentPriorityLevel=function(){return M},i.unstable_next=function(oe){switch(M){case 1:case 2:case 3:var be=3;break;default:be=M}var Ue=M;M=be;try{return oe()}finally{M=Ue}},i.unstable_requestPaint=function(){_e=!0},i.unstable_runWithPriority=function(oe,be){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var Ue=M;M=oe;try{return be()}finally{M=Ue}},i.unstable_scheduleCallback=function(oe,be,Ue){var at=i.unstable_now();switch(typeof Ue=="object"&&Ue!==null?(Ue=Ue.delay,Ue=typeof Ue=="number"&&0<Ue?at+Ue:at):Ue=at,oe){case 1:var dt=-1;break;case 2:dt=250;break;case 5:dt=1073741823;break;case 4:dt=1e4;break;default:dt=5e3}return dt=Ue+dt,oe={id:R++,callback:be,priorityLevel:oe,startTime:Ue,expirationTime:dt,sortIndex:-1},Ue>at?(oe.sortIndex=Ue,e(b,oe),n(_)===null&&oe===n(b)&&(pe?(qe(L),L=-1):pe=!0,Gt(ht,Ue-at))):(oe.sortIndex=dt,e(_,oe),te||$||(te=!0,Ge||(Ge=!0,F()))),oe},i.unstable_shouldYield=Y,i.unstable_wrapCallback=function(oe){var be=M;return function(){var Ue=M;M=be;try{return oe.apply(this,arguments)}finally{M=Ue}}}})(kp)),kp}var w_;function Rw(){return w_||(w_=1,Mp.exports=Cw()),Mp.exports}var Vp={exports:{}},fr={};var S_;function Iw(){if(S_)return fr;S_=1;var i=Sm();function e(_){var b="https://react.dev/errors/"+_;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)b+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+_+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(_,b,R){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:I==null?null:""+I,children:_,containerInfo:b,implementation:R}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(_,b){if(_==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return fr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,fr.createPortal=function(_,b){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(e(299));return u(_,b,null,R)},fr.flushSync=function(_){var b=d.T,R=s.p;try{if(d.T=null,s.p=2,_)return _()}finally{d.T=b,s.p=R,s.d.f()}},fr.preconnect=function(_,b){typeof _=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,s.d.C(_,b))},fr.prefetchDNS=function(_){typeof _=="string"&&s.d.D(_)},fr.preinit=function(_,b){if(typeof _=="string"&&b&&typeof b.as=="string"){var R=b.as,I=y(R,b.crossOrigin),M=typeof b.integrity=="string"?b.integrity:void 0,$=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;R==="style"?s.d.S(_,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:I,integrity:M,fetchPriority:$}):R==="script"&&s.d.X(_,{crossOrigin:I,integrity:M,fetchPriority:$,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},fr.preinitModule=function(_,b){if(typeof _=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var R=y(b.as,b.crossOrigin);s.d.M(_,{crossOrigin:R,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&s.d.M(_)},fr.preload=function(_,b){if(typeof _=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var R=b.as,I=y(R,b.crossOrigin);s.d.L(_,R,{crossOrigin:I,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},fr.preloadModule=function(_,b){if(typeof _=="string")if(b){var R=y(b.as,b.crossOrigin);s.d.m(_,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:R,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else s.d.m(_)},fr.requestFormReset=function(_){s.d.r(_)},fr.unstable_batchedUpdates=function(_,b){return _(b)},fr.useFormState=function(_,b,R){return d.H.useFormState(_,b,R)},fr.useFormStatus=function(){return d.H.useHostTransitionStatus()},fr.version="19.2.0",fr}var A_;function xw(){if(A_)return Vp.exports;A_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Vp.exports=Iw(),Vp.exports}var C_;function Ow(){if(C_)return Yu;C_=1;var i=Rw(),e=Sm(),n=xw();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function y(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function _(t){if(u(t)!==t)throw Error(s(188))}function b(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return _(h),t;if(m===l)return _(h),r;m=m.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=m;else{for(var T=!1,C=h.child;C;){if(C===a){T=!0,a=h,l=m;break}if(C===l){T=!0,l=h,a=m;break}C=C.sibling}if(!T){for(C=m.child;C;){if(C===a){T=!0,a=m,l=h;break}if(C===l){T=!0,l=m,a=h;break}C=C.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function R(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=R(t),r!==null)return r;t=t.sibling}return null}var I=Object.assign,M=Symbol.for("react.element"),$=Symbol.for("react.transitional.element"),te=Symbol.for("react.portal"),pe=Symbol.for("react.fragment"),_e=Symbol.for("react.strict_mode"),je=Symbol.for("react.profiler"),qe=Symbol.for("react.consumer"),ke=Symbol.for("react.context"),tt=Symbol.for("react.forward_ref"),ht=Symbol.for("react.suspense"),Ge=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function F(t){return t===null||typeof t!="object"?null:(t=N&&t[N]||t["@@iterator"],typeof t=="function"?t:null)}var V=Symbol.for("react.client.reference");function Dt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===V?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pe:return"Fragment";case je:return"Profiler";case _e:return"StrictMode";case ht:return"Suspense";case Ge:return"SuspenseList";case j:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case te:return"Portal";case ke:return t.displayName||"Context";case qe:return(t._context.displayName||"Context")+".Consumer";case tt:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case L:return r=t.displayName||null,r!==null?r:Dt(t.type)||"Memo";case k:r=t._payload,t=t._init;try{return Dt(t(r))}catch{}}return null}var Gt=Array.isArray,oe=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ue={pending:!1,data:null,method:null,action:null},at=[],dt=-1;function G(t){return{current:t}}function me(t){0>dt||(t.current=at[dt],at[dt]=null,dt--)}function xe(t,r){dt++,at[dt]=t.current,t.current=r}var Pe=G(null),Qe=G(null),Je=G(null),gt=G(null);function yn(t,r){switch(xe(Je,r),xe(Qe,t),xe(Pe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Bv(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Bv(r),t=qv(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}me(Pe),xe(Pe,t)}function Me(){me(Pe),me(Qe),me(Je)}function rs(t){t.memoizedState!==null&&xe(gt,t);var r=Pe.current,a=qv(r,t.type);r!==a&&(xe(Qe,t),xe(Pe,a))}function Bi(t){Qe.current===t&&(me(Pe),me(Qe)),gt.current===t&&(me(gt),qu._currentValue=Ue)}var Ct,pi;function mi(t){if(Ct===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ct=r&&r[1]||"",pi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ct+t+pi}var Gr=!1;function Os(t,r){if(!t||Gr)return"";Gr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(ce){var le=ce}Reflect.construct(t,[],ye)}else{try{ye.call()}catch(ce){le=ce}t.call(ye.prototype)}}else{try{throw Error()}catch(ce){le=ce}(ye=t())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(ce){if(ce&&le&&typeof ce.stack=="string")return[ce.stack,le.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),T=m[0],C=m[1];if(T&&C){var U=T.split(`
`),se=C.split(`
`);for(h=l=0;l<U.length&&!U[l].includes("DetermineComponentFrameRoot");)l++;for(;h<se.length&&!se[h].includes("DetermineComponentFrameRoot");)h++;if(l===U.length||h===se.length)for(l=U.length-1,h=se.length-1;1<=l&&0<=h&&U[l]!==se[h];)h--;for(;1<=l&&0<=h;l--,h--)if(U[l]!==se[h]){if(l!==1||h!==1)do if(l--,h--,0>h||U[l]!==se[h]){var he=`
`+U[l].replace(" at new "," at ");return t.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",t.displayName)),he}while(1<=l&&0<=h);break}}}finally{Gr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?mi(a):""}function To(t,r){switch(t.tag){case 26:case 27:case 5:return mi(t.type);case 16:return mi("Lazy");case 13:return t.child!==r&&r!==null?mi("Suspense Fallback"):mi("Suspense");case 19:return mi("SuspenseList");case 0:case 15:return Os(t.type,!1);case 11:return Os(t.type.render,!1);case 1:return Os(t.type,!0);case 31:return mi("Activity");default:return""}}function wo(t){try{var r="",a=null;do r+=To(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var dn=Object.prototype.hasOwnProperty,rn=i.unstable_scheduleCallback,Pn=i.unstable_cancelCallback,ol=i.unstable_shouldYield,is=i.unstable_requestPaint,qn=i.unstable_now,Yr=i.unstable_getCurrentPriorityLevel,Qr=i.unstable_ImmediatePriority,Xr=i.unstable_UserBlockingPriority,gi=i.unstable_NormalPriority,Ds=i.unstable_LowPriority,ga=i.unstable_IdlePriority,Ns=i.log,yi=i.unstable_setDisableYieldValue,ar=null,vn=null;function _n(t){if(typeof Ns=="function"&&yi(t),vn&&typeof vn.setStrictMode=="function")try{vn.setStrictMode(ar,t)}catch{}}var Ne=Math.clz32?Math.clz32:Ms,ss=Math.log,Sr=Math.LN2;function Ms(t){return t>>>=0,t===0?32:31-(ss(t)/Sr|0)|0}var Ie=256,qi=262144,sn=4194304;function Ar(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function $r(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var C=l&134217727;return C!==0?(l=C&~m,l!==0?h=Ar(l):(T&=C,T!==0?h=Ar(T):a||(a=C&~t,a!==0&&(h=Ar(a))))):(C=l&~m,C!==0?h=Ar(C):T!==0?h=Ar(T):a||(a=l&~t,a!==0&&(h=Ar(a)))),h===0?0:r!==0&&r!==h&&(r&m)===0&&(m=h&-h,a=r&-r,m>=a||m===32&&(a&4194048)!==0)?r:h}function vr(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function uu(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ll(){var t=sn;return sn<<=1,(sn&62914560)===0&&(sn=4194304),t}function $n(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Cr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function So(t,r,a,l,h,m){var T=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var C=t.entanglements,U=t.expirationTimes,se=t.hiddenUpdates;for(a=T&~a;0<a;){var he=31-Ne(a),ye=1<<he;C[he]=0,U[he]=-1;var le=se[he];if(le!==null)for(se[he]=null,he=0;he<le.length;he++){var ce=le[he];ce!==null&&(ce.lane&=-536870913)}a&=~ye}l!==0&&vi(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(T&~r))}function vi(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Ne(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Pt(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Ne(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function Zt(t,r){var a=r&-r;return a=(a&42)!==0?1:ks(a),(a&(t.suspendedLanes|r))!==0?0:a}function ks(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Rr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Vs(){var t=be.p;return t!==0?t:(t=window.event,t===void 0?32:f_(t.type))}function or(t,r){var a=be.p;try{return be.p=t,r()}finally{be.p=a}}var Jr=Math.random().toString(36).slice(2),jt="__reactFiber$"+Jr,Qt="__reactProps$"+Jr,Ln="__reactContainer$"+Jr,Hi="__reactEvents$"+Jr,cu="__reactListeners$"+Jr,Wr="__reactHandles$"+Jr,Ao="__reactResources$"+Jr,Hn="__reactMarker$"+Jr;function Ps(t){delete t[jt],delete t[Qt],delete t[Hi],delete t[cu],delete t[Wr]}function Ir(t){var r=t[jt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Ln]||a[jt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=Xv(t);t!==null;){if(a=t[jt])return a;t=Xv(t)}return r}t=a,a=t.parentNode}return null}function xt(t){if(t=t[jt]||t[Ln]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function bn(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function Cn(t){var r=t[Ao];return r||(r=t[Ao]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function an(t){t[Hn]=!0}var _i=new Set,as={};function xr(t,r){Or(t,r),Or(t+"Capture",r)}function Or(t,r){for(as[t]=r,t=0;t<r.length;t++)_i.add(r[t])}var Zr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ya={},os={};function Co(t){return dn.call(os,t)?!0:dn.call(ya,t)?!1:Zr.test(t)?os[t]=!0:(ya[t]=!0,!1)}function ot(t,r,a){if(Co(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function lr(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function on(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function ln(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Dr(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function va(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,m=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(T){a=""+T,m.call(this,T)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(T){a=""+T},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Nt(t){if(!t._valueTracker){var r=Dr(t)?"checked":"value";t._valueTracker=va(t,r,""+t[r])}}function ls(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Dr(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function vt(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ei=/[\n"\\]/g;function Rn(t){return t.replace(ei,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ti(t,r,a,l,h,m,T,C){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),r!=null?T==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+ln(r)):t.value!==""+ln(r)&&(t.value=""+ln(r)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),r!=null?Ls(t,T,ln(r)):a!=null?Ls(t,T,ln(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?t.name=""+ln(C):t.removeAttribute("name")}function _a(t,r,a,l,h,m,T,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Nt(t);return}a=a!=null?""+ln(a):"",r=r!=null?""+ln(r):a,C||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=C?t.checked:!!l,t.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),Nt(t)}function Ls(t,r,a){r==="number"&&vt(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ni(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+ln(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function Ro(t,r,a){if(r!=null&&(r=""+ln(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+ln(a):""}function ri(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Gt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=ln(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Nt(t)}function Jn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var ul=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yt(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||ul.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function ba(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&yt(t,h,l)}else for(var m in r)r.hasOwnProperty(m)&&yt(t,m,r[m])}function Ea(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ii(t){return pn.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ur(){}var Nr=null;function _r(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fi=null,Ut=null;function Fn(t){var r=xt(t);if(r&&(t=r.stateNode)){var a=t[Qt]||null;e:switch(t=r.stateNode,r.type){case"input":if(ti(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Rn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[Qt]||null;if(!h)throw Error(s(90));ti(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&ls(l)}break e;case"textarea":Ro(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&ni(t,!!a.multiple,r,!1)}}}var bi=!1;function Mr(t,r,a){if(bi)return t(r,a);bi=!0;try{var l=t(r);return l}finally{if(bi=!1,(Fi!==null||Ut!==null)&&(hf(),Fi&&(r=Fi,t=Ut,Ut=Fi=null,Fn(r),t)))for(r=0;r<t.length;r++)Fn(t[r])}}function br(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Qt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),js=!1;if(En)try{var pt={};Object.defineProperty(pt,"passive",{get:function(){js=!0}}),window.addEventListener("test",pt,pt),window.removeEventListener("test",pt,pt)}catch{js=!1}var kr=null,Ta=null,Ki=null;function Gi(){if(Ki)return Ki;var t,r=Ta,a=r.length,l,h="value"in kr?kr.value:kr.textContent,m=h.length;for(t=0;t<a&&r[t]===h[t];t++);var T=a-t;for(l=1;l<=T&&r[a-l]===h[m-l];l++);return Ki=h.slice(t,1<l?1-l:void 0)}function Yi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ei(){return!0}function si(){return!1}function un(t){function r(a,l,h,m,T){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=T,this.currentTarget=null;for(var C in t)t.hasOwnProperty(C)&&(a=t[C],this[C]=a?a(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ei:si,this.isPropagationStopped=si,this}return I(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),r}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ti=un(Qi),ai=I({},Qi,{view:0,detail:0}),us=un(ai),wi,wa,Si,Sa=I({},ai,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Si&&(Si&&t.type==="mousemove"?(wi=t.screenX-Si.screenX,wa=t.screenY-Si.screenY):wa=wi=0,Si=t),wi)},movementY:function(t){return"movementY"in t?t.movementY:wa}}),Us=un(Sa),Xi=I({},Sa,{dataTransfer:0}),Io=un(Xi),zs=I({},ai,{relatedTarget:0}),Ai=un(zs),cs=I({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),xo=un(cs),Aa=I({},Qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$i=un(Aa),Ca=I({},Qi,{data:0}),Vr=un(Ca),Ra={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ia={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fs(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Tn[t])?!!r[t]:!1}function Pr(){return fs}var Kn=I({},ai,{key:function(t){if(t.key){var r=Ra[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Yi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ia[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pr,charCode:function(t){return t.type==="keypress"?Yi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bs=un(Kn),Oo=I({},Sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ci=un(Oo),c=I({},ai,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pr}),v=un(c),w=I({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=un(w),ne=I({},Sa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ue=un(ne),Ce=I({},Qi,{newState:0,oldState:0}),nt=un(Ce),cn=[9,13,27,32],Rt=En&&"CompositionEvent"in window,zt=null;En&&"documentMode"in document&&(zt=document.documentMode);var Lr=En&&"TextEvent"in window&&!zt,jr=En&&(!Rt||zt&&8<zt&&11>=zt),Er=" ",oi=!1;function hs(t,r){switch(t){case"keyup":return cn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qs=!1;function Dc(t,r){switch(t){case"compositionend":return xa(r);case"keypress":return r.which!==32?null:(oi=!0,Er);case"textInput":return t=r.data,t===Er&&oi?null:t;default:return null}}function Fh(t,r){if(qs)return t==="compositionend"||!Rt&&hs(t,r)?(t=Gi(),Ki=Ta=kr=null,qs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return jr&&r.locale!=="ko"?null:r.data;default:return null}}var Nc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fl(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Nc[t.type]:r==="textarea"}function fu(t,r,a,l){Fi?Ut?Ut.push(l):Ut=[l]:Fi=l,r=_f(r,"onChange"),0<r.length&&(a=new Ti("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Oa=null,Do=null;function Kh(t){Vv(t,0)}function hl(t){var r=bn(t);if(ls(r))return t}function No(t,r){if(t==="change")return r}var Ri=!1;if(En){var Xt;if(En){var Da="oninput"in document;if(!Da){var Tr=document.createElement("div");Tr.setAttribute("oninput","return;"),Da=typeof Tr.oninput=="function"}Xt=Da}else Xt=!1;Ri=Xt&&(!document.documentMode||9<document.documentMode)}function Mc(){Oa&&(Oa.detachEvent("onpropertychange",dl),Do=Oa=null)}function dl(t){if(t.propertyName==="value"&&hl(Do)){var r=[];fu(r,Do,t,_r(t)),Mr(Kh,r)}}function kc(t,r,a){t==="focusin"?(Mc(),Oa=r,Do=a,Oa.attachEvent("onpropertychange",dl)):t==="focusout"&&Mc()}function Hs(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hl(Do)}function hu(t,r){if(t==="click")return hl(r)}function Na(t,r){if(t==="input"||t==="change")return hl(r)}function ds(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var cr=typeof Object.is=="function"?Object.is:ds;function f(t,r){if(cr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!dn.call(r,h)||!cr(t[h],r[h]))return!1}return!0}function p(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g(t,r){var a=p(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=p(a)}}function E(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?E(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function S(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=vt(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=vt(t.document)}return r}function A(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var O=En&&"documentMode"in document&&11>=document.documentMode,P=null,B=null,q=null,J=!1;function z(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;J||P==null||P!==vt(l)||(l=P,"selectionStart"in l&&A(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),q&&f(q,l)||(q=l,l=_f(B,"onSelect"),0<l.length&&(r=new Ti("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=P)))}function Z(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var H={animationend:Z("Animation","AnimationEnd"),animationiteration:Z("Animation","AnimationIteration"),animationstart:Z("Animation","AnimationStart"),transitionrun:Z("Transition","TransitionRun"),transitionstart:Z("Transition","TransitionStart"),transitioncancel:Z("Transition","TransitionCancel"),transitionend:Z("Transition","TransitionEnd")},Q={},X={};En&&(X=document.createElement("div").style,"AnimationEvent"in window||(delete H.animationend.animation,delete H.animationiteration.animation,delete H.animationstart.animation),"TransitionEvent"in window||delete H.transitionend.transition);function W(t){if(Q[t])return Q[t];if(!H[t])return t;var r=H[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in X)return Q[t]=r[a];return t}var re=W("animationend"),ae=W("animationiteration"),fe=W("animationstart"),ge=W("transitionrun"),Ae=W("transitionstart"),De=W("transitioncancel"),we=W("transitionend"),Re=new Map,Oe="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Oe.push("scrollEnd");function Se(t,r){Re.set(t,r),xr(r,[t])}var Ve=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Fe=[],Ze=0,lt=0;function Gn(){for(var t=Ze,r=lt=Ze=0;r<t;){var a=Fe[r];Fe[r++]=null;var l=Fe[r];Fe[r++]=null;var h=Fe[r];Fe[r++]=null;var m=Fe[r];if(Fe[r++]=null,l!==null&&h!==null){var T=l.pending;T===null?h.next=h:(h.next=T.next,T.next=h),l.pending=h}m!==0&&Mo(a,h,m)}}function We(t,r,a,l){Fe[Ze++]=t,Fe[Ze++]=r,Fe[Ze++]=a,Fe[Ze++]=l,lt|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function In(t,r,a,l){return We(t,r,a,l),xn(t)}function en(t,r){return We(t,null,null,r),xn(t)}function Mo(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&r!==null&&(h=31-Ne(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),m):null}function xn(t){if(50<Vu)throw Vu=0,ep=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ur={};function du(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function li(t,r,a,l){return new du(t,r,a,l)}function Gh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fs(t,r){var a=t.alternate;return a===null?(a=li(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function yg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Vc(t,r,a,l,h,m){var T=0;if(l=t,typeof t=="function")Gh(t)&&(T=1);else if(typeof t=="string")T=cw(t,a,Pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case j:return t=li(31,a,r,h),t.elementType=j,t.lanes=m,t;case pe:return ko(a.children,h,m,r);case _e:T=8,h|=24;break;case je:return t=li(12,a,r,h|2),t.elementType=je,t.lanes=m,t;case ht:return t=li(13,a,r,h),t.elementType=ht,t.lanes=m,t;case Ge:return t=li(19,a,r,h),t.elementType=Ge,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ke:T=10;break e;case qe:T=9;break e;case tt:T=11;break e;case L:T=14;break e;case k:T=16,l=null;break e}T=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=li(T,a,r,h),r.elementType=t,r.type=l,r.lanes=m,r}function ko(t,r,a,l){return t=li(7,t,l,r),t.lanes=a,t}function Yh(t,r,a){return t=li(6,t,null,r),t.lanes=a,t}function vg(t){var r=li(18,null,null,0);return r.stateNode=t,r}function Qh(t,r,a){return r=li(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var _g=new WeakMap;function Ii(t,r){if(typeof t=="object"&&t!==null){var a=_g.get(t);return a!==void 0?a:(r={value:t,source:r,stack:wo(r)},_g.set(t,r),r)}return{value:t,source:r,stack:wo(r)}}var pl=[],ml=0,Pc=null,pu=0,xi=[],Oi=0,Ma=null,ps=1,ms="";function Ks(t,r){pl[ml++]=pu,pl[ml++]=Pc,Pc=t,pu=r}function bg(t,r,a){xi[Oi++]=ps,xi[Oi++]=ms,xi[Oi++]=Ma,Ma=t;var l=ps;t=ms;var h=32-Ne(l)-1;l&=~(1<<h),a+=1;var m=32-Ne(r)+h;if(30<m){var T=h-h%5;m=(l&(1<<T)-1).toString(32),l>>=T,h-=T,ps=1<<32-Ne(r)+h|a<<h|l,ms=m+t}else ps=1<<m|a<<h|l,ms=t}function Xh(t){t.return!==null&&(Ks(t,1),bg(t,1,0))}function $h(t){for(;t===Pc;)Pc=pl[--ml],pl[ml]=null,pu=pl[--ml],pl[ml]=null;for(;t===Ma;)Ma=xi[--Oi],xi[Oi]=null,ms=xi[--Oi],xi[Oi]=null,ps=xi[--Oi],xi[Oi]=null}function Eg(t,r){xi[Oi++]=ps,xi[Oi++]=ms,xi[Oi++]=Ma,ps=r.id,ms=r.overflow,Ma=t}var Wn=null,$t=null,It=!1,ka=null,Di=!1,Jh=Error(s(519));function Va(t){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mu(Ii(r,t)),Jh}function Tg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[jt]=t,r[Qt]=l,a){case"dialog":bt("cancel",r),bt("close",r);break;case"iframe":case"object":case"embed":bt("load",r);break;case"video":case"audio":for(a=0;a<Lu.length;a++)bt(Lu[a],r);break;case"source":bt("error",r);break;case"img":case"image":case"link":bt("error",r),bt("load",r);break;case"details":bt("toggle",r);break;case"input":bt("invalid",r),_a(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":bt("invalid",r);break;case"textarea":bt("invalid",r),ri(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||Uv(r.textContent,a)?(l.popover!=null&&(bt("beforetoggle",r),bt("toggle",r)),l.onScroll!=null&&bt("scroll",r),l.onScrollEnd!=null&&bt("scrollend",r),l.onClick!=null&&(r.onclick=ur),r=!0):r=!1,r||Va(t,!0)}function wg(t){for(Wn=t.return;Wn;)switch(Wn.tag){case 5:case 31:case 13:Di=!1;return;case 27:case 3:Di=!0;return;default:Wn=Wn.return}}function gl(t){if(t!==Wn)return!1;if(!It)return wg(t),It=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||mp(t.type,t.memoizedProps)),a=!a),a&&$t&&Va(t),wg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));$t=Qv(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));$t=Qv(t)}else r===27?(r=$t,Xa(t.type)?(t=bp,bp=null,$t=t):$t=r):$t=Wn?Mi(t.stateNode.nextSibling):null;return!0}function Vo(){$t=Wn=null,It=!1}function Wh(){var t=ka;return t!==null&&(Hr===null?Hr=t:Hr.push.apply(Hr,t),ka=null),t}function mu(t){ka===null?ka=[t]:ka.push(t)}var Zh=G(null),Po=null,Gs=null;function Pa(t,r,a){xe(Zh,r._currentValue),r._currentValue=a}function Ys(t){t._currentValue=Zh.current,me(Zh)}function ed(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function td(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var T=h.child;m=m.firstContext;e:for(;m!==null;){var C=m;m=h;for(var U=0;U<r.length;U++)if(C.context===r[U]){m.lanes|=a,C=m.alternate,C!==null&&(C.lanes|=a),ed(m.return,a,t),l||(T=null);break e}m=C.next}}else if(h.tag===18){if(T=h.return,T===null)throw Error(s(341));T.lanes|=a,m=T.alternate,m!==null&&(m.lanes|=a),ed(T,a,t),T=null}else T=h.child;if(T!==null)T.return=h;else for(T=h;T!==null;){if(T===t){T=null;break}if(h=T.sibling,h!==null){h.return=T.return,T=h;break}T=T.return}h=T}}function yl(t,r,a,l){t=null;for(var h=r,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var T=h.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var C=h.type;cr(h.pendingProps.value,T.value)||(t!==null?t.push(C):t=[C])}}else if(h===gt.current){if(T=h.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(qu):t=[qu])}h=h.return}t!==null&&td(r,t,a,l),r.flags|=262144}function Lc(t){for(t=t.firstContext;t!==null;){if(!cr(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Lo(t){Po=t,Gs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Zn(t){return Sg(Po,t)}function jc(t,r){return Po===null&&Lo(t),Sg(t,r)}function Sg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Gs===null){if(t===null)throw Error(s(308));Gs=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Gs=Gs.next=r;return a}var aT=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},oT=i.unstable_scheduleCallback,lT=i.unstable_NormalPriority,On={$$typeof:ke,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nd(){return{controller:new aT,data:new Map,refCount:0}}function gu(t){t.refCount--,t.refCount===0&&oT(lT,function(){t.controller.abort()})}var yu=null,rd=0,vl=0,_l=null;function uT(t,r){if(yu===null){var a=yu=[];rd=0,vl=ap(),_l={status:"pending",value:void 0,then:function(l){a.push(l)}}}return rd++,r.then(Ag,Ag),r}function Ag(){if(--rd===0&&yu!==null){_l!==null&&(_l.status="fulfilled");var t=yu;yu=null,vl=0,_l=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function cT(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Cg=oe.S;oe.S=function(t,r){uv=qn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&uT(t,r),Cg!==null&&Cg(t,r)};var jo=G(null);function id(){var t=jo.current;return t!==null?t:Yt.pooledCache}function Uc(t,r){r===null?xe(jo,jo.current):xe(jo,r.pool)}function Rg(){var t=id();return t===null?null:{parent:On._currentValue,pool:t}}var bl=Error(s(460)),sd=Error(s(474)),zc=Error(s(542)),Bc={then:function(){}};function Ig(t){return t=t.status,t==="fulfilled"||t==="rejected"}function xg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(ur,ur),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Dg(t),t;default:if(typeof r.status=="string")r.then(ur,ur);else{if(t=Yt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Dg(t),t}throw zo=r,bl}}function Uo(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(zo=a,bl):a}}var zo=null;function Og(){if(zo===null)throw Error(s(459));var t=zo;return zo=null,t}function Dg(t){if(t===bl||t===zc)throw Error(s(483))}var El=null,vu=0;function qc(t){var r=vu;return vu+=1,El===null&&(El=[]),xg(El,t,r)}function _u(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Hc(t,r){throw r.$$typeof===M?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Ng(t){function r(ee,K){if(t){var ie=ee.deletions;ie===null?(ee.deletions=[K],ee.flags|=16):ie.push(K)}}function a(ee,K){if(!t)return null;for(;K!==null;)r(ee,K),K=K.sibling;return null}function l(ee){for(var K=new Map;ee!==null;)ee.key!==null?K.set(ee.key,ee):K.set(ee.index,ee),ee=ee.sibling;return K}function h(ee,K){return ee=Fs(ee,K),ee.index=0,ee.sibling=null,ee}function m(ee,K,ie){return ee.index=ie,t?(ie=ee.alternate,ie!==null?(ie=ie.index,ie<K?(ee.flags|=67108866,K):ie):(ee.flags|=67108866,K)):(ee.flags|=1048576,K)}function T(ee){return t&&ee.alternate===null&&(ee.flags|=67108866),ee}function C(ee,K,ie,de){return K===null||K.tag!==6?(K=Yh(ie,ee.mode,de),K.return=ee,K):(K=h(K,ie),K.return=ee,K)}function U(ee,K,ie,de){var Ke=ie.type;return Ke===pe?he(ee,K,ie.props.children,de,ie.key):K!==null&&(K.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===k&&Uo(Ke)===K.type)?(K=h(K,ie.props),_u(K,ie),K.return=ee,K):(K=Vc(ie.type,ie.key,ie.props,null,ee.mode,de),_u(K,ie),K.return=ee,K)}function se(ee,K,ie,de){return K===null||K.tag!==4||K.stateNode.containerInfo!==ie.containerInfo||K.stateNode.implementation!==ie.implementation?(K=Qh(ie,ee.mode,de),K.return=ee,K):(K=h(K,ie.children||[]),K.return=ee,K)}function he(ee,K,ie,de,Ke){return K===null||K.tag!==7?(K=ko(ie,ee.mode,de,Ke),K.return=ee,K):(K=h(K,ie),K.return=ee,K)}function ye(ee,K,ie){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Yh(""+K,ee.mode,ie),K.return=ee,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case $:return ie=Vc(K.type,K.key,K.props,null,ee.mode,ie),_u(ie,K),ie.return=ee,ie;case te:return K=Qh(K,ee.mode,ie),K.return=ee,K;case k:return K=Uo(K),ye(ee,K,ie)}if(Gt(K)||F(K))return K=ko(K,ee.mode,ie,null),K.return=ee,K;if(typeof K.then=="function")return ye(ee,qc(K),ie);if(K.$$typeof===ke)return ye(ee,jc(ee,K),ie);Hc(ee,K)}return null}function le(ee,K,ie,de){var Ke=K!==null?K.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Ke!==null?null:C(ee,K,""+ie,de);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case $:return ie.key===Ke?U(ee,K,ie,de):null;case te:return ie.key===Ke?se(ee,K,ie,de):null;case k:return ie=Uo(ie),le(ee,K,ie,de)}if(Gt(ie)||F(ie))return Ke!==null?null:he(ee,K,ie,de,null);if(typeof ie.then=="function")return le(ee,K,qc(ie),de);if(ie.$$typeof===ke)return le(ee,K,jc(ee,ie),de);Hc(ee,ie)}return null}function ce(ee,K,ie,de,Ke){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return ee=ee.get(ie)||null,C(K,ee,""+de,Ke);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case $:return ee=ee.get(de.key===null?ie:de.key)||null,U(K,ee,de,Ke);case te:return ee=ee.get(de.key===null?ie:de.key)||null,se(K,ee,de,Ke);case k:return de=Uo(de),ce(ee,K,ie,de,Ke)}if(Gt(de)||F(de))return ee=ee.get(ie)||null,he(K,ee,de,Ke,null);if(typeof de.then=="function")return ce(ee,K,ie,qc(de),Ke);if(de.$$typeof===ke)return ce(ee,K,ie,jc(K,de),Ke);Hc(K,de)}return null}function ze(ee,K,ie,de){for(var Ke=null,Mt=null,Be=K,ft=K=0,Tt=null;Be!==null&&ft<ie.length;ft++){Be.index>ft?(Tt=Be,Be=null):Tt=Be.sibling;var kt=le(ee,Be,ie[ft],de);if(kt===null){Be===null&&(Be=Tt);break}t&&Be&&kt.alternate===null&&r(ee,Be),K=m(kt,K,ft),Mt===null?Ke=kt:Mt.sibling=kt,Mt=kt,Be=Tt}if(ft===ie.length)return a(ee,Be),It&&Ks(ee,ft),Ke;if(Be===null){for(;ft<ie.length;ft++)Be=ye(ee,ie[ft],de),Be!==null&&(K=m(Be,K,ft),Mt===null?Ke=Be:Mt.sibling=Be,Mt=Be);return It&&Ks(ee,ft),Ke}for(Be=l(Be);ft<ie.length;ft++)Tt=ce(Be,ee,ft,ie[ft],de),Tt!==null&&(t&&Tt.alternate!==null&&Be.delete(Tt.key===null?ft:Tt.key),K=m(Tt,K,ft),Mt===null?Ke=Tt:Mt.sibling=Tt,Mt=Tt);return t&&Be.forEach(function(eo){return r(ee,eo)}),It&&Ks(ee,ft),Ke}function Xe(ee,K,ie,de){if(ie==null)throw Error(s(151));for(var Ke=null,Mt=null,Be=K,ft=K=0,Tt=null,kt=ie.next();Be!==null&&!kt.done;ft++,kt=ie.next()){Be.index>ft?(Tt=Be,Be=null):Tt=Be.sibling;var eo=le(ee,Be,kt.value,de);if(eo===null){Be===null&&(Be=Tt);break}t&&Be&&eo.alternate===null&&r(ee,Be),K=m(eo,K,ft),Mt===null?Ke=eo:Mt.sibling=eo,Mt=eo,Be=Tt}if(kt.done)return a(ee,Be),It&&Ks(ee,ft),Ke;if(Be===null){for(;!kt.done;ft++,kt=ie.next())kt=ye(ee,kt.value,de),kt!==null&&(K=m(kt,K,ft),Mt===null?Ke=kt:Mt.sibling=kt,Mt=kt);return It&&Ks(ee,ft),Ke}for(Be=l(Be);!kt.done;ft++,kt=ie.next())kt=ce(Be,ee,ft,kt.value,de),kt!==null&&(t&&kt.alternate!==null&&Be.delete(kt.key===null?ft:kt.key),K=m(kt,K,ft),Mt===null?Ke=kt:Mt.sibling=kt,Mt=kt);return t&&Be.forEach(function(Ew){return r(ee,Ew)}),It&&Ks(ee,ft),Ke}function Kt(ee,K,ie,de){if(typeof ie=="object"&&ie!==null&&ie.type===pe&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case $:e:{for(var Ke=ie.key;K!==null;){if(K.key===Ke){if(Ke=ie.type,Ke===pe){if(K.tag===7){a(ee,K.sibling),de=h(K,ie.props.children),de.return=ee,ee=de;break e}}else if(K.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===k&&Uo(Ke)===K.type){a(ee,K.sibling),de=h(K,ie.props),_u(de,ie),de.return=ee,ee=de;break e}a(ee,K);break}else r(ee,K);K=K.sibling}ie.type===pe?(de=ko(ie.props.children,ee.mode,de,ie.key),de.return=ee,ee=de):(de=Vc(ie.type,ie.key,ie.props,null,ee.mode,de),_u(de,ie),de.return=ee,ee=de)}return T(ee);case te:e:{for(Ke=ie.key;K!==null;){if(K.key===Ke)if(K.tag===4&&K.stateNode.containerInfo===ie.containerInfo&&K.stateNode.implementation===ie.implementation){a(ee,K.sibling),de=h(K,ie.children||[]),de.return=ee,ee=de;break e}else{a(ee,K);break}else r(ee,K);K=K.sibling}de=Qh(ie,ee.mode,de),de.return=ee,ee=de}return T(ee);case k:return ie=Uo(ie),Kt(ee,K,ie,de)}if(Gt(ie))return ze(ee,K,ie,de);if(F(ie)){if(Ke=F(ie),typeof Ke!="function")throw Error(s(150));return ie=Ke.call(ie),Xe(ee,K,ie,de)}if(typeof ie.then=="function")return Kt(ee,K,qc(ie),de);if(ie.$$typeof===ke)return Kt(ee,K,jc(ee,ie),de);Hc(ee,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,K!==null&&K.tag===6?(a(ee,K.sibling),de=h(K,ie),de.return=ee,ee=de):(a(ee,K),de=Yh(ie,ee.mode,de),de.return=ee,ee=de),T(ee)):a(ee,K)}return function(ee,K,ie,de){try{vu=0;var Ke=Kt(ee,K,ie,de);return El=null,Ke}catch(Be){if(Be===bl||Be===zc)throw Be;var Mt=li(29,Be,null,ee.mode);return Mt.lanes=de,Mt.return=ee,Mt}finally{}}}var Bo=Ng(!0),Mg=Ng(!1),La=!1;function ad(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function od(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ja(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ua(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Vt&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=xn(t),Mo(t,null,a),r}return We(t,l,r,a),xn(t)}function bu(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Pt(t,a)}}function ld(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=T:m=m.next=T,a=a.next}while(a!==null);m===null?h=m=r:m=m.next=r}else h=m=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var ud=!1;function Eu(){if(ud){var t=_l;if(t!==null)throw t}}function Tu(t,r,a,l){ud=!1;var h=t.updateQueue;La=!1;var m=h.firstBaseUpdate,T=h.lastBaseUpdate,C=h.shared.pending;if(C!==null){h.shared.pending=null;var U=C,se=U.next;U.next=null,T===null?m=se:T.next=se,T=U;var he=t.alternate;he!==null&&(he=he.updateQueue,C=he.lastBaseUpdate,C!==T&&(C===null?he.firstBaseUpdate=se:C.next=se,he.lastBaseUpdate=U))}if(m!==null){var ye=h.baseState;T=0,he=se=U=null,C=m;do{var le=C.lane&-536870913,ce=le!==C.lane;if(ce?(Et&le)===le:(l&le)===le){le!==0&&le===vl&&(ud=!0),he!==null&&(he=he.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ze=t,Xe=C;le=r;var Kt=a;switch(Xe.tag){case 1:if(ze=Xe.payload,typeof ze=="function"){ye=ze.call(Kt,ye,le);break e}ye=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Xe.payload,le=typeof ze=="function"?ze.call(Kt,ye,le):ze,le==null)break e;ye=I({},ye,le);break e;case 2:La=!0}}le=C.callback,le!==null&&(t.flags|=64,ce&&(t.flags|=8192),ce=h.callbacks,ce===null?h.callbacks=[le]:ce.push(le))}else ce={lane:le,tag:C.tag,payload:C.payload,callback:C.callback,next:null},he===null?(se=he=ce,U=ye):he=he.next=ce,T|=le;if(C=C.next,C===null){if(C=h.shared.pending,C===null)break;ce=C,C=ce.next,ce.next=null,h.lastBaseUpdate=ce,h.shared.pending=null}}while(!0);he===null&&(U=ye),h.baseState=U,h.firstBaseUpdate=se,h.lastBaseUpdate=he,m===null&&(h.shared.lanes=0),Fa|=T,t.lanes=T,t.memoizedState=ye}}function kg(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function Vg(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)kg(a[t],r)}var Tl=G(null),Fc=G(0);function Pg(t,r){t=na,xe(Fc,t),xe(Tl,r),na=t|r.baseLanes}function cd(){xe(Fc,na),xe(Tl,Tl.current)}function fd(){na=Fc.current,me(Tl),me(Fc)}var ui=G(null),Ni=null;function za(t){var r=t.alternate;xe(wn,wn.current&1),xe(ui,t),Ni===null&&(r===null||Tl.current!==null||r.memoizedState!==null)&&(Ni=t)}function hd(t){xe(wn,wn.current),xe(ui,t),Ni===null&&(Ni=t)}function Lg(t){t.tag===22?(xe(wn,wn.current),xe(ui,t),Ni===null&&(Ni=t)):Ba()}function Ba(){xe(wn,wn.current),xe(ui,ui.current)}function ci(t){me(ui),Ni===t&&(Ni=null),me(wn)}var wn=G(0);function Kc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||vp(a)||_p(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Qs=0,ut=null,Ht=null,Dn=null,Gc=!1,wl=!1,qo=!1,Yc=0,wu=0,Sl=null,fT=0;function mn(){throw Error(s(321))}function dd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!cr(t[a],r[a]))return!1;return!0}function pd(t,r,a,l,h,m){return Qs=m,ut=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,oe.H=t===null||t.memoizedState===null?by:xd,qo=!1,m=a(l,h),qo=!1,wl&&(m=Ug(r,a,l,h)),jg(t),m}function jg(t){oe.H=Cu;var r=Ht!==null&&Ht.next!==null;if(Qs=0,Dn=Ht=ut=null,Gc=!1,wu=0,Sl=null,r)throw Error(s(300));t===null||Nn||(t=t.dependencies,t!==null&&Lc(t)&&(Nn=!0))}function Ug(t,r,a,l){ut=t;var h=0;do{if(wl&&(Sl=null),wu=0,wl=!1,25<=h)throw Error(s(301));if(h+=1,Dn=Ht=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}oe.H=Ey,m=r(a,l)}while(wl);return m}function hT(){var t=oe.H,r=t.useState()[0];return r=typeof r.then=="function"?Su(r):r,t=t.useState()[0],(Ht!==null?Ht.memoizedState:null)!==t&&(ut.flags|=1024),r}function md(){var t=Yc!==0;return Yc=0,t}function gd(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function yd(t){if(Gc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Gc=!1}Qs=0,Dn=Ht=ut=null,wl=!1,wu=Yc=0,Sl=null}function wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?ut.memoizedState=Dn=t:Dn=Dn.next=t,Dn}function Sn(){if(Ht===null){var t=ut.alternate;t=t!==null?t.memoizedState:null}else t=Ht.next;var r=Dn===null?ut.memoizedState:Dn.next;if(r!==null)Dn=r,Ht=t;else{if(t===null)throw ut.alternate===null?Error(s(467)):Error(s(310));Ht=t,t={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Dn===null?ut.memoizedState=Dn=t:Dn=Dn.next=t}return Dn}function Qc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Su(t){var r=wu;return wu+=1,Sl===null&&(Sl=[]),t=xg(Sl,t,r),r=ut,(Dn===null?r.memoizedState:Dn.next)===null&&(r=r.alternate,oe.H=r===null||r.memoizedState===null?by:xd),t}function Xc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Su(t);if(t.$$typeof===ke)return Zn(t)}throw Error(s(438,String(t)))}function vd(t){var r=null,a=ut.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=ut.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Qc(),ut.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=Y;return r.index++,a}function Xs(t,r){return typeof r=="function"?r(t):r}function $c(t){var r=Sn();return _d(r,Ht,t)}function _d(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var T=h.next;h.next=m.next,m.next=T}r.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{r=h.next;var C=T=null,U=null,se=r,he=!1;do{var ye=se.lane&-536870913;if(ye!==se.lane?(Et&ye)===ye:(Qs&ye)===ye){var le=se.revertLane;if(le===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),ye===vl&&(he=!0);else if((Qs&le)===le){se=se.next,le===vl&&(he=!0);continue}else ye={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},U===null?(C=U=ye,T=m):U=U.next=ye,ut.lanes|=le,Fa|=le;ye=se.action,qo&&a(m,ye),m=se.hasEagerState?se.eagerState:a(m,ye)}else le={lane:ye,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},U===null?(C=U=le,T=m):U=U.next=le,ut.lanes|=ye,Fa|=ye;se=se.next}while(se!==null&&se!==r);if(U===null?T=m:U.next=C,!cr(m,t.memoizedState)&&(Nn=!0,he&&(a=_l,a!==null)))throw a;t.memoizedState=m,t.baseState=T,t.baseQueue=U,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function bd(t){var r=Sn(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=r.memoizedState;if(h!==null){a.pending=null;var T=h=h.next;do m=t(m,T.action),T=T.next;while(T!==h);cr(m,r.memoizedState)||(Nn=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,l]}function zg(t,r,a){var l=ut,h=Sn(),m=It;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=r();var T=!cr((Ht||h).memoizedState,a);if(T&&(h.memoizedState=a,Nn=!0),h=h.queue,wd(Hg.bind(null,l,h,t),[t]),h.getSnapshot!==r||T||Dn!==null&&Dn.memoizedState.tag&1){if(l.flags|=2048,Al(9,{destroy:void 0},qg.bind(null,l,h,a,r),null),Yt===null)throw Error(s(349));m||(Qs&127)!==0||Bg(l,r,a)}return a}function Bg(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=ut.updateQueue,r===null?(r=Qc(),ut.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function qg(t,r,a,l){r.value=a,r.getSnapshot=l,Fg(r)&&Kg(t)}function Hg(t,r,a){return a(function(){Fg(r)&&Kg(t)})}function Fg(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!cr(t,a)}catch{return!0}}function Kg(t){var r=en(t,2);r!==null&&Fr(r,t,2)}function Ed(t){var r=wr();if(typeof t=="function"){var a=t;if(t=a(),qo){_n(!0);try{a()}finally{_n(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:t},r}function Gg(t,r,a,l){return t.baseState=a,_d(t,Ht,typeof l=="function"?l:Xs)}function dT(t,r,a,l,h){if(Zc(t))throw Error(s(485));if(t=r.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){m.listeners.push(T)}};oe.T!==null?a(!0):m.isTransition=!1,l(m),a=r.pending,a===null?(m.next=r.pending=m,Yg(r,m)):(m.next=a.next,r.pending=a.next=m)}}function Yg(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var m=oe.T,T={};oe.T=T;try{var C=a(h,l),U=oe.S;U!==null&&U(T,C),Qg(t,r,C)}catch(se){Td(t,r,se)}finally{m!==null&&T.types!==null&&(m.types=T.types),oe.T=m}}else try{m=a(h,l),Qg(t,r,m)}catch(se){Td(t,r,se)}}function Qg(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Xg(t,r,l)},function(l){return Td(t,r,l)}):Xg(t,r,a)}function Xg(t,r,a){r.status="fulfilled",r.value=a,$g(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Yg(t,a)))}function Td(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,$g(r),r=r.next;while(r!==l)}t.action=null}function $g(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Jg(t,r){return r}function Wg(t,r){if(It){var a=Yt.formState;if(a!==null){e:{var l=ut;if(It){if($t){t:{for(var h=$t,m=Di;h.nodeType!==8;){if(!m){h=null;break t}if(h=Mi(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){$t=Mi(h.nextSibling),l=h.data==="F!";break e}}Va(l)}l=!1}l&&(r=a[0])}}return a=wr(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jg,lastRenderedState:r},a.queue=l,a=yy.bind(null,ut,l),l.dispatch=a,l=Ed(!1),m=Id.bind(null,ut,!1,l.queue),l=wr(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=dT.bind(null,ut,h,m,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function Zg(t){var r=Sn();return ey(r,Ht,t)}function ey(t,r,a){if(r=_d(t,r,Jg)[0],t=$c(Xs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Su(r)}catch(T){throw T===bl?zc:T}else l=r;r=Sn();var h=r.queue,m=h.dispatch;return a!==r.memoizedState&&(ut.flags|=2048,Al(9,{destroy:void 0},pT.bind(null,h,a),null)),[l,m,t]}function pT(t,r){t.action=r}function ty(t){var r=Sn(),a=Ht;if(a!==null)return ey(r,a,t);Sn(),r=r.memoizedState,a=Sn();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Al(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=ut.updateQueue,r===null&&(r=Qc(),ut.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function ny(){return Sn().memoizedState}function Jc(t,r,a,l){var h=wr();ut.flags|=t,h.memoizedState=Al(1|r,{destroy:void 0},a,l===void 0?null:l)}function Wc(t,r,a,l){var h=Sn();l=l===void 0?null:l;var m=h.memoizedState.inst;Ht!==null&&l!==null&&dd(l,Ht.memoizedState.deps)?h.memoizedState=Al(r,m,a,l):(ut.flags|=t,h.memoizedState=Al(1|r,m,a,l))}function ry(t,r){Jc(8390656,8,t,r)}function wd(t,r){Wc(2048,8,t,r)}function mT(t){ut.flags|=4;var r=ut.updateQueue;if(r===null)r=Qc(),ut.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function iy(t){var r=Sn().memoizedState;return mT({ref:r,nextImpl:t}),function(){if((Vt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function sy(t,r){return Wc(4,2,t,r)}function ay(t,r){return Wc(4,4,t,r)}function oy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function ly(t,r,a){a=a!=null?a.concat([t]):null,Wc(4,4,oy.bind(null,r,t),a)}function Sd(){}function uy(t,r){var a=Sn();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&dd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function cy(t,r){var a=Sn();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&dd(r,l[1]))return l[0];if(l=t(),qo){_n(!0);try{t()}finally{_n(!1)}}return a.memoizedState=[l,r],l}function Ad(t,r,a){return a===void 0||(Qs&1073741824)!==0&&(Et&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=fv(),ut.lanes|=t,Fa|=t,a)}function fy(t,r,a,l){return cr(a,r)?a:Tl.current!==null?(t=Ad(t,a,l),cr(t,r)||(Nn=!0),t):(Qs&42)===0||(Qs&1073741824)!==0&&(Et&261930)===0?(Nn=!0,t.memoizedState=a):(t=fv(),ut.lanes|=t,Fa|=t,r)}function hy(t,r,a,l,h){var m=be.p;be.p=m!==0&&8>m?m:8;var T=oe.T,C={};oe.T=C,Id(t,!1,r,a);try{var U=h(),se=oe.S;if(se!==null&&se(C,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var he=cT(U,l);Au(t,r,he,di(t))}else Au(t,r,l,di(t))}catch(ye){Au(t,r,{then:function(){},status:"rejected",reason:ye},di())}finally{be.p=m,T!==null&&C.types!==null&&(T.types=C.types),oe.T=T}}function gT(){}function Cd(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=dy(t).queue;hy(t,h,r,Ue,a===null?gT:function(){return py(t),a(l)})}function dy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:Ue,baseState:Ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:Ue},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function py(t){var r=dy(t);r.next===null&&(r=t.alternate.memoizedState),Au(t,r.next.queue,{},di())}function Rd(){return Zn(qu)}function my(){return Sn().memoizedState}function gy(){return Sn().memoizedState}function yT(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=di();t=ja(a);var l=Ua(r,t,a);l!==null&&(Fr(l,r,a),bu(l,r,a)),r={cache:nd()},t.payload=r;return}r=r.return}}function vT(t,r,a){var l=di();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Zc(t)?vy(r,a):(a=In(t,r,a,l),a!==null&&(Fr(a,t,l),_y(a,r,l)))}function yy(t,r,a){var l=di();Au(t,r,a,l)}function Au(t,r,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Zc(t))vy(r,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var T=r.lastRenderedState,C=m(T,a);if(h.hasEagerState=!0,h.eagerState=C,cr(C,T))return We(t,r,h,0),Yt===null&&Gn(),!1}catch{}finally{}if(a=In(t,r,h,l),a!==null)return Fr(a,t,l),_y(a,r,l),!0}return!1}function Id(t,r,a,l){if(l={lane:2,revertLane:ap(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Zc(t)){if(r)throw Error(s(479))}else r=In(t,a,l,2),r!==null&&Fr(r,t,2)}function Zc(t){var r=t.alternate;return t===ut||r!==null&&r===ut}function vy(t,r){wl=Gc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function _y(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Pt(t,a)}}var Cu={readContext:Zn,use:Xc,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useLayoutEffect:mn,useInsertionEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useSyncExternalStore:mn,useId:mn,useHostTransitionStatus:mn,useFormState:mn,useActionState:mn,useOptimistic:mn,useMemoCache:mn,useCacheRefresh:mn};Cu.useEffectEvent=mn;var by={readContext:Zn,use:Xc,useCallback:function(t,r){return wr().memoizedState=[t,r===void 0?null:r],t},useContext:Zn,useEffect:ry,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Jc(4194308,4,oy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Jc(4194308,4,t,r)},useInsertionEffect:function(t,r){Jc(4,2,t,r)},useMemo:function(t,r){var a=wr();r=r===void 0?null:r;var l=t();if(qo){_n(!0);try{t()}finally{_n(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=wr();if(a!==void 0){var h=a(r);if(qo){_n(!0);try{a(r)}finally{_n(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=vT.bind(null,ut,t),[l.memoizedState,t]},useRef:function(t){var r=wr();return t={current:t},r.memoizedState=t},useState:function(t){t=Ed(t);var r=t.queue,a=yy.bind(null,ut,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Sd,useDeferredValue:function(t,r){var a=wr();return Ad(a,t,r)},useTransition:function(){var t=Ed(!1);return t=hy.bind(null,ut,t.queue,!0,!1),wr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=ut,h=wr();if(It){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),Yt===null)throw Error(s(349));(Et&127)!==0||Bg(l,r,a)}h.memoizedState=a;var m={value:a,getSnapshot:r};return h.queue=m,ry(Hg.bind(null,l,m,t),[t]),l.flags|=2048,Al(9,{destroy:void 0},qg.bind(null,l,m,a,r),null),a},useId:function(){var t=wr(),r=Yt.identifierPrefix;if(It){var a=ms,l=ps;a=(l&~(1<<32-Ne(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Yc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=fT++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Rd,useFormState:Wg,useActionState:Wg,useOptimistic:function(t){var r=wr();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Id.bind(null,ut,!0,a),a.dispatch=r,[t,r]},useMemoCache:vd,useCacheRefresh:function(){return wr().memoizedState=yT.bind(null,ut)},useEffectEvent:function(t){var r=wr(),a={impl:t};return r.memoizedState=a,function(){if((Vt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},xd={readContext:Zn,use:Xc,useCallback:uy,useContext:Zn,useEffect:wd,useImperativeHandle:ly,useInsertionEffect:sy,useLayoutEffect:ay,useMemo:cy,useReducer:$c,useRef:ny,useState:function(){return $c(Xs)},useDebugValue:Sd,useDeferredValue:function(t,r){var a=Sn();return fy(a,Ht.memoizedState,t,r)},useTransition:function(){var t=$c(Xs)[0],r=Sn().memoizedState;return[typeof t=="boolean"?t:Su(t),r]},useSyncExternalStore:zg,useId:my,useHostTransitionStatus:Rd,useFormState:Zg,useActionState:Zg,useOptimistic:function(t,r){var a=Sn();return Gg(a,Ht,t,r)},useMemoCache:vd,useCacheRefresh:gy};xd.useEffectEvent=iy;var Ey={readContext:Zn,use:Xc,useCallback:uy,useContext:Zn,useEffect:wd,useImperativeHandle:ly,useInsertionEffect:sy,useLayoutEffect:ay,useMemo:cy,useReducer:bd,useRef:ny,useState:function(){return bd(Xs)},useDebugValue:Sd,useDeferredValue:function(t,r){var a=Sn();return Ht===null?Ad(a,t,r):fy(a,Ht.memoizedState,t,r)},useTransition:function(){var t=bd(Xs)[0],r=Sn().memoizedState;return[typeof t=="boolean"?t:Su(t),r]},useSyncExternalStore:zg,useId:my,useHostTransitionStatus:Rd,useFormState:ty,useActionState:ty,useOptimistic:function(t,r){var a=Sn();return Ht!==null?Gg(a,Ht,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:vd,useCacheRefresh:gy};Ey.useEffectEvent=iy;function Od(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:I({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Dd={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=di(),h=ja(l);h.payload=r,a!=null&&(h.callback=a),r=Ua(t,h,l),r!==null&&(Fr(r,t,l),bu(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=di(),h=ja(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Ua(t,h,l),r!==null&&(Fr(r,t,l),bu(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=di(),l=ja(a);l.tag=2,r!=null&&(l.callback=r),r=Ua(t,l,a),r!==null&&(Fr(r,t,a),bu(r,t,a))}};function Ty(t,r,a,l,h,m,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,T):r.prototype&&r.prototype.isPureReactComponent?!f(a,l)||!f(h,m):!0}function wy(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&Dd.enqueueReplaceState(r,r.state,null)}function Ho(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=I({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Sy(t){Ve(t)}function Ay(t){console.error(t)}function Cy(t){Ve(t)}function ef(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Ry(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Nd(t,r,a){return a=ja(a),a.tag=3,a.payload={element:null},a.callback=function(){ef(t,r)},a}function Iy(t){return t=ja(t),t.tag=3,t}function xy(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){Ry(r,a,l)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Ry(r,a,l),typeof h!="function"&&(Ka===null?Ka=new Set([this]):Ka.add(this));var C=l.stack;this.componentDidCatch(l.value,{componentStack:C!==null?C:""})})}function _T(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&yl(r,a,h,!0),a=ui.current,a!==null){switch(a.tag){case 31:case 13:return Ni===null?df():a.alternate===null&&gn===0&&(gn=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Bc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),rp(t,l,h)),!1;case 22:return a.flags|=65536,l===Bc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),rp(t,l,h)),!1}throw Error(s(435,a.tag))}return rp(t,l,h),df(),!1}if(It)return r=ui.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Jh&&(t=Error(s(422),{cause:l}),mu(Ii(t,a)))):(l!==Jh&&(r=Error(s(423),{cause:l}),mu(Ii(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Ii(l,a),h=Nd(t.stateNode,l,h),ld(t,h),gn!==4&&(gn=2)),!1;var m=Error(s(520),{cause:l});if(m=Ii(m,a),ku===null?ku=[m]:ku.push(m),gn!==4&&(gn=2),r===null)return!0;l=Ii(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Nd(a.stateNode,l,t),ld(a,t),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ka===null||!Ka.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Iy(h),xy(h,t,a,l),ld(a,h),!1}a=a.return}while(a!==null);return!1}var Md=Error(s(461)),Nn=!1;function er(t,r,a,l){r.child=t===null?Mg(r,null,a,l):Bo(r,t.child,a,l)}function Oy(t,r,a,l,h){a=a.render;var m=r.ref;if("ref"in l){var T={};for(var C in l)C!=="ref"&&(T[C]=l[C])}else T=l;return Lo(r),l=pd(t,r,a,T,m,h),C=md(),t!==null&&!Nn?(gd(t,r,h),$s(t,r,h)):(It&&C&&Xh(r),r.flags|=1,er(t,r,l,h),r.child)}function Dy(t,r,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!Gh(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,Ny(t,r,m,l,h)):(t=Vc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!Bd(t,h)){var T=m.memoizedProps;if(a=a.compare,a=a!==null?a:f,a(T,l)&&t.ref===r.ref)return $s(t,r,h)}return r.flags|=1,t=Fs(m,l),t.ref=r.ref,t.return=r,r.child=t}function Ny(t,r,a,l,h){if(t!==null){var m=t.memoizedProps;if(f(m,l)&&t.ref===r.ref)if(Nn=!1,r.pendingProps=l=m,Bd(t,h))(t.flags&131072)!==0&&(Nn=!0);else return r.lanes=t.lanes,$s(t,r,h)}return kd(t,r,a,l,h)}function My(t,r,a,l){var h=l.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=r.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~m}else l=0,r.child=null;return ky(t,r,m,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Uc(r,m!==null?m.cachePool:null),m!==null?Pg(r,m):cd(),Lg(r);else return l=r.lanes=536870912,ky(t,r,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(Uc(r,m.cachePool),Pg(r,m),Ba(),r.memoizedState=null):(t!==null&&Uc(r,null),cd(),Ba());return er(t,r,h,a),r.child}function Ru(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function ky(t,r,a,l,h){var m=id();return m=m===null?null:{parent:On._currentValue,pool:m},r.memoizedState={baseLanes:a,cachePool:m},t!==null&&Uc(r,null),cd(),Lg(r),t!==null&&yl(t,r,l,!0),r.childLanes=h,null}function tf(t,r){return r=rf({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Vy(t,r,a){return Bo(r,t.child,null,a),t=tf(r,r.pendingProps),t.flags|=2,ci(r),r.memoizedState=null,t}function bT(t,r,a){var l=r.pendingProps,h=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(It){if(l.mode==="hidden")return t=tf(r,l),r.lanes=536870912,Ru(null,t);if(hd(r),(t=$t)?(t=Yv(t,Di),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ma!==null?{id:ps,overflow:ms}:null,retryLane:536870912,hydrationErrors:null},a=vg(t),a.return=r,r.child=a,Wn=r,$t=null)):t=null,t===null)throw Va(r);return r.lanes=536870912,null}return tf(r,l)}var m=t.memoizedState;if(m!==null){var T=m.dehydrated;if(hd(r),h)if(r.flags&256)r.flags&=-257,r=Vy(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(s(558));else if(Nn||yl(t,r,a,!1),h=(a&t.childLanes)!==0,Nn||h){if(l=Yt,l!==null&&(T=Zt(l,a),T!==0&&T!==m.retryLane))throw m.retryLane=T,en(t,T),Fr(l,t,T),Md;df(),r=Vy(t,r,a)}else t=m.treeContext,$t=Mi(T.nextSibling),Wn=r,It=!0,ka=null,Di=!1,t!==null&&Eg(r,t),r=tf(r,l),r.flags|=4096;return r}return t=Fs(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function nf(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function kd(t,r,a,l,h){return Lo(r),a=pd(t,r,a,l,void 0,h),l=md(),t!==null&&!Nn?(gd(t,r,h),$s(t,r,h)):(It&&l&&Xh(r),r.flags|=1,er(t,r,a,h),r.child)}function Py(t,r,a,l,h,m){return Lo(r),r.updateQueue=null,a=Ug(r,l,a,h),jg(t),l=md(),t!==null&&!Nn?(gd(t,r,m),$s(t,r,m)):(It&&l&&Xh(r),r.flags|=1,er(t,r,a,m),r.child)}function Ly(t,r,a,l,h){if(Lo(r),r.stateNode===null){var m=Ur,T=a.contextType;typeof T=="object"&&T!==null&&(m=Zn(T)),m=new a(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Dd,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},ad(r),T=a.contextType,m.context=typeof T=="object"&&T!==null?Zn(T):Ur,m.state=r.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(Od(r,a,T,l),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(T=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),T!==m.state&&Dd.enqueueReplaceState(m,m.state,null),Tu(r,l,m,h),Eu(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var C=r.memoizedProps,U=Ho(a,C);m.props=U;var se=m.context,he=a.contextType;T=Ur,typeof he=="object"&&he!==null&&(T=Zn(he));var ye=a.getDerivedStateFromProps;he=typeof ye=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=r.pendingProps!==C,he||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||se!==T)&&wy(r,m,l,T),La=!1;var le=r.memoizedState;m.state=le,Tu(r,l,m,h),Eu(),se=r.memoizedState,C||le!==se||La?(typeof ye=="function"&&(Od(r,a,ye,l),se=r.memoizedState),(U=La||Ty(r,a,U,l,le,se,T))?(he||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=se),m.props=l,m.state=se,m.context=T,l=U):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,od(t,r),T=r.memoizedProps,he=Ho(a,T),m.props=he,ye=r.pendingProps,le=m.context,se=a.contextType,U=Ur,typeof se=="object"&&se!==null&&(U=Zn(se)),C=a.getDerivedStateFromProps,(se=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T!==ye||le!==U)&&wy(r,m,l,U),La=!1,le=r.memoizedState,m.state=le,Tu(r,l,m,h),Eu();var ce=r.memoizedState;T!==ye||le!==ce||La||t!==null&&t.dependencies!==null&&Lc(t.dependencies)?(typeof C=="function"&&(Od(r,a,C,l),ce=r.memoizedState),(he=La||Ty(r,a,he,l,le,ce,U)||t!==null&&t.dependencies!==null&&Lc(t.dependencies))?(se||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ce,U),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ce,U)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||T===t.memoizedProps&&le===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&le===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=ce),m.props=l,m.state=ce,m.context=U,l=he):(typeof m.componentDidUpdate!="function"||T===t.memoizedProps&&le===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&le===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,nf(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=Bo(r,t.child,null,h),r.child=Bo(r,null,a,h)):er(t,r,a,h),r.memoizedState=m.state,t=r.child):t=$s(t,r,h),t}function jy(t,r,a,l){return Vo(),r.flags|=256,er(t,r,a,l),r.child}var Vd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pd(t){return{baseLanes:t,cachePool:Rg()}}function Ld(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=hi),t}function Uy(t,r,a){var l=r.pendingProps,h=!1,m=(r.flags&128)!==0,T;if((T=m)||(T=t!==null&&t.memoizedState===null?!1:(wn.current&2)!==0),T&&(h=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,t===null){if(It){if(h?za(r):Ba(),(t=$t)?(t=Yv(t,Di),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ma!==null?{id:ps,overflow:ms}:null,retryLane:536870912,hydrationErrors:null},a=vg(t),a.return=r,r.child=a,Wn=r,$t=null)):t=null,t===null)throw Va(r);return _p(t)?r.lanes=32:r.lanes=536870912,null}var C=l.children;return l=l.fallback,h?(Ba(),h=r.mode,C=rf({mode:"hidden",children:C},h),l=ko(l,h,a,null),C.return=r,l.return=r,C.sibling=l,r.child=C,l=r.child,l.memoizedState=Pd(a),l.childLanes=Ld(t,T,a),r.memoizedState=Vd,Ru(null,l)):(za(r),jd(r,C))}var U=t.memoizedState;if(U!==null&&(C=U.dehydrated,C!==null)){if(m)r.flags&256?(za(r),r.flags&=-257,r=Ud(t,r,a)):r.memoizedState!==null?(Ba(),r.child=t.child,r.flags|=128,r=null):(Ba(),C=l.fallback,h=r.mode,l=rf({mode:"visible",children:l.children},h),C=ko(C,h,a,null),C.flags|=2,l.return=r,C.return=r,l.sibling=C,r.child=l,Bo(r,t.child,null,a),l=r.child,l.memoizedState=Pd(a),l.childLanes=Ld(t,T,a),r.memoizedState=Vd,r=Ru(null,l));else if(za(r),_p(C)){if(T=C.nextSibling&&C.nextSibling.dataset,T)var se=T.dgst;T=se,l=Error(s(419)),l.stack="",l.digest=T,mu({value:l,source:null,stack:null}),r=Ud(t,r,a)}else if(Nn||yl(t,r,a,!1),T=(a&t.childLanes)!==0,Nn||T){if(T=Yt,T!==null&&(l=Zt(T,a),l!==0&&l!==U.retryLane))throw U.retryLane=l,en(t,l),Fr(T,t,l),Md;vp(C)||df(),r=Ud(t,r,a)}else vp(C)?(r.flags|=192,r.child=t.child,r=null):(t=U.treeContext,$t=Mi(C.nextSibling),Wn=r,It=!0,ka=null,Di=!1,t!==null&&Eg(r,t),r=jd(r,l.children),r.flags|=4096);return r}return h?(Ba(),C=l.fallback,h=r.mode,U=t.child,se=U.sibling,l=Fs(U,{mode:"hidden",children:l.children}),l.subtreeFlags=U.subtreeFlags&65011712,se!==null?C=Fs(se,C):(C=ko(C,h,a,null),C.flags|=2),C.return=r,l.return=r,l.sibling=C,r.child=l,Ru(null,l),l=r.child,C=t.child.memoizedState,C===null?C=Pd(a):(h=C.cachePool,h!==null?(U=On._currentValue,h=h.parent!==U?{parent:U,pool:U}:h):h=Rg(),C={baseLanes:C.baseLanes|a,cachePool:h}),l.memoizedState=C,l.childLanes=Ld(t,T,a),r.memoizedState=Vd,Ru(t.child,l)):(za(r),a=t.child,t=a.sibling,a=Fs(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(T=r.deletions,T===null?(r.deletions=[t],r.flags|=16):T.push(t)),r.child=a,r.memoizedState=null,a)}function jd(t,r){return r=rf({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function rf(t,r){return t=li(22,t,null,r),t.lanes=0,t}function Ud(t,r,a){return Bo(r,t.child,null,a),t=jd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function zy(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),ed(t.return,r,a)}function zd(t,r,a,l,h,m){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:m}:(T.isBackwards=r,T.rendering=null,T.renderingStartTime=0,T.last=l,T.tail=a,T.tailMode=h,T.treeForkCount=m)}function By(t,r,a){var l=r.pendingProps,h=l.revealOrder,m=l.tail;l=l.children;var T=wn.current,C=(T&2)!==0;if(C?(T=T&1|2,r.flags|=128):T&=1,xe(wn,T),er(t,r,l,a),l=It?pu:0,!C&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zy(t,a,r);else if(t.tag===19)zy(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&Kc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),zd(r,!1,h,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Kc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}zd(r,!0,a,null,m,l);break;case"together":zd(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function $s(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Fa|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(yl(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=Fs(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Fs(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Bd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Lc(t)))}function ET(t,r,a){switch(r.tag){case 3:yn(r,r.stateNode.containerInfo),Pa(r,On,t.memoizedState.cache),Vo();break;case 27:case 5:rs(r);break;case 4:yn(r,r.stateNode.containerInfo);break;case 10:Pa(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,hd(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(za(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Uy(t,r,a):(za(r),t=$s(t,r,a),t!==null?t.sibling:null);za(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(yl(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return By(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),xe(wn,wn.current),l)break;return null;case 22:return r.lanes=0,My(t,r,a,r.pendingProps);case 24:Pa(r,On,t.memoizedState.cache)}return $s(t,r,a)}function qy(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Nn=!0;else{if(!Bd(t,a)&&(r.flags&128)===0)return Nn=!1,ET(t,r,a);Nn=(t.flags&131072)!==0}else Nn=!1,It&&(r.flags&1048576)!==0&&bg(r,pu,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=Uo(r.elementType),r.type=t,typeof t=="function")Gh(t)?(l=Ho(t,l),r.tag=1,r=Ly(null,r,t,l,a)):(r.tag=0,r=kd(null,r,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===tt){r.tag=11,r=Oy(null,r,t,l,a);break e}else if(h===L){r.tag=14,r=Dy(null,r,t,l,a);break e}}throw r=Dt(t)||t,Error(s(306,r,""))}}return r;case 0:return kd(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=Ho(l,r.pendingProps),Ly(t,r,l,h,a);case 3:e:{if(yn(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var m=r.memoizedState;h=m.element,od(t,r),Tu(r,l,null,a);var T=r.memoizedState;if(l=T.cache,Pa(r,On,l),l!==m.cache&&td(r,[On],a,!0),Eu(),l=T.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=jy(t,r,l,a);break e}else if(l!==h){h=Ii(Error(s(424)),r),mu(h),r=jy(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for($t=Mi(t.firstChild),Wn=r,It=!0,ka=null,Di=!0,a=Mg(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Vo(),l===h){r=$s(t,r,a);break e}er(t,r,l,a)}r=r.child}return r;case 26:return nf(t,r),t===null?(a=Zv(r.type,null,r.pendingProps,null))?r.memoizedState=a:It||(a=r.type,t=r.pendingProps,l=bf(Je.current).createElement(a),l[jt]=r,l[Qt]=t,tr(l,a,t),an(l),r.stateNode=l):r.memoizedState=Zv(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return rs(r),t===null&&It&&(l=r.stateNode=$v(r.type,r.pendingProps,Je.current),Wn=r,Di=!0,h=$t,Xa(r.type)?(bp=h,$t=Mi(l.firstChild)):$t=h),er(t,r,r.pendingProps.children,a),nf(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&It&&((h=l=$t)&&(l=JT(l,r.type,r.pendingProps,Di),l!==null?(r.stateNode=l,Wn=r,$t=Mi(l.firstChild),Di=!1,h=!0):h=!1),h||Va(r)),rs(r),h=r.type,m=r.pendingProps,T=t!==null?t.memoizedProps:null,l=m.children,mp(h,m)?l=null:T!==null&&mp(h,T)&&(r.flags|=32),r.memoizedState!==null&&(h=pd(t,r,hT,null,null,a),qu._currentValue=h),nf(t,r),er(t,r,l,a),r.child;case 6:return t===null&&It&&((t=a=$t)&&(a=WT(a,r.pendingProps,Di),a!==null?(r.stateNode=a,Wn=r,$t=null,t=!0):t=!1),t||Va(r)),null;case 13:return Uy(t,r,a);case 4:return yn(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Bo(r,null,l,a):er(t,r,l,a),r.child;case 11:return Oy(t,r,r.type,r.pendingProps,a);case 7:return er(t,r,r.pendingProps,a),r.child;case 8:return er(t,r,r.pendingProps.children,a),r.child;case 12:return er(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Pa(r,r.type,l.value),er(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,Lo(r),h=Zn(h),l=l(h),r.flags|=1,er(t,r,l,a),r.child;case 14:return Dy(t,r,r.type,r.pendingProps,a);case 15:return Ny(t,r,r.type,r.pendingProps,a);case 19:return By(t,r,a);case 31:return bT(t,r,a);case 22:return My(t,r,a,r.pendingProps);case 24:return Lo(r),l=Zn(On),t===null?(h=id(),h===null&&(h=Yt,m=nd(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),r.memoizedState={parent:l,cache:h},ad(r),Pa(r,On,h)):((t.lanes&a)!==0&&(od(t,r),Tu(r,null,null,a),Eu()),h=t.memoizedState,m=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Pa(r,On,l)):(l=m.cache,Pa(r,On,l),l!==h.cache&&td(r,[On],a,!0))),er(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Js(t){t.flags|=4}function qd(t,r,a,l,h){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(mv())t.flags|=8192;else throw zo=Bc,sd}else t.flags&=-16777217}function Hy(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!i_(r))if(mv())t.flags|=8192;else throw zo=Bc,sd}function sf(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?ll():536870912,t.lanes|=r,xl|=r)}function Iu(t,r){if(!It)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Jt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function TT(t,r,a){var l=r.pendingProps;switch($h(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(r),null;case 1:return Jt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Ys(On),Me(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(gl(r)?Js(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Wh())),Jt(r),null;case 26:var h=r.type,m=r.memoizedState;return t===null?(Js(r),m!==null?(Jt(r),Hy(r,m)):(Jt(r),qd(r,h,null,l,a))):m?m!==t.memoizedState?(Js(r),Jt(r),Hy(r,m)):(Jt(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&Js(r),Jt(r),qd(r,h,t,l,a)),null;case 27:if(Bi(r),a=Je.current,h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Js(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Jt(r),null}t=Pe.current,gl(r)?Tg(r):(t=$v(h,l,a),r.stateNode=t,Js(r))}return Jt(r),null;case 5:if(Bi(r),h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Js(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Jt(r),null}if(m=Pe.current,gl(r))Tg(r);else{var T=bf(Je.current);switch(m){case 1:m=T.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=T.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=T.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=T.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=T.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?T.createElement("select",{is:l.is}):T.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?T.createElement(h,{is:l.is}):T.createElement(h)}}m[jt]=r,m[Qt]=l;e:for(T=r.child;T!==null;){if(T.tag===5||T.tag===6)m.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===r)break e;for(;T.sibling===null;){if(T.return===null||T.return===r)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}r.stateNode=m;e:switch(tr(m,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Js(r)}}return Jt(r),qd(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Js(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=Je.current,gl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=Wn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[jt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Uv(t.nodeValue,a)),t||Va(r,!0)}else t=bf(t).createTextNode(l),t[jt]=r,r.stateNode=t}return Jt(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=gl(r),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[jt]=r}else Vo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Jt(r),t=!1}else a=Wh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(ci(r),r):(ci(r),null);if((r.flags&128)!==0)throw Error(s(558))}return Jt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=gl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[jt]=r}else Vo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Jt(r),h=!1}else h=Wh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(ci(r),r):(ci(r),null)}return ci(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),sf(r,r.updateQueue),Jt(r),null);case 4:return Me(),t===null&&cp(r.stateNode.containerInfo),Jt(r),null;case 10:return Ys(r.type),Jt(r),null;case 19:if(me(wn),l=r.memoizedState,l===null)return Jt(r),null;if(h=(r.flags&128)!==0,m=l.rendering,m===null)if(h)Iu(l,!1);else{if(gn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=Kc(t),m!==null){for(r.flags|=128,Iu(l,!1),t=m.updateQueue,r.updateQueue=t,sf(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)yg(a,t),a=a.sibling;return xe(wn,wn.current&1|2),It&&Ks(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&qn()>cf&&(r.flags|=128,h=!0,Iu(l,!1),r.lanes=4194304)}else{if(!h)if(t=Kc(m),t!==null){if(r.flags|=128,h=!0,t=t.updateQueue,r.updateQueue=t,sf(r,t),Iu(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!It)return Jt(r),null}else 2*qn()-l.renderingStartTime>cf&&a!==536870912&&(r.flags|=128,h=!0,Iu(l,!1),r.lanes=4194304);l.isBackwards?(m.sibling=r.child,r.child=m):(t=l.last,t!==null?t.sibling=m:r.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=qn(),t.sibling=null,a=wn.current,xe(wn,h?a&1|2:a&1),It&&Ks(r,l.treeForkCount),t):(Jt(r),null);case 22:case 23:return ci(r),fd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(Jt(r),r.subtreeFlags&6&&(r.flags|=8192)):Jt(r),a=r.updateQueue,a!==null&&sf(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&me(jo),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Ys(On),Jt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function wT(t,r){switch($h(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ys(On),Me(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Bi(r),null;case 31:if(r.memoizedState!==null){if(ci(r),r.alternate===null)throw Error(s(340));Vo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(ci(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Vo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return me(wn),null;case 4:return Me(),null;case 10:return Ys(r.type),null;case 22:case 23:return ci(r),fd(),t!==null&&me(jo),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Ys(On),null;case 25:return null;default:return null}}function Fy(t,r){switch($h(r),r.tag){case 3:Ys(On),Me();break;case 26:case 27:case 5:Bi(r);break;case 4:Me();break;case 31:r.memoizedState!==null&&ci(r);break;case 13:ci(r);break;case 19:me(wn);break;case 10:Ys(r.type);break;case 22:case 23:ci(r),fd(),t!==null&&me(jo);break;case 24:Ys(On)}}function xu(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,T=a.inst;l=m(),T.destroy=l}a=a.next}while(a!==h)}}catch(C){qt(r,r.return,C)}}function qa(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var T=l.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,h=r;var U=a,se=C;try{se()}catch(he){qt(h,U,he)}}}l=l.next}while(l!==m)}}catch(he){qt(r,r.return,he)}}function Ky(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Vg(r,a)}catch(l){qt(t,t.return,l)}}}function Gy(t,r,a){a.props=Ho(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){qt(t,r,l)}}function Ou(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){qt(t,r,h)}}function gs(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){qt(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){qt(t,r,h)}else a.current=null}function Yy(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){qt(t,t.return,h)}}function Hd(t,r,a){try{var l=t.stateNode;KT(l,t.type,a,r),l[Qt]=r}catch(h){qt(t,t.return,h)}}function Qy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Xa(t.type)||t.tag===4}function Fd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Xa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kd(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=ur));else if(l!==4&&(l===27&&Xa(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Kd(t,r,a),t=t.sibling;t!==null;)Kd(t,r,a),t=t.sibling}function af(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Xa(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(af(t,r,a),t=t.sibling;t!==null;)af(t,r,a),t=t.sibling}function Xy(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);tr(r,l,a),r[jt]=t,r[Qt]=a}catch(m){qt(t,t.return,m)}}var Ws=!1,Mn=!1,Gd=!1,$y=typeof WeakSet=="function"?WeakSet:Set,Yn=null;function ST(t,r){if(t=t.containerInfo,dp=Rf,t=S(t),A(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var T=0,C=-1,U=-1,se=0,he=0,ye=t,le=null;t:for(;;){for(var ce;ye!==a||h!==0&&ye.nodeType!==3||(C=T+h),ye!==m||l!==0&&ye.nodeType!==3||(U=T+l),ye.nodeType===3&&(T+=ye.nodeValue.length),(ce=ye.firstChild)!==null;)le=ye,ye=ce;for(;;){if(ye===t)break t;if(le===a&&++se===h&&(C=T),le===m&&++he===l&&(U=T),(ce=ye.nextSibling)!==null)break;ye=le,le=ye.parentNode}ye=ce}a=C===-1||U===-1?null:{start:C,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(pp={focusedElem:t,selectionRange:a},Rf=!1,Yn=r;Yn!==null;)if(r=Yn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Yn=t;else for(;Yn!==null;){switch(r=Yn,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=r,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var ze=Ho(a.type,h);t=l.getSnapshotBeforeUpdate(ze,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Xe){qt(a,a.return,Xe)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)yp(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":yp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Yn=t;break}Yn=r.return}}function Jy(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ea(t,a),l&4&&xu(5,a);break;case 1:if(ea(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(T){qt(a,a.return,T)}else{var h=Ho(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(T){qt(a,a.return,T)}}l&64&&Ky(a),l&512&&Ou(a,a.return);break;case 3:if(ea(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Vg(t,r)}catch(T){qt(a,a.return,T)}}break;case 27:r===null&&l&4&&Xy(a);case 26:case 5:ea(t,a),r===null&&l&4&&Yy(a),l&512&&Ou(a,a.return);break;case 12:ea(t,a);break;case 31:ea(t,a),l&4&&ev(t,a);break;case 13:ea(t,a),l&4&&tv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=MT.bind(null,a),ZT(t,a))));break;case 22:if(l=a.memoizedState!==null||Ws,!l){r=r!==null&&r.memoizedState!==null||Mn,h=Ws;var m=Mn;Ws=l,(Mn=r)&&!m?ta(t,a,(a.subtreeFlags&8772)!==0):ea(t,a),Ws=h,Mn=m}break;case 30:break;default:ea(t,a)}}function Wy(t){var r=t.alternate;r!==null&&(t.alternate=null,Wy(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ps(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var tn=null,zr=!1;function Zs(t,r,a){for(a=a.child;a!==null;)Zy(t,r,a),a=a.sibling}function Zy(t,r,a){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(ar,a)}catch{}switch(a.tag){case 26:Mn||gs(a,r),Zs(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Mn||gs(a,r);var l=tn,h=zr;Xa(a.type)&&(tn=a.stateNode,zr=!1),Zs(t,r,a),Uu(a.stateNode),tn=l,zr=h;break;case 5:Mn||gs(a,r);case 6:if(l=tn,h=zr,tn=null,Zs(t,r,a),tn=l,zr=h,tn!==null)if(zr)try{(tn.nodeType===9?tn.body:tn.nodeName==="HTML"?tn.ownerDocument.body:tn).removeChild(a.stateNode)}catch(m){qt(a,r,m)}else try{tn.removeChild(a.stateNode)}catch(m){qt(a,r,m)}break;case 18:tn!==null&&(zr?(t=tn,Kv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ll(t)):Kv(tn,a.stateNode));break;case 4:l=tn,h=zr,tn=a.stateNode.containerInfo,zr=!0,Zs(t,r,a),tn=l,zr=h;break;case 0:case 11:case 14:case 15:qa(2,a,r),Mn||qa(4,a,r),Zs(t,r,a);break;case 1:Mn||(gs(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Gy(a,r,l)),Zs(t,r,a);break;case 21:Zs(t,r,a);break;case 22:Mn=(l=Mn)||a.memoizedState!==null,Zs(t,r,a),Mn=l;break;default:Zs(t,r,a)}}function ev(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ll(t)}catch(a){qt(r,r.return,a)}}}function tv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ll(t)}catch(a){qt(r,r.return,a)}}function AT(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new $y),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new $y),r;default:throw Error(s(435,t.tag))}}function of(t,r){var a=AT(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var h=kT.bind(null,t,l);l.then(h,h)}})}function Br(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,T=r,C=T;e:for(;C!==null;){switch(C.tag){case 27:if(Xa(C.type)){tn=C.stateNode,zr=!1;break e}break;case 5:tn=C.stateNode,zr=!1;break e;case 3:case 4:tn=C.stateNode.containerInfo,zr=!0;break e}C=C.return}if(tn===null)throw Error(s(160));Zy(m,T,h),tn=null,zr=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)nv(r,t),r=r.sibling}var Ji=null;function nv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Br(r,t),qr(t),l&4&&(qa(3,t,t.return),xu(3,t),qa(5,t,t.return));break;case 1:Br(r,t),qr(t),l&512&&(Mn||a===null||gs(a,a.return)),l&64&&Ws&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Ji;if(Br(r,t),qr(t),l&512&&(Mn||a===null||gs(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Hn]||m[jt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),tr(m,l,a),m[jt]=t,an(m),l=m;break e;case"link":var T=n_("link","href",h).get(l+(a.href||""));if(T){for(var C=0;C<T.length;C++)if(m=T[C],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(C,1);break t}}m=h.createElement(l),tr(m,l,a),h.head.appendChild(m);break;case"meta":if(T=n_("meta","content",h).get(l+(a.content||""))){for(C=0;C<T.length;C++)if(m=T[C],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(C,1);break t}}m=h.createElement(l),tr(m,l,a),h.head.appendChild(m);break;default:throw Error(s(468,l))}m[jt]=t,an(m),l=m}t.stateNode=l}else r_(h,t.type,t.stateNode);else t.stateNode=t_(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?r_(h,t.type,t.stateNode):t_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Hd(t,t.memoizedProps,a.memoizedProps)}break;case 27:Br(r,t),qr(t),l&512&&(Mn||a===null||gs(a,a.return)),a!==null&&l&4&&Hd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Br(r,t),qr(t),l&512&&(Mn||a===null||gs(a,a.return)),t.flags&32){h=t.stateNode;try{Jn(h,"")}catch(ze){qt(t,t.return,ze)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Hd(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Gd=!0);break;case 6:if(Br(r,t),qr(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ze){qt(t,t.return,ze)}}break;case 3:if(wf=null,h=Ji,Ji=Ef(r.containerInfo),Br(r,t),Ji=h,qr(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ll(r.containerInfo)}catch(ze){qt(t,t.return,ze)}Gd&&(Gd=!1,rv(t));break;case 4:l=Ji,Ji=Ef(t.stateNode.containerInfo),Br(r,t),qr(t),Ji=l;break;case 12:Br(r,t),qr(t);break;case 31:Br(r,t),qr(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,of(t,l)));break;case 13:Br(r,t),qr(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uf=qn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,of(t,l)));break;case 22:h=t.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,se=Ws,he=Mn;if(Ws=se||h,Mn=he||U,Br(r,t),Mn=he,Ws=se,qr(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||U||Ws||Mn||Fo(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){U=a=r;try{if(m=U.stateNode,h)T=m.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{C=U.stateNode;var ye=U.memoizedProps.style,le=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;C.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(ze){qt(U,U.return,ze)}}}else if(r.tag===6){if(a===null){U=r;try{U.stateNode.nodeValue=h?"":U.memoizedProps}catch(ze){qt(U,U.return,ze)}}}else if(r.tag===18){if(a===null){U=r;try{var ce=U.stateNode;h?Gv(ce,!0):Gv(U.stateNode,!1)}catch(ze){qt(U,U.return,ze)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,of(t,a))));break;case 19:Br(r,t),qr(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,of(t,l)));break;case 30:break;case 21:break;default:Br(r,t),qr(t)}}function qr(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Qy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,m=Fd(t);af(t,m,h);break;case 5:var T=a.stateNode;a.flags&32&&(Jn(T,""),a.flags&=-33);var C=Fd(t);af(t,C,T);break;case 3:case 4:var U=a.stateNode.containerInfo,se=Fd(t);Kd(t,se,U);break;default:throw Error(s(161))}}catch(he){qt(t,t.return,he)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function rv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;rv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function ea(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Jy(t,r.alternate,r),r=r.sibling}function Fo(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:qa(4,r,r.return),Fo(r);break;case 1:gs(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Gy(r,r.return,a),Fo(r);break;case 27:Uu(r.stateNode);case 26:case 5:gs(r,r.return),Fo(r);break;case 22:r.memoizedState===null&&Fo(r);break;case 30:Fo(r);break;default:Fo(r)}t=t.sibling}}function ta(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,m=r,T=m.flags;switch(m.tag){case 0:case 11:case 15:ta(h,m,a),xu(4,m);break;case 1:if(ta(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(se){qt(l,l.return,se)}if(l=m,h=l.updateQueue,h!==null){var C=l.stateNode;try{var U=h.shared.hiddenCallbacks;if(U!==null)for(h.shared.hiddenCallbacks=null,h=0;h<U.length;h++)kg(U[h],C)}catch(se){qt(l,l.return,se)}}a&&T&64&&Ky(m),Ou(m,m.return);break;case 27:Xy(m);case 26:case 5:ta(h,m,a),a&&l===null&&T&4&&Yy(m),Ou(m,m.return);break;case 12:ta(h,m,a);break;case 31:ta(h,m,a),a&&T&4&&ev(h,m);break;case 13:ta(h,m,a),a&&T&4&&tv(h,m);break;case 22:m.memoizedState===null&&ta(h,m,a),Ou(m,m.return);break;case 30:break;default:ta(h,m,a)}r=r.sibling}}function Yd(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&gu(a))}function Qd(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&gu(t))}function Wi(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)iv(t,r,a,l),r=r.sibling}function iv(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Wi(t,r,a,l),h&2048&&xu(9,r);break;case 1:Wi(t,r,a,l);break;case 3:Wi(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&gu(t)));break;case 12:if(h&2048){Wi(t,r,a,l),t=r.stateNode;try{var m=r.memoizedProps,T=m.id,C=m.onPostCommit;typeof C=="function"&&C(T,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(U){qt(r,r.return,U)}}else Wi(t,r,a,l);break;case 31:Wi(t,r,a,l);break;case 13:Wi(t,r,a,l);break;case 23:break;case 22:m=r.stateNode,T=r.alternate,r.memoizedState!==null?m._visibility&2?Wi(t,r,a,l):Du(t,r):m._visibility&2?Wi(t,r,a,l):(m._visibility|=2,Cl(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),h&2048&&Yd(T,r);break;case 24:Wi(t,r,a,l),h&2048&&Qd(r.alternate,r);break;default:Wi(t,r,a,l)}}function Cl(t,r,a,l,h){for(h=h&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,T=r,C=a,U=l,se=T.flags;switch(T.tag){case 0:case 11:case 15:Cl(m,T,C,U,h),xu(8,T);break;case 23:break;case 22:var he=T.stateNode;T.memoizedState!==null?he._visibility&2?Cl(m,T,C,U,h):Du(m,T):(he._visibility|=2,Cl(m,T,C,U,h)),h&&se&2048&&Yd(T.alternate,T);break;case 24:Cl(m,T,C,U,h),h&&se&2048&&Qd(T.alternate,T);break;default:Cl(m,T,C,U,h)}r=r.sibling}}function Du(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:Du(a,l),h&2048&&Yd(l.alternate,l);break;case 24:Du(a,l),h&2048&&Qd(l.alternate,l);break;default:Du(a,l)}r=r.sibling}}var Nu=8192;function Rl(t,r,a){if(t.subtreeFlags&Nu)for(t=t.child;t!==null;)sv(t,r,a),t=t.sibling}function sv(t,r,a){switch(t.tag){case 26:Rl(t,r,a),t.flags&Nu&&t.memoizedState!==null&&fw(a,Ji,t.memoizedState,t.memoizedProps);break;case 5:Rl(t,r,a);break;case 3:case 4:var l=Ji;Ji=Ef(t.stateNode.containerInfo),Rl(t,r,a),Ji=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Nu,Nu=16777216,Rl(t,r,a),Nu=l):Rl(t,r,a));break;default:Rl(t,r,a)}}function av(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Mu(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Yn=l,lv(l,t)}av(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ov(t),t=t.sibling}function ov(t){switch(t.tag){case 0:case 11:case 15:Mu(t),t.flags&2048&&qa(9,t,t.return);break;case 3:Mu(t);break;case 12:Mu(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,lf(t)):Mu(t);break;default:Mu(t)}}function lf(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Yn=l,lv(l,t)}av(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:qa(8,r,r.return),lf(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,lf(r));break;default:lf(r)}t=t.sibling}}function lv(t,r){for(;Yn!==null;){var a=Yn;switch(a.tag){case 0:case 11:case 15:qa(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:gu(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Yn=l;else e:for(a=t;Yn!==null;){l=Yn;var h=l.sibling,m=l.return;if(Wy(l),l===a){Yn=null;break e}if(h!==null){h.return=m,Yn=h;break e}Yn=m}}}var CT={getCacheForType:function(t){var r=Zn(On),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return Zn(On).controller.signal}},RT=typeof WeakMap=="function"?WeakMap:Map,Vt=0,Yt=null,_t=null,Et=0,Bt=0,fi=null,Ha=!1,Il=!1,Xd=!1,na=0,gn=0,Fa=0,Ko=0,$d=0,hi=0,xl=0,ku=null,Hr=null,Jd=!1,uf=0,uv=0,cf=1/0,ff=null,Ka=null,jn=0,Ga=null,Ol=null,ra=0,Wd=0,Zd=null,cv=null,Vu=0,ep=null;function di(){return(Vt&2)!==0&&Et!==0?Et&-Et:oe.T!==null?ap():Vs()}function fv(){if(hi===0)if((Et&536870912)===0||It){var t=qi;qi<<=1,(qi&3932160)===0&&(qi=262144),hi=t}else hi=536870912;return t=ui.current,t!==null&&(t.flags|=32),hi}function Fr(t,r,a){(t===Yt&&(Bt===2||Bt===9)||t.cancelPendingCommit!==null)&&(Dl(t,0),Ya(t,Et,hi,!1)),Cr(t,a),((Vt&2)===0||t!==Yt)&&(t===Yt&&((Vt&2)===0&&(Ko|=a),gn===4&&Ya(t,Et,hi,!1)),ys(t))}function hv(t,r,a){if((Vt&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||vr(t,r),h=l?OT(t,r):np(t,r,!0),m=l;do{if(h===0){Il&&!l&&Ya(t,r,0,!1);break}else{if(a=t.current.alternate,m&&!IT(a)){h=np(t,r,!1),m=!1;continue}if(h===2){if(m=r,t.errorRecoveryDisabledLanes&m)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;e:{var C=t;h=ku;var U=C.current.memoizedState.isDehydrated;if(U&&(Dl(C,T).flags|=256),T=np(C,T,!1),T!==2){if(Xd&&!U){C.errorRecoveryDisabledLanes|=m,Ko|=m,h=4;break e}m=Hr,Hr=h,m!==null&&(Hr===null?Hr=m:Hr.push.apply(Hr,m))}h=T}if(m=!1,h!==2)continue}}if(h===1){Dl(t,0),Ya(t,r,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Ya(l,r,hi,!Ha);break e;case 2:Hr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=uf+300-qn(),10<h)){if(Ya(l,r,hi,!Ha),$r(l,0,!0)!==0)break e;ra=r,l.timeoutHandle=Hv(dv.bind(null,l,a,Hr,ff,Jd,r,hi,Ko,xl,Ha,m,"Throttled",-0,0),h);break e}dv(l,a,Hr,ff,Jd,r,hi,Ko,xl,Ha,m,null,-0,0)}}break}while(!0);ys(t)}function dv(t,r,a,l,h,m,T,C,U,se,he,ye,le,ce){if(t.timeoutHandle=-1,ye=r.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ur},sv(r,m,ye);var ze=(m&62914560)===m?uf-qn():(m&4194048)===m?uv-qn():0;if(ze=hw(ye,ze),ze!==null){ra=m,t.cancelPendingCommit=ze(Ev.bind(null,t,r,m,a,l,h,T,C,U,he,ye,null,le,ce)),Ya(t,m,T,!se);return}}Ev(t,r,m,a,l,h,T,C,U)}function IT(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!cr(m(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ya(t,r,a,l){r&=~$d,r&=~Ko,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var m=31-Ne(h),T=1<<m;l[m]=-1,h&=~T}a!==0&&vi(t,a,r)}function hf(){return(Vt&6)===0?(Pu(0),!1):!0}function tp(){if(_t!==null){if(Bt===0)var t=_t.return;else t=_t,Gs=Po=null,yd(t),El=null,vu=0,t=_t;for(;t!==null;)Fy(t.alternate,t),t=t.return;_t=null}}function Dl(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,QT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ra=0,tp(),Yt=t,_t=a=Fs(t.current,null),Et=r,Bt=0,fi=null,Ha=!1,Il=vr(t,r),Xd=!1,xl=hi=$d=Ko=Fa=gn=0,Hr=ku=null,Jd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Ne(l),m=1<<h;r|=t[h],l&=~m}return na=r,Gn(),a}function pv(t,r){ut=null,oe.H=Cu,r===bl||r===zc?(r=Og(),Bt=3):r===sd?(r=Og(),Bt=4):Bt=r===Md?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,fi=r,_t===null&&(gn=1,ef(t,Ii(r,t.current)))}function mv(){var t=ui.current;return t===null?!0:(Et&4194048)===Et?Ni===null:(Et&62914560)===Et||(Et&536870912)!==0?t===Ni:!1}function gv(){var t=oe.H;return oe.H=Cu,t===null?Cu:t}function yv(){var t=oe.A;return oe.A=CT,t}function df(){gn=4,Ha||(Et&4194048)!==Et&&ui.current!==null||(Il=!0),(Fa&134217727)===0&&(Ko&134217727)===0||Yt===null||Ya(Yt,Et,hi,!1)}function np(t,r,a){var l=Vt;Vt|=2;var h=gv(),m=yv();(Yt!==t||Et!==r)&&(ff=null,Dl(t,r)),r=!1;var T=gn;e:do try{if(Bt!==0&&_t!==null){var C=_t,U=fi;switch(Bt){case 8:tp(),T=6;break e;case 3:case 2:case 9:case 6:ui.current===null&&(r=!0);var se=Bt;if(Bt=0,fi=null,Nl(t,C,U,se),a&&Il){T=0;break e}break;default:se=Bt,Bt=0,fi=null,Nl(t,C,U,se)}}xT(),T=gn;break}catch(he){pv(t,he)}while(!0);return r&&t.shellSuspendCounter++,Gs=Po=null,Vt=l,oe.H=h,oe.A=m,_t===null&&(Yt=null,Et=0,Gn()),T}function xT(){for(;_t!==null;)vv(_t)}function OT(t,r){var a=Vt;Vt|=2;var l=gv(),h=yv();Yt!==t||Et!==r?(ff=null,cf=qn()+500,Dl(t,r)):Il=vr(t,r);e:do try{if(Bt!==0&&_t!==null){r=_t;var m=fi;t:switch(Bt){case 1:Bt=0,fi=null,Nl(t,r,m,1);break;case 2:case 9:if(Ig(m)){Bt=0,fi=null,_v(r);break}r=function(){Bt!==2&&Bt!==9||Yt!==t||(Bt=7),ys(t)},m.then(r,r);break e;case 3:Bt=7;break e;case 4:Bt=5;break e;case 7:Ig(m)?(Bt=0,fi=null,_v(r)):(Bt=0,fi=null,Nl(t,r,m,7));break;case 5:var T=null;switch(_t.tag){case 26:T=_t.memoizedState;case 5:case 27:var C=_t;if(T?i_(T):C.stateNode.complete){Bt=0,fi=null;var U=C.sibling;if(U!==null)_t=U;else{var se=C.return;se!==null?(_t=se,pf(se)):_t=null}break t}}Bt=0,fi=null,Nl(t,r,m,5);break;case 6:Bt=0,fi=null,Nl(t,r,m,6);break;case 8:tp(),gn=6;break e;default:throw Error(s(462))}}DT();break}catch(he){pv(t,he)}while(!0);return Gs=Po=null,oe.H=l,oe.A=h,Vt=a,_t!==null?0:(Yt=null,Et=0,Gn(),gn)}function DT(){for(;_t!==null&&!ol();)vv(_t)}function vv(t){var r=qy(t.alternate,t,na);t.memoizedProps=t.pendingProps,r===null?pf(t):_t=r}function _v(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=Py(a,r,r.pendingProps,r.type,void 0,Et);break;case 11:r=Py(a,r,r.pendingProps,r.type.render,r.ref,Et);break;case 5:yd(r);default:Fy(a,r),r=_t=yg(r,na),r=qy(a,r,na)}t.memoizedProps=t.pendingProps,r===null?pf(t):_t=r}function Nl(t,r,a,l){Gs=Po=null,yd(r),El=null,vu=0;var h=r.return;try{if(_T(t,h,r,a,Et)){gn=1,ef(t,Ii(a,t.current)),_t=null;return}}catch(m){if(h!==null)throw _t=h,m;gn=1,ef(t,Ii(a,t.current)),_t=null;return}r.flags&32768?(It||l===1?t=!0:Il||(Et&536870912)!==0?t=!1:(Ha=t=!0,(l===2||l===9||l===3||l===6)&&(l=ui.current,l!==null&&l.tag===13&&(l.flags|=16384))),bv(r,t)):pf(r)}function pf(t){var r=t;do{if((r.flags&32768)!==0){bv(r,Ha);return}t=r.return;var a=TT(r.alternate,r,na);if(a!==null){_t=a;return}if(r=r.sibling,r!==null){_t=r;return}_t=r=t}while(r!==null);gn===0&&(gn=5)}function bv(t,r){do{var a=wT(t.alternate,t);if(a!==null){a.flags&=32767,_t=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){_t=t;return}_t=t=a}while(t!==null);gn=6,_t=null}function Ev(t,r,a,l,h,m,T,C,U){t.cancelPendingCommit=null;do mf();while(jn!==0);if((Vt&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(m=r.lanes|r.childLanes,m|=lt,So(t,a,m,T,C,U),t===Yt&&(_t=Yt=null,Et=0),Ol=r,Ga=t,ra=a,Wd=m,Zd=h,cv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,VT(gi,function(){return Cv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=oe.T,oe.T=null,h=be.p,be.p=2,T=Vt,Vt|=4;try{ST(t,r,a)}finally{Vt=T,be.p=h,oe.T=l}}jn=1,Tv(),wv(),Sv()}}function Tv(){if(jn===1){jn=0;var t=Ga,r=Ol,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=oe.T,oe.T=null;var l=be.p;be.p=2;var h=Vt;Vt|=4;try{nv(r,t);var m=pp,T=S(t.containerInfo),C=m.focusedElem,U=m.selectionRange;if(T!==C&&C&&C.ownerDocument&&E(C.ownerDocument.documentElement,C)){if(U!==null&&A(C)){var se=U.start,he=U.end;if(he===void 0&&(he=se),"selectionStart"in C)C.selectionStart=se,C.selectionEnd=Math.min(he,C.value.length);else{var ye=C.ownerDocument||document,le=ye&&ye.defaultView||window;if(le.getSelection){var ce=le.getSelection(),ze=C.textContent.length,Xe=Math.min(U.start,ze),Kt=U.end===void 0?Xe:Math.min(U.end,ze);!ce.extend&&Xe>Kt&&(T=Kt,Kt=Xe,Xe=T);var ee=g(C,Xe),K=g(C,Kt);if(ee&&K&&(ce.rangeCount!==1||ce.anchorNode!==ee.node||ce.anchorOffset!==ee.offset||ce.focusNode!==K.node||ce.focusOffset!==K.offset)){var ie=ye.createRange();ie.setStart(ee.node,ee.offset),ce.removeAllRanges(),Xe>Kt?(ce.addRange(ie),ce.extend(K.node,K.offset)):(ie.setEnd(K.node,K.offset),ce.addRange(ie))}}}}for(ye=[],ce=C;ce=ce.parentNode;)ce.nodeType===1&&ye.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<ye.length;C++){var de=ye[C];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Rf=!!dp,pp=dp=null}finally{Vt=h,be.p=l,oe.T=a}}t.current=r,jn=2}}function wv(){if(jn===2){jn=0;var t=Ga,r=Ol,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=oe.T,oe.T=null;var l=be.p;be.p=2;var h=Vt;Vt|=4;try{Jy(t,r.alternate,r)}finally{Vt=h,be.p=l,oe.T=a}}jn=3}}function Sv(){if(jn===4||jn===3){jn=0,is();var t=Ga,r=Ol,a=ra,l=cv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?jn=5:(jn=0,Ol=Ga=null,Av(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ka=null),Rr(a),r=r.stateNode,vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(ar,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=oe.T,h=be.p,be.p=2,oe.T=null;try{for(var m=t.onRecoverableError,T=0;T<l.length;T++){var C=l[T];m(C.value,{componentStack:C.stack})}}finally{oe.T=r,be.p=h}}(ra&3)!==0&&mf(),ys(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===ep?Vu++:(Vu=0,ep=t):Vu=0,Pu(0)}}function Av(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,gu(r)))}function mf(){return Tv(),wv(),Sv(),Cv()}function Cv(){if(jn!==5)return!1;var t=Ga,r=Wd;Wd=0;var a=Rr(ra),l=oe.T,h=be.p;try{be.p=32>a?32:a,oe.T=null,a=Zd,Zd=null;var m=Ga,T=ra;if(jn=0,Ol=Ga=null,ra=0,(Vt&6)!==0)throw Error(s(331));var C=Vt;if(Vt|=4,ov(m.current),iv(m,m.current,T,a),Vt=C,Pu(0,!1),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(ar,m)}catch{}return!0}finally{be.p=h,oe.T=l,Av(t,r)}}function Rv(t,r,a){r=Ii(a,r),r=Nd(t.stateNode,r,2),t=Ua(t,r,2),t!==null&&(Cr(t,2),ys(t))}function qt(t,r,a){if(t.tag===3)Rv(t,t,a);else for(;r!==null;){if(r.tag===3){Rv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ka===null||!Ka.has(l))){t=Ii(a,t),a=Iy(2),l=Ua(r,a,2),l!==null&&(xy(a,l,r,t),Cr(l,2),ys(l));break}}r=r.return}}function rp(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new RT;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(Xd=!0,h.add(a),t=NT.bind(null,t,r,a),r.then(t,t))}function NT(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Yt===t&&(Et&a)===a&&(gn===4||gn===3&&(Et&62914560)===Et&&300>qn()-uf?(Vt&2)===0&&Dl(t,0):$d|=a,xl===Et&&(xl=0)),ys(t)}function Iv(t,r){r===0&&(r=ll()),t=en(t,r),t!==null&&(Cr(t,r),ys(t))}function MT(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Iv(t,a)}function kT(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),Iv(t,a)}function VT(t,r){return rn(t,r)}var gf=null,Ml=null,ip=!1,yf=!1,sp=!1,Qa=0;function ys(t){t!==Ml&&t.next===null&&(Ml===null?gf=Ml=t:Ml=Ml.next=t),yf=!0,ip||(ip=!0,LT())}function Pu(t,r){if(!sp&&yf){sp=!0;do for(var a=!1,l=gf;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var T=l.suspendedLanes,C=l.pingedLanes;m=(1<<31-Ne(42|t)+1)-1,m&=h&~(T&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Nv(l,m))}else m=Et,m=$r(l,l===Yt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||vr(l,m)||(a=!0,Nv(l,m));l=l.next}while(a);sp=!1}}function PT(){xv()}function xv(){yf=ip=!1;var t=0;Qa!==0&&YT()&&(t=Qa);for(var r=qn(),a=null,l=gf;l!==null;){var h=l.next,m=Ov(l,r);m===0?(l.next=null,a===null?gf=h:a.next=h,h===null&&(Ml=a)):(a=l,(t!==0||(m&3)!==0)&&(yf=!0)),l=h}jn!==0&&jn!==5||Pu(t),Qa!==0&&(Qa=0)}function Ov(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var T=31-Ne(m),C=1<<T,U=h[T];U===-1?((C&a)===0||(C&l)!==0)&&(h[T]=uu(C,r)):U<=r&&(t.expiredLanes|=C),m&=~C}if(r=Yt,a=Et,a=$r(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Bt===2||Bt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Pn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||vr(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Pn(l),Rr(a)){case 2:case 8:a=Xr;break;case 32:a=gi;break;case 268435456:a=ga;break;default:a=gi}return l=Dv.bind(null,t),a=rn(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Pn(l),t.callbackPriority=2,t.callbackNode=null,2}function Dv(t,r){if(jn!==0&&jn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(mf()&&t.callbackNode!==a)return null;var l=Et;return l=$r(t,t===Yt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(hv(t,l,r),Ov(t,qn()),t.callbackNode!=null&&t.callbackNode===a?Dv.bind(null,t):null)}function Nv(t,r){if(mf())return null;hv(t,r,!0)}function LT(){XT(function(){(Vt&6)!==0?rn(Qr,PT):xv()})}function ap(){if(Qa===0){var t=vl;t===0&&(t=Ie,Ie<<=1,(Ie&261888)===0&&(Ie=256)),Qa=t}return Qa}function Mv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ii(""+t)}function kv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function jT(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var m=Mv((h[Qt]||null).action),T=l.submitter;T&&(r=(r=T[Qt]||null)?Mv(r.formAction):T.getAttribute("formAction"),r!==null&&(m=r,T=null));var C=new Ti("action","action",null,l,h);t.push({event:C,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Qa!==0){var U=T?kv(h,T):new FormData(h);Cd(a,{pending:!0,data:U,method:h.method,action:m},null,U)}}else typeof m=="function"&&(C.preventDefault(),U=T?kv(h,T):new FormData(h),Cd(a,{pending:!0,data:U,method:h.method,action:m},m,U))},currentTarget:h}]})}}for(var op=0;op<Oe.length;op++){var lp=Oe[op],UT=lp.toLowerCase(),zT=lp[0].toUpperCase()+lp.slice(1);Se(UT,"on"+zT)}Se(re,"onAnimationEnd"),Se(ae,"onAnimationIteration"),Se(fe,"onAnimationStart"),Se("dblclick","onDoubleClick"),Se("focusin","onFocus"),Se("focusout","onBlur"),Se(ge,"onTransitionRun"),Se(Ae,"onTransitionStart"),Se(De,"onTransitionCancel"),Se(we,"onTransitionEnd"),Or("onMouseEnter",["mouseout","mouseover"]),Or("onMouseLeave",["mouseout","mouseover"]),Or("onPointerEnter",["pointerout","pointerover"]),Or("onPointerLeave",["pointerout","pointerover"]),xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xr("onBeforeInput",["compositionend","keypress","textInput","paste"]),xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function Vv(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var T=l.length-1;0<=T;T--){var C=l[T],U=C.instance,se=C.currentTarget;if(C=C.listener,U!==m&&h.isPropagationStopped())break e;m=C,h.currentTarget=se;try{m(h)}catch(he){Ve(he)}h.currentTarget=null,m=U}else for(T=0;T<l.length;T++){if(C=l[T],U=C.instance,se=C.currentTarget,C=C.listener,U!==m&&h.isPropagationStopped())break e;m=C,h.currentTarget=se;try{m(h)}catch(he){Ve(he)}h.currentTarget=null,m=U}}}}function bt(t,r){var a=r[Hi];a===void 0&&(a=r[Hi]=new Set);var l=t+"__bubble";a.has(l)||(Pv(r,t,2,!1),a.add(l))}function up(t,r,a){var l=0;r&&(l|=4),Pv(a,t,l,r)}var vf="_reactListening"+Math.random().toString(36).slice(2);function cp(t){if(!t[vf]){t[vf]=!0,_i.forEach(function(a){a!=="selectionchange"&&(BT.has(a)||up(a,!1,t),up(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[vf]||(r[vf]=!0,up("selectionchange",!1,r))}}function Pv(t,r,a,l){switch(f_(r)){case 2:var h=mw;break;case 8:h=gw;break;default:h=Ap}a=h.bind(null,r,a,t),h=void 0,!js||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function fp(t,r,a,l,h){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var C=l.stateNode.containerInfo;if(C===h)break;if(T===4)for(T=l.return;T!==null;){var U=T.tag;if((U===3||U===4)&&T.stateNode.containerInfo===h)return;T=T.return}for(;C!==null;){if(T=Ir(C),T===null)return;if(U=T.tag,U===5||U===6||U===26||U===27){l=m=T;continue e}C=C.parentNode}}l=l.return}Mr(function(){var se=m,he=_r(a),ye=[];e:{var le=Re.get(t);if(le!==void 0){var ce=Ti,ze=t;switch(t){case"keypress":if(Yi(a)===0)break e;case"keydown":case"keyup":ce=Bs;break;case"focusin":ze="focus",ce=Ai;break;case"focusout":ze="blur",ce=Ai;break;case"beforeblur":case"afterblur":ce=Ai;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Us;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Io;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=v;break;case re:case ae:case fe:ce=xo;break;case we:ce=x;break;case"scroll":case"scrollend":ce=us;break;case"wheel":ce=ue;break;case"copy":case"cut":case"paste":ce=$i;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Ci;break;case"toggle":case"beforetoggle":ce=nt}var Xe=(r&4)!==0,Kt=!Xe&&(t==="scroll"||t==="scrollend"),ee=Xe?le!==null?le+"Capture":null:le;Xe=[];for(var K=se,ie;K!==null;){var de=K;if(ie=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||ie===null||ee===null||(de=br(K,ee),de!=null&&Xe.push(ju(K,de,ie))),Kt)break;K=K.return}0<Xe.length&&(le=new ce(le,ze,null,a,he),ye.push({event:le,listeners:Xe}))}}if((r&7)===0){e:{if(le=t==="mouseover"||t==="pointerover",ce=t==="mouseout"||t==="pointerout",le&&a!==Nr&&(ze=a.relatedTarget||a.fromElement)&&(Ir(ze)||ze[Ln]))break e;if((ce||le)&&(le=he.window===he?he:(le=he.ownerDocument)?le.defaultView||le.parentWindow:window,ce?(ze=a.relatedTarget||a.toElement,ce=se,ze=ze?Ir(ze):null,ze!==null&&(Kt=u(ze),Xe=ze.tag,ze!==Kt||Xe!==5&&Xe!==27&&Xe!==6)&&(ze=null)):(ce=null,ze=se),ce!==ze)){if(Xe=Us,de="onMouseLeave",ee="onMouseEnter",K="mouse",(t==="pointerout"||t==="pointerover")&&(Xe=Ci,de="onPointerLeave",ee="onPointerEnter",K="pointer"),Kt=ce==null?le:bn(ce),ie=ze==null?le:bn(ze),le=new Xe(de,K+"leave",ce,a,he),le.target=Kt,le.relatedTarget=ie,de=null,Ir(he)===se&&(Xe=new Xe(ee,K+"enter",ze,a,he),Xe.target=ie,Xe.relatedTarget=Kt,de=Xe),Kt=de,ce&&ze)t:{for(Xe=qT,ee=ce,K=ze,ie=0,de=ee;de;de=Xe(de))ie++;de=0;for(var Ke=K;Ke;Ke=Xe(Ke))de++;for(;0<ie-de;)ee=Xe(ee),ie--;for(;0<de-ie;)K=Xe(K),de--;for(;ie--;){if(ee===K||K!==null&&ee===K.alternate){Xe=ee;break t}ee=Xe(ee),K=Xe(K)}Xe=null}else Xe=null;ce!==null&&Lv(ye,le,ce,Xe,!1),ze!==null&&Kt!==null&&Lv(ye,Kt,ze,Xe,!0)}}e:{if(le=se?bn(se):window,ce=le.nodeName&&le.nodeName.toLowerCase(),ce==="select"||ce==="input"&&le.type==="file")var Mt=No;else if(fl(le))if(Ri)Mt=Na;else{Mt=Hs;var Be=kc}else ce=le.nodeName,!ce||ce.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?se&&Ea(se.elementType)&&(Mt=No):Mt=hu;if(Mt&&(Mt=Mt(t,se))){fu(ye,Mt,a,he);break e}Be&&Be(t,le,se),t==="focusout"&&se&&le.type==="number"&&se.memoizedProps.value!=null&&Ls(le,"number",le.value)}switch(Be=se?bn(se):window,t){case"focusin":(fl(Be)||Be.contentEditable==="true")&&(P=Be,B=se,q=null);break;case"focusout":q=B=P=null;break;case"mousedown":J=!0;break;case"contextmenu":case"mouseup":case"dragend":J=!1,z(ye,a,he);break;case"selectionchange":if(O)break;case"keydown":case"keyup":z(ye,a,he)}var ft;if(Rt)e:{switch(t){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else qs?hs(t,a)&&(Tt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Tt="onCompositionStart");Tt&&(jr&&a.locale!=="ko"&&(qs||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&qs&&(ft=Gi()):(kr=he,Ta="value"in kr?kr.value:kr.textContent,qs=!0)),Be=_f(se,Tt),0<Be.length&&(Tt=new Vr(Tt,t,null,a,he),ye.push({event:Tt,listeners:Be}),ft?Tt.data=ft:(ft=xa(a),ft!==null&&(Tt.data=ft)))),(ft=Lr?Dc(t,a):Fh(t,a))&&(Tt=_f(se,"onBeforeInput"),0<Tt.length&&(Be=new Vr("onBeforeInput","beforeinput",null,a,he),ye.push({event:Be,listeners:Tt}),Be.data=ft)),jT(ye,t,se,a,he)}Vv(ye,r)})}function ju(t,r,a){return{instance:t,listener:r,currentTarget:a}}function _f(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=br(t,a),h!=null&&l.unshift(ju(t,h,m)),h=br(t,r),h!=null&&l.push(ju(t,h,m))),t.tag===3)return l;t=t.return}return[]}function qT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Lv(t,r,a,l,h){for(var m=r._reactName,T=[];a!==null&&a!==l;){var C=a,U=C.alternate,se=C.stateNode;if(C=C.tag,U!==null&&U===l)break;C!==5&&C!==26&&C!==27||se===null||(U=se,h?(se=br(a,m),se!=null&&T.unshift(ju(a,se,U))):h||(se=br(a,m),se!=null&&T.push(ju(a,se,U)))),a=a.return}T.length!==0&&t.push({event:r,listeners:T})}var HT=/\r\n?/g,FT=/\u0000|\uFFFD/g;function jv(t){return(typeof t=="string"?t:""+t).replace(HT,`
`).replace(FT,"")}function Uv(t,r){return r=jv(r),jv(t)===r}function Ft(t,r,a,l,h,m){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Jn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Jn(t,""+l);break;case"className":lr(t,"class",l);break;case"tabIndex":lr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":lr(t,a,l);break;case"style":ba(t,l,m);break;case"data":if(r!=="object"){lr(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ii(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&Ft(t,r,"name",h.name,h,null),Ft(t,r,"formEncType",h.formEncType,h,null),Ft(t,r,"formMethod",h.formMethod,h,null),Ft(t,r,"formTarget",h.formTarget,h,null)):(Ft(t,r,"encType",h.encType,h,null),Ft(t,r,"method",h.method,h,null),Ft(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ii(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ur);break;case"onScroll":l!=null&&bt("scroll",t);break;case"onScrollEnd":l!=null&&bt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ii(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":bt("beforetoggle",t),bt("toggle",t),ot(t,"popover",l);break;case"xlinkActuate":on(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":on(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":on(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":on(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":on(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":on(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":on(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":on(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":on(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ot(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=cl.get(a)||a,ot(t,a,l))}}function hp(t,r,a,l,h,m){switch(a){case"style":ba(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Jn(t,l):(typeof l=="number"||typeof l=="bigint")&&Jn(t,""+l);break;case"onScroll":l!=null&&bt("scroll",t);break;case"onScrollEnd":l!=null&&bt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ur);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!as.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),m=t[Qt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(r,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ot(t,a,l)}}}function tr(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bt("error",t),bt("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var T=a[m];if(T!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ft(t,r,m,T,a,null)}}h&&Ft(t,r,"srcSet",a.srcSet,a,null),l&&Ft(t,r,"src",a.src,a,null);return;case"input":bt("invalid",t);var C=m=T=h=null,U=null,se=null;for(l in a)if(a.hasOwnProperty(l)){var he=a[l];if(he!=null)switch(l){case"name":h=he;break;case"type":T=he;break;case"checked":U=he;break;case"defaultChecked":se=he;break;case"value":m=he;break;case"defaultValue":C=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(s(137,r));break;default:Ft(t,r,l,he,a,null)}}_a(t,m,C,U,se,T,h,!1);return;case"select":bt("invalid",t),l=T=m=null;for(h in a)if(a.hasOwnProperty(h)&&(C=a[h],C!=null))switch(h){case"value":m=C;break;case"defaultValue":T=C;break;case"multiple":l=C;default:Ft(t,r,h,C,a,null)}r=m,a=T,t.multiple=!!l,r!=null?ni(t,!!l,r,!1):a!=null&&ni(t,!!l,a,!0);return;case"textarea":bt("invalid",t),m=h=l=null;for(T in a)if(a.hasOwnProperty(T)&&(C=a[T],C!=null))switch(T){case"value":l=C;break;case"defaultValue":h=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:Ft(t,r,T,C,a,null)}ri(t,l,h,m);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(l=a[U],l!=null))switch(U){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ft(t,r,U,l,a,null)}return;case"dialog":bt("beforetoggle",t),bt("toggle",t),bt("cancel",t),bt("close",t);break;case"iframe":case"object":bt("load",t);break;case"video":case"audio":for(l=0;l<Lu.length;l++)bt(Lu[l],t);break;case"image":bt("error",t),bt("load",t);break;case"details":bt("toggle",t);break;case"embed":case"source":case"link":bt("error",t),bt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in a)if(a.hasOwnProperty(se)&&(l=a[se],l!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ft(t,r,se,l,a,null)}return;default:if(Ea(r)){for(he in a)a.hasOwnProperty(he)&&(l=a[he],l!==void 0&&hp(t,r,he,l,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(l=a[C],l!=null&&Ft(t,r,C,l,a,null))}function KT(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,T=null,C=null,U=null,se=null,he=null;for(ce in a){var ye=a[ce];if(a.hasOwnProperty(ce)&&ye!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":U=ye;default:l.hasOwnProperty(ce)||Ft(t,r,ce,null,l,ye)}}for(var le in l){var ce=l[le];if(ye=a[le],l.hasOwnProperty(le)&&(ce!=null||ye!=null))switch(le){case"type":m=ce;break;case"name":h=ce;break;case"checked":se=ce;break;case"defaultChecked":he=ce;break;case"value":T=ce;break;case"defaultValue":C=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(s(137,r));break;default:ce!==ye&&Ft(t,r,le,ce,l,ye)}}ti(t,T,C,U,se,he,m,h);return;case"select":ce=T=C=le=null;for(m in a)if(U=a[m],a.hasOwnProperty(m)&&U!=null)switch(m){case"value":break;case"multiple":ce=U;default:l.hasOwnProperty(m)||Ft(t,r,m,null,l,U)}for(h in l)if(m=l[h],U=a[h],l.hasOwnProperty(h)&&(m!=null||U!=null))switch(h){case"value":le=m;break;case"defaultValue":C=m;break;case"multiple":T=m;default:m!==U&&Ft(t,r,h,m,l,U)}r=C,a=T,l=ce,le!=null?ni(t,!!a,le,!1):!!l!=!!a&&(r!=null?ni(t,!!a,r,!0):ni(t,!!a,a?[]:"",!1));return;case"textarea":ce=le=null;for(C in a)if(h=a[C],a.hasOwnProperty(C)&&h!=null&&!l.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Ft(t,r,C,null,l,h)}for(T in l)if(h=l[T],m=a[T],l.hasOwnProperty(T)&&(h!=null||m!=null))switch(T){case"value":le=h;break;case"defaultValue":ce=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==m&&Ft(t,r,T,h,l,m)}Ro(t,le,ce);return;case"option":for(var ze in a)if(le=a[ze],a.hasOwnProperty(ze)&&le!=null&&!l.hasOwnProperty(ze))switch(ze){case"selected":t.selected=!1;break;default:Ft(t,r,ze,null,l,le)}for(U in l)if(le=l[U],ce=a[U],l.hasOwnProperty(U)&&le!==ce&&(le!=null||ce!=null))switch(U){case"selected":t.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:Ft(t,r,U,le,l,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in a)le=a[Xe],a.hasOwnProperty(Xe)&&le!=null&&!l.hasOwnProperty(Xe)&&Ft(t,r,Xe,null,l,le);for(se in l)if(le=l[se],ce=a[se],l.hasOwnProperty(se)&&le!==ce&&(le!=null||ce!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(s(137,r));break;default:Ft(t,r,se,le,l,ce)}return;default:if(Ea(r)){for(var Kt in a)le=a[Kt],a.hasOwnProperty(Kt)&&le!==void 0&&!l.hasOwnProperty(Kt)&&hp(t,r,Kt,void 0,l,le);for(he in l)le=l[he],ce=a[he],!l.hasOwnProperty(he)||le===ce||le===void 0&&ce===void 0||hp(t,r,he,le,l,ce);return}}for(var ee in a)le=a[ee],a.hasOwnProperty(ee)&&le!=null&&!l.hasOwnProperty(ee)&&Ft(t,r,ee,null,l,le);for(ye in l)le=l[ye],ce=a[ye],!l.hasOwnProperty(ye)||le===ce||le==null&&ce==null||Ft(t,r,ye,le,l,ce)}function zv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function GT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],m=h.transferSize,T=h.initiatorType,C=h.duration;if(m&&C&&zv(T)){for(T=0,C=h.responseEnd,l+=1;l<a.length;l++){var U=a[l],se=U.startTime;if(se>C)break;var he=U.transferSize,ye=U.initiatorType;he&&zv(ye)&&(U=U.responseEnd,T+=he*(U<C?1:(C-se)/(U-se)))}if(--l,r+=8*(m+T)/(h.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var dp=null,pp=null;function bf(t){return t.nodeType===9?t:t.ownerDocument}function Bv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qv(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function mp(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var gp=null;function YT(){var t=window.event;return t&&t.type==="popstate"?t===gp?!1:(gp=t,!0):(gp=null,!1)}var Hv=typeof setTimeout=="function"?setTimeout:void 0,QT=typeof clearTimeout=="function"?clearTimeout:void 0,Fv=typeof Promise=="function"?Promise:void 0,XT=typeof queueMicrotask=="function"?queueMicrotask:typeof Fv<"u"?function(t){return Fv.resolve(null).then(t).catch($T)}:Hv;function $T(t){setTimeout(function(){throw t})}function Xa(t){return t==="head"}function Kv(t,r){var a=r,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),Ll(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Uu(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Uu(a);for(var m=a.firstChild;m;){var T=m.nextSibling,C=m.nodeName;m[Hn]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=T}}else a==="body"&&Uu(t.ownerDocument.body);a=h}while(a);Ll(r)}function Gv(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function yp(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":yp(a),Ps(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function JT(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Hn])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Mi(t.nextSibling),t===null)break}return null}function WT(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Mi(t.nextSibling),t===null))return null;return t}function Yv(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Mi(t.nextSibling),t===null))return null;return t}function vp(t){return t.data==="$?"||t.data==="$~"}function _p(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function ZT(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Mi(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var bp=null;function Qv(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Mi(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function Xv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function $v(t,r,a){switch(r=bf(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Uu(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ps(t)}var ki=new Map,Jv=new Set;function Ef(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ia=be.d;be.d={f:ew,r:tw,D:nw,C:rw,L:iw,m:sw,X:ow,S:aw,M:lw};function ew(){var t=ia.f(),r=hf();return t||r}function tw(t){var r=xt(t);r!==null&&r.tag===5&&r.type==="form"?py(r):ia.r(t)}var kl=typeof document>"u"?null:document;function Wv(t,r,a){var l=kl;if(l&&typeof r=="string"&&r){var h=Rn(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Jv.has(h)||(Jv.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),tr(r,"link",t),an(r),l.head.appendChild(r)))}}function nw(t){ia.D(t),Wv("dns-prefetch",t,null)}function rw(t,r){ia.C(t,r),Wv("preconnect",t,r)}function iw(t,r,a){ia.L(t,r,a);var l=kl;if(l&&t&&r){var h='link[rel="preload"][as="'+Rn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Rn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Rn(a.imageSizes)+'"]')):h+='[href="'+Rn(t)+'"]';var m=h;switch(r){case"style":m=Vl(t);break;case"script":m=Pl(t)}ki.has(m)||(t=I({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),ki.set(m,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(zu(m))||r==="script"&&l.querySelector(Bu(m))||(r=l.createElement("link"),tr(r,"link",t),an(r),l.head.appendChild(r)))}}function sw(t,r){ia.m(t,r);var a=kl;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+Rn(l)+'"][href="'+Rn(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Pl(t)}if(!ki.has(m)&&(t=I({rel:"modulepreload",href:t},r),ki.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Bu(m)))return}l=a.createElement("link"),tr(l,"link",t),an(l),a.head.appendChild(l)}}}function aw(t,r,a){ia.S(t,r,a);var l=kl;if(l&&t){var h=Cn(l).hoistableStyles,m=Vl(t);r=r||"default";var T=h.get(m);if(!T){var C={loading:0,preload:null};if(T=l.querySelector(zu(m)))C.loading=5;else{t=I({rel:"stylesheet",href:t,"data-precedence":r},a),(a=ki.get(m))&&Ep(t,a);var U=T=l.createElement("link");an(U),tr(U,"link",t),U._p=new Promise(function(se,he){U.onload=se,U.onerror=he}),U.addEventListener("load",function(){C.loading|=1}),U.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Tf(T,r,l)}T={type:"stylesheet",instance:T,count:1,state:C},h.set(m,T)}}}function ow(t,r){ia.X(t,r);var a=kl;if(a&&t){var l=Cn(a).hoistableScripts,h=Pl(t),m=l.get(h);m||(m=a.querySelector(Bu(h)),m||(t=I({src:t,async:!0},r),(r=ki.get(h))&&Tp(t,r),m=a.createElement("script"),an(m),tr(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function lw(t,r){ia.M(t,r);var a=kl;if(a&&t){var l=Cn(a).hoistableScripts,h=Pl(t),m=l.get(h);m||(m=a.querySelector(Bu(h)),m||(t=I({src:t,async:!0,type:"module"},r),(r=ki.get(h))&&Tp(t,r),m=a.createElement("script"),an(m),tr(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Zv(t,r,a,l){var h=(h=Je.current)?Ef(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Vl(a.href),a=Cn(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Vl(a.href);var m=Cn(h).hoistableStyles,T=m.get(t);if(T||(h=h.ownerDocument||h,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,T),(m=h.querySelector(zu(t)))&&!m._p&&(T.instance=m,T.state.loading=5),ki.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ki.set(t,a),m||uw(h,t,a,T.state))),r&&l===null)throw Error(s(528,""));return T}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Pl(a),a=Cn(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Vl(t){return'href="'+Rn(t)+'"'}function zu(t){return'link[rel="stylesheet"]['+t+"]"}function e_(t){return I({},t,{"data-precedence":t.precedence,precedence:null})}function uw(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),tr(r,"link",a),an(r),t.head.appendChild(r))}function Pl(t){return'[src="'+Rn(t)+'"]'}function Bu(t){return"script[async]"+t}function t_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Rn(a.href)+'"]');if(l)return r.instance=l,an(l),l;var h=I({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),an(l),tr(l,"style",h),Tf(l,a.precedence,t),r.instance=l;case"stylesheet":h=Vl(a.href);var m=t.querySelector(zu(h));if(m)return r.state.loading|=4,r.instance=m,an(m),m;l=e_(a),(h=ki.get(h))&&Ep(l,h),m=(t.ownerDocument||t).createElement("link"),an(m);var T=m;return T._p=new Promise(function(C,U){T.onload=C,T.onerror=U}),tr(m,"link",l),r.state.loading|=4,Tf(m,a.precedence,t),r.instance=m;case"script":return m=Pl(a.src),(h=t.querySelector(Bu(m)))?(r.instance=h,an(h),h):(l=a,(h=ki.get(m))&&(l=I({},a),Tp(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),an(h),tr(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Tf(l,a.precedence,t));return r.instance}function Tf(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,T=0;T<l.length;T++){var C=l[T];if(C.dataset.precedence===r)m=C;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function Ep(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Tp(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var wf=null;function n_(t,r,a){if(wf===null){var l=new Map,h=wf=new Map;h.set(a,l)}else h=wf,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Hn]||m[jt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var T=m.getAttribute(r)||"";T=t+T;var C=l.get(T);C?C.push(m):l.set(T,[m])}}return l}function r_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function cw(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function i_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function fw(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Vl(l.href),m=r.querySelector(zu(h));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Sf.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=m,an(m);return}m=r.ownerDocument||r,l=e_(l),(h=ki.get(h))&&Ep(l,h),m=m.createElement("link"),an(m);var T=m;T._p=new Promise(function(C,U){T.onload=C,T.onerror=U}),tr(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Sf.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var wp=0;function hw(t,r){return t.stylesheets&&t.count===0&&Cf(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Cf(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&wp===0&&(wp=62500*GT());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Cf(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>wp?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Sf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Af=null;function Cf(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Af=new Map,r.forEach(dw,t),Af=null,Sf.call(t))}function dw(t,r){if(!(r.state.loading&4)){var a=Af.get(t);if(a)var l=a.get(null);else{a=new Map,Af.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var T=h[m];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),l=T)}l&&a.set(null,l)}h=r.instance,T=h.getAttribute("data-precedence"),m=a.get(T)||l,m===l&&a.set(null,h),a.set(T,h),this.count++,l=Sf.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var qu={$$typeof:ke,Provider:null,Consumer:null,_currentValue:Ue,_currentValue2:Ue,_threadCount:0};function pw(t,r,a,l,h,m,T,C,U){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$n(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$n(0),this.hiddenUpdates=$n(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function s_(t,r,a,l,h,m,T,C,U,se,he,ye){return t=new pw(t,r,a,T,U,se,he,ye,C),r=1,m===!0&&(r|=24),m=li(3,null,null,r),t.current=m,m.stateNode=t,r=nd(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:r},ad(m),t}function a_(t){return t?(t=Ur,t):Ur}function o_(t,r,a,l,h,m){h=a_(h),l.context===null?l.context=h:l.pendingContext=h,l=ja(r),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Ua(t,l,r),a!==null&&(Fr(a,t,r),bu(a,t,r))}function l_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Sp(t,r){l_(t,r),(t=t.alternate)&&l_(t,r)}function u_(t){if(t.tag===13||t.tag===31){var r=en(t,67108864);r!==null&&Fr(r,t,67108864),Sp(t,67108864)}}function c_(t){if(t.tag===13||t.tag===31){var r=di();r=ks(r);var a=en(t,r);a!==null&&Fr(a,t,r),Sp(t,r)}}var Rf=!0;function mw(t,r,a,l){var h=oe.T;oe.T=null;var m=be.p;try{be.p=2,Ap(t,r,a,l)}finally{be.p=m,oe.T=h}}function gw(t,r,a,l){var h=oe.T;oe.T=null;var m=be.p;try{be.p=8,Ap(t,r,a,l)}finally{be.p=m,oe.T=h}}function Ap(t,r,a,l){if(Rf){var h=Cp(l);if(h===null)fp(t,r,l,If,a),h_(t,l);else if(vw(h,t,r,a,l))l.stopPropagation();else if(h_(t,l),r&4&&-1<yw.indexOf(t)){for(;h!==null;){var m=xt(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var T=Ar(m.pendingLanes);if(T!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var U=1<<31-Ne(T);C.entanglements[1]|=U,T&=~U}ys(m),(Vt&6)===0&&(cf=qn()+500,Pu(0))}}break;case 31:case 13:C=en(m,2),C!==null&&Fr(C,m,2),hf(),Sp(m,2)}if(m=Cp(l),m===null&&fp(t,r,l,If,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else fp(t,r,l,null,a)}}function Cp(t){return t=_r(t),Rp(t)}var If=null;function Rp(t){if(If=null,t=Ir(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===31){if(t=y(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return If=t,null}function f_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yr()){case Qr:return 2;case Xr:return 8;case gi:case Ds:return 32;case ga:return 268435456;default:return 32}default:return 32}}var Ip=!1,$a=null,Ja=null,Wa=null,Hu=new Map,Fu=new Map,Za=[],yw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function h_(t,r){switch(t){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":Hu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fu.delete(r.pointerId)}}function Ku(t,r,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},r!==null&&(r=xt(r),r!==null&&u_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function vw(t,r,a,l,h){switch(r){case"focusin":return $a=Ku($a,t,r,a,l,h),!0;case"dragenter":return Ja=Ku(Ja,t,r,a,l,h),!0;case"mouseover":return Wa=Ku(Wa,t,r,a,l,h),!0;case"pointerover":var m=h.pointerId;return Hu.set(m,Ku(Hu.get(m)||null,t,r,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,Fu.set(m,Ku(Fu.get(m)||null,t,r,a,l,h)),!0}return!1}function d_(t){var r=Ir(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,or(t.priority,function(){c_(a)});return}}else if(r===31){if(r=y(a),r!==null){t.blockedOn=r,or(t.priority,function(){c_(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xf(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Cp(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Nr=l,a.target.dispatchEvent(l),Nr=null}else return r=xt(a),r!==null&&u_(r),t.blockedOn=a,!1;r.shift()}return!0}function p_(t,r,a){xf(t)&&a.delete(r)}function _w(){Ip=!1,$a!==null&&xf($a)&&($a=null),Ja!==null&&xf(Ja)&&(Ja=null),Wa!==null&&xf(Wa)&&(Wa=null),Hu.forEach(p_),Fu.forEach(p_)}function Of(t,r){t.blockedOn===r&&(t.blockedOn=null,Ip||(Ip=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,_w)))}var Df=null;function m_(t){Df!==t&&(Df=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Df===t&&(Df=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(Rp(l||a)===null)continue;break}var m=xt(a);m!==null&&(t.splice(r,3),r-=3,Cd(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Ll(t){function r(U){return Of(U,t)}$a!==null&&Of($a,t),Ja!==null&&Of(Ja,t),Wa!==null&&Of(Wa,t),Hu.forEach(r),Fu.forEach(r);for(var a=0;a<Za.length;a++){var l=Za[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Za.length&&(a=Za[0],a.blockedOn===null);)d_(a),a.blockedOn===null&&Za.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],T=h[Qt]||null;if(typeof m=="function")T||m_(a);else if(T){var C=null;if(m&&m.hasAttribute("formAction")){if(h=m,T=m[Qt]||null)C=T.formAction;else if(Rp(h)!==null)continue}else C=T.action;typeof C=="function"?a[l+1]=C:(a.splice(l,3),l-=3),m_(a)}}}function g_(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(T){return h=T})},focusReset:"manual",scroll:"manual"})}function r(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),h!==null&&(h(),h=null)}}}function xp(t){this._internalRoot=t}Nf.prototype.render=xp.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=di();o_(a,l,t,r,null,null)},Nf.prototype.unmount=xp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;o_(t.current,2,null,t,null,null),hf(),r[Ln]=null}};function Nf(t){this._internalRoot=t}Nf.prototype.unstable_scheduleHydration=function(t){if(t){var r=Vs();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Za.length&&r!==0&&r<Za[a].priority;a++);Za.splice(a,0,t),a===0&&d_(t)}};var y_=e.version;if(y_!=="19.2.0")throw Error(s(527,y_,"19.2.0"));be.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=b(r),t=t!==null?R(t):null,t=t===null?null:t.stateNode,t};var bw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:oe,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mf.isDisabled&&Mf.supportsFiber)try{ar=Mf.inject(bw),vn=Mf}catch{}}return Yu.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=Sy,m=Ay,T=Cy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError)),r=s_(t,1,!1,null,null,a,l,null,h,m,T,g_),t[Ln]=r.current,cp(t),new xp(r)},Yu.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",m=Sy,T=Ay,C=Cy,U=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.formState!==void 0&&(U=a.formState)),r=s_(t,1,!0,r,a??null,l,h,U,m,T,C,g_),r.context=a_(null),a=r.current,l=di(),l=ks(l),h=ja(l),h.callback=null,Ua(a,h,l),a=l,r.current.lanes=a,Cr(r,a),ys(r),t[Ln]=r.current,cp(t),new Nf(r)},Yu.version="19.2.0",Yu}var R_;function Dw(){if(R_)return Np.exports;R_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Np.exports=Ow(),Np.exports}var Nw=Dw();const Mw=wm(Nw);var Kf={exports:{}},kw=Kf.exports,I_;function Vw(){return I_||(I_=1,(function(i,e){(function(n,s){i.exports=s()})(kw,function(){var n=function(f,p){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,E){g.__proto__=E}||function(g,E){for(var S in E)Object.prototype.hasOwnProperty.call(E,S)&&(g[S]=E[S])})(f,p)},s=function(){return(s=Object.assign||function(f){for(var p,g=1,E=arguments.length;g<E;g++)for(var S in p=arguments[g])Object.prototype.hasOwnProperty.call(p,S)&&(f[S]=p[S]);return f}).apply(this,arguments)};function o(f,p,g){for(var E,S=0,A=p.length;S<A;S++)!E&&S in p||((E=E||Array.prototype.slice.call(p,0,S))[S]=p[S]);return f.concat(E||Array.prototype.slice.call(p))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Tw,d=Object.keys,y=Array.isArray;function _(f,p){return typeof p!="object"||d(p).forEach(function(g){f[g]=p[g]}),f}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var b=Object.getPrototypeOf,R={}.hasOwnProperty;function I(f,p){return R.call(f,p)}function M(f,p){typeof p=="function"&&(p=p(b(f))),(typeof Reflect>"u"?d:Reflect.ownKeys)(p).forEach(function(g){te(f,g,p[g])})}var $=Object.defineProperty;function te(f,p,g,E){$(f,p,_(g&&I(g,"get")&&typeof g.get=="function"?{get:g.get,set:g.set,configurable:!0}:{value:g,configurable:!0,writable:!0},E))}function pe(f){return{from:function(p){return f.prototype=Object.create(p.prototype),te(f.prototype,"constructor",f),{extend:M.bind(null,f.prototype)}}}}var _e=Object.getOwnPropertyDescriptor,je=[].slice;function qe(f,p,g){return je.call(f,p,g)}function ke(f,p){return p(f)}function tt(f){if(!f)throw new Error("Assertion Failed")}function ht(f){u.setImmediate?setImmediate(f):setTimeout(f,0)}function Ge(f,p){if(typeof p=="string"&&I(f,p))return f[p];if(!p)return f;if(typeof p!="string"){for(var g=[],E=0,S=p.length;E<S;++E){var A=Ge(f,p[E]);g.push(A)}return g}var O=p.indexOf(".");if(O!==-1){var P=f[p.substr(0,O)];return P==null?void 0:Ge(P,p.substr(O+1))}}function L(f,p,g){if(f&&p!==void 0&&!("isFrozen"in Object&&Object.isFrozen(f)))if(typeof p!="string"&&"length"in p){tt(typeof g!="string"&&"length"in g);for(var E=0,S=p.length;E<S;++E)L(f,p[E],g[E])}else{var A,O,P=p.indexOf(".");P!==-1?(A=p.substr(0,P),(O=p.substr(P+1))===""?g===void 0?y(f)&&!isNaN(parseInt(A))?f.splice(A,1):delete f[A]:f[A]=g:L(P=!(P=f[A])||!I(f,A)?f[A]={}:P,O,g)):g===void 0?y(f)&&!isNaN(parseInt(p))?f.splice(p,1):delete f[p]:f[p]=g}}function k(f){var p,g={};for(p in f)I(f,p)&&(g[p]=f[p]);return g}var j=[].concat;function Y(f){return j.apply([],f)}var Qr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Y([8,16,32,64].map(function(f){return["Int","Uint","Float"].map(function(p){return p+f+"Array"})}))).filter(function(f){return u[f]}),N=new Set(Qr.map(function(f){return u[f]})),F=null;function V(f){return F=new WeakMap,f=(function p(g){if(!g||typeof g!="object")return g;var E=F.get(g);if(E)return E;if(y(g)){E=[],F.set(g,E);for(var S=0,A=g.length;S<A;++S)E.push(p(g[S]))}else if(N.has(g.constructor))E=g;else{var O,P=b(g);for(O in E=P===Object.prototype?{}:Object.create(P),F.set(g,E),g)I(g,O)&&(E[O]=p(g[O]))}return E})(f),F=null,f}var Dt={}.toString;function Gt(f){return Dt.call(f).slice(8,-1)}var oe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",be=typeof oe=="symbol"?function(f){var p;return f!=null&&(p=f[oe])&&p.apply(f)}:function(){return null};function Ue(f,p){return p=f.indexOf(p),0<=p&&f.splice(p,1),0<=p}var at={};function dt(f){var p,g,E,S;if(arguments.length===1){if(y(f))return f.slice();if(this===at&&typeof f=="string")return[f];if(S=be(f)){for(g=[];!(E=S.next()).done;)g.push(E.value);return g}if(f==null)return[f];if(typeof(p=f.length)!="number")return[f];for(g=new Array(p);p--;)g[p]=f[p];return g}for(p=arguments.length,g=new Array(p);p--;)g[p]=arguments[p];return g}var G=typeof Symbol<"u"?function(f){return f[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Yr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Tr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Yr),me={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function xe(f,p){this.name=f,this.message=p}function Pe(f,p){return f+". Errors: "+Object.keys(p).map(function(g){return p[g].toString()}).filter(function(g,E,S){return S.indexOf(g)===E}).join(`
`)}function Qe(f,p,g,E){this.failures=p,this.failedKeys=E,this.successCount=g,this.message=Pe(f,p)}function Je(f,p){this.name="BulkError",this.failures=Object.keys(p).map(function(g){return p[g]}),this.failuresByPos=p,this.message=Pe(f,this.failures)}pe(xe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),pe(Qe).from(xe),pe(Je).from(xe);var gt=Tr.reduce(function(f,p){return f[p]=p+"Error",f},{}),yn=xe,Me=Tr.reduce(function(f,p){var g=p+"Error";function E(S,A){this.name=g,S?typeof S=="string"?(this.message="".concat(S).concat(A?`
 `+A:""),this.inner=A||null):typeof S=="object"&&(this.message="".concat(S.name," ").concat(S.message),this.inner=S):(this.message=me[p]||g,this.inner=null)}return pe(E).from(yn),f[p]=E,f},{});Me.Syntax=SyntaxError,Me.Type=TypeError,Me.Range=RangeError;var rs=Yr.reduce(function(f,p){return f[p+"Error"]=Me[p],f},{}),Bi=Tr.reduce(function(f,p){return["Syntax","Type","Range"].indexOf(p)===-1&&(f[p+"Error"]=Me[p]),f},{});function Ct(){}function pi(f){return f}function mi(f,p){return f==null||f===pi?p:function(g){return p(f(g))}}function Gr(f,p){return function(){f.apply(this,arguments),p.apply(this,arguments)}}function Os(f,p){return f===Ct?p:function(){var g=f.apply(this,arguments);g!==void 0&&(arguments[0]=g);var E=this.onsuccess,S=this.onerror;this.onsuccess=null,this.onerror=null;var A=p.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?Gr(E,this.onsuccess):E),S&&(this.onerror=this.onerror?Gr(S,this.onerror):S),A!==void 0?A:g}}function To(f,p){return f===Ct?p:function(){f.apply(this,arguments);var g=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,p.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?Gr(g,this.onsuccess):g),E&&(this.onerror=this.onerror?Gr(E,this.onerror):E)}}function wo(f,p){return f===Ct?p:function(g){var E=f.apply(this,arguments);_(g,E);var S=this.onsuccess,A=this.onerror;return this.onsuccess=null,this.onerror=null,g=p.apply(this,arguments),S&&(this.onsuccess=this.onsuccess?Gr(S,this.onsuccess):S),A&&(this.onerror=this.onerror?Gr(A,this.onerror):A),E===void 0?g===void 0?void 0:g:_(E,g)}}function dn(f,p){return f===Ct?p:function(){return p.apply(this,arguments)!==!1&&f.apply(this,arguments)}}function rn(f,p){return f===Ct?p:function(){var g=f.apply(this,arguments);if(g&&typeof g.then=="function"){for(var E=this,S=arguments.length,A=new Array(S);S--;)A[S]=arguments[S];return g.then(function(){return p.apply(E,A)})}return p.apply(this,arguments)}}Bi.ModifyError=Qe,Bi.DexieError=xe,Bi.BulkError=Je;var Pn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ol(f){Pn=f}var is={},qn=100,Qr=typeof Promise>"u"?[]:(function(){var f=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[f,b(f),f];var p=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[p,b(p),f]})(),Yr=Qr[0],Tr=Qr[1],Qr=Qr[2],Tr=Tr&&Tr.then,Xr=Yr&&Yr.constructor,gi=!!Qr,Ds=function(f,p){ss.push([f,p]),Ns&&(queueMicrotask(ll),Ns=!1)},ga=!0,Ns=!0,yi=[],ar=[],vn=pi,_n={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ct,pgp:!1,env:{},finalize:Ct},Ne=_n,ss=[],Sr=0,Ms=[];function Ie(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var p=this._PSD=Ne;if(typeof f!="function"){if(f!==is)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ar(this,this._value))}this._state=null,this._value=null,++p.ref,(function g(E,S){try{S(function(A){if(E._state===null){if(A===E)throw new TypeError("A promise cannot be resolved with itself.");var O=E._lib&&$n();A&&typeof A.then=="function"?g(E,function(P,B){A instanceof Ie?A._then(P,B):A.then(P,B)}):(E._state=!0,E._value=A,$r(E)),O&&Cr()}},Ar.bind(null,E))}catch(A){Ar(E,A)}})(this,f)}var qi={get:function(){var f=Ne,p=or;function g(E,S){var A=this,O=!f.global&&(f!==Ne||p!==or),P=O&&!Ln(),B=new Ie(function(q,J){vr(A,new sn(Ps(E,f,O,P),Ps(S,f,O,P),q,J,f))});return this._consoleTask&&(B._consoleTask=this._consoleTask),B}return g.prototype=is,g},set:function(f){te(this,"then",f&&f.prototype===is?qi:{get:function(){return f},set:qi.set})}};function sn(f,p,g,E,S){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof p=="function"?p:null,this.resolve=g,this.reject=E,this.psd=S}function Ar(f,p){var g,E;ar.push(p),f._state===null&&(g=f._lib&&$n(),p=vn(p),f._state=!1,f._value=p,E=f,yi.some(function(S){return S._value===E._value})||yi.push(E),$r(f),g&&Cr())}function $r(f){var p=f._listeners;f._listeners=[];for(var g=0,E=p.length;g<E;++g)vr(f,p[g]);var S=f._PSD;--S.ref||S.finalize(),Sr===0&&(++Sr,Ds(function(){--Sr==0&&So()},[]))}function vr(f,p){if(f._state!==null){var g=f._state?p.onFulfilled:p.onRejected;if(g===null)return(f._state?p.resolve:p.reject)(f._value);++p.psd.ref,++Sr,Ds(uu,[g,f,p])}else f._listeners.push(p)}function uu(f,p,g){try{var E,S=p._value;!p._state&&ar.length&&(ar=[]),E=Pn&&p._consoleTask?p._consoleTask.run(function(){return f(S)}):f(S),p._state||ar.indexOf(S)!==-1||(function(A){for(var O=yi.length;O;)if(yi[--O]._value===A._value)return yi.splice(O,1)})(p),g.resolve(E)}catch(A){g.reject(A)}finally{--Sr==0&&So(),--g.psd.ref||g.psd.finalize()}}function ll(){Hn(_n,function(){$n()&&Cr()})}function $n(){var f=ga;return Ns=ga=!1,f}function Cr(){var f,p,g;do for(;0<ss.length;)for(f=ss,ss=[],g=f.length,p=0;p<g;++p){var E=f[p];E[0].apply(null,E[1])}while(0<ss.length);Ns=ga=!0}function So(){var f=yi;yi=[],f.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var p=Ms.slice(0),g=p.length;g;)p[--g]()}function vi(f){return new Ie(is,!1,f)}function Pt(f,p){var g=Ne;return function(){var E=$n(),S=Ne;try{return Wr(g,!0),f.apply(this,arguments)}catch(A){p&&p(A)}finally{Wr(S,!1),E&&Cr()}}}M(Ie.prototype,{then:qi,_then:function(f,p){vr(this,new sn(null,null,f,p,Ne))},catch:function(f){if(arguments.length===1)return this.then(null,f);var p=f,g=arguments[1];return typeof p=="function"?this.then(null,function(E){return(E instanceof p?g:vi)(E)}):this.then(null,function(E){return(E&&E.name===p?g:vi)(E)})},finally:function(f){return this.then(function(p){return Ie.resolve(f()).then(function(){return p})},function(p){return Ie.resolve(f()).then(function(){return vi(p)})})},timeout:function(f,p){var g=this;return f<1/0?new Ie(function(E,S){var A=setTimeout(function(){return S(new Me.Timeout(p))},f);g.then(E,S).finally(clearTimeout.bind(null,A))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&te(Ie.prototype,Symbol.toStringTag,"Dexie.Promise"),_n.env=Ao(),M(Ie,{all:function(){var f=dt.apply(null,arguments).map(Hi);return new Ie(function(p,g){f.length===0&&p([]);var E=f.length;f.forEach(function(S,A){return Ie.resolve(S).then(function(O){f[A]=O,--E||p(f)},g)})})},resolve:function(f){return f instanceof Ie?f:f&&typeof f.then=="function"?new Ie(function(p,g){f.then(p,g)}):new Ie(is,!0,f)},reject:vi,race:function(){var f=dt.apply(null,arguments).map(Hi);return new Ie(function(p,g){f.map(function(E){return Ie.resolve(E).then(p,g)})})},PSD:{get:function(){return Ne},set:function(f){return Ne=f}},totalEchoes:{get:function(){return or}},newPSD:jt,usePSD:Hn,scheduler:{get:function(){return Ds},set:function(f){Ds=f}},rejectionMapper:{get:function(){return vn},set:function(f){vn=f}},follow:function(f,p){return new Ie(function(g,E){return jt(function(S,A){var O=Ne;O.unhandleds=[],O.onunhandled=A,O.finalize=Gr(function(){var P,B=this;P=function(){B.unhandleds.length===0?S():A(B.unhandleds[0])},Ms.push(function q(){P(),Ms.splice(Ms.indexOf(q),1)}),++Sr,Ds(function(){--Sr==0&&So()},[])},O.finalize),f()},p,g,E)})}}),Xr&&(Xr.allSettled&&te(Ie,"allSettled",function(){var f=dt.apply(null,arguments).map(Hi);return new Ie(function(p){f.length===0&&p([]);var g=f.length,E=new Array(g);f.forEach(function(S,A){return Ie.resolve(S).then(function(O){return E[A]={status:"fulfilled",value:O}},function(O){return E[A]={status:"rejected",reason:O}}).then(function(){return--g||p(E)})})})}),Xr.any&&typeof AggregateError<"u"&&te(Ie,"any",function(){var f=dt.apply(null,arguments).map(Hi);return new Ie(function(p,g){f.length===0&&g(new AggregateError([]));var E=f.length,S=new Array(E);f.forEach(function(A,O){return Ie.resolve(A).then(function(P){return p(P)},function(P){S[O]=P,--E||g(new AggregateError(S))})})})}),Xr.withResolvers&&(Ie.withResolvers=Xr.withResolvers));var Zt={awaits:0,echoes:0,id:0},ks=0,Rr=[],Vs=0,or=0,Jr=0;function jt(f,p,g,E){var S=Ne,A=Object.create(S);return A.parent=S,A.ref=0,A.global=!1,A.id=++Jr,_n.env,A.env=gi?{Promise:Ie,PromiseProp:{value:Ie,configurable:!0,writable:!0},all:Ie.all,race:Ie.race,allSettled:Ie.allSettled,any:Ie.any,resolve:Ie.resolve,reject:Ie.reject}:{},p&&_(A,p),++S.ref,A.finalize=function(){--this.parent.ref||this.parent.finalize()},E=Hn(A,f,g,E),A.ref===0&&A.finalize(),E}function Qt(){return Zt.id||(Zt.id=++ks),++Zt.awaits,Zt.echoes+=qn,Zt.id}function Ln(){return!!Zt.awaits&&(--Zt.awaits==0&&(Zt.id=0),Zt.echoes=Zt.awaits*qn,!0)}function Hi(f){return Zt.echoes&&f&&f.constructor===Xr?(Qt(),f.then(function(p){return Ln(),p},function(p){return Ln(),xt(p)})):f}function cu(){var f=Rr[Rr.length-1];Rr.pop(),Wr(f,!1)}function Wr(f,p){var g,E=Ne;(p?!Zt.echoes||Vs++&&f===Ne:!Vs||--Vs&&f===Ne)||queueMicrotask(p?(function(S){++or,Zt.echoes&&--Zt.echoes!=0||(Zt.echoes=Zt.awaits=Zt.id=0),Rr.push(Ne),Wr(S,!0)}).bind(null,f):cu),f!==Ne&&(Ne=f,E===_n&&(_n.env=Ao()),gi&&(g=_n.env.Promise,p=f.env,(E.global||f.global)&&(Object.defineProperty(u,"Promise",p.PromiseProp),g.all=p.all,g.race=p.race,g.resolve=p.resolve,g.reject=p.reject,p.allSettled&&(g.allSettled=p.allSettled),p.any&&(g.any=p.any))))}function Ao(){var f=u.Promise;return gi?{Promise:f,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:f.all,race:f.race,allSettled:f.allSettled,any:f.any,resolve:f.resolve,reject:f.reject}:{}}function Hn(f,p,g,E,S){var A=Ne;try{return Wr(f,!0),p(g,E,S)}finally{Wr(A,!1)}}function Ps(f,p,g,E){return typeof f!="function"?f:function(){var S=Ne;g&&Qt(),Wr(p,!0);try{return f.apply(this,arguments)}finally{Wr(S,!1),E&&queueMicrotask(Ln)}}}function Ir(f){Promise===Xr&&Zt.echoes===0?Vs===0?f():enqueueNativeMicroTask(f):setTimeout(f,0)}(""+Tr).indexOf("[native code]")===-1&&(Qt=Ln=Ct);var xt=Ie.reject,bn="",Cn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",an="String expected.",_i=[],as="__dbnames",xr="readonly",Or="readwrite";function Zr(f,p){return f?p?function(){return f.apply(this,arguments)&&p.apply(this,arguments)}:f:p}var ya={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function os(f){return typeof f!="string"||/\./.test(f)?function(p){return p}:function(p){return p[f]===void 0&&f in p&&delete(p=V(p))[f],p}}function Co(){throw Me.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ot(f,p){try{var g=lr(f),E=lr(p);if(g!==E)return g==="Array"?1:E==="Array"?-1:g==="binary"?1:E==="binary"?-1:g==="string"?1:E==="string"?-1:g==="Date"?1:E!=="Date"?NaN:-1;switch(g){case"number":case"Date":case"string":return p<f?1:f<p?-1:0;case"binary":return(function(S,A){for(var O=S.length,P=A.length,B=O<P?O:P,q=0;q<B;++q)if(S[q]!==A[q])return S[q]<A[q]?-1:1;return O===P?0:O<P?-1:1})(on(f),on(p));case"Array":return(function(S,A){for(var O=S.length,P=A.length,B=O<P?O:P,q=0;q<B;++q){var J=ot(S[q],A[q]);if(J!==0)return J}return O===P?0:O<P?-1:1})(f,p)}}catch{}return NaN}function lr(f){var p=typeof f;return p!="object"?p:ArrayBuffer.isView(f)?"binary":(f=Gt(f),f==="ArrayBuffer"?"binary":f)}function on(f){return f instanceof Uint8Array?f:ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(f)}function ln(f,p,g){var E=f.schema.yProps;return E?(p&&0<g.numFailures&&(p=p.filter(function(S,A){return!g.failures[A]})),Promise.all(E.map(function(S){return S=S.updatesTable,p?f.db.table(S).where("k").anyOf(p).delete():f.db.table(S).clear()})).then(function(){return g})):g}var Dr=(va.prototype.execute=function(f){var p=this["@@propmod"];if(p.add!==void 0){var g=p.add;if(y(g))return o(o([],y(f)?f:[],!0),g).sort();if(typeof g=="number")return(Number(f)||0)+g;if(typeof g=="bigint")try{return BigInt(f)+g}catch{return BigInt(0)+g}throw new TypeError("Invalid term ".concat(g))}if(p.remove!==void 0){var E=p.remove;if(y(E))return y(f)?f.filter(function(S){return!E.includes(S)}).sort():[];if(typeof E=="number")return Number(f)-E;if(typeof E=="bigint")try{return BigInt(f)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return g=(g=p.replacePrefix)===null||g===void 0?void 0:g[0],g&&typeof f=="string"&&f.startsWith(g)?p.replacePrefix[1]+f.substring(g.length):f},va);function va(f){this["@@propmod"]=f}function Nt(f,p){for(var g=d(p),E=g.length,S=!1,A=0;A<E;++A){var O=g[A],P=p[O],B=Ge(f,O);P instanceof Dr?(L(f,O,P.execute(B)),S=!0):B!==P&&(L(f,O,P),S=!0)}return S}var ls=(vt.prototype._trans=function(f,p,g){var E=this._tx||Ne.trans,S=this.name,A=Pn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(f==="readonly"?"read":"write"," ").concat(this.name));function O(q,J,z){if(!z.schema[S])throw new Me.NotFound("Table "+S+" not part of transaction");return p(z.idbtrans,z)}var P=$n();try{var B=E&&E.db._novip===this.db._novip?E===Ne.trans?E._promise(f,O,g):jt(function(){return E._promise(f,O,g)},{trans:E,transless:Ne.transless||Ne}):(function q(J,z,Z,H){if(J.idbdb&&(J._state.openComplete||Ne.letThrough||J._vip)){var Q=J._createTransaction(z,Z,J._dbSchema);try{Q.create(),J._state.PR1398_maxLoop=3}catch(X){return X.name===gt.InvalidState&&J.isOpen()&&0<--J._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),J.close({disableAutoOpen:!1}),J.open().then(function(){return q(J,z,Z,H)})):xt(X)}return Q._promise(z,function(X,W){return jt(function(){return Ne.trans=Q,H(X,W,Q)})}).then(function(X){if(z==="readwrite")try{Q.idbtrans.commit()}catch{}return z==="readonly"?X:Q._completion.then(function(){return X})})}if(J._state.openComplete)return xt(new Me.DatabaseClosed(J._state.dbOpenError));if(!J._state.isBeingOpened){if(!J._state.autoOpen)return xt(new Me.DatabaseClosed);J.open().catch(Ct)}return J._state.dbReadyPromise.then(function(){return q(J,z,Z,H)})})(this.db,f,[this.name],O);return A&&(B._consoleTask=A,B=B.catch(function(q){return console.trace(q),xt(q)})),B}finally{P&&Cr()}},vt.prototype.get=function(f,p){var g=this;return f&&f.constructor===Object?this.where(f).first(p):f==null?xt(new Me.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return g.core.get({trans:E,key:f}).then(function(S){return g.hook.reading.fire(S)})}).then(p)},vt.prototype.where=function(f){if(typeof f=="string")return new this.db.WhereClause(this,f);if(y(f))return new this.db.WhereClause(this,"[".concat(f.join("+"),"]"));var p=d(f);if(p.length===1)return this.where(p[0]).equals(f[p[0]]);var g=this.schema.indexes.concat(this.schema.primKey).filter(function(P){if(P.compound&&p.every(function(q){return 0<=P.keyPath.indexOf(q)})){for(var B=0;B<p.length;++B)if(p.indexOf(P.keyPath[B])===-1)return!1;return!0}return!1}).sort(function(P,B){return P.keyPath.length-B.keyPath.length})[0];if(g&&this.db._maxKey!==bn){var A=g.keyPath.slice(0,p.length);return this.where(A).equals(A.map(function(B){return f[B]}))}!g&&Pn&&console.warn("The query ".concat(JSON.stringify(f)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(p.join("+"),"]"));var E=this.schema.idxByName;function S(P,B){return ot(P,B)===0}var O=p.reduce(function(z,B){var q=z[0],J=z[1],z=E[B],Z=f[B];return[q||z,q||!z?Zr(J,z&&z.multi?function(H){return H=Ge(H,B),y(H)&&H.some(function(Q){return S(Z,Q)})}:function(H){return S(Z,Ge(H,B))}):J]},[null,null]),A=O[0],O=O[1];return A?this.where(A.name).equals(f[A.keyPath]).filter(O):g?this.filter(O):this.where(p).equals("")},vt.prototype.filter=function(f){return this.toCollection().and(f)},vt.prototype.count=function(f){return this.toCollection().count(f)},vt.prototype.offset=function(f){return this.toCollection().offset(f)},vt.prototype.limit=function(f){return this.toCollection().limit(f)},vt.prototype.each=function(f){return this.toCollection().each(f)},vt.prototype.toArray=function(f){return this.toCollection().toArray(f)},vt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},vt.prototype.orderBy=function(f){return new this.db.Collection(new this.db.WhereClause(this,y(f)?"[".concat(f.join("+"),"]"):f))},vt.prototype.reverse=function(){return this.toCollection().reverse()},vt.prototype.mapToClass=function(f){var p,g=this.db,E=this.name;function S(){return p!==null&&p.apply(this,arguments)||this}(this.schema.mappedClass=f).prototype instanceof Co&&((function(B,q){if(typeof q!="function"&&q!==null)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function J(){this.constructor=B}n(B,q),B.prototype=q===null?Object.create(q):(J.prototype=q.prototype,new J)})(S,p=f),Object.defineProperty(S.prototype,"db",{get:function(){return g},enumerable:!1,configurable:!0}),S.prototype.table=function(){return E},f=S);for(var A=new Set,O=f.prototype;O;O=b(O))Object.getOwnPropertyNames(O).forEach(function(B){return A.add(B)});function P(B){if(!B)return B;var q,J=Object.create(f.prototype);for(q in B)if(!A.has(q))try{J[q]=B[q]}catch{}return J}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=P,this.hook("reading",P),f},vt.prototype.defineClass=function(){return this.mapToClass(function(f){_(this,f)})},vt.prototype.add=function(f,p){var g=this,E=this.schema.primKey,S=E.auto,A=E.keyPath,O=f;return A&&S&&(O=os(A)(f)),this._trans("readwrite",function(P){return g.core.mutate({trans:P,type:"add",keys:p!=null?[p]:null,values:[O]})}).then(function(P){return P.numFailures?Ie.reject(P.failures[0]):P.lastResult}).then(function(P){if(A)try{L(f,A,P)}catch{}return P})},vt.prototype.upsert=function(f,p){var g=this,E=this.schema.primKey.keyPath;return this._trans("readwrite",function(S){return g.core.get({trans:S,key:f}).then(function(A){var O=A??{};return Nt(O,p),E&&L(O,E,f),g.core.mutate({trans:S,type:"put",values:[O],keys:[f],upsert:!0,updates:{keys:[f],changeSpecs:[p]}}).then(function(P){return P.numFailures?Ie.reject(P.failures[0]):!!A})})})},vt.prototype.update=function(f,p){return typeof f!="object"||y(f)?this.where(":id").equals(f).modify(p):(f=Ge(f,this.schema.primKey.keyPath),f===void 0?xt(new Me.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(f).modify(p))},vt.prototype.put=function(f,p){var g=this,E=this.schema.primKey,S=E.auto,A=E.keyPath,O=f;return A&&S&&(O=os(A)(f)),this._trans("readwrite",function(P){return g.core.mutate({trans:P,type:"put",values:[O],keys:p!=null?[p]:null})}).then(function(P){return P.numFailures?Ie.reject(P.failures[0]):P.lastResult}).then(function(P){if(A)try{L(f,A,P)}catch{}return P})},vt.prototype.delete=function(f){var p=this;return this._trans("readwrite",function(g){return p.core.mutate({trans:g,type:"delete",keys:[f]}).then(function(E){return ln(p,[f],E)}).then(function(E){return E.numFailures?Ie.reject(E.failures[0]):void 0})})},vt.prototype.clear=function(){var f=this;return this._trans("readwrite",function(p){return f.core.mutate({trans:p,type:"deleteRange",range:ya}).then(function(g){return ln(f,null,g)})}).then(function(p){return p.numFailures?Ie.reject(p.failures[0]):void 0})},vt.prototype.bulkGet=function(f){var p=this;return this._trans("readonly",function(g){return p.core.getMany({keys:f,trans:g}).then(function(E){return E.map(function(S){return p.hook.reading.fire(S)})})})},vt.prototype.bulkAdd=function(f,p,g){var E=this,S=Array.isArray(p)?p:void 0,A=(g=g||(S?void 0:p))?g.allKeys:void 0;return this._trans("readwrite",function(O){var q=E.schema.primKey,P=q.auto,q=q.keyPath;if(q&&S)throw new Me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(S&&S.length!==f.length)throw new Me.InvalidArgument("Arguments objects and keys must have the same length");var B=f.length,q=q&&P?f.map(os(q)):f;return E.core.mutate({trans:O,type:"add",keys:S,values:q,wantResults:A}).then(function(Q){var z=Q.numFailures,Z=Q.results,H=Q.lastResult,Q=Q.failures;if(z===0)return A?Z:H;throw new Je("".concat(E.name,".bulkAdd(): ").concat(z," of ").concat(B," operations failed"),Q)})})},vt.prototype.bulkPut=function(f,p,g){var E=this,S=Array.isArray(p)?p:void 0,A=(g=g||(S?void 0:p))?g.allKeys:void 0;return this._trans("readwrite",function(O){var q=E.schema.primKey,P=q.auto,q=q.keyPath;if(q&&S)throw new Me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(S&&S.length!==f.length)throw new Me.InvalidArgument("Arguments objects and keys must have the same length");var B=f.length,q=q&&P?f.map(os(q)):f;return E.core.mutate({trans:O,type:"put",keys:S,values:q,wantResults:A}).then(function(Q){var z=Q.numFailures,Z=Q.results,H=Q.lastResult,Q=Q.failures;if(z===0)return A?Z:H;throw new Je("".concat(E.name,".bulkPut(): ").concat(z," of ").concat(B," operations failed"),Q)})})},vt.prototype.bulkUpdate=function(f){var p=this,g=this.core,E=f.map(function(O){return O.key}),S=f.map(function(O){return O.changes}),A=[];return this._trans("readwrite",function(O){return g.getMany({trans:O,keys:E,cache:"clone"}).then(function(P){var B=[],q=[];f.forEach(function(z,Z){var H=z.key,Q=z.changes,X=P[Z];if(X){for(var W=0,re=Object.keys(Q);W<re.length;W++){var ae=re[W],fe=Q[ae];if(ae===p.schema.primKey.keyPath){if(ot(fe,H)!==0)throw new Me.Constraint("Cannot update primary key in bulkUpdate()")}else L(X,ae,fe)}A.push(Z),B.push(H),q.push(X)}});var J=B.length;return g.mutate({trans:O,type:"put",keys:B,values:q,updates:{keys:E,changeSpecs:S}}).then(function(z){var Z=z.numFailures,H=z.failures;if(Z===0)return J;for(var Q=0,X=Object.keys(H);Q<X.length;Q++){var W,re=X[Q],ae=A[Number(re)];ae!=null&&(W=H[re],delete H[re],H[ae]=W)}throw new Je("".concat(p.name,".bulkUpdate(): ").concat(Z," of ").concat(J," operations failed"),H)})})})},vt.prototype.bulkDelete=function(f){var p=this,g=f.length;return this._trans("readwrite",function(E){return p.core.mutate({trans:E,type:"delete",keys:f}).then(function(S){return ln(p,f,S)})}).then(function(O){var S=O.numFailures,A=O.lastResult,O=O.failures;if(S===0)return A;throw new Je("".concat(p.name,".bulkDelete(): ").concat(S," of ").concat(g," operations failed"),O)})},vt);function vt(){}function ei(f){function p(O,P){if(P){for(var B=arguments.length,q=new Array(B-1);--B;)q[B-1]=arguments[B];return g[O].subscribe.apply(null,q),f}if(typeof O=="string")return g[O]}var g={};p.addEventType=A;for(var E=1,S=arguments.length;E<S;++E)A(arguments[E]);return p;function A(O,P,B){if(typeof O!="object"){var q;P=P||dn;var J={subscribers:[],fire:B=B||Ct,subscribe:function(z){J.subscribers.indexOf(z)===-1&&(J.subscribers.push(z),J.fire=P(J.fire,z))},unsubscribe:function(z){J.subscribers=J.subscribers.filter(function(Z){return Z!==z}),J.fire=J.subscribers.reduce(P,B)}};return g[O]=p[O]=J}d(q=O).forEach(function(z){var Z=q[z];if(y(Z))A(z,q[z][0],q[z][1]);else{if(Z!=="asap")throw new Me.InvalidArgument("Invalid event config");var H=A(z,pi,function(){for(var Q=arguments.length,X=new Array(Q);Q--;)X[Q]=arguments[Q];H.subscribers.forEach(function(W){ht(function(){W.apply(null,X)})})})}})}}function Rn(f,p){return pe(p).from({prototype:f}),p}function ti(f,p){return!(f.filter||f.algorithm||f.or)&&(p?f.justLimit:!f.replayFilter)}function _a(f,p){f.filter=Zr(f.filter,p)}function Ls(f,p,g){var E=f.replayFilter;f.replayFilter=E?function(){return Zr(E(),p())}:p,f.justLimit=g&&!E}function ni(f,p){if(f.isPrimKey)return p.primaryKey;var g=p.getIndexByKeyPath(f.index);if(!g)throw new Me.Schema("KeyPath "+f.index+" on object store "+p.name+" is not indexed");return g}function Ro(f,p,g){var E=ni(f,p.schema);return p.openCursor({trans:g,values:!f.keysOnly,reverse:f.dir==="prev",unique:!!f.unique,query:{index:E,range:f.range}})}function ri(f,p,g,E){var S=f.replayFilter?Zr(f.filter,f.replayFilter()):f.filter;if(f.or){var A={},O=function(P,B,q){var J,z;S&&!S(B,q,function(Z){return B.stop(Z)},function(Z){return B.fail(Z)})||((z=""+(J=B.primaryKey))=="[object ArrayBuffer]"&&(z=""+new Uint8Array(J)),I(A,z)||(A[z]=!0,p(P,B,q)))};return Promise.all([f.or._iterate(O,g),Jn(Ro(f,E,g),f.algorithm,O,!f.keysOnly&&f.valueMapper)])}return Jn(Ro(f,E,g),Zr(f.algorithm,S),p,!f.keysOnly&&f.valueMapper)}function Jn(f,p,g,E){var S=Pt(E?function(A,O,P){return g(E(A),O,P)}:g);return f.then(function(A){if(A)return A.start(function(){var O=function(){return A.continue()};p&&!p(A,function(P){return O=P},function(P){A.stop(P),O=Ct},function(P){A.fail(P),O=Ct})||S(A.value,A,function(P){return O=P}),O()})})}var ul=(yt.prototype._read=function(f,p){var g=this._ctx;return g.error?g.table._trans(null,xt.bind(null,g.error)):g.table._trans("readonly",f).then(p)},yt.prototype._write=function(f){var p=this._ctx;return p.error?p.table._trans(null,xt.bind(null,p.error)):p.table._trans("readwrite",f,"locked")},yt.prototype._addAlgorithm=function(f){var p=this._ctx;p.algorithm=Zr(p.algorithm,f)},yt.prototype._iterate=function(f,p){return ri(this._ctx,f,p,this._ctx.table.core)},yt.prototype.clone=function(f){var p=Object.create(this.constructor.prototype),g=Object.create(this._ctx);return f&&_(g,f),p._ctx=g,p},yt.prototype.raw=function(){return this._ctx.valueMapper=null,this},yt.prototype.each=function(f){var p=this._ctx;return this._read(function(g){return ri(p,f,g,p.table.core)})},yt.prototype.count=function(f){var p=this;return this._read(function(g){var E=p._ctx,S=E.table.core;if(ti(E,!0))return S.count({trans:g,query:{index:ni(E,S.schema),range:E.range}}).then(function(O){return Math.min(O,E.limit)});var A=0;return ri(E,function(){return++A,!1},g,S).then(function(){return A})}).then(f)},yt.prototype.sortBy=function(f,p){var g=f.split(".").reverse(),E=g[0],S=g.length-1;function A(B,q){return q?A(B[g[q]],q-1):B[E]}var O=this._ctx.dir==="next"?1:-1;function P(B,q){return ot(A(B,S),A(q,S))*O}return this.toArray(function(B){return B.sort(P)}).then(p)},yt.prototype.toArray=function(f){var p=this;return this._read(function(g){var E=p._ctx;if(E.dir==="next"&&ti(E,!0)&&0<E.limit){var S=E.valueMapper,A=ni(E,E.table.core.schema);return E.table.core.query({trans:g,limit:E.limit,values:!0,query:{index:A,range:E.range}}).then(function(P){return P=P.result,S?P.map(S):P})}var O=[];return ri(E,function(P){return O.push(P)},g,E.table.core).then(function(){return O})},f)},yt.prototype.offset=function(f){var p=this._ctx;return f<=0||(p.offset+=f,ti(p)?Ls(p,function(){var g=f;return function(E,S){return g===0||(g===1?--g:S(function(){E.advance(g),g=0}),!1)}}):Ls(p,function(){var g=f;return function(){return--g<0}})),this},yt.prototype.limit=function(f){return this._ctx.limit=Math.min(this._ctx.limit,f),Ls(this._ctx,function(){var p=f;return function(g,E,S){return--p<=0&&E(S),0<=p}},!0),this},yt.prototype.until=function(f,p){return _a(this._ctx,function(g,E,S){return!f(g.value)||(E(S),p)}),this},yt.prototype.first=function(f){return this.limit(1).toArray(function(p){return p[0]}).then(f)},yt.prototype.last=function(f){return this.reverse().first(f)},yt.prototype.filter=function(f){var p;return _a(this._ctx,function(g){return f(g.value)}),(p=this._ctx).isMatch=Zr(p.isMatch,f),this},yt.prototype.and=function(f){return this.filter(f)},yt.prototype.or=function(f){return new this.db.WhereClause(this._ctx.table,f,this)},yt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},yt.prototype.desc=function(){return this.reverse()},yt.prototype.eachKey=function(f){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(g,E){f(E.key,E)})},yt.prototype.eachUniqueKey=function(f){return this._ctx.unique="unique",this.eachKey(f)},yt.prototype.eachPrimaryKey=function(f){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(g,E){f(E.primaryKey,E)})},yt.prototype.keys=function(f){var p=this._ctx;p.keysOnly=!p.isMatch;var g=[];return this.each(function(E,S){g.push(S.key)}).then(function(){return g}).then(f)},yt.prototype.primaryKeys=function(f){var p=this._ctx;if(p.dir==="next"&&ti(p,!0)&&0<p.limit)return this._read(function(E){var S=ni(p,p.table.core.schema);return p.table.core.query({trans:E,values:!1,limit:p.limit,query:{index:S,range:p.range}})}).then(function(E){return E.result}).then(f);p.keysOnly=!p.isMatch;var g=[];return this.each(function(E,S){g.push(S.primaryKey)}).then(function(){return g}).then(f)},yt.prototype.uniqueKeys=function(f){return this._ctx.unique="unique",this.keys(f)},yt.prototype.firstKey=function(f){return this.limit(1).keys(function(p){return p[0]}).then(f)},yt.prototype.lastKey=function(f){return this.reverse().firstKey(f)},yt.prototype.distinct=function(){var f=this._ctx,f=f.index&&f.table.schema.idxByName[f.index];if(!f||!f.multi)return this;var p={};return _a(this._ctx,function(S){var E=S.primaryKey.toString(),S=I(p,E);return p[E]=!0,!S}),this},yt.prototype.modify=function(f){var p=this,g=this._ctx;return this._write(function(E){var S=typeof f=="function"?f:function(X){return Nt(X,f)},A=g.table.core,q=A.schema.primaryKey,O=q.outbound,P=q.extractKey,B=200,q=p.db._options.modifyChunkSize;q&&(B=typeof q=="object"?q[A.name]||q["*"]||200:q);function J(X,ae){var re=ae.failures,ae=ae.numFailures;Z+=X-ae;for(var fe=0,ge=d(re);fe<ge.length;fe++){var Ae=ge[fe];z.push(re[Ae])}}var z=[],Z=0,H=[],Q=f===ba;return p.clone().primaryKeys().then(function(X){function W(ae){var fe=Math.min(B,X.length-ae),ge=X.slice(ae,ae+fe);return(Q?Promise.resolve([]):A.getMany({trans:E,keys:ge,cache:"immutable"})).then(function(Ae){var De=[],we=[],Re=O?[]:null,Oe=Q?ge:[];if(!Q)for(var Se=0;Se<fe;++Se){var Ve=Ae[Se],Fe={value:V(Ve),primKey:X[ae+Se]};S.call(Fe,Fe.value,Fe)!==!1&&(Fe.value==null?Oe.push(X[ae+Se]):O||ot(P(Ve),P(Fe.value))===0?(we.push(Fe.value),O&&Re.push(X[ae+Se])):(Oe.push(X[ae+Se]),De.push(Fe.value)))}return Promise.resolve(0<De.length&&A.mutate({trans:E,type:"add",values:De}).then(function(Ze){for(var lt in Ze.failures)Oe.splice(parseInt(lt),1);J(De.length,Ze)})).then(function(){return(0<we.length||re&&typeof f=="object")&&A.mutate({trans:E,type:"put",keys:Re,values:we,criteria:re,changeSpec:typeof f!="function"&&f,isAdditionalChunk:0<ae}).then(function(Ze){return J(we.length,Ze)})}).then(function(){return(0<Oe.length||re&&Q)&&A.mutate({trans:E,type:"delete",keys:Oe,criteria:re,isAdditionalChunk:0<ae}).then(function(Ze){return ln(g.table,Oe,Ze)}).then(function(Ze){return J(Oe.length,Ze)})}).then(function(){return X.length>ae+fe&&W(ae+B)})})}var re=ti(g)&&g.limit===1/0&&(typeof f!="function"||Q)&&{index:g.index,range:g.range};return W(0).then(function(){if(0<z.length)throw new Qe("Error modifying one or more objects",z,Z,H);return X.length})})})},yt.prototype.delete=function(){var f=this._ctx,p=f.range;return!ti(f)||f.table.schema.yProps||!f.isPrimKey&&p.type!==3?this.modify(ba):this._write(function(g){var E=f.table.core.schema.primaryKey,S=p;return f.table.core.count({trans:g,query:{index:E,range:S}}).then(function(A){return f.table.core.mutate({trans:g,type:"deleteRange",range:S}).then(function(B){var P=B.failures,B=B.numFailures;if(B)throw new Qe("Could not delete some values",Object.keys(P).map(function(q){return P[q]}),A-B);return A-B})})})},yt);function yt(){}var ba=function(f,p){return p.value=null};function Ea(f,p){return f<p?-1:f===p?0:1}function cl(f,p){return p<f?-1:f===p?0:1}function pn(f,p,g){return f=f instanceof Fi?new f.Collection(f):f,f._ctx.error=new(g||TypeError)(p),f}function ii(f){return new f.Collection(f,function(){return _r("")}).limit(0)}function ur(f,p,g,E){var S,A,O,P,B,q,J,z=g.length;if(!g.every(function(Q){return typeof Q=="string"}))return pn(f,an);function Z(Q){S=Q==="next"?function(W){return W.toUpperCase()}:function(W){return W.toLowerCase()},A=Q==="next"?function(W){return W.toLowerCase()}:function(W){return W.toUpperCase()},O=Q==="next"?Ea:cl;var X=g.map(function(W){return{lower:A(W),upper:S(W)}}).sort(function(W,re){return O(W.lower,re.lower)});P=X.map(function(W){return W.upper}),B=X.map(function(W){return W.lower}),J=(q=Q)==="next"?"":E}Z("next"),f=new f.Collection(f,function(){return Nr(P[0],B[z-1]+E)}),f._ondirectionchange=function(Q){Z(Q)};var H=0;return f._addAlgorithm(function(Q,X,W){var re=Q.key;if(typeof re!="string")return!1;var ae=A(re);if(p(ae,B,H))return!0;for(var fe=null,ge=H;ge<z;++ge){var Ae=(function(De,we,Re,Oe,Se,Ve){for(var Fe=Math.min(De.length,Oe.length),Ze=-1,lt=0;lt<Fe;++lt){var Gn=we[lt];if(Gn!==Oe[lt])return Se(De[lt],Re[lt])<0?De.substr(0,lt)+Re[lt]+Re.substr(lt+1):Se(De[lt],Oe[lt])<0?De.substr(0,lt)+Oe[lt]+Re.substr(lt+1):0<=Ze?De.substr(0,Ze)+we[Ze]+Re.substr(Ze+1):null;Se(De[lt],Gn)<0&&(Ze=lt)}return Fe<Oe.length&&Ve==="next"?De+Re.substr(De.length):Fe<De.length&&Ve==="prev"?De.substr(0,Re.length):Ze<0?null:De.substr(0,Ze)+Oe[Ze]+Re.substr(Ze+1)})(re,ae,P[ge],B[ge],O,q);Ae===null&&fe===null?H=ge+1:(fe===null||0<O(fe,Ae))&&(fe=Ae)}return X(fe!==null?function(){Q.continue(fe+J)}:W),!1}),f}function Nr(f,p,g,E){return{type:2,lower:f,upper:p,lowerOpen:g,upperOpen:E}}function _r(f){return{type:1,lower:f,upper:f}}var Fi=(Object.defineProperty(Ut.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ut.prototype.between=function(f,p,g,E){g=g!==!1,E=E===!0;try{return 0<this._cmp(f,p)||this._cmp(f,p)===0&&(g||E)&&(!g||!E)?ii(this):new this.Collection(this,function(){return Nr(f,p,!g,!E)})}catch{return pn(this,Cn)}},Ut.prototype.equals=function(f){return f==null?pn(this,Cn):new this.Collection(this,function(){return _r(f)})},Ut.prototype.above=function(f){return f==null?pn(this,Cn):new this.Collection(this,function(){return Nr(f,void 0,!0)})},Ut.prototype.aboveOrEqual=function(f){return f==null?pn(this,Cn):new this.Collection(this,function(){return Nr(f,void 0,!1)})},Ut.prototype.below=function(f){return f==null?pn(this,Cn):new this.Collection(this,function(){return Nr(void 0,f,!1,!0)})},Ut.prototype.belowOrEqual=function(f){return f==null?pn(this,Cn):new this.Collection(this,function(){return Nr(void 0,f)})},Ut.prototype.startsWith=function(f){return typeof f!="string"?pn(this,an):this.between(f,f+bn,!0,!0)},Ut.prototype.startsWithIgnoreCase=function(f){return f===""?this.startsWith(f):ur(this,function(p,g){return p.indexOf(g[0])===0},[f],bn)},Ut.prototype.equalsIgnoreCase=function(f){return ur(this,function(p,g){return p===g[0]},[f],"")},Ut.prototype.anyOfIgnoreCase=function(){var f=dt.apply(at,arguments);return f.length===0?ii(this):ur(this,function(p,g){return g.indexOf(p)!==-1},f,"")},Ut.prototype.startsWithAnyOfIgnoreCase=function(){var f=dt.apply(at,arguments);return f.length===0?ii(this):ur(this,function(p,g){return g.some(function(E){return p.indexOf(E)===0})},f,bn)},Ut.prototype.anyOf=function(){var f=this,p=dt.apply(at,arguments),g=this._cmp;try{p.sort(g)}catch{return pn(this,Cn)}if(p.length===0)return ii(this);var E=new this.Collection(this,function(){return Nr(p[0],p[p.length-1])});E._ondirectionchange=function(A){g=A==="next"?f._ascending:f._descending,p.sort(g)};var S=0;return E._addAlgorithm(function(A,O,P){for(var B=A.key;0<g(B,p[S]);)if(++S===p.length)return O(P),!1;return g(B,p[S])===0||(O(function(){A.continue(p[S])}),!1)}),E},Ut.prototype.notEqual=function(f){return this.inAnyRange([[-1/0,f],[f,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ut.prototype.noneOf=function(){var f=dt.apply(at,arguments);if(f.length===0)return new this.Collection(this);try{f.sort(this._ascending)}catch{return pn(this,Cn)}var p=f.reduce(function(g,E){return g?g.concat([[g[g.length-1][1],E]]):[[-1/0,E]]},null);return p.push([f[f.length-1],this.db._maxKey]),this.inAnyRange(p,{includeLowers:!1,includeUppers:!1})},Ut.prototype.inAnyRange=function(re,p){var g=this,E=this._cmp,S=this._ascending,A=this._descending,O=this._min,P=this._max;if(re.length===0)return ii(this);if(!re.every(function(ae){return ae[0]!==void 0&&ae[1]!==void 0&&S(ae[0],ae[1])<=0}))return pn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Me.InvalidArgument);var B=!p||p.includeLowers!==!1,q=p&&p.includeUppers===!0,J,z=S;function Z(ae,fe){return z(ae[0],fe[0])}try{(J=re.reduce(function(ae,fe){for(var ge=0,Ae=ae.length;ge<Ae;++ge){var De=ae[ge];if(E(fe[0],De[1])<0&&0<E(fe[1],De[0])){De[0]=O(De[0],fe[0]),De[1]=P(De[1],fe[1]);break}}return ge===Ae&&ae.push(fe),ae},[])).sort(Z)}catch{return pn(this,Cn)}var H=0,Q=q?function(ae){return 0<S(ae,J[H][1])}:function(ae){return 0<=S(ae,J[H][1])},X=B?function(ae){return 0<A(ae,J[H][0])}:function(ae){return 0<=A(ae,J[H][0])},W=Q,re=new this.Collection(this,function(){return Nr(J[0][0],J[J.length-1][1],!B,!q)});return re._ondirectionchange=function(ae){z=ae==="next"?(W=Q,S):(W=X,A),J.sort(Z)},re._addAlgorithm(function(ae,fe,ge){for(var Ae,De=ae.key;W(De);)if(++H===J.length)return fe(ge),!1;return!Q(Ae=De)&&!X(Ae)||(g._cmp(De,J[H][1])===0||g._cmp(De,J[H][0])===0||fe(function(){z===S?ae.continue(J[H][0]):ae.continue(J[H][1])}),!1)}),re},Ut.prototype.startsWithAnyOf=function(){var f=dt.apply(at,arguments);return f.every(function(p){return typeof p=="string"})?f.length===0?ii(this):this.inAnyRange(f.map(function(p){return[p,p+bn]})):pn(this,"startsWithAnyOf() only works with strings")},Ut);function Ut(){}function Fn(f){return Pt(function(p){return bi(p),f(p.target.error),!1})}function bi(f){f.stopPropagation&&f.stopPropagation(),f.preventDefault&&f.preventDefault()}var Mr="storagemutated",br="x-storagemutated-1",En=ei(null,Mr),js=(pt.prototype._lock=function(){return tt(!Ne.global),++this._reculock,this._reculock!==1||Ne.global||(Ne.lockOwnerFor=this),this},pt.prototype._unlock=function(){if(tt(!Ne.global),--this._reculock==0)for(Ne.global||(Ne.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var f=this._blockedFuncs.shift();try{Hn(f[1],f[0])}catch{}}return this},pt.prototype._locked=function(){return this._reculock&&Ne.lockOwnerFor!==this},pt.prototype.create=function(f){var p=this;if(!this.mode)return this;var g=this.db.idbdb,E=this.db._state.dbOpenError;if(tt(!this.idbtrans),!f&&!g)switch(E&&E.name){case"DatabaseClosedError":throw new Me.DatabaseClosed(E);case"MissingAPIError":throw new Me.MissingAPI(E.message,E);default:throw new Me.OpenFailed(E)}if(!this.active)throw new Me.TransactionInactive;return tt(this._completion._state===null),(f=this.idbtrans=f||(this.db.core||g).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Pt(function(S){bi(S),p._reject(f.error)}),f.onabort=Pt(function(S){bi(S),p.active&&p._reject(new Me.Abort(f.error)),p.active=!1,p.on("abort").fire(S)}),f.oncomplete=Pt(function(){p.active=!1,p._resolve(),"mutatedParts"in f&&En.storagemutated.fire(f.mutatedParts)}),this},pt.prototype._promise=function(f,p,g){var E=this;if(f==="readwrite"&&this.mode!=="readwrite")return xt(new Me.ReadOnly("Transaction is readonly"));if(!this.active)return xt(new Me.TransactionInactive);if(this._locked())return new Ie(function(A,O){E._blockedFuncs.push([function(){E._promise(f,p,g).then(A,O)},Ne])});if(g)return jt(function(){var A=new Ie(function(O,P){E._lock();var B=p(O,P,E);B&&B.then&&B.then(O,P)});return A.finally(function(){return E._unlock()}),A._lib=!0,A});var S=new Ie(function(A,O){var P=p(A,O,E);P&&P.then&&P.then(A,O)});return S._lib=!0,S},pt.prototype._root=function(){return this.parent?this.parent._root():this},pt.prototype.waitFor=function(f){var p,g=this._root(),E=Ie.resolve(f);g._waitingFor?g._waitingFor=g._waitingFor.then(function(){return E}):(g._waitingFor=E,g._waitingQueue=[],p=g.idbtrans.objectStore(g.storeNames[0]),(function A(){for(++g._spinCount;g._waitingQueue.length;)g._waitingQueue.shift()();g._waitingFor&&(p.get(-1/0).onsuccess=A)})());var S=g._waitingFor;return new Ie(function(A,O){E.then(function(P){return g._waitingQueue.push(Pt(A.bind(null,P)))},function(P){return g._waitingQueue.push(Pt(O.bind(null,P)))}).finally(function(){g._waitingFor===S&&(g._waitingFor=null)})})},pt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Me.Abort))},pt.prototype.table=function(f){var p=this._memoizedTables||(this._memoizedTables={});if(I(p,f))return p[f];var g=this.schema[f];if(!g)throw new Me.NotFound("Table "+f+" not part of transaction");return g=new this.db.Table(f,g,this),g.core=this.db.core.table(f),p[f]=g},pt);function pt(){}function kr(f,p,g,E,S,A,O,P){return{name:f,keyPath:p,unique:g,multi:E,auto:S,compound:A,src:(g&&!O?"&":"")+(E?"*":"")+(S?"++":"")+Ta(p),type:P}}function Ta(f){return typeof f=="string"?f:f?"["+[].join.call(f,"+")+"]":""}function Ki(f,p,g){return{name:f,primKey:p,indexes:g,mappedClass:null,idxByName:(E=function(S){return[S.name,S]},g.reduce(function(S,A,O){return O=E(A,O),O&&(S[O[0]]=O[1]),S},{}))};var E}var Gi=function(f){try{return f.only([[]]),Gi=function(){return[[]]},[[]]}catch{return Gi=function(){return bn},bn}};function Yi(f){return f==null?function(){}:typeof f=="string"?(p=f).split(".").length===1?function(g){return g[p]}:function(g){return Ge(g,p)}:function(g){return Ge(g,f)};var p}function Ei(f){return[].slice.call(f)}var si=0;function un(f){return f==null?":id":typeof f=="string"?f:"[".concat(f.join("+"),"]")}function Qi(f,p,B){function E(W){if(W.type===3)return null;if(W.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var H=W.lower,Q=W.upper,X=W.lowerOpen,W=W.upperOpen;return H===void 0?Q===void 0?null:p.upperBound(Q,!!W):Q===void 0?p.lowerBound(H,!!X):p.bound(H,Q,!!X,!!W)}function S(Z){var H,Q=Z.name;return{name:Q,schema:Z,mutate:function(X){var W=X.trans,re=X.type,ae=X.keys,fe=X.values,ge=X.range;return new Promise(function(Ae,De){Ae=Pt(Ae);var we=W.objectStore(Q),Re=we.keyPath==null,Oe=re==="put"||re==="add";if(!Oe&&re!=="delete"&&re!=="deleteRange")throw new Error("Invalid operation type: "+re);var Se,Ve=(ae||fe||{length:1}).length;if(ae&&fe&&ae.length!==fe.length)throw new Error("Given keys array must have same length as given values array.");if(Ve===0)return Ae({numFailures:0,failures:{},results:[],lastResult:void 0});function Fe(xn){++Gn,bi(xn)}var Ze=[],lt=[],Gn=0;if(re==="deleteRange"){if(ge.type===4)return Ae({numFailures:Gn,failures:lt,results:[],lastResult:void 0});ge.type===3?Ze.push(Se=we.clear()):Ze.push(Se=we.delete(E(ge)))}else{var Re=Oe?Re?[fe,ae]:[fe,null]:[ae,null],We=Re[0],In=Re[1];if(Oe)for(var en=0;en<Ve;++en)Ze.push(Se=In&&In[en]!==void 0?we[re](We[en],In[en]):we[re](We[en])),Se.onerror=Fe;else for(en=0;en<Ve;++en)Ze.push(Se=we[re](We[en])),Se.onerror=Fe}function Mo(xn){xn=xn.target.result,Ze.forEach(function(Ur,du){return Ur.error!=null&&(lt[du]=Ur.error)}),Ae({numFailures:Gn,failures:lt,results:re==="delete"?ae:Ze.map(function(Ur){return Ur.result}),lastResult:xn})}Se.onerror=function(xn){Fe(xn),Mo(xn)},Se.onsuccess=Mo})},getMany:function(X){var W=X.trans,re=X.keys;return new Promise(function(ae,fe){ae=Pt(ae);for(var ge,Ae=W.objectStore(Q),De=re.length,we=new Array(De),Re=0,Oe=0,Se=function(Ze){Ze=Ze.target,we[Ze._pos]=Ze.result,++Oe===Re&&ae(we)},Ve=Fn(fe),Fe=0;Fe<De;++Fe)re[Fe]!=null&&((ge=Ae.get(re[Fe]))._pos=Fe,ge.onsuccess=Se,ge.onerror=Ve,++Re);Re===0&&ae(we)})},get:function(X){var W=X.trans,re=X.key;return new Promise(function(ae,fe){ae=Pt(ae);var ge=W.objectStore(Q).get(re);ge.onsuccess=function(Ae){return ae(Ae.target.result)},ge.onerror=Fn(fe)})},query:(H=q,function(X){return new Promise(function(W,re){W=Pt(W);var ae,fe,ge,Re=X.trans,Ae=X.values,De=X.limit,Se=X.query,we=De===1/0?void 0:De,Oe=Se.index,Se=Se.range,Re=Re.objectStore(Q),Oe=Oe.isPrimaryKey?Re:Re.index(Oe.name),Se=E(Se);if(De===0)return W({result:[]});H?((we=Ae?Oe.getAll(Se,we):Oe.getAllKeys(Se,we)).onsuccess=function(Ve){return W({result:Ve.target.result})},we.onerror=Fn(re)):(ae=0,fe=!Ae&&"openKeyCursor"in Oe?Oe.openKeyCursor(Se):Oe.openCursor(Se),ge=[],fe.onsuccess=function(Ve){var Fe=fe.result;return Fe?(ge.push(Ae?Fe.value:Fe.primaryKey),++ae===De?W({result:ge}):void Fe.continue()):W({result:ge})},fe.onerror=Fn(re))})}),openCursor:function(X){var W=X.trans,re=X.values,ae=X.query,fe=X.reverse,ge=X.unique;return new Promise(function(Ae,De){Ae=Pt(Ae);var Oe=ae.index,we=ae.range,Re=W.objectStore(Q),Re=Oe.isPrimaryKey?Re:Re.index(Oe.name),Oe=fe?ge?"prevunique":"prev":ge?"nextunique":"next",Se=!re&&"openKeyCursor"in Re?Re.openKeyCursor(E(we),Oe):Re.openCursor(E(we),Oe);Se.onerror=Fn(De),Se.onsuccess=Pt(function(Ve){var Fe,Ze,lt,Gn,We=Se.result;We?(We.___id=++si,We.done=!1,Fe=We.continue.bind(We),Ze=(Ze=We.continuePrimaryKey)&&Ze.bind(We),lt=We.advance.bind(We),Gn=function(){throw new Error("Cursor not stopped")},We.trans=W,We.stop=We.continue=We.continuePrimaryKey=We.advance=function(){throw new Error("Cursor not started")},We.fail=Pt(De),We.next=function(){var In=this,en=1;return this.start(function(){return en--?In.continue():In.stop()}).then(function(){return In})},We.start=function(In){function en(){if(Se.result)try{In()}catch(xn){We.fail(xn)}else We.done=!0,We.start=function(){throw new Error("Cursor behind last entry")},We.stop()}var Mo=new Promise(function(xn,Ur){xn=Pt(xn),Se.onerror=Fn(Ur),We.fail=Ur,We.stop=function(du){We.stop=We.continue=We.continuePrimaryKey=We.advance=Gn,xn(du)}});return Se.onsuccess=Pt(function(xn){Se.onsuccess=en,en()}),We.continue=Fe,We.continuePrimaryKey=Ze,We.advance=lt,en(),Mo},Ae(We)):Ae(null)},De)})},count:function(X){var W=X.query,re=X.trans,ae=W.index,fe=W.range;return new Promise(function(ge,Ae){var De=re.objectStore(Q),we=ae.isPrimaryKey?De:De.index(ae.name),De=E(fe),we=De?we.count(De):we.count();we.onsuccess=Pt(function(Re){return ge(Re.target.result)}),we.onerror=Fn(Ae)})}}}var A,O,P,J=(O=B,P=Ei((A=f).objectStoreNames),{schema:{name:A.name,tables:P.map(function(Z){return O.objectStore(Z)}).map(function(Z){var H=Z.keyPath,W=Z.autoIncrement,Q=y(H),X={},W={name:Z.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:H==null,compound:Q,keyPath:H,autoIncrement:W,unique:!0,extractKey:Yi(H)},indexes:Ei(Z.indexNames).map(function(re){return Z.index(re)}).map(function(ge){var ae=ge.name,fe=ge.unique,Ae=ge.multiEntry,ge=ge.keyPath,Ae={name:ae,compound:y(ge),keyPath:ge,unique:fe,multiEntry:Ae,extractKey:Yi(ge)};return X[un(ge)]=Ae}),getIndexByKeyPath:function(re){return X[un(re)]}};return X[":id"]=W.primaryKey,H!=null&&(X[un(H)]=W.primaryKey),W})},hasGetAll:0<P.length&&"getAll"in O.objectStore(P[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),B=J.schema,q=J.hasGetAll,J=B.tables.map(S),z={};return J.forEach(function(Z){return z[Z.name]=Z}),{stack:"dbcore",transaction:f.transaction.bind(f),table:function(Z){if(!z[Z])throw new Error("Table '".concat(Z,"' not found"));return z[Z]},MIN_KEY:-1/0,MAX_KEY:Gi(p),schema:B}}function Ti(f,p,g,E){var S=g.IDBKeyRange;return g.indexedDB,{dbcore:(E=Qi(p,S,E),f.dbcore.reduce(function(A,O){return O=O.create,s(s({},A),O(A))},E))}}function ai(f,E){var g=E.db,E=Ti(f._middlewares,g,f._deps,E);f.core=E.dbcore,f.tables.forEach(function(S){var A=S.name;f.core.schema.tables.some(function(O){return O.name===A})&&(S.core=f.core.table(A),f[A]instanceof f.Table&&(f[A].core=S.core))})}function us(f,p,g,E){g.forEach(function(S){var A=E[S];p.forEach(function(O){var P=(function B(q,J){return _e(q,J)||(q=b(q))&&B(q,J)})(O,S);(!P||"value"in P&&P.value===void 0)&&(O===f.Transaction.prototype||O instanceof f.Transaction?te(O,S,{get:function(){return this.table(S)},set:function(B){$(this,S,{value:B,writable:!0,configurable:!0,enumerable:!0})}}):O[S]=new f.Table(S,A))})})}function wi(f,p){p.forEach(function(g){for(var E in g)g[E]instanceof f.Table&&delete g[E]})}function wa(f,p){return f._cfg.version-p._cfg.version}function Si(f,p,g,E){var S=f._dbSchema;g.objectStoreNames.contains("$meta")&&!S.$meta&&(S.$meta=Ki("$meta",xo("")[0],[]),f._storeNames.push("$meta"));var A=f._createTransaction("readwrite",f._storeNames,S);A.create(g),A._completion.catch(E);var O=A._reject.bind(A),P=Ne.transless||Ne;jt(function(){return Ne.trans=A,Ne.transless=P,p!==0?(ai(f,g),q=p,((B=A).storeNames.includes("$meta")?B.table("$meta").get("version").then(function(J){return J??q}):Ie.resolve(q)).then(function(J){return Z=J,H=A,Q=g,X=[],J=(z=f)._versions,W=z._dbSchema=Ai(0,z.idbdb,Q),(J=J.filter(function(re){return re._cfg.version>=Z})).length!==0?(J.forEach(function(re){X.push(function(){var ae=W,fe=re._cfg.dbschema;cs(z,ae,Q),cs(z,fe,Q),W=z._dbSchema=fe;var ge=Us(ae,fe);ge.add.forEach(function(Oe){Xi(Q,Oe[0],Oe[1].primKey,Oe[1].indexes)}),ge.change.forEach(function(Oe){if(Oe.recreate)throw new Me.Upgrade("Not yet support for changing primary key");var Se=Q.objectStore(Oe.name);Oe.add.forEach(function(Ve){return zs(Se,Ve)}),Oe.change.forEach(function(Ve){Se.deleteIndex(Ve.name),zs(Se,Ve)}),Oe.del.forEach(function(Ve){return Se.deleteIndex(Ve)})});var Ae=re._cfg.contentUpgrade;if(Ae&&re._cfg.version>Z){ai(z,Q),H._memoizedTables={};var De=k(fe);ge.del.forEach(function(Oe){De[Oe]=ae[Oe]}),wi(z,[z.Transaction.prototype]),us(z,[z.Transaction.prototype],d(De),De),H.schema=De;var we,Re=G(Ae);return Re&&Qt(),ge=Ie.follow(function(){var Oe;(we=Ae(H))&&Re&&(Oe=Ln.bind(null,null),we.then(Oe,Oe))}),we&&typeof we.then=="function"?Ie.resolve(we):ge.then(function(){return we})}}),X.push(function(ae){var fe,ge,Ae=re._cfg.dbschema;fe=Ae,ge=ae,[].slice.call(ge.db.objectStoreNames).forEach(function(De){return fe[De]==null&&ge.db.deleteObjectStore(De)}),wi(z,[z.Transaction.prototype]),us(z,[z.Transaction.prototype],z._storeNames,z._dbSchema),H.schema=z._dbSchema}),X.push(function(ae){z.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(z.idbdb.version/10)===re._cfg.version?(z.idbdb.deleteObjectStore("$meta"),delete z._dbSchema.$meta,z._storeNames=z._storeNames.filter(function(fe){return fe!=="$meta"})):ae.objectStore("$meta").put(re._cfg.version,"version"))})}),(function re(){return X.length?Ie.resolve(X.shift()(H.idbtrans)).then(re):Ie.resolve()})().then(function(){Io(W,Q)})):Ie.resolve();var z,Z,H,Q,X,W}).catch(O)):(d(S).forEach(function(J){Xi(g,J,S[J].primKey,S[J].indexes)}),ai(f,g),void Ie.follow(function(){return f.on.populate.fire(A)}).catch(O));var B,q})}function Sa(f,p){Io(f._dbSchema,p),p.db.version%10!=0||p.objectStoreNames.contains("$meta")||p.db.createObjectStore("$meta").add(Math.ceil(p.db.version/10-1),"version");var g=Ai(0,f.idbdb,p);cs(f,f._dbSchema,p);for(var E=0,S=Us(g,f._dbSchema).change;E<S.length;E++){var A=(function(O){if(O.change.length||O.recreate)return console.warn("Unable to patch indexes of table ".concat(O.name," because it has changes on the type of index or primary key.")),{value:void 0};var P=p.objectStore(O.name);O.add.forEach(function(B){Pn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(O.name,".").concat(B.src)),zs(P,B)})})(S[E]);if(typeof A=="object")return A.value}}function Us(f,p){var g,E={del:[],add:[],change:[]};for(g in f)p[g]||E.del.push(g);for(g in p){var S=f[g],A=p[g];if(S){var O={name:g,def:A,recreate:!1,del:[],add:[],change:[]};if(""+(S.primKey.keyPath||"")!=""+(A.primKey.keyPath||"")||S.primKey.auto!==A.primKey.auto)O.recreate=!0,E.change.push(O);else{var P=S.idxByName,B=A.idxByName,q=void 0;for(q in P)B[q]||O.del.push(q);for(q in B){var J=P[q],z=B[q];J?J.src!==z.src&&O.change.push(z):O.add.push(z)}(0<O.del.length||0<O.add.length||0<O.change.length)&&E.change.push(O)}}else E.add.push([g,A])}return E}function Xi(f,p,g,E){var S=f.db.createObjectStore(p,g.keyPath?{keyPath:g.keyPath,autoIncrement:g.auto}:{autoIncrement:g.auto});return E.forEach(function(A){return zs(S,A)}),S}function Io(f,p){d(f).forEach(function(g){p.db.objectStoreNames.contains(g)||(Pn&&console.debug("Dexie: Creating missing table",g),Xi(p,g,f[g].primKey,f[g].indexes))})}function zs(f,p){f.createIndex(p.name,p.keyPath,{unique:p.unique,multiEntry:p.multi})}function Ai(f,p,g){var E={};return qe(p.objectStoreNames,0).forEach(function(S){for(var A=g.objectStore(S),O=kr(Ta(q=A.keyPath),q||"",!0,!1,!!A.autoIncrement,q&&typeof q!="string",!0),P=[],B=0;B<A.indexNames.length;++B){var J=A.index(A.indexNames[B]),q=J.keyPath,J=kr(J.name,q,!!J.unique,!!J.multiEntry,!1,q&&typeof q!="string",!1);P.push(J)}E[S]=Ki(S,O,P)}),E}function cs(f,p,g){for(var E=g.db.objectStoreNames,S=0;S<E.length;++S){var A=E[S],O=g.objectStore(A);f._hasGetAll="getAll"in O;for(var P=0;P<O.indexNames.length;++P){var B=O.indexNames[P],q=O.index(B).keyPath,J=typeof q=="string"?q:"["+qe(q).join("+")+"]";!p[A]||(q=p[A].idxByName[J])&&(q.name=B,delete p[A].idxByName[J],p[A].idxByName[B]=q)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(f._hasGetAll=!1)}function xo(f){return f.split(",").map(function(p,g){var A=p.split(":"),E=(S=A[1])===null||S===void 0?void 0:S.trim(),S=(p=A[0].trim()).replace(/([&*]|\+\+)/g,""),A=/^\[/.test(S)?S.match(/^\[(.*)\]$/)[1].split("+"):S;return kr(S,A||null,/\&/.test(p),/\*/.test(p),/\+\+/.test(p),y(A),g===0,E)})}var Aa=($i.prototype._createTableSchema=Ki,$i.prototype._parseIndexSyntax=xo,$i.prototype._parseStoresSpec=function(f,p){var g=this;d(f).forEach(function(E){if(f[E]!==null){var S=g._parseIndexSyntax(f[E]),A=S.shift();if(!A)throw new Me.Schema("Invalid schema for table "+E+": "+f[E]);if(A.unique=!0,A.multi)throw new Me.Schema("Primary key cannot be multiEntry*");S.forEach(function(O){if(O.auto)throw new Me.Schema("Only primary key can be marked as autoIncrement (++)");if(!O.keyPath)throw new Me.Schema("Index must have a name and cannot be an empty string")}),S=g._createTableSchema(E,A,S),p[E]=S}})},$i.prototype.stores=function(g){var p=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,g):g;var g=p._versions,E={},S={};return g.forEach(function(A){_(E,A._cfg.storesSource),S=A._cfg.dbschema={},A._parseStoresSpec(E,S)}),p._dbSchema=S,wi(p,[p._allTables,p,p.Transaction.prototype]),us(p,[p._allTables,p,p.Transaction.prototype,this._cfg.tables],d(S),S),p._storeNames=d(S),this},$i.prototype.upgrade=function(f){return this._cfg.contentUpgrade=rn(this._cfg.contentUpgrade||Ct,f),this},$i);function $i(){}function Ca(f,p){var g=f._dbNamesDB;return g||(g=f._dbNamesDB=new Ri(as,{addons:[],indexedDB:f,IDBKeyRange:p})).version(1).stores({dbnames:"name"}),g.table("dbnames")}function Vr(f){return f&&typeof f.databases=="function"}function Ra(f){return jt(function(){return Ne.letThrough=!0,f()})}function Ia(f){return!("from"in f)}var Tn=function(f,p){if(!this){var g=new Tn;return f&&"d"in f&&_(g,f),g}_(this,arguments.length?{d:1,from:f,to:1<arguments.length?p:f}:{d:0})};function fs(f,p,g){var E=ot(p,g);if(!isNaN(E)){if(0<E)throw RangeError();if(Ia(f))return _(f,{from:p,to:g,d:1});var S=f.l,E=f.r;if(ot(g,f.from)<0)return S?fs(S,p,g):f.l={from:p,to:g,d:1,l:null,r:null},Oo(f);if(0<ot(p,f.to))return E?fs(E,p,g):f.r={from:p,to:g,d:1,l:null,r:null},Oo(f);ot(p,f.from)<0&&(f.from=p,f.l=null,f.d=E?E.d+1:1),0<ot(g,f.to)&&(f.to=g,f.r=null,f.d=f.l?f.l.d+1:1),g=!f.r,S&&!f.l&&Pr(f,S),E&&g&&Pr(f,E)}}function Pr(f,p){Ia(p)||(function g(E,B){var A=B.from,O=B.to,P=B.l,B=B.r;fs(E,A,O),P&&g(E,P),B&&g(E,B)})(f,p)}function Kn(f,p){var g=Bs(p),E=g.next();if(E.done)return!1;for(var S=E.value,A=Bs(f),O=A.next(S.from),P=O.value;!E.done&&!O.done;){if(ot(P.from,S.to)<=0&&0<=ot(P.to,S.from))return!0;ot(S.from,P.from)<0?S=(E=g.next(P.from)).value:P=(O=A.next(S.from)).value}return!1}function Bs(f){var p=Ia(f)?null:{s:0,n:f};return{next:function(g){for(var E=0<arguments.length;p;)switch(p.s){case 0:if(p.s=1,E)for(;p.n.l&&ot(g,p.n.from)<0;)p={up:p,n:p.n.l,s:1};else for(;p.n.l;)p={up:p,n:p.n.l,s:1};case 1:if(p.s=2,!E||ot(g,p.n.to)<=0)return{value:p.n,done:!1};case 2:if(p.n.r){p.s=3,p={up:p,n:p.n.r,s:0};continue}case 3:p=p.up}return{done:!0}}}}function Oo(f){var p,g,E=(((p=f.r)===null||p===void 0?void 0:p.d)||0)-(((g=f.l)===null||g===void 0?void 0:g.d)||0),S=1<E?"r":E<-1?"l":"";S&&(p=S=="r"?"l":"r",g=s({},f),E=f[S],f.from=E.from,f.to=E.to,f[S]=E[S],g[S]=E[p],(f[p]=g).d=Ci(g)),f.d=Ci(f)}function Ci(g){var p=g.r,g=g.l;return(p?g?Math.max(p.d,g.d):p.d:g?g.d:0)+1}function c(f,p){return d(p).forEach(function(g){f[g]?Pr(f[g],p[g]):f[g]=(function E(S){var A,O,P={};for(A in S)I(S,A)&&(O=S[A],P[A]=!O||typeof O!="object"||N.has(O.constructor)?O:E(O));return P})(p[g])}),f}function v(f,p){return f.all||p.all||Object.keys(f).some(function(g){return p[g]&&Kn(p[g],f[g])})}M(Tn.prototype,((Tr={add:function(f){return Pr(this,f),this},addKey:function(f){return fs(this,f,f),this},addKeys:function(f){var p=this;return f.forEach(function(g){return fs(p,g,g)}),this},hasKey:function(f){var p=Bs(this).next(f).value;return p&&ot(p.from,f)<=0&&0<=ot(p.to,f)}})[oe]=function(){return Bs(this)},Tr));var w={},x={},ne=!1;function ue(f){c(x,f),ne||(ne=!0,setTimeout(function(){ne=!1,Ce(x,!(x={}))},0))}function Ce(f,p){p===void 0&&(p=!1);var g=new Set;if(f.all)for(var E=0,S=Object.values(w);E<S.length;E++)nt(O=S[E],f,g,p);else for(var A in f){var O,P=/^idb\:\/\/(.*)\/(.*)\//.exec(A);P&&(A=P[1],P=P[2],(O=w["idb://".concat(A,"/").concat(P)])&&nt(O,f,g,p))}g.forEach(function(B){return B()})}function nt(f,p,g,E){for(var S=[],A=0,O=Object.entries(f.queries.query);A<O.length;A++){for(var P=O[A],B=P[0],q=[],J=0,z=P[1];J<z.length;J++){var Z=z[J];v(p,Z.obsSet)?Z.subscribers.forEach(function(W){return g.add(W)}):E&&q.push(Z)}E&&S.push([B,q])}if(E)for(var H=0,Q=S;H<Q.length;H++){var X=Q[H],B=X[0],q=X[1];f.queries.query[B]=q}}function cn(f){var p=f._state,g=f._deps.indexedDB;if(p.isBeingOpened||f.idbdb)return p.dbReadyPromise.then(function(){return p.dbOpenError?xt(p.dbOpenError):f});p.isBeingOpened=!0,p.dbOpenError=null,p.openComplete=!1;var E=p.openCanceller,S=Math.round(10*f.verno),A=!1;function O(){if(p.openCanceller!==E)throw new Me.DatabaseClosed("db.open() was cancelled")}function P(){return new Ie(function(Z,H){if(O(),!g)throw new Me.MissingAPI;var Q=f.name,X=p.autoSchema||!S?g.open(Q):g.open(Q,S);if(!X)throw new Me.MissingAPI;X.onerror=Fn(H),X.onblocked=Pt(f._fireOnBlocked),X.onupgradeneeded=Pt(function(W){var re;J=X.transaction,p.autoSchema&&!f._options.allowEmptyDB?(X.onerror=bi,J.abort(),X.result.close(),(re=g.deleteDatabase(Q)).onsuccess=re.onerror=Pt(function(){H(new Me.NoSuchDatabase("Database ".concat(Q," doesnt exist")))})):(J.onerror=Fn(H),W=W.oldVersion>Math.pow(2,62)?0:W.oldVersion,z=W<1,f.idbdb=X.result,A&&Sa(f,J),Si(f,W/10,J,H))},H),X.onsuccess=Pt(function(){J=null;var W,re,ae,fe,ge,Ae=f.idbdb=X.result,De=qe(Ae.objectStoreNames);if(0<De.length)try{var we=Ae.transaction((fe=De).length===1?fe[0]:fe,"readonly");if(p.autoSchema)re=Ae,ae=we,(W=f).verno=re.version/10,ae=W._dbSchema=Ai(0,re,ae),W._storeNames=qe(re.objectStoreNames,0),us(W,[W._allTables],d(ae),ae);else if(cs(f,f._dbSchema,we),((ge=Us(Ai(0,(ge=f).idbdb,we),ge._dbSchema)).add.length||ge.change.some(function(Re){return Re.add.length||Re.change.length}))&&!A)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ae.close(),S=Ae.version+1,A=!0,Z(P());ai(f,we)}catch{}_i.push(f),Ae.onversionchange=Pt(function(Re){p.vcFired=!0,f.on("versionchange").fire(Re)}),Ae.onclose=Pt(function(){f.close({disableAutoOpen:!1})}),z&&(ge=f._deps,we=Q,Ae=ge.indexedDB,ge=ge.IDBKeyRange,Vr(Ae)||we===as||Ca(Ae,ge).put({name:we}).catch(Ct)),Z()},H)}).catch(function(Z){switch(Z?.name){case"UnknownError":if(0<p.PR1398_maxLoop)return p.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),P();break;case"VersionError":if(0<S)return S=0,P()}return Ie.reject(Z)})}var B,q=p.dbReadyResolve,J=null,z=!1;return Ie.race([E,(typeof navigator>"u"?Ie.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Z){function H(){return indexedDB.databases().finally(Z)}B=setInterval(H,100),H()}).finally(function(){return clearInterval(B)}):Promise.resolve()).then(P)]).then(function(){return O(),p.onReadyBeingFired=[],Ie.resolve(Ra(function(){return f.on.ready.fire(f.vip)})).then(function Z(){if(0<p.onReadyBeingFired.length){var H=p.onReadyBeingFired.reduce(rn,Ct);return p.onReadyBeingFired=[],Ie.resolve(Ra(function(){return H(f.vip)})).then(Z)}})}).finally(function(){p.openCanceller===E&&(p.onReadyBeingFired=null,p.isBeingOpened=!1)}).catch(function(Z){p.dbOpenError=Z;try{J&&J.abort()}catch{}return E===p.openCanceller&&f._close(),xt(Z)}).finally(function(){p.openComplete=!0,q()}).then(function(){var Z;return z&&(Z={},f.tables.forEach(function(H){H.schema.indexes.forEach(function(Q){Q.name&&(Z["idb://".concat(f.name,"/").concat(H.name,"/").concat(Q.name)]=new Tn(-1/0,[[[]]]))}),Z["idb://".concat(f.name,"/").concat(H.name,"/")]=Z["idb://".concat(f.name,"/").concat(H.name,"/:dels")]=new Tn(-1/0,[[[]]])}),En(Mr).fire(Z),Ce(Z,!0)),f})}function Rt(f){function p(A){return f.next(A)}var g=S(p),E=S(function(A){return f.throw(A)});function S(A){return function(B){var P=A(B),B=P.value;return P.done?B:B&&typeof B.then=="function"?B.then(g,E):y(B)?Promise.all(B).then(g,E):g(B)}}return S(p)()}function zt(f,p,g){for(var E=y(f)?f.slice():[f],S=0;S<g;++S)E.push(p);return E}var Lr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(f){return s(s({},f),{table:function(p){var g=f.table(p),E=g.schema,S={},A=[];function O(z,Z,H){var Q=un(z),X=S[Q]=S[Q]||[],W=z==null?0:typeof z=="string"?1:z.length,re=0<Z,re=s(s({},H),{name:re?"".concat(Q,"(virtual-from:").concat(H.name,")"):H.name,lowLevelIndex:H,isVirtual:re,keyTail:Z,keyLength:W,extractKey:Yi(z),unique:!re&&H.unique});return X.push(re),re.isPrimaryKey||A.push(re),1<W&&O(W===2?z[0]:z.slice(0,W-1),Z+1,H),X.sort(function(ae,fe){return ae.keyTail-fe.keyTail}),re}p=O(E.primaryKey.keyPath,0,E.primaryKey),S[":id"]=[p];for(var P=0,B=E.indexes;P<B.length;P++){var q=B[P];O(q.keyPath,0,q)}function J(z){var Z,H=z.query.index;return H.isVirtual?s(s({},z),{query:{index:H.lowLevelIndex,range:(Z=z.query.range,H=H.keyTail,{type:Z.type===1?2:Z.type,lower:zt(Z.lower,Z.lowerOpen?f.MAX_KEY:f.MIN_KEY,H),lowerOpen:!0,upper:zt(Z.upper,Z.upperOpen?f.MIN_KEY:f.MAX_KEY,H),upperOpen:!0})}}):z}return s(s({},g),{schema:s(s({},E),{primaryKey:p,indexes:A,getIndexByKeyPath:function(z){return(z=S[un(z)])&&z[0]}}),count:function(z){return g.count(J(z))},query:function(z){return g.query(J(z))},openCursor:function(z){var Z=z.query.index,H=Z.keyTail,Q=Z.isVirtual,X=Z.keyLength;return Q?g.openCursor(J(z)).then(function(re){return re&&W(re)}):g.openCursor(z);function W(re){return Object.create(re,{continue:{value:function(ae){ae!=null?re.continue(zt(ae,z.reverse?f.MAX_KEY:f.MIN_KEY,H)):z.unique?re.continue(re.key.slice(0,X).concat(z.reverse?f.MIN_KEY:f.MAX_KEY,H)):re.continue()}},continuePrimaryKey:{value:function(ae,fe){re.continuePrimaryKey(zt(ae,f.MAX_KEY,H),fe)}},primaryKey:{get:function(){return re.primaryKey}},key:{get:function(){var ae=re.key;return X===1?ae[0]:ae.slice(0,X)}},value:{get:function(){return re.value}}})}}})}})}};function jr(f,p,g,E){return g=g||{},E=E||"",d(f).forEach(function(S){var A,O,P;I(p,S)?(A=f[S],O=p[S],typeof A=="object"&&typeof O=="object"&&A&&O?(P=Gt(A))!==Gt(O)?g[E+S]=p[S]:P==="Object"?jr(A,O,g,E+S+"."):A!==O&&(g[E+S]=p[S]):A!==O&&(g[E+S]=p[S])):g[E+S]=void 0}),d(p).forEach(function(S){I(f,S)||(g[E+S]=p[S])}),g}function Er(f,p){return p.type==="delete"?p.keys:p.keys||p.values.map(f.extractKey)}var oi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(f){return s(s({},f),{table:function(p){var g=f.table(p),E=g.schema.primaryKey;return s(s({},g),{mutate:function(S){var A=Ne.trans,O=A.table(p).hook,P=O.deleting,B=O.creating,q=O.updating;switch(S.type){case"add":if(B.fire===Ct)break;return A._promise("readwrite",function(){return J(S)},!0);case"put":if(B.fire===Ct&&q.fire===Ct)break;return A._promise("readwrite",function(){return J(S)},!0);case"delete":if(P.fire===Ct)break;return A._promise("readwrite",function(){return J(S)},!0);case"deleteRange":if(P.fire===Ct)break;return A._promise("readwrite",function(){return(function z(Z,H,Q){return g.query({trans:Z,values:!1,query:{index:E,range:H},limit:Q}).then(function(X){var W=X.result;return J({type:"delete",keys:W,trans:Z}).then(function(re){return 0<re.numFailures?Promise.reject(re.failures[0]):W.length<Q?{failures:[],numFailures:0,lastResult:void 0}:z(Z,s(s({},H),{lower:W[W.length-1],lowerOpen:!0}),Q)})})})(S.trans,S.range,1e4)},!0)}return g.mutate(S);function J(z){var Z,H,Q,X=Ne.trans,W=z.keys||Er(E,z);if(!W)throw new Error("Keys missing");return(z=z.type==="add"||z.type==="put"?s(s({},z),{keys:W}):s({},z)).type!=="delete"&&(z.values=o([],z.values)),z.keys&&(z.keys=o([],z.keys)),Z=g,Q=W,((H=z).type==="add"?Promise.resolve([]):Z.getMany({trans:H.trans,keys:Q,cache:"immutable"})).then(function(re){var ae=W.map(function(fe,ge){var Ae,De,we,Re=re[ge],Oe={onerror:null,onsuccess:null};return z.type==="delete"?P.fire.call(Oe,fe,Re,X):z.type==="add"||Re===void 0?(Ae=B.fire.call(Oe,fe,z.values[ge],X),fe==null&&Ae!=null&&(z.keys[ge]=fe=Ae,E.outbound||L(z.values[ge],E.keyPath,fe))):(Ae=jr(Re,z.values[ge]),(De=q.fire.call(Oe,Ae,fe,Re,X))&&(we=z.values[ge],Object.keys(De).forEach(function(Se){I(we,Se)?we[Se]=De[Se]:L(we,Se,De[Se])}))),Oe});return g.mutate(z).then(function(fe){for(var ge=fe.failures,Ae=fe.results,De=fe.numFailures,fe=fe.lastResult,we=0;we<W.length;++we){var Re=(Ae||W)[we],Oe=ae[we];Re==null?Oe.onerror&&Oe.onerror(ge[we]):Oe.onsuccess&&Oe.onsuccess(z.type==="put"&&re[we]?z.values[we]:Re)}return{failures:ge,results:Ae,numFailures:De,lastResult:fe}}).catch(function(fe){return ae.forEach(function(ge){return ge.onerror&&ge.onerror(fe)}),Promise.reject(fe)})})}}})}})}};function hs(f,p,g){try{if(!p||p.keys.length<f.length)return null;for(var E=[],S=0,A=0;S<p.keys.length&&A<f.length;++S)ot(p.keys[S],f[A])===0&&(E.push(g?V(p.values[S]):p.values[S]),++A);return E.length===f.length?E:null}catch{return null}}var xa={stack:"dbcore",level:-1,create:function(f){return{table:function(p){var g=f.table(p);return s(s({},g),{getMany:function(E){if(!E.cache)return g.getMany(E);var S=hs(E.keys,E.trans._cache,E.cache==="clone");return S?Ie.resolve(S):g.getMany(E).then(function(A){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?V(A):A},A})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),g.mutate(E)}})}}}};function qs(f,p){return f.trans.mode==="readonly"&&!!f.subscr&&!f.trans.explicit&&f.trans.db._options.cache!=="disabled"&&!p.schema.primaryKey.outbound}function Dc(f,p){switch(f){case"query":return p.values&&!p.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Fh={stack:"dbcore",level:0,name:"Observability",create:function(f){var p=f.schema.name,g=new Tn(f.MIN_KEY,f.MAX_KEY);return s(s({},f),{transaction:function(E,S,A){if(Ne.subscr&&S!=="readonly")throw new Me.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ne.querier));return f.transaction(E,S,A)},table:function(E){var S=f.table(E),A=S.schema,O=A.primaryKey,z=A.indexes,P=O.extractKey,B=O.outbound,q=O.autoIncrement&&z.filter(function(H){return H.compound&&H.keyPath.includes(O.keyPath)}),J=s(s({},S),{mutate:function(H){function Q(Se){return Se="idb://".concat(p,"/").concat(E,"/").concat(Se),fe[Se]||(fe[Se]=new Tn)}var X,W,re,ae=H.trans,fe=H.mutatedParts||(H.mutatedParts={}),ge=Q(""),Ae=Q(":dels"),De=H.type,Oe=H.type==="deleteRange"?[H.range]:H.type==="delete"?[H.keys]:H.values.length<50?[Er(O,H).filter(function(Se){return Se}),H.values]:[],we=Oe[0],Re=Oe[1],Oe=H.trans._cache;return y(we)?(ge.addKeys(we),(Oe=De==="delete"||we.length===Re.length?hs(we,Oe):null)||Ae.addKeys(we),(Oe||Re)&&(X=Q,W=Oe,re=Re,A.indexes.forEach(function(Se){var Ve=X(Se.name||"");function Fe(lt){return lt!=null?Se.extractKey(lt):null}function Ze(lt){return Se.multiEntry&&y(lt)?lt.forEach(function(Gn){return Ve.addKey(Gn)}):Ve.addKey(lt)}(W||re).forEach(function(lt,In){var We=W&&Fe(W[In]),In=re&&Fe(re[In]);ot(We,In)!==0&&(We!=null&&Ze(We),In!=null&&Ze(In))})}))):we?(Re={from:(Re=we.lower)!==null&&Re!==void 0?Re:f.MIN_KEY,to:(Re=we.upper)!==null&&Re!==void 0?Re:f.MAX_KEY},Ae.add(Re),ge.add(Re)):(ge.add(g),Ae.add(g),A.indexes.forEach(function(Se){return Q(Se.name).add(g)})),S.mutate(H).then(function(Se){return!we||H.type!=="add"&&H.type!=="put"||(ge.addKeys(Se.results),q&&q.forEach(function(Ve){for(var Fe=H.values.map(function(We){return Ve.extractKey(We)}),Ze=Ve.keyPath.findIndex(function(We){return We===O.keyPath}),lt=0,Gn=Se.results.length;lt<Gn;++lt)Fe[lt][Ze]=Se.results[lt];Q(Ve.name).addKeys(Fe)})),ae.mutatedParts=c(ae.mutatedParts||{},fe),Se})}}),z=function(Q){var X=Q.query,Q=X.index,X=X.range;return[Q,new Tn((Q=X.lower)!==null&&Q!==void 0?Q:f.MIN_KEY,(X=X.upper)!==null&&X!==void 0?X:f.MAX_KEY)]},Z={get:function(H){return[O,new Tn(H.key)]},getMany:function(H){return[O,new Tn().addKeys(H.keys)]},count:z,query:z,openCursor:z};return d(Z).forEach(function(H){J[H]=function(Q){var X=Ne.subscr,W=!!X,re=qs(Ne,S)&&Dc(H,Q)?Q.obsSet={}:X;if(W){var ae=function(Re){return Re="idb://".concat(p,"/").concat(E,"/").concat(Re),re[Re]||(re[Re]=new Tn)},fe=ae(""),ge=ae(":dels"),X=Z[H](Q),W=X[0],X=X[1];if((H==="query"&&W.isPrimaryKey&&!Q.values?ge:ae(W.name||"")).add(X),!W.isPrimaryKey){if(H!=="count"){var Ae=H==="query"&&B&&Q.values&&S.query(s(s({},Q),{values:!1}));return S[H].apply(this,arguments).then(function(Re){if(H==="query"){if(B&&Q.values)return Ae.then(function(Fe){return Fe=Fe.result,fe.addKeys(Fe),Re});var Oe=Q.values?Re.result.map(P):Re.result;(Q.values?fe:ge).addKeys(Oe)}else if(H==="openCursor"){var Se=Re,Ve=Q.values;return Se&&Object.create(Se,{key:{get:function(){return ge.addKey(Se.primaryKey),Se.key}},primaryKey:{get:function(){var Fe=Se.primaryKey;return ge.addKey(Fe),Fe}},value:{get:function(){return Ve&&fe.addKey(Se.primaryKey),Se.value}}})}return Re})}ge.add(g)}}return S[H].apply(this,arguments)}}),J}})}};function Nc(f,p,g){if(g.numFailures===0)return p;if(p.type==="deleteRange")return null;var E=p.keys?p.keys.length:"values"in p&&p.values?p.values.length:1;return g.numFailures===E?null:(p=s({},p),y(p.keys)&&(p.keys=p.keys.filter(function(S,A){return!(A in g.failures)})),"values"in p&&y(p.values)&&(p.values=p.values.filter(function(S,A){return!(A in g.failures)})),p)}function fl(f,p){return g=f,((E=p).lower===void 0||(E.lowerOpen?0<ot(g,E.lower):0<=ot(g,E.lower)))&&(f=f,(p=p).upper===void 0||(p.upperOpen?ot(f,p.upper)<0:ot(f,p.upper)<=0));var g,E}function fu(f,p,Z,E,S,A){if(!Z||Z.length===0)return f;var O=p.query.index,P=O.multiEntry,B=p.query.range,q=E.schema.primaryKey.extractKey,J=O.extractKey,z=(O.lowLevelIndex||O).extractKey,Z=Z.reduce(function(H,Q){var X=H,W=[];if(Q.type==="add"||Q.type==="put")for(var re=new Tn,ae=Q.values.length-1;0<=ae;--ae){var fe,ge=Q.values[ae],Ae=q(ge);re.hasKey(Ae)||(fe=J(ge),(P&&y(fe)?fe.some(function(Se){return fl(Se,B)}):fl(fe,B))&&(re.addKey(Ae),W.push(ge)))}switch(Q.type){case"add":var De=new Tn().addKeys(p.values?H.map(function(Ve){return q(Ve)}):H),X=H.concat(p.values?W.filter(function(Ve){return Ve=q(Ve),!De.hasKey(Ve)&&(De.addKey(Ve),!0)}):W.map(function(Ve){return q(Ve)}).filter(function(Ve){return!De.hasKey(Ve)&&(De.addKey(Ve),!0)}));break;case"put":var we=new Tn().addKeys(Q.values.map(function(Ve){return q(Ve)}));X=H.filter(function(Ve){return!we.hasKey(p.values?q(Ve):Ve)}).concat(p.values?W:W.map(function(Ve){return q(Ve)}));break;case"delete":var Re=new Tn().addKeys(Q.keys);X=H.filter(function(Ve){return!Re.hasKey(p.values?q(Ve):Ve)});break;case"deleteRange":var Oe=Q.range;X=H.filter(function(Ve){return!fl(q(Ve),Oe)})}return X},f);return Z===f?f:(Z.sort(function(H,Q){return ot(z(H),z(Q))||ot(q(H),q(Q))}),p.limit&&p.limit<1/0&&(Z.length>p.limit?Z.length=p.limit:f.length===p.limit&&Z.length<p.limit&&(S.dirty=!0)),A?Object.freeze(Z):Z)}function Oa(f,p){return ot(f.lower,p.lower)===0&&ot(f.upper,p.upper)===0&&!!f.lowerOpen==!!p.lowerOpen&&!!f.upperOpen==!!p.upperOpen}function Do(f,p){return(function(g,E,S,A){if(g===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=ot(g,E))===0){if(S&&A)return 0;if(S)return 1;if(A)return-1}return E})(f.lower,p.lower,f.lowerOpen,p.lowerOpen)<=0&&0<=(function(g,E,S,A){if(g===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=ot(g,E))===0){if(S&&A)return 0;if(S)return-1;if(A)return 1}return E})(f.upper,p.upper,f.upperOpen,p.upperOpen)}function Kh(f,p,g,E){f.subscribers.add(g),E.addEventListener("abort",function(){var S,A;f.subscribers.delete(g),f.subscribers.size===0&&(S=f,A=p,setTimeout(function(){S.subscribers.size===0&&Ue(A,S)},3e3))})}var hl={stack:"dbcore",level:0,name:"Cache",create:function(f){var p=f.schema.name;return s(s({},f),{transaction:function(g,E,S){var A,O,P=f.transaction(g,E,S);return E==="readwrite"&&(O=(A=new AbortController).signal,S=function(B){return function(){if(A.abort(),E==="readwrite"){for(var q=new Set,J=0,z=g;J<z.length;J++){var Z=z[J],H=w["idb://".concat(p,"/").concat(Z)];if(H){var Q=f.table(Z),X=H.optimisticOps.filter(function(Ve){return Ve.trans===P});if(P._explicit&&B&&P.mutatedParts)for(var W=0,re=Object.values(H.queries.query);W<re.length;W++)for(var ae=0,fe=(De=re[W]).slice();ae<fe.length;ae++)v((we=fe[ae]).obsSet,P.mutatedParts)&&(Ue(De,we),we.subscribers.forEach(function(Ve){return q.add(Ve)}));else if(0<X.length){H.optimisticOps=H.optimisticOps.filter(function(Ve){return Ve.trans!==P});for(var ge=0,Ae=Object.values(H.queries.query);ge<Ae.length;ge++)for(var De,we,Re,Oe=0,Se=(De=Ae[ge]).slice();Oe<Se.length;Oe++)(we=Se[Oe]).res!=null&&P.mutatedParts&&(B&&!we.dirty?(Re=Object.isFrozen(we.res),Re=fu(we.res,we.req,X,Q,we,Re),we.dirty?(Ue(De,we),we.subscribers.forEach(function(Ve){return q.add(Ve)})):Re!==we.res&&(we.res=Re,we.promise=Ie.resolve({result:Re}))):(we.dirty&&Ue(De,we),we.subscribers.forEach(function(Ve){return q.add(Ve)})))}}}q.forEach(function(Ve){return Ve()})}}},P.addEventListener("abort",S(!1),{signal:O}),P.addEventListener("error",S(!1),{signal:O}),P.addEventListener("complete",S(!0),{signal:O})),P},table:function(g){var E=f.table(g),S=E.schema.primaryKey;return s(s({},E),{mutate:function(A){var O=Ne.trans;if(S.outbound||O.db._options.cache==="disabled"||O.explicit||O.idbtrans.mode!=="readwrite")return E.mutate(A);var P=w["idb://".concat(p,"/").concat(g)];return P?(O=E.mutate(A),A.type!=="add"&&A.type!=="put"||!(50<=A.values.length||Er(S,A).some(function(B){return B==null}))?(P.optimisticOps.push(A),A.mutatedParts&&ue(A.mutatedParts),O.then(function(B){0<B.numFailures&&(Ue(P.optimisticOps,A),(B=Nc(0,A,B))&&P.optimisticOps.push(B),A.mutatedParts&&ue(A.mutatedParts))}),O.catch(function(){Ue(P.optimisticOps,A),A.mutatedParts&&ue(A.mutatedParts)})):O.then(function(B){var q=Nc(0,s(s({},A),{values:A.values.map(function(J,z){var Z;return B.failures[z]?J:(J=(Z=S.keyPath)!==null&&Z!==void 0&&Z.includes(".")?V(J):s({},J),L(J,S.keyPath,B.results[z]),J)})}),B);P.optimisticOps.push(q),queueMicrotask(function(){return A.mutatedParts&&ue(A.mutatedParts)})}),O):E.mutate(A)},query:function(A){if(!qs(Ne,E)||!Dc("query",A))return E.query(A);var O=((q=Ne.trans)===null||q===void 0?void 0:q.db._options.cache)==="immutable",z=Ne,P=z.requery,B=z.signal,q=(function(Q,X,W,re){var ae=w["idb://".concat(Q,"/").concat(X)];if(!ae)return[];if(!(X=ae.queries[W]))return[null,!1,ae,null];var fe=X[(re.query?re.query.index.name:null)||""];if(!fe)return[null,!1,ae,null];switch(W){case"query":var ge=fe.find(function(Ae){return Ae.req.limit===re.limit&&Ae.req.values===re.values&&Oa(Ae.req.query.range,re.query.range)});return ge?[ge,!0,ae,fe]:[fe.find(function(Ae){return("limit"in Ae.req?Ae.req.limit:1/0)>=re.limit&&(!re.values||Ae.req.values)&&Do(Ae.req.query.range,re.query.range)}),!1,ae,fe];case"count":return ge=fe.find(function(Ae){return Oa(Ae.req.query.range,re.query.range)}),[ge,!!ge,ae,fe]}})(p,g,"query",A),J=q[0],z=q[1],Z=q[2],H=q[3];return J&&z?J.obsSet=A.obsSet:(z=E.query(A).then(function(Q){var X=Q.result;if(J&&(J.res=X),O){for(var W=0,re=X.length;W<re;++W)Object.freeze(X[W]);Object.freeze(X)}else Q.result=V(X);return Q}).catch(function(Q){return H&&J&&Ue(H,J),Promise.reject(Q)}),J={obsSet:A.obsSet,promise:z,subscribers:new Set,type:"query",req:A,dirty:!1},H?H.push(J):(H=[J],(Z=Z||(w["idb://".concat(p,"/").concat(g)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[A.query.index.name||""]=H)),Kh(J,H,P,B),J.promise.then(function(Q){return{result:fu(Q.result,A,Z?.optimisticOps,E,J,O)}})}})}})}};function No(f,p){return new Proxy(f,{get:function(g,E,S){return E==="db"?p:Reflect.get(g,E,S)}})}var Ri=(Xt.prototype.version=function(f){if(isNaN(f)||f<.1)throw new Me.Type("Given version is not a positive number");if(f=Math.round(10*f)/10,this.idbdb||this._state.isBeingOpened)throw new Me.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,f);var p=this._versions,g=p.filter(function(E){return E._cfg.version===f})[0];return g||(g=new this.Version(f),p.push(g),p.sort(wa),g.stores({}),this._state.autoSchema=!1,g)},Xt.prototype._whenReady=function(f){var p=this;return this.idbdb&&(this._state.openComplete||Ne.letThrough||this._vip)?f():new Ie(function(g,E){if(p._state.openComplete)return E(new Me.DatabaseClosed(p._state.dbOpenError));if(!p._state.isBeingOpened){if(!p._state.autoOpen)return void E(new Me.DatabaseClosed);p.open().catch(Ct)}p._state.dbReadyPromise.then(g,E)}).then(f)},Xt.prototype.use=function(f){var p=f.stack,g=f.create,E=f.level,S=f.name;return S&&this.unuse({stack:p,name:S}),f=this._middlewares[p]||(this._middlewares[p]=[]),f.push({stack:p,create:g,level:E??10,name:S}),f.sort(function(A,O){return A.level-O.level}),this},Xt.prototype.unuse=function(f){var p=f.stack,g=f.name,E=f.create;return p&&this._middlewares[p]&&(this._middlewares[p]=this._middlewares[p].filter(function(S){return E?S.create!==E:!!g&&S.name!==g})),this},Xt.prototype.open=function(){var f=this;return Hn(_n,function(){return cn(f)})},Xt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var f=this._state,p=_i.indexOf(this);if(0<=p&&_i.splice(p,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}f.isBeingOpened||(f.dbReadyPromise=new Ie(function(g){f.dbReadyResolve=g}),f.openCanceller=new Ie(function(g,E){f.cancelOpen=E}))},Xt.prototype.close=function(g){var p=(g===void 0?{disableAutoOpen:!0}:g).disableAutoOpen,g=this._state;p?(g.isBeingOpened&&g.cancelOpen(new Me.DatabaseClosed),this._close(),g.autoOpen=!1,g.dbOpenError=new Me.DatabaseClosed):(this._close(),g.autoOpen=this._options.autoOpen||g.isBeingOpened,g.openComplete=!1,g.dbOpenError=null)},Xt.prototype.delete=function(f){var p=this;f===void 0&&(f={disableAutoOpen:!0});var g=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new Ie(function(S,A){function O(){p.close(f);var P=p._deps.indexedDB.deleteDatabase(p.name);P.onsuccess=Pt(function(){var B,q,J;B=p._deps,q=p.name,J=B.indexedDB,B=B.IDBKeyRange,Vr(J)||q===as||Ca(J,B).delete(q).catch(Ct),S()}),P.onerror=Fn(A),P.onblocked=p._fireOnBlocked}if(g)throw new Me.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(O):O()})},Xt.prototype.backendDB=function(){return this.idbdb},Xt.prototype.isOpen=function(){return this.idbdb!==null},Xt.prototype.hasBeenClosed=function(){var f=this._state.dbOpenError;return f&&f.name==="DatabaseClosed"},Xt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Xt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Xt.prototype,"tables",{get:function(){var f=this;return d(this._allTables).map(function(p){return f._allTables[p]})},enumerable:!1,configurable:!0}),Xt.prototype.transaction=function(){var f=(function(p,g,E){var S=arguments.length;if(S<2)throw new Me.InvalidArgument("Too few arguments");for(var A=new Array(S-1);--S;)A[S-1]=arguments[S];return E=A.pop(),[p,Y(A),E]}).apply(this,arguments);return this._transaction.apply(this,f)},Xt.prototype._transaction=function(f,p,g){var E=this,S=Ne.trans;S&&S.db===this&&f.indexOf("!")===-1||(S=null);var A,O,P=f.indexOf("?")!==-1;f=f.replace("!","").replace("?","");try{if(O=p.map(function(q){if(q=q instanceof E.Table?q.name:q,typeof q!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return q}),f=="r"||f===xr)A=xr;else{if(f!="rw"&&f!=Or)throw new Me.InvalidArgument("Invalid transaction mode: "+f);A=Or}if(S){if(S.mode===xr&&A===Or){if(!P)throw new Me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");S=null}S&&O.forEach(function(q){if(S&&S.storeNames.indexOf(q)===-1){if(!P)throw new Me.SubTransaction("Table "+q+" not included in parent transaction.");S=null}}),P&&S&&!S.active&&(S=null)}}catch(q){return S?S._promise(null,function(J,z){z(q)}):xt(q)}var B=(function q(J,z,Z,H,Q){return Ie.resolve().then(function(){var X=Ne.transless||Ne,W=J._createTransaction(z,Z,J._dbSchema,H);if(W.explicit=!0,X={trans:W,transless:X},H)W.idbtrans=H.idbtrans;else try{W.create(),W.idbtrans._explicit=!0,J._state.PR1398_maxLoop=3}catch(fe){return fe.name===gt.InvalidState&&J.isOpen()&&0<--J._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),J.close({disableAutoOpen:!1}),J.open().then(function(){return q(J,z,Z,null,Q)})):xt(fe)}var re,ae=G(Q);return ae&&Qt(),X=Ie.follow(function(){var fe;(re=Q.call(W,W))&&(ae?(fe=Ln.bind(null,null),re.then(fe,fe)):typeof re.next=="function"&&typeof re.throw=="function"&&(re=Rt(re)))},X),(re&&typeof re.then=="function"?Ie.resolve(re).then(function(fe){return W.active?fe:xt(new Me.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):X.then(function(){return re})).then(function(fe){return H&&W._resolve(),W._completion.then(function(){return fe})}).catch(function(fe){return W._reject(fe),xt(fe)})})}).bind(null,this,A,O,S,g);return S?S._promise(A,B,"lock"):Ne.trans?Hn(Ne.transless,function(){return E._whenReady(B)}):this._whenReady(B)},Xt.prototype.table=function(f){if(!I(this._allTables,f))throw new Me.InvalidTable("Table ".concat(f," does not exist"));return this._allTables[f]},Xt);function Xt(f,p){var g=this;this._middlewares={},this.verno=0;var E=Xt.dependencies;this._options=p=s({addons:Xt.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},p),this._deps={indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},E=p.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var S,A,O,P,B,q={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ct,dbReadyPromise:null,cancelOpen:Ct,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:p.autoOpen};q.dbReadyPromise=new Ie(function(z){q.dbReadyResolve=z}),q.openCanceller=new Ie(function(z,Z){q.cancelOpen=Z}),this._state=q,this.name=f,this.on=ei(this,"populate","blocked","versionchange","close",{ready:[rn,Ct]}),this.once=function(z,Z){var H=function(){for(var Q=[],X=0;X<arguments.length;X++)Q[X]=arguments[X];g.on(z).unsubscribe(H),Z.apply(g,Q)};return g.on(z,H)},this.on.ready.subscribe=ke(this.on.ready.subscribe,function(z){return function(Z,H){Xt.vip(function(){var Q,X=g._state;X.openComplete?(X.dbOpenError||Ie.resolve().then(Z),H&&z(Z)):X.onReadyBeingFired?(X.onReadyBeingFired.push(Z),H&&z(Z)):(z(Z),Q=g,H||z(function W(){Q.on.ready.unsubscribe(Z),Q.on.ready.unsubscribe(W)}))})}}),this.Collection=(S=this,Rn(ul.prototype,function(re,W){this.db=S;var H=ya,Q=null;if(W)try{H=W()}catch(ae){Q=ae}var X=re._ctx,W=X.table,re=W.hook.reading.fire;this._ctx={table:W,index:X.index,isPrimKey:!X.index||W.schema.primKey.keyPath&&X.index===W.schema.primKey.name,range:H,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Q,or:X.or,valueMapper:re!==pi?re:null}})),this.Table=(A=this,Rn(ls.prototype,function(z,Z,H){this.db=A,this._tx=H,this.name=z,this.schema=Z,this.hook=A._allTables[z]?A._allTables[z].hook:ei(null,{creating:[Os,Ct],reading:[mi,pi],updating:[wo,Ct],deleting:[To,Ct]})})),this.Transaction=(O=this,Rn(js.prototype,function(z,Z,H,Q,X){var W=this;z!=="readonly"&&Z.forEach(function(re){re=(re=H[re])===null||re===void 0?void 0:re.yProps,re&&(Z=Z.concat(re.map(function(ae){return ae.updatesTable})))}),this.db=O,this.mode=z,this.storeNames=Z,this.schema=H,this.chromeTransactionDurability=Q,this.idbtrans=null,this.on=ei(this,"complete","error","abort"),this.parent=X||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ie(function(re,ae){W._resolve=re,W._reject=ae}),this._completion.then(function(){W.active=!1,W.on.complete.fire()},function(re){var ae=W.active;return W.active=!1,W.on.error.fire(re),W.parent?W.parent._reject(re):ae&&W.idbtrans&&W.idbtrans.abort(),xt(re)})})),this.Version=(P=this,Rn(Aa.prototype,function(z){this.db=P,this._cfg={version:z,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(B=this,Rn(Fi.prototype,function(z,Z,H){if(this.db=B,this._ctx={table:z,index:Z===":id"?null:Z,or:H},this._cmp=this._ascending=ot,this._descending=function(Q,X){return ot(X,Q)},this._max=function(Q,X){return 0<ot(Q,X)?Q:X},this._min=function(Q,X){return ot(Q,X)<0?Q:X},this._IDBKeyRange=B._deps.IDBKeyRange,!this._IDBKeyRange)throw new Me.MissingAPI})),this.on("versionchange",function(z){0<z.newVersion?console.warn("Another connection wants to upgrade database '".concat(g.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(g.name,"'. Closing db now to resume the delete request.")),g.close({disableAutoOpen:!1})}),this.on("blocked",function(z){!z.newVersion||z.newVersion<z.oldVersion?console.warn("Dexie.delete('".concat(g.name,"') was blocked")):console.warn("Upgrade '".concat(g.name,"' blocked by other connection holding version ").concat(z.oldVersion/10))}),this._maxKey=Gi(p.IDBKeyRange),this._createTransaction=function(z,Z,H,Q){return new g.Transaction(z,Z,H,g._options.chromeTransactionDurability,Q)},this._fireOnBlocked=function(z){g.on("blocked").fire(z),_i.filter(function(Z){return Z.name===g.name&&Z!==g&&!Z._state.vcFired}).map(function(Z){return Z.on("versionchange").fire(z)})},this.use(xa),this.use(hl),this.use(Fh),this.use(Lr),this.use(oi);var J=new Proxy(this,{get:function(z,Z,H){if(Z==="_vip")return!0;if(Z==="table")return function(X){return No(g.table(X),J)};var Q=Reflect.get(z,Z,H);return Q instanceof ls?No(Q,J):Z==="tables"?Q.map(function(X){return No(X,J)}):Z==="_createTransaction"?function(){return No(Q.apply(this,arguments),J)}:Q}});this.vip=J,E.forEach(function(z){return z(g)})}var Da,Tr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Mc=(dl.prototype.subscribe=function(f,p,g){return this._subscribe(f&&typeof f!="function"?f:{next:f,error:p,complete:g})},dl.prototype[Tr]=function(){return this},dl);function dl(f){this._subscribe=f}try{Da={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Da={indexedDB:null,IDBKeyRange:null}}function kc(f){var p,g=!1,E=new Mc(function(S){var A=G(f),O,P=!1,B={},q={},J={get closed(){return P},unsubscribe:function(){P||(P=!0,O&&O.abort(),z&&En.storagemutated.unsubscribe(H))}};S.start&&S.start(J);var z=!1,Z=function(){return Ir(Q)},H=function(X){c(B,X),v(q,B)&&Z()},Q=function(){var X,W,re;!P&&Da.indexedDB&&(B={},X={},O&&O.abort(),O=new AbortController,re=(function(ae){var fe=$n();try{A&&Qt();var ge=jt(f,ae);return ge=A?ge.finally(Ln):ge}finally{fe&&Cr()}})(W={subscr:X,signal:O.signal,requery:Z,querier:f,trans:null}),Promise.resolve(re).then(function(ae){g=!0,p=ae,P||W.signal.aborted||(B={},(function(fe){for(var ge in fe)if(I(fe,ge))return;return 1})(q=X)||z||(En(Mr,H),z=!0),Ir(function(){return!P&&S.next&&S.next(ae)}))},function(ae){g=!1,["DatabaseClosedError","AbortError"].includes(ae?.name)||P||Ir(function(){P||S.error&&S.error(ae)})}))};return setTimeout(Z,0),J});return E.hasValue=function(){return g},E.getValue=function(){return p},E}var Hs=Ri;function hu(f){var p=ds;try{ds=!0,En.storagemutated.fire(f),Ce(f,!0)}finally{ds=p}}M(Hs,s(s({},Bi),{delete:function(f){return new Hs(f,{addons:[]}).delete()},exists:function(f){return new Hs(f,{addons:[]}).open().then(function(p){return p.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(f){try{return p=Hs.dependencies,g=p.indexedDB,p=p.IDBKeyRange,(Vr(g)?Promise.resolve(g.databases()).then(function(E){return E.map(function(S){return S.name}).filter(function(S){return S!==as})}):Ca(g,p).toCollection().primaryKeys()).then(f)}catch{return xt(new Me.MissingAPI)}var p,g},defineClass:function(){return function(f){_(this,f)}},ignoreTransaction:function(f){return Ne.trans?Hn(Ne.transless,f):f()},vip:Ra,async:function(f){return function(){try{var p=Rt(f.apply(this,arguments));return p&&typeof p.then=="function"?p:Ie.resolve(p)}catch(g){return xt(g)}}},spawn:function(f,p,g){try{var E=Rt(f.apply(g,p||[]));return E&&typeof E.then=="function"?E:Ie.resolve(E)}catch(S){return xt(S)}},currentTransaction:{get:function(){return Ne.trans||null}},waitFor:function(f,p){return p=Ie.resolve(typeof f=="function"?Hs.ignoreTransaction(f):f).timeout(p||6e4),Ne.trans?Ne.trans.waitFor(p):p},Promise:Ie,debug:{get:function(){return Pn},set:function(f){ol(f)}},derive:pe,extend:_,props:M,override:ke,Events:ei,on:En,liveQuery:kc,extendObservabilitySet:c,getByKeyPath:Ge,setByKeyPath:L,delByKeyPath:function(f,p){typeof p=="string"?L(f,p,void 0):"length"in p&&[].map.call(p,function(g){L(f,g,void 0)})},shallowClone:k,deepClone:V,getObjectDiff:jr,cmp:ot,asap:ht,minKey:-1/0,addons:[],connections:_i,errnames:gt,dependencies:Da,cache:w,semVer:"4.2.1",version:"4.2.1".split(".").map(function(f){return parseInt(f)}).reduce(function(f,p,g){return f+p/Math.pow(10,2*g)})})),Hs.maxKey=Gi(Hs.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(En(Mr,function(f){ds||(f=new CustomEvent(br,{detail:f}),ds=!0,dispatchEvent(f),ds=!1)}),addEventListener(br,function(f){f=f.detail,ds||hu(f)}));var Na,ds=!1,cr=function(){};return typeof BroadcastChannel<"u"&&((cr=function(){(Na=new BroadcastChannel(br)).onmessage=function(f){return f.data&&hu(f.data)}})(),typeof Na.unref=="function"&&Na.unref(),En(Mr,function(f){ds||Na.postMessage(f)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(f){if(!Ri.disableBfCache&&f.persisted){Pn&&console.debug("Dexie: handling persisted pagehide"),Na?.close();for(var p=0,g=_i;p<g.length;p++)g[p].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(f){!Ri.disableBfCache&&f.persisted&&(Pn&&console.debug("Dexie: handling persisted pageshow"),cr(),hu({all:new Tn(-1/0,[[]])}))})),Ie.rejectionMapper=function(f,p){return!f||f instanceof xe||f instanceof TypeError||f instanceof SyntaxError||!f.name||!rs[f.name]?f:(p=new rs[f.name](p||f.message,f),"stack"in f&&te(p,"stack",{get:function(){return this.inner.stack}}),p)},ol(Pn),s(Ri,Object.freeze({__proto__:null,Dexie:Ri,liveQuery:kc,Entity:Co,cmp:ot,PropModification:Dr,replacePrefix:function(f,p){return new Dr({replacePrefix:[f,p]})},add:function(f){return new Dr({add:f})},remove:function(f){return new Dr({remove:f})},default:Ri,RangeSet:Tn,mergeRanges:Pr,rangesOverlap:Kn}),{default:Ri}),Ri})})(Kf)),Kf.exports}var Pw=Vw();const $p=wm(Pw),x_=Symbol.for("Dexie"),ih=globalThis[x_]||(globalThis[x_]=$p);if($p.semVer!==ih.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${$p.semVer} and ${ih.semVer}`);const{liveQuery:ZD,mergeRanges:eN,rangesOverlap:tN,RangeSet:nN,cmp:rN,Entity:iN,PropModification:sN,replacePrefix:aN,add:oN,remove:lN,DexieYProvider:uN}=ih,nr=new ih("GeminiPodcastFlashcards");nr.version(2).stores({vocab:"id, word, status, nextReview, reviewCount, updatedAt"});async function Lw(){if(await nr.vocab.count()===0)try{const n="/public/flashcards/data.json".replace("//","/");console.log(`Fetching data from: ${n}`);const s=await fetch(n);if(!s.ok)throw new Error(`Failed to fetch data.json (${s.status})`);const u=(await s.json()).map(d=>({...d,status:d.status||"new",reviewCount:d.reviewCount||0,nextReview:d.nextReview||Date.now(),updatedAt:Date.now()}));await nr.vocab.bulkAdd(u),console.log(`Initialized DB with ${u.length} cards.`)}catch(e){console.error("Error initializing database:",e)}}const jw=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Uw=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),O_=i=>{const e=Uw(i);return e.charAt(0).toUpperCase()+e.slice(1)},Ab=(...i)=>i.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),zw=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Bw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const qw=Te.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:d,...y},_)=>Te.createElement("svg",{ref:_,...Bw,width:e,height:e,stroke:i,strokeWidth:s?Number(n)*24/Number(e):n,className:Ab("lucide",o),...!u&&!zw(y)&&{"aria-hidden":"true"},...y},[...d.map(([b,R])=>Te.createElement(b,R)),...Array.isArray(u)?u:[u]]));const zi=(i,e)=>{const n=Te.forwardRef(({className:s,...o},u)=>Te.createElement(qw,{ref:u,iconNode:e,className:Ab(`lucide-${jw(O_(i))}`,`lucide-${i}`,s),...o}));return n.displayName=O_(i),n};const Hw=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Fw=zi("layers",Hw);const Kw=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Gw=zi("lightbulb",Kw);const Yw=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Qw=zi("loader-circle",Yw);const Xw=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],$w=zi("mic",Xw);const Jw=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],Ww=zi("mouse-pointer-click",Jw);const Zw=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],eS=zi("pen-tool",Zw);const tS=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],nS=zi("play",tS);const rS=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],iS=zi("search",rS);const sS=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],D_=zi("sparkles",sS);const aS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],oS=zi("square",aS);const lS=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],uS=zi("trash-2",lS);const cS=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],kf=zi("volume-2",cS);function Cb(i,e){const n=Date.now(),s=60*1e3,o=1440*60*1e3,u=Number(e);if(isNaN(u)||u<0||u>5)throw new Error("Grade must be a number between 0 and 5");let{easeFactor:d=2.5,interval:y=0,reviewCount:_=0}=i;u>=3?(y===0?y=1:y===1?y=6:y=Math.round(y*d),_+=1):y=0;let b=d+(.1-(5-u)*(.08+(5-u)*.02));b<1.3&&(b=1.3);const R=y===0?n+10*s:n+y*o,I=u>=3?"review":"learning";return{easeFactor:parseFloat(b.toFixed(2)),interval:y,nextReview:R,status:I,reviewCount:_,updatedAt:n}}function fS(){const[i,e]=Te.useState(!1),[n,s]=Te.useState(null),[o,u]=Te.useState(null),d=Te.useRef(null),y=Te.useRef([]);return Te.useEffect(()=>()=>{n&&URL.revokeObjectURL(n)},[n]),{isRecording:i,audioUrl:n,error:o,startRecording:async()=>{try{u(null);const I=await navigator.mediaDevices.getUserMedia({audio:!0});d.current=new MediaRecorder(I),y.current=[],d.current.ondataavailable=M=>{M.data.size>0&&y.current.push(M.data)},d.current.onstop=()=>{const M=new Blob(y.current,{type:"audio/webm"}),$=URL.createObjectURL(M);s($),I.getTracks().forEach(te=>te.stop())},d.current.start(),e(!0)}catch(I){console.error("Error accessing microphone:",I),u("Microphone access denied. Please check your permissions.")}},stopRecording:()=>{d.current&&i&&(d.current.stop(),e(!1))},clearRecording:()=>{n&&(URL.revokeObjectURL(n),s(null)),e(!1),u(null)}}}var N_;(function(i){i.STRING="string",i.NUMBER="number",i.INTEGER="integer",i.BOOLEAN="boolean",i.ARRAY="array",i.OBJECT="object"})(N_||(N_={}));var M_;(function(i){i.LANGUAGE_UNSPECIFIED="language_unspecified",i.PYTHON="python"})(M_||(M_={}));var k_;(function(i){i.OUTCOME_UNSPECIFIED="outcome_unspecified",i.OUTCOME_OK="outcome_ok",i.OUTCOME_FAILED="outcome_failed",i.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(k_||(k_={}));const V_=["user","model","function","system"];var P_;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(P_||(P_={}));var L_;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(L_||(L_={}));var j_;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(j_||(j_={}));var U_;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER"})(U_||(U_={}));var Wu;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.OTHER="OTHER"})(Wu||(Wu={}));var z_;(function(i){i.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",i.RETRIEVAL_QUERY="RETRIEVAL_QUERY",i.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",i.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",i.CLASSIFICATION="CLASSIFICATION",i.CLUSTERING="CLUSTERING"})(z_||(z_={}));var B_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(B_||(B_={}));var q_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(q_||(q_={}));class gr extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class jl extends gr{constructor(e,n){super(e),this.response=n}}class Rb extends gr{constructor(e,n,s,o){super(e),this.status=n,this.statusText=s,this.errorDetails=o}}class lo extends gr{}class Ib extends gr{}const hS="https://generativelanguage.googleapis.com",dS="v1beta",pS="0.24.1",mS="genai-js";var Jo;(function(i){i.GENERATE_CONTENT="generateContent",i.STREAM_GENERATE_CONTENT="streamGenerateContent",i.COUNT_TOKENS="countTokens",i.EMBED_CONTENT="embedContent",i.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Jo||(Jo={}));class gS{constructor(e,n,s,o,u){this.model=e,this.task=n,this.apiKey=s,this.stream=o,this.requestOptions=u}toString(){var e,n;const s=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||dS;let u=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||hS}/${s}/${this.model}:${this.task}`;return this.stream&&(u+="?alt=sse"),u}}function yS(i){const e=[];return i?.apiClient&&e.push(i.apiClient),e.push(`${mS}/${pS}`),e.join(" ")}async function vS(i){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",yS(i.requestOptions)),n.append("x-goog-api-key",i.apiKey);let s=(e=i.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(o){throw new lo(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${o.message}`)}for(const[o,u]of s.entries()){if(o==="x-goog-api-key")throw new lo(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new lo(`Header name ${o} can only be set using the apiClient field`);n.append(o,u)}}return n}async function _S(i,e,n,s,o,u){const d=new gS(i,e,n,s,u);return{url:d.toString(),fetchOptions:Object.assign(Object.assign({},wS(u)),{method:"POST",headers:await vS(d),body:o})}}async function _c(i,e,n,s,o,u={},d=fetch){const{url:y,fetchOptions:_}=await _S(i,e,n,s,o,u);return bS(y,_,d)}async function bS(i,e,n=fetch){let s;try{s=await n(i,e)}catch(o){ES(o,i)}return s.ok||await TS(s,i),s}function ES(i,e){let n=i;throw n.name==="AbortError"?(n=new Ib(`Request aborted when fetching ${e.toString()}: ${i.message}`),n.stack=i.stack):i instanceof Rb||i instanceof lo||(n=new gr(`Error fetching from ${e.toString()}: ${i.message}`),n.stack=i.stack),n}async function TS(i,e){let n="",s;try{const o=await i.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,s=o.error.details)}catch{}throw new Rb(`Error fetching from ${e.toString()}: [${i.status} ${i.statusText}] ${n}`,i.status,i.statusText,s)}function wS(i){const e={};if(i?.signal!==void 0||i?.timeout>=0){const n=new AbortController;i?.timeout>=0&&setTimeout(()=>n.abort(),i.timeout),i?.signal&&i.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}function Am(i){return i.text=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Gf(i.candidates[0]))throw new jl(`${no(i)}`,i);return SS(i)}else if(i.promptFeedback)throw new jl(`Text not available. ${no(i)}`,i);return""},i.functionCall=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Gf(i.candidates[0]))throw new jl(`${no(i)}`,i);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),H_(i)[0]}else if(i.promptFeedback)throw new jl(`Function call not available. ${no(i)}`,i)},i.functionCalls=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Gf(i.candidates[0]))throw new jl(`${no(i)}`,i);return H_(i)}else if(i.promptFeedback)throw new jl(`Function call not available. ${no(i)}`,i)},i}function SS(i){var e,n,s,o;const u=[];if(!((n=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const d of(o=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)d.text&&u.push(d.text),d.executableCode&&u.push("\n```"+d.executableCode.language+`
`+d.executableCode.code+"\n```\n"),d.codeExecutionResult&&u.push("\n```\n"+d.codeExecutionResult.output+"\n```\n");return u.length>0?u.join(""):""}function H_(i){var e,n,s,o;const u=[];if(!((n=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const d of(o=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)d.functionCall&&u.push(d.functionCall);if(u.length>0)return u}const AS=[Wu.RECITATION,Wu.SAFETY,Wu.LANGUAGE];function Gf(i){return!!i.finishReason&&AS.includes(i.finishReason)}function no(i){var e,n,s;let o="";if((!i.candidates||i.candidates.length===0)&&i.promptFeedback)o+="Response was blocked",!((e=i.promptFeedback)===null||e===void 0)&&e.blockReason&&(o+=` due to ${i.promptFeedback.blockReason}`),!((n=i.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${i.promptFeedback.blockReasonMessage}`);else if(!((s=i.candidates)===null||s===void 0)&&s[0]){const u=i.candidates[0];Gf(u)&&(o+=`Candidate was blocked due to ${u.finishReason}`,u.finishMessage&&(o+=`: ${u.finishMessage}`))}return o}function oc(i){return this instanceof oc?(this.v=i,this):new oc(i)}function CS(i,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(i,e||[]),o,u=[];return o={},d("next"),d("throw"),d("return"),o[Symbol.asyncIterator]=function(){return this},o;function d(M){s[M]&&(o[M]=function($){return new Promise(function(te,pe){u.push([M,$,te,pe])>1||y(M,$)})})}function y(M,$){try{_(s[M]($))}catch(te){I(u[0][3],te)}}function _(M){M.value instanceof oc?Promise.resolve(M.value.v).then(b,R):I(u[0][2],M)}function b(M){y("next",M)}function R(M){y("throw",M)}function I(M,$){M($),u.shift(),u.length&&y(u[0][0],u[0][1])}}const F_=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function RS(i){const e=i.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=OS(e),[s,o]=n.tee();return{stream:xS(s),response:IS(o)}}async function IS(i){const e=[],n=i.getReader();for(;;){const{done:s,value:o}=await n.read();if(s)return Am(DS(e));e.push(o)}}function xS(i){return CS(this,arguments,function*(){const n=i.getReader();for(;;){const{value:s,done:o}=yield oc(n.read());if(o)break;yield yield oc(Am(s))}})}function OS(i){const e=i.getReader();return new ReadableStream({start(s){let o="";return u();function u(){return e.read().then(({value:d,done:y})=>{if(y){if(o.trim()){s.error(new gr("Failed to parse stream"));return}s.close();return}o+=d;let _=o.match(F_),b;for(;_;){try{b=JSON.parse(_[1])}catch{s.error(new gr(`Error parsing JSON response: "${_[1]}"`));return}s.enqueue(b),o=o.substring(_[0].length),_=o.match(F_)}return u()}).catch(d=>{let y=d;throw y.stack=d.stack,y.name==="AbortError"?y=new Ib("Request aborted when reading from the stream"):y=new gr("Error reading from the stream"),y})}}})}function DS(i){const e=i[i.length-1],n={promptFeedback:e?.promptFeedback};for(const s of i){if(s.candidates){let o=0;for(const u of s.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=u.citationMetadata,n.candidates[o].groundingMetadata=u.groundingMetadata,n.candidates[o].finishReason=u.finishReason,n.candidates[o].finishMessage=u.finishMessage,n.candidates[o].safetyRatings=u.safetyRatings,u.content&&u.content.parts){n.candidates[o].content||(n.candidates[o].content={role:u.content.role||"user",parts:[]});const d={};for(const y of u.content.parts)y.text&&(d.text=y.text),y.functionCall&&(d.functionCall=y.functionCall),y.executableCode&&(d.executableCode=y.executableCode),y.codeExecutionResult&&(d.codeExecutionResult=y.codeExecutionResult),Object.keys(d).length===0&&(d.text=""),n.candidates[o].content.parts.push(d)}o++}s.usageMetadata&&(n.usageMetadata=s.usageMetadata)}return n}async function xb(i,e,n,s){const o=await _c(e,Jo.STREAM_GENERATE_CONTENT,i,!0,JSON.stringify(n),s);return RS(o)}async function Ob(i,e,n,s){const u=await(await _c(e,Jo.GENERATE_CONTENT,i,!1,JSON.stringify(n),s)).json();return{response:Am(u)}}function Db(i){if(i!=null){if(typeof i=="string")return{role:"system",parts:[{text:i}]};if(i.text)return{role:"system",parts:[i]};if(i.parts)return i.role?i:{role:"system",parts:i.parts}}}function lc(i){let e=[];if(typeof i=="string")e=[{text:i}];else for(const n of i)typeof n=="string"?e.push({text:n}):e.push(n);return NS(e)}function NS(i){const e={role:"user",parts:[]},n={role:"function",parts:[]};let s=!1,o=!1;for(const u of i)"functionResponse"in u?(n.parts.push(u),o=!0):(e.parts.push(u),s=!0);if(s&&o)throw new gr("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!o)throw new gr("No content is provided for sending chat message.");return s?e:n}function MS(i,e){var n;let s={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(n=e?.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=i.generateContentRequest!=null;if(i.contents){if(o)throw new lo("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=i.contents}else if(o)s=Object.assign(Object.assign({},s),i.generateContentRequest);else{const u=lc(i);s.contents=[u]}return{generateContentRequest:s}}function K_(i){let e;return i.contents?e=i:e={contents:[lc(i)]},i.systemInstruction&&(e.systemInstruction=Db(i.systemInstruction)),e}function kS(i){return typeof i=="string"||Array.isArray(i)?{content:lc(i)}:i}const G_=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],VS={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function PS(i){let e=!1;for(const n of i){const{role:s,parts:o}=n;if(!e&&s!=="user")throw new gr(`First content should be with role 'user', got ${s}`);if(!V_.includes(s))throw new gr(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(V_)}`);if(!Array.isArray(o))throw new gr("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new gr("Each Content should have at least one part");const u={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const y of o)for(const _ of G_)_ in y&&(u[_]+=1);const d=VS[s];for(const y of G_)if(!d.includes(y)&&u[y]>0)throw new gr(`Content with role '${s}' can't contain '${y}' part`);e=!0}}function Y_(i){var e;if(i.candidates===void 0||i.candidates.length===0)return!1;const n=(e=i.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const s of n.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}const Q_="SILENT_ERROR";class LS{constructor(e,n,s,o={}){this.model=n,this.params=s,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,s?.history&&(PS(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var s,o,u,d,y,_;await this._sendPromise;const b=lc(e),R={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(y=this.params)===null||y===void 0?void 0:y.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,b]},I=Object.assign(Object.assign({},this._requestOptions),n);let M;return this._sendPromise=this._sendPromise.then(()=>Ob(this._apiKey,this.model,R,I)).then($=>{var te;if(Y_($.response)){this._history.push(b);const pe=Object.assign({parts:[],role:"model"},(te=$.response.candidates)===null||te===void 0?void 0:te[0].content);this._history.push(pe)}else{const pe=no($.response);pe&&console.warn(`sendMessage() was unsuccessful. ${pe}. Inspect response object for details.`)}M=$}).catch($=>{throw this._sendPromise=Promise.resolve(),$}),await this._sendPromise,M}async sendMessageStream(e,n={}){var s,o,u,d,y,_;await this._sendPromise;const b=lc(e),R={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(y=this.params)===null||y===void 0?void 0:y.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,b]},I=Object.assign(Object.assign({},this._requestOptions),n),M=xb(this._apiKey,this.model,R,I);return this._sendPromise=this._sendPromise.then(()=>M).catch($=>{throw new Error(Q_)}).then($=>$.response).then($=>{if(Y_($)){this._history.push(b);const te=Object.assign({},$.candidates[0].content);te.role||(te.role="model"),this._history.push(te)}else{const te=no($);te&&console.warn(`sendMessageStream() was unsuccessful. ${te}. Inspect response object for details.`)}}).catch($=>{$.message!==Q_&&console.error($)}),M}}async function jS(i,e,n,s){return(await _c(e,Jo.COUNT_TOKENS,i,!1,JSON.stringify(n),s)).json()}async function US(i,e,n,s){return(await _c(e,Jo.EMBED_CONTENT,i,!1,JSON.stringify(n),s)).json()}async function zS(i,e,n,s){const o=n.requests.map(d=>Object.assign(Object.assign({},d),{model:e}));return(await _c(e,Jo.BATCH_EMBED_CONTENTS,i,!1,JSON.stringify({requests:o}),s)).json()}class X_{constructor(e,n,s={}){this.apiKey=e,this._requestOptions=s,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=Db(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var s;const o=K_(e),u=Object.assign(Object.assign({},this._requestOptions),n);return Ob(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),u)}async generateContentStream(e,n={}){var s;const o=K_(e),u=Object.assign(Object.assign({},this._requestOptions),n);return xb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),u)}startChat(e){var n;return new LS(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const s=MS(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return jS(this.apiKey,this.model,s,o)}async embedContent(e,n={}){const s=kS(e),o=Object.assign(Object.assign({},this._requestOptions),n);return US(this.apiKey,this.model,s,o)}async batchEmbedContents(e,n={}){const s=Object.assign(Object.assign({},this._requestOptions),n);return zS(this.apiKey,this.model,e,s)}}class Pp{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new gr("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new X_(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,s){if(!e.name)throw new lo("Cached content must contain a `name` field.");if(!e.model)throw new lo("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const d of o)if(n?.[d]&&e[d]&&n?.[d]!==e[d]){if(d==="model"){const y=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,_=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(y===_)continue}throw new lo(`Different value for "${d}" specified in modelParams (${n[d]}) and cachedContent (${e[d]})`)}const u=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new X_(this.apiKey,u,s)}}const BS={models:{default:"gemini-2.5-flash"}},qS={ai:BS},$_=15e3;class HS{constructor(){this.apiKeyKey="gemini_api_key_byok",this.modelName=qS.ai?.models?.default}getApiKey(){return localStorage.getItem(this.apiKeyKey)||sessionStorage.getItem(this.apiKeyKey)}isPersistent(){return!!localStorage.getItem(this.apiKeyKey)}setApiKey(e,n=!1){n?(localStorage.setItem(this.apiKeyKey,e),sessionStorage.removeItem(this.apiKeyKey)):(sessionStorage.setItem(this.apiKeyKey,e),localStorage.removeItem(this.apiKeyKey))}removeApiKey(){sessionStorage.removeItem(this.apiKeyKey),localStorage.removeItem(this.apiKeyKey)}hasKey(){return!!this.getApiKey()}async getParaphrase(e,n){const s=this.getApiKey();if(!s)throw new Error("API Key not found. Please configure it in Settings.");const u=new Pp(s).getGenerativeModel({model:this.modelName}),d=`
      Role: English Language Tutor for B1/B2 learners.
      Task: Explain the word "${e}" in simple English.
      Context: "${n}"
      
      Constraints:
      1. Use simple vocabulary (CEFR B1 level).
      2. Keep it concise (under 30 words).
      3. Do NOT simply repeat the definition; explain it naturally.
      4. Output plain text only (no markdown).
    `;return this._callGemini(u,d,!1,!1)}async generateCardDetails(e){const n=this.getApiKey();if(!n)throw new Error("API Key not found in session. Please configure it in Settings again.");const o=new Pp(n).getGenerativeModel({model:this.modelName}),u=`
      You are an English vocabulary expert helping a Traditional Chinese (Taiwan) learner.
      Define the word: "${e}".
      
      Return ONLY a raw JSON object (no markdown formatting, no code blocks) with the following keys:
      - "definition": A clear, concise English definition suitable for a flashcard.
      - "ipa": The IPA phonetic transcription.
      - "context": A short, natural example sentence using the word (Keep this in English).
      - "translation": The Traditional Chinese (Taiwan) translation of the word. Ensure it is NOT Simplified Chinese.
    `;return this._callGemini(o,u)}async analyzeTranscript(e,n){const s=this.getApiKey();if(!s)throw new Error("API Key not found. Please configure it in Settings.");const u=new Pp(s).getGenerativeModel({model:this.modelName});let d="";n==="auto"?d="Select the most important and difficult vocabulary words (approximately 5 to 15 words depending on text length).":d=`Select strictly up to ${n} most important vocabulary words.`;const y=`
      You are an expert language tutor analyzing a podcast transcript for a Traditional Chinese (Taiwan) learner.
      
      Goal: Extract vocabulary words from the provided text.
      Constraint: ${d}
      
      For each word, provide:
      1. "word": The target word (lemma).
      2. "ipa": IPA phonetic transcription.
      3. "definition": A concise English definition relevant to the context in the transcript.
      4. "context": The exact sentence or a slightly simplified version from the text where the word appears (Keep in English).
      5. "translation": The Traditional Chinese (Taiwan) translation of the word. Strictly NO Simplified Chinese.

      Input Text:
      """
      ${e.substring(0,3e4)} 
      """

      Return ONLY a raw JSON array (no markdown, no code blocks) of objects.
    `;return this._callGemini(u,y,!0)}async _fetchWithTimeout(e){let n;const s=new Promise((o,u)=>{n=setTimeout(()=>{u(new Error(`Request timed out after ${$_/1e3} seconds`))},$_)});try{return await Promise.race([e,s])}finally{clearTimeout(n)}}async _callGemini(e,n,s=!1,o=!0){try{console.log(`Calling AI Model: ${this.modelName}`);const _=(await(await this._fetchWithTimeout(e.generateContent(n))).response).text().replace(/```json|```/g,"").trim();if(!o)return _;let b;try{b=JSON.parse(_)}catch(I){const M=_.indexOf(s?"[":"{"),$=_.lastIndexOf(s?"]":"}")+1;if(M!==-1&&$!==-1)b=JSON.parse(_.substring(M,$));else throw I}const R=I=>{I.ipa&&(I.ipa=I.ipa.replace(new RegExp("^[/\\[]|[/\\]]$","g"),""))};return Array.isArray(b)?b.forEach(R):R(b),b}catch(u){throw console.error("AI Generation failed:",u),new Error(`AI Error: ${u.message}`)}}}const bs=new HS;function FS({context:i,word:e,definition:n}){const[s,o]=Te.useState(0);Te.useEffect(()=>{o(0)},[e]);const u=_=>{_.stopPropagation(),s<2&&o(b=>b+1)},d=()=>!e||s===0?"[......]":`${e.charAt(0)}[......]`,y=()=>{if(!i||!e)return null;const _=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),b=new RegExp(`\\b${_}\\b`,"gi"),R=i.split(b);return R.length===1?(console.warn(`[ClozeSentence] Word "${e}" not found in context.`),D.jsx("div",{style:{fontSize:"1.4rem"},children:i})):D.jsx("div",{style:{fontSize:"1.4rem",lineHeight:"1.6",color:"#e0e0e0",textAlign:"left"},children:R.map((I,M)=>D.jsxs(Sb.Fragment,{children:[I,M<R.length-1&&D.jsx("span",{onClick:u,style:{color:"#88ccca",fontWeight:"bold",margin:"0 5px",cursor:"pointer",borderBottom:"2px dashed #88ccca",transition:"all 0.2s"},title:"Click for hint",children:d()})]},M))})};return D.jsxs("div",{className:"cloze-container",style:{width:"100%",padding:"0 0.5rem"},children:[y(),s>=2&&n&&D.jsxs("div",{style:{marginTop:"1.5rem",padding:"10px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",borderLeft:"3px solid #ffd54f",fontSize:"0.9rem",color:"#eee",textAlign:"left",animation:"fadeIn 0.3s"},children:[D.jsxs("strong",{style:{color:"#ffd54f",display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px"},children:[D.jsx(Gw,{size:14})," Definition Hint"]}),n]}),s<2&&D.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.8rem",color:"#666",display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:[D.jsx(Ww,{size:14}),"Click the blank or press 'H' for hint (",s,"/2)"]}),D.jsx("style",{children:`
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
      `})]})}function KS({card:i,onUpdate:e}){const[n,s]=Te.useState(!1),[o,u]=Te.useState(!1),[d,y]=Te.useState(null),[_,b]=Te.useState(!1),[R,I]=Te.useState(()=>localStorage.getItem("gp_settings_learning_mode")||"sniper"),{isRecording:M,audioUrl:$,startRecording:te,stopRecording:pe,clearRecording:_e,error:je}=fS();Te.useEffect(()=>{if(!n)y(null),_e();else if((JSON.parse(localStorage.getItem("gp_settings_autoplay_tts"))||!1)&&i.context){const F=setTimeout(()=>{ht(i.context,{stopPropagation:()=>{}})},300);return()=>clearTimeout(F)}},[n,i.id]),Te.useEffect(()=>{const N=()=>{I(localStorage.getItem("gp_settings_learning_mode")||"sniper")};return window.addEventListener("storage",N),()=>window.removeEventListener("storage",N)},[]);const qe=()=>{s(!n),u(!1)},ke=(N,F)=>{F.stopPropagation();try{const V=Cb(i,N),Dt={...i,...V};e(Dt),s(!1),u(!1)}catch(V){console.error("Error updating card:",V)}},tt=N=>{N.stopPropagation(),u(!o)},ht=(N,F)=>{if(F&&F.stopPropagation(),!N)return;window.speechSynthesis.cancel();const V=new SpeechSynthesisUtterance(N);V.lang="en-US",V.rate=1,window.speechSynthesis.speak(V)},Ge=async N=>{if(N.stopPropagation(),!d){b(!0);try{const F=typeof i.context=="string"?i.context:i.context?.text||"",V=await bs.getParaphrase(i.word,F);y(V)}catch{y("Unable to connect to AI Coach. Check your API Key settings.")}finally{b(!1)}}},L=()=>!(R==="reading"||!i.context||(i.interval||0)<3),k=()=>{if(!L()){const F=(i.interval||0)<3;return D.jsxs(D.Fragment,{children:[D.jsx("h2",{style:{fontSize:"2.5rem",margin:0,fontWeight:"bold"},children:i.word}),R==="sniper"&&F&&D.jsx("span",{style:{fontSize:"0.8rem",color:"#4caf50",marginTop:"0.5rem",display:"block",fontWeight:"bold"},children:" New Card (Learning Phase)"})]})}return D.jsx(FS,{context:i.context,word:i.word,definition:i.definition})},j=N=>N.stopPropagation(),Y={background:"transparent",border:"none",cursor:"pointer",color:"#88ccca",padding:"4px",marginLeft:"8px",verticalAlign:"middle",transition:"opacity 0.2s",display:"inline-flex",alignItems:"center",justifyContent:"center"};return D.jsxs("div",{className:"flashcard-container",onClick:qe,style:{border:"1px solid #444",padding:"1.5rem",borderRadius:"12px",textAlign:"center",cursor:"pointer",minHeight:"220px",display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"#25262b",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"transform 0.2s",color:"#e0e0e0",position:"relative",maxHeight:"75vh",overflow:"hidden"},children:[!n&&D.jsxs("div",{className:"front",children:[D.jsxs("div",{style:{marginBottom:"1.5rem",padding:"0 10px",minHeight:"120px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[k(),D.jsx("button",{onClick:N=>ht(L()?i.context:i.word,N),style:{...Y,marginTop:"10px"},title:"Listen",children:D.jsx(kf,{size:24})})]}),i.ipa&&!L()&&D.jsxs("p",{style:{fontSize:"1.2rem",color:"#88ccca",fontFamily:"monospace",margin:"0 0 1.5rem 0"},children:["/",i.ipa,"/"]}),D.jsx("p",{style:{color:"#666",fontSize:"0.9rem"},children:"(Click to flip)"}),D.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",fontSize:"0.8rem",color:"#555"},children:["EF: ",i.easeFactor||"2.5"," | Int: ",i.interval||0,"d"]})]}),n&&D.jsxs("div",{className:"back",style:{display:"flex",flexDirection:"column",height:"100%"},children:[D.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"0.5rem"},children:[D.jsx("h2",{style:{fontSize:"1.8rem",color:"#fff",margin:0},children:i.word}),D.jsx("button",{onClick:N=>ht(i.word,N),style:{...Y,color:"#88ccca"},children:D.jsx(kf,{size:22})})]}),i.ipa&&D.jsxs("p",{style:{fontSize:"1rem",color:"#888",fontFamily:"monospace",margin:"0 0 0.8rem 0"},children:["/",i.ipa,"/"]}),D.jsxs("div",{style:{marginBottom:"0.8rem"},onClick:j,children:[D.jsx("button",{onClick:tt,style:{background:"transparent",border:"1px solid #555",color:"#888",borderRadius:"15px",padding:"2px 10px",fontSize:"0.75rem",cursor:"pointer",marginBottom:"0.2rem"},children:o?"Hide Translation":"Show Translation"}),o&&D.jsx("div",{style:{fontSize:"1.1rem",color:"#e91e63",fontWeight:"bold",marginTop:"0.5rem"},children:i.translation||"(No translation)"})]}),D.jsxs("div",{style:{textAlign:"left",lineHeight:"1.6",flexGrow:1,overflowY:"auto",paddingRight:"4px",marginBottom:"1rem",scrollbarWidth:"thin",scrollbarColor:"#444 transparent"},onClick:j,children:[D.jsxs("div",{style:{marginBottom:"1rem",backgroundColor:"rgba(255, 255, 255, 0.05)",padding:"10px",borderRadius:"6px",borderLeft:"4px solid #88ccca"},children:[D.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[D.jsx("strong",{style:{color:"#88ccca",fontSize:"0.8rem",textTransform:"uppercase"},children:"Definition"}),D.jsx("button",{onClick:N=>ht(i.definition,N),style:{...Y,marginLeft:"8px",padding:0},children:D.jsx(kf,{size:16})})]}),D.jsx("div",{style:{fontSize:"1.1rem",color:"#ffffff",fontWeight:"500",lineHeight:"1.4"},children:i.definition})]}),i.collocations&&i.collocations.length>0&&D.jsxs("div",{style:{marginBottom:"1rem",padding:"0 5px"},children:[D.jsxs("strong",{style:{color:"#ffb74d",fontSize:"0.8rem",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"5px"},children:[D.jsx(Fw,{size:12})," Collocations"]}),D.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginTop:"5px"},children:i.collocations.map((N,F)=>D.jsx("span",{style:{backgroundColor:"rgba(255, 183, 77, 0.1)",color:"#ffcc80",padding:"2px 8px",borderRadius:"4px",fontSize:"0.9rem",border:"1px solid rgba(255, 183, 77, 0.3)"},children:N},F))})]}),d&&D.jsxs("div",{style:{marginBottom:"1rem",backgroundColor:"rgba(233, 30, 99, 0.1)",padding:"10px",borderRadius:"6px",borderLeft:"4px solid #e91e63",animation:"fadeIn 0.3s"},children:[D.jsxs("strong",{style:{color:"#e91e63",fontSize:"0.8rem",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"5px"},children:[D.jsx(D_,{size:12})," AI Tutor"]}),D.jsx("p",{style:{margin:"5px 0 0",fontSize:"0.95rem",color:"#ffcdd2"},children:d})]}),D.jsxs("div",{style:{padding:"0 10px"},children:[D.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[D.jsx("strong",{style:{color:"#aaa",fontSize:"0.8rem"},children:"Context:"}),D.jsx("button",{onClick:N=>ht(i.context,N),style:{...Y,marginLeft:"6px",color:"#aaa"},children:D.jsx(kf,{size:16})})]}),D.jsx("div",{style:{marginTop:"2px"},children:D.jsx("em",{style:{color:"#a5d6a7",fontSize:"0.95rem"},children:i.context})})]})]}),D.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"8px",marginBottom:"1rem"},onClick:j,children:[D.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[M?D.jsx("button",{onClick:pe,title:"Stop Recording",style:{background:"#e53935",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff",animation:"pulse 1.5s infinite"},children:D.jsx(oS,{size:14,fill:"currentColor"})}):D.jsx("button",{onClick:te,title:"Shadowing Record",style:{background:"#333",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff"},children:D.jsx($w,{size:16})}),$&&!M&&D.jsxs(D.Fragment,{children:[D.jsx("audio",{src:$,style:{display:"none"},id:"shadowing-playback"}),D.jsx("button",{onClick:()=>document.getElementById("shadowing-playback").play(),style:{background:"transparent",border:"1px solid #4caf50",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#4caf50"},children:D.jsx(nS,{size:14,fill:"currentColor"})}),D.jsx("button",{onClick:_e,style:{background:"transparent",border:"none",cursor:"pointer",color:"#666"},children:D.jsx(uS,{size:16})})]}),je&&D.jsx("span",{style:{fontSize:"0.7rem",color:"#e53935"},children:"Mic Error"})]}),D.jsx("div",{children:D.jsxs("button",{onClick:Ge,disabled:_||!!d,style:{background:"transparent",border:"1px solid #e91e63",borderRadius:"15px",padding:"4px 10px",fontSize:"0.75rem",color:"#e91e63",cursor:_||d?"default":"pointer",opacity:_||d?.5:1,display:"flex",alignItems:"center",gap:"5px"},children:[_?D.jsx(Qw,{size:12,className:"spin"}):D.jsx(D_,{size:12}),d?"Explained":"Explain Simply"]})})]}),D.jsxs("div",{className:"actions",onClick:j,style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginTop:"auto",paddingTop:"0.5rem",borderTop:"1px solid #333"},children:[D.jsxs("button",{onClick:N=>ke(1,N),style:Vf("#e53935"),title:"Reset",children:["Again ",D.jsx("div",{style:Pf,children:"< 10m"})]}),D.jsxs("button",{onClick:N=>ke(3,N),style:Vf("#fb8c00"),title:"Hard",children:["Hard ",D.jsxs("div",{style:Pf,children:["~",Lp(Math.round((i.interval||1)*1.2))]})]}),D.jsxs("button",{onClick:N=>ke(4,N),style:Vf("#43a047"),title:"Good",children:["Good"," ",D.jsx("div",{style:Pf,children:Lp(Math.round((i.interval||1)*(i.easeFactor||2.5)))})]}),D.jsxs("button",{onClick:N=>ke(5,N),style:Vf("#1e88e5"),title:"Easy",children:["Easy"," ",D.jsx("div",{style:Pf,children:Lp(Math.round((i.interval||1)*(i.easeFactor||2.5)*1.3))})]})]})]}),D.jsx("style",{children:`
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }
        .spin { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
      `})]})}const Lp=i=>i===0?"< 1d":i===1?"1d":`${i}d`,Vf=i=>({padding:"0.5rem 0.2rem",backgroundColor:i,color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"0.85rem"}),Pf={fontSize:"0.65rem",opacity:.8,marginTop:"2px"};class GS{_generateId(){const e=Date.now(),n=Math.random().toString(36).substring(2,8);return`${e}_${n}`}async importCards(e){try{let n;try{n=JSON.parse(e)}catch(y){throw new Error("Input must be a valid JSON string",y)}if(!Array.isArray(n))throw new Error("Input must be a JSON array");const s=await nr.vocab.toArray(),o=new Set(s.map(y=>y.word.toLowerCase())),u=[];let d=0;for(const y of n)y.word&&(o.has(y.word.toLowerCase())?d++:(u.push({...y,id:this._generateId(),status:"new",reviewCount:0,nextReview:Date.now(),easeFactor:2.5,interval:0,updatedAt:Date.now(),createdAt:Date.now()}),o.add(y.word.toLowerCase())));return u.length>0&&await nr.vocab.bulkAdd(u),{addedCount:u.length,skippedCount:d}}catch(n){throw console.error("Import failed:",n),n}}async addCard(e){if((await nr.vocab.toArray()).some(u=>u.word.toLowerCase()===e.word.toLowerCase()))throw new Error(`Duplicate word: ${e.word}`);const o={...e,id:this._generateId(),status:"new",reviewCount:0,nextReview:Date.now(),easeFactor:2.5,interval:0,updatedAt:Date.now(),createdAt:Date.now()};return await nr.vocab.add(o),o}async updateCard(e){const n={...e,updatedAt:Date.now()};return await nr.vocab.put(n),n}async deleteCard(e){await nr.vocab.delete(e)}async getAllCards(){return await nr.vocab.toArray()}async clearAllCards(){await nr.vocab.clear()}async getDueCards(e=20){const n=Date.now();return(await nr.vocab.where("nextReview").belowOrEqual(n).and(o=>o.status!=="new").toArray()).sort((o,u)=>o.nextReview!==u.nextReview?o.nextReview-u.nextReview:(o.easeFactor||2.5)-(u.easeFactor||2.5)).slice(0,e)}async processReview(e,n){const s=Cb(e,n),o={...e,...s};return await this.updateCard(o),o}}const Hl=new GS;let YS={data:""},QS=i=>{if(typeof window=="object"){let e=(i?i.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(i||document.head).appendChild(e),e.firstChild}return i||YS},XS=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,$S=/\/\*[^]*?\*\/|  +/g,J_=/\n+/g,ro=(i,e)=>{let n="",s="",o="";for(let u in i){let d=i[u];u[0]=="@"?u[1]=="i"?n=u+" "+d+";":s+=u[1]=="f"?ro(d,u):u+"{"+ro(d,u[1]=="k"?"":e)+"}":typeof d=="object"?s+=ro(d,e?e.replace(/([^,])+/g,y=>u.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,_=>/&/.test(_)?_.replace(/&/g,y):y?y+" "+_:_)):u):d!=null&&(u=/^--/.test(u)?u:u.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=ro.p?ro.p(u,d):u+":"+d+";")}return n+(e&&o?e+"{"+o+"}":o)+s},sa={},Nb=i=>{if(typeof i=="object"){let e="";for(let n in i)e+=n+Nb(i[n]);return e}return i},JS=(i,e,n,s,o)=>{let u=Nb(i),d=sa[u]||(sa[u]=(_=>{let b=0,R=11;for(;b<_.length;)R=101*R+_.charCodeAt(b++)>>>0;return"go"+R})(u));if(!sa[d]){let _=u!==i?i:(b=>{let R,I,M=[{}];for(;R=XS.exec(b.replace($S,""));)R[4]?M.shift():R[3]?(I=R[3].replace(J_," ").trim(),M.unshift(M[0][I]=M[0][I]||{})):M[0][R[1]]=R[2].replace(J_," ").trim();return M[0]})(i);sa[d]=ro(o?{["@keyframes "+d]:_}:_,n?"":"."+d)}let y=n&&sa.g?sa.g:null;return n&&(sa.g=sa[d]),((_,b,R,I)=>{I?b.data=b.data.replace(I,_):b.data.indexOf(_)===-1&&(b.data=R?_+b.data:b.data+_)})(sa[d],e,s,y),d},WS=(i,e,n)=>i.reduce((s,o,u)=>{let d=e[u];if(d&&d.call){let y=d(n),_=y&&y.props&&y.props.className||/^go/.test(y)&&y;d=_?"."+_:y&&typeof y=="object"?y.props?"":ro(y,""):y===!1?"":y}return s+o+(d??"")},"");function Ch(i){let e=this||{},n=i.call?i(e.p):i;return JS(n.unshift?n.raw?WS(n,[].slice.call(arguments,1),e.p):n.reduce((s,o)=>Object.assign(s,o&&o.call?o(e.p):o),{}):n,QS(e.target),e.g,e.o,e.k)}let Mb,Jp,Wp;Ch.bind({g:1});let ca=Ch.bind({k:1});function ZS(i,e,n,s){ro.p=e,Mb=i,Jp=n,Wp=s}function Eo(i,e){let n=this||{};return function(){let s=arguments;function o(u,d){let y=Object.assign({},u),_=y.className||o.className;n.p=Object.assign({theme:Jp&&Jp()},y),n.o=/ *go\d+/.test(_),y.className=Ch.apply(n,s)+(_?" "+_:"");let b=i;return i[0]&&(b=y.as||i,delete y.as),Wp&&b[0]&&Wp(y),Mb(b,y)}return o}}var eA=i=>typeof i=="function",sh=(i,e)=>eA(i)?i(e):i,tA=(()=>{let i=0;return()=>(++i).toString()})(),kb=(()=>{let i;return()=>{if(i===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");i=!e||e.matches}return i}})(),nA=20,Cm="default",Vb=(i,e)=>{let{toastLimit:n}=i.settings;switch(e.type){case 0:return{...i,toasts:[e.toast,...i.toasts].slice(0,n)};case 1:return{...i,toasts:i.toasts.map(d=>d.id===e.toast.id?{...d,...e.toast}:d)};case 2:let{toast:s}=e;return Vb(i,{type:i.toasts.find(d=>d.id===s.id)?1:0,toast:s});case 3:let{toastId:o}=e;return{...i,toasts:i.toasts.map(d=>d.id===o||o===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return e.toastId===void 0?{...i,toasts:[]}:{...i,toasts:i.toasts.filter(d=>d.id!==e.toastId)};case 5:return{...i,pausedAt:e.time};case 6:let u=e.time-(i.pausedAt||0);return{...i,pausedAt:void 0,toasts:i.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+u}))}}},Yf=[],Pb={toasts:[],pausedAt:void 0,settings:{toastLimit:nA}},Es={},Lb=(i,e=Cm)=>{Es[e]=Vb(Es[e]||Pb,i),Yf.forEach(([n,s])=>{n===e&&s(Es[e])})},jb=i=>Object.keys(Es).forEach(e=>Lb(i,e)),rA=i=>Object.keys(Es).find(e=>Es[e].toasts.some(n=>n.id===i)),Rh=(i=Cm)=>e=>{Lb(e,i)},iA={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},sA=(i={},e=Cm)=>{let[n,s]=Te.useState(Es[e]||Pb),o=Te.useRef(Es[e]);Te.useEffect(()=>(o.current!==Es[e]&&s(Es[e]),Yf.push([e,s]),()=>{let d=Yf.findIndex(([y])=>y===e);d>-1&&Yf.splice(d,1)}),[e]);let u=n.toasts.map(d=>{var y,_,b;return{...i,...i[d.type],...d,removeDelay:d.removeDelay||((y=i[d.type])==null?void 0:y.removeDelay)||i?.removeDelay,duration:d.duration||((_=i[d.type])==null?void 0:_.duration)||i?.duration||iA[d.type],style:{...i.style,...(b=i[d.type])==null?void 0:b.style,...d.style}}});return{...n,toasts:u}},aA=(i,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:i,pauseDuration:0,...n,id:n?.id||tA()}),bc=i=>(e,n)=>{let s=aA(e,i,n);return Rh(s.toasterId||rA(s.id))({type:2,toast:s}),s.id},Un=(i,e)=>bc("blank")(i,e);Un.error=bc("error");Un.success=bc("success");Un.loading=bc("loading");Un.custom=bc("custom");Un.dismiss=(i,e)=>{let n={type:3,toastId:i};e?Rh(e)(n):jb(n)};Un.dismissAll=i=>Un.dismiss(void 0,i);Un.remove=(i,e)=>{let n={type:4,toastId:i};e?Rh(e)(n):jb(n)};Un.removeAll=i=>Un.remove(void 0,i);Un.promise=(i,e,n)=>{let s=Un.loading(e.loading,{...n,...n?.loading});return typeof i=="function"&&(i=i()),i.then(o=>{let u=e.success?sh(e.success,o):void 0;return u?Un.success(u,{id:s,...n,...n?.success}):Un.dismiss(s),o}).catch(o=>{let u=e.error?sh(e.error,o):void 0;u?Un.error(u,{id:s,...n,...n?.error}):Un.dismiss(s)}),i};var oA=1e3,lA=(i,e="default")=>{let{toasts:n,pausedAt:s}=sA(i,e),o=Te.useRef(new Map).current,u=Te.useCallback((I,M=oA)=>{if(o.has(I))return;let $=setTimeout(()=>{o.delete(I),d({type:4,toastId:I})},M);o.set(I,$)},[]);Te.useEffect(()=>{if(s)return;let I=Date.now(),M=n.map($=>{if($.duration===1/0)return;let te=($.duration||0)+$.pauseDuration-(I-$.createdAt);if(te<0){$.visible&&Un.dismiss($.id);return}return setTimeout(()=>Un.dismiss($.id,e),te)});return()=>{M.forEach($=>$&&clearTimeout($))}},[n,s,e]);let d=Te.useCallback(Rh(e),[e]),y=Te.useCallback(()=>{d({type:5,time:Date.now()})},[d]),_=Te.useCallback((I,M)=>{d({type:1,toast:{id:I,height:M}})},[d]),b=Te.useCallback(()=>{s&&d({type:6,time:Date.now()})},[s,d]),R=Te.useCallback((I,M)=>{let{reverseOrder:$=!1,gutter:te=8,defaultPosition:pe}=M||{},_e=n.filter(ke=>(ke.position||pe)===(I.position||pe)&&ke.height),je=_e.findIndex(ke=>ke.id===I.id),qe=_e.filter((ke,tt)=>tt<je&&ke.visible).length;return _e.filter(ke=>ke.visible).slice(...$?[qe+1]:[0,qe]).reduce((ke,tt)=>ke+(tt.height||0)+te,0)},[n]);return Te.useEffect(()=>{n.forEach(I=>{if(I.dismissed)u(I.id,I.removeDelay);else{let M=o.get(I.id);M&&(clearTimeout(M),o.delete(I.id))}})},[n,u]),{toasts:n,handlers:{updateHeight:_,startPause:y,endPause:b,calculateOffset:R}}},uA=ca`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,cA=ca`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,fA=ca`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,hA=Eo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${uA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${cA} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${i=>i.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${fA} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,dA=ca`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,pA=Eo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${i=>i.secondary||"#e0e0e0"};
  border-right-color: ${i=>i.primary||"#616161"};
  animation: ${dA} 1s linear infinite;
`,mA=ca`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,gA=ca`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,yA=Eo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${mA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${gA} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${i=>i.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,vA=Eo("div")`
  position: absolute;
`,_A=Eo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,bA=ca`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,EA=Eo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${bA} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,TA=({toast:i})=>{let{icon:e,type:n,iconTheme:s}=i;return e!==void 0?typeof e=="string"?Te.createElement(EA,null,e):e:n==="blank"?null:Te.createElement(_A,null,Te.createElement(pA,{...s}),n!=="loading"&&Te.createElement(vA,null,n==="error"?Te.createElement(hA,{...s}):Te.createElement(yA,{...s})))},wA=i=>`
0% {transform: translate3d(0,${i*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,SA=i=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${i*-150}%,-1px) scale(.6); opacity:0;}
`,AA="0%{opacity:0;} 100%{opacity:1;}",CA="0%{opacity:1;} 100%{opacity:0;}",RA=Eo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,IA=Eo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,xA=(i,e)=>{let n=i.includes("top")?1:-1,[s,o]=kb()?[AA,CA]:[wA(n),SA(n)];return{animation:e?`${ca(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ca(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},OA=Te.memo(({toast:i,position:e,style:n,children:s})=>{let o=i.height?xA(i.position||e||"top-center",i.visible):{opacity:0},u=Te.createElement(TA,{toast:i}),d=Te.createElement(IA,{...i.ariaProps},sh(i.message,i));return Te.createElement(RA,{className:i.className,style:{...o,...n,...i.style}},typeof s=="function"?s({icon:u,message:d}):Te.createElement(Te.Fragment,null,u,d))});ZS(Te.createElement);var DA=({id:i,className:e,style:n,onHeightUpdate:s,children:o})=>{let u=Te.useCallback(d=>{if(d){let y=()=>{let _=d.getBoundingClientRect().height;s(i,_)};y(),new MutationObserver(y).observe(d,{subtree:!0,childList:!0,characterData:!0})}},[i,s]);return Te.createElement("div",{ref:u,className:e,style:n},o)},NA=(i,e)=>{let n=i.includes("top"),s=n?{top:0}:{bottom:0},o=i.includes("center")?{justifyContent:"center"}:i.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:kb()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...s,...o}},MA=Ch`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Lf=16,kA=({reverseOrder:i,position:e="top-center",toastOptions:n,gutter:s,children:o,toasterId:u,containerStyle:d,containerClassName:y})=>{let{toasts:_,handlers:b}=lA(n,u);return Te.createElement("div",{"data-rht-toaster":u||"",style:{position:"fixed",zIndex:9999,top:Lf,left:Lf,right:Lf,bottom:Lf,pointerEvents:"none",...d},className:y,onMouseEnter:b.startPause,onMouseLeave:b.endPause},_.map(R=>{let I=R.position||e,M=b.calculateOffset(R,{reverseOrder:i,gutter:s,defaultPosition:e}),$=NA(I,M);return Te.createElement(DA,{id:R.id,key:R.id,onHeightUpdate:b.updateHeight,className:R.visible?MA:"",style:$},R.type==="custom"?sh(R.message,R):o?o(R):Te.createElement(OA,{toast:R,position:I}))}))},ct=Un;function VA({isOpen:i,onClose:e,onSuccess:n}){const[s,o]=Te.useState(""),[u,d]=Te.useState(!1),[y,_]=Te.useState("auto"),[b,R]=Te.useState(null);if(!i)return null;const I=async()=>{if(!s.trim())return;if(!bs.hasKey()){ct.error("Please set your Gemini API Key in Settings first.");return}d(!0),R(null);const $=ct.loading("AI is analyzing transcript...");try{const te=await bs.analyzeTranscript(s,y);if(!Array.isArray(te)||te.length===0)throw new Error("AI found no vocabulary or returned invalid format.");ct.loading(`Found ${te.length} words. Saving...`,{id:$});const pe=JSON.stringify(te),_e=await Hl.importCards(pe);ct.success(`Success!
Added: ${_e.addedCount}
Skipped (Duplicate): ${_e.skippedCount}`,{id:$,duration:4e3}),o(""),n(),e()}catch(te){console.error(te);const pe=te.message||"Unknown error";R(pe),ct.error(`Failed: ${pe}`,{id:$})}finally{d(!1),setTimeout(()=>ct.dismiss($),3e3)}},M=[{label:"AUTO",value:"auto"},{label:"5",value:5},{label:"10",value:10},{label:"20",value:20}];return D.jsx("div",{style:Vi.overlay,children:D.jsxs("div",{style:Vi.modal,children:[D.jsx("h2",{style:{marginTop:0,color:"#fff",marginBottom:"1.5rem"},children:"Import from Podcast"}),D.jsxs("div",{style:Vi.settingRow,children:[D.jsx("span",{style:Vi.settingLabel,children:"Max Words:"}),D.jsx("div",{style:Vi.optionGroup,children:M.map($=>D.jsx("button",{onClick:()=>_($.value),style:{...Vi.optionBtn,...y===$.value?Vi.optionBtnActive:{}},children:$.label},$.value))})]}),D.jsx("p",{style:{color:"#aaa",fontSize:"0.9rem",marginBottom:"0.5rem"},children:"Paste the full podcast transcript text below. Gemini will extract key vocabulary for you."}),D.jsx("textarea",{value:s,onChange:$=>o($.target.value),placeholder:"Paste transcript text here...",style:Vi.textarea,disabled:u}),b&&D.jsxs("div",{style:Vi.error,children:[" ",b]}),D.jsxs("div",{style:Vi.actions,children:[D.jsx("button",{onClick:e,disabled:u,style:{...Vi.btn,backgroundColor:"#555"},children:"Cancel"}),D.jsx("button",{onClick:I,disabled:u||!s.trim(),style:{...Vi.btn,backgroundColor:u?"#777":"#6366f1",opacity:!s.trim()||u?.6:1},children:u?"Analyzing...":"Analyze & Import"})]})]})})}const Vi={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,backdropFilter:"blur(3px)"},modal:{backgroundColor:"#1e2024",padding:"2rem",borderRadius:"12px",width:"90%",maxWidth:"600px",boxShadow:"0 10px 25px rgba(0,0,0,0.5)",border:"1px solid #333"},settingRow:{display:"flex",alignItems:"center",marginBottom:"1.5rem",gap:"1rem",flexWrap:"wrap"},settingLabel:{color:"#ccc",fontSize:"0.9rem",fontWeight:"500"},optionGroup:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},optionBtn:{padding:"0.4rem 1rem",backgroundColor:"#2c2e33",border:"1px solid #444",borderRadius:"6px",color:"#aaa",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease"},optionBtnActive:{backgroundColor:"#6366f1",color:"#fff",borderColor:"#6366f1",boxShadow:"0 0 8px rgba(99, 102, 241, 0.4)"},textarea:{width:"100%",height:"250px",backgroundColor:"#131416",color:"#e0e0e0",border:"1px solid #444",borderRadius:"6px",padding:"0.8rem",fontFamily:"inherit",fontSize:"0.95rem",resize:"vertical",lineHeight:"1.5"},error:{color:"#ff6b6b",marginTop:"1rem",fontSize:"0.9rem",padding:"0.5rem",backgroundColor:"rgba(255, 107, 107, 0.1)",borderRadius:"4px"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"1.5rem"},btn:{padding:"0.6rem 1.5rem",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"1rem"}};function PA({isOpen:i,onClose:e}){const[n,s]=Te.useState(""),[o,u]=Te.useState(!1),[d,y]=Te.useState(!1);Te.useEffect(()=>{i&&(s(bs.getApiKey()||""),y(bs.isPersistent()))},[i]);const[_,b]=Te.useState(()=>JSON.parse(localStorage.getItem("gp_settings_autoplay_tts"))||!1),[R,I]=Te.useState(()=>localStorage.getItem("gp_settings_learning_mode")||"sniper"),M=()=>{localStorage.setItem("gp_settings_autoplay_tts",JSON.stringify(_)),n.trim()?(bs.setApiKey(n.trim(),d),d?ct.success("API Key  ()"):ct.success("API Key  ( Session)")):(bs.removeApiKey(),ct("API Key ")),localStorage.setItem("gp_settings_learning_mode",R),window.dispatchEvent(new Event("storage")),ct.success("Settings saved!"),e()},$=()=>{s(""),y(!1),bs.removeApiKey(),ct("API Key ")};return i?D.jsx("div",{style:hr.overlay,children:D.jsxs("div",{style:hr.modal,children:[D.jsx("h2",{style:{marginTop:0,color:"#fff"},children:"Settings"}),D.jsx("hr",{style:{borderColor:"#444",margin:"1.5rem 0"}}),D.jsxs("div",{style:hr.section,children:[D.jsx("h3",{style:{...hr.label,color:"#fff",fontSize:"1rem"},children:"Preferences"}),D.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[D.jsxs("label",{style:{color:"#ccc",fontSize:"0.9rem"},children:["Auto-play TTS on Flip",D.jsx("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"4px"},children:"Automatically read the example sentence when flipping to the back."})]}),D.jsx("div",{onClick:()=>b(!_),style:{width:"40px",height:"20px",backgroundColor:_?"#4caf50":"#444",borderRadius:"10px",position:"relative",cursor:"pointer",transition:"background-color 0.2s"},children:D.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:"#fff",borderRadius:"50%",position:"absolute",top:"2px",left:_?"22px":"2px",transition:"left 0.2s"}})})]})]}),D.jsxs("div",{style:hr.field,children:[D.jsx("h3",{style:{...hr.label,color:"#fff",fontSize:"1rem",marginBottom:"1rem"},children:"Learning Mode"}),D.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[D.jsxs("div",{onClick:()=>I("sniper"),style:{flex:1,padding:"1rem",borderRadius:"8px",border:R==="sniper"?"2px solid #2196f3":"1px solid #444",backgroundColor:R==="sniper"?"rgba(33, 150, 243, 0.1)":"transparent",cursor:"pointer",transition:"all 0.2s"},children:[D.jsx("strong",{style:{color:R==="sniper"?"#2196f3":"#aaa",display:"block",marginBottom:"0.5rem"},children:" Sniper Mode"}),D.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"#888"},children:"Context-first. Best for active recall and deep learning. (Auto-adapts based on progress)"})]}),D.jsxs("div",{onClick:()=>I("reading"),style:{flex:1,padding:"1rem",borderRadius:"8px",border:R==="reading"?"2px solid #4caf50":"1px solid #444",backgroundColor:R==="reading"?"rgba(76, 175, 80, 0.1)":"transparent",cursor:"pointer",transition:"all 0.2s"},children:[D.jsx("strong",{style:{color:R==="reading"?"#4caf50":"#aaa",display:"block",marginBottom:"0.5rem"},children:" Reading Mode"}),D.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"#888"},children:"Word-first. Best for quick review or low-energy sessions."})]})]})]}),D.jsx("hr",{style:{borderColor:"#444",margin:"1.5rem 0"}}),D.jsxs("div",{style:{marginBottom:"2rem"},children:[D.jsx("label",{style:hr.label,children:"Gemini API Key (BYOK)"}),D.jsxs("p",{style:hr.hint,children:[" Key  Google Gemini API",D.jsx("br",{}),""]}),D.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[D.jsx("input",{type:o?"text":"password",value:n,onChange:te=>s(te.target.value),placeholder:"AIzaSy...",style:hr.input}),D.jsx("button",{onClick:()=>u(!o),style:hr.iconBtn,title:"Toggle Visibility",children:o?"":""})]}),D.jsxs("div",{style:hr.checkboxContainer,children:[D.jsx("input",{type:"checkbox",id:"rememberKey",checked:d,onChange:te=>y(te.target.checked),style:{cursor:"pointer"}}),D.jsx("label",{htmlFor:"rememberKey",style:{...hr.label,marginBottom:0,cursor:"pointer",fontWeight:"normal",fontSize:"0.9rem"},children:" ()"})]}),d&&D.jsx("p",{style:{color:"#ff9800",fontSize:"0.8rem",marginTop:"0.2rem",marginLeft:"1.5rem"},children:"  Key  LocalStorage"})]}),D.jsx("hr",{style:{borderColor:"#444",margin:"1.5rem 0"}}),D.jsxs("div",{style:hr.actions,children:[D.jsx("button",{onClick:$,style:{...hr.btn,backgroundColor:"#d32f2f",marginRight:"auto"},children:"Clear Key"}),D.jsx("button",{onClick:e,style:{...hr.btn,backgroundColor:"#555"},children:"Close"}),D.jsx("button",{onClick:M,style:{...hr.btn,backgroundColor:"#4caf50"},children:"Save"})]})]})}):null}const hr={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},modal:{backgroundColor:"#2c2e33",padding:"2rem",borderRadius:"8px",width:"90%",maxWidth:"400px",boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},label:{display:"block",color:"#e0e0e0",fontWeight:"bold",marginBottom:"0.5rem"},hint:{color:"#aaa",fontSize:"0.85rem",marginBottom:"0.5rem",lineHeight:"1.4"},input:{flex:1,padding:"0.6rem",borderRadius:"4px",border:"1px solid #444",backgroundColor:"#1a1b1e",color:"#fff",fontFamily:"monospace"},iconBtn:{padding:"0 0.8rem",backgroundColor:"#444",border:"none",borderRadius:"4px",cursor:"pointer",color:"#fff"},checkboxContainer:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.5rem"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem"},btn:{padding:"0.5rem 1.2rem",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"}};function LA({isOpen:i,onClose:e,onSuccess:n}){const[s,o]=Te.useState("context"),[u,d]=Te.useState(""),[y,_]=Te.useState(""),[b,R]=Te.useState(""),[I,M]=Te.useState(""),[$,te]=Te.useState(""),[pe,_e]=Te.useState([]),[je,qe]=Te.useState(!1),[ke,tt]=Te.useState(""),ht=Te.useRef(null);if(!i)return null;const Ge=N=>{const F=N.target.selectionStart,V=N.target.selectionEnd,Dt=N.target.value.substring(F,V).trim();Dt&&(d(Dt),M(N.target.value))},L=async()=>{if(!u.trim()){ct.error("Please enter or select a word first");return}if(!bs.hasKey()){ct.error("Please set your API Key in Settings first");return}qe(!0);const N=ct.loading(`Asking Gemini about "${u}"...`);try{const F=await bs.generateCardDetails(u);_(F.ipa||""),R(F.definition||""),M(F.context||I),te(F.translation||""),ct.success("Auto-filled!",{id:N}),s==="context"&&o("manual")}catch(F){console.error(F),ct.error(F.message,{id:N})}finally{qe(!1),setTimeout(()=>ct.dismiss(N),3e3)}},k=async()=>{if(!u||!b){ct.error("Word and Definition are required");return}try{await Hl.addCard({word:u,ipa:y,definition:b,context:I,translation:$,collocations:pe,sourceType:s==="context"?"raw_sentence":"word_only"}),ct.success(`Added "${u}"`),d(""),_(""),R(""),M(""),te(""),_e([]),tt(""),n(),e()}catch(N){console.error(N),ct.error(N.message)}},j=N=>{_e(N.target.value.split(","))},Y=je||!u||!b;return D.jsx("div",{style:mt.overlay,children:D.jsxs("div",{style:mt.modal,children:[D.jsxs("div",{style:mt.header,children:[D.jsx("h2",{style:{margin:0,color:"#fff"},children:"Add New Card"}),D.jsxs("div",{style:mt.tabContainer,children:[D.jsxs("button",{style:s==="context"?mt.activeTab:mt.tab,onClick:()=>o("context"),children:[D.jsx(iS,{size:16,style:{marginRight:6}})," Context First"]}),D.jsxs("button",{style:s==="manual"?mt.activeTab:mt.tab,onClick:()=>o("manual"),children:[D.jsx(eS,{size:16,style:{marginRight:6}})," Manual / Edit"]})]})]}),s==="context"&&D.jsxs("div",{style:mt.tabContent,children:[D.jsx("div",{style:mt.infoBox,children:D.jsxs("p",{style:{margin:0},children:["Paste the full sentence, then ",D.jsx("strong",{children:"highlight"})," the word you want to learn."]})}),D.jsxs("div",{style:mt.field,children:[D.jsx("label",{style:mt.label,children:"Source Sentence / Podcast Transcript"}),D.jsx("textarea",{ref:ht,style:{...mt.input,height:"120px",resize:"vertical"},value:ke,onChange:N=>tt(N.target.value),onSelect:Ge,onTouchEnd:Ge,onKeyUp:Ge,placeholder:"e.g., The government is reluctant to change the law...",autoFocus:!0})]}),D.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"1rem",gap:"1rem"},children:[D.jsxs("div",{style:{flex:1,minWidth:0},children:[D.jsx("label",{style:mt.label,children:"Target Word"}),D.jsx("div",{style:mt.readOnlyField,children:u||D.jsx("span",{style:{color:"#555",fontStyle:"italic"},children:"Highlight text..."})})]}),D.jsx("button",{onClick:L,disabled:je||!u,style:{...mt.magicBtn,opacity:!u||je?.5:1,cursor:!u||je?"not-allowed":"pointer"},children:je?"Processing...":" Analyze"})]})]}),s==="manual"&&D.jsxs("div",{style:mt.tabContent,children:[D.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:D.jsx("button",{onClick:L,disabled:je,style:mt.magicBtn,title:"Regenerate",children:je?"...":" Auto-fill by Word"})}),D.jsxs("div",{style:mt.field,children:[D.jsx("label",{style:mt.label,children:"Word"}),D.jsx("input",{style:mt.input,value:u,onChange:N=>d(N.target.value),placeholder:"e.g. Serendipity"})]}),D.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[D.jsxs("div",{style:{...mt.field,flex:1},children:[D.jsx("label",{style:mt.label,children:"IPA"}),D.jsx("input",{style:mt.input,value:y,onChange:N=>_(N.target.value)})]}),D.jsxs("div",{style:{...mt.field,flex:1},children:[D.jsx("label",{style:mt.label,children:"Translation"}),D.jsx("input",{style:mt.input,value:$,onChange:N=>te(N.target.value)})]})]}),D.jsxs("div",{style:mt.field,children:[D.jsx("label",{style:mt.label,children:"Definition"}),D.jsx("textarea",{style:{...mt.input,height:"60px"},value:b,onChange:N=>R(N.target.value)})]}),D.jsxs("div",{style:mt.field,children:[D.jsx("label",{style:mt.label,children:"Context / Example"}),D.jsx("textarea",{style:{...mt.input,height:"60px"},value:I,onChange:N=>M(N.target.value)})]}),D.jsxs("div",{style:mt.field,children:[D.jsx("label",{style:mt.label,children:"Collocations"}),D.jsx("input",{style:mt.input,value:pe.join(", "),onChange:j,placeholder:"e.g. reluctant to, deeply reluctant"})]})]}),D.jsxs("div",{style:mt.actions,children:[D.jsx("button",{onClick:e,style:{...mt.btn,backgroundColor:"#555"},children:"Cancel"}),D.jsx("button",{onClick:k,disabled:Y,style:{...mt.btn,backgroundColor:Y?"#444":"#2196f3",color:Y?"#888":"white",cursor:Y?"not-allowed":"pointer",opacity:Y?.7:1},children:"Save Card"})]})]})})}const mt={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},modal:{backgroundColor:"#2c2e33",padding:"1.5rem",borderRadius:"12px",width:"95%",maxWidth:"550px",boxShadow:"0 10px 25px rgba(0,0,0,0.5)",maxHeight:"90vh",overflowY:"auto"},header:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"1.5rem",borderBottom:"1px solid #444",paddingBottom:"1rem"},tabContainer:{display:"flex",gap:"0.5rem",backgroundColor:"#1a1b1e",padding:"4px",borderRadius:"8px",width:"100%"},tab:{flex:1,padding:"8px 12px",backgroundColor:"transparent",border:"none",color:"#888",cursor:"pointer",borderRadius:"6px",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center"},activeTab:{flex:1,padding:"8px 12px",backgroundColor:"#2196f3",border:"none",color:"white",cursor:"pointer",borderRadius:"6px",fontSize:"0.9rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center"},infoBox:{backgroundColor:"rgba(33, 150, 243, 0.1)",border:"1px solid #2196f3",borderRadius:"6px",padding:"0.8rem",color:"#90caf9",fontSize:"0.9rem",marginBottom:"1rem"},field:{marginBottom:"1rem"},label:{display:"block",color:"#aaa",fontSize:"0.85rem",marginBottom:"0.3rem"},input:{width:"100%",padding:"0.8rem",borderRadius:"4px",border:"1px solid #444",backgroundColor:"#1a1b1e",color:"#fff",fontSize:"1rem",boxSizing:"border-box",fontFamily:"inherit"},readOnlyField:{padding:"0.8rem",borderRadius:"4px",backgroundColor:"#25262b",border:"1px dashed #444",color:"#e91e63",fontWeight:"bold",minHeight:"45px",display:"flex",alignItems:"center",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},magicBtn:{padding:"0.8rem 1.2rem",backgroundColor:"transparent",border:"1px solid #e91e63",borderRadius:"30px",color:"#e91e63",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s",fontWeight:"bold",whiteSpace:"nowrap"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"2rem"},btn:{padding:"0.8rem 1.5rem",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"1rem"}};function jA({isOpen:i,onClose:e}){const[n,s]=Te.useState([]),[o,u]=Te.useState(null),[d,y]=Te.useState(!1),[_,b]=Te.useState(0),R=Te.useRef(null);Te.useEffect(()=>{i&&(I(),y(!1),b(0),u(null))},[i]),Te.useEffect(()=>(d&&_>0?R.current=setTimeout(()=>{b(te=>te-1)},1e3):d&&_===0&&y(!1),()=>clearTimeout(R.current)),[d,_]);const I=async()=>{try{const te=await Hl.getAllCards();te.sort((pe,_e)=>_e.updatedAt-pe.updatedAt),s(te)}catch(te){console.error(te),ct.error("Failed to load cards")}},M=async te=>{if(o!==te){u(te),setTimeout(()=>{u(pe=>pe===te?null:pe)},3e3);return}try{await Hl.deleteCard(te),ct.success("Card deleted"),u(null),I()}catch(pe){console.error(pe),ct.error("Delete failed")}},$=async()=>{if(!d){y(!0),b(3);return}try{await Hl.clearAllCards(),ct.success("All data cleared"),s([]),y(!1)}catch(te){console.error(te),ct.error("Clear failed")}};return i?D.jsx("div",{style:Pi.overlay,children:D.jsxs("div",{style:Pi.modal,children:[D.jsxs("div",{style:Pi.header,children:[D.jsxs("h2",{style:{margin:0,color:"#fff"},children:["Manage Cards (",n.length,")"]}),D.jsx("button",{onClick:e,style:Pi.closeBtn,children:""})]}),D.jsx("div",{style:Pi.listContainer,children:n.length===0?D.jsx("p",{style:{color:"#888",textAlign:"center"},children:"No cards found."}):n.map(te=>D.jsxs("div",{style:Pi.cardRow,children:[D.jsxs("div",{style:Pi.cardInfo,children:[D.jsx("div",{style:Pi.word,children:te.word}),D.jsxs("div",{style:Pi.def,children:[te.definition?.substring(0,50),"..."]})]}),D.jsx("button",{onClick:()=>M(te.id),style:{...Pi.deleteBtn,backgroundColor:o===te.id?"#d32f2f":"#333",color:o===te.id?"#fff":"#888",border:o===te.id?"1px solid #ff5252":"1px solid #444",width:o===te.id?"100px":"40px"},children:o===te.id?"Sure?":""})]},te.id))}),D.jsx("div",{style:Pi.footer,children:D.jsx("button",{onClick:$,style:{...Pi.dangerBtn,backgroundColor:d?"#d32f2f":"#3a1c1c",color:d?"#ffeb3b":"#ff6b6b",border:d?"1px solid #ffeb3b":"1px solid #ff6b6b"},children:d?`Confirm Clear All? (${_})`:"Clear All Local Data"})})]})}):null}const Pi={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1050},modal:{backgroundColor:"#1e2024",width:"90%",maxWidth:"500px",maxHeight:"80vh",borderRadius:"12px",display:"flex",flexDirection:"column",boxShadow:"0 10px 25px rgba(0,0,0,0.5)",border:"1px solid #333"},header:{padding:"1.5rem",borderBottom:"1px solid #333",display:"flex",justifyContent:"space-between",alignItems:"center"},closeBtn:{background:"none",border:"none",color:"#888",fontSize:"1.2rem",cursor:"pointer"},listContainer:{flex:1,overflowY:"auto",padding:"1rem"},cardRow:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.8rem",borderBottom:"1px solid #2c2e33"},cardInfo:{flex:1,marginRight:"1rem",overflow:"hidden"},word:{color:"#e0e0e0",fontWeight:"bold",marginBottom:"0.2rem"},def:{color:"#888",fontSize:"0.85rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},deleteBtn:{padding:"0.4rem",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.9rem",whiteSpace:"nowrap",display:"flex",justifyContent:"center",alignItems:"center"},footer:{padding:"1.5rem",borderTop:"1px solid #333"},dangerBtn:{width:"100%",padding:"0.8rem",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",transition:"all 0.2s ease"}};function UA({isOpen:i,onClose:e}){const[n,s]=Te.useState(""),[o,u]=Te.useState(!1),[d,y]=Te.useState([]),[_,b]=Te.useState(new Set);Te.useEffect(()=>{i&&R()},[i]),Te.useEffect(()=>{d.length>0&&I(Array.from(_))},[_,d]);const R=async()=>{u(!0);try{const te=await Hl.getDueCards(5);te.length===0?(ct.error("No review data found."),y([])):(y(te),b(new Set(te.map(pe=>pe.word))))}catch(te){console.error("Error fetching data:",te),ct.error("Failed to load review data")}finally{u(!1)}},I=te=>{if(te.length===0){s("Please select at least one word to generate the prompt.");return}const _e=`Create an engaging podcast script on a broad and interesting topic aligned with your persona's expertise. 

Your task is to naturally weave the following target vocabulary into this larger narrative: [${te.join(", ")}]. 

IMPORTANT: 
1. The content must NOT be limited only to these vocabularies. 
2. Build a rich, immersive context with a coherent storyline or argument including target vocabularies. 
3. Use the target words only as natural touchpoints within a flowing, full-length conversation. 
4. Keep the tone casual, authentic, conversational and educational. 
`;s(_e)},M=te=>{const pe=new Set(_);pe.has(te)?pe.delete(te):pe.add(te),b(pe)},$=()=>{navigator.clipboard.writeText(n),ct.success("Prompt copied to clipboard!")};return i?D.jsx("div",{style:nn.overlay,children:D.jsxs("div",{style:nn.modal,children:[D.jsxs("div",{style:nn.header,children:[D.jsx("h2",{style:nn.title,children:"Review Session Ready"}),D.jsx("button",{onClick:e,style:nn.closeBtn,children:""})]}),o?D.jsxs("div",{style:nn.loadingState,children:[D.jsx("div",{style:nn.spinner}),D.jsx("p",{children:"Analyzing your progress..."})]}):D.jsxs("div",{style:nn.content,children:[D.jsx("div",{style:nn.statsRow,children:D.jsxs("div",{style:{...nn.statCard,backgroundColor:"rgba(52, 152, 219, 0.15)",borderColor:"#3498db"},children:[D.jsx("div",{style:nn.statLabel,children:"Target Vocabulary Count"}),D.jsx("div",{style:{...nn.statValue,color:"#3498db"},children:_.size})]})}),D.jsxs("div",{style:nn.section,children:[D.jsxs("div",{style:nn.sectionHeader,children:[D.jsx("span",{style:nn.sectionTitle,children:"Target Words"}),D.jsx("span",{style:nn.sectionSubtitle,children:"Click to include/exclude"})]}),D.jsx("div",{style:nn.chipsContainer,children:d.map(te=>{const pe=_.has(te.word);return D.jsx("button",{onClick:()=>M(te.word),style:{...nn.chip,...pe?nn.chipSelected:nn.chipUnselected},children:te.word},te.word)})})]}),D.jsxs("div",{style:nn.section,children:[D.jsx("div",{style:nn.sectionTitle,children:"Generated Prompt"}),D.jsx("textarea",{value:n,readOnly:!0,style:nn.textarea})]}),D.jsx("button",{onClick:$,disabled:_.size===0,style:{...nn.copyBtn,opacity:_.size===0?.5:1,cursor:_.size===0?"not-allowed":"pointer"},children:"Copy Prompt to Clipboard"})]})]})}):null}const nn={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,backdropFilter:"blur(3px)"},modal:{backgroundColor:"#1e1e1e",padding:"2rem",borderRadius:"16px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 50px rgba(0,0,0,0.5)",color:"#e0e0e0",fontFamily:"'Inter', system-ui, sans-serif",border:"1px solid #333"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.5rem",fontWeight:"700",color:"#fff",letterSpacing:"-0.02em"},closeBtn:{background:"none",border:"none",color:"#666",fontSize:"2rem",cursor:"pointer",lineHeight:1,padding:"0 0.5rem",transition:"color 0.2s"},loadingState:{padding:"3rem",textAlign:"center",color:"#888"},content:{display:"flex",flexDirection:"column",gap:"1.5rem"},statsRow:{display:"flex",width:"100%"},statCard:{flex:1,padding:"1rem",borderRadius:"12px",border:"1px solid",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},statLabel:{fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"#aaa",marginBottom:"0.3rem",fontWeight:"600"},statValue:{fontSize:"1.8rem",fontWeight:"800"},section:{display:"flex",flexDirection:"column",gap:"0.8rem"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},sectionTitle:{fontSize:"0.95rem",fontWeight:"600",color:"#ccc"},sectionSubtitle:{fontSize:"0.75rem",color:"#666"},chipsContainer:{display:"flex",flexWrap:"wrap",gap:"0.6rem",padding:"1rem",backgroundColor:"#25262b",borderRadius:"12px",border:"1px solid #333",maxHeight:"150px",overflowY:"auto"},chip:{padding:"0.4rem 0.9rem",borderRadius:"50px",fontSize:"0.85rem",fontWeight:"500",cursor:"pointer",border:"1px solid",transition:"all 0.2s ease",outline:"none"},chipSelected:{backgroundColor:"rgba(52, 152, 219, 0.2)",borderColor:"#3498db",color:"#3498db",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},chipUnselected:{backgroundColor:"transparent",borderColor:"#444",color:"#666",textDecoration:"line-through",opacity:.6},textarea:{width:"100%",height:"120px",backgroundColor:"#25262b",border:"1px solid #333",borderRadius:"12px",padding:"1rem",color:"#aaa",fontSize:"0.85rem",lineHeight:"1.6",resize:"none",boxSizing:"border-box"},copyBtn:{backgroundColor:"#3498db",color:"white",border:"none",padding:"1rem",borderRadius:"12px",fontSize:"1rem",fontWeight:"600",width:"100%",transition:"transform 0.1s, background 0.2s",boxShadow:"0 4px 15px rgba(52, 152, 219, 0.3)",cursor:"pointer"}},zA=()=>{};var W_={};const Ub=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},BA=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],d=i[n++],y=i[n++],_=((o&7)<<18|(u&63)<<12|(d&63)<<6|y&63)-65536;e[s++]=String.fromCharCode(55296+(_>>10)),e[s++]=String.fromCharCode(56320+(_&1023))}else{const u=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},zb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],d=o+1<i.length,y=d?i[o+1]:0,_=o+2<i.length,b=_?i[o+2]:0,R=u>>2,I=(u&3)<<4|y>>4;let M=(y&15)<<2|b>>6,$=b&63;_||($=64,d||(M=64)),s.push(n[R],n[I],n[M],n[$])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Ub(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):BA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],y=o<i.length?n[i.charAt(o)]:0;++o;const b=o<i.length?n[i.charAt(o)]:64;++o;const I=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||y==null||b==null||I==null)throw new qA;const M=u<<2|y>>4;if(s.push(M),b!==64){const $=y<<4&240|b>>2;if(s.push($),I!==64){const te=b<<6&192|I;s.push(te)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class qA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HA=function(i){const e=Ub(i);return zb.encodeByteArray(e,!0)},ah=function(i){return HA(i).replace(/\./g,"")},Bb=function(i){try{return zb.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function FA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const KA=()=>FA().__FIREBASE_DEFAULTS__,GA=()=>{if(typeof process>"u"||typeof W_>"u")return;const i=W_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},YA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Bb(i[1]);return e&&JSON.parse(e)},Ih=()=>{try{return zA()||KA()||GA()||YA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},qb=i=>Ih()?.emulatorHosts?.[i],QA=i=>{const e=qb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Hb=()=>Ih()?.config,Fb=i=>Ih()?.[`_${i}`];class XA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function nu(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Kb(i){return(await fetch(i,{credentials:"include"})).ok}function $A(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[ah(JSON.stringify(n)),ah(JSON.stringify(d)),""].join(".")}const Zu={};function JA(){const i={prod:[],emulator:[]};for(const e of Object.keys(Zu))Zu[e]?i.emulator.push(e):i.prod.push(e);return i}function WA(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Z_=!1;function Gb(i,e){if(typeof window>"u"||typeof document>"u"||!nu(window.location.host)||Zu[i]===e||Zu[i]||Z_)return;Zu[i]=e;function n(M){return`__firebase__banner__${M}`}const s="__firebase__banner",u=JA().prod.length>0;function d(){const M=document.getElementById(s);M&&M.remove()}function y(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function _(M,$){M.setAttribute("width","24"),M.setAttribute("id",$),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function b(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{Z_=!0,d()},M}function R(M,$){M.setAttribute("id",$),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function I(){const M=WA(s),$=n("text"),te=document.getElementById($)||document.createElement("span"),pe=n("learnmore"),_e=document.getElementById(pe)||document.createElement("a"),je=n("preprendIcon"),qe=document.getElementById(je)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const ke=M.element;y(ke),R(_e,pe);const tt=b();_(qe,je),ke.append(qe,te,_e,tt),document.body.appendChild(ke)}u?(te.innerText="Preview backend disconnected.",qe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(qe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,te.innerText="Preview backend running in this workspace."),te.setAttribute("id",$)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}function yr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yr())}function eC(){const i=Ih()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nC(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function rC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iC(){const i=yr();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function sC(){return!eC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aC(){try{return typeof indexedDB=="object"}catch{return!1}}function oC(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const lC="FirebaseError";class ma extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=lC,Object.setPrototypeOf(this,ma.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ec.prototype.create)}}class Ec{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?uC(u,s):"Error",y=`${this.serviceName}: ${d} (${o}).`;return new ma(o,y,s)}}function uC(i,e){return i.replace(cC,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const cC=/\{\$([^}]+)}/g;function fC(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Wo(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],d=e[o];if(e0(u)&&e0(d)){if(!Wo(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function e0(i){return i!==null&&typeof i=="object"}function Tc(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function hC(i,e){const n=new dC(i,e);return n.subscribe.bind(n)}class dC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");pC(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=jp),o.error===void 0&&(o.error=jp),o.complete===void 0&&(o.complete=jp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pC(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function jp(){}function Ui(i){return i&&i._delegate?i._delegate:i}class Zo{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Go="[DEFAULT]";class mC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new XA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yC(e))try{this.getOrInitializeService({instanceIdentifier:Go})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Go){return this.instances.has(e)}getOptions(e=Go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(u);s===y&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:gC(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Go){return this.component?this.component.multipleInstances?e:Go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gC(i){return i===Go?void 0:i}function yC(i){return i.instantiationMode==="EAGER"}class vC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var wt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(wt||(wt={}));const _C={debug:wt.DEBUG,verbose:wt.VERBOSE,info:wt.INFO,warn:wt.WARN,error:wt.ERROR,silent:wt.SILENT},bC=wt.INFO,EC={[wt.DEBUG]:"log",[wt.VERBOSE]:"log",[wt.INFO]:"info",[wt.WARN]:"warn",[wt.ERROR]:"error"},TC=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=EC[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rm{constructor(e){this.name=e,this._logLevel=bC,this._logHandler=TC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_C[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,wt.DEBUG,...e),this._logHandler(this,wt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,wt.VERBOSE,...e),this._logHandler(this,wt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,wt.INFO,...e),this._logHandler(this,wt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,wt.WARN,...e),this._logHandler(this,wt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,wt.ERROR,...e),this._logHandler(this,wt.ERROR,...e)}}const wC=(i,e)=>e.some(n=>i instanceof n);let t0,n0;function SC(){return t0||(t0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AC(){return n0||(n0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yb=new WeakMap,Zp=new WeakMap,Qb=new WeakMap,Up=new WeakMap,Im=new WeakMap;function CC(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{n(uo(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Yb.set(n,i)}).catch(()=>{}),Im.set(e,i),e}function RC(i){if(Zp.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});Zp.set(i,e)}let em={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Zp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Qb.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return uo(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function IC(i){em=i(em)}function xC(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(zp(this),e,...n);return Qb.set(s,e.sort?e.sort():[e]),uo(s)}:AC().includes(i)?function(...e){return i.apply(zp(this),e),uo(Yb.get(this))}:function(...e){return uo(i.apply(zp(this),e))}}function OC(i){return typeof i=="function"?xC(i):(i instanceof IDBTransaction&&RC(i),wC(i,SC())?new Proxy(i,em):i)}function uo(i){if(i instanceof IDBRequest)return CC(i);if(Up.has(i))return Up.get(i);const e=OC(i);return e!==i&&(Up.set(i,e),Im.set(e,i)),e}const zp=i=>Im.get(i);function DC(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(i,e),y=uo(d);return s&&d.addEventListener("upgradeneeded",_=>{s(uo(d.result),_.oldVersion,_.newVersion,uo(d.transaction),_)}),n&&d.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),y.then(_=>{u&&_.addEventListener("close",()=>u()),o&&_.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),y}const NC=["get","getKey","getAll","getAllKeys","count"],MC=["put","add","delete","clear"],Bp=new Map;function r0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Bp.get(e))return Bp.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=MC.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||NC.includes(n)))return;const u=async function(d,...y){const _=this.transaction(d,o?"readwrite":"readonly");let b=_.store;return s&&(b=b.index(y.shift())),(await Promise.all([b[n](...y),o&&_.done]))[0]};return Bp.set(e,u),u}IC(i=>({...i,get:(e,n,s)=>r0(e,n)||i.get(e,n,s),has:(e,n)=>!!r0(e,n)||i.has(e,n)}));class kC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VC(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function VC(i){return i.getComponent()?.type==="VERSION"}const tm="@firebase/app",i0="0.14.6";const fa=new Rm("@firebase/app"),PC="@firebase/app-compat",LC="@firebase/analytics-compat",jC="@firebase/analytics",UC="@firebase/app-check-compat",zC="@firebase/app-check",BC="@firebase/auth",qC="@firebase/auth-compat",HC="@firebase/database",FC="@firebase/data-connect",KC="@firebase/database-compat",GC="@firebase/functions",YC="@firebase/functions-compat",QC="@firebase/installations",XC="@firebase/installations-compat",$C="@firebase/messaging",JC="@firebase/messaging-compat",WC="@firebase/performance",ZC="@firebase/performance-compat",eR="@firebase/remote-config",tR="@firebase/remote-config-compat",nR="@firebase/storage",rR="@firebase/storage-compat",iR="@firebase/firestore",sR="@firebase/ai",aR="@firebase/firestore-compat",oR="firebase",lR="12.6.0";const nm="[DEFAULT]",uR={[tm]:"fire-core",[PC]:"fire-core-compat",[jC]:"fire-analytics",[LC]:"fire-analytics-compat",[zC]:"fire-app-check",[UC]:"fire-app-check-compat",[BC]:"fire-auth",[qC]:"fire-auth-compat",[HC]:"fire-rtdb",[FC]:"fire-data-connect",[KC]:"fire-rtdb-compat",[GC]:"fire-fn",[YC]:"fire-fn-compat",[QC]:"fire-iid",[XC]:"fire-iid-compat",[$C]:"fire-fcm",[JC]:"fire-fcm-compat",[WC]:"fire-perf",[ZC]:"fire-perf-compat",[eR]:"fire-rc",[tR]:"fire-rc-compat",[nR]:"fire-gcs",[rR]:"fire-gcs-compat",[iR]:"fire-fst",[aR]:"fire-fst-compat",[sR]:"fire-vertex","fire-js":"fire-js",[oR]:"fire-js-all"};const oh=new Map,cR=new Map,rm=new Map;function s0(i,e){try{i.container.addComponent(e)}catch(n){fa.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Ql(i){const e=i.name;if(rm.has(e))return fa.debug(`There were multiple attempts to register component ${e}.`),!1;rm.set(e,i);for(const n of oh.values())s0(n,i);for(const n of cR.values())s0(n,i);return!0}function xm(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Zi(i){return i==null?!1:i.settings!==void 0}const fR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},co=new Ec("app","Firebase",fR);class hR{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Zo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw co.create("app-deleted",{appName:this._name})}}const ru=lR;function Xb(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:nm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw co.create("bad-app-name",{appName:String(o)});if(n||(n=Hb()),!n)throw co.create("no-options");const u=oh.get(o);if(u){if(Wo(n,u.options)&&Wo(s,u.config))return u;throw co.create("duplicate-app",{appName:o})}const d=new vC(o);for(const _ of rm.values())d.addComponent(_);const y=new hR(n,s,d);return oh.set(o,y),y}function $b(i=nm){const e=oh.get(i);if(!e&&i===nm&&Hb())return Xb();if(!e)throw co.create("no-app",{appName:i});return e}function fo(i,e,n){let s=uR[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fa.warn(d.join(" "));return}Ql(new Zo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const dR="firebase-heartbeat-database",pR=1,uc="firebase-heartbeat-store";let qp=null;function Jb(){return qp||(qp=DC(dR,pR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(uc)}catch(n){console.warn(n)}}}}).catch(i=>{throw co.create("idb-open",{originalErrorMessage:i.message})})),qp}async function mR(i){try{const n=(await Jb()).transaction(uc),s=await n.objectStore(uc).get(Wb(i));return await n.done,s}catch(e){if(e instanceof ma)fa.warn(e.message);else{const n=co.create("idb-get",{originalErrorMessage:e?.message});fa.warn(n.message)}}}async function a0(i,e){try{const s=(await Jb()).transaction(uc,"readwrite");await s.objectStore(uc).put(e,Wb(i)),await s.done}catch(n){if(n instanceof ma)fa.warn(n.message);else{const s=co.create("idb-set",{originalErrorMessage:n?.message});fa.warn(s.message)}}}function Wb(i){return`${i.name}!${i.options.appId}`}const gR=1024,yR=30;class vR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=o0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>yR){const o=ER(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=o0(),{heartbeatsToSend:n,unsentEntries:s}=_R(this._heartbeatsCache.heartbeats),o=ah(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return fa.warn(e),""}}}function o0(){return new Date().toISOString().substring(0,10)}function _R(i,e=gR){const n=[];let s=i.slice();for(const o of i){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),l0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),l0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class bR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aC()?oC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return a0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return a0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function l0(i){return ah(JSON.stringify({version:2,heartbeats:i})).length}function ER(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function TR(i){Ql(new Zo("platform-logger",e=>new kC(e),"PRIVATE")),Ql(new Zo("heartbeat",e=>new vR(e),"PRIVATE")),fo(tm,i0,i),fo(tm,i0,"esm2020"),fo("fire-js","")}TR("");var wR="firebase",SR="12.6.0";fo(wR,SR,"app");function Zb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AR=Zb,eE=new Ec("auth","Firebase",Zb());const lh=new Rm("@firebase/auth");function CR(i,...e){lh.logLevel<=wt.WARN&&lh.warn(`Auth (${ru}): ${i}`,...e)}function Qf(i,...e){lh.logLevel<=wt.ERROR&&lh.error(`Auth (${ru}): ${i}`,...e)}function Rs(i,...e){throw Dm(i,...e)}function ns(i,...e){return Dm(i,...e)}function Om(i,e,n){const s={...AR(),[e]:n};return new Ec("auth","Firebase",s).create(e,{appName:i.name})}function Xo(i){return Om(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function RR(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Rs(i,"argument-error"),Om(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Dm(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return eE.create(i,...e)}function et(i,e,...n){if(!i)throw Dm(e,...n)}function oa(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Qf(e),new Error(e)}function ha(i,e){i||oa(e)}function im(){return typeof self<"u"&&self.location?.href||""}function IR(){return u0()==="http:"||u0()==="https:"}function u0(){return typeof self<"u"&&self.location?.protocol||null}function xR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IR()||nC()||"connection"in navigator)?navigator.onLine:!0}function OR(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class wc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ha(n>e,"Short delay should be less than long delay!"),this.isMobile=ZA()||rC()}get(){return xR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Nm(i,e){ha(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class tE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const DR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const NR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],MR=new wc(3e4,6e4);function Mm(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function iu(i,e,n,s,o={}){return nE(i,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const y=Tc({key:i.config.apiKey,...d}).slice(1),_=await i._getAdditionalHeaders();_["Content-Type"]="application/json",i.languageCode&&(_["X-Firebase-Locale"]=i.languageCode);const b={method:e,headers:_,...u};return tC()||(b.referrerPolicy="no-referrer"),i.emulatorConfig&&nu(i.emulatorConfig.host)&&(b.credentials="include"),tE.fetch()(await rE(i,i.config.apiHost,n,y),b)})}async function nE(i,e,n){i._canInitEmulator=!1;const s={...DR,...e};try{const o=new VR(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw jf(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const y=u.ok?d.errorMessage:d.error.message,[_,b]=y.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw jf(i,"credential-already-in-use",d);if(_==="EMAIL_EXISTS")throw jf(i,"email-already-in-use",d);if(_==="USER_DISABLED")throw jf(i,"user-disabled",d);const R=s[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw Om(i,R,b);Rs(i,R)}}catch(o){if(o instanceof ma)throw o;Rs(i,"network-request-failed",{message:String(o)})}}async function kR(i,e,n,s,o={}){const u=await iu(i,e,n,s,o);return"mfaPendingCredential"in u&&Rs(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function rE(i,e,n,s){const o=`${e}${n}?${s}`,u=i,d=u.config.emulator?Nm(i.config,o):`${i.config.apiScheme}://${o}`;return NR.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}class VR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ns(this.auth,"network-request-failed")),MR.get())})}}function jf(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=ns(i,e,s);return o.customData._tokenResponse=n,o}async function PR(i,e){return iu(i,"POST","/v1/accounts:delete",e)}async function uh(i,e){return iu(i,"POST","/v1/accounts:lookup",e)}function ec(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LR(i,e=!1){const n=Ui(i),s=await n.getIdToken(e),o=km(s);et(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:s,authTime:ec(Hp(o.auth_time)),issuedAtTime:ec(Hp(o.iat)),expirationTime:ec(Hp(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Hp(i){return Number(i)*1e3}function km(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return Qf("JWT malformed, contained fewer than 3 sections"),null;try{const o=Bb(n);return o?JSON.parse(o):(Qf("Failed to decode base64 JWT payload"),null)}catch(o){return Qf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function c0(i){const e=km(i);return et(e,"internal-error"),et(typeof e.exp<"u","internal-error"),et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function cc(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ma&&jR(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function jR({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class UR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class sm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ec(this.lastLoginAt),this.creationTime=ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ch(i){const e=i.auth,n=await i.getIdToken(),s=await cc(i,uh(e,{idToken:n}));et(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?iE(o.providerUserInfo):[],d=BR(i.providerData,u),y=i.isAnonymous,_=!(i.email&&o.passwordHash)&&!d?.length,b=y?_:!1,R={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new sm(o.createdAt,o.lastLoginAt),isAnonymous:b};Object.assign(i,R)}async function zR(i){const e=Ui(i);await ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BR(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function iE(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function qR(i,e){const n=await nE(i,{},async()=>{const s=Tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,d=await rE(i,o,"/v1/token",`key=${u}`),y=await i._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:y,body:s};return i.emulatorConfig&&nu(i.emulatorConfig.host)&&(_.credentials="include"),tE.fetch()(d,_)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function HR(i,e){return iu(i,"POST","/v2/accounts:revokeToken",Mm(i,e))}class Fl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){et(e.idToken,"internal-error"),et(typeof e.idToken<"u","internal-error"),et(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):c0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){et(e.length!==0,"internal-error");const n=c0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await qR(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new Fl;return s&&(et(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(et(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(et(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fl,this.toJSON())}_performRefresh(){return oa("not implemented")}}function to(i,e){et(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class es{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new UR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new sm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await cc(this,this.stsTokenManager.getToken(this.auth,e));return et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LR(this,e)}reload(){return zR(this)}_assign(e){this!==e&&(et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new es({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ch(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zi(this.auth.app))return Promise.reject(Xo(this.auth));const e=await this.getIdToken();return await cc(this,PR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,y=n.tenantId??void 0,_=n._redirectEventId??void 0,b=n.createdAt??void 0,R=n.lastLoginAt??void 0,{uid:I,emailVerified:M,isAnonymous:$,providerData:te,stsTokenManager:pe}=n;et(I&&pe,e,"internal-error");const _e=Fl.fromJSON(this.name,pe);et(typeof I=="string",e,"internal-error"),to(s,e.name),to(o,e.name),et(typeof M=="boolean",e,"internal-error"),et(typeof $=="boolean",e,"internal-error"),to(u,e.name),to(d,e.name),to(y,e.name),to(_,e.name),to(b,e.name),to(R,e.name);const je=new es({uid:I,auth:e,email:o,emailVerified:M,displayName:s,isAnonymous:$,photoURL:d,phoneNumber:u,tenantId:y,stsTokenManager:_e,createdAt:b,lastLoginAt:R});return te&&Array.isArray(te)&&(je.providerData=te.map(qe=>({...qe}))),_&&(je._redirectEventId=_),je}static async _fromIdTokenResponse(e,n,s=!1){const o=new Fl;o.updateFromServerResponse(n);const u=new es({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await ch(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];et(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?iE(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,y=new Fl;y.updateFromIdToken(s);const _=new es({uid:o.localId,auth:e,stsTokenManager:y,isAnonymous:d}),b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new sm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(_,b),_}}const f0=new Map;function la(i){ha(i instanceof Function,"Expected a class definition");let e=f0.get(i);return e?(ha(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,f0.set(i,e),e)}class sE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}sE.type="NONE";const h0=sE;function Xf(i,e,n){return`firebase:${i}:${e}:${n}`}class Kl{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Xf(this.userKey,o.apiKey,u),this.fullPersistenceKey=Xf("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await uh(this.auth,{idToken:e}).catch(()=>{});return n?es._fromGetAccountInfoResponse(this.auth,n,e):null}return es._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Kl(la(h0),e,s);const o=(await Promise.all(n.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let u=o[0]||la(h0);const d=Xf(s,e.config.apiKey,e.name);let y=null;for(const b of n)try{const R=await b._get(d);if(R){let I;if(typeof R=="string"){const M=await uh(e,{idToken:R}).catch(()=>{});if(!M)break;I=await es._fromGetAccountInfoResponse(e,M,R)}else I=es._fromJSON(e,R);b!==u&&(y=I),u=b;break}}catch{}const _=o.filter(b=>b._shouldAllowMigration);return!u._shouldAllowMigration||!_.length?new Kl(u,e,s):(u=_[0],y&&await u._set(d,y.toJSON()),await Promise.all(n.map(async b=>{if(b!==u)try{await b._remove(d)}catch{}})),new Kl(u,e,s))}}function d0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fE(e))return"Blackberry";if(hE(e))return"Webos";if(oE(e))return"Safari";if((e.includes("chrome/")||lE(e))&&!e.includes("edge/"))return"Chrome";if(cE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function aE(i=yr()){return/firefox\//i.test(i)}function oE(i=yr()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lE(i=yr()){return/crios\//i.test(i)}function uE(i=yr()){return/iemobile/i.test(i)}function cE(i=yr()){return/android/i.test(i)}function fE(i=yr()){return/blackberry/i.test(i)}function hE(i=yr()){return/webos/i.test(i)}function Vm(i=yr()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function FR(i=yr()){return Vm(i)&&!!window.navigator?.standalone}function KR(){return iC()&&document.documentMode===10}function dE(i=yr()){return Vm(i)||cE(i)||hE(i)||fE(i)||/windows phone/i.test(i)||uE(i)}function pE(i,e=[]){let n;switch(i){case"Browser":n=d0(yr());break;case"Worker":n=`${d0(yr())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ru}/${s}`}class GR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,y)=>{try{const _=e(u);d(_)}catch(_){y(_)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function YR(i,e={}){return iu(i,"GET","/v2/passwordPolicy",Mm(i,e))}const QR=6;class XR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??QR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class $R{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new p0(this),this.idTokenSubscription=new p0(this),this.beforeStateQueue=new GR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=la(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Kl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await uh(this,{idToken:e}),s=await es._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Zi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=s?._redirectEventId,y=await this.tryRedirectSignIn(e);(!u||u===d)&&y?.user&&(s=y.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ch(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zi(this.app))return Promise.reject(Xo(this));const n=e?Ui(e):null;return n&&et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zi(this.app)?Promise.reject(Xo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zi(this.app)?Promise.reject(Xo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(la(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YR(this),n=new XR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ec("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await HR(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&la(e)||this._popupRedirectResolver;et(n,this,"argument-error"),this.redirectPersistenceManager=await Kl.create(this,[la(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(y,this,"internal-error"),y.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const _=e.addObserver(n,s,o);return()=>{d=!0,_()}}else{const _=e.addObserver(n);return()=>{d=!0,_()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Zi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&CR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function xh(i){return Ui(i)}class p0{constructor(e){this.auth=e,this.observer=null,this.addObserver=hC(n=>this.observer=n)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Pm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JR(i){Pm=i}function WR(i){return Pm.loadJS(i)}function ZR(){return Pm.gapiScript}function eI(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function tI(i,e){const n=xm(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Wo(u,e??{}))return o;Rs(o,"already-initialized")}return n.initialize({options:e})}function nI(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(la);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function rI(i,e,n){const s=xh(i);et(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=mE(e),{host:d,port:y}=iI(e),_=y===null?"":`:${y}`,b={url:`${u}//${d}${_}/`},R=Object.freeze({host:d,port:y,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){et(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),et(Wo(b,s.config.emulator)&&Wo(R,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=b,s.emulatorConfig=R,s.settings.appVerificationDisabledForTesting=!0,nu(d)?(Kb(`${u}//${d}${_}`),Gb("Auth",!0)):sI()}function mE(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function iI(i){const e=mE(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:m0(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:m0(d)}}}function m0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function sI(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class gE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return oa("not implemented")}_getIdTokenResponse(e){return oa("not implemented")}_linkToIdToken(e,n){return oa("not implemented")}_getReauthenticationResolver(e){return oa("not implemented")}}async function Gl(i,e){return kR(i,"POST","/v1/accounts:signInWithIdp",Mm(i,e))}const aI="http://localhost";class el extends gE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new el(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const d=new el(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Gl(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Gl(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gl(e,n)}buildRequest(){const e={requestUri:aI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Tc(n)}return e}}class Lm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Sc extends Lm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class io extends Sc{constructor(){super("facebook.com")}static credential(e){return el._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return io.credential(e.oauthAccessToken)}catch{return null}}}io.FACEBOOK_SIGN_IN_METHOD="facebook.com";io.PROVIDER_ID="facebook.com";class aa extends Sc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return el._fromParams({providerId:aa.PROVIDER_ID,signInMethod:aa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return aa.credentialFromTaggedObject(e)}static credentialFromError(e){return aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return aa.credential(n,s)}catch{return null}}}aa.GOOGLE_SIGN_IN_METHOD="google.com";aa.PROVIDER_ID="google.com";class so extends Sc{constructor(){super("github.com")}static credential(e){return el._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return so.credential(e.oauthAccessToken)}catch{return null}}}so.GITHUB_SIGN_IN_METHOD="github.com";so.PROVIDER_ID="github.com";class ao extends Sc{constructor(){super("twitter.com")}static credential(e,n){return el._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ao.credential(n,s)}catch{return null}}}ao.TWITTER_SIGN_IN_METHOD="twitter.com";ao.PROVIDER_ID="twitter.com";class Xl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await es._fromIdTokenResponse(e,s,o),d=g0(s);return new Xl({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=g0(s);return new Xl({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function g0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class fh extends ma{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,fh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new fh(e,n,s,o)}}function yE(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?fh._fromErrorAndOperation(i,u,e,s):u})}async function oI(i,e,n=!1){const s=await cc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Xl._forOperation(i,"link",s)}async function lI(i,e,n=!1){const{auth:s}=i;if(Zi(s.app))return Promise.reject(Xo(s));const o="reauthenticate";try{const u=await cc(i,yE(s,o,e,i),n);et(u.idToken,s,"internal-error");const d=km(u.idToken);et(d,s,"internal-error");const{sub:y}=d;return et(i.uid===y,s,"user-mismatch"),Xl._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Rs(s,"user-mismatch"),u}}async function uI(i,e,n=!1){if(Zi(i.app))return Promise.reject(Xo(i));const s="signIn",o=await yE(i,s,e),u=await Xl._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}function cI(i,e,n,s){return Ui(i).onIdTokenChanged(e,n,s)}function fI(i,e,n){return Ui(i).beforeAuthStateChanged(e,n)}function hI(i,e,n,s){return Ui(i).onAuthStateChanged(e,n,s)}function y0(i){return Ui(i).signOut()}const hh="__sak";class vE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hh,"1"),this.storage.removeItem(hh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const dI=1e3,pI=10;class _E extends vE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,y,_)=>{this.notifyListeners(d,_)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);KR()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,pI):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},dI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_E.type="LOCAL";const mI=_E;class bE extends vE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bE.type="SESSION";const EE=bE;function gI(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Oh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Oh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const y=Array.from(d).map(async b=>b(n.origin,u)),_=await gI(y);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:_})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oh.receivers=[];function jm(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class yI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((y,_)=>{const b=jm("",20);o.port1.start();const R=setTimeout(()=>{_(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(I){const M=I;if(M.data.eventId===b)switch(M.data.status){case"ack":clearTimeout(R),u=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),y(M.data.response);break;default:clearTimeout(R),clearTimeout(u),_(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:b,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Ts(){return window}function vI(i){Ts().location.href=i}function TE(){return typeof Ts().WorkerGlobalScope<"u"&&typeof Ts().importScripts=="function"}async function _I(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bI(){return navigator?.serviceWorker?.controller||null}function EI(){return TE()?self:null}const wE="firebaseLocalStorageDb",TI=1,dh="firebaseLocalStorage",SE="fbase_key";class Ac{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dh(i,e){return i.transaction([dh],e?"readwrite":"readonly").objectStore(dh)}function wI(){const i=indexedDB.deleteDatabase(wE);return new Ac(i).toPromise()}function am(){const i=indexedDB.open(wE,TI);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(dh,{keyPath:SE})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(dh)?e(s):(s.close(),await wI(),e(await am()))})})}async function v0(i,e,n){const s=Dh(i,!0).put({[SE]:e,value:n});return new Ac(s).toPromise()}async function SI(i,e){const n=Dh(i,!1).get(e),s=await new Ac(n).toPromise();return s===void 0?null:s.value}function _0(i,e){const n=Dh(i,!0).delete(e);return new Ac(n).toPromise()}const AI=800,CI=3;class AE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await am(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>CI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oh._getInstance(EI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _I(),!this.activeServiceWorker)return;this.sender=new yI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await am();return await v0(e,hh,"1"),await _0(e,hh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>v0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>SI(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Dh(o,!1).getAll();return new Ac(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AE.type="LOCAL";const RI=AE;new wc(3e4,6e4);function CE(i,e){return e?la(e):(et(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Um extends gE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function II(i){return uI(i.auth,new Um(i),i.bypassAuthState)}function xI(i){const{auth:e,user:n}=i;return et(n,e,"internal-error"),lI(n,new Um(i),i.bypassAuthState)}async function OI(i){const{auth:e,user:n}=i;return et(n,e,"internal-error"),oI(n,new Um(i),i.bypassAuthState)}class RE{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:y}=e;if(d){this.reject(d);return}const _={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(_))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return II;case"linkViaPopup":case"linkViaRedirect":return OI;case"reauthViaPopup":case"reauthViaRedirect":return xI;default:Rs(this.auth,"internal-error")}}resolve(e){ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const DI=new wc(2e3,1e4);async function NI(i,e,n){if(Zi(i.app))return Promise.reject(ns(i,"operation-not-supported-in-this-environment"));const s=xh(i);RR(i,e,Lm);const o=CE(s,n);return new Yo(s,"signInViaPopup",e,o).executeNotNull()}class Yo extends RE{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Yo.currentPopupAction&&Yo.currentPopupAction.cancel(),Yo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return et(e,this.auth,"internal-error"),e}async onExecution(){ha(this.filter.length===1,"Popup operations only handle one event");const e=jm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DI.get())};e()}}Yo.currentPopupAction=null;const MI="pendingRedirect",$f=new Map;class kI extends RE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=$f.get(this.auth._key());if(!e){try{const s=await VI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}$f.set(this.auth._key(),e)}return this.bypassAuthState||$f.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VI(i,e){const n=jI(e),s=LI(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function PI(i,e){$f.set(i._key(),e)}function LI(i){return la(i._redirectPersistence)}function jI(i){return Xf(MI,i.config.apiKey,i.name)}async function UI(i,e,n=!1){if(Zi(i.app))return Promise.reject(Xo(i));const s=xh(i),o=CE(s,e),d=await new kI(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const zI=600*1e3;class BI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!IE(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ns(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zI&&this.cachedEventUids.clear(),this.cachedEventUids.has(b0(e))}saveEventToCache(e){this.cachedEventUids.add(b0(e)),this.lastProcessedEventTime=Date.now()}}function b0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function IE({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function qI(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IE(i);default:return!1}}async function HI(i,e={}){return iu(i,"GET","/v1/projects",e)}const FI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KI=/^https?/;async function GI(i){if(i.config.emulator)return;const{authorizedDomains:e}=await HI(i);for(const n of e)try{if(YI(n))return}catch{}Rs(i,"unauthorized-domain")}function YI(i){const e=im(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!KI.test(n))return!1;if(FI.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const QI=new wc(3e4,6e4);function E0(){const i=Ts().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function XI(i){return new Promise((e,n)=>{function s(){E0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{E0(),n(ns(i,"network-request-failed"))},timeout:QI.get()})}if(Ts().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ts().gapi?.load)s();else{const o=eI("iframefcb");return Ts()[o]=()=>{gapi.load?s():n(ns(i,"network-request-failed"))},WR(`${ZR()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Jf=null,e})}let Jf=null;function $I(i){return Jf=Jf||XI(i),Jf}const JI=new wc(5e3,15e3),WI="__/auth/iframe",ZI="emulator/auth/iframe",ex={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nx(i){const e=i.config;et(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Nm(e,ZI):`https://${i.config.authDomain}/${WI}`,s={apiKey:e.apiKey,appName:i.name,v:ru},o=tx.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Tc(s).slice(1)}`}async function rx(i){const e=await $I(i),n=Ts().gapi;return et(n,i,"internal-error"),e.open({where:document.body,url:nx(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ex,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=ns(i,"network-request-failed"),y=Ts().setTimeout(()=>{u(d)},JI.get());function _(){Ts().clearTimeout(y),o(s)}s.ping(_).then(_,()=>{u(d)})}))}const ix={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sx=500,ax=600,ox="_blank",lx="http://localhost";class T0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ux(i,e,n,s=sx,o=ax){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let y="";const _={...ix,width:s.toString(),height:o.toString(),top:u,left:d},b=yr().toLowerCase();n&&(y=lE(b)?ox:n),aE(b)&&(e=e||lx,_.scrollbars="yes");const R=Object.entries(_).reduce((M,[$,te])=>`${M}${$}=${te},`,"");if(FR(b)&&y!=="_self")return cx(e||"",y),new T0(null);const I=window.open(e||"",y,R);et(I,i,"popup-blocked");try{I.focus()}catch{}return new T0(I)}function cx(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const fx="__/auth/handler",hx="emulator/auth/handler",dx=encodeURIComponent("fac");async function w0(i,e,n,s,o,u){et(i.config.authDomain,i,"auth-domain-config-required"),et(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:ru,eventId:o};if(e instanceof Lm){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",fC(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[R,I]of Object.entries({}))d[R]=I}if(e instanceof Sc){const R=e.getScopes().filter(I=>I!=="");R.length>0&&(d.scopes=R.join(","))}i.tenantId&&(d.tid=i.tenantId);const y=d;for(const R of Object.keys(y))y[R]===void 0&&delete y[R];const _=await i._getAppCheckToken(),b=_?`#${dx}=${encodeURIComponent(_)}`:"";return`${px(i)}?${Tc(y).slice(1)}${b}`}function px({config:i}){return i.emulator?Nm(i,hx):`https://${i.authDomain}/${fx}`}const Fp="webStorageSupport";class mx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EE,this._completeRedirectFn=UI,this._overrideRedirectResult=PI}async _openPopup(e,n,s,o){ha(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await w0(e,n,s,im(),o);return ux(e,u,jm())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await w0(e,n,s,im(),o);return vI(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ha(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await rx(e),s=new BI(e);return n.register("authEvent",o=>(et(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fp,{type:Fp},o=>{const u=o?.[0]?.[Fp];u!==void 0&&n(!!u),Rs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=GI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dE()||oE()||Vm()}}const gx=mx;var S0="@firebase/auth",A0="1.11.1";class yx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function vx(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _x(i){Ql(new Zo("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:y}=s.options;et(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const _={apiKey:d,authDomain:y,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pE(i)},b=new $R(s,o,u,_);return nI(b,n),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ql(new Zo("auth-internal",e=>{const n=xh(e.getProvider("auth").getImmediate());return(s=>new yx(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fo(S0,A0,vx(i)),fo(S0,A0,"esm2020")}const bx=300,Ex=Fb("authIdTokenMaxAge")||bx;let C0=null;const Tx=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>Ex)return;const o=n?.token;C0!==o&&(C0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function wx(i=$b()){const e=xm(i,"auth");if(e.isInitialized())return e.getImmediate();const n=tI(i,{popupRedirectResolver:gx,persistence:[RI,mI,EE]}),s=Fb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=Tx(u.toString());fI(n,d,()=>d(n.currentUser)),cI(n,y=>d(y))}}const o=qb("auth");return o&&rI(n,`http://${o}`),n}function Sx(){return document.getElementsByTagName("head")?.[0]??document}JR({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=ns("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",Sx().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_x("Browser");var R0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ho,xE;(function(){var i;function e(L,k){function j(){}j.prototype=k.prototype,L.F=k.prototype,L.prototype=new j,L.prototype.constructor=L,L.D=function(Y,N,F){for(var V=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)V[Dt-2]=arguments[Dt];return k.prototype[N].apply(Y,V)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(L,k,j){j||(j=0);const Y=Array(16);if(typeof k=="string")for(var N=0;N<16;++N)Y[N]=k.charCodeAt(j++)|k.charCodeAt(j++)<<8|k.charCodeAt(j++)<<16|k.charCodeAt(j++)<<24;else for(N=0;N<16;++N)Y[N]=k[j++]|k[j++]<<8|k[j++]<<16|k[j++]<<24;k=L.g[0],j=L.g[1],N=L.g[2];let F=L.g[3],V;V=k+(F^j&(N^F))+Y[0]+3614090360&4294967295,k=j+(V<<7&4294967295|V>>>25),V=F+(N^k&(j^N))+Y[1]+3905402710&4294967295,F=k+(V<<12&4294967295|V>>>20),V=N+(j^F&(k^j))+Y[2]+606105819&4294967295,N=F+(V<<17&4294967295|V>>>15),V=j+(k^N&(F^k))+Y[3]+3250441966&4294967295,j=N+(V<<22&4294967295|V>>>10),V=k+(F^j&(N^F))+Y[4]+4118548399&4294967295,k=j+(V<<7&4294967295|V>>>25),V=F+(N^k&(j^N))+Y[5]+1200080426&4294967295,F=k+(V<<12&4294967295|V>>>20),V=N+(j^F&(k^j))+Y[6]+2821735955&4294967295,N=F+(V<<17&4294967295|V>>>15),V=j+(k^N&(F^k))+Y[7]+4249261313&4294967295,j=N+(V<<22&4294967295|V>>>10),V=k+(F^j&(N^F))+Y[8]+1770035416&4294967295,k=j+(V<<7&4294967295|V>>>25),V=F+(N^k&(j^N))+Y[9]+2336552879&4294967295,F=k+(V<<12&4294967295|V>>>20),V=N+(j^F&(k^j))+Y[10]+4294925233&4294967295,N=F+(V<<17&4294967295|V>>>15),V=j+(k^N&(F^k))+Y[11]+2304563134&4294967295,j=N+(V<<22&4294967295|V>>>10),V=k+(F^j&(N^F))+Y[12]+1804603682&4294967295,k=j+(V<<7&4294967295|V>>>25),V=F+(N^k&(j^N))+Y[13]+4254626195&4294967295,F=k+(V<<12&4294967295|V>>>20),V=N+(j^F&(k^j))+Y[14]+2792965006&4294967295,N=F+(V<<17&4294967295|V>>>15),V=j+(k^N&(F^k))+Y[15]+1236535329&4294967295,j=N+(V<<22&4294967295|V>>>10),V=k+(N^F&(j^N))+Y[1]+4129170786&4294967295,k=j+(V<<5&4294967295|V>>>27),V=F+(j^N&(k^j))+Y[6]+3225465664&4294967295,F=k+(V<<9&4294967295|V>>>23),V=N+(k^j&(F^k))+Y[11]+643717713&4294967295,N=F+(V<<14&4294967295|V>>>18),V=j+(F^k&(N^F))+Y[0]+3921069994&4294967295,j=N+(V<<20&4294967295|V>>>12),V=k+(N^F&(j^N))+Y[5]+3593408605&4294967295,k=j+(V<<5&4294967295|V>>>27),V=F+(j^N&(k^j))+Y[10]+38016083&4294967295,F=k+(V<<9&4294967295|V>>>23),V=N+(k^j&(F^k))+Y[15]+3634488961&4294967295,N=F+(V<<14&4294967295|V>>>18),V=j+(F^k&(N^F))+Y[4]+3889429448&4294967295,j=N+(V<<20&4294967295|V>>>12),V=k+(N^F&(j^N))+Y[9]+568446438&4294967295,k=j+(V<<5&4294967295|V>>>27),V=F+(j^N&(k^j))+Y[14]+3275163606&4294967295,F=k+(V<<9&4294967295|V>>>23),V=N+(k^j&(F^k))+Y[3]+4107603335&4294967295,N=F+(V<<14&4294967295|V>>>18),V=j+(F^k&(N^F))+Y[8]+1163531501&4294967295,j=N+(V<<20&4294967295|V>>>12),V=k+(N^F&(j^N))+Y[13]+2850285829&4294967295,k=j+(V<<5&4294967295|V>>>27),V=F+(j^N&(k^j))+Y[2]+4243563512&4294967295,F=k+(V<<9&4294967295|V>>>23),V=N+(k^j&(F^k))+Y[7]+1735328473&4294967295,N=F+(V<<14&4294967295|V>>>18),V=j+(F^k&(N^F))+Y[12]+2368359562&4294967295,j=N+(V<<20&4294967295|V>>>12),V=k+(j^N^F)+Y[5]+4294588738&4294967295,k=j+(V<<4&4294967295|V>>>28),V=F+(k^j^N)+Y[8]+2272392833&4294967295,F=k+(V<<11&4294967295|V>>>21),V=N+(F^k^j)+Y[11]+1839030562&4294967295,N=F+(V<<16&4294967295|V>>>16),V=j+(N^F^k)+Y[14]+4259657740&4294967295,j=N+(V<<23&4294967295|V>>>9),V=k+(j^N^F)+Y[1]+2763975236&4294967295,k=j+(V<<4&4294967295|V>>>28),V=F+(k^j^N)+Y[4]+1272893353&4294967295,F=k+(V<<11&4294967295|V>>>21),V=N+(F^k^j)+Y[7]+4139469664&4294967295,N=F+(V<<16&4294967295|V>>>16),V=j+(N^F^k)+Y[10]+3200236656&4294967295,j=N+(V<<23&4294967295|V>>>9),V=k+(j^N^F)+Y[13]+681279174&4294967295,k=j+(V<<4&4294967295|V>>>28),V=F+(k^j^N)+Y[0]+3936430074&4294967295,F=k+(V<<11&4294967295|V>>>21),V=N+(F^k^j)+Y[3]+3572445317&4294967295,N=F+(V<<16&4294967295|V>>>16),V=j+(N^F^k)+Y[6]+76029189&4294967295,j=N+(V<<23&4294967295|V>>>9),V=k+(j^N^F)+Y[9]+3654602809&4294967295,k=j+(V<<4&4294967295|V>>>28),V=F+(k^j^N)+Y[12]+3873151461&4294967295,F=k+(V<<11&4294967295|V>>>21),V=N+(F^k^j)+Y[15]+530742520&4294967295,N=F+(V<<16&4294967295|V>>>16),V=j+(N^F^k)+Y[2]+3299628645&4294967295,j=N+(V<<23&4294967295|V>>>9),V=k+(N^(j|~F))+Y[0]+4096336452&4294967295,k=j+(V<<6&4294967295|V>>>26),V=F+(j^(k|~N))+Y[7]+1126891415&4294967295,F=k+(V<<10&4294967295|V>>>22),V=N+(k^(F|~j))+Y[14]+2878612391&4294967295,N=F+(V<<15&4294967295|V>>>17),V=j+(F^(N|~k))+Y[5]+4237533241&4294967295,j=N+(V<<21&4294967295|V>>>11),V=k+(N^(j|~F))+Y[12]+1700485571&4294967295,k=j+(V<<6&4294967295|V>>>26),V=F+(j^(k|~N))+Y[3]+2399980690&4294967295,F=k+(V<<10&4294967295|V>>>22),V=N+(k^(F|~j))+Y[10]+4293915773&4294967295,N=F+(V<<15&4294967295|V>>>17),V=j+(F^(N|~k))+Y[1]+2240044497&4294967295,j=N+(V<<21&4294967295|V>>>11),V=k+(N^(j|~F))+Y[8]+1873313359&4294967295,k=j+(V<<6&4294967295|V>>>26),V=F+(j^(k|~N))+Y[15]+4264355552&4294967295,F=k+(V<<10&4294967295|V>>>22),V=N+(k^(F|~j))+Y[6]+2734768916&4294967295,N=F+(V<<15&4294967295|V>>>17),V=j+(F^(N|~k))+Y[13]+1309151649&4294967295,j=N+(V<<21&4294967295|V>>>11),V=k+(N^(j|~F))+Y[4]+4149444226&4294967295,k=j+(V<<6&4294967295|V>>>26),V=F+(j^(k|~N))+Y[11]+3174756917&4294967295,F=k+(V<<10&4294967295|V>>>22),V=N+(k^(F|~j))+Y[2]+718787259&4294967295,N=F+(V<<15&4294967295|V>>>17),V=j+(F^(N|~k))+Y[9]+3951481745&4294967295,L.g[0]=L.g[0]+k&4294967295,L.g[1]=L.g[1]+(N+(V<<21&4294967295|V>>>11))&4294967295,L.g[2]=L.g[2]+N&4294967295,L.g[3]=L.g[3]+F&4294967295}s.prototype.v=function(L,k){k===void 0&&(k=L.length);const j=k-this.blockSize,Y=this.C;let N=this.h,F=0;for(;F<k;){if(N==0)for(;F<=j;)o(this,L,F),F+=this.blockSize;if(typeof L=="string"){for(;F<k;)if(Y[N++]=L.charCodeAt(F++),N==this.blockSize){o(this,Y),N=0;break}}else for(;F<k;)if(Y[N++]=L[F++],N==this.blockSize){o(this,Y),N=0;break}}this.h=N,this.o+=k},s.prototype.A=function(){var L=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);L[0]=128;for(var k=1;k<L.length-8;++k)L[k]=0;k=this.o*8;for(var j=L.length-8;j<L.length;++j)L[j]=k&255,k/=256;for(this.v(L),L=Array(16),k=0,j=0;j<4;++j)for(let Y=0;Y<32;Y+=8)L[k++]=this.g[j]>>>Y&255;return L};function u(L,k){var j=y;return Object.prototype.hasOwnProperty.call(j,L)?j[L]:j[L]=k(L)}function d(L,k){this.h=k;const j=[];let Y=!0;for(let N=L.length-1;N>=0;N--){const F=L[N]|0;Y&&F==k||(j[N]=F,Y=!1)}this.g=j}var y={};function _(L){return-128<=L&&L<128?u(L,function(k){return new d([k|0],k<0?-1:0)}):new d([L|0],L<0?-1:0)}function b(L){if(isNaN(L)||!isFinite(L))return I;if(L<0)return _e(b(-L));const k=[];let j=1;for(let Y=0;L>=j;Y++)k[Y]=L/j|0,j*=4294967296;return new d(k,0)}function R(L,k){if(L.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(L.charAt(0)=="-")return _e(R(L.substring(1),k));if(L.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=b(Math.pow(k,8));let Y=I;for(let F=0;F<L.length;F+=8){var N=Math.min(8,L.length-F);const V=parseInt(L.substring(F,F+N),k);N<8?(N=b(Math.pow(k,N)),Y=Y.j(N).add(b(V))):(Y=Y.j(j),Y=Y.add(b(V)))}return Y}var I=_(0),M=_(1),$=_(16777216);i=d.prototype,i.m=function(){if(pe(this))return-_e(this).m();let L=0,k=1;for(let j=0;j<this.g.length;j++){const Y=this.i(j);L+=(Y>=0?Y:4294967296+Y)*k,k*=4294967296}return L},i.toString=function(L){if(L=L||10,L<2||36<L)throw Error("radix out of range: "+L);if(te(this))return"0";if(pe(this))return"-"+_e(this).toString(L);const k=b(Math.pow(L,6));var j=this;let Y="";for(;;){const N=tt(j,k).g;j=je(j,N.j(k));let F=((j.g.length>0?j.g[0]:j.h)>>>0).toString(L);if(j=N,te(j))return F+Y;for(;F.length<6;)F="0"+F;Y=F+Y}},i.i=function(L){return L<0?0:L<this.g.length?this.g[L]:this.h};function te(L){if(L.h!=0)return!1;for(let k=0;k<L.g.length;k++)if(L.g[k]!=0)return!1;return!0}function pe(L){return L.h==-1}i.l=function(L){return L=je(this,L),pe(L)?-1:te(L)?0:1};function _e(L){const k=L.g.length,j=[];for(let Y=0;Y<k;Y++)j[Y]=~L.g[Y];return new d(j,~L.h).add(M)}i.abs=function(){return pe(this)?_e(this):this},i.add=function(L){const k=Math.max(this.g.length,L.g.length),j=[];let Y=0;for(let N=0;N<=k;N++){let F=Y+(this.i(N)&65535)+(L.i(N)&65535),V=(F>>>16)+(this.i(N)>>>16)+(L.i(N)>>>16);Y=V>>>16,F&=65535,V&=65535,j[N]=V<<16|F}return new d(j,j[j.length-1]&-2147483648?-1:0)};function je(L,k){return L.add(_e(k))}i.j=function(L){if(te(this)||te(L))return I;if(pe(this))return pe(L)?_e(this).j(_e(L)):_e(_e(this).j(L));if(pe(L))return _e(this.j(_e(L)));if(this.l($)<0&&L.l($)<0)return b(this.m()*L.m());const k=this.g.length+L.g.length,j=[];for(var Y=0;Y<2*k;Y++)j[Y]=0;for(Y=0;Y<this.g.length;Y++)for(let N=0;N<L.g.length;N++){const F=this.i(Y)>>>16,V=this.i(Y)&65535,Dt=L.i(N)>>>16,Gt=L.i(N)&65535;j[2*Y+2*N]+=V*Gt,qe(j,2*Y+2*N),j[2*Y+2*N+1]+=F*Gt,qe(j,2*Y+2*N+1),j[2*Y+2*N+1]+=V*Dt,qe(j,2*Y+2*N+1),j[2*Y+2*N+2]+=F*Dt,qe(j,2*Y+2*N+2)}for(L=0;L<k;L++)j[L]=j[2*L+1]<<16|j[2*L];for(L=k;L<2*k;L++)j[L]=0;return new d(j,0)};function qe(L,k){for(;(L[k]&65535)!=L[k];)L[k+1]+=L[k]>>>16,L[k]&=65535,k++}function ke(L,k){this.g=L,this.h=k}function tt(L,k){if(te(k))throw Error("division by zero");if(te(L))return new ke(I,I);if(pe(L))return k=tt(_e(L),k),new ke(_e(k.g),_e(k.h));if(pe(k))return k=tt(L,_e(k)),new ke(_e(k.g),k.h);if(L.g.length>30){if(pe(L)||pe(k))throw Error("slowDivide_ only works with positive integers.");for(var j=M,Y=k;Y.l(L)<=0;)j=ht(j),Y=ht(Y);var N=Ge(j,1),F=Ge(Y,1);for(Y=Ge(Y,2),j=Ge(j,2);!te(Y);){var V=F.add(Y);V.l(L)<=0&&(N=N.add(j),F=V),Y=Ge(Y,1),j=Ge(j,1)}return k=je(L,N.j(k)),new ke(N,k)}for(N=I;L.l(k)>=0;){for(j=Math.max(1,Math.floor(L.m()/k.m())),Y=Math.ceil(Math.log(j)/Math.LN2),Y=Y<=48?1:Math.pow(2,Y-48),F=b(j),V=F.j(k);pe(V)||V.l(L)>0;)j-=Y,F=b(j),V=F.j(k);te(F)&&(F=M),N=N.add(F),L=je(L,V)}return new ke(N,L)}i.B=function(L){return tt(this,L).h},i.and=function(L){const k=Math.max(this.g.length,L.g.length),j=[];for(let Y=0;Y<k;Y++)j[Y]=this.i(Y)&L.i(Y);return new d(j,this.h&L.h)},i.or=function(L){const k=Math.max(this.g.length,L.g.length),j=[];for(let Y=0;Y<k;Y++)j[Y]=this.i(Y)|L.i(Y);return new d(j,this.h|L.h)},i.xor=function(L){const k=Math.max(this.g.length,L.g.length),j=[];for(let Y=0;Y<k;Y++)j[Y]=this.i(Y)^L.i(Y);return new d(j,this.h^L.h)};function ht(L){const k=L.g.length+1,j=[];for(let Y=0;Y<k;Y++)j[Y]=L.i(Y)<<1|L.i(Y-1)>>>31;return new d(j,L.h)}function Ge(L,k){const j=k>>5;k%=32;const Y=L.g.length-j,N=[];for(let F=0;F<Y;F++)N[F]=k>0?L.i(F+j)>>>k|L.i(F+j+1)<<32-k:L.i(F+j);return new d(N,L.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,xE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=b,d.fromString=R,ho=d}).apply(typeof R0<"u"?R0:typeof self<"u"?self:typeof window<"u"?window:{});var Uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var OE,Qu,DE,Wf,om,NE,ME,kE;(function(){var i,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uf=="object"&&Uf];for(var v=0;v<c.length;++v){var w=c[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=n(this);function o(c,v){if(v)e:{var w=s;c=c.split(".");for(var x=0;x<c.length-1;x++){var ne=c[x];if(!(ne in w))break e;w=w[ne]}c=c[c.length-1],x=w[c],v=v(x),v!=x&&v!=null&&e(w,c,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(v){var w=[],x;for(x in v)Object.prototype.hasOwnProperty.call(v,x)&&w.push([x,v[x]]);return w}});var u=u||{},d=this||self;function y(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function _(c,v,w){return c.call.apply(c.bind,arguments)}function b(c,v,w){return b=_,b.apply(null,arguments)}function R(c,v){var w=Array.prototype.slice.call(arguments,1);return function(){var x=w.slice();return x.push.apply(x,arguments),c.apply(this,x)}}function I(c,v){function w(){}w.prototype=v.prototype,c.Z=v.prototype,c.prototype=new w,c.prototype.constructor=c,c.Ob=function(x,ne,ue){for(var Ce=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)Ce[nt-2]=arguments[nt];return v.prototype[ne].apply(x,Ce)}}var M=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function $(c){const v=c.length;if(v>0){const w=Array(v);for(let x=0;x<v;x++)w[x]=c[x];return w}return[]}function te(c,v){for(let x=1;x<arguments.length;x++){const ne=arguments[x];var w=typeof ne;if(w=w!="object"?w:ne?Array.isArray(ne)?"array":w:"null",w=="array"||w=="object"&&typeof ne.length=="number"){w=c.length||0;const ue=ne.length||0;c.length=w+ue;for(let Ce=0;Ce<ue;Ce++)c[w+Ce]=ne[Ce]}else c.push(ne)}}class pe{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function _e(c){d.setTimeout(()=>{throw c},0)}function je(){var c=L;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class qe{constructor(){this.h=this.g=null}add(v,w){const x=ke.get();x.set(v,w),this.h?this.h.next=x:this.g=x,this.h=x}}var ke=new pe(()=>new tt,c=>c.reset());class tt{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ht,Ge=!1,L=new qe,k=()=>{const c=Promise.resolve(void 0);ht=()=>{c.then(j)}};function j(){for(var c;c=je();){try{c.h.call(c.g)}catch(w){_e(w)}var v=ke;v.j(c),v.h<100&&(v.h++,c.next=v.g,v.g=c)}Ge=!1}function Y(){this.u=this.u,this.C=this.C}Y.prototype.u=!1,Y.prototype.dispose=function(){this.u||(this.u=!0,this.N())},Y.prototype[Symbol.dispose]=function(){this.dispose()},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};d.addEventListener("test",w,v),d.removeEventListener("test",w,v)}catch{}return c})();function V(c){return/^[\s\xa0]*$/.test(c)}function Dt(c,v){N.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,v)}I(Dt,N),Dt.prototype.init=function(c,v){const w=this.type=c.type,x=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget,v||(w=="mouseover"?v=c.fromElement:w=="mouseout"&&(v=c.toElement)),this.relatedTarget=v,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Dt.Z.h.call(this)},Dt.prototype.h=function(){Dt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Gt="closure_listenable_"+(Math.random()*1e6|0),oe=0;function be(c,v,w,x,ne){this.listener=c,this.proxy=null,this.src=v,this.type=w,this.capture=!!x,this.ha=ne,this.key=++oe,this.da=this.fa=!1}function Ue(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function at(c,v,w){for(const x in c)v.call(w,c[x],x,c)}function dt(c,v){for(const w in c)v.call(void 0,c[w],w,c)}function G(c){const v={};for(const w in c)v[w]=c[w];return v}const me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xe(c,v){let w,x;for(let ne=1;ne<arguments.length;ne++){x=arguments[ne];for(w in x)c[w]=x[w];for(let ue=0;ue<me.length;ue++)w=me[ue],Object.prototype.hasOwnProperty.call(x,w)&&(c[w]=x[w])}}function Pe(c){this.src=c,this.g={},this.h=0}Pe.prototype.add=function(c,v,w,x,ne){const ue=c.toString();c=this.g[ue],c||(c=this.g[ue]=[],this.h++);const Ce=Je(c,v,x,ne);return Ce>-1?(v=c[Ce],w||(v.fa=!1)):(v=new be(v,this.src,ue,!!x,ne),v.fa=w,c.push(v)),v};function Qe(c,v){const w=v.type;if(w in c.g){var x=c.g[w],ne=Array.prototype.indexOf.call(x,v,void 0),ue;(ue=ne>=0)&&Array.prototype.splice.call(x,ne,1),ue&&(Ue(v),c.g[w].length==0&&(delete c.g[w],c.h--))}}function Je(c,v,w,x){for(let ne=0;ne<c.length;++ne){const ue=c[ne];if(!ue.da&&ue.listener==v&&ue.capture==!!w&&ue.ha==x)return ne}return-1}var gt="closure_lm_"+(Math.random()*1e6|0),yn={};function Me(c,v,w,x,ne){if(Array.isArray(v)){for(let ue=0;ue<v.length;ue++)Me(c,v[ue],w,x,ne);return null}return w=wo(w),c&&c[Gt]?c.J(v,w,y(x)?!!x.capture:!1,ne):rs(c,v,w,!1,x,ne)}function rs(c,v,w,x,ne,ue){if(!v)throw Error("Invalid event type");const Ce=y(ne)?!!ne.capture:!!ne;let nt=Os(c);if(nt||(c[gt]=nt=new Pe(c)),w=nt.add(v,w,x,Ce,ue),w.proxy)return w;if(x=Bi(),w.proxy=x,x.src=c,x.listener=w,c.addEventListener)F||(ne=Ce),ne===void 0&&(ne=!1),c.addEventListener(v.toString(),x,ne);else if(c.attachEvent)c.attachEvent(mi(v.toString()),x);else if(c.addListener&&c.removeListener)c.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Bi(){function c(w){return v.call(c.src,c.listener,w)}const v=Gr;return c}function Ct(c,v,w,x,ne){if(Array.isArray(v))for(var ue=0;ue<v.length;ue++)Ct(c,v[ue],w,x,ne);else x=y(x)?!!x.capture:!!x,w=wo(w),c&&c[Gt]?(c=c.i,ue=String(v).toString(),ue in c.g&&(v=c.g[ue],w=Je(v,w,x,ne),w>-1&&(Ue(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete c.g[ue],c.h--)))):c&&(c=Os(c))&&(v=c.g[v.toString()],c=-1,v&&(c=Je(v,w,x,ne)),(w=c>-1?v[c]:null)&&pi(w))}function pi(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[Gt])Qe(v.i,c);else{var w=c.type,x=c.proxy;v.removeEventListener?v.removeEventListener(w,x,c.capture):v.detachEvent?v.detachEvent(mi(w),x):v.addListener&&v.removeListener&&v.removeListener(x),(w=Os(v))?(Qe(w,c),w.h==0&&(w.src=null,v[gt]=null)):Ue(c)}}}function mi(c){return c in yn?yn[c]:yn[c]="on"+c}function Gr(c,v){if(c.da)c=!0;else{v=new Dt(v,this);const w=c.listener,x=c.ha||c.src;c.fa&&pi(c),c=w.call(x,v)}return c}function Os(c){return c=c[gt],c instanceof Pe?c:null}var To="__closure_events_fn_"+(Math.random()*1e9>>>0);function wo(c){return typeof c=="function"?c:(c[To]||(c[To]=function(v){return c.handleEvent(v)}),c[To])}function dn(){Y.call(this),this.i=new Pe(this),this.M=this,this.G=null}I(dn,Y),dn.prototype[Gt]=!0,dn.prototype.removeEventListener=function(c,v,w,x){Ct(this,c,v,w,x)};function rn(c,v){var w,x=c.G;if(x)for(w=[];x;x=x.G)w.push(x);if(c=c.M,x=v.type||v,typeof v=="string")v=new N(v,c);else if(v instanceof N)v.target=v.target||c;else{var ne=v;v=new N(x,c),xe(v,ne)}ne=!0;let ue,Ce;if(w)for(Ce=w.length-1;Ce>=0;Ce--)ue=v.g=w[Ce],ne=Pn(ue,x,!0,v)&&ne;if(ue=v.g=c,ne=Pn(ue,x,!0,v)&&ne,ne=Pn(ue,x,!1,v)&&ne,w)for(Ce=0;Ce<w.length;Ce++)ue=v.g=w[Ce],ne=Pn(ue,x,!1,v)&&ne}dn.prototype.N=function(){if(dn.Z.N.call(this),this.i){var c=this.i;for(const v in c.g){const w=c.g[v];for(let x=0;x<w.length;x++)Ue(w[x]);delete c.g[v],c.h--}}this.G=null},dn.prototype.J=function(c,v,w,x){return this.i.add(String(c),v,!1,w,x)},dn.prototype.K=function(c,v,w,x){return this.i.add(String(c),v,!0,w,x)};function Pn(c,v,w,x){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();let ne=!0;for(let ue=0;ue<v.length;++ue){const Ce=v[ue];if(Ce&&!Ce.da&&Ce.capture==w){const nt=Ce.listener,cn=Ce.ha||Ce.src;Ce.fa&&Qe(c.i,Ce),ne=nt.call(cn,x)!==!1&&ne}}return ne&&!x.defaultPrevented}function ol(c,v){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=b(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(c,v||0)}function is(c){c.g=ol(()=>{c.g=null,c.i&&(c.i=!1,is(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class qn extends Y{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:is(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yr(c){Y.call(this),this.h=c,this.g={}}I(Yr,Y);var Qr=[];function Xr(c){at(c.g,function(v,w){this.g.hasOwnProperty(w)&&pi(v)},c),c.g={}}Yr.prototype.N=function(){Yr.Z.N.call(this),Xr(this)},Yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gi=d.JSON.stringify,Ds=d.JSON.parse,ga=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Ns(){}function yi(){}var ar={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function vn(){N.call(this,"d")}I(vn,N);function _n(){N.call(this,"c")}I(_n,N);var Ne={},ss=null;function Sr(){return ss=ss||new dn}Ne.Ia="serverreachability";function Ms(c){N.call(this,Ne.Ia,c)}I(Ms,N);function Ie(c){const v=Sr();rn(v,new Ms(v))}Ne.STAT_EVENT="statevent";function qi(c,v){N.call(this,Ne.STAT_EVENT,c),this.stat=v}I(qi,N);function sn(c){const v=Sr();rn(v,new qi(v,c))}Ne.Ja="timingevent";function Ar(c,v){N.call(this,Ne.Ja,c),this.size=v}I(Ar,N);function $r(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},v)}function vr(){this.g=!0}vr.prototype.ua=function(){this.g=!1};function uu(c,v,w,x,ne,ue){c.info(function(){if(c.g)if(ue){var Ce="",nt=ue.split("&");for(let Rt=0;Rt<nt.length;Rt++){var cn=nt[Rt].split("=");if(cn.length>1){const zt=cn[0];cn=cn[1];const Lr=zt.split("_");Ce=Lr.length>=2&&Lr[1]=="type"?Ce+(zt+"="+cn+"&"):Ce+(zt+"=redacted&")}}}else Ce=null;else Ce=ue;return"XMLHTTP REQ ("+x+") [attempt "+ne+"]: "+v+`
`+w+`
`+Ce})}function ll(c,v,w,x,ne,ue,Ce){c.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+ne+"]: "+v+`
`+w+`
`+ue+" "+Ce})}function $n(c,v,w,x){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+So(c,w)+(x?" "+x:"")})}function Cr(c,v){c.info(function(){return"TIMEOUT: "+v})}vr.prototype.info=function(){};function So(c,v){if(!c.g)return v;if(!v)return null;try{const ue=JSON.parse(v);if(ue){for(c=0;c<ue.length;c++)if(Array.isArray(ue[c])){var w=ue[c];if(!(w.length<2)){var x=w[1];if(Array.isArray(x)&&!(x.length<1)){var ne=x[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(let Ce=1;Ce<x.length;Ce++)x[Ce]=""}}}}return gi(ue)}catch{return v}}var vi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Zt;function ks(){}I(ks,Ns),ks.prototype.g=function(){return new XMLHttpRequest},Zt=new ks;function Rr(c){return encodeURIComponent(String(c))}function Vs(c){var v=1;c=c.split(":");const w=[];for(;v>0&&c.length;)w.push(c.shift()),v--;return c.length&&w.push(c.join(":")),w}function or(c,v,w,x){this.j=c,this.i=v,this.l=w,this.S=x||1,this.V=new Yr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Jr}function Jr(){this.i=null,this.g="",this.h=!1}var jt={},Qt={};function Ln(c,v,w){c.M=1,c.A=ls(on(v)),c.u=w,c.R=!0,Hi(c,null)}function Hi(c,v){c.F=Date.now(),Hn(c),c.B=on(c.A);var w=c.B,x=c.S;Array.isArray(x)||(x=[String(x)]),Ea(w.i,"t",x),c.C=0,w=c.j.L,c.h=new Jr,c.g=Tn(c.j,w?v:null,!c.u),c.P>0&&(c.O=new qn(b(c.Y,c,c.g),c.P)),v=c.V,w=c.g,x=c.ba;var ne="readystatechange";Array.isArray(ne)||(ne&&(Qr[0]=ne.toString()),ne=Qr);for(let ue=0;ue<ne.length;ue++){const Ce=Me(w,ne[ue],x||v.handleEvent,!1,v.h||v);if(!Ce)break;v.g[Ce.key]=Ce}v=c.J?G(c.J):{},c.u?(c.v||(c.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,v)):(c.v="GET",c.g.ea(c.B,c.v,null,v)),Ie(),uu(c.i,c.v,c.B,c.l,c.S,c.u)}or.prototype.ba=function(c){c=c.target;const v=this.O;v&&si(c)==3?v.j():this.Y(c)},or.prototype.Y=function(c){try{if(c==this.g)e:{const nt=si(this.g),cn=this.g.ya(),Rt=this.g.ca();if(!(nt<3)&&(nt!=3||this.g&&(this.h.h||this.g.la()||un(this.g)))){this.K||nt!=4||cn==7||(cn==8||Rt<=0?Ie(3):Ie(2)),Ir(this);var v=this.g.ca();this.X=v;var w=cu(this);if(this.o=v==200,ll(this.i,this.v,this.B,this.l,this.S,nt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var x,ne=this.g;if((x=ne.g?ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(x)){var ue=x;break t}}ue=null}if(c=ue)$n(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Cn(this,c);else{this.o=!1,this.m=3,sn(12),bn(this),xt(this);break e}}if(this.R){c=!0;let zt;for(;!this.K&&this.C<w.length;)if(zt=Ao(this,w),zt==Qt){nt==4&&(this.m=4,sn(14),c=!1),$n(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==jt){this.m=4,sn(15),$n(this.i,this.l,w,"[Invalid Chunk]"),c=!1;break}else $n(this.i,this.l,zt,null),Cn(this,zt);if(Wr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||w.length!=0||this.h.h||(this.m=1,sn(16),c=!1),this.o=this.o&&c,!c)$n(this.i,this.l,w,"[Invalid Chunked Response]"),bn(this),xt(this);else if(w.length>0&&!this.W){this.W=!0;var Ce=this.j;Ce.g==this&&Ce.aa&&!Ce.P&&(Ce.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),cs(Ce),Ce.P=!0,sn(11))}}else $n(this.i,this.l,w,null),Cn(this,w);nt==4&&bn(this),this.o&&!this.K&&(nt==4?$i(this.j,this):(this.o=!1,Hn(this)))}else Qi(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,sn(12)):(this.m=0,sn(13)),bn(this),xt(this)}}}catch{}finally{}};function cu(c){if(!Wr(c))return c.g.la();const v=un(c.g);if(v==="")return"";let w="";const x=v.length,ne=si(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return bn(c),xt(c),"";c.h.i=new d.TextDecoder}for(let ue=0;ue<x;ue++)c.h.h=!0,w+=c.h.i.decode(v[ue],{stream:!(ne&&ue==x-1)});return v.length=0,c.h.g+=w,c.C=0,c.h.g}function Wr(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Ao(c,v){var w=c.C,x=v.indexOf(`
`,w);return x==-1?Qt:(w=Number(v.substring(w,x)),isNaN(w)?jt:(x+=1,x+w>v.length?Qt:(v=v.slice(x,x+w),c.C=x+w,v)))}or.prototype.cancel=function(){this.K=!0,bn(this)};function Hn(c){c.T=Date.now()+c.H,Ps(c,c.H)}function Ps(c,v){if(c.D!=null)throw Error("WatchDog timer not null");c.D=$r(b(c.aa,c),v)}function Ir(c){c.D&&(d.clearTimeout(c.D),c.D=null)}or.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Cr(this.i,this.B),this.M!=2&&(Ie(),sn(17)),bn(this),this.m=2,xt(this)):Ps(this,this.T-c)};function xt(c){c.j.I==0||c.K||$i(c.j,c)}function bn(c){Ir(c);var v=c.O;v&&typeof v.dispose=="function"&&v.dispose(),c.O=null,Xr(c.V),c.g&&(v=c.g,c.g=null,v.abort(),v.dispose())}function Cn(c,v){try{var w=c.j;if(w.I!=0&&(w.g==c||Or(w.h,c))){if(!c.L&&Or(w.h,c)&&w.I==3){try{var x=w.Ba.g.parse(v)}catch{x=null}if(Array.isArray(x)&&x.length==3){var ne=x;if(ne[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<c.F)Aa(w),wi(w);else break e;Ai(w),sn(18)}}else w.xa=ne[1],0<w.xa-w.K&&ne[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=$r(b(w.Va,w),6e3));xr(w.h)<=1&&w.ta&&(w.ta=void 0)}else Vr(w,11)}else if((c.L||w.g==c)&&Aa(w),!V(v))for(ne=w.Ba.g.parse(v),v=0;v<ne.length;v++){let Rt=ne[v];const zt=Rt[0];if(!(zt<=w.K))if(w.K=zt,Rt=Rt[1],w.I==2)if(Rt[0]=="c"){w.M=Rt[1],w.ba=Rt[2];const Lr=Rt[3];Lr!=null&&(w.ka=Lr,w.j.info("VER="+w.ka));const jr=Rt[4];jr!=null&&(w.za=jr,w.j.info("SVER="+w.za));const Er=Rt[5];Er!=null&&typeof Er=="number"&&Er>0&&(x=1.5*Er,w.O=x,w.j.info("backChannelRequestTimeoutMs_="+x)),x=w;const oi=c.g;if(oi){const hs=oi.g?oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hs){var ue=x.h;ue.g||hs.indexOf("spdy")==-1&&hs.indexOf("quic")==-1&&hs.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Zr(ue,ue.h),ue.h=null))}if(x.G){const xa=oi.g?oi.g.getResponseHeader("X-HTTP-Session-Id"):null;xa&&(x.wa=xa,Nt(x.J,x.G,xa))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-c.F,w.j.info("Handshake RTT: "+w.T+"ms")),x=w;var Ce=c;if(x.na=Ia(x,x.L?x.ba:null,x.W),Ce.L){ya(x.h,Ce);var nt=Ce,cn=x.O;cn&&(nt.H=cn),nt.D&&(Ir(nt),Hn(nt)),x.g=Ce}else zs(x);w.i.length>0&&Si(w)}else Rt[0]!="stop"&&Rt[0]!="close"||Vr(w,7);else w.I==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?Vr(w,7):us(w):Rt[0]!="noop"&&w.l&&w.l.qa(Rt),w.A=0)}}Ie(4)}catch{}}var an=class{constructor(c,v){this.g=c,this.map=v}};function _i(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function as(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function xr(c){return c.h?1:c.g?c.g.size:0}function Or(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function Zr(c,v){c.g?c.g.add(v):c.h=v}function ya(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}_i.prototype.cancel=function(){if(this.i=os(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function os(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const w of c.g.values())v=v.concat(w.G);return v}return $(c.i)}var Co=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(c,v){if(c){c=c.split("&");for(let w=0;w<c.length;w++){const x=c[w].indexOf("=");let ne,ue=null;x>=0?(ne=c[w].substring(0,x),ue=c[w].substring(x+1)):ne=c[w],v(ne,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function lr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;c instanceof lr?(this.l=c.l,ln(this,c.j),this.o=c.o,this.g=c.g,Dr(this,c.u),this.h=c.h,va(this,cl(c.i)),this.m=c.m):c&&(v=String(c).match(Co))?(this.l=!1,ln(this,v[1]||"",!0),this.o=vt(v[2]||""),this.g=vt(v[3]||"",!0),Dr(this,v[4]),this.h=vt(v[5]||"",!0),va(this,v[6]||"",!0),this.m=vt(v[7]||"")):(this.l=!1,this.i=new ri(null,this.l))}lr.prototype.toString=function(){const c=[];var v=this.j;v&&c.push(ei(v,ti,!0),":");var w=this.g;return(w||v=="file")&&(c.push("//"),(v=this.o)&&c.push(ei(v,ti,!0),"@"),c.push(Rr(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&c.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(ei(w,w.charAt(0)=="/"?Ls:_a,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",ei(w,Ro)),c.join("")},lr.prototype.resolve=function(c){const v=on(this);let w=!!c.j;w?ln(v,c.j):w=!!c.o,w?v.o=c.o:w=!!c.g,w?v.g=c.g:w=c.u!=null;var x=c.h;if(w)Dr(v,c.u);else if(w=!!c.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var ne=v.h.lastIndexOf("/");ne!=-1&&(x=v.h.slice(0,ne+1)+x)}if(ne=x,ne==".."||ne==".")x="";else if(ne.indexOf("./")!=-1||ne.indexOf("/.")!=-1){x=ne.lastIndexOf("/",0)==0,ne=ne.split("/");const ue=[];for(let Ce=0;Ce<ne.length;){const nt=ne[Ce++];nt=="."?x&&Ce==ne.length&&ue.push(""):nt==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),x&&Ce==ne.length&&ue.push("")):(ue.push(nt),x=!0)}x=ue.join("/")}else x=ne}return w?v.h=x:w=c.i.toString()!=="",w?va(v,cl(c.i)):w=!!c.m,w&&(v.m=c.m),v};function on(c){return new lr(c)}function ln(c,v,w){c.j=w?vt(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function Dr(c,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);c.u=v}else c.u=null}function va(c,v,w){v instanceof ri?(c.i=v,ii(c.i,c.l)):(w||(v=ei(v,ni)),c.i=new ri(v,c.l))}function Nt(c,v,w){c.i.set(v,w)}function ls(c){return Nt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function vt(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ei(c,v,w){return typeof c=="string"?(c=encodeURI(c).replace(v,Rn),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Rn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ti=/[#\/\?@]/g,_a=/[#\?:]/g,Ls=/[#\?]/g,ni=/[#\?@]/g,Ro=/#/g;function ri(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function Jn(c){c.g||(c.g=new Map,c.h=0,c.i&&ot(c.i,function(v,w){c.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}i=ri.prototype,i.add=function(c,v){Jn(this),this.i=null,c=pn(this,c);let w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(v),this.h+=1,this};function ul(c,v){Jn(c),v=pn(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function yt(c,v){return Jn(c),v=pn(c,v),c.g.has(v)}i.forEach=function(c,v){Jn(this),this.g.forEach(function(w,x){w.forEach(function(ne){c.call(v,ne,x,this)},this)},this)};function ba(c,v){Jn(c);let w=[];if(typeof v=="string")yt(c,v)&&(w=w.concat(c.g.get(pn(c,v))));else for(c=Array.from(c.g.values()),v=0;v<c.length;v++)w=w.concat(c[v]);return w}i.set=function(c,v){return Jn(this),this.i=null,c=pn(this,c),yt(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},i.get=function(c,v){return c?(c=ba(this,c),c.length>0?String(c[0]):v):v};function Ea(c,v,w){ul(c,v),w.length>0&&(c.i=null,c.g.set(pn(c,v),$(w)),c.h+=w.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(let x=0;x<v.length;x++){var w=v[x];const ne=Rr(w);w=ba(this,w);for(let ue=0;ue<w.length;ue++){let Ce=ne;w[ue]!==""&&(Ce+="="+Rr(w[ue])),c.push(Ce)}}return this.i=c.join("&")};function cl(c){const v=new ri;return v.i=c.i,c.g&&(v.g=new Map(c.g),v.h=c.h),v}function pn(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function ii(c,v){v&&!c.j&&(Jn(c),c.i=null,c.g.forEach(function(w,x){const ne=x.toLowerCase();x!=ne&&(ul(this,x),Ea(this,ne,w))},c)),c.j=v}function ur(c,v){const w=new vr;if(d.Image){const x=new Image;x.onload=R(_r,w,"TestLoadImage: loaded",!0,v,x),x.onerror=R(_r,w,"TestLoadImage: error",!1,v,x),x.onabort=R(_r,w,"TestLoadImage: abort",!1,v,x),x.ontimeout=R(_r,w,"TestLoadImage: timeout",!1,v,x),d.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=c}else v(!1)}function Nr(c,v){const w=new vr,x=new AbortController,ne=setTimeout(()=>{x.abort(),_r(w,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:x.signal}).then(ue=>{clearTimeout(ne),ue.ok?_r(w,"TestPingServer: ok",!0,v):_r(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(ne),_r(w,"TestPingServer: error",!1,v)})}function _r(c,v,w,x,ne){try{ne&&(ne.onload=null,ne.onerror=null,ne.onabort=null,ne.ontimeout=null),x(w)}catch{}}function Fi(){this.g=new ga}function Ut(c){this.i=c.Sb||null,this.h=c.ab||!1}I(Ut,Ns),Ut.prototype.g=function(){return new Fn(this.i,this.h)};function Fn(c,v){dn.call(this),this.H=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(Fn,dn),i=Fn.prototype,i.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=v,this.readyState=1,br(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(v.body=c),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Mr(this)),this.readyState=0},i.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,br(this)),this.g&&(this.readyState=3,br(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;bi(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function bi(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}i.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?Mr(this):br(this),this.readyState==3&&bi(this)}},i.Oa=function(c){this.g&&(this.response=this.responseText=c,Mr(this))},i.Na=function(c){this.g&&(this.response=c,Mr(this))},i.ga=function(){this.g&&Mr(this)};function Mr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,br(c)}i.setRequestHeader=function(c,v){this.A.append(c,v)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=v.next();return c.join(`\r
`)};function br(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Fn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function En(c){let v="";return at(c,function(w,x){v+=x,v+=":",v+=w,v+=`\r
`}),v}function js(c,v,w){e:{for(x in w){var x=!1;break e}x=!0}x||(w=En(w),typeof c=="string"?w!=null&&Rr(w):Nt(c,v,w))}function pt(c){dn.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(pt,dn);var kr=/^https?$/i,Ta=["POST","PUT"];i=pt.prototype,i.Fa=function(c){this.H=c},i.ea=function(c,v,w,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Zt.g(),this.g.onreadystatechange=M(b(this.Ca,this));try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(ue){Ki(this,ue);return}if(c=w||"",w=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var ne in x)w.set(ne,x[ne]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const ue of x.keys())w.set(ue,x.get(ue));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(w.keys()).find(ue=>ue.toLowerCase()=="content-type"),ne=d.FormData&&c instanceof d.FormData,!(Array.prototype.indexOf.call(Ta,v,void 0)>=0)||x||ne||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,Ce]of w)this.g.setRequestHeader(ue,Ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(ue){Ki(this,ue)}};function Ki(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.o=5,Gi(c),Ei(c)}function Gi(c){c.A||(c.A=!0,rn(c,"complete"),rn(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,rn(this,"complete"),rn(this,"abort"),Ei(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ei(this,!0)),pt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Yi(this):this.Xa())},i.Xa=function(){Yi(this)};function Yi(c){if(c.h&&typeof u<"u"){if(c.v&&si(c)==4)setTimeout(c.Ca.bind(c),0);else if(rn(c,"readystatechange"),si(c)==4){c.h=!1;try{const ue=c.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var x;if(x=ue===0){let Ce=String(c.D).match(Co)[1]||null;!Ce&&d.self&&d.self.location&&(Ce=d.self.location.protocol.slice(0,-1)),x=!kr.test(Ce?Ce.toLowerCase():"")}w=x}if(w)rn(c,"complete"),rn(c,"success");else{c.o=6;try{var ne=si(c)>2?c.g.statusText:""}catch{ne=""}c.l=ne+" ["+c.ca()+"]",Gi(c)}}finally{Ei(c)}}}}function Ei(c,v){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const w=c.g;c.g=null,v||rn(c,"ready");try{w.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function si(c){return c.g?c.g.readyState:0}i.ca=function(){try{return si(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),Ds(v)}};function un(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Qi(c){const v={};c=(c.g&&si(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<c.length;x++){if(V(c[x]))continue;var w=Vs(c[x]);const ne=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ue=v[ne]||[];v[ne]=ue,ue.push(w)}dt(v,function(x){return x.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ti(c,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||v}function ai(c){this.za=0,this.i=[],this.j=new vr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ti("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ti("baseRetryDelayMs",5e3,c),this.Za=Ti("retryDelaySeedMs",1e4,c),this.Ta=Ti("forwardChannelMaxRetries",2,c),this.va=Ti("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new _i(c&&c.concurrentRequestLimit),this.Ba=new Fi,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ai.prototype,i.ka=8,i.I=1,i.connect=function(c,v,w,x){sn(0),this.W=c,this.H=v||{},w&&x!==void 0&&(this.H.OSID=w,this.H.OAID=x),this.F=this.X,this.J=Ia(this,null,this.W),Si(this)};function us(c){if(wa(c),c.I==3){var v=c.V++,w=on(c.J);if(Nt(w,"SID",c.M),Nt(w,"RID",v),Nt(w,"TYPE","terminate"),Xi(c,w),v=new or(c,c.j,v),v.M=2,v.A=ls(on(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&d.Image&&(new Image().src=v.A,w=!0),w||(v.g=Tn(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Hn(v)}Ra(c)}function wi(c){c.g&&(cs(c),c.g.cancel(),c.g=null)}function wa(c){wi(c),c.v&&(d.clearTimeout(c.v),c.v=null),Aa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&d.clearTimeout(c.m),c.m=null)}function Si(c){if(!as(c.h)&&!c.m){c.m=!0;var v=c.Ea;ht||k(),Ge||(ht(),Ge=!0),L.add(v,c),c.D=0}}function Sa(c,v){return xr(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=v.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=$r(b(c.Ea,c,v),Ca(c,c.D)),c.D++,!0)}i.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const ne=new or(this,this.j,c);let ue=this.o;if(this.U&&(ue?(ue=G(ue),xe(ue,this.U)):ue=this.U),this.u!==null||this.R||(ne.J=ue,ue=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var x=this.i[w];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(v+=x,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=Io(this,ne,v),w=on(this.J),Nt(w,"RID",c),Nt(w,"CVER",22),this.G&&Nt(w,"X-HTTP-Session-Id",this.G),Xi(this,w),ue&&(this.R?v="headers="+Rr(En(ue))+"&"+v:this.u&&js(w,this.u,ue)),Zr(this.h,ne),this.Ra&&Nt(w,"TYPE","init"),this.S?(Nt(w,"$req",v),Nt(w,"SID","null"),ne.U=!0,Ln(ne,w,null)):Ln(ne,w,v),this.I=2}}else this.I==3&&(c?Us(this,c):this.i.length==0||as(this.h)||Us(this))};function Us(c,v){var w;v?w=v.l:w=c.V++;const x=on(c.J);Nt(x,"SID",c.M),Nt(x,"RID",w),Nt(x,"AID",c.K),Xi(c,x),c.u&&c.o&&js(x,c.u,c.o),w=new or(c,c.j,w,c.D+1),c.u===null&&(w.J=c.o),v&&(c.i=v.G.concat(c.i)),v=Io(c,w,1e3),w.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Zr(c.h,w),Ln(w,x,v)}function Xi(c,v){c.H&&at(c.H,function(w,x){Nt(v,x,w)}),c.l&&at({},function(w,x){Nt(v,x,w)})}function Io(c,v,w){w=Math.min(c.i.length,w);const x=c.l?b(c.l.Ka,c.l,c):null;e:{var ne=c.i;let nt=-1;for(;;){const cn=["count="+w];nt==-1?w>0?(nt=ne[0].g,cn.push("ofs="+nt)):nt=0:cn.push("ofs="+nt);let Rt=!0;for(let zt=0;zt<w;zt++){var ue=ne[zt].g;const Lr=ne[zt].map;if(ue-=nt,ue<0)nt=Math.max(0,ne[zt].g-100),Rt=!1;else try{ue="req"+ue+"_"||"";try{var Ce=Lr instanceof Map?Lr:Object.entries(Lr);for(const[jr,Er]of Ce){let oi=Er;y(Er)&&(oi=gi(Er)),cn.push(ue+jr+"="+encodeURIComponent(oi))}}catch(jr){throw cn.push(ue+"type="+encodeURIComponent("_badmap")),jr}}catch{x&&x(Lr)}}if(Rt){Ce=cn.join("&");break e}}Ce=void 0}return c=c.i.splice(0,w),v.G=c,Ce}function zs(c){if(!c.g&&!c.v){c.Y=1;var v=c.Da;ht||k(),Ge||(ht(),Ge=!0),L.add(v,c),c.A=0}}function Ai(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=$r(b(c.Da,c),Ca(c,c.A)),c.A++,!0)}i.Da=function(){if(this.v=null,xo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=$r(b(this.Wa,this),c)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,sn(10),wi(this),xo(this))};function cs(c){c.B!=null&&(d.clearTimeout(c.B),c.B=null)}function xo(c){c.g=new or(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var v=on(c.na);Nt(v,"RID","rpc"),Nt(v,"SID",c.M),Nt(v,"AID",c.K),Nt(v,"CI",c.F?"0":"1"),!c.F&&c.ia&&Nt(v,"TO",c.ia),Nt(v,"TYPE","xmlhttp"),Xi(c,v),c.u&&c.o&&js(v,c.u,c.o),c.O&&(c.g.H=c.O);var w=c.g;c=c.ba,w.M=1,w.A=ls(on(v)),w.u=null,w.R=!0,Hi(w,c)}i.Va=function(){this.C!=null&&(this.C=null,wi(this),Ai(this),sn(19))};function Aa(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function $i(c,v){var w=null;if(c.g==v){Aa(c),cs(c),c.g=null;var x=2}else if(Or(c.h,v))w=v.G,ya(c.h,v),x=1;else return;if(c.I!=0){if(v.o)if(x==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var ne=c.D;x=Sr(),rn(x,new Ar(x,w)),Si(c)}else zs(c);else if(ne=v.m,ne==3||ne==0&&v.X>0||!(x==1&&Sa(c,v)||x==2&&Ai(c)))switch(w&&w.length>0&&(v=c.h,v.i=v.i.concat(w)),ne){case 1:Vr(c,5);break;case 4:Vr(c,10);break;case 3:Vr(c,6);break;default:Vr(c,2)}}}function Ca(c,v){let w=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(w*=2),w*v}function Vr(c,v){if(c.j.info("Error code "+v),v==2){var w=b(c.bb,c),x=c.Ua;const ne=!x;x=new lr(x||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ln(x,"https"),ls(x),ne?ur(x.toString(),w):Nr(x.toString(),w)}else sn(2);c.I=0,c.l&&c.l.pa(v),Ra(c),wa(c)}i.bb=function(c){c?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function Ra(c){if(c.I=0,c.ja=[],c.l){const v=os(c.h);(v.length!=0||c.i.length!=0)&&(te(c.ja,v),te(c.ja,c.i),c.h.i.length=0,$(c.i),c.i.length=0),c.l.oa()}}function Ia(c,v,w){var x=w instanceof lr?on(w):new lr(w);if(x.g!="")v&&(x.g=v+"."+x.g),Dr(x,x.u);else{var ne=d.location;x=ne.protocol,v=v?v+"."+ne.hostname:ne.hostname,ne=+ne.port;const ue=new lr(null);x&&ln(ue,x),v&&(ue.g=v),ne&&Dr(ue,ne),w&&(ue.h=w),x=ue}return w=c.G,v=c.wa,w&&v&&Nt(x,w,v),Nt(x,"VER",c.ka),Xi(c,x),x}function Tn(c,v,w){if(v&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Aa&&!c.ma?new pt(new Ut({ab:w})):new pt(c.ma),v.Fa(c.L),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function fs(){}i=fs.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Pr(){}Pr.prototype.g=function(c,v){return new Kn(c,v)};function Kn(c,v){dn.call(this),this.g=new ai(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(c?c["X-WebChannel-Client-Profile"]=v.sa:c={"X-WebChannel-Client-Profile":v.sa}),this.g.U=c,(c=v&&v.Qb)&&!V(c)&&(this.g.u=c),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!V(v)&&(this.g.G=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new Ci(this)}I(Kn,dn),Kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){us(this.g)},Kn.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.v&&(w={},w.__data__=gi(c),c=w);v.i.push(new an(v.Ya++,c)),v.I==3&&Si(v)},Kn.prototype.N=function(){this.g.l=null,delete this.j,us(this.g),delete this.g,Kn.Z.N.call(this)};function Bs(c){vn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const w in v){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}I(Bs,vn);function Oo(){_n.call(this),this.status=1}I(Oo,_n);function Ci(c){this.g=c}I(Ci,fs),Ci.prototype.ra=function(){rn(this.g,"a")},Ci.prototype.qa=function(c){rn(this.g,new Bs(c))},Ci.prototype.pa=function(c){rn(this.g,new Oo)},Ci.prototype.oa=function(){rn(this.g,"b")},Pr.prototype.createWebChannel=Pr.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,kE=function(){return new Pr},ME=function(){return Sr()},NE=Ne,om={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vi.NO_ERROR=0,vi.TIMEOUT=8,vi.HTTP_ERROR=6,Wf=vi,Pt.COMPLETE="complete",DE=Pt,yi.EventType=ar,ar.OPEN="a",ar.CLOSE="b",ar.ERROR="c",ar.MESSAGE="d",dn.prototype.listen=dn.prototype.J,Qu=yi,pt.prototype.listenOnce=pt.prototype.K,pt.prototype.getLastError=pt.prototype.Ha,pt.prototype.getLastErrorCode=pt.prototype.ya,pt.prototype.getStatus=pt.prototype.ca,pt.prototype.getResponseJson=pt.prototype.La,pt.prototype.getResponseText=pt.prototype.la,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Fa,OE=pt}).apply(typeof Uf<"u"?Uf:typeof self<"u"?self:typeof window<"u"?window:{});const I0="@firebase/firestore",x0="4.9.2";class pr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pr.UNAUTHENTICATED=new pr(null),pr.GOOGLE_CREDENTIALS=new pr("google-credentials-uid"),pr.FIRST_PARTY=new pr("first-party-uid"),pr.MOCK_USER=new pr("mock-user");let su="12.3.0";const tl=new Rm("@firebase/firestore");function Ul(){return tl.logLevel}function Le(i,...e){if(tl.logLevel<=wt.DEBUG){const n=e.map(zm);tl.debug(`Firestore (${su}): ${i}`,...n)}}function da(i,...e){if(tl.logLevel<=wt.ERROR){const n=e.map(zm);tl.error(`Firestore (${su}): ${i}`,...n)}}function $l(i,...e){if(tl.logLevel<=wt.WARN){const n=e.map(zm);tl.warn(`Firestore (${su}): ${i}`,...n)}}function zm(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function $e(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,VE(i,s,n)}function VE(i,e,n){let s=`FIRESTORE (${su}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw da(s),new Error(s)}function Lt(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||VE(e,o,s)}function st(i,e){return i}const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends ma{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class po{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class PE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ax{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(pr.UNAUTHENTICATED)))}shutdown(){}}class Cx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Rx{constructor(e){this.t=e,this.currentUser=pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Lt(this.o===void 0,42304);let s=this.i;const o=_=>this.i!==s?(s=this.i,n(_)):Promise.resolve();let u=new po;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new po,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const _=u;e.enqueueRetryable((async()=>{await _.promise,await o(this.currentUser)}))},y=_=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((_=>y(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?y(_):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new po)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Lt(typeof s.accessToken=="string",31837,{l:s}),new PE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Lt(e===null||typeof e=="string",2055,{h:e}),new pr(e)}}class Ix{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=pr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xx{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new Ix(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(pr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class O0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ox{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Lt(this.o===void 0,3512);const s=u=>{u.error!=null&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Le("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new O0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Lt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new O0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Dx(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Bm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=Dx(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function St(i,e){return i<e?-1:i>e?1:0}function lm(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return Kp(o)===Kp(u)?St(o,u):Kp(o)?1:-1}return St(i.length,e.length)}const Nx=55296,Mx=57343;function Kp(i){const e=i.charCodeAt(0);return e>=Nx&&e<=Mx}function Jl(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const D0="__name__";class _s{constructor(e,n,s){n===void 0?n=0:n>e.length&&$e(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&$e(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return _s.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _s?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=_s.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return St(e.length,n.length)}static compareSegments(e,n){const s=_s.isNumericId(e),o=_s.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?_s.extractNumericId(e).compare(_s.extractNumericId(n)):lm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ho.fromString(e.substring(4,e.length-2))}}class fn extends _s{construct(e,n,s){return new fn(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new He(Ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new fn(n)}static emptyPath(){return new fn([])}}const kx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ir extends _s{construct(e,n,s){return new ir(e,n,s)}static isValidIdentifier(e){return kx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ir.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===D0}static keyField(){return new ir([D0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new He(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const y=e[o];if(y==="\\"){if(o+1===e.length)throw new He(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[o+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new He(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=_,o+=2}else y==="`"?(d=!d,o++):y!=="."||d?(s+=y,o++):(u(),o++)}if(u(),d)throw new He(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ir(n)}static emptyPath(){return new ir([])}}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(fn.fromString(e))}static fromName(e){return new Ye(fn.fromString(e).popFirst(5))}static empty(){return new Ye(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new fn(e.slice()))}}function Vx(i,e,n){if(!n)throw new He(Ee.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Px(i,e,n,s){if(e===!0&&s===!0)throw new He(Ee.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function N0(i){if(!Ye.isDocumentKey(i))throw new He(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function LE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function qm(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":$e(12329,{type:typeof i})}function fc(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new He(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qm(i);throw new He(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Vn(i,e){const n={typeString:i};return e&&(n.value=e),n}function Cc(i,e){if(!LE(i))throw new He(Ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const d=i[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new He(Ee.INVALID_ARGUMENT,n);return!0}const M0=-62135596800,k0=1e6;class Wt{static now(){return Wt.fromMillis(Date.now())}static fromDate(e){return Wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*k0);return new Wt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new He(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new He(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<M0)throw new He(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/k0}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cc(e,Wt._jsonSchema))return new Wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-M0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Wt._jsonSchemaVersion="firestore/timestamp/1.0",Wt._jsonSchema={type:Vn("string",Wt._jsonSchemaVersion),seconds:Vn("number"),nanoseconds:Vn("number")};class rt{static fromTimestamp(e){return new rt(e)}static min(){return new rt(new Wt(0,0))}static max(){return new rt(new Wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const hc=-1;function Lx(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=rt.fromTimestamp(s===1e9?new Wt(n+1,0):new Wt(n,s));return new mo(o,Ye.empty(),e)}function jx(i){return new mo(i.readTime,i.key,hc)}class mo{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new mo(rt.min(),Ye.empty(),hc)}static max(){return new mo(rt.max(),Ye.empty(),hc)}}function Ux(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Ye.comparator(i.documentKey,e.documentKey),n!==0?n:St(i.largestBatchId,e.largestBatchId))}const zx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function au(i){if(i.code!==Ee.FAILED_PRECONDITION||i.message!==zx)throw i;Le("LocalStore","Unexpectedly lost primary lease")}class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ve(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ve?n:ve.resolve(n)}catch(n){return ve.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ve.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ve.reject(n)}static resolve(e){return new ve(((n,s)=>{n(e)}))}static reject(e){return new ve(((n,s)=>{s(e)}))}static waitFor(e){return new ve(((n,s)=>{let o=0,u=0,d=!1;e.forEach((y=>{++o,y.next((()=>{++u,d&&u===o&&n()}),(_=>s(_)))})),d=!0,u===o&&n()}))}static or(e){let n=ve.resolve(!1);for(const s of e)n=n.next((o=>o?ve.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ve(((s,o)=>{const u=e.length,d=new Array(u);let y=0;for(let _=0;_<u;_++){const b=_;n(e[b]).next((R=>{d[b]=R,++y,y===u&&s(d)}),(R=>o(R)))}}))}static doWhile(e,n){return new ve(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function qx(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ou(i){return i.name==="IndexedDbTransactionError"}class Nh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nh.ce=-1;const Hm=-1;function Mh(i){return i==null}function ph(i){return i===0&&1/i==-1/0}function Hx(i){return typeof i=="number"&&Number.isInteger(i)&&!ph(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const jE="";function Fx(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=V0(e)),e=Kx(i.get(n),e);return V0(e)}function Kx(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case jE:n+="";break;default:n+=u}}return n}function V0(i){return i+jE+""}function P0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function rl(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function UE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class hn{constructor(e,n){this.comparator=e,this.root=n||rr.EMPTY}insert(e,n){return new hn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(e){return new hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zf(this.root,e,this.comparator,!1)}getReverseIterator(){return new zf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zf(this.root,e,this.comparator,!0)}}class zf{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rr{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??rr.RED,this.left=o??rr.EMPTY,this.right=u??rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new rr(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return rr.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $e(27949);return e+(this.isRed()?0:1)}}rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1;rr.EMPTY=new class{constructor(){this.size=0}get key(){throw $e(57766)}get value(){throw $e(16141)}get color(){throw $e(16727)}get left(){throw $e(29726)}get right(){throw $e(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new rr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bn{constructor(e){this.comparator=e,this.data=new hn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new L0(this.data.getIterator())}getIteratorFrom(e){return new L0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Bn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Bn(this.comparator);return n.data=e,n}}class L0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ts{constructor(e){this.fields=e,e.sort(ir.comparator)}static empty(){return new ts([])}unionWith(e){let n=new Bn(ir.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new ts(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class zE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class sr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new zE("Invalid base64 string: "+u):u}})(e);return new sr(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new sr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sr.EMPTY_BYTE_STRING=new sr("");const Gx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function go(i){if(Lt(!!i,39018),typeof i=="string"){let e=0;const n=Gx.exec(i);if(Lt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:An(i.seconds),nanos:An(i.nanos)}}function An(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function yo(i){return typeof i=="string"?sr.fromBase64String(i):sr.fromUint8Array(i)}const BE="server_timestamp",qE="__type__",HE="__previous_value__",FE="__local_write_time__";function Fm(i){return(i?.mapValue?.fields||{})[qE]?.stringValue===BE}function kh(i){const e=i.mapValue.fields[HE];return Fm(e)?kh(e):e}function dc(i){const e=go(i.mapValue.fields[FE].timestampValue);return new Wt(e.seconds,e.nanos)}class Yx{constructor(e,n,s,o,u,d,y,_,b,R){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=y,this.longPollingOptions=_,this.useFetchStreams=b,this.isUsingEmulator=R}}const mh="(default)";class pc{constructor(e,n){this.projectId=e,this.database=n||mh}static empty(){return new pc("","")}get isDefaultDatabase(){return this.database===mh}isEqual(e){return e instanceof pc&&e.projectId===this.projectId&&e.database===this.database}}const KE="__type__",Qx="__max__",Bf={mapValue:{}},GE="__vector__",gh="value";function vo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Fm(i)?4:$x(i)?9007199254740991:Xx(i)?10:11:$e(28295,{value:i})}function Is(i,e){if(i===e)return!0;const n=vo(i);if(n!==vo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return dc(i).isEqual(dc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=go(o.timestampValue),y=go(u.timestampValue);return d.seconds===y.seconds&&d.nanos===y.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return yo(o.bytesValue).isEqual(yo(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return An(o.geoPointValue.latitude)===An(u.geoPointValue.latitude)&&An(o.geoPointValue.longitude)===An(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return An(o.integerValue)===An(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=An(o.doubleValue),y=An(u.doubleValue);return d===y?ph(d)===ph(y):isNaN(d)&&isNaN(y)}return!1})(i,e);case 9:return Jl(i.arrayValue.values||[],e.arrayValue.values||[],Is);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},y=u.mapValue.fields||{};if(P0(d)!==P0(y))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(y[_]===void 0||!Is(d[_],y[_])))return!1;return!0})(i,e);default:return $e(52216,{left:i})}}function mc(i,e){return(i.values||[]).find((n=>Is(n,e)))!==void 0}function Wl(i,e){if(i===e)return 0;const n=vo(i),s=vo(e);if(n!==s)return St(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return St(i.booleanValue,e.booleanValue);case 2:return(function(u,d){const y=An(u.integerValue||u.doubleValue),_=An(d.integerValue||d.doubleValue);return y<_?-1:y>_?1:y===_?0:isNaN(y)?isNaN(_)?0:-1:1})(i,e);case 3:return j0(i.timestampValue,e.timestampValue);case 4:return j0(dc(i),dc(e));case 5:return lm(i.stringValue,e.stringValue);case 6:return(function(u,d){const y=yo(u),_=yo(d);return y.compareTo(_)})(i.bytesValue,e.bytesValue);case 7:return(function(u,d){const y=u.split("/"),_=d.split("/");for(let b=0;b<y.length&&b<_.length;b++){const R=St(y[b],_[b]);if(R!==0)return R}return St(y.length,_.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,d){const y=St(An(u.latitude),An(d.latitude));return y!==0?y:St(An(u.longitude),An(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return U0(i.arrayValue,e.arrayValue);case 10:return(function(u,d){const y=u.fields||{},_=d.fields||{},b=y[gh]?.arrayValue,R=_[gh]?.arrayValue,I=St(b?.values?.length||0,R?.values?.length||0);return I!==0?I:U0(b,R)})(i.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Bf.mapValue&&d===Bf.mapValue)return 0;if(u===Bf.mapValue)return 1;if(d===Bf.mapValue)return-1;const y=u.fields||{},_=Object.keys(y),b=d.fields||{},R=Object.keys(b);_.sort(),R.sort();for(let I=0;I<_.length&&I<R.length;++I){const M=lm(_[I],R[I]);if(M!==0)return M;const $=Wl(y[_[I]],b[R[I]]);if($!==0)return $}return St(_.length,R.length)})(i.mapValue,e.mapValue);default:throw $e(23264,{he:n})}}function j0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return St(i,e);const n=go(i),s=go(e),o=St(n.seconds,s.seconds);return o!==0?o:St(n.nanos,s.nanos)}function U0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Wl(n[o],s[o]);if(u)return u}return St(n.length,s.length)}function Zl(i){return um(i)}function um(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=go(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return yo(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Ye.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=um(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${um(n.fields[d])}`;return o+"}"})(i.mapValue):$e(61005,{value:i})}function Zf(i){switch(vo(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kh(i);return e?16+Zf(e):16;case 5:return 2*i.stringValue.length;case 6:return yo(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Zf(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return rl(s.fields,((u,d)=>{o+=u.length+Zf(d)})),o})(i.mapValue);default:throw $e(13486,{value:i})}}function cm(i){return!!i&&"integerValue"in i}function Km(i){return!!i&&"arrayValue"in i}function z0(i){return!!i&&"nullValue"in i}function B0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function eh(i){return!!i&&"mapValue"in i}function Xx(i){return(i?.mapValue?.fields||{})[KE]?.stringValue===GE}function tc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return rl(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=tc(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tc(i.arrayValue.values[n]);return e}return{...i}}function $x(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===Qx}class Li{constructor(e){this.value=e}static empty(){return new Li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!eh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tc(n)}setAll(e){let n=ir.emptyPath(),s={},o=[];e.forEach(((d,y)=>{if(!n.isImmediateParentOf(y)){const _=this.getFieldsMap(n);this.applyChanges(_,s,o),s={},o=[],n=y.popLast()}d?s[y.lastSegment()]=tc(d):o.push(y.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());eh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Is(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];eh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){rl(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Li(tc(this.value))}}function YE(i){const e=[];return rl(i.fields,((n,s)=>{const o=new ir([n]);if(eh(s)){const u=YE(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new ts(e)}class mr{constructor(e,n,s,o,u,d,y){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=y}static newInvalidDocument(e){return new mr(e,0,rt.min(),rt.min(),rt.min(),Li.empty(),0)}static newFoundDocument(e,n,s,o){return new mr(e,1,n,rt.min(),s,o,0)}static newNoDocument(e,n){return new mr(e,2,n,rt.min(),rt.min(),Li.empty(),0)}static newUnknownDocument(e,n){return new mr(e,3,n,rt.min(),rt.min(),Li.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yh{constructor(e,n){this.position=e,this.inclusive=n}}function q0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],d=i.position[o];if(u.field.isKeyField()?s=Ye.comparator(Ye.fromName(d.referenceValue),n.key):s=Wl(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function H0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Is(i.position[n],e.position[n]))return!1;return!0}class vh{constructor(e,n="asc"){this.field=e,this.dir=n}}function Jx(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class QE{}class zn extends QE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new Zx(e,n,s):n==="array-contains"?new n2(e,s):n==="in"?new r2(e,s):n==="not-in"?new i2(e,s):n==="array-contains-any"?new s2(e,s):new zn(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new e2(e,s):new t2(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wl(n,this.value)):n!==null&&vo(this.value)===vo(n)&&this.matchesComparison(Wl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xs extends QE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new xs(e,n)}matches(e){return XE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function XE(i){return i.op==="and"}function $E(i){return Wx(i)&&XE(i)}function Wx(i){for(const e of i.filters)if(e instanceof xs)return!1;return!0}function fm(i){if(i instanceof zn)return i.field.canonicalString()+i.op.toString()+Zl(i.value);if($E(i))return i.filters.map((e=>fm(e))).join(",");{const e=i.filters.map((n=>fm(n))).join(",");return`${i.op}(${e})`}}function JE(i,e){return i instanceof zn?(function(s,o){return o instanceof zn&&s.op===o.op&&s.field.isEqual(o.field)&&Is(s.value,o.value)})(i,e):i instanceof xs?(function(s,o){return o instanceof xs&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,d,y)=>u&&JE(d,o.filters[y])),!0):!1})(i,e):void $e(19439)}function WE(i){return i instanceof zn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Zl(n.value)}`})(i):i instanceof xs?(function(n){return n.op.toString()+" {"+n.getFilters().map(WE).join(" ,")+"}"})(i):"Filter"}class Zx extends zn{constructor(e,n,s){super(e,n,s),this.key=Ye.fromName(s.referenceValue)}matches(e){const n=Ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class e2 extends zn{constructor(e,n){super(e,"in",n),this.keys=ZE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class t2 extends zn{constructor(e,n){super(e,"not-in",n),this.keys=ZE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function ZE(i,e){return(e.arrayValue?.values||[]).map((n=>Ye.fromName(n.referenceValue)))}class n2 extends zn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Km(n)&&mc(n.arrayValue,this.value)}}class r2 extends zn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mc(this.value.arrayValue,n)}}class i2 extends zn{constructor(e,n){super(e,"not-in",n)}matches(e){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!mc(this.value.arrayValue,n)}}class s2 extends zn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Km(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>mc(this.value.arrayValue,s)))}}class a2{constructor(e,n=null,s=[],o=[],u=null,d=null,y=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=y,this.Te=null}}function F0(i,e=null,n=[],s=[],o=null,u=null,d=null){return new a2(i,e,n,s,o,u,d)}function Gm(i){const e=st(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>fm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Mh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Zl(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Zl(s))).join(",")),e.Te=n}return e.Te}function Ym(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!Jx(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!JE(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!H0(i.startAt,e.startAt)&&H0(i.endAt,e.endAt)}function hm(i){return Ye.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Vh{constructor(e,n=null,s=[],o=[],u=null,d="F",y=null,_=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=y,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function o2(i,e,n,s,o,u,d,y){return new Vh(i,e,n,s,o,u,d,y)}function Qm(i){return new Vh(i)}function K0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function l2(i){return i.collectionGroup!==null}function nc(i){const e=st(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let y=new Bn(ir.comparator);return d.filters.forEach((_=>{_.getFlattenedFilters().forEach((b=>{b.isInequality()&&(y=y.add(b.field))}))})),y})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new vh(u,s))})),n.has(ir.keyField().canonicalString())||e.Ie.push(new vh(ir.keyField(),s))}return e.Ie}function ws(i){const e=st(i);return e.Ee||(e.Ee=u2(e,nc(i))),e.Ee}function u2(i,e){if(i.limitType==="F")return F0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new vh(o.field,u)}));const n=i.endAt?new yh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new yh(i.startAt.position,i.startAt.inclusive):null;return F0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function dm(i,e,n){return new Vh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Ph(i,e){return Ym(ws(i),ws(e))&&i.limitType===e.limitType}function e1(i){return`${Gm(ws(i))}|lt:${i.limitType}`}function zl(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>WE(o))).join(", ")}]`),Mh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Zl(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Zl(o))).join(",")),`Target(${s})`})(ws(i))}; limitType=${i.limitType})`}function Lh(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Ye.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of nc(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(d,y,_){const b=q0(d,y,_);return d.inclusive?b<=0:b<0})(s.startAt,nc(s),o)||s.endAt&&!(function(d,y,_){const b=q0(d,y,_);return d.inclusive?b>=0:b>0})(s.endAt,nc(s),o))})(i,e)}function c2(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function t1(i){return(e,n)=>{let s=!1;for(const o of nc(i)){const u=f2(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function f2(i,e,n){const s=i.field.isKeyField()?Ye.comparator(e.key,n.key):(function(u,d,y){const _=d.data.field(u),b=y.data.field(u);return _!==null&&b!==null?Wl(_,b):$e(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return $e(19790,{direction:i.dir})}}class il{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){rl(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return UE(this.inner)}size(){return this.innerSize}}const h2=new hn(Ye.comparator);function pa(){return h2}const n1=new hn(Ye.comparator);function Xu(...i){let e=n1;for(const n of i)e=e.insert(n.key,n);return e}function r1(i){let e=n1;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Qo(){return rc()}function i1(){return rc()}function rc(){return new il((i=>i.toString()),((i,e)=>i.isEqual(e)))}const d2=new hn(Ye.comparator),p2=new Bn(Ye.comparator);function At(...i){let e=p2;for(const n of i)e=e.add(n);return e}const m2=new Bn(St);function g2(){return m2}function Xm(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ph(e)?"-0":e}}function s1(i){return{integerValue:""+i}}function y2(i,e){return Hx(e)?s1(e):Xm(i,e)}class jh{constructor(){this._=void 0}}function v2(i,e,n){return i instanceof _h?(function(o,u){const d={fields:{[qE]:{stringValue:BE},[FE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Fm(u)&&(u=kh(u)),u&&(d.fields[HE]=u),{mapValue:d}})(n,e):i instanceof gc?o1(i,e):i instanceof yc?l1(i,e):(function(o,u){const d=a1(o,u),y=G0(d)+G0(o.Ae);return cm(d)&&cm(o.Ae)?s1(y):Xm(o.serializer,y)})(i,e)}function _2(i,e,n){return i instanceof gc?o1(i,e):i instanceof yc?l1(i,e):n}function a1(i,e){return i instanceof bh?(function(s){return cm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class _h extends jh{}class gc extends jh{constructor(e){super(),this.elements=e}}function o1(i,e){const n=u1(e);for(const s of i.elements)n.some((o=>Is(o,s)))||n.push(s);return{arrayValue:{values:n}}}class yc extends jh{constructor(e){super(),this.elements=e}}function l1(i,e){let n=u1(e);for(const s of i.elements)n=n.filter((o=>!Is(o,s)));return{arrayValue:{values:n}}}class bh extends jh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function G0(i){return An(i.integerValue||i.doubleValue)}function u1(i){return Km(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function b2(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof gc&&o instanceof gc||s instanceof yc&&o instanceof yc?Jl(s.elements,o.elements,Is):s instanceof bh&&o instanceof bh?Is(s.Ae,o.Ae):s instanceof _h&&o instanceof _h})(i.transform,e.transform)}class E2{constructor(e,n){this.version=e,this.transformResults=n}}class ua{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ua}static exists(e){return new ua(void 0,e)}static updateTime(e){return new ua(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function th(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Uh{}function c1(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new h1(i.key,ua.none()):new Rc(i.key,i.data,ua.none());{const n=i.data,s=Li.empty();let o=new Bn(ir.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new sl(i.key,s,new ts(o.toArray()),ua.none())}}function T2(i,e,n){i instanceof Rc?(function(o,u,d){const y=o.value.clone(),_=Q0(o.fieldTransforms,u,d.transformResults);y.setAll(_),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(i,e,n):i instanceof sl?(function(o,u,d){if(!th(o.precondition,u))return void u.convertToUnknownDocument(d.version);const y=Q0(o.fieldTransforms,u,d.transformResults),_=u.data;_.setAll(f1(o)),_.setAll(y),u.convertToFoundDocument(d.version,_).setHasCommittedMutations()})(i,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function ic(i,e,n,s){return i instanceof Rc?(function(u,d,y,_){if(!th(u.precondition,d))return y;const b=u.value.clone(),R=X0(u.fieldTransforms,_,d);return b.setAll(R),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),null})(i,e,n,s):i instanceof sl?(function(u,d,y,_){if(!th(u.precondition,d))return y;const b=X0(u.fieldTransforms,_,d),R=d.data;return R.setAll(f1(u)),R.setAll(b),d.convertToFoundDocument(d.version,R).setHasLocalMutations(),y===null?null:y.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((I=>I.field)))})(i,e,n,s):(function(u,d,y){return th(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):y})(i,e,n)}function w2(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=a1(s.transform,o||null);u!=null&&(n===null&&(n=Li.empty()),n.set(s.field,u))}return n||null}function Y0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Jl(s,o,((u,d)=>b2(u,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Rc extends Uh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class sl extends Uh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function f1(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function Q0(i,e,n){const s=new Map;Lt(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],d=u.transform,y=e.data.field(u.field);s.set(u.field,_2(d,y,n[o]))}return s}function X0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,d=n.data.field(o.field);s.set(o.field,v2(u,d,e))}return s}class h1 extends Uh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S2 extends Uh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class A2{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&T2(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ic(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ic(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=i1();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let y=this.applyToLocalView(d,u.mutatedFields);y=n.has(o.key)?null:y;const _=c1(d,y);_!==null&&s.set(o.key,_),d.isValidDocument()||d.convertToNoDocument(rt.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),At())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,((n,s)=>Y0(n,s)))&&Jl(this.baseMutations,e.baseMutations,((n,s)=>Y0(n,s)))}}class $m{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Lt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return d2})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new $m(e,n,s,o)}}class C2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class R2{constructor(e,n){this.count=e,this.unchangedNames=n}}var kn,Ot;function I2(i){switch(i){case Ee.OK:return $e(64938);case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return $e(15467,{code:i})}}function d1(i){if(i===void 0)return da("GRPC error has no .code"),Ee.UNKNOWN;switch(i){case kn.OK:return Ee.OK;case kn.CANCELLED:return Ee.CANCELLED;case kn.UNKNOWN:return Ee.UNKNOWN;case kn.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case kn.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case kn.INTERNAL:return Ee.INTERNAL;case kn.UNAVAILABLE:return Ee.UNAVAILABLE;case kn.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case kn.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case kn.NOT_FOUND:return Ee.NOT_FOUND;case kn.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case kn.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case kn.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case kn.ABORTED:return Ee.ABORTED;case kn.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case kn.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case kn.DATA_LOSS:return Ee.DATA_LOSS;default:return $e(39323,{code:i})}}(Ot=kn||(kn={}))[Ot.OK=0]="OK",Ot[Ot.CANCELLED=1]="CANCELLED",Ot[Ot.UNKNOWN=2]="UNKNOWN",Ot[Ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ot[Ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ot[Ot.NOT_FOUND=5]="NOT_FOUND",Ot[Ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ot[Ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ot[Ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ot[Ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ot[Ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ot[Ot.ABORTED=10]="ABORTED",Ot[Ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ot[Ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ot[Ot.INTERNAL=13]="INTERNAL",Ot[Ot.UNAVAILABLE=14]="UNAVAILABLE",Ot[Ot.DATA_LOSS=15]="DATA_LOSS";function x2(){return new TextEncoder}const O2=new ho([4294967295,4294967295],0);function $0(i){const e=x2().encode(i),n=new xE;return n.update(e),new Uint8Array(n.digest())}function J0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ho([n,s],0),new ho([o,u],0)]}class Jm{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new $u(`Invalid padding: ${n}`);if(s<0)throw new $u(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new $u(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new $u(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ho.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(ho.fromNumber(s)));return o.compare(O2)===1&&(o=new ho([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=$0(e),[s,o]=J0(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Jm(u,o,n);return s.forEach((y=>d.insert(y))),d}insert(e){if(this.ge===0)return;const n=$0(e),[s,o]=J0(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class $u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new zh(rt.min(),o,new hn(St),pa(),At())}}class Ic{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Ic(s,n,At(),At(),At())}}class nh{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class p1{constructor(e,n){this.targetId=e,this.Ce=n}}class m1{constructor(e,n,s=sr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class W0{constructor(){this.ve=0,this.Fe=Z0(),this.Me=sr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=At(),n=At(),s=At();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:$e(38017,{changeType:u})}})),new Ic(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Z0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Lt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class D2{constructor(e){this.Ge=e,this.ze=new Map,this.je=pa(),this.Je=qf(),this.He=qf(),this.Ye=new hn(St)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:$e(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(hm(u))if(s===0){const d=new Ye(u.path);this.et(n,d,mr.newNoDocument(d,rt.min()))}else Lt(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const y=this.ut(e),_=y?this.ct(y,e,d):1;if(_!==0){this.it(n);const b=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,b)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,y;try{d=yo(s).toUint8Array()}catch(_){if(_ instanceof zE)return $l("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{y=new Jm(d,o,u)}catch(_){return $l(_ instanceof $u?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return y.ge===0?null:y}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const d=this.Ge.ht(),y=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(y)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const y=this.ot(d);if(y){if(u.current&&hm(y.target)){const _=new Ye(y.target.path);this.It(_).has(d)||this.Et(d,_)||this.et(d,_,mr.newNoDocument(_,e))}u.Be&&(n.set(d,u.ke()),u.qe())}}));let s=At();this.He.forEach(((u,d)=>{let y=!0;d.forEachWhile((_=>{const b=this.ot(_);return!b||b.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(s=s.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new zh(e,n,this.Ye,this.je,s);return this.je=pa(),this.Je=qf(),this.He=qf(),this.Ye=new hn(St),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new W0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Bn(St),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Bn(St),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Le("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new W0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function qf(){return new hn(Ye.comparator)}function Z0(){return new hn(Ye.comparator)}const N2={asc:"ASCENDING",desc:"DESCENDING"},M2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},k2={and:"AND",or:"OR"};class V2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pm(i,e){return i.useProto3Json||Mh(e)?e:{value:e}}function Eh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function g1(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function P2(i,e){return Eh(i,e.toTimestamp())}function Ss(i){return Lt(!!i,49232),rt.fromTimestamp((function(n){const s=go(n);return new Wt(s.seconds,s.nanos)})(i))}function Wm(i,e){return mm(i,e).canonicalString()}function mm(i,e){const n=(function(o){return new fn(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function y1(i){const e=fn.fromString(i);return Lt(T1(e),10190,{key:e.toString()}),e}function gm(i,e){return Wm(i.databaseId,e.path)}function Gp(i,e){const n=y1(e);if(n.get(1)!==i.databaseId.projectId)throw new He(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new He(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ye(_1(n))}function v1(i,e){return Wm(i.databaseId,e)}function L2(i){const e=y1(i);return e.length===4?fn.emptyPath():_1(e)}function ym(i){return new fn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function _1(i){return Lt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function eb(i,e,n){return{name:gm(i,e),fields:n.value.mapValue.fields}}function j2(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:$e(39313,{state:b})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(b,R){return b.useProto3Json?(Lt(R===void 0||typeof R=="string",58123),sr.fromBase64String(R||"")):(Lt(R===void 0||R instanceof Buffer||R instanceof Uint8Array,16193),sr.fromUint8Array(R||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,y=d&&(function(b){const R=b.code===void 0?Ee.UNKNOWN:d1(b.code);return new He(R,b.message||"")})(d);n=new m1(s,o,u,y||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Gp(i,s.document.name),u=Ss(s.document.updateTime),d=s.document.createTime?Ss(s.document.createTime):rt.min(),y=new Li({mapValue:{fields:s.document.fields}}),_=mr.newFoundDocument(o,u,d,y),b=s.targetIds||[],R=s.removedTargetIds||[];n=new nh(b,R,_.key,_)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Gp(i,s.document),u=s.readTime?Ss(s.readTime):rt.min(),d=mr.newNoDocument(o,u),y=s.removedTargetIds||[];n=new nh([],y,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Gp(i,s.document),u=s.removedTargetIds||[];n=new nh([],u,o,null)}else{if(!("filter"in e))return $e(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new R2(o,u),y=s.targetId;n=new p1(y,d)}}return n}function U2(i,e){let n;if(e instanceof Rc)n={update:eb(i,e.key,e.value)};else if(e instanceof h1)n={delete:gm(i,e.key)};else if(e instanceof sl)n={update:eb(i,e.key,e.data),updateMask:Q2(e.fieldMask)};else{if(!(e instanceof S2))return $e(16599,{Vt:e.type});n={verify:gm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,d){const y=d.transform;if(y instanceof _h)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof gc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof yc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof bh)return{fieldPath:d.field.canonicalString(),increment:y.Ae};throw $e(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:P2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:$e(27497)})(i,e.precondition)),n}function z2(i,e){return i&&i.length>0?(Lt(e!==void 0,14353),i.map((n=>(function(o,u){let d=o.updateTime?Ss(o.updateTime):Ss(u);return d.isEqual(rt.min())&&(d=Ss(u)),new E2(d,o.transformResults||[])})(n,e)))):[]}function B2(i,e){return{documents:[v1(i,e.path)]}}function q2(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=v1(i,o);const u=(function(b){if(b.length!==0)return E1(xs.create(b,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(b){if(b.length!==0)return b.map((R=>(function(M){return{field:Bl(M.field),direction:K2(M.dir)}})(R)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const y=pm(i,e.limit);return y!==null&&(n.structuredQuery.limit=y),e.startAt&&(n.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(e.endAt)),{ft:n,parent:o}}function H2(i){let e=L2(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Lt(s===1,65062);const R=n.from[0];R.allDescendants?o=R.collectionId:e=e.child(R.collectionId)}let u=[];n.where&&(u=(function(I){const M=b1(I);return M instanceof xs&&$E(M)?M.getFilters():[M]})(n.where));let d=[];n.orderBy&&(d=(function(I){return I.map((M=>(function(te){return new vh(ql(te.field),(function(_e){switch(_e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(te.direction))})(M)))})(n.orderBy));let y=null;n.limit&&(y=(function(I){let M;return M=typeof I=="object"?I.value:I,Mh(M)?null:M})(n.limit));let _=null;n.startAt&&(_=(function(I){const M=!!I.before,$=I.values||[];return new yh($,M)})(n.startAt));let b=null;return n.endAt&&(b=(function(I){const M=!I.before,$=I.values||[];return new yh($,M)})(n.endAt)),o2(e,o,d,u,y,"F",_,b)}function F2(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function b1(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ql(n.unaryFilter.field);return zn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=ql(n.unaryFilter.field);return zn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=ql(n.unaryFilter.field);return zn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=ql(n.unaryFilter.field);return zn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $e(61313);default:return $e(60726)}})(i):i.fieldFilter!==void 0?(function(n){return zn.create(ql(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $e(58110);default:return $e(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return xs.create(n.compositeFilter.filters.map((s=>b1(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return $e(1026)}})(n.compositeFilter.op))})(i):$e(30097,{filter:i})}function K2(i){return N2[i]}function G2(i){return M2[i]}function Y2(i){return k2[i]}function Bl(i){return{fieldPath:i.canonicalString()}}function ql(i){return ir.fromServerFormat(i.fieldPath)}function E1(i){return i instanceof zn?(function(n){if(n.op==="=="){if(B0(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NAN"}};if(z0(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(B0(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NOT_NAN"}};if(z0(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bl(n.field),op:G2(n.op),value:n.value}}})(i):i instanceof xs?(function(n){const s=n.getFilters().map((o=>E1(o)));return s.length===1?s[0]:{compositeFilter:{op:Y2(n.op),filters:s}}})(i):$e(54877,{filter:i})}function Q2(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function T1(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class oo{constructor(e,n,s,o,u=rt.min(),d=rt.min(),y=sr.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=y,this.expectedCount=_}withSequenceNumber(e){return new oo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new oo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class X2{constructor(e){this.yt=e}}function $2(i){const e=H2({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?dm(e,e.limit,"L"):e}class J2{constructor(){this.Cn=new W2}addToCollectionParentIndex(e,n){return this.Cn.add(n),ve.resolve()}getCollectionParents(e,n){return ve.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ve.resolve()}deleteFieldIndex(e,n){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,n){return ve.resolve()}getDocumentsMatchingTarget(e,n){return ve.resolve(null)}getIndexType(e,n){return ve.resolve(0)}getFieldIndexes(e,n){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,n){return ve.resolve(mo.min())}getMinOffsetFromCollectionGroup(e,n){return ve.resolve(mo.min())}updateCollectionGroup(e,n,s){return ve.resolve()}updateIndexEntries(e,n){return ve.resolve()}}class W2{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Bn(fn.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Bn(fn.comparator)).toArray()}}const tb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},w1=41943040;class Kr{static withCacheSize(e){return new Kr(e,Kr.DEFAULT_COLLECTION_PERCENTILE,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Kr.DEFAULT_COLLECTION_PERCENTILE=10,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kr.DEFAULT=new Kr(w1,Kr.DEFAULT_COLLECTION_PERCENTILE,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kr.DISABLED=new Kr(-1,0,0);class eu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new eu(0)}static cr(){return new eu(-1)}}const nb="LruGarbageCollector",Z2=1048576;function rb([i,e],[n,s]){const o=St(i,n);return o===0?St(e,s):o}class eO{constructor(e){this.Ir=e,this.buffer=new Bn(rb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();rb(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class tO{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Le(nb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ou(n)?Le(nb,"Ignoring IndexedDB error during garbage collection: ",n):await au(n)}await this.Vr(3e5)}))}}class nO{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ve.resolve(Nh.ce);const s=new eO(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(tb)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tb):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,d,y,_,b;const R=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,d=Date.now(),this.nthSequenceNumber(e,o)))).next((I=>(s=I,y=Date.now(),this.removeTargets(e,s,n)))).next((I=>(u=I,_=Date.now(),this.removeOrphanedDocuments(e,s)))).next((I=>(b=Date.now(),Ul()<=wt.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-R}ms
	Determined least recently used ${o} in `+(y-d)+`ms
	Removed ${u} targets in `+(_-y)+`ms
	Removed ${I} documents in `+(b-_)+`ms
Total Duration: ${b-R}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:I}))))}}function rO(i,e){return new nO(i,e)}class iO{constructor(){this.changes=new il((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ve.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class sO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class aO{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&ic(s.mutation,o,ts.empty(),Wt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,At()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=At()){const o=Qo();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let d=Xu();return u.forEach(((y,_)=>{d=d.insert(y,_.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=Qo();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,At())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,y)=>{n.set(d,y)}))}))}computeViews(e,n,s,o){let u=pa();const d=rc(),y=(function(){return rc()})();return n.forEach(((_,b)=>{const R=s.get(b.key);o.has(b.key)&&(R===void 0||R.mutation instanceof sl)?u=u.insert(b.key,b):R!==void 0?(d.set(b.key,R.mutation.getFieldMask()),ic(R.mutation,b,R.mutation.getFieldMask(),Wt.now())):d.set(b.key,ts.empty())})),this.recalculateAndSaveOverlays(e,u).next((_=>(_.forEach(((b,R)=>d.set(b,R))),n.forEach(((b,R)=>y.set(b,new sO(R,d.get(b)??null)))),y)))}recalculateAndSaveOverlays(e,n){const s=rc();let o=new hn(((d,y)=>d-y)),u=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const y of d)y.keys().forEach((_=>{const b=n.get(_);if(b===null)return;let R=s.get(_)||ts.empty();R=y.applyToLocalView(b,R),s.set(_,R);const I=(o.get(y.batchId)||At()).add(_);o=o.insert(y.batchId,I)}))})).next((()=>{const d=[],y=o.getReverseIterator();for(;y.hasNext();){const _=y.getNext(),b=_.key,R=_.value,I=i1();R.forEach((M=>{if(!u.has(M)){const $=c1(n.get(M),s.get(M));$!==null&&I.set(M,$),u=u.add(M)}})),d.push(this.documentOverlayCache.saveOverlays(e,b,I))}return ve.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return Ye.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):l2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ve.resolve(Qo());let y=hc,_=u;return d.next((b=>ve.forEach(b,((R,I)=>(y<I.largestBatchId&&(y=I.largestBatchId),u.get(R)?ve.resolve():this.remoteDocumentCache.getEntry(e,R).next((M=>{_=_.insert(R,M)}))))).next((()=>this.populateOverlays(e,b,u))).next((()=>this.computeViews(e,_,b,At()))).next((R=>({batchId:y,changes:r1(R)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ye(n)).next((s=>{let o=Xu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=Xu();return this.indexManager.getCollectionParents(e,u).next((y=>ve.forEach(y,(_=>{const b=(function(I,M){return new Vh(M,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(n,_.child(u));return this.getDocumentsMatchingCollectionQuery(e,b,s,o).next((R=>{R.forEach(((I,M)=>{d=d.insert(I,M)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((d=>{u.forEach(((_,b)=>{const R=b.getKey();d.get(R)===null&&(d=d.insert(R,mr.newInvalidDocument(R)))}));let y=Xu();return d.forEach(((_,b)=>{const R=u.get(_);R!==void 0&&ic(R.mutation,b,ts.empty(),Wt.now()),Lh(n,b)&&(y=y.insert(_,b))})),y}))}}class oO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ve.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ss(o.createTime)}})(n)),ve.resolve()}getNamedQuery(e,n){return ve.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:$2(o.bundledQuery),readTime:Ss(o.readTime)}})(n)),ve.resolve()}}class lO{constructor(){this.overlays=new hn(Ye.comparator),this.qr=new Map}getOverlay(e,n){return ve.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Qo();return ve.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),ve.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ve.resolve()}getOverlaysForCollection(e,n,s){const o=Qo(),u=n.length+1,d=new Ye(n.child("")),y=this.overlays.getIteratorFrom(d);for(;y.hasNext();){const _=y.getNext().value,b=_.getKey();if(!n.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>s&&o.set(_.getKey(),_)}return ve.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new hn(((b,R)=>b-R));const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===n&&b.largestBatchId>s){let R=u.get(b.largestBatchId);R===null&&(R=Qo(),u=u.insert(b.largestBatchId,R)),R.set(b.getKey(),b)}}const y=Qo(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((b,R)=>y.set(b,R))),!(y.size()>=o)););return ve.resolve(y)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new C2(n,s));let u=this.qr.get(n);u===void 0&&(u=At(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class uO{constructor(){this.sessionToken=sr.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ve.resolve()}}class Zm{constructor(){this.Qr=new Bn(Qn.$r),this.Ur=new Bn(Qn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Qn(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Qn(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Ye(new fn([])),s=new Qn(n,e),o=new Qn(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ye(new fn([])),s=new Qn(n,e),o=new Qn(n,e+1);let u=At();return this.Ur.forEachInRange([s,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new Qn(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Qn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ye.comparator(e.key,n.key)||St(e.Yr,n.Yr)}static Kr(e,n){return St(e.Yr,n.Yr)||Ye.comparator(e.key,n.key)}}class cO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Bn(Qn.$r)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new A2(u,n,s,o);this.mutationQueue.push(d);for(const y of o)this.Zr=this.Zr.add(new Qn(y.key,u)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return ve.resolve(d)}lookupMutationBatch(e,n){return ve.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return ve.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?Hm:this.tr-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Qn(n,0),o=new Qn(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(d=>{const y=this.Xr(d.Yr);u.push(y)})),ve.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Bn(St);return n.forEach((o=>{const u=new Qn(o,0),d=new Qn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(y=>{s=s.add(y.Yr)}))})),ve.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Ye.isDocumentKey(u)||(u=u.child(""));const d=new Qn(new Ye(u),0);let y=new Bn(St);return this.Zr.forEachWhile((_=>{const b=_.key.path;return!!s.isPrefixOf(b)&&(b.length===o&&(y=y.add(_.Yr)),!0)}),d),ve.resolve(this.ti(y))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Lt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ve.forEach(n.mutations,(o=>{const u=new Qn(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Qn(n,0),o=this.Zr.firstAfterOrEqual(s);return ve.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class fO{constructor(e){this.ri=e,this.docs=(function(){return new hn(Ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ve.resolve(s?s.document.mutableCopy():mr.newInvalidDocument(n))}getEntries(e,n){let s=pa();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():mr.newInvalidDocument(o))})),ve.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=pa();const d=n.path,y=new Ye(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(y);for(;_.hasNext();){const{key:b,value:{document:R}}=_.getNext();if(!d.isPrefixOf(b.path))break;b.path.length>d.length+1||Ux(jx(R),s)<=0||(o.has(R.key)||Lh(n,R))&&(u=u.insert(R.key,R.mutableCopy()))}return ve.resolve(u)}getAllFromCollectionGroup(e,n,s,o){$e(9500)}ii(e,n){return ve.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new hO(this)}getSize(e){return ve.resolve(this.size)}}class hO extends iO{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ve.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class dO{constructor(e){this.persistence=e,this.si=new il((n=>Gm(n)),Ym),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.oi=0,this._i=new Zm,this.targetCount=0,this.ai=eu.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ve.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new eu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ve.resolve()}updateTargetData(e,n){return this.Pr(n),ve.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((d,y)=>{y.sequenceNumber<=n&&s.get(y.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,y.targetId)),o++)})),ve.waitFor(u).next((()=>o))}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ve.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ve.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),ve.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ve.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ve.resolve(s)}containsKey(e,n){return ve.resolve(this._i.containsKey(n))}}class S1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Nh(0),this.li=!1,this.li=!0,this.hi=new uO,this.referenceDelegate=e(this),this.Pi=new dO(this),this.indexManager=new J2,this.remoteDocumentCache=(function(o){return new fO(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new X2(n),this.Ii=new oO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new cO(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Le("MemoryPersistence","Starting transaction:",e);const o=new pO(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ve.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class pO extends Bx{constructor(e){super(),this.currentSequenceNumber=e}}class eg{constructor(e){this.persistence=e,this.Ri=new Zm,this.Vi=null}static mi(e){return new eg(e)}get fi(){if(this.Vi)return this.Vi;throw $e(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ve.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ve.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ve.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.fi,(s=>{const o=Ye.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,rt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ve.or([()=>ve.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Th{constructor(e,n){this.persistence=e,this.pi=new il((s=>Fx(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=rO(this,n)}static mi(e,n){return new Th(e,n)}Ei(){}di(e){return ve.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ve.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?ve.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((y=>{y||(s++,u.removeEntry(d,rt.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ve.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ve.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ve.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Zf(e.data.value)),n}br(e,n,s){return ve.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ve.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class tg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=At(),o=At();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new tg(e,n.fromCache,s,o)}}class mO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class gO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return sC()?8:qx(yr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new mO;return this.Ss(e,n,d).next((y=>{if(u.result=y,this.Vs)return this.bs(e,n,d,y.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(Ul()<=wt.DEBUG&&Le("QueryEngine","SDK will not create cache indexes for query:",zl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ve.resolve()):(Ul()<=wt.DEBUG&&Le("QueryEngine","Query:",zl(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Ul()<=wt.DEBUG&&Le("QueryEngine","The SDK decides to create cache indexes for query:",zl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ws(n))):ve.resolve())}ys(e,n){if(K0(n))return ve.resolve(null);let s=ws(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=dm(n,null,"F"),s=ws(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const d=At(...u);return this.ps.getDocuments(e,d).next((y=>this.indexManager.getMinOffset(e,s).next((_=>{const b=this.Ds(n,y);return this.Cs(n,b,d,_.readTime)?this.ys(e,dm(n,null,"F")):this.vs(e,b,n,_)}))))})))))}ws(e,n,s,o){return K0(n)||o.isEqual(rt.min())?ve.resolve(null):this.ps.getDocuments(e,s).next((u=>{const d=this.Ds(n,u);return this.Cs(n,d,s,o)?ve.resolve(null):(Ul()<=wt.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),zl(n)),this.vs(e,d,n,Lx(o,hc)).next((y=>y)))}))}Ds(e,n){let s=new Bn(t1(e));return n.forEach(((o,u)=>{Lh(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return Ul()<=wt.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",zl(n)),this.ps.getDocumentsMatchingQuery(e,n,mo.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const ng="LocalStore",yO=3e8;class vO{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new hn(St),this.xs=new il((u=>Gm(u)),Ym),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function _O(i,e,n,s){return new vO(i,e,n,s)}async function A1(i,e){const n=st(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const d=[],y=[];let _=At();for(const b of o){d.push(b.batchId);for(const R of b.mutations)_=_.add(R.key)}for(const b of u){y.push(b.batchId);for(const R of b.mutations)_=_.add(R.key)}return n.localDocuments.getDocuments(s,_).next((b=>({Ls:b,removedBatchIds:d,addedBatchIds:y})))}))}))}function bO(i,e){const n=st(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,_,b,R){const I=b.batch,M=I.keys();let $=ve.resolve();return M.forEach((te=>{$=$.next((()=>R.getEntry(_,te))).next((pe=>{const _e=b.docVersions.get(te);Lt(_e!==null,48541),pe.version.compareTo(_e)<0&&(I.applyToRemoteDocument(pe,b),pe.isValidDocument()&&(pe.setReadTime(b.commitVersion),R.addEntry(pe)))}))})),$.next((()=>y.mutationQueue.removeMutationBatch(_,I)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(y){let _=At();for(let b=0;b<y.mutationResults.length;++b)y.mutationResults[b].transformResults.length>0&&(_=_.add(y.batch.mutations[b].key));return _})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function C1(i){const e=st(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function EO(i,e){const n=st(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const y=[];e.targetChanges.forEach(((R,I)=>{const M=o.get(I);if(!M)return;y.push(n.Pi.removeMatchingKeys(u,R.removedDocuments,I).next((()=>n.Pi.addMatchingKeys(u,R.addedDocuments,I))));let $=M.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(I)!==null?$=$.withResumeToken(sr.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):R.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(R.resumeToken,s)),o=o.insert(I,$),(function(pe,_e,je){return pe.resumeToken.approximateByteSize()===0||_e.snapshotVersion.toMicroseconds()-pe.snapshotVersion.toMicroseconds()>=yO?!0:je.addedDocuments.size+je.modifiedDocuments.size+je.removedDocuments.size>0})(M,$,R)&&y.push(n.Pi.updateTargetData(u,$))}));let _=pa(),b=At();if(e.documentUpdates.forEach((R=>{e.resolvedLimboDocuments.has(R)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(u,R))})),y.push(TO(u,d,e.documentUpdates).next((R=>{_=R.ks,b=R.qs}))),!s.isEqual(rt.min())){const R=n.Pi.getLastRemoteSnapshotVersion(u).next((I=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));y.push(R)}return ve.waitFor(y).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,_,b))).next((()=>_))})).then((u=>(n.Ms=o,u)))}function TO(i,e,n){let s=At(),o=At();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let d=pa();return n.forEach(((y,_)=>{const b=u.get(y);_.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(y)),_.isNoDocument()&&_.version.isEqual(rt.min())?(e.removeEntry(y,_.readTime),d=d.insert(y,_)):!b.isValidDocument()||_.version.compareTo(b.version)>0||_.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(_),d=d.insert(y,_)):Le(ng,"Ignoring outdated watch update for ",y,". Current version:",b.version," Watch version:",_.version)})),{ks:d,qs:o}}))}function wO(i,e){const n=st(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Hm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function SO(i,e){const n=st(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,ve.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new oo(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function vm(i,e,n){const s=st(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!ou(d))throw d;Le(ng,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function ib(i,e,n){const s=st(i);let o=rt.min(),u=At();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(_,b,R){const I=st(_),M=I.xs.get(R);return M!==void 0?ve.resolve(I.Ms.get(M)):I.Pi.getTargetData(b,R)})(s,d,ws(e)).next((y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,y.targetId).next((_=>{u=_}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:rt.min(),n?u:At()))).next((y=>(AO(s,c2(e),y),{documents:y,Qs:u})))))}function AO(i,e,n){let s=i.Os.get(e)||rt.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class sb{constructor(){this.activeTargetIds=g2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CO{constructor(){this.Mo=new sb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new sb,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class RO{Oo(e){}shutdown(){}}const ab="ConnectivityMonitor";class ob{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Le(ab,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Le(ab,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Hf=null;function _m(){return Hf===null?Hf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hf++,"0x"+Hf.toString(16)}const Yp="RestConnection",IO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===mh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const d=_m(),y=this.zo(e,n.toUriEncodedString());Le(Yp,`Sending RPC '${e}' ${d}:`,y,s);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,o,u);const{host:b}=new URL(y),R=nu(b);return this.Jo(e,y,_,s,R).then((I=>(Le(Yp,`Received RPC '${e}' ${d}: `,I),I)),(I=>{throw $l(Yp,`RPC '${e}' ${d} failed with error: `,I,"url: ",y,"request:",s),I}))}Ho(e,n,s,o,u,d){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+su})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=IO[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class OO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const dr="WebChannelConnection";class DO extends xO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const d=_m();return new Promise(((y,_)=>{const b=new OE;b.setWithCredentials(!0),b.listenOnce(DE.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case Wf.NO_ERROR:const I=b.getResponseJson();Le(dr,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(I)),y(I);break;case Wf.TIMEOUT:Le(dr,`RPC '${e}' ${d} timed out`),_(new He(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case Wf.HTTP_ERROR:const M=b.getStatus();if(Le(dr,`RPC '${e}' ${d} failed with status:`,M,"response text:",b.getResponseText()),M>0){let $=b.getResponseJson();Array.isArray($)&&($=$[0]);const te=$?.error;if(te&&te.status&&te.message){const pe=(function(je){const qe=je.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(qe)>=0?qe:Ee.UNKNOWN})(te.status);_(new He(pe,te.message))}else _(new He(Ee.UNKNOWN,"Server responded with status "+b.getStatus()))}else _(new He(Ee.UNAVAILABLE,"Connection failed."));break;default:$e(9055,{l_:e,streamId:d,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{Le(dr,`RPC '${e}' ${d} completed.`)}}));const R=JSON.stringify(o);Le(dr,`RPC '${e}' ${d} sending request:`,o),b.send(n,"POST",R,s,15)}))}T_(e,n,s){const o=_m(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=kE(),y=ME(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(_.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,n,s),_.encodeInitMessageHeaders=!0;const R=u.join("");Le(dr,`Creating RPC '${e}' stream ${o}: ${R}`,_);const I=d.createWebChannel(R,_);this.I_(I);let M=!1,$=!1;const te=new OO({Yo:_e=>{$?Le(dr,`Not sending because RPC '${e}' stream ${o} is closed:`,_e):(M||(Le(dr,`Opening RPC '${e}' stream ${o} transport.`),I.open(),M=!0),Le(dr,`RPC '${e}' stream ${o} sending:`,_e),I.send(_e))},Zo:()=>I.close()}),pe=(_e,je,qe)=>{_e.listen(je,(ke=>{try{qe(ke)}catch(tt){setTimeout((()=>{throw tt}),0)}}))};return pe(I,Qu.EventType.OPEN,(()=>{$||(Le(dr,`RPC '${e}' stream ${o} transport opened.`),te.o_())})),pe(I,Qu.EventType.CLOSE,(()=>{$||($=!0,Le(dr,`RPC '${e}' stream ${o} transport closed`),te.a_(),this.E_(I))})),pe(I,Qu.EventType.ERROR,(_e=>{$||($=!0,$l(dr,`RPC '${e}' stream ${o} transport errored. Name:`,_e.name,"Message:",_e.message),te.a_(new He(Ee.UNAVAILABLE,"The operation could not be completed")))})),pe(I,Qu.EventType.MESSAGE,(_e=>{if(!$){const je=_e.data[0];Lt(!!je,16349);const qe=je,ke=qe?.error||qe[0]?.error;if(ke){Le(dr,`RPC '${e}' stream ${o} received error:`,ke);const tt=ke.status;let ht=(function(k){const j=kn[k];if(j!==void 0)return d1(j)})(tt),Ge=ke.message;ht===void 0&&(ht=Ee.INTERNAL,Ge="Unknown error status: "+tt+" with message "+ke.message),$=!0,te.a_(new He(ht,Ge)),I.close()}else Le(dr,`RPC '${e}' stream ${o} received:`,je),te.u_(je)}})),pe(y,NE.STAT_EVENT,(_e=>{_e.stat===om.PROXY?Le(dr,`RPC '${e}' stream ${o} detected buffering proxy`):_e.stat===om.NOPROXY&&Le(dr,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{te.__()}),0),te}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Qp(){return typeof document<"u"?document:null}function Bh(i){return new V2(i,!0)}class R1{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&Le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const lb="PersistentStream";class I1{constructor(e,n,s,o,u,d,y,_){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=y,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new R1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ee.RESOURCE_EXHAUSTED?(da(n.toString()),da("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new He(Ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Le(lb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Le(lb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class NO extends I1{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=j2(this.serializer,e),s=(function(u){if(!("targetChange"in u))return rt.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?rt.min():d.readTime?Ss(d.readTime):rt.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=ym(this.serializer),n.addTarget=(function(u,d){let y;const _=d.target;if(y=hm(_)?{documents:B2(u,_)}:{query:q2(u,_).ft},y.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){y.resumeToken=g1(u,d.resumeToken);const b=pm(u,d.expectedCount);b!==null&&(y.expectedCount=b)}else if(d.snapshotVersion.compareTo(rt.min())>0){y.readTime=Eh(u,d.snapshotVersion.toTimestamp());const b=pm(u,d.expectedCount);b!==null&&(y.expectedCount=b)}return y})(this.serializer,e);const s=F2(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=ym(this.serializer),n.removeTarget=e,this.q_(n)}}class MO extends I1{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=z2(e.writeResults,e.commitTime),s=Ss(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=ym(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>U2(this.serializer,s)))};this.q_(n)}}class kO{}class VO extends kO{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new He(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,mm(n,s),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new He(Ee.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,y])=>this.connection.Ho(e,mm(n,s),o,d,y,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new He(Ee.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class PO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(da(n),this.aa=!1):Le("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const nl="RemoteStore";class LO{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{al(this)&&(Le(nl,"Restarting streams for network reachability change."),await(async function(_){const b=st(_);b.Ea.add(4),await xc(b),b.Ra.set("Unknown"),b.Ea.delete(4),await qh(b)})(this))}))})),this.Ra=new PO(s,o)}}async function qh(i){if(al(i))for(const e of i.da)await e(!0)}async function xc(i){for(const e of i.da)await e(!1)}function x1(i,e){const n=st(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ag(n)?sg(n):lu(n).O_()&&ig(n,e))}function rg(i,e){const n=st(i),s=lu(n);n.Ia.delete(e),s.O_()&&O1(n,e),n.Ia.size===0&&(s.O_()?s.L_():al(n)&&n.Ra.set("Unknown"))}function ig(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(rt.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}lu(i).Y_(e)}function O1(i,e){i.Va.Ue(e),lu(i).Z_(e)}function sg(i){i.Va=new D2({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),lu(i).start(),i.Ra.ua()}function ag(i){return al(i)&&!lu(i).x_()&&i.Ia.size>0}function al(i){return st(i).Ea.size===0}function D1(i){i.Va=void 0}async function jO(i){i.Ra.set("Online")}async function UO(i){i.Ia.forEach(((e,n)=>{ig(i,e)}))}async function zO(i,e){D1(i),ag(i)?(i.Ra.ha(e),sg(i)):i.Ra.set("Unknown")}async function BO(i,e,n){if(i.Ra.set("Online"),e instanceof m1&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const y of u.targetIds)o.Ia.has(y)&&(await o.remoteSyncer.rejectListen(y,d),o.Ia.delete(y),o.Va.removeTarget(y))})(i,e)}catch(s){Le(nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await wh(i,s)}else if(e instanceof nh?i.Va.Ze(e):e instanceof p1?i.Va.st(e):i.Va.tt(e),!n.isEqual(rt.min()))try{const s=await C1(i.localStore);n.compareTo(s)>=0&&await(function(u,d){const y=u.Va.Tt(d);return y.targetChanges.forEach(((_,b)=>{if(_.resumeToken.approximateByteSize()>0){const R=u.Ia.get(b);R&&u.Ia.set(b,R.withResumeToken(_.resumeToken,d))}})),y.targetMismatches.forEach(((_,b)=>{const R=u.Ia.get(_);if(!R)return;u.Ia.set(_,R.withResumeToken(sr.EMPTY_BYTE_STRING,R.snapshotVersion)),O1(u,_);const I=new oo(R.target,_,b,R.sequenceNumber);ig(u,I)})),u.remoteSyncer.applyRemoteEvent(y)})(i,n)}catch(s){Le(nl,"Failed to raise snapshot:",s),await wh(i,s)}}async function wh(i,e,n){if(!ou(e))throw e;i.Ea.add(1),await xc(i),i.Ra.set("Offline"),n||(n=()=>C1(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Le(nl,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await qh(i)}))}function N1(i,e){return e().catch((n=>wh(i,n,e)))}async function Hh(i){const e=st(i),n=_o(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Hm;for(;qO(e);)try{const o=await wO(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,HO(e,o)}catch(o){await wh(e,o)}M1(e)&&k1(e)}function qO(i){return al(i)&&i.Ta.length<10}function HO(i,e){i.Ta.push(e);const n=_o(i);n.O_()&&n.X_&&n.ea(e.mutations)}function M1(i){return al(i)&&!_o(i).x_()&&i.Ta.length>0}function k1(i){_o(i).start()}async function FO(i){_o(i).ra()}async function KO(i){const e=_o(i);for(const n of i.Ta)e.ea(n.mutations)}async function GO(i,e,n){const s=i.Ta.shift(),o=$m.from(s,e,n);await N1(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Hh(i)}async function YO(i,e){e&&_o(i).X_&&await(async function(s,o){if((function(d){return I2(d)&&d!==Ee.ABORTED})(o.code)){const u=s.Ta.shift();_o(s).B_(),await N1(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Hh(s)}})(i,e),M1(i)&&k1(i)}async function ub(i,e){const n=st(i);n.asyncQueue.verifyOperationInProgress(),Le(nl,"RemoteStore received new credentials");const s=al(n);n.Ea.add(3),await xc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await qh(n)}async function QO(i,e){const n=st(i);e?(n.Ea.delete(2),await qh(n)):e||(n.Ea.add(2),await xc(n),n.Ra.set("Unknown"))}function lu(i){return i.ma||(i.ma=(function(n,s,o){const u=st(n);return u.sa(),new NO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:jO.bind(null,i),t_:UO.bind(null,i),r_:zO.bind(null,i),H_:BO.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),ag(i)?sg(i):i.Ra.set("Unknown")):(await i.ma.stop(),D1(i))}))),i.ma}function _o(i){return i.fa||(i.fa=(function(n,s,o){const u=st(n);return u.sa(),new MO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:FO.bind(null,i),r_:YO.bind(null,i),ta:KO.bind(null,i),na:GO.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Hh(i)):(await i.fa.stop(),i.Ta.length>0&&(Le(nl,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class og{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new po,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,y=new og(e,n,d,o,u);return y.start(s),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lg(i,e){if(da("AsyncQueue",`${e}: ${i}`),ou(i))return new He(Ee.UNAVAILABLE,`${e}: ${i}`);throw i}class Yl{static emptySet(e){return new Yl(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ye.comparator(n.key,s.key):(n,s)=>Ye.comparator(n.key,s.key),this.keyedMap=Xu(),this.sortedSet=new hn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Yl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class cb{constructor(){this.ga=new hn(Ye.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):$e(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class tu{constructor(e,n,s,o,u,d,y,_,b){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=y,this.excludesMetadataChanges=_,this.hasCachedResults=b}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach((y=>{d.push({type:0,doc:y})})),new tu(e,n,Yl.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ph(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class XO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class $O{constructor(){this.queries=fb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=st(n),u=o.queries;o.queries=fb(),u.forEach(((d,y)=>{for(const _ of y.Sa)_.onError(s)}))})(this,new He(Ee.ABORTED,"Firestore shutting down"))}}function fb(){return new il((i=>e1(i)),Ph)}async function JO(i,e){const n=st(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new XO,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const y=lg(d,`Initialization of query '${zl(e.query)}' failed`);return void e.onError(y)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&ug(n)}async function WO(i,e){const n=st(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function ZO(i,e){const n=st(i);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const y of d.Sa)y.Fa(o)&&(s=!0);d.wa=o}}s&&ug(n)}function eD(i,e,n){const s=st(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function ug(i){i.Ca.forEach((e=>{e.next()}))}var bm,hb;(hb=bm||(bm={})).Ma="default",hb.Cache="cache";class tD{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new tu(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=tu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bm.Cache}}class V1{constructor(e){this.key=e}}class P1{constructor(e){this.key=e}}class nD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=At(),this.mutatedKeys=At(),this.eu=t1(e),this.tu=new Yl(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new cb,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,y=!1;const _=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((R,I)=>{const M=o.get(R),$=Lh(this.query,I)?I:null,te=!!M&&this.mutatedKeys.has(M.key),pe=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let _e=!1;M&&$?M.data.isEqual($.data)?te!==pe&&(s.track({type:3,doc:$}),_e=!0):this.su(M,$)||(s.track({type:2,doc:$}),_e=!0,(_&&this.eu($,_)>0||b&&this.eu($,b)<0)&&(y=!0)):!M&&$?(s.track({type:0,doc:$}),_e=!0):M&&!$&&(s.track({type:1,doc:M}),_e=!0,(_||b)&&(y=!0)),_e&&($?(d=d.add($),u=pe?u.add(R):u.delete(R)):(d=d.delete(R),u=u.delete(R)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const R=this.query.limitType==="F"?d.last():d.first();d=d.delete(R.key),u=u.delete(R.key),s.track({type:1,doc:R})}return{tu:d,iu:s,Cs:y,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((R,I)=>(function($,te){const pe=_e=>{switch(_e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e(20277,{Rt:_e})}};return pe($)-pe(te)})(R.type,I.type)||this.eu(R.doc,I.doc))),this.ou(s),o=o??!1;const y=n&&!o?this._u():[],_=this.Xa.size===0&&this.current&&!o?1:0,b=_!==this.Za;return this.Za=_,d.length!==0||b?{snapshot:new tu(this.query,e.tu,u,d,e.mutatedKeys,_===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=At(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new P1(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new V1(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=At();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return tu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const cg="SyncEngine";class rD{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class iD{constructor(e){this.key=e,this.hu=!1}}class sD{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new il((y=>e1(y)),Ph),this.Iu=new Map,this.Eu=new Set,this.du=new hn(Ye.comparator),this.Au=new Map,this.Ru=new Zm,this.Vu={},this.mu=new Map,this.fu=eu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function aD(i,e,n=!0){const s=q1(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await L1(s,e,n,!0),o}async function oD(i,e){const n=q1(i);await L1(n,e,!0,!1)}async function L1(i,e,n,s){const o=await SO(i.localStore,ws(e)),u=o.targetId,d=i.sharedClientState.addLocalQueryTarget(u,n);let y;return s&&(y=await lD(i,e,u,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&x1(i.remoteStore,o),y}async function lD(i,e,n,s,o){i.pu=(I,M,$)=>(async function(pe,_e,je,qe){let ke=_e.view.ru(je);ke.Cs&&(ke=await ib(pe.localStore,_e.query,!1).then((({documents:L})=>_e.view.ru(L,ke))));const tt=qe&&qe.targetChanges.get(_e.targetId),ht=qe&&qe.targetMismatches.get(_e.targetId)!=null,Ge=_e.view.applyChanges(ke,pe.isPrimaryClient,tt,ht);return pb(pe,_e.targetId,Ge.au),Ge.snapshot})(i,I,M,$);const u=await ib(i.localStore,e,!0),d=new nD(e,u.Qs),y=d.ru(u.documents),_=Ic.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),b=d.applyChanges(y,i.isPrimaryClient,_);pb(i,n,b.au);const R=new rD(e,n,d);return i.Tu.set(e,R),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),b.snapshot}async function uD(i,e,n){const s=st(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((d=>!Ph(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await vm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&rg(s.remoteStore,o.targetId),Em(s,o.targetId)})).catch(au)):(Em(s,o.targetId),await vm(s.localStore,o.targetId,!0))}async function cD(i,e){const n=st(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),rg(n.remoteStore,s.targetId))}async function fD(i,e,n){const s=vD(i);try{const o=await(function(d,y){const _=st(d),b=Wt.now(),R=y.reduce((($,te)=>$.add(te.key)),At());let I,M;return _.persistence.runTransaction("Locally write mutations","readwrite",($=>{let te=pa(),pe=At();return _.Ns.getEntries($,R).next((_e=>{te=_e,te.forEach(((je,qe)=>{qe.isValidDocument()||(pe=pe.add(je))}))})).next((()=>_.localDocuments.getOverlayedDocuments($,te))).next((_e=>{I=_e;const je=[];for(const qe of y){const ke=w2(qe,I.get(qe.key).overlayedDocument);ke!=null&&je.push(new sl(qe.key,ke,YE(ke.value.mapValue),ua.exists(!0)))}return _.mutationQueue.addMutationBatch($,b,je,y)})).next((_e=>{M=_e;const je=_e.applyToLocalDocumentSet(I,pe);return _.documentOverlayCache.saveOverlays($,_e.batchId,je)}))})).then((()=>({batchId:M.batchId,changes:r1(I)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,y,_){let b=d.Vu[d.currentUser.toKey()];b||(b=new hn(St)),b=b.insert(y,_),d.Vu[d.currentUser.toKey()]=b})(s,o.batchId,n),await Oc(s,o.changes),await Hh(s.remoteStore)}catch(o){const u=lg(o,"Failed to persist write");n.reject(u)}}async function j1(i,e){const n=st(i);try{const s=await EO(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(Lt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Lt(d.hu,14607):o.removedDocuments.size>0&&(Lt(d.hu,42227),d.hu=!1))})),await Oc(n,s,e)}catch(s){await au(s)}}function db(i,e,n){const s=st(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,d)=>{const y=d.view.va(e);y.snapshot&&o.push(y.snapshot)})),(function(d,y){const _=st(d);_.onlineState=y;let b=!1;_.queries.forEach(((R,I)=>{for(const M of I.Sa)M.va(y)&&(b=!0)})),b&&ug(_)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function hD(i,e,n){const s=st(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let d=new hn(Ye.comparator);d=d.insert(u,mr.newNoDocument(u,rt.min()));const y=At().add(u),_=new zh(rt.min(),new Map,new hn(St),d,y);await j1(s,_),s.du=s.du.remove(u),s.Au.delete(e),fg(s)}else await vm(s.localStore,e,!1).then((()=>Em(s,e,n))).catch(au)}async function dD(i,e){const n=st(i),s=e.batch.batchId;try{const o=await bO(n.localStore,e);z1(n,s,null),U1(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Oc(n,o)}catch(o){await au(o)}}async function pD(i,e,n){const s=st(i);try{const o=await(function(d,y){const _=st(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let R;return _.mutationQueue.lookupMutationBatch(b,y).next((I=>(Lt(I!==null,37113),R=I.keys(),_.mutationQueue.removeMutationBatch(b,I)))).next((()=>_.mutationQueue.performConsistencyCheck(b))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(b,R,y))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,R))).next((()=>_.localDocuments.getDocuments(b,R)))}))})(s.localStore,e);z1(s,e,n),U1(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Oc(s,o)}catch(o){await au(o)}}function U1(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function z1(i,e,n){const s=st(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Em(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||B1(i,s)}))}function B1(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(rg(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),fg(i))}function pb(i,e,n){for(const s of n)s instanceof V1?(i.Ru.addReference(s.key,e),mD(i,s)):s instanceof P1?(Le(cg,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||B1(i,s.key)):$e(19791,{wu:s})}function mD(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(Le(cg,"New document in limbo: "+n),i.Eu.add(s),fg(i))}function fg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Ye(fn.fromString(e)),s=i.fu.next();i.Au.set(s,new iD(n)),i.du=i.du.insert(n,s),x1(i.remoteStore,new oo(ws(Qm(n.path)),s,"TargetPurposeLimboResolution",Nh.ce))}}async function Oc(i,e,n){const s=st(i),o=[],u=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((y,_)=>{d.push(s.pu(_,e,n).then((b=>{if((b||n)&&s.isPrimaryClient){const R=b?!b.fromCache:n?.targetChanges.get(_.targetId)?.current;s.sharedClientState.updateQueryState(_.targetId,R?"current":"not-current")}if(b){o.push(b);const R=tg.As(_.targetId,b);u.push(R)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(_,b){const R=st(_);try{await R.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>ve.forEach(b,(M=>ve.forEach(M.Es,($=>R.persistence.referenceDelegate.addReference(I,M.targetId,$))).next((()=>ve.forEach(M.ds,($=>R.persistence.referenceDelegate.removeReference(I,M.targetId,$)))))))))}catch(I){if(!ou(I))throw I;Le(ng,"Failed to update sequence numbers: "+I)}for(const I of b){const M=I.targetId;if(!I.fromCache){const $=R.Ms.get(M),te=$.snapshotVersion,pe=$.withLastLimboFreeSnapshotVersion(te);R.Ms=R.Ms.insert(M,pe)}}})(s.localStore,u))}async function gD(i,e){const n=st(i);if(!n.currentUser.isEqual(e)){Le(cg,"User change. New user:",e.toKey());const s=await A1(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((y=>{y.forEach((_=>{_.reject(new He(Ee.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Oc(n,s.Ls)}}function yD(i,e){const n=st(i),s=n.Au.get(e);if(s&&s.hu)return At().add(s.key);{let o=At();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const y=n.Tu.get(d);o=o.unionWith(y.view.nu)}return o}}function q1(i){const e=st(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=j1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hD.bind(null,e),e.Pu.H_=ZO.bind(null,e.eventManager),e.Pu.yu=eD.bind(null,e.eventManager),e}function vD(i){const e=st(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pD.bind(null,e),e}class Sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return _O(this.persistence,new gO,e.initialUser,this.serializer)}Cu(e){return new S1(eg.mi,this.serializer)}Du(e){return new CO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sh.provider={build:()=>new Sh};class _D extends Sh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Lt(this.persistence.referenceDelegate instanceof Th,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new tO(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Kr.withCacheSize(this.cacheSizeBytes):Kr.DEFAULT;return new S1((s=>Th.mi(s,n)),this.serializer)}}class Tm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>db(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=gD.bind(null,this.syncEngine),await QO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $O})()}createDatastore(e){const n=Bh(e.databaseInfo.databaseId),s=(function(u){return new DO(u)})(e.databaseInfo);return(function(u,d,y,_){return new VO(u,d,y,_)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,d,y){return new LO(s,o,u,d,y)})(this.localStore,this.datastore,e.asyncQueue,(n=>db(this.syncEngine,n,0)),(function(){return ob.v()?new ob:new RO})())}createSyncEngine(e,n){return(function(o,u,d,y,_,b,R){const I=new sD(o,u,d,y,_,b);return R&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=st(n);Le(nl,"RemoteStore shutting down."),s.Ea.add(5),await xc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Tm.provider={build:()=>new Tm};class bD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):da("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const bo="FirestoreClient";class ED{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=pr.UNAUTHENTICATED,this.clientId=Bm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async d=>{Le(bo,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(Le(bo,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new po;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=lg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Xp(i,e){i.asyncQueue.verifyOperationInProgress(),Le(bo,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await A1(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function mb(i,e){i.asyncQueue.verifyOperationInProgress();const n=await TD(i);Le(bo,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>ub(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>ub(e.remoteStore,o))),i._onlineComponents=e}async function TD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Le(bo,"Using user provided OfflineComponentProvider");try{await Xp(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Ee.FAILED_PRECONDITION||o.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;$l("Error using user provided cache. Falling back to memory cache: "+n),await Xp(i,new Sh)}}else Le(bo,"Using default OfflineComponentProvider"),await Xp(i,new _D(void 0));return i._offlineComponents}async function H1(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Le(bo,"Using user provided OnlineComponentProvider"),await mb(i,i._uninitializedComponentsProvider._online)):(Le(bo,"Using default OnlineComponentProvider"),await mb(i,new Tm))),i._onlineComponents}function wD(i){return H1(i).then((e=>e.syncEngine))}async function SD(i){const e=await H1(i),n=e.eventManager;return n.onListen=aD.bind(null,e.syncEngine),n.onUnlisten=uD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=oD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=cD.bind(null,e.syncEngine),n}function AD(i,e,n={}){const s=new po;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,y,_,b){const R=new bD({next:M=>{R.Nu(),d.enqueueAndForget((()=>WO(u,I)));const $=M.docs.has(y);!$&&M.fromCache?b.reject(new He(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&M.fromCache&&_&&_.source==="server"?b.reject(new He(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(M)},error:M=>b.reject(M)}),I=new tD(Qm(y.path),R,{includeMetadataChanges:!0,qa:!0});return JO(u,I)})(await SD(i),i.asyncQueue,e,n,s))),s.promise}function F1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const gb=new Map;const K1="firestore.googleapis.com",yb=!0;class vb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new He(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=K1,this.ssl=yb}else this.host=e.host,this.ssl=e.ssl??yb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=w1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Z2)throw new He(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Px("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F1(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new He(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new He(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new He(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hg{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new He(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Ax;switch(s.type){case"firstParty":return new xx(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new He(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=gb.get(n);s&&(Le("ComponentProvider","Removing Datastore"),gb.delete(n),s.terminate())})(this),Promise.resolve()}}function CD(i,e,n,s={}){i=fc(i,hg);const o=nu(e),u=i._getSettings(),d={...u,emulatorOptions:i._getEmulatorOptions()},y=`${e}:${n}`;o&&(Kb(`https://${y}`),Gb("Firestore",!0)),u.host!==K1&&u.host!==y&&$l("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...u,host:y,ssl:o,emulatorOptions:s};if(!Wo(_,d)&&(i._setSettings(_),s.mockUserToken)){let b,R;if(typeof s.mockUserToken=="string")b=s.mockUserToken,R=pr.MOCK_USER;else{b=$A(s.mockUserToken,i._app?.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new He(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new pr(I)}i._authCredentials=new Cx(new PE(b,R))}}class dg{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new dg(this.firestore,e,this._query)}}class Xn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xn(this.firestore,e,this._key)}toJSON(){return{type:Xn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Cc(n,Xn._jsonSchema))return new Xn(e,s||null,new Ye(fn.fromString(n.referencePath)))}}Xn._jsonSchemaVersion="firestore/documentReference/1.0",Xn._jsonSchema={type:Vn("string",Xn._jsonSchemaVersion),referencePath:Vn("string")};class vc extends dg{constructor(e,n,s){super(e,n,Qm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xn(this.firestore,null,new Ye(e))}withConverter(e){return new vc(this.firestore,e,this._path)}}function G1(i,e,...n){if(i=Ui(i),arguments.length===1&&(e=Bm.newId()),Vx("doc","path",e),i instanceof hg){const s=fn.fromString(e,...n);return N0(s),new Xn(i,null,new Ye(s))}{if(!(i instanceof Xn||i instanceof vc))throw new He(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(fn.fromString(e,...n));return N0(s),new Xn(i.firestore,i instanceof vc?i.converter:null,new Ye(s))}}const _b="AsyncQueue";class bb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new R1(this,"async_queue_retry"),this._c=()=>{const s=Qp();s&&Le(_b,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Qp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Qp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new po;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ou(e))throw e;Le(_b,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,da("INTERNAL UNHANDLED ERROR: ",Eb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=og.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&$e(47125,{Pc:Eb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Eb(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class pg extends hg{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new bb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bb(e),this._firestoreClient=void 0,await e}}}function RD(i,e){const n=typeof i=="object"?i:$b(),s=typeof i=="string"?i:mh,o=xm(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=QA("firestore");u&&CD(o,...u)}return o}function Y1(i){if(i._terminated)throw new He(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||ID(i),i._firestoreClient}function ID(i){const e=i._freezeSettings(),n=(function(o,u,d,y){return new Yx(o,u,d,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,F1(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new ED(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class ji{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ji(sr.fromBase64String(e))}catch(n){throw new He(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ji(sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ji._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cc(e,ji._jsonSchema))return ji.fromBase64String(e.bytes)}}ji._jsonSchemaVersion="firestore/bytes/1.0",ji._jsonSchema={type:Vn("string",ji._jsonSchemaVersion),bytes:Vn("string")};class mg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new He(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Q1{constructor(e){this._methodName=e}}class As{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new He(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new He(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:As._jsonSchemaVersion}}static fromJSON(e){if(Cc(e,As._jsonSchema))return new As(e.latitude,e.longitude)}}As._jsonSchemaVersion="firestore/geoPoint/1.0",As._jsonSchema={type:Vn("string",As._jsonSchemaVersion),latitude:Vn("number"),longitude:Vn("number")};class Cs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Cs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cc(e,Cs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Cs(e.vectorValues);throw new He(Ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cs._jsonSchemaVersion="firestore/vectorValue/1.0",Cs._jsonSchema={type:Vn("string",Cs._jsonSchemaVersion),vectorValues:Vn("object")};const xD=/^__.*__$/;class OD{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new sl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rc(e,this.data,n,this.fieldTransforms)}}function X1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e(40011,{Ac:i})}}class gg{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new gg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ah(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(X1(this.Ac)&&xD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class DD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Bh(e)}Cc(e,n,s,o=!1){return new gg({Ac:e,methodName:n,Dc:s,path:ir.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ND(i){const e=i._freezeSettings(),n=Bh(i._databaseId);return new DD(i._databaseId,!!e.ignoreUndefinedProperties,n)}function MD(i,e,n,s,o,u={}){const d=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);Z1("Data must be an object, but it was:",d,s);const y=J1(s,d);let _,b;if(u.merge)_=new ts(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const R=[];for(const I of u.mergeFields){const M=kD(e,I,n);if(!d.contains(M))throw new He(Ee.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);PD(R,M)||R.push(M)}_=new ts(R),b=d.fieldTransforms.filter((I=>_.covers(I.field)))}else _=null,b=d.fieldTransforms;return new OD(new Li(y),_,b)}function $1(i,e){if(W1(i=Ui(i)))return Z1("Unsupported field value:",e,i),J1(i,e);if(i instanceof Q1)return(function(s,o){if(!X1(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let d=0;for(const y of s){let _=$1(y,o.wc(d));_==null&&(_={nullValue:"NULL_VALUE"}),u.push(_),d++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=Ui(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return y2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Wt.fromDate(s);return{timestampValue:Eh(o.serializer,u)}}if(s instanceof Wt){const u=new Wt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Eh(o.serializer,u)}}if(s instanceof As)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ji)return{bytesValue:g1(o.serializer,s._byteString)};if(s instanceof Xn){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Wm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Cs)return(function(d,y){return{mapValue:{fields:{[KE]:{stringValue:GE},[gh]:{arrayValue:{values:d.toArray().map((b=>{if(typeof b!="number")throw y.Sc("VectorValues must only contain numeric values.");return Xm(y.serializer,b)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${qm(s)}`)})(i,e)}function J1(i,e){const n={};return UE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rl(i,((s,o)=>{const u=$1(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function W1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Wt||i instanceof As||i instanceof ji||i instanceof Xn||i instanceof Q1||i instanceof Cs)}function Z1(i,e,n){if(!W1(n)||!LE(n)){const s=qm(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function kD(i,e,n){if((e=Ui(e))instanceof mg)return e._internalPath;if(typeof e=="string")return eT(i,e);throw Ah("Field path arguments must be of type string or ",i,!1,void 0,n)}const VD=new RegExp("[~\\*/\\[\\]]");function eT(i,e,n){if(e.search(VD)>=0)throw Ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new mg(...e.split("."))._internalPath}catch{throw Ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Ah(i,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let y=`Function ${e}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let _="";return(u||d)&&(_+=" (found",u&&(_+=` in field ${s}`),d&&(_+=` in document ${o}`),_+=")"),new He(Ee.INVALID_ARGUMENT,y+i+_)}function PD(i,e){return i.some((n=>n.isEqual(e)))}class tT{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(nT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LD extends tT{data(){return super.data()}}function nT(i,e){return typeof e=="string"?eT(i,e):e instanceof mg?e._internalPath:e._delegate._internalPath}class jD{convertValue(e,n="none"){switch(vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return An(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return rl(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[gh].arrayValue?.values?.map((s=>An(s.doubleValue)));return new Cs(n)}convertGeoPoint(e){return new As(An(e.latitude),An(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=kh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(dc(e));default:return null}}convertTimestamp(e){const n=go(e);return new Wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=fn.fromString(e);Lt(T1(s),9688,{name:e});const o=new pc(s.get(1),s.get(3)),u=new Ye(s.popFirst(5));return o.isEqual(n)||da(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function UD(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class Ju{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $o extends tT{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(nT("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new He(Ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$o._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$o._jsonSchemaVersion="firestore/documentSnapshot/1.0",$o._jsonSchema={type:Vn("string",$o._jsonSchemaVersion),bundleSource:Vn("string","DocumentSnapshot"),bundleName:Vn("string"),bundle:Vn("string")};class rh extends $o{data(e={}){return super.data(e)}}class sc{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ju(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new rh(this._firestore,this._userDataWriter,s.key,s,new Ju(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new He(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((y=>{const _=new rh(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Ju(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);return y.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((y=>u||y.type!==3)).map((y=>{const _=new rh(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Ju(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,R=-1;return y.type!==0&&(b=d.indexOf(y.doc.key),d=d.delete(y.doc.key)),y.type!==1&&(d=d.add(y.doc),R=d.indexOf(y.doc.key)),{type:zD(y.type),doc:_,oldIndex:b,newIndex:R}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new He(Ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=sc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e(61501,{type:i})}}function BD(i){i=fc(i,Xn);const e=fc(i.firestore,pg);return AD(Y1(e),i._key).then((n=>KD(e,i,n)))}sc._jsonSchemaVersion="firestore/querySnapshot/1.0",sc._jsonSchema={type:Vn("string",sc._jsonSchemaVersion),bundleSource:Vn("string","QuerySnapshot"),bundleName:Vn("string"),bundle:Vn("string")};class qD extends jD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ji(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,n)}}function HD(i,e,n){i=fc(i,Xn);const s=fc(i.firestore,pg),o=UD(i.converter,e);return FD(s,[MD(ND(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,ua.none())])}function FD(i,e){return(function(s,o){const u=new po;return s.asyncQueue.enqueueAndForget((async()=>fD(await wD(s),o,u))),u.promise})(Y1(i),e)}function KD(i,e,n){const s=n.docs.get(e._key),o=new qD(i);return new $o(i,o,e._key,s,new Ju(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){su=o})(ru),Ql(new Zo("firestore",((s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),y=new pg(new Rx(s.getProvider("auth-internal")),new Ox(d,s.getProvider("app-check-internal")),(function(b,R){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new He(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pc(b.options.projectId,R)})(d,o),d);return u={useFetchStreams:n,...u},y._setSettings(u),y}),"PUBLIC").setMultipleInstances(!0)),fo(I0,x0,e),fo(I0,x0,"esm2020")})();const GD={apiKey:"AIzaSyCGabs1zTYUI0-yPRp2RD7_Zk4HLsd3kSc",authDomain:"gemini-podcast-cards.firebaseapp.com",projectId:"gemini-podcast-cards",storageBucket:"gemini-podcast-cards.firebasestorage.app",messagingSenderId:"535172285628",appId:"1:535172285628:web:1fa37b46cf2bdf89257cb9"},rT=Xb(GD),Ff=wx(rT),YD=new aa,iT=RD(rT),sT="users";async function QD(i,e){if(!i)throw new Error("User ID is required");try{const n=JSON.stringify(e),s=G1(iT,sT,i);await HD(s,{vocab_data:n,last_synced:Date.now()}),console.log(`Successfully synced ${e.length} cards for user ${i}`)}catch(n){throw console.error("Sync upload failed:",n),n}}async function XD(i){if(!i)throw new Error("User ID is required");try{const e=G1(iT,sT,i),n=await BD(e);if(n.exists()){const s=n.data();if(s.vocab_data)return JSON.parse(s.vocab_data)}return null}catch(e){throw console.error("Sync download failed:",e),e}}const Tb="zanta0529@gmail.com,amy.webhd@gmail.com".split(",").map(i=>i.trim()).filter(i=>i!==""),$D=({isOpen:i,onClose:e,onConfirm:n,title:s,message:o})=>{const[u,d]=Te.useState(3);return Te.useEffect(()=>{if(i){d(3);const y=setInterval(()=>{d(_=>_<=1?(clearInterval(y),0):_-1)},1e3);return()=>clearInterval(y)}},[i]),i?D.jsx("div",{style:wb.overlay,children:D.jsxs("div",{style:wb.content,children:[D.jsxs("h3",{style:{marginTop:0,color:"#ff6b6b"},children:[" ",s]}),D.jsx("p",{style:{color:"#ccc",lineHeight:"1.5"},children:o}),D.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[D.jsx("button",{onClick:e,style:{...ac,backgroundColor:"#666"},children:"Cancel"}),D.jsx("button",{onClick:()=>{n(),e()},disabled:u>0,style:{...ac,backgroundColor:u>0?"#CCC":"#e03131",cursor:u>0?"not-allowed":"pointer",opacity:u>0?.7:1},children:u>0?`Wait (${u})...`:"Execute!"})]})]})}):null};function JD(){const[i,e]=Te.useState([]),[n,s]=Te.useState(!0),[o,u]=Te.useState(0),[d,y]=Te.useState(null),[_,b]=Te.useState(!1),[R,I]=Te.useState(!1),[M,$]=Te.useState(!1),[te,pe]=Te.useState(!1),[_e,je]=Te.useState(!1),[qe,ke]=Te.useState(!1),[tt,ht]=Te.useState(!1),[Ge,L]=Te.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),k=(oe,be,Ue)=>{L({isOpen:!0,title:oe,message:be,onConfirm:Ue})};Te.useEffect(()=>{const oe=hI(Ff,async be=>{be?Tb.length===0||Tb.includes(be.email)?(y(be),ct.success(`Welcome, ${be.displayName}`)):(console.warn(`Unauthorized: ${be.email}`),ct.error(`Access denied for ${be.email}`),await y0(Ff),y(null)):y(null)});return()=>oe()},[]);const j=async()=>{try{s(!0),await Lw();const oe=await nr.vocab.toArray(),be=Date.now(),Ue=oe.filter(at=>at.nextReview<=be||at.status==="new");e(Ue)}catch(oe){console.error("Failed to load cards:",oe),ct.error("Load failed: "+oe.message)}finally{s(!1)}};Te.useEffect(()=>{j()},[]);const Y=async oe=>{try{await nr.vocab.put(oe),u(be=>be+1)}catch(be){console.error("Update failed:",be),ct.error("Update failed")}},N=async()=>{try{await NI(Ff,YD),ke(!1)}catch(oe){console.error("Login failed:",oe),ct.error("Login failed")}},F=async()=>{await y0(Ff),window.location.reload()},V=async()=>{if(!d)return;b(!0),ke(!1);const oe=ct.loading("Backing up...");try{const be=await nr.vocab.toArray();await QD(d.uid,be),ct.success("Backup complete!",{id:oe})}catch(be){console.error(be),ct.error("Backup failed",{id:oe})}finally{b(!1),setTimeout(()=>ct.dismiss(oe),3e3)}},Dt=async()=>{d&&k("Overwrite Warning","Are you sure you want to overwrite local data with cloud backup? This action cannot be undone.",async()=>{b(!0),ke(!1);const oe=ct.loading("Restoring...");try{const be=await XD(d.uid);be?(await nr.vocab.clear(),await nr.vocab.bulkAdd(be),ct.success("Restore complete! Reloading...",{id:oe}),setTimeout(()=>window.location.reload(),1500)):ct("No backup found.",{id:oe,icon:""})}catch(be){console.error(be),ct.error("Restore failed",{id:oe})}finally{b(!1),setTimeout(()=>ct.dismiss(oe),3e3)}})};if(n)return D.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1b1e",color:"#fff"},children:"Loading..."});const Gt=i[o];return D.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",padding:"1rem",minHeight:"100vh",backgroundColor:"#1a1b1e",color:"#ffffff",fontFamily:"sans-serif",display:"flex",flexDirection:"column",gap:"0.5rem",alignItems:"center",position:"relative"},children:[D.jsx(kA,{position:"top-center",toastOptions:{duration:4e3,style:{background:"#333",color:"#fff"},error:{duration:6e3}}}),D.jsx($D,{isOpen:Ge.isOpen,onClose:()=>L(oe=>({...oe,isOpen:!1})),onConfirm:Ge.onConfirm,title:Ge.title,message:Ge.message}),D.jsxs("nav",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",padding:"0.5rem",borderBottom:"1px solid #333",position:"relative"},children:[D.jsxs("div",{style:{fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px"},children:["GPF",D.jsx("button",{onClick:()=>$(!0),style:WD,title:"Settings",children:""})]}),D.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[D.jsx("button",{onClick:()=>pe(!0),style:{...ac,backgroundColor:"#2196f3"},children:"+ Add"}),D.jsx("button",{onClick:()=>I(!0),style:{...ac,backgroundColor:"#e91e63"},children:"Import"}),D.jsx("button",{onClick:()=>ke(!qe),style:{...ac,backgroundColor:"#333",padding:"0.5rem 0.8rem",fontSize:"1.1rem"},children:""}),qe&&D.jsxs(D.Fragment,{children:[D.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99},onClick:()=>ke(!1)}),D.jsxs("div",{style:vs.container,children:[D.jsx("button",{onClick:()=>{je(!0),ke(!1)},style:vs.item,children:" Manage Cards"}),D.jsx("button",{onClick:()=>{ht(!0),ke(!1)},style:vs.item,children:" AI Smart Review"}),D.jsx("div",{style:vs.divider}),d?D.jsxs(D.Fragment,{children:[D.jsx("button",{onClick:V,disabled:_,style:vs.item,children:" Backup Data"}),D.jsx("button",{onClick:Dt,disabled:_,style:vs.item,children:" Restore Data"}),D.jsx("div",{style:vs.divider}),D.jsx("div",{style:vs.userEmail,children:d.email}),D.jsx("button",{onClick:F,style:{...vs.item,color:"#ff6b6b"},children:"Logout"})]}):D.jsx("button",{onClick:N,style:{...vs.item,color:"#4285F4"},children:"Login with Google"})]})]})]})]}),D.jsxs("header",{style:{marginBottom:"0.5rem",width:"100%",textAlign:"center"},children:[D.jsx("h1",{style:{fontSize:"1.5rem",margin:"0 0 0.3rem 0"},children:"Gemini Flashcards"}),D.jsx("p",{style:{color:"#888",margin:0,fontSize:"0.9rem"},children:i.length>0?`Progress: ${o} / ${i.length}`:"No cards due"})]}),D.jsx("main",{style:{width:"100%",flex:1,display:"flex",flexDirection:"column"},children:Gt?D.jsx(KS,{card:Gt,onUpdate:Y},Gt.id):D.jsxs("div",{style:{textAlign:"center",padding:"3rem",border:"1px dashed #555",borderRadius:"8px"},children:[D.jsx("h2",{children:" All caught up!"}),D.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"1rem",padding:"0.5rem 1rem",cursor:"pointer"},children:"Refresh"})]})}),D.jsx(VA,{isOpen:R,onClose:()=>I(!1),onSuccess:j}),D.jsx(PA,{isOpen:M,onClose:()=>$(!1)}),D.jsx(LA,{isOpen:te,onClose:()=>pe(!1),onSuccess:j}),D.jsx(jA,{isOpen:_e,onClose:()=>{je(!1),j()}}),D.jsx(UA,{isOpen:tt,onClose:()=>ht(!1)})]})}const ac={padding:"0.5rem 1rem",fontSize:"0.9rem",borderRadius:"6px",border:"none",cursor:"pointer",color:"white",whiteSpace:"nowrap",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.3rem",transition:"opacity 0.2s"},WD={background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem"},vs={container:{position:"absolute",top:"3.5rem",right:"0.5rem",backgroundColor:"#25262b",border:"1px solid #444",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.5)",zIndex:100,display:"flex",flexDirection:"column",minWidth:"180px",padding:"0.5rem"},item:{background:"none",border:"none",color:"#e0e0e0",padding:"0.8rem 1rem",textAlign:"left",cursor:"pointer",borderRadius:"4px",fontSize:"0.95rem",transition:"background 0.2s"},divider:{height:"1px",backgroundColor:"#444",margin:"0.5rem 0"},userEmail:{padding:"0.5rem 1rem",fontSize:"0.75rem",color:"#888",borderBottom:"1px solid #333",marginBottom:"0.5rem"}},wb={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},content:{backgroundColor:"#25262b",padding:"2rem",borderRadius:"12px",maxWidth:"400px",width:"90%",border:"1px solid #444",boxShadow:"0 8px 30px rgba(0,0,0,0.5)"}};Mw.createRoot(document.getElementById("root")).render(D.jsx(Sb.StrictMode,{children:D.jsx(JD,{})}));
