import{r as o,a as i,j as e,z as s}from"./index-C3BDOTSv.js";function S({isOpen:a,onClose:x}){const[d,c]=o.useState(""),[p,f]=o.useState(!1),[n,g]=o.useState(!1);o.useEffect(()=>{a&&(c(i.getApiKey()||""),g(i.isPersistent()))},[a]);const[l,b]=o.useState(()=>JSON.parse(localStorage.getItem("gp_settings_autoplay_tts"))||!1),[t,y]=o.useState(()=>localStorage.getItem("gp_settings_learning_mode")||"sniper"),h=()=>{localStorage.setItem("gp_settings_autoplay_tts",JSON.stringify(l)),d.trim()?(i.setApiKey(d.trim(),n),n?s.success("API Key å·²å„²å­˜ (æœ¬æ©ŸæŒä¹…åŒ–)"):s.success("API Key å·²å„²å­˜ (åƒ…é™æœ¬æ¬¡ Session)")):(i.removeApiKey(),s("API Key å·²ç§»é™¤")),localStorage.setItem("gp_settings_learning_mode",t),window.dispatchEvent(new Event("storage")),s.success("Settings saved!"),x()},u=()=>{c(""),g(!1),i.removeApiKey(),s("API Key å·²æ¸…é™¤")};return a?e.jsx("div",{style:r.overlay,children:e.jsxs("div",{style:r.modal,children:[e.jsx("h2",{style:{marginTop:0,color:"#fff"},children:"Settings"}),e.jsx("hr",{style:{borderColor:"#444",margin:"1.5rem 0"}}),e.jsxs("div",{style:r.section,children:[e.jsx("h3",{style:{...r.label,color:"#fff",fontSize:"1rem"},children:"Preferences"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[e.jsxs("label",{style:{color:"#ccc",fontSize:"0.9rem"},children:["Auto-play TTS on Flip",e.jsx("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"4px"},children:"Automatically read the example sentence when flipping to the back."})]}),e.jsx("div",{onClick:()=>b(!l),style:{width:"40px",height:"20px",backgroundColor:l?"#4caf50":"#444",borderRadius:"10px",position:"relative",cursor:"pointer",transition:"background-color 0.2s"},children:e.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:"#fff",borderRadius:"50%",position:"absolute",top:"2px",left:l?"22px":"2px",transition:"left 0.2s"}})})]})]}),e.jsxs("div",{style:r.field,children:[e.jsx("h3",{style:{...r.label,color:"#fff",fontSize:"1rem",marginBottom:"1rem"},children:"Learning Mode"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{onClick:()=>y("sniper"),style:{flex:1,padding:"1rem",borderRadius:"8px",border:t==="sniper"?"2px solid #2196f3":"1px solid #444",backgroundColor:t==="sniper"?"rgba(33, 150, 243, 0.1)":"transparent",cursor:"pointer",transition:"all 0.2s"},children:[e.jsx("strong",{style:{color:t==="sniper"?"#2196f3":"#aaa",display:"block",marginBottom:"0.5rem"},children:"ğŸ¯ Sniper Mode"}),e.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"#888"},children:"Context-first. Best for active recall and deep learning. (Auto-adapts based on progress)"})]}),e.jsxs("div",{onClick:()=>y("reading"),style:{flex:1,padding:"1rem",borderRadius:"8px",border:t==="reading"?"2px solid #4caf50":"1px solid #444",backgroundColor:t==="reading"?"rgba(76, 175, 80, 0.1)":"transparent",cursor:"pointer",transition:"all 0.2s"},children:[e.jsx("strong",{style:{color:t==="reading"?"#4caf50":"#aaa",display:"block",marginBottom:"0.5rem"},children:"ğŸ“– Reading Mode"}),e.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"#888"},children:"Word-first. Best for quick review or low-energy sessions."})]})]})]}),e.jsx("hr",{style:{borderColor:"#444",margin:"1.5rem 0"}}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("label",{style:r.label,children:"Gemini API Key (BYOK)"}),e.jsxs("p",{style:r.hint,children:["æ‚¨çš„ Key å°‡ç›´æ¥ç”¨æ–¼å‘¼å« Google Gemini APIã€‚",e.jsx("br",{}),"ç‚ºäº†æ‚¨çš„å®‰å…¨ï¼Œè«‹å‹¿åœ¨å…¬å…±é›»è…¦ä¸Šä½¿ç”¨ã€Œè¨˜ä½æˆ‘çš„é‡‘é‘°ã€ã€‚"]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx("input",{type:p?"text":"password",value:d,onChange:m=>c(m.target.value),placeholder:"AIzaSy...",style:r.input}),e.jsx("button",{onClick:()=>f(!p),style:r.iconBtn,title:"Toggle Visibility",children:p?"ğŸ™ˆ":"ğŸ‘ï¸"})]}),e.jsxs("div",{style:r.checkboxContainer,children:[e.jsx("input",{type:"checkbox",id:"rememberKey",checked:n,onChange:m=>g(m.target.checked),style:{cursor:"pointer"}}),e.jsx("label",{htmlFor:"rememberKey",style:{...r.label,marginBottom:0,cursor:"pointer",fontWeight:"normal",fontSize:"0.9rem"},children:"è¨˜ä½æˆ‘çš„é‡‘é‘° (å„²å­˜åœ¨æœ¬æ©Ÿ)"})]}),n&&e.jsx("p",{style:{color:"#ff9800",fontSize:"0.8rem",marginTop:"0.2rem",marginLeft:"1.5rem"},children:"âš ï¸ æ³¨æ„ï¼šé€™æœƒå°‡ Key å¯«å…¥ LocalStorageï¼Œè«‹ç¢ºä¿è£ç½®å®‰å…¨ã€‚"})]}),e.jsx("hr",{style:{borderColor:"#444",margin:"1.5rem 0"}}),e.jsxs("div",{style:r.actions,children:[e.jsx("button",{onClick:u,style:{...r.btn,backgroundColor:"#d32f2f",marginRight:"auto"},children:"Clear Key"}),e.jsx("button",{onClick:x,style:{...r.btn,backgroundColor:"#555"},children:"Close"}),e.jsx("button",{onClick:h,style:{...r.btn,backgroundColor:"#4caf50"},children:"Save"})]})]})}):null}const r={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},modal:{backgroundColor:"#2c2e33",padding:"2rem",borderRadius:"8px",width:"90%",maxWidth:"400px",boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},label:{display:"block",color:"#e0e0e0",fontWeight:"bold",marginBottom:"0.5rem"},hint:{color:"#aaa",fontSize:"0.85rem",marginBottom:"0.5rem",lineHeight:"1.4"},input:{flex:1,padding:"0.6rem",borderRadius:"4px",border:"1px solid #444",backgroundColor:"#1a1b1e",color:"#fff",fontFamily:"monospace"},iconBtn:{padding:"0 0.8rem",backgroundColor:"#444",border:"none",borderRadius:"4px",cursor:"pointer",color:"#fff"},checkboxContainer:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.5rem"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem"},btn:{padding:"0.5rem 1.2rem",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"}};export{S as default};
