(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var yw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Rp={exports:{}},Gu={};var m_;function vw(){if(m_)return Gu;m_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var y in o)y!=="key"&&(u[y]=o[y])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:u}}return Gu.Fragment=e,Gu.jsx=n,Gu.jsxs=n,Gu}var g_;function _w(){return g_||(g_=1,Rp.exports=vw()),Rp.exports}var L=_w(),Ip={exports:{}},it={};var y_;function bw(){if(y_)return it;y_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),k=Symbol.iterator;function X(G){return G===null||typeof G!="object"?null:(G=k&&G[k]||G["@@iterator"],typeof G=="function"?G:null)}var re={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pe=Object.assign,_e={};function ze(G,me,xe){this.props=G,this.context=me,this.refs=_e,this.updater=xe||re}ze.prototype.isReactComponent={},ze.prototype.setState=function(G,me){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,me,"setState")},ze.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function Be(){}Be.prototype=ze.prototype;function ke(G,me,xe){this.props=G,this.context=me,this.refs=_e,this.updater=xe||re}var Je=ke.prototype=new Be;Je.constructor=ke,pe(Je,ze.prototype),Je.isPureReactComponent=!0;var yt=Array.isArray;function Ge(){}var D={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function V(G,me,xe){var Pe=xe.ref;return{$$typeof:i,type:G,key:me,ref:Pe!==void 0?Pe:null,props:xe}}function B(G,me){return V(G.type,me,G.props)}function z(G){return typeof G=="object"&&G!==null&&G.$$typeof===i}function Z(G){var me={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(xe){return me[xe]})}var P=/\/+/g;function qt(G,me){return typeof G=="object"&&G!==null&&G.key!=null?Z(""+G.key):me.toString(36)}function Gt(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(Ge,Ge):(G.status="pending",G.then(function(me){G.status==="pending"&&(G.status="fulfilled",G.value=me)},function(me){G.status==="pending"&&(G.status="rejected",G.reason=me)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function le(G,me,xe,Pe,Qe){var We=typeof G;(We==="undefined"||We==="boolean")&&(G=null);var mt=!1;if(G===null)mt=!0;else switch(We){case"bigint":case"string":case"number":mt=!0;break;case"object":switch(G.$$typeof){case i:case e:mt=!0;break;case R:return mt=G._init,le(mt(G._payload),me,xe,Pe,Qe)}}if(mt)return Qe=Qe(G),mt=Pe===""?"."+qt(G,0):Pe,yt(Qe)?(xe="",mt!=null&&(xe=mt.replace(P,"$&/")+"/"),le(Qe,me,xe,"",function(ns){return ns})):Qe!=null&&(z(Qe)&&(Qe=B(Qe,xe+(Qe.key==null||G&&G.key===Qe.key?"":(""+Qe.key).replace(P,"$&/")+"/")+mt)),me.push(Qe)),1;mt=0;var yn=Pe===""?".":Pe+":";if(yt(G))for(var Me=0;Me<G.length;Me++)Pe=G[Me],We=yn+qt(Pe,Me),mt+=le(Pe,me,xe,We,Qe);else if(Me=X(G),typeof Me=="function")for(G=Me.call(G),Me=0;!(Pe=G.next()).done;)Pe=Pe.value,We=yn+qt(Pe,Me++),mt+=le(Pe,me,xe,We,Qe);else if(We==="object"){if(typeof G.then=="function")return le(Gt(G),me,xe,Pe,Qe);throw me=String(G),Error("Objects are not valid as a React child (found: "+(me==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":me)+"). If you meant to render a collection of children, use an array instead.")}return mt}function be(G,me,xe){if(G==null)return G;var Pe=[],Qe=0;return le(G,Pe,"","",function(We){return me.call(xe,We,Qe++)}),Pe}function Ue(G){if(G._status===-1){var me=G._result;me=me(),me.then(function(xe){(G._status===0||G._status===-1)&&(G._status=1,G._result=xe)},function(xe){(G._status===0||G._status===-1)&&(G._status=2,G._result=xe)}),G._status===-1&&(G._status=0,G._result=me)}if(G._status===1)return G._result.default;throw G._result}var at=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var me=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(me))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},ft={map:be,forEach:function(G,me,xe){be(G,function(){me.apply(this,arguments)},xe)},count:function(G){var me=0;return be(G,function(){me++}),me},toArray:function(G){return be(G,function(me){return me})||[]},only:function(G){if(!z(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return it.Activity=I,it.Children=ft,it.Component=ze,it.Fragment=n,it.Profiler=o,it.PureComponent=ke,it.StrictMode=s,it.Suspense=_,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,it.__COMPILER_RUNTIME={__proto__:null,c:function(G){return D.H.useMemoCache(G)}},it.cache=function(G){return function(){return G.apply(null,arguments)}},it.cacheSignal=function(){return null},it.cloneElement=function(G,me,xe){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var Pe=pe({},G.props),Qe=G.key;if(me!=null)for(We in me.key!==void 0&&(Qe=""+me.key),me)!N.call(me,We)||We==="key"||We==="__self"||We==="__source"||We==="ref"&&me.ref===void 0||(Pe[We]=me[We]);var We=arguments.length-2;if(We===1)Pe.children=xe;else if(1<We){for(var mt=Array(We),yn=0;yn<We;yn++)mt[yn]=arguments[yn+2];Pe.children=mt}return V(G.type,Qe,Pe)},it.createContext=function(G){return G={$$typeof:d,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:u,_context:G},G},it.createElement=function(G,me,xe){var Pe,Qe={},We=null;if(me!=null)for(Pe in me.key!==void 0&&(We=""+me.key),me)N.call(me,Pe)&&Pe!=="key"&&Pe!=="__self"&&Pe!=="__source"&&(Qe[Pe]=me[Pe]);var mt=arguments.length-2;if(mt===1)Qe.children=xe;else if(1<mt){for(var yn=Array(mt),Me=0;Me<mt;Me++)yn[Me]=arguments[Me+2];Qe.children=yn}if(G&&G.defaultProps)for(Pe in mt=G.defaultProps,mt)Qe[Pe]===void 0&&(Qe[Pe]=mt[Pe]);return V(G,We,Qe)},it.createRef=function(){return{current:null}},it.forwardRef=function(G){return{$$typeof:y,render:G}},it.isValidElement=z,it.lazy=function(G){return{$$typeof:R,_payload:{_status:-1,_result:G},_init:Ue}},it.memo=function(G,me){return{$$typeof:b,type:G,compare:me===void 0?null:me}},it.startTransition=function(G){var me=D.T,xe={};D.T=xe;try{var Pe=G(),Qe=D.S;Qe!==null&&Qe(xe,Pe),typeof Pe=="object"&&Pe!==null&&typeof Pe.then=="function"&&Pe.then(Ge,at)}catch(We){at(We)}finally{me!==null&&xe.types!==null&&(me.types=xe.types),D.T=me}},it.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},it.use=function(G){return D.H.use(G)},it.useActionState=function(G,me,xe){return D.H.useActionState(G,me,xe)},it.useCallback=function(G,me){return D.H.useCallback(G,me)},it.useContext=function(G){return D.H.useContext(G)},it.useDebugValue=function(){},it.useDeferredValue=function(G,me){return D.H.useDeferredValue(G,me)},it.useEffect=function(G,me){return D.H.useEffect(G,me)},it.useEffectEvent=function(G){return D.H.useEffectEvent(G)},it.useId=function(){return D.H.useId()},it.useImperativeHandle=function(G,me,xe){return D.H.useImperativeHandle(G,me,xe)},it.useInsertionEffect=function(G,me){return D.H.useInsertionEffect(G,me)},it.useLayoutEffect=function(G,me){return D.H.useLayoutEffect(G,me)},it.useMemo=function(G,me){return D.H.useMemo(G,me)},it.useOptimistic=function(G,me){return D.H.useOptimistic(G,me)},it.useReducer=function(G,me,xe){return D.H.useReducer(G,me,xe)},it.useRef=function(G){return D.H.useRef(G)},it.useState=function(G){return D.H.useState(G)},it.useSyncExternalStore=function(G,me,xe){return D.H.useSyncExternalStore(G,me,xe)},it.useTransition=function(){return D.H.useTransition()},it.version="19.2.0",it}var v_;function Em(){return v_||(v_=1,Ip.exports=bw()),Ip.exports}var Te=Em();const _b=bm(Te);var xp={exports:{}},Yu={},Op={exports:{}},Dp={};var __;function Ew(){return __||(__=1,(function(i){function e(le,be){var Ue=le.length;le.push(be);e:for(;0<Ue;){var at=Ue-1>>>1,ft=le[at];if(0<o(ft,be))le[at]=be,le[Ue]=ft,Ue=at;else break e}}function n(le){return le.length===0?null:le[0]}function s(le){if(le.length===0)return null;var be=le[0],Ue=le.pop();if(Ue!==be){le[0]=Ue;e:for(var at=0,ft=le.length,G=ft>>>1;at<G;){var me=2*(at+1)-1,xe=le[me],Pe=me+1,Qe=le[Pe];if(0>o(xe,Ue))Pe<ft&&0>o(Qe,xe)?(le[at]=Qe,le[Pe]=Ue,at=Pe):(le[at]=xe,le[me]=Ue,at=me);else if(Pe<ft&&0>o(Qe,Ue))le[at]=Qe,le[Pe]=Ue,at=Pe;else break e}}return be}function o(le,be){var Ue=le.sortIndex-be.sortIndex;return Ue!==0?Ue:le.id-be.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,y=d.now();i.unstable_now=function(){return d.now()-y}}var _=[],b=[],R=1,I=null,k=3,X=!1,re=!1,pe=!1,_e=!1,ze=typeof setTimeout=="function"?setTimeout:null,Be=typeof clearTimeout=="function"?clearTimeout:null,ke=typeof setImmediate<"u"?setImmediate:null;function Je(le){for(var be=n(b);be!==null;){if(be.callback===null)s(b);else if(be.startTime<=le)s(b),be.sortIndex=be.expirationTime,e(_,be);else break;be=n(b)}}function yt(le){if(pe=!1,Je(le),!re)if(n(_)!==null)re=!0,Ge||(Ge=!0,Z());else{var be=n(b);be!==null&&Gt(yt,be.startTime-le)}}var Ge=!1,D=-1,N=5,V=-1;function B(){return _e?!0:!(i.unstable_now()-V<N)}function z(){if(_e=!1,Ge){var le=i.unstable_now();V=le;var be=!0;try{e:{re=!1,pe&&(pe=!1,Be(D),D=-1),X=!0;var Ue=k;try{t:{for(Je(le),I=n(_);I!==null&&!(I.expirationTime>le&&B());){var at=I.callback;if(typeof at=="function"){I.callback=null,k=I.priorityLevel;var ft=at(I.expirationTime<=le);if(le=i.unstable_now(),typeof ft=="function"){I.callback=ft,Je(le),be=!0;break t}I===n(_)&&s(_),Je(le)}else s(_);I=n(_)}if(I!==null)be=!0;else{var G=n(b);G!==null&&Gt(yt,G.startTime-le),be=!1}}break e}finally{I=null,k=Ue,X=!1}be=void 0}}finally{be?Z():Ge=!1}}}var Z;if(typeof ke=="function")Z=function(){ke(z)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,qt=P.port2;P.port1.onmessage=z,Z=function(){qt.postMessage(null)}}else Z=function(){ze(z,0)};function Gt(le,be){D=ze(function(){le(i.unstable_now())},be)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(le){le.callback=null},i.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<le?Math.floor(1e3/le):5},i.unstable_getCurrentPriorityLevel=function(){return k},i.unstable_next=function(le){switch(k){case 1:case 2:case 3:var be=3;break;default:be=k}var Ue=k;k=be;try{return le()}finally{k=Ue}},i.unstable_requestPaint=function(){_e=!0},i.unstable_runWithPriority=function(le,be){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var Ue=k;k=le;try{return be()}finally{k=Ue}},i.unstable_scheduleCallback=function(le,be,Ue){var at=i.unstable_now();switch(typeof Ue=="object"&&Ue!==null?(Ue=Ue.delay,Ue=typeof Ue=="number"&&0<Ue?at+Ue:at):Ue=at,le){case 1:var ft=-1;break;case 2:ft=250;break;case 5:ft=1073741823;break;case 4:ft=1e4;break;default:ft=5e3}return ft=Ue+ft,le={id:R++,callback:be,priorityLevel:le,startTime:Ue,expirationTime:ft,sortIndex:-1},Ue>at?(le.sortIndex=Ue,e(b,le),n(_)===null&&le===n(b)&&(pe?(Be(D),D=-1):pe=!0,Gt(yt,Ue-at))):(le.sortIndex=ft,e(_,le),re||X||(re=!0,Ge||(Ge=!0,Z()))),le},i.unstable_shouldYield=B,i.unstable_wrapCallback=function(le){var be=k;return function(){var Ue=k;k=be;try{return le.apply(this,arguments)}finally{k=Ue}}}})(Dp)),Dp}var b_;function Tw(){return b_||(b_=1,Op.exports=Ew()),Op.exports}var Np={exports:{}},fr={};var E_;function ww(){if(E_)return fr;E_=1;var i=Em();function e(_){var b="https://react.dev/errors/"+_;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)b+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+_+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(_,b,R){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:I==null?null:""+I,children:_,containerInfo:b,implementation:R}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(_,b){if(_==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return fr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,fr.createPortal=function(_,b){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(e(299));return u(_,b,null,R)},fr.flushSync=function(_){var b=d.T,R=s.p;try{if(d.T=null,s.p=2,_)return _()}finally{d.T=b,s.p=R,s.d.f()}},fr.preconnect=function(_,b){typeof _=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,s.d.C(_,b))},fr.prefetchDNS=function(_){typeof _=="string"&&s.d.D(_)},fr.preinit=function(_,b){if(typeof _=="string"&&b&&typeof b.as=="string"){var R=b.as,I=y(R,b.crossOrigin),k=typeof b.integrity=="string"?b.integrity:void 0,X=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;R==="style"?s.d.S(_,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:I,integrity:k,fetchPriority:X}):R==="script"&&s.d.X(_,{crossOrigin:I,integrity:k,fetchPriority:X,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},fr.preinitModule=function(_,b){if(typeof _=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var R=y(b.as,b.crossOrigin);s.d.M(_,{crossOrigin:R,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&s.d.M(_)},fr.preload=function(_,b){if(typeof _=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var R=b.as,I=y(R,b.crossOrigin);s.d.L(_,R,{crossOrigin:I,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},fr.preloadModule=function(_,b){if(typeof _=="string")if(b){var R=y(b.as,b.crossOrigin);s.d.m(_,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:R,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else s.d.m(_)},fr.requestFormReset=function(_){s.d.r(_)},fr.unstable_batchedUpdates=function(_,b){return _(b)},fr.useFormState=function(_,b,R){return d.H.useFormState(_,b,R)},fr.useFormStatus=function(){return d.H.useHostTransitionStatus()},fr.version="19.2.0",fr}var T_;function Sw(){if(T_)return Np.exports;T_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Np.exports=ww(),Np.exports}var w_;function Aw(){if(w_)return Yu;w_=1;var i=Tw(),e=Em(),n=Sw();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function y(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function _(t){if(u(t)!==t)throw Error(s(188))}function b(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return _(h),t;if(m===l)return _(h),r;m=m.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=m;else{for(var T=!1,C=h.child;C;){if(C===a){T=!0,a=h,l=m;break}if(C===l){T=!0,l=h,a=m;break}C=C.sibling}if(!T){for(C=m.child;C;){if(C===a){T=!0,a=m,l=h;break}if(C===l){T=!0,l=m,a=h;break}C=C.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function R(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=R(t),r!==null)return r;t=t.sibling}return null}var I=Object.assign,k=Symbol.for("react.element"),X=Symbol.for("react.transitional.element"),re=Symbol.for("react.portal"),pe=Symbol.for("react.fragment"),_e=Symbol.for("react.strict_mode"),ze=Symbol.for("react.profiler"),Be=Symbol.for("react.consumer"),ke=Symbol.for("react.context"),Je=Symbol.for("react.forward_ref"),yt=Symbol.for("react.suspense"),Ge=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function Z(t){return t===null||typeof t!="object"?null:(t=z&&t[z]||t["@@iterator"],typeof t=="function"?t:null)}var P=Symbol.for("react.client.reference");function qt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===P?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pe:return"Fragment";case ze:return"Profiler";case _e:return"StrictMode";case yt:return"Suspense";case Ge:return"SuspenseList";case V:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case re:return"Portal";case ke:return t.displayName||"Context";case Be:return(t._context.displayName||"Context")+".Consumer";case Je:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return r=t.displayName||null,r!==null?r:qt(t.type)||"Memo";case N:r=t._payload,t=t._init;try{return qt(t(r))}catch{}}return null}var Gt=Array.isArray,le=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ue={pending:!1,data:null,method:null,action:null},at=[],ft=-1;function G(t){return{current:t}}function me(t){0>ft||(t.current=at[ft],at[ft]=null,ft--)}function xe(t,r){ft++,at[ft]=t.current,t.current=r}var Pe=G(null),Qe=G(null),We=G(null),mt=G(null);function yn(t,r){switch(xe(We,r),xe(Qe,t),xe(Pe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Uv(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Uv(r),t=jv(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}me(Pe),xe(Pe,t)}function Me(){me(Pe),me(Qe),me(We)}function ns(t){t.memoizedState!==null&&xe(mt,t);var r=Pe.current,a=jv(r,t.type);r!==a&&(xe(Qe,t),xe(Pe,a))}function zi(t){Qe.current===t&&(me(Pe),me(Qe)),mt.current===t&&(me(mt),qu._currentValue=Ue)}var Ct,pi;function mi(t){if(Ct===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ct=r&&r[1]||"",pi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ct+t+pi}var Gr=!1;function Os(t,r){if(!t||Gr)return"";Gr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(ce){var oe=ce}Reflect.construct(t,[],ye)}else{try{ye.call()}catch(ce){oe=ce}t.call(ye.prototype)}}else{try{throw Error()}catch(ce){oe=ce}(ye=t())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(ce){if(ce&&oe&&typeof ce.stack=="string")return[ce.stack,oe.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),T=m[0],C=m[1];if(T&&C){var U=T.split(`
`),se=C.split(`
`);for(h=l=0;l<U.length&&!U[l].includes("DetermineComponentFrameRoot");)l++;for(;h<se.length&&!se[h].includes("DetermineComponentFrameRoot");)h++;if(l===U.length||h===se.length)for(l=U.length-1,h=se.length-1;1<=l&&0<=h&&U[l]!==se[h];)h--;for(;1<=l&&0<=h;l--,h--)if(U[l]!==se[h]){if(l!==1||h!==1)do if(l--,h--,0>h||U[l]!==se[h]){var he=`
`+U[l].replace(" at new "," at ");return t.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",t.displayName)),he}while(1<=l&&0<=h);break}}}finally{Gr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?mi(a):""}function To(t,r){switch(t.tag){case 26:case 27:case 5:return mi(t.type);case 16:return mi("Lazy");case 13:return t.child!==r&&r!==null?mi("Suspense Fallback"):mi("Suspense");case 19:return mi("SuspenseList");case 0:case 15:return Os(t.type,!1);case 11:return Os(t.type.render,!1);case 1:return Os(t.type,!0);case 31:return mi("Activity");default:return""}}function wo(t){try{var r="",a=null;do r+=To(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var dn=Object.prototype.hasOwnProperty,rn=i.unstable_scheduleCallback,Pn=i.unstable_cancelCallback,ol=i.unstable_shouldYield,rs=i.unstable_requestPaint,qn=i.unstable_now,Yr=i.unstable_getCurrentPriorityLevel,Qr=i.unstable_ImmediatePriority,Xr=i.unstable_UserBlockingPriority,gi=i.unstable_NormalPriority,Ds=i.unstable_LowPriority,ga=i.unstable_IdlePriority,Ns=i.log,yi=i.unstable_setDisableYieldValue,ar=null,vn=null;function _n(t){if(typeof Ns=="function"&&yi(t),vn&&typeof vn.setStrictMode=="function")try{vn.setStrictMode(ar,t)}catch{}}var Ne=Math.clz32?Math.clz32:Ms,is=Math.log,wr=Math.LN2;function Ms(t){return t>>>=0,t===0?32:31-(is(t)/wr|0)|0}var Ie=256,Bi=262144,sn=4194304;function Sr(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function $r(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var C=l&134217727;return C!==0?(l=C&~m,l!==0?h=Sr(l):(T&=C,T!==0?h=Sr(T):a||(a=C&~t,a!==0&&(h=Sr(a))))):(C=l&~m,C!==0?h=Sr(C):T!==0?h=Sr(T):a||(a=l&~t,a!==0&&(h=Sr(a)))),h===0?0:r!==0&&r!==h&&(r&m)===0&&(m=h&-h,a=r&-r,m>=a||m===32&&(a&4194048)!==0)?r:h}function yr(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function uu(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ll(){var t=sn;return sn<<=1,(sn&62914560)===0&&(sn=4194304),t}function $n(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Ar(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function So(t,r,a,l,h,m){var T=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var C=t.entanglements,U=t.expirationTimes,se=t.hiddenUpdates;for(a=T&~a;0<a;){var he=31-Ne(a),ye=1<<he;C[he]=0,U[he]=-1;var oe=se[he];if(oe!==null)for(se[he]=null,he=0;he<oe.length;he++){var ce=oe[he];ce!==null&&(ce.lane&=-536870913)}a&=~ye}l!==0&&vi(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(T&~r))}function vi(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Ne(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Vt(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Ne(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function Zt(t,r){var a=r&-r;return a=(a&42)!==0?1:ks(a),(a&(t.suspendedLanes|r))!==0?0:a}function ks(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Cr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Vs(){var t=be.p;return t!==0?t:(t=window.event,t===void 0?32:l_(t.type))}function or(t,r){var a=be.p;try{return be.p=t,r()}finally{be.p=a}}var Jr=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Jr,Qt="__reactProps$"+Jr,Ln="__reactContainer$"+Jr,qi="__reactEvents$"+Jr,cu="__reactListeners$"+Jr,Wr="__reactHandles$"+Jr,Ao="__reactResources$"+Jr,Hn="__reactMarker$"+Jr;function Ps(t){delete t[Lt],delete t[Qt],delete t[qi],delete t[cu],delete t[Wr]}function Rr(t){var r=t[Lt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Ln]||a[Lt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=Gv(t);t!==null;){if(a=t[Lt])return a;t=Gv(t)}return r}t=a,a=t.parentNode}return null}function xt(t){if(t=t[Lt]||t[Ln]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function bn(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function Cn(t){var r=t[Ao];return r||(r=t[Ao]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function an(t){t[Hn]=!0}var _i=new Set,ss={};function Ir(t,r){xr(t,r),xr(t+"Capture",r)}function xr(t,r){for(ss[t]=r,t=0;t<r.length;t++)_i.add(r[t])}var Zr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ya={},as={};function Co(t){return dn.call(as,t)?!0:dn.call(ya,t)?!1:Zr.test(t)?as[t]=!0:(ya[t]=!0,!1)}function ot(t,r,a){if(Co(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function lr(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function on(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function ln(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Or(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function va(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,m=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(T){a=""+T,m.call(this,T)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(T){a=""+T},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Dt(t){if(!t._valueTracker){var r=Or(t)?"checked":"value";t._valueTracker=va(t,r,""+t[r])}}function os(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Or(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function vt(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ei=/[\n"\\]/g;function Rn(t){return t.replace(ei,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ti(t,r,a,l,h,m,T,C){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),r!=null?T==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+ln(r)):t.value!==""+ln(r)&&(t.value=""+ln(r)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),r!=null?Ls(t,T,ln(r)):a!=null?Ls(t,T,ln(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?t.name=""+ln(C):t.removeAttribute("name")}function _a(t,r,a,l,h,m,T,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Dt(t);return}a=a!=null?""+ln(a):"",r=r!=null?""+ln(r):a,C||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=C?t.checked:!!l,t.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),Dt(t)}function Ls(t,r,a){r==="number"&&vt(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ni(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+ln(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function Ro(t,r,a){if(r!=null&&(r=""+ln(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+ln(a):""}function ri(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Gt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=ln(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Dt(t)}function Jn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var ul=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gt(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||ul.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function ba(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&gt(t,h,l)}else for(var m in r)r.hasOwnProperty(m)&&gt(t,m,r[m])}function Ea(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ii(t){return pn.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ur(){}var Dr=null;function vr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hi=null,Ut=null;function Fn(t){var r=xt(t);if(r&&(t=r.stateNode)){var a=t[Qt]||null;e:switch(t=r.stateNode,r.type){case"input":if(ti(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Rn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[Qt]||null;if(!h)throw Error(s(90));ti(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&os(l)}break e;case"textarea":Ro(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&ni(t,!!a.multiple,r,!1)}}}var bi=!1;function Nr(t,r,a){if(bi)return t(r,a);bi=!0;try{var l=t(r);return l}finally{if(bi=!1,(Hi!==null||Ut!==null)&&(hf(),Hi&&(r=Hi,t=Ut,Ut=Hi=null,Fn(r),t)))for(r=0;r<t.length;r++)Fn(t[r])}}function _r(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Qt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Us=!1;if(En)try{var ht={};Object.defineProperty(ht,"passive",{get:function(){Us=!0}}),window.addEventListener("test",ht,ht),window.removeEventListener("test",ht,ht)}catch{Us=!1}var Mr=null,Ta=null,Fi=null;function Ki(){if(Fi)return Fi;var t,r=Ta,a=r.length,l,h="value"in Mr?Mr.value:Mr.textContent,m=h.length;for(t=0;t<a&&r[t]===h[t];t++);var T=a-t;for(l=1;l<=T&&r[a-l]===h[m-l];l++);return Fi=h.slice(t,1<l?1-l:void 0)}function Gi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ei(){return!0}function si(){return!1}function un(t){function r(a,l,h,m,T){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=T,this.currentTarget=null;for(var C in t)t.hasOwnProperty(C)&&(a=t[C],this[C]=a?a(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ei:si,this.isPropagationStopped=si,this}return I(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),r}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ti=un(Yi),ai=I({},Yi,{view:0,detail:0}),ls=un(ai),wi,wa,Si,Sa=I({},ai,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Si&&(Si&&t.type==="mousemove"?(wi=t.screenX-Si.screenX,wa=t.screenY-Si.screenY):wa=wi=0,Si=t),wi)},movementY:function(t){return"movementY"in t?t.movementY:wa}}),js=un(Sa),Qi=I({},Sa,{dataTransfer:0}),Io=un(Qi),zs=I({},ai,{relatedTarget:0}),Ai=un(zs),us=I({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),xo=un(us),Aa=I({},Yi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Xi=un(Aa),Ca=I({},Yi,{data:0}),kr=un(Ca),Ra={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ia={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cs(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Tn[t])?!!r[t]:!1}function Vr(){return cs}var Kn=I({},ai,{key:function(t){if(t.key){var r=Ra[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Gi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ia[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vr,charCode:function(t){return t.type==="keypress"?Gi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bs=un(Kn),Oo=I({},Sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ci=un(Oo),c=I({},ai,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vr}),v=un(c),w=I({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=un(w),te=I({},Sa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ue=un(te),Ce=I({},Yi,{newState:0,oldState:0}),nt=un(Ce),cn=[9,13,27,32],Rt=En&&"CompositionEvent"in window,jt=null;En&&"documentMode"in document&&(jt=document.documentMode);var Pr=En&&"TextEvent"in window&&!jt,Lr=En&&(!Rt||jt&&8<jt&&11>=jt),br=" ",oi=!1;function fs(t,r){switch(t){case"keyup":return cn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qs=!1;function Dc(t,r){switch(t){case"compositionend":return xa(r);case"keypress":return r.which!==32?null:(oi=!0,br);case"textInput":return t=r.data,t===br&&oi?null:t;default:return null}}function Bh(t,r){if(qs)return t==="compositionend"||!Rt&&fs(t,r)?(t=Ki(),Fi=Ta=Mr=null,qs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Lr&&r.locale!=="ko"?null:r.data;default:return null}}var Nc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fl(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Nc[t.type]:r==="textarea"}function fu(t,r,a,l){Hi?Ut?Ut.push(l):Ut=[l]:Hi=l,r=_f(r,"onChange"),0<r.length&&(a=new Ti("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Oa=null,Do=null;function qh(t){Nv(t,0)}function hl(t){var r=bn(t);if(os(r))return t}function No(t,r){if(t==="change")return r}var Ri=!1;if(En){var Xt;if(En){var Da="oninput"in document;if(!Da){var Er=document.createElement("div");Er.setAttribute("oninput","return;"),Da=typeof Er.oninput=="function"}Xt=Da}else Xt=!1;Ri=Xt&&(!document.documentMode||9<document.documentMode)}function Mc(){Oa&&(Oa.detachEvent("onpropertychange",dl),Do=Oa=null)}function dl(t){if(t.propertyName==="value"&&hl(Do)){var r=[];fu(r,Do,t,vr(t)),Nr(qh,r)}}function kc(t,r,a){t==="focusin"?(Mc(),Oa=r,Do=a,Oa.attachEvent("onpropertychange",dl)):t==="focusout"&&Mc()}function Hs(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hl(Do)}function hu(t,r){if(t==="click")return hl(r)}function Na(t,r){if(t==="input"||t==="change")return hl(r)}function hs(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var cr=typeof Object.is=="function"?Object.is:hs;function f(t,r){if(cr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!dn.call(r,h)||!cr(t[h],r[h]))return!1}return!0}function p(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g(t,r){var a=p(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=p(a)}}function E(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?E(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function S(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=vt(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=vt(t.document)}return r}function A(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var O=En&&"documentMode"in document&&11>=document.documentMode,M=null,q=null,H=null,$=!1;function j(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;$||M==null||M!==vt(l)||(l=M,"selectionStart"in l&&A(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),H&&f(H,l)||(H=l,l=_f(q,"onSelect"),0<l.length&&(r=new Ti("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=M)))}function W(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var F={animationend:W("Animation","AnimationEnd"),animationiteration:W("Animation","AnimationIteration"),animationstart:W("Animation","AnimationStart"),transitionrun:W("Transition","TransitionRun"),transitionstart:W("Transition","TransitionStart"),transitioncancel:W("Transition","TransitionCancel"),transitionend:W("Transition","TransitionEnd")},Y={},Q={};En&&(Q=document.createElement("div").style,"AnimationEvent"in window||(delete F.animationend.animation,delete F.animationiteration.animation,delete F.animationstart.animation),"TransitionEvent"in window||delete F.transitionend.transition);function J(t){if(Y[t])return Y[t];if(!F[t])return t;var r=F[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Q)return Y[t]=r[a];return t}var ne=J("animationend"),ae=J("animationiteration"),fe=J("animationstart"),ge=J("transitionrun"),Ae=J("transitionstart"),De=J("transitioncancel"),we=J("transitionend"),Re=new Map,Oe="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Oe.push("scrollEnd");function Se(t,r){Re.set(t,r),Ir(r,[t])}var Ve=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Fe=[],et=0,lt=0;function Gn(){for(var t=et,r=lt=et=0;r<t;){var a=Fe[r];Fe[r++]=null;var l=Fe[r];Fe[r++]=null;var h=Fe[r];Fe[r++]=null;var m=Fe[r];if(Fe[r++]=null,l!==null&&h!==null){var T=l.pending;T===null?h.next=h:(h.next=T.next,T.next=h),l.pending=h}m!==0&&Mo(a,h,m)}}function Ze(t,r,a,l){Fe[et++]=t,Fe[et++]=r,Fe[et++]=a,Fe[et++]=l,lt|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function In(t,r,a,l){return Ze(t,r,a,l),xn(t)}function en(t,r){return Ze(t,null,null,r),xn(t)}function Mo(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&r!==null&&(h=31-Ne(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),m):null}function xn(t){if(50<Vu)throw Vu=0,Jd=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ur={};function du(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function li(t,r,a,l){return new du(t,r,a,l)}function Hh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fs(t,r){var a=t.alternate;return a===null?(a=li(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function pg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Vc(t,r,a,l,h,m){var T=0;if(l=t,typeof t=="function")Hh(t)&&(T=1);else if(typeof t=="string")T=sw(t,a,Pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case V:return t=li(31,a,r,h),t.elementType=V,t.lanes=m,t;case pe:return ko(a.children,h,m,r);case _e:T=8,h|=24;break;case ze:return t=li(12,a,r,h|2),t.elementType=ze,t.lanes=m,t;case yt:return t=li(13,a,r,h),t.elementType=yt,t.lanes=m,t;case Ge:return t=li(19,a,r,h),t.elementType=Ge,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ke:T=10;break e;case Be:T=9;break e;case Je:T=11;break e;case D:T=14;break e;case N:T=16,l=null;break e}T=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=li(T,a,r,h),r.elementType=t,r.type=l,r.lanes=m,r}function ko(t,r,a,l){return t=li(7,t,l,r),t.lanes=a,t}function Fh(t,r,a){return t=li(6,t,null,r),t.lanes=a,t}function mg(t){var r=li(18,null,null,0);return r.stateNode=t,r}function Kh(t,r,a){return r=li(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var gg=new WeakMap;function Ii(t,r){if(typeof t=="object"&&t!==null){var a=gg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:wo(r)},gg.set(t,r),r)}return{value:t,source:r,stack:wo(r)}}var pl=[],ml=0,Pc=null,pu=0,xi=[],Oi=0,Ma=null,ds=1,ps="";function Ks(t,r){pl[ml++]=pu,pl[ml++]=Pc,Pc=t,pu=r}function yg(t,r,a){xi[Oi++]=ds,xi[Oi++]=ps,xi[Oi++]=Ma,Ma=t;var l=ds;t=ps;var h=32-Ne(l)-1;l&=~(1<<h),a+=1;var m=32-Ne(r)+h;if(30<m){var T=h-h%5;m=(l&(1<<T)-1).toString(32),l>>=T,h-=T,ds=1<<32-Ne(r)+h|a<<h|l,ps=m+t}else ds=1<<m|a<<h|l,ps=t}function Gh(t){t.return!==null&&(Ks(t,1),yg(t,1,0))}function Yh(t){for(;t===Pc;)Pc=pl[--ml],pl[ml]=null,pu=pl[--ml],pl[ml]=null;for(;t===Ma;)Ma=xi[--Oi],xi[Oi]=null,ps=xi[--Oi],xi[Oi]=null,ds=xi[--Oi],xi[Oi]=null}function vg(t,r){xi[Oi++]=ds,xi[Oi++]=ps,xi[Oi++]=Ma,ds=r.id,ps=r.overflow,Ma=t}var Wn=null,$t=null,It=!1,ka=null,Di=!1,Qh=Error(s(519));function Va(t){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mu(Ii(r,t)),Qh}function _g(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Lt]=t,r[Qt]=l,a){case"dialog":bt("cancel",r),bt("close",r);break;case"iframe":case"object":case"embed":bt("load",r);break;case"video":case"audio":for(a=0;a<Lu.length;a++)bt(Lu[a],r);break;case"source":bt("error",r);break;case"img":case"image":case"link":bt("error",r),bt("load",r);break;case"details":bt("toggle",r);break;case"input":bt("invalid",r),_a(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":bt("invalid",r);break;case"textarea":bt("invalid",r),ri(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||Pv(r.textContent,a)?(l.popover!=null&&(bt("beforetoggle",r),bt("toggle",r)),l.onScroll!=null&&bt("scroll",r),l.onScrollEnd!=null&&bt("scrollend",r),l.onClick!=null&&(r.onclick=ur),r=!0):r=!1,r||Va(t,!0)}function bg(t){for(Wn=t.return;Wn;)switch(Wn.tag){case 5:case 31:case 13:Di=!1;return;case 27:case 3:Di=!0;return;default:Wn=Wn.return}}function gl(t){if(t!==Wn)return!1;if(!It)return bg(t),It=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||hp(t.type,t.memoizedProps)),a=!a),a&&$t&&Va(t),bg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));$t=Kv(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));$t=Kv(t)}else r===27?(r=$t,Xa(t.type)?(t=yp,yp=null,$t=t):$t=r):$t=Wn?Mi(t.stateNode.nextSibling):null;return!0}function Vo(){$t=Wn=null,It=!1}function Xh(){var t=ka;return t!==null&&(qr===null?qr=t:qr.push.apply(qr,t),ka=null),t}function mu(t){ka===null?ka=[t]:ka.push(t)}var $h=G(null),Po=null,Gs=null;function Pa(t,r,a){xe($h,r._currentValue),r._currentValue=a}function Ys(t){t._currentValue=$h.current,me($h)}function Jh(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Wh(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var T=h.child;m=m.firstContext;e:for(;m!==null;){var C=m;m=h;for(var U=0;U<r.length;U++)if(C.context===r[U]){m.lanes|=a,C=m.alternate,C!==null&&(C.lanes|=a),Jh(m.return,a,t),l||(T=null);break e}m=C.next}}else if(h.tag===18){if(T=h.return,T===null)throw Error(s(341));T.lanes|=a,m=T.alternate,m!==null&&(m.lanes|=a),Jh(T,a,t),T=null}else T=h.child;if(T!==null)T.return=h;else for(T=h;T!==null;){if(T===t){T=null;break}if(h=T.sibling,h!==null){h.return=T.return,T=h;break}T=T.return}h=T}}function yl(t,r,a,l){t=null;for(var h=r,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var T=h.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var C=h.type;cr(h.pendingProps.value,T.value)||(t!==null?t.push(C):t=[C])}}else if(h===mt.current){if(T=h.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(qu):t=[qu])}h=h.return}t!==null&&Wh(r,t,a,l),r.flags|=262144}function Lc(t){for(t=t.firstContext;t!==null;){if(!cr(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Lo(t){Po=t,Gs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Zn(t){return Eg(Po,t)}function Uc(t,r){return Po===null&&Lo(t),Eg(t,r)}function Eg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Gs===null){if(t===null)throw Error(s(308));Gs=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Gs=Gs.next=r;return a}var t1=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},n1=i.unstable_scheduleCallback,r1=i.unstable_NormalPriority,On={$$typeof:ke,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zh(){return{controller:new t1,data:new Map,refCount:0}}function gu(t){t.refCount--,t.refCount===0&&n1(r1,function(){t.controller.abort()})}var yu=null,ed=0,vl=0,_l=null;function i1(t,r){if(yu===null){var a=yu=[];ed=0,vl=rp(),_l={status:"pending",value:void 0,then:function(l){a.push(l)}}}return ed++,r.then(Tg,Tg),r}function Tg(){if(--ed===0&&yu!==null){_l!==null&&(_l.status="fulfilled");var t=yu;yu=null,vl=0,_l=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function s1(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var wg=le.S;le.S=function(t,r){av=qn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&i1(t,r),wg!==null&&wg(t,r)};var Uo=G(null);function td(){var t=Uo.current;return t!==null?t:Yt.pooledCache}function jc(t,r){r===null?xe(Uo,Uo.current):xe(Uo,r.pool)}function Sg(){var t=td();return t===null?null:{parent:On._currentValue,pool:t}}var bl=Error(s(460)),nd=Error(s(474)),zc=Error(s(542)),Bc={then:function(){}};function Ag(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Cg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(ur,ur),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Ig(t),t;default:if(typeof r.status=="string")r.then(ur,ur);else{if(t=Yt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Ig(t),t}throw zo=r,bl}}function jo(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(zo=a,bl):a}}var zo=null;function Rg(){if(zo===null)throw Error(s(459));var t=zo;return zo=null,t}function Ig(t){if(t===bl||t===zc)throw Error(s(483))}var El=null,vu=0;function qc(t){var r=vu;return vu+=1,El===null&&(El=[]),Cg(El,t,r)}function _u(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Hc(t,r){throw r.$$typeof===k?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function xg(t){function r(ee,K){if(t){var ie=ee.deletions;ie===null?(ee.deletions=[K],ee.flags|=16):ie.push(K)}}function a(ee,K){if(!t)return null;for(;K!==null;)r(ee,K),K=K.sibling;return null}function l(ee){for(var K=new Map;ee!==null;)ee.key!==null?K.set(ee.key,ee):K.set(ee.index,ee),ee=ee.sibling;return K}function h(ee,K){return ee=Fs(ee,K),ee.index=0,ee.sibling=null,ee}function m(ee,K,ie){return ee.index=ie,t?(ie=ee.alternate,ie!==null?(ie=ie.index,ie<K?(ee.flags|=67108866,K):ie):(ee.flags|=67108866,K)):(ee.flags|=1048576,K)}function T(ee){return t&&ee.alternate===null&&(ee.flags|=67108866),ee}function C(ee,K,ie,de){return K===null||K.tag!==6?(K=Fh(ie,ee.mode,de),K.return=ee,K):(K=h(K,ie),K.return=ee,K)}function U(ee,K,ie,de){var Ke=ie.type;return Ke===pe?he(ee,K,ie.props.children,de,ie.key):K!==null&&(K.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===N&&jo(Ke)===K.type)?(K=h(K,ie.props),_u(K,ie),K.return=ee,K):(K=Vc(ie.type,ie.key,ie.props,null,ee.mode,de),_u(K,ie),K.return=ee,K)}function se(ee,K,ie,de){return K===null||K.tag!==4||K.stateNode.containerInfo!==ie.containerInfo||K.stateNode.implementation!==ie.implementation?(K=Kh(ie,ee.mode,de),K.return=ee,K):(K=h(K,ie.children||[]),K.return=ee,K)}function he(ee,K,ie,de,Ke){return K===null||K.tag!==7?(K=ko(ie,ee.mode,de,Ke),K.return=ee,K):(K=h(K,ie),K.return=ee,K)}function ye(ee,K,ie){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Fh(""+K,ee.mode,ie),K.return=ee,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case X:return ie=Vc(K.type,K.key,K.props,null,ee.mode,ie),_u(ie,K),ie.return=ee,ie;case re:return K=Kh(K,ee.mode,ie),K.return=ee,K;case N:return K=jo(K),ye(ee,K,ie)}if(Gt(K)||Z(K))return K=ko(K,ee.mode,ie,null),K.return=ee,K;if(typeof K.then=="function")return ye(ee,qc(K),ie);if(K.$$typeof===ke)return ye(ee,Uc(ee,K),ie);Hc(ee,K)}return null}function oe(ee,K,ie,de){var Ke=K!==null?K.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Ke!==null?null:C(ee,K,""+ie,de);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case X:return ie.key===Ke?U(ee,K,ie,de):null;case re:return ie.key===Ke?se(ee,K,ie,de):null;case N:return ie=jo(ie),oe(ee,K,ie,de)}if(Gt(ie)||Z(ie))return Ke!==null?null:he(ee,K,ie,de,null);if(typeof ie.then=="function")return oe(ee,K,qc(ie),de);if(ie.$$typeof===ke)return oe(ee,K,Uc(ee,ie),de);Hc(ee,ie)}return null}function ce(ee,K,ie,de,Ke){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return ee=ee.get(ie)||null,C(K,ee,""+de,Ke);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case X:return ee=ee.get(de.key===null?ie:de.key)||null,U(K,ee,de,Ke);case re:return ee=ee.get(de.key===null?ie:de.key)||null,se(K,ee,de,Ke);case N:return de=jo(de),ce(ee,K,ie,de,Ke)}if(Gt(de)||Z(de))return ee=ee.get(ie)||null,he(K,ee,de,Ke,null);if(typeof de.then=="function")return ce(ee,K,ie,qc(de),Ke);if(de.$$typeof===ke)return ce(ee,K,ie,Uc(K,de),Ke);Hc(K,de)}return null}function je(ee,K,ie,de){for(var Ke=null,Nt=null,qe=K,ct=K=0,Tt=null;qe!==null&&ct<ie.length;ct++){qe.index>ct?(Tt=qe,qe=null):Tt=qe.sibling;var Mt=oe(ee,qe,ie[ct],de);if(Mt===null){qe===null&&(qe=Tt);break}t&&qe&&Mt.alternate===null&&r(ee,qe),K=m(Mt,K,ct),Nt===null?Ke=Mt:Nt.sibling=Mt,Nt=Mt,qe=Tt}if(ct===ie.length)return a(ee,qe),It&&Ks(ee,ct),Ke;if(qe===null){for(;ct<ie.length;ct++)qe=ye(ee,ie[ct],de),qe!==null&&(K=m(qe,K,ct),Nt===null?Ke=qe:Nt.sibling=qe,Nt=qe);return It&&Ks(ee,ct),Ke}for(qe=l(qe);ct<ie.length;ct++)Tt=ce(qe,ee,ct,ie[ct],de),Tt!==null&&(t&&Tt.alternate!==null&&qe.delete(Tt.key===null?ct:Tt.key),K=m(Tt,K,ct),Nt===null?Ke=Tt:Nt.sibling=Tt,Nt=Tt);return t&&qe.forEach(function(eo){return r(ee,eo)}),It&&Ks(ee,ct),Ke}function Xe(ee,K,ie,de){if(ie==null)throw Error(s(151));for(var Ke=null,Nt=null,qe=K,ct=K=0,Tt=null,Mt=ie.next();qe!==null&&!Mt.done;ct++,Mt=ie.next()){qe.index>ct?(Tt=qe,qe=null):Tt=qe.sibling;var eo=oe(ee,qe,Mt.value,de);if(eo===null){qe===null&&(qe=Tt);break}t&&qe&&eo.alternate===null&&r(ee,qe),K=m(eo,K,ct),Nt===null?Ke=eo:Nt.sibling=eo,Nt=eo,qe=Tt}if(Mt.done)return a(ee,qe),It&&Ks(ee,ct),Ke;if(qe===null){for(;!Mt.done;ct++,Mt=ie.next())Mt=ye(ee,Mt.value,de),Mt!==null&&(K=m(Mt,K,ct),Nt===null?Ke=Mt:Nt.sibling=Mt,Nt=Mt);return It&&Ks(ee,ct),Ke}for(qe=l(qe);!Mt.done;ct++,Mt=ie.next())Mt=ce(qe,ee,ct,Mt.value,de),Mt!==null&&(t&&Mt.alternate!==null&&qe.delete(Mt.key===null?ct:Mt.key),K=m(Mt,K,ct),Nt===null?Ke=Mt:Nt.sibling=Mt,Nt=Mt);return t&&qe.forEach(function(gw){return r(ee,gw)}),It&&Ks(ee,ct),Ke}function Kt(ee,K,ie,de){if(typeof ie=="object"&&ie!==null&&ie.type===pe&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case X:e:{for(var Ke=ie.key;K!==null;){if(K.key===Ke){if(Ke=ie.type,Ke===pe){if(K.tag===7){a(ee,K.sibling),de=h(K,ie.props.children),de.return=ee,ee=de;break e}}else if(K.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===N&&jo(Ke)===K.type){a(ee,K.sibling),de=h(K,ie.props),_u(de,ie),de.return=ee,ee=de;break e}a(ee,K);break}else r(ee,K);K=K.sibling}ie.type===pe?(de=ko(ie.props.children,ee.mode,de,ie.key),de.return=ee,ee=de):(de=Vc(ie.type,ie.key,ie.props,null,ee.mode,de),_u(de,ie),de.return=ee,ee=de)}return T(ee);case re:e:{for(Ke=ie.key;K!==null;){if(K.key===Ke)if(K.tag===4&&K.stateNode.containerInfo===ie.containerInfo&&K.stateNode.implementation===ie.implementation){a(ee,K.sibling),de=h(K,ie.children||[]),de.return=ee,ee=de;break e}else{a(ee,K);break}else r(ee,K);K=K.sibling}de=Kh(ie,ee.mode,de),de.return=ee,ee=de}return T(ee);case N:return ie=jo(ie),Kt(ee,K,ie,de)}if(Gt(ie))return je(ee,K,ie,de);if(Z(ie)){if(Ke=Z(ie),typeof Ke!="function")throw Error(s(150));return ie=Ke.call(ie),Xe(ee,K,ie,de)}if(typeof ie.then=="function")return Kt(ee,K,qc(ie),de);if(ie.$$typeof===ke)return Kt(ee,K,Uc(ee,ie),de);Hc(ee,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,K!==null&&K.tag===6?(a(ee,K.sibling),de=h(K,ie),de.return=ee,ee=de):(a(ee,K),de=Fh(ie,ee.mode,de),de.return=ee,ee=de),T(ee)):a(ee,K)}return function(ee,K,ie,de){try{vu=0;var Ke=Kt(ee,K,ie,de);return El=null,Ke}catch(qe){if(qe===bl||qe===zc)throw qe;var Nt=li(29,qe,null,ee.mode);return Nt.lanes=de,Nt.return=ee,Nt}finally{}}}var Bo=xg(!0),Og=xg(!1),La=!1;function rd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function id(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ua(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ja(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(kt&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=xn(t),Mo(t,null,a),r}return Ze(t,l,r,a),xn(t)}function bu(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Vt(t,a)}}function sd(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=T:m=m.next=T,a=a.next}while(a!==null);m===null?h=m=r:m=m.next=r}else h=m=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var ad=!1;function Eu(){if(ad){var t=_l;if(t!==null)throw t}}function Tu(t,r,a,l){ad=!1;var h=t.updateQueue;La=!1;var m=h.firstBaseUpdate,T=h.lastBaseUpdate,C=h.shared.pending;if(C!==null){h.shared.pending=null;var U=C,se=U.next;U.next=null,T===null?m=se:T.next=se,T=U;var he=t.alternate;he!==null&&(he=he.updateQueue,C=he.lastBaseUpdate,C!==T&&(C===null?he.firstBaseUpdate=se:C.next=se,he.lastBaseUpdate=U))}if(m!==null){var ye=h.baseState;T=0,he=se=U=null,C=m;do{var oe=C.lane&-536870913,ce=oe!==C.lane;if(ce?(Et&oe)===oe:(l&oe)===oe){oe!==0&&oe===vl&&(ad=!0),he!==null&&(he=he.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var je=t,Xe=C;oe=r;var Kt=a;switch(Xe.tag){case 1:if(je=Xe.payload,typeof je=="function"){ye=je.call(Kt,ye,oe);break e}ye=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Xe.payload,oe=typeof je=="function"?je.call(Kt,ye,oe):je,oe==null)break e;ye=I({},ye,oe);break e;case 2:La=!0}}oe=C.callback,oe!==null&&(t.flags|=64,ce&&(t.flags|=8192),ce=h.callbacks,ce===null?h.callbacks=[oe]:ce.push(oe))}else ce={lane:oe,tag:C.tag,payload:C.payload,callback:C.callback,next:null},he===null?(se=he=ce,U=ye):he=he.next=ce,T|=oe;if(C=C.next,C===null){if(C=h.shared.pending,C===null)break;ce=C,C=ce.next,ce.next=null,h.lastBaseUpdate=ce,h.shared.pending=null}}while(!0);he===null&&(U=ye),h.baseState=U,h.firstBaseUpdate=se,h.lastBaseUpdate=he,m===null&&(h.shared.lanes=0),Fa|=T,t.lanes=T,t.memoizedState=ye}}function Dg(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function Ng(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Dg(a[t],r)}var Tl=G(null),Fc=G(0);function Mg(t,r){t=na,xe(Fc,t),xe(Tl,r),na=t|r.baseLanes}function od(){xe(Fc,na),xe(Tl,Tl.current)}function ld(){na=Fc.current,me(Tl),me(Fc)}var ui=G(null),Ni=null;function za(t){var r=t.alternate;xe(wn,wn.current&1),xe(ui,t),Ni===null&&(r===null||Tl.current!==null||r.memoizedState!==null)&&(Ni=t)}function ud(t){xe(wn,wn.current),xe(ui,t),Ni===null&&(Ni=t)}function kg(t){t.tag===22?(xe(wn,wn.current),xe(ui,t),Ni===null&&(Ni=t)):Ba()}function Ba(){xe(wn,wn.current),xe(ui,ui.current)}function ci(t){me(ui),Ni===t&&(Ni=null),me(wn)}var wn=G(0);function Kc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||mp(a)||gp(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Qs=0,ut=null,Ht=null,Dn=null,Gc=!1,wl=!1,qo=!1,Yc=0,wu=0,Sl=null,a1=0;function mn(){throw Error(s(321))}function cd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!cr(t[a],r[a]))return!1;return!0}function fd(t,r,a,l,h,m){return Qs=m,ut=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,le.H=t===null||t.memoizedState===null?yy:Cd,qo=!1,m=a(l,h),qo=!1,wl&&(m=Pg(r,a,l,h)),Vg(t),m}function Vg(t){le.H=Cu;var r=Ht!==null&&Ht.next!==null;if(Qs=0,Dn=Ht=ut=null,Gc=!1,wu=0,Sl=null,r)throw Error(s(300));t===null||Nn||(t=t.dependencies,t!==null&&Lc(t)&&(Nn=!0))}function Pg(t,r,a,l){ut=t;var h=0;do{if(wl&&(Sl=null),wu=0,wl=!1,25<=h)throw Error(s(301));if(h+=1,Dn=Ht=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}le.H=vy,m=r(a,l)}while(wl);return m}function o1(){var t=le.H,r=t.useState()[0];return r=typeof r.then=="function"?Su(r):r,t=t.useState()[0],(Ht!==null?Ht.memoizedState:null)!==t&&(ut.flags|=1024),r}function hd(){var t=Yc!==0;return Yc=0,t}function dd(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function pd(t){if(Gc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Gc=!1}Qs=0,Dn=Ht=ut=null,wl=!1,wu=Yc=0,Sl=null}function Tr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?ut.memoizedState=Dn=t:Dn=Dn.next=t,Dn}function Sn(){if(Ht===null){var t=ut.alternate;t=t!==null?t.memoizedState:null}else t=Ht.next;var r=Dn===null?ut.memoizedState:Dn.next;if(r!==null)Dn=r,Ht=t;else{if(t===null)throw ut.alternate===null?Error(s(467)):Error(s(310));Ht=t,t={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Dn===null?ut.memoizedState=Dn=t:Dn=Dn.next=t}return Dn}function Qc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Su(t){var r=wu;return wu+=1,Sl===null&&(Sl=[]),t=Cg(Sl,t,r),r=ut,(Dn===null?r.memoizedState:Dn.next)===null&&(r=r.alternate,le.H=r===null||r.memoizedState===null?yy:Cd),t}function Xc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Su(t);if(t.$$typeof===ke)return Zn(t)}throw Error(s(438,String(t)))}function md(t){var r=null,a=ut.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=ut.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Qc(),ut.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=B;return r.index++,a}function Xs(t,r){return typeof r=="function"?r(t):r}function $c(t){var r=Sn();return gd(r,Ht,t)}function gd(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var T=h.next;h.next=m.next,m.next=T}r.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{r=h.next;var C=T=null,U=null,se=r,he=!1;do{var ye=se.lane&-536870913;if(ye!==se.lane?(Et&ye)===ye:(Qs&ye)===ye){var oe=se.revertLane;if(oe===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),ye===vl&&(he=!0);else if((Qs&oe)===oe){se=se.next,oe===vl&&(he=!0);continue}else ye={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},U===null?(C=U=ye,T=m):U=U.next=ye,ut.lanes|=oe,Fa|=oe;ye=se.action,qo&&a(m,ye),m=se.hasEagerState?se.eagerState:a(m,ye)}else oe={lane:ye,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},U===null?(C=U=oe,T=m):U=U.next=oe,ut.lanes|=ye,Fa|=ye;se=se.next}while(se!==null&&se!==r);if(U===null?T=m:U.next=C,!cr(m,t.memoizedState)&&(Nn=!0,he&&(a=_l,a!==null)))throw a;t.memoizedState=m,t.baseState=T,t.baseQueue=U,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function yd(t){var r=Sn(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=r.memoizedState;if(h!==null){a.pending=null;var T=h=h.next;do m=t(m,T.action),T=T.next;while(T!==h);cr(m,r.memoizedState)||(Nn=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,l]}function Lg(t,r,a){var l=ut,h=Sn(),m=It;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=r();var T=!cr((Ht||h).memoizedState,a);if(T&&(h.memoizedState=a,Nn=!0),h=h.queue,bd(zg.bind(null,l,h,t),[t]),h.getSnapshot!==r||T||Dn!==null&&Dn.memoizedState.tag&1){if(l.flags|=2048,Al(9,{destroy:void 0},jg.bind(null,l,h,a,r),null),Yt===null)throw Error(s(349));m||(Qs&127)!==0||Ug(l,r,a)}return a}function Ug(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=ut.updateQueue,r===null?(r=Qc(),ut.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function jg(t,r,a,l){r.value=a,r.getSnapshot=l,Bg(r)&&qg(t)}function zg(t,r,a){return a(function(){Bg(r)&&qg(t)})}function Bg(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!cr(t,a)}catch{return!0}}function qg(t){var r=en(t,2);r!==null&&Hr(r,t,2)}function vd(t){var r=Tr();if(typeof t=="function"){var a=t;if(t=a(),qo){_n(!0);try{a()}finally{_n(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:t},r}function Hg(t,r,a,l){return t.baseState=a,gd(t,Ht,typeof l=="function"?l:Xs)}function l1(t,r,a,l,h){if(Zc(t))throw Error(s(485));if(t=r.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){m.listeners.push(T)}};le.T!==null?a(!0):m.isTransition=!1,l(m),a=r.pending,a===null?(m.next=r.pending=m,Fg(r,m)):(m.next=a.next,r.pending=a.next=m)}}function Fg(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var m=le.T,T={};le.T=T;try{var C=a(h,l),U=le.S;U!==null&&U(T,C),Kg(t,r,C)}catch(se){_d(t,r,se)}finally{m!==null&&T.types!==null&&(m.types=T.types),le.T=m}}else try{m=a(h,l),Kg(t,r,m)}catch(se){_d(t,r,se)}}function Kg(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Gg(t,r,l)},function(l){return _d(t,r,l)}):Gg(t,r,a)}function Gg(t,r,a){r.status="fulfilled",r.value=a,Yg(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Fg(t,a)))}function _d(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Yg(r),r=r.next;while(r!==l)}t.action=null}function Yg(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Qg(t,r){return r}function Xg(t,r){if(It){var a=Yt.formState;if(a!==null){e:{var l=ut;if(It){if($t){t:{for(var h=$t,m=Di;h.nodeType!==8;){if(!m){h=null;break t}if(h=Mi(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){$t=Mi(h.nextSibling),l=h.data==="F!";break e}}Va(l)}l=!1}l&&(r=a[0])}}return a=Tr(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qg,lastRenderedState:r},a.queue=l,a=py.bind(null,ut,l),l.dispatch=a,l=vd(!1),m=Ad.bind(null,ut,!1,l.queue),l=Tr(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=l1.bind(null,ut,h,m,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function $g(t){var r=Sn();return Jg(r,Ht,t)}function Jg(t,r,a){if(r=gd(t,r,Qg)[0],t=$c(Xs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Su(r)}catch(T){throw T===bl?zc:T}else l=r;r=Sn();var h=r.queue,m=h.dispatch;return a!==r.memoizedState&&(ut.flags|=2048,Al(9,{destroy:void 0},u1.bind(null,h,a),null)),[l,m,t]}function u1(t,r){t.action=r}function Wg(t){var r=Sn(),a=Ht;if(a!==null)return Jg(r,a,t);Sn(),r=r.memoizedState,a=Sn();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Al(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=ut.updateQueue,r===null&&(r=Qc(),ut.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function Zg(){return Sn().memoizedState}function Jc(t,r,a,l){var h=Tr();ut.flags|=t,h.memoizedState=Al(1|r,{destroy:void 0},a,l===void 0?null:l)}function Wc(t,r,a,l){var h=Sn();l=l===void 0?null:l;var m=h.memoizedState.inst;Ht!==null&&l!==null&&cd(l,Ht.memoizedState.deps)?h.memoizedState=Al(r,m,a,l):(ut.flags|=t,h.memoizedState=Al(1|r,m,a,l))}function ey(t,r){Jc(8390656,8,t,r)}function bd(t,r){Wc(2048,8,t,r)}function c1(t){ut.flags|=4;var r=ut.updateQueue;if(r===null)r=Qc(),ut.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function ty(t){var r=Sn().memoizedState;return c1({ref:r,nextImpl:t}),function(){if((kt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function ny(t,r){return Wc(4,2,t,r)}function ry(t,r){return Wc(4,4,t,r)}function iy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function sy(t,r,a){a=a!=null?a.concat([t]):null,Wc(4,4,iy.bind(null,r,t),a)}function Ed(){}function ay(t,r){var a=Sn();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&cd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function oy(t,r){var a=Sn();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&cd(r,l[1]))return l[0];if(l=t(),qo){_n(!0);try{t()}finally{_n(!1)}}return a.memoizedState=[l,r],l}function Td(t,r,a){return a===void 0||(Qs&1073741824)!==0&&(Et&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=lv(),ut.lanes|=t,Fa|=t,a)}function ly(t,r,a,l){return cr(a,r)?a:Tl.current!==null?(t=Td(t,a,l),cr(t,r)||(Nn=!0),t):(Qs&42)===0||(Qs&1073741824)!==0&&(Et&261930)===0?(Nn=!0,t.memoizedState=a):(t=lv(),ut.lanes|=t,Fa|=t,r)}function uy(t,r,a,l,h){var m=be.p;be.p=m!==0&&8>m?m:8;var T=le.T,C={};le.T=C,Ad(t,!1,r,a);try{var U=h(),se=le.S;if(se!==null&&se(C,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var he=s1(U,l);Au(t,r,he,di(t))}else Au(t,r,l,di(t))}catch(ye){Au(t,r,{then:function(){},status:"rejected",reason:ye},di())}finally{be.p=m,T!==null&&C.types!==null&&(T.types=C.types),le.T=T}}function f1(){}function wd(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=cy(t).queue;uy(t,h,r,Ue,a===null?f1:function(){return fy(t),a(l)})}function cy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:Ue,baseState:Ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:Ue},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function fy(t){var r=cy(t);r.next===null&&(r=t.alternate.memoizedState),Au(t,r.next.queue,{},di())}function Sd(){return Zn(qu)}function hy(){return Sn().memoizedState}function dy(){return Sn().memoizedState}function h1(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=di();t=Ua(a);var l=ja(r,t,a);l!==null&&(Hr(l,r,a),bu(l,r,a)),r={cache:Zh()},t.payload=r;return}r=r.return}}function d1(t,r,a){var l=di();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Zc(t)?my(r,a):(a=In(t,r,a,l),a!==null&&(Hr(a,t,l),gy(a,r,l)))}function py(t,r,a){var l=di();Au(t,r,a,l)}function Au(t,r,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Zc(t))my(r,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var T=r.lastRenderedState,C=m(T,a);if(h.hasEagerState=!0,h.eagerState=C,cr(C,T))return Ze(t,r,h,0),Yt===null&&Gn(),!1}catch{}finally{}if(a=In(t,r,h,l),a!==null)return Hr(a,t,l),gy(a,r,l),!0}return!1}function Ad(t,r,a,l){if(l={lane:2,revertLane:rp(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Zc(t)){if(r)throw Error(s(479))}else r=In(t,a,l,2),r!==null&&Hr(r,t,2)}function Zc(t){var r=t.alternate;return t===ut||r!==null&&r===ut}function my(t,r){wl=Gc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function gy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Vt(t,a)}}var Cu={readContext:Zn,use:Xc,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useLayoutEffect:mn,useInsertionEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useSyncExternalStore:mn,useId:mn,useHostTransitionStatus:mn,useFormState:mn,useActionState:mn,useOptimistic:mn,useMemoCache:mn,useCacheRefresh:mn};Cu.useEffectEvent=mn;var yy={readContext:Zn,use:Xc,useCallback:function(t,r){return Tr().memoizedState=[t,r===void 0?null:r],t},useContext:Zn,useEffect:ey,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Jc(4194308,4,iy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Jc(4194308,4,t,r)},useInsertionEffect:function(t,r){Jc(4,2,t,r)},useMemo:function(t,r){var a=Tr();r=r===void 0?null:r;var l=t();if(qo){_n(!0);try{t()}finally{_n(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=Tr();if(a!==void 0){var h=a(r);if(qo){_n(!0);try{a(r)}finally{_n(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=d1.bind(null,ut,t),[l.memoizedState,t]},useRef:function(t){var r=Tr();return t={current:t},r.memoizedState=t},useState:function(t){t=vd(t);var r=t.queue,a=py.bind(null,ut,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Ed,useDeferredValue:function(t,r){var a=Tr();return Td(a,t,r)},useTransition:function(){var t=vd(!1);return t=uy.bind(null,ut,t.queue,!0,!1),Tr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=ut,h=Tr();if(It){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),Yt===null)throw Error(s(349));(Et&127)!==0||Ug(l,r,a)}h.memoizedState=a;var m={value:a,getSnapshot:r};return h.queue=m,ey(zg.bind(null,l,m,t),[t]),l.flags|=2048,Al(9,{destroy:void 0},jg.bind(null,l,m,a,r),null),a},useId:function(){var t=Tr(),r=Yt.identifierPrefix;if(It){var a=ps,l=ds;a=(l&~(1<<32-Ne(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Yc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=a1++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Sd,useFormState:Xg,useActionState:Xg,useOptimistic:function(t){var r=Tr();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Ad.bind(null,ut,!0,a),a.dispatch=r,[t,r]},useMemoCache:md,useCacheRefresh:function(){return Tr().memoizedState=h1.bind(null,ut)},useEffectEvent:function(t){var r=Tr(),a={impl:t};return r.memoizedState=a,function(){if((kt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Cd={readContext:Zn,use:Xc,useCallback:ay,useContext:Zn,useEffect:bd,useImperativeHandle:sy,useInsertionEffect:ny,useLayoutEffect:ry,useMemo:oy,useReducer:$c,useRef:Zg,useState:function(){return $c(Xs)},useDebugValue:Ed,useDeferredValue:function(t,r){var a=Sn();return ly(a,Ht.memoizedState,t,r)},useTransition:function(){var t=$c(Xs)[0],r=Sn().memoizedState;return[typeof t=="boolean"?t:Su(t),r]},useSyncExternalStore:Lg,useId:hy,useHostTransitionStatus:Sd,useFormState:$g,useActionState:$g,useOptimistic:function(t,r){var a=Sn();return Hg(a,Ht,t,r)},useMemoCache:md,useCacheRefresh:dy};Cd.useEffectEvent=ty;var vy={readContext:Zn,use:Xc,useCallback:ay,useContext:Zn,useEffect:bd,useImperativeHandle:sy,useInsertionEffect:ny,useLayoutEffect:ry,useMemo:oy,useReducer:yd,useRef:Zg,useState:function(){return yd(Xs)},useDebugValue:Ed,useDeferredValue:function(t,r){var a=Sn();return Ht===null?Td(a,t,r):ly(a,Ht.memoizedState,t,r)},useTransition:function(){var t=yd(Xs)[0],r=Sn().memoizedState;return[typeof t=="boolean"?t:Su(t),r]},useSyncExternalStore:Lg,useId:hy,useHostTransitionStatus:Sd,useFormState:Wg,useActionState:Wg,useOptimistic:function(t,r){var a=Sn();return Ht!==null?Hg(a,Ht,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:md,useCacheRefresh:dy};vy.useEffectEvent=ty;function Rd(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:I({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Id={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=di(),h=Ua(l);h.payload=r,a!=null&&(h.callback=a),r=ja(t,h,l),r!==null&&(Hr(r,t,l),bu(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=di(),h=Ua(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=ja(t,h,l),r!==null&&(Hr(r,t,l),bu(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=di(),l=Ua(a);l.tag=2,r!=null&&(l.callback=r),r=ja(t,l,a),r!==null&&(Hr(r,t,a),bu(r,t,a))}};function _y(t,r,a,l,h,m,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,T):r.prototype&&r.prototype.isPureReactComponent?!f(a,l)||!f(h,m):!0}function by(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&Id.enqueueReplaceState(r,r.state,null)}function Ho(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=I({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Ey(t){Ve(t)}function Ty(t){console.error(t)}function wy(t){Ve(t)}function ef(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Sy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function xd(t,r,a){return a=Ua(a),a.tag=3,a.payload={element:null},a.callback=function(){ef(t,r)},a}function Ay(t){return t=Ua(t),t.tag=3,t}function Cy(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){Sy(r,a,l)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Sy(r,a,l),typeof h!="function"&&(Ka===null?Ka=new Set([this]):Ka.add(this));var C=l.stack;this.componentDidCatch(l.value,{componentStack:C!==null?C:""})})}function p1(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&yl(r,a,h,!0),a=ui.current,a!==null){switch(a.tag){case 31:case 13:return Ni===null?df():a.alternate===null&&gn===0&&(gn=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Bc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),ep(t,l,h)),!1;case 22:return a.flags|=65536,l===Bc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),ep(t,l,h)),!1}throw Error(s(435,a.tag))}return ep(t,l,h),df(),!1}if(It)return r=ui.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Qh&&(t=Error(s(422),{cause:l}),mu(Ii(t,a)))):(l!==Qh&&(r=Error(s(423),{cause:l}),mu(Ii(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Ii(l,a),h=xd(t.stateNode,l,h),sd(t,h),gn!==4&&(gn=2)),!1;var m=Error(s(520),{cause:l});if(m=Ii(m,a),ku===null?ku=[m]:ku.push(m),gn!==4&&(gn=2),r===null)return!0;l=Ii(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=xd(a.stateNode,l,t),sd(a,t),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ka===null||!Ka.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Ay(h),Cy(h,t,a,l),sd(a,h),!1}a=a.return}while(a!==null);return!1}var Od=Error(s(461)),Nn=!1;function er(t,r,a,l){r.child=t===null?Og(r,null,a,l):Bo(r,t.child,a,l)}function Ry(t,r,a,l,h){a=a.render;var m=r.ref;if("ref"in l){var T={};for(var C in l)C!=="ref"&&(T[C]=l[C])}else T=l;return Lo(r),l=fd(t,r,a,T,m,h),C=hd(),t!==null&&!Nn?(dd(t,r,h),$s(t,r,h)):(It&&C&&Gh(r),r.flags|=1,er(t,r,l,h),r.child)}function Iy(t,r,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!Hh(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,xy(t,r,m,l,h)):(t=Vc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!Ud(t,h)){var T=m.memoizedProps;if(a=a.compare,a=a!==null?a:f,a(T,l)&&t.ref===r.ref)return $s(t,r,h)}return r.flags|=1,t=Fs(m,l),t.ref=r.ref,t.return=r,r.child=t}function xy(t,r,a,l,h){if(t!==null){var m=t.memoizedProps;if(f(m,l)&&t.ref===r.ref)if(Nn=!1,r.pendingProps=l=m,Ud(t,h))(t.flags&131072)!==0&&(Nn=!0);else return r.lanes=t.lanes,$s(t,r,h)}return Dd(t,r,a,l,h)}function Oy(t,r,a,l){var h=l.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=r.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~m}else l=0,r.child=null;return Dy(t,r,m,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&jc(r,m!==null?m.cachePool:null),m!==null?Mg(r,m):od(),kg(r);else return l=r.lanes=536870912,Dy(t,r,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(jc(r,m.cachePool),Mg(r,m),Ba(),r.memoizedState=null):(t!==null&&jc(r,null),od(),Ba());return er(t,r,h,a),r.child}function Ru(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Dy(t,r,a,l,h){var m=td();return m=m===null?null:{parent:On._currentValue,pool:m},r.memoizedState={baseLanes:a,cachePool:m},t!==null&&jc(r,null),od(),kg(r),t!==null&&yl(t,r,l,!0),r.childLanes=h,null}function tf(t,r){return r=rf({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Ny(t,r,a){return Bo(r,t.child,null,a),t=tf(r,r.pendingProps),t.flags|=2,ci(r),r.memoizedState=null,t}function m1(t,r,a){var l=r.pendingProps,h=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(It){if(l.mode==="hidden")return t=tf(r,l),r.lanes=536870912,Ru(null,t);if(ud(r),(t=$t)?(t=Fv(t,Di),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ma!==null?{id:ds,overflow:ps}:null,retryLane:536870912,hydrationErrors:null},a=mg(t),a.return=r,r.child=a,Wn=r,$t=null)):t=null,t===null)throw Va(r);return r.lanes=536870912,null}return tf(r,l)}var m=t.memoizedState;if(m!==null){var T=m.dehydrated;if(ud(r),h)if(r.flags&256)r.flags&=-257,r=Ny(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(s(558));else if(Nn||yl(t,r,a,!1),h=(a&t.childLanes)!==0,Nn||h){if(l=Yt,l!==null&&(T=Zt(l,a),T!==0&&T!==m.retryLane))throw m.retryLane=T,en(t,T),Hr(l,t,T),Od;df(),r=Ny(t,r,a)}else t=m.treeContext,$t=Mi(T.nextSibling),Wn=r,It=!0,ka=null,Di=!1,t!==null&&vg(r,t),r=tf(r,l),r.flags|=4096;return r}return t=Fs(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function nf(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Dd(t,r,a,l,h){return Lo(r),a=fd(t,r,a,l,void 0,h),l=hd(),t!==null&&!Nn?(dd(t,r,h),$s(t,r,h)):(It&&l&&Gh(r),r.flags|=1,er(t,r,a,h),r.child)}function My(t,r,a,l,h,m){return Lo(r),r.updateQueue=null,a=Pg(r,l,a,h),Vg(t),l=hd(),t!==null&&!Nn?(dd(t,r,m),$s(t,r,m)):(It&&l&&Gh(r),r.flags|=1,er(t,r,a,m),r.child)}function ky(t,r,a,l,h){if(Lo(r),r.stateNode===null){var m=Ur,T=a.contextType;typeof T=="object"&&T!==null&&(m=Zn(T)),m=new a(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Id,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},rd(r),T=a.contextType,m.context=typeof T=="object"&&T!==null?Zn(T):Ur,m.state=r.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(Rd(r,a,T,l),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(T=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),T!==m.state&&Id.enqueueReplaceState(m,m.state,null),Tu(r,l,m,h),Eu(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var C=r.memoizedProps,U=Ho(a,C);m.props=U;var se=m.context,he=a.contextType;T=Ur,typeof he=="object"&&he!==null&&(T=Zn(he));var ye=a.getDerivedStateFromProps;he=typeof ye=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=r.pendingProps!==C,he||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||se!==T)&&by(r,m,l,T),La=!1;var oe=r.memoizedState;m.state=oe,Tu(r,l,m,h),Eu(),se=r.memoizedState,C||oe!==se||La?(typeof ye=="function"&&(Rd(r,a,ye,l),se=r.memoizedState),(U=La||_y(r,a,U,l,oe,se,T))?(he||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=se),m.props=l,m.state=se,m.context=T,l=U):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,id(t,r),T=r.memoizedProps,he=Ho(a,T),m.props=he,ye=r.pendingProps,oe=m.context,se=a.contextType,U=Ur,typeof se=="object"&&se!==null&&(U=Zn(se)),C=a.getDerivedStateFromProps,(se=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T!==ye||oe!==U)&&by(r,m,l,U),La=!1,oe=r.memoizedState,m.state=oe,Tu(r,l,m,h),Eu();var ce=r.memoizedState;T!==ye||oe!==ce||La||t!==null&&t.dependencies!==null&&Lc(t.dependencies)?(typeof C=="function"&&(Rd(r,a,C,l),ce=r.memoizedState),(he=La||_y(r,a,he,l,oe,ce,U)||t!==null&&t.dependencies!==null&&Lc(t.dependencies))?(se||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ce,U),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ce,U)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||T===t.memoizedProps&&oe===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&oe===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=ce),m.props=l,m.state=ce,m.context=U,l=he):(typeof m.componentDidUpdate!="function"||T===t.memoizedProps&&oe===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&oe===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,nf(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=Bo(r,t.child,null,h),r.child=Bo(r,null,a,h)):er(t,r,a,h),r.memoizedState=m.state,t=r.child):t=$s(t,r,h),t}function Vy(t,r,a,l){return Vo(),r.flags|=256,er(t,r,a,l),r.child}var Nd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Md(t){return{baseLanes:t,cachePool:Sg()}}function kd(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=hi),t}function Py(t,r,a){var l=r.pendingProps,h=!1,m=(r.flags&128)!==0,T;if((T=m)||(T=t!==null&&t.memoizedState===null?!1:(wn.current&2)!==0),T&&(h=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,t===null){if(It){if(h?za(r):Ba(),(t=$t)?(t=Fv(t,Di),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ma!==null?{id:ds,overflow:ps}:null,retryLane:536870912,hydrationErrors:null},a=mg(t),a.return=r,r.child=a,Wn=r,$t=null)):t=null,t===null)throw Va(r);return gp(t)?r.lanes=32:r.lanes=536870912,null}var C=l.children;return l=l.fallback,h?(Ba(),h=r.mode,C=rf({mode:"hidden",children:C},h),l=ko(l,h,a,null),C.return=r,l.return=r,C.sibling=l,r.child=C,l=r.child,l.memoizedState=Md(a),l.childLanes=kd(t,T,a),r.memoizedState=Nd,Ru(null,l)):(za(r),Vd(r,C))}var U=t.memoizedState;if(U!==null&&(C=U.dehydrated,C!==null)){if(m)r.flags&256?(za(r),r.flags&=-257,r=Pd(t,r,a)):r.memoizedState!==null?(Ba(),r.child=t.child,r.flags|=128,r=null):(Ba(),C=l.fallback,h=r.mode,l=rf({mode:"visible",children:l.children},h),C=ko(C,h,a,null),C.flags|=2,l.return=r,C.return=r,l.sibling=C,r.child=l,Bo(r,t.child,null,a),l=r.child,l.memoizedState=Md(a),l.childLanes=kd(t,T,a),r.memoizedState=Nd,r=Ru(null,l));else if(za(r),gp(C)){if(T=C.nextSibling&&C.nextSibling.dataset,T)var se=T.dgst;T=se,l=Error(s(419)),l.stack="",l.digest=T,mu({value:l,source:null,stack:null}),r=Pd(t,r,a)}else if(Nn||yl(t,r,a,!1),T=(a&t.childLanes)!==0,Nn||T){if(T=Yt,T!==null&&(l=Zt(T,a),l!==0&&l!==U.retryLane))throw U.retryLane=l,en(t,l),Hr(T,t,l),Od;mp(C)||df(),r=Pd(t,r,a)}else mp(C)?(r.flags|=192,r.child=t.child,r=null):(t=U.treeContext,$t=Mi(C.nextSibling),Wn=r,It=!0,ka=null,Di=!1,t!==null&&vg(r,t),r=Vd(r,l.children),r.flags|=4096);return r}return h?(Ba(),C=l.fallback,h=r.mode,U=t.child,se=U.sibling,l=Fs(U,{mode:"hidden",children:l.children}),l.subtreeFlags=U.subtreeFlags&65011712,se!==null?C=Fs(se,C):(C=ko(C,h,a,null),C.flags|=2),C.return=r,l.return=r,l.sibling=C,r.child=l,Ru(null,l),l=r.child,C=t.child.memoizedState,C===null?C=Md(a):(h=C.cachePool,h!==null?(U=On._currentValue,h=h.parent!==U?{parent:U,pool:U}:h):h=Sg(),C={baseLanes:C.baseLanes|a,cachePool:h}),l.memoizedState=C,l.childLanes=kd(t,T,a),r.memoizedState=Nd,Ru(t.child,l)):(za(r),a=t.child,t=a.sibling,a=Fs(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(T=r.deletions,T===null?(r.deletions=[t],r.flags|=16):T.push(t)),r.child=a,r.memoizedState=null,a)}function Vd(t,r){return r=rf({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function rf(t,r){return t=li(22,t,null,r),t.lanes=0,t}function Pd(t,r,a){return Bo(r,t.child,null,a),t=Vd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Ly(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Jh(t.return,r,a)}function Ld(t,r,a,l,h,m){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:m}:(T.isBackwards=r,T.rendering=null,T.renderingStartTime=0,T.last=l,T.tail=a,T.tailMode=h,T.treeForkCount=m)}function Uy(t,r,a){var l=r.pendingProps,h=l.revealOrder,m=l.tail;l=l.children;var T=wn.current,C=(T&2)!==0;if(C?(T=T&1|2,r.flags|=128):T&=1,xe(wn,T),er(t,r,l,a),l=It?pu:0,!C&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ly(t,a,r);else if(t.tag===19)Ly(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&Kc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Ld(r,!1,h,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Kc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Ld(r,!0,a,null,m,l);break;case"together":Ld(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function $s(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Fa|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(yl(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=Fs(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Fs(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Ud(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Lc(t)))}function g1(t,r,a){switch(r.tag){case 3:yn(r,r.stateNode.containerInfo),Pa(r,On,t.memoizedState.cache),Vo();break;case 27:case 5:ns(r);break;case 4:yn(r,r.stateNode.containerInfo);break;case 10:Pa(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,ud(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(za(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Py(t,r,a):(za(r),t=$s(t,r,a),t!==null?t.sibling:null);za(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(yl(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return Uy(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),xe(wn,wn.current),l)break;return null;case 22:return r.lanes=0,Oy(t,r,a,r.pendingProps);case 24:Pa(r,On,t.memoizedState.cache)}return $s(t,r,a)}function jy(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Nn=!0;else{if(!Ud(t,a)&&(r.flags&128)===0)return Nn=!1,g1(t,r,a);Nn=(t.flags&131072)!==0}else Nn=!1,It&&(r.flags&1048576)!==0&&yg(r,pu,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=jo(r.elementType),r.type=t,typeof t=="function")Hh(t)?(l=Ho(t,l),r.tag=1,r=ky(null,r,t,l,a)):(r.tag=0,r=Dd(null,r,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===Je){r.tag=11,r=Ry(null,r,t,l,a);break e}else if(h===D){r.tag=14,r=Iy(null,r,t,l,a);break e}}throw r=qt(t)||t,Error(s(306,r,""))}}return r;case 0:return Dd(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=Ho(l,r.pendingProps),ky(t,r,l,h,a);case 3:e:{if(yn(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var m=r.memoizedState;h=m.element,id(t,r),Tu(r,l,null,a);var T=r.memoizedState;if(l=T.cache,Pa(r,On,l),l!==m.cache&&Wh(r,[On],a,!0),Eu(),l=T.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Vy(t,r,l,a);break e}else if(l!==h){h=Ii(Error(s(424)),r),mu(h),r=Vy(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for($t=Mi(t.firstChild),Wn=r,It=!0,ka=null,Di=!0,a=Og(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Vo(),l===h){r=$s(t,r,a);break e}er(t,r,l,a)}r=r.child}return r;case 26:return nf(t,r),t===null?(a=$v(r.type,null,r.pendingProps,null))?r.memoizedState=a:It||(a=r.type,t=r.pendingProps,l=bf(We.current).createElement(a),l[Lt]=r,l[Qt]=t,tr(l,a,t),an(l),r.stateNode=l):r.memoizedState=$v(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return ns(r),t===null&&It&&(l=r.stateNode=Yv(r.type,r.pendingProps,We.current),Wn=r,Di=!0,h=$t,Xa(r.type)?(yp=h,$t=Mi(l.firstChild)):$t=h),er(t,r,r.pendingProps.children,a),nf(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&It&&((h=l=$t)&&(l=G1(l,r.type,r.pendingProps,Di),l!==null?(r.stateNode=l,Wn=r,$t=Mi(l.firstChild),Di=!1,h=!0):h=!1),h||Va(r)),ns(r),h=r.type,m=r.pendingProps,T=t!==null?t.memoizedProps:null,l=m.children,hp(h,m)?l=null:T!==null&&hp(h,T)&&(r.flags|=32),r.memoizedState!==null&&(h=fd(t,r,o1,null,null,a),qu._currentValue=h),nf(t,r),er(t,r,l,a),r.child;case 6:return t===null&&It&&((t=a=$t)&&(a=Y1(a,r.pendingProps,Di),a!==null?(r.stateNode=a,Wn=r,$t=null,t=!0):t=!1),t||Va(r)),null;case 13:return Py(t,r,a);case 4:return yn(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Bo(r,null,l,a):er(t,r,l,a),r.child;case 11:return Ry(t,r,r.type,r.pendingProps,a);case 7:return er(t,r,r.pendingProps,a),r.child;case 8:return er(t,r,r.pendingProps.children,a),r.child;case 12:return er(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Pa(r,r.type,l.value),er(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,Lo(r),h=Zn(h),l=l(h),r.flags|=1,er(t,r,l,a),r.child;case 14:return Iy(t,r,r.type,r.pendingProps,a);case 15:return xy(t,r,r.type,r.pendingProps,a);case 19:return Uy(t,r,a);case 31:return m1(t,r,a);case 22:return Oy(t,r,a,r.pendingProps);case 24:return Lo(r),l=Zn(On),t===null?(h=td(),h===null&&(h=Yt,m=Zh(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),r.memoizedState={parent:l,cache:h},rd(r),Pa(r,On,h)):((t.lanes&a)!==0&&(id(t,r),Tu(r,null,null,a),Eu()),h=t.memoizedState,m=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Pa(r,On,l)):(l=m.cache,Pa(r,On,l),l!==h.cache&&Wh(r,[On],a,!0))),er(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Js(t){t.flags|=4}function jd(t,r,a,l,h){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(hv())t.flags|=8192;else throw zo=Bc,nd}else t.flags&=-16777217}function zy(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!t_(r))if(hv())t.flags|=8192;else throw zo=Bc,nd}function sf(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?ll():536870912,t.lanes|=r,xl|=r)}function Iu(t,r){if(!It)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Jt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function y1(t,r,a){var l=r.pendingProps;switch(Yh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(r),null;case 1:return Jt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Ys(On),Me(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(gl(r)?Js(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Xh())),Jt(r),null;case 26:var h=r.type,m=r.memoizedState;return t===null?(Js(r),m!==null?(Jt(r),zy(r,m)):(Jt(r),jd(r,h,null,l,a))):m?m!==t.memoizedState?(Js(r),Jt(r),zy(r,m)):(Jt(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&Js(r),Jt(r),jd(r,h,t,l,a)),null;case 27:if(zi(r),a=We.current,h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Js(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Jt(r),null}t=Pe.current,gl(r)?_g(r):(t=Yv(h,l,a),r.stateNode=t,Js(r))}return Jt(r),null;case 5:if(zi(r),h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Js(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Jt(r),null}if(m=Pe.current,gl(r))_g(r);else{var T=bf(We.current);switch(m){case 1:m=T.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=T.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=T.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=T.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=T.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?T.createElement("select",{is:l.is}):T.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?T.createElement(h,{is:l.is}):T.createElement(h)}}m[Lt]=r,m[Qt]=l;e:for(T=r.child;T!==null;){if(T.tag===5||T.tag===6)m.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===r)break e;for(;T.sibling===null;){if(T.return===null||T.return===r)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}r.stateNode=m;e:switch(tr(m,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Js(r)}}return Jt(r),jd(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Js(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=We.current,gl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=Wn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Lt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Pv(t.nodeValue,a)),t||Va(r,!0)}else t=bf(t).createTextNode(l),t[Lt]=r,r.stateNode=t}return Jt(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=gl(r),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Lt]=r}else Vo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Jt(r),t=!1}else a=Xh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(ci(r),r):(ci(r),null);if((r.flags&128)!==0)throw Error(s(558))}return Jt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=gl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Lt]=r}else Vo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Jt(r),h=!1}else h=Xh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(ci(r),r):(ci(r),null)}return ci(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),sf(r,r.updateQueue),Jt(r),null);case 4:return Me(),t===null&&op(r.stateNode.containerInfo),Jt(r),null;case 10:return Ys(r.type),Jt(r),null;case 19:if(me(wn),l=r.memoizedState,l===null)return Jt(r),null;if(h=(r.flags&128)!==0,m=l.rendering,m===null)if(h)Iu(l,!1);else{if(gn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=Kc(t),m!==null){for(r.flags|=128,Iu(l,!1),t=m.updateQueue,r.updateQueue=t,sf(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)pg(a,t),a=a.sibling;return xe(wn,wn.current&1|2),It&&Ks(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&qn()>cf&&(r.flags|=128,h=!0,Iu(l,!1),r.lanes=4194304)}else{if(!h)if(t=Kc(m),t!==null){if(r.flags|=128,h=!0,t=t.updateQueue,r.updateQueue=t,sf(r,t),Iu(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!It)return Jt(r),null}else 2*qn()-l.renderingStartTime>cf&&a!==536870912&&(r.flags|=128,h=!0,Iu(l,!1),r.lanes=4194304);l.isBackwards?(m.sibling=r.child,r.child=m):(t=l.last,t!==null?t.sibling=m:r.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=qn(),t.sibling=null,a=wn.current,xe(wn,h?a&1|2:a&1),It&&Ks(r,l.treeForkCount),t):(Jt(r),null);case 22:case 23:return ci(r),ld(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(Jt(r),r.subtreeFlags&6&&(r.flags|=8192)):Jt(r),a=r.updateQueue,a!==null&&sf(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&me(Uo),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Ys(On),Jt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function v1(t,r){switch(Yh(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ys(On),Me(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return zi(r),null;case 31:if(r.memoizedState!==null){if(ci(r),r.alternate===null)throw Error(s(340));Vo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(ci(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Vo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return me(wn),null;case 4:return Me(),null;case 10:return Ys(r.type),null;case 22:case 23:return ci(r),ld(),t!==null&&me(Uo),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Ys(On),null;case 25:return null;default:return null}}function By(t,r){switch(Yh(r),r.tag){case 3:Ys(On),Me();break;case 26:case 27:case 5:zi(r);break;case 4:Me();break;case 31:r.memoizedState!==null&&ci(r);break;case 13:ci(r);break;case 19:me(wn);break;case 10:Ys(r.type);break;case 22:case 23:ci(r),ld(),t!==null&&me(Uo);break;case 24:Ys(On)}}function xu(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,T=a.inst;l=m(),T.destroy=l}a=a.next}while(a!==h)}}catch(C){Bt(r,r.return,C)}}function qa(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var T=l.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,h=r;var U=a,se=C;try{se()}catch(he){Bt(h,U,he)}}}l=l.next}while(l!==m)}}catch(he){Bt(r,r.return,he)}}function qy(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Ng(r,a)}catch(l){Bt(t,t.return,l)}}}function Hy(t,r,a){a.props=Ho(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Bt(t,r,l)}}function Ou(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){Bt(t,r,h)}}function ms(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Bt(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Bt(t,r,h)}else a.current=null}function Fy(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Bt(t,t.return,h)}}function zd(t,r,a){try{var l=t.stateNode;z1(l,t.type,a,r),l[Qt]=r}catch(h){Bt(t,t.return,h)}}function Ky(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Xa(t.type)||t.tag===4}function Bd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ky(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Xa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qd(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=ur));else if(l!==4&&(l===27&&Xa(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(qd(t,r,a),t=t.sibling;t!==null;)qd(t,r,a),t=t.sibling}function af(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Xa(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(af(t,r,a),t=t.sibling;t!==null;)af(t,r,a),t=t.sibling}function Gy(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);tr(r,l,a),r[Lt]=t,r[Qt]=a}catch(m){Bt(t,t.return,m)}}var Ws=!1,Mn=!1,Hd=!1,Yy=typeof WeakSet=="function"?WeakSet:Set,Yn=null;function _1(t,r){if(t=t.containerInfo,cp=Rf,t=S(t),A(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var T=0,C=-1,U=-1,se=0,he=0,ye=t,oe=null;t:for(;;){for(var ce;ye!==a||h!==0&&ye.nodeType!==3||(C=T+h),ye!==m||l!==0&&ye.nodeType!==3||(U=T+l),ye.nodeType===3&&(T+=ye.nodeValue.length),(ce=ye.firstChild)!==null;)oe=ye,ye=ce;for(;;){if(ye===t)break t;if(oe===a&&++se===h&&(C=T),oe===m&&++he===l&&(U=T),(ce=ye.nextSibling)!==null)break;ye=oe,oe=ye.parentNode}ye=ce}a=C===-1||U===-1?null:{start:C,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(fp={focusedElem:t,selectionRange:a},Rf=!1,Yn=r;Yn!==null;)if(r=Yn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Yn=t;else for(;Yn!==null;){switch(r=Yn,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=r,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var je=Ho(a.type,h);t=l.getSnapshotBeforeUpdate(je,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Xe){Bt(a,a.return,Xe)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)pp(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":pp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Yn=t;break}Yn=r.return}}function Qy(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ea(t,a),l&4&&xu(5,a);break;case 1:if(ea(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(T){Bt(a,a.return,T)}else{var h=Ho(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(T){Bt(a,a.return,T)}}l&64&&qy(a),l&512&&Ou(a,a.return);break;case 3:if(ea(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Ng(t,r)}catch(T){Bt(a,a.return,T)}}break;case 27:r===null&&l&4&&Gy(a);case 26:case 5:ea(t,a),r===null&&l&4&&Fy(a),l&512&&Ou(a,a.return);break;case 12:ea(t,a);break;case 31:ea(t,a),l&4&&Jy(t,a);break;case 13:ea(t,a),l&4&&Wy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=I1.bind(null,a),Q1(t,a))));break;case 22:if(l=a.memoizedState!==null||Ws,!l){r=r!==null&&r.memoizedState!==null||Mn,h=Ws;var m=Mn;Ws=l,(Mn=r)&&!m?ta(t,a,(a.subtreeFlags&8772)!==0):ea(t,a),Ws=h,Mn=m}break;case 30:break;default:ea(t,a)}}function Xy(t){var r=t.alternate;r!==null&&(t.alternate=null,Xy(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ps(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var tn=null,jr=!1;function Zs(t,r,a){for(a=a.child;a!==null;)$y(t,r,a),a=a.sibling}function $y(t,r,a){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(ar,a)}catch{}switch(a.tag){case 26:Mn||ms(a,r),Zs(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Mn||ms(a,r);var l=tn,h=jr;Xa(a.type)&&(tn=a.stateNode,jr=!1),Zs(t,r,a),ju(a.stateNode),tn=l,jr=h;break;case 5:Mn||ms(a,r);case 6:if(l=tn,h=jr,tn=null,Zs(t,r,a),tn=l,jr=h,tn!==null)if(jr)try{(tn.nodeType===9?tn.body:tn.nodeName==="HTML"?tn.ownerDocument.body:tn).removeChild(a.stateNode)}catch(m){Bt(a,r,m)}else try{tn.removeChild(a.stateNode)}catch(m){Bt(a,r,m)}break;case 18:tn!==null&&(jr?(t=tn,qv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ll(t)):qv(tn,a.stateNode));break;case 4:l=tn,h=jr,tn=a.stateNode.containerInfo,jr=!0,Zs(t,r,a),tn=l,jr=h;break;case 0:case 11:case 14:case 15:qa(2,a,r),Mn||qa(4,a,r),Zs(t,r,a);break;case 1:Mn||(ms(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Hy(a,r,l)),Zs(t,r,a);break;case 21:Zs(t,r,a);break;case 22:Mn=(l=Mn)||a.memoizedState!==null,Zs(t,r,a),Mn=l;break;default:Zs(t,r,a)}}function Jy(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ll(t)}catch(a){Bt(r,r.return,a)}}}function Wy(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ll(t)}catch(a){Bt(r,r.return,a)}}function b1(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Yy),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Yy),r;default:throw Error(s(435,t.tag))}}function of(t,r){var a=b1(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var h=x1.bind(null,t,l);l.then(h,h)}})}function zr(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,T=r,C=T;e:for(;C!==null;){switch(C.tag){case 27:if(Xa(C.type)){tn=C.stateNode,jr=!1;break e}break;case 5:tn=C.stateNode,jr=!1;break e;case 3:case 4:tn=C.stateNode.containerInfo,jr=!0;break e}C=C.return}if(tn===null)throw Error(s(160));$y(m,T,h),tn=null,jr=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Zy(r,t),r=r.sibling}var $i=null;function Zy(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:zr(r,t),Br(t),l&4&&(qa(3,t,t.return),xu(3,t),qa(5,t,t.return));break;case 1:zr(r,t),Br(t),l&512&&(Mn||a===null||ms(a,a.return)),l&64&&Ws&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=$i;if(zr(r,t),Br(t),l&512&&(Mn||a===null||ms(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Hn]||m[Lt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),tr(m,l,a),m[Lt]=t,an(m),l=m;break e;case"link":var T=Zv("link","href",h).get(l+(a.href||""));if(T){for(var C=0;C<T.length;C++)if(m=T[C],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(C,1);break t}}m=h.createElement(l),tr(m,l,a),h.head.appendChild(m);break;case"meta":if(T=Zv("meta","content",h).get(l+(a.content||""))){for(C=0;C<T.length;C++)if(m=T[C],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(C,1);break t}}m=h.createElement(l),tr(m,l,a),h.head.appendChild(m);break;default:throw Error(s(468,l))}m[Lt]=t,an(m),l=m}t.stateNode=l}else e_(h,t.type,t.stateNode);else t.stateNode=Wv(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?e_(h,t.type,t.stateNode):Wv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&zd(t,t.memoizedProps,a.memoizedProps)}break;case 27:zr(r,t),Br(t),l&512&&(Mn||a===null||ms(a,a.return)),a!==null&&l&4&&zd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(zr(r,t),Br(t),l&512&&(Mn||a===null||ms(a,a.return)),t.flags&32){h=t.stateNode;try{Jn(h,"")}catch(je){Bt(t,t.return,je)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,zd(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Hd=!0);break;case 6:if(zr(r,t),Br(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(je){Bt(t,t.return,je)}}break;case 3:if(wf=null,h=$i,$i=Ef(r.containerInfo),zr(r,t),$i=h,Br(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ll(r.containerInfo)}catch(je){Bt(t,t.return,je)}Hd&&(Hd=!1,ev(t));break;case 4:l=$i,$i=Ef(t.stateNode.containerInfo),zr(r,t),Br(t),$i=l;break;case 12:zr(r,t),Br(t);break;case 31:zr(r,t),Br(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,of(t,l)));break;case 13:zr(r,t),Br(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uf=qn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,of(t,l)));break;case 22:h=t.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,se=Ws,he=Mn;if(Ws=se||h,Mn=he||U,zr(r,t),Mn=he,Ws=se,Br(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||U||Ws||Mn||Fo(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){U=a=r;try{if(m=U.stateNode,h)T=m.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{C=U.stateNode;var ye=U.memoizedProps.style,oe=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;C.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(je){Bt(U,U.return,je)}}}else if(r.tag===6){if(a===null){U=r;try{U.stateNode.nodeValue=h?"":U.memoizedProps}catch(je){Bt(U,U.return,je)}}}else if(r.tag===18){if(a===null){U=r;try{var ce=U.stateNode;h?Hv(ce,!0):Hv(U.stateNode,!1)}catch(je){Bt(U,U.return,je)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,of(t,a))));break;case 19:zr(r,t),Br(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,of(t,l)));break;case 30:break;case 21:break;default:zr(r,t),Br(t)}}function Br(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Ky(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,m=Bd(t);af(t,m,h);break;case 5:var T=a.stateNode;a.flags&32&&(Jn(T,""),a.flags&=-33);var C=Bd(t);af(t,C,T);break;case 3:case 4:var U=a.stateNode.containerInfo,se=Bd(t);qd(t,se,U);break;default:throw Error(s(161))}}catch(he){Bt(t,t.return,he)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function ev(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;ev(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function ea(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Qy(t,r.alternate,r),r=r.sibling}function Fo(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:qa(4,r,r.return),Fo(r);break;case 1:ms(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Hy(r,r.return,a),Fo(r);break;case 27:ju(r.stateNode);case 26:case 5:ms(r,r.return),Fo(r);break;case 22:r.memoizedState===null&&Fo(r);break;case 30:Fo(r);break;default:Fo(r)}t=t.sibling}}function ta(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,m=r,T=m.flags;switch(m.tag){case 0:case 11:case 15:ta(h,m,a),xu(4,m);break;case 1:if(ta(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(se){Bt(l,l.return,se)}if(l=m,h=l.updateQueue,h!==null){var C=l.stateNode;try{var U=h.shared.hiddenCallbacks;if(U!==null)for(h.shared.hiddenCallbacks=null,h=0;h<U.length;h++)Dg(U[h],C)}catch(se){Bt(l,l.return,se)}}a&&T&64&&qy(m),Ou(m,m.return);break;case 27:Gy(m);case 26:case 5:ta(h,m,a),a&&l===null&&T&4&&Fy(m),Ou(m,m.return);break;case 12:ta(h,m,a);break;case 31:ta(h,m,a),a&&T&4&&Jy(h,m);break;case 13:ta(h,m,a),a&&T&4&&Wy(h,m);break;case 22:m.memoizedState===null&&ta(h,m,a),Ou(m,m.return);break;case 30:break;default:ta(h,m,a)}r=r.sibling}}function Fd(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&gu(a))}function Kd(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&gu(t))}function Ji(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)tv(t,r,a,l),r=r.sibling}function tv(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Ji(t,r,a,l),h&2048&&xu(9,r);break;case 1:Ji(t,r,a,l);break;case 3:Ji(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&gu(t)));break;case 12:if(h&2048){Ji(t,r,a,l),t=r.stateNode;try{var m=r.memoizedProps,T=m.id,C=m.onPostCommit;typeof C=="function"&&C(T,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(U){Bt(r,r.return,U)}}else Ji(t,r,a,l);break;case 31:Ji(t,r,a,l);break;case 13:Ji(t,r,a,l);break;case 23:break;case 22:m=r.stateNode,T=r.alternate,r.memoizedState!==null?m._visibility&2?Ji(t,r,a,l):Du(t,r):m._visibility&2?Ji(t,r,a,l):(m._visibility|=2,Cl(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),h&2048&&Fd(T,r);break;case 24:Ji(t,r,a,l),h&2048&&Kd(r.alternate,r);break;default:Ji(t,r,a,l)}}function Cl(t,r,a,l,h){for(h=h&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,T=r,C=a,U=l,se=T.flags;switch(T.tag){case 0:case 11:case 15:Cl(m,T,C,U,h),xu(8,T);break;case 23:break;case 22:var he=T.stateNode;T.memoizedState!==null?he._visibility&2?Cl(m,T,C,U,h):Du(m,T):(he._visibility|=2,Cl(m,T,C,U,h)),h&&se&2048&&Fd(T.alternate,T);break;case 24:Cl(m,T,C,U,h),h&&se&2048&&Kd(T.alternate,T);break;default:Cl(m,T,C,U,h)}r=r.sibling}}function Du(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:Du(a,l),h&2048&&Fd(l.alternate,l);break;case 24:Du(a,l),h&2048&&Kd(l.alternate,l);break;default:Du(a,l)}r=r.sibling}}var Nu=8192;function Rl(t,r,a){if(t.subtreeFlags&Nu)for(t=t.child;t!==null;)nv(t,r,a),t=t.sibling}function nv(t,r,a){switch(t.tag){case 26:Rl(t,r,a),t.flags&Nu&&t.memoizedState!==null&&aw(a,$i,t.memoizedState,t.memoizedProps);break;case 5:Rl(t,r,a);break;case 3:case 4:var l=$i;$i=Ef(t.stateNode.containerInfo),Rl(t,r,a),$i=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Nu,Nu=16777216,Rl(t,r,a),Nu=l):Rl(t,r,a));break;default:Rl(t,r,a)}}function rv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Mu(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Yn=l,sv(l,t)}rv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)iv(t),t=t.sibling}function iv(t){switch(t.tag){case 0:case 11:case 15:Mu(t),t.flags&2048&&qa(9,t,t.return);break;case 3:Mu(t);break;case 12:Mu(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,lf(t)):Mu(t);break;default:Mu(t)}}function lf(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Yn=l,sv(l,t)}rv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:qa(8,r,r.return),lf(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,lf(r));break;default:lf(r)}t=t.sibling}}function sv(t,r){for(;Yn!==null;){var a=Yn;switch(a.tag){case 0:case 11:case 15:qa(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:gu(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Yn=l;else e:for(a=t;Yn!==null;){l=Yn;var h=l.sibling,m=l.return;if(Xy(l),l===a){Yn=null;break e}if(h!==null){h.return=m,Yn=h;break e}Yn=m}}}var E1={getCacheForType:function(t){var r=Zn(On),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return Zn(On).controller.signal}},T1=typeof WeakMap=="function"?WeakMap:Map,kt=0,Yt=null,_t=null,Et=0,zt=0,fi=null,Ha=!1,Il=!1,Gd=!1,na=0,gn=0,Fa=0,Ko=0,Yd=0,hi=0,xl=0,ku=null,qr=null,Qd=!1,uf=0,av=0,cf=1/0,ff=null,Ka=null,Un=0,Ga=null,Ol=null,ra=0,Xd=0,$d=null,ov=null,Vu=0,Jd=null;function di(){return(kt&2)!==0&&Et!==0?Et&-Et:le.T!==null?rp():Vs()}function lv(){if(hi===0)if((Et&536870912)===0||It){var t=Bi;Bi<<=1,(Bi&3932160)===0&&(Bi=262144),hi=t}else hi=536870912;return t=ui.current,t!==null&&(t.flags|=32),hi}function Hr(t,r,a){(t===Yt&&(zt===2||zt===9)||t.cancelPendingCommit!==null)&&(Dl(t,0),Ya(t,Et,hi,!1)),Ar(t,a),((kt&2)===0||t!==Yt)&&(t===Yt&&((kt&2)===0&&(Ko|=a),gn===4&&Ya(t,Et,hi,!1)),gs(t))}function uv(t,r,a){if((kt&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||yr(t,r),h=l?A1(t,r):Zd(t,r,!0),m=l;do{if(h===0){Il&&!l&&Ya(t,r,0,!1);break}else{if(a=t.current.alternate,m&&!w1(a)){h=Zd(t,r,!1),m=!1;continue}if(h===2){if(m=r,t.errorRecoveryDisabledLanes&m)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;e:{var C=t;h=ku;var U=C.current.memoizedState.isDehydrated;if(U&&(Dl(C,T).flags|=256),T=Zd(C,T,!1),T!==2){if(Gd&&!U){C.errorRecoveryDisabledLanes|=m,Ko|=m,h=4;break e}m=qr,qr=h,m!==null&&(qr===null?qr=m:qr.push.apply(qr,m))}h=T}if(m=!1,h!==2)continue}}if(h===1){Dl(t,0),Ya(t,r,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Ya(l,r,hi,!Ha);break e;case 2:qr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=uf+300-qn(),10<h)){if(Ya(l,r,hi,!Ha),$r(l,0,!0)!==0)break e;ra=r,l.timeoutHandle=zv(cv.bind(null,l,a,qr,ff,Qd,r,hi,Ko,xl,Ha,m,"Throttled",-0,0),h);break e}cv(l,a,qr,ff,Qd,r,hi,Ko,xl,Ha,m,null,-0,0)}}break}while(!0);gs(t)}function cv(t,r,a,l,h,m,T,C,U,se,he,ye,oe,ce){if(t.timeoutHandle=-1,ye=r.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ur},nv(r,m,ye);var je=(m&62914560)===m?uf-qn():(m&4194048)===m?av-qn():0;if(je=ow(ye,je),je!==null){ra=m,t.cancelPendingCommit=je(vv.bind(null,t,r,m,a,l,h,T,C,U,he,ye,null,oe,ce)),Ya(t,m,T,!se);return}}vv(t,r,m,a,l,h,T,C,U)}function w1(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!cr(m(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ya(t,r,a,l){r&=~Yd,r&=~Ko,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var m=31-Ne(h),T=1<<m;l[m]=-1,h&=~T}a!==0&&vi(t,a,r)}function hf(){return(kt&6)===0?(Pu(0),!1):!0}function Wd(){if(_t!==null){if(zt===0)var t=_t.return;else t=_t,Gs=Po=null,pd(t),El=null,vu=0,t=_t;for(;t!==null;)By(t.alternate,t),t=t.return;_t=null}}function Dl(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,H1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ra=0,Wd(),Yt=t,_t=a=Fs(t.current,null),Et=r,zt=0,fi=null,Ha=!1,Il=yr(t,r),Gd=!1,xl=hi=Yd=Ko=Fa=gn=0,qr=ku=null,Qd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Ne(l),m=1<<h;r|=t[h],l&=~m}return na=r,Gn(),a}function fv(t,r){ut=null,le.H=Cu,r===bl||r===zc?(r=Rg(),zt=3):r===nd?(r=Rg(),zt=4):zt=r===Od?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,fi=r,_t===null&&(gn=1,ef(t,Ii(r,t.current)))}function hv(){var t=ui.current;return t===null?!0:(Et&4194048)===Et?Ni===null:(Et&62914560)===Et||(Et&536870912)!==0?t===Ni:!1}function dv(){var t=le.H;return le.H=Cu,t===null?Cu:t}function pv(){var t=le.A;return le.A=E1,t}function df(){gn=4,Ha||(Et&4194048)!==Et&&ui.current!==null||(Il=!0),(Fa&134217727)===0&&(Ko&134217727)===0||Yt===null||Ya(Yt,Et,hi,!1)}function Zd(t,r,a){var l=kt;kt|=2;var h=dv(),m=pv();(Yt!==t||Et!==r)&&(ff=null,Dl(t,r)),r=!1;var T=gn;e:do try{if(zt!==0&&_t!==null){var C=_t,U=fi;switch(zt){case 8:Wd(),T=6;break e;case 3:case 2:case 9:case 6:ui.current===null&&(r=!0);var se=zt;if(zt=0,fi=null,Nl(t,C,U,se),a&&Il){T=0;break e}break;default:se=zt,zt=0,fi=null,Nl(t,C,U,se)}}S1(),T=gn;break}catch(he){fv(t,he)}while(!0);return r&&t.shellSuspendCounter++,Gs=Po=null,kt=l,le.H=h,le.A=m,_t===null&&(Yt=null,Et=0,Gn()),T}function S1(){for(;_t!==null;)mv(_t)}function A1(t,r){var a=kt;kt|=2;var l=dv(),h=pv();Yt!==t||Et!==r?(ff=null,cf=qn()+500,Dl(t,r)):Il=yr(t,r);e:do try{if(zt!==0&&_t!==null){r=_t;var m=fi;t:switch(zt){case 1:zt=0,fi=null,Nl(t,r,m,1);break;case 2:case 9:if(Ag(m)){zt=0,fi=null,gv(r);break}r=function(){zt!==2&&zt!==9||Yt!==t||(zt=7),gs(t)},m.then(r,r);break e;case 3:zt=7;break e;case 4:zt=5;break e;case 7:Ag(m)?(zt=0,fi=null,gv(r)):(zt=0,fi=null,Nl(t,r,m,7));break;case 5:var T=null;switch(_t.tag){case 26:T=_t.memoizedState;case 5:case 27:var C=_t;if(T?t_(T):C.stateNode.complete){zt=0,fi=null;var U=C.sibling;if(U!==null)_t=U;else{var se=C.return;se!==null?(_t=se,pf(se)):_t=null}break t}}zt=0,fi=null,Nl(t,r,m,5);break;case 6:zt=0,fi=null,Nl(t,r,m,6);break;case 8:Wd(),gn=6;break e;default:throw Error(s(462))}}C1();break}catch(he){fv(t,he)}while(!0);return Gs=Po=null,le.H=l,le.A=h,kt=a,_t!==null?0:(Yt=null,Et=0,Gn(),gn)}function C1(){for(;_t!==null&&!ol();)mv(_t)}function mv(t){var r=jy(t.alternate,t,na);t.memoizedProps=t.pendingProps,r===null?pf(t):_t=r}function gv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=My(a,r,r.pendingProps,r.type,void 0,Et);break;case 11:r=My(a,r,r.pendingProps,r.type.render,r.ref,Et);break;case 5:pd(r);default:By(a,r),r=_t=pg(r,na),r=jy(a,r,na)}t.memoizedProps=t.pendingProps,r===null?pf(t):_t=r}function Nl(t,r,a,l){Gs=Po=null,pd(r),El=null,vu=0;var h=r.return;try{if(p1(t,h,r,a,Et)){gn=1,ef(t,Ii(a,t.current)),_t=null;return}}catch(m){if(h!==null)throw _t=h,m;gn=1,ef(t,Ii(a,t.current)),_t=null;return}r.flags&32768?(It||l===1?t=!0:Il||(Et&536870912)!==0?t=!1:(Ha=t=!0,(l===2||l===9||l===3||l===6)&&(l=ui.current,l!==null&&l.tag===13&&(l.flags|=16384))),yv(r,t)):pf(r)}function pf(t){var r=t;do{if((r.flags&32768)!==0){yv(r,Ha);return}t=r.return;var a=y1(r.alternate,r,na);if(a!==null){_t=a;return}if(r=r.sibling,r!==null){_t=r;return}_t=r=t}while(r!==null);gn===0&&(gn=5)}function yv(t,r){do{var a=v1(t.alternate,t);if(a!==null){a.flags&=32767,_t=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){_t=t;return}_t=t=a}while(t!==null);gn=6,_t=null}function vv(t,r,a,l,h,m,T,C,U){t.cancelPendingCommit=null;do mf();while(Un!==0);if((kt&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(m=r.lanes|r.childLanes,m|=lt,So(t,a,m,T,C,U),t===Yt&&(_t=Yt=null,Et=0),Ol=r,Ga=t,ra=a,Xd=m,$d=h,ov=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,O1(gi,function(){return wv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=le.T,le.T=null,h=be.p,be.p=2,T=kt,kt|=4;try{_1(t,r,a)}finally{kt=T,be.p=h,le.T=l}}Un=1,_v(),bv(),Ev()}}function _v(){if(Un===1){Un=0;var t=Ga,r=Ol,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=le.T,le.T=null;var l=be.p;be.p=2;var h=kt;kt|=4;try{Zy(r,t);var m=fp,T=S(t.containerInfo),C=m.focusedElem,U=m.selectionRange;if(T!==C&&C&&C.ownerDocument&&E(C.ownerDocument.documentElement,C)){if(U!==null&&A(C)){var se=U.start,he=U.end;if(he===void 0&&(he=se),"selectionStart"in C)C.selectionStart=se,C.selectionEnd=Math.min(he,C.value.length);else{var ye=C.ownerDocument||document,oe=ye&&ye.defaultView||window;if(oe.getSelection){var ce=oe.getSelection(),je=C.textContent.length,Xe=Math.min(U.start,je),Kt=U.end===void 0?Xe:Math.min(U.end,je);!ce.extend&&Xe>Kt&&(T=Kt,Kt=Xe,Xe=T);var ee=g(C,Xe),K=g(C,Kt);if(ee&&K&&(ce.rangeCount!==1||ce.anchorNode!==ee.node||ce.anchorOffset!==ee.offset||ce.focusNode!==K.node||ce.focusOffset!==K.offset)){var ie=ye.createRange();ie.setStart(ee.node,ee.offset),ce.removeAllRanges(),Xe>Kt?(ce.addRange(ie),ce.extend(K.node,K.offset)):(ie.setEnd(K.node,K.offset),ce.addRange(ie))}}}}for(ye=[],ce=C;ce=ce.parentNode;)ce.nodeType===1&&ye.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<ye.length;C++){var de=ye[C];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Rf=!!cp,fp=cp=null}finally{kt=h,be.p=l,le.T=a}}t.current=r,Un=2}}function bv(){if(Un===2){Un=0;var t=Ga,r=Ol,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=le.T,le.T=null;var l=be.p;be.p=2;var h=kt;kt|=4;try{Qy(t,r.alternate,r)}finally{kt=h,be.p=l,le.T=a}}Un=3}}function Ev(){if(Un===4||Un===3){Un=0,rs();var t=Ga,r=Ol,a=ra,l=ov;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Un=5:(Un=0,Ol=Ga=null,Tv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ka=null),Cr(a),r=r.stateNode,vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(ar,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=le.T,h=be.p,be.p=2,le.T=null;try{for(var m=t.onRecoverableError,T=0;T<l.length;T++){var C=l[T];m(C.value,{componentStack:C.stack})}}finally{le.T=r,be.p=h}}(ra&3)!==0&&mf(),gs(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Jd?Vu++:(Vu=0,Jd=t):Vu=0,Pu(0)}}function Tv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,gu(r)))}function mf(){return _v(),bv(),Ev(),wv()}function wv(){if(Un!==5)return!1;var t=Ga,r=Xd;Xd=0;var a=Cr(ra),l=le.T,h=be.p;try{be.p=32>a?32:a,le.T=null,a=$d,$d=null;var m=Ga,T=ra;if(Un=0,Ol=Ga=null,ra=0,(kt&6)!==0)throw Error(s(331));var C=kt;if(kt|=4,iv(m.current),tv(m,m.current,T,a),kt=C,Pu(0,!1),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(ar,m)}catch{}return!0}finally{be.p=h,le.T=l,Tv(t,r)}}function Sv(t,r,a){r=Ii(a,r),r=xd(t.stateNode,r,2),t=ja(t,r,2),t!==null&&(Ar(t,2),gs(t))}function Bt(t,r,a){if(t.tag===3)Sv(t,t,a);else for(;r!==null;){if(r.tag===3){Sv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ka===null||!Ka.has(l))){t=Ii(a,t),a=Ay(2),l=ja(r,a,2),l!==null&&(Cy(a,l,r,t),Ar(l,2),gs(l));break}}r=r.return}}function ep(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new T1;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(Gd=!0,h.add(a),t=R1.bind(null,t,r,a),r.then(t,t))}function R1(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Yt===t&&(Et&a)===a&&(gn===4||gn===3&&(Et&62914560)===Et&&300>qn()-uf?(kt&2)===0&&Dl(t,0):Yd|=a,xl===Et&&(xl=0)),gs(t)}function Av(t,r){r===0&&(r=ll()),t=en(t,r),t!==null&&(Ar(t,r),gs(t))}function I1(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Av(t,a)}function x1(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),Av(t,a)}function O1(t,r){return rn(t,r)}var gf=null,Ml=null,tp=!1,yf=!1,np=!1,Qa=0;function gs(t){t!==Ml&&t.next===null&&(Ml===null?gf=Ml=t:Ml=Ml.next=t),yf=!0,tp||(tp=!0,N1())}function Pu(t,r){if(!np&&yf){np=!0;do for(var a=!1,l=gf;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var T=l.suspendedLanes,C=l.pingedLanes;m=(1<<31-Ne(42|t)+1)-1,m&=h&~(T&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,xv(l,m))}else m=Et,m=$r(l,l===Yt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||yr(l,m)||(a=!0,xv(l,m));l=l.next}while(a);np=!1}}function D1(){Cv()}function Cv(){yf=tp=!1;var t=0;Qa!==0&&q1()&&(t=Qa);for(var r=qn(),a=null,l=gf;l!==null;){var h=l.next,m=Rv(l,r);m===0?(l.next=null,a===null?gf=h:a.next=h,h===null&&(Ml=a)):(a=l,(t!==0||(m&3)!==0)&&(yf=!0)),l=h}Un!==0&&Un!==5||Pu(t),Qa!==0&&(Qa=0)}function Rv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var T=31-Ne(m),C=1<<T,U=h[T];U===-1?((C&a)===0||(C&l)!==0)&&(h[T]=uu(C,r)):U<=r&&(t.expiredLanes|=C),m&=~C}if(r=Yt,a=Et,a=$r(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(zt===2||zt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Pn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||yr(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Pn(l),Cr(a)){case 2:case 8:a=Xr;break;case 32:a=gi;break;case 268435456:a=ga;break;default:a=gi}return l=Iv.bind(null,t),a=rn(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Pn(l),t.callbackPriority=2,t.callbackNode=null,2}function Iv(t,r){if(Un!==0&&Un!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(mf()&&t.callbackNode!==a)return null;var l=Et;return l=$r(t,t===Yt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(uv(t,l,r),Rv(t,qn()),t.callbackNode!=null&&t.callbackNode===a?Iv.bind(null,t):null)}function xv(t,r){if(mf())return null;uv(t,r,!0)}function N1(){F1(function(){(kt&6)!==0?rn(Qr,D1):Cv()})}function rp(){if(Qa===0){var t=vl;t===0&&(t=Ie,Ie<<=1,(Ie&261888)===0&&(Ie=256)),Qa=t}return Qa}function Ov(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ii(""+t)}function Dv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function M1(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var m=Ov((h[Qt]||null).action),T=l.submitter;T&&(r=(r=T[Qt]||null)?Ov(r.formAction):T.getAttribute("formAction"),r!==null&&(m=r,T=null));var C=new Ti("action","action",null,l,h);t.push({event:C,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Qa!==0){var U=T?Dv(h,T):new FormData(h);wd(a,{pending:!0,data:U,method:h.method,action:m},null,U)}}else typeof m=="function"&&(C.preventDefault(),U=T?Dv(h,T):new FormData(h),wd(a,{pending:!0,data:U,method:h.method,action:m},m,U))},currentTarget:h}]})}}for(var ip=0;ip<Oe.length;ip++){var sp=Oe[ip],k1=sp.toLowerCase(),V1=sp[0].toUpperCase()+sp.slice(1);Se(k1,"on"+V1)}Se(ne,"onAnimationEnd"),Se(ae,"onAnimationIteration"),Se(fe,"onAnimationStart"),Se("dblclick","onDoubleClick"),Se("focusin","onFocus"),Se("focusout","onBlur"),Se(ge,"onTransitionRun"),Se(Ae,"onTransitionStart"),Se(De,"onTransitionCancel"),Se(we,"onTransitionEnd"),xr("onMouseEnter",["mouseout","mouseover"]),xr("onMouseLeave",["mouseout","mouseover"]),xr("onPointerEnter",["pointerout","pointerover"]),xr("onPointerLeave",["pointerout","pointerover"]),Ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function Nv(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var T=l.length-1;0<=T;T--){var C=l[T],U=C.instance,se=C.currentTarget;if(C=C.listener,U!==m&&h.isPropagationStopped())break e;m=C,h.currentTarget=se;try{m(h)}catch(he){Ve(he)}h.currentTarget=null,m=U}else for(T=0;T<l.length;T++){if(C=l[T],U=C.instance,se=C.currentTarget,C=C.listener,U!==m&&h.isPropagationStopped())break e;m=C,h.currentTarget=se;try{m(h)}catch(he){Ve(he)}h.currentTarget=null,m=U}}}}function bt(t,r){var a=r[qi];a===void 0&&(a=r[qi]=new Set);var l=t+"__bubble";a.has(l)||(Mv(r,t,2,!1),a.add(l))}function ap(t,r,a){var l=0;r&&(l|=4),Mv(a,t,l,r)}var vf="_reactListening"+Math.random().toString(36).slice(2);function op(t){if(!t[vf]){t[vf]=!0,_i.forEach(function(a){a!=="selectionchange"&&(P1.has(a)||ap(a,!1,t),ap(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[vf]||(r[vf]=!0,ap("selectionchange",!1,r))}}function Mv(t,r,a,l){switch(l_(r)){case 2:var h=cw;break;case 8:h=fw;break;default:h=Tp}a=h.bind(null,r,a,t),h=void 0,!Us||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function lp(t,r,a,l,h){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var C=l.stateNode.containerInfo;if(C===h)break;if(T===4)for(T=l.return;T!==null;){var U=T.tag;if((U===3||U===4)&&T.stateNode.containerInfo===h)return;T=T.return}for(;C!==null;){if(T=Rr(C),T===null)return;if(U=T.tag,U===5||U===6||U===26||U===27){l=m=T;continue e}C=C.parentNode}}l=l.return}Nr(function(){var se=m,he=vr(a),ye=[];e:{var oe=Re.get(t);if(oe!==void 0){var ce=Ti,je=t;switch(t){case"keypress":if(Gi(a)===0)break e;case"keydown":case"keyup":ce=Bs;break;case"focusin":je="focus",ce=Ai;break;case"focusout":je="blur",ce=Ai;break;case"beforeblur":case"afterblur":ce=Ai;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=js;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Io;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=v;break;case ne:case ae:case fe:ce=xo;break;case we:ce=x;break;case"scroll":case"scrollend":ce=ls;break;case"wheel":ce=ue;break;case"copy":case"cut":case"paste":ce=Xi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Ci;break;case"toggle":case"beforetoggle":ce=nt}var Xe=(r&4)!==0,Kt=!Xe&&(t==="scroll"||t==="scrollend"),ee=Xe?oe!==null?oe+"Capture":null:oe;Xe=[];for(var K=se,ie;K!==null;){var de=K;if(ie=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||ie===null||ee===null||(de=_r(K,ee),de!=null&&Xe.push(Uu(K,de,ie))),Kt)break;K=K.return}0<Xe.length&&(oe=new ce(oe,je,null,a,he),ye.push({event:oe,listeners:Xe}))}}if((r&7)===0){e:{if(oe=t==="mouseover"||t==="pointerover",ce=t==="mouseout"||t==="pointerout",oe&&a!==Dr&&(je=a.relatedTarget||a.fromElement)&&(Rr(je)||je[Ln]))break e;if((ce||oe)&&(oe=he.window===he?he:(oe=he.ownerDocument)?oe.defaultView||oe.parentWindow:window,ce?(je=a.relatedTarget||a.toElement,ce=se,je=je?Rr(je):null,je!==null&&(Kt=u(je),Xe=je.tag,je!==Kt||Xe!==5&&Xe!==27&&Xe!==6)&&(je=null)):(ce=null,je=se),ce!==je)){if(Xe=js,de="onMouseLeave",ee="onMouseEnter",K="mouse",(t==="pointerout"||t==="pointerover")&&(Xe=Ci,de="onPointerLeave",ee="onPointerEnter",K="pointer"),Kt=ce==null?oe:bn(ce),ie=je==null?oe:bn(je),oe=new Xe(de,K+"leave",ce,a,he),oe.target=Kt,oe.relatedTarget=ie,de=null,Rr(he)===se&&(Xe=new Xe(ee,K+"enter",je,a,he),Xe.target=ie,Xe.relatedTarget=Kt,de=Xe),Kt=de,ce&&je)t:{for(Xe=L1,ee=ce,K=je,ie=0,de=ee;de;de=Xe(de))ie++;de=0;for(var Ke=K;Ke;Ke=Xe(Ke))de++;for(;0<ie-de;)ee=Xe(ee),ie--;for(;0<de-ie;)K=Xe(K),de--;for(;ie--;){if(ee===K||K!==null&&ee===K.alternate){Xe=ee;break t}ee=Xe(ee),K=Xe(K)}Xe=null}else Xe=null;ce!==null&&kv(ye,oe,ce,Xe,!1),je!==null&&Kt!==null&&kv(ye,Kt,je,Xe,!0)}}e:{if(oe=se?bn(se):window,ce=oe.nodeName&&oe.nodeName.toLowerCase(),ce==="select"||ce==="input"&&oe.type==="file")var Nt=No;else if(fl(oe))if(Ri)Nt=Na;else{Nt=Hs;var qe=kc}else ce=oe.nodeName,!ce||ce.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?se&&Ea(se.elementType)&&(Nt=No):Nt=hu;if(Nt&&(Nt=Nt(t,se))){fu(ye,Nt,a,he);break e}qe&&qe(t,oe,se),t==="focusout"&&se&&oe.type==="number"&&se.memoizedProps.value!=null&&Ls(oe,"number",oe.value)}switch(qe=se?bn(se):window,t){case"focusin":(fl(qe)||qe.contentEditable==="true")&&(M=qe,q=se,H=null);break;case"focusout":H=q=M=null;break;case"mousedown":$=!0;break;case"contextmenu":case"mouseup":case"dragend":$=!1,j(ye,a,he);break;case"selectionchange":if(O)break;case"keydown":case"keyup":j(ye,a,he)}var ct;if(Rt)e:{switch(t){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else qs?fs(t,a)&&(Tt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Tt="onCompositionStart");Tt&&(Lr&&a.locale!=="ko"&&(qs||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&qs&&(ct=Ki()):(Mr=he,Ta="value"in Mr?Mr.value:Mr.textContent,qs=!0)),qe=_f(se,Tt),0<qe.length&&(Tt=new kr(Tt,t,null,a,he),ye.push({event:Tt,listeners:qe}),ct?Tt.data=ct:(ct=xa(a),ct!==null&&(Tt.data=ct)))),(ct=Pr?Dc(t,a):Bh(t,a))&&(Tt=_f(se,"onBeforeInput"),0<Tt.length&&(qe=new kr("onBeforeInput","beforeinput",null,a,he),ye.push({event:qe,listeners:Tt}),qe.data=ct)),M1(ye,t,se,a,he)}Nv(ye,r)})}function Uu(t,r,a){return{instance:t,listener:r,currentTarget:a}}function _f(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=_r(t,a),h!=null&&l.unshift(Uu(t,h,m)),h=_r(t,r),h!=null&&l.push(Uu(t,h,m))),t.tag===3)return l;t=t.return}return[]}function L1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function kv(t,r,a,l,h){for(var m=r._reactName,T=[];a!==null&&a!==l;){var C=a,U=C.alternate,se=C.stateNode;if(C=C.tag,U!==null&&U===l)break;C!==5&&C!==26&&C!==27||se===null||(U=se,h?(se=_r(a,m),se!=null&&T.unshift(Uu(a,se,U))):h||(se=_r(a,m),se!=null&&T.push(Uu(a,se,U)))),a=a.return}T.length!==0&&t.push({event:r,listeners:T})}var U1=/\r\n?/g,j1=/\u0000|\uFFFD/g;function Vv(t){return(typeof t=="string"?t:""+t).replace(U1,`
`).replace(j1,"")}function Pv(t,r){return r=Vv(r),Vv(t)===r}function Ft(t,r,a,l,h,m){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Jn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Jn(t,""+l);break;case"className":lr(t,"class",l);break;case"tabIndex":lr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":lr(t,a,l);break;case"style":ba(t,l,m);break;case"data":if(r!=="object"){lr(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ii(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&Ft(t,r,"name",h.name,h,null),Ft(t,r,"formEncType",h.formEncType,h,null),Ft(t,r,"formMethod",h.formMethod,h,null),Ft(t,r,"formTarget",h.formTarget,h,null)):(Ft(t,r,"encType",h.encType,h,null),Ft(t,r,"method",h.method,h,null),Ft(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ii(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ur);break;case"onScroll":l!=null&&bt("scroll",t);break;case"onScrollEnd":l!=null&&bt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ii(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":bt("beforetoggle",t),bt("toggle",t),ot(t,"popover",l);break;case"xlinkActuate":on(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":on(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":on(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":on(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":on(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":on(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":on(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":on(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":on(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ot(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=cl.get(a)||a,ot(t,a,l))}}function up(t,r,a,l,h,m){switch(a){case"style":ba(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Jn(t,l):(typeof l=="number"||typeof l=="bigint")&&Jn(t,""+l);break;case"onScroll":l!=null&&bt("scroll",t);break;case"onScrollEnd":l!=null&&bt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ur);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ss.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),m=t[Qt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(r,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ot(t,a,l)}}}function tr(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bt("error",t),bt("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var T=a[m];if(T!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ft(t,r,m,T,a,null)}}h&&Ft(t,r,"srcSet",a.srcSet,a,null),l&&Ft(t,r,"src",a.src,a,null);return;case"input":bt("invalid",t);var C=m=T=h=null,U=null,se=null;for(l in a)if(a.hasOwnProperty(l)){var he=a[l];if(he!=null)switch(l){case"name":h=he;break;case"type":T=he;break;case"checked":U=he;break;case"defaultChecked":se=he;break;case"value":m=he;break;case"defaultValue":C=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(s(137,r));break;default:Ft(t,r,l,he,a,null)}}_a(t,m,C,U,se,T,h,!1);return;case"select":bt("invalid",t),l=T=m=null;for(h in a)if(a.hasOwnProperty(h)&&(C=a[h],C!=null))switch(h){case"value":m=C;break;case"defaultValue":T=C;break;case"multiple":l=C;default:Ft(t,r,h,C,a,null)}r=m,a=T,t.multiple=!!l,r!=null?ni(t,!!l,r,!1):a!=null&&ni(t,!!l,a,!0);return;case"textarea":bt("invalid",t),m=h=l=null;for(T in a)if(a.hasOwnProperty(T)&&(C=a[T],C!=null))switch(T){case"value":l=C;break;case"defaultValue":h=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:Ft(t,r,T,C,a,null)}ri(t,l,h,m);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(l=a[U],l!=null))switch(U){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ft(t,r,U,l,a,null)}return;case"dialog":bt("beforetoggle",t),bt("toggle",t),bt("cancel",t),bt("close",t);break;case"iframe":case"object":bt("load",t);break;case"video":case"audio":for(l=0;l<Lu.length;l++)bt(Lu[l],t);break;case"image":bt("error",t),bt("load",t);break;case"details":bt("toggle",t);break;case"embed":case"source":case"link":bt("error",t),bt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in a)if(a.hasOwnProperty(se)&&(l=a[se],l!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ft(t,r,se,l,a,null)}return;default:if(Ea(r)){for(he in a)a.hasOwnProperty(he)&&(l=a[he],l!==void 0&&up(t,r,he,l,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(l=a[C],l!=null&&Ft(t,r,C,l,a,null))}function z1(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,T=null,C=null,U=null,se=null,he=null;for(ce in a){var ye=a[ce];if(a.hasOwnProperty(ce)&&ye!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":U=ye;default:l.hasOwnProperty(ce)||Ft(t,r,ce,null,l,ye)}}for(var oe in l){var ce=l[oe];if(ye=a[oe],l.hasOwnProperty(oe)&&(ce!=null||ye!=null))switch(oe){case"type":m=ce;break;case"name":h=ce;break;case"checked":se=ce;break;case"defaultChecked":he=ce;break;case"value":T=ce;break;case"defaultValue":C=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(s(137,r));break;default:ce!==ye&&Ft(t,r,oe,ce,l,ye)}}ti(t,T,C,U,se,he,m,h);return;case"select":ce=T=C=oe=null;for(m in a)if(U=a[m],a.hasOwnProperty(m)&&U!=null)switch(m){case"value":break;case"multiple":ce=U;default:l.hasOwnProperty(m)||Ft(t,r,m,null,l,U)}for(h in l)if(m=l[h],U=a[h],l.hasOwnProperty(h)&&(m!=null||U!=null))switch(h){case"value":oe=m;break;case"defaultValue":C=m;break;case"multiple":T=m;default:m!==U&&Ft(t,r,h,m,l,U)}r=C,a=T,l=ce,oe!=null?ni(t,!!a,oe,!1):!!l!=!!a&&(r!=null?ni(t,!!a,r,!0):ni(t,!!a,a?[]:"",!1));return;case"textarea":ce=oe=null;for(C in a)if(h=a[C],a.hasOwnProperty(C)&&h!=null&&!l.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Ft(t,r,C,null,l,h)}for(T in l)if(h=l[T],m=a[T],l.hasOwnProperty(T)&&(h!=null||m!=null))switch(T){case"value":oe=h;break;case"defaultValue":ce=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==m&&Ft(t,r,T,h,l,m)}Ro(t,oe,ce);return;case"option":for(var je in a)if(oe=a[je],a.hasOwnProperty(je)&&oe!=null&&!l.hasOwnProperty(je))switch(je){case"selected":t.selected=!1;break;default:Ft(t,r,je,null,l,oe)}for(U in l)if(oe=l[U],ce=a[U],l.hasOwnProperty(U)&&oe!==ce&&(oe!=null||ce!=null))switch(U){case"selected":t.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:Ft(t,r,U,oe,l,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in a)oe=a[Xe],a.hasOwnProperty(Xe)&&oe!=null&&!l.hasOwnProperty(Xe)&&Ft(t,r,Xe,null,l,oe);for(se in l)if(oe=l[se],ce=a[se],l.hasOwnProperty(se)&&oe!==ce&&(oe!=null||ce!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(137,r));break;default:Ft(t,r,se,oe,l,ce)}return;default:if(Ea(r)){for(var Kt in a)oe=a[Kt],a.hasOwnProperty(Kt)&&oe!==void 0&&!l.hasOwnProperty(Kt)&&up(t,r,Kt,void 0,l,oe);for(he in l)oe=l[he],ce=a[he],!l.hasOwnProperty(he)||oe===ce||oe===void 0&&ce===void 0||up(t,r,he,oe,l,ce);return}}for(var ee in a)oe=a[ee],a.hasOwnProperty(ee)&&oe!=null&&!l.hasOwnProperty(ee)&&Ft(t,r,ee,null,l,oe);for(ye in l)oe=l[ye],ce=a[ye],!l.hasOwnProperty(ye)||oe===ce||oe==null&&ce==null||Ft(t,r,ye,oe,l,ce)}function Lv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function B1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],m=h.transferSize,T=h.initiatorType,C=h.duration;if(m&&C&&Lv(T)){for(T=0,C=h.responseEnd,l+=1;l<a.length;l++){var U=a[l],se=U.startTime;if(se>C)break;var he=U.transferSize,ye=U.initiatorType;he&&Lv(ye)&&(U=U.responseEnd,T+=he*(U<C?1:(C-se)/(U-se)))}if(--l,r+=8*(m+T)/(h.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var cp=null,fp=null;function bf(t){return t.nodeType===9?t:t.ownerDocument}function Uv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jv(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function hp(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var dp=null;function q1(){var t=window.event;return t&&t.type==="popstate"?t===dp?!1:(dp=t,!0):(dp=null,!1)}var zv=typeof setTimeout=="function"?setTimeout:void 0,H1=typeof clearTimeout=="function"?clearTimeout:void 0,Bv=typeof Promise=="function"?Promise:void 0,F1=typeof queueMicrotask=="function"?queueMicrotask:typeof Bv<"u"?function(t){return Bv.resolve(null).then(t).catch(K1)}:zv;function K1(t){setTimeout(function(){throw t})}function Xa(t){return t==="head"}function qv(t,r){var a=r,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),Ll(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")ju(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,ju(a);for(var m=a.firstChild;m;){var T=m.nextSibling,C=m.nodeName;m[Hn]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=T}}else a==="body"&&ju(t.ownerDocument.body);a=h}while(a);Ll(r)}function Hv(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function pp(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":pp(a),Ps(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function G1(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Hn])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Mi(t.nextSibling),t===null)break}return null}function Y1(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Mi(t.nextSibling),t===null))return null;return t}function Fv(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Mi(t.nextSibling),t===null))return null;return t}function mp(t){return t.data==="$?"||t.data==="$~"}function gp(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Q1(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Mi(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var yp=null;function Kv(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Mi(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function Gv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function Yv(t,r,a){switch(r=bf(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function ju(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ps(t)}var ki=new Map,Qv=new Set;function Ef(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ia=be.d;be.d={f:X1,r:$1,D:J1,C:W1,L:Z1,m:ew,X:nw,S:tw,M:rw};function X1(){var t=ia.f(),r=hf();return t||r}function $1(t){var r=xt(t);r!==null&&r.tag===5&&r.type==="form"?fy(r):ia.r(t)}var kl=typeof document>"u"?null:document;function Xv(t,r,a){var l=kl;if(l&&typeof r=="string"&&r){var h=Rn(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Qv.has(h)||(Qv.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),tr(r,"link",t),an(r),l.head.appendChild(r)))}}function J1(t){ia.D(t),Xv("dns-prefetch",t,null)}function W1(t,r){ia.C(t,r),Xv("preconnect",t,r)}function Z1(t,r,a){ia.L(t,r,a);var l=kl;if(l&&t&&r){var h='link[rel="preload"][as="'+Rn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Rn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Rn(a.imageSizes)+'"]')):h+='[href="'+Rn(t)+'"]';var m=h;switch(r){case"style":m=Vl(t);break;case"script":m=Pl(t)}ki.has(m)||(t=I({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),ki.set(m,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(zu(m))||r==="script"&&l.querySelector(Bu(m))||(r=l.createElement("link"),tr(r,"link",t),an(r),l.head.appendChild(r)))}}function ew(t,r){ia.m(t,r);var a=kl;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+Rn(l)+'"][href="'+Rn(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Pl(t)}if(!ki.has(m)&&(t=I({rel:"modulepreload",href:t},r),ki.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Bu(m)))return}l=a.createElement("link"),tr(l,"link",t),an(l),a.head.appendChild(l)}}}function tw(t,r,a){ia.S(t,r,a);var l=kl;if(l&&t){var h=Cn(l).hoistableStyles,m=Vl(t);r=r||"default";var T=h.get(m);if(!T){var C={loading:0,preload:null};if(T=l.querySelector(zu(m)))C.loading=5;else{t=I({rel:"stylesheet",href:t,"data-precedence":r},a),(a=ki.get(m))&&vp(t,a);var U=T=l.createElement("link");an(U),tr(U,"link",t),U._p=new Promise(function(se,he){U.onload=se,U.onerror=he}),U.addEventListener("load",function(){C.loading|=1}),U.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Tf(T,r,l)}T={type:"stylesheet",instance:T,count:1,state:C},h.set(m,T)}}}function nw(t,r){ia.X(t,r);var a=kl;if(a&&t){var l=Cn(a).hoistableScripts,h=Pl(t),m=l.get(h);m||(m=a.querySelector(Bu(h)),m||(t=I({src:t,async:!0},r),(r=ki.get(h))&&_p(t,r),m=a.createElement("script"),an(m),tr(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function rw(t,r){ia.M(t,r);var a=kl;if(a&&t){var l=Cn(a).hoistableScripts,h=Pl(t),m=l.get(h);m||(m=a.querySelector(Bu(h)),m||(t=I({src:t,async:!0,type:"module"},r),(r=ki.get(h))&&_p(t,r),m=a.createElement("script"),an(m),tr(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function $v(t,r,a,l){var h=(h=We.current)?Ef(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Vl(a.href),a=Cn(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Vl(a.href);var m=Cn(h).hoistableStyles,T=m.get(t);if(T||(h=h.ownerDocument||h,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,T),(m=h.querySelector(zu(t)))&&!m._p&&(T.instance=m,T.state.loading=5),ki.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ki.set(t,a),m||iw(h,t,a,T.state))),r&&l===null)throw Error(s(528,""));return T}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Pl(a),a=Cn(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Vl(t){return'href="'+Rn(t)+'"'}function zu(t){return'link[rel="stylesheet"]['+t+"]"}function Jv(t){return I({},t,{"data-precedence":t.precedence,precedence:null})}function iw(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),tr(r,"link",a),an(r),t.head.appendChild(r))}function Pl(t){return'[src="'+Rn(t)+'"]'}function Bu(t){return"script[async]"+t}function Wv(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Rn(a.href)+'"]');if(l)return r.instance=l,an(l),l;var h=I({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),an(l),tr(l,"style",h),Tf(l,a.precedence,t),r.instance=l;case"stylesheet":h=Vl(a.href);var m=t.querySelector(zu(h));if(m)return r.state.loading|=4,r.instance=m,an(m),m;l=Jv(a),(h=ki.get(h))&&vp(l,h),m=(t.ownerDocument||t).createElement("link"),an(m);var T=m;return T._p=new Promise(function(C,U){T.onload=C,T.onerror=U}),tr(m,"link",l),r.state.loading|=4,Tf(m,a.precedence,t),r.instance=m;case"script":return m=Pl(a.src),(h=t.querySelector(Bu(m)))?(r.instance=h,an(h),h):(l=a,(h=ki.get(m))&&(l=I({},a),_p(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),an(h),tr(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Tf(l,a.precedence,t));return r.instance}function Tf(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,T=0;T<l.length;T++){var C=l[T];if(C.dataset.precedence===r)m=C;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function vp(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function _p(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var wf=null;function Zv(t,r,a){if(wf===null){var l=new Map,h=wf=new Map;h.set(a,l)}else h=wf,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Hn]||m[Lt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var T=m.getAttribute(r)||"";T=t+T;var C=l.get(T);C?C.push(m):l.set(T,[m])}}return l}function e_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function sw(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function t_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function aw(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Vl(l.href),m=r.querySelector(zu(h));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Sf.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=m,an(m);return}m=r.ownerDocument||r,l=Jv(l),(h=ki.get(h))&&vp(l,h),m=m.createElement("link"),an(m);var T=m;T._p=new Promise(function(C,U){T.onload=C,T.onerror=U}),tr(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Sf.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var bp=0;function ow(t,r){return t.stylesheets&&t.count===0&&Cf(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Cf(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&bp===0&&(bp=62500*B1());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Cf(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>bp?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Sf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Af=null;function Cf(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Af=new Map,r.forEach(lw,t),Af=null,Sf.call(t))}function lw(t,r){if(!(r.state.loading&4)){var a=Af.get(t);if(a)var l=a.get(null);else{a=new Map,Af.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var T=h[m];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),l=T)}l&&a.set(null,l)}h=r.instance,T=h.getAttribute("data-precedence"),m=a.get(T)||l,m===l&&a.set(null,h),a.set(T,h),this.count++,l=Sf.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var qu={$$typeof:ke,Provider:null,Consumer:null,_currentValue:Ue,_currentValue2:Ue,_threadCount:0};function uw(t,r,a,l,h,m,T,C,U){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$n(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$n(0),this.hiddenUpdates=$n(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function n_(t,r,a,l,h,m,T,C,U,se,he,ye){return t=new uw(t,r,a,T,U,se,he,ye,C),r=1,m===!0&&(r|=24),m=li(3,null,null,r),t.current=m,m.stateNode=t,r=Zh(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:r},rd(m),t}function r_(t){return t?(t=Ur,t):Ur}function i_(t,r,a,l,h,m){h=r_(h),l.context===null?l.context=h:l.pendingContext=h,l=Ua(r),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=ja(t,l,r),a!==null&&(Hr(a,t,r),bu(a,t,r))}function s_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Ep(t,r){s_(t,r),(t=t.alternate)&&s_(t,r)}function a_(t){if(t.tag===13||t.tag===31){var r=en(t,67108864);r!==null&&Hr(r,t,67108864),Ep(t,67108864)}}function o_(t){if(t.tag===13||t.tag===31){var r=di();r=ks(r);var a=en(t,r);a!==null&&Hr(a,t,r),Ep(t,r)}}var Rf=!0;function cw(t,r,a,l){var h=le.T;le.T=null;var m=be.p;try{be.p=2,Tp(t,r,a,l)}finally{be.p=m,le.T=h}}function fw(t,r,a,l){var h=le.T;le.T=null;var m=be.p;try{be.p=8,Tp(t,r,a,l)}finally{be.p=m,le.T=h}}function Tp(t,r,a,l){if(Rf){var h=wp(l);if(h===null)lp(t,r,l,If,a),u_(t,l);else if(dw(h,t,r,a,l))l.stopPropagation();else if(u_(t,l),r&4&&-1<hw.indexOf(t)){for(;h!==null;){var m=xt(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var T=Sr(m.pendingLanes);if(T!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var U=1<<31-Ne(T);C.entanglements[1]|=U,T&=~U}gs(m),(kt&6)===0&&(cf=qn()+500,Pu(0))}}break;case 31:case 13:C=en(m,2),C!==null&&Hr(C,m,2),hf(),Ep(m,2)}if(m=wp(l),m===null&&lp(t,r,l,If,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else lp(t,r,l,null,a)}}function wp(t){return t=vr(t),Sp(t)}var If=null;function Sp(t){if(If=null,t=Rr(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===31){if(t=y(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return If=t,null}function l_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yr()){case Qr:return 2;case Xr:return 8;case gi:case Ds:return 32;case ga:return 268435456;default:return 32}default:return 32}}var Ap=!1,$a=null,Ja=null,Wa=null,Hu=new Map,Fu=new Map,Za=[],hw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function u_(t,r){switch(t){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":Hu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fu.delete(r.pointerId)}}function Ku(t,r,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},r!==null&&(r=xt(r),r!==null&&a_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function dw(t,r,a,l,h){switch(r){case"focusin":return $a=Ku($a,t,r,a,l,h),!0;case"dragenter":return Ja=Ku(Ja,t,r,a,l,h),!0;case"mouseover":return Wa=Ku(Wa,t,r,a,l,h),!0;case"pointerover":var m=h.pointerId;return Hu.set(m,Ku(Hu.get(m)||null,t,r,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,Fu.set(m,Ku(Fu.get(m)||null,t,r,a,l,h)),!0}return!1}function c_(t){var r=Rr(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,or(t.priority,function(){o_(a)});return}}else if(r===31){if(r=y(a),r!==null){t.blockedOn=r,or(t.priority,function(){o_(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xf(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=wp(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Dr=l,a.target.dispatchEvent(l),Dr=null}else return r=xt(a),r!==null&&a_(r),t.blockedOn=a,!1;r.shift()}return!0}function f_(t,r,a){xf(t)&&a.delete(r)}function pw(){Ap=!1,$a!==null&&xf($a)&&($a=null),Ja!==null&&xf(Ja)&&(Ja=null),Wa!==null&&xf(Wa)&&(Wa=null),Hu.forEach(f_),Fu.forEach(f_)}function Of(t,r){t.blockedOn===r&&(t.blockedOn=null,Ap||(Ap=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,pw)))}var Df=null;function h_(t){Df!==t&&(Df=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Df===t&&(Df=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(Sp(l||a)===null)continue;break}var m=xt(a);m!==null&&(t.splice(r,3),r-=3,wd(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Ll(t){function r(U){return Of(U,t)}$a!==null&&Of($a,t),Ja!==null&&Of(Ja,t),Wa!==null&&Of(Wa,t),Hu.forEach(r),Fu.forEach(r);for(var a=0;a<Za.length;a++){var l=Za[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Za.length&&(a=Za[0],a.blockedOn===null);)c_(a),a.blockedOn===null&&Za.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],T=h[Qt]||null;if(typeof m=="function")T||h_(a);else if(T){var C=null;if(m&&m.hasAttribute("formAction")){if(h=m,T=m[Qt]||null)C=T.formAction;else if(Sp(h)!==null)continue}else C=T.action;typeof C=="function"?a[l+1]=C:(a.splice(l,3),l-=3),h_(a)}}}function d_(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(T){return h=T})},focusReset:"manual",scroll:"manual"})}function r(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),h!==null&&(h(),h=null)}}}function Cp(t){this._internalRoot=t}Nf.prototype.render=Cp.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=di();i_(a,l,t,r,null,null)},Nf.prototype.unmount=Cp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;i_(t.current,2,null,t,null,null),hf(),r[Ln]=null}};function Nf(t){this._internalRoot=t}Nf.prototype.unstable_scheduleHydration=function(t){if(t){var r=Vs();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Za.length&&r!==0&&r<Za[a].priority;a++);Za.splice(a,0,t),a===0&&c_(t)}};var p_=e.version;if(p_!=="19.2.0")throw Error(s(527,p_,"19.2.0"));be.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=b(r),t=t!==null?R(t):null,t=t===null?null:t.stateNode,t};var mw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:le,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mf.isDisabled&&Mf.supportsFiber)try{ar=Mf.inject(mw),vn=Mf}catch{}}return Yu.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=Ey,m=Ty,T=wy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError)),r=n_(t,1,!1,null,null,a,l,null,h,m,T,d_),t[Ln]=r.current,op(t),new Cp(r)},Yu.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",m=Ey,T=Ty,C=wy,U=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.formState!==void 0&&(U=a.formState)),r=n_(t,1,!0,r,a??null,l,h,U,m,T,C,d_),r.context=r_(null),a=r.current,l=di(),l=ks(l),h=Ua(l),h.callback=null,ja(a,h,l),a=l,r.current.lanes=a,Ar(r,a),gs(r),t[Ln]=r.current,op(t),new Nf(r)},Yu.version="19.2.0",Yu}var S_;function Cw(){if(S_)return xp.exports;S_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),xp.exports=Aw(),xp.exports}var Rw=Cw();const Iw=bm(Rw);var qf={exports:{}},xw=qf.exports,A_;function Ow(){return A_||(A_=1,(function(i,e){(function(n,s){i.exports=s()})(xw,function(){var n=function(f,p){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,E){g.__proto__=E}||function(g,E){for(var S in E)Object.prototype.hasOwnProperty.call(E,S)&&(g[S]=E[S])})(f,p)},s=function(){return(s=Object.assign||function(f){for(var p,g=1,E=arguments.length;g<E;g++)for(var S in p=arguments[g])Object.prototype.hasOwnProperty.call(p,S)&&(f[S]=p[S]);return f}).apply(this,arguments)};function o(f,p,g){for(var E,S=0,A=p.length;S<A;S++)!E&&S in p||((E=E||Array.prototype.slice.call(p,0,S))[S]=p[S]);return f.concat(E||Array.prototype.slice.call(p))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:yw,d=Object.keys,y=Array.isArray;function _(f,p){return typeof p!="object"||d(p).forEach(function(g){f[g]=p[g]}),f}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var b=Object.getPrototypeOf,R={}.hasOwnProperty;function I(f,p){return R.call(f,p)}function k(f,p){typeof p=="function"&&(p=p(b(f))),(typeof Reflect>"u"?d:Reflect.ownKeys)(p).forEach(function(g){re(f,g,p[g])})}var X=Object.defineProperty;function re(f,p,g,E){X(f,p,_(g&&I(g,"get")&&typeof g.get=="function"?{get:g.get,set:g.set,configurable:!0}:{value:g,configurable:!0,writable:!0},E))}function pe(f){return{from:function(p){return f.prototype=Object.create(p.prototype),re(f.prototype,"constructor",f),{extend:k.bind(null,f.prototype)}}}}var _e=Object.getOwnPropertyDescriptor,ze=[].slice;function Be(f,p,g){return ze.call(f,p,g)}function ke(f,p){return p(f)}function Je(f){if(!f)throw new Error("Assertion Failed")}function yt(f){u.setImmediate?setImmediate(f):setTimeout(f,0)}function Ge(f,p){if(typeof p=="string"&&I(f,p))return f[p];if(!p)return f;if(typeof p!="string"){for(var g=[],E=0,S=p.length;E<S;++E){var A=Ge(f,p[E]);g.push(A)}return g}var O=p.indexOf(".");if(O!==-1){var M=f[p.substr(0,O)];return M==null?void 0:Ge(M,p.substr(O+1))}}function D(f,p,g){if(f&&p!==void 0&&!("isFrozen"in Object&&Object.isFrozen(f)))if(typeof p!="string"&&"length"in p){Je(typeof g!="string"&&"length"in g);for(var E=0,S=p.length;E<S;++E)D(f,p[E],g[E])}else{var A,O,M=p.indexOf(".");M!==-1?(A=p.substr(0,M),(O=p.substr(M+1))===""?g===void 0?y(f)&&!isNaN(parseInt(A))?f.splice(A,1):delete f[A]:f[A]=g:D(M=!(M=f[A])||!I(f,A)?f[A]={}:M,O,g)):g===void 0?y(f)&&!isNaN(parseInt(p))?f.splice(p,1):delete f[p]:f[p]=g}}function N(f){var p,g={};for(p in f)I(f,p)&&(g[p]=f[p]);return g}var V=[].concat;function B(f){return V.apply([],f)}var Qr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(B([8,16,32,64].map(function(f){return["Int","Uint","Float"].map(function(p){return p+f+"Array"})}))).filter(function(f){return u[f]}),z=new Set(Qr.map(function(f){return u[f]})),Z=null;function P(f){return Z=new WeakMap,f=(function p(g){if(!g||typeof g!="object")return g;var E=Z.get(g);if(E)return E;if(y(g)){E=[],Z.set(g,E);for(var S=0,A=g.length;S<A;++S)E.push(p(g[S]))}else if(z.has(g.constructor))E=g;else{var O,M=b(g);for(O in E=M===Object.prototype?{}:Object.create(M),Z.set(g,E),g)I(g,O)&&(E[O]=p(g[O]))}return E})(f),Z=null,f}var qt={}.toString;function Gt(f){return qt.call(f).slice(8,-1)}var le=typeof Symbol<"u"?Symbol.iterator:"@@iterator",be=typeof le=="symbol"?function(f){var p;return f!=null&&(p=f[le])&&p.apply(f)}:function(){return null};function Ue(f,p){return p=f.indexOf(p),0<=p&&f.splice(p,1),0<=p}var at={};function ft(f){var p,g,E,S;if(arguments.length===1){if(y(f))return f.slice();if(this===at&&typeof f=="string")return[f];if(S=be(f)){for(g=[];!(E=S.next()).done;)g.push(E.value);return g}if(f==null)return[f];if(typeof(p=f.length)!="number")return[f];for(g=new Array(p);p--;)g[p]=f[p];return g}for(p=arguments.length,g=new Array(p);p--;)g[p]=arguments[p];return g}var G=typeof Symbol<"u"?function(f){return f[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Yr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Er=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Yr),me={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function xe(f,p){this.name=f,this.message=p}function Pe(f,p){return f+". Errors: "+Object.keys(p).map(function(g){return p[g].toString()}).filter(function(g,E,S){return S.indexOf(g)===E}).join(`
`)}function Qe(f,p,g,E){this.failures=p,this.failedKeys=E,this.successCount=g,this.message=Pe(f,p)}function We(f,p){this.name="BulkError",this.failures=Object.keys(p).map(function(g){return p[g]}),this.failuresByPos=p,this.message=Pe(f,this.failures)}pe(xe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),pe(Qe).from(xe),pe(We).from(xe);var mt=Er.reduce(function(f,p){return f[p]=p+"Error",f},{}),yn=xe,Me=Er.reduce(function(f,p){var g=p+"Error";function E(S,A){this.name=g,S?typeof S=="string"?(this.message="".concat(S).concat(A?`
 `+A:""),this.inner=A||null):typeof S=="object"&&(this.message="".concat(S.name," ").concat(S.message),this.inner=S):(this.message=me[p]||g,this.inner=null)}return pe(E).from(yn),f[p]=E,f},{});Me.Syntax=SyntaxError,Me.Type=TypeError,Me.Range=RangeError;var ns=Yr.reduce(function(f,p){return f[p+"Error"]=Me[p],f},{}),zi=Er.reduce(function(f,p){return["Syntax","Type","Range"].indexOf(p)===-1&&(f[p+"Error"]=Me[p]),f},{});function Ct(){}function pi(f){return f}function mi(f,p){return f==null||f===pi?p:function(g){return p(f(g))}}function Gr(f,p){return function(){f.apply(this,arguments),p.apply(this,arguments)}}function Os(f,p){return f===Ct?p:function(){var g=f.apply(this,arguments);g!==void 0&&(arguments[0]=g);var E=this.onsuccess,S=this.onerror;this.onsuccess=null,this.onerror=null;var A=p.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?Gr(E,this.onsuccess):E),S&&(this.onerror=this.onerror?Gr(S,this.onerror):S),A!==void 0?A:g}}function To(f,p){return f===Ct?p:function(){f.apply(this,arguments);var g=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,p.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?Gr(g,this.onsuccess):g),E&&(this.onerror=this.onerror?Gr(E,this.onerror):E)}}function wo(f,p){return f===Ct?p:function(g){var E=f.apply(this,arguments);_(g,E);var S=this.onsuccess,A=this.onerror;return this.onsuccess=null,this.onerror=null,g=p.apply(this,arguments),S&&(this.onsuccess=this.onsuccess?Gr(S,this.onsuccess):S),A&&(this.onerror=this.onerror?Gr(A,this.onerror):A),E===void 0?g===void 0?void 0:g:_(E,g)}}function dn(f,p){return f===Ct?p:function(){return p.apply(this,arguments)!==!1&&f.apply(this,arguments)}}function rn(f,p){return f===Ct?p:function(){var g=f.apply(this,arguments);if(g&&typeof g.then=="function"){for(var E=this,S=arguments.length,A=new Array(S);S--;)A[S]=arguments[S];return g.then(function(){return p.apply(E,A)})}return p.apply(this,arguments)}}zi.ModifyError=Qe,zi.DexieError=xe,zi.BulkError=We;var Pn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ol(f){Pn=f}var rs={},qn=100,Qr=typeof Promise>"u"?[]:(function(){var f=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[f,b(f),f];var p=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[p,b(p),f]})(),Yr=Qr[0],Er=Qr[1],Qr=Qr[2],Er=Er&&Er.then,Xr=Yr&&Yr.constructor,gi=!!Qr,Ds=function(f,p){is.push([f,p]),Ns&&(queueMicrotask(ll),Ns=!1)},ga=!0,Ns=!0,yi=[],ar=[],vn=pi,_n={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ct,pgp:!1,env:{},finalize:Ct},Ne=_n,is=[],wr=0,Ms=[];function Ie(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var p=this._PSD=Ne;if(typeof f!="function"){if(f!==rs)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Sr(this,this._value))}this._state=null,this._value=null,++p.ref,(function g(E,S){try{S(function(A){if(E._state===null){if(A===E)throw new TypeError("A promise cannot be resolved with itself.");var O=E._lib&&$n();A&&typeof A.then=="function"?g(E,function(M,q){A instanceof Ie?A._then(M,q):A.then(M,q)}):(E._state=!0,E._value=A,$r(E)),O&&Ar()}},Sr.bind(null,E))}catch(A){Sr(E,A)}})(this,f)}var Bi={get:function(){var f=Ne,p=or;function g(E,S){var A=this,O=!f.global&&(f!==Ne||p!==or),M=O&&!Ln(),q=new Ie(function(H,$){yr(A,new sn(Ps(E,f,O,M),Ps(S,f,O,M),H,$,f))});return this._consoleTask&&(q._consoleTask=this._consoleTask),q}return g.prototype=rs,g},set:function(f){re(this,"then",f&&f.prototype===rs?Bi:{get:function(){return f},set:Bi.set})}};function sn(f,p,g,E,S){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof p=="function"?p:null,this.resolve=g,this.reject=E,this.psd=S}function Sr(f,p){var g,E;ar.push(p),f._state===null&&(g=f._lib&&$n(),p=vn(p),f._state=!1,f._value=p,E=f,yi.some(function(S){return S._value===E._value})||yi.push(E),$r(f),g&&Ar())}function $r(f){var p=f._listeners;f._listeners=[];for(var g=0,E=p.length;g<E;++g)yr(f,p[g]);var S=f._PSD;--S.ref||S.finalize(),wr===0&&(++wr,Ds(function(){--wr==0&&So()},[]))}function yr(f,p){if(f._state!==null){var g=f._state?p.onFulfilled:p.onRejected;if(g===null)return(f._state?p.resolve:p.reject)(f._value);++p.psd.ref,++wr,Ds(uu,[g,f,p])}else f._listeners.push(p)}function uu(f,p,g){try{var E,S=p._value;!p._state&&ar.length&&(ar=[]),E=Pn&&p._consoleTask?p._consoleTask.run(function(){return f(S)}):f(S),p._state||ar.indexOf(S)!==-1||(function(A){for(var O=yi.length;O;)if(yi[--O]._value===A._value)return yi.splice(O,1)})(p),g.resolve(E)}catch(A){g.reject(A)}finally{--wr==0&&So(),--g.psd.ref||g.psd.finalize()}}function ll(){Hn(_n,function(){$n()&&Ar()})}function $n(){var f=ga;return Ns=ga=!1,f}function Ar(){var f,p,g;do for(;0<is.length;)for(f=is,is=[],g=f.length,p=0;p<g;++p){var E=f[p];E[0].apply(null,E[1])}while(0<is.length);Ns=ga=!0}function So(){var f=yi;yi=[],f.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var p=Ms.slice(0),g=p.length;g;)p[--g]()}function vi(f){return new Ie(rs,!1,f)}function Vt(f,p){var g=Ne;return function(){var E=$n(),S=Ne;try{return Wr(g,!0),f.apply(this,arguments)}catch(A){p&&p(A)}finally{Wr(S,!1),E&&Ar()}}}k(Ie.prototype,{then:Bi,_then:function(f,p){yr(this,new sn(null,null,f,p,Ne))},catch:function(f){if(arguments.length===1)return this.then(null,f);var p=f,g=arguments[1];return typeof p=="function"?this.then(null,function(E){return(E instanceof p?g:vi)(E)}):this.then(null,function(E){return(E&&E.name===p?g:vi)(E)})},finally:function(f){return this.then(function(p){return Ie.resolve(f()).then(function(){return p})},function(p){return Ie.resolve(f()).then(function(){return vi(p)})})},timeout:function(f,p){var g=this;return f<1/0?new Ie(function(E,S){var A=setTimeout(function(){return S(new Me.Timeout(p))},f);g.then(E,S).finally(clearTimeout.bind(null,A))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&re(Ie.prototype,Symbol.toStringTag,"Dexie.Promise"),_n.env=Ao(),k(Ie,{all:function(){var f=ft.apply(null,arguments).map(qi);return new Ie(function(p,g){f.length===0&&p([]);var E=f.length;f.forEach(function(S,A){return Ie.resolve(S).then(function(O){f[A]=O,--E||p(f)},g)})})},resolve:function(f){return f instanceof Ie?f:f&&typeof f.then=="function"?new Ie(function(p,g){f.then(p,g)}):new Ie(rs,!0,f)},reject:vi,race:function(){var f=ft.apply(null,arguments).map(qi);return new Ie(function(p,g){f.map(function(E){return Ie.resolve(E).then(p,g)})})},PSD:{get:function(){return Ne},set:function(f){return Ne=f}},totalEchoes:{get:function(){return or}},newPSD:Lt,usePSD:Hn,scheduler:{get:function(){return Ds},set:function(f){Ds=f}},rejectionMapper:{get:function(){return vn},set:function(f){vn=f}},follow:function(f,p){return new Ie(function(g,E){return Lt(function(S,A){var O=Ne;O.unhandleds=[],O.onunhandled=A,O.finalize=Gr(function(){var M,q=this;M=function(){q.unhandleds.length===0?S():A(q.unhandleds[0])},Ms.push(function H(){M(),Ms.splice(Ms.indexOf(H),1)}),++wr,Ds(function(){--wr==0&&So()},[])},O.finalize),f()},p,g,E)})}}),Xr&&(Xr.allSettled&&re(Ie,"allSettled",function(){var f=ft.apply(null,arguments).map(qi);return new Ie(function(p){f.length===0&&p([]);var g=f.length,E=new Array(g);f.forEach(function(S,A){return Ie.resolve(S).then(function(O){return E[A]={status:"fulfilled",value:O}},function(O){return E[A]={status:"rejected",reason:O}}).then(function(){return--g||p(E)})})})}),Xr.any&&typeof AggregateError<"u"&&re(Ie,"any",function(){var f=ft.apply(null,arguments).map(qi);return new Ie(function(p,g){f.length===0&&g(new AggregateError([]));var E=f.length,S=new Array(E);f.forEach(function(A,O){return Ie.resolve(A).then(function(M){return p(M)},function(M){S[O]=M,--E||g(new AggregateError(S))})})})}),Xr.withResolvers&&(Ie.withResolvers=Xr.withResolvers));var Zt={awaits:0,echoes:0,id:0},ks=0,Cr=[],Vs=0,or=0,Jr=0;function Lt(f,p,g,E){var S=Ne,A=Object.create(S);return A.parent=S,A.ref=0,A.global=!1,A.id=++Jr,_n.env,A.env=gi?{Promise:Ie,PromiseProp:{value:Ie,configurable:!0,writable:!0},all:Ie.all,race:Ie.race,allSettled:Ie.allSettled,any:Ie.any,resolve:Ie.resolve,reject:Ie.reject}:{},p&&_(A,p),++S.ref,A.finalize=function(){--this.parent.ref||this.parent.finalize()},E=Hn(A,f,g,E),A.ref===0&&A.finalize(),E}function Qt(){return Zt.id||(Zt.id=++ks),++Zt.awaits,Zt.echoes+=qn,Zt.id}function Ln(){return!!Zt.awaits&&(--Zt.awaits==0&&(Zt.id=0),Zt.echoes=Zt.awaits*qn,!0)}function qi(f){return Zt.echoes&&f&&f.constructor===Xr?(Qt(),f.then(function(p){return Ln(),p},function(p){return Ln(),xt(p)})):f}function cu(){var f=Cr[Cr.length-1];Cr.pop(),Wr(f,!1)}function Wr(f,p){var g,E=Ne;(p?!Zt.echoes||Vs++&&f===Ne:!Vs||--Vs&&f===Ne)||queueMicrotask(p?(function(S){++or,Zt.echoes&&--Zt.echoes!=0||(Zt.echoes=Zt.awaits=Zt.id=0),Cr.push(Ne),Wr(S,!0)}).bind(null,f):cu),f!==Ne&&(Ne=f,E===_n&&(_n.env=Ao()),gi&&(g=_n.env.Promise,p=f.env,(E.global||f.global)&&(Object.defineProperty(u,"Promise",p.PromiseProp),g.all=p.all,g.race=p.race,g.resolve=p.resolve,g.reject=p.reject,p.allSettled&&(g.allSettled=p.allSettled),p.any&&(g.any=p.any))))}function Ao(){var f=u.Promise;return gi?{Promise:f,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:f.all,race:f.race,allSettled:f.allSettled,any:f.any,resolve:f.resolve,reject:f.reject}:{}}function Hn(f,p,g,E,S){var A=Ne;try{return Wr(f,!0),p(g,E,S)}finally{Wr(A,!1)}}function Ps(f,p,g,E){return typeof f!="function"?f:function(){var S=Ne;g&&Qt(),Wr(p,!0);try{return f.apply(this,arguments)}finally{Wr(S,!1),E&&queueMicrotask(Ln)}}}function Rr(f){Promise===Xr&&Zt.echoes===0?Vs===0?f():enqueueNativeMicroTask(f):setTimeout(f,0)}(""+Er).indexOf("[native code]")===-1&&(Qt=Ln=Ct);var xt=Ie.reject,bn="",Cn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",an="String expected.",_i=[],ss="__dbnames",Ir="readonly",xr="readwrite";function Zr(f,p){return f?p?function(){return f.apply(this,arguments)&&p.apply(this,arguments)}:f:p}var ya={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function as(f){return typeof f!="string"||/\./.test(f)?function(p){return p}:function(p){return p[f]===void 0&&f in p&&delete(p=P(p))[f],p}}function Co(){throw Me.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ot(f,p){try{var g=lr(f),E=lr(p);if(g!==E)return g==="Array"?1:E==="Array"?-1:g==="binary"?1:E==="binary"?-1:g==="string"?1:E==="string"?-1:g==="Date"?1:E!=="Date"?NaN:-1;switch(g){case"number":case"Date":case"string":return p<f?1:f<p?-1:0;case"binary":return(function(S,A){for(var O=S.length,M=A.length,q=O<M?O:M,H=0;H<q;++H)if(S[H]!==A[H])return S[H]<A[H]?-1:1;return O===M?0:O<M?-1:1})(on(f),on(p));case"Array":return(function(S,A){for(var O=S.length,M=A.length,q=O<M?O:M,H=0;H<q;++H){var $=ot(S[H],A[H]);if($!==0)return $}return O===M?0:O<M?-1:1})(f,p)}}catch{}return NaN}function lr(f){var p=typeof f;return p!="object"?p:ArrayBuffer.isView(f)?"binary":(f=Gt(f),f==="ArrayBuffer"?"binary":f)}function on(f){return f instanceof Uint8Array?f:ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(f)}function ln(f,p,g){var E=f.schema.yProps;return E?(p&&0<g.numFailures&&(p=p.filter(function(S,A){return!g.failures[A]})),Promise.all(E.map(function(S){return S=S.updatesTable,p?f.db.table(S).where("k").anyOf(p).delete():f.db.table(S).clear()})).then(function(){return g})):g}var Or=(va.prototype.execute=function(f){var p=this["@@propmod"];if(p.add!==void 0){var g=p.add;if(y(g))return o(o([],y(f)?f:[],!0),g).sort();if(typeof g=="number")return(Number(f)||0)+g;if(typeof g=="bigint")try{return BigInt(f)+g}catch{return BigInt(0)+g}throw new TypeError("Invalid term ".concat(g))}if(p.remove!==void 0){var E=p.remove;if(y(E))return y(f)?f.filter(function(S){return!E.includes(S)}).sort():[];if(typeof E=="number")return Number(f)-E;if(typeof E=="bigint")try{return BigInt(f)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return g=(g=p.replacePrefix)===null||g===void 0?void 0:g[0],g&&typeof f=="string"&&f.startsWith(g)?p.replacePrefix[1]+f.substring(g.length):f},va);function va(f){this["@@propmod"]=f}function Dt(f,p){for(var g=d(p),E=g.length,S=!1,A=0;A<E;++A){var O=g[A],M=p[O],q=Ge(f,O);M instanceof Or?(D(f,O,M.execute(q)),S=!0):q!==M&&(D(f,O,M),S=!0)}return S}var os=(vt.prototype._trans=function(f,p,g){var E=this._tx||Ne.trans,S=this.name,A=Pn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(f==="readonly"?"read":"write"," ").concat(this.name));function O(H,$,j){if(!j.schema[S])throw new Me.NotFound("Table "+S+" not part of transaction");return p(j.idbtrans,j)}var M=$n();try{var q=E&&E.db._novip===this.db._novip?E===Ne.trans?E._promise(f,O,g):Lt(function(){return E._promise(f,O,g)},{trans:E,transless:Ne.transless||Ne}):(function H($,j,W,F){if($.idbdb&&($._state.openComplete||Ne.letThrough||$._vip)){var Y=$._createTransaction(j,W,$._dbSchema);try{Y.create(),$._state.PR1398_maxLoop=3}catch(Q){return Q.name===mt.InvalidState&&$.isOpen()&&0<--$._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),$.close({disableAutoOpen:!1}),$.open().then(function(){return H($,j,W,F)})):xt(Q)}return Y._promise(j,function(Q,J){return Lt(function(){return Ne.trans=Y,F(Q,J,Y)})}).then(function(Q){if(j==="readwrite")try{Y.idbtrans.commit()}catch{}return j==="readonly"?Q:Y._completion.then(function(){return Q})})}if($._state.openComplete)return xt(new Me.DatabaseClosed($._state.dbOpenError));if(!$._state.isBeingOpened){if(!$._state.autoOpen)return xt(new Me.DatabaseClosed);$.open().catch(Ct)}return $._state.dbReadyPromise.then(function(){return H($,j,W,F)})})(this.db,f,[this.name],O);return A&&(q._consoleTask=A,q=q.catch(function(H){return console.trace(H),xt(H)})),q}finally{M&&Ar()}},vt.prototype.get=function(f,p){var g=this;return f&&f.constructor===Object?this.where(f).first(p):f==null?xt(new Me.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return g.core.get({trans:E,key:f}).then(function(S){return g.hook.reading.fire(S)})}).then(p)},vt.prototype.where=function(f){if(typeof f=="string")return new this.db.WhereClause(this,f);if(y(f))return new this.db.WhereClause(this,"[".concat(f.join("+"),"]"));var p=d(f);if(p.length===1)return this.where(p[0]).equals(f[p[0]]);var g=this.schema.indexes.concat(this.schema.primKey).filter(function(M){if(M.compound&&p.every(function(H){return 0<=M.keyPath.indexOf(H)})){for(var q=0;q<p.length;++q)if(p.indexOf(M.keyPath[q])===-1)return!1;return!0}return!1}).sort(function(M,q){return M.keyPath.length-q.keyPath.length})[0];if(g&&this.db._maxKey!==bn){var A=g.keyPath.slice(0,p.length);return this.where(A).equals(A.map(function(q){return f[q]}))}!g&&Pn&&console.warn("The query ".concat(JSON.stringify(f)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(p.join("+"),"]"));var E=this.schema.idxByName;function S(M,q){return ot(M,q)===0}var O=p.reduce(function(j,q){var H=j[0],$=j[1],j=E[q],W=f[q];return[H||j,H||!j?Zr($,j&&j.multi?function(F){return F=Ge(F,q),y(F)&&F.some(function(Y){return S(W,Y)})}:function(F){return S(W,Ge(F,q))}):$]},[null,null]),A=O[0],O=O[1];return A?this.where(A.name).equals(f[A.keyPath]).filter(O):g?this.filter(O):this.where(p).equals("")},vt.prototype.filter=function(f){return this.toCollection().and(f)},vt.prototype.count=function(f){return this.toCollection().count(f)},vt.prototype.offset=function(f){return this.toCollection().offset(f)},vt.prototype.limit=function(f){return this.toCollection().limit(f)},vt.prototype.each=function(f){return this.toCollection().each(f)},vt.prototype.toArray=function(f){return this.toCollection().toArray(f)},vt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},vt.prototype.orderBy=function(f){return new this.db.Collection(new this.db.WhereClause(this,y(f)?"[".concat(f.join("+"),"]"):f))},vt.prototype.reverse=function(){return this.toCollection().reverse()},vt.prototype.mapToClass=function(f){var p,g=this.db,E=this.name;function S(){return p!==null&&p.apply(this,arguments)||this}(this.schema.mappedClass=f).prototype instanceof Co&&((function(q,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function $(){this.constructor=q}n(q,H),q.prototype=H===null?Object.create(H):($.prototype=H.prototype,new $)})(S,p=f),Object.defineProperty(S.prototype,"db",{get:function(){return g},enumerable:!1,configurable:!0}),S.prototype.table=function(){return E},f=S);for(var A=new Set,O=f.prototype;O;O=b(O))Object.getOwnPropertyNames(O).forEach(function(q){return A.add(q)});function M(q){if(!q)return q;var H,$=Object.create(f.prototype);for(H in q)if(!A.has(H))try{$[H]=q[H]}catch{}return $}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=M,this.hook("reading",M),f},vt.prototype.defineClass=function(){return this.mapToClass(function(f){_(this,f)})},vt.prototype.add=function(f,p){var g=this,E=this.schema.primKey,S=E.auto,A=E.keyPath,O=f;return A&&S&&(O=as(A)(f)),this._trans("readwrite",function(M){return g.core.mutate({trans:M,type:"add",keys:p!=null?[p]:null,values:[O]})}).then(function(M){return M.numFailures?Ie.reject(M.failures[0]):M.lastResult}).then(function(M){if(A)try{D(f,A,M)}catch{}return M})},vt.prototype.upsert=function(f,p){var g=this,E=this.schema.primKey.keyPath;return this._trans("readwrite",function(S){return g.core.get({trans:S,key:f}).then(function(A){var O=A??{};return Dt(O,p),E&&D(O,E,f),g.core.mutate({trans:S,type:"put",values:[O],keys:[f],upsert:!0,updates:{keys:[f],changeSpecs:[p]}}).then(function(M){return M.numFailures?Ie.reject(M.failures[0]):!!A})})})},vt.prototype.update=function(f,p){return typeof f!="object"||y(f)?this.where(":id").equals(f).modify(p):(f=Ge(f,this.schema.primKey.keyPath),f===void 0?xt(new Me.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(f).modify(p))},vt.prototype.put=function(f,p){var g=this,E=this.schema.primKey,S=E.auto,A=E.keyPath,O=f;return A&&S&&(O=as(A)(f)),this._trans("readwrite",function(M){return g.core.mutate({trans:M,type:"put",values:[O],keys:p!=null?[p]:null})}).then(function(M){return M.numFailures?Ie.reject(M.failures[0]):M.lastResult}).then(function(M){if(A)try{D(f,A,M)}catch{}return M})},vt.prototype.delete=function(f){var p=this;return this._trans("readwrite",function(g){return p.core.mutate({trans:g,type:"delete",keys:[f]}).then(function(E){return ln(p,[f],E)}).then(function(E){return E.numFailures?Ie.reject(E.failures[0]):void 0})})},vt.prototype.clear=function(){var f=this;return this._trans("readwrite",function(p){return f.core.mutate({trans:p,type:"deleteRange",range:ya}).then(function(g){return ln(f,null,g)})}).then(function(p){return p.numFailures?Ie.reject(p.failures[0]):void 0})},vt.prototype.bulkGet=function(f){var p=this;return this._trans("readonly",function(g){return p.core.getMany({keys:f,trans:g}).then(function(E){return E.map(function(S){return p.hook.reading.fire(S)})})})},vt.prototype.bulkAdd=function(f,p,g){var E=this,S=Array.isArray(p)?p:void 0,A=(g=g||(S?void 0:p))?g.allKeys:void 0;return this._trans("readwrite",function(O){var H=E.schema.primKey,M=H.auto,H=H.keyPath;if(H&&S)throw new Me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(S&&S.length!==f.length)throw new Me.InvalidArgument("Arguments objects and keys must have the same length");var q=f.length,H=H&&M?f.map(as(H)):f;return E.core.mutate({trans:O,type:"add",keys:S,values:H,wantResults:A}).then(function(Y){var j=Y.numFailures,W=Y.results,F=Y.lastResult,Y=Y.failures;if(j===0)return A?W:F;throw new We("".concat(E.name,".bulkAdd(): ").concat(j," of ").concat(q," operations failed"),Y)})})},vt.prototype.bulkPut=function(f,p,g){var E=this,S=Array.isArray(p)?p:void 0,A=(g=g||(S?void 0:p))?g.allKeys:void 0;return this._trans("readwrite",function(O){var H=E.schema.primKey,M=H.auto,H=H.keyPath;if(H&&S)throw new Me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(S&&S.length!==f.length)throw new Me.InvalidArgument("Arguments objects and keys must have the same length");var q=f.length,H=H&&M?f.map(as(H)):f;return E.core.mutate({trans:O,type:"put",keys:S,values:H,wantResults:A}).then(function(Y){var j=Y.numFailures,W=Y.results,F=Y.lastResult,Y=Y.failures;if(j===0)return A?W:F;throw new We("".concat(E.name,".bulkPut(): ").concat(j," of ").concat(q," operations failed"),Y)})})},vt.prototype.bulkUpdate=function(f){var p=this,g=this.core,E=f.map(function(O){return O.key}),S=f.map(function(O){return O.changes}),A=[];return this._trans("readwrite",function(O){return g.getMany({trans:O,keys:E,cache:"clone"}).then(function(M){var q=[],H=[];f.forEach(function(j,W){var F=j.key,Y=j.changes,Q=M[W];if(Q){for(var J=0,ne=Object.keys(Y);J<ne.length;J++){var ae=ne[J],fe=Y[ae];if(ae===p.schema.primKey.keyPath){if(ot(fe,F)!==0)throw new Me.Constraint("Cannot update primary key in bulkUpdate()")}else D(Q,ae,fe)}A.push(W),q.push(F),H.push(Q)}});var $=q.length;return g.mutate({trans:O,type:"put",keys:q,values:H,updates:{keys:E,changeSpecs:S}}).then(function(j){var W=j.numFailures,F=j.failures;if(W===0)return $;for(var Y=0,Q=Object.keys(F);Y<Q.length;Y++){var J,ne=Q[Y],ae=A[Number(ne)];ae!=null&&(J=F[ne],delete F[ne],F[ae]=J)}throw new We("".concat(p.name,".bulkUpdate(): ").concat(W," of ").concat($," operations failed"),F)})})})},vt.prototype.bulkDelete=function(f){var p=this,g=f.length;return this._trans("readwrite",function(E){return p.core.mutate({trans:E,type:"delete",keys:f}).then(function(S){return ln(p,f,S)})}).then(function(O){var S=O.numFailures,A=O.lastResult,O=O.failures;if(S===0)return A;throw new We("".concat(p.name,".bulkDelete(): ").concat(S," of ").concat(g," operations failed"),O)})},vt);function vt(){}function ei(f){function p(O,M){if(M){for(var q=arguments.length,H=new Array(q-1);--q;)H[q-1]=arguments[q];return g[O].subscribe.apply(null,H),f}if(typeof O=="string")return g[O]}var g={};p.addEventType=A;for(var E=1,S=arguments.length;E<S;++E)A(arguments[E]);return p;function A(O,M,q){if(typeof O!="object"){var H;M=M||dn;var $={subscribers:[],fire:q=q||Ct,subscribe:function(j){$.subscribers.indexOf(j)===-1&&($.subscribers.push(j),$.fire=M($.fire,j))},unsubscribe:function(j){$.subscribers=$.subscribers.filter(function(W){return W!==j}),$.fire=$.subscribers.reduce(M,q)}};return g[O]=p[O]=$}d(H=O).forEach(function(j){var W=H[j];if(y(W))A(j,H[j][0],H[j][1]);else{if(W!=="asap")throw new Me.InvalidArgument("Invalid event config");var F=A(j,pi,function(){for(var Y=arguments.length,Q=new Array(Y);Y--;)Q[Y]=arguments[Y];F.subscribers.forEach(function(J){yt(function(){J.apply(null,Q)})})})}})}}function Rn(f,p){return pe(p).from({prototype:f}),p}function ti(f,p){return!(f.filter||f.algorithm||f.or)&&(p?f.justLimit:!f.replayFilter)}function _a(f,p){f.filter=Zr(f.filter,p)}function Ls(f,p,g){var E=f.replayFilter;f.replayFilter=E?function(){return Zr(E(),p())}:p,f.justLimit=g&&!E}function ni(f,p){if(f.isPrimKey)return p.primaryKey;var g=p.getIndexByKeyPath(f.index);if(!g)throw new Me.Schema("KeyPath "+f.index+" on object store "+p.name+" is not indexed");return g}function Ro(f,p,g){var E=ni(f,p.schema);return p.openCursor({trans:g,values:!f.keysOnly,reverse:f.dir==="prev",unique:!!f.unique,query:{index:E,range:f.range}})}function ri(f,p,g,E){var S=f.replayFilter?Zr(f.filter,f.replayFilter()):f.filter;if(f.or){var A={},O=function(M,q,H){var $,j;S&&!S(q,H,function(W){return q.stop(W)},function(W){return q.fail(W)})||((j=""+($=q.primaryKey))=="[object ArrayBuffer]"&&(j=""+new Uint8Array($)),I(A,j)||(A[j]=!0,p(M,q,H)))};return Promise.all([f.or._iterate(O,g),Jn(Ro(f,E,g),f.algorithm,O,!f.keysOnly&&f.valueMapper)])}return Jn(Ro(f,E,g),Zr(f.algorithm,S),p,!f.keysOnly&&f.valueMapper)}function Jn(f,p,g,E){var S=Vt(E?function(A,O,M){return g(E(A),O,M)}:g);return f.then(function(A){if(A)return A.start(function(){var O=function(){return A.continue()};p&&!p(A,function(M){return O=M},function(M){A.stop(M),O=Ct},function(M){A.fail(M),O=Ct})||S(A.value,A,function(M){return O=M}),O()})})}var ul=(gt.prototype._read=function(f,p){var g=this._ctx;return g.error?g.table._trans(null,xt.bind(null,g.error)):g.table._trans("readonly",f).then(p)},gt.prototype._write=function(f){var p=this._ctx;return p.error?p.table._trans(null,xt.bind(null,p.error)):p.table._trans("readwrite",f,"locked")},gt.prototype._addAlgorithm=function(f){var p=this._ctx;p.algorithm=Zr(p.algorithm,f)},gt.prototype._iterate=function(f,p){return ri(this._ctx,f,p,this._ctx.table.core)},gt.prototype.clone=function(f){var p=Object.create(this.constructor.prototype),g=Object.create(this._ctx);return f&&_(g,f),p._ctx=g,p},gt.prototype.raw=function(){return this._ctx.valueMapper=null,this},gt.prototype.each=function(f){var p=this._ctx;return this._read(function(g){return ri(p,f,g,p.table.core)})},gt.prototype.count=function(f){var p=this;return this._read(function(g){var E=p._ctx,S=E.table.core;if(ti(E,!0))return S.count({trans:g,query:{index:ni(E,S.schema),range:E.range}}).then(function(O){return Math.min(O,E.limit)});var A=0;return ri(E,function(){return++A,!1},g,S).then(function(){return A})}).then(f)},gt.prototype.sortBy=function(f,p){var g=f.split(".").reverse(),E=g[0],S=g.length-1;function A(q,H){return H?A(q[g[H]],H-1):q[E]}var O=this._ctx.dir==="next"?1:-1;function M(q,H){return ot(A(q,S),A(H,S))*O}return this.toArray(function(q){return q.sort(M)}).then(p)},gt.prototype.toArray=function(f){var p=this;return this._read(function(g){var E=p._ctx;if(E.dir==="next"&&ti(E,!0)&&0<E.limit){var S=E.valueMapper,A=ni(E,E.table.core.schema);return E.table.core.query({trans:g,limit:E.limit,values:!0,query:{index:A,range:E.range}}).then(function(M){return M=M.result,S?M.map(S):M})}var O=[];return ri(E,function(M){return O.push(M)},g,E.table.core).then(function(){return O})},f)},gt.prototype.offset=function(f){var p=this._ctx;return f<=0||(p.offset+=f,ti(p)?Ls(p,function(){var g=f;return function(E,S){return g===0||(g===1?--g:S(function(){E.advance(g),g=0}),!1)}}):Ls(p,function(){var g=f;return function(){return--g<0}})),this},gt.prototype.limit=function(f){return this._ctx.limit=Math.min(this._ctx.limit,f),Ls(this._ctx,function(){var p=f;return function(g,E,S){return--p<=0&&E(S),0<=p}},!0),this},gt.prototype.until=function(f,p){return _a(this._ctx,function(g,E,S){return!f(g.value)||(E(S),p)}),this},gt.prototype.first=function(f){return this.limit(1).toArray(function(p){return p[0]}).then(f)},gt.prototype.last=function(f){return this.reverse().first(f)},gt.prototype.filter=function(f){var p;return _a(this._ctx,function(g){return f(g.value)}),(p=this._ctx).isMatch=Zr(p.isMatch,f),this},gt.prototype.and=function(f){return this.filter(f)},gt.prototype.or=function(f){return new this.db.WhereClause(this._ctx.table,f,this)},gt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},gt.prototype.desc=function(){return this.reverse()},gt.prototype.eachKey=function(f){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(g,E){f(E.key,E)})},gt.prototype.eachUniqueKey=function(f){return this._ctx.unique="unique",this.eachKey(f)},gt.prototype.eachPrimaryKey=function(f){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(g,E){f(E.primaryKey,E)})},gt.prototype.keys=function(f){var p=this._ctx;p.keysOnly=!p.isMatch;var g=[];return this.each(function(E,S){g.push(S.key)}).then(function(){return g}).then(f)},gt.prototype.primaryKeys=function(f){var p=this._ctx;if(p.dir==="next"&&ti(p,!0)&&0<p.limit)return this._read(function(E){var S=ni(p,p.table.core.schema);return p.table.core.query({trans:E,values:!1,limit:p.limit,query:{index:S,range:p.range}})}).then(function(E){return E.result}).then(f);p.keysOnly=!p.isMatch;var g=[];return this.each(function(E,S){g.push(S.primaryKey)}).then(function(){return g}).then(f)},gt.prototype.uniqueKeys=function(f){return this._ctx.unique="unique",this.keys(f)},gt.prototype.firstKey=function(f){return this.limit(1).keys(function(p){return p[0]}).then(f)},gt.prototype.lastKey=function(f){return this.reverse().firstKey(f)},gt.prototype.distinct=function(){var f=this._ctx,f=f.index&&f.table.schema.idxByName[f.index];if(!f||!f.multi)return this;var p={};return _a(this._ctx,function(S){var E=S.primaryKey.toString(),S=I(p,E);return p[E]=!0,!S}),this},gt.prototype.modify=function(f){var p=this,g=this._ctx;return this._write(function(E){var S=typeof f=="function"?f:function(Q){return Dt(Q,f)},A=g.table.core,H=A.schema.primaryKey,O=H.outbound,M=H.extractKey,q=200,H=p.db._options.modifyChunkSize;H&&(q=typeof H=="object"?H[A.name]||H["*"]||200:H);function $(Q,ae){var ne=ae.failures,ae=ae.numFailures;W+=Q-ae;for(var fe=0,ge=d(ne);fe<ge.length;fe++){var Ae=ge[fe];j.push(ne[Ae])}}var j=[],W=0,F=[],Y=f===ba;return p.clone().primaryKeys().then(function(Q){function J(ae){var fe=Math.min(q,Q.length-ae),ge=Q.slice(ae,ae+fe);return(Y?Promise.resolve([]):A.getMany({trans:E,keys:ge,cache:"immutable"})).then(function(Ae){var De=[],we=[],Re=O?[]:null,Oe=Y?ge:[];if(!Y)for(var Se=0;Se<fe;++Se){var Ve=Ae[Se],Fe={value:P(Ve),primKey:Q[ae+Se]};S.call(Fe,Fe.value,Fe)!==!1&&(Fe.value==null?Oe.push(Q[ae+Se]):O||ot(M(Ve),M(Fe.value))===0?(we.push(Fe.value),O&&Re.push(Q[ae+Se])):(Oe.push(Q[ae+Se]),De.push(Fe.value)))}return Promise.resolve(0<De.length&&A.mutate({trans:E,type:"add",values:De}).then(function(et){for(var lt in et.failures)Oe.splice(parseInt(lt),1);$(De.length,et)})).then(function(){return(0<we.length||ne&&typeof f=="object")&&A.mutate({trans:E,type:"put",keys:Re,values:we,criteria:ne,changeSpec:typeof f!="function"&&f,isAdditionalChunk:0<ae}).then(function(et){return $(we.length,et)})}).then(function(){return(0<Oe.length||ne&&Y)&&A.mutate({trans:E,type:"delete",keys:Oe,criteria:ne,isAdditionalChunk:0<ae}).then(function(et){return ln(g.table,Oe,et)}).then(function(et){return $(Oe.length,et)})}).then(function(){return Q.length>ae+fe&&J(ae+q)})})}var ne=ti(g)&&g.limit===1/0&&(typeof f!="function"||Y)&&{index:g.index,range:g.range};return J(0).then(function(){if(0<j.length)throw new Qe("Error modifying one or more objects",j,W,F);return Q.length})})})},gt.prototype.delete=function(){var f=this._ctx,p=f.range;return!ti(f)||f.table.schema.yProps||!f.isPrimKey&&p.type!==3?this.modify(ba):this._write(function(g){var E=f.table.core.schema.primaryKey,S=p;return f.table.core.count({trans:g,query:{index:E,range:S}}).then(function(A){return f.table.core.mutate({trans:g,type:"deleteRange",range:S}).then(function(q){var M=q.failures,q=q.numFailures;if(q)throw new Qe("Could not delete some values",Object.keys(M).map(function(H){return M[H]}),A-q);return A-q})})})},gt);function gt(){}var ba=function(f,p){return p.value=null};function Ea(f,p){return f<p?-1:f===p?0:1}function cl(f,p){return p<f?-1:f===p?0:1}function pn(f,p,g){return f=f instanceof Hi?new f.Collection(f):f,f._ctx.error=new(g||TypeError)(p),f}function ii(f){return new f.Collection(f,function(){return vr("")}).limit(0)}function ur(f,p,g,E){var S,A,O,M,q,H,$,j=g.length;if(!g.every(function(Y){return typeof Y=="string"}))return pn(f,an);function W(Y){S=Y==="next"?function(J){return J.toUpperCase()}:function(J){return J.toLowerCase()},A=Y==="next"?function(J){return J.toLowerCase()}:function(J){return J.toUpperCase()},O=Y==="next"?Ea:cl;var Q=g.map(function(J){return{lower:A(J),upper:S(J)}}).sort(function(J,ne){return O(J.lower,ne.lower)});M=Q.map(function(J){return J.upper}),q=Q.map(function(J){return J.lower}),$=(H=Y)==="next"?"":E}W("next"),f=new f.Collection(f,function(){return Dr(M[0],q[j-1]+E)}),f._ondirectionchange=function(Y){W(Y)};var F=0;return f._addAlgorithm(function(Y,Q,J){var ne=Y.key;if(typeof ne!="string")return!1;var ae=A(ne);if(p(ae,q,F))return!0;for(var fe=null,ge=F;ge<j;++ge){var Ae=(function(De,we,Re,Oe,Se,Ve){for(var Fe=Math.min(De.length,Oe.length),et=-1,lt=0;lt<Fe;++lt){var Gn=we[lt];if(Gn!==Oe[lt])return Se(De[lt],Re[lt])<0?De.substr(0,lt)+Re[lt]+Re.substr(lt+1):Se(De[lt],Oe[lt])<0?De.substr(0,lt)+Oe[lt]+Re.substr(lt+1):0<=et?De.substr(0,et)+we[et]+Re.substr(et+1):null;Se(De[lt],Gn)<0&&(et=lt)}return Fe<Oe.length&&Ve==="next"?De+Re.substr(De.length):Fe<De.length&&Ve==="prev"?De.substr(0,Re.length):et<0?null:De.substr(0,et)+Oe[et]+Re.substr(et+1)})(ne,ae,M[ge],q[ge],O,H);Ae===null&&fe===null?F=ge+1:(fe===null||0<O(fe,Ae))&&(fe=Ae)}return Q(fe!==null?function(){Y.continue(fe+$)}:J),!1}),f}function Dr(f,p,g,E){return{type:2,lower:f,upper:p,lowerOpen:g,upperOpen:E}}function vr(f){return{type:1,lower:f,upper:f}}var Hi=(Object.defineProperty(Ut.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ut.prototype.between=function(f,p,g,E){g=g!==!1,E=E===!0;try{return 0<this._cmp(f,p)||this._cmp(f,p)===0&&(g||E)&&(!g||!E)?ii(this):new this.Collection(this,function(){return Dr(f,p,!g,!E)})}catch{return pn(this,Cn)}},Ut.prototype.equals=function(f){return f==null?pn(this,Cn):new this.Collection(this,function(){return vr(f)})},Ut.prototype.above=function(f){return f==null?pn(this,Cn):new this.Collection(this,function(){return Dr(f,void 0,!0)})},Ut.prototype.aboveOrEqual=function(f){return f==null?pn(this,Cn):new this.Collection(this,function(){return Dr(f,void 0,!1)})},Ut.prototype.below=function(f){return f==null?pn(this,Cn):new this.Collection(this,function(){return Dr(void 0,f,!1,!0)})},Ut.prototype.belowOrEqual=function(f){return f==null?pn(this,Cn):new this.Collection(this,function(){return Dr(void 0,f)})},Ut.prototype.startsWith=function(f){return typeof f!="string"?pn(this,an):this.between(f,f+bn,!0,!0)},Ut.prototype.startsWithIgnoreCase=function(f){return f===""?this.startsWith(f):ur(this,function(p,g){return p.indexOf(g[0])===0},[f],bn)},Ut.prototype.equalsIgnoreCase=function(f){return ur(this,function(p,g){return p===g[0]},[f],"")},Ut.prototype.anyOfIgnoreCase=function(){var f=ft.apply(at,arguments);return f.length===0?ii(this):ur(this,function(p,g){return g.indexOf(p)!==-1},f,"")},Ut.prototype.startsWithAnyOfIgnoreCase=function(){var f=ft.apply(at,arguments);return f.length===0?ii(this):ur(this,function(p,g){return g.some(function(E){return p.indexOf(E)===0})},f,bn)},Ut.prototype.anyOf=function(){var f=this,p=ft.apply(at,arguments),g=this._cmp;try{p.sort(g)}catch{return pn(this,Cn)}if(p.length===0)return ii(this);var E=new this.Collection(this,function(){return Dr(p[0],p[p.length-1])});E._ondirectionchange=function(A){g=A==="next"?f._ascending:f._descending,p.sort(g)};var S=0;return E._addAlgorithm(function(A,O,M){for(var q=A.key;0<g(q,p[S]);)if(++S===p.length)return O(M),!1;return g(q,p[S])===0||(O(function(){A.continue(p[S])}),!1)}),E},Ut.prototype.notEqual=function(f){return this.inAnyRange([[-1/0,f],[f,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ut.prototype.noneOf=function(){var f=ft.apply(at,arguments);if(f.length===0)return new this.Collection(this);try{f.sort(this._ascending)}catch{return pn(this,Cn)}var p=f.reduce(function(g,E){return g?g.concat([[g[g.length-1][1],E]]):[[-1/0,E]]},null);return p.push([f[f.length-1],this.db._maxKey]),this.inAnyRange(p,{includeLowers:!1,includeUppers:!1})},Ut.prototype.inAnyRange=function(ne,p){var g=this,E=this._cmp,S=this._ascending,A=this._descending,O=this._min,M=this._max;if(ne.length===0)return ii(this);if(!ne.every(function(ae){return ae[0]!==void 0&&ae[1]!==void 0&&S(ae[0],ae[1])<=0}))return pn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Me.InvalidArgument);var q=!p||p.includeLowers!==!1,H=p&&p.includeUppers===!0,$,j=S;function W(ae,fe){return j(ae[0],fe[0])}try{($=ne.reduce(function(ae,fe){for(var ge=0,Ae=ae.length;ge<Ae;++ge){var De=ae[ge];if(E(fe[0],De[1])<0&&0<E(fe[1],De[0])){De[0]=O(De[0],fe[0]),De[1]=M(De[1],fe[1]);break}}return ge===Ae&&ae.push(fe),ae},[])).sort(W)}catch{return pn(this,Cn)}var F=0,Y=H?function(ae){return 0<S(ae,$[F][1])}:function(ae){return 0<=S(ae,$[F][1])},Q=q?function(ae){return 0<A(ae,$[F][0])}:function(ae){return 0<=A(ae,$[F][0])},J=Y,ne=new this.Collection(this,function(){return Dr($[0][0],$[$.length-1][1],!q,!H)});return ne._ondirectionchange=function(ae){j=ae==="next"?(J=Y,S):(J=Q,A),$.sort(W)},ne._addAlgorithm(function(ae,fe,ge){for(var Ae,De=ae.key;J(De);)if(++F===$.length)return fe(ge),!1;return!Y(Ae=De)&&!Q(Ae)||(g._cmp(De,$[F][1])===0||g._cmp(De,$[F][0])===0||fe(function(){j===S?ae.continue($[F][0]):ae.continue($[F][1])}),!1)}),ne},Ut.prototype.startsWithAnyOf=function(){var f=ft.apply(at,arguments);return f.every(function(p){return typeof p=="string"})?f.length===0?ii(this):this.inAnyRange(f.map(function(p){return[p,p+bn]})):pn(this,"startsWithAnyOf() only works with strings")},Ut);function Ut(){}function Fn(f){return Vt(function(p){return bi(p),f(p.target.error),!1})}function bi(f){f.stopPropagation&&f.stopPropagation(),f.preventDefault&&f.preventDefault()}var Nr="storagemutated",_r="x-storagemutated-1",En=ei(null,Nr),Us=(ht.prototype._lock=function(){return Je(!Ne.global),++this._reculock,this._reculock!==1||Ne.global||(Ne.lockOwnerFor=this),this},ht.prototype._unlock=function(){if(Je(!Ne.global),--this._reculock==0)for(Ne.global||(Ne.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var f=this._blockedFuncs.shift();try{Hn(f[1],f[0])}catch{}}return this},ht.prototype._locked=function(){return this._reculock&&Ne.lockOwnerFor!==this},ht.prototype.create=function(f){var p=this;if(!this.mode)return this;var g=this.db.idbdb,E=this.db._state.dbOpenError;if(Je(!this.idbtrans),!f&&!g)switch(E&&E.name){case"DatabaseClosedError":throw new Me.DatabaseClosed(E);case"MissingAPIError":throw new Me.MissingAPI(E.message,E);default:throw new Me.OpenFailed(E)}if(!this.active)throw new Me.TransactionInactive;return Je(this._completion._state===null),(f=this.idbtrans=f||(this.db.core||g).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Vt(function(S){bi(S),p._reject(f.error)}),f.onabort=Vt(function(S){bi(S),p.active&&p._reject(new Me.Abort(f.error)),p.active=!1,p.on("abort").fire(S)}),f.oncomplete=Vt(function(){p.active=!1,p._resolve(),"mutatedParts"in f&&En.storagemutated.fire(f.mutatedParts)}),this},ht.prototype._promise=function(f,p,g){var E=this;if(f==="readwrite"&&this.mode!=="readwrite")return xt(new Me.ReadOnly("Transaction is readonly"));if(!this.active)return xt(new Me.TransactionInactive);if(this._locked())return new Ie(function(A,O){E._blockedFuncs.push([function(){E._promise(f,p,g).then(A,O)},Ne])});if(g)return Lt(function(){var A=new Ie(function(O,M){E._lock();var q=p(O,M,E);q&&q.then&&q.then(O,M)});return A.finally(function(){return E._unlock()}),A._lib=!0,A});var S=new Ie(function(A,O){var M=p(A,O,E);M&&M.then&&M.then(A,O)});return S._lib=!0,S},ht.prototype._root=function(){return this.parent?this.parent._root():this},ht.prototype.waitFor=function(f){var p,g=this._root(),E=Ie.resolve(f);g._waitingFor?g._waitingFor=g._waitingFor.then(function(){return E}):(g._waitingFor=E,g._waitingQueue=[],p=g.idbtrans.objectStore(g.storeNames[0]),(function A(){for(++g._spinCount;g._waitingQueue.length;)g._waitingQueue.shift()();g._waitingFor&&(p.get(-1/0).onsuccess=A)})());var S=g._waitingFor;return new Ie(function(A,O){E.then(function(M){return g._waitingQueue.push(Vt(A.bind(null,M)))},function(M){return g._waitingQueue.push(Vt(O.bind(null,M)))}).finally(function(){g._waitingFor===S&&(g._waitingFor=null)})})},ht.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Me.Abort))},ht.prototype.table=function(f){var p=this._memoizedTables||(this._memoizedTables={});if(I(p,f))return p[f];var g=this.schema[f];if(!g)throw new Me.NotFound("Table "+f+" not part of transaction");return g=new this.db.Table(f,g,this),g.core=this.db.core.table(f),p[f]=g},ht);function ht(){}function Mr(f,p,g,E,S,A,O,M){return{name:f,keyPath:p,unique:g,multi:E,auto:S,compound:A,src:(g&&!O?"&":"")+(E?"*":"")+(S?"++":"")+Ta(p),type:M}}function Ta(f){return typeof f=="string"?f:f?"["+[].join.call(f,"+")+"]":""}function Fi(f,p,g){return{name:f,primKey:p,indexes:g,mappedClass:null,idxByName:(E=function(S){return[S.name,S]},g.reduce(function(S,A,O){return O=E(A,O),O&&(S[O[0]]=O[1]),S},{}))};var E}var Ki=function(f){try{return f.only([[]]),Ki=function(){return[[]]},[[]]}catch{return Ki=function(){return bn},bn}};function Gi(f){return f==null?function(){}:typeof f=="string"?(p=f).split(".").length===1?function(g){return g[p]}:function(g){return Ge(g,p)}:function(g){return Ge(g,f)};var p}function Ei(f){return[].slice.call(f)}var si=0;function un(f){return f==null?":id":typeof f=="string"?f:"[".concat(f.join("+"),"]")}function Yi(f,p,q){function E(J){if(J.type===3)return null;if(J.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var F=J.lower,Y=J.upper,Q=J.lowerOpen,J=J.upperOpen;return F===void 0?Y===void 0?null:p.upperBound(Y,!!J):Y===void 0?p.lowerBound(F,!!Q):p.bound(F,Y,!!Q,!!J)}function S(W){var F,Y=W.name;return{name:Y,schema:W,mutate:function(Q){var J=Q.trans,ne=Q.type,ae=Q.keys,fe=Q.values,ge=Q.range;return new Promise(function(Ae,De){Ae=Vt(Ae);var we=J.objectStore(Y),Re=we.keyPath==null,Oe=ne==="put"||ne==="add";if(!Oe&&ne!=="delete"&&ne!=="deleteRange")throw new Error("Invalid operation type: "+ne);var Se,Ve=(ae||fe||{length:1}).length;if(ae&&fe&&ae.length!==fe.length)throw new Error("Given keys array must have same length as given values array.");if(Ve===0)return Ae({numFailures:0,failures:{},results:[],lastResult:void 0});function Fe(xn){++Gn,bi(xn)}var et=[],lt=[],Gn=0;if(ne==="deleteRange"){if(ge.type===4)return Ae({numFailures:Gn,failures:lt,results:[],lastResult:void 0});ge.type===3?et.push(Se=we.clear()):et.push(Se=we.delete(E(ge)))}else{var Re=Oe?Re?[fe,ae]:[fe,null]:[ae,null],Ze=Re[0],In=Re[1];if(Oe)for(var en=0;en<Ve;++en)et.push(Se=In&&In[en]!==void 0?we[ne](Ze[en],In[en]):we[ne](Ze[en])),Se.onerror=Fe;else for(en=0;en<Ve;++en)et.push(Se=we[ne](Ze[en])),Se.onerror=Fe}function Mo(xn){xn=xn.target.result,et.forEach(function(Ur,du){return Ur.error!=null&&(lt[du]=Ur.error)}),Ae({numFailures:Gn,failures:lt,results:ne==="delete"?ae:et.map(function(Ur){return Ur.result}),lastResult:xn})}Se.onerror=function(xn){Fe(xn),Mo(xn)},Se.onsuccess=Mo})},getMany:function(Q){var J=Q.trans,ne=Q.keys;return new Promise(function(ae,fe){ae=Vt(ae);for(var ge,Ae=J.objectStore(Y),De=ne.length,we=new Array(De),Re=0,Oe=0,Se=function(et){et=et.target,we[et._pos]=et.result,++Oe===Re&&ae(we)},Ve=Fn(fe),Fe=0;Fe<De;++Fe)ne[Fe]!=null&&((ge=Ae.get(ne[Fe]))._pos=Fe,ge.onsuccess=Se,ge.onerror=Ve,++Re);Re===0&&ae(we)})},get:function(Q){var J=Q.trans,ne=Q.key;return new Promise(function(ae,fe){ae=Vt(ae);var ge=J.objectStore(Y).get(ne);ge.onsuccess=function(Ae){return ae(Ae.target.result)},ge.onerror=Fn(fe)})},query:(F=H,function(Q){return new Promise(function(J,ne){J=Vt(J);var ae,fe,ge,Re=Q.trans,Ae=Q.values,De=Q.limit,Se=Q.query,we=De===1/0?void 0:De,Oe=Se.index,Se=Se.range,Re=Re.objectStore(Y),Oe=Oe.isPrimaryKey?Re:Re.index(Oe.name),Se=E(Se);if(De===0)return J({result:[]});F?((we=Ae?Oe.getAll(Se,we):Oe.getAllKeys(Se,we)).onsuccess=function(Ve){return J({result:Ve.target.result})},we.onerror=Fn(ne)):(ae=0,fe=!Ae&&"openKeyCursor"in Oe?Oe.openKeyCursor(Se):Oe.openCursor(Se),ge=[],fe.onsuccess=function(Ve){var Fe=fe.result;return Fe?(ge.push(Ae?Fe.value:Fe.primaryKey),++ae===De?J({result:ge}):void Fe.continue()):J({result:ge})},fe.onerror=Fn(ne))})}),openCursor:function(Q){var J=Q.trans,ne=Q.values,ae=Q.query,fe=Q.reverse,ge=Q.unique;return new Promise(function(Ae,De){Ae=Vt(Ae);var Oe=ae.index,we=ae.range,Re=J.objectStore(Y),Re=Oe.isPrimaryKey?Re:Re.index(Oe.name),Oe=fe?ge?"prevunique":"prev":ge?"nextunique":"next",Se=!ne&&"openKeyCursor"in Re?Re.openKeyCursor(E(we),Oe):Re.openCursor(E(we),Oe);Se.onerror=Fn(De),Se.onsuccess=Vt(function(Ve){var Fe,et,lt,Gn,Ze=Se.result;Ze?(Ze.___id=++si,Ze.done=!1,Fe=Ze.continue.bind(Ze),et=(et=Ze.continuePrimaryKey)&&et.bind(Ze),lt=Ze.advance.bind(Ze),Gn=function(){throw new Error("Cursor not stopped")},Ze.trans=J,Ze.stop=Ze.continue=Ze.continuePrimaryKey=Ze.advance=function(){throw new Error("Cursor not started")},Ze.fail=Vt(De),Ze.next=function(){var In=this,en=1;return this.start(function(){return en--?In.continue():In.stop()}).then(function(){return In})},Ze.start=function(In){function en(){if(Se.result)try{In()}catch(xn){Ze.fail(xn)}else Ze.done=!0,Ze.start=function(){throw new Error("Cursor behind last entry")},Ze.stop()}var Mo=new Promise(function(xn,Ur){xn=Vt(xn),Se.onerror=Fn(Ur),Ze.fail=Ur,Ze.stop=function(du){Ze.stop=Ze.continue=Ze.continuePrimaryKey=Ze.advance=Gn,xn(du)}});return Se.onsuccess=Vt(function(xn){Se.onsuccess=en,en()}),Ze.continue=Fe,Ze.continuePrimaryKey=et,Ze.advance=lt,en(),Mo},Ae(Ze)):Ae(null)},De)})},count:function(Q){var J=Q.query,ne=Q.trans,ae=J.index,fe=J.range;return new Promise(function(ge,Ae){var De=ne.objectStore(Y),we=ae.isPrimaryKey?De:De.index(ae.name),De=E(fe),we=De?we.count(De):we.count();we.onsuccess=Vt(function(Re){return ge(Re.target.result)}),we.onerror=Fn(Ae)})}}}var A,O,M,$=(O=q,M=Ei((A=f).objectStoreNames),{schema:{name:A.name,tables:M.map(function(W){return O.objectStore(W)}).map(function(W){var F=W.keyPath,J=W.autoIncrement,Y=y(F),Q={},J={name:W.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:F==null,compound:Y,keyPath:F,autoIncrement:J,unique:!0,extractKey:Gi(F)},indexes:Ei(W.indexNames).map(function(ne){return W.index(ne)}).map(function(ge){var ae=ge.name,fe=ge.unique,Ae=ge.multiEntry,ge=ge.keyPath,Ae={name:ae,compound:y(ge),keyPath:ge,unique:fe,multiEntry:Ae,extractKey:Gi(ge)};return Q[un(ge)]=Ae}),getIndexByKeyPath:function(ne){return Q[un(ne)]}};return Q[":id"]=J.primaryKey,F!=null&&(Q[un(F)]=J.primaryKey),J})},hasGetAll:0<M.length&&"getAll"in O.objectStore(M[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),q=$.schema,H=$.hasGetAll,$=q.tables.map(S),j={};return $.forEach(function(W){return j[W.name]=W}),{stack:"dbcore",transaction:f.transaction.bind(f),table:function(W){if(!j[W])throw new Error("Table '".concat(W,"' not found"));return j[W]},MIN_KEY:-1/0,MAX_KEY:Ki(p),schema:q}}function Ti(f,p,g,E){var S=g.IDBKeyRange;return g.indexedDB,{dbcore:(E=Yi(p,S,E),f.dbcore.reduce(function(A,O){return O=O.create,s(s({},A),O(A))},E))}}function ai(f,E){var g=E.db,E=Ti(f._middlewares,g,f._deps,E);f.core=E.dbcore,f.tables.forEach(function(S){var A=S.name;f.core.schema.tables.some(function(O){return O.name===A})&&(S.core=f.core.table(A),f[A]instanceof f.Table&&(f[A].core=S.core))})}function ls(f,p,g,E){g.forEach(function(S){var A=E[S];p.forEach(function(O){var M=(function q(H,$){return _e(H,$)||(H=b(H))&&q(H,$)})(O,S);(!M||"value"in M&&M.value===void 0)&&(O===f.Transaction.prototype||O instanceof f.Transaction?re(O,S,{get:function(){return this.table(S)},set:function(q){X(this,S,{value:q,writable:!0,configurable:!0,enumerable:!0})}}):O[S]=new f.Table(S,A))})})}function wi(f,p){p.forEach(function(g){for(var E in g)g[E]instanceof f.Table&&delete g[E]})}function wa(f,p){return f._cfg.version-p._cfg.version}function Si(f,p,g,E){var S=f._dbSchema;g.objectStoreNames.contains("$meta")&&!S.$meta&&(S.$meta=Fi("$meta",xo("")[0],[]),f._storeNames.push("$meta"));var A=f._createTransaction("readwrite",f._storeNames,S);A.create(g),A._completion.catch(E);var O=A._reject.bind(A),M=Ne.transless||Ne;Lt(function(){return Ne.trans=A,Ne.transless=M,p!==0?(ai(f,g),H=p,((q=A).storeNames.includes("$meta")?q.table("$meta").get("version").then(function($){return $??H}):Ie.resolve(H)).then(function($){return W=$,F=A,Y=g,Q=[],$=(j=f)._versions,J=j._dbSchema=Ai(0,j.idbdb,Y),($=$.filter(function(ne){return ne._cfg.version>=W})).length!==0?($.forEach(function(ne){Q.push(function(){var ae=J,fe=ne._cfg.dbschema;us(j,ae,Y),us(j,fe,Y),J=j._dbSchema=fe;var ge=js(ae,fe);ge.add.forEach(function(Oe){Qi(Y,Oe[0],Oe[1].primKey,Oe[1].indexes)}),ge.change.forEach(function(Oe){if(Oe.recreate)throw new Me.Upgrade("Not yet support for changing primary key");var Se=Y.objectStore(Oe.name);Oe.add.forEach(function(Ve){return zs(Se,Ve)}),Oe.change.forEach(function(Ve){Se.deleteIndex(Ve.name),zs(Se,Ve)}),Oe.del.forEach(function(Ve){return Se.deleteIndex(Ve)})});var Ae=ne._cfg.contentUpgrade;if(Ae&&ne._cfg.version>W){ai(j,Y),F._memoizedTables={};var De=N(fe);ge.del.forEach(function(Oe){De[Oe]=ae[Oe]}),wi(j,[j.Transaction.prototype]),ls(j,[j.Transaction.prototype],d(De),De),F.schema=De;var we,Re=G(Ae);return Re&&Qt(),ge=Ie.follow(function(){var Oe;(we=Ae(F))&&Re&&(Oe=Ln.bind(null,null),we.then(Oe,Oe))}),we&&typeof we.then=="function"?Ie.resolve(we):ge.then(function(){return we})}}),Q.push(function(ae){var fe,ge,Ae=ne._cfg.dbschema;fe=Ae,ge=ae,[].slice.call(ge.db.objectStoreNames).forEach(function(De){return fe[De]==null&&ge.db.deleteObjectStore(De)}),wi(j,[j.Transaction.prototype]),ls(j,[j.Transaction.prototype],j._storeNames,j._dbSchema),F.schema=j._dbSchema}),Q.push(function(ae){j.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(j.idbdb.version/10)===ne._cfg.version?(j.idbdb.deleteObjectStore("$meta"),delete j._dbSchema.$meta,j._storeNames=j._storeNames.filter(function(fe){return fe!=="$meta"})):ae.objectStore("$meta").put(ne._cfg.version,"version"))})}),(function ne(){return Q.length?Ie.resolve(Q.shift()(F.idbtrans)).then(ne):Ie.resolve()})().then(function(){Io(J,Y)})):Ie.resolve();var j,W,F,Y,Q,J}).catch(O)):(d(S).forEach(function($){Qi(g,$,S[$].primKey,S[$].indexes)}),ai(f,g),void Ie.follow(function(){return f.on.populate.fire(A)}).catch(O));var q,H})}function Sa(f,p){Io(f._dbSchema,p),p.db.version%10!=0||p.objectStoreNames.contains("$meta")||p.db.createObjectStore("$meta").add(Math.ceil(p.db.version/10-1),"version");var g=Ai(0,f.idbdb,p);us(f,f._dbSchema,p);for(var E=0,S=js(g,f._dbSchema).change;E<S.length;E++){var A=(function(O){if(O.change.length||O.recreate)return console.warn("Unable to patch indexes of table ".concat(O.name," because it has changes on the type of index or primary key.")),{value:void 0};var M=p.objectStore(O.name);O.add.forEach(function(q){Pn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(O.name,".").concat(q.src)),zs(M,q)})})(S[E]);if(typeof A=="object")return A.value}}function js(f,p){var g,E={del:[],add:[],change:[]};for(g in f)p[g]||E.del.push(g);for(g in p){var S=f[g],A=p[g];if(S){var O={name:g,def:A,recreate:!1,del:[],add:[],change:[]};if(""+(S.primKey.keyPath||"")!=""+(A.primKey.keyPath||"")||S.primKey.auto!==A.primKey.auto)O.recreate=!0,E.change.push(O);else{var M=S.idxByName,q=A.idxByName,H=void 0;for(H in M)q[H]||O.del.push(H);for(H in q){var $=M[H],j=q[H];$?$.src!==j.src&&O.change.push(j):O.add.push(j)}(0<O.del.length||0<O.add.length||0<O.change.length)&&E.change.push(O)}}else E.add.push([g,A])}return E}function Qi(f,p,g,E){var S=f.db.createObjectStore(p,g.keyPath?{keyPath:g.keyPath,autoIncrement:g.auto}:{autoIncrement:g.auto});return E.forEach(function(A){return zs(S,A)}),S}function Io(f,p){d(f).forEach(function(g){p.db.objectStoreNames.contains(g)||(Pn&&console.debug("Dexie: Creating missing table",g),Qi(p,g,f[g].primKey,f[g].indexes))})}function zs(f,p){f.createIndex(p.name,p.keyPath,{unique:p.unique,multiEntry:p.multi})}function Ai(f,p,g){var E={};return Be(p.objectStoreNames,0).forEach(function(S){for(var A=g.objectStore(S),O=Mr(Ta(H=A.keyPath),H||"",!0,!1,!!A.autoIncrement,H&&typeof H!="string",!0),M=[],q=0;q<A.indexNames.length;++q){var $=A.index(A.indexNames[q]),H=$.keyPath,$=Mr($.name,H,!!$.unique,!!$.multiEntry,!1,H&&typeof H!="string",!1);M.push($)}E[S]=Fi(S,O,M)}),E}function us(f,p,g){for(var E=g.db.objectStoreNames,S=0;S<E.length;++S){var A=E[S],O=g.objectStore(A);f._hasGetAll="getAll"in O;for(var M=0;M<O.indexNames.length;++M){var q=O.indexNames[M],H=O.index(q).keyPath,$=typeof H=="string"?H:"["+Be(H).join("+")+"]";!p[A]||(H=p[A].idxByName[$])&&(H.name=q,delete p[A].idxByName[$],p[A].idxByName[q]=H)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(f._hasGetAll=!1)}function xo(f){return f.split(",").map(function(p,g){var A=p.split(":"),E=(S=A[1])===null||S===void 0?void 0:S.trim(),S=(p=A[0].trim()).replace(/([&*]|\+\+)/g,""),A=/^\[/.test(S)?S.match(/^\[(.*)\]$/)[1].split("+"):S;return Mr(S,A||null,/\&/.test(p),/\*/.test(p),/\+\+/.test(p),y(A),g===0,E)})}var Aa=(Xi.prototype._createTableSchema=Fi,Xi.prototype._parseIndexSyntax=xo,Xi.prototype._parseStoresSpec=function(f,p){var g=this;d(f).forEach(function(E){if(f[E]!==null){var S=g._parseIndexSyntax(f[E]),A=S.shift();if(!A)throw new Me.Schema("Invalid schema for table "+E+": "+f[E]);if(A.unique=!0,A.multi)throw new Me.Schema("Primary key cannot be multiEntry*");S.forEach(function(O){if(O.auto)throw new Me.Schema("Only primary key can be marked as autoIncrement (++)");if(!O.keyPath)throw new Me.Schema("Index must have a name and cannot be an empty string")}),S=g._createTableSchema(E,A,S),p[E]=S}})},Xi.prototype.stores=function(g){var p=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,g):g;var g=p._versions,E={},S={};return g.forEach(function(A){_(E,A._cfg.storesSource),S=A._cfg.dbschema={},A._parseStoresSpec(E,S)}),p._dbSchema=S,wi(p,[p._allTables,p,p.Transaction.prototype]),ls(p,[p._allTables,p,p.Transaction.prototype,this._cfg.tables],d(S),S),p._storeNames=d(S),this},Xi.prototype.upgrade=function(f){return this._cfg.contentUpgrade=rn(this._cfg.contentUpgrade||Ct,f),this},Xi);function Xi(){}function Ca(f,p){var g=f._dbNamesDB;return g||(g=f._dbNamesDB=new Ri(ss,{addons:[],indexedDB:f,IDBKeyRange:p})).version(1).stores({dbnames:"name"}),g.table("dbnames")}function kr(f){return f&&typeof f.databases=="function"}function Ra(f){return Lt(function(){return Ne.letThrough=!0,f()})}function Ia(f){return!("from"in f)}var Tn=function(f,p){if(!this){var g=new Tn;return f&&"d"in f&&_(g,f),g}_(this,arguments.length?{d:1,from:f,to:1<arguments.length?p:f}:{d:0})};function cs(f,p,g){var E=ot(p,g);if(!isNaN(E)){if(0<E)throw RangeError();if(Ia(f))return _(f,{from:p,to:g,d:1});var S=f.l,E=f.r;if(ot(g,f.from)<0)return S?cs(S,p,g):f.l={from:p,to:g,d:1,l:null,r:null},Oo(f);if(0<ot(p,f.to))return E?cs(E,p,g):f.r={from:p,to:g,d:1,l:null,r:null},Oo(f);ot(p,f.from)<0&&(f.from=p,f.l=null,f.d=E?E.d+1:1),0<ot(g,f.to)&&(f.to=g,f.r=null,f.d=f.l?f.l.d+1:1),g=!f.r,S&&!f.l&&Vr(f,S),E&&g&&Vr(f,E)}}function Vr(f,p){Ia(p)||(function g(E,q){var A=q.from,O=q.to,M=q.l,q=q.r;cs(E,A,O),M&&g(E,M),q&&g(E,q)})(f,p)}function Kn(f,p){var g=Bs(p),E=g.next();if(E.done)return!1;for(var S=E.value,A=Bs(f),O=A.next(S.from),M=O.value;!E.done&&!O.done;){if(ot(M.from,S.to)<=0&&0<=ot(M.to,S.from))return!0;ot(S.from,M.from)<0?S=(E=g.next(M.from)).value:M=(O=A.next(S.from)).value}return!1}function Bs(f){var p=Ia(f)?null:{s:0,n:f};return{next:function(g){for(var E=0<arguments.length;p;)switch(p.s){case 0:if(p.s=1,E)for(;p.n.l&&ot(g,p.n.from)<0;)p={up:p,n:p.n.l,s:1};else for(;p.n.l;)p={up:p,n:p.n.l,s:1};case 1:if(p.s=2,!E||ot(g,p.n.to)<=0)return{value:p.n,done:!1};case 2:if(p.n.r){p.s=3,p={up:p,n:p.n.r,s:0};continue}case 3:p=p.up}return{done:!0}}}}function Oo(f){var p,g,E=(((p=f.r)===null||p===void 0?void 0:p.d)||0)-(((g=f.l)===null||g===void 0?void 0:g.d)||0),S=1<E?"r":E<-1?"l":"";S&&(p=S=="r"?"l":"r",g=s({},f),E=f[S],f.from=E.from,f.to=E.to,f[S]=E[S],g[S]=E[p],(f[p]=g).d=Ci(g)),f.d=Ci(f)}function Ci(g){var p=g.r,g=g.l;return(p?g?Math.max(p.d,g.d):p.d:g?g.d:0)+1}function c(f,p){return d(p).forEach(function(g){f[g]?Vr(f[g],p[g]):f[g]=(function E(S){var A,O,M={};for(A in S)I(S,A)&&(O=S[A],M[A]=!O||typeof O!="object"||z.has(O.constructor)?O:E(O));return M})(p[g])}),f}function v(f,p){return f.all||p.all||Object.keys(f).some(function(g){return p[g]&&Kn(p[g],f[g])})}k(Tn.prototype,((Er={add:function(f){return Vr(this,f),this},addKey:function(f){return cs(this,f,f),this},addKeys:function(f){var p=this;return f.forEach(function(g){return cs(p,g,g)}),this},hasKey:function(f){var p=Bs(this).next(f).value;return p&&ot(p.from,f)<=0&&0<=ot(p.to,f)}})[le]=function(){return Bs(this)},Er));var w={},x={},te=!1;function ue(f){c(x,f),te||(te=!0,setTimeout(function(){te=!1,Ce(x,!(x={}))},0))}function Ce(f,p){p===void 0&&(p=!1);var g=new Set;if(f.all)for(var E=0,S=Object.values(w);E<S.length;E++)nt(O=S[E],f,g,p);else for(var A in f){var O,M=/^idb\:\/\/(.*)\/(.*)\//.exec(A);M&&(A=M[1],M=M[2],(O=w["idb://".concat(A,"/").concat(M)])&&nt(O,f,g,p))}g.forEach(function(q){return q()})}function nt(f,p,g,E){for(var S=[],A=0,O=Object.entries(f.queries.query);A<O.length;A++){for(var M=O[A],q=M[0],H=[],$=0,j=M[1];$<j.length;$++){var W=j[$];v(p,W.obsSet)?W.subscribers.forEach(function(J){return g.add(J)}):E&&H.push(W)}E&&S.push([q,H])}if(E)for(var F=0,Y=S;F<Y.length;F++){var Q=Y[F],q=Q[0],H=Q[1];f.queries.query[q]=H}}function cn(f){var p=f._state,g=f._deps.indexedDB;if(p.isBeingOpened||f.idbdb)return p.dbReadyPromise.then(function(){return p.dbOpenError?xt(p.dbOpenError):f});p.isBeingOpened=!0,p.dbOpenError=null,p.openComplete=!1;var E=p.openCanceller,S=Math.round(10*f.verno),A=!1;function O(){if(p.openCanceller!==E)throw new Me.DatabaseClosed("db.open() was cancelled")}function M(){return new Ie(function(W,F){if(O(),!g)throw new Me.MissingAPI;var Y=f.name,Q=p.autoSchema||!S?g.open(Y):g.open(Y,S);if(!Q)throw new Me.MissingAPI;Q.onerror=Fn(F),Q.onblocked=Vt(f._fireOnBlocked),Q.onupgradeneeded=Vt(function(J){var ne;$=Q.transaction,p.autoSchema&&!f._options.allowEmptyDB?(Q.onerror=bi,$.abort(),Q.result.close(),(ne=g.deleteDatabase(Y)).onsuccess=ne.onerror=Vt(function(){F(new Me.NoSuchDatabase("Database ".concat(Y," doesnt exist")))})):($.onerror=Fn(F),J=J.oldVersion>Math.pow(2,62)?0:J.oldVersion,j=J<1,f.idbdb=Q.result,A&&Sa(f,$),Si(f,J/10,$,F))},F),Q.onsuccess=Vt(function(){$=null;var J,ne,ae,fe,ge,Ae=f.idbdb=Q.result,De=Be(Ae.objectStoreNames);if(0<De.length)try{var we=Ae.transaction((fe=De).length===1?fe[0]:fe,"readonly");if(p.autoSchema)ne=Ae,ae=we,(J=f).verno=ne.version/10,ae=J._dbSchema=Ai(0,ne,ae),J._storeNames=Be(ne.objectStoreNames,0),ls(J,[J._allTables],d(ae),ae);else if(us(f,f._dbSchema,we),((ge=js(Ai(0,(ge=f).idbdb,we),ge._dbSchema)).add.length||ge.change.some(function(Re){return Re.add.length||Re.change.length}))&&!A)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ae.close(),S=Ae.version+1,A=!0,W(M());ai(f,we)}catch{}_i.push(f),Ae.onversionchange=Vt(function(Re){p.vcFired=!0,f.on("versionchange").fire(Re)}),Ae.onclose=Vt(function(){f.close({disableAutoOpen:!1})}),j&&(ge=f._deps,we=Y,Ae=ge.indexedDB,ge=ge.IDBKeyRange,kr(Ae)||we===ss||Ca(Ae,ge).put({name:we}).catch(Ct)),W()},F)}).catch(function(W){switch(W?.name){case"UnknownError":if(0<p.PR1398_maxLoop)return p.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),M();break;case"VersionError":if(0<S)return S=0,M()}return Ie.reject(W)})}var q,H=p.dbReadyResolve,$=null,j=!1;return Ie.race([E,(typeof navigator>"u"?Ie.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(W){function F(){return indexedDB.databases().finally(W)}q=setInterval(F,100),F()}).finally(function(){return clearInterval(q)}):Promise.resolve()).then(M)]).then(function(){return O(),p.onReadyBeingFired=[],Ie.resolve(Ra(function(){return f.on.ready.fire(f.vip)})).then(function W(){if(0<p.onReadyBeingFired.length){var F=p.onReadyBeingFired.reduce(rn,Ct);return p.onReadyBeingFired=[],Ie.resolve(Ra(function(){return F(f.vip)})).then(W)}})}).finally(function(){p.openCanceller===E&&(p.onReadyBeingFired=null,p.isBeingOpened=!1)}).catch(function(W){p.dbOpenError=W;try{$&&$.abort()}catch{}return E===p.openCanceller&&f._close(),xt(W)}).finally(function(){p.openComplete=!0,H()}).then(function(){var W;return j&&(W={},f.tables.forEach(function(F){F.schema.indexes.forEach(function(Y){Y.name&&(W["idb://".concat(f.name,"/").concat(F.name,"/").concat(Y.name)]=new Tn(-1/0,[[[]]]))}),W["idb://".concat(f.name,"/").concat(F.name,"/")]=W["idb://".concat(f.name,"/").concat(F.name,"/:dels")]=new Tn(-1/0,[[[]]])}),En(Nr).fire(W),Ce(W,!0)),f})}function Rt(f){function p(A){return f.next(A)}var g=S(p),E=S(function(A){return f.throw(A)});function S(A){return function(q){var M=A(q),q=M.value;return M.done?q:q&&typeof q.then=="function"?q.then(g,E):y(q)?Promise.all(q).then(g,E):g(q)}}return S(p)()}function jt(f,p,g){for(var E=y(f)?f.slice():[f],S=0;S<g;++S)E.push(p);return E}var Pr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(f){return s(s({},f),{table:function(p){var g=f.table(p),E=g.schema,S={},A=[];function O(j,W,F){var Y=un(j),Q=S[Y]=S[Y]||[],J=j==null?0:typeof j=="string"?1:j.length,ne=0<W,ne=s(s({},F),{name:ne?"".concat(Y,"(virtual-from:").concat(F.name,")"):F.name,lowLevelIndex:F,isVirtual:ne,keyTail:W,keyLength:J,extractKey:Gi(j),unique:!ne&&F.unique});return Q.push(ne),ne.isPrimaryKey||A.push(ne),1<J&&O(J===2?j[0]:j.slice(0,J-1),W+1,F),Q.sort(function(ae,fe){return ae.keyTail-fe.keyTail}),ne}p=O(E.primaryKey.keyPath,0,E.primaryKey),S[":id"]=[p];for(var M=0,q=E.indexes;M<q.length;M++){var H=q[M];O(H.keyPath,0,H)}function $(j){var W,F=j.query.index;return F.isVirtual?s(s({},j),{query:{index:F.lowLevelIndex,range:(W=j.query.range,F=F.keyTail,{type:W.type===1?2:W.type,lower:jt(W.lower,W.lowerOpen?f.MAX_KEY:f.MIN_KEY,F),lowerOpen:!0,upper:jt(W.upper,W.upperOpen?f.MIN_KEY:f.MAX_KEY,F),upperOpen:!0})}}):j}return s(s({},g),{schema:s(s({},E),{primaryKey:p,indexes:A,getIndexByKeyPath:function(j){return(j=S[un(j)])&&j[0]}}),count:function(j){return g.count($(j))},query:function(j){return g.query($(j))},openCursor:function(j){var W=j.query.index,F=W.keyTail,Y=W.isVirtual,Q=W.keyLength;return Y?g.openCursor($(j)).then(function(ne){return ne&&J(ne)}):g.openCursor(j);function J(ne){return Object.create(ne,{continue:{value:function(ae){ae!=null?ne.continue(jt(ae,j.reverse?f.MAX_KEY:f.MIN_KEY,F)):j.unique?ne.continue(ne.key.slice(0,Q).concat(j.reverse?f.MIN_KEY:f.MAX_KEY,F)):ne.continue()}},continuePrimaryKey:{value:function(ae,fe){ne.continuePrimaryKey(jt(ae,f.MAX_KEY,F),fe)}},primaryKey:{get:function(){return ne.primaryKey}},key:{get:function(){var ae=ne.key;return Q===1?ae[0]:ae.slice(0,Q)}},value:{get:function(){return ne.value}}})}}})}})}};function Lr(f,p,g,E){return g=g||{},E=E||"",d(f).forEach(function(S){var A,O,M;I(p,S)?(A=f[S],O=p[S],typeof A=="object"&&typeof O=="object"&&A&&O?(M=Gt(A))!==Gt(O)?g[E+S]=p[S]:M==="Object"?Lr(A,O,g,E+S+"."):A!==O&&(g[E+S]=p[S]):A!==O&&(g[E+S]=p[S])):g[E+S]=void 0}),d(p).forEach(function(S){I(f,S)||(g[E+S]=p[S])}),g}function br(f,p){return p.type==="delete"?p.keys:p.keys||p.values.map(f.extractKey)}var oi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(f){return s(s({},f),{table:function(p){var g=f.table(p),E=g.schema.primaryKey;return s(s({},g),{mutate:function(S){var A=Ne.trans,O=A.table(p).hook,M=O.deleting,q=O.creating,H=O.updating;switch(S.type){case"add":if(q.fire===Ct)break;return A._promise("readwrite",function(){return $(S)},!0);case"put":if(q.fire===Ct&&H.fire===Ct)break;return A._promise("readwrite",function(){return $(S)},!0);case"delete":if(M.fire===Ct)break;return A._promise("readwrite",function(){return $(S)},!0);case"deleteRange":if(M.fire===Ct)break;return A._promise("readwrite",function(){return(function j(W,F,Y){return g.query({trans:W,values:!1,query:{index:E,range:F},limit:Y}).then(function(Q){var J=Q.result;return $({type:"delete",keys:J,trans:W}).then(function(ne){return 0<ne.numFailures?Promise.reject(ne.failures[0]):J.length<Y?{failures:[],numFailures:0,lastResult:void 0}:j(W,s(s({},F),{lower:J[J.length-1],lowerOpen:!0}),Y)})})})(S.trans,S.range,1e4)},!0)}return g.mutate(S);function $(j){var W,F,Y,Q=Ne.trans,J=j.keys||br(E,j);if(!J)throw new Error("Keys missing");return(j=j.type==="add"||j.type==="put"?s(s({},j),{keys:J}):s({},j)).type!=="delete"&&(j.values=o([],j.values)),j.keys&&(j.keys=o([],j.keys)),W=g,Y=J,((F=j).type==="add"?Promise.resolve([]):W.getMany({trans:F.trans,keys:Y,cache:"immutable"})).then(function(ne){var ae=J.map(function(fe,ge){var Ae,De,we,Re=ne[ge],Oe={onerror:null,onsuccess:null};return j.type==="delete"?M.fire.call(Oe,fe,Re,Q):j.type==="add"||Re===void 0?(Ae=q.fire.call(Oe,fe,j.values[ge],Q),fe==null&&Ae!=null&&(j.keys[ge]=fe=Ae,E.outbound||D(j.values[ge],E.keyPath,fe))):(Ae=Lr(Re,j.values[ge]),(De=H.fire.call(Oe,Ae,fe,Re,Q))&&(we=j.values[ge],Object.keys(De).forEach(function(Se){I(we,Se)?we[Se]=De[Se]:D(we,Se,De[Se])}))),Oe});return g.mutate(j).then(function(fe){for(var ge=fe.failures,Ae=fe.results,De=fe.numFailures,fe=fe.lastResult,we=0;we<J.length;++we){var Re=(Ae||J)[we],Oe=ae[we];Re==null?Oe.onerror&&Oe.onerror(ge[we]):Oe.onsuccess&&Oe.onsuccess(j.type==="put"&&ne[we]?j.values[we]:Re)}return{failures:ge,results:Ae,numFailures:De,lastResult:fe}}).catch(function(fe){return ae.forEach(function(ge){return ge.onerror&&ge.onerror(fe)}),Promise.reject(fe)})})}}})}})}};function fs(f,p,g){try{if(!p||p.keys.length<f.length)return null;for(var E=[],S=0,A=0;S<p.keys.length&&A<f.length;++S)ot(p.keys[S],f[A])===0&&(E.push(g?P(p.values[S]):p.values[S]),++A);return E.length===f.length?E:null}catch{return null}}var xa={stack:"dbcore",level:-1,create:function(f){return{table:function(p){var g=f.table(p);return s(s({},g),{getMany:function(E){if(!E.cache)return g.getMany(E);var S=fs(E.keys,E.trans._cache,E.cache==="clone");return S?Ie.resolve(S):g.getMany(E).then(function(A){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?P(A):A},A})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),g.mutate(E)}})}}}};function qs(f,p){return f.trans.mode==="readonly"&&!!f.subscr&&!f.trans.explicit&&f.trans.db._options.cache!=="disabled"&&!p.schema.primaryKey.outbound}function Dc(f,p){switch(f){case"query":return p.values&&!p.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Bh={stack:"dbcore",level:0,name:"Observability",create:function(f){var p=f.schema.name,g=new Tn(f.MIN_KEY,f.MAX_KEY);return s(s({},f),{transaction:function(E,S,A){if(Ne.subscr&&S!=="readonly")throw new Me.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ne.querier));return f.transaction(E,S,A)},table:function(E){var S=f.table(E),A=S.schema,O=A.primaryKey,j=A.indexes,M=O.extractKey,q=O.outbound,H=O.autoIncrement&&j.filter(function(F){return F.compound&&F.keyPath.includes(O.keyPath)}),$=s(s({},S),{mutate:function(F){function Y(Se){return Se="idb://".concat(p,"/").concat(E,"/").concat(Se),fe[Se]||(fe[Se]=new Tn)}var Q,J,ne,ae=F.trans,fe=F.mutatedParts||(F.mutatedParts={}),ge=Y(""),Ae=Y(":dels"),De=F.type,Oe=F.type==="deleteRange"?[F.range]:F.type==="delete"?[F.keys]:F.values.length<50?[br(O,F).filter(function(Se){return Se}),F.values]:[],we=Oe[0],Re=Oe[1],Oe=F.trans._cache;return y(we)?(ge.addKeys(we),(Oe=De==="delete"||we.length===Re.length?fs(we,Oe):null)||Ae.addKeys(we),(Oe||Re)&&(Q=Y,J=Oe,ne=Re,A.indexes.forEach(function(Se){var Ve=Q(Se.name||"");function Fe(lt){return lt!=null?Se.extractKey(lt):null}function et(lt){return Se.multiEntry&&y(lt)?lt.forEach(function(Gn){return Ve.addKey(Gn)}):Ve.addKey(lt)}(J||ne).forEach(function(lt,In){var Ze=J&&Fe(J[In]),In=ne&&Fe(ne[In]);ot(Ze,In)!==0&&(Ze!=null&&et(Ze),In!=null&&et(In))})}))):we?(Re={from:(Re=we.lower)!==null&&Re!==void 0?Re:f.MIN_KEY,to:(Re=we.upper)!==null&&Re!==void 0?Re:f.MAX_KEY},Ae.add(Re),ge.add(Re)):(ge.add(g),Ae.add(g),A.indexes.forEach(function(Se){return Y(Se.name).add(g)})),S.mutate(F).then(function(Se){return!we||F.type!=="add"&&F.type!=="put"||(ge.addKeys(Se.results),H&&H.forEach(function(Ve){for(var Fe=F.values.map(function(Ze){return Ve.extractKey(Ze)}),et=Ve.keyPath.findIndex(function(Ze){return Ze===O.keyPath}),lt=0,Gn=Se.results.length;lt<Gn;++lt)Fe[lt][et]=Se.results[lt];Y(Ve.name).addKeys(Fe)})),ae.mutatedParts=c(ae.mutatedParts||{},fe),Se})}}),j=function(Y){var Q=Y.query,Y=Q.index,Q=Q.range;return[Y,new Tn((Y=Q.lower)!==null&&Y!==void 0?Y:f.MIN_KEY,(Q=Q.upper)!==null&&Q!==void 0?Q:f.MAX_KEY)]},W={get:function(F){return[O,new Tn(F.key)]},getMany:function(F){return[O,new Tn().addKeys(F.keys)]},count:j,query:j,openCursor:j};return d(W).forEach(function(F){$[F]=function(Y){var Q=Ne.subscr,J=!!Q,ne=qs(Ne,S)&&Dc(F,Y)?Y.obsSet={}:Q;if(J){var ae=function(Re){return Re="idb://".concat(p,"/").concat(E,"/").concat(Re),ne[Re]||(ne[Re]=new Tn)},fe=ae(""),ge=ae(":dels"),Q=W[F](Y),J=Q[0],Q=Q[1];if((F==="query"&&J.isPrimaryKey&&!Y.values?ge:ae(J.name||"")).add(Q),!J.isPrimaryKey){if(F!=="count"){var Ae=F==="query"&&q&&Y.values&&S.query(s(s({},Y),{values:!1}));return S[F].apply(this,arguments).then(function(Re){if(F==="query"){if(q&&Y.values)return Ae.then(function(Fe){return Fe=Fe.result,fe.addKeys(Fe),Re});var Oe=Y.values?Re.result.map(M):Re.result;(Y.values?fe:ge).addKeys(Oe)}else if(F==="openCursor"){var Se=Re,Ve=Y.values;return Se&&Object.create(Se,{key:{get:function(){return ge.addKey(Se.primaryKey),Se.key}},primaryKey:{get:function(){var Fe=Se.primaryKey;return ge.addKey(Fe),Fe}},value:{get:function(){return Ve&&fe.addKey(Se.primaryKey),Se.value}}})}return Re})}ge.add(g)}}return S[F].apply(this,arguments)}}),$}})}};function Nc(f,p,g){if(g.numFailures===0)return p;if(p.type==="deleteRange")return null;var E=p.keys?p.keys.length:"values"in p&&p.values?p.values.length:1;return g.numFailures===E?null:(p=s({},p),y(p.keys)&&(p.keys=p.keys.filter(function(S,A){return!(A in g.failures)})),"values"in p&&y(p.values)&&(p.values=p.values.filter(function(S,A){return!(A in g.failures)})),p)}function fl(f,p){return g=f,((E=p).lower===void 0||(E.lowerOpen?0<ot(g,E.lower):0<=ot(g,E.lower)))&&(f=f,(p=p).upper===void 0||(p.upperOpen?ot(f,p.upper)<0:ot(f,p.upper)<=0));var g,E}function fu(f,p,W,E,S,A){if(!W||W.length===0)return f;var O=p.query.index,M=O.multiEntry,q=p.query.range,H=E.schema.primaryKey.extractKey,$=O.extractKey,j=(O.lowLevelIndex||O).extractKey,W=W.reduce(function(F,Y){var Q=F,J=[];if(Y.type==="add"||Y.type==="put")for(var ne=new Tn,ae=Y.values.length-1;0<=ae;--ae){var fe,ge=Y.values[ae],Ae=H(ge);ne.hasKey(Ae)||(fe=$(ge),(M&&y(fe)?fe.some(function(Se){return fl(Se,q)}):fl(fe,q))&&(ne.addKey(Ae),J.push(ge)))}switch(Y.type){case"add":var De=new Tn().addKeys(p.values?F.map(function(Ve){return H(Ve)}):F),Q=F.concat(p.values?J.filter(function(Ve){return Ve=H(Ve),!De.hasKey(Ve)&&(De.addKey(Ve),!0)}):J.map(function(Ve){return H(Ve)}).filter(function(Ve){return!De.hasKey(Ve)&&(De.addKey(Ve),!0)}));break;case"put":var we=new Tn().addKeys(Y.values.map(function(Ve){return H(Ve)}));Q=F.filter(function(Ve){return!we.hasKey(p.values?H(Ve):Ve)}).concat(p.values?J:J.map(function(Ve){return H(Ve)}));break;case"delete":var Re=new Tn().addKeys(Y.keys);Q=F.filter(function(Ve){return!Re.hasKey(p.values?H(Ve):Ve)});break;case"deleteRange":var Oe=Y.range;Q=F.filter(function(Ve){return!fl(H(Ve),Oe)})}return Q},f);return W===f?f:(W.sort(function(F,Y){return ot(j(F),j(Y))||ot(H(F),H(Y))}),p.limit&&p.limit<1/0&&(W.length>p.limit?W.length=p.limit:f.length===p.limit&&W.length<p.limit&&(S.dirty=!0)),A?Object.freeze(W):W)}function Oa(f,p){return ot(f.lower,p.lower)===0&&ot(f.upper,p.upper)===0&&!!f.lowerOpen==!!p.lowerOpen&&!!f.upperOpen==!!p.upperOpen}function Do(f,p){return(function(g,E,S,A){if(g===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=ot(g,E))===0){if(S&&A)return 0;if(S)return 1;if(A)return-1}return E})(f.lower,p.lower,f.lowerOpen,p.lowerOpen)<=0&&0<=(function(g,E,S,A){if(g===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=ot(g,E))===0){if(S&&A)return 0;if(S)return-1;if(A)return 1}return E})(f.upper,p.upper,f.upperOpen,p.upperOpen)}function qh(f,p,g,E){f.subscribers.add(g),E.addEventListener("abort",function(){var S,A;f.subscribers.delete(g),f.subscribers.size===0&&(S=f,A=p,setTimeout(function(){S.subscribers.size===0&&Ue(A,S)},3e3))})}var hl={stack:"dbcore",level:0,name:"Cache",create:function(f){var p=f.schema.name;return s(s({},f),{transaction:function(g,E,S){var A,O,M=f.transaction(g,E,S);return E==="readwrite"&&(O=(A=new AbortController).signal,S=function(q){return function(){if(A.abort(),E==="readwrite"){for(var H=new Set,$=0,j=g;$<j.length;$++){var W=j[$],F=w["idb://".concat(p,"/").concat(W)];if(F){var Y=f.table(W),Q=F.optimisticOps.filter(function(Ve){return Ve.trans===M});if(M._explicit&&q&&M.mutatedParts)for(var J=0,ne=Object.values(F.queries.query);J<ne.length;J++)for(var ae=0,fe=(De=ne[J]).slice();ae<fe.length;ae++)v((we=fe[ae]).obsSet,M.mutatedParts)&&(Ue(De,we),we.subscribers.forEach(function(Ve){return H.add(Ve)}));else if(0<Q.length){F.optimisticOps=F.optimisticOps.filter(function(Ve){return Ve.trans!==M});for(var ge=0,Ae=Object.values(F.queries.query);ge<Ae.length;ge++)for(var De,we,Re,Oe=0,Se=(De=Ae[ge]).slice();Oe<Se.length;Oe++)(we=Se[Oe]).res!=null&&M.mutatedParts&&(q&&!we.dirty?(Re=Object.isFrozen(we.res),Re=fu(we.res,we.req,Q,Y,we,Re),we.dirty?(Ue(De,we),we.subscribers.forEach(function(Ve){return H.add(Ve)})):Re!==we.res&&(we.res=Re,we.promise=Ie.resolve({result:Re}))):(we.dirty&&Ue(De,we),we.subscribers.forEach(function(Ve){return H.add(Ve)})))}}}H.forEach(function(Ve){return Ve()})}}},M.addEventListener("abort",S(!1),{signal:O}),M.addEventListener("error",S(!1),{signal:O}),M.addEventListener("complete",S(!0),{signal:O})),M},table:function(g){var E=f.table(g),S=E.schema.primaryKey;return s(s({},E),{mutate:function(A){var O=Ne.trans;if(S.outbound||O.db._options.cache==="disabled"||O.explicit||O.idbtrans.mode!=="readwrite")return E.mutate(A);var M=w["idb://".concat(p,"/").concat(g)];return M?(O=E.mutate(A),A.type!=="add"&&A.type!=="put"||!(50<=A.values.length||br(S,A).some(function(q){return q==null}))?(M.optimisticOps.push(A),A.mutatedParts&&ue(A.mutatedParts),O.then(function(q){0<q.numFailures&&(Ue(M.optimisticOps,A),(q=Nc(0,A,q))&&M.optimisticOps.push(q),A.mutatedParts&&ue(A.mutatedParts))}),O.catch(function(){Ue(M.optimisticOps,A),A.mutatedParts&&ue(A.mutatedParts)})):O.then(function(q){var H=Nc(0,s(s({},A),{values:A.values.map(function($,j){var W;return q.failures[j]?$:($=(W=S.keyPath)!==null&&W!==void 0&&W.includes(".")?P($):s({},$),D($,S.keyPath,q.results[j]),$)})}),q);M.optimisticOps.push(H),queueMicrotask(function(){return A.mutatedParts&&ue(A.mutatedParts)})}),O):E.mutate(A)},query:function(A){if(!qs(Ne,E)||!Dc("query",A))return E.query(A);var O=((H=Ne.trans)===null||H===void 0?void 0:H.db._options.cache)==="immutable",j=Ne,M=j.requery,q=j.signal,H=(function(Y,Q,J,ne){var ae=w["idb://".concat(Y,"/").concat(Q)];if(!ae)return[];if(!(Q=ae.queries[J]))return[null,!1,ae,null];var fe=Q[(ne.query?ne.query.index.name:null)||""];if(!fe)return[null,!1,ae,null];switch(J){case"query":var ge=fe.find(function(Ae){return Ae.req.limit===ne.limit&&Ae.req.values===ne.values&&Oa(Ae.req.query.range,ne.query.range)});return ge?[ge,!0,ae,fe]:[fe.find(function(Ae){return("limit"in Ae.req?Ae.req.limit:1/0)>=ne.limit&&(!ne.values||Ae.req.values)&&Do(Ae.req.query.range,ne.query.range)}),!1,ae,fe];case"count":return ge=fe.find(function(Ae){return Oa(Ae.req.query.range,ne.query.range)}),[ge,!!ge,ae,fe]}})(p,g,"query",A),$=H[0],j=H[1],W=H[2],F=H[3];return $&&j?$.obsSet=A.obsSet:(j=E.query(A).then(function(Y){var Q=Y.result;if($&&($.res=Q),O){for(var J=0,ne=Q.length;J<ne;++J)Object.freeze(Q[J]);Object.freeze(Q)}else Y.result=P(Q);return Y}).catch(function(Y){return F&&$&&Ue(F,$),Promise.reject(Y)}),$={obsSet:A.obsSet,promise:j,subscribers:new Set,type:"query",req:A,dirty:!1},F?F.push($):(F=[$],(W=W||(w["idb://".concat(p,"/").concat(g)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[A.query.index.name||""]=F)),qh($,F,M,q),$.promise.then(function(Y){return{result:fu(Y.result,A,W?.optimisticOps,E,$,O)}})}})}})}};function No(f,p){return new Proxy(f,{get:function(g,E,S){return E==="db"?p:Reflect.get(g,E,S)}})}var Ri=(Xt.prototype.version=function(f){if(isNaN(f)||f<.1)throw new Me.Type("Given version is not a positive number");if(f=Math.round(10*f)/10,this.idbdb||this._state.isBeingOpened)throw new Me.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,f);var p=this._versions,g=p.filter(function(E){return E._cfg.version===f})[0];return g||(g=new this.Version(f),p.push(g),p.sort(wa),g.stores({}),this._state.autoSchema=!1,g)},Xt.prototype._whenReady=function(f){var p=this;return this.idbdb&&(this._state.openComplete||Ne.letThrough||this._vip)?f():new Ie(function(g,E){if(p._state.openComplete)return E(new Me.DatabaseClosed(p._state.dbOpenError));if(!p._state.isBeingOpened){if(!p._state.autoOpen)return void E(new Me.DatabaseClosed);p.open().catch(Ct)}p._state.dbReadyPromise.then(g,E)}).then(f)},Xt.prototype.use=function(f){var p=f.stack,g=f.create,E=f.level,S=f.name;return S&&this.unuse({stack:p,name:S}),f=this._middlewares[p]||(this._middlewares[p]=[]),f.push({stack:p,create:g,level:E??10,name:S}),f.sort(function(A,O){return A.level-O.level}),this},Xt.prototype.unuse=function(f){var p=f.stack,g=f.name,E=f.create;return p&&this._middlewares[p]&&(this._middlewares[p]=this._middlewares[p].filter(function(S){return E?S.create!==E:!!g&&S.name!==g})),this},Xt.prototype.open=function(){var f=this;return Hn(_n,function(){return cn(f)})},Xt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var f=this._state,p=_i.indexOf(this);if(0<=p&&_i.splice(p,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}f.isBeingOpened||(f.dbReadyPromise=new Ie(function(g){f.dbReadyResolve=g}),f.openCanceller=new Ie(function(g,E){f.cancelOpen=E}))},Xt.prototype.close=function(g){var p=(g===void 0?{disableAutoOpen:!0}:g).disableAutoOpen,g=this._state;p?(g.isBeingOpened&&g.cancelOpen(new Me.DatabaseClosed),this._close(),g.autoOpen=!1,g.dbOpenError=new Me.DatabaseClosed):(this._close(),g.autoOpen=this._options.autoOpen||g.isBeingOpened,g.openComplete=!1,g.dbOpenError=null)},Xt.prototype.delete=function(f){var p=this;f===void 0&&(f={disableAutoOpen:!0});var g=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new Ie(function(S,A){function O(){p.close(f);var M=p._deps.indexedDB.deleteDatabase(p.name);M.onsuccess=Vt(function(){var q,H,$;q=p._deps,H=p.name,$=q.indexedDB,q=q.IDBKeyRange,kr($)||H===ss||Ca($,q).delete(H).catch(Ct),S()}),M.onerror=Fn(A),M.onblocked=p._fireOnBlocked}if(g)throw new Me.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(O):O()})},Xt.prototype.backendDB=function(){return this.idbdb},Xt.prototype.isOpen=function(){return this.idbdb!==null},Xt.prototype.hasBeenClosed=function(){var f=this._state.dbOpenError;return f&&f.name==="DatabaseClosed"},Xt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Xt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Xt.prototype,"tables",{get:function(){var f=this;return d(this._allTables).map(function(p){return f._allTables[p]})},enumerable:!1,configurable:!0}),Xt.prototype.transaction=function(){var f=(function(p,g,E){var S=arguments.length;if(S<2)throw new Me.InvalidArgument("Too few arguments");for(var A=new Array(S-1);--S;)A[S-1]=arguments[S];return E=A.pop(),[p,B(A),E]}).apply(this,arguments);return this._transaction.apply(this,f)},Xt.prototype._transaction=function(f,p,g){var E=this,S=Ne.trans;S&&S.db===this&&f.indexOf("!")===-1||(S=null);var A,O,M=f.indexOf("?")!==-1;f=f.replace("!","").replace("?","");try{if(O=p.map(function(H){if(H=H instanceof E.Table?H.name:H,typeof H!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return H}),f=="r"||f===Ir)A=Ir;else{if(f!="rw"&&f!=xr)throw new Me.InvalidArgument("Invalid transaction mode: "+f);A=xr}if(S){if(S.mode===Ir&&A===xr){if(!M)throw new Me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");S=null}S&&O.forEach(function(H){if(S&&S.storeNames.indexOf(H)===-1){if(!M)throw new Me.SubTransaction("Table "+H+" not included in parent transaction.");S=null}}),M&&S&&!S.active&&(S=null)}}catch(H){return S?S._promise(null,function($,j){j(H)}):xt(H)}var q=(function H($,j,W,F,Y){return Ie.resolve().then(function(){var Q=Ne.transless||Ne,J=$._createTransaction(j,W,$._dbSchema,F);if(J.explicit=!0,Q={trans:J,transless:Q},F)J.idbtrans=F.idbtrans;else try{J.create(),J.idbtrans._explicit=!0,$._state.PR1398_maxLoop=3}catch(fe){return fe.name===mt.InvalidState&&$.isOpen()&&0<--$._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),$.close({disableAutoOpen:!1}),$.open().then(function(){return H($,j,W,null,Y)})):xt(fe)}var ne,ae=G(Y);return ae&&Qt(),Q=Ie.follow(function(){var fe;(ne=Y.call(J,J))&&(ae?(fe=Ln.bind(null,null),ne.then(fe,fe)):typeof ne.next=="function"&&typeof ne.throw=="function"&&(ne=Rt(ne)))},Q),(ne&&typeof ne.then=="function"?Ie.resolve(ne).then(function(fe){return J.active?fe:xt(new Me.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Q.then(function(){return ne})).then(function(fe){return F&&J._resolve(),J._completion.then(function(){return fe})}).catch(function(fe){return J._reject(fe),xt(fe)})})}).bind(null,this,A,O,S,g);return S?S._promise(A,q,"lock"):Ne.trans?Hn(Ne.transless,function(){return E._whenReady(q)}):this._whenReady(q)},Xt.prototype.table=function(f){if(!I(this._allTables,f))throw new Me.InvalidTable("Table ".concat(f," does not exist"));return this._allTables[f]},Xt);function Xt(f,p){var g=this;this._middlewares={},this.verno=0;var E=Xt.dependencies;this._options=p=s({addons:Xt.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},p),this._deps={indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},E=p.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var S,A,O,M,q,H={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ct,dbReadyPromise:null,cancelOpen:Ct,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:p.autoOpen};H.dbReadyPromise=new Ie(function(j){H.dbReadyResolve=j}),H.openCanceller=new Ie(function(j,W){H.cancelOpen=W}),this._state=H,this.name=f,this.on=ei(this,"populate","blocked","versionchange","close",{ready:[rn,Ct]}),this.once=function(j,W){var F=function(){for(var Y=[],Q=0;Q<arguments.length;Q++)Y[Q]=arguments[Q];g.on(j).unsubscribe(F),W.apply(g,Y)};return g.on(j,F)},this.on.ready.subscribe=ke(this.on.ready.subscribe,function(j){return function(W,F){Xt.vip(function(){var Y,Q=g._state;Q.openComplete?(Q.dbOpenError||Ie.resolve().then(W),F&&j(W)):Q.onReadyBeingFired?(Q.onReadyBeingFired.push(W),F&&j(W)):(j(W),Y=g,F||j(function J(){Y.on.ready.unsubscribe(W),Y.on.ready.unsubscribe(J)}))})}}),this.Collection=(S=this,Rn(ul.prototype,function(ne,J){this.db=S;var F=ya,Y=null;if(J)try{F=J()}catch(ae){Y=ae}var Q=ne._ctx,J=Q.table,ne=J.hook.reading.fire;this._ctx={table:J,index:Q.index,isPrimKey:!Q.index||J.schema.primKey.keyPath&&Q.index===J.schema.primKey.name,range:F,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Y,or:Q.or,valueMapper:ne!==pi?ne:null}})),this.Table=(A=this,Rn(os.prototype,function(j,W,F){this.db=A,this._tx=F,this.name=j,this.schema=W,this.hook=A._allTables[j]?A._allTables[j].hook:ei(null,{creating:[Os,Ct],reading:[mi,pi],updating:[wo,Ct],deleting:[To,Ct]})})),this.Transaction=(O=this,Rn(Us.prototype,function(j,W,F,Y,Q){var J=this;j!=="readonly"&&W.forEach(function(ne){ne=(ne=F[ne])===null||ne===void 0?void 0:ne.yProps,ne&&(W=W.concat(ne.map(function(ae){return ae.updatesTable})))}),this.db=O,this.mode=j,this.storeNames=W,this.schema=F,this.chromeTransactionDurability=Y,this.idbtrans=null,this.on=ei(this,"complete","error","abort"),this.parent=Q||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ie(function(ne,ae){J._resolve=ne,J._reject=ae}),this._completion.then(function(){J.active=!1,J.on.complete.fire()},function(ne){var ae=J.active;return J.active=!1,J.on.error.fire(ne),J.parent?J.parent._reject(ne):ae&&J.idbtrans&&J.idbtrans.abort(),xt(ne)})})),this.Version=(M=this,Rn(Aa.prototype,function(j){this.db=M,this._cfg={version:j,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(q=this,Rn(Hi.prototype,function(j,W,F){if(this.db=q,this._ctx={table:j,index:W===":id"?null:W,or:F},this._cmp=this._ascending=ot,this._descending=function(Y,Q){return ot(Q,Y)},this._max=function(Y,Q){return 0<ot(Y,Q)?Y:Q},this._min=function(Y,Q){return ot(Y,Q)<0?Y:Q},this._IDBKeyRange=q._deps.IDBKeyRange,!this._IDBKeyRange)throw new Me.MissingAPI})),this.on("versionchange",function(j){0<j.newVersion?console.warn("Another connection wants to upgrade database '".concat(g.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(g.name,"'. Closing db now to resume the delete request.")),g.close({disableAutoOpen:!1})}),this.on("blocked",function(j){!j.newVersion||j.newVersion<j.oldVersion?console.warn("Dexie.delete('".concat(g.name,"') was blocked")):console.warn("Upgrade '".concat(g.name,"' blocked by other connection holding version ").concat(j.oldVersion/10))}),this._maxKey=Ki(p.IDBKeyRange),this._createTransaction=function(j,W,F,Y){return new g.Transaction(j,W,F,g._options.chromeTransactionDurability,Y)},this._fireOnBlocked=function(j){g.on("blocked").fire(j),_i.filter(function(W){return W.name===g.name&&W!==g&&!W._state.vcFired}).map(function(W){return W.on("versionchange").fire(j)})},this.use(xa),this.use(hl),this.use(Bh),this.use(Pr),this.use(oi);var $=new Proxy(this,{get:function(j,W,F){if(W==="_vip")return!0;if(W==="table")return function(Q){return No(g.table(Q),$)};var Y=Reflect.get(j,W,F);return Y instanceof os?No(Y,$):W==="tables"?Y.map(function(Q){return No(Q,$)}):W==="_createTransaction"?function(){return No(Y.apply(this,arguments),$)}:Y}});this.vip=$,E.forEach(function(j){return j(g)})}var Da,Er=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Mc=(dl.prototype.subscribe=function(f,p,g){return this._subscribe(f&&typeof f!="function"?f:{next:f,error:p,complete:g})},dl.prototype[Er]=function(){return this},dl);function dl(f){this._subscribe=f}try{Da={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Da={indexedDB:null,IDBKeyRange:null}}function kc(f){var p,g=!1,E=new Mc(function(S){var A=G(f),O,M=!1,q={},H={},$={get closed(){return M},unsubscribe:function(){M||(M=!0,O&&O.abort(),j&&En.storagemutated.unsubscribe(F))}};S.start&&S.start($);var j=!1,W=function(){return Rr(Y)},F=function(Q){c(q,Q),v(H,q)&&W()},Y=function(){var Q,J,ne;!M&&Da.indexedDB&&(q={},Q={},O&&O.abort(),O=new AbortController,ne=(function(ae){var fe=$n();try{A&&Qt();var ge=Lt(f,ae);return ge=A?ge.finally(Ln):ge}finally{fe&&Ar()}})(J={subscr:Q,signal:O.signal,requery:W,querier:f,trans:null}),Promise.resolve(ne).then(function(ae){g=!0,p=ae,M||J.signal.aborted||(q={},(function(fe){for(var ge in fe)if(I(fe,ge))return;return 1})(H=Q)||j||(En(Nr,F),j=!0),Rr(function(){return!M&&S.next&&S.next(ae)}))},function(ae){g=!1,["DatabaseClosedError","AbortError"].includes(ae?.name)||M||Rr(function(){M||S.error&&S.error(ae)})}))};return setTimeout(W,0),$});return E.hasValue=function(){return g},E.getValue=function(){return p},E}var Hs=Ri;function hu(f){var p=hs;try{hs=!0,En.storagemutated.fire(f),Ce(f,!0)}finally{hs=p}}k(Hs,s(s({},zi),{delete:function(f){return new Hs(f,{addons:[]}).delete()},exists:function(f){return new Hs(f,{addons:[]}).open().then(function(p){return p.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(f){try{return p=Hs.dependencies,g=p.indexedDB,p=p.IDBKeyRange,(kr(g)?Promise.resolve(g.databases()).then(function(E){return E.map(function(S){return S.name}).filter(function(S){return S!==ss})}):Ca(g,p).toCollection().primaryKeys()).then(f)}catch{return xt(new Me.MissingAPI)}var p,g},defineClass:function(){return function(f){_(this,f)}},ignoreTransaction:function(f){return Ne.trans?Hn(Ne.transless,f):f()},vip:Ra,async:function(f){return function(){try{var p=Rt(f.apply(this,arguments));return p&&typeof p.then=="function"?p:Ie.resolve(p)}catch(g){return xt(g)}}},spawn:function(f,p,g){try{var E=Rt(f.apply(g,p||[]));return E&&typeof E.then=="function"?E:Ie.resolve(E)}catch(S){return xt(S)}},currentTransaction:{get:function(){return Ne.trans||null}},waitFor:function(f,p){return p=Ie.resolve(typeof f=="function"?Hs.ignoreTransaction(f):f).timeout(p||6e4),Ne.trans?Ne.trans.waitFor(p):p},Promise:Ie,debug:{get:function(){return Pn},set:function(f){ol(f)}},derive:pe,extend:_,props:k,override:ke,Events:ei,on:En,liveQuery:kc,extendObservabilitySet:c,getByKeyPath:Ge,setByKeyPath:D,delByKeyPath:function(f,p){typeof p=="string"?D(f,p,void 0):"length"in p&&[].map.call(p,function(g){D(f,g,void 0)})},shallowClone:N,deepClone:P,getObjectDiff:Lr,cmp:ot,asap:yt,minKey:-1/0,addons:[],connections:_i,errnames:mt,dependencies:Da,cache:w,semVer:"4.2.1",version:"4.2.1".split(".").map(function(f){return parseInt(f)}).reduce(function(f,p,g){return f+p/Math.pow(10,2*g)})})),Hs.maxKey=Ki(Hs.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(En(Nr,function(f){hs||(f=new CustomEvent(_r,{detail:f}),hs=!0,dispatchEvent(f),hs=!1)}),addEventListener(_r,function(f){f=f.detail,hs||hu(f)}));var Na,hs=!1,cr=function(){};return typeof BroadcastChannel<"u"&&((cr=function(){(Na=new BroadcastChannel(_r)).onmessage=function(f){return f.data&&hu(f.data)}})(),typeof Na.unref=="function"&&Na.unref(),En(Nr,function(f){hs||Na.postMessage(f)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(f){if(!Ri.disableBfCache&&f.persisted){Pn&&console.debug("Dexie: handling persisted pagehide"),Na?.close();for(var p=0,g=_i;p<g.length;p++)g[p].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(f){!Ri.disableBfCache&&f.persisted&&(Pn&&console.debug("Dexie: handling persisted pageshow"),cr(),hu({all:new Tn(-1/0,[[]])}))})),Ie.rejectionMapper=function(f,p){return!f||f instanceof xe||f instanceof TypeError||f instanceof SyntaxError||!f.name||!ns[f.name]?f:(p=new ns[f.name](p||f.message,f),"stack"in f&&re(p,"stack",{get:function(){return this.inner.stack}}),p)},ol(Pn),s(Ri,Object.freeze({__proto__:null,Dexie:Ri,liveQuery:kc,Entity:Co,cmp:ot,PropModification:Or,replacePrefix:function(f,p){return new Or({replacePrefix:[f,p]})},add:function(f){return new Or({add:f})},remove:function(f){return new Or({remove:f})},default:Ri,RangeSet:Tn,mergeRanges:Vr,rangesOverlap:Kn}),{default:Ri}),Ri})})(qf)),qf.exports}var Dw=Ow();const Yp=bm(Dw),C_=Symbol.for("Dexie"),th=globalThis[C_]||(globalThis[C_]=Yp);if(Yp.semVer!==th.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Yp.semVer} and ${th.semVer}`);const{liveQuery:FD,mergeRanges:KD,rangesOverlap:GD,RangeSet:YD,cmp:QD,Entity:XD,PropModification:$D,replacePrefix:JD,add:WD,remove:ZD,DexieYProvider:eN}=th,nr=new th("GeminiPodcastFlashcards");nr.version(2).stores({vocab:"id, word, status, nextReview, reviewCount, updatedAt"});async function Nw(){if(await nr.vocab.count()===0)try{const n="/public/flashcards/data.json".replace("//","/");console.log(`Fetching data from: ${n}`);const s=await fetch(n);if(!s.ok)throw new Error(`Failed to fetch data.json (${s.status})`);const u=(await s.json()).map(d=>({...d,status:d.status||"new",reviewCount:d.reviewCount||0,nextReview:d.nextReview||Date.now(),updatedAt:Date.now()}));await nr.vocab.bulkAdd(u),console.log(`Initialized DB with ${u.length} cards.`)}catch(e){console.error("Error initializing database:",e)}}const Mw=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kw=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),R_=i=>{const e=kw(i);return e.charAt(0).toUpperCase()+e.slice(1)},bb=(...i)=>i.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),Vw=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Pw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Lw=Te.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:d,...y},_)=>Te.createElement("svg",{ref:_,...Pw,width:e,height:e,stroke:i,strokeWidth:s?Number(n)*24/Number(e):n,className:bb("lucide",o),...!u&&!Vw(y)&&{"aria-hidden":"true"},...y},[...d.map(([b,R])=>Te.createElement(b,R)),...Array.isArray(u)?u:[u]]));const xs=(i,e)=>{const n=Te.forwardRef(({className:s,...o},u)=>Te.createElement(Lw,{ref:u,iconNode:e,className:bb(`lucide-${Mw(R_(i))}`,`lucide-${i}`,s),...o}));return n.displayName=R_(i),n};const Uw=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],jw=xs("layers",Uw);const zw=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Bw=xs("loader-circle",zw);const qw=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Hw=xs("mic",qw);const Fw=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],Kw=xs("pen-tool",Fw);const Gw=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Yw=xs("play",Gw);const Qw=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Xw=xs("search",Qw);const $w=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Jw=xs("sparkles",$w);const Ww=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Zw=xs("square",Ww);const eS=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],tS=xs("trash-2",eS);const nS=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Mp=xs("volume-2",nS);function Eb(i,e){const n=Date.now(),s=60*1e3,o=1440*60*1e3,u=Number(e);if(isNaN(u)||u<0||u>5)throw new Error("Grade must be a number between 0 and 5");let{easeFactor:d=2.5,interval:y=0,reviewCount:_=0}=i;u>=3?(y===0?y=1:y===1?y=6:y=Math.round(y*d),_+=1):y=0;let b=d+(.1-(5-u)*(.08+(5-u)*.02));b<1.3&&(b=1.3);const R=y===0?n+10*s:n+y*o,I=u>=3?"review":"learning";return{easeFactor:parseFloat(b.toFixed(2)),interval:y,nextReview:R,status:I,reviewCount:_,updatedAt:n}}function rS(){const[i,e]=Te.useState(!1),[n,s]=Te.useState(null),[o,u]=Te.useState(null),d=Te.useRef(null),y=Te.useRef([]);return Te.useEffect(()=>()=>{n&&URL.revokeObjectURL(n)},[n]),{isRecording:i,audioUrl:n,error:o,startRecording:async()=>{try{u(null);const I=await navigator.mediaDevices.getUserMedia({audio:!0});d.current=new MediaRecorder(I),y.current=[],d.current.ondataavailable=k=>{k.data.size>0&&y.current.push(k.data)},d.current.onstop=()=>{const k=new Blob(y.current,{type:"audio/webm"}),X=URL.createObjectURL(k);s(X),I.getTracks().forEach(re=>re.stop())},d.current.start(),e(!0)}catch(I){console.error("Error accessing microphone:",I),u("Microphone access denied. Please check your permissions.")}},stopRecording:()=>{d.current&&i&&(d.current.stop(),e(!1))},clearRecording:()=>{n&&(URL.revokeObjectURL(n),s(null)),e(!1),u(null)}}}var I_;(function(i){i.STRING="string",i.NUMBER="number",i.INTEGER="integer",i.BOOLEAN="boolean",i.ARRAY="array",i.OBJECT="object"})(I_||(I_={}));var x_;(function(i){i.LANGUAGE_UNSPECIFIED="language_unspecified",i.PYTHON="python"})(x_||(x_={}));var O_;(function(i){i.OUTCOME_UNSPECIFIED="outcome_unspecified",i.OUTCOME_OK="outcome_ok",i.OUTCOME_FAILED="outcome_failed",i.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(O_||(O_={}));const D_=["user","model","function","system"];var N_;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(N_||(N_={}));var M_;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(M_||(M_={}));var k_;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(k_||(k_={}));var V_;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER"})(V_||(V_={}));var Wu;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.OTHER="OTHER"})(Wu||(Wu={}));var P_;(function(i){i.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",i.RETRIEVAL_QUERY="RETRIEVAL_QUERY",i.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",i.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",i.CLASSIFICATION="CLASSIFICATION",i.CLUSTERING="CLUSTERING"})(P_||(P_={}));var L_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(L_||(L_={}));var U_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(U_||(U_={}));class mr extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Ul extends mr{constructor(e,n){super(e),this.response=n}}class Tb extends mr{constructor(e,n,s,o){super(e),this.status=n,this.statusText=s,this.errorDetails=o}}class lo extends mr{}class wb extends mr{}const iS="https://generativelanguage.googleapis.com",sS="v1beta",aS="0.24.1",oS="genai-js";var Jo;(function(i){i.GENERATE_CONTENT="generateContent",i.STREAM_GENERATE_CONTENT="streamGenerateContent",i.COUNT_TOKENS="countTokens",i.EMBED_CONTENT="embedContent",i.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Jo||(Jo={}));class lS{constructor(e,n,s,o,u){this.model=e,this.task=n,this.apiKey=s,this.stream=o,this.requestOptions=u}toString(){var e,n;const s=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||sS;let u=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||iS}/${s}/${this.model}:${this.task}`;return this.stream&&(u+="?alt=sse"),u}}function uS(i){const e=[];return i?.apiClient&&e.push(i.apiClient),e.push(`${oS}/${aS}`),e.join(" ")}async function cS(i){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",uS(i.requestOptions)),n.append("x-goog-api-key",i.apiKey);let s=(e=i.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(o){throw new lo(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${o.message}`)}for(const[o,u]of s.entries()){if(o==="x-goog-api-key")throw new lo(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new lo(`Header name ${o} can only be set using the apiClient field`);n.append(o,u)}}return n}async function fS(i,e,n,s,o,u){const d=new lS(i,e,n,s,u);return{url:d.toString(),fetchOptions:Object.assign(Object.assign({},mS(u)),{method:"POST",headers:await cS(d),body:o})}}async function _c(i,e,n,s,o,u={},d=fetch){const{url:y,fetchOptions:_}=await fS(i,e,n,s,o,u);return hS(y,_,d)}async function hS(i,e,n=fetch){let s;try{s=await n(i,e)}catch(o){dS(o,i)}return s.ok||await pS(s,i),s}function dS(i,e){let n=i;throw n.name==="AbortError"?(n=new wb(`Request aborted when fetching ${e.toString()}: ${i.message}`),n.stack=i.stack):i instanceof Tb||i instanceof lo||(n=new mr(`Error fetching from ${e.toString()}: ${i.message}`),n.stack=i.stack),n}async function pS(i,e){let n="",s;try{const o=await i.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,s=o.error.details)}catch{}throw new Tb(`Error fetching from ${e.toString()}: [${i.status} ${i.statusText}] ${n}`,i.status,i.statusText,s)}function mS(i){const e={};if(i?.signal!==void 0||i?.timeout>=0){const n=new AbortController;i?.timeout>=0&&setTimeout(()=>n.abort(),i.timeout),i?.signal&&i.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}function Tm(i){return i.text=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Hf(i.candidates[0]))throw new Ul(`${no(i)}`,i);return gS(i)}else if(i.promptFeedback)throw new Ul(`Text not available. ${no(i)}`,i);return""},i.functionCall=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Hf(i.candidates[0]))throw new Ul(`${no(i)}`,i);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),j_(i)[0]}else if(i.promptFeedback)throw new Ul(`Function call not available. ${no(i)}`,i)},i.functionCalls=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Hf(i.candidates[0]))throw new Ul(`${no(i)}`,i);return j_(i)}else if(i.promptFeedback)throw new Ul(`Function call not available. ${no(i)}`,i)},i}function gS(i){var e,n,s,o;const u=[];if(!((n=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const d of(o=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)d.text&&u.push(d.text),d.executableCode&&u.push("\n```"+d.executableCode.language+`
`+d.executableCode.code+"\n```\n"),d.codeExecutionResult&&u.push("\n```\n"+d.codeExecutionResult.output+"\n```\n");return u.length>0?u.join(""):""}function j_(i){var e,n,s,o;const u=[];if(!((n=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const d of(o=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)d.functionCall&&u.push(d.functionCall);if(u.length>0)return u}const yS=[Wu.RECITATION,Wu.SAFETY,Wu.LANGUAGE];function Hf(i){return!!i.finishReason&&yS.includes(i.finishReason)}function no(i){var e,n,s;let o="";if((!i.candidates||i.candidates.length===0)&&i.promptFeedback)o+="Response was blocked",!((e=i.promptFeedback)===null||e===void 0)&&e.blockReason&&(o+=` due to ${i.promptFeedback.blockReason}`),!((n=i.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${i.promptFeedback.blockReasonMessage}`);else if(!((s=i.candidates)===null||s===void 0)&&s[0]){const u=i.candidates[0];Hf(u)&&(o+=`Candidate was blocked due to ${u.finishReason}`,u.finishMessage&&(o+=`: ${u.finishMessage}`))}return o}function oc(i){return this instanceof oc?(this.v=i,this):new oc(i)}function vS(i,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(i,e||[]),o,u=[];return o={},d("next"),d("throw"),d("return"),o[Symbol.asyncIterator]=function(){return this},o;function d(k){s[k]&&(o[k]=function(X){return new Promise(function(re,pe){u.push([k,X,re,pe])>1||y(k,X)})})}function y(k,X){try{_(s[k](X))}catch(re){I(u[0][3],re)}}function _(k){k.value instanceof oc?Promise.resolve(k.value.v).then(b,R):I(u[0][2],k)}function b(k){y("next",k)}function R(k){y("throw",k)}function I(k,X){k(X),u.shift(),u.length&&y(u[0][0],u[0][1])}}const z_=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function _S(i){const e=i.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=TS(e),[s,o]=n.tee();return{stream:ES(s),response:bS(o)}}async function bS(i){const e=[],n=i.getReader();for(;;){const{done:s,value:o}=await n.read();if(s)return Tm(wS(e));e.push(o)}}function ES(i){return vS(this,arguments,function*(){const n=i.getReader();for(;;){const{value:s,done:o}=yield oc(n.read());if(o)break;yield yield oc(Tm(s))}})}function TS(i){const e=i.getReader();return new ReadableStream({start(s){let o="";return u();function u(){return e.read().then(({value:d,done:y})=>{if(y){if(o.trim()){s.error(new mr("Failed to parse stream"));return}s.close();return}o+=d;let _=o.match(z_),b;for(;_;){try{b=JSON.parse(_[1])}catch{s.error(new mr(`Error parsing JSON response: "${_[1]}"`));return}s.enqueue(b),o=o.substring(_[0].length),_=o.match(z_)}return u()}).catch(d=>{let y=d;throw y.stack=d.stack,y.name==="AbortError"?y=new wb("Request aborted when reading from the stream"):y=new mr("Error reading from the stream"),y})}}})}function wS(i){const e=i[i.length-1],n={promptFeedback:e?.promptFeedback};for(const s of i){if(s.candidates){let o=0;for(const u of s.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=u.citationMetadata,n.candidates[o].groundingMetadata=u.groundingMetadata,n.candidates[o].finishReason=u.finishReason,n.candidates[o].finishMessage=u.finishMessage,n.candidates[o].safetyRatings=u.safetyRatings,u.content&&u.content.parts){n.candidates[o].content||(n.candidates[o].content={role:u.content.role||"user",parts:[]});const d={};for(const y of u.content.parts)y.text&&(d.text=y.text),y.functionCall&&(d.functionCall=y.functionCall),y.executableCode&&(d.executableCode=y.executableCode),y.codeExecutionResult&&(d.codeExecutionResult=y.codeExecutionResult),Object.keys(d).length===0&&(d.text=""),n.candidates[o].content.parts.push(d)}o++}s.usageMetadata&&(n.usageMetadata=s.usageMetadata)}return n}async function Sb(i,e,n,s){const o=await _c(e,Jo.STREAM_GENERATE_CONTENT,i,!0,JSON.stringify(n),s);return _S(o)}async function Ab(i,e,n,s){const u=await(await _c(e,Jo.GENERATE_CONTENT,i,!1,JSON.stringify(n),s)).json();return{response:Tm(u)}}function Cb(i){if(i!=null){if(typeof i=="string")return{role:"system",parts:[{text:i}]};if(i.text)return{role:"system",parts:[i]};if(i.parts)return i.role?i:{role:"system",parts:i.parts}}}function lc(i){let e=[];if(typeof i=="string")e=[{text:i}];else for(const n of i)typeof n=="string"?e.push({text:n}):e.push(n);return SS(e)}function SS(i){const e={role:"user",parts:[]},n={role:"function",parts:[]};let s=!1,o=!1;for(const u of i)"functionResponse"in u?(n.parts.push(u),o=!0):(e.parts.push(u),s=!0);if(s&&o)throw new mr("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!o)throw new mr("No content is provided for sending chat message.");return s?e:n}function AS(i,e){var n;let s={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(n=e?.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=i.generateContentRequest!=null;if(i.contents){if(o)throw new lo("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=i.contents}else if(o)s=Object.assign(Object.assign({},s),i.generateContentRequest);else{const u=lc(i);s.contents=[u]}return{generateContentRequest:s}}function B_(i){let e;return i.contents?e=i:e={contents:[lc(i)]},i.systemInstruction&&(e.systemInstruction=Cb(i.systemInstruction)),e}function CS(i){return typeof i=="string"||Array.isArray(i)?{content:lc(i)}:i}const q_=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],RS={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function IS(i){let e=!1;for(const n of i){const{role:s,parts:o}=n;if(!e&&s!=="user")throw new mr(`First content should be with role 'user', got ${s}`);if(!D_.includes(s))throw new mr(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(D_)}`);if(!Array.isArray(o))throw new mr("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new mr("Each Content should have at least one part");const u={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const y of o)for(const _ of q_)_ in y&&(u[_]+=1);const d=RS[s];for(const y of q_)if(!d.includes(y)&&u[y]>0)throw new mr(`Content with role '${s}' can't contain '${y}' part`);e=!0}}function H_(i){var e;if(i.candidates===void 0||i.candidates.length===0)return!1;const n=(e=i.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const s of n.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}const F_="SILENT_ERROR";class xS{constructor(e,n,s,o={}){this.model=n,this.params=s,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,s?.history&&(IS(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var s,o,u,d,y,_;await this._sendPromise;const b=lc(e),R={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(y=this.params)===null||y===void 0?void 0:y.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,b]},I=Object.assign(Object.assign({},this._requestOptions),n);let k;return this._sendPromise=this._sendPromise.then(()=>Ab(this._apiKey,this.model,R,I)).then(X=>{var re;if(H_(X.response)){this._history.push(b);const pe=Object.assign({parts:[],role:"model"},(re=X.response.candidates)===null||re===void 0?void 0:re[0].content);this._history.push(pe)}else{const pe=no(X.response);pe&&console.warn(`sendMessage() was unsuccessful. ${pe}. Inspect response object for details.`)}k=X}).catch(X=>{throw this._sendPromise=Promise.resolve(),X}),await this._sendPromise,k}async sendMessageStream(e,n={}){var s,o,u,d,y,_;await this._sendPromise;const b=lc(e),R={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(y=this.params)===null||y===void 0?void 0:y.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,b]},I=Object.assign(Object.assign({},this._requestOptions),n),k=Sb(this._apiKey,this.model,R,I);return this._sendPromise=this._sendPromise.then(()=>k).catch(X=>{throw new Error(F_)}).then(X=>X.response).then(X=>{if(H_(X)){this._history.push(b);const re=Object.assign({},X.candidates[0].content);re.role||(re.role="model"),this._history.push(re)}else{const re=no(X);re&&console.warn(`sendMessageStream() was unsuccessful. ${re}. Inspect response object for details.`)}}).catch(X=>{X.message!==F_&&console.error(X)}),k}}async function OS(i,e,n,s){return(await _c(e,Jo.COUNT_TOKENS,i,!1,JSON.stringify(n),s)).json()}async function DS(i,e,n,s){return(await _c(e,Jo.EMBED_CONTENT,i,!1,JSON.stringify(n),s)).json()}async function NS(i,e,n,s){const o=n.requests.map(d=>Object.assign(Object.assign({},d),{model:e}));return(await _c(e,Jo.BATCH_EMBED_CONTENTS,i,!1,JSON.stringify({requests:o}),s)).json()}class K_{constructor(e,n,s={}){this.apiKey=e,this._requestOptions=s,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=Cb(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var s;const o=B_(e),u=Object.assign(Object.assign({},this._requestOptions),n);return Ab(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),u)}async generateContentStream(e,n={}){var s;const o=B_(e),u=Object.assign(Object.assign({},this._requestOptions),n);return Sb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),u)}startChat(e){var n;return new xS(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const s=AS(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return OS(this.apiKey,this.model,s,o)}async embedContent(e,n={}){const s=CS(e),o=Object.assign(Object.assign({},this._requestOptions),n);return DS(this.apiKey,this.model,s,o)}async batchEmbedContents(e,n={}){const s=Object.assign(Object.assign({},this._requestOptions),n);return NS(this.apiKey,this.model,e,s)}}class kp{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new mr("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new K_(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,s){if(!e.name)throw new lo("Cached content must contain a `name` field.");if(!e.model)throw new lo("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const d of o)if(n?.[d]&&e[d]&&n?.[d]!==e[d]){if(d==="model"){const y=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,_=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(y===_)continue}throw new lo(`Different value for "${d}" specified in modelParams (${n[d]}) and cachedContent (${e[d]})`)}const u=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new K_(this.apiKey,u,s)}}const MS={models:{default:"gemini-2.5-flash"}},kS={ai:MS};class VS{constructor(){this.apiKeyKey="gemini_api_key_byok",this.modelName=kS.ai?.models?.default}getApiKey(){return localStorage.getItem(this.apiKeyKey)||sessionStorage.getItem(this.apiKeyKey)}isPersistent(){return!!localStorage.getItem(this.apiKeyKey)}setApiKey(e,n=!1){n?(localStorage.setItem(this.apiKeyKey,e),sessionStorage.removeItem(this.apiKeyKey)):(sessionStorage.setItem(this.apiKeyKey,e),localStorage.removeItem(this.apiKeyKey))}removeApiKey(){sessionStorage.removeItem(this.apiKeyKey),localStorage.removeItem(this.apiKeyKey)}hasKey(){return!!this.getApiKey()}async getParaphrase(e,n){const s=this.getApiKey();if(!s)throw new Error("API Key not found. Please configure it in Settings.");const u=new kp(s).getGenerativeModel({model:this.modelName}),d=`
      Role: English Language Tutor for B1/B2 learners.
      Task: Explain the word "${e}" in simple English.
      Context: "${n}"
      
      Constraints:
      1. Use simple vocabulary (CEFR B1 level).
      2. Keep it concise (under 30 words).
      3. Do NOT simply repeat the definition; explain it naturally.
      4. Output plain text only (no markdown).
    `;return this._callGemini(u,d,!1,!1)}async generateCardDetails(e,n=""){const s=this.getApiKey();if(!s)throw new Error("API Key not found in session. Please configure it in Settings again.");const u=new kp(s).getGenerativeModel({model:this.modelName}),d=n?`Context Sentence: "${n}"
Note: Define the word as it is used in this specific context.`:"Context: None provided. Create a natural example sentence.",y=`
      You are an English vocabulary expert helping a Traditional Chinese (Taiwan) learner.
      Target Word: "${e}"
      ${d}
      
      Return ONLY a raw JSON object (no markdown formatting, no code blocks) with the following keys:
      - "definition": A clear, concise English definition suitable for a flashcard.
      - "ipa": The IPA phonetic transcription.
      - "context": ${n?'Return the provided "Context Sentence" exactly as is.':"A short, natural example sentence using the word (Keep in English)."}
      - "translation": The Traditional Chinese (Taiwan) translation of the word. Ensure it is NOT Simplified Chinese.
      - "collocations": An array of 2-3 common collocations or short phrases using this word (e.g., ["reluctant to admit", "reluctant agreement"]).
    `;return this._callGemini(u,y)}async analyzeTranscript(e,n){const s=this.getApiKey();if(!s)throw new Error("API Key not found. Please configure it in Settings.");const u=new kp(s).getGenerativeModel({model:this.modelName});let d="";n==="auto"?d="Select the most important and difficult vocabulary words (approximately 5 to 15 words depending on text length).":d=`Select strictly up to ${n} most important vocabulary words.`;const y=`
      You are an expert language tutor analyzing a podcast transcript for a Traditional Chinese (Taiwan) learner.
      
      Goal: Extract vocabulary words from the provided text.
      Constraint: ${d}
      
      For each word, provide:
      1. "word": The target word (lemma).
      2. "ipa": IPA phonetic transcription.
      3. "definition": A concise English definition relevant to the context in the transcript.
      4. "context": The exact sentence or a slightly simplified version from the text where the word appears (Keep in English).
      5. "translation": The Traditional Chinese (Taiwan) translation of the word. Strictly NO Simplified Chinese.
      6. "collocations": An array of 2-3 common collocations found in the text or generally associated with the word.

      Input Text:
      """
      ${e.substring(0,3e4)} 
      """

      Return ONLY a raw JSON array (no markdown, no code blocks) of objects.
      Example format:
      [
        { "word": "Serendipity", "ipa": "...", "definition": "...", "context": "...", "translation": "" }
      ]
    `;return this._callGemini(u,y,!0)}async _callGemini(e,n,s=!1,o=!0){try{console.log(`Calling AI Model: ${this.modelName}`);const _=(await(await e.generateContent(n)).response).text().replace(/```json|```/g,"").trim();if(!o)return _;let b;try{b=JSON.parse(_)}catch(I){const k=_.indexOf(s?"[":"{"),X=_.lastIndexOf(s?"]":"}")+1;if(k!==-1&&X!==-1)b=JSON.parse(_.substring(k,X));else throw I}const R=I=>{I.ipa&&(I.ipa=I.ipa.replace(new RegExp("^[/\\[]|[/\\]]$","g"),""))};return Array.isArray(b)?b.forEach(R):R(b),b}catch(u){throw console.error("AI Generation failed:",u),new Error(`AI Error: ${u.message}`)}}}const _s=new VS;function PS({card:i,onUpdate:e}){const[n,s]=Te.useState(!1),[o,u]=Te.useState(!1),[d,y]=Te.useState(null),[_,b]=Te.useState(!1),{isRecording:R,audioUrl:I,startRecording:k,stopRecording:X,clearRecording:re}=rS();Te.useEffect(()=>{if(!n)y(null),re();else if((JSON.parse(localStorage.getItem("gp_settings_autoplay_tts"))||!1)&&i.context){const N=setTimeout(()=>{Be(i.context,{stopPropagation:()=>{}})},500);return()=>clearTimeout(N)}},[n,i.id]);const pe=()=>{s(!n),u(!1)},_e=(D,N)=>{N.stopPropagation();try{const V=Eb(i,D),B={...i,...V};e(B),s(!1),u(!1)}catch(V){console.error("Error updating card:",V)}},ze=D=>{D.stopPropagation(),u(!o)},Be=(D,N)=>{if(N&&N.stopPropagation(),!D)return;window.speechSynthesis.cancel();const V=new SpeechSynthesisUtterance(D);V.lang="en-US",V.rate=.9,window.speechSynthesis.speak(V)},ke=async D=>{if(D.stopPropagation(),!d){b(!0);try{const N=typeof i.context=="string"?i.context:i.context?.text||"",V=await _s.getParaphrase(i.word,N);y(V)}catch{y("Unable to connect to AI Coach.")}finally{b(!1)}}},Je=D=>D.stopPropagation(),yt=()=>{if(i.context){const D=i.word.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),N=new RegExp(`\\b${D}\\b`,"gi");if(N.test(i.context)){const V=i.context.split(N);return L.jsx("div",{style:{fontSize:"1.4rem",lineHeight:"1.6",color:"#e0e0e0"},children:V.map((B,z)=>L.jsxs(_b.Fragment,{children:[B,z<V.length-1&&L.jsx("span",{style:{color:"#88ccca",fontWeight:"bold",margin:"0 5px"},children:"[......]"})]},z))})}}return L.jsx("h2",{style:{fontSize:"2.5rem",margin:0,fontWeight:"bold"},children:i.word})},Ge={background:"transparent",border:"none",cursor:"pointer",color:"#88ccca",padding:"4px",marginLeft:"8px",display:"inline-flex",alignItems:"center",justifyContent:"center"};return L.jsxs("div",{className:"flashcard-container",onClick:pe,style:{border:"1px solid #444",padding:"1.5rem",borderRadius:"12px",textAlign:"center",cursor:"pointer",minHeight:"220px",display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"#25262b",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",color:"#e0e0e0",position:"relative",maxHeight:"75vh",overflow:"hidden"},children:[!n&&L.jsxs("div",{className:"front",children:[L.jsxs("div",{style:{marginBottom:"1.5rem",padding:"0 10px"},children:[yt(),L.jsx("button",{onClick:D=>Be(i.context||i.word,D),style:Ge,title:"Listen",children:L.jsx(Mp,{size:24})})]}),L.jsx("p",{style:{color:"#666",fontSize:"0.9rem"},children:"(Click to reveal)"}),L.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",fontSize:"0.8rem",color:"#555"},children:["Int: ",i.interval||0,"d"]})]}),n&&L.jsxs("div",{className:"back",style:{display:"flex",flexDirection:"column",height:"100%"},children:[L.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"0.5rem"},children:[L.jsx("h2",{style:{fontSize:"1.8rem",color:"#fff",margin:0},children:i.word}),L.jsx("button",{onClick:D=>Be(i.word,D),style:{...Ge,color:"#88ccca"},children:L.jsx(Mp,{size:22})})]}),i.ipa&&L.jsxs("p",{style:{fontSize:"1rem",color:"#888",fontFamily:"monospace",margin:"0 0 0.8rem 0"},children:["/",i.ipa,"/"]}),L.jsxs("div",{style:{marginBottom:"0.8rem"},onClick:Je,children:[L.jsx("button",{onClick:ze,style:{background:"transparent",border:"1px solid #555",color:"#888",borderRadius:"15px",padding:"2px 10px",fontSize:"0.75rem",cursor:"pointer"},children:o?"Hide Translation":"Show Translation"}),o&&L.jsx("div",{style:{fontSize:"1.1rem",color:"#e91e63",fontWeight:"bold",marginTop:"0.5rem"},children:i.translation||"(No translation)"})]}),L.jsxs("div",{style:{textAlign:"left",lineHeight:"1.6",flexGrow:1,overflowY:"auto",paddingRight:"4px",marginBottom:"1rem"},onClick:Je,children:[L.jsxs("div",{style:{marginBottom:"1rem",backgroundColor:"rgba(255, 255, 255, 0.05)",padding:"10px",borderRadius:"6px",borderLeft:"4px solid #88ccca"},children:[L.jsx("strong",{style:{color:"#88ccca",fontSize:"0.8rem",textTransform:"uppercase"},children:"Definition"}),L.jsx("div",{style:{fontSize:"1rem",color:"#ffffff",fontWeight:"500"},children:i.definition})]}),i.collocations&&i.collocations.length>0&&L.jsxs("div",{style:{marginBottom:"1rem",padding:"0 5px"},children:[L.jsxs("strong",{style:{color:"#ffb74d",fontSize:"0.8rem",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"5px"},children:[L.jsx(jw,{size:12})," Collocations"]}),L.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginTop:"5px"},children:i.collocations.map((D,N)=>L.jsx("span",{style:{backgroundColor:"rgba(255, 183, 77, 0.1)",color:"#ffcc80",padding:"2px 8px",borderRadius:"4px",fontSize:"0.9rem",border:"1px solid rgba(255, 183, 77, 0.3)"},children:D},N))})]}),d&&L.jsxs("div",{style:{marginBottom:"1rem",backgroundColor:"rgba(233, 30, 99, 0.1)",padding:"10px",borderRadius:"6px",borderLeft:"4px solid #e91e63"},children:[L.jsx("strong",{style:{color:"#e91e63",fontSize:"0.8rem",textTransform:"uppercase"},children:"AI Tutor"}),L.jsx("p",{style:{margin:"5px 0 0",fontSize:"0.95rem",color:"#ffcdd2"},children:d})]}),L.jsxs("div",{style:{padding:"0 10px"},children:[L.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[L.jsx("strong",{style:{color:"#aaa",fontSize:"0.8rem"},children:"Context:"}),L.jsx("button",{onClick:D=>Be(i.context,D),style:{...Ge,marginLeft:"6px",color:"#aaa"},children:L.jsx(Mp,{size:16})})]}),L.jsx("div",{style:{marginTop:"2px"},children:L.jsx("em",{style:{color:"#a5d6a7",fontSize:"0.95rem"},children:i.context})})]})]}),L.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"8px",marginBottom:"1rem"},onClick:Je,children:[L.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[R?L.jsx("button",{onClick:X,style:{background:"#e53935",border:"none",borderRadius:"50%",width:"32px",height:"32px",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:L.jsx(Zw,{size:14,fill:"currentColor"})}):L.jsx("button",{onClick:k,style:{background:"#333",border:"none",borderRadius:"50%",width:"32px",height:"32px",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:L.jsx(Hw,{size:16})}),I&&!R&&L.jsxs(L.Fragment,{children:[L.jsx("button",{onClick:()=>new Audio(I).play(),style:{background:"transparent",border:"1px solid #4caf50",borderRadius:"50%",width:"32px",height:"32px",color:"#4caf50",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:L.jsx(Yw,{size:14,fill:"currentColor"})}),L.jsx("button",{onClick:re,style:{background:"transparent",border:"none",cursor:"pointer",color:"#666"},children:L.jsx(tS,{size:16})})]})]}),L.jsxs("button",{onClick:ke,disabled:_||!!d,style:{background:"transparent",border:"1px solid #e91e63",borderRadius:"15px",padding:"4px 10px",fontSize:"0.75rem",color:"#e91e63",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"},children:[_?L.jsx(Bw,{size:12,className:"spin"}):L.jsx(Jw,{size:12}),d?"Explained":"Explain Simply"]})]}),L.jsxs("div",{className:"actions",onClick:Je,style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginTop:"auto",paddingTop:"0.5rem",borderTop:"1px solid #333"},children:[L.jsx("button",{onClick:D=>_e(1,D),style:{padding:"0.5rem",background:"#e53935",color:"white",border:"none",borderRadius:"6px"},children:"Again"}),L.jsx("button",{onClick:D=>_e(3,D),style:{padding:"0.5rem",background:"#fb8c00",color:"white",border:"none",borderRadius:"6px"},children:"Hard"}),L.jsx("button",{onClick:D=>_e(4,D),style:{padding:"0.5rem",background:"#43a047",color:"white",border:"none",borderRadius:"6px"},children:"Good"}),L.jsx("button",{onClick:D=>_e(5,D),style:{padding:"0.5rem",background:"#1e88e5",color:"white",border:"none",borderRadius:"6px"},children:"Easy"})]})]}),L.jsx("style",{children:".spin { animation: spin 1s linear infinite; } @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]})}class LS{_generateId(){const e=Date.now(),n=Math.random().toString(36).substring(2,8);return`${e}_${n}`}async importCards(e){try{let n;try{n=JSON.parse(e)}catch(y){throw new Error("Input must be a valid JSON string",y)}if(!Array.isArray(n))throw new Error("Input must be a JSON array");const s=await nr.vocab.toArray(),o=new Set(s.map(y=>y.word.toLowerCase())),u=[];let d=0;for(const y of n)y.word&&(o.has(y.word.toLowerCase())?d++:(u.push({...y,id:this._generateId(),status:"new",reviewCount:0,nextReview:Date.now(),easeFactor:2.5,interval:0,updatedAt:Date.now(),createdAt:Date.now()}),o.add(y.word.toLowerCase())));return u.length>0&&await nr.vocab.bulkAdd(u),{addedCount:u.length,skippedCount:d}}catch(n){throw console.error("Import failed:",n),n}}async addCard(e){if((await nr.vocab.toArray()).some(u=>u.word.toLowerCase()===e.word.toLowerCase()))throw new Error(`Duplicate word: ${e.word}`);const o={...e,id:this._generateId(),status:"new",reviewCount:0,nextReview:Date.now(),easeFactor:2.5,interval:0,updatedAt:Date.now(),createdAt:Date.now()};return await nr.vocab.add(o),o}async updateCard(e){const n={...e,updatedAt:Date.now()};return await nr.vocab.put(n),n}async deleteCard(e){await nr.vocab.delete(e)}async getAllCards(){return await nr.vocab.toArray()}async clearAllCards(){await nr.vocab.clear()}async getDueCards(e=20){const n=Date.now();return(await nr.vocab.where("nextReview").belowOrEqual(n).and(o=>o.status!=="new").toArray()).sort((o,u)=>o.nextReview!==u.nextReview?o.nextReview-u.nextReview:(o.easeFactor||2.5)-(u.easeFactor||2.5)).slice(0,e)}async processReview(e,n){const s=Eb(e,n),o={...e,...s};return await this.updateCard(o),o}}const Hl=new LS;let US={data:""},jS=i=>{if(typeof window=="object"){let e=(i?i.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(i||document.head).appendChild(e),e.firstChild}return i||US},zS=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,BS=/\/\*[^]*?\*\/|  +/g,G_=/\n+/g,ro=(i,e)=>{let n="",s="",o="";for(let u in i){let d=i[u];u[0]=="@"?u[1]=="i"?n=u+" "+d+";":s+=u[1]=="f"?ro(d,u):u+"{"+ro(d,u[1]=="k"?"":e)+"}":typeof d=="object"?s+=ro(d,e?e.replace(/([^,])+/g,y=>u.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,_=>/&/.test(_)?_.replace(/&/g,y):y?y+" "+_:_)):u):d!=null&&(u=/^--/.test(u)?u:u.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=ro.p?ro.p(u,d):u+":"+d+";")}return n+(e&&o?e+"{"+o+"}":o)+s},sa={},Rb=i=>{if(typeof i=="object"){let e="";for(let n in i)e+=n+Rb(i[n]);return e}return i},qS=(i,e,n,s,o)=>{let u=Rb(i),d=sa[u]||(sa[u]=(_=>{let b=0,R=11;for(;b<_.length;)R=101*R+_.charCodeAt(b++)>>>0;return"go"+R})(u));if(!sa[d]){let _=u!==i?i:(b=>{let R,I,k=[{}];for(;R=zS.exec(b.replace(BS,""));)R[4]?k.shift():R[3]?(I=R[3].replace(G_," ").trim(),k.unshift(k[0][I]=k[0][I]||{})):k[0][R[1]]=R[2].replace(G_," ").trim();return k[0]})(i);sa[d]=ro(o?{["@keyframes "+d]:_}:_,n?"":"."+d)}let y=n&&sa.g?sa.g:null;return n&&(sa.g=sa[d]),((_,b,R,I)=>{I?b.data=b.data.replace(I,_):b.data.indexOf(_)===-1&&(b.data=R?_+b.data:b.data+_)})(sa[d],e,s,y),d},HS=(i,e,n)=>i.reduce((s,o,u)=>{let d=e[u];if(d&&d.call){let y=d(n),_=y&&y.props&&y.props.className||/^go/.test(y)&&y;d=_?"."+_:y&&typeof y=="object"?y.props?"":ro(y,""):y===!1?"":y}return s+o+(d??"")},"");function wh(i){let e=this||{},n=i.call?i(e.p):i;return qS(n.unshift?n.raw?HS(n,[].slice.call(arguments,1),e.p):n.reduce((s,o)=>Object.assign(s,o&&o.call?o(e.p):o),{}):n,jS(e.target),e.g,e.o,e.k)}let Ib,Qp,Xp;wh.bind({g:1});let ca=wh.bind({k:1});function FS(i,e,n,s){ro.p=e,Ib=i,Qp=n,Xp=s}function Eo(i,e){let n=this||{};return function(){let s=arguments;function o(u,d){let y=Object.assign({},u),_=y.className||o.className;n.p=Object.assign({theme:Qp&&Qp()},y),n.o=/ *go\d+/.test(_),y.className=wh.apply(n,s)+(_?" "+_:"");let b=i;return i[0]&&(b=y.as||i,delete y.as),Xp&&b[0]&&Xp(y),Ib(b,y)}return o}}var KS=i=>typeof i=="function",nh=(i,e)=>KS(i)?i(e):i,GS=(()=>{let i=0;return()=>(++i).toString()})(),xb=(()=>{let i;return()=>{if(i===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");i=!e||e.matches}return i}})(),YS=20,wm="default",Ob=(i,e)=>{let{toastLimit:n}=i.settings;switch(e.type){case 0:return{...i,toasts:[e.toast,...i.toasts].slice(0,n)};case 1:return{...i,toasts:i.toasts.map(d=>d.id===e.toast.id?{...d,...e.toast}:d)};case 2:let{toast:s}=e;return Ob(i,{type:i.toasts.find(d=>d.id===s.id)?1:0,toast:s});case 3:let{toastId:o}=e;return{...i,toasts:i.toasts.map(d=>d.id===o||o===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return e.toastId===void 0?{...i,toasts:[]}:{...i,toasts:i.toasts.filter(d=>d.id!==e.toastId)};case 5:return{...i,pausedAt:e.time};case 6:let u=e.time-(i.pausedAt||0);return{...i,pausedAt:void 0,toasts:i.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+u}))}}},Ff=[],Db={toasts:[],pausedAt:void 0,settings:{toastLimit:YS}},bs={},Nb=(i,e=wm)=>{bs[e]=Ob(bs[e]||Db,i),Ff.forEach(([n,s])=>{n===e&&s(bs[e])})},Mb=i=>Object.keys(bs).forEach(e=>Nb(i,e)),QS=i=>Object.keys(bs).find(e=>bs[e].toasts.some(n=>n.id===i)),Sh=(i=wm)=>e=>{Nb(e,i)},XS={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},$S=(i={},e=wm)=>{let[n,s]=Te.useState(bs[e]||Db),o=Te.useRef(bs[e]);Te.useEffect(()=>(o.current!==bs[e]&&s(bs[e]),Ff.push([e,s]),()=>{let d=Ff.findIndex(([y])=>y===e);d>-1&&Ff.splice(d,1)}),[e]);let u=n.toasts.map(d=>{var y,_,b;return{...i,...i[d.type],...d,removeDelay:d.removeDelay||((y=i[d.type])==null?void 0:y.removeDelay)||i?.removeDelay,duration:d.duration||((_=i[d.type])==null?void 0:_.duration)||i?.duration||XS[d.type],style:{...i.style,...(b=i[d.type])==null?void 0:b.style,...d.style}}});return{...n,toasts:u}},JS=(i,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:i,pauseDuration:0,...n,id:n?.id||GS()}),bc=i=>(e,n)=>{let s=JS(e,i,n);return Sh(s.toasterId||QS(s.id))({type:2,toast:s}),s.id},jn=(i,e)=>bc("blank")(i,e);jn.error=bc("error");jn.success=bc("success");jn.loading=bc("loading");jn.custom=bc("custom");jn.dismiss=(i,e)=>{let n={type:3,toastId:i};e?Sh(e)(n):Mb(n)};jn.dismissAll=i=>jn.dismiss(void 0,i);jn.remove=(i,e)=>{let n={type:4,toastId:i};e?Sh(e)(n):Mb(n)};jn.removeAll=i=>jn.remove(void 0,i);jn.promise=(i,e,n)=>{let s=jn.loading(e.loading,{...n,...n?.loading});return typeof i=="function"&&(i=i()),i.then(o=>{let u=e.success?nh(e.success,o):void 0;return u?jn.success(u,{id:s,...n,...n?.success}):jn.dismiss(s),o}).catch(o=>{let u=e.error?nh(e.error,o):void 0;u?jn.error(u,{id:s,...n,...n?.error}):jn.dismiss(s)}),i};var WS=1e3,ZS=(i,e="default")=>{let{toasts:n,pausedAt:s}=$S(i,e),o=Te.useRef(new Map).current,u=Te.useCallback((I,k=WS)=>{if(o.has(I))return;let X=setTimeout(()=>{o.delete(I),d({type:4,toastId:I})},k);o.set(I,X)},[]);Te.useEffect(()=>{if(s)return;let I=Date.now(),k=n.map(X=>{if(X.duration===1/0)return;let re=(X.duration||0)+X.pauseDuration-(I-X.createdAt);if(re<0){X.visible&&jn.dismiss(X.id);return}return setTimeout(()=>jn.dismiss(X.id,e),re)});return()=>{k.forEach(X=>X&&clearTimeout(X))}},[n,s,e]);let d=Te.useCallback(Sh(e),[e]),y=Te.useCallback(()=>{d({type:5,time:Date.now()})},[d]),_=Te.useCallback((I,k)=>{d({type:1,toast:{id:I,height:k}})},[d]),b=Te.useCallback(()=>{s&&d({type:6,time:Date.now()})},[s,d]),R=Te.useCallback((I,k)=>{let{reverseOrder:X=!1,gutter:re=8,defaultPosition:pe}=k||{},_e=n.filter(ke=>(ke.position||pe)===(I.position||pe)&&ke.height),ze=_e.findIndex(ke=>ke.id===I.id),Be=_e.filter((ke,Je)=>Je<ze&&ke.visible).length;return _e.filter(ke=>ke.visible).slice(...X?[Be+1]:[0,Be]).reduce((ke,Je)=>ke+(Je.height||0)+re,0)},[n]);return Te.useEffect(()=>{n.forEach(I=>{if(I.dismissed)u(I.id,I.removeDelay);else{let k=o.get(I.id);k&&(clearTimeout(k),o.delete(I.id))}})},[n,u]),{toasts:n,handlers:{updateHeight:_,startPause:y,endPause:b,calculateOffset:R}}},eA=ca`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,tA=ca`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,nA=ca`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,rA=Eo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${eA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${tA} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${i=>i.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${nA} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,iA=ca`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,sA=Eo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${i=>i.secondary||"#e0e0e0"};
  border-right-color: ${i=>i.primary||"#616161"};
  animation: ${iA} 1s linear infinite;
`,aA=ca`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,oA=ca`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,lA=Eo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${aA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${oA} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${i=>i.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,uA=Eo("div")`
  position: absolute;
`,cA=Eo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,fA=ca`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,hA=Eo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${fA} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,dA=({toast:i})=>{let{icon:e,type:n,iconTheme:s}=i;return e!==void 0?typeof e=="string"?Te.createElement(hA,null,e):e:n==="blank"?null:Te.createElement(cA,null,Te.createElement(sA,{...s}),n!=="loading"&&Te.createElement(uA,null,n==="error"?Te.createElement(rA,{...s}):Te.createElement(lA,{...s})))},pA=i=>`
0% {transform: translate3d(0,${i*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,mA=i=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${i*-150}%,-1px) scale(.6); opacity:0;}
`,gA="0%{opacity:0;} 100%{opacity:1;}",yA="0%{opacity:1;} 100%{opacity:0;}",vA=Eo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,_A=Eo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,bA=(i,e)=>{let n=i.includes("top")?1:-1,[s,o]=xb()?[gA,yA]:[pA(n),mA(n)];return{animation:e?`${ca(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ca(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},EA=Te.memo(({toast:i,position:e,style:n,children:s})=>{let o=i.height?bA(i.position||e||"top-center",i.visible):{opacity:0},u=Te.createElement(dA,{toast:i}),d=Te.createElement(_A,{...i.ariaProps},nh(i.message,i));return Te.createElement(vA,{className:i.className,style:{...o,...n,...i.style}},typeof s=="function"?s({icon:u,message:d}):Te.createElement(Te.Fragment,null,u,d))});FS(Te.createElement);var TA=({id:i,className:e,style:n,onHeightUpdate:s,children:o})=>{let u=Te.useCallback(d=>{if(d){let y=()=>{let _=d.getBoundingClientRect().height;s(i,_)};y(),new MutationObserver(y).observe(d,{subtree:!0,childList:!0,characterData:!0})}},[i,s]);return Te.createElement("div",{ref:u,className:e,style:n},o)},wA=(i,e)=>{let n=i.includes("top"),s=n?{top:0}:{bottom:0},o=i.includes("center")?{justifyContent:"center"}:i.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:xb()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...s,...o}},SA=wh`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,kf=16,AA=({reverseOrder:i,position:e="top-center",toastOptions:n,gutter:s,children:o,toasterId:u,containerStyle:d,containerClassName:y})=>{let{toasts:_,handlers:b}=ZS(n,u);return Te.createElement("div",{"data-rht-toaster":u||"",style:{position:"fixed",zIndex:9999,top:kf,left:kf,right:kf,bottom:kf,pointerEvents:"none",...d},className:y,onMouseEnter:b.startPause,onMouseLeave:b.endPause},_.map(R=>{let I=R.position||e,k=b.calculateOffset(R,{reverseOrder:i,gutter:s,defaultPosition:e}),X=wA(I,k);return Te.createElement(TA,{id:R.id,key:R.id,onHeightUpdate:b.updateHeight,className:R.visible?SA:"",style:X},R.type==="custom"?nh(R.message,R):o?o(R):Te.createElement(EA,{toast:R,position:I}))}))},pt=jn;function CA({isOpen:i,onClose:e,onSuccess:n}){const[s,o]=Te.useState(""),[u,d]=Te.useState(!1),[y,_]=Te.useState("auto"),[b,R]=Te.useState(null);if(!i)return null;const I=async()=>{if(!s.trim())return;if(!_s.hasKey()){pt.error("Please set your Gemini API Key in Settings first.");return}d(!0),R(null);const X=pt.loading("AI is analyzing transcript...");try{const re=await _s.analyzeTranscript(s,y);if(!Array.isArray(re)||re.length===0)throw new Error("AI found no vocabulary or returned invalid format.");pt.loading(`Found ${re.length} words. Saving...`,{id:X});const pe=JSON.stringify(re),_e=await Hl.importCards(pe);pt.success(`Success!
Added: ${_e.addedCount}
Skipped (Duplicate): ${_e.skippedCount}`,{id:X,duration:4e3}),o(""),n(),e()}catch(re){console.error(re);const pe=re.message||"Unknown error";R(pe),pt.error(`Failed: ${pe}`,{id:X})}finally{d(!1)}},k=[{label:"AUTO",value:"auto"},{label:"5",value:5},{label:"10",value:10},{label:"20",value:20}];return L.jsx("div",{style:Vi.overlay,children:L.jsxs("div",{style:Vi.modal,children:[L.jsx("h2",{style:{marginTop:0,color:"#fff",marginBottom:"1.5rem"},children:"Import from Podcast"}),L.jsxs("div",{style:Vi.settingRow,children:[L.jsx("span",{style:Vi.settingLabel,children:"Max Words:"}),L.jsx("div",{style:Vi.optionGroup,children:k.map(X=>L.jsx("button",{onClick:()=>_(X.value),style:{...Vi.optionBtn,...y===X.value?Vi.optionBtnActive:{}},children:X.label},X.value))})]}),L.jsx("p",{style:{color:"#aaa",fontSize:"0.9rem",marginBottom:"0.5rem"},children:"Paste the full podcast transcript text below. Gemini will extract key vocabulary for you."}),L.jsx("textarea",{value:s,onChange:X=>o(X.target.value),placeholder:"Paste transcript text here...",style:Vi.textarea,disabled:u}),b&&L.jsxs("div",{style:Vi.error,children:[" ",b]}),L.jsxs("div",{style:Vi.actions,children:[L.jsx("button",{onClick:e,disabled:u,style:{...Vi.btn,backgroundColor:"#555"},children:"Cancel"}),L.jsx("button",{onClick:I,disabled:u||!s.trim(),style:{...Vi.btn,backgroundColor:u?"#777":"#6366f1",opacity:!s.trim()||u?.6:1},children:u?"Analyzing...":"Analyze & Import"})]})]})})}const Vi={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,backdropFilter:"blur(3px)"},modal:{backgroundColor:"#1e2024",padding:"2rem",borderRadius:"12px",width:"90%",maxWidth:"600px",boxShadow:"0 10px 25px rgba(0,0,0,0.5)",border:"1px solid #333"},settingRow:{display:"flex",alignItems:"center",marginBottom:"1.5rem",gap:"1rem",flexWrap:"wrap"},settingLabel:{color:"#ccc",fontSize:"0.9rem",fontWeight:"500"},optionGroup:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},optionBtn:{padding:"0.4rem 1rem",backgroundColor:"#2c2e33",border:"1px solid #444",borderRadius:"6px",color:"#aaa",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease"},optionBtnActive:{backgroundColor:"#6366f1",color:"#fff",borderColor:"#6366f1",boxShadow:"0 0 8px rgba(99, 102, 241, 0.4)"},textarea:{width:"100%",height:"250px",backgroundColor:"#131416",color:"#e0e0e0",border:"1px solid #444",borderRadius:"6px",padding:"0.8rem",fontFamily:"inherit",fontSize:"0.95rem",resize:"vertical",lineHeight:"1.5"},error:{color:"#ff6b6b",marginTop:"1rem",fontSize:"0.9rem",padding:"0.5rem",backgroundColor:"rgba(255, 107, 107, 0.1)",borderRadius:"4px"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"1.5rem"},btn:{padding:"0.6rem 1.5rem",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"1rem"}};function RA({isOpen:i,onClose:e}){const[n,s]=Te.useState(""),[o,u]=Te.useState(!1),[d,y]=Te.useState(!1);Te.useEffect(()=>{i&&(s(_s.getApiKey()||""),y(_s.isPersistent()))},[i]);const[_,b]=Te.useState(()=>JSON.parse(localStorage.getItem("gp_settings_autoplay_tts"))||!1),R=()=>{localStorage.setItem("gp_settings_autoplay_tts",JSON.stringify(_)),n.trim()?(_s.setApiKey(n.trim(),d),d?pt.success("API Key  ()"):pt.success("API Key  ( Session)")):(_s.removeApiKey(),pt("API Key ")),pt.success("Settings saved!"),e()},I=()=>{s(""),y(!1),_s.removeApiKey(),pt("API Key ")};return i?L.jsx("div",{style:Fr.overlay,children:L.jsxs("div",{style:Fr.modal,children:[L.jsx("h2",{style:{marginTop:0,color:"#fff"},children:"Settings"}),L.jsx("hr",{style:{borderColor:"#444",margin:"1.5rem 0"}}),L.jsxs("div",{style:Fr.section,children:[L.jsx("h3",{style:{...Fr.label,color:"#fff",fontSize:"1rem"},children:"Preferences"}),L.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[L.jsxs("label",{style:{color:"#ccc",fontSize:"0.9rem"},children:["Auto-play TTS on Flip",L.jsx("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"4px"},children:"Automatically read the example sentence when flipping to the back."})]}),L.jsx("div",{onClick:()=>b(!_),style:{width:"40px",height:"20px",backgroundColor:_?"#4caf50":"#444",borderRadius:"10px",position:"relative",cursor:"pointer",transition:"background-color 0.2s"},children:L.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:"#fff",borderRadius:"50%",position:"absolute",top:"2px",left:_?"22px":"2px",transition:"left 0.2s"}})})]})]}),L.jsxs("div",{style:{marginBottom:"2rem"},children:[L.jsx("label",{style:Fr.label,children:"Gemini API Key (BYOK)"}),L.jsxs("p",{style:Fr.hint,children:[" Key  Google Gemini API",L.jsx("br",{}),""]}),L.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[L.jsx("input",{type:o?"text":"password",value:n,onChange:k=>s(k.target.value),placeholder:"AIzaSy...",style:Fr.input}),L.jsx("button",{onClick:()=>u(!o),style:Fr.iconBtn,title:"Toggle Visibility",children:o?"":""})]}),L.jsxs("div",{style:Fr.checkboxContainer,children:[L.jsx("input",{type:"checkbox",id:"rememberKey",checked:d,onChange:k=>y(k.target.checked),style:{cursor:"pointer"}}),L.jsx("label",{htmlFor:"rememberKey",style:{...Fr.label,marginBottom:0,cursor:"pointer",fontWeight:"normal",fontSize:"0.9rem"},children:" ()"})]}),d&&L.jsx("p",{style:{color:"#ff9800",fontSize:"0.8rem",marginTop:"0.2rem",marginLeft:"1.5rem"},children:"  Key  LocalStorage"})]}),L.jsxs("div",{style:Fr.actions,children:[L.jsx("button",{onClick:I,style:{...Fr.btn,backgroundColor:"#d32f2f",marginRight:"auto"},children:"Clear Key"}),L.jsx("button",{onClick:e,style:{...Fr.btn,backgroundColor:"#555"},children:"Close"}),L.jsx("button",{onClick:R,style:{...Fr.btn,backgroundColor:"#4caf50"},children:"Save"})]})]})}):null}const Fr={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},modal:{backgroundColor:"#2c2e33",padding:"2rem",borderRadius:"8px",width:"90%",maxWidth:"400px",boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},label:{display:"block",color:"#e0e0e0",fontWeight:"bold",marginBottom:"0.5rem"},hint:{color:"#aaa",fontSize:"0.85rem",marginBottom:"0.5rem",lineHeight:"1.4"},input:{flex:1,padding:"0.6rem",borderRadius:"4px",border:"1px solid #444",backgroundColor:"#1a1b1e",color:"#fff",fontFamily:"monospace"},iconBtn:{padding:"0 0.8rem",backgroundColor:"#444",border:"none",borderRadius:"4px",cursor:"pointer",color:"#fff"},checkboxContainer:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.5rem"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem"},btn:{padding:"0.5rem 1.2rem",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"}};function IA({isOpen:i,onClose:e,onSuccess:n}){const[s,o]=Te.useState("context"),[u,d]=Te.useState(""),[y,_]=Te.useState(""),[b,R]=Te.useState(""),[I,k]=Te.useState(""),[X,re]=Te.useState(""),[pe,_e]=Te.useState([]),[ze,Be]=Te.useState(!1),[ke,Je]=Te.useState(""),yt=Te.useRef(null);if(!i)return null;const Ge=()=>{const B=window.getSelection(),z=B.toString().trim();z&&yt.current&&yt.current.contains(B.anchorNode)&&(d(z),k(ke),pt(`Selected: "${z}"`,{icon:"",duration:1500}))},D=async()=>{if(!u.trim()){pt.error("Please enter or select a word first");return}if(!_s.hasKey()){pt.error("Please set your API Key in Settings first");return}Be(!0);const B=pt.loading(`Asking Gemini about "${u}"...`);try{const z=await _s.generateCardDetails(u,I);_(z.ipa||""),R(z.definition||""),k(z.context||I),re(z.translation||""),_e(z.collocations||[]),pt.success("Auto-filled!",{id:B}),s==="context"&&o("manual")}catch(z){console.error(z),pt.error(z.message,{id:B})}finally{Be(!1)}},N=async()=>{if(!u||!b){pt.error("Word and Definition are required");return}try{await Hl.addCard({word:u,ipa:y,definition:b,context:I,translation:X,collocations:pe,sourceType:s==="context"?"raw_sentence":"word_only"}),pt.success(`Added "${u}"`),d(""),_(""),R(""),k(""),re(""),_e([]),Je(""),n(),e()}catch(B){console.error(B),pt.error(B.message)}},V=B=>{_e(B.target.value.split(","))};return L.jsx("div",{style:dt.overlay,children:L.jsxs("div",{style:dt.modal,children:[L.jsxs("div",{style:dt.header,children:[L.jsx("h2",{style:{margin:0,color:"#fff"},children:"Add New Card"}),L.jsxs("div",{style:dt.tabContainer,children:[L.jsxs("button",{style:s==="context"?dt.activeTab:dt.tab,onClick:()=>o("context"),children:[L.jsx(Xw,{size:14,style:{marginRight:4}})," Context First"]}),L.jsxs("button",{style:s==="manual"?dt.activeTab:dt.tab,onClick:()=>o("manual"),children:[L.jsx(Kw,{size:14,style:{marginRight:4}})," Manual / Edit"]})]})]}),s==="context"&&L.jsxs("div",{style:dt.tabContent,children:[L.jsx("div",{style:dt.infoBox,children:L.jsxs("p",{style:{margin:0},children:["Paste the full sentence, then ",L.jsx("strong",{children:"highlight"})," the word you want to learn."]})}),L.jsxs("div",{style:dt.field,children:[L.jsx("label",{style:dt.label,children:"Source Sentence / Podcast Transcript"}),L.jsx("textarea",{ref:yt,style:{...dt.input,height:"100px",resize:"vertical"},value:ke,onChange:B=>Je(B.target.value),onMouseUp:Ge,placeholder:"e.g., The government is reluctant to change the law...",autoFocus:!0})]}),L.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"1rem"},children:[L.jsxs("div",{style:{flex:1},children:[L.jsx("label",{style:dt.label,children:"Target Word (Selected)"}),L.jsx("div",{style:dt.readOnlyField,children:u||L.jsx("span",{style:{color:"#555",fontStyle:"italic"},children:"Highlight text above..."})})]}),L.jsx("button",{onClick:D,disabled:ze||!u,style:{...dt.magicBtn,marginLeft:"1rem",opacity:u?1:.5},children:ze?"Processing...":" Analyze & Fill"})]})]}),s==="manual"&&L.jsxs("div",{style:dt.tabContent,children:[L.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:L.jsx("button",{onClick:D,disabled:ze,style:dt.magicBtn,title:"Regenerate",children:ze?"...":" Auto-fill by Word"})}),L.jsxs("div",{style:dt.field,children:[L.jsx("label",{style:dt.label,children:"Word"}),L.jsx("input",{style:dt.input,value:u,onChange:B=>d(B.target.value),placeholder:"e.g. Serendipity"})]}),L.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[L.jsxs("div",{style:{...dt.field,flex:1},children:[L.jsx("label",{style:dt.label,children:"IPA"}),L.jsx("input",{style:dt.input,value:y,onChange:B=>_(B.target.value)})]}),L.jsxs("div",{style:{...dt.field,flex:1},children:[L.jsx("label",{style:dt.label,children:"Translation ()"}),L.jsx("input",{style:dt.input,value:X,onChange:B=>re(B.target.value)})]})]}),L.jsxs("div",{style:dt.field,children:[L.jsx("label",{style:dt.label,children:"Definition"}),L.jsx("textarea",{style:{...dt.input,height:"50px"},value:b,onChange:B=>R(B.target.value)})]}),L.jsxs("div",{style:dt.field,children:[L.jsx("label",{style:dt.label,children:"Context / Example"}),L.jsx("textarea",{style:{...dt.input,height:"50px"},value:I,onChange:B=>k(B.target.value)})]}),L.jsxs("div",{style:dt.field,children:[L.jsx("label",{style:dt.label,children:"Collocations (Comma separated)"}),L.jsx("input",{style:dt.input,value:pe.join(", "),onChange:V,placeholder:"e.g. reluctant to, deeply reluctant"})]})]}),L.jsxs("div",{style:dt.actions,children:[L.jsx("button",{onClick:e,style:{...dt.btn,backgroundColor:"#555"},children:"Cancel"}),L.jsx("button",{onClick:N,style:{...dt.btn,backgroundColor:"#2196f3"},children:"Save Card"})]})]})})}const dt={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},modal:{backgroundColor:"#2c2e33",padding:"2rem",borderRadius:"12px",width:"90%",maxWidth:"550px",boxShadow:"0 10px 25px rgba(0,0,0,0.5)",maxHeight:"90vh",overflowY:"auto"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",borderBottom:"1px solid #444",paddingBottom:"1rem"},tabContainer:{display:"flex",gap:"0.5rem",backgroundColor:"#1a1b1e",padding:"4px",borderRadius:"8px"},tab:{padding:"6px 12px",backgroundColor:"transparent",border:"none",color:"#888",cursor:"pointer",borderRadius:"6px",fontSize:"0.85rem",display:"flex",alignItems:"center"},activeTab:{padding:"6px 12px",backgroundColor:"#2196f3",border:"none",color:"white",cursor:"pointer",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"bold",display:"flex",alignItems:"center"},infoBox:{backgroundColor:"rgba(33, 150, 243, 0.1)",border:"1px solid #2196f3",borderRadius:"6px",padding:"0.8rem",color:"#90caf9",fontSize:"0.9rem",marginBottom:"1rem"},field:{marginBottom:"1rem"},label:{display:"block",color:"#aaa",fontSize:"0.85rem",marginBottom:"0.3rem"},input:{width:"100%",padding:"0.6rem",borderRadius:"4px",border:"1px solid #444",backgroundColor:"#1a1b1e",color:"#fff",fontSize:"1rem",boxSizing:"border-box",fontFamily:"inherit"},readOnlyField:{padding:"0.6rem",borderRadius:"4px",backgroundColor:"#25262b",border:"1px dashed #444",color:"#e91e63",fontWeight:"bold",minHeight:"42px",display:"flex",alignItems:"center"},magicBtn:{padding:"0.6rem 1.2rem",backgroundColor:"transparent",border:"1px solid #e91e63",borderRadius:"20px",color:"#e91e63",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s",fontWeight:"bold",whiteSpace:"nowrap"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"2rem"},btn:{padding:"0.6rem 1.2rem",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"}};function xA({isOpen:i,onClose:e}){const[n,s]=Te.useState([]),[o,u]=Te.useState(null),[d,y]=Te.useState(!1),[_,b]=Te.useState(0),R=Te.useRef(null);Te.useEffect(()=>{i&&(I(),y(!1),b(0),u(null))},[i]),Te.useEffect(()=>(d&&_>0?R.current=setTimeout(()=>{b(re=>re-1)},1e3):d&&_===0&&y(!1),()=>clearTimeout(R.current)),[d,_]);const I=async()=>{try{const re=await Hl.getAllCards();re.sort((pe,_e)=>_e.updatedAt-pe.updatedAt),s(re)}catch(re){console.error(re),pt.error("Failed to load cards")}},k=async re=>{if(o!==re){u(re),setTimeout(()=>{u(pe=>pe===re?null:pe)},3e3);return}try{await Hl.deleteCard(re),pt.success("Card deleted"),u(null),I()}catch(pe){console.error(pe),pt.error("Delete failed")}},X=async()=>{if(!d){y(!0),b(3);return}try{await Hl.clearAllCards(),pt.success("All data cleared"),s([]),y(!1)}catch(re){console.error(re),pt.error("Clear failed")}};return i?L.jsx("div",{style:Pi.overlay,children:L.jsxs("div",{style:Pi.modal,children:[L.jsxs("div",{style:Pi.header,children:[L.jsxs("h2",{style:{margin:0,color:"#fff"},children:["Manage Cards (",n.length,")"]}),L.jsx("button",{onClick:e,style:Pi.closeBtn,children:""})]}),L.jsx("div",{style:Pi.listContainer,children:n.length===0?L.jsx("p",{style:{color:"#888",textAlign:"center"},children:"No cards found."}):n.map(re=>L.jsxs("div",{style:Pi.cardRow,children:[L.jsxs("div",{style:Pi.cardInfo,children:[L.jsx("div",{style:Pi.word,children:re.word}),L.jsxs("div",{style:Pi.def,children:[re.definition?.substring(0,50),"..."]})]}),L.jsx("button",{onClick:()=>k(re.id),style:{...Pi.deleteBtn,backgroundColor:o===re.id?"#d32f2f":"#333",color:o===re.id?"#fff":"#888",border:o===re.id?"1px solid #ff5252":"1px solid #444",width:o===re.id?"100px":"40px"},children:o===re.id?"Sure?":""})]},re.id))}),L.jsx("div",{style:Pi.footer,children:L.jsx("button",{onClick:X,style:{...Pi.dangerBtn,backgroundColor:d?"#d32f2f":"#3a1c1c",color:d?"#ffeb3b":"#ff6b6b",border:d?"1px solid #ffeb3b":"1px solid #ff6b6b"},children:d?`Confirm Clear All? (${_})`:"Clear All Local Data"})})]})}):null}const Pi={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1050},modal:{backgroundColor:"#1e2024",width:"90%",maxWidth:"500px",maxHeight:"80vh",borderRadius:"12px",display:"flex",flexDirection:"column",boxShadow:"0 10px 25px rgba(0,0,0,0.5)",border:"1px solid #333"},header:{padding:"1.5rem",borderBottom:"1px solid #333",display:"flex",justifyContent:"space-between",alignItems:"center"},closeBtn:{background:"none",border:"none",color:"#888",fontSize:"1.2rem",cursor:"pointer"},listContainer:{flex:1,overflowY:"auto",padding:"1rem"},cardRow:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.8rem",borderBottom:"1px solid #2c2e33"},cardInfo:{flex:1,marginRight:"1rem",overflow:"hidden"},word:{color:"#e0e0e0",fontWeight:"bold",marginBottom:"0.2rem"},def:{color:"#888",fontSize:"0.85rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},deleteBtn:{padding:"0.4rem",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.9rem",whiteSpace:"nowrap",display:"flex",justifyContent:"center",alignItems:"center"},footer:{padding:"1.5rem",borderTop:"1px solid #333"},dangerBtn:{width:"100%",padding:"0.8rem",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",transition:"all 0.2s ease"}};function OA({isOpen:i,onClose:e}){const[n,s]=Te.useState(""),[o,u]=Te.useState(!1),[d,y]=Te.useState([]),[_,b]=Te.useState(new Set);Te.useEffect(()=>{i&&R()},[i]),Te.useEffect(()=>{d.length>0&&I(Array.from(_))},[_,d]);const R=async()=>{u(!0);try{const re=await Hl.getDueCards(5);re.length===0?(pt.error("No review data found."),y([])):(y(re),b(new Set(re.map(pe=>pe.word))))}catch(re){console.error("Error fetching data:",re),pt.error("Failed to load review data")}finally{u(!1)}},I=re=>{if(re.length===0){s("Please select at least one word to generate the prompt.");return}const _e=`Create an engaging podcast script on a broad and interesting topic aligned with your persona's expertise. 

Your task is to naturally weave the following target vocabulary into this larger narrative: [${re.join(", ")}]. 

IMPORTANT: 
1. The content must NOT be limited only to these vocabularies. 
2. Build a rich, immersive context with a coherent storyline or argument including target vocabularies. 
3. Use the target words only as natural touchpoints within a flowing, full-length conversation. 
4. Keep the tone casual, authentic, conversational and educational. 
`;s(_e)},k=re=>{const pe=new Set(_);pe.has(re)?pe.delete(re):pe.add(re),b(pe)},X=()=>{navigator.clipboard.writeText(n),pt.success("Prompt copied to clipboard!")};return i?L.jsx("div",{style:nn.overlay,children:L.jsxs("div",{style:nn.modal,children:[L.jsxs("div",{style:nn.header,children:[L.jsx("h2",{style:nn.title,children:"Review Session Ready"}),L.jsx("button",{onClick:e,style:nn.closeBtn,children:""})]}),o?L.jsxs("div",{style:nn.loadingState,children:[L.jsx("div",{style:nn.spinner}),L.jsx("p",{children:"Analyzing your progress..."})]}):L.jsxs("div",{style:nn.content,children:[L.jsx("div",{style:nn.statsRow,children:L.jsxs("div",{style:{...nn.statCard,backgroundColor:"rgba(52, 152, 219, 0.15)",borderColor:"#3498db"},children:[L.jsx("div",{style:nn.statLabel,children:"Target Vocabulary Count"}),L.jsx("div",{style:{...nn.statValue,color:"#3498db"},children:_.size})]})}),L.jsxs("div",{style:nn.section,children:[L.jsxs("div",{style:nn.sectionHeader,children:[L.jsx("span",{style:nn.sectionTitle,children:"Target Words"}),L.jsx("span",{style:nn.sectionSubtitle,children:"Click to include/exclude"})]}),L.jsx("div",{style:nn.chipsContainer,children:d.map(re=>{const pe=_.has(re.word);return L.jsx("button",{onClick:()=>k(re.word),style:{...nn.chip,...pe?nn.chipSelected:nn.chipUnselected},children:re.word},re.word)})})]}),L.jsxs("div",{style:nn.section,children:[L.jsx("div",{style:nn.sectionTitle,children:"Generated Prompt"}),L.jsx("textarea",{value:n,readOnly:!0,style:nn.textarea})]}),L.jsx("button",{onClick:X,disabled:_.size===0,style:{...nn.copyBtn,opacity:_.size===0?.5:1,cursor:_.size===0?"not-allowed":"pointer"},children:"Copy Prompt to Clipboard"})]})]})}):null}const nn={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,backdropFilter:"blur(3px)"},modal:{backgroundColor:"#1e1e1e",padding:"2rem",borderRadius:"16px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 50px rgba(0,0,0,0.5)",color:"#e0e0e0",fontFamily:"'Inter', system-ui, sans-serif",border:"1px solid #333"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.5rem",fontWeight:"700",color:"#fff",letterSpacing:"-0.02em"},closeBtn:{background:"none",border:"none",color:"#666",fontSize:"2rem",cursor:"pointer",lineHeight:1,padding:"0 0.5rem",transition:"color 0.2s"},loadingState:{padding:"3rem",textAlign:"center",color:"#888"},content:{display:"flex",flexDirection:"column",gap:"1.5rem"},statsRow:{display:"flex",width:"100%"},statCard:{flex:1,padding:"1rem",borderRadius:"12px",border:"1px solid",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},statLabel:{fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"#aaa",marginBottom:"0.3rem",fontWeight:"600"},statValue:{fontSize:"1.8rem",fontWeight:"800"},section:{display:"flex",flexDirection:"column",gap:"0.8rem"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},sectionTitle:{fontSize:"0.95rem",fontWeight:"600",color:"#ccc"},sectionSubtitle:{fontSize:"0.75rem",color:"#666"},chipsContainer:{display:"flex",flexWrap:"wrap",gap:"0.6rem",padding:"1rem",backgroundColor:"#25262b",borderRadius:"12px",border:"1px solid #333",maxHeight:"150px",overflowY:"auto"},chip:{padding:"0.4rem 0.9rem",borderRadius:"50px",fontSize:"0.85rem",fontWeight:"500",cursor:"pointer",border:"1px solid",transition:"all 0.2s ease",outline:"none"},chipSelected:{backgroundColor:"rgba(52, 152, 219, 0.2)",borderColor:"#3498db",color:"#3498db",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},chipUnselected:{backgroundColor:"transparent",borderColor:"#444",color:"#666",textDecoration:"line-through",opacity:.6},textarea:{width:"100%",height:"120px",backgroundColor:"#25262b",border:"1px solid #333",borderRadius:"12px",padding:"1rem",color:"#aaa",fontSize:"0.85rem",lineHeight:"1.6",resize:"none",boxSizing:"border-box"},copyBtn:{backgroundColor:"#3498db",color:"white",border:"none",padding:"1rem",borderRadius:"12px",fontSize:"1rem",fontWeight:"600",width:"100%",transition:"transform 0.1s, background 0.2s",boxShadow:"0 4px 15px rgba(52, 152, 219, 0.3)",cursor:"pointer"}},DA=()=>{};var Y_={};const kb=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},NA=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],d=i[n++],y=i[n++],_=((o&7)<<18|(u&63)<<12|(d&63)<<6|y&63)-65536;e[s++]=String.fromCharCode(55296+(_>>10)),e[s++]=String.fromCharCode(56320+(_&1023))}else{const u=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},Vb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],d=o+1<i.length,y=d?i[o+1]:0,_=o+2<i.length,b=_?i[o+2]:0,R=u>>2,I=(u&3)<<4|y>>4;let k=(y&15)<<2|b>>6,X=b&63;_||(X=64,d||(k=64)),s.push(n[R],n[I],n[k],n[X])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(kb(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):NA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],y=o<i.length?n[i.charAt(o)]:0;++o;const b=o<i.length?n[i.charAt(o)]:64;++o;const I=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||y==null||b==null||I==null)throw new MA;const k=u<<2|y>>4;if(s.push(k),b!==64){const X=y<<4&240|b>>2;if(s.push(X),I!==64){const re=b<<6&192|I;s.push(re)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class MA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kA=function(i){const e=kb(i);return Vb.encodeByteArray(e,!0)},rh=function(i){return kA(i).replace(/\./g,"")},Pb=function(i){try{return Vb.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function VA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const PA=()=>VA().__FIREBASE_DEFAULTS__,LA=()=>{if(typeof process>"u"||typeof Y_>"u")return;const i=Y_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},UA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Pb(i[1]);return e&&JSON.parse(e)},Ah=()=>{try{return DA()||PA()||LA()||UA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Lb=i=>Ah()?.emulatorHosts?.[i],jA=i=>{const e=Lb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Ub=()=>Ah()?.config,jb=i=>Ah()?.[`_${i}`];class zA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function nu(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zb(i){return(await fetch(i,{credentials:"include"})).ok}function BA(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[rh(JSON.stringify(n)),rh(JSON.stringify(d)),""].join(".")}const Zu={};function qA(){const i={prod:[],emulator:[]};for(const e of Object.keys(Zu))Zu[e]?i.emulator.push(e):i.prod.push(e);return i}function HA(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Q_=!1;function Bb(i,e){if(typeof window>"u"||typeof document>"u"||!nu(window.location.host)||Zu[i]===e||Zu[i]||Q_)return;Zu[i]=e;function n(k){return`__firebase__banner__${k}`}const s="__firebase__banner",u=qA().prod.length>0;function d(){const k=document.getElementById(s);k&&k.remove()}function y(k){k.style.display="flex",k.style.background="#7faaf0",k.style.position="fixed",k.style.bottom="5px",k.style.left="5px",k.style.padding=".5em",k.style.borderRadius="5px",k.style.alignItems="center"}function _(k,X){k.setAttribute("width","24"),k.setAttribute("id",X),k.setAttribute("height","24"),k.setAttribute("viewBox","0 0 24 24"),k.setAttribute("fill","none"),k.style.marginLeft="-6px"}function b(){const k=document.createElement("span");return k.style.cursor="pointer",k.style.marginLeft="16px",k.style.fontSize="24px",k.innerHTML=" &times;",k.onclick=()=>{Q_=!0,d()},k}function R(k,X){k.setAttribute("id",X),k.innerText="Learn more",k.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",k.setAttribute("target","__blank"),k.style.paddingLeft="5px",k.style.textDecoration="underline"}function I(){const k=HA(s),X=n("text"),re=document.getElementById(X)||document.createElement("span"),pe=n("learnmore"),_e=document.getElementById(pe)||document.createElement("a"),ze=n("preprendIcon"),Be=document.getElementById(ze)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(k.created){const ke=k.element;y(ke),R(_e,pe);const Je=b();_(Be,ze),ke.append(Be,re,_e,Je),document.body.appendChild(ke)}u?(re.innerText="Preview backend disconnected.",Be.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Be.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,re.innerText="Preview backend running in this workspace."),re.setAttribute("id",X)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}function gr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gr())}function KA(){const i=Ah()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YA(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function QA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XA(){const i=gr();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function $A(){return!KA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JA(){try{return typeof indexedDB=="object"}catch{return!1}}function WA(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const ZA="FirebaseError";class ma extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=ZA,Object.setPrototypeOf(this,ma.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ec.prototype.create)}}class Ec{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?eC(u,s):"Error",y=`${this.serviceName}: ${d} (${o}).`;return new ma(o,y,s)}}function eC(i,e){return i.replace(tC,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const tC=/\{\$([^}]+)}/g;function nC(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Wo(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],d=e[o];if(X_(u)&&X_(d)){if(!Wo(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function X_(i){return i!==null&&typeof i=="object"}function Tc(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function rC(i,e){const n=new iC(i,e);return n.subscribe.bind(n)}class iC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");sC(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Vp),o.error===void 0&&(o.error=Vp),o.complete===void 0&&(o.complete=Vp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sC(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Vp(){}function ji(i){return i&&i._delegate?i._delegate:i}class Zo{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Go="[DEFAULT]";class aC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new zA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lC(e))try{this.getOrInitializeService({instanceIdentifier:Go})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Go){return this.instances.has(e)}getOptions(e=Go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(u);s===y&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:oC(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Go){return this.component?this.component.multipleInstances?e:Go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oC(i){return i===Go?void 0:i}function lC(i){return i.instantiationMode==="EAGER"}class uC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var wt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(wt||(wt={}));const cC={debug:wt.DEBUG,verbose:wt.VERBOSE,info:wt.INFO,warn:wt.WARN,error:wt.ERROR,silent:wt.SILENT},fC=wt.INFO,hC={[wt.DEBUG]:"log",[wt.VERBOSE]:"log",[wt.INFO]:"info",[wt.WARN]:"warn",[wt.ERROR]:"error"},dC=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=hC[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sm{constructor(e){this.name=e,this._logLevel=fC,this._logHandler=dC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,wt.DEBUG,...e),this._logHandler(this,wt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,wt.VERBOSE,...e),this._logHandler(this,wt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,wt.INFO,...e),this._logHandler(this,wt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,wt.WARN,...e),this._logHandler(this,wt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,wt.ERROR,...e),this._logHandler(this,wt.ERROR,...e)}}const pC=(i,e)=>e.some(n=>i instanceof n);let $_,J_;function mC(){return $_||($_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gC(){return J_||(J_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qb=new WeakMap,$p=new WeakMap,Hb=new WeakMap,Pp=new WeakMap,Am=new WeakMap;function yC(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{n(uo(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&qb.set(n,i)}).catch(()=>{}),Am.set(e,i),e}function vC(i){if($p.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});$p.set(i,e)}let Jp={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return $p.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Hb.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return uo(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function _C(i){Jp=i(Jp)}function bC(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Lp(this),e,...n);return Hb.set(s,e.sort?e.sort():[e]),uo(s)}:gC().includes(i)?function(...e){return i.apply(Lp(this),e),uo(qb.get(this))}:function(...e){return uo(i.apply(Lp(this),e))}}function EC(i){return typeof i=="function"?bC(i):(i instanceof IDBTransaction&&vC(i),pC(i,mC())?new Proxy(i,Jp):i)}function uo(i){if(i instanceof IDBRequest)return yC(i);if(Pp.has(i))return Pp.get(i);const e=EC(i);return e!==i&&(Pp.set(i,e),Am.set(e,i)),e}const Lp=i=>Am.get(i);function TC(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(i,e),y=uo(d);return s&&d.addEventListener("upgradeneeded",_=>{s(uo(d.result),_.oldVersion,_.newVersion,uo(d.transaction),_)}),n&&d.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),y.then(_=>{u&&_.addEventListener("close",()=>u()),o&&_.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),y}const wC=["get","getKey","getAll","getAllKeys","count"],SC=["put","add","delete","clear"],Up=new Map;function W_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Up.get(e))return Up.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=SC.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||wC.includes(n)))return;const u=async function(d,...y){const _=this.transaction(d,o?"readwrite":"readonly");let b=_.store;return s&&(b=b.index(y.shift())),(await Promise.all([b[n](...y),o&&_.done]))[0]};return Up.set(e,u),u}_C(i=>({...i,get:(e,n,s)=>W_(e,n)||i.get(e,n,s),has:(e,n)=>!!W_(e,n)||i.has(e,n)}));class AC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CC(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function CC(i){return i.getComponent()?.type==="VERSION"}const Wp="@firebase/app",Z_="0.14.6";const fa=new Sm("@firebase/app"),RC="@firebase/app-compat",IC="@firebase/analytics-compat",xC="@firebase/analytics",OC="@firebase/app-check-compat",DC="@firebase/app-check",NC="@firebase/auth",MC="@firebase/auth-compat",kC="@firebase/database",VC="@firebase/data-connect",PC="@firebase/database-compat",LC="@firebase/functions",UC="@firebase/functions-compat",jC="@firebase/installations",zC="@firebase/installations-compat",BC="@firebase/messaging",qC="@firebase/messaging-compat",HC="@firebase/performance",FC="@firebase/performance-compat",KC="@firebase/remote-config",GC="@firebase/remote-config-compat",YC="@firebase/storage",QC="@firebase/storage-compat",XC="@firebase/firestore",$C="@firebase/ai",JC="@firebase/firestore-compat",WC="firebase",ZC="12.6.0";const Zp="[DEFAULT]",eR={[Wp]:"fire-core",[RC]:"fire-core-compat",[xC]:"fire-analytics",[IC]:"fire-analytics-compat",[DC]:"fire-app-check",[OC]:"fire-app-check-compat",[NC]:"fire-auth",[MC]:"fire-auth-compat",[kC]:"fire-rtdb",[VC]:"fire-data-connect",[PC]:"fire-rtdb-compat",[LC]:"fire-fn",[UC]:"fire-fn-compat",[jC]:"fire-iid",[zC]:"fire-iid-compat",[BC]:"fire-fcm",[qC]:"fire-fcm-compat",[HC]:"fire-perf",[FC]:"fire-perf-compat",[KC]:"fire-rc",[GC]:"fire-rc-compat",[YC]:"fire-gcs",[QC]:"fire-gcs-compat",[XC]:"fire-fst",[JC]:"fire-fst-compat",[$C]:"fire-vertex","fire-js":"fire-js",[WC]:"fire-js-all"};const ih=new Map,tR=new Map,em=new Map;function e0(i,e){try{i.container.addComponent(e)}catch(n){fa.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Ql(i){const e=i.name;if(em.has(e))return fa.debug(`There were multiple attempts to register component ${e}.`),!1;em.set(e,i);for(const n of ih.values())e0(n,i);for(const n of tR.values())e0(n,i);return!0}function Cm(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Wi(i){return i==null?!1:i.settings!==void 0}const nR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},co=new Ec("app","Firebase",nR);class rR{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Zo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw co.create("app-deleted",{appName:this._name})}}const ru=ZC;function Fb(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:Zp,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw co.create("bad-app-name",{appName:String(o)});if(n||(n=Ub()),!n)throw co.create("no-options");const u=ih.get(o);if(u){if(Wo(n,u.options)&&Wo(s,u.config))return u;throw co.create("duplicate-app",{appName:o})}const d=new uC(o);for(const _ of em.values())d.addComponent(_);const y=new rR(n,s,d);return ih.set(o,y),y}function Kb(i=Zp){const e=ih.get(i);if(!e&&i===Zp&&Ub())return Fb();if(!e)throw co.create("no-app",{appName:i});return e}function fo(i,e,n){let s=eR[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fa.warn(d.join(" "));return}Ql(new Zo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const iR="firebase-heartbeat-database",sR=1,uc="firebase-heartbeat-store";let jp=null;function Gb(){return jp||(jp=TC(iR,sR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(uc)}catch(n){console.warn(n)}}}}).catch(i=>{throw co.create("idb-open",{originalErrorMessage:i.message})})),jp}async function aR(i){try{const n=(await Gb()).transaction(uc),s=await n.objectStore(uc).get(Yb(i));return await n.done,s}catch(e){if(e instanceof ma)fa.warn(e.message);else{const n=co.create("idb-get",{originalErrorMessage:e?.message});fa.warn(n.message)}}}async function t0(i,e){try{const s=(await Gb()).transaction(uc,"readwrite");await s.objectStore(uc).put(e,Yb(i)),await s.done}catch(n){if(n instanceof ma)fa.warn(n.message);else{const s=co.create("idb-set",{originalErrorMessage:n?.message});fa.warn(s.message)}}}function Yb(i){return`${i.name}!${i.options.appId}`}const oR=1024,lR=30;class uR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=n0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>lR){const o=hR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=n0(),{heartbeatsToSend:n,unsentEntries:s}=cR(this._heartbeatsCache.heartbeats),o=rh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return fa.warn(e),""}}}function n0(){return new Date().toISOString().substring(0,10)}function cR(i,e=oR){const n=[];let s=i.slice();for(const o of i){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),r0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),r0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class fR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JA()?WA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await aR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return t0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return t0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function r0(i){return rh(JSON.stringify({version:2,heartbeats:i})).length}function hR(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function dR(i){Ql(new Zo("platform-logger",e=>new AC(e),"PRIVATE")),Ql(new Zo("heartbeat",e=>new uR(e),"PRIVATE")),fo(Wp,Z_,i),fo(Wp,Z_,"esm2020"),fo("fire-js","")}dR("");var pR="firebase",mR="12.6.0";fo(pR,mR,"app");function Qb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gR=Qb,Xb=new Ec("auth","Firebase",Qb());const sh=new Sm("@firebase/auth");function yR(i,...e){sh.logLevel<=wt.WARN&&sh.warn(`Auth (${ru}): ${i}`,...e)}function Kf(i,...e){sh.logLevel<=wt.ERROR&&sh.error(`Auth (${ru}): ${i}`,...e)}function Cs(i,...e){throw Im(i,...e)}function ts(i,...e){return Im(i,...e)}function Rm(i,e,n){const s={...gR(),[e]:n};return new Ec("auth","Firebase",s).create(e,{appName:i.name})}function Xo(i){return Rm(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vR(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Cs(i,"argument-error"),Rm(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Im(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return Xb.create(i,...e)}function tt(i,e,...n){if(!i)throw Im(e,...n)}function oa(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Kf(e),new Error(e)}function ha(i,e){i||oa(e)}function tm(){return typeof self<"u"&&self.location?.href||""}function _R(){return i0()==="http:"||i0()==="https:"}function i0(){return typeof self<"u"&&self.location?.protocol||null}function bR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_R()||YA()||"connection"in navigator)?navigator.onLine:!0}function ER(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class wc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ha(n>e,"Short delay should be less than long delay!"),this.isMobile=FA()||QA()}get(){return bR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xm(i,e){ha(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class $b{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const TR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const wR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SR=new wc(3e4,6e4);function Om(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function iu(i,e,n,s,o={}){return Jb(i,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const y=Tc({key:i.config.apiKey,...d}).slice(1),_=await i._getAdditionalHeaders();_["Content-Type"]="application/json",i.languageCode&&(_["X-Firebase-Locale"]=i.languageCode);const b={method:e,headers:_,...u};return GA()||(b.referrerPolicy="no-referrer"),i.emulatorConfig&&nu(i.emulatorConfig.host)&&(b.credentials="include"),$b.fetch()(await Wb(i,i.config.apiHost,n,y),b)})}async function Jb(i,e,n){i._canInitEmulator=!1;const s={...TR,...e};try{const o=new CR(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Vf(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const y=u.ok?d.errorMessage:d.error.message,[_,b]=y.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vf(i,"credential-already-in-use",d);if(_==="EMAIL_EXISTS")throw Vf(i,"email-already-in-use",d);if(_==="USER_DISABLED")throw Vf(i,"user-disabled",d);const R=s[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw Rm(i,R,b);Cs(i,R)}}catch(o){if(o instanceof ma)throw o;Cs(i,"network-request-failed",{message:String(o)})}}async function AR(i,e,n,s,o={}){const u=await iu(i,e,n,s,o);return"mfaPendingCredential"in u&&Cs(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function Wb(i,e,n,s){const o=`${e}${n}?${s}`,u=i,d=u.config.emulator?xm(i.config,o):`${i.config.apiScheme}://${o}`;return wR.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}class CR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ts(this.auth,"network-request-failed")),SR.get())})}}function Vf(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=ts(i,e,s);return o.customData._tokenResponse=n,o}async function RR(i,e){return iu(i,"POST","/v1/accounts:delete",e)}async function ah(i,e){return iu(i,"POST","/v1/accounts:lookup",e)}function ec(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function IR(i,e=!1){const n=ji(i),s=await n.getIdToken(e),o=Dm(s);tt(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:s,authTime:ec(zp(o.auth_time)),issuedAtTime:ec(zp(o.iat)),expirationTime:ec(zp(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function zp(i){return Number(i)*1e3}function Dm(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return Kf("JWT malformed, contained fewer than 3 sections"),null;try{const o=Pb(n);return o?JSON.parse(o):(Kf("Failed to decode base64 JWT payload"),null)}catch(o){return Kf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function s0(i){const e=Dm(i);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function cc(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ma&&xR(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function xR({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class OR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class nm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ec(this.lastLoginAt),this.creationTime=ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function oh(i){const e=i.auth,n=await i.getIdToken(),s=await cc(i,ah(e,{idToken:n}));tt(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?Zb(o.providerUserInfo):[],d=NR(i.providerData,u),y=i.isAnonymous,_=!(i.email&&o.passwordHash)&&!d?.length,b=y?_:!1,R={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new nm(o.createdAt,o.lastLoginAt),isAnonymous:b};Object.assign(i,R)}async function DR(i){const e=ji(i);await oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NR(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Zb(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function MR(i,e){const n=await Jb(i,{},async()=>{const s=Tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,d=await Wb(i,o,"/v1/token",`key=${u}`),y=await i._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:y,body:s};return i.emulatorConfig&&nu(i.emulatorConfig.host)&&(_.credentials="include"),$b.fetch()(d,_)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kR(i,e){return iu(i,"POST","/v2/accounts:revokeToken",Om(i,e))}class Fl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):s0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){tt(e.length!==0,"internal-error");const n=s0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await MR(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new Fl;return s&&(tt(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(tt(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(tt(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fl,this.toJSON())}_performRefresh(){return oa("not implemented")}}function to(i,e){tt(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Zi{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new OR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new nm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await cc(this,this.stsTokenManager.getToken(this.auth,e));return tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return IR(this,e)}reload(){return DR(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await oh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wi(this.auth.app))return Promise.reject(Xo(this.auth));const e=await this.getIdToken();return await cc(this,RR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,y=n.tenantId??void 0,_=n._redirectEventId??void 0,b=n.createdAt??void 0,R=n.lastLoginAt??void 0,{uid:I,emailVerified:k,isAnonymous:X,providerData:re,stsTokenManager:pe}=n;tt(I&&pe,e,"internal-error");const _e=Fl.fromJSON(this.name,pe);tt(typeof I=="string",e,"internal-error"),to(s,e.name),to(o,e.name),tt(typeof k=="boolean",e,"internal-error"),tt(typeof X=="boolean",e,"internal-error"),to(u,e.name),to(d,e.name),to(y,e.name),to(_,e.name),to(b,e.name),to(R,e.name);const ze=new Zi({uid:I,auth:e,email:o,emailVerified:k,displayName:s,isAnonymous:X,photoURL:d,phoneNumber:u,tenantId:y,stsTokenManager:_e,createdAt:b,lastLoginAt:R});return re&&Array.isArray(re)&&(ze.providerData=re.map(Be=>({...Be}))),_&&(ze._redirectEventId=_),ze}static async _fromIdTokenResponse(e,n,s=!1){const o=new Fl;o.updateFromServerResponse(n);const u=new Zi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await oh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];tt(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Zb(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,y=new Fl;y.updateFromIdToken(s);const _=new Zi({uid:o.localId,auth:e,stsTokenManager:y,isAnonymous:d}),b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new nm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(_,b),_}}const a0=new Map;function la(i){ha(i instanceof Function,"Expected a class definition");let e=a0.get(i);return e?(ha(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,a0.set(i,e),e)}class eE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}eE.type="NONE";const o0=eE;function Gf(i,e,n){return`firebase:${i}:${e}:${n}`}class Kl{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Gf(this.userKey,o.apiKey,u),this.fullPersistenceKey=Gf("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ah(this.auth,{idToken:e}).catch(()=>{});return n?Zi._fromGetAccountInfoResponse(this.auth,n,e):null}return Zi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Kl(la(o0),e,s);const o=(await Promise.all(n.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let u=o[0]||la(o0);const d=Gf(s,e.config.apiKey,e.name);let y=null;for(const b of n)try{const R=await b._get(d);if(R){let I;if(typeof R=="string"){const k=await ah(e,{idToken:R}).catch(()=>{});if(!k)break;I=await Zi._fromGetAccountInfoResponse(e,k,R)}else I=Zi._fromJSON(e,R);b!==u&&(y=I),u=b;break}}catch{}const _=o.filter(b=>b._shouldAllowMigration);return!u._shouldAllowMigration||!_.length?new Kl(u,e,s):(u=_[0],y&&await u._set(d,y.toJSON()),await Promise.all(n.map(async b=>{if(b!==u)try{await b._remove(d)}catch{}})),new Kl(u,e,s))}}function l0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aE(e))return"Blackberry";if(oE(e))return"Webos";if(nE(e))return"Safari";if((e.includes("chrome/")||rE(e))&&!e.includes("edge/"))return"Chrome";if(sE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function tE(i=gr()){return/firefox\//i.test(i)}function nE(i=gr()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rE(i=gr()){return/crios\//i.test(i)}function iE(i=gr()){return/iemobile/i.test(i)}function sE(i=gr()){return/android/i.test(i)}function aE(i=gr()){return/blackberry/i.test(i)}function oE(i=gr()){return/webos/i.test(i)}function Nm(i=gr()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function VR(i=gr()){return Nm(i)&&!!window.navigator?.standalone}function PR(){return XA()&&document.documentMode===10}function lE(i=gr()){return Nm(i)||sE(i)||oE(i)||aE(i)||/windows phone/i.test(i)||iE(i)}function uE(i,e=[]){let n;switch(i){case"Browser":n=l0(gr());break;case"Worker":n=`${l0(gr())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ru}/${s}`}class LR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,y)=>{try{const _=e(u);d(_)}catch(_){y(_)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function UR(i,e={}){return iu(i,"GET","/v2/passwordPolicy",Om(i,e))}const jR=6;class zR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??jR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class BR{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new u0(this),this.idTokenSubscription=new u0(this),this.beforeStateQueue=new LR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=la(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Kl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ah(this,{idToken:e}),s=await Zi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Wi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=s?._redirectEventId,y=await this.tryRedirectSignIn(e);(!u||u===d)&&y?.user&&(s=y.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await oh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ER()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wi(this.app))return Promise.reject(Xo(this));const n=e?ji(e):null;return n&&tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wi(this.app)?Promise.reject(Xo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wi(this.app)?Promise.reject(Xo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(la(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UR(this),n=new zR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ec("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await kR(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&la(e)||this._popupRedirectResolver;tt(n,this,"argument-error"),this.redirectPersistenceManager=await Kl.create(this,[la(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(y,this,"internal-error"),y.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const _=e.addObserver(n,s,o);return()=>{d=!0,_()}}else{const _=e.addObserver(n);return()=>{d=!0,_()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Wi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&yR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ch(i){return ji(i)}class u0{constructor(e){this.auth=e,this.observer=null,this.addObserver=rC(n=>this.observer=n)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Mm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qR(i){Mm=i}function HR(i){return Mm.loadJS(i)}function FR(){return Mm.gapiScript}function KR(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function GR(i,e){const n=Cm(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Wo(u,e??{}))return o;Cs(o,"already-initialized")}return n.initialize({options:e})}function YR(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(la);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function QR(i,e,n){const s=Ch(i);tt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=cE(e),{host:d,port:y}=XR(e),_=y===null?"":`:${y}`,b={url:`${u}//${d}${_}/`},R=Object.freeze({host:d,port:y,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){tt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),tt(Wo(b,s.config.emulator)&&Wo(R,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=b,s.emulatorConfig=R,s.settings.appVerificationDisabledForTesting=!0,nu(d)?(zb(`${u}//${d}${_}`),Bb("Auth",!0)):$R()}function cE(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function XR(i){const e=cE(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:c0(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:c0(d)}}}function c0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function $R(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class fE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return oa("not implemented")}_getIdTokenResponse(e){return oa("not implemented")}_linkToIdToken(e,n){return oa("not implemented")}_getReauthenticationResolver(e){return oa("not implemented")}}async function Gl(i,e){return AR(i,"POST","/v1/accounts:signInWithIdp",Om(i,e))}const JR="http://localhost";class el extends fE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new el(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const d=new el(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Gl(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Gl(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gl(e,n)}buildRequest(){const e={requestUri:JR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Tc(n)}return e}}class km{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Sc extends km{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class io extends Sc{constructor(){super("facebook.com")}static credential(e){return el._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return io.credential(e.oauthAccessToken)}catch{return null}}}io.FACEBOOK_SIGN_IN_METHOD="facebook.com";io.PROVIDER_ID="facebook.com";class aa extends Sc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return el._fromParams({providerId:aa.PROVIDER_ID,signInMethod:aa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return aa.credentialFromTaggedObject(e)}static credentialFromError(e){return aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return aa.credential(n,s)}catch{return null}}}aa.GOOGLE_SIGN_IN_METHOD="google.com";aa.PROVIDER_ID="google.com";class so extends Sc{constructor(){super("github.com")}static credential(e){return el._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return so.credential(e.oauthAccessToken)}catch{return null}}}so.GITHUB_SIGN_IN_METHOD="github.com";so.PROVIDER_ID="github.com";class ao extends Sc{constructor(){super("twitter.com")}static credential(e,n){return el._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ao.credential(n,s)}catch{return null}}}ao.TWITTER_SIGN_IN_METHOD="twitter.com";ao.PROVIDER_ID="twitter.com";class Xl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Zi._fromIdTokenResponse(e,s,o),d=f0(s);return new Xl({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=f0(s);return new Xl({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function f0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class lh extends ma{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,lh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new lh(e,n,s,o)}}function hE(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?lh._fromErrorAndOperation(i,u,e,s):u})}async function WR(i,e,n=!1){const s=await cc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Xl._forOperation(i,"link",s)}async function ZR(i,e,n=!1){const{auth:s}=i;if(Wi(s.app))return Promise.reject(Xo(s));const o="reauthenticate";try{const u=await cc(i,hE(s,o,e,i),n);tt(u.idToken,s,"internal-error");const d=Dm(u.idToken);tt(d,s,"internal-error");const{sub:y}=d;return tt(i.uid===y,s,"user-mismatch"),Xl._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Cs(s,"user-mismatch"),u}}async function eI(i,e,n=!1){if(Wi(i.app))return Promise.reject(Xo(i));const s="signIn",o=await hE(i,s,e),u=await Xl._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}function tI(i,e,n,s){return ji(i).onIdTokenChanged(e,n,s)}function nI(i,e,n){return ji(i).beforeAuthStateChanged(e,n)}function rI(i,e,n,s){return ji(i).onAuthStateChanged(e,n,s)}function h0(i){return ji(i).signOut()}const uh="__sak";class dE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uh,"1"),this.storage.removeItem(uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const iI=1e3,sI=10;class pE extends dE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,y,_)=>{this.notifyListeners(d,_)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);PR()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,sI):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},iI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pE.type="LOCAL";const aI=pE;class mE extends dE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mE.type="SESSION";const gE=mE;function oI(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Rh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Rh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const y=Array.from(d).map(async b=>b(n.origin,u)),_=await oI(y);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:_})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rh.receivers=[];function Vm(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class lI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((y,_)=>{const b=Vm("",20);o.port1.start();const R=setTimeout(()=>{_(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(I){const k=I;if(k.data.eventId===b)switch(k.data.status){case"ack":clearTimeout(R),u=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),y(k.data.response);break;default:clearTimeout(R),clearTimeout(u),_(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:b,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Es(){return window}function uI(i){Es().location.href=i}function yE(){return typeof Es().WorkerGlobalScope<"u"&&typeof Es().importScripts=="function"}async function cI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fI(){return navigator?.serviceWorker?.controller||null}function hI(){return yE()?self:null}const vE="firebaseLocalStorageDb",dI=1,ch="firebaseLocalStorage",_E="fbase_key";class Ac{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ih(i,e){return i.transaction([ch],e?"readwrite":"readonly").objectStore(ch)}function pI(){const i=indexedDB.deleteDatabase(vE);return new Ac(i).toPromise()}function rm(){const i=indexedDB.open(vE,dI);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(ch,{keyPath:_E})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(ch)?e(s):(s.close(),await pI(),e(await rm()))})})}async function d0(i,e,n){const s=Ih(i,!0).put({[_E]:e,value:n});return new Ac(s).toPromise()}async function mI(i,e){const n=Ih(i,!1).get(e),s=await new Ac(n).toPromise();return s===void 0?null:s.value}function p0(i,e){const n=Ih(i,!0).delete(e);return new Ac(n).toPromise()}const gI=800,yI=3;class bE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>yI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rh._getInstance(hI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await cI(),!this.activeServiceWorker)return;this.sender=new lI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rm();return await d0(e,uh,"1"),await p0(e,uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>d0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>mI(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>p0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Ih(o,!1).getAll();return new Ac(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bE.type="LOCAL";const vI=bE;new wc(3e4,6e4);function EE(i,e){return e?la(e):(tt(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Pm extends fE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _I(i){return eI(i.auth,new Pm(i),i.bypassAuthState)}function bI(i){const{auth:e,user:n}=i;return tt(n,e,"internal-error"),ZR(n,new Pm(i),i.bypassAuthState)}async function EI(i){const{auth:e,user:n}=i;return tt(n,e,"internal-error"),WR(n,new Pm(i),i.bypassAuthState)}class TE{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:y}=e;if(d){this.reject(d);return}const _={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(_))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _I;case"linkViaPopup":case"linkViaRedirect":return EI;case"reauthViaPopup":case"reauthViaRedirect":return bI;default:Cs(this.auth,"internal-error")}}resolve(e){ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const TI=new wc(2e3,1e4);async function wI(i,e,n){if(Wi(i.app))return Promise.reject(ts(i,"operation-not-supported-in-this-environment"));const s=Ch(i);vR(i,e,km);const o=EE(s,n);return new Yo(s,"signInViaPopup",e,o).executeNotNull()}class Yo extends TE{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Yo.currentPopupAction&&Yo.currentPopupAction.cancel(),Yo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){ha(this.filter.length===1,"Popup operations only handle one event");const e=Vm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ts(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ts(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ts(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TI.get())};e()}}Yo.currentPopupAction=null;const SI="pendingRedirect",Yf=new Map;class AI extends TE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Yf.get(this.auth._key());if(!e){try{const s=await CI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Yf.set(this.auth._key(),e)}return this.bypassAuthState||Yf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CI(i,e){const n=xI(e),s=II(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function RI(i,e){Yf.set(i._key(),e)}function II(i){return la(i._redirectPersistence)}function xI(i){return Gf(SI,i.config.apiKey,i.name)}async function OI(i,e,n=!1){if(Wi(i.app))return Promise.reject(Xo(i));const s=Ch(i),o=EE(s,e),d=await new AI(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const DI=600*1e3;class NI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!wE(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ts(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DI&&this.cachedEventUids.clear(),this.cachedEventUids.has(m0(e))}saveEventToCache(e){this.cachedEventUids.add(m0(e)),this.lastProcessedEventTime=Date.now()}}function m0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function wE({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function MI(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wE(i);default:return!1}}async function kI(i,e={}){return iu(i,"GET","/v1/projects",e)}const VI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PI=/^https?/;async function LI(i){if(i.config.emulator)return;const{authorizedDomains:e}=await kI(i);for(const n of e)try{if(UI(n))return}catch{}Cs(i,"unauthorized-domain")}function UI(i){const e=tm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!PI.test(n))return!1;if(VI.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const jI=new wc(3e4,6e4);function g0(){const i=Es().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function zI(i){return new Promise((e,n)=>{function s(){g0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{g0(),n(ts(i,"network-request-failed"))},timeout:jI.get()})}if(Es().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Es().gapi?.load)s();else{const o=KR("iframefcb");return Es()[o]=()=>{gapi.load?s():n(ts(i,"network-request-failed"))},HR(`${FR()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Qf=null,e})}let Qf=null;function BI(i){return Qf=Qf||zI(i),Qf}const qI=new wc(5e3,15e3),HI="__/auth/iframe",FI="emulator/auth/iframe",KI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YI(i){const e=i.config;tt(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?xm(e,FI):`https://${i.config.authDomain}/${HI}`,s={apiKey:e.apiKey,appName:i.name,v:ru},o=GI.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Tc(s).slice(1)}`}async function QI(i){const e=await BI(i),n=Es().gapi;return tt(n,i,"internal-error"),e.open({where:document.body,url:YI(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KI,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=ts(i,"network-request-failed"),y=Es().setTimeout(()=>{u(d)},qI.get());function _(){Es().clearTimeout(y),o(s)}s.ping(_).then(_,()=>{u(d)})}))}const XI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$I=500,JI=600,WI="_blank",ZI="http://localhost";class y0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ex(i,e,n,s=$I,o=JI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let y="";const _={...XI,width:s.toString(),height:o.toString(),top:u,left:d},b=gr().toLowerCase();n&&(y=rE(b)?WI:n),tE(b)&&(e=e||ZI,_.scrollbars="yes");const R=Object.entries(_).reduce((k,[X,re])=>`${k}${X}=${re},`,"");if(VR(b)&&y!=="_self")return tx(e||"",y),new y0(null);const I=window.open(e||"",y,R);tt(I,i,"popup-blocked");try{I.focus()}catch{}return new y0(I)}function tx(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const nx="__/auth/handler",rx="emulator/auth/handler",ix=encodeURIComponent("fac");async function v0(i,e,n,s,o,u){tt(i.config.authDomain,i,"auth-domain-config-required"),tt(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:ru,eventId:o};if(e instanceof km){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",nC(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[R,I]of Object.entries({}))d[R]=I}if(e instanceof Sc){const R=e.getScopes().filter(I=>I!=="");R.length>0&&(d.scopes=R.join(","))}i.tenantId&&(d.tid=i.tenantId);const y=d;for(const R of Object.keys(y))y[R]===void 0&&delete y[R];const _=await i._getAppCheckToken(),b=_?`#${ix}=${encodeURIComponent(_)}`:"";return`${sx(i)}?${Tc(y).slice(1)}${b}`}function sx({config:i}){return i.emulator?xm(i,rx):`https://${i.authDomain}/${nx}`}const Bp="webStorageSupport";class ax{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gE,this._completeRedirectFn=OI,this._overrideRedirectResult=RI}async _openPopup(e,n,s,o){ha(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await v0(e,n,s,tm(),o);return ex(e,u,Vm())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await v0(e,n,s,tm(),o);return uI(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ha(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await QI(e),s=new NI(e);return n.register("authEvent",o=>(tt(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bp,{type:Bp},o=>{const u=o?.[0]?.[Bp];u!==void 0&&n(!!u),Cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lE()||nE()||Nm()}}const ox=ax;var _0="@firebase/auth",b0="1.11.1";class lx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ux(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cx(i){Ql(new Zo("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:y}=s.options;tt(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const _={apiKey:d,authDomain:y,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uE(i)},b=new BR(s,o,u,_);return YR(b,n),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ql(new Zo("auth-internal",e=>{const n=Ch(e.getProvider("auth").getImmediate());return(s=>new lx(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fo(_0,b0,ux(i)),fo(_0,b0,"esm2020")}const fx=300,hx=jb("authIdTokenMaxAge")||fx;let E0=null;const dx=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>hx)return;const o=n?.token;E0!==o&&(E0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function px(i=Kb()){const e=Cm(i,"auth");if(e.isInitialized())return e.getImmediate();const n=GR(i,{popupRedirectResolver:ox,persistence:[vI,aI,gE]}),s=jb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=dx(u.toString());nI(n,d,()=>d(n.currentUser)),tI(n,y=>d(y))}}const o=Lb("auth");return o&&QR(n,`http://${o}`),n}function mx(){return document.getElementsByTagName("head")?.[0]??document}qR({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=ts("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",mx().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cx("Browser");var T0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ho,SE;(function(){var i;function e(D,N){function V(){}V.prototype=N.prototype,D.F=N.prototype,D.prototype=new V,D.prototype.constructor=D,D.D=function(B,z,Z){for(var P=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)P[qt-2]=arguments[qt];return N.prototype[z].apply(B,P)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,N,V){V||(V=0);const B=Array(16);if(typeof N=="string")for(var z=0;z<16;++z)B[z]=N.charCodeAt(V++)|N.charCodeAt(V++)<<8|N.charCodeAt(V++)<<16|N.charCodeAt(V++)<<24;else for(z=0;z<16;++z)B[z]=N[V++]|N[V++]<<8|N[V++]<<16|N[V++]<<24;N=D.g[0],V=D.g[1],z=D.g[2];let Z=D.g[3],P;P=N+(Z^V&(z^Z))+B[0]+3614090360&4294967295,N=V+(P<<7&4294967295|P>>>25),P=Z+(z^N&(V^z))+B[1]+3905402710&4294967295,Z=N+(P<<12&4294967295|P>>>20),P=z+(V^Z&(N^V))+B[2]+606105819&4294967295,z=Z+(P<<17&4294967295|P>>>15),P=V+(N^z&(Z^N))+B[3]+3250441966&4294967295,V=z+(P<<22&4294967295|P>>>10),P=N+(Z^V&(z^Z))+B[4]+4118548399&4294967295,N=V+(P<<7&4294967295|P>>>25),P=Z+(z^N&(V^z))+B[5]+1200080426&4294967295,Z=N+(P<<12&4294967295|P>>>20),P=z+(V^Z&(N^V))+B[6]+2821735955&4294967295,z=Z+(P<<17&4294967295|P>>>15),P=V+(N^z&(Z^N))+B[7]+4249261313&4294967295,V=z+(P<<22&4294967295|P>>>10),P=N+(Z^V&(z^Z))+B[8]+1770035416&4294967295,N=V+(P<<7&4294967295|P>>>25),P=Z+(z^N&(V^z))+B[9]+2336552879&4294967295,Z=N+(P<<12&4294967295|P>>>20),P=z+(V^Z&(N^V))+B[10]+4294925233&4294967295,z=Z+(P<<17&4294967295|P>>>15),P=V+(N^z&(Z^N))+B[11]+2304563134&4294967295,V=z+(P<<22&4294967295|P>>>10),P=N+(Z^V&(z^Z))+B[12]+1804603682&4294967295,N=V+(P<<7&4294967295|P>>>25),P=Z+(z^N&(V^z))+B[13]+4254626195&4294967295,Z=N+(P<<12&4294967295|P>>>20),P=z+(V^Z&(N^V))+B[14]+2792965006&4294967295,z=Z+(P<<17&4294967295|P>>>15),P=V+(N^z&(Z^N))+B[15]+1236535329&4294967295,V=z+(P<<22&4294967295|P>>>10),P=N+(z^Z&(V^z))+B[1]+4129170786&4294967295,N=V+(P<<5&4294967295|P>>>27),P=Z+(V^z&(N^V))+B[6]+3225465664&4294967295,Z=N+(P<<9&4294967295|P>>>23),P=z+(N^V&(Z^N))+B[11]+643717713&4294967295,z=Z+(P<<14&4294967295|P>>>18),P=V+(Z^N&(z^Z))+B[0]+3921069994&4294967295,V=z+(P<<20&4294967295|P>>>12),P=N+(z^Z&(V^z))+B[5]+3593408605&4294967295,N=V+(P<<5&4294967295|P>>>27),P=Z+(V^z&(N^V))+B[10]+38016083&4294967295,Z=N+(P<<9&4294967295|P>>>23),P=z+(N^V&(Z^N))+B[15]+3634488961&4294967295,z=Z+(P<<14&4294967295|P>>>18),P=V+(Z^N&(z^Z))+B[4]+3889429448&4294967295,V=z+(P<<20&4294967295|P>>>12),P=N+(z^Z&(V^z))+B[9]+568446438&4294967295,N=V+(P<<5&4294967295|P>>>27),P=Z+(V^z&(N^V))+B[14]+3275163606&4294967295,Z=N+(P<<9&4294967295|P>>>23),P=z+(N^V&(Z^N))+B[3]+4107603335&4294967295,z=Z+(P<<14&4294967295|P>>>18),P=V+(Z^N&(z^Z))+B[8]+1163531501&4294967295,V=z+(P<<20&4294967295|P>>>12),P=N+(z^Z&(V^z))+B[13]+2850285829&4294967295,N=V+(P<<5&4294967295|P>>>27),P=Z+(V^z&(N^V))+B[2]+4243563512&4294967295,Z=N+(P<<9&4294967295|P>>>23),P=z+(N^V&(Z^N))+B[7]+1735328473&4294967295,z=Z+(P<<14&4294967295|P>>>18),P=V+(Z^N&(z^Z))+B[12]+2368359562&4294967295,V=z+(P<<20&4294967295|P>>>12),P=N+(V^z^Z)+B[5]+4294588738&4294967295,N=V+(P<<4&4294967295|P>>>28),P=Z+(N^V^z)+B[8]+2272392833&4294967295,Z=N+(P<<11&4294967295|P>>>21),P=z+(Z^N^V)+B[11]+1839030562&4294967295,z=Z+(P<<16&4294967295|P>>>16),P=V+(z^Z^N)+B[14]+4259657740&4294967295,V=z+(P<<23&4294967295|P>>>9),P=N+(V^z^Z)+B[1]+2763975236&4294967295,N=V+(P<<4&4294967295|P>>>28),P=Z+(N^V^z)+B[4]+1272893353&4294967295,Z=N+(P<<11&4294967295|P>>>21),P=z+(Z^N^V)+B[7]+4139469664&4294967295,z=Z+(P<<16&4294967295|P>>>16),P=V+(z^Z^N)+B[10]+3200236656&4294967295,V=z+(P<<23&4294967295|P>>>9),P=N+(V^z^Z)+B[13]+681279174&4294967295,N=V+(P<<4&4294967295|P>>>28),P=Z+(N^V^z)+B[0]+3936430074&4294967295,Z=N+(P<<11&4294967295|P>>>21),P=z+(Z^N^V)+B[3]+3572445317&4294967295,z=Z+(P<<16&4294967295|P>>>16),P=V+(z^Z^N)+B[6]+76029189&4294967295,V=z+(P<<23&4294967295|P>>>9),P=N+(V^z^Z)+B[9]+3654602809&4294967295,N=V+(P<<4&4294967295|P>>>28),P=Z+(N^V^z)+B[12]+3873151461&4294967295,Z=N+(P<<11&4294967295|P>>>21),P=z+(Z^N^V)+B[15]+530742520&4294967295,z=Z+(P<<16&4294967295|P>>>16),P=V+(z^Z^N)+B[2]+3299628645&4294967295,V=z+(P<<23&4294967295|P>>>9),P=N+(z^(V|~Z))+B[0]+4096336452&4294967295,N=V+(P<<6&4294967295|P>>>26),P=Z+(V^(N|~z))+B[7]+1126891415&4294967295,Z=N+(P<<10&4294967295|P>>>22),P=z+(N^(Z|~V))+B[14]+2878612391&4294967295,z=Z+(P<<15&4294967295|P>>>17),P=V+(Z^(z|~N))+B[5]+4237533241&4294967295,V=z+(P<<21&4294967295|P>>>11),P=N+(z^(V|~Z))+B[12]+1700485571&4294967295,N=V+(P<<6&4294967295|P>>>26),P=Z+(V^(N|~z))+B[3]+2399980690&4294967295,Z=N+(P<<10&4294967295|P>>>22),P=z+(N^(Z|~V))+B[10]+4293915773&4294967295,z=Z+(P<<15&4294967295|P>>>17),P=V+(Z^(z|~N))+B[1]+2240044497&4294967295,V=z+(P<<21&4294967295|P>>>11),P=N+(z^(V|~Z))+B[8]+1873313359&4294967295,N=V+(P<<6&4294967295|P>>>26),P=Z+(V^(N|~z))+B[15]+4264355552&4294967295,Z=N+(P<<10&4294967295|P>>>22),P=z+(N^(Z|~V))+B[6]+2734768916&4294967295,z=Z+(P<<15&4294967295|P>>>17),P=V+(Z^(z|~N))+B[13]+1309151649&4294967295,V=z+(P<<21&4294967295|P>>>11),P=N+(z^(V|~Z))+B[4]+4149444226&4294967295,N=V+(P<<6&4294967295|P>>>26),P=Z+(V^(N|~z))+B[11]+3174756917&4294967295,Z=N+(P<<10&4294967295|P>>>22),P=z+(N^(Z|~V))+B[2]+718787259&4294967295,z=Z+(P<<15&4294967295|P>>>17),P=V+(Z^(z|~N))+B[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(z+(P<<21&4294967295|P>>>11))&4294967295,D.g[2]=D.g[2]+z&4294967295,D.g[3]=D.g[3]+Z&4294967295}s.prototype.v=function(D,N){N===void 0&&(N=D.length);const V=N-this.blockSize,B=this.C;let z=this.h,Z=0;for(;Z<N;){if(z==0)for(;Z<=V;)o(this,D,Z),Z+=this.blockSize;if(typeof D=="string"){for(;Z<N;)if(B[z++]=D.charCodeAt(Z++),z==this.blockSize){o(this,B),z=0;break}}else for(;Z<N;)if(B[z++]=D[Z++],z==this.blockSize){o(this,B),z=0;break}}this.h=z,this.o+=N},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;N=this.o*8;for(var V=D.length-8;V<D.length;++V)D[V]=N&255,N/=256;for(this.v(D),D=Array(16),N=0,V=0;V<4;++V)for(let B=0;B<32;B+=8)D[N++]=this.g[V]>>>B&255;return D};function u(D,N){var V=y;return Object.prototype.hasOwnProperty.call(V,D)?V[D]:V[D]=N(D)}function d(D,N){this.h=N;const V=[];let B=!0;for(let z=D.length-1;z>=0;z--){const Z=D[z]|0;B&&Z==N||(V[z]=Z,B=!1)}this.g=V}var y={};function _(D){return-128<=D&&D<128?u(D,function(N){return new d([N|0],N<0?-1:0)}):new d([D|0],D<0?-1:0)}function b(D){if(isNaN(D)||!isFinite(D))return I;if(D<0)return _e(b(-D));const N=[];let V=1;for(let B=0;D>=V;B++)N[B]=D/V|0,V*=4294967296;return new d(N,0)}function R(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return _e(R(D.substring(1),N));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=b(Math.pow(N,8));let B=I;for(let Z=0;Z<D.length;Z+=8){var z=Math.min(8,D.length-Z);const P=parseInt(D.substring(Z,Z+z),N);z<8?(z=b(Math.pow(N,z)),B=B.j(z).add(b(P))):(B=B.j(V),B=B.add(b(P)))}return B}var I=_(0),k=_(1),X=_(16777216);i=d.prototype,i.m=function(){if(pe(this))return-_e(this).m();let D=0,N=1;for(let V=0;V<this.g.length;V++){const B=this.i(V);D+=(B>=0?B:4294967296+B)*N,N*=4294967296}return D},i.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(re(this))return"0";if(pe(this))return"-"+_e(this).toString(D);const N=b(Math.pow(D,6));var V=this;let B="";for(;;){const z=Je(V,N).g;V=ze(V,z.j(N));let Z=((V.g.length>0?V.g[0]:V.h)>>>0).toString(D);if(V=z,re(V))return Z+B;for(;Z.length<6;)Z="0"+Z;B=Z+B}},i.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function re(D){if(D.h!=0)return!1;for(let N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function pe(D){return D.h==-1}i.l=function(D){return D=ze(this,D),pe(D)?-1:re(D)?0:1};function _e(D){const N=D.g.length,V=[];for(let B=0;B<N;B++)V[B]=~D.g[B];return new d(V,~D.h).add(k)}i.abs=function(){return pe(this)?_e(this):this},i.add=function(D){const N=Math.max(this.g.length,D.g.length),V=[];let B=0;for(let z=0;z<=N;z++){let Z=B+(this.i(z)&65535)+(D.i(z)&65535),P=(Z>>>16)+(this.i(z)>>>16)+(D.i(z)>>>16);B=P>>>16,Z&=65535,P&=65535,V[z]=P<<16|Z}return new d(V,V[V.length-1]&-2147483648?-1:0)};function ze(D,N){return D.add(_e(N))}i.j=function(D){if(re(this)||re(D))return I;if(pe(this))return pe(D)?_e(this).j(_e(D)):_e(_e(this).j(D));if(pe(D))return _e(this.j(_e(D)));if(this.l(X)<0&&D.l(X)<0)return b(this.m()*D.m());const N=this.g.length+D.g.length,V=[];for(var B=0;B<2*N;B++)V[B]=0;for(B=0;B<this.g.length;B++)for(let z=0;z<D.g.length;z++){const Z=this.i(B)>>>16,P=this.i(B)&65535,qt=D.i(z)>>>16,Gt=D.i(z)&65535;V[2*B+2*z]+=P*Gt,Be(V,2*B+2*z),V[2*B+2*z+1]+=Z*Gt,Be(V,2*B+2*z+1),V[2*B+2*z+1]+=P*qt,Be(V,2*B+2*z+1),V[2*B+2*z+2]+=Z*qt,Be(V,2*B+2*z+2)}for(D=0;D<N;D++)V[D]=V[2*D+1]<<16|V[2*D];for(D=N;D<2*N;D++)V[D]=0;return new d(V,0)};function Be(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function ke(D,N){this.g=D,this.h=N}function Je(D,N){if(re(N))throw Error("division by zero");if(re(D))return new ke(I,I);if(pe(D))return N=Je(_e(D),N),new ke(_e(N.g),_e(N.h));if(pe(N))return N=Je(D,_e(N)),new ke(_e(N.g),N.h);if(D.g.length>30){if(pe(D)||pe(N))throw Error("slowDivide_ only works with positive integers.");for(var V=k,B=N;B.l(D)<=0;)V=yt(V),B=yt(B);var z=Ge(V,1),Z=Ge(B,1);for(B=Ge(B,2),V=Ge(V,2);!re(B);){var P=Z.add(B);P.l(D)<=0&&(z=z.add(V),Z=P),B=Ge(B,1),V=Ge(V,1)}return N=ze(D,z.j(N)),new ke(z,N)}for(z=I;D.l(N)>=0;){for(V=Math.max(1,Math.floor(D.m()/N.m())),B=Math.ceil(Math.log(V)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),Z=b(V),P=Z.j(N);pe(P)||P.l(D)>0;)V-=B,Z=b(V),P=Z.j(N);re(Z)&&(Z=k),z=z.add(Z),D=ze(D,P)}return new ke(z,D)}i.B=function(D){return Je(this,D).h},i.and=function(D){const N=Math.max(this.g.length,D.g.length),V=[];for(let B=0;B<N;B++)V[B]=this.i(B)&D.i(B);return new d(V,this.h&D.h)},i.or=function(D){const N=Math.max(this.g.length,D.g.length),V=[];for(let B=0;B<N;B++)V[B]=this.i(B)|D.i(B);return new d(V,this.h|D.h)},i.xor=function(D){const N=Math.max(this.g.length,D.g.length),V=[];for(let B=0;B<N;B++)V[B]=this.i(B)^D.i(B);return new d(V,this.h^D.h)};function yt(D){const N=D.g.length+1,V=[];for(let B=0;B<N;B++)V[B]=D.i(B)<<1|D.i(B-1)>>>31;return new d(V,D.h)}function Ge(D,N){const V=N>>5;N%=32;const B=D.g.length-V,z=[];for(let Z=0;Z<B;Z++)z[Z]=N>0?D.i(Z+V)>>>N|D.i(Z+V+1)<<32-N:D.i(Z+V);return new d(z,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,SE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=b,d.fromString=R,ho=d}).apply(typeof T0<"u"?T0:typeof self<"u"?self:typeof window<"u"?window:{});var Pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var AE,Qu,CE,Xf,im,RE,IE,xE;(function(){var i,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pf=="object"&&Pf];for(var v=0;v<c.length;++v){var w=c[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=n(this);function o(c,v){if(v)e:{var w=s;c=c.split(".");for(var x=0;x<c.length-1;x++){var te=c[x];if(!(te in w))break e;w=w[te]}c=c[c.length-1],x=w[c],v=v(x),v!=x&&v!=null&&e(w,c,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(v){var w=[],x;for(x in v)Object.prototype.hasOwnProperty.call(v,x)&&w.push([x,v[x]]);return w}});var u=u||{},d=this||self;function y(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function _(c,v,w){return c.call.apply(c.bind,arguments)}function b(c,v,w){return b=_,b.apply(null,arguments)}function R(c,v){var w=Array.prototype.slice.call(arguments,1);return function(){var x=w.slice();return x.push.apply(x,arguments),c.apply(this,x)}}function I(c,v){function w(){}w.prototype=v.prototype,c.Z=v.prototype,c.prototype=new w,c.prototype.constructor=c,c.Ob=function(x,te,ue){for(var Ce=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)Ce[nt-2]=arguments[nt];return v.prototype[te].apply(x,Ce)}}var k=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function X(c){const v=c.length;if(v>0){const w=Array(v);for(let x=0;x<v;x++)w[x]=c[x];return w}return[]}function re(c,v){for(let x=1;x<arguments.length;x++){const te=arguments[x];var w=typeof te;if(w=w!="object"?w:te?Array.isArray(te)?"array":w:"null",w=="array"||w=="object"&&typeof te.length=="number"){w=c.length||0;const ue=te.length||0;c.length=w+ue;for(let Ce=0;Ce<ue;Ce++)c[w+Ce]=te[Ce]}else c.push(te)}}class pe{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function _e(c){d.setTimeout(()=>{throw c},0)}function ze(){var c=D;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class Be{constructor(){this.h=this.g=null}add(v,w){const x=ke.get();x.set(v,w),this.h?this.h.next=x:this.g=x,this.h=x}}var ke=new pe(()=>new Je,c=>c.reset());class Je{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let yt,Ge=!1,D=new Be,N=()=>{const c=Promise.resolve(void 0);yt=()=>{c.then(V)}};function V(){for(var c;c=ze();){try{c.h.call(c.g)}catch(w){_e(w)}var v=ke;v.j(c),v.h<100&&(v.h++,c.next=v.g,v.g=c)}Ge=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var Z=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};d.addEventListener("test",w,v),d.removeEventListener("test",w,v)}catch{}return c})();function P(c){return/^[\s\xa0]*$/.test(c)}function qt(c,v){z.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,v)}I(qt,z),qt.prototype.init=function(c,v){const w=this.type=c.type,x=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget,v||(w=="mouseover"?v=c.fromElement:w=="mouseout"&&(v=c.toElement)),this.relatedTarget=v,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&qt.Z.h.call(this)},qt.prototype.h=function(){qt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Gt="closure_listenable_"+(Math.random()*1e6|0),le=0;function be(c,v,w,x,te){this.listener=c,this.proxy=null,this.src=v,this.type=w,this.capture=!!x,this.ha=te,this.key=++le,this.da=this.fa=!1}function Ue(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function at(c,v,w){for(const x in c)v.call(w,c[x],x,c)}function ft(c,v){for(const w in c)v.call(void 0,c[w],w,c)}function G(c){const v={};for(const w in c)v[w]=c[w];return v}const me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xe(c,v){let w,x;for(let te=1;te<arguments.length;te++){x=arguments[te];for(w in x)c[w]=x[w];for(let ue=0;ue<me.length;ue++)w=me[ue],Object.prototype.hasOwnProperty.call(x,w)&&(c[w]=x[w])}}function Pe(c){this.src=c,this.g={},this.h=0}Pe.prototype.add=function(c,v,w,x,te){const ue=c.toString();c=this.g[ue],c||(c=this.g[ue]=[],this.h++);const Ce=We(c,v,x,te);return Ce>-1?(v=c[Ce],w||(v.fa=!1)):(v=new be(v,this.src,ue,!!x,te),v.fa=w,c.push(v)),v};function Qe(c,v){const w=v.type;if(w in c.g){var x=c.g[w],te=Array.prototype.indexOf.call(x,v,void 0),ue;(ue=te>=0)&&Array.prototype.splice.call(x,te,1),ue&&(Ue(v),c.g[w].length==0&&(delete c.g[w],c.h--))}}function We(c,v,w,x){for(let te=0;te<c.length;++te){const ue=c[te];if(!ue.da&&ue.listener==v&&ue.capture==!!w&&ue.ha==x)return te}return-1}var mt="closure_lm_"+(Math.random()*1e6|0),yn={};function Me(c,v,w,x,te){if(Array.isArray(v)){for(let ue=0;ue<v.length;ue++)Me(c,v[ue],w,x,te);return null}return w=wo(w),c&&c[Gt]?c.J(v,w,y(x)?!!x.capture:!1,te):ns(c,v,w,!1,x,te)}function ns(c,v,w,x,te,ue){if(!v)throw Error("Invalid event type");const Ce=y(te)?!!te.capture:!!te;let nt=Os(c);if(nt||(c[mt]=nt=new Pe(c)),w=nt.add(v,w,x,Ce,ue),w.proxy)return w;if(x=zi(),w.proxy=x,x.src=c,x.listener=w,c.addEventListener)Z||(te=Ce),te===void 0&&(te=!1),c.addEventListener(v.toString(),x,te);else if(c.attachEvent)c.attachEvent(mi(v.toString()),x);else if(c.addListener&&c.removeListener)c.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return w}function zi(){function c(w){return v.call(c.src,c.listener,w)}const v=Gr;return c}function Ct(c,v,w,x,te){if(Array.isArray(v))for(var ue=0;ue<v.length;ue++)Ct(c,v[ue],w,x,te);else x=y(x)?!!x.capture:!!x,w=wo(w),c&&c[Gt]?(c=c.i,ue=String(v).toString(),ue in c.g&&(v=c.g[ue],w=We(v,w,x,te),w>-1&&(Ue(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete c.g[ue],c.h--)))):c&&(c=Os(c))&&(v=c.g[v.toString()],c=-1,v&&(c=We(v,w,x,te)),(w=c>-1?v[c]:null)&&pi(w))}function pi(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[Gt])Qe(v.i,c);else{var w=c.type,x=c.proxy;v.removeEventListener?v.removeEventListener(w,x,c.capture):v.detachEvent?v.detachEvent(mi(w),x):v.addListener&&v.removeListener&&v.removeListener(x),(w=Os(v))?(Qe(w,c),w.h==0&&(w.src=null,v[mt]=null)):Ue(c)}}}function mi(c){return c in yn?yn[c]:yn[c]="on"+c}function Gr(c,v){if(c.da)c=!0;else{v=new qt(v,this);const w=c.listener,x=c.ha||c.src;c.fa&&pi(c),c=w.call(x,v)}return c}function Os(c){return c=c[mt],c instanceof Pe?c:null}var To="__closure_events_fn_"+(Math.random()*1e9>>>0);function wo(c){return typeof c=="function"?c:(c[To]||(c[To]=function(v){return c.handleEvent(v)}),c[To])}function dn(){B.call(this),this.i=new Pe(this),this.M=this,this.G=null}I(dn,B),dn.prototype[Gt]=!0,dn.prototype.removeEventListener=function(c,v,w,x){Ct(this,c,v,w,x)};function rn(c,v){var w,x=c.G;if(x)for(w=[];x;x=x.G)w.push(x);if(c=c.M,x=v.type||v,typeof v=="string")v=new z(v,c);else if(v instanceof z)v.target=v.target||c;else{var te=v;v=new z(x,c),xe(v,te)}te=!0;let ue,Ce;if(w)for(Ce=w.length-1;Ce>=0;Ce--)ue=v.g=w[Ce],te=Pn(ue,x,!0,v)&&te;if(ue=v.g=c,te=Pn(ue,x,!0,v)&&te,te=Pn(ue,x,!1,v)&&te,w)for(Ce=0;Ce<w.length;Ce++)ue=v.g=w[Ce],te=Pn(ue,x,!1,v)&&te}dn.prototype.N=function(){if(dn.Z.N.call(this),this.i){var c=this.i;for(const v in c.g){const w=c.g[v];for(let x=0;x<w.length;x++)Ue(w[x]);delete c.g[v],c.h--}}this.G=null},dn.prototype.J=function(c,v,w,x){return this.i.add(String(c),v,!1,w,x)},dn.prototype.K=function(c,v,w,x){return this.i.add(String(c),v,!0,w,x)};function Pn(c,v,w,x){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();let te=!0;for(let ue=0;ue<v.length;++ue){const Ce=v[ue];if(Ce&&!Ce.da&&Ce.capture==w){const nt=Ce.listener,cn=Ce.ha||Ce.src;Ce.fa&&Qe(c.i,Ce),te=nt.call(cn,x)!==!1&&te}}return te&&!x.defaultPrevented}function ol(c,v){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=b(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(c,v||0)}function rs(c){c.g=ol(()=>{c.g=null,c.i&&(c.i=!1,rs(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class qn extends B{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:rs(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yr(c){B.call(this),this.h=c,this.g={}}I(Yr,B);var Qr=[];function Xr(c){at(c.g,function(v,w){this.g.hasOwnProperty(w)&&pi(v)},c),c.g={}}Yr.prototype.N=function(){Yr.Z.N.call(this),Xr(this)},Yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gi=d.JSON.stringify,Ds=d.JSON.parse,ga=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Ns(){}function yi(){}var ar={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function vn(){z.call(this,"d")}I(vn,z);function _n(){z.call(this,"c")}I(_n,z);var Ne={},is=null;function wr(){return is=is||new dn}Ne.Ia="serverreachability";function Ms(c){z.call(this,Ne.Ia,c)}I(Ms,z);function Ie(c){const v=wr();rn(v,new Ms(v))}Ne.STAT_EVENT="statevent";function Bi(c,v){z.call(this,Ne.STAT_EVENT,c),this.stat=v}I(Bi,z);function sn(c){const v=wr();rn(v,new Bi(v,c))}Ne.Ja="timingevent";function Sr(c,v){z.call(this,Ne.Ja,c),this.size=v}I(Sr,z);function $r(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},v)}function yr(){this.g=!0}yr.prototype.ua=function(){this.g=!1};function uu(c,v,w,x,te,ue){c.info(function(){if(c.g)if(ue){var Ce="",nt=ue.split("&");for(let Rt=0;Rt<nt.length;Rt++){var cn=nt[Rt].split("=");if(cn.length>1){const jt=cn[0];cn=cn[1];const Pr=jt.split("_");Ce=Pr.length>=2&&Pr[1]=="type"?Ce+(jt+"="+cn+"&"):Ce+(jt+"=redacted&")}}}else Ce=null;else Ce=ue;return"XMLHTTP REQ ("+x+") [attempt "+te+"]: "+v+`
`+w+`
`+Ce})}function ll(c,v,w,x,te,ue,Ce){c.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+te+"]: "+v+`
`+w+`
`+ue+" "+Ce})}function $n(c,v,w,x){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+So(c,w)+(x?" "+x:"")})}function Ar(c,v){c.info(function(){return"TIMEOUT: "+v})}yr.prototype.info=function(){};function So(c,v){if(!c.g)return v;if(!v)return null;try{const ue=JSON.parse(v);if(ue){for(c=0;c<ue.length;c++)if(Array.isArray(ue[c])){var w=ue[c];if(!(w.length<2)){var x=w[1];if(Array.isArray(x)&&!(x.length<1)){var te=x[0];if(te!="noop"&&te!="stop"&&te!="close")for(let Ce=1;Ce<x.length;Ce++)x[Ce]=""}}}}return gi(ue)}catch{return v}}var vi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Vt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Zt;function ks(){}I(ks,Ns),ks.prototype.g=function(){return new XMLHttpRequest},Zt=new ks;function Cr(c){return encodeURIComponent(String(c))}function Vs(c){var v=1;c=c.split(":");const w=[];for(;v>0&&c.length;)w.push(c.shift()),v--;return c.length&&w.push(c.join(":")),w}function or(c,v,w,x){this.j=c,this.i=v,this.l=w,this.S=x||1,this.V=new Yr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Jr}function Jr(){this.i=null,this.g="",this.h=!1}var Lt={},Qt={};function Ln(c,v,w){c.M=1,c.A=os(on(v)),c.u=w,c.R=!0,qi(c,null)}function qi(c,v){c.F=Date.now(),Hn(c),c.B=on(c.A);var w=c.B,x=c.S;Array.isArray(x)||(x=[String(x)]),Ea(w.i,"t",x),c.C=0,w=c.j.L,c.h=new Jr,c.g=Tn(c.j,w?v:null,!c.u),c.P>0&&(c.O=new qn(b(c.Y,c,c.g),c.P)),v=c.V,w=c.g,x=c.ba;var te="readystatechange";Array.isArray(te)||(te&&(Qr[0]=te.toString()),te=Qr);for(let ue=0;ue<te.length;ue++){const Ce=Me(w,te[ue],x||v.handleEvent,!1,v.h||v);if(!Ce)break;v.g[Ce.key]=Ce}v=c.J?G(c.J):{},c.u?(c.v||(c.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,v)):(c.v="GET",c.g.ea(c.B,c.v,null,v)),Ie(),uu(c.i,c.v,c.B,c.l,c.S,c.u)}or.prototype.ba=function(c){c=c.target;const v=this.O;v&&si(c)==3?v.j():this.Y(c)},or.prototype.Y=function(c){try{if(c==this.g)e:{const nt=si(this.g),cn=this.g.ya(),Rt=this.g.ca();if(!(nt<3)&&(nt!=3||this.g&&(this.h.h||this.g.la()||un(this.g)))){this.K||nt!=4||cn==7||(cn==8||Rt<=0?Ie(3):Ie(2)),Rr(this);var v=this.g.ca();this.X=v;var w=cu(this);if(this.o=v==200,ll(this.i,this.v,this.B,this.l,this.S,nt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var x,te=this.g;if((x=te.g?te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(x)){var ue=x;break t}}ue=null}if(c=ue)$n(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Cn(this,c);else{this.o=!1,this.m=3,sn(12),bn(this),xt(this);break e}}if(this.R){c=!0;let jt;for(;!this.K&&this.C<w.length;)if(jt=Ao(this,w),jt==Qt){nt==4&&(this.m=4,sn(14),c=!1),$n(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==Lt){this.m=4,sn(15),$n(this.i,this.l,w,"[Invalid Chunk]"),c=!1;break}else $n(this.i,this.l,jt,null),Cn(this,jt);if(Wr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||w.length!=0||this.h.h||(this.m=1,sn(16),c=!1),this.o=this.o&&c,!c)$n(this.i,this.l,w,"[Invalid Chunked Response]"),bn(this),xt(this);else if(w.length>0&&!this.W){this.W=!0;var Ce=this.j;Ce.g==this&&Ce.aa&&!Ce.P&&(Ce.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),us(Ce),Ce.P=!0,sn(11))}}else $n(this.i,this.l,w,null),Cn(this,w);nt==4&&bn(this),this.o&&!this.K&&(nt==4?Xi(this.j,this):(this.o=!1,Hn(this)))}else Yi(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,sn(12)):(this.m=0,sn(13)),bn(this),xt(this)}}}catch{}finally{}};function cu(c){if(!Wr(c))return c.g.la();const v=un(c.g);if(v==="")return"";let w="";const x=v.length,te=si(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return bn(c),xt(c),"";c.h.i=new d.TextDecoder}for(let ue=0;ue<x;ue++)c.h.h=!0,w+=c.h.i.decode(v[ue],{stream:!(te&&ue==x-1)});return v.length=0,c.h.g+=w,c.C=0,c.h.g}function Wr(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Ao(c,v){var w=c.C,x=v.indexOf(`
`,w);return x==-1?Qt:(w=Number(v.substring(w,x)),isNaN(w)?Lt:(x+=1,x+w>v.length?Qt:(v=v.slice(x,x+w),c.C=x+w,v)))}or.prototype.cancel=function(){this.K=!0,bn(this)};function Hn(c){c.T=Date.now()+c.H,Ps(c,c.H)}function Ps(c,v){if(c.D!=null)throw Error("WatchDog timer not null");c.D=$r(b(c.aa,c),v)}function Rr(c){c.D&&(d.clearTimeout(c.D),c.D=null)}or.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Ar(this.i,this.B),this.M!=2&&(Ie(),sn(17)),bn(this),this.m=2,xt(this)):Ps(this,this.T-c)};function xt(c){c.j.I==0||c.K||Xi(c.j,c)}function bn(c){Rr(c);var v=c.O;v&&typeof v.dispose=="function"&&v.dispose(),c.O=null,Xr(c.V),c.g&&(v=c.g,c.g=null,v.abort(),v.dispose())}function Cn(c,v){try{var w=c.j;if(w.I!=0&&(w.g==c||xr(w.h,c))){if(!c.L&&xr(w.h,c)&&w.I==3){try{var x=w.Ba.g.parse(v)}catch{x=null}if(Array.isArray(x)&&x.length==3){var te=x;if(te[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<c.F)Aa(w),wi(w);else break e;Ai(w),sn(18)}}else w.xa=te[1],0<w.xa-w.K&&te[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=$r(b(w.Va,w),6e3));Ir(w.h)<=1&&w.ta&&(w.ta=void 0)}else kr(w,11)}else if((c.L||w.g==c)&&Aa(w),!P(v))for(te=w.Ba.g.parse(v),v=0;v<te.length;v++){let Rt=te[v];const jt=Rt[0];if(!(jt<=w.K))if(w.K=jt,Rt=Rt[1],w.I==2)if(Rt[0]=="c"){w.M=Rt[1],w.ba=Rt[2];const Pr=Rt[3];Pr!=null&&(w.ka=Pr,w.j.info("VER="+w.ka));const Lr=Rt[4];Lr!=null&&(w.za=Lr,w.j.info("SVER="+w.za));const br=Rt[5];br!=null&&typeof br=="number"&&br>0&&(x=1.5*br,w.O=x,w.j.info("backChannelRequestTimeoutMs_="+x)),x=w;const oi=c.g;if(oi){const fs=oi.g?oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fs){var ue=x.h;ue.g||fs.indexOf("spdy")==-1&&fs.indexOf("quic")==-1&&fs.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Zr(ue,ue.h),ue.h=null))}if(x.G){const xa=oi.g?oi.g.getResponseHeader("X-HTTP-Session-Id"):null;xa&&(x.wa=xa,Dt(x.J,x.G,xa))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-c.F,w.j.info("Handshake RTT: "+w.T+"ms")),x=w;var Ce=c;if(x.na=Ia(x,x.L?x.ba:null,x.W),Ce.L){ya(x.h,Ce);var nt=Ce,cn=x.O;cn&&(nt.H=cn),nt.D&&(Rr(nt),Hn(nt)),x.g=Ce}else zs(x);w.i.length>0&&Si(w)}else Rt[0]!="stop"&&Rt[0]!="close"||kr(w,7);else w.I==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?kr(w,7):ls(w):Rt[0]!="noop"&&w.l&&w.l.qa(Rt),w.A=0)}}Ie(4)}catch{}}var an=class{constructor(c,v){this.g=c,this.map=v}};function _i(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ss(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ir(c){return c.h?1:c.g?c.g.size:0}function xr(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function Zr(c,v){c.g?c.g.add(v):c.h=v}function ya(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}_i.prototype.cancel=function(){if(this.i=as(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function as(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const w of c.g.values())v=v.concat(w.G);return v}return X(c.i)}var Co=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(c,v){if(c){c=c.split("&");for(let w=0;w<c.length;w++){const x=c[w].indexOf("=");let te,ue=null;x>=0?(te=c[w].substring(0,x),ue=c[w].substring(x+1)):te=c[w],v(te,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function lr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;c instanceof lr?(this.l=c.l,ln(this,c.j),this.o=c.o,this.g=c.g,Or(this,c.u),this.h=c.h,va(this,cl(c.i)),this.m=c.m):c&&(v=String(c).match(Co))?(this.l=!1,ln(this,v[1]||"",!0),this.o=vt(v[2]||""),this.g=vt(v[3]||"",!0),Or(this,v[4]),this.h=vt(v[5]||"",!0),va(this,v[6]||"",!0),this.m=vt(v[7]||"")):(this.l=!1,this.i=new ri(null,this.l))}lr.prototype.toString=function(){const c=[];var v=this.j;v&&c.push(ei(v,ti,!0),":");var w=this.g;return(w||v=="file")&&(c.push("//"),(v=this.o)&&c.push(ei(v,ti,!0),"@"),c.push(Cr(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&c.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(ei(w,w.charAt(0)=="/"?Ls:_a,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",ei(w,Ro)),c.join("")},lr.prototype.resolve=function(c){const v=on(this);let w=!!c.j;w?ln(v,c.j):w=!!c.o,w?v.o=c.o:w=!!c.g,w?v.g=c.g:w=c.u!=null;var x=c.h;if(w)Or(v,c.u);else if(w=!!c.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var te=v.h.lastIndexOf("/");te!=-1&&(x=v.h.slice(0,te+1)+x)}if(te=x,te==".."||te==".")x="";else if(te.indexOf("./")!=-1||te.indexOf("/.")!=-1){x=te.lastIndexOf("/",0)==0,te=te.split("/");const ue=[];for(let Ce=0;Ce<te.length;){const nt=te[Ce++];nt=="."?x&&Ce==te.length&&ue.push(""):nt==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),x&&Ce==te.length&&ue.push("")):(ue.push(nt),x=!0)}x=ue.join("/")}else x=te}return w?v.h=x:w=c.i.toString()!=="",w?va(v,cl(c.i)):w=!!c.m,w&&(v.m=c.m),v};function on(c){return new lr(c)}function ln(c,v,w){c.j=w?vt(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function Or(c,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);c.u=v}else c.u=null}function va(c,v,w){v instanceof ri?(c.i=v,ii(c.i,c.l)):(w||(v=ei(v,ni)),c.i=new ri(v,c.l))}function Dt(c,v,w){c.i.set(v,w)}function os(c){return Dt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function vt(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ei(c,v,w){return typeof c=="string"?(c=encodeURI(c).replace(v,Rn),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Rn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ti=/[#\/\?@]/g,_a=/[#\?:]/g,Ls=/[#\?]/g,ni=/[#\?@]/g,Ro=/#/g;function ri(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function Jn(c){c.g||(c.g=new Map,c.h=0,c.i&&ot(c.i,function(v,w){c.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}i=ri.prototype,i.add=function(c,v){Jn(this),this.i=null,c=pn(this,c);let w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(v),this.h+=1,this};function ul(c,v){Jn(c),v=pn(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function gt(c,v){return Jn(c),v=pn(c,v),c.g.has(v)}i.forEach=function(c,v){Jn(this),this.g.forEach(function(w,x){w.forEach(function(te){c.call(v,te,x,this)},this)},this)};function ba(c,v){Jn(c);let w=[];if(typeof v=="string")gt(c,v)&&(w=w.concat(c.g.get(pn(c,v))));else for(c=Array.from(c.g.values()),v=0;v<c.length;v++)w=w.concat(c[v]);return w}i.set=function(c,v){return Jn(this),this.i=null,c=pn(this,c),gt(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},i.get=function(c,v){return c?(c=ba(this,c),c.length>0?String(c[0]):v):v};function Ea(c,v,w){ul(c,v),w.length>0&&(c.i=null,c.g.set(pn(c,v),X(w)),c.h+=w.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(let x=0;x<v.length;x++){var w=v[x];const te=Cr(w);w=ba(this,w);for(let ue=0;ue<w.length;ue++){let Ce=te;w[ue]!==""&&(Ce+="="+Cr(w[ue])),c.push(Ce)}}return this.i=c.join("&")};function cl(c){const v=new ri;return v.i=c.i,c.g&&(v.g=new Map(c.g),v.h=c.h),v}function pn(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function ii(c,v){v&&!c.j&&(Jn(c),c.i=null,c.g.forEach(function(w,x){const te=x.toLowerCase();x!=te&&(ul(this,x),Ea(this,te,w))},c)),c.j=v}function ur(c,v){const w=new yr;if(d.Image){const x=new Image;x.onload=R(vr,w,"TestLoadImage: loaded",!0,v,x),x.onerror=R(vr,w,"TestLoadImage: error",!1,v,x),x.onabort=R(vr,w,"TestLoadImage: abort",!1,v,x),x.ontimeout=R(vr,w,"TestLoadImage: timeout",!1,v,x),d.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=c}else v(!1)}function Dr(c,v){const w=new yr,x=new AbortController,te=setTimeout(()=>{x.abort(),vr(w,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:x.signal}).then(ue=>{clearTimeout(te),ue.ok?vr(w,"TestPingServer: ok",!0,v):vr(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(te),vr(w,"TestPingServer: error",!1,v)})}function vr(c,v,w,x,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),x(w)}catch{}}function Hi(){this.g=new ga}function Ut(c){this.i=c.Sb||null,this.h=c.ab||!1}I(Ut,Ns),Ut.prototype.g=function(){return new Fn(this.i,this.h)};function Fn(c,v){dn.call(this),this.H=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(Fn,dn),i=Fn.prototype,i.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=v,this.readyState=1,_r(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(v.body=c),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},i.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,_r(this)),this.g&&(this.readyState=3,_r(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;bi(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function bi(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}i.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?Nr(this):_r(this),this.readyState==3&&bi(this)}},i.Oa=function(c){this.g&&(this.response=this.responseText=c,Nr(this))},i.Na=function(c){this.g&&(this.response=c,Nr(this))},i.ga=function(){this.g&&Nr(this)};function Nr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,_r(c)}i.setRequestHeader=function(c,v){this.A.append(c,v)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=v.next();return c.join(`\r
`)};function _r(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Fn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function En(c){let v="";return at(c,function(w,x){v+=x,v+=":",v+=w,v+=`\r
`}),v}function Us(c,v,w){e:{for(x in w){var x=!1;break e}x=!0}x||(w=En(w),typeof c=="string"?w!=null&&Cr(w):Dt(c,v,w))}function ht(c){dn.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(ht,dn);var Mr=/^https?$/i,Ta=["POST","PUT"];i=ht.prototype,i.Fa=function(c){this.H=c},i.ea=function(c,v,w,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Zt.g(),this.g.onreadystatechange=k(b(this.Ca,this));try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(ue){Fi(this,ue);return}if(c=w||"",w=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var te in x)w.set(te,x[te]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const ue of x.keys())w.set(ue,x.get(ue));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(w.keys()).find(ue=>ue.toLowerCase()=="content-type"),te=d.FormData&&c instanceof d.FormData,!(Array.prototype.indexOf.call(Ta,v,void 0)>=0)||x||te||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,Ce]of w)this.g.setRequestHeader(ue,Ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(ue){Fi(this,ue)}};function Fi(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.o=5,Ki(c),Ei(c)}function Ki(c){c.A||(c.A=!0,rn(c,"complete"),rn(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,rn(this,"complete"),rn(this,"abort"),Ei(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ei(this,!0)),ht.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Gi(this):this.Xa())},i.Xa=function(){Gi(this)};function Gi(c){if(c.h&&typeof u<"u"){if(c.v&&si(c)==4)setTimeout(c.Ca.bind(c),0);else if(rn(c,"readystatechange"),si(c)==4){c.h=!1;try{const ue=c.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var x;if(x=ue===0){let Ce=String(c.D).match(Co)[1]||null;!Ce&&d.self&&d.self.location&&(Ce=d.self.location.protocol.slice(0,-1)),x=!Mr.test(Ce?Ce.toLowerCase():"")}w=x}if(w)rn(c,"complete"),rn(c,"success");else{c.o=6;try{var te=si(c)>2?c.g.statusText:""}catch{te=""}c.l=te+" ["+c.ca()+"]",Ki(c)}}finally{Ei(c)}}}}function Ei(c,v){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const w=c.g;c.g=null,v||rn(c,"ready");try{w.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function si(c){return c.g?c.g.readyState:0}i.ca=function(){try{return si(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),Ds(v)}};function un(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Yi(c){const v={};c=(c.g&&si(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<c.length;x++){if(P(c[x]))continue;var w=Vs(c[x]);const te=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ue=v[te]||[];v[te]=ue,ue.push(w)}ft(v,function(x){return x.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ti(c,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||v}function ai(c){this.za=0,this.i=[],this.j=new yr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ti("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ti("baseRetryDelayMs",5e3,c),this.Za=Ti("retryDelaySeedMs",1e4,c),this.Ta=Ti("forwardChannelMaxRetries",2,c),this.va=Ti("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new _i(c&&c.concurrentRequestLimit),this.Ba=new Hi,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ai.prototype,i.ka=8,i.I=1,i.connect=function(c,v,w,x){sn(0),this.W=c,this.H=v||{},w&&x!==void 0&&(this.H.OSID=w,this.H.OAID=x),this.F=this.X,this.J=Ia(this,null,this.W),Si(this)};function ls(c){if(wa(c),c.I==3){var v=c.V++,w=on(c.J);if(Dt(w,"SID",c.M),Dt(w,"RID",v),Dt(w,"TYPE","terminate"),Qi(c,w),v=new or(c,c.j,v),v.M=2,v.A=os(on(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&d.Image&&(new Image().src=v.A,w=!0),w||(v.g=Tn(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Hn(v)}Ra(c)}function wi(c){c.g&&(us(c),c.g.cancel(),c.g=null)}function wa(c){wi(c),c.v&&(d.clearTimeout(c.v),c.v=null),Aa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&d.clearTimeout(c.m),c.m=null)}function Si(c){if(!ss(c.h)&&!c.m){c.m=!0;var v=c.Ea;yt||N(),Ge||(yt(),Ge=!0),D.add(v,c),c.D=0}}function Sa(c,v){return Ir(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=v.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=$r(b(c.Ea,c,v),Ca(c,c.D)),c.D++,!0)}i.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const te=new or(this,this.j,c);let ue=this.o;if(this.U&&(ue?(ue=G(ue),xe(ue,this.U)):ue=this.U),this.u!==null||this.R||(te.J=ue,ue=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var x=this.i[w];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(v+=x,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=Io(this,te,v),w=on(this.J),Dt(w,"RID",c),Dt(w,"CVER",22),this.G&&Dt(w,"X-HTTP-Session-Id",this.G),Qi(this,w),ue&&(this.R?v="headers="+Cr(En(ue))+"&"+v:this.u&&Us(w,this.u,ue)),Zr(this.h,te),this.Ra&&Dt(w,"TYPE","init"),this.S?(Dt(w,"$req",v),Dt(w,"SID","null"),te.U=!0,Ln(te,w,null)):Ln(te,w,v),this.I=2}}else this.I==3&&(c?js(this,c):this.i.length==0||ss(this.h)||js(this))};function js(c,v){var w;v?w=v.l:w=c.V++;const x=on(c.J);Dt(x,"SID",c.M),Dt(x,"RID",w),Dt(x,"AID",c.K),Qi(c,x),c.u&&c.o&&Us(x,c.u,c.o),w=new or(c,c.j,w,c.D+1),c.u===null&&(w.J=c.o),v&&(c.i=v.G.concat(c.i)),v=Io(c,w,1e3),w.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Zr(c.h,w),Ln(w,x,v)}function Qi(c,v){c.H&&at(c.H,function(w,x){Dt(v,x,w)}),c.l&&at({},function(w,x){Dt(v,x,w)})}function Io(c,v,w){w=Math.min(c.i.length,w);const x=c.l?b(c.l.Ka,c.l,c):null;e:{var te=c.i;let nt=-1;for(;;){const cn=["count="+w];nt==-1?w>0?(nt=te[0].g,cn.push("ofs="+nt)):nt=0:cn.push("ofs="+nt);let Rt=!0;for(let jt=0;jt<w;jt++){var ue=te[jt].g;const Pr=te[jt].map;if(ue-=nt,ue<0)nt=Math.max(0,te[jt].g-100),Rt=!1;else try{ue="req"+ue+"_"||"";try{var Ce=Pr instanceof Map?Pr:Object.entries(Pr);for(const[Lr,br]of Ce){let oi=br;y(br)&&(oi=gi(br)),cn.push(ue+Lr+"="+encodeURIComponent(oi))}}catch(Lr){throw cn.push(ue+"type="+encodeURIComponent("_badmap")),Lr}}catch{x&&x(Pr)}}if(Rt){Ce=cn.join("&");break e}}Ce=void 0}return c=c.i.splice(0,w),v.G=c,Ce}function zs(c){if(!c.g&&!c.v){c.Y=1;var v=c.Da;yt||N(),Ge||(yt(),Ge=!0),D.add(v,c),c.A=0}}function Ai(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=$r(b(c.Da,c),Ca(c,c.A)),c.A++,!0)}i.Da=function(){if(this.v=null,xo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=$r(b(this.Wa,this),c)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,sn(10),wi(this),xo(this))};function us(c){c.B!=null&&(d.clearTimeout(c.B),c.B=null)}function xo(c){c.g=new or(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var v=on(c.na);Dt(v,"RID","rpc"),Dt(v,"SID",c.M),Dt(v,"AID",c.K),Dt(v,"CI",c.F?"0":"1"),!c.F&&c.ia&&Dt(v,"TO",c.ia),Dt(v,"TYPE","xmlhttp"),Qi(c,v),c.u&&c.o&&Us(v,c.u,c.o),c.O&&(c.g.H=c.O);var w=c.g;c=c.ba,w.M=1,w.A=os(on(v)),w.u=null,w.R=!0,qi(w,c)}i.Va=function(){this.C!=null&&(this.C=null,wi(this),Ai(this),sn(19))};function Aa(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Xi(c,v){var w=null;if(c.g==v){Aa(c),us(c),c.g=null;var x=2}else if(xr(c.h,v))w=v.G,ya(c.h,v),x=1;else return;if(c.I!=0){if(v.o)if(x==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var te=c.D;x=wr(),rn(x,new Sr(x,w)),Si(c)}else zs(c);else if(te=v.m,te==3||te==0&&v.X>0||!(x==1&&Sa(c,v)||x==2&&Ai(c)))switch(w&&w.length>0&&(v=c.h,v.i=v.i.concat(w)),te){case 1:kr(c,5);break;case 4:kr(c,10);break;case 3:kr(c,6);break;default:kr(c,2)}}}function Ca(c,v){let w=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(w*=2),w*v}function kr(c,v){if(c.j.info("Error code "+v),v==2){var w=b(c.bb,c),x=c.Ua;const te=!x;x=new lr(x||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ln(x,"https"),os(x),te?ur(x.toString(),w):Dr(x.toString(),w)}else sn(2);c.I=0,c.l&&c.l.pa(v),Ra(c),wa(c)}i.bb=function(c){c?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function Ra(c){if(c.I=0,c.ja=[],c.l){const v=as(c.h);(v.length!=0||c.i.length!=0)&&(re(c.ja,v),re(c.ja,c.i),c.h.i.length=0,X(c.i),c.i.length=0),c.l.oa()}}function Ia(c,v,w){var x=w instanceof lr?on(w):new lr(w);if(x.g!="")v&&(x.g=v+"."+x.g),Or(x,x.u);else{var te=d.location;x=te.protocol,v=v?v+"."+te.hostname:te.hostname,te=+te.port;const ue=new lr(null);x&&ln(ue,x),v&&(ue.g=v),te&&Or(ue,te),w&&(ue.h=w),x=ue}return w=c.G,v=c.wa,w&&v&&Dt(x,w,v),Dt(x,"VER",c.ka),Qi(c,x),x}function Tn(c,v,w){if(v&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Aa&&!c.ma?new ht(new Ut({ab:w})):new ht(c.ma),v.Fa(c.L),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function cs(){}i=cs.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Vr(){}Vr.prototype.g=function(c,v){return new Kn(c,v)};function Kn(c,v){dn.call(this),this.g=new ai(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(c?c["X-WebChannel-Client-Profile"]=v.sa:c={"X-WebChannel-Client-Profile":v.sa}),this.g.U=c,(c=v&&v.Qb)&&!P(c)&&(this.g.u=c),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!P(v)&&(this.g.G=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new Ci(this)}I(Kn,dn),Kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){ls(this.g)},Kn.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.v&&(w={},w.__data__=gi(c),c=w);v.i.push(new an(v.Ya++,c)),v.I==3&&Si(v)},Kn.prototype.N=function(){this.g.l=null,delete this.j,ls(this.g),delete this.g,Kn.Z.N.call(this)};function Bs(c){vn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const w in v){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}I(Bs,vn);function Oo(){_n.call(this),this.status=1}I(Oo,_n);function Ci(c){this.g=c}I(Ci,cs),Ci.prototype.ra=function(){rn(this.g,"a")},Ci.prototype.qa=function(c){rn(this.g,new Bs(c))},Ci.prototype.pa=function(c){rn(this.g,new Oo)},Ci.prototype.oa=function(){rn(this.g,"b")},Vr.prototype.createWebChannel=Vr.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,xE=function(){return new Vr},IE=function(){return wr()},RE=Ne,im={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vi.NO_ERROR=0,vi.TIMEOUT=8,vi.HTTP_ERROR=6,Xf=vi,Vt.COMPLETE="complete",CE=Vt,yi.EventType=ar,ar.OPEN="a",ar.CLOSE="b",ar.ERROR="c",ar.MESSAGE="d",dn.prototype.listen=dn.prototype.J,Qu=yi,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,AE=ht}).apply(typeof Pf<"u"?Pf:typeof self<"u"?self:typeof window<"u"?window:{});const w0="@firebase/firestore",S0="4.9.2";class dr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dr.UNAUTHENTICATED=new dr(null),dr.GOOGLE_CREDENTIALS=new dr("google-credentials-uid"),dr.FIRST_PARTY=new dr("first-party-uid"),dr.MOCK_USER=new dr("mock-user");let su="12.3.0";const tl=new Sm("@firebase/firestore");function jl(){return tl.logLevel}function Le(i,...e){if(tl.logLevel<=wt.DEBUG){const n=e.map(Lm);tl.debug(`Firestore (${su}): ${i}`,...n)}}function da(i,...e){if(tl.logLevel<=wt.ERROR){const n=e.map(Lm);tl.error(`Firestore (${su}): ${i}`,...n)}}function $l(i,...e){if(tl.logLevel<=wt.WARN){const n=e.map(Lm);tl.warn(`Firestore (${su}): ${i}`,...n)}}function Lm(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function $e(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,OE(i,s,n)}function OE(i,e,n){let s=`FIRESTORE (${su}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw da(s),new Error(s)}function Pt(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||OE(e,o,s)}function st(i,e){return i}const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends ma{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class po{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class DE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(dr.UNAUTHENTICATED)))}shutdown(){}}class yx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class vx{constructor(e){this.t=e,this.currentUser=dr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pt(this.o===void 0,42304);let s=this.i;const o=_=>this.i!==s?(s=this.i,n(_)):Promise.resolve();let u=new po;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new po,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const _=u;e.enqueueRetryable((async()=>{await _.promise,await o(this.currentUser)}))},y=_=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((_=>y(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?y(_):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new po)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Pt(typeof s.accessToken=="string",31837,{l:s}),new DE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pt(e===null||typeof e=="string",2055,{h:e}),new dr(e)}}class _x{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=dr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bx{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new _x(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(dr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class A0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ex{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Pt(this.o===void 0,3512);const s=u=>{u.error!=null&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Le("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new A0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Pt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new A0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Tx(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Um{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=Tx(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function St(i,e){return i<e?-1:i>e?1:0}function sm(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return qp(o)===qp(u)?St(o,u):qp(o)?1:-1}return St(i.length,e.length)}const wx=55296,Sx=57343;function qp(i){const e=i.charCodeAt(0);return e>=wx&&e<=Sx}function Jl(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const C0="__name__";class vs{constructor(e,n,s){n===void 0?n=0:n>e.length&&$e(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&$e(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return vs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vs?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=vs.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return St(e.length,n.length)}static compareSegments(e,n){const s=vs.isNumericId(e),o=vs.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?vs.extractNumericId(e).compare(vs.extractNumericId(n)):sm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ho.fromString(e.substring(4,e.length-2))}}class fn extends vs{construct(e,n,s){return new fn(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new He(Ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new fn(n)}static emptyPath(){return new fn([])}}const Ax=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ir extends vs{construct(e,n,s){return new ir(e,n,s)}static isValidIdentifier(e){return Ax.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ir.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===C0}static keyField(){return new ir([C0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new He(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const y=e[o];if(y==="\\"){if(o+1===e.length)throw new He(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[o+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new He(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=_,o+=2}else y==="`"?(d=!d,o++):y!=="."||d?(s+=y,o++):(u(),o++)}if(u(),d)throw new He(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ir(n)}static emptyPath(){return new ir([])}}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(fn.fromString(e))}static fromName(e){return new Ye(fn.fromString(e).popFirst(5))}static empty(){return new Ye(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new fn(e.slice()))}}function Cx(i,e,n){if(!n)throw new He(Ee.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Rx(i,e,n,s){if(e===!0&&s===!0)throw new He(Ee.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function R0(i){if(!Ye.isDocumentKey(i))throw new He(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function NE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function jm(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":$e(12329,{type:typeof i})}function fc(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new He(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jm(i);throw new He(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Vn(i,e){const n={typeString:i};return e&&(n.value=e),n}function Cc(i,e){if(!NE(i))throw new He(Ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const d=i[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new He(Ee.INVALID_ARGUMENT,n);return!0}const I0=-62135596800,x0=1e6;class Wt{static now(){return Wt.fromMillis(Date.now())}static fromDate(e){return Wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*x0);return new Wt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new He(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new He(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<I0)throw new He(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/x0}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cc(e,Wt._jsonSchema))return new Wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-I0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Wt._jsonSchemaVersion="firestore/timestamp/1.0",Wt._jsonSchema={type:Vn("string",Wt._jsonSchemaVersion),seconds:Vn("number"),nanoseconds:Vn("number")};class rt{static fromTimestamp(e){return new rt(e)}static min(){return new rt(new Wt(0,0))}static max(){return new rt(new Wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const hc=-1;function Ix(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=rt.fromTimestamp(s===1e9?new Wt(n+1,0):new Wt(n,s));return new mo(o,Ye.empty(),e)}function xx(i){return new mo(i.readTime,i.key,hc)}class mo{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new mo(rt.min(),Ye.empty(),hc)}static max(){return new mo(rt.max(),Ye.empty(),hc)}}function Ox(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Ye.comparator(i.documentKey,e.documentKey),n!==0?n:St(i.largestBatchId,e.largestBatchId))}const Dx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Nx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function au(i){if(i.code!==Ee.FAILED_PRECONDITION||i.message!==Dx)throw i;Le("LocalStore","Unexpectedly lost primary lease")}class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ve(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ve?n:ve.resolve(n)}catch(n){return ve.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ve.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ve.reject(n)}static resolve(e){return new ve(((n,s)=>{n(e)}))}static reject(e){return new ve(((n,s)=>{s(e)}))}static waitFor(e){return new ve(((n,s)=>{let o=0,u=0,d=!1;e.forEach((y=>{++o,y.next((()=>{++u,d&&u===o&&n()}),(_=>s(_)))})),d=!0,u===o&&n()}))}static or(e){let n=ve.resolve(!1);for(const s of e)n=n.next((o=>o?ve.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ve(((s,o)=>{const u=e.length,d=new Array(u);let y=0;for(let _=0;_<u;_++){const b=_;n(e[b]).next((R=>{d[b]=R,++y,y===u&&s(d)}),(R=>o(R)))}}))}static doWhile(e,n){return new ve(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function Mx(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ou(i){return i.name==="IndexedDbTransactionError"}class xh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xh.ce=-1;const zm=-1;function Oh(i){return i==null}function fh(i){return i===0&&1/i==-1/0}function kx(i){return typeof i=="number"&&Number.isInteger(i)&&!fh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const ME="";function Vx(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=O0(e)),e=Px(i.get(n),e);return O0(e)}function Px(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case ME:n+="";break;default:n+=u}}return n}function O0(i){return i+ME+""}function D0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function rl(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function kE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class hn{constructor(e,n){this.comparator=e,this.root=n||rr.EMPTY}insert(e,n){return new hn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(e){return new hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lf(this.root,e,this.comparator,!0)}}class Lf{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rr{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??rr.RED,this.left=o??rr.EMPTY,this.right=u??rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new rr(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return rr.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $e(27949);return e+(this.isRed()?0:1)}}rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1;rr.EMPTY=new class{constructor(){this.size=0}get key(){throw $e(57766)}get value(){throw $e(16141)}get color(){throw $e(16727)}get left(){throw $e(29726)}get right(){throw $e(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new rr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bn{constructor(e){this.comparator=e,this.data=new hn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new N0(this.data.getIterator())}getIteratorFrom(e){return new N0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Bn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Bn(this.comparator);return n.data=e,n}}class N0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class es{constructor(e){this.fields=e,e.sort(ir.comparator)}static empty(){return new es([])}unionWith(e){let n=new Bn(ir.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new es(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class VE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class sr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new VE("Invalid base64 string: "+u):u}})(e);return new sr(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new sr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sr.EMPTY_BYTE_STRING=new sr("");const Lx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function go(i){if(Pt(!!i,39018),typeof i=="string"){let e=0;const n=Lx.exec(i);if(Pt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:An(i.seconds),nanos:An(i.nanos)}}function An(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function yo(i){return typeof i=="string"?sr.fromBase64String(i):sr.fromUint8Array(i)}const PE="server_timestamp",LE="__type__",UE="__previous_value__",jE="__local_write_time__";function Bm(i){return(i?.mapValue?.fields||{})[LE]?.stringValue===PE}function Dh(i){const e=i.mapValue.fields[UE];return Bm(e)?Dh(e):e}function dc(i){const e=go(i.mapValue.fields[jE].timestampValue);return new Wt(e.seconds,e.nanos)}class Ux{constructor(e,n,s,o,u,d,y,_,b,R){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=y,this.longPollingOptions=_,this.useFetchStreams=b,this.isUsingEmulator=R}}const hh="(default)";class pc{constructor(e,n){this.projectId=e,this.database=n||hh}static empty(){return new pc("","")}get isDefaultDatabase(){return this.database===hh}isEqual(e){return e instanceof pc&&e.projectId===this.projectId&&e.database===this.database}}const zE="__type__",jx="__max__",Uf={mapValue:{}},BE="__vector__",dh="value";function vo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Bm(i)?4:Bx(i)?9007199254740991:zx(i)?10:11:$e(28295,{value:i})}function Rs(i,e){if(i===e)return!0;const n=vo(i);if(n!==vo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return dc(i).isEqual(dc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=go(o.timestampValue),y=go(u.timestampValue);return d.seconds===y.seconds&&d.nanos===y.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return yo(o.bytesValue).isEqual(yo(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return An(o.geoPointValue.latitude)===An(u.geoPointValue.latitude)&&An(o.geoPointValue.longitude)===An(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return An(o.integerValue)===An(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=An(o.doubleValue),y=An(u.doubleValue);return d===y?fh(d)===fh(y):isNaN(d)&&isNaN(y)}return!1})(i,e);case 9:return Jl(i.arrayValue.values||[],e.arrayValue.values||[],Rs);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},y=u.mapValue.fields||{};if(D0(d)!==D0(y))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(y[_]===void 0||!Rs(d[_],y[_])))return!1;return!0})(i,e);default:return $e(52216,{left:i})}}function mc(i,e){return(i.values||[]).find((n=>Rs(n,e)))!==void 0}function Wl(i,e){if(i===e)return 0;const n=vo(i),s=vo(e);if(n!==s)return St(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return St(i.booleanValue,e.booleanValue);case 2:return(function(u,d){const y=An(u.integerValue||u.doubleValue),_=An(d.integerValue||d.doubleValue);return y<_?-1:y>_?1:y===_?0:isNaN(y)?isNaN(_)?0:-1:1})(i,e);case 3:return M0(i.timestampValue,e.timestampValue);case 4:return M0(dc(i),dc(e));case 5:return sm(i.stringValue,e.stringValue);case 6:return(function(u,d){const y=yo(u),_=yo(d);return y.compareTo(_)})(i.bytesValue,e.bytesValue);case 7:return(function(u,d){const y=u.split("/"),_=d.split("/");for(let b=0;b<y.length&&b<_.length;b++){const R=St(y[b],_[b]);if(R!==0)return R}return St(y.length,_.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,d){const y=St(An(u.latitude),An(d.latitude));return y!==0?y:St(An(u.longitude),An(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return k0(i.arrayValue,e.arrayValue);case 10:return(function(u,d){const y=u.fields||{},_=d.fields||{},b=y[dh]?.arrayValue,R=_[dh]?.arrayValue,I=St(b?.values?.length||0,R?.values?.length||0);return I!==0?I:k0(b,R)})(i.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Uf.mapValue&&d===Uf.mapValue)return 0;if(u===Uf.mapValue)return 1;if(d===Uf.mapValue)return-1;const y=u.fields||{},_=Object.keys(y),b=d.fields||{},R=Object.keys(b);_.sort(),R.sort();for(let I=0;I<_.length&&I<R.length;++I){const k=sm(_[I],R[I]);if(k!==0)return k;const X=Wl(y[_[I]],b[R[I]]);if(X!==0)return X}return St(_.length,R.length)})(i.mapValue,e.mapValue);default:throw $e(23264,{he:n})}}function M0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return St(i,e);const n=go(i),s=go(e),o=St(n.seconds,s.seconds);return o!==0?o:St(n.nanos,s.nanos)}function k0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Wl(n[o],s[o]);if(u)return u}return St(n.length,s.length)}function Zl(i){return am(i)}function am(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=go(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return yo(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Ye.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=am(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${am(n.fields[d])}`;return o+"}"})(i.mapValue):$e(61005,{value:i})}function $f(i){switch(vo(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dh(i);return e?16+$f(e):16;case 5:return 2*i.stringValue.length;case 6:return yo(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+$f(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return rl(s.fields,((u,d)=>{o+=u.length+$f(d)})),o})(i.mapValue);default:throw $e(13486,{value:i})}}function om(i){return!!i&&"integerValue"in i}function qm(i){return!!i&&"arrayValue"in i}function V0(i){return!!i&&"nullValue"in i}function P0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Jf(i){return!!i&&"mapValue"in i}function zx(i){return(i?.mapValue?.fields||{})[zE]?.stringValue===BE}function tc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return rl(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=tc(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tc(i.arrayValue.values[n]);return e}return{...i}}function Bx(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===jx}class Li{constructor(e){this.value=e}static empty(){return new Li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Jf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tc(n)}setAll(e){let n=ir.emptyPath(),s={},o=[];e.forEach(((d,y)=>{if(!n.isImmediateParentOf(y)){const _=this.getFieldsMap(n);this.applyChanges(_,s,o),s={},o=[],n=y.popLast()}d?s[y.lastSegment()]=tc(d):o.push(y.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Jf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Jf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){rl(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Li(tc(this.value))}}function qE(i){const e=[];return rl(i.fields,((n,s)=>{const o=new ir([n]);if(Jf(s)){const u=qE(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new es(e)}class pr{constructor(e,n,s,o,u,d,y){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=y}static newInvalidDocument(e){return new pr(e,0,rt.min(),rt.min(),rt.min(),Li.empty(),0)}static newFoundDocument(e,n,s,o){return new pr(e,1,n,rt.min(),s,o,0)}static newNoDocument(e,n){return new pr(e,2,n,rt.min(),rt.min(),Li.empty(),0)}static newUnknownDocument(e,n){return new pr(e,3,n,rt.min(),rt.min(),Li.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ph{constructor(e,n){this.position=e,this.inclusive=n}}function L0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],d=i.position[o];if(u.field.isKeyField()?s=Ye.comparator(Ye.fromName(d.referenceValue),n.key):s=Wl(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function U0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Rs(i.position[n],e.position[n]))return!1;return!0}class mh{constructor(e,n="asc"){this.field=e,this.dir=n}}function qx(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class HE{}class zn extends HE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new Fx(e,n,s):n==="array-contains"?new Yx(e,s):n==="in"?new Qx(e,s):n==="not-in"?new Xx(e,s):n==="array-contains-any"?new $x(e,s):new zn(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new Kx(e,s):new Gx(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wl(n,this.value)):n!==null&&vo(this.value)===vo(n)&&this.matchesComparison(Wl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Is extends HE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Is(e,n)}matches(e){return FE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function FE(i){return i.op==="and"}function KE(i){return Hx(i)&&FE(i)}function Hx(i){for(const e of i.filters)if(e instanceof Is)return!1;return!0}function lm(i){if(i instanceof zn)return i.field.canonicalString()+i.op.toString()+Zl(i.value);if(KE(i))return i.filters.map((e=>lm(e))).join(",");{const e=i.filters.map((n=>lm(n))).join(",");return`${i.op}(${e})`}}function GE(i,e){return i instanceof zn?(function(s,o){return o instanceof zn&&s.op===o.op&&s.field.isEqual(o.field)&&Rs(s.value,o.value)})(i,e):i instanceof Is?(function(s,o){return o instanceof Is&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,d,y)=>u&&GE(d,o.filters[y])),!0):!1})(i,e):void $e(19439)}function YE(i){return i instanceof zn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Zl(n.value)}`})(i):i instanceof Is?(function(n){return n.op.toString()+" {"+n.getFilters().map(YE).join(" ,")+"}"})(i):"Filter"}class Fx extends zn{constructor(e,n,s){super(e,n,s),this.key=Ye.fromName(s.referenceValue)}matches(e){const n=Ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class Kx extends zn{constructor(e,n){super(e,"in",n),this.keys=QE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Gx extends zn{constructor(e,n){super(e,"not-in",n),this.keys=QE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function QE(i,e){return(e.arrayValue?.values||[]).map((n=>Ye.fromName(n.referenceValue)))}class Yx extends zn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qm(n)&&mc(n.arrayValue,this.value)}}class Qx extends zn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mc(this.value.arrayValue,n)}}class Xx extends zn{constructor(e,n){super(e,"not-in",n)}matches(e){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!mc(this.value.arrayValue,n)}}class $x extends zn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>mc(this.value.arrayValue,s)))}}class Jx{constructor(e,n=null,s=[],o=[],u=null,d=null,y=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=y,this.Te=null}}function j0(i,e=null,n=[],s=[],o=null,u=null,d=null){return new Jx(i,e,n,s,o,u,d)}function Hm(i){const e=st(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>lm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Oh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Zl(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Zl(s))).join(",")),e.Te=n}return e.Te}function Fm(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!qx(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!GE(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!U0(i.startAt,e.startAt)&&U0(i.endAt,e.endAt)}function um(i){return Ye.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Nh{constructor(e,n=null,s=[],o=[],u=null,d="F",y=null,_=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=y,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Wx(i,e,n,s,o,u,d,y){return new Nh(i,e,n,s,o,u,d,y)}function Km(i){return new Nh(i)}function z0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Zx(i){return i.collectionGroup!==null}function nc(i){const e=st(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let y=new Bn(ir.comparator);return d.filters.forEach((_=>{_.getFlattenedFilters().forEach((b=>{b.isInequality()&&(y=y.add(b.field))}))})),y})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new mh(u,s))})),n.has(ir.keyField().canonicalString())||e.Ie.push(new mh(ir.keyField(),s))}return e.Ie}function Ts(i){const e=st(i);return e.Ee||(e.Ee=e2(e,nc(i))),e.Ee}function e2(i,e){if(i.limitType==="F")return j0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new mh(o.field,u)}));const n=i.endAt?new ph(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new ph(i.startAt.position,i.startAt.inclusive):null;return j0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function cm(i,e,n){return new Nh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Mh(i,e){return Fm(Ts(i),Ts(e))&&i.limitType===e.limitType}function XE(i){return`${Hm(Ts(i))}|lt:${i.limitType}`}function zl(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>YE(o))).join(", ")}]`),Oh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Zl(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Zl(o))).join(",")),`Target(${s})`})(Ts(i))}; limitType=${i.limitType})`}function kh(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Ye.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of nc(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(d,y,_){const b=L0(d,y,_);return d.inclusive?b<=0:b<0})(s.startAt,nc(s),o)||s.endAt&&!(function(d,y,_){const b=L0(d,y,_);return d.inclusive?b>=0:b>0})(s.endAt,nc(s),o))})(i,e)}function t2(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function $E(i){return(e,n)=>{let s=!1;for(const o of nc(i)){const u=n2(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function n2(i,e,n){const s=i.field.isKeyField()?Ye.comparator(e.key,n.key):(function(u,d,y){const _=d.data.field(u),b=y.data.field(u);return _!==null&&b!==null?Wl(_,b):$e(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return $e(19790,{direction:i.dir})}}class il{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){rl(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return kE(this.inner)}size(){return this.innerSize}}const r2=new hn(Ye.comparator);function pa(){return r2}const JE=new hn(Ye.comparator);function Xu(...i){let e=JE;for(const n of i)e=e.insert(n.key,n);return e}function WE(i){let e=JE;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Qo(){return rc()}function ZE(){return rc()}function rc(){return new il((i=>i.toString()),((i,e)=>i.isEqual(e)))}const i2=new hn(Ye.comparator),s2=new Bn(Ye.comparator);function At(...i){let e=s2;for(const n of i)e=e.add(n);return e}const a2=new Bn(St);function o2(){return a2}function Gm(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fh(e)?"-0":e}}function eT(i){return{integerValue:""+i}}function l2(i,e){return kx(e)?eT(e):Gm(i,e)}class Vh{constructor(){this._=void 0}}function u2(i,e,n){return i instanceof gh?(function(o,u){const d={fields:{[LE]:{stringValue:PE},[jE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Bm(u)&&(u=Dh(u)),u&&(d.fields[UE]=u),{mapValue:d}})(n,e):i instanceof gc?nT(i,e):i instanceof yc?rT(i,e):(function(o,u){const d=tT(o,u),y=B0(d)+B0(o.Ae);return om(d)&&om(o.Ae)?eT(y):Gm(o.serializer,y)})(i,e)}function c2(i,e,n){return i instanceof gc?nT(i,e):i instanceof yc?rT(i,e):n}function tT(i,e){return i instanceof yh?(function(s){return om(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class gh extends Vh{}class gc extends Vh{constructor(e){super(),this.elements=e}}function nT(i,e){const n=iT(e);for(const s of i.elements)n.some((o=>Rs(o,s)))||n.push(s);return{arrayValue:{values:n}}}class yc extends Vh{constructor(e){super(),this.elements=e}}function rT(i,e){let n=iT(e);for(const s of i.elements)n=n.filter((o=>!Rs(o,s)));return{arrayValue:{values:n}}}class yh extends Vh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function B0(i){return An(i.integerValue||i.doubleValue)}function iT(i){return qm(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function f2(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof gc&&o instanceof gc||s instanceof yc&&o instanceof yc?Jl(s.elements,o.elements,Rs):s instanceof yh&&o instanceof yh?Rs(s.Ae,o.Ae):s instanceof gh&&o instanceof gh})(i.transform,e.transform)}class h2{constructor(e,n){this.version=e,this.transformResults=n}}class ua{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ua}static exists(e){return new ua(void 0,e)}static updateTime(e){return new ua(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wf(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Ph{}function sT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new oT(i.key,ua.none()):new Rc(i.key,i.data,ua.none());{const n=i.data,s=Li.empty();let o=new Bn(ir.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new sl(i.key,s,new es(o.toArray()),ua.none())}}function d2(i,e,n){i instanceof Rc?(function(o,u,d){const y=o.value.clone(),_=H0(o.fieldTransforms,u,d.transformResults);y.setAll(_),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(i,e,n):i instanceof sl?(function(o,u,d){if(!Wf(o.precondition,u))return void u.convertToUnknownDocument(d.version);const y=H0(o.fieldTransforms,u,d.transformResults),_=u.data;_.setAll(aT(o)),_.setAll(y),u.convertToFoundDocument(d.version,_).setHasCommittedMutations()})(i,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function ic(i,e,n,s){return i instanceof Rc?(function(u,d,y,_){if(!Wf(u.precondition,d))return y;const b=u.value.clone(),R=F0(u.fieldTransforms,_,d);return b.setAll(R),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),null})(i,e,n,s):i instanceof sl?(function(u,d,y,_){if(!Wf(u.precondition,d))return y;const b=F0(u.fieldTransforms,_,d),R=d.data;return R.setAll(aT(u)),R.setAll(b),d.convertToFoundDocument(d.version,R).setHasLocalMutations(),y===null?null:y.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((I=>I.field)))})(i,e,n,s):(function(u,d,y){return Wf(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):y})(i,e,n)}function p2(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=tT(s.transform,o||null);u!=null&&(n===null&&(n=Li.empty()),n.set(s.field,u))}return n||null}function q0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Jl(s,o,((u,d)=>f2(u,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Rc extends Ph{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class sl extends Ph{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function aT(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function H0(i,e,n){const s=new Map;Pt(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],d=u.transform,y=e.data.field(u.field);s.set(u.field,c2(d,y,n[o]))}return s}function F0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,d=n.data.field(o.field);s.set(o.field,u2(u,d,e))}return s}class oT extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class m2 extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class g2{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&d2(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ic(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ic(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=ZE();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let y=this.applyToLocalView(d,u.mutatedFields);y=n.has(o.key)?null:y;const _=sT(d,y);_!==null&&s.set(o.key,_),d.isValidDocument()||d.convertToNoDocument(rt.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),At())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,((n,s)=>q0(n,s)))&&Jl(this.baseMutations,e.baseMutations,((n,s)=>q0(n,s)))}}class Ym{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Pt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return i2})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new Ym(e,n,s,o)}}class y2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class v2{constructor(e,n){this.count=e,this.unchangedNames=n}}var kn,Ot;function _2(i){switch(i){case Ee.OK:return $e(64938);case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return $e(15467,{code:i})}}function lT(i){if(i===void 0)return da("GRPC error has no .code"),Ee.UNKNOWN;switch(i){case kn.OK:return Ee.OK;case kn.CANCELLED:return Ee.CANCELLED;case kn.UNKNOWN:return Ee.UNKNOWN;case kn.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case kn.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case kn.INTERNAL:return Ee.INTERNAL;case kn.UNAVAILABLE:return Ee.UNAVAILABLE;case kn.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case kn.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case kn.NOT_FOUND:return Ee.NOT_FOUND;case kn.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case kn.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case kn.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case kn.ABORTED:return Ee.ABORTED;case kn.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case kn.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case kn.DATA_LOSS:return Ee.DATA_LOSS;default:return $e(39323,{code:i})}}(Ot=kn||(kn={}))[Ot.OK=0]="OK",Ot[Ot.CANCELLED=1]="CANCELLED",Ot[Ot.UNKNOWN=2]="UNKNOWN",Ot[Ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ot[Ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ot[Ot.NOT_FOUND=5]="NOT_FOUND",Ot[Ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ot[Ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ot[Ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ot[Ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ot[Ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ot[Ot.ABORTED=10]="ABORTED",Ot[Ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ot[Ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ot[Ot.INTERNAL=13]="INTERNAL",Ot[Ot.UNAVAILABLE=14]="UNAVAILABLE",Ot[Ot.DATA_LOSS=15]="DATA_LOSS";function b2(){return new TextEncoder}const E2=new ho([4294967295,4294967295],0);function K0(i){const e=b2().encode(i),n=new SE;return n.update(e),new Uint8Array(n.digest())}function G0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ho([n,s],0),new ho([o,u],0)]}class Qm{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new $u(`Invalid padding: ${n}`);if(s<0)throw new $u(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new $u(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new $u(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ho.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(ho.fromNumber(s)));return o.compare(E2)===1&&(o=new ho([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=K0(e),[s,o]=G0(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Qm(u,o,n);return s.forEach((y=>d.insert(y))),d}insert(e){if(this.ge===0)return;const n=K0(e),[s,o]=G0(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class $u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Lh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Lh(rt.min(),o,new hn(St),pa(),At())}}class Ic{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Ic(s,n,At(),At(),At())}}class Zf{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class uT{constructor(e,n){this.targetId=e,this.Ce=n}}class cT{constructor(e,n,s=sr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class Y0{constructor(){this.ve=0,this.Fe=Q0(),this.Me=sr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=At(),n=At(),s=At();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:$e(38017,{changeType:u})}})),new Ic(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Q0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class T2{constructor(e){this.Ge=e,this.ze=new Map,this.je=pa(),this.Je=jf(),this.He=jf(),this.Ye=new hn(St)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:$e(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(um(u))if(s===0){const d=new Ye(u.path);this.et(n,d,pr.newNoDocument(d,rt.min()))}else Pt(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const y=this.ut(e),_=y?this.ct(y,e,d):1;if(_!==0){this.it(n);const b=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,b)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,y;try{d=yo(s).toUint8Array()}catch(_){if(_ instanceof VE)return $l("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{y=new Qm(d,o,u)}catch(_){return $l(_ instanceof $u?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return y.ge===0?null:y}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const d=this.Ge.ht(),y=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(y)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const y=this.ot(d);if(y){if(u.current&&um(y.target)){const _=new Ye(y.target.path);this.It(_).has(d)||this.Et(d,_)||this.et(d,_,pr.newNoDocument(_,e))}u.Be&&(n.set(d,u.ke()),u.qe())}}));let s=At();this.He.forEach(((u,d)=>{let y=!0;d.forEachWhile((_=>{const b=this.ot(_);return!b||b.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(s=s.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new Lh(e,n,this.Ye,this.je,s);return this.je=pa(),this.Je=jf(),this.He=jf(),this.Ye=new hn(St),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Y0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Bn(St),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Bn(St),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Le("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Y0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function jf(){return new hn(Ye.comparator)}function Q0(){return new hn(Ye.comparator)}const w2={asc:"ASCENDING",desc:"DESCENDING"},S2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A2={and:"AND",or:"OR"};class C2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fm(i,e){return i.useProto3Json||Oh(e)?e:{value:e}}function vh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function R2(i,e){return vh(i,e.toTimestamp())}function ws(i){return Pt(!!i,49232),rt.fromTimestamp((function(n){const s=go(n);return new Wt(s.seconds,s.nanos)})(i))}function Xm(i,e){return hm(i,e).canonicalString()}function hm(i,e){const n=(function(o){return new fn(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function hT(i){const e=fn.fromString(i);return Pt(yT(e),10190,{key:e.toString()}),e}function dm(i,e){return Xm(i.databaseId,e.path)}function Hp(i,e){const n=hT(e);if(n.get(1)!==i.databaseId.projectId)throw new He(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new He(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ye(pT(n))}function dT(i,e){return Xm(i.databaseId,e)}function I2(i){const e=hT(i);return e.length===4?fn.emptyPath():pT(e)}function pm(i){return new fn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function pT(i){return Pt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function X0(i,e,n){return{name:dm(i,e),fields:n.value.mapValue.fields}}function x2(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:$e(39313,{state:b})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(b,R){return b.useProto3Json?(Pt(R===void 0||typeof R=="string",58123),sr.fromBase64String(R||"")):(Pt(R===void 0||R instanceof Buffer||R instanceof Uint8Array,16193),sr.fromUint8Array(R||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,y=d&&(function(b){const R=b.code===void 0?Ee.UNKNOWN:lT(b.code);return new He(R,b.message||"")})(d);n=new cT(s,o,u,y||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Hp(i,s.document.name),u=ws(s.document.updateTime),d=s.document.createTime?ws(s.document.createTime):rt.min(),y=new Li({mapValue:{fields:s.document.fields}}),_=pr.newFoundDocument(o,u,d,y),b=s.targetIds||[],R=s.removedTargetIds||[];n=new Zf(b,R,_.key,_)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Hp(i,s.document),u=s.readTime?ws(s.readTime):rt.min(),d=pr.newNoDocument(o,u),y=s.removedTargetIds||[];n=new Zf([],y,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Hp(i,s.document),u=s.removedTargetIds||[];n=new Zf([],u,o,null)}else{if(!("filter"in e))return $e(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new v2(o,u),y=s.targetId;n=new uT(y,d)}}return n}function O2(i,e){let n;if(e instanceof Rc)n={update:X0(i,e.key,e.value)};else if(e instanceof oT)n={delete:dm(i,e.key)};else if(e instanceof sl)n={update:X0(i,e.key,e.data),updateMask:j2(e.fieldMask)};else{if(!(e instanceof m2))return $e(16599,{Vt:e.type});n={verify:dm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,d){const y=d.transform;if(y instanceof gh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof gc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof yc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof yh)return{fieldPath:d.field.canonicalString(),increment:y.Ae};throw $e(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:R2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:$e(27497)})(i,e.precondition)),n}function D2(i,e){return i&&i.length>0?(Pt(e!==void 0,14353),i.map((n=>(function(o,u){let d=o.updateTime?ws(o.updateTime):ws(u);return d.isEqual(rt.min())&&(d=ws(u)),new h2(d,o.transformResults||[])})(n,e)))):[]}function N2(i,e){return{documents:[dT(i,e.path)]}}function M2(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=dT(i,o);const u=(function(b){if(b.length!==0)return gT(Is.create(b,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(b){if(b.length!==0)return b.map((R=>(function(k){return{field:Bl(k.field),direction:P2(k.dir)}})(R)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const y=fm(i,e.limit);return y!==null&&(n.structuredQuery.limit=y),e.startAt&&(n.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(e.endAt)),{ft:n,parent:o}}function k2(i){let e=I2(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Pt(s===1,65062);const R=n.from[0];R.allDescendants?o=R.collectionId:e=e.child(R.collectionId)}let u=[];n.where&&(u=(function(I){const k=mT(I);return k instanceof Is&&KE(k)?k.getFilters():[k]})(n.where));let d=[];n.orderBy&&(d=(function(I){return I.map((k=>(function(re){return new mh(ql(re.field),(function(_e){switch(_e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(re.direction))})(k)))})(n.orderBy));let y=null;n.limit&&(y=(function(I){let k;return k=typeof I=="object"?I.value:I,Oh(k)?null:k})(n.limit));let _=null;n.startAt&&(_=(function(I){const k=!!I.before,X=I.values||[];return new ph(X,k)})(n.startAt));let b=null;return n.endAt&&(b=(function(I){const k=!I.before,X=I.values||[];return new ph(X,k)})(n.endAt)),Wx(e,o,d,u,y,"F",_,b)}function V2(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mT(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ql(n.unaryFilter.field);return zn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=ql(n.unaryFilter.field);return zn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=ql(n.unaryFilter.field);return zn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=ql(n.unaryFilter.field);return zn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $e(61313);default:return $e(60726)}})(i):i.fieldFilter!==void 0?(function(n){return zn.create(ql(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $e(58110);default:return $e(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Is.create(n.compositeFilter.filters.map((s=>mT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return $e(1026)}})(n.compositeFilter.op))})(i):$e(30097,{filter:i})}function P2(i){return w2[i]}function L2(i){return S2[i]}function U2(i){return A2[i]}function Bl(i){return{fieldPath:i.canonicalString()}}function ql(i){return ir.fromServerFormat(i.fieldPath)}function gT(i){return i instanceof zn?(function(n){if(n.op==="=="){if(P0(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NAN"}};if(V0(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(P0(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NOT_NAN"}};if(V0(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bl(n.field),op:L2(n.op),value:n.value}}})(i):i instanceof Is?(function(n){const s=n.getFilters().map((o=>gT(o)));return s.length===1?s[0]:{compositeFilter:{op:U2(n.op),filters:s}}})(i):$e(54877,{filter:i})}function j2(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function yT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class oo{constructor(e,n,s,o,u=rt.min(),d=rt.min(),y=sr.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=y,this.expectedCount=_}withSequenceNumber(e){return new oo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new oo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class z2{constructor(e){this.yt=e}}function B2(i){const e=k2({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?cm(e,e.limit,"L"):e}class q2{constructor(){this.Cn=new H2}addToCollectionParentIndex(e,n){return this.Cn.add(n),ve.resolve()}getCollectionParents(e,n){return ve.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ve.resolve()}deleteFieldIndex(e,n){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,n){return ve.resolve()}getDocumentsMatchingTarget(e,n){return ve.resolve(null)}getIndexType(e,n){return ve.resolve(0)}getFieldIndexes(e,n){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,n){return ve.resolve(mo.min())}getMinOffsetFromCollectionGroup(e,n){return ve.resolve(mo.min())}updateCollectionGroup(e,n,s){return ve.resolve()}updateIndexEntries(e,n){return ve.resolve()}}class H2{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Bn(fn.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Bn(fn.comparator)).toArray()}}const $0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vT=41943040;class Kr{static withCacheSize(e){return new Kr(e,Kr.DEFAULT_COLLECTION_PERCENTILE,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Kr.DEFAULT_COLLECTION_PERCENTILE=10,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kr.DEFAULT=new Kr(vT,Kr.DEFAULT_COLLECTION_PERCENTILE,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kr.DISABLED=new Kr(-1,0,0);class eu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new eu(0)}static cr(){return new eu(-1)}}const J0="LruGarbageCollector",F2=1048576;function W0([i,e],[n,s]){const o=St(i,n);return o===0?St(e,s):o}class K2{constructor(e){this.Ir=e,this.buffer=new Bn(W0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();W0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class G2{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Le(J0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ou(n)?Le(J0,"Ignoring IndexedDB error during garbage collection: ",n):await au(n)}await this.Vr(3e5)}))}}class Y2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ve.resolve(xh.ce);const s=new K2(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve($0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,d,y,_,b;const R=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,d=Date.now(),this.nthSequenceNumber(e,o)))).next((I=>(s=I,y=Date.now(),this.removeTargets(e,s,n)))).next((I=>(u=I,_=Date.now(),this.removeOrphanedDocuments(e,s)))).next((I=>(b=Date.now(),jl()<=wt.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-R}ms
	Determined least recently used ${o} in `+(y-d)+`ms
	Removed ${u} targets in `+(_-y)+`ms
	Removed ${I} documents in `+(b-_)+`ms
Total Duration: ${b-R}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:I}))))}}function Q2(i,e){return new Y2(i,e)}class X2{constructor(){this.changes=new il((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ve.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class J2{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&ic(s.mutation,o,es.empty(),Wt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,At()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=At()){const o=Qo();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let d=Xu();return u.forEach(((y,_)=>{d=d.insert(y,_.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=Qo();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,At())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,y)=>{n.set(d,y)}))}))}computeViews(e,n,s,o){let u=pa();const d=rc(),y=(function(){return rc()})();return n.forEach(((_,b)=>{const R=s.get(b.key);o.has(b.key)&&(R===void 0||R.mutation instanceof sl)?u=u.insert(b.key,b):R!==void 0?(d.set(b.key,R.mutation.getFieldMask()),ic(R.mutation,b,R.mutation.getFieldMask(),Wt.now())):d.set(b.key,es.empty())})),this.recalculateAndSaveOverlays(e,u).next((_=>(_.forEach(((b,R)=>d.set(b,R))),n.forEach(((b,R)=>y.set(b,new $2(R,d.get(b)??null)))),y)))}recalculateAndSaveOverlays(e,n){const s=rc();let o=new hn(((d,y)=>d-y)),u=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const y of d)y.keys().forEach((_=>{const b=n.get(_);if(b===null)return;let R=s.get(_)||es.empty();R=y.applyToLocalView(b,R),s.set(_,R);const I=(o.get(y.batchId)||At()).add(_);o=o.insert(y.batchId,I)}))})).next((()=>{const d=[],y=o.getReverseIterator();for(;y.hasNext();){const _=y.getNext(),b=_.key,R=_.value,I=ZE();R.forEach((k=>{if(!u.has(k)){const X=sT(n.get(k),s.get(k));X!==null&&I.set(k,X),u=u.add(k)}})),d.push(this.documentOverlayCache.saveOverlays(e,b,I))}return ve.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return Ye.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Zx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ve.resolve(Qo());let y=hc,_=u;return d.next((b=>ve.forEach(b,((R,I)=>(y<I.largestBatchId&&(y=I.largestBatchId),u.get(R)?ve.resolve():this.remoteDocumentCache.getEntry(e,R).next((k=>{_=_.insert(R,k)}))))).next((()=>this.populateOverlays(e,b,u))).next((()=>this.computeViews(e,_,b,At()))).next((R=>({batchId:y,changes:WE(R)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ye(n)).next((s=>{let o=Xu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=Xu();return this.indexManager.getCollectionParents(e,u).next((y=>ve.forEach(y,(_=>{const b=(function(I,k){return new Nh(k,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(n,_.child(u));return this.getDocumentsMatchingCollectionQuery(e,b,s,o).next((R=>{R.forEach(((I,k)=>{d=d.insert(I,k)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((d=>{u.forEach(((_,b)=>{const R=b.getKey();d.get(R)===null&&(d=d.insert(R,pr.newInvalidDocument(R)))}));let y=Xu();return d.forEach(((_,b)=>{const R=u.get(_);R!==void 0&&ic(R.mutation,b,es.empty(),Wt.now()),kh(n,b)&&(y=y.insert(_,b))})),y}))}}class W2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ve.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:ws(o.createTime)}})(n)),ve.resolve()}getNamedQuery(e,n){return ve.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:B2(o.bundledQuery),readTime:ws(o.readTime)}})(n)),ve.resolve()}}class Z2{constructor(){this.overlays=new hn(Ye.comparator),this.qr=new Map}getOverlay(e,n){return ve.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Qo();return ve.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),ve.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ve.resolve()}getOverlaysForCollection(e,n,s){const o=Qo(),u=n.length+1,d=new Ye(n.child("")),y=this.overlays.getIteratorFrom(d);for(;y.hasNext();){const _=y.getNext().value,b=_.getKey();if(!n.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>s&&o.set(_.getKey(),_)}return ve.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new hn(((b,R)=>b-R));const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===n&&b.largestBatchId>s){let R=u.get(b.largestBatchId);R===null&&(R=Qo(),u=u.insert(b.largestBatchId,R)),R.set(b.getKey(),b)}}const y=Qo(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((b,R)=>y.set(b,R))),!(y.size()>=o)););return ve.resolve(y)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new y2(n,s));let u=this.qr.get(n);u===void 0&&(u=At(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class eO{constructor(){this.sessionToken=sr.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ve.resolve()}}class $m{constructor(){this.Qr=new Bn(Qn.$r),this.Ur=new Bn(Qn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Qn(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Qn(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Ye(new fn([])),s=new Qn(n,e),o=new Qn(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ye(new fn([])),s=new Qn(n,e),o=new Qn(n,e+1);let u=At();return this.Ur.forEachInRange([s,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new Qn(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Qn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ye.comparator(e.key,n.key)||St(e.Yr,n.Yr)}static Kr(e,n){return St(e.Yr,n.Yr)||Ye.comparator(e.key,n.key)}}class tO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Bn(Qn.$r)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new g2(u,n,s,o);this.mutationQueue.push(d);for(const y of o)this.Zr=this.Zr.add(new Qn(y.key,u)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return ve.resolve(d)}lookupMutationBatch(e,n){return ve.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return ve.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?zm:this.tr-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Qn(n,0),o=new Qn(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(d=>{const y=this.Xr(d.Yr);u.push(y)})),ve.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Bn(St);return n.forEach((o=>{const u=new Qn(o,0),d=new Qn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(y=>{s=s.add(y.Yr)}))})),ve.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Ye.isDocumentKey(u)||(u=u.child(""));const d=new Qn(new Ye(u),0);let y=new Bn(St);return this.Zr.forEachWhile((_=>{const b=_.key.path;return!!s.isPrefixOf(b)&&(b.length===o&&(y=y.add(_.Yr)),!0)}),d),ve.resolve(this.ti(y))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Pt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ve.forEach(n.mutations,(o=>{const u=new Qn(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Qn(n,0),o=this.Zr.firstAfterOrEqual(s);return ve.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class nO{constructor(e){this.ri=e,this.docs=(function(){return new hn(Ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ve.resolve(s?s.document.mutableCopy():pr.newInvalidDocument(n))}getEntries(e,n){let s=pa();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():pr.newInvalidDocument(o))})),ve.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=pa();const d=n.path,y=new Ye(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(y);for(;_.hasNext();){const{key:b,value:{document:R}}=_.getNext();if(!d.isPrefixOf(b.path))break;b.path.length>d.length+1||Ox(xx(R),s)<=0||(o.has(R.key)||kh(n,R))&&(u=u.insert(R.key,R.mutableCopy()))}return ve.resolve(u)}getAllFromCollectionGroup(e,n,s,o){$e(9500)}ii(e,n){return ve.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new rO(this)}getSize(e){return ve.resolve(this.size)}}class rO extends X2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ve.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class iO{constructor(e){this.persistence=e,this.si=new il((n=>Hm(n)),Fm),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.oi=0,this._i=new $m,this.targetCount=0,this.ai=eu.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ve.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new eu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ve.resolve()}updateTargetData(e,n){return this.Pr(n),ve.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((d,y)=>{y.sequenceNumber<=n&&s.get(y.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,y.targetId)),o++)})),ve.waitFor(u).next((()=>o))}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ve.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ve.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),ve.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ve.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ve.resolve(s)}containsKey(e,n){return ve.resolve(this._i.containsKey(n))}}class _T{constructor(e,n){this.ui={},this.overlays={},this.ci=new xh(0),this.li=!1,this.li=!0,this.hi=new eO,this.referenceDelegate=e(this),this.Pi=new iO(this),this.indexManager=new q2,this.remoteDocumentCache=(function(o){return new nO(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new z2(n),this.Ii=new W2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Z2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new tO(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Le("MemoryPersistence","Starting transaction:",e);const o=new sO(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ve.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class sO extends Nx{constructor(e){super(),this.currentSequenceNumber=e}}class Jm{constructor(e){this.persistence=e,this.Ri=new $m,this.Vi=null}static mi(e){return new Jm(e)}get fi(){if(this.Vi)return this.Vi;throw $e(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ve.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ve.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ve.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.fi,(s=>{const o=Ye.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,rt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ve.or([()=>ve.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class _h{constructor(e,n){this.persistence=e,this.pi=new il((s=>Vx(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=Q2(this,n)}static mi(e,n){return new _h(e,n)}Ei(){}di(e){return ve.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ve.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?ve.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((y=>{y||(s++,u.removeEntry(d,rt.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ve.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ve.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ve.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$f(e.data.value)),n}br(e,n,s){return ve.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ve.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Wm{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=At(),o=At();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Wm(e,n.fromCache,s,o)}}class aO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class oO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return $A()?8:Mx(gr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new aO;return this.Ss(e,n,d).next((y=>{if(u.result=y,this.Vs)return this.bs(e,n,d,y.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(jl()<=wt.DEBUG&&Le("QueryEngine","SDK will not create cache indexes for query:",zl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ve.resolve()):(jl()<=wt.DEBUG&&Le("QueryEngine","Query:",zl(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(jl()<=wt.DEBUG&&Le("QueryEngine","The SDK decides to create cache indexes for query:",zl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ts(n))):ve.resolve())}ys(e,n){if(z0(n))return ve.resolve(null);let s=Ts(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=cm(n,null,"F"),s=Ts(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const d=At(...u);return this.ps.getDocuments(e,d).next((y=>this.indexManager.getMinOffset(e,s).next((_=>{const b=this.Ds(n,y);return this.Cs(n,b,d,_.readTime)?this.ys(e,cm(n,null,"F")):this.vs(e,b,n,_)}))))})))))}ws(e,n,s,o){return z0(n)||o.isEqual(rt.min())?ve.resolve(null):this.ps.getDocuments(e,s).next((u=>{const d=this.Ds(n,u);return this.Cs(n,d,s,o)?ve.resolve(null):(jl()<=wt.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),zl(n)),this.vs(e,d,n,Ix(o,hc)).next((y=>y)))}))}Ds(e,n){let s=new Bn($E(e));return n.forEach(((o,u)=>{kh(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return jl()<=wt.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",zl(n)),this.ps.getDocumentsMatchingQuery(e,n,mo.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const Zm="LocalStore",lO=3e8;class uO{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new hn(St),this.xs=new il((u=>Hm(u)),Fm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new J2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function cO(i,e,n,s){return new uO(i,e,n,s)}async function bT(i,e){const n=st(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const d=[],y=[];let _=At();for(const b of o){d.push(b.batchId);for(const R of b.mutations)_=_.add(R.key)}for(const b of u){y.push(b.batchId);for(const R of b.mutations)_=_.add(R.key)}return n.localDocuments.getDocuments(s,_).next((b=>({Ls:b,removedBatchIds:d,addedBatchIds:y})))}))}))}function fO(i,e){const n=st(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,_,b,R){const I=b.batch,k=I.keys();let X=ve.resolve();return k.forEach((re=>{X=X.next((()=>R.getEntry(_,re))).next((pe=>{const _e=b.docVersions.get(re);Pt(_e!==null,48541),pe.version.compareTo(_e)<0&&(I.applyToRemoteDocument(pe,b),pe.isValidDocument()&&(pe.setReadTime(b.commitVersion),R.addEntry(pe)))}))})),X.next((()=>y.mutationQueue.removeMutationBatch(_,I)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(y){let _=At();for(let b=0;b<y.mutationResults.length;++b)y.mutationResults[b].transformResults.length>0&&(_=_.add(y.batch.mutations[b].key));return _})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function ET(i){const e=st(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function hO(i,e){const n=st(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const y=[];e.targetChanges.forEach(((R,I)=>{const k=o.get(I);if(!k)return;y.push(n.Pi.removeMatchingKeys(u,R.removedDocuments,I).next((()=>n.Pi.addMatchingKeys(u,R.addedDocuments,I))));let X=k.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(I)!==null?X=X.withResumeToken(sr.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):R.resumeToken.approximateByteSize()>0&&(X=X.withResumeToken(R.resumeToken,s)),o=o.insert(I,X),(function(pe,_e,ze){return pe.resumeToken.approximateByteSize()===0||_e.snapshotVersion.toMicroseconds()-pe.snapshotVersion.toMicroseconds()>=lO?!0:ze.addedDocuments.size+ze.modifiedDocuments.size+ze.removedDocuments.size>0})(k,X,R)&&y.push(n.Pi.updateTargetData(u,X))}));let _=pa(),b=At();if(e.documentUpdates.forEach((R=>{e.resolvedLimboDocuments.has(R)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(u,R))})),y.push(dO(u,d,e.documentUpdates).next((R=>{_=R.ks,b=R.qs}))),!s.isEqual(rt.min())){const R=n.Pi.getLastRemoteSnapshotVersion(u).next((I=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));y.push(R)}return ve.waitFor(y).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,_,b))).next((()=>_))})).then((u=>(n.Ms=o,u)))}function dO(i,e,n){let s=At(),o=At();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let d=pa();return n.forEach(((y,_)=>{const b=u.get(y);_.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(y)),_.isNoDocument()&&_.version.isEqual(rt.min())?(e.removeEntry(y,_.readTime),d=d.insert(y,_)):!b.isValidDocument()||_.version.compareTo(b.version)>0||_.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(_),d=d.insert(y,_)):Le(Zm,"Ignoring outdated watch update for ",y,". Current version:",b.version," Watch version:",_.version)})),{ks:d,qs:o}}))}function pO(i,e){const n=st(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=zm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function mO(i,e){const n=st(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,ve.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new oo(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function mm(i,e,n){const s=st(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!ou(d))throw d;Le(Zm,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Z0(i,e,n){const s=st(i);let o=rt.min(),u=At();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(_,b,R){const I=st(_),k=I.xs.get(R);return k!==void 0?ve.resolve(I.Ms.get(k)):I.Pi.getTargetData(b,R)})(s,d,Ts(e)).next((y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,y.targetId).next((_=>{u=_}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:rt.min(),n?u:At()))).next((y=>(gO(s,t2(e),y),{documents:y,Qs:u})))))}function gO(i,e,n){let s=i.Os.get(e)||rt.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class eb{constructor(){this.activeTargetIds=o2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yO{constructor(){this.Mo=new eb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new eb,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vO{Oo(e){}shutdown(){}}const tb="ConnectivityMonitor";class nb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Le(tb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Le(tb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let zf=null;function gm(){return zf===null?zf=(function(){return 268435456+Math.round(2147483648*Math.random())})():zf++,"0x"+zf.toString(16)}const Fp="RestConnection",_O={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===hh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const d=gm(),y=this.zo(e,n.toUriEncodedString());Le(Fp,`Sending RPC '${e}' ${d}:`,y,s);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,o,u);const{host:b}=new URL(y),R=nu(b);return this.Jo(e,y,_,s,R).then((I=>(Le(Fp,`Received RPC '${e}' ${d}: `,I),I)),(I=>{throw $l(Fp,`RPC '${e}' ${d} failed with error: `,I,"url: ",y,"request:",s),I}))}Ho(e,n,s,o,u,d){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+su})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=_O[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class EO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const hr="WebChannelConnection";class TO extends bO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const d=gm();return new Promise(((y,_)=>{const b=new AE;b.setWithCredentials(!0),b.listenOnce(CE.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case Xf.NO_ERROR:const I=b.getResponseJson();Le(hr,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(I)),y(I);break;case Xf.TIMEOUT:Le(hr,`RPC '${e}' ${d} timed out`),_(new He(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case Xf.HTTP_ERROR:const k=b.getStatus();if(Le(hr,`RPC '${e}' ${d} failed with status:`,k,"response text:",b.getResponseText()),k>0){let X=b.getResponseJson();Array.isArray(X)&&(X=X[0]);const re=X?.error;if(re&&re.status&&re.message){const pe=(function(ze){const Be=ze.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(Be)>=0?Be:Ee.UNKNOWN})(re.status);_(new He(pe,re.message))}else _(new He(Ee.UNKNOWN,"Server responded with status "+b.getStatus()))}else _(new He(Ee.UNAVAILABLE,"Connection failed."));break;default:$e(9055,{l_:e,streamId:d,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{Le(hr,`RPC '${e}' ${d} completed.`)}}));const R=JSON.stringify(o);Le(hr,`RPC '${e}' ${d} sending request:`,o),b.send(n,"POST",R,s,15)}))}T_(e,n,s){const o=gm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=xE(),y=IE(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(_.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,n,s),_.encodeInitMessageHeaders=!0;const R=u.join("");Le(hr,`Creating RPC '${e}' stream ${o}: ${R}`,_);const I=d.createWebChannel(R,_);this.I_(I);let k=!1,X=!1;const re=new EO({Yo:_e=>{X?Le(hr,`Not sending because RPC '${e}' stream ${o} is closed:`,_e):(k||(Le(hr,`Opening RPC '${e}' stream ${o} transport.`),I.open(),k=!0),Le(hr,`RPC '${e}' stream ${o} sending:`,_e),I.send(_e))},Zo:()=>I.close()}),pe=(_e,ze,Be)=>{_e.listen(ze,(ke=>{try{Be(ke)}catch(Je){setTimeout((()=>{throw Je}),0)}}))};return pe(I,Qu.EventType.OPEN,(()=>{X||(Le(hr,`RPC '${e}' stream ${o} transport opened.`),re.o_())})),pe(I,Qu.EventType.CLOSE,(()=>{X||(X=!0,Le(hr,`RPC '${e}' stream ${o} transport closed`),re.a_(),this.E_(I))})),pe(I,Qu.EventType.ERROR,(_e=>{X||(X=!0,$l(hr,`RPC '${e}' stream ${o} transport errored. Name:`,_e.name,"Message:",_e.message),re.a_(new He(Ee.UNAVAILABLE,"The operation could not be completed")))})),pe(I,Qu.EventType.MESSAGE,(_e=>{if(!X){const ze=_e.data[0];Pt(!!ze,16349);const Be=ze,ke=Be?.error||Be[0]?.error;if(ke){Le(hr,`RPC '${e}' stream ${o} received error:`,ke);const Je=ke.status;let yt=(function(N){const V=kn[N];if(V!==void 0)return lT(V)})(Je),Ge=ke.message;yt===void 0&&(yt=Ee.INTERNAL,Ge="Unknown error status: "+Je+" with message "+ke.message),X=!0,re.a_(new He(yt,Ge)),I.close()}else Le(hr,`RPC '${e}' stream ${o} received:`,ze),re.u_(ze)}})),pe(y,RE.STAT_EVENT,(_e=>{_e.stat===im.PROXY?Le(hr,`RPC '${e}' stream ${o} detected buffering proxy`):_e.stat===im.NOPROXY&&Le(hr,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{re.__()}),0),re}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Kp(){return typeof document<"u"?document:null}function Uh(i){return new C2(i,!0)}class TT{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&Le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const rb="PersistentStream";class wT{constructor(e,n,s,o,u,d,y,_){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=y,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new TT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ee.RESOURCE_EXHAUSTED?(da(n.toString()),da("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new He(Ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Le(rb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Le(rb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wO extends wT{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=x2(this.serializer,e),s=(function(u){if(!("targetChange"in u))return rt.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?rt.min():d.readTime?ws(d.readTime):rt.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=pm(this.serializer),n.addTarget=(function(u,d){let y;const _=d.target;if(y=um(_)?{documents:N2(u,_)}:{query:M2(u,_).ft},y.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){y.resumeToken=fT(u,d.resumeToken);const b=fm(u,d.expectedCount);b!==null&&(y.expectedCount=b)}else if(d.snapshotVersion.compareTo(rt.min())>0){y.readTime=vh(u,d.snapshotVersion.toTimestamp());const b=fm(u,d.expectedCount);b!==null&&(y.expectedCount=b)}return y})(this.serializer,e);const s=V2(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=pm(this.serializer),n.removeTarget=e,this.q_(n)}}class SO extends wT{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=D2(e.writeResults,e.commitTime),s=ws(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=pm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>O2(this.serializer,s)))};this.q_(n)}}class AO{}class CO extends AO{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new He(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,hm(n,s),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new He(Ee.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,y])=>this.connection.Ho(e,hm(n,s),o,d,y,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new He(Ee.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class RO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(da(n),this.aa=!1):Le("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const nl="RemoteStore";class IO{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{al(this)&&(Le(nl,"Restarting streams for network reachability change."),await(async function(_){const b=st(_);b.Ea.add(4),await xc(b),b.Ra.set("Unknown"),b.Ea.delete(4),await jh(b)})(this))}))})),this.Ra=new RO(s,o)}}async function jh(i){if(al(i))for(const e of i.da)await e(!0)}async function xc(i){for(const e of i.da)await e(!1)}function ST(i,e){const n=st(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),rg(n)?ng(n):lu(n).O_()&&tg(n,e))}function eg(i,e){const n=st(i),s=lu(n);n.Ia.delete(e),s.O_()&&AT(n,e),n.Ia.size===0&&(s.O_()?s.L_():al(n)&&n.Ra.set("Unknown"))}function tg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(rt.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}lu(i).Y_(e)}function AT(i,e){i.Va.Ue(e),lu(i).Z_(e)}function ng(i){i.Va=new T2({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),lu(i).start(),i.Ra.ua()}function rg(i){return al(i)&&!lu(i).x_()&&i.Ia.size>0}function al(i){return st(i).Ea.size===0}function CT(i){i.Va=void 0}async function xO(i){i.Ra.set("Online")}async function OO(i){i.Ia.forEach(((e,n)=>{tg(i,e)}))}async function DO(i,e){CT(i),rg(i)?(i.Ra.ha(e),ng(i)):i.Ra.set("Unknown")}async function NO(i,e,n){if(i.Ra.set("Online"),e instanceof cT&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const y of u.targetIds)o.Ia.has(y)&&(await o.remoteSyncer.rejectListen(y,d),o.Ia.delete(y),o.Va.removeTarget(y))})(i,e)}catch(s){Le(nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await bh(i,s)}else if(e instanceof Zf?i.Va.Ze(e):e instanceof uT?i.Va.st(e):i.Va.tt(e),!n.isEqual(rt.min()))try{const s=await ET(i.localStore);n.compareTo(s)>=0&&await(function(u,d){const y=u.Va.Tt(d);return y.targetChanges.forEach(((_,b)=>{if(_.resumeToken.approximateByteSize()>0){const R=u.Ia.get(b);R&&u.Ia.set(b,R.withResumeToken(_.resumeToken,d))}})),y.targetMismatches.forEach(((_,b)=>{const R=u.Ia.get(_);if(!R)return;u.Ia.set(_,R.withResumeToken(sr.EMPTY_BYTE_STRING,R.snapshotVersion)),AT(u,_);const I=new oo(R.target,_,b,R.sequenceNumber);tg(u,I)})),u.remoteSyncer.applyRemoteEvent(y)})(i,n)}catch(s){Le(nl,"Failed to raise snapshot:",s),await bh(i,s)}}async function bh(i,e,n){if(!ou(e))throw e;i.Ea.add(1),await xc(i),i.Ra.set("Offline"),n||(n=()=>ET(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Le(nl,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await jh(i)}))}function RT(i,e){return e().catch((n=>bh(i,n,e)))}async function zh(i){const e=st(i),n=_o(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:zm;for(;MO(e);)try{const o=await pO(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,kO(e,o)}catch(o){await bh(e,o)}IT(e)&&xT(e)}function MO(i){return al(i)&&i.Ta.length<10}function kO(i,e){i.Ta.push(e);const n=_o(i);n.O_()&&n.X_&&n.ea(e.mutations)}function IT(i){return al(i)&&!_o(i).x_()&&i.Ta.length>0}function xT(i){_o(i).start()}async function VO(i){_o(i).ra()}async function PO(i){const e=_o(i);for(const n of i.Ta)e.ea(n.mutations)}async function LO(i,e,n){const s=i.Ta.shift(),o=Ym.from(s,e,n);await RT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await zh(i)}async function UO(i,e){e&&_o(i).X_&&await(async function(s,o){if((function(d){return _2(d)&&d!==Ee.ABORTED})(o.code)){const u=s.Ta.shift();_o(s).B_(),await RT(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await zh(s)}})(i,e),IT(i)&&xT(i)}async function ib(i,e){const n=st(i);n.asyncQueue.verifyOperationInProgress(),Le(nl,"RemoteStore received new credentials");const s=al(n);n.Ea.add(3),await xc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await jh(n)}async function jO(i,e){const n=st(i);e?(n.Ea.delete(2),await jh(n)):e||(n.Ea.add(2),await xc(n),n.Ra.set("Unknown"))}function lu(i){return i.ma||(i.ma=(function(n,s,o){const u=st(n);return u.sa(),new wO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:xO.bind(null,i),t_:OO.bind(null,i),r_:DO.bind(null,i),H_:NO.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),rg(i)?ng(i):i.Ra.set("Unknown")):(await i.ma.stop(),CT(i))}))),i.ma}function _o(i){return i.fa||(i.fa=(function(n,s,o){const u=st(n);return u.sa(),new SO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:VO.bind(null,i),r_:UO.bind(null,i),ta:PO.bind(null,i),na:LO.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await zh(i)):(await i.fa.stop(),i.Ta.length>0&&(Le(nl,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class ig{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new po,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,y=new ig(e,n,d,o,u);return y.start(s),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sg(i,e){if(da("AsyncQueue",`${e}: ${i}`),ou(i))return new He(Ee.UNAVAILABLE,`${e}: ${i}`);throw i}class Yl{static emptySet(e){return new Yl(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ye.comparator(n.key,s.key):(n,s)=>Ye.comparator(n.key,s.key),this.keyedMap=Xu(),this.sortedSet=new hn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Yl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class sb{constructor(){this.ga=new hn(Ye.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):$e(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class tu{constructor(e,n,s,o,u,d,y,_,b){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=y,this.excludesMetadataChanges=_,this.hasCachedResults=b}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach((y=>{d.push({type:0,doc:y})})),new tu(e,n,Yl.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class zO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class BO{constructor(){this.queries=ab(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=st(n),u=o.queries;o.queries=ab(),u.forEach(((d,y)=>{for(const _ of y.Sa)_.onError(s)}))})(this,new He(Ee.ABORTED,"Firestore shutting down"))}}function ab(){return new il((i=>XE(i)),Mh)}async function qO(i,e){const n=st(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new zO,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const y=sg(d,`Initialization of query '${zl(e.query)}' failed`);return void e.onError(y)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&ag(n)}async function HO(i,e){const n=st(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function FO(i,e){const n=st(i);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const y of d.Sa)y.Fa(o)&&(s=!0);d.wa=o}}s&&ag(n)}function KO(i,e,n){const s=st(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function ag(i){i.Ca.forEach((e=>{e.next()}))}var ym,ob;(ob=ym||(ym={})).Ma="default",ob.Cache="cache";class GO{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new tu(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=tu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ym.Cache}}class OT{constructor(e){this.key=e}}class DT{constructor(e){this.key=e}}class YO{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=At(),this.mutatedKeys=At(),this.eu=$E(e),this.tu=new Yl(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new sb,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,y=!1;const _=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((R,I)=>{const k=o.get(R),X=kh(this.query,I)?I:null,re=!!k&&this.mutatedKeys.has(k.key),pe=!!X&&(X.hasLocalMutations||this.mutatedKeys.has(X.key)&&X.hasCommittedMutations);let _e=!1;k&&X?k.data.isEqual(X.data)?re!==pe&&(s.track({type:3,doc:X}),_e=!0):this.su(k,X)||(s.track({type:2,doc:X}),_e=!0,(_&&this.eu(X,_)>0||b&&this.eu(X,b)<0)&&(y=!0)):!k&&X?(s.track({type:0,doc:X}),_e=!0):k&&!X&&(s.track({type:1,doc:k}),_e=!0,(_||b)&&(y=!0)),_e&&(X?(d=d.add(X),u=pe?u.add(R):u.delete(R)):(d=d.delete(R),u=u.delete(R)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const R=this.query.limitType==="F"?d.last():d.first();d=d.delete(R.key),u=u.delete(R.key),s.track({type:1,doc:R})}return{tu:d,iu:s,Cs:y,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((R,I)=>(function(X,re){const pe=_e=>{switch(_e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e(20277,{Rt:_e})}};return pe(X)-pe(re)})(R.type,I.type)||this.eu(R.doc,I.doc))),this.ou(s),o=o??!1;const y=n&&!o?this._u():[],_=this.Xa.size===0&&this.current&&!o?1:0,b=_!==this.Za;return this.Za=_,d.length!==0||b?{snapshot:new tu(this.query,e.tu,u,d,e.mutatedKeys,_===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=At(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new DT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new OT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=At();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return tu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const og="SyncEngine";class QO{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class XO{constructor(e){this.key=e,this.hu=!1}}class $O{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new il((y=>XE(y)),Mh),this.Iu=new Map,this.Eu=new Set,this.du=new hn(Ye.comparator),this.Au=new Map,this.Ru=new $m,this.Vu={},this.mu=new Map,this.fu=eu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function JO(i,e,n=!0){const s=LT(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await NT(s,e,n,!0),o}async function WO(i,e){const n=LT(i);await NT(n,e,!0,!1)}async function NT(i,e,n,s){const o=await mO(i.localStore,Ts(e)),u=o.targetId,d=i.sharedClientState.addLocalQueryTarget(u,n);let y;return s&&(y=await ZO(i,e,u,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&ST(i.remoteStore,o),y}async function ZO(i,e,n,s,o){i.pu=(I,k,X)=>(async function(pe,_e,ze,Be){let ke=_e.view.ru(ze);ke.Cs&&(ke=await Z0(pe.localStore,_e.query,!1).then((({documents:D})=>_e.view.ru(D,ke))));const Je=Be&&Be.targetChanges.get(_e.targetId),yt=Be&&Be.targetMismatches.get(_e.targetId)!=null,Ge=_e.view.applyChanges(ke,pe.isPrimaryClient,Je,yt);return ub(pe,_e.targetId,Ge.au),Ge.snapshot})(i,I,k,X);const u=await Z0(i.localStore,e,!0),d=new YO(e,u.Qs),y=d.ru(u.documents),_=Ic.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),b=d.applyChanges(y,i.isPrimaryClient,_);ub(i,n,b.au);const R=new QO(e,n,d);return i.Tu.set(e,R),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),b.snapshot}async function eD(i,e,n){const s=st(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((d=>!Mh(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await mm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&eg(s.remoteStore,o.targetId),vm(s,o.targetId)})).catch(au)):(vm(s,o.targetId),await mm(s.localStore,o.targetId,!0))}async function tD(i,e){const n=st(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),eg(n.remoteStore,s.targetId))}async function nD(i,e,n){const s=uD(i);try{const o=await(function(d,y){const _=st(d),b=Wt.now(),R=y.reduce(((X,re)=>X.add(re.key)),At());let I,k;return _.persistence.runTransaction("Locally write mutations","readwrite",(X=>{let re=pa(),pe=At();return _.Ns.getEntries(X,R).next((_e=>{re=_e,re.forEach(((ze,Be)=>{Be.isValidDocument()||(pe=pe.add(ze))}))})).next((()=>_.localDocuments.getOverlayedDocuments(X,re))).next((_e=>{I=_e;const ze=[];for(const Be of y){const ke=p2(Be,I.get(Be.key).overlayedDocument);ke!=null&&ze.push(new sl(Be.key,ke,qE(ke.value.mapValue),ua.exists(!0)))}return _.mutationQueue.addMutationBatch(X,b,ze,y)})).next((_e=>{k=_e;const ze=_e.applyToLocalDocumentSet(I,pe);return _.documentOverlayCache.saveOverlays(X,_e.batchId,ze)}))})).then((()=>({batchId:k.batchId,changes:WE(I)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,y,_){let b=d.Vu[d.currentUser.toKey()];b||(b=new hn(St)),b=b.insert(y,_),d.Vu[d.currentUser.toKey()]=b})(s,o.batchId,n),await Oc(s,o.changes),await zh(s.remoteStore)}catch(o){const u=sg(o,"Failed to persist write");n.reject(u)}}async function MT(i,e){const n=st(i);try{const s=await hO(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(Pt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Pt(d.hu,14607):o.removedDocuments.size>0&&(Pt(d.hu,42227),d.hu=!1))})),await Oc(n,s,e)}catch(s){await au(s)}}function lb(i,e,n){const s=st(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,d)=>{const y=d.view.va(e);y.snapshot&&o.push(y.snapshot)})),(function(d,y){const _=st(d);_.onlineState=y;let b=!1;_.queries.forEach(((R,I)=>{for(const k of I.Sa)k.va(y)&&(b=!0)})),b&&ag(_)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function rD(i,e,n){const s=st(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let d=new hn(Ye.comparator);d=d.insert(u,pr.newNoDocument(u,rt.min()));const y=At().add(u),_=new Lh(rt.min(),new Map,new hn(St),d,y);await MT(s,_),s.du=s.du.remove(u),s.Au.delete(e),lg(s)}else await mm(s.localStore,e,!1).then((()=>vm(s,e,n))).catch(au)}async function iD(i,e){const n=st(i),s=e.batch.batchId;try{const o=await fO(n.localStore,e);VT(n,s,null),kT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Oc(n,o)}catch(o){await au(o)}}async function sD(i,e,n){const s=st(i);try{const o=await(function(d,y){const _=st(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let R;return _.mutationQueue.lookupMutationBatch(b,y).next((I=>(Pt(I!==null,37113),R=I.keys(),_.mutationQueue.removeMutationBatch(b,I)))).next((()=>_.mutationQueue.performConsistencyCheck(b))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(b,R,y))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,R))).next((()=>_.localDocuments.getDocuments(b,R)))}))})(s.localStore,e);VT(s,e,n),kT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Oc(s,o)}catch(o){await au(o)}}function kT(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function VT(i,e,n){const s=st(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function vm(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||PT(i,s)}))}function PT(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(eg(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),lg(i))}function ub(i,e,n){for(const s of n)s instanceof OT?(i.Ru.addReference(s.key,e),aD(i,s)):s instanceof DT?(Le(og,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||PT(i,s.key)):$e(19791,{wu:s})}function aD(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(Le(og,"New document in limbo: "+n),i.Eu.add(s),lg(i))}function lg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Ye(fn.fromString(e)),s=i.fu.next();i.Au.set(s,new XO(n)),i.du=i.du.insert(n,s),ST(i.remoteStore,new oo(Ts(Km(n.path)),s,"TargetPurposeLimboResolution",xh.ce))}}async function Oc(i,e,n){const s=st(i),o=[],u=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((y,_)=>{d.push(s.pu(_,e,n).then((b=>{if((b||n)&&s.isPrimaryClient){const R=b?!b.fromCache:n?.targetChanges.get(_.targetId)?.current;s.sharedClientState.updateQueryState(_.targetId,R?"current":"not-current")}if(b){o.push(b);const R=Wm.As(_.targetId,b);u.push(R)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(_,b){const R=st(_);try{await R.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>ve.forEach(b,(k=>ve.forEach(k.Es,(X=>R.persistence.referenceDelegate.addReference(I,k.targetId,X))).next((()=>ve.forEach(k.ds,(X=>R.persistence.referenceDelegate.removeReference(I,k.targetId,X)))))))))}catch(I){if(!ou(I))throw I;Le(Zm,"Failed to update sequence numbers: "+I)}for(const I of b){const k=I.targetId;if(!I.fromCache){const X=R.Ms.get(k),re=X.snapshotVersion,pe=X.withLastLimboFreeSnapshotVersion(re);R.Ms=R.Ms.insert(k,pe)}}})(s.localStore,u))}async function oD(i,e){const n=st(i);if(!n.currentUser.isEqual(e)){Le(og,"User change. New user:",e.toKey());const s=await bT(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((y=>{y.forEach((_=>{_.reject(new He(Ee.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Oc(n,s.Ls)}}function lD(i,e){const n=st(i),s=n.Au.get(e);if(s&&s.hu)return At().add(s.key);{let o=At();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const y=n.Tu.get(d);o=o.unionWith(y.view.nu)}return o}}function LT(i){const e=st(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=MT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rD.bind(null,e),e.Pu.H_=FO.bind(null,e.eventManager),e.Pu.yu=KO.bind(null,e.eventManager),e}function uD(i){const e=st(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sD.bind(null,e),e}class Eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return cO(this.persistence,new oO,e.initialUser,this.serializer)}Cu(e){return new _T(Jm.mi,this.serializer)}Du(e){return new yO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eh.provider={build:()=>new Eh};class cD extends Eh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Pt(this.persistence.referenceDelegate instanceof _h,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new G2(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Kr.withCacheSize(this.cacheSizeBytes):Kr.DEFAULT;return new _T((s=>_h.mi(s,n)),this.serializer)}}class _m{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>lb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=oD.bind(null,this.syncEngine),await jO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new BO})()}createDatastore(e){const n=Uh(e.databaseInfo.databaseId),s=(function(u){return new TO(u)})(e.databaseInfo);return(function(u,d,y,_){return new CO(u,d,y,_)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,d,y){return new IO(s,o,u,d,y)})(this.localStore,this.datastore,e.asyncQueue,(n=>lb(this.syncEngine,n,0)),(function(){return nb.v()?new nb:new vO})())}createSyncEngine(e,n){return(function(o,u,d,y,_,b,R){const I=new $O(o,u,d,y,_,b);return R&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=st(n);Le(nl,"RemoteStore shutting down."),s.Ea.add(5),await xc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}_m.provider={build:()=>new _m};class fD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):da("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const bo="FirestoreClient";class hD{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=dr.UNAUTHENTICATED,this.clientId=Um.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async d=>{Le(bo,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(Le(bo,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new po;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=sg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Gp(i,e){i.asyncQueue.verifyOperationInProgress(),Le(bo,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await bT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function cb(i,e){i.asyncQueue.verifyOperationInProgress();const n=await dD(i);Le(bo,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>ib(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>ib(e.remoteStore,o))),i._onlineComponents=e}async function dD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Le(bo,"Using user provided OfflineComponentProvider");try{await Gp(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Ee.FAILED_PRECONDITION||o.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;$l("Error using user provided cache. Falling back to memory cache: "+n),await Gp(i,new Eh)}}else Le(bo,"Using default OfflineComponentProvider"),await Gp(i,new cD(void 0));return i._offlineComponents}async function UT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Le(bo,"Using user provided OnlineComponentProvider"),await cb(i,i._uninitializedComponentsProvider._online)):(Le(bo,"Using default OnlineComponentProvider"),await cb(i,new _m))),i._onlineComponents}function pD(i){return UT(i).then((e=>e.syncEngine))}async function mD(i){const e=await UT(i),n=e.eventManager;return n.onListen=JO.bind(null,e.syncEngine),n.onUnlisten=eD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=WO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=tD.bind(null,e.syncEngine),n}function gD(i,e,n={}){const s=new po;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,y,_,b){const R=new fD({next:k=>{R.Nu(),d.enqueueAndForget((()=>HO(u,I)));const X=k.docs.has(y);!X&&k.fromCache?b.reject(new He(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):X&&k.fromCache&&_&&_.source==="server"?b.reject(new He(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(k)},error:k=>b.reject(k)}),I=new GO(Km(y.path),R,{includeMetadataChanges:!0,qa:!0});return qO(u,I)})(await mD(i),i.asyncQueue,e,n,s))),s.promise}function jT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const fb=new Map;const zT="firestore.googleapis.com",hb=!0;class db{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new He(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zT,this.ssl=hb}else this.host=e.host,this.ssl=e.ssl??hb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<F2)throw new He(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new He(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new He(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new He(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ug{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new db({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new He(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new db(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new gx;switch(s.type){case"firstParty":return new bx(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new He(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=fb.get(n);s&&(Le("ComponentProvider","Removing Datastore"),fb.delete(n),s.terminate())})(this),Promise.resolve()}}function yD(i,e,n,s={}){i=fc(i,ug);const o=nu(e),u=i._getSettings(),d={...u,emulatorOptions:i._getEmulatorOptions()},y=`${e}:${n}`;o&&(zb(`https://${y}`),Bb("Firestore",!0)),u.host!==zT&&u.host!==y&&$l("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...u,host:y,ssl:o,emulatorOptions:s};if(!Wo(_,d)&&(i._setSettings(_),s.mockUserToken)){let b,R;if(typeof s.mockUserToken=="string")b=s.mockUserToken,R=dr.MOCK_USER;else{b=BA(s.mockUserToken,i._app?.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new He(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new dr(I)}i._authCredentials=new yx(new DE(b,R))}}class cg{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new cg(this.firestore,e,this._query)}}class Xn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xn(this.firestore,e,this._key)}toJSON(){return{type:Xn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Cc(n,Xn._jsonSchema))return new Xn(e,s||null,new Ye(fn.fromString(n.referencePath)))}}Xn._jsonSchemaVersion="firestore/documentReference/1.0",Xn._jsonSchema={type:Vn("string",Xn._jsonSchemaVersion),referencePath:Vn("string")};class vc extends cg{constructor(e,n,s){super(e,n,Km(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xn(this.firestore,null,new Ye(e))}withConverter(e){return new vc(this.firestore,e,this._path)}}function BT(i,e,...n){if(i=ji(i),arguments.length===1&&(e=Um.newId()),Cx("doc","path",e),i instanceof ug){const s=fn.fromString(e,...n);return R0(s),new Xn(i,null,new Ye(s))}{if(!(i instanceof Xn||i instanceof vc))throw new He(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(fn.fromString(e,...n));return R0(s),new Xn(i.firestore,i instanceof vc?i.converter:null,new Ye(s))}}const pb="AsyncQueue";class mb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new TT(this,"async_queue_retry"),this._c=()=>{const s=Kp();s&&Le(pb,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Kp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Kp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new po;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ou(e))throw e;Le(pb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,da("INTERNAL UNHANDLED ERROR: ",gb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=ig.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&$e(47125,{Pc:gb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function gb(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class fg extends ug{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new mb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mb(e),this._firestoreClient=void 0,await e}}}function vD(i,e){const n=typeof i=="object"?i:Kb(),s=typeof i=="string"?i:hh,o=Cm(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=jA("firestore");u&&yD(o,...u)}return o}function qT(i){if(i._terminated)throw new He(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||_D(i),i._firestoreClient}function _D(i){const e=i._freezeSettings(),n=(function(o,u,d,y){return new Ux(o,u,d,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,jT(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new hD(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class Ui{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ui(sr.fromBase64String(e))}catch(n){throw new He(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ui(sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ui._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cc(e,Ui._jsonSchema))return Ui.fromBase64String(e.bytes)}}Ui._jsonSchemaVersion="firestore/bytes/1.0",Ui._jsonSchema={type:Vn("string",Ui._jsonSchemaVersion),bytes:Vn("string")};class hg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new He(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class HT{constructor(e){this._methodName=e}}class Ss{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new He(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new He(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ss._jsonSchemaVersion}}static fromJSON(e){if(Cc(e,Ss._jsonSchema))return new Ss(e.latitude,e.longitude)}}Ss._jsonSchemaVersion="firestore/geoPoint/1.0",Ss._jsonSchema={type:Vn("string",Ss._jsonSchemaVersion),latitude:Vn("number"),longitude:Vn("number")};class As{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:As._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cc(e,As._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new As(e.vectorValues);throw new He(Ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}As._jsonSchemaVersion="firestore/vectorValue/1.0",As._jsonSchema={type:Vn("string",As._jsonSchemaVersion),vectorValues:Vn("object")};const bD=/^__.*__$/;class ED{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new sl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rc(e,this.data,n,this.fieldTransforms)}}function FT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e(40011,{Ac:i})}}class dg{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new dg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Th(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(FT(this.Ac)&&bD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class TD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Uh(e)}Cc(e,n,s,o=!1){return new dg({Ac:e,methodName:n,Dc:s,path:ir.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wD(i){const e=i._freezeSettings(),n=Uh(i._databaseId);return new TD(i._databaseId,!!e.ignoreUndefinedProperties,n)}function SD(i,e,n,s,o,u={}){const d=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);QT("Data must be an object, but it was:",d,s);const y=GT(s,d);let _,b;if(u.merge)_=new es(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const R=[];for(const I of u.mergeFields){const k=AD(e,I,n);if(!d.contains(k))throw new He(Ee.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);RD(R,k)||R.push(k)}_=new es(R),b=d.fieldTransforms.filter((I=>_.covers(I.field)))}else _=null,b=d.fieldTransforms;return new ED(new Li(y),_,b)}function KT(i,e){if(YT(i=ji(i)))return QT("Unsupported field value:",e,i),GT(i,e);if(i instanceof HT)return(function(s,o){if(!FT(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let d=0;for(const y of s){let _=KT(y,o.wc(d));_==null&&(_={nullValue:"NULL_VALUE"}),u.push(_),d++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=ji(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return l2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Wt.fromDate(s);return{timestampValue:vh(o.serializer,u)}}if(s instanceof Wt){const u=new Wt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:vh(o.serializer,u)}}if(s instanceof Ss)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ui)return{bytesValue:fT(o.serializer,s._byteString)};if(s instanceof Xn){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Xm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof As)return(function(d,y){return{mapValue:{fields:{[zE]:{stringValue:BE},[dh]:{arrayValue:{values:d.toArray().map((b=>{if(typeof b!="number")throw y.Sc("VectorValues must only contain numeric values.");return Gm(y.serializer,b)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${jm(s)}`)})(i,e)}function GT(i,e){const n={};return kE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rl(i,((s,o)=>{const u=KT(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function YT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Wt||i instanceof Ss||i instanceof Ui||i instanceof Xn||i instanceof HT||i instanceof As)}function QT(i,e,n){if(!YT(n)||!NE(n)){const s=jm(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function AD(i,e,n){if((e=ji(e))instanceof hg)return e._internalPath;if(typeof e=="string")return XT(i,e);throw Th("Field path arguments must be of type string or ",i,!1,void 0,n)}const CD=new RegExp("[~\\*/\\[\\]]");function XT(i,e,n){if(e.search(CD)>=0)throw Th(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new hg(...e.split("."))._internalPath}catch{throw Th(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Th(i,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let y=`Function ${e}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let _="";return(u||d)&&(_+=" (found",u&&(_+=` in field ${s}`),d&&(_+=` in document ${o}`),_+=")"),new He(Ee.INVALID_ARGUMENT,y+i+_)}function RD(i,e){return i.some((n=>n.isEqual(e)))}class $T{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ID(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(JT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ID extends $T{data(){return super.data()}}function JT(i,e){return typeof e=="string"?XT(i,e):e instanceof hg?e._internalPath:e._delegate._internalPath}class xD{convertValue(e,n="none"){switch(vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return An(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return rl(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[dh].arrayValue?.values?.map((s=>An(s.doubleValue)));return new As(n)}convertGeoPoint(e){return new Ss(An(e.latitude),An(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Dh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(dc(e));default:return null}}convertTimestamp(e){const n=go(e);return new Wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=fn.fromString(e);Pt(yT(s),9688,{name:e});const o=new pc(s.get(1),s.get(3)),u=new Ye(s.popFirst(5));return o.isEqual(n)||da(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function OD(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class Ju{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $o extends $T{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(JT("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new He(Ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$o._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$o._jsonSchemaVersion="firestore/documentSnapshot/1.0",$o._jsonSchema={type:Vn("string",$o._jsonSchemaVersion),bundleSource:Vn("string","DocumentSnapshot"),bundleName:Vn("string"),bundle:Vn("string")};class eh extends $o{data(e={}){return super.data(e)}}class sc{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ju(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new eh(this._firestore,this._userDataWriter,s.key,s,new Ju(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new He(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((y=>{const _=new eh(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Ju(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);return y.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((y=>u||y.type!==3)).map((y=>{const _=new eh(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Ju(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,R=-1;return y.type!==0&&(b=d.indexOf(y.doc.key),d=d.delete(y.doc.key)),y.type!==1&&(d=d.add(y.doc),R=d.indexOf(y.doc.key)),{type:DD(y.type),doc:_,oldIndex:b,newIndex:R}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new He(Ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=sc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Um.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function DD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e(61501,{type:i})}}function ND(i){i=fc(i,Xn);const e=fc(i.firestore,fg);return gD(qT(e),i._key).then((n=>PD(e,i,n)))}sc._jsonSchemaVersion="firestore/querySnapshot/1.0",sc._jsonSchema={type:Vn("string",sc._jsonSchemaVersion),bundleSource:Vn("string","QuerySnapshot"),bundleName:Vn("string"),bundle:Vn("string")};class MD extends xD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ui(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,n)}}function kD(i,e,n){i=fc(i,Xn);const s=fc(i.firestore,fg),o=OD(i.converter,e);return VD(s,[SD(wD(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,ua.none())])}function VD(i,e){return(function(s,o){const u=new po;return s.asyncQueue.enqueueAndForget((async()=>nD(await pD(s),o,u))),u.promise})(qT(i),e)}function PD(i,e,n){const s=n.docs.get(e._key),o=new MD(i);return new $o(i,o,e._key,s,new Ju(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){su=o})(ru),Ql(new Zo("firestore",((s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),y=new fg(new vx(s.getProvider("auth-internal")),new Ex(d,s.getProvider("app-check-internal")),(function(b,R){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new He(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pc(b.options.projectId,R)})(d,o),d);return u={useFetchStreams:n,...u},y._setSettings(u),y}),"PUBLIC").setMultipleInstances(!0)),fo(w0,S0,e),fo(w0,S0,"esm2020")})();const LD={apiKey:"AIzaSyCGabs1zTYUI0-yPRp2RD7_Zk4HLsd3kSc",authDomain:"gemini-podcast-cards.firebaseapp.com",projectId:"gemini-podcast-cards",storageBucket:"gemini-podcast-cards.firebasestorage.app",messagingSenderId:"535172285628",appId:"1:535172285628:web:1fa37b46cf2bdf89257cb9"},WT=Fb(LD),Bf=px(WT),UD=new aa,ZT=vD(WT),e1="users";async function jD(i,e){if(!i)throw new Error("User ID is required");try{const n=JSON.stringify(e),s=BT(ZT,e1,i);await kD(s,{vocab_data:n,last_synced:Date.now()}),console.log(`Successfully synced ${e.length} cards for user ${i}`)}catch(n){throw console.error("Sync upload failed:",n),n}}async function zD(i){if(!i)throw new Error("User ID is required");try{const e=BT(ZT,e1,i),n=await ND(e);if(n.exists()){const s=n.data();if(s.vocab_data)return JSON.parse(s.vocab_data)}return null}catch(e){throw console.error("Sync download failed:",e),e}}const yb="zanta0529@gmail.com,amy.webhd@gmail.com".split(",").map(i=>i.trim()).filter(i=>i!==""),BD=({isOpen:i,onClose:e,onConfirm:n,title:s,message:o})=>{const[u,d]=Te.useState(3);return Te.useEffect(()=>{if(i){d(3);const y=setInterval(()=>{d(_=>_<=1?(clearInterval(y),0):_-1)},1e3);return()=>clearInterval(y)}},[i]),i?L.jsx("div",{style:vb.overlay,children:L.jsxs("div",{style:vb.content,children:[L.jsxs("h3",{style:{marginTop:0,color:"#ff6b6b"},children:[" ",s]}),L.jsx("p",{style:{color:"#ccc",lineHeight:"1.5"},children:o}),L.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[L.jsx("button",{onClick:e,style:{...ac,backgroundColor:"#666"},children:"Cancel"}),L.jsx("button",{onClick:()=>{n(),e()},disabled:u>0,style:{...ac,backgroundColor:u>0?"#CCC":"#e03131",cursor:u>0?"not-allowed":"pointer",opacity:u>0?.7:1},children:u>0?`Wait (${u})...`:"Execute!"})]})]})}):null};function qD(){const[i,e]=Te.useState([]),[n,s]=Te.useState(!0),[o,u]=Te.useState(0),[d,y]=Te.useState(null),[_,b]=Te.useState(!1),[R,I]=Te.useState(!1),[k,X]=Te.useState(!1),[re,pe]=Te.useState(!1),[_e,ze]=Te.useState(!1),[Be,ke]=Te.useState(!1),[Je,yt]=Te.useState(!1),[Ge,D]=Te.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),N=(le,be,Ue)=>{D({isOpen:!0,title:le,message:be,onConfirm:Ue})};Te.useEffect(()=>{const le=rI(Bf,async be=>{be?yb.length===0||yb.includes(be.email)?(y(be),pt.success(`Welcome, ${be.displayName}`)):(console.warn(`Unauthorized: ${be.email}`),pt.error(`Access denied for ${be.email}`),await h0(Bf),y(null)):y(null)});return()=>le()},[]);const V=async()=>{try{s(!0),await Nw();const le=await nr.vocab.toArray(),be=Date.now(),Ue=le.filter(at=>at.nextReview<=be||at.status==="new");e(Ue)}catch(le){console.error("Failed to load cards:",le),pt.error("Load failed: "+le.message)}finally{s(!1)}};Te.useEffect(()=>{V()},[]);const B=async le=>{try{await nr.vocab.put(le),u(be=>be+1)}catch(be){console.error("Update failed:",be),pt.error("Update failed")}},z=async()=>{try{await wI(Bf,UD),ke(!1)}catch(le){console.error("Login failed:",le),pt.error("Login failed")}},Z=async()=>{await h0(Bf),window.location.reload()},P=async()=>{if(!d)return;b(!0),ke(!1);const le=pt.loading("Backing up...");try{const be=await nr.vocab.toArray();await jD(d.uid,be),pt.success("Backup complete!",{id:le})}catch(be){console.error(be),pt.error("Backup failed",{id:le})}finally{b(!1)}},qt=async()=>{d&&N("Overwrite Warning","Are you sure you want to overwrite local data with cloud backup? This action cannot be undone.",async()=>{b(!0),ke(!1);const le=pt.loading("Restoring...");try{const be=await zD(d.uid);be?(await nr.vocab.clear(),await nr.vocab.bulkAdd(be),pt.success("Restore complete! Reloading...",{id:le}),setTimeout(()=>window.location.reload(),1500)):pt("No backup found.",{id:le,icon:""})}catch(be){console.error(be),pt.error("Restore failed",{id:le})}finally{b(!1)}})};if(n)return L.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1b1e",color:"#fff"},children:"Loading..."});const Gt=i[o];return L.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",padding:"1rem",minHeight:"100vh",backgroundColor:"#1a1b1e",color:"#ffffff",fontFamily:"sans-serif",display:"flex",flexDirection:"column",gap:"0.5rem",alignItems:"center",position:"relative"},children:[L.jsx(AA,{position:"top-center",toastOptions:{style:{background:"#333",color:"#fff"}}}),L.jsx(BD,{isOpen:Ge.isOpen,onClose:()=>D(le=>({...le,isOpen:!1})),onConfirm:Ge.onConfirm,title:Ge.title,message:Ge.message}),L.jsxs("nav",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",padding:"0.5rem",borderBottom:"1px solid #333",position:"relative"},children:[L.jsxs("div",{style:{fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px"},children:["GPF",L.jsx("button",{onClick:()=>X(!0),style:HD,title:"Settings",children:""})]}),L.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[L.jsx("button",{onClick:()=>pe(!0),style:{...ac,backgroundColor:"#2196f3"},children:"+ Add"}),L.jsx("button",{onClick:()=>I(!0),style:{...ac,backgroundColor:"#e91e63"},children:"Import"}),L.jsx("button",{onClick:()=>ke(!Be),style:{...ac,backgroundColor:"#333",padding:"0.5rem 0.8rem",fontSize:"1.1rem"},children:""}),Be&&L.jsxs(L.Fragment,{children:[L.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99},onClick:()=>ke(!1)}),L.jsxs("div",{style:ys.container,children:[L.jsx("button",{onClick:()=>{ze(!0),ke(!1)},style:ys.item,children:" Manage Cards"}),L.jsx("button",{onClick:()=>{yt(!0),ke(!1)},style:ys.item,children:" AI Smart Review"}),L.jsx("div",{style:ys.divider}),d?L.jsxs(L.Fragment,{children:[L.jsx("button",{onClick:P,disabled:_,style:ys.item,children:" Backup Data"}),L.jsx("button",{onClick:qt,disabled:_,style:ys.item,children:" Restore Data"}),L.jsx("div",{style:ys.divider}),L.jsx("div",{style:ys.userEmail,children:d.email}),L.jsx("button",{onClick:Z,style:{...ys.item,color:"#ff6b6b"},children:"Logout"})]}):L.jsx("button",{onClick:z,style:{...ys.item,color:"#4285F4"},children:"Login with Google"})]})]})]})]}),L.jsxs("header",{style:{marginBottom:"0.5rem",width:"100%",textAlign:"center"},children:[L.jsx("h1",{style:{fontSize:"1.5rem",margin:"0 0 0.3rem 0"},children:"Gemini Flashcards"}),L.jsx("p",{style:{color:"#888",margin:0,fontSize:"0.9rem"},children:i.length>0?`Progress: ${o} / ${i.length}`:"No cards due"})]}),L.jsx("main",{style:{width:"100%",flex:1,display:"flex",flexDirection:"column"},children:Gt?L.jsx(PS,{card:Gt,onUpdate:B},Gt.id):L.jsxs("div",{style:{textAlign:"center",padding:"3rem",border:"1px dashed #555",borderRadius:"8px"},children:[L.jsx("h2",{children:" All caught up!"}),L.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"1rem",padding:"0.5rem 1rem",cursor:"pointer"},children:"Refresh"})]})}),L.jsx(CA,{isOpen:R,onClose:()=>I(!1),onSuccess:V}),L.jsx(RA,{isOpen:k,onClose:()=>X(!1)}),L.jsx(IA,{isOpen:re,onClose:()=>pe(!1),onSuccess:V}),L.jsx(xA,{isOpen:_e,onClose:()=>{ze(!1),V()}}),L.jsx(OA,{isOpen:Je,onClose:()=>yt(!1)})]})}const ac={padding:"0.5rem 1rem",fontSize:"0.9rem",borderRadius:"6px",border:"none",cursor:"pointer",color:"white",whiteSpace:"nowrap",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.3rem",transition:"opacity 0.2s"},HD={background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem"},ys={container:{position:"absolute",top:"3.5rem",right:"0.5rem",backgroundColor:"#25262b",border:"1px solid #444",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.5)",zIndex:100,display:"flex",flexDirection:"column",minWidth:"180px",padding:"0.5rem"},item:{background:"none",border:"none",color:"#e0e0e0",padding:"0.8rem 1rem",textAlign:"left",cursor:"pointer",borderRadius:"4px",fontSize:"0.95rem",transition:"background 0.2s"},divider:{height:"1px",backgroundColor:"#444",margin:"0.5rem 0"},userEmail:{padding:"0.5rem 1rem",fontSize:"0.75rem",color:"#888",borderBottom:"1px solid #333",marginBottom:"0.5rem"}},vb={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},content:{backgroundColor:"#25262b",padding:"2rem",borderRadius:"12px",maxWidth:"400px",width:"90%",border:"1px solid #444",boxShadow:"0 8px 30px rgba(0,0,0,0.5)"}};Iw.createRoot(document.getElementById("root")).render(L.jsx(_b.StrictMode,{children:L.jsx(qD,{})}));
