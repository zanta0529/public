(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();const K={appModeSelector:document.getElementById("appModeSelector"),textModeSection:document.getElementById("text-mode-section"),fileModeSection:document.getElementById("file-mode-section"),modeSelector:document.getElementById("modeSelector"),encryptSection:document.getElementById("encrypt-section"),decryptSection:document.getElementById("decrypt-section"),mnemonic:document.getElementById("mnemonic"),ciphertextInput:document.getElementById("ciphertext-input"),passphraseEncrypt:document.getElementById("passphrase-encrypt"),passphraseDecrypt:document.getElementById("passphrase-decrypt"),algoSelectionGroup:document.getElementById("algoSelectionGroup"),kdfSelectionGroup:document.getElementById("kdfSelectionGroup"),argon2ParamsSection:document.querySelector('.kdf-params-section[data-kdf="Argon2id"]'),pbkdf2ParamsSection:document.querySelector('.kdf-params-section[data-kdf="PBKDF2"]'),argon2Memory:document.getElementById("argon2-memory"),argon2Iterations:document.getElementById("argon2-iterations"),argon2Parallelism:document.getElementById("argon2-parallelism"),pbkdf2Iterations:document.getElementById("pbkdf2-iterations"),encryptBtn:document.getElementById("encryptBtn"),decryptBtn:document.getElementById("decryptBtn"),parseBtn:document.getElementById("parseBtn"),benchmarkBtn:document.getElementById("benchmarkBtn"),benchmarkStatus:document.getElementById("benchmarkStatus"),selfVerifyCheckbox:document.getElementById("self-verify-checkbox"),selfVerifyFileCheckbox:document.getElementById("self-verify-file-checkbox"),passwordStrengthBarEncrypt:document.getElementById("password-strength-bar-encrypt"),passwordStrengthTextEncrypt:document.getElementById("password-strength-text-encrypt"),passwordStrengthBarFile:document.getElementById("password-strength-bar-file"),passwordStrengthTextFile:document.getElementById("password-strength-text-file"),compressCheckbox:document.getElementById("compress-checkbox"),fileEncryptInput:document.getElementById("file-encrypt-input"),fileEncryptList:document.getElementById("file-encrypt-list"),passphraseFileEncrypt:document.getElementById("passphrase-file-encrypt"),encryptFileBtn:document.getElementById("encryptFileBtn"),fileDecryptInput:document.getElementById("file-decrypt-input"),fileDecryptList:document.getElementById("file-decrypt-list"),passphraseFileDecrypt:document.getElementById("passphrase-file-decrypt"),decryptFileBtn:document.getElementById("decryptFileBtn"),pasteBtn:document.getElementById("pasteBtn"),resetBtn:document.getElementById("resetBtn"),resultsArea:document.getElementById("results-area"),textModeResults:document.getElementById("text-mode-results"),output:document.getElementById("output"),copyBtn:document.getElementById("copyBtn"),downloadBtn:document.getElementById("downloadBtn"),qrCanvas:document.getElementById("qrCanvas"),jsonView:document.getElementById("jsonView"),base64ResultView:document.getElementById("base64ResultView"),paramsDisplayArea:document.getElementById("params-display-area"),passwordToggles:document.querySelectorAll(".toggle-password-icon"),decryptionActions:document.getElementById("decryption-actions"),copyDecryptedBtn:document.getElementById("copyDecryptedBtn"),themeToggleBtn:document.getElementById("themeToggleBtn"),currentYear:document.getElementById("currentYear"),toast:document.getElementById("toast"),scrollTopBtn:document.getElementById("scroll-to-top"),accordionContainer:document.querySelector(".accordion")},Y={currentAppMode:null,currentMode:null,selectedKDF:null,toastTimer:null,lastEncryptedOutput:null,lastDecryptedText:null,filesToEncrypt:[],filesToDecrypt:[],isCompressionEnabled:!1},X={VERSION:4,SALT_BYTES:16,NONCE_BYTES:12,KEY_LENGTH_BITS:256,QR_CODE_MAX_BYTES:2953,FILE_SIZE_LIMIT_BYTES:10*1024*1024,ARGON2_MIN_MEM_MB:128,ARGON2_MIN_ITER:4,ARGON2_MIN_PARALLELISM:1,ARGON2_MIN_TIME:1,ARGON2_MIN_PARA:4,SVG_EYE_OPEN:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/><path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/></svg>',SVG_EYE_SLASH:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7.029 7.029 0 0 0 2.79-.588zM5.21 3.088A7.028 7.028 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474L5.21 3.089z"/><path d="M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829l-2.83-2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12-.708.708z"/></svg>',MODE_TEXT:"text",MODE_FILE:"file",OP_ENCRYPT:"encrypt",OP_DECRYPT:"decrypt",ALGO_AES_GCM:"A256GCM",ALGO_CHACHA:"ChaCha20-Poly1305",ALGO_PBES2:"PBES2-HS512+A256KW",KDF_ARGON2:"Argon2id",HASH_SHA256:"SHA-256",DOWNLOAD_FILENAME_SUFFIX:".jwe"},pt={copyFromResult(){Y.lastEncryptedOutput&&navigator.clipboard.writeText(Y.lastEncryptedOutput).then(()=>this.showToast("✅ 已複製 JWE 密文！"),()=>this.showToast("❌ 複製失敗"))},copyDecryptedResult(){Y.lastDecryptedText&&navigator.clipboard.writeText(Y.lastDecryptedText).then(()=>this.showToast("✅ 已複製解密結果！"),()=>this.showToast("❌ 複製失敗"))},pasteTo(t){navigator.clipboard.readText().then(r=>{K[t].value=r,this.showToast("✅ 已貼上內容！")},()=>this.showToast("❌ 貼上失敗"))},downloadAsFile(t,r){const e=t instanceof Blob?t:new Blob([t],{type:"text/plain"}),n=URL.createObjectURL(e),s=document.createElement("a");s.href=n,s.download=r,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)},showToast(t){Y.toastTimer&&clearTimeout(Y.toastTimer),K.toast.textContent=t,K.toast.className="show",Y.toastTimer=setTimeout(()=>{K.toast.className="",Y.toastTimer=null},3e3)},async checkArgon2Ready(){return typeof argon2<"u"?!0:new Promise(t=>{setTimeout(()=>{typeof argon2<"u"?t(!0):(this.showToast("❌ Argon2 函式庫載入失敗！","error"),t(!1))},1e3)})},runSecurityChecks(t,r){if(this.checkPasswordStrength(t).level==="weak"&&this.showToast("⚠️ 警告：密碼強度較弱，建議使用更複雜的密碼。"),r===X.KDF_ARGON2){const n=parseInt(K.argon2Memory.value,10),s=parseInt(K.argon2Iterations.value,10),i=parseInt(K.argon2Parallelism.value,10);if(n<X.ARGON2_MIN_MEM_MB||s<X.ARGON2_MIN_ITER||i<X.ARGON2_MIN_PARA)return this.showToast("❌ 安全性警告：Argon2 參數過低！"),!1}return!0},checkPasswordStrength(t){let r=0,e="",n="empty";return t.length===0?{score:0,message:"",level:"empty"}:(t.length>=8&&(r+=25),t.length>=12&&(r+=25),/[a-z]/.test(t)&&/[A-Z]/.test(t)&&(r+=20),/\d/.test(t)&&(r+=15),/[^a-zA-Z0-9]/.test(t)&&(r+=15),r=Math.min(r,100),r<50?(e="強度：弱",n="weak"):r<85?(e="強度：中等",n="medium"):(e="強度：強",n="strong"),{score:r,message:e,level:n})}};function je(t){return t<1024*1024?`${(t/1024).toFixed(2)} KB`:`${(t/1024/1024).toFixed(2)} MB`}const lt={setAppMode(t){Y.currentAppMode=t;const r=t===X.MODE_TEXT;this.handleOptionSelection({target:K.appModeSelector.querySelector(`[data-app-mode="${t}"]`)}),K.textModeSection.hidden=!r,K.fileModeSection.hidden=r,this.setMode(X.OP_ENCRYPT)},setMode(t){this.resetAll(),Y.currentMode=t;const r=t===X.OP_ENCRYPT;this.handleOptionSelection({target:K.modeSelector.querySelector(`[data-mode="${t}"]`)}),K.encryptSection.hidden=!r,K.decryptSection.hidden=r,K.pasteBtn.hidden=r},handleOptionSelection(t,r){const e=t.target.closest(".option");return e&&!e.classList.contains("selected")&&!e.style.cursor.includes("not-allowed")?(e.parentElement.querySelector(".selected")?.classList.remove("selected"),e.classList.add("selected"),r&&(Y[r]=e.dataset.value),!0):!1},toggleKdfParams(t){if(document.querySelectorAll(".kdf-params-section").forEach(r=>{r.hidden=!0}),t===X.KDF_ARGON2){const r=document.querySelector(`.kdf-params-section[data-kdf="${t}"]`);r&&(r.hidden=!1)}},setOutput(t,r){K.resultsArea.hidden=!1,K.output.className=`output-box ${t}`;let e=r;if(t==="success"&&Y.currentMode===X.OP_DECRYPT){if(Y.currentAppMode===X.MODE_FILE)e=r.includes("下載")?`${r}<br>✅ <strong>所有檔案完整性驗證通過</strong>`:r;else if(r.startsWith("✅ 解密成功")){const n=r.split("<br><br>");e=`${n[0]}<br>✅ <strong>檔案完整性驗證通過</strong><br><br>${n[1]}`}}K.output.innerHTML=e,K.textModeResults.hidden=!0,K.decryptionActions.hidden=!0,t==="success"&&Y.currentAppMode===X.MODE_TEXT&&(Y.currentMode===X.OP_ENCRYPT?K.textModeResults.hidden=!1:K.decryptionActions.hidden=!1)},updateFileLists(){const t=K.fileEncryptList,r=K.fileDecryptList;t.innerHTML="",r.innerHTML="",Y.filesToEncrypt.length>0?(Y.filesToEncrypt.forEach(e=>{const n=document.createElement("li");n.textContent=`${e.name} (${je(e.size)})`,t.appendChild(n)}),t.hidden=!1):t.hidden=!0,Y.filesToDecrypt.length>0?(Y.filesToDecrypt.forEach(e=>{const n=document.createElement("li");n.textContent=`${e.name} (${je(e.size)})`,r.appendChild(n)}),r.hidden=!1):r.hidden=!0},resetAll(){if(["mnemonic","ciphertextInput","passphraseEncrypt","passphraseDecrypt","passphraseFileEncrypt","passphraseFileDecrypt"].forEach(r=>K[r]?K[r].value="":null),this.updatePasswordStrength("","encrypt"),this.updatePasswordStrength("","file"),K.fileEncryptInput.value="",K.fileDecryptInput.value="",Y.filesToEncrypt=[],Y.filesToDecrypt=[],this.updateFileLists(),K.resultsArea.hidden=!0,K.textModeResults.hidden=!0,K.decryptionActions.hidden=!0,K.paramsDisplayArea.hidden=!0,Y.lastEncryptedOutput=null,Y.lastDecryptedText=null,Y.selectedAlgorithm=X.ALGO_AES_GCM,Y.selectedKDF=X.KDF_ARGON2,this.handleOptionSelection({target:K.algoSelectionGroup.querySelector(`[data-value="${X.ALGO_AES_GCM}"]`)},"selectedAlgorithm"),this.handleOptionSelection({target:K.kdfSelectionGroup.querySelector(`[data-value="${X.KDF_ARGON2}"]`)},"selectedKDF"),this.toggleKdfParams(Y.selectedKDF),K.qrCanvas){const r=K.qrCanvas.getContext("2d");r&&r.clearRect(0,0,K.qrCanvas.width,K.qrCanvas.height)}},togglePasswordVisibility(t){const r=document.getElementById(t.dataset.for);r.type==="password"?(r.type="text",t.innerHTML=X.SVG_EYE_SLASH):(r.type="password",t.innerHTML=X.SVG_EYE_OPEN)},updatePasswordStrength(t,r){const e=pt.checkPasswordStrength(t),n=r==="encrypt"?K.passwordStrengthBarEncrypt:K.passwordStrengthBarFile,s=r==="encrypt"?K.passwordStrengthTextEncrypt:K.passwordStrengthTextFile;n.className="password-strength-meter-bar",e.level!=="empty"&&n.classList.add(`strength-${e.level}`),n.style.width=e.score+"%",s.textContent=e.message}};function Ye(t){return t<1024*1024?`${(t/1024).toFixed(2)} KB`:`${(t/1024/1024).toFixed(2)} MB`}const se={handleFileSelect(t,r){const e=t.target.files;if(!e||e.length===0)return;const n=r===X.OP_ENCRYPT,s=n?K.fileEncryptList:K.fileDecryptList,i=n?"filesToEncrypt":"filesToDecrypt";s.innerHTML="",Y[i]=[],Array.from(e).forEach(o=>{const a=document.createElement("li");a.className="file-list-item",o.size>X.FILE_SIZE_LIMIT_BYTES?(a.innerHTML=`
                    <span>${o.name}</span>
                    <span class="file-size error">${Ye(o.size)} - 檔案過大</span>
                `,a.classList.add("error")):(a.innerHTML=`
                    <span>${o.name}</span>
                    <span class="file-size">${Ye(o.size)}</span>
                `,Y[i].push(o)),s.appendChild(a)}),s.hidden=!1},readFileAsArrayBuffer:t=>t.arrayBuffer(),readFileAsText:t=>t.text()},ct=crypto,St=t=>t instanceof CryptoKey,dn=async(t,r)=>{const e=`SHA-${t.slice(-3)}`;return new Uint8Array(await ct.subtle.digest(e,r))},Bt=new TextEncoder,Zt=new TextDecoder,ae=2**32;function Dt(...t){const r=t.reduce((s,{length:i})=>s+i,0),e=new Uint8Array(r);let n=0;for(const s of t)e.set(s,n),n+=s.length;return e}function fn(t,r){return Dt(Bt.encode(t),new Uint8Array([0]),r)}function Ne(t,r,e){if(r<0||r>=ae)throw new RangeError(`value must be >= 0 and <= ${ae-1}. Received ${r}`);t.set([r>>>24,r>>>16,r>>>8,r&255],e)}function Dr(t){const r=Math.floor(t/ae),e=t%ae,n=new Uint8Array(8);return Ne(n,r,0),Ne(n,e,4),n}function Je(t){const r=new Uint8Array(4);return Ne(r,t),r}function he(t){return Dt(Je(t.length),t)}async function hn(t,r,e){const n=Math.ceil((r>>3)/32),s=new Uint8Array(n*32);for(let i=0;i<n;i++){const o=new Uint8Array(4+t.length+e.length);o.set(Je(i+1)),o.set(t,4),o.set(e,4+t.length),s.set(await dn("sha256",o),i*32)}return s.slice(0,r>>3)}const pn=t=>{let r=t;typeof r=="string"&&(r=Bt.encode(r));const e=32768,n=[];for(let s=0;s<r.length;s+=e)n.push(String.fromCharCode.apply(null,r.subarray(s,s+e)));return btoa(n.join(""))},At=t=>pn(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),mn=t=>{const r=atob(t),e=new Uint8Array(r.length);for(let n=0;n<r.length;n++)e[n]=r.charCodeAt(n);return e},wt=t=>{let r=t;r instanceof Uint8Array&&(r=Zt.decode(r)),r=r.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return mn(r)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class _t extends Error{constructor(r,e){super(r,e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}_t.code="ERR_JOSE_GENERIC";class gn extends _t{constructor(r,e,n="unspecified",s="unspecified"){super(r,{cause:{claim:n,reason:s,payload:e}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=n,this.reason=s,this.payload=e}}gn.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class yn extends _t{constructor(r,e,n="unspecified",s="unspecified"){super(r,{cause:{claim:n,reason:s,payload:e}}),this.code="ERR_JWT_EXPIRED",this.claim=n,this.reason=s,this.payload=e}}yn.code="ERR_JWT_EXPIRED";class Fe extends _t{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}Fe.code="ERR_JOSE_ALG_NOT_ALLOWED";class yt extends _t{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}yt.code="ERR_JOSE_NOT_SUPPORTED";class oe extends _t{constructor(r="decryption operation failed",e){super(r,e),this.code="ERR_JWE_DECRYPTION_FAILED"}}oe.code="ERR_JWE_DECRYPTION_FAILED";class tt extends _t{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}tt.code="ERR_JWE_INVALID";class wn extends _t{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}wn.code="ERR_JWS_INVALID";class _n extends _t{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}_n.code="ERR_JWT_INVALID";class En extends _t{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}En.code="ERR_JWK_INVALID";class bn extends _t{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}bn.code="ERR_JWKS_INVALID";class vn extends _t{constructor(r="no applicable key found in the JSON Web Key Set",e){super(r,e),this.code="ERR_JWKS_NO_MATCHING_KEY"}}vn.code="ERR_JWKS_NO_MATCHING_KEY";class An extends _t{constructor(r="multiple matching keys found in the JSON Web Key Set",e){super(r,e),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}An.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";class Sn extends _t{constructor(r="request timed out",e){super(r,e),this.code="ERR_JWKS_TIMEOUT"}}Sn.code="ERR_JWKS_TIMEOUT";class Cn extends _t{constructor(r="signature verification failed",e){super(r,e),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}Cn.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";const Ge=ct.getRandomValues.bind(ct);function zr(t){switch(t){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new yt(`Unsupported JWE Algorithm: ${t}`)}}const kn=t=>Ge(new Uint8Array(zr(t)>>3)),Lr=(t,r)=>{if(r.length<<3!==zr(t))throw new tt("Invalid Initialization Vector length")},ce=(t,r)=>{const e=t.byteLength<<3;if(e!==r)throw new tt(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`)},In=(t,r)=>{if(!(t instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(r instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(t.length!==r.length)throw new TypeError("Input buffers must have the same length");const e=t.length;let n=0,s=-1;for(;++s<e;)n|=t[s]^r[s];return n===0};function Rt(t,r="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${r} must be ${t}`)}function Qt(t,r){return t.name===r}function Tn(t){return parseInt(t.name.slice(4),10)}function Bn(t,r){if(r.length&&!r.some(e=>t.usages.includes(e))){let e="CryptoKey does not support this operation, its usages must include ";if(r.length>2){const n=r.pop();e+=`one of ${r.join(", ")}, or ${n}.`}else r.length===2?e+=`one of ${r[0]} or ${r[1]}.`:e+=`${r[0]}.`;throw new TypeError(e)}}function Pt(t,r,...e){switch(r){case"A128GCM":case"A192GCM":case"A256GCM":{if(!Qt(t.algorithm,"AES-GCM"))throw Rt("AES-GCM");const n=parseInt(r.slice(1,4),10);if(t.algorithm.length!==n)throw Rt(n,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!Qt(t.algorithm,"AES-KW"))throw Rt("AES-KW");const n=parseInt(r.slice(1,4),10);if(t.algorithm.length!==n)throw Rt(n,"algorithm.length");break}case"ECDH":{switch(t.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw Rt("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!Qt(t.algorithm,"PBKDF2"))throw Rt("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!Qt(t.algorithm,"RSA-OAEP"))throw Rt("RSA-OAEP");const n=parseInt(r.slice(9),10)||1;if(Tn(t.algorithm.hash)!==n)throw Rt(`SHA-${n}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}Bn(t,e)}function Mr(t,r,...e){if(e=e.filter(Boolean),e.length>2){const n=e.pop();t+=`one of type ${e.join(", ")}, or ${n}.`}else e.length===2?t+=`one of type ${e[0]} or ${e[1]}.`:t+=`of type ${e[0]}.`;return r==null?t+=` Received ${r}`:typeof r=="function"&&r.name?t+=` Received function ${r.name}`:typeof r=="object"&&r!=null&&r.constructor?.name&&(t+=` Received an instance of ${r.constructor.name}`),t}const Et=(t,...r)=>Mr("Key must be ",t,...r);function Nr(t,r,...e){return Mr(`Key for the ${t} algorithm must be `,r,...e)}const Fr=t=>St(t)?!0:t?.[Symbol.toStringTag]==="KeyObject",bt=["CryptoKey"];async function xn(t,r,e,n,s,i){if(!(r instanceof Uint8Array))throw new TypeError(Et(r,"Uint8Array"));const o=parseInt(t.slice(1,4),10),a=await ct.subtle.importKey("raw",r.subarray(o>>3),"AES-CBC",!1,["decrypt"]),l=await ct.subtle.importKey("raw",r.subarray(0,o>>3),{hash:`SHA-${o<<1}`,name:"HMAC"},!1,["sign"]),p=Dt(i,n,e,Dr(i.length<<3)),_=new Uint8Array((await ct.subtle.sign("HMAC",l,p)).slice(0,o>>3));let E;try{E=In(s,_)}catch{}if(!E)throw new oe;let b;try{b=new Uint8Array(await ct.subtle.decrypt({iv:n,name:"AES-CBC"},a,e))}catch{}if(!b)throw new oe;return b}async function Rn(t,r,e,n,s,i){let o;r instanceof Uint8Array?o=await ct.subtle.importKey("raw",r,"AES-GCM",!1,["decrypt"]):(Pt(r,t,"decrypt"),o=r);try{return new Uint8Array(await ct.subtle.decrypt({additionalData:i,iv:n,name:"AES-GCM",tagLength:128},o,Dt(e,s)))}catch{throw new oe}}const Kr=async(t,r,e,n,s,i)=>{if(!St(r)&&!(r instanceof Uint8Array))throw new TypeError(Et(r,...bt,"Uint8Array"));if(!n)throw new tt("JWE Initialization Vector missing");if(!s)throw new tt("JWE Authentication Tag missing");switch(Lr(t,n),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&ce(r,parseInt(t.slice(-3),10)),xn(t,r,e,n,s,i);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&ce(r,parseInt(t.slice(1,4),10)),Rn(t,r,e,n,s,i);default:throw new yt("Unsupported JWE Content Encryption Algorithm")}},Ur=(...t)=>{const r=t.filter(Boolean);if(r.length===0||r.length===1)return!0;let e;for(const n of r){const s=Object.keys(n);if(!e||e.size===0){e=new Set(s);continue}for(const i of s){if(e.has(i))return!1;e.add(i)}}return!0};function On(t){return typeof t=="object"&&t!==null}function zt(t){if(!On(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let r=t;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}const de=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function Wr(t,r){if(t.algorithm.length!==parseInt(r.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${r}`)}function Hr(t,r,e){if(St(t))return Pt(t,r,e),t;if(t instanceof Uint8Array)return ct.subtle.importKey("raw",t,"AES-KW",!0,[e]);throw new TypeError(Et(t,...bt,"Uint8Array"))}const Ke=async(t,r,e)=>{const n=await Hr(r,t,"wrapKey");Wr(n,t);const s=await ct.subtle.importKey("raw",e,...de);return new Uint8Array(await ct.subtle.wrapKey("raw",s,n,"AES-KW"))},Ue=async(t,r,e)=>{const n=await Hr(r,t,"unwrapKey");Wr(n,t);const s=await ct.subtle.unwrapKey("raw",e,n,"AES-KW",...de);return new Uint8Array(await ct.subtle.exportKey("raw",s))};async function Jr(t,r,e,n,s=new Uint8Array(0),i=new Uint8Array(0)){if(!St(t))throw new TypeError(Et(t,...bt));if(Pt(t,"ECDH"),!St(r))throw new TypeError(Et(r,...bt));Pt(r,"ECDH","deriveBits");const o=Dt(he(Bt.encode(e)),he(s),he(i),Je(n));let a;t.algorithm.name==="X25519"?a=256:t.algorithm.name==="X448"?a=448:a=Math.ceil(parseInt(t.algorithm.namedCurve.substr(-3),10)/8)<<3;const l=new Uint8Array(await ct.subtle.deriveBits({name:t.algorithm.name,public:t},r,a));return hn(l,n,o)}async function Pn(t){if(!St(t))throw new TypeError(Et(t,...bt));return ct.subtle.generateKey(t.algorithm,!0,["deriveBits"])}function Gr(t){if(!St(t))throw new TypeError(Et(t,...bt));return["P-256","P-384","P-521"].includes(t.algorithm.namedCurve)||t.algorithm.name==="X25519"||t.algorithm.name==="X448"}function Dn(t){if(!(t instanceof Uint8Array)||t.length<8)throw new tt("PBES2 Salt Input must be 8 or more octets")}function zn(t,r){if(t instanceof Uint8Array)return ct.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits"]);if(St(t))return Pt(t,r,"deriveBits","deriveKey"),t;throw new TypeError(Et(t,...bt,"Uint8Array"))}async function $r(t,r,e,n){Dn(t);const s=fn(r,t),i=parseInt(r.slice(13,16),10),o={hash:`SHA-${r.slice(8,11)}`,iterations:e,name:"PBKDF2",salt:s},a={length:i,name:"AES-KW"},l=await zn(n,r);if(l.usages.includes("deriveBits"))return new Uint8Array(await ct.subtle.deriveBits(o,l,i));if(l.usages.includes("deriveKey"))return ct.subtle.deriveKey(o,l,a,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const Ln=async(t,r,e,n=2048,s=Ge(new Uint8Array(16)))=>{const i=await $r(s,t,n,r);return{encryptedKey:await Ke(t.slice(-6),i,e),p2c:n,p2s:At(s)}},Mn=async(t,r,e,n,s)=>{const i=await $r(s,t,n,r);return Ue(t.slice(-6),i,e)};function le(t){switch(t){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new yt(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}const qr=(t,r)=>{if(t.startsWith("RS")||t.startsWith("PS")){const{modulusLength:e}=r.algorithm;if(typeof e!="number"||e<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}},Nn=async(t,r,e)=>{if(!St(r))throw new TypeError(Et(r,...bt));if(Pt(r,t,"encrypt","wrapKey"),qr(t,r),r.usages.includes("encrypt"))return new Uint8Array(await ct.subtle.encrypt(le(t),r,e));if(r.usages.includes("wrapKey")){const n=await ct.subtle.importKey("raw",e,...de);return new Uint8Array(await ct.subtle.wrapKey("raw",n,r,le(t)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},Fn=async(t,r,e)=>{if(!St(r))throw new TypeError(Et(r,...bt));if(Pt(r,t,"decrypt","unwrapKey"),qr(t,r),r.usages.includes("decrypt"))return new Uint8Array(await ct.subtle.decrypt(le(t),r,e));if(r.usages.includes("unwrapKey")){const n=await ct.subtle.unwrapKey("raw",e,r,le(t),...de);return new Uint8Array(await ct.subtle.exportKey("raw",n))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function jt(t){return zt(t)&&typeof t.kty=="string"}function Kn(t){return t.kty!=="oct"&&typeof t.d=="string"}function Un(t){return t.kty!=="oct"&&typeof t.d>"u"}function Wn(t){return jt(t)&&t.kty==="oct"&&typeof t.k=="string"}function Hn(t){let r,e;switch(t.kty){case"RSA":{switch(t.alg){case"PS256":case"PS384":case"PS512":r={name:"RSA-PSS",hash:`SHA-${t.alg.slice(-3)}`},e=t.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":r={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.alg.slice(-3)}`},e=t.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":r={name:"RSA-OAEP",hash:`SHA-${parseInt(t.alg.slice(-3),10)||1}`},e=t.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new yt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(t.alg){case"ES256":r={name:"ECDSA",namedCurve:"P-256"},e=t.d?["sign"]:["verify"];break;case"ES384":r={name:"ECDSA",namedCurve:"P-384"},e=t.d?["sign"]:["verify"];break;case"ES512":r={name:"ECDSA",namedCurve:"P-521"},e=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":r={name:"ECDH",namedCurve:t.crv},e=t.d?["deriveBits"]:[];break;default:throw new yt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(t.alg){case"Ed25519":r={name:"Ed25519"},e=t.d?["sign"]:["verify"];break;case"EdDSA":r={name:t.crv},e=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":r={name:t.crv},e=t.d?["deriveBits"]:[];break;default:throw new yt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new yt('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:r,keyUsages:e}}const Vr=async t=>{if(!t.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:r,keyUsages:e}=Hn(t),n=[r,t.ext??!1,t.key_ops??e],s={...t};return delete s.alg,delete s.use,ct.subtle.importKey("jwk",s,...n)},Zr=t=>wt(t);let Nt,Ft;const jr=t=>t?.[Symbol.toStringTag]==="KeyObject",ue=async(t,r,e,n,s=!1)=>{let i=t.get(r);if(i?.[n])return i[n];const o=await Vr({...e,alg:n});return s&&Object.freeze(r),i?i[n]=o:t.set(r,{[n]:o}),o},Jn=(t,r)=>{if(jr(t)){let e=t.export({format:"jwk"});return delete e.d,delete e.dp,delete e.dq,delete e.p,delete e.q,delete e.qi,e.k?Zr(e.k):(Ft||(Ft=new WeakMap),ue(Ft,t,e,r))}return jt(t)?t.k?wt(t.k):(Ft||(Ft=new WeakMap),ue(Ft,t,t,r,!0)):t},Gn=(t,r)=>{if(jr(t)){let e=t.export({format:"jwk"});return e.k?Zr(e.k):(Nt||(Nt=new WeakMap),ue(Nt,t,e,r))}return jt(t)?t.k?wt(t.k):(Nt||(Nt=new WeakMap),ue(Nt,t,t,r,!0)):t},Yr={normalizePublicKey:Jn,normalizePrivateKey:Gn};function $e(t){switch(t){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new yt(`Unsupported JWE Algorithm: ${t}`)}}const Ut=t=>Ge(new Uint8Array($e(t)>>3));async function $n(t,r){if(!zt(t))throw new TypeError("JWK must be an object");switch(r||(r=t.alg),t.kty){case"oct":if(typeof t.k!="string"||!t.k)throw new TypeError('missing "k" (Key Value) Parameter value');return wt(t.k);case"RSA":if("oth"in t&&t.oth!==void 0)throw new yt('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Vr({...t,alg:r});default:throw new yt('Unsupported "kty" (Key Type) Parameter value')}}const Wt=t=>t?.[Symbol.toStringTag],We=(t,r,e)=>{if(r.use!==void 0&&r.use!=="sig")throw new TypeError("Invalid key for this operation, when present its use must be sig");if(r.key_ops!==void 0&&r.key_ops.includes?.(e)!==!0)throw new TypeError(`Invalid key for this operation, when present its key_ops must include ${e}`);if(r.alg!==void 0&&r.alg!==t)throw new TypeError(`Invalid key for this operation, when present its alg must be ${t}`);return!0},qn=(t,r,e,n)=>{if(!(r instanceof Uint8Array)){if(n&&jt(r)){if(Wn(r)&&We(t,r,e))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!Fr(r))throw new TypeError(Nr(t,r,...bt,"Uint8Array",n?"JSON Web Key":null));if(r.type!=="secret")throw new TypeError(`${Wt(r)} instances for symmetric algorithms must be of type "secret"`)}},Vn=(t,r,e,n)=>{if(n&&jt(r))switch(e){case"sign":if(Kn(r)&&We(t,r,e))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(Un(r)&&We(t,r,e))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!Fr(r))throw new TypeError(Nr(t,r,...bt,n?"JSON Web Key":null));if(r.type==="secret")throw new TypeError(`${Wt(r)} instances for asymmetric algorithms must not be of type "secret"`);if(e==="sign"&&r.type==="public")throw new TypeError(`${Wt(r)} instances for asymmetric algorithm signing must be of type "private"`);if(e==="decrypt"&&r.type==="public")throw new TypeError(`${Wt(r)} instances for asymmetric algorithm decryption must be of type "private"`);if(r.algorithm&&e==="verify"&&r.type==="private")throw new TypeError(`${Wt(r)} instances for asymmetric algorithm verifying must be of type "public"`);if(r.algorithm&&e==="encrypt"&&r.type==="private")throw new TypeError(`${Wt(r)} instances for asymmetric algorithm encryption must be of type "public"`)};function Xr(t,r,e,n){r.startsWith("HS")||r==="dir"||r.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(r)?qn(r,e,n,t):Vn(r,e,n,t)}const Qr=Xr.bind(void 0,!1);Xr.bind(void 0,!0);async function Zn(t,r,e,n,s){if(!(e instanceof Uint8Array))throw new TypeError(Et(e,"Uint8Array"));const i=parseInt(t.slice(1,4),10),o=await ct.subtle.importKey("raw",e.subarray(i>>3),"AES-CBC",!1,["encrypt"]),a=await ct.subtle.importKey("raw",e.subarray(0,i>>3),{hash:`SHA-${i<<1}`,name:"HMAC"},!1,["sign"]),l=new Uint8Array(await ct.subtle.encrypt({iv:n,name:"AES-CBC"},o,r)),p=Dt(s,n,l,Dr(s.length<<3)),_=new Uint8Array((await ct.subtle.sign("HMAC",a,p)).slice(0,i>>3));return{ciphertext:l,tag:_,iv:n}}async function jn(t,r,e,n,s){let i;e instanceof Uint8Array?i=await ct.subtle.importKey("raw",e,"AES-GCM",!1,["encrypt"]):(Pt(e,t,"encrypt"),i=e);const o=new Uint8Array(await ct.subtle.encrypt({additionalData:s,iv:n,name:"AES-GCM",tagLength:128},i,r)),a=o.slice(-16);return{ciphertext:o.slice(0,-16),tag:a,iv:n}}const tn=async(t,r,e,n,s)=>{if(!St(e)&&!(e instanceof Uint8Array))throw new TypeError(Et(e,...bt,"Uint8Array"));switch(n?Lr(t,n):n=kn(t),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return e instanceof Uint8Array&&ce(e,parseInt(t.slice(-3),10)),Zn(t,r,e,n,s);case"A128GCM":case"A192GCM":case"A256GCM":return e instanceof Uint8Array&&ce(e,parseInt(t.slice(1,4),10)),jn(t,r,e,n,s);default:throw new yt("Unsupported JWE Content Encryption Algorithm")}};async function Yn(t,r,e,n){const s=t.slice(0,7),i=await tn(s,e,r,n,new Uint8Array(0));return{encryptedKey:i.ciphertext,iv:At(i.iv),tag:At(i.tag)}}async function Xn(t,r,e,n,s){const i=t.slice(0,7);return Kr(i,r,e,n,s,new Uint8Array(0))}async function Qn(t,r,e,n,s){switch(Qr(t,r,"decrypt"),r=await Yr.normalizePrivateKey?.(r,t)||r,t){case"dir":{if(e!==void 0)throw new tt("Encountered unexpected JWE Encrypted Key");return r}case"ECDH-ES":if(e!==void 0)throw new tt("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!zt(n.epk))throw new tt('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!Gr(r))throw new yt("ECDH with the provided key is not allowed or not supported by your javascript runtime");const i=await $n(n.epk,t);let o,a;if(n.apu!==void 0){if(typeof n.apu!="string")throw new tt('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{o=wt(n.apu)}catch{throw new tt("Failed to base64url decode the apu")}}if(n.apv!==void 0){if(typeof n.apv!="string")throw new tt('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=wt(n.apv)}catch{throw new tt("Failed to base64url decode the apv")}}const l=await Jr(i,r,t==="ECDH-ES"?n.enc:t,t==="ECDH-ES"?$e(n.enc):parseInt(t.slice(-5,-2),10),o,a);if(t==="ECDH-ES")return l;if(e===void 0)throw new tt("JWE Encrypted Key missing");return Ue(t.slice(-6),l,e)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(e===void 0)throw new tt("JWE Encrypted Key missing");return Fn(t,r,e)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(e===void 0)throw new tt("JWE Encrypted Key missing");if(typeof n.p2c!="number")throw new tt('JOSE Header "p2c" (PBES2 Count) missing or invalid');const i=s?.maxPBES2Count||1e4;if(n.p2c>i)throw new tt('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof n.p2s!="string")throw new tt('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let o;try{o=wt(n.p2s)}catch{throw new tt("Failed to base64url decode the p2s")}return Mn(t,r,e,n.p2c,o)}case"A128KW":case"A192KW":case"A256KW":{if(e===void 0)throw new tt("JWE Encrypted Key missing");return Ue(t,r,e)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(e===void 0)throw new tt("JWE Encrypted Key missing");if(typeof n.iv!="string")throw new tt('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof n.tag!="string")throw new tt('JOSE Header "tag" (Authentication Tag) missing or invalid');let i;try{i=wt(n.iv)}catch{throw new tt("Failed to base64url decode the iv")}let o;try{o=wt(n.tag)}catch{throw new tt("Failed to base64url decode the tag")}return Xn(t,r,e,i,o)}default:throw new yt('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function en(t,r,e,n,s){if(s.crit!==void 0&&n?.crit===void 0)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(o=>typeof o!="string"||o.length===0))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let i;e!==void 0?i=new Map([...Object.entries(e),...r.entries()]):i=r;for(const o of n.crit){if(!i.has(o))throw new yt(`Extension Header Parameter "${o}" is not recognized`);if(s[o]===void 0)throw new t(`Extension Header Parameter "${o}" is missing`);if(i.get(o)&&n[o]===void 0)throw new t(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(n.crit)}const Xe=(t,r)=>{if(r!==void 0&&(!Array.isArray(r)||r.some(e=>typeof e!="string")))throw new TypeError(`"${t}" option must be an array of strings`);if(r)return new Set(r)};async function ti(t,r,e){if(!zt(t))throw new tt("Flattened JWE must be an object");if(t.protected===void 0&&t.header===void 0&&t.unprotected===void 0)throw new tt("JOSE Header missing");if(t.iv!==void 0&&typeof t.iv!="string")throw new tt("JWE Initialization Vector incorrect type");if(typeof t.ciphertext!="string")throw new tt("JWE Ciphertext missing or incorrect type");if(t.tag!==void 0&&typeof t.tag!="string")throw new tt("JWE Authentication Tag incorrect type");if(t.protected!==void 0&&typeof t.protected!="string")throw new tt("JWE Protected Header incorrect type");if(t.encrypted_key!==void 0&&typeof t.encrypted_key!="string")throw new tt("JWE Encrypted Key incorrect type");if(t.aad!==void 0&&typeof t.aad!="string")throw new tt("JWE AAD incorrect type");if(t.header!==void 0&&!zt(t.header))throw new tt("JWE Shared Unprotected Header incorrect type");if(t.unprotected!==void 0&&!zt(t.unprotected))throw new tt("JWE Per-Recipient Unprotected Header incorrect type");let n;if(t.protected)try{const S=wt(t.protected);n=JSON.parse(Zt.decode(S))}catch{throw new tt("JWE Protected Header is invalid")}if(!Ur(n,t.header,t.unprotected))throw new tt("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const s={...n,...t.header,...t.unprotected};if(en(tt,new Map,e?.crit,n,s),s.zip!==void 0)throw new yt('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:i,enc:o}=s;if(typeof i!="string"||!i)throw new tt("missing JWE Algorithm (alg) in JWE Header");if(typeof o!="string"||!o)throw new tt("missing JWE Encryption Algorithm (enc) in JWE Header");const a=e&&Xe("keyManagementAlgorithms",e.keyManagementAlgorithms),l=e&&Xe("contentEncryptionAlgorithms",e.contentEncryptionAlgorithms);if(a&&!a.has(i)||!a&&i.startsWith("PBES2"))throw new Fe('"alg" (Algorithm) Header Parameter value not allowed');if(l&&!l.has(o))throw new Fe('"enc" (Encryption Algorithm) Header Parameter value not allowed');let p;if(t.encrypted_key!==void 0)try{p=wt(t.encrypted_key)}catch{throw new tt("Failed to base64url decode the encrypted_key")}let _=!1;typeof r=="function"&&(r=await r(n,t),_=!0);let E;try{E=await Qn(i,r,p,s,e)}catch(S){if(S instanceof TypeError||S instanceof tt||S instanceof yt)throw S;E=Ut(o)}let b,f;if(t.iv!==void 0)try{b=wt(t.iv)}catch{throw new tt("Failed to base64url decode the iv")}if(t.tag!==void 0)try{f=wt(t.tag)}catch{throw new tt("Failed to base64url decode the tag")}const m=Bt.encode(t.protected??"");let d;t.aad!==void 0?d=Dt(m,Bt.encode("."),Bt.encode(t.aad)):d=m;let g;try{g=wt(t.ciphertext)}catch{throw new tt("Failed to base64url decode the ciphertext")}const y={plaintext:await Kr(o,E,g,b,f,d)};if(t.protected!==void 0&&(y.protectedHeader=n),t.aad!==void 0)try{y.additionalAuthenticatedData=wt(t.aad)}catch{throw new tt("Failed to base64url decode the aad")}return t.unprotected!==void 0&&(y.sharedUnprotectedHeader=t.unprotected),t.header!==void 0&&(y.unprotectedHeader=t.header),_?{...y,key:r}:y}async function Vt(t,r,e){if(t instanceof Uint8Array&&(t=Zt.decode(t)),typeof t!="string")throw new tt("Compact JWE must be a string or Uint8Array");const{0:n,1:s,2:i,3:o,4:a,length:l}=t.split(".");if(l!==5)throw new tt("Invalid Compact JWE");const p=await ti({ciphertext:o,iv:i||void 0,protected:n,tag:a||void 0,encrypted_key:s||void 0},r,e),_={plaintext:p.plaintext,protectedHeader:p.protectedHeader};return typeof r=="function"?{..._,key:p.key}:_}const ei=Symbol(),ri=async t=>{if(t instanceof Uint8Array)return{kty:"oct",k:At(t)};if(!St(t))throw new TypeError(Et(t,...bt,"Uint8Array"));if(!t.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:r,key_ops:e,alg:n,use:s,...i}=await ct.subtle.exportKey("jwk",t);return i};async function ni(t){return ri(t)}async function ii(t,r,e,n,s={}){let i,o,a;switch(Qr(t,e,"encrypt"),e=await Yr.normalizePublicKey?.(e,t)||e,t){case"dir":{a=e;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!Gr(e))throw new yt("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:l,apv:p}=s;let{epk:_}=s;_||(_=(await Pn(e)).privateKey);const{x:E,y:b,crv:f,kty:m}=await ni(_),d=await Jr(e,_,t==="ECDH-ES"?r:t,t==="ECDH-ES"?$e(r):parseInt(t.slice(-5,-2),10),l,p);if(o={epk:{x:E,crv:f,kty:m}},m==="EC"&&(o.epk.y=b),l&&(o.apu=At(l)),p&&(o.apv=At(p)),t==="ECDH-ES"){a=d;break}a=n||Ut(r);const g=t.slice(-6);i=await Ke(g,d,a);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{a=n||Ut(r),i=await Nn(t,e,a);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{a=n||Ut(r);const{p2c:l,p2s:p}=s;({encryptedKey:i,...o}=await Ln(t,e,a,l,p));break}case"A128KW":case"A192KW":case"A256KW":{a=n||Ut(r),i=await Ke(t,e,a);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{a=n||Ut(r);const{iv:l}=s;({encryptedKey:i,...o}=await Yn(t,e,a,l));break}default:throw new yt('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:a,encryptedKey:i,parameters:o}}class si{constructor(r){if(!(r instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=r}setKeyManagementParameters(r){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=r,this}setProtectedHeader(r){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=r,this}setSharedUnprotectedHeader(r){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=r,this}setUnprotectedHeader(r){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=r,this}setAdditionalAuthenticatedData(r){return this._aad=r,this}setContentEncryptionKey(r){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=r,this}setInitializationVector(r){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=r,this}async encrypt(r,e){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new tt("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!Ur(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new tt("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(en(tt,new Map,e?.crit,this._protectedHeader,n),n.zip!==void 0)throw new yt('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:s,enc:i}=n;if(typeof s!="string"||!s)throw new tt('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof i!="string"||!i)throw new tt('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let o;if(this._cek&&(s==="dir"||s==="ECDH-ES"))throw new TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${s}`);let a;{let d;({cek:a,encryptedKey:o,parameters:d}=await ii(s,i,r,this._cek,this._keyManagementParameters)),d&&(e&&ei in e?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...d}:this.setUnprotectedHeader(d):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...d}:this.setProtectedHeader(d))}let l,p,_;this._protectedHeader?p=Bt.encode(At(JSON.stringify(this._protectedHeader))):p=Bt.encode(""),this._aad?(_=At(this._aad),l=Dt(p,Bt.encode("."),Bt.encode(_))):l=p;const{ciphertext:E,tag:b,iv:f}=await tn(i,this._plaintext,a,this._iv,l),m={ciphertext:At(E)};return f&&(m.iv=At(f)),b&&(m.tag=At(b)),o&&(m.encrypted_key=At(o)),_&&(m.aad=_),this._protectedHeader&&(m.protected=Zt.decode(p)),this._sharedUnprotectedHeader&&(m.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(m.header=this._unprotectedHeader),m}}class He{constructor(r){this._flattened=new si(r)}setContentEncryptionKey(r){return this._flattened.setContentEncryptionKey(r),this}setInitializationVector(r){return this._flattened.setInitializationVector(r),this}setProtectedHeader(r){return this._flattened.setProtectedHeader(r),this}setKeyManagementParameters(r){return this._flattened.setKeyManagementParameters(r),this}async encrypt(r,e){const n=await this._flattened.encrypt(r,e);return[n.protected,n.encrypted_key,n.iv,n.ciphertext,n.tag].join(".")}}const ai=wt;function te(t){let r;if(typeof t=="string"){const e=t.split(".");(e.length===3||e.length===5)&&([r]=e)}else if(typeof t=="object"&&t)if("protected"in t)r=t.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof r!="string"||!r)throw new Error;const e=JSON.parse(Zt.decode(ai(r)));if(!zt(e))throw new Error;return e}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}var ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kt={},pe,Qe;function oi(){return Qe||(Qe=1,pe=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),pe}var me={},Ot={},tr;function Lt(){if(tr)return Ot;tr=1;let t;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Ot.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},Ot.getSymbolTotalCodewords=function(n){return r[n]},Ot.getBCHDigit=function(e){let n=0;for(;e!==0;)n++,e>>>=1;return n},Ot.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');t=n},Ot.isKanjiModeEnabled=function(){return typeof t<"u"},Ot.toSJIS=function(n){return t(n)},Ot}var ge={},er;function qe(){return er||(er=1,(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function r(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,s){if(t.isValid(n))return n;try{return r(n)}catch{return s}}})(ge)),ge}var ye,rr;function ci(){if(rr)return ye;rr=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(r){const e=Math.floor(r/8);return(this.buffer[e]>>>7-r%8&1)===1},put:function(r,e){for(let n=0;n<e;n++)this.putBit((r>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),r&&(this.buffer[e]|=128>>>this.length%8),this.length++}},ye=t,ye}var we,nr;function li(){if(nr)return we;nr=1;function t(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}return t.prototype.set=function(r,e,n,s){const i=r*this.size+e;this.data[i]=n,s&&(this.reservedBit[i]=!0)},t.prototype.get=function(r,e){return this.data[r*this.size+e]},t.prototype.xor=function(r,e,n){this.data[r*this.size+e]^=n},t.prototype.isReserved=function(r,e){return this.reservedBit[r*this.size+e]},we=t,we}var _e={},ir;function ui(){return ir||(ir=1,(function(t){const r=Lt().getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const s=Math.floor(n/7)+2,i=r(n),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,a=[i-7];for(let l=1;l<s-1;l++)a[l]=a[l-1]-o;return a.push(6),a.reverse()},t.getPositions=function(n){const s=[],i=t.getRowColCoords(n),o=i.length;for(let a=0;a<o;a++)for(let l=0;l<o;l++)a===0&&l===0||a===0&&l===o-1||a===o-1&&l===0||s.push([i[a],i[l]]);return s}})(_e)),_e}var Ee={},sr;function di(){if(sr)return Ee;sr=1;const t=Lt().getSymbolSize,r=7;return Ee.getPositions=function(n){const s=t(n);return[[0,0],[s-r,0],[0,s-r]]},Ee}var be={},ar;function fi(){return ar||(ar=1,(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const r={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const i=s.size;let o=0,a=0,l=0,p=null,_=null;for(let E=0;E<i;E++){a=l=0,p=_=null;for(let b=0;b<i;b++){let f=s.get(E,b);f===p?a++:(a>=5&&(o+=r.N1+(a-5)),p=f,a=1),f=s.get(b,E),f===_?l++:(l>=5&&(o+=r.N1+(l-5)),_=f,l=1)}a>=5&&(o+=r.N1+(a-5)),l>=5&&(o+=r.N1+(l-5))}return o},t.getPenaltyN2=function(s){const i=s.size;let o=0;for(let a=0;a<i-1;a++)for(let l=0;l<i-1;l++){const p=s.get(a,l)+s.get(a,l+1)+s.get(a+1,l)+s.get(a+1,l+1);(p===4||p===0)&&o++}return o*r.N2},t.getPenaltyN3=function(s){const i=s.size;let o=0,a=0,l=0;for(let p=0;p<i;p++){a=l=0;for(let _=0;_<i;_++)a=a<<1&2047|s.get(p,_),_>=10&&(a===1488||a===93)&&o++,l=l<<1&2047|s.get(_,p),_>=10&&(l===1488||l===93)&&o++}return o*r.N3},t.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let l=0;l<o;l++)i+=s.data[l];return Math.abs(Math.ceil(i*100/o/5)-10)*r.N4};function e(n,s,i){switch(n){case t.Patterns.PATTERN000:return(s+i)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(s+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return s*i%2+s*i%3===0;case t.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case t.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(s,i){const o=i.size;for(let a=0;a<o;a++)for(let l=0;l<o;l++)i.isReserved(l,a)||i.xor(l,a,e(s,l,a))},t.getBestMask=function(s,i){const o=Object.keys(t.Patterns).length;let a=0,l=1/0;for(let p=0;p<o;p++){i(p),t.applyMask(p,s);const _=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(p,s),_<l&&(l=_,a=p)}return a}})(be)),be}var re={},or;function nn(){if(or)return re;or=1;const t=qe(),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],e=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return re.getBlocksCount=function(s,i){switch(i){case t.L:return r[(s-1)*4+0];case t.M:return r[(s-1)*4+1];case t.Q:return r[(s-1)*4+2];case t.H:return r[(s-1)*4+3];default:return}},re.getTotalCodewordsCount=function(s,i){switch(i){case t.L:return e[(s-1)*4+0];case t.M:return e[(s-1)*4+1];case t.Q:return e[(s-1)*4+2];case t.H:return e[(s-1)*4+3];default:return}},re}var ve={},$t={},cr;function hi(){if(cr)return $t;cr=1;const t=new Uint8Array(512),r=new Uint8Array(256);return(function(){let n=1;for(let s=0;s<255;s++)t[s]=n,r[n]=s,n<<=1,n&256&&(n^=285);for(let s=255;s<512;s++)t[s]=t[s-255]})(),$t.log=function(n){if(n<1)throw new Error("log("+n+")");return r[n]},$t.exp=function(n){return t[n]},$t.mul=function(n,s){return n===0||s===0?0:t[r[n]+r[s]]},$t}var lr;function pi(){return lr||(lr=1,(function(t){const r=hi();t.mul=function(n,s){const i=new Uint8Array(n.length+s.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<s.length;a++)i[o+a]^=r.mul(n[o],s[a]);return i},t.mod=function(n,s){let i=new Uint8Array(n);for(;i.length-s.length>=0;){const o=i[0];for(let l=0;l<s.length;l++)i[l]^=r.mul(s[l],o);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},t.generateECPolynomial=function(n){let s=new Uint8Array([1]);for(let i=0;i<n;i++)s=t.mul(s,new Uint8Array([1,r.exp(i)]));return s}})(ve)),ve}var Ae,ur;function mi(){if(ur)return Ae;ur=1;const t=pi();function r(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}return r.prototype.initialize=function(n){this.degree=n,this.genPoly=t.generateECPolynomial(this.degree)},r.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(n.length+this.degree);s.set(n);const i=t.mod(s,this.genPoly),o=this.degree-i.length;if(o>0){const a=new Uint8Array(this.degree);return a.set(i,o),a}return i},Ae=r,Ae}var Se={},Ce={},ke={},dr;function sn(){return dr||(dr=1,ke.isValid=function(r){return!isNaN(r)&&r>=1&&r<=40}),ke}var Tt={},fr;function an(){if(fr)return Tt;fr=1;const t="[0-9]+",r="[A-Z $%*+\\-./:]+";let e="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";e=e.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+e+`)(?:.|[\r
]))+`;Tt.KANJI=new RegExp(e,"g"),Tt.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Tt.BYTE=new RegExp(n,"g"),Tt.NUMERIC=new RegExp(t,"g"),Tt.ALPHANUMERIC=new RegExp(r,"g");const s=new RegExp("^"+e+"$"),i=new RegExp("^"+t+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Tt.testKanji=function(l){return s.test(l)},Tt.testNumeric=function(l){return i.test(l)},Tt.testAlphanumeric=function(l){return o.test(l)},Tt}var hr;function Mt(){return hr||(hr=1,(function(t){const r=sn(),e=an();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!r.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return e.testNumeric(i)?t.NUMERIC:e.testAlphanumeric(i)?t.ALPHANUMERIC:e.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function n(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(i,o){if(t.isValid(i))return i;try{return n(i)}catch{return o}}})(Ce)),Ce}var pr;function gi(){return pr||(pr=1,(function(t){const r=Lt(),e=nn(),n=qe(),s=Mt(),i=sn(),o=7973,a=r.getBCHDigit(o);function l(b,f,m){for(let d=1;d<=40;d++)if(f<=t.getCapacity(d,m,b))return d}function p(b,f){return s.getCharCountIndicator(b,f)+4}function _(b,f){let m=0;return b.forEach(function(d){const g=p(d.mode,f);m+=g+d.getBitsLength()}),m}function E(b,f){for(let m=1;m<=40;m++)if(_(b,m)<=t.getCapacity(m,f,s.MIXED))return m}t.from=function(f,m){return i.isValid(f)?parseInt(f,10):m},t.getCapacity=function(f,m,d){if(!i.isValid(f))throw new Error("Invalid QR Code version");typeof d>"u"&&(d=s.BYTE);const g=r.getSymbolTotalCodewords(f),h=e.getTotalCodewordsCount(f,m),y=(g-h)*8;if(d===s.MIXED)return y;const S=y-p(d,f);switch(d){case s.NUMERIC:return Math.floor(S/10*3);case s.ALPHANUMERIC:return Math.floor(S/11*2);case s.KANJI:return Math.floor(S/13);case s.BYTE:default:return Math.floor(S/8)}},t.getBestVersionForData=function(f,m){let d;const g=n.from(m,n.M);if(Array.isArray(f)){if(f.length>1)return E(f,g);if(f.length===0)return 1;d=f[0]}else d=f;return l(d.mode,d.getLength(),g)},t.getEncodedBits=function(f){if(!i.isValid(f)||f<7)throw new Error("Invalid QR Code version");let m=f<<12;for(;r.getBCHDigit(m)-a>=0;)m^=o<<r.getBCHDigit(m)-a;return f<<12|m}})(Se)),Se}var Ie={},mr;function yi(){if(mr)return Ie;mr=1;const t=Lt(),r=1335,e=21522,n=t.getBCHDigit(r);return Ie.getEncodedBits=function(i,o){const a=i.bit<<3|o;let l=a<<10;for(;t.getBCHDigit(l)-n>=0;)l^=r<<t.getBCHDigit(l)-n;return(a<<10|l)^e},Ie}var Te={},Be,gr;function wi(){if(gr)return Be;gr=1;const t=Mt();function r(e){this.mode=t.NUMERIC,this.data=e.toString()}return r.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(n){let s,i,o;for(s=0;s+3<=this.data.length;s+=3)i=this.data.substr(s,3),o=parseInt(i,10),n.put(o,10);const a=this.data.length-s;a>0&&(i=this.data.substr(s),o=parseInt(i,10),n.put(o,a*3+1))},Be=r,Be}var xe,yr;function _i(){if(yr)return xe;yr=1;const t=Mt(),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function e(n){this.mode=t.ALPHANUMERIC,this.data=n}return e.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(s){let i;for(i=0;i+2<=this.data.length;i+=2){let o=r.indexOf(this.data[i])*45;o+=r.indexOf(this.data[i+1]),s.put(o,11)}this.data.length%2&&s.put(r.indexOf(this.data[i]),6)},xe=e,xe}var Re,wr;function Ei(){if(wr)return Re;wr=1;const t=Mt();function r(e){this.mode=t.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}return r.getBitsLength=function(n){return n*8},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){for(let n=0,s=this.data.length;n<s;n++)e.put(this.data[n],8)},Re=r,Re}var Oe,_r;function bi(){if(_r)return Oe;_r=1;const t=Mt(),r=Lt();function e(n){this.mode=t.KANJI,this.data=n}return e.getBitsLength=function(s){return s*13},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){let s;for(s=0;s<this.data.length;s++){let i=r.toSJIS(this.data[s]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),n.put(i,13)}},Oe=e,Oe}var Pe={exports:{}},Er;function vi(){return Er||(Er=1,(function(t){var r={single_source_shortest_paths:function(e,n,s){var i={},o={};o[n]=0;var a=r.PriorityQueue.make();a.push(n,0);for(var l,p,_,E,b,f,m,d,g;!a.empty();){l=a.pop(),p=l.value,E=l.cost,b=e[p]||{};for(_ in b)b.hasOwnProperty(_)&&(f=b[_],m=E+f,d=o[_],g=typeof o[_]>"u",(g||d>m)&&(o[_]=m,a.push(_,m),i[_]=p))}if(typeof s<"u"&&typeof o[s]>"u"){var h=["Could not find a path from ",n," to ",s,"."].join("");throw new Error(h)}return i},extract_shortest_path_from_predecessor_list:function(e,n){for(var s=[],i=n;i;)s.push(i),e[i],i=e[i];return s.reverse(),s},find_path:function(e,n,s){var i=r.single_source_shortest_paths(e,n,s);return r.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(e){var n=r.PriorityQueue,s={},i;e=e||{};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s.queue=[],s.sorter=e.sorter||n.default_sorter,s},default_sorter:function(e,n){return e.cost-n.cost},push:function(e,n){var s={value:e,cost:n};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=r})(Pe)),Pe.exports}var br;function Ai(){return br||(br=1,(function(t){const r=Mt(),e=wi(),n=_i(),s=Ei(),i=bi(),o=an(),a=Lt(),l=vi();function p(h){return unescape(encodeURIComponent(h)).length}function _(h,y,S){const C=[];let I;for(;(I=h.exec(S))!==null;)C.push({data:I[0],index:I.index,mode:y,length:I[0].length});return C}function E(h){const y=_(o.NUMERIC,r.NUMERIC,h),S=_(o.ALPHANUMERIC,r.ALPHANUMERIC,h);let C,I;return a.isKanjiModeEnabled()?(C=_(o.BYTE,r.BYTE,h),I=_(o.KANJI,r.KANJI,h)):(C=_(o.BYTE_KANJI,r.BYTE,h),I=[]),y.concat(S,C,I).sort(function(x,z){return x.index-z.index}).map(function(x){return{data:x.data,mode:x.mode,length:x.length}})}function b(h,y){switch(y){case r.NUMERIC:return e.getBitsLength(h);case r.ALPHANUMERIC:return n.getBitsLength(h);case r.KANJI:return i.getBitsLength(h);case r.BYTE:return s.getBitsLength(h)}}function f(h){return h.reduce(function(y,S){const C=y.length-1>=0?y[y.length-1]:null;return C&&C.mode===S.mode?(y[y.length-1].data+=S.data,y):(y.push(S),y)},[])}function m(h){const y=[];for(let S=0;S<h.length;S++){const C=h[S];switch(C.mode){case r.NUMERIC:y.push([C,{data:C.data,mode:r.ALPHANUMERIC,length:C.length},{data:C.data,mode:r.BYTE,length:C.length}]);break;case r.ALPHANUMERIC:y.push([C,{data:C.data,mode:r.BYTE,length:C.length}]);break;case r.KANJI:y.push([C,{data:C.data,mode:r.BYTE,length:p(C.data)}]);break;case r.BYTE:y.push([{data:C.data,mode:r.BYTE,length:p(C.data)}])}}return y}function d(h,y){const S={},C={start:{}};let I=["start"];for(let R=0;R<h.length;R++){const x=h[R],z=[];for(let k=0;k<x.length;k++){const M=x[k],W=""+R+k;z.push(W),S[W]={node:M,lastCount:0},C[W]={};for(let v=0;v<I.length;v++){const B=I[v];S[B]&&S[B].node.mode===M.mode?(C[B][W]=b(S[B].lastCount+M.length,M.mode)-b(S[B].lastCount,M.mode),S[B].lastCount+=M.length):(S[B]&&(S[B].lastCount=M.length),C[B][W]=b(M.length,M.mode)+4+r.getCharCountIndicator(M.mode,y))}}I=z}for(let R=0;R<I.length;R++)C[I[R]].end=0;return{map:C,table:S}}function g(h,y){let S;const C=r.getBestModeForData(h);if(S=r.from(y,C),S!==r.BYTE&&S.bit<C.bit)throw new Error('"'+h+'" cannot be encoded with mode '+r.toString(S)+`.
 Suggested mode is: `+r.toString(C));switch(S===r.KANJI&&!a.isKanjiModeEnabled()&&(S=r.BYTE),S){case r.NUMERIC:return new e(h);case r.ALPHANUMERIC:return new n(h);case r.KANJI:return new i(h);case r.BYTE:return new s(h)}}t.fromArray=function(y){return y.reduce(function(S,C){return typeof C=="string"?S.push(g(C,null)):C.data&&S.push(g(C.data,C.mode)),S},[])},t.fromString=function(y,S){const C=E(y,a.isKanjiModeEnabled()),I=m(C),R=d(I,S),x=l.find_path(R.map,"start","end"),z=[];for(let k=1;k<x.length-1;k++)z.push(R.table[x[k]].node);return t.fromArray(f(z))},t.rawSplit=function(y){return t.fromArray(E(y,a.isKanjiModeEnabled()))}})(Te)),Te}var vr;function Si(){if(vr)return me;vr=1;const t=Lt(),r=qe(),e=ci(),n=li(),s=ui(),i=di(),o=fi(),a=nn(),l=mi(),p=gi(),_=yi(),E=Mt(),b=Ai();function f(R,x){const z=R.size,k=i.getPositions(x);for(let M=0;M<k.length;M++){const W=k[M][0],v=k[M][1];for(let B=-1;B<=7;B++)if(!(W+B<=-1||z<=W+B))for(let u=-1;u<=7;u++)v+u<=-1||z<=v+u||(B>=0&&B<=6&&(u===0||u===6)||u>=0&&u<=6&&(B===0||B===6)||B>=2&&B<=4&&u>=2&&u<=4?R.set(W+B,v+u,!0,!0):R.set(W+B,v+u,!1,!0))}}function m(R){const x=R.size;for(let z=8;z<x-8;z++){const k=z%2===0;R.set(z,6,k,!0),R.set(6,z,k,!0)}}function d(R,x){const z=s.getPositions(x);for(let k=0;k<z.length;k++){const M=z[k][0],W=z[k][1];for(let v=-2;v<=2;v++)for(let B=-2;B<=2;B++)v===-2||v===2||B===-2||B===2||v===0&&B===0?R.set(M+v,W+B,!0,!0):R.set(M+v,W+B,!1,!0)}}function g(R,x){const z=R.size,k=p.getEncodedBits(x);let M,W,v;for(let B=0;B<18;B++)M=Math.floor(B/3),W=B%3+z-8-3,v=(k>>B&1)===1,R.set(M,W,v,!0),R.set(W,M,v,!0)}function h(R,x,z){const k=R.size,M=_.getEncodedBits(x,z);let W,v;for(W=0;W<15;W++)v=(M>>W&1)===1,W<6?R.set(W,8,v,!0):W<8?R.set(W+1,8,v,!0):R.set(k-15+W,8,v,!0),W<8?R.set(8,k-W-1,v,!0):W<9?R.set(8,15-W-1+1,v,!0):R.set(8,15-W-1,v,!0);R.set(k-8,8,1,!0)}function y(R,x){const z=R.size;let k=-1,M=z-1,W=7,v=0;for(let B=z-1;B>0;B-=2)for(B===6&&B--;;){for(let u=0;u<2;u++)if(!R.isReserved(M,B-u)){let N=!1;v<x.length&&(N=(x[v]>>>W&1)===1),R.set(M,B-u,N),W--,W===-1&&(v++,W=7)}if(M+=k,M<0||z<=M){M-=k,k=-k;break}}}function S(R,x,z){const k=new e;z.forEach(function(u){k.put(u.mode.bit,4),k.put(u.getLength(),E.getCharCountIndicator(u.mode,R)),u.write(k)});const M=t.getSymbolTotalCodewords(R),W=a.getTotalCodewordsCount(R,x),v=(M-W)*8;for(k.getLengthInBits()+4<=v&&k.put(0,4);k.getLengthInBits()%8!==0;)k.putBit(0);const B=(v-k.getLengthInBits())/8;for(let u=0;u<B;u++)k.put(u%2?17:236,8);return C(k,R,x)}function C(R,x,z){const k=t.getSymbolTotalCodewords(x),M=a.getTotalCodewordsCount(x,z),W=k-M,v=a.getBlocksCount(x,z),B=k%v,u=v-B,N=Math.floor(k/v),nt=Math.floor(W/v),J=nt+1,st=N-nt,G=new l(st);let rt=0;const D=new Array(v),P=new Array(v);let Q=0;const Z=new Uint8Array(R.buffer);for(let at=0;at<v;at++){const ht=at<u?nt:J;D[at]=Z.slice(rt,rt+ht),P[at]=G.encode(D[at]),rt+=ht,Q=Math.max(Q,ht)}const V=new Uint8Array(k);let ft=0,ut,it;for(ut=0;ut<Q;ut++)for(it=0;it<v;it++)ut<D[it].length&&(V[ft++]=D[it][ut]);for(ut=0;ut<st;ut++)for(it=0;it<v;it++)V[ft++]=P[it][ut];return V}function I(R,x,z,k){let M;if(Array.isArray(R))M=b.fromArray(R);else if(typeof R=="string"){let N=x;if(!N){const nt=b.rawSplit(R);N=p.getBestVersionForData(nt,z)}M=b.fromString(R,N||40)}else throw new Error("Invalid data");const W=p.getBestVersionForData(M,z);if(!W)throw new Error("The amount of data is too big to be stored in a QR Code");if(!x)x=W;else if(x<W)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+W+`.
`);const v=S(x,z,M),B=t.getSymbolSize(x),u=new n(B);return f(u,x),m(u),d(u,x),h(u,z,0),x>=7&&g(u,x),y(u,v),isNaN(k)&&(k=o.getBestMask(u,h.bind(null,u,z))),o.applyMask(k,u),h(u,z,k),{modules:u,version:x,errorCorrectionLevel:z,maskPattern:k,segments:M}}return me.create=function(x,z){if(typeof x>"u"||x==="")throw new Error("No input text");let k=r.M,M,W;return typeof z<"u"&&(k=r.from(z.errorCorrectionLevel,r.M),M=p.from(z.version),W=o.from(z.maskPattern),z.toSJISFunc&&t.setToSJISFunction(z.toSJISFunc)),I(x,M,k,W)},me}var De={},ze={},Ar;function on(){return Ar||(Ar=1,(function(t){function r(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let n=e.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+e);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const s=parseInt(n.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const s=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:r(n.color.dark||"#000000ff"),light:r(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,s){return s.width&&s.width>=n+s.margin*2?s.width/(n+s.margin*2):s.scale},t.getImageWidth=function(n,s){const i=t.getScale(n,s);return Math.floor((n+s.margin*2)*i)},t.qrToImageData=function(n,s,i){const o=s.modules.size,a=s.modules.data,l=t.getScale(o,i),p=Math.floor((o+i.margin*2)*l),_=i.margin*l,E=[i.color.light,i.color.dark];for(let b=0;b<p;b++)for(let f=0;f<p;f++){let m=(b*p+f)*4,d=i.color.light;if(b>=_&&f>=_&&b<p-_&&f<p-_){const g=Math.floor((b-_)/l),h=Math.floor((f-_)/l);d=E[a[g*o+h]?1:0]}n[m++]=d.r,n[m++]=d.g,n[m++]=d.b,n[m]=d.a}}})(ze)),ze}var Sr;function Ci(){return Sr||(Sr=1,(function(t){const r=on();function e(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,o,a){let l=a,p=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(p=n()),l=r.getOptions(l);const _=r.getImageWidth(i.modules.size,l),E=p.getContext("2d"),b=E.createImageData(_,_);return r.qrToImageData(b.data,i,l),e(E,p,_),E.putImageData(b,0,0),p},t.renderToDataURL=function(i,o,a){let l=a;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const p=t.render(i,o,l),_=l.type||"image/png",E=l.rendererOpts||{};return p.toDataURL(_,E.quality)}})(De)),De}var Le={},Cr;function ki(){if(Cr)return Le;Cr=1;const t=on();function r(s,i){const o=s.a/255,a=i+'="'+s.hex+'"';return o<1?a+" "+i+'-opacity="'+o.toFixed(2).slice(1)+'"':a}function e(s,i,o){let a=s+i;return typeof o<"u"&&(a+=" "+o),a}function n(s,i,o){let a="",l=0,p=!1,_=0;for(let E=0;E<s.length;E++){const b=Math.floor(E%i),f=Math.floor(E/i);!b&&!p&&(p=!0),s[E]?(_++,E>0&&b>0&&s[E-1]||(a+=p?e("M",b+o,.5+f+o):e("m",l,0),l=0,p=!1),b+1<i&&s[E+1]||(a+=e("h",_),_=0)):l++}return a}return Le.render=function(i,o,a){const l=t.getOptions(o),p=i.modules.size,_=i.modules.data,E=p+l.margin*2,b=l.color.light.a?"<path "+r(l.color.light,"fill")+' d="M0 0h'+E+"v"+E+'H0z"/>':"",f="<path "+r(l.color.dark,"stroke")+' d="'+n(_,p,l.margin)+'"/>',m='viewBox="0 0 '+E+" "+E+'"',g='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+m+' shape-rendering="crispEdges">'+b+f+`</svg>
`;return typeof a=="function"&&a(null,g),g},Le}var kr;function Ii(){if(kr)return Kt;kr=1;const t=oi(),r=Si(),e=Ci(),n=ki();function s(i,o,a,l,p){const _=[].slice.call(arguments,1),E=_.length,b=typeof _[E-1]=="function";if(!b&&!t())throw new Error("Callback required as last argument");if(b){if(E<2)throw new Error("Too few arguments provided");E===2?(p=a,a=o,o=l=void 0):E===3&&(o.getContext&&typeof p>"u"?(p=l,l=void 0):(p=l,l=a,a=o,o=void 0))}else{if(E<1)throw new Error("Too few arguments provided");return E===1?(a=o,o=l=void 0):E===2&&!o.getContext&&(l=a,a=o,o=void 0),new Promise(function(f,m){try{const d=r.create(a,l);f(i(d,o,l))}catch(d){m(d)}})}try{const f=r.create(a,l);p(null,i(f,o,l))}catch(f){p(f)}}return Kt.create=r.create,Kt.toCanvas=s.bind(null,e.render),Kt.toDataURL=s.bind(null,e.renderToDataURL),Kt.toString=s.bind(null,function(i,o,a){return n.render(i,a)}),Kt}var Ti=Ii();const Bi=rn(Ti);function ne(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Me={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Ir;function xi(){return Ir||(Ir=1,(function(t,r){(function(e){t.exports=e()})(function(){return(function e(n,s,i){function o(p,_){if(!s[p]){if(!n[p]){var E=typeof ne=="function"&&ne;if(!_&&E)return E(p,!0);if(a)return a(p,!0);var b=new Error("Cannot find module '"+p+"'");throw b.code="MODULE_NOT_FOUND",b}var f=s[p]={exports:{}};n[p][0].call(f.exports,function(m){var d=n[p][1][m];return o(d||m)},f,f.exports,e,n,s,i)}return s[p].exports}for(var a=typeof ne=="function"&&ne,l=0;l<i.length;l++)o(i[l]);return o})({1:[function(e,n,s){var i=e("./utils"),o=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var p,_,E,b,f,m,d,g=[],h=0,y=l.length,S=y,C=i.getTypeOf(l)!=="string";h<l.length;)S=y-h,E=C?(p=l[h++],_=h<y?l[h++]:0,h<y?l[h++]:0):(p=l.charCodeAt(h++),_=h<y?l.charCodeAt(h++):0,h<y?l.charCodeAt(h++):0),b=p>>2,f=(3&p)<<4|_>>4,m=1<S?(15&_)<<2|E>>6:64,d=2<S?63&E:64,g.push(a.charAt(b)+a.charAt(f)+a.charAt(m)+a.charAt(d));return g.join("")},s.decode=function(l){var p,_,E,b,f,m,d=0,g=0,h="data:";if(l.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var y,S=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&S--,l.charAt(l.length-2)===a.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=o.uint8array?new Uint8Array(0|S):new Array(0|S);d<l.length;)p=a.indexOf(l.charAt(d++))<<2|(b=a.indexOf(l.charAt(d++)))>>4,_=(15&b)<<4|(f=a.indexOf(l.charAt(d++)))>>2,E=(3&f)<<6|(m=a.indexOf(l.charAt(d++))),y[g++]=p,f!==64&&(y[g++]=_),m!==64&&(y[g++]=E);return y}},{"./support":30,"./utils":32}],2:[function(e,n,s){var i=e("./external"),o=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),l=e("./stream/DataLengthProbe");function p(_,E,b,f,m){this.compressedSize=_,this.uncompressedSize=E,this.crc32=b,this.compression=f,this.compressedContent=m}p.prototype={getContentWorker:function(){var _=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),E=this;return _.on("end",function(){if(this.streamInfo.data_length!==E.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),_},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(_,E,b){return _.pipe(new a).pipe(new l("uncompressedSize")).pipe(E.compressWorker(b)).pipe(new l("compressedSize")).withStreamInfo("compression",E)},n.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,n,s){var i=e("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,n,s){var i=e("./utils"),o=(function(){for(var a,l=[],p=0;p<256;p++){a=p;for(var _=0;_<8;_++)a=1&a?3988292384^a>>>1:a>>>1;l[p]=a}return l})();n.exports=function(a,l){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?(function(p,_,E,b){var f=o,m=b+E;p^=-1;for(var d=b;d<m;d++)p=p>>>8^f[255&(p^_[d])];return-1^p})(0|l,a,a.length,0):(function(p,_,E,b){var f=o,m=b+E;p^=-1;for(var d=b;d<m;d++)p=p>>>8^f[255&(p^_.charCodeAt(d))];return-1^p})(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(e,n,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(e,n,s){var i=null;i=typeof Promise<"u"?Promise:e("lie"),n.exports={Promise:i}},{lie:37}],7:[function(e,n,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=e("pako"),a=e("./utils"),l=e("./stream/GenericWorker"),p=i?"uint8array":"array";function _(E,b){l.call(this,"FlateWorker/"+E),this._pako=null,this._pakoAction=E,this._pakoOptions=b,this.meta={}}s.magic="\b\0",a.inherits(_,l),_.prototype.processChunk=function(E){this.meta=E.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(p,E.data),!1)},_.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},_.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},_.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var E=this;this._pako.onData=function(b){E.push({data:b,meta:E.meta})}},s.compressWorker=function(E){return new _("Deflate",E)},s.uncompressWorker=function(){return new _("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,n,s){function i(f,m){var d,g="";for(d=0;d<m;d++)g+=String.fromCharCode(255&f),f>>>=8;return g}function o(f,m,d,g,h,y){var S,C,I=f.file,R=f.compression,x=y!==p.utf8encode,z=a.transformTo("string",y(I.name)),k=a.transformTo("string",p.utf8encode(I.name)),M=I.comment,W=a.transformTo("string",y(M)),v=a.transformTo("string",p.utf8encode(M)),B=k.length!==I.name.length,u=v.length!==M.length,N="",nt="",J="",st=I.dir,G=I.date,rt={crc32:0,compressedSize:0,uncompressedSize:0};m&&!d||(rt.crc32=f.crc32,rt.compressedSize=f.compressedSize,rt.uncompressedSize=f.uncompressedSize);var D=0;m&&(D|=8),x||!B&&!u||(D|=2048);var P=0,Q=0;st&&(P|=16),h==="UNIX"?(Q=798,P|=(function(V,ft){var ut=V;return V||(ut=ft?16893:33204),(65535&ut)<<16})(I.unixPermissions,st)):(Q=20,P|=(function(V){return 63&(V||0)})(I.dosPermissions)),S=G.getUTCHours(),S<<=6,S|=G.getUTCMinutes(),S<<=5,S|=G.getUTCSeconds()/2,C=G.getUTCFullYear()-1980,C<<=4,C|=G.getUTCMonth()+1,C<<=5,C|=G.getUTCDate(),B&&(nt=i(1,1)+i(_(z),4)+k,N+="up"+i(nt.length,2)+nt),u&&(J=i(1,1)+i(_(W),4)+v,N+="uc"+i(J.length,2)+J);var Z="";return Z+=`
\0`,Z+=i(D,2),Z+=R.magic,Z+=i(S,2),Z+=i(C,2),Z+=i(rt.crc32,4),Z+=i(rt.compressedSize,4),Z+=i(rt.uncompressedSize,4),Z+=i(z.length,2),Z+=i(N.length,2),{fileRecord:E.LOCAL_FILE_HEADER+Z+z+N,dirRecord:E.CENTRAL_FILE_HEADER+i(Q,2)+Z+i(W.length,2)+"\0\0\0\0"+i(P,4)+i(g,4)+z+N+W}}var a=e("../utils"),l=e("../stream/GenericWorker"),p=e("../utf8"),_=e("../crc32"),E=e("../signature");function b(f,m,d,g){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=d,this.encodeFileName=g,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(b,l),b.prototype.push=function(f){var m=f.meta.percent||0,d=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,l.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:d?(m+100*(d-g-1))/d:100}}))},b.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var m=this.streamFiles&&!f.file.dir;if(m){var d=o(f,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:d.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(f){this.accumulate=!1;var m=this.streamFiles&&!f.file.dir,d=o(f,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(d.dirRecord),m)this.push({data:(function(g){return E.DATA_DESCRIPTOR+i(g.crc32,4)+i(g.compressedSize,4)+i(g.uncompressedSize,4)})(f),meta:{percent:100}});else for(this.push({data:d.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var f=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var d=this.bytesWritten-f,g=(function(h,y,S,C,I){var R=a.transformTo("string",I(C));return E.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(h,2)+i(h,2)+i(y,4)+i(S,4)+i(R.length,2)+R})(this.dirRecords.length,d,f,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(f){this._sources.push(f);var m=this;return f.on("data",function(d){m.processChunk(d)}),f.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),f.on("error",function(d){m.error(d)}),this},b.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(f){var m=this._sources;if(!l.prototype.error.call(this,f))return!1;for(var d=0;d<m.length;d++)try{m[d].error(f)}catch{}return!0},b.prototype.lock=function(){l.prototype.lock.call(this);for(var f=this._sources,m=0;m<f.length;m++)f[m].lock()},n.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,n,s){var i=e("../compressions"),o=e("./ZipFileWorker");s.generateWorker=function(a,l,p){var _=new o(l.streamFiles,p,l.platform,l.encodeFileName),E=0;try{a.forEach(function(b,f){E++;var m=(function(y,S){var C=y||S,I=i[C];if(!I)throw new Error(C+" is not a valid compression method !");return I})(f.options.compression,l.compression),d=f.options.compressionOptions||l.compressionOptions||{},g=f.dir,h=f.date;f._compressWorker(m,d).withStreamInfo("file",{name:b,dir:g,date:h,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(_)}),_.entriesCount=E}catch(b){_.error(b)}return _}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,n,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=e("./object")).loadAsync=e("./load"),i.support=e("./support"),i.defaults=e("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=e("./external"),n.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,n,s){var i=e("./utils"),o=e("./external"),a=e("./utf8"),l=e("./zipEntries"),p=e("./stream/Crc32Probe"),_=e("./nodejsUtils");function E(b){return new o.Promise(function(f,m){var d=b.decompressed.getContentWorker().pipe(new p);d.on("error",function(g){m(g)}).on("end",function(){d.streamInfo.crc32!==b.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}n.exports=function(b,f){var m=this;return f=i.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),_.isNode&&_.isStream(b)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",b,!0,f.optimizedBinaryString,f.base64).then(function(d){var g=new l(f);return g.load(d),g}).then(function(d){var g=[o.Promise.resolve(d)],h=d.files;if(f.checkCRC32)for(var y=0;y<h.length;y++)g.push(E(h[y]));return o.Promise.all(g)}).then(function(d){for(var g=d.shift(),h=g.files,y=0;y<h.length;y++){var S=h[y],C=S.fileNameStr,I=i.resolve(S.fileNameStr);m.file(I,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:f.createFolders}),S.dir||(m.file(I).unsafeOriginalName=C)}return g.zipComment.length&&(m.comment=g.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,n,s){var i=e("../utils"),o=e("../stream/GenericWorker");function a(l,p){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(p)}i.inherits(a,o),a.prototype._bindStream=function(l){var p=this;(this._stream=l).pause(),l.on("data",function(_){p.push({data:_,meta:{percent:0}})}).on("error",function(_){p.isPaused?this.generatedError=_:p.error(_)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,n,s){var i=e("readable-stream").Readable;function o(a,l,p){i.call(this,l),this._helper=a;var _=this;a.on("data",function(E,b){_.push(E)||_._helper.pause(),p&&p(b)}).on("error",function(E){_.emit("error",E)}).on("end",function(){_.push(null)})}e("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(e,n,s){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(e,n,s){function i(I,R,x){var z,k=a.getTypeOf(R),M=a.extend(x||{},_);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(I=h(I)),M.createFolders&&(z=g(I))&&y.call(this,z,!0);var W=k==="string"&&M.binary===!1&&M.base64===!1;x&&x.binary!==void 0||(M.binary=!W),(R instanceof E&&R.uncompressedSize===0||M.dir||!R||R.length===0)&&(M.base64=!1,M.binary=!0,R="",M.compression="STORE",k="string");var v=null;v=R instanceof E||R instanceof l?R:m.isNode&&m.isStream(R)?new d(I,R):a.prepareContent(I,R,M.binary,M.optimizedBinaryString,M.base64);var B=new b(I,v,M);this.files[I]=B}var o=e("./utf8"),a=e("./utils"),l=e("./stream/GenericWorker"),p=e("./stream/StreamHelper"),_=e("./defaults"),E=e("./compressedObject"),b=e("./zipObject"),f=e("./generate"),m=e("./nodejsUtils"),d=e("./nodejs/NodejsStreamInputAdapter"),g=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var R=I.lastIndexOf("/");return 0<R?I.substring(0,R):""},h=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},y=function(I,R){return R=R!==void 0?R:_.createFolders,I=h(I),this.files[I]||i.call(this,I,null,{dir:!0,createFolders:R}),this.files[I]};function S(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var R,x,z;for(R in this.files)z=this.files[R],(x=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&I(x,z)},filter:function(I){var R=[];return this.forEach(function(x,z){I(x,z)&&R.push(z)}),R},file:function(I,R,x){if(arguments.length!==1)return I=this.root+I,i.call(this,I,R,x),this;if(S(I)){var z=I;return this.filter(function(M,W){return!W.dir&&z.test(M)})}var k=this.files[this.root+I];return k&&!k.dir?k:null},folder:function(I){if(!I)return this;if(S(I))return this.filter(function(k,M){return M.dir&&I.test(k)});var R=this.root+I,x=y.call(this,R),z=this.clone();return z.root=x.name,z},remove:function(I){I=this.root+I;var R=this.files[I];if(R||(I.slice(-1)!=="/"&&(I+="/"),R=this.files[I]),R&&!R.dir)delete this.files[I];else for(var x=this.filter(function(k,M){return M.name.slice(0,I.length)===I}),z=0;z<x.length;z++)delete this.files[x[z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var R,x={};try{if((x=a.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=x.type.toLowerCase(),x.compression=x.compression.toUpperCase(),x.type==="binarystring"&&(x.type="string"),!x.type)throw new Error("No output type specified.");a.checkSupport(x.type),x.platform!=="darwin"&&x.platform!=="freebsd"&&x.platform!=="linux"&&x.platform!=="sunos"||(x.platform="UNIX"),x.platform==="win32"&&(x.platform="DOS");var z=x.comment||this.comment||"";R=f.generateWorker(this,x,z)}catch(k){(R=new l("error")).error(k)}return new p(R,x.type||"string",x.mimeType)},generateAsync:function(I,R){return this.generateInternalStream(I).accumulate(R)},generateNodeStream:function(I,R){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(R)}};n.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,n,s){n.exports=e("stream")},{stream:void 0}],17:[function(e,n,s){var i=e("./DataReader");function o(a){i.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}e("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),p=a.charCodeAt(1),_=a.charCodeAt(2),E=a.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===l&&this.data[b+1]===p&&this.data[b+2]===_&&this.data[b+3]===E)return b-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),p=a.charCodeAt(1),_=a.charCodeAt(2),E=a.charCodeAt(3),b=this.readData(4);return l===b[0]&&p===b[1]&&_===b[2]&&E===b[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(e,n,s){var i=e("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,p=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)p=(p<<8)+this.byteAt(l);return this.index+=a,p},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},n.exports=o},{"../utils":32}],19:[function(e,n,s){var i=e("./Uint8ArrayReader");function o(a){i.call(this,a)}e("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,n,s){var i=e("./DataReader");function o(a){i.call(this,a)}e("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(e,n,s){var i=e("./ArrayReader");function o(a){i.call(this,a)}e("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(e,n,s){var i=e("../utils"),o=e("../support"),a=e("./ArrayReader"),l=e("./StringReader"),p=e("./NodeBufferReader"),_=e("./Uint8ArrayReader");n.exports=function(E){var b=i.getTypeOf(E);return i.checkSupport(b),b!=="string"||o.uint8array?b==="nodebuffer"?new p(E):o.uint8array?new _(i.transformTo("uint8array",E)):new a(i.transformTo("array",E)):new l(E)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,n,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,n,s){var i=e("./GenericWorker"),o=e("../utils");function a(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,i),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},n.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,n,s){var i=e("./GenericWorker"),o=e("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,i),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,n,s){var i=e("../utils"),o=e("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(a,o),a.prototype.processChunk=function(l){if(l){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+l.data.length}o.prototype.processChunk.call(this,l)},n.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,n,s){var i=e("../utils"),o=e("./GenericWorker");function a(l){o.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(_){p.dataIsReady=!0,p.data=_,p.max=_&&_.length||0,p.type=i.getTypeOf(_),p.isPaused||p._tickAndRepeat()},function(_){p.error(_)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,p);break;case"uint8array":l=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":l=this.data.slice(this.index,p)}return this.index=p,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(e,n,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=i},{}],29:[function(e,n,s){var i=e("../utils"),o=e("./ConvertWorker"),a=e("./GenericWorker"),l=e("../base64"),p=e("../support"),_=e("../external"),E=null;if(p.nodestream)try{E=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(m,d){return new _.Promise(function(g,h){var y=[],S=m._internalType,C=m._outputType,I=m._mimeType;m.on("data",function(R,x){y.push(R),d&&d(x)}).on("error",function(R){y=[],h(R)}).on("end",function(){try{var R=(function(x,z,k){switch(x){case"blob":return i.newBlob(i.transformTo("arraybuffer",z),k);case"base64":return l.encode(z);default:return i.transformTo(x,z)}})(C,(function(x,z){var k,M=0,W=null,v=0;for(k=0;k<z.length;k++)v+=z[k].length;switch(x){case"string":return z.join("");case"array":return Array.prototype.concat.apply([],z);case"uint8array":for(W=new Uint8Array(v),k=0;k<z.length;k++)W.set(z[k],M),M+=z[k].length;return W;case"nodebuffer":return Buffer.concat(z);default:throw new Error("concat : unsupported type '"+x+"'")}})(S,y),I);g(R)}catch(x){h(x)}y=[]}).resume()})}function f(m,d,g){var h=d;switch(d){case"blob":case"arraybuffer":h="uint8array";break;case"base64":h="string"}try{this._internalType=h,this._outputType=d,this._mimeType=g,i.checkSupport(h),this._worker=m.pipe(new o(h)),m.lock()}catch(y){this._worker=new a("error"),this._worker.error(y)}}f.prototype={accumulate:function(m){return b(this,m)},on:function(m,d){var g=this;return m==="data"?this._worker.on(m,function(h){d.call(g,h.data,h.meta)}):this._worker.on(m,function(){i.delay(d,arguments,g)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new E(this,{objectMode:this._outputType!=="nodebuffer"},m)}},n.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!e("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(e,n,s){for(var i=e("./utils"),o=e("./support"),a=e("./nodejsUtils"),l=e("./stream/GenericWorker"),p=new Array(256),_=0;_<256;_++)p[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;p[254]=p[254]=1;function E(){l.call(this,"utf-8 decode"),this.leftOver=null}function b(){l.call(this,"utf-8 encode")}s.utf8encode=function(f){return o.nodebuffer?a.newBufferFrom(f,"utf-8"):(function(m){var d,g,h,y,S,C=m.length,I=0;for(y=0;y<C;y++)(64512&(g=m.charCodeAt(y)))==55296&&y+1<C&&(64512&(h=m.charCodeAt(y+1)))==56320&&(g=65536+(g-55296<<10)+(h-56320),y++),I+=g<128?1:g<2048?2:g<65536?3:4;for(d=o.uint8array?new Uint8Array(I):new Array(I),y=S=0;S<I;y++)(64512&(g=m.charCodeAt(y)))==55296&&y+1<C&&(64512&(h=m.charCodeAt(y+1)))==56320&&(g=65536+(g-55296<<10)+(h-56320),y++),g<128?d[S++]=g:(g<2048?d[S++]=192|g>>>6:(g<65536?d[S++]=224|g>>>12:(d[S++]=240|g>>>18,d[S++]=128|g>>>12&63),d[S++]=128|g>>>6&63),d[S++]=128|63&g);return d})(f)},s.utf8decode=function(f){return o.nodebuffer?i.transformTo("nodebuffer",f).toString("utf-8"):(function(m){var d,g,h,y,S=m.length,C=new Array(2*S);for(d=g=0;d<S;)if((h=m[d++])<128)C[g++]=h;else if(4<(y=p[h]))C[g++]=65533,d+=y-1;else{for(h&=y===2?31:y===3?15:7;1<y&&d<S;)h=h<<6|63&m[d++],y--;1<y?C[g++]=65533:h<65536?C[g++]=h:(h-=65536,C[g++]=55296|h>>10&1023,C[g++]=56320|1023&h)}return C.length!==g&&(C.subarray?C=C.subarray(0,g):C.length=g),i.applyFromCharCode(C)})(f=i.transformTo(o.uint8array?"uint8array":"array",f))},i.inherits(E,l),E.prototype.processChunk=function(f){var m=i.transformTo(o.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var d=m;(m=new Uint8Array(d.length+this.leftOver.length)).set(this.leftOver,0),m.set(d,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var g=(function(y,S){var C;for((S=S||y.length)>y.length&&(S=y.length),C=S-1;0<=C&&(192&y[C])==128;)C--;return C<0||C===0?S:C+p[y[C]]>S?C:S})(m),h=m;g!==m.length&&(o.uint8array?(h=m.subarray(0,g),this.leftOver=m.subarray(g,m.length)):(h=m.slice(0,g),this.leftOver=m.slice(g,m.length))),this.push({data:s.utf8decode(h),meta:f.meta})},E.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=E,i.inherits(b,l),b.prototype.processChunk=function(f){this.push({data:s.utf8encode(f.data),meta:f.meta})},s.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,n,s){var i=e("./support"),o=e("./base64"),a=e("./nodejsUtils"),l=e("./external");function p(d){return d}function _(d,g){for(var h=0;h<d.length;++h)g[h]=255&d.charCodeAt(h);return g}e("setimmediate"),s.newBlob=function(d,g){s.checkSupport("blob");try{return new Blob([d],{type:g})}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return h.append(d),h.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var E={stringifyByChunk:function(d,g,h){var y=[],S=0,C=d.length;if(C<=h)return String.fromCharCode.apply(null,d);for(;S<C;)g==="array"||g==="nodebuffer"?y.push(String.fromCharCode.apply(null,d.slice(S,Math.min(S+h,C)))):y.push(String.fromCharCode.apply(null,d.subarray(S,Math.min(S+h,C)))),S+=h;return y.join("")},stringifyByChar:function(d){for(var g="",h=0;h<d.length;h++)g+=String.fromCharCode(d[h]);return g},applyCanBeUsed:{uint8array:(function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}})()}};function b(d){var g=65536,h=s.getTypeOf(d),y=!0;if(h==="uint8array"?y=E.applyCanBeUsed.uint8array:h==="nodebuffer"&&(y=E.applyCanBeUsed.nodebuffer),y)for(;1<g;)try{return E.stringifyByChunk(d,h,g)}catch{g=Math.floor(g/2)}return E.stringifyByChar(d)}function f(d,g){for(var h=0;h<d.length;h++)g[h]=d[h];return g}s.applyFromCharCode=b;var m={};m.string={string:p,array:function(d){return _(d,new Array(d.length))},arraybuffer:function(d){return m.string.uint8array(d).buffer},uint8array:function(d){return _(d,new Uint8Array(d.length))},nodebuffer:function(d){return _(d,a.allocBuffer(d.length))}},m.array={string:b,array:p,arraybuffer:function(d){return new Uint8Array(d).buffer},uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return a.newBufferFrom(d)}},m.arraybuffer={string:function(d){return b(new Uint8Array(d))},array:function(d){return f(new Uint8Array(d),new Array(d.byteLength))},arraybuffer:p,uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return a.newBufferFrom(new Uint8Array(d))}},m.uint8array={string:b,array:function(d){return f(d,new Array(d.length))},arraybuffer:function(d){return d.buffer},uint8array:p,nodebuffer:function(d){return a.newBufferFrom(d)}},m.nodebuffer={string:b,array:function(d){return f(d,new Array(d.length))},arraybuffer:function(d){return m.nodebuffer.uint8array(d).buffer},uint8array:function(d){return f(d,new Uint8Array(d.length))},nodebuffer:p},s.transformTo=function(d,g){if(g=g||"",!d)return g;s.checkSupport(d);var h=s.getTypeOf(g);return m[h][d](g)},s.resolve=function(d){for(var g=d.split("/"),h=[],y=0;y<g.length;y++){var S=g[y];S==="."||S===""&&y!==0&&y!==g.length-1||(S===".."?h.pop():h.push(S))}return h.join("/")},s.getTypeOf=function(d){return typeof d=="string"?"string":Object.prototype.toString.call(d)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(d)?"nodebuffer":i.uint8array&&d instanceof Uint8Array?"uint8array":i.arraybuffer&&d instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(d){if(!i[d.toLowerCase()])throw new Error(d+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(d){var g,h,y="";for(h=0;h<(d||"").length;h++)y+="\\x"+((g=d.charCodeAt(h))<16?"0":"")+g.toString(16).toUpperCase();return y},s.delay=function(d,g,h){setImmediate(function(){d.apply(h||null,g||[])})},s.inherits=function(d,g){function h(){}h.prototype=g.prototype,d.prototype=new h},s.extend=function(){var d,g,h={};for(d=0;d<arguments.length;d++)for(g in arguments[d])Object.prototype.hasOwnProperty.call(arguments[d],g)&&h[g]===void 0&&(h[g]=arguments[d][g]);return h},s.prepareContent=function(d,g,h,y,S){return l.Promise.resolve(g).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(I,R){var x=new FileReader;x.onload=function(z){I(z.target.result)},x.onerror=function(z){R(z.target.error)},x.readAsArrayBuffer(C)}):C}).then(function(C){var I=s.getTypeOf(C);return I?(I==="arraybuffer"?C=s.transformTo("uint8array",C):I==="string"&&(S?C=o.decode(C):h&&y!==!0&&(C=(function(R){return _(R,i.uint8array?new Uint8Array(R.length):new Array(R.length))})(C))),C):l.Promise.reject(new Error("Can't read the data of '"+d+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,n,s){var i=e("./reader/readerFor"),o=e("./utils"),a=e("./signature"),l=e("./zipEntry"),p=e("./support");function _(E){this.files=[],this.loadOptions=E}_.prototype={checkSignature:function(E){if(!this.reader.readAndCheckSignature(E)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(b)+", expected "+o.pretty(E)+")")}},isSignature:function(E,b){var f=this.reader.index;this.reader.setIndex(E);var m=this.reader.readString(4)===b;return this.reader.setIndex(f),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var E=this.reader.readData(this.zipCommentLength),b=p.uint8array?"uint8array":"array",f=o.transformTo(b,E);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var E,b,f,m=this.zip64EndOfCentralSize-44;0<m;)E=this.reader.readInt(2),b=this.reader.readInt(4),f=this.reader.readData(b),this.zip64ExtensibleData[E]={id:E,length:b,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var E,b;for(E=0;E<this.files.length;E++)b=this.files[E],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var E;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(E=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(E);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var E=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(E<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(E);var b=E;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(E=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(E),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var m=b-f;if(0<m)this.isSignature(b,a.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(E){this.reader=i(E)},load:function(E){this.prepareReader(E),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=_},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,n,s){var i=e("./reader/readerFor"),o=e("./utils"),a=e("./compressedObject"),l=e("./crc32"),p=e("./utf8"),_=e("./compressions"),E=e("./support");function b(f,m){this.options=f,this.loadOptions=m}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var m,d;if(f.skip(22),this.fileNameLength=f.readInt(2),d=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(d),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=(function(g){for(var h in _)if(Object.prototype.hasOwnProperty.call(_,h)&&_[h].magic===g)return _[h];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,m,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var m=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(m),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var m,d,g,h=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<h;)m=f.readInt(2),d=f.readInt(2),g=f.readData(d),this.extraFields[m]={id:m,length:d,value:g};f.setIndex(h)},handleUTF8:function(){var f=E.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var d=o.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(d)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var h=o.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(h)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var m=i(f.value);return m.readInt(1)!==1||l(this.fileName)!==m.readInt(4)?null:p.utf8decode(m.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var m=i(f.value);return m.readInt(1)!==1||l(this.fileComment)!==m.readInt(4)?null:p.utf8decode(m.readData(f.length-5))}return null}},n.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,n,s){function i(m,d,g){this.name=m,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=d,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var o=e("./stream/StreamHelper"),a=e("./stream/DataWorker"),l=e("./utf8"),p=e("./compressedObject"),_=e("./stream/GenericWorker");i.prototype={internalStream:function(m){var d=null,g="string";try{if(!m)throw new Error("No output type specified.");var h=(g=m.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),d=this._decompressWorker();var y=!this._dataBinary;y&&!h&&(d=d.pipe(new l.Utf8EncodeWorker)),!y&&h&&(d=d.pipe(new l.Utf8DecodeWorker))}catch(S){(d=new _("error")).error(S)}return new o(d,g,"")},async:function(m,d){return this.internalStream(m).accumulate(d)},nodeStream:function(m,d){return this.internalStream(m||"nodebuffer").toNodejsStream(d)},_compressWorker:function(m,d){if(this._data instanceof p&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new l.Utf8EncodeWorker)),p.createWorkerFrom(g,m,d)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof _?this._data:new a(this._data)}};for(var E=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<E.length;f++)i.prototype[E[f]]=b;n.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,s){(function(i){var o,a,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var p=0,_=new l(m),E=i.document.createTextNode("");_.observe(E,{characterData:!0}),o=function(){E.data=p=++p%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var d=i.document.createElement("script");d.onreadystatechange=function(){m(),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},i.document.documentElement.appendChild(d)}:function(){setTimeout(m,0)};else{var b=new i.MessageChannel;b.port1.onmessage=m,o=function(){b.port2.postMessage(0)}}var f=[];function m(){var d,g;a=!0;for(var h=f.length;h;){for(g=f,f=[],d=-1;++d<h;)g[d]();h=f.length}a=!1}n.exports=function(d){f.push(d)!==1||a||o()}}).call(this,typeof ee<"u"?ee:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,n,s){var i=e("immediate");function o(){}var a={},l=["REJECTED"],p=["FULFILLED"],_=["PENDING"];function E(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,h!==o&&d(this,h)}function b(h,y,S){this.promise=h,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function f(h,y,S){i(function(){var C;try{C=y(S)}catch(I){return a.reject(h,I)}C===h?a.reject(h,new TypeError("Cannot resolve promise with itself")):a.resolve(h,C)})}function m(h){var y=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof y=="function")return function(){y.apply(h,arguments)}}function d(h,y){var S=!1;function C(x){S||(S=!0,a.reject(h,x))}function I(x){S||(S=!0,a.resolve(h,x))}var R=g(function(){y(I,C)});R.status==="error"&&C(R.value)}function g(h,y){var S={};try{S.value=h(y),S.status="success"}catch(C){S.status="error",S.value=C}return S}(n.exports=E).prototype.finally=function(h){if(typeof h!="function")return this;var y=this.constructor;return this.then(function(S){return y.resolve(h()).then(function(){return S})},function(S){return y.resolve(h()).then(function(){throw S})})},E.prototype.catch=function(h){return this.then(null,h)},E.prototype.then=function(h,y){if(typeof h!="function"&&this.state===p||typeof y!="function"&&this.state===l)return this;var S=new this.constructor(o);return this.state!==_?f(S,this.state===p?h:y,this.outcome):this.queue.push(new b(S,h,y)),S},b.prototype.callFulfilled=function(h){a.resolve(this.promise,h)},b.prototype.otherCallFulfilled=function(h){f(this.promise,this.onFulfilled,h)},b.prototype.callRejected=function(h){a.reject(this.promise,h)},b.prototype.otherCallRejected=function(h){f(this.promise,this.onRejected,h)},a.resolve=function(h,y){var S=g(m,y);if(S.status==="error")return a.reject(h,S.value);var C=S.value;if(C)d(h,C);else{h.state=p,h.outcome=y;for(var I=-1,R=h.queue.length;++I<R;)h.queue[I].callFulfilled(y)}return h},a.reject=function(h,y){h.state=l,h.outcome=y;for(var S=-1,C=h.queue.length;++S<C;)h.queue[S].callRejected(y);return h},E.resolve=function(h){return h instanceof this?h:a.resolve(new this(o),h)},E.reject=function(h){var y=new this(o);return a.reject(y,h)},E.all=function(h){var y=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=h.length,C=!1;if(!S)return this.resolve([]);for(var I=new Array(S),R=0,x=-1,z=new this(o);++x<S;)k(h[x],x);return z;function k(M,W){y.resolve(M).then(function(v){I[W]=v,++R!==S||C||(C=!0,a.resolve(z,I))},function(v){C||(C=!0,a.reject(z,v))})}},E.race=function(h){var y=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=h.length,C=!1;if(!S)return this.resolve([]);for(var I=-1,R=new this(o);++I<S;)x=h[I],y.resolve(x).then(function(z){C||(C=!0,a.resolve(R,z))},function(z){C||(C=!0,a.reject(R,z))});var x;return R}},{immediate:36}],38:[function(e,n,s){var i={};(0,e("./lib/utils/common").assign)(i,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),n.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,n,s){var i=e("./zlib/deflate"),o=e("./utils/common"),a=e("./utils/strings"),l=e("./zlib/messages"),p=e("./zlib/zstream"),_=Object.prototype.toString,E=0,b=-1,f=0,m=8;function d(h){if(!(this instanceof d))return new d(h);this.options=o.assign({level:b,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},h||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var S=i.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(S!==E)throw new Error(l[S]);if(y.header&&i.deflateSetHeader(this.strm,y.header),y.dictionary){var C;if(C=typeof y.dictionary=="string"?a.string2buf(y.dictionary):_.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(S=i.deflateSetDictionary(this.strm,C))!==E)throw new Error(l[S]);this._dict_set=!0}}function g(h,y){var S=new d(y);if(S.push(h,!0),S.err)throw S.msg||l[S.err];return S.result}d.prototype.push=function(h,y){var S,C,I=this.strm,R=this.options.chunkSize;if(this.ended)return!1;C=y===~~y?y:y===!0?4:0,typeof h=="string"?I.input=a.string2buf(h):_.call(h)==="[object ArrayBuffer]"?I.input=new Uint8Array(h):I.input=h,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new o.Buf8(R),I.next_out=0,I.avail_out=R),(S=i.deflate(I,C))!==1&&S!==E)return this.onEnd(S),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(I.output,I.next_out))):this.onData(o.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&S!==1);return C===4?(S=i.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===E):C!==2||(this.onEnd(E),!(I.avail_out=0))},d.prototype.onData=function(h){this.chunks.push(h)},d.prototype.onEnd=function(h){h===E&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},s.Deflate=d,s.deflate=g,s.deflateRaw=function(h,y){return(y=y||{}).raw=!0,g(h,y)},s.gzip=function(h,y){return(y=y||{}).gzip=!0,g(h,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,n,s){var i=e("./zlib/inflate"),o=e("./utils/common"),a=e("./utils/strings"),l=e("./zlib/constants"),p=e("./zlib/messages"),_=e("./zlib/zstream"),E=e("./zlib/gzheader"),b=Object.prototype.toString;function f(d){if(!(this instanceof f))return new f(d);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},d||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||d&&d.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&(15&g.windowBits)==0&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var h=i.inflateInit2(this.strm,g.windowBits);if(h!==l.Z_OK)throw new Error(p[h]);this.header=new E,i.inflateGetHeader(this.strm,this.header)}function m(d,g){var h=new f(g);if(h.push(d,!0),h.err)throw h.msg||p[h.err];return h.result}f.prototype.push=function(d,g){var h,y,S,C,I,R,x=this.strm,z=this.options.chunkSize,k=this.options.dictionary,M=!1;if(this.ended)return!1;y=g===~~g?g:g===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof d=="string"?x.input=a.binstring2buf(d):b.call(d)==="[object ArrayBuffer]"?x.input=new Uint8Array(d):x.input=d,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new o.Buf8(z),x.next_out=0,x.avail_out=z),(h=i.inflate(x,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&k&&(R=typeof k=="string"?a.string2buf(k):b.call(k)==="[object ArrayBuffer]"?new Uint8Array(k):k,h=i.inflateSetDictionary(this.strm,R)),h===l.Z_BUF_ERROR&&M===!0&&(h=l.Z_OK,M=!1),h!==l.Z_STREAM_END&&h!==l.Z_OK)return this.onEnd(h),!(this.ended=!0);x.next_out&&(x.avail_out!==0&&h!==l.Z_STREAM_END&&(x.avail_in!==0||y!==l.Z_FINISH&&y!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=a.utf8border(x.output,x.next_out),C=x.next_out-S,I=a.buf2string(x.output,S),x.next_out=C,x.avail_out=z-C,C&&o.arraySet(x.output,x.output,S,C,0),this.onData(I)):this.onData(o.shrinkBuf(x.output,x.next_out)))),x.avail_in===0&&x.avail_out===0&&(M=!0)}while((0<x.avail_in||x.avail_out===0)&&h!==l.Z_STREAM_END);return h===l.Z_STREAM_END&&(y=l.Z_FINISH),y===l.Z_FINISH?(h=i.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===l.Z_OK):y!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(x.avail_out=0))},f.prototype.onData=function(d){this.chunks.push(d)},f.prototype.onEnd=function(d){d===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},s.Inflate=f,s.inflate=m,s.inflateRaw=function(d,g){return(g=g||{}).raw=!0,m(d,g)},s.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,n,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var _=p.shift();if(_){if(typeof _!="object")throw new TypeError(_+"must be non-object");for(var E in _)_.hasOwnProperty(E)&&(l[E]=_[E])}}return l},s.shrinkBuf=function(l,p){return l.length===p?l:l.subarray?l.subarray(0,p):(l.length=p,l)};var o={arraySet:function(l,p,_,E,b){if(p.subarray&&l.subarray)l.set(p.subarray(_,_+E),b);else for(var f=0;f<E;f++)l[b+f]=p[_+f]},flattenChunks:function(l){var p,_,E,b,f,m;for(p=E=0,_=l.length;p<_;p++)E+=l[p].length;for(m=new Uint8Array(E),p=b=0,_=l.length;p<_;p++)f=l[p],m.set(f,b),b+=f.length;return m}},a={arraySet:function(l,p,_,E,b){for(var f=0;f<E;f++)l[b+f]=p[_+f]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(e,n,s){var i=e("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new i.Buf8(256),p=0;p<256;p++)l[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function _(E,b){if(b<65537&&(E.subarray&&a||!E.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(E,b));for(var f="",m=0;m<b;m++)f+=String.fromCharCode(E[m]);return f}l[254]=l[254]=1,s.string2buf=function(E){var b,f,m,d,g,h=E.length,y=0;for(d=0;d<h;d++)(64512&(f=E.charCodeAt(d)))==55296&&d+1<h&&(64512&(m=E.charCodeAt(d+1)))==56320&&(f=65536+(f-55296<<10)+(m-56320),d++),y+=f<128?1:f<2048?2:f<65536?3:4;for(b=new i.Buf8(y),d=g=0;g<y;d++)(64512&(f=E.charCodeAt(d)))==55296&&d+1<h&&(64512&(m=E.charCodeAt(d+1)))==56320&&(f=65536+(f-55296<<10)+(m-56320),d++),f<128?b[g++]=f:(f<2048?b[g++]=192|f>>>6:(f<65536?b[g++]=224|f>>>12:(b[g++]=240|f>>>18,b[g++]=128|f>>>12&63),b[g++]=128|f>>>6&63),b[g++]=128|63&f);return b},s.buf2binstring=function(E){return _(E,E.length)},s.binstring2buf=function(E){for(var b=new i.Buf8(E.length),f=0,m=b.length;f<m;f++)b[f]=E.charCodeAt(f);return b},s.buf2string=function(E,b){var f,m,d,g,h=b||E.length,y=new Array(2*h);for(f=m=0;f<h;)if((d=E[f++])<128)y[m++]=d;else if(4<(g=l[d]))y[m++]=65533,f+=g-1;else{for(d&=g===2?31:g===3?15:7;1<g&&f<h;)d=d<<6|63&E[f++],g--;1<g?y[m++]=65533:d<65536?y[m++]=d:(d-=65536,y[m++]=55296|d>>10&1023,y[m++]=56320|1023&d)}return _(y,m)},s.utf8border=function(E,b){var f;for((b=b||E.length)>E.length&&(b=E.length),f=b-1;0<=f&&(192&E[f])==128;)f--;return f<0||f===0?b:f+l[E[f]]>b?f:b}},{"./common":41}],43:[function(e,n,s){n.exports=function(i,o,a,l){for(var p=65535&i|0,_=i>>>16&65535|0,E=0;a!==0;){for(a-=E=2e3<a?2e3:a;_=_+(p=p+o[l++]|0)|0,--E;);p%=65521,_%=65521}return p|_<<16|0}},{}],44:[function(e,n,s){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,n,s){var i=(function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var p=0;p<8;p++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a})();n.exports=function(o,a,l,p){var _=i,E=p+l;o^=-1;for(var b=p;b<E;b++)o=o>>>8^_[255&(o^a[b])];return-1^o}},{}],46:[function(e,n,s){var i,o=e("../utils/common"),a=e("./trees"),l=e("./adler32"),p=e("./crc32"),_=e("./messages"),E=0,b=4,f=0,m=-2,d=-1,g=4,h=2,y=8,S=9,C=286,I=30,R=19,x=2*C+1,z=15,k=3,M=258,W=M+k+1,v=42,B=113,u=1,N=2,nt=3,J=4;function st(c,F){return c.msg=_[F],F}function G(c){return(c<<1)-(4<c?9:0)}function rt(c){for(var F=c.length;0<=--F;)c[F]=0}function D(c){var F=c.state,L=F.pending;L>c.avail_out&&(L=c.avail_out),L!==0&&(o.arraySet(c.output,F.pending_buf,F.pending_out,L,c.next_out),c.next_out+=L,F.pending_out+=L,c.total_out+=L,c.avail_out-=L,F.pending-=L,F.pending===0&&(F.pending_out=0))}function P(c,F){a._tr_flush_block(c,0<=c.block_start?c.block_start:-1,c.strstart-c.block_start,F),c.block_start=c.strstart,D(c.strm)}function Q(c,F){c.pending_buf[c.pending++]=F}function Z(c,F){c.pending_buf[c.pending++]=F>>>8&255,c.pending_buf[c.pending++]=255&F}function V(c,F){var L,A,w=c.max_chain_length,T=c.strstart,U=c.prev_length,H=c.nice_match,O=c.strstart>c.w_size-W?c.strstart-(c.w_size-W):0,$=c.window,j=c.w_mask,q=c.prev,et=c.strstart+M,dt=$[T+U-1],ot=$[T+U];c.prev_length>=c.good_match&&(w>>=2),H>c.lookahead&&(H=c.lookahead);do if($[(L=F)+U]===ot&&$[L+U-1]===dt&&$[L]===$[T]&&$[++L]===$[T+1]){T+=2,L++;do;while($[++T]===$[++L]&&$[++T]===$[++L]&&$[++T]===$[++L]&&$[++T]===$[++L]&&$[++T]===$[++L]&&$[++T]===$[++L]&&$[++T]===$[++L]&&$[++T]===$[++L]&&T<et);if(A=M-(et-T),T=et-M,U<A){if(c.match_start=F,H<=(U=A))break;dt=$[T+U-1],ot=$[T+U]}}while((F=q[F&j])>O&&--w!=0);return U<=c.lookahead?U:c.lookahead}function ft(c){var F,L,A,w,T,U,H,O,$,j,q=c.w_size;do{if(w=c.window_size-c.lookahead-c.strstart,c.strstart>=q+(q-W)){for(o.arraySet(c.window,c.window,q,q,0),c.match_start-=q,c.strstart-=q,c.block_start-=q,F=L=c.hash_size;A=c.head[--F],c.head[F]=q<=A?A-q:0,--L;);for(F=L=q;A=c.prev[--F],c.prev[F]=q<=A?A-q:0,--L;);w+=q}if(c.strm.avail_in===0)break;if(U=c.strm,H=c.window,O=c.strstart+c.lookahead,$=w,j=void 0,j=U.avail_in,$<j&&(j=$),L=j===0?0:(U.avail_in-=j,o.arraySet(H,U.input,U.next_in,j,O),U.state.wrap===1?U.adler=l(U.adler,H,j,O):U.state.wrap===2&&(U.adler=p(U.adler,H,j,O)),U.next_in+=j,U.total_in+=j,j),c.lookahead+=L,c.lookahead+c.insert>=k)for(T=c.strstart-c.insert,c.ins_h=c.window[T],c.ins_h=(c.ins_h<<c.hash_shift^c.window[T+1])&c.hash_mask;c.insert&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[T+k-1])&c.hash_mask,c.prev[T&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=T,T++,c.insert--,!(c.lookahead+c.insert<k)););}while(c.lookahead<W&&c.strm.avail_in!==0)}function ut(c,F){for(var L,A;;){if(c.lookahead<W){if(ft(c),c.lookahead<W&&F===E)return u;if(c.lookahead===0)break}if(L=0,c.lookahead>=k&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+k-1])&c.hash_mask,L=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),L!==0&&c.strstart-L<=c.w_size-W&&(c.match_length=V(c,L)),c.match_length>=k)if(A=a._tr_tally(c,c.strstart-c.match_start,c.match_length-k),c.lookahead-=c.match_length,c.match_length<=c.max_lazy_match&&c.lookahead>=k){for(c.match_length--;c.strstart++,c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+k-1])&c.hash_mask,L=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart,--c.match_length!=0;);c.strstart++}else c.strstart+=c.match_length,c.match_length=0,c.ins_h=c.window[c.strstart],c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+1])&c.hash_mask;else A=a._tr_tally(c,0,c.window[c.strstart]),c.lookahead--,c.strstart++;if(A&&(P(c,!1),c.strm.avail_out===0))return u}return c.insert=c.strstart<k-1?c.strstart:k-1,F===b?(P(c,!0),c.strm.avail_out===0?nt:J):c.last_lit&&(P(c,!1),c.strm.avail_out===0)?u:N}function it(c,F){for(var L,A,w;;){if(c.lookahead<W){if(ft(c),c.lookahead<W&&F===E)return u;if(c.lookahead===0)break}if(L=0,c.lookahead>=k&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+k-1])&c.hash_mask,L=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),c.prev_length=c.match_length,c.prev_match=c.match_start,c.match_length=k-1,L!==0&&c.prev_length<c.max_lazy_match&&c.strstart-L<=c.w_size-W&&(c.match_length=V(c,L),c.match_length<=5&&(c.strategy===1||c.match_length===k&&4096<c.strstart-c.match_start)&&(c.match_length=k-1)),c.prev_length>=k&&c.match_length<=c.prev_length){for(w=c.strstart+c.lookahead-k,A=a._tr_tally(c,c.strstart-1-c.prev_match,c.prev_length-k),c.lookahead-=c.prev_length-1,c.prev_length-=2;++c.strstart<=w&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+k-1])&c.hash_mask,L=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),--c.prev_length!=0;);if(c.match_available=0,c.match_length=k-1,c.strstart++,A&&(P(c,!1),c.strm.avail_out===0))return u}else if(c.match_available){if((A=a._tr_tally(c,0,c.window[c.strstart-1]))&&P(c,!1),c.strstart++,c.lookahead--,c.strm.avail_out===0)return u}else c.match_available=1,c.strstart++,c.lookahead--}return c.match_available&&(A=a._tr_tally(c,0,c.window[c.strstart-1]),c.match_available=0),c.insert=c.strstart<k-1?c.strstart:k-1,F===b?(P(c,!0),c.strm.avail_out===0?nt:J):c.last_lit&&(P(c,!1),c.strm.avail_out===0)?u:N}function at(c,F,L,A,w){this.good_length=c,this.max_lazy=F,this.nice_length=L,this.max_chain=A,this.func=w}function ht(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*x),this.dyn_dtree=new o.Buf16(2*(2*I+1)),this.bl_tree=new o.Buf16(2*(2*R+1)),rt(this.dyn_ltree),rt(this.dyn_dtree),rt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(z+1),this.heap=new o.Buf16(2*C+1),rt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),rt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function mt(c){var F;return c&&c.state?(c.total_in=c.total_out=0,c.data_type=h,(F=c.state).pending=0,F.pending_out=0,F.wrap<0&&(F.wrap=-F.wrap),F.status=F.wrap?v:B,c.adler=F.wrap===2?0:1,F.last_flush=E,a._tr_init(F),f):st(c,m)}function kt(c){var F=mt(c);return F===f&&(function(L){L.window_size=2*L.w_size,rt(L.head),L.max_lazy_match=i[L.level].max_lazy,L.good_match=i[L.level].good_length,L.nice_match=i[L.level].nice_length,L.max_chain_length=i[L.level].max_chain,L.strstart=0,L.block_start=0,L.lookahead=0,L.insert=0,L.match_length=L.prev_length=k-1,L.match_available=0,L.ins_h=0})(c.state),F}function Ct(c,F,L,A,w,T){if(!c)return m;var U=1;if(F===d&&(F=6),A<0?(U=0,A=-A):15<A&&(U=2,A-=16),w<1||S<w||L!==y||A<8||15<A||F<0||9<F||T<0||g<T)return st(c,m);A===8&&(A=9);var H=new ht;return(c.state=H).strm=c,H.wrap=U,H.gzhead=null,H.w_bits=A,H.w_size=1<<H.w_bits,H.w_mask=H.w_size-1,H.hash_bits=w+7,H.hash_size=1<<H.hash_bits,H.hash_mask=H.hash_size-1,H.hash_shift=~~((H.hash_bits+k-1)/k),H.window=new o.Buf8(2*H.w_size),H.head=new o.Buf16(H.hash_size),H.prev=new o.Buf16(H.w_size),H.lit_bufsize=1<<w+6,H.pending_buf_size=4*H.lit_bufsize,H.pending_buf=new o.Buf8(H.pending_buf_size),H.d_buf=1*H.lit_bufsize,H.l_buf=3*H.lit_bufsize,H.level=F,H.strategy=T,H.method=L,kt(c)}i=[new at(0,0,0,0,function(c,F){var L=65535;for(L>c.pending_buf_size-5&&(L=c.pending_buf_size-5);;){if(c.lookahead<=1){if(ft(c),c.lookahead===0&&F===E)return u;if(c.lookahead===0)break}c.strstart+=c.lookahead,c.lookahead=0;var A=c.block_start+L;if((c.strstart===0||c.strstart>=A)&&(c.lookahead=c.strstart-A,c.strstart=A,P(c,!1),c.strm.avail_out===0)||c.strstart-c.block_start>=c.w_size-W&&(P(c,!1),c.strm.avail_out===0))return u}return c.insert=0,F===b?(P(c,!0),c.strm.avail_out===0?nt:J):(c.strstart>c.block_start&&(P(c,!1),c.strm.avail_out),u)}),new at(4,4,8,4,ut),new at(4,5,16,8,ut),new at(4,6,32,32,ut),new at(4,4,16,16,it),new at(8,16,32,32,it),new at(8,16,128,128,it),new at(8,32,128,256,it),new at(32,128,258,1024,it),new at(32,258,258,4096,it)],s.deflateInit=function(c,F){return Ct(c,F,y,15,8,0)},s.deflateInit2=Ct,s.deflateReset=kt,s.deflateResetKeep=mt,s.deflateSetHeader=function(c,F){return c&&c.state?c.state.wrap!==2?m:(c.state.gzhead=F,f):m},s.deflate=function(c,F){var L,A,w,T;if(!c||!c.state||5<F||F<0)return c?st(c,m):m;if(A=c.state,!c.output||!c.input&&c.avail_in!==0||A.status===666&&F!==b)return st(c,c.avail_out===0?-5:m);if(A.strm=c,L=A.last_flush,A.last_flush=F,A.status===v)if(A.wrap===2)c.adler=0,Q(A,31),Q(A,139),Q(A,8),A.gzhead?(Q(A,(A.gzhead.text?1:0)+(A.gzhead.hcrc?2:0)+(A.gzhead.extra?4:0)+(A.gzhead.name?8:0)+(A.gzhead.comment?16:0)),Q(A,255&A.gzhead.time),Q(A,A.gzhead.time>>8&255),Q(A,A.gzhead.time>>16&255),Q(A,A.gzhead.time>>24&255),Q(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),Q(A,255&A.gzhead.os),A.gzhead.extra&&A.gzhead.extra.length&&(Q(A,255&A.gzhead.extra.length),Q(A,A.gzhead.extra.length>>8&255)),A.gzhead.hcrc&&(c.adler=p(c.adler,A.pending_buf,A.pending,0)),A.gzindex=0,A.status=69):(Q(A,0),Q(A,0),Q(A,0),Q(A,0),Q(A,0),Q(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),Q(A,3),A.status=B);else{var U=y+(A.w_bits-8<<4)<<8;U|=(2<=A.strategy||A.level<2?0:A.level<6?1:A.level===6?2:3)<<6,A.strstart!==0&&(U|=32),U+=31-U%31,A.status=B,Z(A,U),A.strstart!==0&&(Z(A,c.adler>>>16),Z(A,65535&c.adler)),c.adler=1}if(A.status===69)if(A.gzhead.extra){for(w=A.pending;A.gzindex<(65535&A.gzhead.extra.length)&&(A.pending!==A.pending_buf_size||(A.gzhead.hcrc&&A.pending>w&&(c.adler=p(c.adler,A.pending_buf,A.pending-w,w)),D(c),w=A.pending,A.pending!==A.pending_buf_size));)Q(A,255&A.gzhead.extra[A.gzindex]),A.gzindex++;A.gzhead.hcrc&&A.pending>w&&(c.adler=p(c.adler,A.pending_buf,A.pending-w,w)),A.gzindex===A.gzhead.extra.length&&(A.gzindex=0,A.status=73)}else A.status=73;if(A.status===73)if(A.gzhead.name){w=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>w&&(c.adler=p(c.adler,A.pending_buf,A.pending-w,w)),D(c),w=A.pending,A.pending===A.pending_buf_size)){T=1;break}T=A.gzindex<A.gzhead.name.length?255&A.gzhead.name.charCodeAt(A.gzindex++):0,Q(A,T)}while(T!==0);A.gzhead.hcrc&&A.pending>w&&(c.adler=p(c.adler,A.pending_buf,A.pending-w,w)),T===0&&(A.gzindex=0,A.status=91)}else A.status=91;if(A.status===91)if(A.gzhead.comment){w=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>w&&(c.adler=p(c.adler,A.pending_buf,A.pending-w,w)),D(c),w=A.pending,A.pending===A.pending_buf_size)){T=1;break}T=A.gzindex<A.gzhead.comment.length?255&A.gzhead.comment.charCodeAt(A.gzindex++):0,Q(A,T)}while(T!==0);A.gzhead.hcrc&&A.pending>w&&(c.adler=p(c.adler,A.pending_buf,A.pending-w,w)),T===0&&(A.status=103)}else A.status=103;if(A.status===103&&(A.gzhead.hcrc?(A.pending+2>A.pending_buf_size&&D(c),A.pending+2<=A.pending_buf_size&&(Q(A,255&c.adler),Q(A,c.adler>>8&255),c.adler=0,A.status=B)):A.status=B),A.pending!==0){if(D(c),c.avail_out===0)return A.last_flush=-1,f}else if(c.avail_in===0&&G(F)<=G(L)&&F!==b)return st(c,-5);if(A.status===666&&c.avail_in!==0)return st(c,-5);if(c.avail_in!==0||A.lookahead!==0||F!==E&&A.status!==666){var H=A.strategy===2?(function(O,$){for(var j;;){if(O.lookahead===0&&(ft(O),O.lookahead===0)){if($===E)return u;break}if(O.match_length=0,j=a._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++,j&&(P(O,!1),O.strm.avail_out===0))return u}return O.insert=0,$===b?(P(O,!0),O.strm.avail_out===0?nt:J):O.last_lit&&(P(O,!1),O.strm.avail_out===0)?u:N})(A,F):A.strategy===3?(function(O,$){for(var j,q,et,dt,ot=O.window;;){if(O.lookahead<=M){if(ft(O),O.lookahead<=M&&$===E)return u;if(O.lookahead===0)break}if(O.match_length=0,O.lookahead>=k&&0<O.strstart&&(q=ot[et=O.strstart-1])===ot[++et]&&q===ot[++et]&&q===ot[++et]){dt=O.strstart+M;do;while(q===ot[++et]&&q===ot[++et]&&q===ot[++et]&&q===ot[++et]&&q===ot[++et]&&q===ot[++et]&&q===ot[++et]&&q===ot[++et]&&et<dt);O.match_length=M-(dt-et),O.match_length>O.lookahead&&(O.match_length=O.lookahead)}if(O.match_length>=k?(j=a._tr_tally(O,1,O.match_length-k),O.lookahead-=O.match_length,O.strstart+=O.match_length,O.match_length=0):(j=a._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++),j&&(P(O,!1),O.strm.avail_out===0))return u}return O.insert=0,$===b?(P(O,!0),O.strm.avail_out===0?nt:J):O.last_lit&&(P(O,!1),O.strm.avail_out===0)?u:N})(A,F):i[A.level].func(A,F);if(H!==nt&&H!==J||(A.status=666),H===u||H===nt)return c.avail_out===0&&(A.last_flush=-1),f;if(H===N&&(F===1?a._tr_align(A):F!==5&&(a._tr_stored_block(A,0,0,!1),F===3&&(rt(A.head),A.lookahead===0&&(A.strstart=0,A.block_start=0,A.insert=0))),D(c),c.avail_out===0))return A.last_flush=-1,f}return F!==b?f:A.wrap<=0?1:(A.wrap===2?(Q(A,255&c.adler),Q(A,c.adler>>8&255),Q(A,c.adler>>16&255),Q(A,c.adler>>24&255),Q(A,255&c.total_in),Q(A,c.total_in>>8&255),Q(A,c.total_in>>16&255),Q(A,c.total_in>>24&255)):(Z(A,c.adler>>>16),Z(A,65535&c.adler)),D(c),0<A.wrap&&(A.wrap=-A.wrap),A.pending!==0?f:1)},s.deflateEnd=function(c){var F;return c&&c.state?(F=c.state.status)!==v&&F!==69&&F!==73&&F!==91&&F!==103&&F!==B&&F!==666?st(c,m):(c.state=null,F===B?st(c,-3):f):m},s.deflateSetDictionary=function(c,F){var L,A,w,T,U,H,O,$,j=F.length;if(!c||!c.state||(T=(L=c.state).wrap)===2||T===1&&L.status!==v||L.lookahead)return m;for(T===1&&(c.adler=l(c.adler,F,j,0)),L.wrap=0,j>=L.w_size&&(T===0&&(rt(L.head),L.strstart=0,L.block_start=0,L.insert=0),$=new o.Buf8(L.w_size),o.arraySet($,F,j-L.w_size,L.w_size,0),F=$,j=L.w_size),U=c.avail_in,H=c.next_in,O=c.input,c.avail_in=j,c.next_in=0,c.input=F,ft(L);L.lookahead>=k;){for(A=L.strstart,w=L.lookahead-(k-1);L.ins_h=(L.ins_h<<L.hash_shift^L.window[A+k-1])&L.hash_mask,L.prev[A&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=A,A++,--w;);L.strstart=A,L.lookahead=k-1,ft(L)}return L.strstart+=L.lookahead,L.block_start=L.strstart,L.insert=L.lookahead,L.lookahead=0,L.match_length=L.prev_length=k-1,L.match_available=0,c.next_in=H,c.input=O,c.avail_in=U,L.wrap=T,f},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,n,s){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,n,s){n.exports=function(i,o){var a,l,p,_,E,b,f,m,d,g,h,y,S,C,I,R,x,z,k,M,W,v,B,u,N;a=i.state,l=i.next_in,u=i.input,p=l+(i.avail_in-5),_=i.next_out,N=i.output,E=_-(o-i.avail_out),b=_+(i.avail_out-257),f=a.dmax,m=a.wsize,d=a.whave,g=a.wnext,h=a.window,y=a.hold,S=a.bits,C=a.lencode,I=a.distcode,R=(1<<a.lenbits)-1,x=(1<<a.distbits)-1;t:do{S<15&&(y+=u[l++]<<S,S+=8,y+=u[l++]<<S,S+=8),z=C[y&R];e:for(;;){if(y>>>=k=z>>>24,S-=k,(k=z>>>16&255)===0)N[_++]=65535&z;else{if(!(16&k)){if((64&k)==0){z=C[(65535&z)+(y&(1<<k)-1)];continue e}if(32&k){a.mode=12;break t}i.msg="invalid literal/length code",a.mode=30;break t}M=65535&z,(k&=15)&&(S<k&&(y+=u[l++]<<S,S+=8),M+=y&(1<<k)-1,y>>>=k,S-=k),S<15&&(y+=u[l++]<<S,S+=8,y+=u[l++]<<S,S+=8),z=I[y&x];r:for(;;){if(y>>>=k=z>>>24,S-=k,!(16&(k=z>>>16&255))){if((64&k)==0){z=I[(65535&z)+(y&(1<<k)-1)];continue r}i.msg="invalid distance code",a.mode=30;break t}if(W=65535&z,S<(k&=15)&&(y+=u[l++]<<S,(S+=8)<k&&(y+=u[l++]<<S,S+=8)),f<(W+=y&(1<<k)-1)){i.msg="invalid distance too far back",a.mode=30;break t}if(y>>>=k,S-=k,(k=_-E)<W){if(d<(k=W-k)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break t}if(B=h,(v=0)===g){if(v+=m-k,k<M){for(M-=k;N[_++]=h[v++],--k;);v=_-W,B=N}}else if(g<k){if(v+=m+g-k,(k-=g)<M){for(M-=k;N[_++]=h[v++],--k;);if(v=0,g<M){for(M-=k=g;N[_++]=h[v++],--k;);v=_-W,B=N}}}else if(v+=g-k,k<M){for(M-=k;N[_++]=h[v++],--k;);v=_-W,B=N}for(;2<M;)N[_++]=B[v++],N[_++]=B[v++],N[_++]=B[v++],M-=3;M&&(N[_++]=B[v++],1<M&&(N[_++]=B[v++]))}else{for(v=_-W;N[_++]=N[v++],N[_++]=N[v++],N[_++]=N[v++],2<(M-=3););M&&(N[_++]=N[v++],1<M&&(N[_++]=N[v++]))}break}}break}}while(l<p&&_<b);l-=M=S>>3,y&=(1<<(S-=M<<3))-1,i.next_in=l,i.next_out=_,i.avail_in=l<p?p-l+5:5-(l-p),i.avail_out=_<b?b-_+257:257-(_-b),a.hold=y,a.bits=S}},{}],49:[function(e,n,s){var i=e("../utils/common"),o=e("./adler32"),a=e("./crc32"),l=e("./inffast"),p=e("./inftrees"),_=1,E=2,b=0,f=-2,m=1,d=852,g=592;function h(v){return(v>>>24&255)+(v>>>8&65280)+((65280&v)<<8)+((255&v)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(v){var B;return v&&v.state?(B=v.state,v.total_in=v.total_out=B.total=0,v.msg="",B.wrap&&(v.adler=1&B.wrap),B.mode=m,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new i.Buf32(d),B.distcode=B.distdyn=new i.Buf32(g),B.sane=1,B.back=-1,b):f}function C(v){var B;return v&&v.state?((B=v.state).wsize=0,B.whave=0,B.wnext=0,S(v)):f}function I(v,B){var u,N;return v&&v.state?(N=v.state,B<0?(u=0,B=-B):(u=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?f:(N.window!==null&&N.wbits!==B&&(N.window=null),N.wrap=u,N.wbits=B,C(v))):f}function R(v,B){var u,N;return v?(N=new y,(v.state=N).window=null,(u=I(v,B))!==b&&(v.state=null),u):f}var x,z,k=!0;function M(v){if(k){var B;for(x=new i.Buf32(512),z=new i.Buf32(32),B=0;B<144;)v.lens[B++]=8;for(;B<256;)v.lens[B++]=9;for(;B<280;)v.lens[B++]=7;for(;B<288;)v.lens[B++]=8;for(p(_,v.lens,0,288,x,0,v.work,{bits:9}),B=0;B<32;)v.lens[B++]=5;p(E,v.lens,0,32,z,0,v.work,{bits:5}),k=!1}v.lencode=x,v.lenbits=9,v.distcode=z,v.distbits=5}function W(v,B,u,N){var nt,J=v.state;return J.window===null&&(J.wsize=1<<J.wbits,J.wnext=0,J.whave=0,J.window=new i.Buf8(J.wsize)),N>=J.wsize?(i.arraySet(J.window,B,u-J.wsize,J.wsize,0),J.wnext=0,J.whave=J.wsize):(N<(nt=J.wsize-J.wnext)&&(nt=N),i.arraySet(J.window,B,u-N,nt,J.wnext),(N-=nt)?(i.arraySet(J.window,B,u-N,N,0),J.wnext=N,J.whave=J.wsize):(J.wnext+=nt,J.wnext===J.wsize&&(J.wnext=0),J.whave<J.wsize&&(J.whave+=nt))),0}s.inflateReset=C,s.inflateReset2=I,s.inflateResetKeep=S,s.inflateInit=function(v){return R(v,15)},s.inflateInit2=R,s.inflate=function(v,B){var u,N,nt,J,st,G,rt,D,P,Q,Z,V,ft,ut,it,at,ht,mt,kt,Ct,c,F,L,A,w=0,T=new i.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!v||!v.state||!v.output||!v.input&&v.avail_in!==0)return f;(u=v.state).mode===12&&(u.mode=13),st=v.next_out,nt=v.output,rt=v.avail_out,J=v.next_in,N=v.input,G=v.avail_in,D=u.hold,P=u.bits,Q=G,Z=rt,F=b;t:for(;;)switch(u.mode){case m:if(u.wrap===0){u.mode=13;break}for(;P<16;){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}if(2&u.wrap&&D===35615){T[u.check=0]=255&D,T[1]=D>>>8&255,u.check=a(u.check,T,2,0),P=D=0,u.mode=2;break}if(u.flags=0,u.head&&(u.head.done=!1),!(1&u.wrap)||(((255&D)<<8)+(D>>8))%31){v.msg="incorrect header check",u.mode=30;break}if((15&D)!=8){v.msg="unknown compression method",u.mode=30;break}if(P-=4,c=8+(15&(D>>>=4)),u.wbits===0)u.wbits=c;else if(c>u.wbits){v.msg="invalid window size",u.mode=30;break}u.dmax=1<<c,v.adler=u.check=1,u.mode=512&D?10:12,P=D=0;break;case 2:for(;P<16;){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}if(u.flags=D,(255&u.flags)!=8){v.msg="unknown compression method",u.mode=30;break}if(57344&u.flags){v.msg="unknown header flags set",u.mode=30;break}u.head&&(u.head.text=D>>8&1),512&u.flags&&(T[0]=255&D,T[1]=D>>>8&255,u.check=a(u.check,T,2,0)),P=D=0,u.mode=3;case 3:for(;P<32;){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}u.head&&(u.head.time=D),512&u.flags&&(T[0]=255&D,T[1]=D>>>8&255,T[2]=D>>>16&255,T[3]=D>>>24&255,u.check=a(u.check,T,4,0)),P=D=0,u.mode=4;case 4:for(;P<16;){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}u.head&&(u.head.xflags=255&D,u.head.os=D>>8),512&u.flags&&(T[0]=255&D,T[1]=D>>>8&255,u.check=a(u.check,T,2,0)),P=D=0,u.mode=5;case 5:if(1024&u.flags){for(;P<16;){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}u.length=D,u.head&&(u.head.extra_len=D),512&u.flags&&(T[0]=255&D,T[1]=D>>>8&255,u.check=a(u.check,T,2,0)),P=D=0}else u.head&&(u.head.extra=null);u.mode=6;case 6:if(1024&u.flags&&(G<(V=u.length)&&(V=G),V&&(u.head&&(c=u.head.extra_len-u.length,u.head.extra||(u.head.extra=new Array(u.head.extra_len)),i.arraySet(u.head.extra,N,J,V,c)),512&u.flags&&(u.check=a(u.check,N,V,J)),G-=V,J+=V,u.length-=V),u.length))break t;u.length=0,u.mode=7;case 7:if(2048&u.flags){if(G===0)break t;for(V=0;c=N[J+V++],u.head&&c&&u.length<65536&&(u.head.name+=String.fromCharCode(c)),c&&V<G;);if(512&u.flags&&(u.check=a(u.check,N,V,J)),G-=V,J+=V,c)break t}else u.head&&(u.head.name=null);u.length=0,u.mode=8;case 8:if(4096&u.flags){if(G===0)break t;for(V=0;c=N[J+V++],u.head&&c&&u.length<65536&&(u.head.comment+=String.fromCharCode(c)),c&&V<G;);if(512&u.flags&&(u.check=a(u.check,N,V,J)),G-=V,J+=V,c)break t}else u.head&&(u.head.comment=null);u.mode=9;case 9:if(512&u.flags){for(;P<16;){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}if(D!==(65535&u.check)){v.msg="header crc mismatch",u.mode=30;break}P=D=0}u.head&&(u.head.hcrc=u.flags>>9&1,u.head.done=!0),v.adler=u.check=0,u.mode=12;break;case 10:for(;P<32;){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}v.adler=u.check=h(D),P=D=0,u.mode=11;case 11:if(u.havedict===0)return v.next_out=st,v.avail_out=rt,v.next_in=J,v.avail_in=G,u.hold=D,u.bits=P,2;v.adler=u.check=1,u.mode=12;case 12:if(B===5||B===6)break t;case 13:if(u.last){D>>>=7&P,P-=7&P,u.mode=27;break}for(;P<3;){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}switch(u.last=1&D,P-=1,3&(D>>>=1)){case 0:u.mode=14;break;case 1:if(M(u),u.mode=20,B!==6)break;D>>>=2,P-=2;break t;case 2:u.mode=17;break;case 3:v.msg="invalid block type",u.mode=30}D>>>=2,P-=2;break;case 14:for(D>>>=7&P,P-=7&P;P<32;){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}if((65535&D)!=(D>>>16^65535)){v.msg="invalid stored block lengths",u.mode=30;break}if(u.length=65535&D,P=D=0,u.mode=15,B===6)break t;case 15:u.mode=16;case 16:if(V=u.length){if(G<V&&(V=G),rt<V&&(V=rt),V===0)break t;i.arraySet(nt,N,J,V,st),G-=V,J+=V,rt-=V,st+=V,u.length-=V;break}u.mode=12;break;case 17:for(;P<14;){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}if(u.nlen=257+(31&D),D>>>=5,P-=5,u.ndist=1+(31&D),D>>>=5,P-=5,u.ncode=4+(15&D),D>>>=4,P-=4,286<u.nlen||30<u.ndist){v.msg="too many length or distance symbols",u.mode=30;break}u.have=0,u.mode=18;case 18:for(;u.have<u.ncode;){for(;P<3;){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}u.lens[U[u.have++]]=7&D,D>>>=3,P-=3}for(;u.have<19;)u.lens[U[u.have++]]=0;if(u.lencode=u.lendyn,u.lenbits=7,L={bits:u.lenbits},F=p(0,u.lens,0,19,u.lencode,0,u.work,L),u.lenbits=L.bits,F){v.msg="invalid code lengths set",u.mode=30;break}u.have=0,u.mode=19;case 19:for(;u.have<u.nlen+u.ndist;){for(;at=(w=u.lencode[D&(1<<u.lenbits)-1])>>>16&255,ht=65535&w,!((it=w>>>24)<=P);){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}if(ht<16)D>>>=it,P-=it,u.lens[u.have++]=ht;else{if(ht===16){for(A=it+2;P<A;){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}if(D>>>=it,P-=it,u.have===0){v.msg="invalid bit length repeat",u.mode=30;break}c=u.lens[u.have-1],V=3+(3&D),D>>>=2,P-=2}else if(ht===17){for(A=it+3;P<A;){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}P-=it,c=0,V=3+(7&(D>>>=it)),D>>>=3,P-=3}else{for(A=it+7;P<A;){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}P-=it,c=0,V=11+(127&(D>>>=it)),D>>>=7,P-=7}if(u.have+V>u.nlen+u.ndist){v.msg="invalid bit length repeat",u.mode=30;break}for(;V--;)u.lens[u.have++]=c}}if(u.mode===30)break;if(u.lens[256]===0){v.msg="invalid code -- missing end-of-block",u.mode=30;break}if(u.lenbits=9,L={bits:u.lenbits},F=p(_,u.lens,0,u.nlen,u.lencode,0,u.work,L),u.lenbits=L.bits,F){v.msg="invalid literal/lengths set",u.mode=30;break}if(u.distbits=6,u.distcode=u.distdyn,L={bits:u.distbits},F=p(E,u.lens,u.nlen,u.ndist,u.distcode,0,u.work,L),u.distbits=L.bits,F){v.msg="invalid distances set",u.mode=30;break}if(u.mode=20,B===6)break t;case 20:u.mode=21;case 21:if(6<=G&&258<=rt){v.next_out=st,v.avail_out=rt,v.next_in=J,v.avail_in=G,u.hold=D,u.bits=P,l(v,Z),st=v.next_out,nt=v.output,rt=v.avail_out,J=v.next_in,N=v.input,G=v.avail_in,D=u.hold,P=u.bits,u.mode===12&&(u.back=-1);break}for(u.back=0;at=(w=u.lencode[D&(1<<u.lenbits)-1])>>>16&255,ht=65535&w,!((it=w>>>24)<=P);){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}if(at&&(240&at)==0){for(mt=it,kt=at,Ct=ht;at=(w=u.lencode[Ct+((D&(1<<mt+kt)-1)>>mt)])>>>16&255,ht=65535&w,!(mt+(it=w>>>24)<=P);){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}D>>>=mt,P-=mt,u.back+=mt}if(D>>>=it,P-=it,u.back+=it,u.length=ht,at===0){u.mode=26;break}if(32&at){u.back=-1,u.mode=12;break}if(64&at){v.msg="invalid literal/length code",u.mode=30;break}u.extra=15&at,u.mode=22;case 22:if(u.extra){for(A=u.extra;P<A;){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}u.length+=D&(1<<u.extra)-1,D>>>=u.extra,P-=u.extra,u.back+=u.extra}u.was=u.length,u.mode=23;case 23:for(;at=(w=u.distcode[D&(1<<u.distbits)-1])>>>16&255,ht=65535&w,!((it=w>>>24)<=P);){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}if((240&at)==0){for(mt=it,kt=at,Ct=ht;at=(w=u.distcode[Ct+((D&(1<<mt+kt)-1)>>mt)])>>>16&255,ht=65535&w,!(mt+(it=w>>>24)<=P);){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}D>>>=mt,P-=mt,u.back+=mt}if(D>>>=it,P-=it,u.back+=it,64&at){v.msg="invalid distance code",u.mode=30;break}u.offset=ht,u.extra=15&at,u.mode=24;case 24:if(u.extra){for(A=u.extra;P<A;){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}u.offset+=D&(1<<u.extra)-1,D>>>=u.extra,P-=u.extra,u.back+=u.extra}if(u.offset>u.dmax){v.msg="invalid distance too far back",u.mode=30;break}u.mode=25;case 25:if(rt===0)break t;if(V=Z-rt,u.offset>V){if((V=u.offset-V)>u.whave&&u.sane){v.msg="invalid distance too far back",u.mode=30;break}ft=V>u.wnext?(V-=u.wnext,u.wsize-V):u.wnext-V,V>u.length&&(V=u.length),ut=u.window}else ut=nt,ft=st-u.offset,V=u.length;for(rt<V&&(V=rt),rt-=V,u.length-=V;nt[st++]=ut[ft++],--V;);u.length===0&&(u.mode=21);break;case 26:if(rt===0)break t;nt[st++]=u.length,rt--,u.mode=21;break;case 27:if(u.wrap){for(;P<32;){if(G===0)break t;G--,D|=N[J++]<<P,P+=8}if(Z-=rt,v.total_out+=Z,u.total+=Z,Z&&(v.adler=u.check=u.flags?a(u.check,nt,Z,st-Z):o(u.check,nt,Z,st-Z)),Z=rt,(u.flags?D:h(D))!==u.check){v.msg="incorrect data check",u.mode=30;break}P=D=0}u.mode=28;case 28:if(u.wrap&&u.flags){for(;P<32;){if(G===0)break t;G--,D+=N[J++]<<P,P+=8}if(D!==(4294967295&u.total)){v.msg="incorrect length check",u.mode=30;break}P=D=0}u.mode=29;case 29:F=1;break t;case 30:F=-3;break t;case 31:return-4;case 32:default:return f}return v.next_out=st,v.avail_out=rt,v.next_in=J,v.avail_in=G,u.hold=D,u.bits=P,(u.wsize||Z!==v.avail_out&&u.mode<30&&(u.mode<27||B!==4))&&W(v,v.output,v.next_out,Z-v.avail_out)?(u.mode=31,-4):(Q-=v.avail_in,Z-=v.avail_out,v.total_in+=Q,v.total_out+=Z,u.total+=Z,u.wrap&&Z&&(v.adler=u.check=u.flags?a(u.check,nt,Z,v.next_out-Z):o(u.check,nt,Z,v.next_out-Z)),v.data_type=u.bits+(u.last?64:0)+(u.mode===12?128:0)+(u.mode===20||u.mode===15?256:0),(Q==0&&Z===0||B===4)&&F===b&&(F=-5),F)},s.inflateEnd=function(v){if(!v||!v.state)return f;var B=v.state;return B.window&&(B.window=null),v.state=null,b},s.inflateGetHeader=function(v,B){var u;return v&&v.state?(2&(u=v.state).wrap)==0?f:((u.head=B).done=!1,b):f},s.inflateSetDictionary=function(v,B){var u,N=B.length;return v&&v.state?(u=v.state).wrap!==0&&u.mode!==11?f:u.mode===11&&o(1,B,N,0)!==u.check?-3:W(v,B,N,N)?(u.mode=31,-4):(u.havedict=1,b):f},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,n,s){var i=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(_,E,b,f,m,d,g,h){var y,S,C,I,R,x,z,k,M,W=h.bits,v=0,B=0,u=0,N=0,nt=0,J=0,st=0,G=0,rt=0,D=0,P=null,Q=0,Z=new i.Buf16(16),V=new i.Buf16(16),ft=null,ut=0;for(v=0;v<=15;v++)Z[v]=0;for(B=0;B<f;B++)Z[E[b+B]]++;for(nt=W,N=15;1<=N&&Z[N]===0;N--);if(N<nt&&(nt=N),N===0)return m[d++]=20971520,m[d++]=20971520,h.bits=1,0;for(u=1;u<N&&Z[u]===0;u++);for(nt<u&&(nt=u),v=G=1;v<=15;v++)if(G<<=1,(G-=Z[v])<0)return-1;if(0<G&&(_===0||N!==1))return-1;for(V[1]=0,v=1;v<15;v++)V[v+1]=V[v]+Z[v];for(B=0;B<f;B++)E[b+B]!==0&&(g[V[E[b+B]]++]=B);if(x=_===0?(P=ft=g,19):_===1?(P=o,Q-=257,ft=a,ut-=257,256):(P=l,ft=p,-1),v=u,R=d,st=B=D=0,C=-1,I=(rt=1<<(J=nt))-1,_===1&&852<rt||_===2&&592<rt)return 1;for(;;){for(z=v-st,M=g[B]<x?(k=0,g[B]):g[B]>x?(k=ft[ut+g[B]],P[Q+g[B]]):(k=96,0),y=1<<v-st,u=S=1<<J;m[R+(D>>st)+(S-=y)]=z<<24|k<<16|M|0,S!==0;);for(y=1<<v-1;D&y;)y>>=1;if(y!==0?(D&=y-1,D+=y):D=0,B++,--Z[v]==0){if(v===N)break;v=E[b+g[B]]}if(nt<v&&(D&I)!==C){for(st===0&&(st=nt),R+=u,G=1<<(J=v-st);J+st<N&&!((G-=Z[J+st])<=0);)J++,G<<=1;if(rt+=1<<J,_===1&&852<rt||_===2&&592<rt)return 1;m[C=D&I]=nt<<24|J<<16|R-d|0}}return D!==0&&(m[R+D]=v-st<<24|64<<16|0),h.bits=nt,0}},{"../utils/common":41}],51:[function(e,n,s){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,n,s){var i=e("../utils/common"),o=0,a=1;function l(w){for(var T=w.length;0<=--T;)w[T]=0}var p=0,_=29,E=256,b=E+1+_,f=30,m=19,d=2*b+1,g=15,h=16,y=7,S=256,C=16,I=17,R=18,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=new Array(2*(b+2));l(W);var v=new Array(2*f);l(v);var B=new Array(512);l(B);var u=new Array(256);l(u);var N=new Array(_);l(N);var nt,J,st,G=new Array(f);function rt(w,T,U,H,O){this.static_tree=w,this.extra_bits=T,this.extra_base=U,this.elems=H,this.max_length=O,this.has_stree=w&&w.length}function D(w,T){this.dyn_tree=w,this.max_code=0,this.stat_desc=T}function P(w){return w<256?B[w]:B[256+(w>>>7)]}function Q(w,T){w.pending_buf[w.pending++]=255&T,w.pending_buf[w.pending++]=T>>>8&255}function Z(w,T,U){w.bi_valid>h-U?(w.bi_buf|=T<<w.bi_valid&65535,Q(w,w.bi_buf),w.bi_buf=T>>h-w.bi_valid,w.bi_valid+=U-h):(w.bi_buf|=T<<w.bi_valid&65535,w.bi_valid+=U)}function V(w,T,U){Z(w,U[2*T],U[2*T+1])}function ft(w,T){for(var U=0;U|=1&w,w>>>=1,U<<=1,0<--T;);return U>>>1}function ut(w,T,U){var H,O,$=new Array(g+1),j=0;for(H=1;H<=g;H++)$[H]=j=j+U[H-1]<<1;for(O=0;O<=T;O++){var q=w[2*O+1];q!==0&&(w[2*O]=ft($[q]++,q))}}function it(w){var T;for(T=0;T<b;T++)w.dyn_ltree[2*T]=0;for(T=0;T<f;T++)w.dyn_dtree[2*T]=0;for(T=0;T<m;T++)w.bl_tree[2*T]=0;w.dyn_ltree[2*S]=1,w.opt_len=w.static_len=0,w.last_lit=w.matches=0}function at(w){8<w.bi_valid?Q(w,w.bi_buf):0<w.bi_valid&&(w.pending_buf[w.pending++]=w.bi_buf),w.bi_buf=0,w.bi_valid=0}function ht(w,T,U,H){var O=2*T,$=2*U;return w[O]<w[$]||w[O]===w[$]&&H[T]<=H[U]}function mt(w,T,U){for(var H=w.heap[U],O=U<<1;O<=w.heap_len&&(O<w.heap_len&&ht(T,w.heap[O+1],w.heap[O],w.depth)&&O++,!ht(T,H,w.heap[O],w.depth));)w.heap[U]=w.heap[O],U=O,O<<=1;w.heap[U]=H}function kt(w,T,U){var H,O,$,j,q=0;if(w.last_lit!==0)for(;H=w.pending_buf[w.d_buf+2*q]<<8|w.pending_buf[w.d_buf+2*q+1],O=w.pending_buf[w.l_buf+q],q++,H===0?V(w,O,T):(V(w,($=u[O])+E+1,T),(j=x[$])!==0&&Z(w,O-=N[$],j),V(w,$=P(--H),U),(j=z[$])!==0&&Z(w,H-=G[$],j)),q<w.last_lit;);V(w,S,T)}function Ct(w,T){var U,H,O,$=T.dyn_tree,j=T.stat_desc.static_tree,q=T.stat_desc.has_stree,et=T.stat_desc.elems,dt=-1;for(w.heap_len=0,w.heap_max=d,U=0;U<et;U++)$[2*U]!==0?(w.heap[++w.heap_len]=dt=U,w.depth[U]=0):$[2*U+1]=0;for(;w.heap_len<2;)$[2*(O=w.heap[++w.heap_len]=dt<2?++dt:0)]=1,w.depth[O]=0,w.opt_len--,q&&(w.static_len-=j[2*O+1]);for(T.max_code=dt,U=w.heap_len>>1;1<=U;U--)mt(w,$,U);for(O=et;U=w.heap[1],w.heap[1]=w.heap[w.heap_len--],mt(w,$,1),H=w.heap[1],w.heap[--w.heap_max]=U,w.heap[--w.heap_max]=H,$[2*O]=$[2*U]+$[2*H],w.depth[O]=(w.depth[U]>=w.depth[H]?w.depth[U]:w.depth[H])+1,$[2*U+1]=$[2*H+1]=O,w.heap[1]=O++,mt(w,$,1),2<=w.heap_len;);w.heap[--w.heap_max]=w.heap[1],(function(ot,vt){var Ht,It,Jt,gt,Yt,fe,xt=vt.dyn_tree,Ve=vt.max_code,cn=vt.stat_desc.static_tree,ln=vt.stat_desc.has_stree,un=vt.stat_desc.extra_bits,Ze=vt.stat_desc.extra_base,Gt=vt.stat_desc.max_length,Xt=0;for(gt=0;gt<=g;gt++)ot.bl_count[gt]=0;for(xt[2*ot.heap[ot.heap_max]+1]=0,Ht=ot.heap_max+1;Ht<d;Ht++)Gt<(gt=xt[2*xt[2*(It=ot.heap[Ht])+1]+1]+1)&&(gt=Gt,Xt++),xt[2*It+1]=gt,Ve<It||(ot.bl_count[gt]++,Yt=0,Ze<=It&&(Yt=un[It-Ze]),fe=xt[2*It],ot.opt_len+=fe*(gt+Yt),ln&&(ot.static_len+=fe*(cn[2*It+1]+Yt)));if(Xt!==0){do{for(gt=Gt-1;ot.bl_count[gt]===0;)gt--;ot.bl_count[gt]--,ot.bl_count[gt+1]+=2,ot.bl_count[Gt]--,Xt-=2}while(0<Xt);for(gt=Gt;gt!==0;gt--)for(It=ot.bl_count[gt];It!==0;)Ve<(Jt=ot.heap[--Ht])||(xt[2*Jt+1]!==gt&&(ot.opt_len+=(gt-xt[2*Jt+1])*xt[2*Jt],xt[2*Jt+1]=gt),It--)}})(w,T),ut($,dt,w.bl_count)}function c(w,T,U){var H,O,$=-1,j=T[1],q=0,et=7,dt=4;for(j===0&&(et=138,dt=3),T[2*(U+1)+1]=65535,H=0;H<=U;H++)O=j,j=T[2*(H+1)+1],++q<et&&O===j||(q<dt?w.bl_tree[2*O]+=q:O!==0?(O!==$&&w.bl_tree[2*O]++,w.bl_tree[2*C]++):q<=10?w.bl_tree[2*I]++:w.bl_tree[2*R]++,$=O,dt=(q=0)===j?(et=138,3):O===j?(et=6,3):(et=7,4))}function F(w,T,U){var H,O,$=-1,j=T[1],q=0,et=7,dt=4;for(j===0&&(et=138,dt=3),H=0;H<=U;H++)if(O=j,j=T[2*(H+1)+1],!(++q<et&&O===j)){if(q<dt)for(;V(w,O,w.bl_tree),--q!=0;);else O!==0?(O!==$&&(V(w,O,w.bl_tree),q--),V(w,C,w.bl_tree),Z(w,q-3,2)):q<=10?(V(w,I,w.bl_tree),Z(w,q-3,3)):(V(w,R,w.bl_tree),Z(w,q-11,7));$=O,dt=(q=0)===j?(et=138,3):O===j?(et=6,3):(et=7,4)}}l(G);var L=!1;function A(w,T,U,H){Z(w,(p<<1)+(H?1:0),3),(function(O,$,j,q){at(O),Q(O,j),Q(O,~j),i.arraySet(O.pending_buf,O.window,$,j,O.pending),O.pending+=j})(w,T,U)}s._tr_init=function(w){L||((function(){var T,U,H,O,$,j=new Array(g+1);for(O=H=0;O<_-1;O++)for(N[O]=H,T=0;T<1<<x[O];T++)u[H++]=O;for(u[H-1]=O,O=$=0;O<16;O++)for(G[O]=$,T=0;T<1<<z[O];T++)B[$++]=O;for($>>=7;O<f;O++)for(G[O]=$<<7,T=0;T<1<<z[O]-7;T++)B[256+$++]=O;for(U=0;U<=g;U++)j[U]=0;for(T=0;T<=143;)W[2*T+1]=8,T++,j[8]++;for(;T<=255;)W[2*T+1]=9,T++,j[9]++;for(;T<=279;)W[2*T+1]=7,T++,j[7]++;for(;T<=287;)W[2*T+1]=8,T++,j[8]++;for(ut(W,b+1,j),T=0;T<f;T++)v[2*T+1]=5,v[2*T]=ft(T,5);nt=new rt(W,x,E+1,b,g),J=new rt(v,z,0,f,g),st=new rt(new Array(0),k,0,m,y)})(),L=!0),w.l_desc=new D(w.dyn_ltree,nt),w.d_desc=new D(w.dyn_dtree,J),w.bl_desc=new D(w.bl_tree,st),w.bi_buf=0,w.bi_valid=0,it(w)},s._tr_stored_block=A,s._tr_flush_block=function(w,T,U,H){var O,$,j=0;0<w.level?(w.strm.data_type===2&&(w.strm.data_type=(function(q){var et,dt=4093624447;for(et=0;et<=31;et++,dt>>>=1)if(1&dt&&q.dyn_ltree[2*et]!==0)return o;if(q.dyn_ltree[18]!==0||q.dyn_ltree[20]!==0||q.dyn_ltree[26]!==0)return a;for(et=32;et<E;et++)if(q.dyn_ltree[2*et]!==0)return a;return o})(w)),Ct(w,w.l_desc),Ct(w,w.d_desc),j=(function(q){var et;for(c(q,q.dyn_ltree,q.l_desc.max_code),c(q,q.dyn_dtree,q.d_desc.max_code),Ct(q,q.bl_desc),et=m-1;3<=et&&q.bl_tree[2*M[et]+1]===0;et--);return q.opt_len+=3*(et+1)+5+5+4,et})(w),O=w.opt_len+3+7>>>3,($=w.static_len+3+7>>>3)<=O&&(O=$)):O=$=U+5,U+4<=O&&T!==-1?A(w,T,U,H):w.strategy===4||$===O?(Z(w,2+(H?1:0),3),kt(w,W,v)):(Z(w,4+(H?1:0),3),(function(q,et,dt,ot){var vt;for(Z(q,et-257,5),Z(q,dt-1,5),Z(q,ot-4,4),vt=0;vt<ot;vt++)Z(q,q.bl_tree[2*M[vt]+1],3);F(q,q.dyn_ltree,et-1),F(q,q.dyn_dtree,dt-1)})(w,w.l_desc.max_code+1,w.d_desc.max_code+1,j+1),kt(w,w.dyn_ltree,w.dyn_dtree)),it(w),H&&at(w)},s._tr_tally=function(w,T,U){return w.pending_buf[w.d_buf+2*w.last_lit]=T>>>8&255,w.pending_buf[w.d_buf+2*w.last_lit+1]=255&T,w.pending_buf[w.l_buf+w.last_lit]=255&U,w.last_lit++,T===0?w.dyn_ltree[2*U]++:(w.matches++,T--,w.dyn_ltree[2*(u[U]+E+1)]++,w.dyn_dtree[2*P(T)]++),w.last_lit===w.lit_bufsize-1},s._tr_align=function(w){Z(w,2,3),V(w,S,W),(function(T){T.bi_valid===16?(Q(T,T.bi_buf),T.bi_buf=0,T.bi_valid=0):8<=T.bi_valid&&(T.pending_buf[T.pending++]=255&T.bi_buf,T.bi_buf>>=8,T.bi_valid-=8)})(w)}},{"../utils/common":41}],53:[function(e,n,s){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,n,s){(function(i){(function(o,a){if(!o.setImmediate){var l,p,_,E,b=1,f={},m=!1,d=o.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(o);g=g&&g.setTimeout?g:o,l={}.toString.call(o.process)==="[object process]"?function(C){process.nextTick(function(){y(C)})}:(function(){if(o.postMessage&&!o.importScripts){var C=!0,I=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=I,C}})()?(E="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",S,!1):o.attachEvent("onmessage",S),function(C){o.postMessage(E+C,"*")}):o.MessageChannel?((_=new MessageChannel).port1.onmessage=function(C){y(C.data)},function(C){_.port2.postMessage(C)}):d&&"onreadystatechange"in d.createElement("script")?(p=d.documentElement,function(C){var I=d.createElement("script");I.onreadystatechange=function(){y(C),I.onreadystatechange=null,p.removeChild(I),I=null},p.appendChild(I)}):function(C){setTimeout(y,0,C)},g.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var I=new Array(arguments.length-1),R=0;R<I.length;R++)I[R]=arguments[R+1];var x={callback:C,args:I};return f[b]=x,l(b),b++},g.clearImmediate=h}function h(C){delete f[C]}function y(C){if(m)setTimeout(y,0,C);else{var I=f[C];if(I){m=!0;try{(function(R){var x=R.callback,z=R.args;switch(z.length){case 0:x();break;case 1:x(z[0]);break;case 2:x(z[0],z[1]);break;case 3:x(z[0],z[1],z[2]);break;default:x.apply(a,z)}})(I)}finally{h(C),m=!1}}}}function S(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(E)===0&&y(+C.data.slice(E.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof ee<"u"?ee:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Me)),Me.exports}var Ri=xi();const Tr=rn(Ri);function Br(t){return btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function xr(t){t=(t||"").replace(/-/g,"+").replace(/_/g,"/");const r=t.length%4===0?"":"=".repeat(4-t.length%4),e=atob(t+r),n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}async function ie(t,r,e){if(e.name===X.KDF_ARGON2){if(!await pt.checkArgon2Ready())throw new Error("Argon2 函式庫未成功載入，無法執行。");const{hash:n}=await window.argon2.hash({pass:t,salt:r,time:e.iterations,mem:e.memory,parallelism:e.parallelism,hashLen:32,type:window.argon2.ArgonType.Argon2id});return n}throw new Error("不支援的金鑰衍生演算法。")}async function Rr(t,r,e){return await new He(t).setProtectedHeader(e).encrypt(r)}async function Or(t,r){try{const{plaintext:e}=await Vt(t,r);return e}catch{throw new Error("密碼短語不正確，或密文在傳輸過程中已被竄改 (完整性驗證失敗)。")}}const qt={async encryptText(){const t=K.mnemonic.value.trim(),r=K.passphraseEncrypt.value;if(!t||!r)return pt.showToast("❌ 明文和密碼短語不能為空。");if(!pt.runSecurityChecks(r,Y.selectedKDF))return;lt.setOutput("info","⏳ 正在加密，請稍候..."),await new Promise(n=>setTimeout(n,50));const e=performance.now();try{const n=new TextEncoder().encode(t);let s,i;if(Y.selectedKDF===X.KDF_ARGON2){const a=crypto.getRandomValues(new Uint8Array(X.SALT_BYTES)),l={name:Y.selectedKDF},p={alg:"dir",enc:X.ALGO_AES_GCM,kdf:l.name,salt:Br(a),t:parseInt(K.argon2Iterations.value,10),m:parseInt(K.argon2Memory.value,10)*1024,p:parseInt(K.argon2Parallelism.value,10)};l.iterations=p.t,l.memory=p.m,l.parallelism=p.p;const _=await ie(r,a,l);i=_,s=await Rr(n,_,p)}else if(Y.selectedKDF===X.ALGO_PBES2){const a={alg:X.ALGO_PBES2,enc:X.ALGO_AES_GCM},l=new TextEncoder().encode(r);i=l,s=await new He(n).setProtectedHeader(a).encrypt(l)}else throw new Error(`不支援的加密模式: ${Y.selectedKDF}`);const o=((performance.now()-e)/1e3).toFixed(3);if(Y.lastEncryptedOutput=s,lt.setOutput("success",`✅ 加密成功！ (處理時間：${o} 秒)`),K.selfVerifyCheckbox.checked){lt.setOutput("info","✅ 加密成功！<br>...正在進行自我驗證..."),await new Promise(a=>setTimeout(a,20));try{const a=Y.selectedKDF===X.ALGO_PBES2?{keyManagementAlgorithms:[X.ALGO_PBES2]}:{};await Vt(s,i,a),lt.setOutput("success",`✅ 加密與驗證均成功！ (總時間：${((performance.now()-e)/1e3).toFixed(3)} 秒)`)}catch(a){lt.setOutput("error",`❌ 嚴重錯誤：加密後驗證失敗！請勿使用此密文，並回報此問題。<br>錯誤訊息：${a.message}`);return}}K.base64ResultView.value=s,K.jsonView.value=JSON.stringify(te(s),null,2),K.qrCanvas.hidden=s.length>=X.QR_CODE_MAX_BYTES,K.qrCanvas.hidden||Bi.toCanvas(K.qrCanvas,s,{errorCorrectionLevel:"L",width:320})}catch(n){lt.setOutput("error",`❌ 加密失敗：${n.message}`)}},async decryptText(){const t=K.ciphertextInput.value.trim(),r=K.passphraseDecrypt.value;if(!t||!r)return pt.showToast("❌ 密文和密碼短語不能為空。");lt.setOutput("info","⏳ 正在解密，請稍候..."),await new Promise(n=>setTimeout(n,50));const e=performance.now();try{const n=te(t);let s;if(n.alg==="dir"){if(n.kdf!==X.KDF_ARGON2)throw new Error(`alg: "dir" 模式僅支援 Argon2id，但標頭指定為 ${n.kdf}`);const a=xr(n.salt),l={name:n.kdf,iterations:n.t,memory:n.m,parallelism:n.p},p=await ie(r,a,l);s=await Or(t,p)}else if(n.alg===X.ALGO_PBES2){const a=new TextEncoder().encode(r),{plaintext:l}=await Vt(t,a,{keyManagementAlgorithms:[X.ALGO_PBES2]});s=l}else throw new Error(`不支援的 JWE 演算法: ${n.alg}`);const i=((performance.now()-e)/1e3).toFixed(3),o=new TextDecoder().decode(s);Y.lastDecryptedText=o,lt.setOutput("success",`✅ 解密成功 (處理時間：${i} 秒)<br><br><strong style="font-size: 1.1em; white-space: pre-wrap; word-break: break-word;">${o}</strong>`)}catch(n){lt.setOutput("error",`❌ 解密失敗：${n.message}`)}},async _encryptSingleFile(t,r,e,n){let s=await se.readFileAsArrayBuffer(t);const i=new Uint8Array(s);Y.isCompressionEnabled;let o,a,l={};if(Y.selectedKDF===X.KDF_ARGON2){const p={alg:"dir",enc:X.ALGO_AES_GCM,kdf:n.name,salt:n.saltB64,...n.params};o=await Rr(i,e,p),a=e}else{const p={alg:X.ALGO_PBES2,enc:X.ALGO_AES_GCM},_=new TextEncoder().encode(r);o=await new He(i).setProtectedHeader(p).encrypt(_),a=_,l={keyManagementAlgorithms:[X.ALGO_PBES2]}}return K.selfVerifyFileCheckbox.checked&&await Vt(o,a,l),{filename:t.name+X.DOWNLOAD_FILENAME_SUFFIX,content:o}},async batchEncryptFiles(){if(Y.filesToEncrypt.length===0)return pt.showToast("❌ 請先選擇要加密的檔案。");const t=K.passphraseFileEncrypt.value;if(!t)return pt.showToast("❌ 請輸入密碼短語。");if(!pt.runSecurityChecks(t,Y.selectedKDF))return;lt.setOutput("info",`⏳ 準備加密 ${Y.filesToEncrypt.length} 個檔案...`),await new Promise(e=>setTimeout(e,50));const r=performance.now();try{let e=null;const n={};if(Y.selectedKDF===X.KDF_ARGON2){const a=crypto.getRandomValues(new Uint8Array(X.SALT_BYTES));n.name=Y.selectedKDF,n.saltB64=Br(a),n.params={t:parseInt(K.argon2Iterations.value,10),m:parseInt(K.argon2Memory.value,10)*1024,p:parseInt(K.argon2Parallelism.value,10)},n.iterations=n.params.t,n.memory=n.params.m,n.parallelism=n.params.p,e=await ie(t,a,n)}const s=new Tr;for(const a of Y.filesToEncrypt){lt.setOutput("info",`⏳ 正在加密檔案: ${a.name}...`);const l=await this._encryptSingleFile(a,t,e,n);s.file(l.filename,l.content)}const i=await s.generateAsync({type:"blob"}),o=((performance.now()-r)/1e3).toFixed(3);pt.downloadAsFile(i,`encrypted_files_${Date.now()}.zip`),lt.setOutput("success",`✅ ${Y.filesToEncrypt.length} 個檔案全部加密成功並已打包下載！(總耗時: ${o} 秒)`)}catch(e){lt.setOutput("error",`❌ 檔案加密失敗：${e.message}`)}},async _decryptSingleFile(t,r){const e=await se.readFileAsText(t),n=te(e);let s;if(n.alg==="dir"){if(n.kdf!==X.KDF_ARGON2)throw new Error(`檔案 ${t.name} (alg: "dir") 僅支援 Argon2id，但標頭指定為 ${n.kdf}`);const o=xr(n.salt),a={name:n.kdf,iterations:n.t,memory:n.m,parallelism:n.p},l=await ie(r,o,a);s=await Or(e,l)}else if(n.alg===X.ALGO_PBES2){const o=new TextEncoder().encode(r),{plaintext:a}=await Vt(e,o,{keyManagementAlgorithms:[X.ALGO_PBES2]});s=a}else throw new Error(`檔案 ${t.name} 包含不支援的 JWE 演算法: ${n.alg}`);return n.zip,{filename:t.name.endsWith(X.DOWNLOAD_FILENAME_SUFFIX)?t.name.slice(0,-4):`decrypted-${t.name}`,content:new Blob([s])}},async batchDecryptFiles(){if(Y.filesToDecrypt.length===0)return pt.showToast("❌ 請先選擇要解密的檔案。");const t=K.passphraseFileDecrypt.value;if(!t)return pt.showToast("❌ 請輸入密碼短語。");lt.setOutput("info",`⏳ 準備解密 ${Y.filesToDecrypt.length} 個檔案...`),await new Promise(e=>setTimeout(e,50));const r=performance.now();try{const e=new Tr;for(const i of Y.filesToDecrypt){lt.setOutput("info",`⏳ 正在解密檔案: ${i.name}...`);const o=await this._decryptSingleFile(i,t);e.file(o.filename,o.content)}const n=await e.generateAsync({type:"blob"}),s=((performance.now()-r)/1e3).toFixed(3);pt.downloadAsFile(n,`decrypted_files_${Date.now()}.zip`),lt.setOutput("success",`✅ ${Y.filesToDecrypt.length} 個檔案全部解密成功並已打包下載！(總耗時: ${s} 秒)`)}catch(e){lt.setOutput("error",`❌ 解密失敗：${e.message}`)}},async parseParameters(){const t=K.ciphertextInput.value.trim();if(!t)return pt.showToast("請先貼上 JWE 密文");try{const e=te(t);let n="N/A";e.alg==="dir"&&e.kdf===X.KDF_ARGON2?n=`${e.kdf} (mem: ${e.m/1024}MB, iter: ${e.t}, parallel: ${e.p})`:e.alg===X.ALGO_PBES2?n=`${e.alg} (p2c: ${e.p2c.toLocaleString("en-US")} 迭代)`:n=`不支援的演算法: ${e.alg}`;const s=`v${X.VERSION} (JWE)`;K.paramsDisplayArea.innerHTML=`<p>格式版本：<span>${s}</span></p><p>金鑰管理：<span>${n}</span></p><p>加密演算法：<span>${e.enc}</span></p><p style="color: var(--success-color);">狀態：<span>JWE Header 已載入 ✅</span></p>`,K.paramsDisplayArea.hidden=!1}catch{K.paramsDisplayArea.innerHTML='<p style="color: var(--error-color);">❌ 解析失敗：無效的 JWE 格式。</p>',K.paramsDisplayArea.hidden=!1}}},Pr={init(){const t=localStorage.getItem("my-app-theme")||"dark";this.apply(t)},apply(t){document.documentElement.setAttribute("data-theme",t),K.themeToggleBtn.textContent=t==="dark"?"☀️":"🌙",localStorage.setItem("my-app-theme",t)},toggle(){const t=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";this.apply(t)}},Oi={toggle(t){const r=t.classList.contains("active");t.classList.toggle("active"),t.setAttribute("aria-expanded",!r),t.nextElementSibling.setAttribute("aria-hidden",r)}},Pi={async run(){if(!await pt.checkArgon2Ready())return pt.showToast("❌ Argon2 函式庫未就緒，無法測試。");K.benchmarkBtn.disabled=!0,K.encryptBtn.disabled=!0,K.benchmarkStatus.textContent="⏱️ 正在執行基準測試，請稍候...";try{const e=navigator.hardwareConcurrency||4,n=[1024,512,256,128,64,32];let s=256;for(const i of n){const o=i*1024,a=performance.now();if(await window.argon2.hash({pass:"benchmark",salt:"benchmark-salt",time:4,mem:o,parallelism:e,hashLen:32,type:window.argon2.ArgonType.Argon2id}),performance.now()-a<1e3){s=i;break}await new Promise(p=>setTimeout(p,50))}K.argon2Memory.value=s,K.argon2Iterations.value=4,K.argon2Parallelism.value=e,K.benchmarkStatus.textContent="✅ 測試完成！",pt.showToast("✅ 建議參數已產生並填入！")}catch(t){K.benchmarkStatus.textContent="❌ 測試失敗",pt.showToast(`❌ 基準測試失敗: ${t.message}`)}finally{K.benchmarkBtn.disabled=!1,K.encryptBtn.disabled=!1,setTimeout(()=>{K.benchmarkStatus.textContent=""},4e3)}}};function Di(){K.currentYear.textContent=new Date().getFullYear(),Pr.init(),Y.currentAppMode=X.MODE_TEXT,Y.selectedAlgorithm=X.ALGO_AES_GCM,Y.selectedKDF=X.KDF_ARGON2,lt.setAppMode(Y.currentAppMode),pt.checkArgon2Ready(),K.themeToggleBtn.addEventListener("click",()=>Pr.toggle()),K.scrollTopBtn.addEventListener("click",()=>window.scrollTo({top:0,behavior:"smooth"})),window.addEventListener("scroll",()=>K.scrollTopBtn.classList.toggle("active",window.scrollY>300)),K.appModeSelector.addEventListener("click",r=>{const e=r.target.closest(".option");e?.dataset.appMode&&lt.setAppMode(e.dataset.appMode)}),K.modeSelector.addEventListener("click",r=>{const e=r.target.closest(".option");e?.dataset.mode&&lt.setMode(e.dataset.mode)}),K.algoSelectionGroup.addEventListener("click",r=>{const e=r.target.closest(".option");e&&e.style.cursor==="not-allowed"||lt.handleOptionSelection(r,"selectedAlgorithm")}),K.kdfSelectionGroup.addEventListener("click",r=>{lt.handleOptionSelection(r,"selectedKDF")&&lt.toggleKdfParams(Y.selectedKDF)}),K.passphraseEncrypt.addEventListener("input",r=>lt.updatePasswordStrength(r.target.value,"encrypt")),K.passphraseFileEncrypt.addEventListener("input",r=>lt.updatePasswordStrength(r.target.value,"file")),K.encryptBtn.addEventListener("click",()=>qt.encryptText()),K.decryptBtn.addEventListener("click",()=>qt.decryptText()),K.parseBtn.addEventListener("click",()=>qt.parseParameters()),K.benchmarkBtn.addEventListener("click",()=>Pi.run()),K.fileEncryptInput.addEventListener("change",r=>se.handleFileSelect(r,X.OP_ENCRYPT)),K.fileDecryptInput.addEventListener("change",r=>se.handleFileSelect(r,X.OP_DECRYPT)),K.encryptFileBtn.addEventListener("click",()=>qt.batchEncryptFiles()),K.decryptFileBtn.addEventListener("click",()=>qt.batchDecryptFiles()),K.resetBtn.addEventListener("click",()=>lt.resetAll()),K.pasteBtn.addEventListener("click",()=>pt.pasteTo("ciphertextInput")),K.copyBtn.addEventListener("click",()=>pt.copyFromResult()),K.copyDecryptedBtn.addEventListener("click",()=>pt.copyDecryptedResult()),K.downloadBtn.addEventListener("click",()=>{Y.lastEncryptedOutput&&pt.downloadAsFile(Y.lastEncryptedOutput,`encrypted-v4-${Date.now()}${X.DOWNLOAD_FILENAME_SUFFIX}`)}),K.passwordToggles.forEach(r=>{r.innerHTML=X.SVG_EYE_OPEN,r.addEventListener("click",e=>lt.togglePasswordVisibility(e.currentTarget))});const t=(r,e)=>{r&&(["dragenter","dragover","dragleave","drop"].forEach(n=>{r.addEventListener(n,s=>{s.preventDefault(),s.stopPropagation()})}),["dragenter","dragover"].forEach(n=>r.addEventListener(n,()=>r.classList.add("drag-over"))),["dragleave","drop"].forEach(n=>r.addEventListener(n,()=>r.classList.remove("drag-over"))),r.addEventListener("drop",n=>{n.dataTransfer.files.length>0&&(e.files=n.dataTransfer.files,e.dispatchEvent(new Event("change",{bubbles:!0})))}))};t(K.fileEncryptInput.closest(".file-input-wrapper"),K.fileEncryptInput),t(K.fileDecryptInput.closest(".file-input-wrapper"),K.fileDecryptInput),K.accordionContainer&&K.accordionContainer.addEventListener("click",r=>{const e=r.target.closest(".accordion-header");e&&Oi.toggle(e)})}document.addEventListener("DOMContentLoaded",Di);
