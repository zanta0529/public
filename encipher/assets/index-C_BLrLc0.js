(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(a){if(a.ep)return;a.ep=!0;const n=e(a);fetch(a.href,n)}})();const K={appModeSelector:document.getElementById("appModeSelector"),textModeSection:document.getElementById("text-mode-section"),fileModeSection:document.getElementById("file-mode-section"),modeSelector:document.getElementById("modeSelector"),encryptSection:document.getElementById("encrypt-section"),decryptSection:document.getElementById("decrypt-section"),mnemonic:document.getElementById("mnemonic"),ciphertextInput:document.getElementById("ciphertext-input"),passphraseEncrypt:document.getElementById("passphrase-encrypt"),passphraseDecrypt:document.getElementById("passphrase-decrypt"),algoSelectionGroup:document.getElementById("algoSelectionGroup"),kdfSelectionGroup:document.getElementById("kdfSelectionGroup"),argon2ParamsSection:document.querySelector('.kdf-params-section[data-kdf="Argon2id"]'),pbkdf2ParamsSection:document.querySelector('.kdf-params-section[data-kdf="PBKDF2"]'),argon2Memory:document.getElementById("argon2-memory"),argon2Iterations:document.getElementById("argon2-iterations"),argon2Parallelism:document.getElementById("argon2-parallelism"),pbkdf2Iterations:document.getElementById("pbkdf2-iterations"),encryptBtn:document.getElementById("encryptBtn"),decryptBtn:document.getElementById("decryptBtn"),parseBtn:document.getElementById("parseBtn"),benchmarkBtn:document.getElementById("benchmarkBtn"),benchmarkStatus:document.getElementById("benchmarkStatus"),selfVerifyCheckbox:document.getElementById("self-verify-checkbox"),selfVerifyFileCheckbox:document.getElementById("self-verify-file-checkbox"),passwordStrengthBarEncrypt:document.getElementById("password-strength-bar-encrypt"),passwordStrengthTextEncrypt:document.getElementById("password-strength-text-encrypt"),passwordStrengthBarFile:document.getElementById("password-strength-bar-file"),passwordStrengthTextFile:document.getElementById("password-strength-text-file"),compressCheckbox:document.getElementById("compress-checkbox"),fileEncryptInput:document.getElementById("file-encrypt-input"),fileEncryptList:document.getElementById("file-encrypt-list"),passphraseFileEncrypt:document.getElementById("passphrase-file-encrypt"),encryptFileBtn:document.getElementById("encryptFileBtn"),fileDecryptInput:document.getElementById("file-decrypt-input"),fileDecryptList:document.getElementById("file-decrypt-list"),passphraseFileDecrypt:document.getElementById("passphrase-file-decrypt"),decryptFileBtn:document.getElementById("decryptFileBtn"),pasteBtn:document.getElementById("pasteBtn"),resetBtn:document.getElementById("resetBtn"),resultsArea:document.getElementById("results-area"),textModeResults:document.getElementById("text-mode-results"),output:document.getElementById("output"),copyBtn:document.getElementById("copyBtn"),downloadBtn:document.getElementById("downloadBtn"),qrCanvas:document.getElementById("qrCanvas"),jsonView:document.getElementById("jsonView"),base64ResultView:document.getElementById("base64ResultView"),paramsDisplayArea:document.getElementById("params-display-area"),passwordToggles:document.querySelectorAll(".toggle-password-icon"),decryptionActions:document.getElementById("decryption-actions"),copyDecryptedBtn:document.getElementById("copyDecryptedBtn"),themeToggleBtn:document.getElementById("themeToggleBtn"),currentYear:document.getElementById("currentYear"),toast:document.getElementById("toast"),scrollTopBtn:document.getElementById("scroll-to-top"),accordionContainer:document.querySelector(".accordion")},rt={currentAppMode:null,currentMode:null,selectedKDF:null,toastTimer:null,lastEncryptedOutput:null,lastDecryptedText:null,filesToEncrypt:[],filesToDecrypt:[],isCompressionEnabled:!1},tt={VERSION:4,SALT_BYTES:16,NONCE_BYTES:12,KEY_LENGTH_BITS:256,QR_CODE_MAX_BYTES:2953,FILE_SIZE_LIMIT_BYTES:10*1024*1024,ARGON2_MIN_MEM_MB:256,ARGON2_MIN_ITER:4,ARGON2_MIN_PARALLELISM:1,ARGON2_MIN_TIME:1,ARGON2_MIN_PARA:4,SVG_EYE_OPEN:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/><path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/></svg>',SVG_EYE_SLASH:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7.029 7.029 0 0 0 2.79-.588zM5.21 3.088A7.028 7.028 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474L5.21 3.089z"/><path d="M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829l-2.83-2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12-.708.708z"/></svg>',MODE_TEXT:"text",MODE_FILE:"file",OP_ENCRYPT:"encrypt",OP_DECRYPT:"decrypt",ALGO_AES_GCM:"A256GCM",ALGO_CHACHA:"ChaCha20-Poly1305",ALGO_PBES2:"PBES2-HS512+A256KW",MAX_PBES2_COUNT:5e6,KDF_ARGON2:"Argon2id",HASH_SHA256:"SHA-256",DOWNLOAD_FILENAME_SUFFIX:".jwe"};function Ve(t){return btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function an(t){t=(t||"").replace(/-/g,"+").replace(/_/g,"/");const r=t.length%4===0?"":"=".repeat(4-t.length%4),e=atob(t+r),i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i}const ht={copyFromResult(){rt.lastEncryptedOutput&&navigator.clipboard.writeText(rt.lastEncryptedOutput).then(()=>this.showToast("✅ 已複製 JWE 密文！"),()=>this.showToast("❌ 複製失敗"))},copyDecryptedResult(){rt.lastDecryptedText&&navigator.clipboard.writeText(rt.lastDecryptedText).then(()=>this.showToast("✅ 已複製解密結果！"),()=>this.showToast("❌ 複製失敗"))},pasteTo(t){navigator.clipboard.readText().then(r=>{K[t].value=r,this.showToast("✅ 已貼上內容！")},()=>this.showToast("❌ 貼上失敗"))},downloadAsFile(t,r){const e=t instanceof Blob?t:new Blob([t],{type:"text/plain"}),i=URL.createObjectURL(e),a=document.createElement("a");a.href=i,a.download=r,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)},showToast(t){rt.toastTimer&&clearTimeout(rt.toastTimer),K.toast.textContent=t,K.toast.className="show",rt.toastTimer=setTimeout(()=>{K.toast.className="",rt.toastTimer=null},3e3)},async checkArgon2Ready(){return typeof argon2<"u"?!0:new Promise(t=>{setTimeout(()=>{typeof argon2<"u"?t(!0):(this.showToast("❌ Argon2 函式庫載入失敗！","error"),t(!1))},1e3)})},runSecurityChecks(t,r){if(this.checkPasswordStrength(t).level==="weak"&&this.showToast("⚠️ 警告：密碼強度較弱，建議使用更複雜的密碼。"),r===tt.KDF_ARGON2){const i=parseInt(K.argon2Memory.value,10),a=parseInt(K.argon2Iterations.value,10),n=parseInt(K.argon2Parallelism.value,10);if(i<tt.ARGON2_MIN_MEM_MB||a<tt.ARGON2_MIN_ITER||n<tt.ARGON2_MIN_PARA)return this.showToast("❌ 安全性警告：Argon2 參數過低！"),!1}return!0},checkPasswordStrength(t){let r=0,e="",i="empty";return t.length===0?{score:0,message:"",level:"empty"}:(t.length>=8&&(r+=25),t.length>=12&&(r+=25),/[a-z]/.test(t)&&/[A-Z]/.test(t)&&(r+=20),/\d/.test(t)&&(r+=15),/[^a-zA-Z0-9]/.test(t)&&(r+=15),r=Math.min(r,100),r<50?(e="強度：弱",i="weak"):r<85?(e="強度：中等",i="medium"):(e="強度：強",i="strong"),{score:r,message:e,level:i})}};function Ze(t){return t<1024*1024?`${(t/1024).toFixed(2)} KB`:`${(t/1024/1024).toFixed(2)} MB`}const ct={setAppMode(t){rt.currentAppMode=t;const r=t===tt.MODE_TEXT;this.handleOptionSelection({target:K.appModeSelector.querySelector(`[data-app-mode="${t}"]`)}),K.textModeSection.hidden=!r,K.fileModeSection.hidden=r,this.setMode(tt.OP_ENCRYPT)},setMode(t){this.resetAll(),rt.currentMode=t;const r=t===tt.OP_ENCRYPT;this.handleOptionSelection({target:K.modeSelector.querySelector(`[data-mode="${t}"]`)}),K.encryptSection.hidden=!r,K.decryptSection.hidden=r,K.pasteBtn.hidden=r},handleOptionSelection(t,r){const e=t.target.closest(".option");return e&&!e.classList.contains("selected")&&!e.style.cursor.includes("not-allowed")?(e.parentElement.querySelector(".selected")?.classList.remove("selected"),e.classList.add("selected"),r&&(rt[r]=e.dataset.value),!0):!1},toggleKdfParams(t){document.querySelectorAll(".kdf-params-section").forEach(r=>{r.hidden=r.dataset.kdf!==t})},setOutput(t,r){K.resultsArea.hidden=!1,K.output.className=`output-box ${t}`;let e=r;if(t==="success"&&rt.currentMode===tt.OP_DECRYPT){if(rt.currentAppMode===tt.MODE_FILE)e=r.includes("下載")?`${r}<br>✅ <strong>所有檔案完整性驗證通過</strong>`:r;else if(r.startsWith("✅ 解密成功")){const i=r.split("<br><br>");e=`${i[0]}<br>✅ <strong>檔案完整性驗證通過</strong><br><br>${i[1]}`}}K.output.innerHTML=e,K.textModeResults.hidden=!0,K.decryptionActions.hidden=!0,t==="success"&&rt.currentAppMode===tt.MODE_TEXT&&(rt.currentMode===tt.OP_ENCRYPT?K.textModeResults.hidden=!1:K.decryptionActions.hidden=!1)},updateFileLists(){const t=K.fileEncryptList,r=K.fileDecryptList;t.innerHTML="",r.innerHTML="",rt.filesToEncrypt.length>0?(rt.filesToEncrypt.forEach(e=>{const i=document.createElement("li");i.textContent=`${e.name} (${Ze(e.size)})`,t.appendChild(i)}),t.hidden=!1):t.hidden=!0,rt.filesToDecrypt.length>0?(rt.filesToDecrypt.forEach(e=>{const i=document.createElement("li");i.textContent=`${e.name} (${Ze(e.size)})`,r.appendChild(i)}),r.hidden=!1):r.hidden=!0},resetAll(){if(["mnemonic","ciphertextInput","passphraseEncrypt","passphraseDecrypt","passphraseFileEncrypt","passphraseFileDecrypt"].forEach(r=>K[r]?K[r].value="":null),this.updatePasswordStrength("","encrypt"),this.updatePasswordStrength("","file"),K.fileEncryptInput.value="",K.fileDecryptInput.value="",rt.filesToEncrypt=[],rt.filesToDecrypt=[],this.updateFileLists(),K.resultsArea.hidden=!0,K.textModeResults.hidden=!0,K.decryptionActions.hidden=!0,K.paramsDisplayArea.hidden=!0,rt.lastEncryptedOutput=null,rt.lastDecryptedText=null,rt.selectedAlgorithm=tt.ALGO_AES_GCM,rt.selectedKDF=tt.KDF_ARGON2,this.handleOptionSelection({target:K.algoSelectionGroup.querySelector(`[data-value="${tt.ALGO_AES_GCM}"]`)},"selectedAlgorithm"),this.handleOptionSelection({target:K.kdfSelectionGroup.querySelector(`[data-value="${tt.KDF_ARGON2}"]`)},"selectedKDF"),this.toggleKdfParams(rt.selectedKDF),K.qrCanvas){const r=K.qrCanvas.getContext("2d");r&&r.clearRect(0,0,K.qrCanvas.width,K.qrCanvas.height)}},togglePasswordVisibility(t){const r=document.getElementById(t.dataset.for);r.type==="password"?(r.type="text",t.innerHTML=tt.SVG_EYE_SLASH):(r.type="password",t.innerHTML=tt.SVG_EYE_OPEN)},updatePasswordStrength(t,r){const e=ht.checkPasswordStrength(t),i=r==="encrypt"?K.passwordStrengthBarEncrypt:K.passwordStrengthBarFile,a=r==="encrypt"?K.passwordStrengthTextEncrypt:K.passwordStrengthTextFile;i.className="password-strength-meter-bar",e.level!=="empty"&&i.classList.add(`strength-${e.level}`),i.style.width=e.score+"%",a.textContent=e.message}};function Ye(t){return t<1024*1024?`${(t/1024).toFixed(2)} KB`:`${(t/1024/1024).toFixed(2)} MB`}const Pt={handleFileSelect(t,r){const e=t.target.files;if(!e||e.length===0)return;const i=r===tt.OP_ENCRYPT,a=i?K.fileEncryptList:K.fileDecryptList,n=i?"filesToEncrypt":"filesToDecrypt";a.innerHTML="",rt[n]=[],Array.from(e).forEach(o=>{const s=document.createElement("li");s.className="file-list-item",o.size>tt.FILE_SIZE_LIMIT_BYTES?(s.innerHTML=`
                    <span>${o.name}</span>
                    <span class="file-size error">${Ye(o.size)} - 檔案過大</span>
                `,s.classList.add("error")):(s.innerHTML=`
                    <span>${o.name}</span>
                    <span class="file-size">${Ye(o.size)}</span>
                `,rt[n].push(o)),a.appendChild(s)}),a.hidden=!1},readFileAsArrayBuffer:t=>t.arrayBuffer(),readFileAsText:t=>t.text()},St=new TextEncoder,Nt=new TextDecoder,re=2**32;function It(...t){const r=t.reduce((a,{length:n})=>a+n,0),e=new Uint8Array(r);let i=0;for(const a of t)e.set(a,i),i+=a.length;return e}function Re(t,r,e){if(r<0||r>=re)throw new RangeError(`value must be >= 0 and <= ${re-1}. Received ${r}`);t.set([r>>>24,r>>>16,r>>>8,r&255],e)}function Rr(t){const r=Math.floor(t/re),e=t%re,i=new Uint8Array(8);return Re(i,r,0),Re(i,e,4),i}function Ke(t){const r=new Uint8Array(4);return Re(r,t),r}function sn(t){if(Uint8Array.prototype.toBase64)return t.toBase64();const r=32768,e=[];for(let i=0;i<t.length;i+=r)e.push(String.fromCharCode.apply(null,t.subarray(i,i+r)));return btoa(e.join(""))}function on(t){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(t);const r=atob(t),e=new Uint8Array(r.length);for(let i=0;i<r.length;i++)e[i]=r.charCodeAt(i);return e}function yt(t){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof t=="string"?t:Nt.decode(t),{alphabet:"base64url"});let r=t;r instanceof Uint8Array&&(r=Nt.decode(r)),r=r.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return on(r)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function _t(t){let r=t;return typeof r=="string"&&(r=St.encode(r)),Uint8Array.prototype.toBase64?r.toBase64({alphabet:"base64url",omitPadding:!0}):sn(r).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class ie extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(r,e){super(r,e),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class je extends ie{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class gt extends ie{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class Oe extends ie{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(r="decryption operation failed",e){super(r,e)}}class X extends ie{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}function Or(t){switch(t){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new gt(`Unsupported JWE Algorithm: ${t}`)}}const cn=t=>crypto.getRandomValues(new Uint8Array(Or(t)>>3)),Dr=(t,r)=>{if(r.length<<3!==Or(t))throw new X("Invalid Initialization Vector length")},ne=(t,r)=>{const e=t.byteLength<<3;if(e!==r)throw new X(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`)};function kt(t,r="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${r} must be ${t}`)}function jt(t,r){return t.name===r}function ln(t){return parseInt(t.name.slice(4),10)}function un(t,r){if(r&&!t.usages.includes(r))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${r}.`)}function Tt(t,r,e){switch(r){case"A128GCM":case"A192GCM":case"A256GCM":{if(!jt(t.algorithm,"AES-GCM"))throw kt("AES-GCM");const i=parseInt(r.slice(1,4),10);if(t.algorithm.length!==i)throw kt(i,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!jt(t.algorithm,"AES-KW"))throw kt("AES-KW");const i=parseInt(r.slice(1,4),10);if(t.algorithm.length!==i)throw kt(i,"algorithm.length");break}case"ECDH":{switch(t.algorithm.name){case"ECDH":case"X25519":break;default:throw kt("ECDH or X25519")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!jt(t.algorithm,"PBKDF2"))throw kt("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!jt(t.algorithm,"RSA-OAEP"))throw kt("RSA-OAEP");const i=parseInt(r.slice(9),10)||1;if(ln(t.algorithm.hash)!==i)throw kt(`SHA-${i}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}un(t,e)}function zr(t,r,...e){if(e=e.filter(Boolean),e.length>2){const i=e.pop();t+=`one of type ${e.join(", ")}, or ${i}.`}else e.length===2?t+=`one of type ${e[0]} or ${e[1]}.`:t+=`of type ${e[0]}.`;return r==null?t+=` Received ${r}`:typeof r=="function"&&r.name?t+=` Received function ${r.name}`:typeof r=="object"&&r!=null&&r.constructor?.name&&(t+=` Received an instance of ${r.constructor.name}`),t}const Vt=(t,...r)=>zr("Key must be ",t,...r);function Mr(t,r,...e){return zr(`Key for the ${t} algorithm must be `,r,...e)}function $t(t){if(!Kt(t))throw new Error("CryptoKey instance expected")}function Kt(t){return t?.[Symbol.toStringTag]==="CryptoKey"}function Ue(t){return t?.[Symbol.toStringTag]==="KeyObject"}const Lr=t=>Kt(t)||Ue(t);async function dn(t,r){if(!(t instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(r instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");const e={name:"HMAC",hash:"SHA-256"},i=await crypto.subtle.generateKey(e,!1,["sign"]),a=new Uint8Array(await crypto.subtle.sign(e,i,t)),n=new Uint8Array(await crypto.subtle.sign(e,i,r));let o=0,s=-1;for(;++s<32;)o|=a[s]^n[s];return o===0}async function fn(t,r,e,i,a,n){if(!(r instanceof Uint8Array))throw new TypeError(Vt(r,"Uint8Array"));const o=parseInt(t.slice(1,4),10),s=await crypto.subtle.importKey("raw",r.subarray(o>>3),"AES-CBC",!1,["decrypt"]),l=await crypto.subtle.importKey("raw",r.subarray(0,o>>3),{hash:`SHA-${o<<1}`,name:"HMAC"},!1,["sign"]),p=It(n,i,e,Rr(n.length<<3)),E=new Uint8Array((await crypto.subtle.sign("HMAC",l,p)).slice(0,o>>3));let w;try{w=await dn(a,E)}catch{}if(!w)throw new Oe;let _;try{_=new Uint8Array(await crypto.subtle.decrypt({iv:i,name:"AES-CBC"},s,e))}catch{}if(!_)throw new Oe;return _}async function hn(t,r,e,i,a,n){let o;r instanceof Uint8Array?o=await crypto.subtle.importKey("raw",r,"AES-GCM",!1,["decrypt"]):(Tt(r,t,"decrypt"),o=r);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:n,iv:i,name:"AES-GCM",tagLength:128},o,It(e,a)))}catch{throw new Oe}}const Fr=async(t,r,e,i,a,n)=>{if(!Kt(r)&&!(r instanceof Uint8Array))throw new TypeError(Vt(r,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!i)throw new X("JWE Initialization Vector missing");if(!a)throw new X("JWE Authentication Tag missing");switch(Dr(t,i),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&ne(r,parseInt(t.slice(-3),10)),fn(t,r,e,i,a,n);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&ne(r,parseInt(t.slice(1,4),10)),hn(t,r,e,i,a,n);default:throw new gt("Unsupported JWE Content Encryption Algorithm")}},Nr=(...t)=>{const r=t.filter(Boolean);if(r.length===0||r.length===1)return!0;let e;for(const i of r){const a=Object.keys(i);if(!e||e.size===0){e=new Set(a);continue}for(const n of a){if(e.has(n))return!1;e.add(n)}}return!0};function pn(t){return typeof t=="object"&&t!==null}const xt=t=>{if(!pn(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let r=t;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r};function Kr(t,r){if(t.algorithm.length!==parseInt(r.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${r}`)}function Ur(t,r,e){return t instanceof Uint8Array?crypto.subtle.importKey("raw",t,"AES-KW",!0,[e]):(Tt(t,r,e),t)}async function De(t,r,e){const i=await Ur(r,t,"wrapKey");Kr(i,t);const a=await crypto.subtle.importKey("raw",e,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",a,i,"AES-KW"))}async function ze(t,r,e){const i=await Ur(r,t,"unwrapKey");Kr(i,t);const a=await crypto.subtle.unwrapKey("raw",e,i,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",a))}const mn=async(t,r)=>{const e=`SHA-${t.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(e,r))};function se(t){return It(Ke(t.length),t)}async function gn(t,r,e){const i=r>>3,a=32,n=Math.ceil(i/a),o=new Uint8Array(n*a);for(let s=1;s<=n;s++){const l=new Uint8Array(4+t.length+e.length);l.set(Ke(s),0),l.set(t,4),l.set(e,4+t.length);const p=await mn("sha256",l);o.set(p,(s-1)*a)}return o.slice(0,i)}async function Wr(t,r,e,i,a=new Uint8Array(0),n=new Uint8Array(0)){Tt(t,"ECDH"),Tt(r,"ECDH","deriveBits");const o=se(St.encode(e)),s=se(a),l=se(n),p=Ke(i),E=new Uint8Array(0),w=It(o,s,l,p,E),_=new Uint8Array(await crypto.subtle.deriveBits({name:t.algorithm.name,public:t},r,yn(t)));return gn(_,i,w)}function yn(t){return t.algorithm.name==="X25519"?256:Math.ceil(parseInt(t.algorithm.namedCurve.slice(-3),10)/8)<<3}function Hr(t){switch(t.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return t.algorithm.name==="X25519"}}function wn(t,r){return t instanceof Uint8Array?crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits"]):(Tt(t,r,"deriveBits"),t)}const _n=(t,r)=>It(St.encode(t),new Uint8Array([0]),r);async function Jr(t,r,e,i){if(!(t instanceof Uint8Array)||t.length<8)throw new X("PBES2 Salt Input must be 8 or more octets");const a=_n(r,t),n=parseInt(r.slice(13,16),10),o={hash:`SHA-${r.slice(8,11)}`,iterations:e,name:"PBKDF2",salt:a},s=await wn(i,r);return new Uint8Array(await crypto.subtle.deriveBits(o,s,n))}async function bn(t,r,e,i=2048,a=crypto.getRandomValues(new Uint8Array(16))){const n=await Jr(a,t,i,r);return{encryptedKey:await De(t.slice(-6),n,e),p2c:i,p2s:_t(a)}}async function En(t,r,e,i,a){const n=await Jr(a,t,i,r);return ze(t.slice(-6),n,e)}const Gr=(t,r)=>{if(t.startsWith("RS")||t.startsWith("PS")){const{modulusLength:e}=r.algorithm;if(typeof e!="number"||e<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}},$r=t=>{switch(t){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new gt(`alg ${t} is not supported either by JOSE or your javascript runtime`)}};async function vn(t,r,e){return Tt(r,t,"encrypt"),Gr(t,r),new Uint8Array(await crypto.subtle.encrypt($r(t),r,e))}async function An(t,r,e){return Tt(r,t,"decrypt"),Gr(t,r),new Uint8Array(await crypto.subtle.decrypt($r(t),r,e))}function We(t){switch(t){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new gt(`Unsupported JWE Algorithm: ${t}`)}}const zt=t=>crypto.getRandomValues(new Uint8Array(We(t)>>3));function Sn(t){let r,e;switch(t.kty){case"AKP":{switch(t.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":r={name:t.alg},e=t.priv?["sign"]:["verify"];break;default:throw new gt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(t.alg){case"PS256":case"PS384":case"PS512":r={name:"RSA-PSS",hash:`SHA-${t.alg.slice(-3)}`},e=t.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":r={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.alg.slice(-3)}`},e=t.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":r={name:"RSA-OAEP",hash:`SHA-${parseInt(t.alg.slice(-3),10)||1}`},e=t.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new gt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(t.alg){case"ES256":r={name:"ECDSA",namedCurve:"P-256"},e=t.d?["sign"]:["verify"];break;case"ES384":r={name:"ECDSA",namedCurve:"P-384"},e=t.d?["sign"]:["verify"];break;case"ES512":r={name:"ECDSA",namedCurve:"P-521"},e=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":r={name:"ECDH",namedCurve:t.crv},e=t.d?["deriveBits"]:[];break;default:throw new gt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(t.alg){case"Ed25519":case"EdDSA":r={name:"Ed25519"},e=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":r={name:t.crv},e=t.d?["deriveBits"]:[];break;default:throw new gt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new gt('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:r,keyUsages:e}}const ee=async t=>{if(!t.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:r,keyUsages:e}=Sn(t),i={...t};return i.kty!=="AKP"&&delete i.alg,delete i.use,crypto.subtle.importKey("jwk",i,r,t.ext??!(t.d||t.priv),t.key_ops??e)};async function Cn(t,r,e){if(!xt(t))throw new TypeError("JWK must be an object");let i;switch(r??=t.alg,i??=t.ext,t.kty){case"oct":if(typeof t.k!="string"||!t.k)throw new TypeError('missing "k" (Key Value) Parameter value');return yt(t.k);case"RSA":if("oth"in t&&t.oth!==void 0)throw new gt('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return ee({...t,alg:r,ext:i});case"AKP":{if(typeof t.alg!="string"||!t.alg)throw new TypeError('missing "alg" (Algorithm) Parameter value');if(r!==void 0&&r!==t.alg)throw new TypeError("JWK alg and alg option value mismatch");return ee({...t,ext:i})}case"EC":case"OKP":return ee({...t,alg:r,ext:i});default:throw new gt('Unsupported "kty" (Key Type) Parameter value')}}async function kn(t,r,e,i,a){if(!(e instanceof Uint8Array))throw new TypeError(Vt(e,"Uint8Array"));const n=parseInt(t.slice(1,4),10),o=await crypto.subtle.importKey("raw",e.subarray(n>>3),"AES-CBC",!1,["encrypt"]),s=await crypto.subtle.importKey("raw",e.subarray(0,n>>3),{hash:`SHA-${n<<1}`,name:"HMAC"},!1,["sign"]),l=new Uint8Array(await crypto.subtle.encrypt({iv:i,name:"AES-CBC"},o,r)),p=It(a,i,l,Rr(a.length<<3)),E=new Uint8Array((await crypto.subtle.sign("HMAC",s,p)).slice(0,n>>3));return{ciphertext:l,tag:E,iv:i}}async function Bn(t,r,e,i,a){let n;e instanceof Uint8Array?n=await crypto.subtle.importKey("raw",e,"AES-GCM",!1,["encrypt"]):(Tt(e,t,"encrypt"),n=e);const o=new Uint8Array(await crypto.subtle.encrypt({additionalData:a,iv:i,name:"AES-GCM",tagLength:128},n,r)),s=o.slice(-16);return{ciphertext:o.slice(0,-16),tag:s,iv:i}}const qr=async(t,r,e,i,a)=>{if(!Kt(e)&&!(e instanceof Uint8Array))throw new TypeError(Vt(e,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));switch(i?Dr(t,i):i=cn(t),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return e instanceof Uint8Array&&ne(e,parseInt(t.slice(-3),10)),kn(t,r,e,i,a);case"A128GCM":case"A192GCM":case"A256GCM":return e instanceof Uint8Array&&ne(e,parseInt(t.slice(1,4),10)),Bn(t,r,e,i,a);default:throw new gt("Unsupported JWE Content Encryption Algorithm")}};async function Tn(t,r,e,i){const a=t.slice(0,7),n=await qr(a,e,r,i,new Uint8Array(0));return{encryptedKey:n.ciphertext,iv:_t(n.iv),tag:_t(n.tag)}}async function In(t,r,e,i,a){const n=t.slice(0,7);return Fr(n,r,e,i,a,new Uint8Array(0))}const xn=async(t,r,e,i,a)=>{switch(t){case"dir":{if(e!==void 0)throw new X("Encountered unexpected JWE Encrypted Key");return r}case"ECDH-ES":if(e!==void 0)throw new X("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!xt(i.epk))throw new X('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if($t(r),!Hr(r))throw new gt("ECDH with the provided key is not allowed or not supported by your javascript runtime");const n=await Cn(i.epk,t);$t(n);let o,s;if(i.apu!==void 0){if(typeof i.apu!="string")throw new X('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{o=yt(i.apu)}catch{throw new X("Failed to base64url decode the apu")}}if(i.apv!==void 0){if(typeof i.apv!="string")throw new X('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{s=yt(i.apv)}catch{throw new X("Failed to base64url decode the apv")}}const l=await Wr(n,r,t==="ECDH-ES"?i.enc:t,t==="ECDH-ES"?We(i.enc):parseInt(t.slice(-5,-2),10),o,s);if(t==="ECDH-ES")return l;if(e===void 0)throw new X("JWE Encrypted Key missing");return ze(t.slice(-6),l,e)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(e===void 0)throw new X("JWE Encrypted Key missing");return $t(r),An(t,r,e)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(e===void 0)throw new X("JWE Encrypted Key missing");if(typeof i.p2c!="number")throw new X('JOSE Header "p2c" (PBES2 Count) missing or invalid');const n=a?.maxPBES2Count||1e4;if(i.p2c>n)throw new X('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof i.p2s!="string")throw new X('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let o;try{o=yt(i.p2s)}catch{throw new X("Failed to base64url decode the p2s")}return En(t,r,e,i.p2c,o)}case"A128KW":case"A192KW":case"A256KW":{if(e===void 0)throw new X("JWE Encrypted Key missing");return ze(t,r,e)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(e===void 0)throw new X("JWE Encrypted Key missing");if(typeof i.iv!="string")throw new X('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof i.tag!="string")throw new X('JOSE Header "tag" (Authentication Tag) missing or invalid');let n;try{n=yt(i.iv)}catch{throw new X("Failed to base64url decode the iv")}let o;try{o=yt(i.tag)}catch{throw new X("Failed to base64url decode the tag")}return In(t,r,e,n,o)}default:throw new gt('Invalid or unsupported "alg" (JWE Algorithm) header value')}},Vr=(t,r,e,i,a)=>{if(a.crit!==void 0&&i?.crit===void 0)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||i.crit===void 0)return new Set;if(!Array.isArray(i.crit)||i.crit.length===0||i.crit.some(o=>typeof o!="string"||o.length===0))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let n;e!==void 0?n=new Map([...Object.entries(e),...r.entries()]):n=r;for(const o of i.crit){if(!n.has(o))throw new gt(`Extension Header Parameter "${o}" is not recognized`);if(a[o]===void 0)throw new t(`Extension Header Parameter "${o}" is missing`);if(n.get(o)&&i[o]===void 0)throw new t(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(i.crit)},Xe=(t,r)=>{if(r!==void 0&&(!Array.isArray(r)||r.some(e=>typeof e!="string")))throw new TypeError(`"${t}" option must be an array of strings`);if(r)return new Set(r)};function He(t){return xt(t)&&typeof t.kty=="string"}function Pn(t){return t.kty!=="oct"&&(t.kty==="AKP"&&typeof t.priv=="string"||typeof t.d=="string")}function Rn(t){return t.kty!=="oct"&&typeof t.d>"u"&&typeof t.priv>"u"}function On(t){return t.kty==="oct"&&typeof t.k=="string"}let Ft;const Qe=async(t,r,e,i=!1)=>{Ft||=new WeakMap;let a=Ft.get(t);if(a?.[e])return a[e];const n=await ee({...r,alg:e});return i&&Object.freeze(t),a?a[e]=n:Ft.set(t,{[e]:n}),n},Dn=(t,r)=>{Ft||=new WeakMap;let e=Ft.get(t);if(e?.[r])return e[r];const i=t.type==="public",a=!!i;let n;if(t.asymmetricKeyType==="x25519"){switch(r){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}n=t.toCryptoKey(t.asymmetricKeyType,a,i?[]:["deriveBits"])}if(t.asymmetricKeyType==="ed25519"){if(r!=="EdDSA"&&r!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");n=t.toCryptoKey(t.asymmetricKeyType,a,[i?"verify":"sign"])}switch(t.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":{if(r!==t.asymmetricKeyType.toUpperCase())throw new TypeError("given KeyObject instance cannot be used for this algorithm");n=t.toCryptoKey(t.asymmetricKeyType,a,[i?"verify":"sign"])}}if(t.asymmetricKeyType==="rsa"){let o;switch(r){case"RSA-OAEP":o="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":o="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":o="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":o="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(r.startsWith("RSA-OAEP"))return t.toCryptoKey({name:"RSA-OAEP",hash:o},a,i?["encrypt"]:["decrypt"]);n=t.toCryptoKey({name:r.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:o},a,[i?"verify":"sign"])}if(t.asymmetricKeyType==="ec"){const s=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(t.asymmetricKeyDetails?.namedCurve);if(!s)throw new TypeError("given KeyObject instance cannot be used for this algorithm");r==="ES256"&&s==="P-256"&&(n=t.toCryptoKey({name:"ECDSA",namedCurve:s},a,[i?"verify":"sign"])),r==="ES384"&&s==="P-384"&&(n=t.toCryptoKey({name:"ECDSA",namedCurve:s},a,[i?"verify":"sign"])),r==="ES512"&&s==="P-521"&&(n=t.toCryptoKey({name:"ECDSA",namedCurve:s},a,[i?"verify":"sign"])),r.startsWith("ECDH-ES")&&(n=t.toCryptoKey({name:"ECDH",namedCurve:s},a,i?[]:["deriveBits"]))}if(!n)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return e?e[r]=n:Ft.set(t,{[r]:n}),n},Je=async(t,r)=>{if(t instanceof Uint8Array||Kt(t))return t;if(Ue(t)){if(t.type==="secret")return t.export();if("toCryptoKey"in t&&typeof t.toCryptoKey=="function")try{return Dn(t,r)}catch(i){if(i instanceof TypeError)throw i}let e=t.export({format:"jwk"});return Qe(t,e,r)}if(He(t))return t.k?yt(t.k):Qe(t,t,r,!0);throw new Error("unreachable")},Mt=t=>t?.[Symbol.toStringTag],Me=(t,r,e)=>{if(r.use!==void 0){let i;switch(e){case"sign":case"verify":i="sig";break;case"encrypt":case"decrypt":i="enc";break}if(r.use!==i)throw new TypeError(`Invalid key for this operation, its "use" must be "${i}" when present`)}if(r.alg!==void 0&&r.alg!==t)throw new TypeError(`Invalid key for this operation, its "alg" must be "${t}" when present`);if(Array.isArray(r.key_ops)){let i;switch(!0){case(e==="sign"||e==="verify"):case t==="dir":case t.includes("CBC-HS"):i=e;break;case t.startsWith("PBES2"):i="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(t):!t.includes("GCM")&&t.endsWith("KW")?i=e==="encrypt"?"wrapKey":"unwrapKey":i=e;break;case(e==="encrypt"&&t.startsWith("RSA")):i="wrapKey";break;case e==="decrypt":i=t.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(i&&r.key_ops?.includes?.(i)===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${i}" when present`)}return!0},zn=(t,r,e)=>{if(!(r instanceof Uint8Array)){if(He(r)){if(On(r)&&Me(t,r,e))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!Lr(r))throw new TypeError(Mr(t,r,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(r.type!=="secret")throw new TypeError(`${Mt(r)} instances for symmetric algorithms must be of type "secret"`)}},Mn=(t,r,e)=>{if(He(r))switch(e){case"decrypt":case"sign":if(Pn(r)&&Me(t,r,e))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(Rn(r)&&Me(t,r,e))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!Lr(r))throw new TypeError(Mr(t,r,"CryptoKey","KeyObject","JSON Web Key"));if(r.type==="secret")throw new TypeError(`${Mt(r)} instances for asymmetric algorithms must not be of type "secret"`);if(r.type==="public")switch(e){case"sign":throw new TypeError(`${Mt(r)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${Mt(r)} instances for asymmetric algorithm decryption must be of type "private"`)}if(r.type==="private")switch(e){case"verify":throw new TypeError(`${Mt(r)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${Mt(r)} instances for asymmetric algorithm encryption must be of type "public"`)}},Zr=(t,r,e)=>{t.startsWith("HS")||t==="dir"||t.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(t)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(t)?zn(t,r,e):Mn(t,r,e)};async function Ln(t,r,e){if(!xt(t))throw new X("Flattened JWE must be an object");if(t.protected===void 0&&t.header===void 0&&t.unprotected===void 0)throw new X("JOSE Header missing");if(t.iv!==void 0&&typeof t.iv!="string")throw new X("JWE Initialization Vector incorrect type");if(typeof t.ciphertext!="string")throw new X("JWE Ciphertext missing or incorrect type");if(t.tag!==void 0&&typeof t.tag!="string")throw new X("JWE Authentication Tag incorrect type");if(t.protected!==void 0&&typeof t.protected!="string")throw new X("JWE Protected Header incorrect type");if(t.encrypted_key!==void 0&&typeof t.encrypted_key!="string")throw new X("JWE Encrypted Key incorrect type");if(t.aad!==void 0&&typeof t.aad!="string")throw new X("JWE AAD incorrect type");if(t.header!==void 0&&!xt(t.header))throw new X("JWE Shared Unprotected Header incorrect type");if(t.unprotected!==void 0&&!xt(t.unprotected))throw new X("JWE Per-Recipient Unprotected Header incorrect type");let i;if(t.protected)try{const C=yt(t.protected);i=JSON.parse(Nt.decode(C))}catch{throw new X("JWE Protected Header is invalid")}if(!Nr(i,t.header,t.unprotected))throw new X("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const a={...i,...t.header,...t.unprotected};if(Vr(X,new Map,e?.crit,i,a),a.zip!==void 0)throw new gt('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:n,enc:o}=a;if(typeof n!="string"||!n)throw new X("missing JWE Algorithm (alg) in JWE Header");if(typeof o!="string"||!o)throw new X("missing JWE Encryption Algorithm (enc) in JWE Header");const s=e&&Xe("keyManagementAlgorithms",e.keyManagementAlgorithms),l=e&&Xe("contentEncryptionAlgorithms",e.contentEncryptionAlgorithms);if(s&&!s.has(n)||!s&&n.startsWith("PBES2"))throw new je('"alg" (Algorithm) Header Parameter value not allowed');if(l&&!l.has(o))throw new je('"enc" (Encryption Algorithm) Header Parameter value not allowed');let p;if(t.encrypted_key!==void 0)try{p=yt(t.encrypted_key)}catch{throw new X("Failed to base64url decode the encrypted_key")}let E=!1;typeof r=="function"&&(r=await r(i,t),E=!0),Zr(n==="dir"?o:n,r,"decrypt");const w=await Je(r,n);let _;try{_=await xn(n,w,p,a,e)}catch(C){if(C instanceof TypeError||C instanceof X||C instanceof gt)throw C;_=zt(o)}let d,m;if(t.iv!==void 0)try{d=yt(t.iv)}catch{throw new X("Failed to base64url decode the iv")}if(t.tag!==void 0)try{m=yt(t.tag)}catch{throw new X("Failed to base64url decode the tag")}const f=St.encode(t.protected??"");let g;t.aad!==void 0?g=It(f,St.encode("."),St.encode(t.aad)):g=f;let h;try{h=yt(t.ciphertext)}catch{throw new X("Failed to base64url decode the ciphertext")}const S={plaintext:await Fr(o,_,h,d,m,g)};if(t.protected!==void 0&&(S.protectedHeader=i),t.aad!==void 0)try{S.additionalAuthenticatedData=yt(t.aad)}catch{throw new X("Failed to base64url decode the aad")}return t.unprotected!==void 0&&(S.sharedUnprotectedHeader=t.unprotected),t.header!==void 0&&(S.unprotectedHeader=t.header),E?{...S,key:w}:S}async function qt(t,r,e){if(t instanceof Uint8Array&&(t=Nt.decode(t)),typeof t!="string")throw new X("Compact JWE must be a string or Uint8Array");const{0:i,1:a,2:n,3:o,4:s,length:l}=t.split(".");if(l!==5)throw new X("Invalid Compact JWE");const p=await Ln({ciphertext:o,iv:n||void 0,protected:i,tag:s||void 0,encrypted_key:a||void 0},r,e),E={plaintext:p.plaintext,protectedHeader:p.protectedHeader};return typeof r=="function"?{...E,key:p.key}:E}const Fn=Symbol();async function Nn(t){if(Ue(t))if(t.type==="secret")t=t.export();else return t.export({format:"jwk"});if(t instanceof Uint8Array)return{kty:"oct",k:_t(t)};if(!Kt(t))throw new TypeError(Vt(t,"CryptoKey","KeyObject","Uint8Array"));if(!t.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:r,key_ops:e,alg:i,use:a,...n}=await crypto.subtle.exportKey("jwk",t);return n.kty==="AKP"&&(n.alg=i),n}async function Kn(t){return Nn(t)}const Un=async(t,r,e,i,a={})=>{let n,o,s;switch(t){case"dir":{s=e;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if($t(e),!Hr(e))throw new gt("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:l,apv:p}=a;let E;a.epk?E=await Je(a.epk,t):E=(await crypto.subtle.generateKey(e.algorithm,!0,["deriveBits"])).privateKey;const{x:w,y:_,crv:d,kty:m}=await Kn(E),f=await Wr(e,E,t==="ECDH-ES"?r:t,t==="ECDH-ES"?We(r):parseInt(t.slice(-5,-2),10),l,p);if(o={epk:{x:w,crv:d,kty:m}},m==="EC"&&(o.epk.y=_),l&&(o.apu=_t(l)),p&&(o.apv=_t(p)),t==="ECDH-ES"){s=f;break}s=i||zt(r);const g=t.slice(-6);n=await De(g,f,s);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{s=i||zt(r),$t(e),n=await vn(t,e,s);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{s=i||zt(r);const{p2c:l,p2s:p}=a;({encryptedKey:n,...o}=await bn(t,e,s,l,p));break}case"A128KW":case"A192KW":case"A256KW":{s=i||zt(r),n=await De(t,e,s);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{s=i||zt(r);const{iv:l}=a;({encryptedKey:n,...o}=await Tn(t,e,s,l));break}default:throw new gt('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:s,encryptedKey:n,parameters:o}};class Wn{#r;#t;#n;#e;#a;#i;#s;#o;constructor(r){if(!(r instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this.#r=r}setKeyManagementParameters(r){if(this.#o)throw new TypeError("setKeyManagementParameters can only be called once");return this.#o=r,this}setProtectedHeader(r){if(this.#t)throw new TypeError("setProtectedHeader can only be called once");return this.#t=r,this}setSharedUnprotectedHeader(r){if(this.#n)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this.#n=r,this}setUnprotectedHeader(r){if(this.#e)throw new TypeError("setUnprotectedHeader can only be called once");return this.#e=r,this}setAdditionalAuthenticatedData(r){return this.#a=r,this}setContentEncryptionKey(r){if(this.#i)throw new TypeError("setContentEncryptionKey can only be called once");return this.#i=r,this}setInitializationVector(r){if(this.#s)throw new TypeError("setInitializationVector can only be called once");return this.#s=r,this}async encrypt(r,e){if(!this.#t&&!this.#e&&!this.#n)throw new X("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!Nr(this.#t,this.#e,this.#n))throw new X("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const i={...this.#t,...this.#e,...this.#n};if(Vr(X,new Map,e?.crit,this.#t,i),i.zip!==void 0)throw new gt('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:a,enc:n}=i;if(typeof a!="string"||!a)throw new X('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof n!="string"||!n)throw new X('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let o;if(this.#i&&(a==="dir"||a==="ECDH-ES"))throw new TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${a}`);Zr(a==="dir"?n:a,r,"encrypt");let s;{let f;const g=await Je(r,a);({cek:s,encryptedKey:o,parameters:f}=await Un(a,n,g,this.#i,this.#o)),f&&(e&&Fn in e?this.#e?this.#e={...this.#e,...f}:this.setUnprotectedHeader(f):this.#t?this.#t={...this.#t,...f}:this.setProtectedHeader(f))}let l,p,E;this.#t?p=St.encode(_t(JSON.stringify(this.#t))):p=St.encode(""),this.#a?(E=_t(this.#a),l=It(p,St.encode("."),St.encode(E))):l=p;const{ciphertext:w,tag:_,iv:d}=await qr(n,this.#r,s,this.#s,l),m={ciphertext:_t(w)};return d&&(m.iv=_t(d)),_&&(m.tag=_t(_)),o&&(m.encrypted_key=_t(o)),E&&(m.aad=E),this.#t&&(m.protected=Nt.decode(p)),this.#n&&(m.unprotected=this.#n),this.#e&&(m.header=this.#e),m}}class Le{#r;constructor(r){this.#r=new Wn(r)}setContentEncryptionKey(r){return this.#r.setContentEncryptionKey(r),this}setInitializationVector(r){return this.#r.setInitializationVector(r),this}setProtectedHeader(r){return this.#r.setProtectedHeader(r),this}setKeyManagementParameters(r){return this.#r.setKeyManagementParameters(r),this}async encrypt(r,e){const i=await this.#r.encrypt(r,e);return[i.protected,i.encrypted_key,i.iv,i.ciphertext,i.tag].join(".")}}function Lt(t){let r;if(typeof t=="string"){const e=t.split(".");(e.length===3||e.length===5)&&([r]=e)}else if(typeof t=="object"&&t)if("protected"in t)r=t.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof r!="string"||!r)throw new Error;const e=JSON.parse(Nt.decode(yt(r)));if(!xt(e))throw new Error;return e}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}var Xt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Dt={},oe,tr;function Hn(){return tr||(tr=1,oe=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),oe}var ce={},Bt={},er;function Rt(){if(er)return Bt;er=1;let t;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Bt.getSymbolSize=function(i){if(!i)throw new Error('"version" cannot be null or undefined');if(i<1||i>40)throw new Error('"version" should be in range from 1 to 40');return i*4+17},Bt.getSymbolTotalCodewords=function(i){return r[i]},Bt.getBCHDigit=function(e){let i=0;for(;e!==0;)i++,e>>>=1;return i},Bt.setToSJISFunction=function(i){if(typeof i!="function")throw new Error('"toSJISFunc" is not a valid function.');t=i},Bt.isKanjiModeEnabled=function(){return typeof t<"u"},Bt.toSJIS=function(i){return t(i)},Bt}var le={},rr;function Ge(){return rr||(rr=1,(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function r(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,a){if(t.isValid(i))return i;try{return r(i)}catch{return a}}})(le)),le}var ue,nr;function Jn(){if(nr)return ue;nr=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(r){const e=Math.floor(r/8);return(this.buffer[e]>>>7-r%8&1)===1},put:function(r,e){for(let i=0;i<e;i++)this.putBit((r>>>e-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),r&&(this.buffer[e]|=128>>>this.length%8),this.length++}},ue=t,ue}var de,ir;function Gn(){if(ir)return de;ir=1;function t(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}return t.prototype.set=function(r,e,i,a){const n=r*this.size+e;this.data[n]=i,a&&(this.reservedBit[n]=!0)},t.prototype.get=function(r,e){return this.data[r*this.size+e]},t.prototype.xor=function(r,e,i){this.data[r*this.size+e]^=i},t.prototype.isReserved=function(r,e){return this.reservedBit[r*this.size+e]},de=t,de}var fe={},ar;function $n(){return ar||(ar=1,(function(t){const r=Rt().getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const a=Math.floor(i/7)+2,n=r(i),o=n===145?26:Math.ceil((n-13)/(2*a-2))*2,s=[n-7];for(let l=1;l<a-1;l++)s[l]=s[l-1]-o;return s.push(6),s.reverse()},t.getPositions=function(i){const a=[],n=t.getRowColCoords(i),o=n.length;for(let s=0;s<o;s++)for(let l=0;l<o;l++)s===0&&l===0||s===0&&l===o-1||s===o-1&&l===0||a.push([n[s],n[l]]);return a}})(fe)),fe}var he={},sr;function qn(){if(sr)return he;sr=1;const t=Rt().getSymbolSize,r=7;return he.getPositions=function(i){const a=t(i);return[[0,0],[a-r,0],[0,a-r]]},he}var pe={},or;function Vn(){return or||(or=1,(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const r={N1:3,N2:3,N3:40,N4:10};t.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},t.from=function(a){return t.isValid(a)?parseInt(a,10):void 0},t.getPenaltyN1=function(a){const n=a.size;let o=0,s=0,l=0,p=null,E=null;for(let w=0;w<n;w++){s=l=0,p=E=null;for(let _=0;_<n;_++){let d=a.get(w,_);d===p?s++:(s>=5&&(o+=r.N1+(s-5)),p=d,s=1),d=a.get(_,w),d===E?l++:(l>=5&&(o+=r.N1+(l-5)),E=d,l=1)}s>=5&&(o+=r.N1+(s-5)),l>=5&&(o+=r.N1+(l-5))}return o},t.getPenaltyN2=function(a){const n=a.size;let o=0;for(let s=0;s<n-1;s++)for(let l=0;l<n-1;l++){const p=a.get(s,l)+a.get(s,l+1)+a.get(s+1,l)+a.get(s+1,l+1);(p===4||p===0)&&o++}return o*r.N2},t.getPenaltyN3=function(a){const n=a.size;let o=0,s=0,l=0;for(let p=0;p<n;p++){s=l=0;for(let E=0;E<n;E++)s=s<<1&2047|a.get(p,E),E>=10&&(s===1488||s===93)&&o++,l=l<<1&2047|a.get(E,p),E>=10&&(l===1488||l===93)&&o++}return o*r.N3},t.getPenaltyN4=function(a){let n=0;const o=a.data.length;for(let l=0;l<o;l++)n+=a.data[l];return Math.abs(Math.ceil(n*100/o/5)-10)*r.N4};function e(i,a,n){switch(i){case t.Patterns.PATTERN000:return(a+n)%2===0;case t.Patterns.PATTERN001:return a%2===0;case t.Patterns.PATTERN010:return n%3===0;case t.Patterns.PATTERN011:return(a+n)%3===0;case t.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(n/3))%2===0;case t.Patterns.PATTERN101:return a*n%2+a*n%3===0;case t.Patterns.PATTERN110:return(a*n%2+a*n%3)%2===0;case t.Patterns.PATTERN111:return(a*n%3+(a+n)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(a,n){const o=n.size;for(let s=0;s<o;s++)for(let l=0;l<o;l++)n.isReserved(l,s)||n.xor(l,s,e(a,l,s))},t.getBestMask=function(a,n){const o=Object.keys(t.Patterns).length;let s=0,l=1/0;for(let p=0;p<o;p++){n(p),t.applyMask(p,a);const E=t.getPenaltyN1(a)+t.getPenaltyN2(a)+t.getPenaltyN3(a)+t.getPenaltyN4(a);t.applyMask(p,a),E<l&&(l=E,s=p)}return s}})(pe)),pe}var Qt={},cr;function jr(){if(cr)return Qt;cr=1;const t=Ge(),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],e=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Qt.getBlocksCount=function(a,n){switch(n){case t.L:return r[(a-1)*4+0];case t.M:return r[(a-1)*4+1];case t.Q:return r[(a-1)*4+2];case t.H:return r[(a-1)*4+3];default:return}},Qt.getTotalCodewordsCount=function(a,n){switch(n){case t.L:return e[(a-1)*4+0];case t.M:return e[(a-1)*4+1];case t.Q:return e[(a-1)*4+2];case t.H:return e[(a-1)*4+3];default:return}},Qt}var me={},Jt={},lr;function Zn(){if(lr)return Jt;lr=1;const t=new Uint8Array(512),r=new Uint8Array(256);return(function(){let i=1;for(let a=0;a<255;a++)t[a]=i,r[i]=a,i<<=1,i&256&&(i^=285);for(let a=255;a<512;a++)t[a]=t[a-255]})(),Jt.log=function(i){if(i<1)throw new Error("log("+i+")");return r[i]},Jt.exp=function(i){return t[i]},Jt.mul=function(i,a){return i===0||a===0?0:t[r[i]+r[a]]},Jt}var ur;function Yn(){return ur||(ur=1,(function(t){const r=Zn();t.mul=function(i,a){const n=new Uint8Array(i.length+a.length-1);for(let o=0;o<i.length;o++)for(let s=0;s<a.length;s++)n[o+s]^=r.mul(i[o],a[s]);return n},t.mod=function(i,a){let n=new Uint8Array(i);for(;n.length-a.length>=0;){const o=n[0];for(let l=0;l<a.length;l++)n[l]^=r.mul(a[l],o);let s=0;for(;s<n.length&&n[s]===0;)s++;n=n.slice(s)}return n},t.generateECPolynomial=function(i){let a=new Uint8Array([1]);for(let n=0;n<i;n++)a=t.mul(a,new Uint8Array([1,r.exp(n)]));return a}})(me)),me}var ge,dr;function jn(){if(dr)return ge;dr=1;const t=Yn();function r(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}return r.prototype.initialize=function(i){this.degree=i,this.genPoly=t.generateECPolynomial(this.degree)},r.prototype.encode=function(i){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(i.length+this.degree);a.set(i);const n=t.mod(a,this.genPoly),o=this.degree-n.length;if(o>0){const s=new Uint8Array(this.degree);return s.set(n,o),s}return n},ge=r,ge}var ye={},we={},_e={},fr;function Xr(){return fr||(fr=1,_e.isValid=function(r){return!isNaN(r)&&r>=1&&r<=40}),_e}var At={},hr;function Qr(){if(hr)return At;hr=1;const t="[0-9]+",r="[A-Z $%*+\\-./:]+";let e="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";e=e.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+e+`)(?:.|[\r
]))+`;At.KANJI=new RegExp(e,"g"),At.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),At.BYTE=new RegExp(i,"g"),At.NUMERIC=new RegExp(t,"g"),At.ALPHANUMERIC=new RegExp(r,"g");const a=new RegExp("^"+e+"$"),n=new RegExp("^"+t+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return At.testKanji=function(l){return a.test(l)},At.testNumeric=function(l){return n.test(l)},At.testAlphanumeric=function(l){return o.test(l)},At}var pr;function Ot(){return pr||(pr=1,(function(t){const r=Xr(),e=Qr();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(n,o){if(!n.ccBits)throw new Error("Invalid mode: "+n);if(!r.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?n.ccBits[0]:o<27?n.ccBits[1]:n.ccBits[2]},t.getBestModeForData=function(n){return e.testNumeric(n)?t.NUMERIC:e.testAlphanumeric(n)?t.ALPHANUMERIC:e.testKanji(n)?t.KANJI:t.BYTE},t.toString=function(n){if(n&&n.id)return n.id;throw new Error("Invalid mode")},t.isValid=function(n){return n&&n.bit&&n.ccBits};function i(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+a)}}t.from=function(n,o){if(t.isValid(n))return n;try{return i(n)}catch{return o}}})(we)),we}var mr;function Xn(){return mr||(mr=1,(function(t){const r=Rt(),e=jr(),i=Ge(),a=Ot(),n=Xr(),o=7973,s=r.getBCHDigit(o);function l(_,d,m){for(let f=1;f<=40;f++)if(d<=t.getCapacity(f,m,_))return f}function p(_,d){return a.getCharCountIndicator(_,d)+4}function E(_,d){let m=0;return _.forEach(function(f){const g=p(f.mode,d);m+=g+f.getBitsLength()}),m}function w(_,d){for(let m=1;m<=40;m++)if(E(_,m)<=t.getCapacity(m,d,a.MIXED))return m}t.from=function(d,m){return n.isValid(d)?parseInt(d,10):m},t.getCapacity=function(d,m,f){if(!n.isValid(d))throw new Error("Invalid QR Code version");typeof f>"u"&&(f=a.BYTE);const g=r.getSymbolTotalCodewords(d),h=e.getTotalCodewordsCount(d,m),b=(g-h)*8;if(f===a.MIXED)return b;const S=b-p(f,d);switch(f){case a.NUMERIC:return Math.floor(S/10*3);case a.ALPHANUMERIC:return Math.floor(S/11*2);case a.KANJI:return Math.floor(S/13);case a.BYTE:default:return Math.floor(S/8)}},t.getBestVersionForData=function(d,m){let f;const g=i.from(m,i.M);if(Array.isArray(d)){if(d.length>1)return w(d,g);if(d.length===0)return 1;f=d[0]}else f=d;return l(f.mode,f.getLength(),g)},t.getEncodedBits=function(d){if(!n.isValid(d)||d<7)throw new Error("Invalid QR Code version");let m=d<<12;for(;r.getBCHDigit(m)-s>=0;)m^=o<<r.getBCHDigit(m)-s;return d<<12|m}})(ye)),ye}var be={},gr;function Qn(){if(gr)return be;gr=1;const t=Rt(),r=1335,e=21522,i=t.getBCHDigit(r);return be.getEncodedBits=function(n,o){const s=n.bit<<3|o;let l=s<<10;for(;t.getBCHDigit(l)-i>=0;)l^=r<<t.getBCHDigit(l)-i;return(s<<10|l)^e},be}var Ee={},ve,yr;function ti(){if(yr)return ve;yr=1;const t=Ot();function r(e){this.mode=t.NUMERIC,this.data=e.toString()}return r.getBitsLength=function(i){return 10*Math.floor(i/3)+(i%3?i%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(i){let a,n,o;for(a=0;a+3<=this.data.length;a+=3)n=this.data.substr(a,3),o=parseInt(n,10),i.put(o,10);const s=this.data.length-a;s>0&&(n=this.data.substr(a),o=parseInt(n,10),i.put(o,s*3+1))},ve=r,ve}var Ae,wr;function ei(){if(wr)return Ae;wr=1;const t=Ot(),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function e(i){this.mode=t.ALPHANUMERIC,this.data=i}return e.getBitsLength=function(a){return 11*Math.floor(a/2)+6*(a%2)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(a){let n;for(n=0;n+2<=this.data.length;n+=2){let o=r.indexOf(this.data[n])*45;o+=r.indexOf(this.data[n+1]),a.put(o,11)}this.data.length%2&&a.put(r.indexOf(this.data[n]),6)},Ae=e,Ae}var Se,_r;function ri(){if(_r)return Se;_r=1;const t=Ot();function r(e){this.mode=t.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}return r.getBitsLength=function(i){return i*8},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){for(let i=0,a=this.data.length;i<a;i++)e.put(this.data[i],8)},Se=r,Se}var Ce,br;function ni(){if(br)return Ce;br=1;const t=Ot(),r=Rt();function e(i){this.mode=t.KANJI,this.data=i}return e.getBitsLength=function(a){return a*13},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(i){let a;for(a=0;a<this.data.length;a++){let n=r.toSJIS(this.data[a]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[a]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),i.put(n,13)}},Ce=e,Ce}var ke={exports:{}},Er;function ii(){return Er||(Er=1,(function(t){var r={single_source_shortest_paths:function(e,i,a){var n={},o={};o[i]=0;var s=r.PriorityQueue.make();s.push(i,0);for(var l,p,E,w,_,d,m,f,g;!s.empty();){l=s.pop(),p=l.value,w=l.cost,_=e[p]||{};for(E in _)_.hasOwnProperty(E)&&(d=_[E],m=w+d,f=o[E],g=typeof o[E]>"u",(g||f>m)&&(o[E]=m,s.push(E,m),n[E]=p))}if(typeof a<"u"&&typeof o[a]>"u"){var h=["Could not find a path from ",i," to ",a,"."].join("");throw new Error(h)}return n},extract_shortest_path_from_predecessor_list:function(e,i){for(var a=[],n=i;n;)a.push(n),e[n],n=e[n];return a.reverse(),a},find_path:function(e,i,a){var n=r.single_source_shortest_paths(e,i,a);return r.extract_shortest_path_from_predecessor_list(n,a)},PriorityQueue:{make:function(e){var i=r.PriorityQueue,a={},n;e=e||{};for(n in i)i.hasOwnProperty(n)&&(a[n]=i[n]);return a.queue=[],a.sorter=e.sorter||i.default_sorter,a},default_sorter:function(e,i){return e.cost-i.cost},push:function(e,i){var a={value:e,cost:i};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=r})(ke)),ke.exports}var vr;function ai(){return vr||(vr=1,(function(t){const r=Ot(),e=ti(),i=ei(),a=ri(),n=ni(),o=Qr(),s=Rt(),l=ii();function p(h){return unescape(encodeURIComponent(h)).length}function E(h,b,S){const C=[];let B;for(;(B=h.exec(S))!==null;)C.push({data:B[0],index:B.index,mode:b,length:B[0].length});return C}function w(h){const b=E(o.NUMERIC,r.NUMERIC,h),S=E(o.ALPHANUMERIC,r.ALPHANUMERIC,h);let C,B;return s.isKanjiModeEnabled()?(C=E(o.BYTE,r.BYTE,h),B=E(o.KANJI,r.KANJI,h)):(C=E(o.BYTE_KANJI,r.BYTE,h),B=[]),b.concat(S,C,B).sort(function(x,z){return x.index-z.index}).map(function(x){return{data:x.data,mode:x.mode,length:x.length}})}function _(h,b){switch(b){case r.NUMERIC:return e.getBitsLength(h);case r.ALPHANUMERIC:return i.getBitsLength(h);case r.KANJI:return n.getBitsLength(h);case r.BYTE:return a.getBitsLength(h)}}function d(h){return h.reduce(function(b,S){const C=b.length-1>=0?b[b.length-1]:null;return C&&C.mode===S.mode?(b[b.length-1].data+=S.data,b):(b.push(S),b)},[])}function m(h){const b=[];for(let S=0;S<h.length;S++){const C=h[S];switch(C.mode){case r.NUMERIC:b.push([C,{data:C.data,mode:r.ALPHANUMERIC,length:C.length},{data:C.data,mode:r.BYTE,length:C.length}]);break;case r.ALPHANUMERIC:b.push([C,{data:C.data,mode:r.BYTE,length:C.length}]);break;case r.KANJI:b.push([C,{data:C.data,mode:r.BYTE,length:p(C.data)}]);break;case r.BYTE:b.push([{data:C.data,mode:r.BYTE,length:p(C.data)}])}}return b}function f(h,b){const S={},C={start:{}};let B=["start"];for(let P=0;P<h.length;P++){const x=h[P],z=[];for(let k=0;k<x.length;k++){const L=x[k],W=""+P+k;z.push(W),S[W]={node:L,lastCount:0},C[W]={};for(let v=0;v<B.length;v++){const I=B[v];S[I]&&S[I].node.mode===L.mode?(C[I][W]=_(S[I].lastCount+L.length,L.mode)-_(S[I].lastCount,L.mode),S[I].lastCount+=L.length):(S[I]&&(S[I].lastCount=L.length),C[I][W]=_(L.length,L.mode)+4+r.getCharCountIndicator(L.mode,b))}}B=z}for(let P=0;P<B.length;P++)C[B[P]].end=0;return{map:C,table:S}}function g(h,b){let S;const C=r.getBestModeForData(h);if(S=r.from(b,C),S!==r.BYTE&&S.bit<C.bit)throw new Error('"'+h+'" cannot be encoded with mode '+r.toString(S)+`.
 Suggested mode is: `+r.toString(C));switch(S===r.KANJI&&!s.isKanjiModeEnabled()&&(S=r.BYTE),S){case r.NUMERIC:return new e(h);case r.ALPHANUMERIC:return new i(h);case r.KANJI:return new n(h);case r.BYTE:return new a(h)}}t.fromArray=function(b){return b.reduce(function(S,C){return typeof C=="string"?S.push(g(C,null)):C.data&&S.push(g(C.data,C.mode)),S},[])},t.fromString=function(b,S){const C=w(b,s.isKanjiModeEnabled()),B=m(C),P=f(B,S),x=l.find_path(P.map,"start","end"),z=[];for(let k=1;k<x.length-1;k++)z.push(P.table[x[k]].node);return t.fromArray(d(z))},t.rawSplit=function(b){return t.fromArray(w(b,s.isKanjiModeEnabled()))}})(Ee)),Ee}var Ar;function si(){if(Ar)return ce;Ar=1;const t=Rt(),r=Ge(),e=Jn(),i=Gn(),a=$n(),n=qn(),o=Vn(),s=jr(),l=jn(),p=Xn(),E=Qn(),w=Ot(),_=ai();function d(P,x){const z=P.size,k=n.getPositions(x);for(let L=0;L<k.length;L++){const W=k[L][0],v=k[L][1];for(let I=-1;I<=7;I++)if(!(W+I<=-1||z<=W+I))for(let u=-1;u<=7;u++)v+u<=-1||z<=v+u||(I>=0&&I<=6&&(u===0||u===6)||u>=0&&u<=6&&(I===0||I===6)||I>=2&&I<=4&&u>=2&&u<=4?P.set(W+I,v+u,!0,!0):P.set(W+I,v+u,!1,!0))}}function m(P){const x=P.size;for(let z=8;z<x-8;z++){const k=z%2===0;P.set(z,6,k,!0),P.set(6,z,k,!0)}}function f(P,x){const z=a.getPositions(x);for(let k=0;k<z.length;k++){const L=z[k][0],W=z[k][1];for(let v=-2;v<=2;v++)for(let I=-2;I<=2;I++)v===-2||v===2||I===-2||I===2||v===0&&I===0?P.set(L+v,W+I,!0,!0):P.set(L+v,W+I,!1,!0)}}function g(P,x){const z=P.size,k=p.getEncodedBits(x);let L,W,v;for(let I=0;I<18;I++)L=Math.floor(I/3),W=I%3+z-8-3,v=(k>>I&1)===1,P.set(L,W,v,!0),P.set(W,L,v,!0)}function h(P,x,z){const k=P.size,L=E.getEncodedBits(x,z);let W,v;for(W=0;W<15;W++)v=(L>>W&1)===1,W<6?P.set(W,8,v,!0):W<8?P.set(W+1,8,v,!0):P.set(k-15+W,8,v,!0),W<8?P.set(8,k-W-1,v,!0):W<9?P.set(8,15-W-1+1,v,!0):P.set(8,15-W-1,v,!0);P.set(k-8,8,1,!0)}function b(P,x){const z=P.size;let k=-1,L=z-1,W=7,v=0;for(let I=z-1;I>0;I-=2)for(I===6&&I--;;){for(let u=0;u<2;u++)if(!P.isReserved(L,I-u)){let F=!1;v<x.length&&(F=(x[v]>>>W&1)===1),P.set(L,I-u,F),W--,W===-1&&(v++,W=7)}if(L+=k,L<0||z<=L){L-=k,k=-k;break}}}function S(P,x,z){const k=new e;z.forEach(function(u){k.put(u.mode.bit,4),k.put(u.getLength(),w.getCharCountIndicator(u.mode,P)),u.write(k)});const L=t.getSymbolTotalCodewords(P),W=s.getTotalCodewordsCount(P,x),v=(L-W)*8;for(k.getLengthInBits()+4<=v&&k.put(0,4);k.getLengthInBits()%8!==0;)k.putBit(0);const I=(v-k.getLengthInBits())/8;for(let u=0;u<I;u++)k.put(u%2?17:236,8);return C(k,P,x)}function C(P,x,z){const k=t.getSymbolTotalCodewords(x),L=s.getTotalCodewordsCount(x,z),W=k-L,v=s.getBlocksCount(x,z),I=k%v,u=v-I,F=Math.floor(k/v),nt=Math.floor(W/v),J=nt+1,at=F-nt,G=new l(at);let et=0;const D=new Array(v),O=new Array(v);let j=0;const Z=new Uint8Array(P.buffer);for(let st=0;st<v;st++){const ft=st<u?nt:J;D[st]=Z.slice(et,et+ft),O[st]=G.encode(D[st]),et+=ft,j=Math.max(j,ft)}const V=new Uint8Array(k);let dt=0,lt,it;for(lt=0;lt<j;lt++)for(it=0;it<v;it++)lt<D[it].length&&(V[dt++]=D[it][lt]);for(lt=0;lt<at;lt++)for(it=0;it<v;it++)V[dt++]=O[it][lt];return V}function B(P,x,z,k){let L;if(Array.isArray(P))L=_.fromArray(P);else if(typeof P=="string"){let F=x;if(!F){const nt=_.rawSplit(P);F=p.getBestVersionForData(nt,z)}L=_.fromString(P,F||40)}else throw new Error("Invalid data");const W=p.getBestVersionForData(L,z);if(!W)throw new Error("The amount of data is too big to be stored in a QR Code");if(!x)x=W;else if(x<W)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+W+`.
`);const v=S(x,z,L),I=t.getSymbolSize(x),u=new i(I);return d(u,x),m(u),f(u,x),h(u,z,0),x>=7&&g(u,x),b(u,v),isNaN(k)&&(k=o.getBestMask(u,h.bind(null,u,z))),o.applyMask(k,u),h(u,z,k),{modules:u,version:x,errorCorrectionLevel:z,maskPattern:k,segments:L}}return ce.create=function(x,z){if(typeof x>"u"||x==="")throw new Error("No input text");let k=r.M,L,W;return typeof z<"u"&&(k=r.from(z.errorCorrectionLevel,r.M),L=p.from(z.version),W=o.from(z.maskPattern),z.toSJISFunc&&t.setToSJISFunction(z.toSJISFunc)),B(x,L,k,W)},ce}var Be={},Te={},Sr;function tn(){return Sr||(Sr=1,(function(t){function r(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let i=e.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+e);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(n){return[n,n]}))),i.length===6&&i.push("F","F");const a=parseInt(i.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const a=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,n=i.width&&i.width>=21?i.width:void 0,o=i.scale||4;return{width:n,scale:n?4:o,margin:a,color:{dark:r(i.color.dark||"#000000ff"),light:r(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,a){return a.width&&a.width>=i+a.margin*2?a.width/(i+a.margin*2):a.scale},t.getImageWidth=function(i,a){const n=t.getScale(i,a);return Math.floor((i+a.margin*2)*n)},t.qrToImageData=function(i,a,n){const o=a.modules.size,s=a.modules.data,l=t.getScale(o,n),p=Math.floor((o+n.margin*2)*l),E=n.margin*l,w=[n.color.light,n.color.dark];for(let _=0;_<p;_++)for(let d=0;d<p;d++){let m=(_*p+d)*4,f=n.color.light;if(_>=E&&d>=E&&_<p-E&&d<p-E){const g=Math.floor((_-E)/l),h=Math.floor((d-E)/l);f=w[s[g*o+h]?1:0]}i[m++]=f.r,i[m++]=f.g,i[m++]=f.b,i[m]=f.a}}})(Te)),Te}var Cr;function oi(){return Cr||(Cr=1,(function(t){const r=tn();function e(a,n,o){a.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=o,n.width=o,n.style.height=o+"px",n.style.width=o+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(n,o,s){let l=s,p=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(p=i()),l=r.getOptions(l);const E=r.getImageWidth(n.modules.size,l),w=p.getContext("2d"),_=w.createImageData(E,E);return r.qrToImageData(_.data,n,l),e(w,p,E),w.putImageData(_,0,0),p},t.renderToDataURL=function(n,o,s){let l=s;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const p=t.render(n,o,l),E=l.type||"image/png",w=l.rendererOpts||{};return p.toDataURL(E,w.quality)}})(Be)),Be}var Ie={},kr;function ci(){if(kr)return Ie;kr=1;const t=tn();function r(a,n){const o=a.a/255,s=n+'="'+a.hex+'"';return o<1?s+" "+n+'-opacity="'+o.toFixed(2).slice(1)+'"':s}function e(a,n,o){let s=a+n;return typeof o<"u"&&(s+=" "+o),s}function i(a,n,o){let s="",l=0,p=!1,E=0;for(let w=0;w<a.length;w++){const _=Math.floor(w%n),d=Math.floor(w/n);!_&&!p&&(p=!0),a[w]?(E++,w>0&&_>0&&a[w-1]||(s+=p?e("M",_+o,.5+d+o):e("m",l,0),l=0,p=!1),_+1<n&&a[w+1]||(s+=e("h",E),E=0)):l++}return s}return Ie.render=function(n,o,s){const l=t.getOptions(o),p=n.modules.size,E=n.modules.data,w=p+l.margin*2,_=l.color.light.a?"<path "+r(l.color.light,"fill")+' d="M0 0h'+w+"v"+w+'H0z"/>':"",d="<path "+r(l.color.dark,"stroke")+' d="'+i(E,p,l.margin)+'"/>',m='viewBox="0 0 '+w+" "+w+'"',g='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+m+' shape-rendering="crispEdges">'+_+d+`</svg>
`;return typeof s=="function"&&s(null,g),g},Ie}var Br;function li(){if(Br)return Dt;Br=1;const t=Hn(),r=si(),e=oi(),i=ci();function a(n,o,s,l,p){const E=[].slice.call(arguments,1),w=E.length,_=typeof E[w-1]=="function";if(!_&&!t())throw new Error("Callback required as last argument");if(_){if(w<2)throw new Error("Too few arguments provided");w===2?(p=s,s=o,o=l=void 0):w===3&&(o.getContext&&typeof p>"u"?(p=l,l=void 0):(p=l,l=s,s=o,o=void 0))}else{if(w<1)throw new Error("Too few arguments provided");return w===1?(s=o,o=l=void 0):w===2&&!o.getContext&&(l=s,s=o,o=void 0),new Promise(function(d,m){try{const f=r.create(s,l);d(n(f,o,l))}catch(f){m(f)}})}try{const d=r.create(s,l);p(null,n(d,o,l))}catch(d){p(d)}}return Dt.create=r.create,Dt.toCanvas=a.bind(null,e.render),Dt.toDataURL=a.bind(null,e.renderToDataURL),Dt.toString=a.bind(null,function(n,o,s){return i.render(n,s)}),Dt}var ui=li();const di=Yr(ui);function te(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xe={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Tr;function fi(){return Tr||(Tr=1,(function(t,r){(function(e){t.exports=e()})(function(){return(function e(i,a,n){function o(p,E){if(!a[p]){if(!i[p]){var w=typeof te=="function"&&te;if(!E&&w)return w(p,!0);if(s)return s(p,!0);var _=new Error("Cannot find module '"+p+"'");throw _.code="MODULE_NOT_FOUND",_}var d=a[p]={exports:{}};i[p][0].call(d.exports,function(m){var f=i[p][1][m];return o(f||m)},d,d.exports,e,i,a,n)}return a[p].exports}for(var s=typeof te=="function"&&te,l=0;l<n.length;l++)o(n[l]);return o})({1:[function(e,i,a){var n=e("./utils"),o=e("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(l){for(var p,E,w,_,d,m,f,g=[],h=0,b=l.length,S=b,C=n.getTypeOf(l)!=="string";h<l.length;)S=b-h,w=C?(p=l[h++],E=h<b?l[h++]:0,h<b?l[h++]:0):(p=l.charCodeAt(h++),E=h<b?l.charCodeAt(h++):0,h<b?l.charCodeAt(h++):0),_=p>>2,d=(3&p)<<4|E>>4,m=1<S?(15&E)<<2|w>>6:64,f=2<S?63&w:64,g.push(s.charAt(_)+s.charAt(d)+s.charAt(m)+s.charAt(f));return g.join("")},a.decode=function(l){var p,E,w,_,d,m,f=0,g=0,h="data:";if(l.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var b,S=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===s.charAt(64)&&S--,l.charAt(l.length-2)===s.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=o.uint8array?new Uint8Array(0|S):new Array(0|S);f<l.length;)p=s.indexOf(l.charAt(f++))<<2|(_=s.indexOf(l.charAt(f++)))>>4,E=(15&_)<<4|(d=s.indexOf(l.charAt(f++)))>>2,w=(3&d)<<6|(m=s.indexOf(l.charAt(f++))),b[g++]=p,d!==64&&(b[g++]=E),m!==64&&(b[g++]=w);return b}},{"./support":30,"./utils":32}],2:[function(e,i,a){var n=e("./external"),o=e("./stream/DataWorker"),s=e("./stream/Crc32Probe"),l=e("./stream/DataLengthProbe");function p(E,w,_,d,m){this.compressedSize=E,this.uncompressedSize=w,this.crc32=_,this.compression=d,this.compressedContent=m}p.prototype={getContentWorker:function(){var E=new o(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),w=this;return E.on("end",function(){if(this.streamInfo.data_length!==w.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),E},getCompressedWorker:function(){return new o(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(E,w,_){return E.pipe(new s).pipe(new l("uncompressedSize")).pipe(w.compressWorker(_)).pipe(new l("compressedSize")).withStreamInfo("compression",w)},i.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,i,a){var n=e("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},a.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,i,a){var n=e("./utils"),o=(function(){for(var s,l=[],p=0;p<256;p++){s=p;for(var E=0;E<8;E++)s=1&s?3988292384^s>>>1:s>>>1;l[p]=s}return l})();i.exports=function(s,l){return s!==void 0&&s.length?n.getTypeOf(s)!=="string"?(function(p,E,w,_){var d=o,m=_+w;p^=-1;for(var f=_;f<m;f++)p=p>>>8^d[255&(p^E[f])];return-1^p})(0|l,s,s.length,0):(function(p,E,w,_){var d=o,m=_+w;p^=-1;for(var f=_;f<m;f++)p=p>>>8^d[255&(p^E.charCodeAt(f))];return-1^p})(0|l,s,s.length,0):0}},{"./utils":32}],5:[function(e,i,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(e,i,a){var n=null;n=typeof Promise<"u"?Promise:e("lie"),i.exports={Promise:n}},{lie:37}],7:[function(e,i,a){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=e("pako"),s=e("./utils"),l=e("./stream/GenericWorker"),p=n?"uint8array":"array";function E(w,_){l.call(this,"FlateWorker/"+w),this._pako=null,this._pakoAction=w,this._pakoOptions=_,this.meta={}}a.magic="\b\0",s.inherits(E,l),E.prototype.processChunk=function(w){this.meta=w.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(p,w.data),!1)},E.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},E.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},E.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var w=this;this._pako.onData=function(_){w.push({data:_,meta:w.meta})}},a.compressWorker=function(w){return new E("Deflate",w)},a.uncompressWorker=function(){return new E("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,i,a){function n(d,m){var f,g="";for(f=0;f<m;f++)g+=String.fromCharCode(255&d),d>>>=8;return g}function o(d,m,f,g,h,b){var S,C,B=d.file,P=d.compression,x=b!==p.utf8encode,z=s.transformTo("string",b(B.name)),k=s.transformTo("string",p.utf8encode(B.name)),L=B.comment,W=s.transformTo("string",b(L)),v=s.transformTo("string",p.utf8encode(L)),I=k.length!==B.name.length,u=v.length!==L.length,F="",nt="",J="",at=B.dir,G=B.date,et={crc32:0,compressedSize:0,uncompressedSize:0};m&&!f||(et.crc32=d.crc32,et.compressedSize=d.compressedSize,et.uncompressedSize=d.uncompressedSize);var D=0;m&&(D|=8),x||!I&&!u||(D|=2048);var O=0,j=0;at&&(O|=16),h==="UNIX"?(j=798,O|=(function(V,dt){var lt=V;return V||(lt=dt?16893:33204),(65535&lt)<<16})(B.unixPermissions,at)):(j=20,O|=(function(V){return 63&(V||0)})(B.dosPermissions)),S=G.getUTCHours(),S<<=6,S|=G.getUTCMinutes(),S<<=5,S|=G.getUTCSeconds()/2,C=G.getUTCFullYear()-1980,C<<=4,C|=G.getUTCMonth()+1,C<<=5,C|=G.getUTCDate(),I&&(nt=n(1,1)+n(E(z),4)+k,F+="up"+n(nt.length,2)+nt),u&&(J=n(1,1)+n(E(W),4)+v,F+="uc"+n(J.length,2)+J);var Z="";return Z+=`
\0`,Z+=n(D,2),Z+=P.magic,Z+=n(S,2),Z+=n(C,2),Z+=n(et.crc32,4),Z+=n(et.compressedSize,4),Z+=n(et.uncompressedSize,4),Z+=n(z.length,2),Z+=n(F.length,2),{fileRecord:w.LOCAL_FILE_HEADER+Z+z+F,dirRecord:w.CENTRAL_FILE_HEADER+n(j,2)+Z+n(W.length,2)+"\0\0\0\0"+n(O,4)+n(g,4)+z+F+W}}var s=e("../utils"),l=e("../stream/GenericWorker"),p=e("../utf8"),E=e("../crc32"),w=e("../signature");function _(d,m,f,g){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=f,this.encodeFileName=g,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(_,l),_.prototype.push=function(d){var m=d.meta.percent||0,f=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,l.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:f?(m+100*(f-g-1))/f:100}}))},_.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var m=this.streamFiles&&!d.file.dir;if(m){var f=o(d,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:f.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(d){this.accumulate=!1;var m=this.streamFiles&&!d.file.dir,f=o(d,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(f.dirRecord),m)this.push({data:(function(g){return w.DATA_DESCRIPTOR+n(g.crc32,4)+n(g.compressedSize,4)+n(g.uncompressedSize,4)})(d),meta:{percent:100}});else for(this.push({data:f.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var d=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var f=this.bytesWritten-d,g=(function(h,b,S,C,B){var P=s.transformTo("string",B(C));return w.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(h,2)+n(h,2)+n(b,4)+n(S,4)+n(P.length,2)+P})(this.dirRecords.length,f,d,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(d){this._sources.push(d);var m=this;return d.on("data",function(f){m.processChunk(f)}),d.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),d.on("error",function(f){m.error(f)}),this},_.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(d){var m=this._sources;if(!l.prototype.error.call(this,d))return!1;for(var f=0;f<m.length;f++)try{m[f].error(d)}catch{}return!0},_.prototype.lock=function(){l.prototype.lock.call(this);for(var d=this._sources,m=0;m<d.length;m++)d[m].lock()},i.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,i,a){var n=e("../compressions"),o=e("./ZipFileWorker");a.generateWorker=function(s,l,p){var E=new o(l.streamFiles,p,l.platform,l.encodeFileName),w=0;try{s.forEach(function(_,d){w++;var m=(function(b,S){var C=b||S,B=n[C];if(!B)throw new Error(C+" is not a valid compression method !");return B})(d.options.compression,l.compression),f=d.options.compressionOptions||l.compressionOptions||{},g=d.dir,h=d.date;d._compressWorker(m,f).withStreamInfo("file",{name:_,dir:g,date:h,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(E)}),E.entriesCount=w}catch(_){E.error(_)}return E}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,i,a){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new n;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.10.1",n.loadAsync=function(o,s){return new n().loadAsync(o,s)},n.external=e("./external"),i.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,i,a){var n=e("./utils"),o=e("./external"),s=e("./utf8"),l=e("./zipEntries"),p=e("./stream/Crc32Probe"),E=e("./nodejsUtils");function w(_){return new o.Promise(function(d,m){var f=_.decompressed.getContentWorker().pipe(new p);f.on("error",function(g){m(g)}).on("end",function(){f.streamInfo.crc32!==_.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}i.exports=function(_,d){var m=this;return d=n.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),E.isNode&&E.isStream(_)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",_,!0,d.optimizedBinaryString,d.base64).then(function(f){var g=new l(d);return g.load(f),g}).then(function(f){var g=[o.Promise.resolve(f)],h=f.files;if(d.checkCRC32)for(var b=0;b<h.length;b++)g.push(w(h[b]));return o.Promise.all(g)}).then(function(f){for(var g=f.shift(),h=g.files,b=0;b<h.length;b++){var S=h[b],C=S.fileNameStr,B=n.resolve(S.fileNameStr);m.file(B,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:d.createFolders}),S.dir||(m.file(B).unsafeOriginalName=C)}return g.zipComment.length&&(m.comment=g.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,i,a){var n=e("../utils"),o=e("../stream/GenericWorker");function s(l,p){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(p)}n.inherits(s,o),s.prototype._bindStream=function(l){var p=this;(this._stream=l).pause(),l.on("data",function(E){p.push({data:E,meta:{percent:0}})}).on("error",function(E){p.isPaused?this.generatedError=E:p.error(E)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,i,a){var n=e("readable-stream").Readable;function o(s,l,p){n.call(this,l),this._helper=s;var E=this;s.on("data",function(w,_){E.push(w)||E._helper.pause(),p&&p(_)}).on("error",function(w){E.emit("error",w)}).on("end",function(){E.push(null)})}e("../utils").inherits(o,n),o.prototype._read=function(){this._helper.resume()},i.exports=o},{"../utils":32,"readable-stream":16}],14:[function(e,i,a){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,o);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,o)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var o=new Buffer(n);return o.fill(0),o},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(e,i,a){function n(B,P,x){var z,k=s.getTypeOf(P),L=s.extend(x||{},E);L.date=L.date||new Date,L.compression!==null&&(L.compression=L.compression.toUpperCase()),typeof L.unixPermissions=="string"&&(L.unixPermissions=parseInt(L.unixPermissions,8)),L.unixPermissions&&16384&L.unixPermissions&&(L.dir=!0),L.dosPermissions&&16&L.dosPermissions&&(L.dir=!0),L.dir&&(B=h(B)),L.createFolders&&(z=g(B))&&b.call(this,z,!0);var W=k==="string"&&L.binary===!1&&L.base64===!1;x&&x.binary!==void 0||(L.binary=!W),(P instanceof w&&P.uncompressedSize===0||L.dir||!P||P.length===0)&&(L.base64=!1,L.binary=!0,P="",L.compression="STORE",k="string");var v=null;v=P instanceof w||P instanceof l?P:m.isNode&&m.isStream(P)?new f(B,P):s.prepareContent(B,P,L.binary,L.optimizedBinaryString,L.base64);var I=new _(B,v,L);this.files[B]=I}var o=e("./utf8"),s=e("./utils"),l=e("./stream/GenericWorker"),p=e("./stream/StreamHelper"),E=e("./defaults"),w=e("./compressedObject"),_=e("./zipObject"),d=e("./generate"),m=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),g=function(B){B.slice(-1)==="/"&&(B=B.substring(0,B.length-1));var P=B.lastIndexOf("/");return 0<P?B.substring(0,P):""},h=function(B){return B.slice(-1)!=="/"&&(B+="/"),B},b=function(B,P){return P=P!==void 0?P:E.createFolders,B=h(B),this.files[B]||n.call(this,B,null,{dir:!0,createFolders:P}),this.files[B]};function S(B){return Object.prototype.toString.call(B)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(B){var P,x,z;for(P in this.files)z=this.files[P],(x=P.slice(this.root.length,P.length))&&P.slice(0,this.root.length)===this.root&&B(x,z)},filter:function(B){var P=[];return this.forEach(function(x,z){B(x,z)&&P.push(z)}),P},file:function(B,P,x){if(arguments.length!==1)return B=this.root+B,n.call(this,B,P,x),this;if(S(B)){var z=B;return this.filter(function(L,W){return!W.dir&&z.test(L)})}var k=this.files[this.root+B];return k&&!k.dir?k:null},folder:function(B){if(!B)return this;if(S(B))return this.filter(function(k,L){return L.dir&&B.test(k)});var P=this.root+B,x=b.call(this,P),z=this.clone();return z.root=x.name,z},remove:function(B){B=this.root+B;var P=this.files[B];if(P||(B.slice(-1)!=="/"&&(B+="/"),P=this.files[B]),P&&!P.dir)delete this.files[B];else for(var x=this.filter(function(k,L){return L.name.slice(0,B.length)===B}),z=0;z<x.length;z++)delete this.files[x[z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(B){var P,x={};try{if((x=s.extend(B||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=x.type.toLowerCase(),x.compression=x.compression.toUpperCase(),x.type==="binarystring"&&(x.type="string"),!x.type)throw new Error("No output type specified.");s.checkSupport(x.type),x.platform!=="darwin"&&x.platform!=="freebsd"&&x.platform!=="linux"&&x.platform!=="sunos"||(x.platform="UNIX"),x.platform==="win32"&&(x.platform="DOS");var z=x.comment||this.comment||"";P=d.generateWorker(this,x,z)}catch(k){(P=new l("error")).error(k)}return new p(P,x.type||"string",x.mimeType)},generateAsync:function(B,P){return this.generateInternalStream(B).accumulate(P)},generateNodeStream:function(B,P){return(B=B||{}).type||(B.type="nodebuffer"),this.generateInternalStream(B).toNodejsStream(P)}};i.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,i,a){i.exports=e("stream")},{stream:void 0}],17:[function(e,i,a){var n=e("./DataReader");function o(s){n.call(this,s);for(var l=0;l<this.data.length;l++)s[l]=255&s[l]}e("../utils").inherits(o,n),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var l=s.charCodeAt(0),p=s.charCodeAt(1),E=s.charCodeAt(2),w=s.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===l&&this.data[_+1]===p&&this.data[_+2]===E&&this.data[_+3]===w)return _-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var l=s.charCodeAt(0),p=s.charCodeAt(1),E=s.charCodeAt(2),w=s.charCodeAt(3),_=this.readData(4);return l===_[0]&&p===_[1]&&E===_[2]&&w===_[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},i.exports=o},{"../utils":32,"./DataReader":18}],18:[function(e,i,a){var n=e("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var l,p=0;for(this.checkOffset(s),l=this.index+s-1;l>=this.index;l--)p=(p<<8)+this.byteAt(l);return this.index+=s,p},readString:function(s){return n.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},i.exports=o},{"../utils":32}],19:[function(e,i,a){var n=e("./Uint8ArrayReader");function o(s){n.call(this,s)}e("../utils").inherits(o,n),o.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},i.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,i,a){var n=e("./DataReader");function o(s){n.call(this,s)}e("../utils").inherits(o,n),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},i.exports=o},{"../utils":32,"./DataReader":18}],21:[function(e,i,a){var n=e("./ArrayReader");function o(s){n.call(this,s)}e("../utils").inherits(o,n),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},i.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(e,i,a){var n=e("../utils"),o=e("../support"),s=e("./ArrayReader"),l=e("./StringReader"),p=e("./NodeBufferReader"),E=e("./Uint8ArrayReader");i.exports=function(w){var _=n.getTypeOf(w);return n.checkSupport(_),_!=="string"||o.uint8array?_==="nodebuffer"?new p(w):o.uint8array?new E(n.transformTo("uint8array",w)):new s(n.transformTo("array",w)):new l(w)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,i,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,i,a){var n=e("./GenericWorker"),o=e("../utils");function s(l){n.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(s,n),s.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},i.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(e,i,a){var n=e("./GenericWorker"),o=e("../crc32");function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(s,n),s.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},i.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,i,a){var n=e("../utils"),o=e("./GenericWorker");function s(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}n.inherits(s,o),s.prototype.processChunk=function(l){if(l){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+l.data.length}o.prototype.processChunk.call(this,l)},i.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(e,i,a){var n=e("../utils"),o=e("./GenericWorker");function s(l){o.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(E){p.dataIsReady=!0,p.data=E,p.max=E&&E.length||0,p.type=n.getTypeOf(E),p.isPaused||p._tickAndRepeat()},function(E){p.error(E)})}n.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,p);break;case"uint8array":l=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":l=this.data.slice(this.index,p)}return this.index=p,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(e,i,a){function n(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(l){s.processChunk(l)}),o.on("end",function(){s.end()}),o.on("error",function(l){s.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},i.exports=n},{}],29:[function(e,i,a){var n=e("../utils"),o=e("./ConvertWorker"),s=e("./GenericWorker"),l=e("../base64"),p=e("../support"),E=e("../external"),w=null;if(p.nodestream)try{w=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(m,f){return new E.Promise(function(g,h){var b=[],S=m._internalType,C=m._outputType,B=m._mimeType;m.on("data",function(P,x){b.push(P),f&&f(x)}).on("error",function(P){b=[],h(P)}).on("end",function(){try{var P=(function(x,z,k){switch(x){case"blob":return n.newBlob(n.transformTo("arraybuffer",z),k);case"base64":return l.encode(z);default:return n.transformTo(x,z)}})(C,(function(x,z){var k,L=0,W=null,v=0;for(k=0;k<z.length;k++)v+=z[k].length;switch(x){case"string":return z.join("");case"array":return Array.prototype.concat.apply([],z);case"uint8array":for(W=new Uint8Array(v),k=0;k<z.length;k++)W.set(z[k],L),L+=z[k].length;return W;case"nodebuffer":return Buffer.concat(z);default:throw new Error("concat : unsupported type '"+x+"'")}})(S,b),B);g(P)}catch(x){h(x)}b=[]}).resume()})}function d(m,f,g){var h=f;switch(f){case"blob":case"arraybuffer":h="uint8array";break;case"base64":h="string"}try{this._internalType=h,this._outputType=f,this._mimeType=g,n.checkSupport(h),this._worker=m.pipe(new o(h)),m.lock()}catch(b){this._worker=new s("error"),this._worker.error(b)}}d.prototype={accumulate:function(m){return _(this,m)},on:function(m,f){var g=this;return m==="data"?this._worker.on(m,function(h){f.call(g,h.data,h.meta)}):this._worker.on(m,function(){n.delay(f,arguments,g)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new w(this,{objectMode:this._outputType!=="nodebuffer"},m)}},i.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,i,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var n=new ArrayBuffer(0);try{a.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(n),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!e("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(e,i,a){for(var n=e("./utils"),o=e("./support"),s=e("./nodejsUtils"),l=e("./stream/GenericWorker"),p=new Array(256),E=0;E<256;E++)p[E]=252<=E?6:248<=E?5:240<=E?4:224<=E?3:192<=E?2:1;p[254]=p[254]=1;function w(){l.call(this,"utf-8 decode"),this.leftOver=null}function _(){l.call(this,"utf-8 encode")}a.utf8encode=function(d){return o.nodebuffer?s.newBufferFrom(d,"utf-8"):(function(m){var f,g,h,b,S,C=m.length,B=0;for(b=0;b<C;b++)(64512&(g=m.charCodeAt(b)))==55296&&b+1<C&&(64512&(h=m.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(h-56320),b++),B+=g<128?1:g<2048?2:g<65536?3:4;for(f=o.uint8array?new Uint8Array(B):new Array(B),b=S=0;S<B;b++)(64512&(g=m.charCodeAt(b)))==55296&&b+1<C&&(64512&(h=m.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(h-56320),b++),g<128?f[S++]=g:(g<2048?f[S++]=192|g>>>6:(g<65536?f[S++]=224|g>>>12:(f[S++]=240|g>>>18,f[S++]=128|g>>>12&63),f[S++]=128|g>>>6&63),f[S++]=128|63&g);return f})(d)},a.utf8decode=function(d){return o.nodebuffer?n.transformTo("nodebuffer",d).toString("utf-8"):(function(m){var f,g,h,b,S=m.length,C=new Array(2*S);for(f=g=0;f<S;)if((h=m[f++])<128)C[g++]=h;else if(4<(b=p[h]))C[g++]=65533,f+=b-1;else{for(h&=b===2?31:b===3?15:7;1<b&&f<S;)h=h<<6|63&m[f++],b--;1<b?C[g++]=65533:h<65536?C[g++]=h:(h-=65536,C[g++]=55296|h>>10&1023,C[g++]=56320|1023&h)}return C.length!==g&&(C.subarray?C=C.subarray(0,g):C.length=g),n.applyFromCharCode(C)})(d=n.transformTo(o.uint8array?"uint8array":"array",d))},n.inherits(w,l),w.prototype.processChunk=function(d){var m=n.transformTo(o.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var f=m;(m=new Uint8Array(f.length+this.leftOver.length)).set(this.leftOver,0),m.set(f,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var g=(function(b,S){var C;for((S=S||b.length)>b.length&&(S=b.length),C=S-1;0<=C&&(192&b[C])==128;)C--;return C<0||C===0?S:C+p[b[C]]>S?C:S})(m),h=m;g!==m.length&&(o.uint8array?(h=m.subarray(0,g),this.leftOver=m.subarray(g,m.length)):(h=m.slice(0,g),this.leftOver=m.slice(g,m.length))),this.push({data:a.utf8decode(h),meta:d.meta})},w.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=w,n.inherits(_,l),_.prototype.processChunk=function(d){this.push({data:a.utf8encode(d.data),meta:d.meta})},a.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,i,a){var n=e("./support"),o=e("./base64"),s=e("./nodejsUtils"),l=e("./external");function p(f){return f}function E(f,g){for(var h=0;h<f.length;++h)g[h]=255&f.charCodeAt(h);return g}e("setimmediate"),a.newBlob=function(f,g){a.checkSupport("blob");try{return new Blob([f],{type:g})}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return h.append(f),h.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var w={stringifyByChunk:function(f,g,h){var b=[],S=0,C=f.length;if(C<=h)return String.fromCharCode.apply(null,f);for(;S<C;)g==="array"||g==="nodebuffer"?b.push(String.fromCharCode.apply(null,f.slice(S,Math.min(S+h,C)))):b.push(String.fromCharCode.apply(null,f.subarray(S,Math.min(S+h,C)))),S+=h;return b.join("")},stringifyByChar:function(f){for(var g="",h=0;h<f.length;h++)g+=String.fromCharCode(f[h]);return g},applyCanBeUsed:{uint8array:(function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}})()}};function _(f){var g=65536,h=a.getTypeOf(f),b=!0;if(h==="uint8array"?b=w.applyCanBeUsed.uint8array:h==="nodebuffer"&&(b=w.applyCanBeUsed.nodebuffer),b)for(;1<g;)try{return w.stringifyByChunk(f,h,g)}catch{g=Math.floor(g/2)}return w.stringifyByChar(f)}function d(f,g){for(var h=0;h<f.length;h++)g[h]=f[h];return g}a.applyFromCharCode=_;var m={};m.string={string:p,array:function(f){return E(f,new Array(f.length))},arraybuffer:function(f){return m.string.uint8array(f).buffer},uint8array:function(f){return E(f,new Uint8Array(f.length))},nodebuffer:function(f){return E(f,s.allocBuffer(f.length))}},m.array={string:_,array:p,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return s.newBufferFrom(f)}},m.arraybuffer={string:function(f){return _(new Uint8Array(f))},array:function(f){return d(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:p,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return s.newBufferFrom(new Uint8Array(f))}},m.uint8array={string:_,array:function(f){return d(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:p,nodebuffer:function(f){return s.newBufferFrom(f)}},m.nodebuffer={string:_,array:function(f){return d(f,new Array(f.length))},arraybuffer:function(f){return m.nodebuffer.uint8array(f).buffer},uint8array:function(f){return d(f,new Uint8Array(f.length))},nodebuffer:p},a.transformTo=function(f,g){if(g=g||"",!f)return g;a.checkSupport(f);var h=a.getTypeOf(g);return m[h][f](g)},a.resolve=function(f){for(var g=f.split("/"),h=[],b=0;b<g.length;b++){var S=g[b];S==="."||S===""&&b!==0&&b!==g.length-1||(S===".."?h.pop():h.push(S))}return h.join("/")},a.getTypeOf=function(f){return typeof f=="string"?"string":Object.prototype.toString.call(f)==="[object Array]"?"array":n.nodebuffer&&s.isBuffer(f)?"nodebuffer":n.uint8array&&f instanceof Uint8Array?"uint8array":n.arraybuffer&&f instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(f){if(!n[f.toLowerCase()])throw new Error(f+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(f){var g,h,b="";for(h=0;h<(f||"").length;h++)b+="\\x"+((g=f.charCodeAt(h))<16?"0":"")+g.toString(16).toUpperCase();return b},a.delay=function(f,g,h){setImmediate(function(){f.apply(h||null,g||[])})},a.inherits=function(f,g){function h(){}h.prototype=g.prototype,f.prototype=new h},a.extend=function(){var f,g,h={};for(f=0;f<arguments.length;f++)for(g in arguments[f])Object.prototype.hasOwnProperty.call(arguments[f],g)&&h[g]===void 0&&(h[g]=arguments[f][g]);return h},a.prepareContent=function(f,g,h,b,S){return l.Promise.resolve(g).then(function(C){return n.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(B,P){var x=new FileReader;x.onload=function(z){B(z.target.result)},x.onerror=function(z){P(z.target.error)},x.readAsArrayBuffer(C)}):C}).then(function(C){var B=a.getTypeOf(C);return B?(B==="arraybuffer"?C=a.transformTo("uint8array",C):B==="string"&&(S?C=o.decode(C):h&&b!==!0&&(C=(function(P){return E(P,n.uint8array?new Uint8Array(P.length):new Array(P.length))})(C))),C):l.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,i,a){var n=e("./reader/readerFor"),o=e("./utils"),s=e("./signature"),l=e("./zipEntry"),p=e("./support");function E(w){this.files=[],this.loadOptions=w}E.prototype={checkSignature:function(w){if(!this.reader.readAndCheckSignature(w)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(_)+", expected "+o.pretty(w)+")")}},isSignature:function(w,_){var d=this.reader.index;this.reader.setIndex(w);var m=this.reader.readString(4)===_;return this.reader.setIndex(d),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var w=this.reader.readData(this.zipCommentLength),_=p.uint8array?"uint8array":"array",d=o.transformTo(_,w);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var w,_,d,m=this.zip64EndOfCentralSize-44;0<m;)w=this.reader.readInt(2),_=this.reader.readInt(4),d=this.reader.readData(_),this.zip64ExtensibleData[w]={id:w,length:_,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var w,_;for(w=0;w<this.files.length;w++)_=this.files[w],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var w;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(w=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(w);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var w=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(w<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(w);var _=w;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(w=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(w),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var m=_-d;if(0<m)this.isSignature(_,s.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(w){this.reader=n(w)},load:function(w){this.prepareReader(w),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=E},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,i,a){var n=e("./reader/readerFor"),o=e("./utils"),s=e("./compressedObject"),l=e("./crc32"),p=e("./utf8"),E=e("./compressions"),w=e("./support");function _(d,m){this.options=d,this.loadOptions=m}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var m,f;if(d.skip(22),this.fileNameLength=d.readInt(2),f=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(f),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=(function(g){for(var h in E)if(Object.prototype.hasOwnProperty.call(E,h)&&E[h].magic===g)return E[h];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,m,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var m=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(m),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=n(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var m,f,g,h=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<h;)m=d.readInt(2),f=d.readInt(2),g=d.readData(f),this.extraFields[m]={id:m,length:f,value:g};d.setIndex(h)},handleUTF8:function(){var d=w.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var f=o.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(f)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var h=o.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(h)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var m=n(d.value);return m.readInt(1)!==1||l(this.fileName)!==m.readInt(4)?null:p.utf8decode(m.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var m=n(d.value);return m.readInt(1)!==1||l(this.fileComment)!==m.readInt(4)?null:p.utf8decode(m.readData(d.length-5))}return null}},i.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,i,a){function n(m,f,g){this.name=m,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=f,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var o=e("./stream/StreamHelper"),s=e("./stream/DataWorker"),l=e("./utf8"),p=e("./compressedObject"),E=e("./stream/GenericWorker");n.prototype={internalStream:function(m){var f=null,g="string";try{if(!m)throw new Error("No output type specified.");var h=(g=m.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),f=this._decompressWorker();var b=!this._dataBinary;b&&!h&&(f=f.pipe(new l.Utf8EncodeWorker)),!b&&h&&(f=f.pipe(new l.Utf8DecodeWorker))}catch(S){(f=new E("error")).error(S)}return new o(f,g,"")},async:function(m,f){return this.internalStream(m).accumulate(f)},nodeStream:function(m,f){return this.internalStream(m||"nodebuffer").toNodejsStream(f)},_compressWorker:function(m,f){if(this._data instanceof p&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new l.Utf8EncodeWorker)),p.createWorkerFrom(g,m,f)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof E?this._data:new s(this._data)}};for(var w=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<w.length;d++)n.prototype[w[d]]=_;i.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,i,a){(function(n){var o,s,l=n.MutationObserver||n.WebKitMutationObserver;if(l){var p=0,E=new l(m),w=n.document.createTextNode("");E.observe(w,{characterData:!0}),o=function(){w.data=p=++p%2}}else if(n.setImmediate||n.MessageChannel===void 0)o="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var f=n.document.createElement("script");f.onreadystatechange=function(){m(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},n.document.documentElement.appendChild(f)}:function(){setTimeout(m,0)};else{var _=new n.MessageChannel;_.port1.onmessage=m,o=function(){_.port2.postMessage(0)}}var d=[];function m(){var f,g;s=!0;for(var h=d.length;h;){for(g=d,d=[],f=-1;++f<h;)g[f]();h=d.length}s=!1}i.exports=function(f){d.push(f)!==1||s||o()}}).call(this,typeof Xt<"u"?Xt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,i,a){var n=e("immediate");function o(){}var s={},l=["REJECTED"],p=["FULFILLED"],E=["PENDING"];function w(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=E,this.queue=[],this.outcome=void 0,h!==o&&f(this,h)}function _(h,b,S){this.promise=h,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function d(h,b,S){n(function(){var C;try{C=b(S)}catch(B){return s.reject(h,B)}C===h?s.reject(h,new TypeError("Cannot resolve promise with itself")):s.resolve(h,C)})}function m(h){var b=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof b=="function")return function(){b.apply(h,arguments)}}function f(h,b){var S=!1;function C(x){S||(S=!0,s.reject(h,x))}function B(x){S||(S=!0,s.resolve(h,x))}var P=g(function(){b(B,C)});P.status==="error"&&C(P.value)}function g(h,b){var S={};try{S.value=h(b),S.status="success"}catch(C){S.status="error",S.value=C}return S}(i.exports=w).prototype.finally=function(h){if(typeof h!="function")return this;var b=this.constructor;return this.then(function(S){return b.resolve(h()).then(function(){return S})},function(S){return b.resolve(h()).then(function(){throw S})})},w.prototype.catch=function(h){return this.then(null,h)},w.prototype.then=function(h,b){if(typeof h!="function"&&this.state===p||typeof b!="function"&&this.state===l)return this;var S=new this.constructor(o);return this.state!==E?d(S,this.state===p?h:b,this.outcome):this.queue.push(new _(S,h,b)),S},_.prototype.callFulfilled=function(h){s.resolve(this.promise,h)},_.prototype.otherCallFulfilled=function(h){d(this.promise,this.onFulfilled,h)},_.prototype.callRejected=function(h){s.reject(this.promise,h)},_.prototype.otherCallRejected=function(h){d(this.promise,this.onRejected,h)},s.resolve=function(h,b){var S=g(m,b);if(S.status==="error")return s.reject(h,S.value);var C=S.value;if(C)f(h,C);else{h.state=p,h.outcome=b;for(var B=-1,P=h.queue.length;++B<P;)h.queue[B].callFulfilled(b)}return h},s.reject=function(h,b){h.state=l,h.outcome=b;for(var S=-1,C=h.queue.length;++S<C;)h.queue[S].callRejected(b);return h},w.resolve=function(h){return h instanceof this?h:s.resolve(new this(o),h)},w.reject=function(h){var b=new this(o);return s.reject(b,h)},w.all=function(h){var b=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=h.length,C=!1;if(!S)return this.resolve([]);for(var B=new Array(S),P=0,x=-1,z=new this(o);++x<S;)k(h[x],x);return z;function k(L,W){b.resolve(L).then(function(v){B[W]=v,++P!==S||C||(C=!0,s.resolve(z,B))},function(v){C||(C=!0,s.reject(z,v))})}},w.race=function(h){var b=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=h.length,C=!1;if(!S)return this.resolve([]);for(var B=-1,P=new this(o);++B<S;)x=h[B],b.resolve(x).then(function(z){C||(C=!0,s.resolve(P,z))},function(z){C||(C=!0,s.reject(P,z))});var x;return P}},{immediate:36}],38:[function(e,i,a){var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),i.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,i,a){var n=e("./zlib/deflate"),o=e("./utils/common"),s=e("./utils/strings"),l=e("./zlib/messages"),p=e("./zlib/zstream"),E=Object.prototype.toString,w=0,_=-1,d=0,m=8;function f(h){if(!(this instanceof f))return new f(h);this.options=o.assign({level:_,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},h||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var S=n.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(S!==w)throw new Error(l[S]);if(b.header&&n.deflateSetHeader(this.strm,b.header),b.dictionary){var C;if(C=typeof b.dictionary=="string"?s.string2buf(b.dictionary):E.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(S=n.deflateSetDictionary(this.strm,C))!==w)throw new Error(l[S]);this._dict_set=!0}}function g(h,b){var S=new f(b);if(S.push(h,!0),S.err)throw S.msg||l[S.err];return S.result}f.prototype.push=function(h,b){var S,C,B=this.strm,P=this.options.chunkSize;if(this.ended)return!1;C=b===~~b?b:b===!0?4:0,typeof h=="string"?B.input=s.string2buf(h):E.call(h)==="[object ArrayBuffer]"?B.input=new Uint8Array(h):B.input=h,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new o.Buf8(P),B.next_out=0,B.avail_out=P),(S=n.deflate(B,C))!==1&&S!==w)return this.onEnd(S),!(this.ended=!0);B.avail_out!==0&&(B.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(B.output,B.next_out))):this.onData(o.shrinkBuf(B.output,B.next_out)))}while((0<B.avail_in||B.avail_out===0)&&S!==1);return C===4?(S=n.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===w):C!==2||(this.onEnd(w),!(B.avail_out=0))},f.prototype.onData=function(h){this.chunks.push(h)},f.prototype.onEnd=function(h){h===w&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},a.Deflate=f,a.deflate=g,a.deflateRaw=function(h,b){return(b=b||{}).raw=!0,g(h,b)},a.gzip=function(h,b){return(b=b||{}).gzip=!0,g(h,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,i,a){var n=e("./zlib/inflate"),o=e("./utils/common"),s=e("./utils/strings"),l=e("./zlib/constants"),p=e("./zlib/messages"),E=e("./zlib/zstream"),w=e("./zlib/gzheader"),_=Object.prototype.toString;function d(f){if(!(this instanceof d))return new d(f);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},f||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||f&&f.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&(15&g.windowBits)==0&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new E,this.strm.avail_out=0;var h=n.inflateInit2(this.strm,g.windowBits);if(h!==l.Z_OK)throw new Error(p[h]);this.header=new w,n.inflateGetHeader(this.strm,this.header)}function m(f,g){var h=new d(g);if(h.push(f,!0),h.err)throw h.msg||p[h.err];return h.result}d.prototype.push=function(f,g){var h,b,S,C,B,P,x=this.strm,z=this.options.chunkSize,k=this.options.dictionary,L=!1;if(this.ended)return!1;b=g===~~g?g:g===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof f=="string"?x.input=s.binstring2buf(f):_.call(f)==="[object ArrayBuffer]"?x.input=new Uint8Array(f):x.input=f,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new o.Buf8(z),x.next_out=0,x.avail_out=z),(h=n.inflate(x,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&k&&(P=typeof k=="string"?s.string2buf(k):_.call(k)==="[object ArrayBuffer]"?new Uint8Array(k):k,h=n.inflateSetDictionary(this.strm,P)),h===l.Z_BUF_ERROR&&L===!0&&(h=l.Z_OK,L=!1),h!==l.Z_STREAM_END&&h!==l.Z_OK)return this.onEnd(h),!(this.ended=!0);x.next_out&&(x.avail_out!==0&&h!==l.Z_STREAM_END&&(x.avail_in!==0||b!==l.Z_FINISH&&b!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=s.utf8border(x.output,x.next_out),C=x.next_out-S,B=s.buf2string(x.output,S),x.next_out=C,x.avail_out=z-C,C&&o.arraySet(x.output,x.output,S,C,0),this.onData(B)):this.onData(o.shrinkBuf(x.output,x.next_out)))),x.avail_in===0&&x.avail_out===0&&(L=!0)}while((0<x.avail_in||x.avail_out===0)&&h!==l.Z_STREAM_END);return h===l.Z_STREAM_END&&(b=l.Z_FINISH),b===l.Z_FINISH?(h=n.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===l.Z_OK):b!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(x.avail_out=0))},d.prototype.onData=function(f){this.chunks.push(f)},d.prototype.onEnd=function(f){f===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},a.Inflate=d,a.inflate=m,a.inflateRaw=function(f,g){return(g=g||{}).raw=!0,m(f,g)},a.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,i,a){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(l){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var E=p.shift();if(E){if(typeof E!="object")throw new TypeError(E+"must be non-object");for(var w in E)E.hasOwnProperty(w)&&(l[w]=E[w])}}return l},a.shrinkBuf=function(l,p){return l.length===p?l:l.subarray?l.subarray(0,p):(l.length=p,l)};var o={arraySet:function(l,p,E,w,_){if(p.subarray&&l.subarray)l.set(p.subarray(E,E+w),_);else for(var d=0;d<w;d++)l[_+d]=p[E+d]},flattenChunks:function(l){var p,E,w,_,d,m;for(p=w=0,E=l.length;p<E;p++)w+=l[p].length;for(m=new Uint8Array(w),p=_=0,E=l.length;p<E;p++)d=l[p],m.set(d,_),_+=d.length;return m}},s={arraySet:function(l,p,E,w,_){for(var d=0;d<w;d++)l[_+d]=p[E+d]},flattenChunks:function(l){return[].concat.apply([],l)}};a.setTyped=function(l){l?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,s))},a.setTyped(n)},{}],42:[function(e,i,a){var n=e("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var l=new n.Buf8(256),p=0;p<256;p++)l[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function E(w,_){if(_<65537&&(w.subarray&&s||!w.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(w,_));for(var d="",m=0;m<_;m++)d+=String.fromCharCode(w[m]);return d}l[254]=l[254]=1,a.string2buf=function(w){var _,d,m,f,g,h=w.length,b=0;for(f=0;f<h;f++)(64512&(d=w.charCodeAt(f)))==55296&&f+1<h&&(64512&(m=w.charCodeAt(f+1)))==56320&&(d=65536+(d-55296<<10)+(m-56320),f++),b+=d<128?1:d<2048?2:d<65536?3:4;for(_=new n.Buf8(b),f=g=0;g<b;f++)(64512&(d=w.charCodeAt(f)))==55296&&f+1<h&&(64512&(m=w.charCodeAt(f+1)))==56320&&(d=65536+(d-55296<<10)+(m-56320),f++),d<128?_[g++]=d:(d<2048?_[g++]=192|d>>>6:(d<65536?_[g++]=224|d>>>12:(_[g++]=240|d>>>18,_[g++]=128|d>>>12&63),_[g++]=128|d>>>6&63),_[g++]=128|63&d);return _},a.buf2binstring=function(w){return E(w,w.length)},a.binstring2buf=function(w){for(var _=new n.Buf8(w.length),d=0,m=_.length;d<m;d++)_[d]=w.charCodeAt(d);return _},a.buf2string=function(w,_){var d,m,f,g,h=_||w.length,b=new Array(2*h);for(d=m=0;d<h;)if((f=w[d++])<128)b[m++]=f;else if(4<(g=l[f]))b[m++]=65533,d+=g-1;else{for(f&=g===2?31:g===3?15:7;1<g&&d<h;)f=f<<6|63&w[d++],g--;1<g?b[m++]=65533:f<65536?b[m++]=f:(f-=65536,b[m++]=55296|f>>10&1023,b[m++]=56320|1023&f)}return E(b,m)},a.utf8border=function(w,_){var d;for((_=_||w.length)>w.length&&(_=w.length),d=_-1;0<=d&&(192&w[d])==128;)d--;return d<0||d===0?_:d+l[w[d]]>_?d:_}},{"./common":41}],43:[function(e,i,a){i.exports=function(n,o,s,l){for(var p=65535&n|0,E=n>>>16&65535|0,w=0;s!==0;){for(s-=w=2e3<s?2e3:s;E=E+(p=p+o[l++]|0)|0,--w;);p%=65521,E%=65521}return p|E<<16|0}},{}],44:[function(e,i,a){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,i,a){var n=(function(){for(var o,s=[],l=0;l<256;l++){o=l;for(var p=0;p<8;p++)o=1&o?3988292384^o>>>1:o>>>1;s[l]=o}return s})();i.exports=function(o,s,l,p){var E=n,w=p+l;o^=-1;for(var _=p;_<w;_++)o=o>>>8^E[255&(o^s[_])];return-1^o}},{}],46:[function(e,i,a){var n,o=e("../utils/common"),s=e("./trees"),l=e("./adler32"),p=e("./crc32"),E=e("./messages"),w=0,_=4,d=0,m=-2,f=-1,g=4,h=2,b=8,S=9,C=286,B=30,P=19,x=2*C+1,z=15,k=3,L=258,W=L+k+1,v=42,I=113,u=1,F=2,nt=3,J=4;function at(c,N){return c.msg=E[N],N}function G(c){return(c<<1)-(4<c?9:0)}function et(c){for(var N=c.length;0<=--N;)c[N]=0}function D(c){var N=c.state,M=N.pending;M>c.avail_out&&(M=c.avail_out),M!==0&&(o.arraySet(c.output,N.pending_buf,N.pending_out,M,c.next_out),c.next_out+=M,N.pending_out+=M,c.total_out+=M,c.avail_out-=M,N.pending-=M,N.pending===0&&(N.pending_out=0))}function O(c,N){s._tr_flush_block(c,0<=c.block_start?c.block_start:-1,c.strstart-c.block_start,N),c.block_start=c.strstart,D(c.strm)}function j(c,N){c.pending_buf[c.pending++]=N}function Z(c,N){c.pending_buf[c.pending++]=N>>>8&255,c.pending_buf[c.pending++]=255&N}function V(c,N){var M,A,y=c.max_chain_length,T=c.strstart,U=c.prev_length,H=c.nice_match,R=c.strstart>c.w_size-W?c.strstart-(c.w_size-W):0,$=c.window,Y=c.w_mask,q=c.prev,Q=c.strstart+L,ut=$[T+U-1],ot=$[T+U];c.prev_length>=c.good_match&&(y>>=2),H>c.lookahead&&(H=c.lookahead);do if($[(M=N)+U]===ot&&$[M+U-1]===ut&&$[M]===$[T]&&$[++M]===$[T+1]){T+=2,M++;do;while($[++T]===$[++M]&&$[++T]===$[++M]&&$[++T]===$[++M]&&$[++T]===$[++M]&&$[++T]===$[++M]&&$[++T]===$[++M]&&$[++T]===$[++M]&&$[++T]===$[++M]&&T<Q);if(A=L-(Q-T),T=Q-L,U<A){if(c.match_start=N,H<=(U=A))break;ut=$[T+U-1],ot=$[T+U]}}while((N=q[N&Y])>R&&--y!=0);return U<=c.lookahead?U:c.lookahead}function dt(c){var N,M,A,y,T,U,H,R,$,Y,q=c.w_size;do{if(y=c.window_size-c.lookahead-c.strstart,c.strstart>=q+(q-W)){for(o.arraySet(c.window,c.window,q,q,0),c.match_start-=q,c.strstart-=q,c.block_start-=q,N=M=c.hash_size;A=c.head[--N],c.head[N]=q<=A?A-q:0,--M;);for(N=M=q;A=c.prev[--N],c.prev[N]=q<=A?A-q:0,--M;);y+=q}if(c.strm.avail_in===0)break;if(U=c.strm,H=c.window,R=c.strstart+c.lookahead,$=y,Y=void 0,Y=U.avail_in,$<Y&&(Y=$),M=Y===0?0:(U.avail_in-=Y,o.arraySet(H,U.input,U.next_in,Y,R),U.state.wrap===1?U.adler=l(U.adler,H,Y,R):U.state.wrap===2&&(U.adler=p(U.adler,H,Y,R)),U.next_in+=Y,U.total_in+=Y,Y),c.lookahead+=M,c.lookahead+c.insert>=k)for(T=c.strstart-c.insert,c.ins_h=c.window[T],c.ins_h=(c.ins_h<<c.hash_shift^c.window[T+1])&c.hash_mask;c.insert&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[T+k-1])&c.hash_mask,c.prev[T&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=T,T++,c.insert--,!(c.lookahead+c.insert<k)););}while(c.lookahead<W&&c.strm.avail_in!==0)}function lt(c,N){for(var M,A;;){if(c.lookahead<W){if(dt(c),c.lookahead<W&&N===w)return u;if(c.lookahead===0)break}if(M=0,c.lookahead>=k&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+k-1])&c.hash_mask,M=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),M!==0&&c.strstart-M<=c.w_size-W&&(c.match_length=V(c,M)),c.match_length>=k)if(A=s._tr_tally(c,c.strstart-c.match_start,c.match_length-k),c.lookahead-=c.match_length,c.match_length<=c.max_lazy_match&&c.lookahead>=k){for(c.match_length--;c.strstart++,c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+k-1])&c.hash_mask,M=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart,--c.match_length!=0;);c.strstart++}else c.strstart+=c.match_length,c.match_length=0,c.ins_h=c.window[c.strstart],c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+1])&c.hash_mask;else A=s._tr_tally(c,0,c.window[c.strstart]),c.lookahead--,c.strstart++;if(A&&(O(c,!1),c.strm.avail_out===0))return u}return c.insert=c.strstart<k-1?c.strstart:k-1,N===_?(O(c,!0),c.strm.avail_out===0?nt:J):c.last_lit&&(O(c,!1),c.strm.avail_out===0)?u:F}function it(c,N){for(var M,A,y;;){if(c.lookahead<W){if(dt(c),c.lookahead<W&&N===w)return u;if(c.lookahead===0)break}if(M=0,c.lookahead>=k&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+k-1])&c.hash_mask,M=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),c.prev_length=c.match_length,c.prev_match=c.match_start,c.match_length=k-1,M!==0&&c.prev_length<c.max_lazy_match&&c.strstart-M<=c.w_size-W&&(c.match_length=V(c,M),c.match_length<=5&&(c.strategy===1||c.match_length===k&&4096<c.strstart-c.match_start)&&(c.match_length=k-1)),c.prev_length>=k&&c.match_length<=c.prev_length){for(y=c.strstart+c.lookahead-k,A=s._tr_tally(c,c.strstart-1-c.prev_match,c.prev_length-k),c.lookahead-=c.prev_length-1,c.prev_length-=2;++c.strstart<=y&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+k-1])&c.hash_mask,M=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),--c.prev_length!=0;);if(c.match_available=0,c.match_length=k-1,c.strstart++,A&&(O(c,!1),c.strm.avail_out===0))return u}else if(c.match_available){if((A=s._tr_tally(c,0,c.window[c.strstart-1]))&&O(c,!1),c.strstart++,c.lookahead--,c.strm.avail_out===0)return u}else c.match_available=1,c.strstart++,c.lookahead--}return c.match_available&&(A=s._tr_tally(c,0,c.window[c.strstart-1]),c.match_available=0),c.insert=c.strstart<k-1?c.strstart:k-1,N===_?(O(c,!0),c.strm.avail_out===0?nt:J):c.last_lit&&(O(c,!1),c.strm.avail_out===0)?u:F}function st(c,N,M,A,y){this.good_length=c,this.max_lazy=N,this.nice_length=M,this.max_chain=A,this.func=y}function ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*x),this.dyn_dtree=new o.Buf16(2*(2*B+1)),this.bl_tree=new o.Buf16(2*(2*P+1)),et(this.dyn_ltree),et(this.dyn_dtree),et(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(z+1),this.heap=new o.Buf16(2*C+1),et(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),et(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function pt(c){var N;return c&&c.state?(c.total_in=c.total_out=0,c.data_type=h,(N=c.state).pending=0,N.pending_out=0,N.wrap<0&&(N.wrap=-N.wrap),N.status=N.wrap?v:I,c.adler=N.wrap===2?0:1,N.last_flush=w,s._tr_init(N),d):at(c,m)}function Et(c){var N=pt(c);return N===d&&(function(M){M.window_size=2*M.w_size,et(M.head),M.max_lazy_match=n[M.level].max_lazy,M.good_match=n[M.level].good_length,M.nice_match=n[M.level].nice_length,M.max_chain_length=n[M.level].max_chain,M.strstart=0,M.block_start=0,M.lookahead=0,M.insert=0,M.match_length=M.prev_length=k-1,M.match_available=0,M.ins_h=0})(c.state),N}function bt(c,N,M,A,y,T){if(!c)return m;var U=1;if(N===f&&(N=6),A<0?(U=0,A=-A):15<A&&(U=2,A-=16),y<1||S<y||M!==b||A<8||15<A||N<0||9<N||T<0||g<T)return at(c,m);A===8&&(A=9);var H=new ft;return(c.state=H).strm=c,H.wrap=U,H.gzhead=null,H.w_bits=A,H.w_size=1<<H.w_bits,H.w_mask=H.w_size-1,H.hash_bits=y+7,H.hash_size=1<<H.hash_bits,H.hash_mask=H.hash_size-1,H.hash_shift=~~((H.hash_bits+k-1)/k),H.window=new o.Buf8(2*H.w_size),H.head=new o.Buf16(H.hash_size),H.prev=new o.Buf16(H.w_size),H.lit_bufsize=1<<y+6,H.pending_buf_size=4*H.lit_bufsize,H.pending_buf=new o.Buf8(H.pending_buf_size),H.d_buf=1*H.lit_bufsize,H.l_buf=3*H.lit_bufsize,H.level=N,H.strategy=T,H.method=M,Et(c)}n=[new st(0,0,0,0,function(c,N){var M=65535;for(M>c.pending_buf_size-5&&(M=c.pending_buf_size-5);;){if(c.lookahead<=1){if(dt(c),c.lookahead===0&&N===w)return u;if(c.lookahead===0)break}c.strstart+=c.lookahead,c.lookahead=0;var A=c.block_start+M;if((c.strstart===0||c.strstart>=A)&&(c.lookahead=c.strstart-A,c.strstart=A,O(c,!1),c.strm.avail_out===0)||c.strstart-c.block_start>=c.w_size-W&&(O(c,!1),c.strm.avail_out===0))return u}return c.insert=0,N===_?(O(c,!0),c.strm.avail_out===0?nt:J):(c.strstart>c.block_start&&(O(c,!1),c.strm.avail_out),u)}),new st(4,4,8,4,lt),new st(4,5,16,8,lt),new st(4,6,32,32,lt),new st(4,4,16,16,it),new st(8,16,32,32,it),new st(8,16,128,128,it),new st(8,32,128,256,it),new st(32,128,258,1024,it),new st(32,258,258,4096,it)],a.deflateInit=function(c,N){return bt(c,N,b,15,8,0)},a.deflateInit2=bt,a.deflateReset=Et,a.deflateResetKeep=pt,a.deflateSetHeader=function(c,N){return c&&c.state?c.state.wrap!==2?m:(c.state.gzhead=N,d):m},a.deflate=function(c,N){var M,A,y,T;if(!c||!c.state||5<N||N<0)return c?at(c,m):m;if(A=c.state,!c.output||!c.input&&c.avail_in!==0||A.status===666&&N!==_)return at(c,c.avail_out===0?-5:m);if(A.strm=c,M=A.last_flush,A.last_flush=N,A.status===v)if(A.wrap===2)c.adler=0,j(A,31),j(A,139),j(A,8),A.gzhead?(j(A,(A.gzhead.text?1:0)+(A.gzhead.hcrc?2:0)+(A.gzhead.extra?4:0)+(A.gzhead.name?8:0)+(A.gzhead.comment?16:0)),j(A,255&A.gzhead.time),j(A,A.gzhead.time>>8&255),j(A,A.gzhead.time>>16&255),j(A,A.gzhead.time>>24&255),j(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),j(A,255&A.gzhead.os),A.gzhead.extra&&A.gzhead.extra.length&&(j(A,255&A.gzhead.extra.length),j(A,A.gzhead.extra.length>>8&255)),A.gzhead.hcrc&&(c.adler=p(c.adler,A.pending_buf,A.pending,0)),A.gzindex=0,A.status=69):(j(A,0),j(A,0),j(A,0),j(A,0),j(A,0),j(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),j(A,3),A.status=I);else{var U=b+(A.w_bits-8<<4)<<8;U|=(2<=A.strategy||A.level<2?0:A.level<6?1:A.level===6?2:3)<<6,A.strstart!==0&&(U|=32),U+=31-U%31,A.status=I,Z(A,U),A.strstart!==0&&(Z(A,c.adler>>>16),Z(A,65535&c.adler)),c.adler=1}if(A.status===69)if(A.gzhead.extra){for(y=A.pending;A.gzindex<(65535&A.gzhead.extra.length)&&(A.pending!==A.pending_buf_size||(A.gzhead.hcrc&&A.pending>y&&(c.adler=p(c.adler,A.pending_buf,A.pending-y,y)),D(c),y=A.pending,A.pending!==A.pending_buf_size));)j(A,255&A.gzhead.extra[A.gzindex]),A.gzindex++;A.gzhead.hcrc&&A.pending>y&&(c.adler=p(c.adler,A.pending_buf,A.pending-y,y)),A.gzindex===A.gzhead.extra.length&&(A.gzindex=0,A.status=73)}else A.status=73;if(A.status===73)if(A.gzhead.name){y=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>y&&(c.adler=p(c.adler,A.pending_buf,A.pending-y,y)),D(c),y=A.pending,A.pending===A.pending_buf_size)){T=1;break}T=A.gzindex<A.gzhead.name.length?255&A.gzhead.name.charCodeAt(A.gzindex++):0,j(A,T)}while(T!==0);A.gzhead.hcrc&&A.pending>y&&(c.adler=p(c.adler,A.pending_buf,A.pending-y,y)),T===0&&(A.gzindex=0,A.status=91)}else A.status=91;if(A.status===91)if(A.gzhead.comment){y=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>y&&(c.adler=p(c.adler,A.pending_buf,A.pending-y,y)),D(c),y=A.pending,A.pending===A.pending_buf_size)){T=1;break}T=A.gzindex<A.gzhead.comment.length?255&A.gzhead.comment.charCodeAt(A.gzindex++):0,j(A,T)}while(T!==0);A.gzhead.hcrc&&A.pending>y&&(c.adler=p(c.adler,A.pending_buf,A.pending-y,y)),T===0&&(A.status=103)}else A.status=103;if(A.status===103&&(A.gzhead.hcrc?(A.pending+2>A.pending_buf_size&&D(c),A.pending+2<=A.pending_buf_size&&(j(A,255&c.adler),j(A,c.adler>>8&255),c.adler=0,A.status=I)):A.status=I),A.pending!==0){if(D(c),c.avail_out===0)return A.last_flush=-1,d}else if(c.avail_in===0&&G(N)<=G(M)&&N!==_)return at(c,-5);if(A.status===666&&c.avail_in!==0)return at(c,-5);if(c.avail_in!==0||A.lookahead!==0||N!==w&&A.status!==666){var H=A.strategy===2?(function(R,$){for(var Y;;){if(R.lookahead===0&&(dt(R),R.lookahead===0)){if($===w)return u;break}if(R.match_length=0,Y=s._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++,Y&&(O(R,!1),R.strm.avail_out===0))return u}return R.insert=0,$===_?(O(R,!0),R.strm.avail_out===0?nt:J):R.last_lit&&(O(R,!1),R.strm.avail_out===0)?u:F})(A,N):A.strategy===3?(function(R,$){for(var Y,q,Q,ut,ot=R.window;;){if(R.lookahead<=L){if(dt(R),R.lookahead<=L&&$===w)return u;if(R.lookahead===0)break}if(R.match_length=0,R.lookahead>=k&&0<R.strstart&&(q=ot[Q=R.strstart-1])===ot[++Q]&&q===ot[++Q]&&q===ot[++Q]){ut=R.strstart+L;do;while(q===ot[++Q]&&q===ot[++Q]&&q===ot[++Q]&&q===ot[++Q]&&q===ot[++Q]&&q===ot[++Q]&&q===ot[++Q]&&q===ot[++Q]&&Q<ut);R.match_length=L-(ut-Q),R.match_length>R.lookahead&&(R.match_length=R.lookahead)}if(R.match_length>=k?(Y=s._tr_tally(R,1,R.match_length-k),R.lookahead-=R.match_length,R.strstart+=R.match_length,R.match_length=0):(Y=s._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++),Y&&(O(R,!1),R.strm.avail_out===0))return u}return R.insert=0,$===_?(O(R,!0),R.strm.avail_out===0?nt:J):R.last_lit&&(O(R,!1),R.strm.avail_out===0)?u:F})(A,N):n[A.level].func(A,N);if(H!==nt&&H!==J||(A.status=666),H===u||H===nt)return c.avail_out===0&&(A.last_flush=-1),d;if(H===F&&(N===1?s._tr_align(A):N!==5&&(s._tr_stored_block(A,0,0,!1),N===3&&(et(A.head),A.lookahead===0&&(A.strstart=0,A.block_start=0,A.insert=0))),D(c),c.avail_out===0))return A.last_flush=-1,d}return N!==_?d:A.wrap<=0?1:(A.wrap===2?(j(A,255&c.adler),j(A,c.adler>>8&255),j(A,c.adler>>16&255),j(A,c.adler>>24&255),j(A,255&c.total_in),j(A,c.total_in>>8&255),j(A,c.total_in>>16&255),j(A,c.total_in>>24&255)):(Z(A,c.adler>>>16),Z(A,65535&c.adler)),D(c),0<A.wrap&&(A.wrap=-A.wrap),A.pending!==0?d:1)},a.deflateEnd=function(c){var N;return c&&c.state?(N=c.state.status)!==v&&N!==69&&N!==73&&N!==91&&N!==103&&N!==I&&N!==666?at(c,m):(c.state=null,N===I?at(c,-3):d):m},a.deflateSetDictionary=function(c,N){var M,A,y,T,U,H,R,$,Y=N.length;if(!c||!c.state||(T=(M=c.state).wrap)===2||T===1&&M.status!==v||M.lookahead)return m;for(T===1&&(c.adler=l(c.adler,N,Y,0)),M.wrap=0,Y>=M.w_size&&(T===0&&(et(M.head),M.strstart=0,M.block_start=0,M.insert=0),$=new o.Buf8(M.w_size),o.arraySet($,N,Y-M.w_size,M.w_size,0),N=$,Y=M.w_size),U=c.avail_in,H=c.next_in,R=c.input,c.avail_in=Y,c.next_in=0,c.input=N,dt(M);M.lookahead>=k;){for(A=M.strstart,y=M.lookahead-(k-1);M.ins_h=(M.ins_h<<M.hash_shift^M.window[A+k-1])&M.hash_mask,M.prev[A&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=A,A++,--y;);M.strstart=A,M.lookahead=k-1,dt(M)}return M.strstart+=M.lookahead,M.block_start=M.strstart,M.insert=M.lookahead,M.lookahead=0,M.match_length=M.prev_length=k-1,M.match_available=0,c.next_in=H,c.input=R,c.avail_in=U,M.wrap=T,d},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,i,a){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,i,a){i.exports=function(n,o){var s,l,p,E,w,_,d,m,f,g,h,b,S,C,B,P,x,z,k,L,W,v,I,u,F;s=n.state,l=n.next_in,u=n.input,p=l+(n.avail_in-5),E=n.next_out,F=n.output,w=E-(o-n.avail_out),_=E+(n.avail_out-257),d=s.dmax,m=s.wsize,f=s.whave,g=s.wnext,h=s.window,b=s.hold,S=s.bits,C=s.lencode,B=s.distcode,P=(1<<s.lenbits)-1,x=(1<<s.distbits)-1;t:do{S<15&&(b+=u[l++]<<S,S+=8,b+=u[l++]<<S,S+=8),z=C[b&P];e:for(;;){if(b>>>=k=z>>>24,S-=k,(k=z>>>16&255)===0)F[E++]=65535&z;else{if(!(16&k)){if((64&k)==0){z=C[(65535&z)+(b&(1<<k)-1)];continue e}if(32&k){s.mode=12;break t}n.msg="invalid literal/length code",s.mode=30;break t}L=65535&z,(k&=15)&&(S<k&&(b+=u[l++]<<S,S+=8),L+=b&(1<<k)-1,b>>>=k,S-=k),S<15&&(b+=u[l++]<<S,S+=8,b+=u[l++]<<S,S+=8),z=B[b&x];r:for(;;){if(b>>>=k=z>>>24,S-=k,!(16&(k=z>>>16&255))){if((64&k)==0){z=B[(65535&z)+(b&(1<<k)-1)];continue r}n.msg="invalid distance code",s.mode=30;break t}if(W=65535&z,S<(k&=15)&&(b+=u[l++]<<S,(S+=8)<k&&(b+=u[l++]<<S,S+=8)),d<(W+=b&(1<<k)-1)){n.msg="invalid distance too far back",s.mode=30;break t}if(b>>>=k,S-=k,(k=E-w)<W){if(f<(k=W-k)&&s.sane){n.msg="invalid distance too far back",s.mode=30;break t}if(I=h,(v=0)===g){if(v+=m-k,k<L){for(L-=k;F[E++]=h[v++],--k;);v=E-W,I=F}}else if(g<k){if(v+=m+g-k,(k-=g)<L){for(L-=k;F[E++]=h[v++],--k;);if(v=0,g<L){for(L-=k=g;F[E++]=h[v++],--k;);v=E-W,I=F}}}else if(v+=g-k,k<L){for(L-=k;F[E++]=h[v++],--k;);v=E-W,I=F}for(;2<L;)F[E++]=I[v++],F[E++]=I[v++],F[E++]=I[v++],L-=3;L&&(F[E++]=I[v++],1<L&&(F[E++]=I[v++]))}else{for(v=E-W;F[E++]=F[v++],F[E++]=F[v++],F[E++]=F[v++],2<(L-=3););L&&(F[E++]=F[v++],1<L&&(F[E++]=F[v++]))}break}}break}}while(l<p&&E<_);l-=L=S>>3,b&=(1<<(S-=L<<3))-1,n.next_in=l,n.next_out=E,n.avail_in=l<p?p-l+5:5-(l-p),n.avail_out=E<_?_-E+257:257-(E-_),s.hold=b,s.bits=S}},{}],49:[function(e,i,a){var n=e("../utils/common"),o=e("./adler32"),s=e("./crc32"),l=e("./inffast"),p=e("./inftrees"),E=1,w=2,_=0,d=-2,m=1,f=852,g=592;function h(v){return(v>>>24&255)+(v>>>8&65280)+((65280&v)<<8)+((255&v)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(v){var I;return v&&v.state?(I=v.state,v.total_in=v.total_out=I.total=0,v.msg="",I.wrap&&(v.adler=1&I.wrap),I.mode=m,I.last=0,I.havedict=0,I.dmax=32768,I.head=null,I.hold=0,I.bits=0,I.lencode=I.lendyn=new n.Buf32(f),I.distcode=I.distdyn=new n.Buf32(g),I.sane=1,I.back=-1,_):d}function C(v){var I;return v&&v.state?((I=v.state).wsize=0,I.whave=0,I.wnext=0,S(v)):d}function B(v,I){var u,F;return v&&v.state?(F=v.state,I<0?(u=0,I=-I):(u=1+(I>>4),I<48&&(I&=15)),I&&(I<8||15<I)?d:(F.window!==null&&F.wbits!==I&&(F.window=null),F.wrap=u,F.wbits=I,C(v))):d}function P(v,I){var u,F;return v?(F=new b,(v.state=F).window=null,(u=B(v,I))!==_&&(v.state=null),u):d}var x,z,k=!0;function L(v){if(k){var I;for(x=new n.Buf32(512),z=new n.Buf32(32),I=0;I<144;)v.lens[I++]=8;for(;I<256;)v.lens[I++]=9;for(;I<280;)v.lens[I++]=7;for(;I<288;)v.lens[I++]=8;for(p(E,v.lens,0,288,x,0,v.work,{bits:9}),I=0;I<32;)v.lens[I++]=5;p(w,v.lens,0,32,z,0,v.work,{bits:5}),k=!1}v.lencode=x,v.lenbits=9,v.distcode=z,v.distbits=5}function W(v,I,u,F){var nt,J=v.state;return J.window===null&&(J.wsize=1<<J.wbits,J.wnext=0,J.whave=0,J.window=new n.Buf8(J.wsize)),F>=J.wsize?(n.arraySet(J.window,I,u-J.wsize,J.wsize,0),J.wnext=0,J.whave=J.wsize):(F<(nt=J.wsize-J.wnext)&&(nt=F),n.arraySet(J.window,I,u-F,nt,J.wnext),(F-=nt)?(n.arraySet(J.window,I,u-F,F,0),J.wnext=F,J.whave=J.wsize):(J.wnext+=nt,J.wnext===J.wsize&&(J.wnext=0),J.whave<J.wsize&&(J.whave+=nt))),0}a.inflateReset=C,a.inflateReset2=B,a.inflateResetKeep=S,a.inflateInit=function(v){return P(v,15)},a.inflateInit2=P,a.inflate=function(v,I){var u,F,nt,J,at,G,et,D,O,j,Z,V,dt,lt,it,st,ft,pt,Et,bt,c,N,M,A,y=0,T=new n.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!v||!v.state||!v.output||!v.input&&v.avail_in!==0)return d;(u=v.state).mode===12&&(u.mode=13),at=v.next_out,nt=v.output,et=v.avail_out,J=v.next_in,F=v.input,G=v.avail_in,D=u.hold,O=u.bits,j=G,Z=et,N=_;t:for(;;)switch(u.mode){case m:if(u.wrap===0){u.mode=13;break}for(;O<16;){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}if(2&u.wrap&&D===35615){T[u.check=0]=255&D,T[1]=D>>>8&255,u.check=s(u.check,T,2,0),O=D=0,u.mode=2;break}if(u.flags=0,u.head&&(u.head.done=!1),!(1&u.wrap)||(((255&D)<<8)+(D>>8))%31){v.msg="incorrect header check",u.mode=30;break}if((15&D)!=8){v.msg="unknown compression method",u.mode=30;break}if(O-=4,c=8+(15&(D>>>=4)),u.wbits===0)u.wbits=c;else if(c>u.wbits){v.msg="invalid window size",u.mode=30;break}u.dmax=1<<c,v.adler=u.check=1,u.mode=512&D?10:12,O=D=0;break;case 2:for(;O<16;){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}if(u.flags=D,(255&u.flags)!=8){v.msg="unknown compression method",u.mode=30;break}if(57344&u.flags){v.msg="unknown header flags set",u.mode=30;break}u.head&&(u.head.text=D>>8&1),512&u.flags&&(T[0]=255&D,T[1]=D>>>8&255,u.check=s(u.check,T,2,0)),O=D=0,u.mode=3;case 3:for(;O<32;){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}u.head&&(u.head.time=D),512&u.flags&&(T[0]=255&D,T[1]=D>>>8&255,T[2]=D>>>16&255,T[3]=D>>>24&255,u.check=s(u.check,T,4,0)),O=D=0,u.mode=4;case 4:for(;O<16;){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}u.head&&(u.head.xflags=255&D,u.head.os=D>>8),512&u.flags&&(T[0]=255&D,T[1]=D>>>8&255,u.check=s(u.check,T,2,0)),O=D=0,u.mode=5;case 5:if(1024&u.flags){for(;O<16;){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}u.length=D,u.head&&(u.head.extra_len=D),512&u.flags&&(T[0]=255&D,T[1]=D>>>8&255,u.check=s(u.check,T,2,0)),O=D=0}else u.head&&(u.head.extra=null);u.mode=6;case 6:if(1024&u.flags&&(G<(V=u.length)&&(V=G),V&&(u.head&&(c=u.head.extra_len-u.length,u.head.extra||(u.head.extra=new Array(u.head.extra_len)),n.arraySet(u.head.extra,F,J,V,c)),512&u.flags&&(u.check=s(u.check,F,V,J)),G-=V,J+=V,u.length-=V),u.length))break t;u.length=0,u.mode=7;case 7:if(2048&u.flags){if(G===0)break t;for(V=0;c=F[J+V++],u.head&&c&&u.length<65536&&(u.head.name+=String.fromCharCode(c)),c&&V<G;);if(512&u.flags&&(u.check=s(u.check,F,V,J)),G-=V,J+=V,c)break t}else u.head&&(u.head.name=null);u.length=0,u.mode=8;case 8:if(4096&u.flags){if(G===0)break t;for(V=0;c=F[J+V++],u.head&&c&&u.length<65536&&(u.head.comment+=String.fromCharCode(c)),c&&V<G;);if(512&u.flags&&(u.check=s(u.check,F,V,J)),G-=V,J+=V,c)break t}else u.head&&(u.head.comment=null);u.mode=9;case 9:if(512&u.flags){for(;O<16;){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}if(D!==(65535&u.check)){v.msg="header crc mismatch",u.mode=30;break}O=D=0}u.head&&(u.head.hcrc=u.flags>>9&1,u.head.done=!0),v.adler=u.check=0,u.mode=12;break;case 10:for(;O<32;){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}v.adler=u.check=h(D),O=D=0,u.mode=11;case 11:if(u.havedict===0)return v.next_out=at,v.avail_out=et,v.next_in=J,v.avail_in=G,u.hold=D,u.bits=O,2;v.adler=u.check=1,u.mode=12;case 12:if(I===5||I===6)break t;case 13:if(u.last){D>>>=7&O,O-=7&O,u.mode=27;break}for(;O<3;){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}switch(u.last=1&D,O-=1,3&(D>>>=1)){case 0:u.mode=14;break;case 1:if(L(u),u.mode=20,I!==6)break;D>>>=2,O-=2;break t;case 2:u.mode=17;break;case 3:v.msg="invalid block type",u.mode=30}D>>>=2,O-=2;break;case 14:for(D>>>=7&O,O-=7&O;O<32;){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}if((65535&D)!=(D>>>16^65535)){v.msg="invalid stored block lengths",u.mode=30;break}if(u.length=65535&D,O=D=0,u.mode=15,I===6)break t;case 15:u.mode=16;case 16:if(V=u.length){if(G<V&&(V=G),et<V&&(V=et),V===0)break t;n.arraySet(nt,F,J,V,at),G-=V,J+=V,et-=V,at+=V,u.length-=V;break}u.mode=12;break;case 17:for(;O<14;){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}if(u.nlen=257+(31&D),D>>>=5,O-=5,u.ndist=1+(31&D),D>>>=5,O-=5,u.ncode=4+(15&D),D>>>=4,O-=4,286<u.nlen||30<u.ndist){v.msg="too many length or distance symbols",u.mode=30;break}u.have=0,u.mode=18;case 18:for(;u.have<u.ncode;){for(;O<3;){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}u.lens[U[u.have++]]=7&D,D>>>=3,O-=3}for(;u.have<19;)u.lens[U[u.have++]]=0;if(u.lencode=u.lendyn,u.lenbits=7,M={bits:u.lenbits},N=p(0,u.lens,0,19,u.lencode,0,u.work,M),u.lenbits=M.bits,N){v.msg="invalid code lengths set",u.mode=30;break}u.have=0,u.mode=19;case 19:for(;u.have<u.nlen+u.ndist;){for(;st=(y=u.lencode[D&(1<<u.lenbits)-1])>>>16&255,ft=65535&y,!((it=y>>>24)<=O);){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}if(ft<16)D>>>=it,O-=it,u.lens[u.have++]=ft;else{if(ft===16){for(A=it+2;O<A;){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}if(D>>>=it,O-=it,u.have===0){v.msg="invalid bit length repeat",u.mode=30;break}c=u.lens[u.have-1],V=3+(3&D),D>>>=2,O-=2}else if(ft===17){for(A=it+3;O<A;){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}O-=it,c=0,V=3+(7&(D>>>=it)),D>>>=3,O-=3}else{for(A=it+7;O<A;){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}O-=it,c=0,V=11+(127&(D>>>=it)),D>>>=7,O-=7}if(u.have+V>u.nlen+u.ndist){v.msg="invalid bit length repeat",u.mode=30;break}for(;V--;)u.lens[u.have++]=c}}if(u.mode===30)break;if(u.lens[256]===0){v.msg="invalid code -- missing end-of-block",u.mode=30;break}if(u.lenbits=9,M={bits:u.lenbits},N=p(E,u.lens,0,u.nlen,u.lencode,0,u.work,M),u.lenbits=M.bits,N){v.msg="invalid literal/lengths set",u.mode=30;break}if(u.distbits=6,u.distcode=u.distdyn,M={bits:u.distbits},N=p(w,u.lens,u.nlen,u.ndist,u.distcode,0,u.work,M),u.distbits=M.bits,N){v.msg="invalid distances set",u.mode=30;break}if(u.mode=20,I===6)break t;case 20:u.mode=21;case 21:if(6<=G&&258<=et){v.next_out=at,v.avail_out=et,v.next_in=J,v.avail_in=G,u.hold=D,u.bits=O,l(v,Z),at=v.next_out,nt=v.output,et=v.avail_out,J=v.next_in,F=v.input,G=v.avail_in,D=u.hold,O=u.bits,u.mode===12&&(u.back=-1);break}for(u.back=0;st=(y=u.lencode[D&(1<<u.lenbits)-1])>>>16&255,ft=65535&y,!((it=y>>>24)<=O);){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}if(st&&(240&st)==0){for(pt=it,Et=st,bt=ft;st=(y=u.lencode[bt+((D&(1<<pt+Et)-1)>>pt)])>>>16&255,ft=65535&y,!(pt+(it=y>>>24)<=O);){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}D>>>=pt,O-=pt,u.back+=pt}if(D>>>=it,O-=it,u.back+=it,u.length=ft,st===0){u.mode=26;break}if(32&st){u.back=-1,u.mode=12;break}if(64&st){v.msg="invalid literal/length code",u.mode=30;break}u.extra=15&st,u.mode=22;case 22:if(u.extra){for(A=u.extra;O<A;){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}u.length+=D&(1<<u.extra)-1,D>>>=u.extra,O-=u.extra,u.back+=u.extra}u.was=u.length,u.mode=23;case 23:for(;st=(y=u.distcode[D&(1<<u.distbits)-1])>>>16&255,ft=65535&y,!((it=y>>>24)<=O);){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}if((240&st)==0){for(pt=it,Et=st,bt=ft;st=(y=u.distcode[bt+((D&(1<<pt+Et)-1)>>pt)])>>>16&255,ft=65535&y,!(pt+(it=y>>>24)<=O);){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}D>>>=pt,O-=pt,u.back+=pt}if(D>>>=it,O-=it,u.back+=it,64&st){v.msg="invalid distance code",u.mode=30;break}u.offset=ft,u.extra=15&st,u.mode=24;case 24:if(u.extra){for(A=u.extra;O<A;){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}u.offset+=D&(1<<u.extra)-1,D>>>=u.extra,O-=u.extra,u.back+=u.extra}if(u.offset>u.dmax){v.msg="invalid distance too far back",u.mode=30;break}u.mode=25;case 25:if(et===0)break t;if(V=Z-et,u.offset>V){if((V=u.offset-V)>u.whave&&u.sane){v.msg="invalid distance too far back",u.mode=30;break}dt=V>u.wnext?(V-=u.wnext,u.wsize-V):u.wnext-V,V>u.length&&(V=u.length),lt=u.window}else lt=nt,dt=at-u.offset,V=u.length;for(et<V&&(V=et),et-=V,u.length-=V;nt[at++]=lt[dt++],--V;);u.length===0&&(u.mode=21);break;case 26:if(et===0)break t;nt[at++]=u.length,et--,u.mode=21;break;case 27:if(u.wrap){for(;O<32;){if(G===0)break t;G--,D|=F[J++]<<O,O+=8}if(Z-=et,v.total_out+=Z,u.total+=Z,Z&&(v.adler=u.check=u.flags?s(u.check,nt,Z,at-Z):o(u.check,nt,Z,at-Z)),Z=et,(u.flags?D:h(D))!==u.check){v.msg="incorrect data check",u.mode=30;break}O=D=0}u.mode=28;case 28:if(u.wrap&&u.flags){for(;O<32;){if(G===0)break t;G--,D+=F[J++]<<O,O+=8}if(D!==(4294967295&u.total)){v.msg="incorrect length check",u.mode=30;break}O=D=0}u.mode=29;case 29:N=1;break t;case 30:N=-3;break t;case 31:return-4;case 32:default:return d}return v.next_out=at,v.avail_out=et,v.next_in=J,v.avail_in=G,u.hold=D,u.bits=O,(u.wsize||Z!==v.avail_out&&u.mode<30&&(u.mode<27||I!==4))&&W(v,v.output,v.next_out,Z-v.avail_out)?(u.mode=31,-4):(j-=v.avail_in,Z-=v.avail_out,v.total_in+=j,v.total_out+=Z,u.total+=Z,u.wrap&&Z&&(v.adler=u.check=u.flags?s(u.check,nt,Z,v.next_out-Z):o(u.check,nt,Z,v.next_out-Z)),v.data_type=u.bits+(u.last?64:0)+(u.mode===12?128:0)+(u.mode===20||u.mode===15?256:0),(j==0&&Z===0||I===4)&&N===_&&(N=-5),N)},a.inflateEnd=function(v){if(!v||!v.state)return d;var I=v.state;return I.window&&(I.window=null),v.state=null,_},a.inflateGetHeader=function(v,I){var u;return v&&v.state?(2&(u=v.state).wrap)==0?d:((u.head=I).done=!1,_):d},a.inflateSetDictionary=function(v,I){var u,F=I.length;return v&&v.state?(u=v.state).wrap!==0&&u.mode!==11?d:u.mode===11&&o(1,I,F,0)!==u.check?-3:W(v,I,F,F)?(u.mode=31,-4):(u.havedict=1,_):d},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,i,a){var n=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(E,w,_,d,m,f,g,h){var b,S,C,B,P,x,z,k,L,W=h.bits,v=0,I=0,u=0,F=0,nt=0,J=0,at=0,G=0,et=0,D=0,O=null,j=0,Z=new n.Buf16(16),V=new n.Buf16(16),dt=null,lt=0;for(v=0;v<=15;v++)Z[v]=0;for(I=0;I<d;I++)Z[w[_+I]]++;for(nt=W,F=15;1<=F&&Z[F]===0;F--);if(F<nt&&(nt=F),F===0)return m[f++]=20971520,m[f++]=20971520,h.bits=1,0;for(u=1;u<F&&Z[u]===0;u++);for(nt<u&&(nt=u),v=G=1;v<=15;v++)if(G<<=1,(G-=Z[v])<0)return-1;if(0<G&&(E===0||F!==1))return-1;for(V[1]=0,v=1;v<15;v++)V[v+1]=V[v]+Z[v];for(I=0;I<d;I++)w[_+I]!==0&&(g[V[w[_+I]]++]=I);if(x=E===0?(O=dt=g,19):E===1?(O=o,j-=257,dt=s,lt-=257,256):(O=l,dt=p,-1),v=u,P=f,at=I=D=0,C=-1,B=(et=1<<(J=nt))-1,E===1&&852<et||E===2&&592<et)return 1;for(;;){for(z=v-at,L=g[I]<x?(k=0,g[I]):g[I]>x?(k=dt[lt+g[I]],O[j+g[I]]):(k=96,0),b=1<<v-at,u=S=1<<J;m[P+(D>>at)+(S-=b)]=z<<24|k<<16|L|0,S!==0;);for(b=1<<v-1;D&b;)b>>=1;if(b!==0?(D&=b-1,D+=b):D=0,I++,--Z[v]==0){if(v===F)break;v=w[_+g[I]]}if(nt<v&&(D&B)!==C){for(at===0&&(at=nt),P+=u,G=1<<(J=v-at);J+at<F&&!((G-=Z[J+at])<=0);)J++,G<<=1;if(et+=1<<J,E===1&&852<et||E===2&&592<et)return 1;m[C=D&B]=nt<<24|J<<16|P-f|0}}return D!==0&&(m[P+D]=v-at<<24|64<<16|0),h.bits=nt,0}},{"../utils/common":41}],51:[function(e,i,a){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,i,a){var n=e("../utils/common"),o=0,s=1;function l(y){for(var T=y.length;0<=--T;)y[T]=0}var p=0,E=29,w=256,_=w+1+E,d=30,m=19,f=2*_+1,g=15,h=16,b=7,S=256,C=16,B=17,P=18,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=new Array(2*(_+2));l(W);var v=new Array(2*d);l(v);var I=new Array(512);l(I);var u=new Array(256);l(u);var F=new Array(E);l(F);var nt,J,at,G=new Array(d);function et(y,T,U,H,R){this.static_tree=y,this.extra_bits=T,this.extra_base=U,this.elems=H,this.max_length=R,this.has_stree=y&&y.length}function D(y,T){this.dyn_tree=y,this.max_code=0,this.stat_desc=T}function O(y){return y<256?I[y]:I[256+(y>>>7)]}function j(y,T){y.pending_buf[y.pending++]=255&T,y.pending_buf[y.pending++]=T>>>8&255}function Z(y,T,U){y.bi_valid>h-U?(y.bi_buf|=T<<y.bi_valid&65535,j(y,y.bi_buf),y.bi_buf=T>>h-y.bi_valid,y.bi_valid+=U-h):(y.bi_buf|=T<<y.bi_valid&65535,y.bi_valid+=U)}function V(y,T,U){Z(y,U[2*T],U[2*T+1])}function dt(y,T){for(var U=0;U|=1&y,y>>>=1,U<<=1,0<--T;);return U>>>1}function lt(y,T,U){var H,R,$=new Array(g+1),Y=0;for(H=1;H<=g;H++)$[H]=Y=Y+U[H-1]<<1;for(R=0;R<=T;R++){var q=y[2*R+1];q!==0&&(y[2*R]=dt($[q]++,q))}}function it(y){var T;for(T=0;T<_;T++)y.dyn_ltree[2*T]=0;for(T=0;T<d;T++)y.dyn_dtree[2*T]=0;for(T=0;T<m;T++)y.bl_tree[2*T]=0;y.dyn_ltree[2*S]=1,y.opt_len=y.static_len=0,y.last_lit=y.matches=0}function st(y){8<y.bi_valid?j(y,y.bi_buf):0<y.bi_valid&&(y.pending_buf[y.pending++]=y.bi_buf),y.bi_buf=0,y.bi_valid=0}function ft(y,T,U,H){var R=2*T,$=2*U;return y[R]<y[$]||y[R]===y[$]&&H[T]<=H[U]}function pt(y,T,U){for(var H=y.heap[U],R=U<<1;R<=y.heap_len&&(R<y.heap_len&&ft(T,y.heap[R+1],y.heap[R],y.depth)&&R++,!ft(T,H,y.heap[R],y.depth));)y.heap[U]=y.heap[R],U=R,R<<=1;y.heap[U]=H}function Et(y,T,U){var H,R,$,Y,q=0;if(y.last_lit!==0)for(;H=y.pending_buf[y.d_buf+2*q]<<8|y.pending_buf[y.d_buf+2*q+1],R=y.pending_buf[y.l_buf+q],q++,H===0?V(y,R,T):(V(y,($=u[R])+w+1,T),(Y=x[$])!==0&&Z(y,R-=F[$],Y),V(y,$=O(--H),U),(Y=z[$])!==0&&Z(y,H-=G[$],Y)),q<y.last_lit;);V(y,S,T)}function bt(y,T){var U,H,R,$=T.dyn_tree,Y=T.stat_desc.static_tree,q=T.stat_desc.has_stree,Q=T.stat_desc.elems,ut=-1;for(y.heap_len=0,y.heap_max=f,U=0;U<Q;U++)$[2*U]!==0?(y.heap[++y.heap_len]=ut=U,y.depth[U]=0):$[2*U+1]=0;for(;y.heap_len<2;)$[2*(R=y.heap[++y.heap_len]=ut<2?++ut:0)]=1,y.depth[R]=0,y.opt_len--,q&&(y.static_len-=Y[2*R+1]);for(T.max_code=ut,U=y.heap_len>>1;1<=U;U--)pt(y,$,U);for(R=Q;U=y.heap[1],y.heap[1]=y.heap[y.heap_len--],pt(y,$,1),H=y.heap[1],y.heap[--y.heap_max]=U,y.heap[--y.heap_max]=H,$[2*R]=$[2*U]+$[2*H],y.depth[R]=(y.depth[U]>=y.depth[H]?y.depth[U]:y.depth[H])+1,$[2*U+1]=$[2*H+1]=R,y.heap[1]=R++,pt(y,$,1),2<=y.heap_len;);y.heap[--y.heap_max]=y.heap[1],(function(ot,wt){var Ut,vt,Wt,mt,Zt,ae,Ct=wt.dyn_tree,$e=wt.max_code,en=wt.stat_desc.static_tree,rn=wt.stat_desc.has_stree,nn=wt.stat_desc.extra_bits,qe=wt.stat_desc.extra_base,Ht=wt.stat_desc.max_length,Yt=0;for(mt=0;mt<=g;mt++)ot.bl_count[mt]=0;for(Ct[2*ot.heap[ot.heap_max]+1]=0,Ut=ot.heap_max+1;Ut<f;Ut++)Ht<(mt=Ct[2*Ct[2*(vt=ot.heap[Ut])+1]+1]+1)&&(mt=Ht,Yt++),Ct[2*vt+1]=mt,$e<vt||(ot.bl_count[mt]++,Zt=0,qe<=vt&&(Zt=nn[vt-qe]),ae=Ct[2*vt],ot.opt_len+=ae*(mt+Zt),rn&&(ot.static_len+=ae*(en[2*vt+1]+Zt)));if(Yt!==0){do{for(mt=Ht-1;ot.bl_count[mt]===0;)mt--;ot.bl_count[mt]--,ot.bl_count[mt+1]+=2,ot.bl_count[Ht]--,Yt-=2}while(0<Yt);for(mt=Ht;mt!==0;mt--)for(vt=ot.bl_count[mt];vt!==0;)$e<(Wt=ot.heap[--Ut])||(Ct[2*Wt+1]!==mt&&(ot.opt_len+=(mt-Ct[2*Wt+1])*Ct[2*Wt],Ct[2*Wt+1]=mt),vt--)}})(y,T),lt($,ut,y.bl_count)}function c(y,T,U){var H,R,$=-1,Y=T[1],q=0,Q=7,ut=4;for(Y===0&&(Q=138,ut=3),T[2*(U+1)+1]=65535,H=0;H<=U;H++)R=Y,Y=T[2*(H+1)+1],++q<Q&&R===Y||(q<ut?y.bl_tree[2*R]+=q:R!==0?(R!==$&&y.bl_tree[2*R]++,y.bl_tree[2*C]++):q<=10?y.bl_tree[2*B]++:y.bl_tree[2*P]++,$=R,ut=(q=0)===Y?(Q=138,3):R===Y?(Q=6,3):(Q=7,4))}function N(y,T,U){var H,R,$=-1,Y=T[1],q=0,Q=7,ut=4;for(Y===0&&(Q=138,ut=3),H=0;H<=U;H++)if(R=Y,Y=T[2*(H+1)+1],!(++q<Q&&R===Y)){if(q<ut)for(;V(y,R,y.bl_tree),--q!=0;);else R!==0?(R!==$&&(V(y,R,y.bl_tree),q--),V(y,C,y.bl_tree),Z(y,q-3,2)):q<=10?(V(y,B,y.bl_tree),Z(y,q-3,3)):(V(y,P,y.bl_tree),Z(y,q-11,7));$=R,ut=(q=0)===Y?(Q=138,3):R===Y?(Q=6,3):(Q=7,4)}}l(G);var M=!1;function A(y,T,U,H){Z(y,(p<<1)+(H?1:0),3),(function(R,$,Y,q){st(R),j(R,Y),j(R,~Y),n.arraySet(R.pending_buf,R.window,$,Y,R.pending),R.pending+=Y})(y,T,U)}a._tr_init=function(y){M||((function(){var T,U,H,R,$,Y=new Array(g+1);for(R=H=0;R<E-1;R++)for(F[R]=H,T=0;T<1<<x[R];T++)u[H++]=R;for(u[H-1]=R,R=$=0;R<16;R++)for(G[R]=$,T=0;T<1<<z[R];T++)I[$++]=R;for($>>=7;R<d;R++)for(G[R]=$<<7,T=0;T<1<<z[R]-7;T++)I[256+$++]=R;for(U=0;U<=g;U++)Y[U]=0;for(T=0;T<=143;)W[2*T+1]=8,T++,Y[8]++;for(;T<=255;)W[2*T+1]=9,T++,Y[9]++;for(;T<=279;)W[2*T+1]=7,T++,Y[7]++;for(;T<=287;)W[2*T+1]=8,T++,Y[8]++;for(lt(W,_+1,Y),T=0;T<d;T++)v[2*T+1]=5,v[2*T]=dt(T,5);nt=new et(W,x,w+1,_,g),J=new et(v,z,0,d,g),at=new et(new Array(0),k,0,m,b)})(),M=!0),y.l_desc=new D(y.dyn_ltree,nt),y.d_desc=new D(y.dyn_dtree,J),y.bl_desc=new D(y.bl_tree,at),y.bi_buf=0,y.bi_valid=0,it(y)},a._tr_stored_block=A,a._tr_flush_block=function(y,T,U,H){var R,$,Y=0;0<y.level?(y.strm.data_type===2&&(y.strm.data_type=(function(q){var Q,ut=4093624447;for(Q=0;Q<=31;Q++,ut>>>=1)if(1&ut&&q.dyn_ltree[2*Q]!==0)return o;if(q.dyn_ltree[18]!==0||q.dyn_ltree[20]!==0||q.dyn_ltree[26]!==0)return s;for(Q=32;Q<w;Q++)if(q.dyn_ltree[2*Q]!==0)return s;return o})(y)),bt(y,y.l_desc),bt(y,y.d_desc),Y=(function(q){var Q;for(c(q,q.dyn_ltree,q.l_desc.max_code),c(q,q.dyn_dtree,q.d_desc.max_code),bt(q,q.bl_desc),Q=m-1;3<=Q&&q.bl_tree[2*L[Q]+1]===0;Q--);return q.opt_len+=3*(Q+1)+5+5+4,Q})(y),R=y.opt_len+3+7>>>3,($=y.static_len+3+7>>>3)<=R&&(R=$)):R=$=U+5,U+4<=R&&T!==-1?A(y,T,U,H):y.strategy===4||$===R?(Z(y,2+(H?1:0),3),Et(y,W,v)):(Z(y,4+(H?1:0),3),(function(q,Q,ut,ot){var wt;for(Z(q,Q-257,5),Z(q,ut-1,5),Z(q,ot-4,4),wt=0;wt<ot;wt++)Z(q,q.bl_tree[2*L[wt]+1],3);N(q,q.dyn_ltree,Q-1),N(q,q.dyn_dtree,ut-1)})(y,y.l_desc.max_code+1,y.d_desc.max_code+1,Y+1),Et(y,y.dyn_ltree,y.dyn_dtree)),it(y),H&&st(y)},a._tr_tally=function(y,T,U){return y.pending_buf[y.d_buf+2*y.last_lit]=T>>>8&255,y.pending_buf[y.d_buf+2*y.last_lit+1]=255&T,y.pending_buf[y.l_buf+y.last_lit]=255&U,y.last_lit++,T===0?y.dyn_ltree[2*U]++:(y.matches++,T--,y.dyn_ltree[2*(u[U]+w+1)]++,y.dyn_dtree[2*O(T)]++),y.last_lit===y.lit_bufsize-1},a._tr_align=function(y){Z(y,2,3),V(y,S,W),(function(T){T.bi_valid===16?(j(T,T.bi_buf),T.bi_buf=0,T.bi_valid=0):8<=T.bi_valid&&(T.pending_buf[T.pending++]=255&T.bi_buf,T.bi_buf>>=8,T.bi_valid-=8)})(y)}},{"../utils/common":41}],53:[function(e,i,a){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,i,a){(function(n){(function(o,s){if(!o.setImmediate){var l,p,E,w,_=1,d={},m=!1,f=o.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(o);g=g&&g.setTimeout?g:o,l={}.toString.call(o.process)==="[object process]"?function(C){process.nextTick(function(){b(C)})}:(function(){if(o.postMessage&&!o.importScripts){var C=!0,B=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=B,C}})()?(w="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",S,!1):o.attachEvent("onmessage",S),function(C){o.postMessage(w+C,"*")}):o.MessageChannel?((E=new MessageChannel).port1.onmessage=function(C){b(C.data)},function(C){E.port2.postMessage(C)}):f&&"onreadystatechange"in f.createElement("script")?(p=f.documentElement,function(C){var B=f.createElement("script");B.onreadystatechange=function(){b(C),B.onreadystatechange=null,p.removeChild(B),B=null},p.appendChild(B)}):function(C){setTimeout(b,0,C)},g.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var B=new Array(arguments.length-1),P=0;P<B.length;P++)B[P]=arguments[P+1];var x={callback:C,args:B};return d[_]=x,l(_),_++},g.clearImmediate=h}function h(C){delete d[C]}function b(C){if(m)setTimeout(b,0,C);else{var B=d[C];if(B){m=!0;try{(function(P){var x=P.callback,z=P.args;switch(z.length){case 0:x();break;case 1:x(z[0]);break;case 2:x(z[0],z[1]);break;case 3:x(z[0],z[1],z[2]);break;default:x.apply(s,z)}})(B)}finally{h(C),m=!1}}}}function S(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(w)===0&&b(+C.data.slice(w.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof Xt<"u"?Xt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(xe)),xe.exports}var hi=fi();const Ir=Yr(hi);async function Pe(t,r,e){if(!await ht.checkArgon2Ready())throw new Error("Argon2 函式庫未成功載入，無法執行。");const{hash:i}=await window.argon2.hash({pass:t,salt:r,time:e.iterations,mem:e.memory,parallelism:e.parallelism,hashLen:32,type:window.argon2.ArgonType.Argon2id});return i}const Fe={async encrypt(t,r){const e=crypto.getRandomValues(new Uint8Array(tt.SALT_BYTES)),i={iterations:parseInt(K.argon2Iterations.value,10),memory:parseInt(K.argon2Memory.value,10)*1024,parallelism:parseInt(K.argon2Parallelism.value,10)},a={alg:"dir",enc:tt.ALGO_AES_GCM,kdf:tt.KDF_ARGON2,salt:Ve(e),t:i.iterations,m:i.memory,p:i.parallelism},n=await Pe(r,e,i);return{jwe:await new Le(t).setProtectedHeader(a).encrypt(n),keyForVerification:n,decryptOptions:{}}},async decrypt(t,r,e){const i=an(e.salt),a={iterations:e.t,memory:e.m,parallelism:e.p},n=await Pe(r,i,a),{plaintext:o}=await qt(t,n);return o},async deriveKeyOnce(t){const r=crypto.getRandomValues(new Uint8Array(tt.SALT_BYTES)),e={iterations:parseInt(K.argon2Iterations.value,10),memory:parseInt(K.argon2Memory.value,10)*1024,parallelism:parseInt(K.argon2Parallelism.value,10)};return{key:await Pe(t,r,e),params:{t:e.iterations,m:e.memory,p:e.parallelism},saltB64:Ve(r)}},async encryptFile(t,r,e){const i=await Pt.readFileAsArrayBuffer(t),a=new Uint8Array(i),n={alg:"dir",enc:tt.ALGO_AES_GCM,kdf:tt.KDF_ARGON2,salt:e.saltB64,...e.params},o=await new Le(a).setProtectedHeader(n).encrypt(e.key);return K.selfVerifyFileCheckbox.checked&&await qt(o,e.key,{}),{filename:t.name+tt.DOWNLOAD_FILENAME_SUFFIX,content:o}},async decryptFile(t,r){const e=await Pt.readFileAsText(t),i=Lt(e),a=await this.decrypt(e,r,i);return{filename:t.name.endsWith(tt.DOWNLOAD_FILENAME_SUFFIX)?t.name.slice(0,-tt.DOWNLOAD_FILENAME_SUFFIX.length):`decrypted-${t.name}`,content:new Blob([a])}}},Ne={async encrypt(t,r){const e={alg:tt.ALGO_PBES2,enc:tt.ALGO_AES_GCM},i=new TextEncoder().encode(r);return{jwe:await new Le(t).setProtectedHeader(e).encrypt(i),keyForVerification:i,decryptOptions:{keyManagementAlgorithms:[tt.ALGO_PBES2]}}},async decrypt(t,r,e){const i=new TextEncoder().encode(r),{plaintext:a}=await qt(t,i,{keyManagementAlgorithms:[tt.ALGO_PBES2]});return a},async encryptFile(t,r,e=null){const i=await Pt.readFileAsArrayBuffer(t),a=new Uint8Array(i),{jwe:n,keyForVerification:o,decryptOptions:s}=await this.encrypt(a,r);return K.selfVerifyFileCheckbox.checked&&await qt(n,o,s),{filename:t.name+tt.DOWNLOAD_FILENAME_SUFFIX,content:n}},async decryptFile(t,r){const e=await Pt.readFileAsText(t),i=Lt(e),a=await this.decrypt(e,r,i);return{filename:t.name.endsWith(tt.DOWNLOAD_FILENAME_SUFFIX)?t.name.slice(0,-tt.DOWNLOAD_FILENAME_SUFFIX.length):`decrypted-${t.name}`,content:new Blob([a])}}};function xr(){switch(rt.selectedKDF){case tt.KDF_ARGON2:return Fe;case tt.ALGO_PBES2:return Ne;default:throw new Error(`不支援的金鑰管理模式: ${rt.selectedKDF}`)}}const Gt={async encryptText(){const t=K.mnemonic.value.trim(),r=K.passphraseEncrypt.value;if(!t||!r)return ht.showToast("❌ 明文和密碼短語不能為空。");if(!ht.runSecurityChecks(r,rt.selectedKDF))return;ct.setOutput("info","⏳ 正在加密，請稍候..."),await new Promise(i=>setTimeout(i,50));const e=performance.now();try{const i=xr(),a=new TextEncoder().encode(t),{jwe:n,keyForVerification:o,decryptOptions:s}=await i.encrypt(a,r),l=((performance.now()-e)/1e3).toFixed(3);if(rt.lastEncryptedOutput=n,ct.setOutput("success",`✅ 加密成功！ (處理時間：${l} 秒)`),K.selfVerifyCheckbox.checked){ct.setOutput("info","✅ 加密成功！<br>...正在進行自我驗證..."),await new Promise(p=>setTimeout(p,20));try{await qt(n,o,s),ct.setOutput("success",`✅ 加密與驗證均成功！ (總時間：${((performance.now()-e)/1e3).toFixed(3)} 秒)`)}catch(p){ct.setOutput("error",`❌ 嚴重錯誤：加密後驗證失敗！請勿使用此密文，並回報此問題。<br>錯誤訊息：${p.message}`);return}}K.base64ResultView.value=n,K.jsonView.value=JSON.stringify(Lt(n),null,2),K.qrCanvas.hidden=n.length>=tt.QR_CODE_MAX_BYTES,K.qrCanvas.hidden||di.toCanvas(K.qrCanvas,n,{errorCorrectionLevel:"L",width:320})}catch(i){ct.setOutput("error",`❌ 加密失敗：${i.message}`)}},async decryptText(){const t=K.ciphertextInput.value.trim(),r=K.passphraseDecrypt.value;if(!t||!r)return ht.showToast("❌ 密文和密碼短語不能為空。");ct.setOutput("info","⏳ 正在解密，請稍候..."),await new Promise(i=>setTimeout(i,50));const e=performance.now();try{const i=Lt(t);let a;if(i.alg==="dir"){if(i.kdf!==tt.KDF_ARGON2)throw new Error(`alg: "dir" 模式僅支援 Argon2id，但標頭指定為 ${i.kdf}`);a=Fe}else if(i.alg===tt.ALGO_PBES2)a=Ne;else throw new Error(`不支援的 JWE 演算法: ${i.alg}`);const n=await a.decrypt(t,r,i),o=((performance.now()-e)/1e3).toFixed(3),s=new TextDecoder().decode(n);rt.lastDecryptedText=s,ct.setOutput("success",`✅ 解密成功 (處理時間：${o} 秒)<br><br><strong style="font-size: 1.1em; white-space: pre-wrap; word-break: break-word;">${s}</strong>`)}catch(i){ct.setOutput("error",`❌ 解密失敗：${i.message}`)}},async batchEncryptFiles(){if(rt.filesToEncrypt.length===0)return ht.showToast("❌ 請先選擇要加密的檔案。");const t=K.passphraseFileEncrypt.value;if(!t)return ht.showToast("❌ 請輸入密碼短語。");if(!ht.runSecurityChecks(t,rt.selectedKDF))return;ct.setOutput("info",`⏳ 準備加密 ${rt.filesToEncrypt.length} 個檔案...`),await new Promise(e=>setTimeout(e,50));const r=performance.now();try{const e=xr(),i=new Ir,a=rt.selectedKDF===tt.KDF_ARGON2?await e.deriveKeyOnce(t):null;for(const s of rt.filesToEncrypt){ct.setOutput("info",`⏳ 正在加密檔案: ${s.name}...`);const l=await e.encryptFile(s,t,a);i.file(l.filename,l.content)}const n=await i.generateAsync({type:"blob"}),o=((performance.now()-r)/1e3).toFixed(3);ht.downloadAsFile(n,`encrypted_files_${Date.now()}.zip`),ct.setOutput("success",`✅ ${rt.filesToEncrypt.length} 個檔案全部加密成功並已打包下載！(總耗時: ${o} 秒)`)}catch(e){ct.setOutput("error",`❌ 檔案加密失敗：${e.message}`)}},async batchDecryptFiles(){if(rt.filesToDecrypt.length===0)return ht.showToast("❌ 請先選擇要解密的檔案。");const t=K.passphraseFileDecrypt.value;if(!t)return ht.showToast("❌ 請輸入密碼短語。");ct.setOutput("info",`⏳ 準備解密 ${rt.filesToDecrypt.length} 個檔案...`),await new Promise(e=>setTimeout(e,50));const r=performance.now();try{const e=new Ir;for(const n of rt.filesToDecrypt){ct.setOutput("info",`⏳ 正在解密檔案: ${n.name}...`);const o=await Pt.readFileAsText(n),s=Lt(o);let l;if(s.alg==="dir")l=Fe;else if(s.alg===tt.ALGO_PBES2)l=Ne;else throw new Error(`檔案 ${n.name} 包含不支援的 JWE 演算法: ${s.alg}`);const p=await l.decryptFile(n,t);e.file(p.filename,p.content)}const i=await e.generateAsync({type:"blob"}),a=((performance.now()-r)/1e3).toFixed(3);ht.downloadAsFile(i,`decrypted_files_${Date.now()}.zip`),ct.setOutput("success",`✅ ${rt.filesToDecrypt.length} 個檔案全部解密成功並已打包下載！(總耗時: ${a} 秒)`)}catch(e){ct.setOutput("error",`❌ 解密失敗：${e.message}`)}},async parseParameters(){const t=K.ciphertextInput.value.trim();if(!t)return ht.showToast("請先貼上 JWE 密文");try{const e=Lt(t);let i="N/A";e.alg==="dir"&&e.kdf===tt.KDF_ARGON2?i=`${e.kdf} (mem: ${e.m/1024}MB, iter: ${e.t}, parallel: ${e.p})`:e.alg===tt.ALGO_PBES2?i=`${e.alg} (p2c: ${e.p2c.toLocaleString("en-US")} 迭代)`:i=`不支援的演算法: ${e.alg}`;const a=`v${tt.VERSION} (JWE)`;K.paramsDisplayArea.innerHTML=`<p>格式版本：<span>${a}</span></p><p>金鑰管理：<span>${i}</span></p><p>加密演算法：<span>${e.enc}</span></p><p style="color: var(--success-color);">狀態：<span>JWE Header 已載入 ✅</span></p>`,K.paramsDisplayArea.hidden=!1}catch(r){K.paramsDisplayArea.innerHTML='<p style="color: var(--error-color);">❌ 解析失敗：無效的 JWE 格式。</p>',K.paramsDisplayArea.hidden=!1,console.error(r)}}},Pr={init(){const t=localStorage.getItem("my-app-theme")||"dark";this.apply(t)},apply(t){document.documentElement.setAttribute("data-theme",t),K.themeToggleBtn.textContent=t==="dark"?"☀️":"🌙",localStorage.setItem("my-app-theme",t)},toggle(){const t=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";this.apply(t)}},pi={toggle(t){const r=t.classList.contains("active");t.classList.toggle("active"),t.setAttribute("aria-expanded",!r),t.nextElementSibling.setAttribute("aria-hidden",r)}},mi={async run(){if(!await ht.checkArgon2Ready())return ht.showToast("❌ Argon2 函式庫未就緒，無法測試。");K.benchmarkBtn.disabled=!0,K.encryptBtn.disabled=!0,K.benchmarkStatus.textContent="⏱️ 正在執行基準測試，請稍候...";try{const e=navigator.hardwareConcurrency||4,i=[1024,512,256,128,64,32];let a=256;for(const n of i){const o=n*1024,s=performance.now();if(await window.argon2.hash({pass:"benchmark",salt:"benchmark-salt",time:4,mem:o,parallelism:e,hashLen:32,type:window.argon2.ArgonType.Argon2id}),performance.now()-s<1e3){a=n;break}await new Promise(p=>setTimeout(p,50))}K.argon2Memory.value=a,K.argon2Iterations.value=4,K.argon2Parallelism.value=e,K.benchmarkStatus.textContent="✅ 測試完成！",ht.showToast("✅ 建議參數已產生並填入！")}catch(t){K.benchmarkStatus.textContent="❌ 測試失敗",ht.showToast(`❌ 基準測試失敗: ${t.message}`)}finally{K.benchmarkBtn.disabled=!1,K.encryptBtn.disabled=!1,setTimeout(()=>{K.benchmarkStatus.textContent=""},4e3)}}};function gi(){K.currentYear.textContent=new Date().getFullYear(),Pr.init(),rt.currentAppMode=tt.MODE_TEXT,rt.selectedAlgorithm=tt.ALGO_AES_GCM,rt.selectedKDF=tt.KDF_ARGON2,ct.setAppMode(rt.currentAppMode),ht.checkArgon2Ready(),K.themeToggleBtn.addEventListener("click",()=>Pr.toggle()),K.scrollTopBtn.addEventListener("click",()=>window.scrollTo({top:0,behavior:"smooth"})),window.addEventListener("scroll",()=>K.scrollTopBtn.classList.toggle("active",window.scrollY>300)),K.appModeSelector.addEventListener("click",r=>{const e=r.target.closest(".option");e?.dataset.appMode&&ct.setAppMode(e.dataset.appMode)}),K.modeSelector.addEventListener("click",r=>{const e=r.target.closest(".option");e?.dataset.mode&&ct.setMode(e.dataset.mode)}),K.algoSelectionGroup.addEventListener("click",r=>{const e=r.target.closest(".option");e&&e.style.cursor==="not-allowed"||ct.handleOptionSelection(r,"selectedAlgorithm")}),K.kdfSelectionGroup.addEventListener("click",r=>{ct.handleOptionSelection(r,"selectedKDF")&&ct.toggleKdfParams(rt.selectedKDF)}),K.passphraseEncrypt.addEventListener("input",r=>ct.updatePasswordStrength(r.target.value,"encrypt")),K.passphraseFileEncrypt.addEventListener("input",r=>ct.updatePasswordStrength(r.target.value,"file")),K.encryptBtn.addEventListener("click",()=>Gt.encryptText()),K.decryptBtn.addEventListener("click",()=>Gt.decryptText()),K.parseBtn.addEventListener("click",()=>Gt.parseParameters()),K.benchmarkBtn.addEventListener("click",()=>mi.run()),K.fileEncryptInput.addEventListener("change",r=>Pt.handleFileSelect(r,tt.OP_ENCRYPT)),K.fileDecryptInput.addEventListener("change",r=>Pt.handleFileSelect(r,tt.OP_DECRYPT)),K.encryptFileBtn.addEventListener("click",()=>Gt.batchEncryptFiles()),K.decryptFileBtn.addEventListener("click",()=>Gt.batchDecryptFiles()),K.resetBtn.addEventListener("click",()=>ct.resetAll()),K.pasteBtn.addEventListener("click",()=>ht.pasteTo("ciphertextInput")),K.copyBtn.addEventListener("click",()=>ht.copyFromResult()),K.copyDecryptedBtn.addEventListener("click",()=>ht.copyDecryptedResult()),K.downloadBtn.addEventListener("click",()=>{rt.lastEncryptedOutput&&ht.downloadAsFile(rt.lastEncryptedOutput,`encrypted-v4-${Date.now()}${tt.DOWNLOAD_FILENAME_SUFFIX}`)}),K.passwordToggles.forEach(r=>{r.innerHTML=tt.SVG_EYE_OPEN,r.addEventListener("click",e=>ct.togglePasswordVisibility(e.currentTarget))});const t=(r,e)=>{r&&(["dragenter","dragover","dragleave","drop"].forEach(i=>{r.addEventListener(i,a=>{a.preventDefault(),a.stopPropagation()})}),["dragenter","dragover"].forEach(i=>r.addEventListener(i,()=>r.classList.add("drag-over"))),["dragleave","drop"].forEach(i=>r.addEventListener(i,()=>r.classList.remove("drag-over"))),r.addEventListener("drop",i=>{i.dataTransfer.files.length>0&&(e.files=i.dataTransfer.files,e.dispatchEvent(new Event("change",{bubbles:!0})))}))};t(K.fileEncryptInput.closest(".file-input-wrapper"),K.fileEncryptInput),t(K.fileDecryptInput.closest(".file-input-wrapper"),K.fileDecryptInput),K.accordionContainer&&K.accordionContainer.addEventListener("click",r=>{const e=r.target.closest(".accordion-header");e&&pi.toggle(e)})}document.addEventListener("DOMContentLoaded",gi);
