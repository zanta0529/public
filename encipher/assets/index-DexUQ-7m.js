(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();const K={appModeSelector:document.getElementById("appModeSelector"),textModeSection:document.getElementById("text-mode-section"),fileModeSection:document.getElementById("file-mode-section"),modeSelector:document.getElementById("modeSelector"),encryptSection:document.getElementById("encrypt-section"),decryptSection:document.getElementById("decrypt-section"),mnemonic:document.getElementById("mnemonic"),ciphertextInput:document.getElementById("ciphertext-input"),passphraseEncrypt:document.getElementById("passphrase-encrypt"),passphraseDecrypt:document.getElementById("passphrase-decrypt"),algoSelectionGroup:document.getElementById("algoSelectionGroup"),kdfSelectionGroup:document.getElementById("kdfSelectionGroup"),argon2ParamsSection:document.querySelector('.kdf-params-section[data-kdf="Argon2id"]'),pbkdf2ParamsSection:document.querySelector('.kdf-params-section[data-kdf="PBKDF2"]'),argon2Memory:document.getElementById("argon2-memory"),argon2Iterations:document.getElementById("argon2-iterations"),argon2Parallelism:document.getElementById("argon2-parallelism"),pbkdf2Iterations:document.getElementById("pbkdf2-iterations"),encryptBtn:document.getElementById("encryptBtn"),decryptBtn:document.getElementById("decryptBtn"),parseBtn:document.getElementById("parseBtn"),benchmarkBtn:document.getElementById("benchmarkBtn"),benchmarkStatus:document.getElementById("benchmarkStatus"),selfVerifyCheckbox:document.getElementById("self-verify-checkbox"),selfVerifyFileCheckbox:document.getElementById("self-verify-file-checkbox"),passwordStrengthBarEncrypt:document.getElementById("password-strength-bar-encrypt"),passwordStrengthTextEncrypt:document.getElementById("password-strength-text-encrypt"),passwordStrengthBarFile:document.getElementById("password-strength-bar-file"),passwordStrengthTextFile:document.getElementById("password-strength-text-file"),compressCheckbox:document.getElementById("compress-checkbox"),fileEncryptInput:document.getElementById("file-encrypt-input"),fileEncryptList:document.getElementById("file-encrypt-list"),passphraseFileEncrypt:document.getElementById("passphrase-file-encrypt"),encryptFileBtn:document.getElementById("encryptFileBtn"),fileDecryptInput:document.getElementById("file-decrypt-input"),fileDecryptList:document.getElementById("file-decrypt-list"),passphraseFileDecrypt:document.getElementById("passphrase-file-decrypt"),decryptFileBtn:document.getElementById("decryptFileBtn"),pasteBtn:document.getElementById("pasteBtn"),resetBtn:document.getElementById("resetBtn"),resultsArea:document.getElementById("results-area"),textModeResults:document.getElementById("text-mode-results"),output:document.getElementById("output"),copyBtn:document.getElementById("copyBtn"),downloadBtn:document.getElementById("downloadBtn"),qrCanvas:document.getElementById("qrCanvas"),jsonView:document.getElementById("jsonView"),base64ResultView:document.getElementById("base64ResultView"),paramsDisplayArea:document.getElementById("params-display-area"),passwordToggles:document.querySelectorAll(".toggle-password-icon"),decryptionActions:document.getElementById("decryption-actions"),copyDecryptedBtn:document.getElementById("copyDecryptedBtn"),themeToggleBtn:document.getElementById("themeToggleBtn"),currentYear:document.getElementById("currentYear"),toast:document.getElementById("toast"),scrollTopBtn:document.getElementById("scroll-to-top"),accordionContainer:document.querySelector(".accordion")},tt={currentAppMode:null,currentMode:null,selectedAlgorithm:null,selectedKDF:null,toastTimer:null,lastEncryptedOutput:null,lastDecryptedText:null,filesToEncrypt:[],filesToDecrypt:[],isCompressionEnabled:!1},nt={VERSION:4,SALT_BYTES:16,NONCE_BYTES:12,KEY_LENGTH_BITS:256,PBKDF2_ITERATIONS:2e6,QR_CODE_MAX_BYTES:2953,FILE_SIZE_LIMIT_BYTES:10*1024*1024,ARGON2_MIN_MEM_MB:128,ARGON2_MIN_ITER:4,ARGON2_MIN_PARALLELISM:1,ARGON2_MIN_TIME:1,ARGON2_MIN_PARA:4,SVG_EYE_OPEN:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/><path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/></svg>',SVG_EYE_SLASH:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7.029 7.029 0 0 0 2.79-.588zM5.21 3.088A7.028 7.028 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474L5.21 3.089z"/><path d="M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829l-2.83-2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12-.708.708z"/></svg>',MODE_TEXT:"text",MODE_FILE:"file",OP_ENCRYPT:"encrypt",OP_DECRYPT:"decrypt",ALGO_AES_GCM:"A256GCM",ALGO_CHACHA:"ChaCha20-Poly1305",KDF_ARGON2:"Argon2id",KDF_PBKDF2:"PBKDF2",HASH_SHA256:"SHA-256",DOWNLOAD_FILENAME_SUFFIX:".jwe"},pt={copyFromResult(){tt.lastEncryptedOutput&&navigator.clipboard.writeText(tt.lastEncryptedOutput).then(()=>this.showToast("✅ 已複製 JWE 密文！"),()=>this.showToast("❌ 複製失敗"))},copyDecryptedResult(){tt.lastDecryptedText&&navigator.clipboard.writeText(tt.lastDecryptedText).then(()=>this.showToast("✅ 已複製解密結果！"),()=>this.showToast("❌ 複製失敗"))},pasteTo(t){navigator.clipboard.readText().then(r=>{K[t].value=r,this.showToast("✅ 已貼上內容！")},()=>this.showToast("❌ 貼上失敗"))},downloadAsFile(t,r){const e=t instanceof Blob?t:new Blob([t],{type:"text/plain"}),i=URL.createObjectURL(e),s=document.createElement("a");s.href=i,s.download=r,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)},showToast(t){tt.toastTimer&&clearTimeout(tt.toastTimer),K.toast.textContent=t,K.toast.className="show",tt.toastTimer=setTimeout(()=>{K.toast.className="",tt.toastTimer=null},3e3)},async checkArgon2Ready(){return typeof argon2<"u"?!0:new Promise(t=>{setTimeout(()=>{typeof argon2<"u"?t(!0):(this.showToast("❌ Argon2 函式庫載入失敗！","error"),t(!1))},1e3)})},runSecurityChecks(t,r){if(this.checkPasswordStrength(t).level==="weak"&&this.showToast("⚠️ 警告：密碼強度較弱，建議使用更複雜的密碼。"),r===nt.KDF_ARGON2){const i=parseInt(K.argon2Memory.value,10),s=parseInt(K.argon2Iterations.value,10),n=parseInt(K.argon2Parallelism.value,10);if(i<nt.ARGON2_MIN_MEM_MB||s<nt.ARGON2_MIN_ITER||n<nt.ARGON2_MIN_PARA)return this.showToast("❌ 安全性警告：Argon2 參數過低！"),!1}return!0},checkPasswordStrength(t){let r=0,e="",i="empty";return t.length===0?{score:0,message:"",level:"empty"}:(t.length>=8&&(r+=25),t.length>=12&&(r+=25),/[a-z]/.test(t)&&/[A-Z]/.test(t)&&(r+=20),/\d/.test(t)&&(r+=15),/[^a-zA-Z0-9]/.test(t)&&(r+=15),r=Math.min(r,100),r<50?(e="強度：弱",i="weak"):r<85?(e="強度：中等",i="medium"):(e="強度：強",i="strong"),{score:r,message:e,level:i})}};function Ve(t){return t<1024*1024?`${(t/1024).toFixed(2)} KB`:`${(t/1024/1024).toFixed(2)} MB`}const lt={setAppMode(t){tt.currentAppMode=t;const r=t===nt.MODE_TEXT;this.handleOptionSelection({target:K.appModeSelector.querySelector(`[data-app-mode="${t}"]`)}),K.textModeSection.hidden=!r,K.fileModeSection.hidden=r,this.setMode(nt.OP_ENCRYPT)},setMode(t){this.resetAll(),tt.currentMode=t;const r=t===nt.OP_ENCRYPT;this.handleOptionSelection({target:K.modeSelector.querySelector(`[data-mode="${t}"]`)}),K.encryptSection.hidden=!r,K.decryptSection.hidden=r,K.pasteBtn.hidden=r},handleOptionSelection(t,r){const e=t.target.closest(".option");return e&&!e.classList.contains("selected")&&!e.style.cursor.includes("not-allowed")?(e.parentElement.querySelector(".selected")?.classList.remove("selected"),e.classList.add("selected"),r&&(tt[r]=e.dataset.value),!0):!1},toggleKdfParams(t){document.querySelectorAll(".kdf-params-section").forEach(r=>{r.hidden=r.dataset.kdf!==t})},setOutput(t,r){K.resultsArea.hidden=!1,K.output.className=`output-box ${t}`;let e=r;if(t==="success"&&tt.currentMode===nt.OP_DECRYPT){if(tt.currentAppMode===nt.MODE_FILE)e=r.includes("下載")?`${r}<br>✅ <strong>所有檔案完整性驗證通過</strong>`:r;else if(r.startsWith("✅ 解密成功")){const i=r.split("<br><br>");e=`${i[0]}<br>✅ <strong>檔案完整性驗證通過</strong><br><br>${i[1]}`}}K.output.innerHTML=e,K.textModeResults.hidden=!0,K.decryptionActions.hidden=!0,t==="success"&&tt.currentAppMode===nt.MODE_TEXT&&(tt.currentMode===nt.OP_ENCRYPT?K.textModeResults.hidden=!1:K.decryptionActions.hidden=!1)},updateFileLists(){const t=K.fileEncryptList,r=K.fileDecryptList;t.innerHTML="",r.innerHTML="",tt.filesToEncrypt.length>0?(tt.filesToEncrypt.forEach(e=>{const i=document.createElement("li");i.textContent=`${e.name} (${Ve(e.size)})`,t.appendChild(i)}),t.hidden=!1):t.hidden=!0,tt.filesToDecrypt.length>0?(tt.filesToDecrypt.forEach(e=>{const i=document.createElement("li");i.textContent=`${e.name} (${Ve(e.size)})`,r.appendChild(i)}),r.hidden=!1):r.hidden=!0},resetAll(){if(["mnemonic","ciphertextInput","passphraseEncrypt","passphraseDecrypt","passphraseFileEncrypt","passphraseFileDecrypt"].forEach(r=>K[r]?K[r].value="":null),this.updatePasswordStrength("","encrypt"),this.updatePasswordStrength("","file"),K.fileEncryptInput.value="",K.fileDecryptInput.value="",tt.filesToEncrypt=[],tt.filesToDecrypt=[],this.updateFileLists(),K.resultsArea.hidden=!0,K.textModeResults.hidden=!0,K.decryptionActions.hidden=!0,K.paramsDisplayArea.hidden=!0,tt.lastEncryptedOutput=null,tt.lastDecryptedText=null,tt.selectedAlgorithm=nt.ALGO_AES_GCM,tt.selectedKDF=nt.KDF_ARGON2,this.handleOptionSelection({target:K.algoSelectionGroup.querySelector(`[data-value="${nt.ALGO_AES_GCM}"]`)},"selectedAlgorithm"),this.handleOptionSelection({target:K.kdfSelectionGroup.querySelector(`[data-value="${nt.KDF_ARGON2}"]`)},"selectedKDF"),this.toggleKdfParams(tt.selectedKDF),K.qrCanvas){const r=K.qrCanvas.getContext("2d");r&&r.clearRect(0,0,K.qrCanvas.width,K.qrCanvas.height)}},togglePasswordVisibility(t){const r=document.getElementById(t.dataset.for);r.type==="password"?(r.type="text",t.innerHTML=nt.SVG_EYE_SLASH):(r.type="password",t.innerHTML=nt.SVG_EYE_OPEN)},updatePasswordStrength(t,r){const e=pt.checkPasswordStrength(t),i=r==="encrypt"?K.passwordStrengthBarEncrypt:K.passwordStrengthBarFile,s=r==="encrypt"?K.passwordStrengthTextEncrypt:K.passwordStrengthTextFile;i.className="password-strength-meter-bar",e.level!=="empty"&&i.classList.add(`strength-${e.level}`),i.style.width=e.score+"%",s.textContent=e.message}};function Ze(t){return t<1024*1024?`${(t/1024).toFixed(2)} KB`:`${(t/1024/1024).toFixed(2)} MB`}const se={handleFileSelect(t,r){const e=t.target.files;if(!e||e.length===0)return;const i=r===nt.OP_ENCRYPT,s=i?K.fileEncryptList:K.fileDecryptList,n=i?"filesToEncrypt":"filesToDecrypt";s.innerHTML="",tt[n]=[],Array.from(e).forEach(a=>{const o=document.createElement("li");o.className="file-list-item",a.size>nt.FILE_SIZE_LIMIT_BYTES?(o.innerHTML=`
                    <span>${a.name}</span>
                    <span class="file-size error">${Ze(a.size)} - 檔案過大</span>
                `,o.classList.add("error")):(o.innerHTML=`
                    <span>${a.name}</span>
                    <span class="file-size">${Ze(a.size)}</span>
                `,tt[n].push(a)),s.appendChild(o)}),s.hidden=!1},readFileAsArrayBuffer:t=>t.arrayBuffer(),readFileAsText:t=>t.text()},ct=crypto,St=t=>t instanceof CryptoKey,cn=async(t,r)=>{const e=`SHA-${t.slice(-3)}`;return new Uint8Array(await ct.subtle.digest(e,r))},Bt=new TextEncoder,Vt=new TextDecoder,ae=2**32;function Ot(...t){const r=t.reduce((s,{length:n})=>s+n,0),e=new Uint8Array(r);let i=0;for(const s of t)e.set(s,i),i+=s.length;return e}function ln(t,r){return Ot(Bt.encode(t),new Uint8Array([0]),r)}function Le(t,r,e){if(r<0||r>=ae)throw new RangeError(`value must be >= 0 and <= ${ae-1}. Received ${r}`);t.set([r>>>24,r>>>16,r>>>8,r&255],e)}function Rr(t){const r=Math.floor(t/ae),e=t%ae,i=new Uint8Array(8);return Le(i,r,0),Le(i,e,4),i}function We(t){const r=new Uint8Array(4);return Le(r,t),r}function he(t){return Ot(We(t.length),t)}async function un(t,r,e){const i=Math.ceil((r>>3)/32),s=new Uint8Array(i*32);for(let n=0;n<i;n++){const a=new Uint8Array(4+t.length+e.length);a.set(We(n+1)),a.set(t,4),a.set(e,4+t.length),s.set(await cn("sha256",a),n*32)}return s.slice(0,r>>3)}const dn=t=>{let r=t;typeof r=="string"&&(r=Bt.encode(r));const e=32768,i=[];for(let s=0;s<r.length;s+=e)i.push(String.fromCharCode.apply(null,r.subarray(s,s+e)));return btoa(i.join(""))},At=t=>dn(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),fn=t=>{const r=atob(t),e=new Uint8Array(r.length);for(let i=0;i<r.length;i++)e[i]=r.charCodeAt(i);return e},wt=t=>{let r=t;r instanceof Uint8Array&&(r=Vt.decode(r)),r=r.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return fn(r)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class _t extends Error{constructor(r,e){super(r,e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}_t.code="ERR_JOSE_GENERIC";class hn extends _t{constructor(r,e,i="unspecified",s="unspecified"){super(r,{cause:{claim:i,reason:s,payload:e}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=i,this.reason=s,this.payload=e}}hn.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class pn extends _t{constructor(r,e,i="unspecified",s="unspecified"){super(r,{cause:{claim:i,reason:s,payload:e}}),this.code="ERR_JWT_EXPIRED",this.claim=i,this.reason=s,this.payload=e}}pn.code="ERR_JWT_EXPIRED";class xr extends _t{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}xr.code="ERR_JOSE_ALG_NOT_ALLOWED";class yt extends _t{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}yt.code="ERR_JOSE_NOT_SUPPORTED";class oe extends _t{constructor(r="decryption operation failed",e){super(r,e),this.code="ERR_JWE_DECRYPTION_FAILED"}}oe.code="ERR_JWE_DECRYPTION_FAILED";class X extends _t{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}X.code="ERR_JWE_INVALID";class mn extends _t{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}mn.code="ERR_JWS_INVALID";class gn extends _t{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}gn.code="ERR_JWT_INVALID";class yn extends _t{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}yn.code="ERR_JWK_INVALID";class wn extends _t{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}wn.code="ERR_JWKS_INVALID";class _n extends _t{constructor(r="no applicable key found in the JSON Web Key Set",e){super(r,e),this.code="ERR_JWKS_NO_MATCHING_KEY"}}_n.code="ERR_JWKS_NO_MATCHING_KEY";class En extends _t{constructor(r="multiple matching keys found in the JSON Web Key Set",e){super(r,e),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}En.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";class bn extends _t{constructor(r="request timed out",e){super(r,e),this.code="ERR_JWKS_TIMEOUT"}}bn.code="ERR_JWKS_TIMEOUT";class vn extends _t{constructor(r="signature verification failed",e){super(r,e),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}vn.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";const He=ct.getRandomValues.bind(ct);function Pr(t){switch(t){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new yt(`Unsupported JWE Algorithm: ${t}`)}}const An=t=>He(new Uint8Array(Pr(t)>>3)),Dr=(t,r)=>{if(r.length<<3!==Pr(t))throw new X("Invalid Initialization Vector length")},ce=(t,r)=>{const e=t.byteLength<<3;if(e!==r)throw new X(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`)},Sn=(t,r)=>{if(!(t instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(r instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(t.length!==r.length)throw new TypeError("Input buffers must have the same length");const e=t.length;let i=0,s=-1;for(;++s<e;)i|=t[s]^r[s];return i===0};function xt(t,r="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${r} must be ${t}`)}function Xt(t,r){return t.name===r}function Cn(t){return parseInt(t.name.slice(4),10)}function kn(t,r){if(r.length&&!r.some(e=>t.usages.includes(e))){let e="CryptoKey does not support this operation, its usages must include ";if(r.length>2){const i=r.pop();e+=`one of ${r.join(", ")}, or ${i}.`}else r.length===2?e+=`one of ${r[0]} or ${r[1]}.`:e+=`${r[0]}.`;throw new TypeError(e)}}function Dt(t,r,...e){switch(r){case"A128GCM":case"A192GCM":case"A256GCM":{if(!Xt(t.algorithm,"AES-GCM"))throw xt("AES-GCM");const i=parseInt(r.slice(1,4),10);if(t.algorithm.length!==i)throw xt(i,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!Xt(t.algorithm,"AES-KW"))throw xt("AES-KW");const i=parseInt(r.slice(1,4),10);if(t.algorithm.length!==i)throw xt(i,"algorithm.length");break}case"ECDH":{switch(t.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw xt("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!Xt(t.algorithm,"PBKDF2"))throw xt("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!Xt(t.algorithm,"RSA-OAEP"))throw xt("RSA-OAEP");const i=parseInt(r.slice(9),10)||1;if(Cn(t.algorithm.hash)!==i)throw xt(`SHA-${i}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}kn(t,e)}function Or(t,r,...e){if(e=e.filter(Boolean),e.length>2){const i=e.pop();t+=`one of type ${e.join(", ")}, or ${i}.`}else e.length===2?t+=`one of type ${e[0]} or ${e[1]}.`:t+=`of type ${e[0]}.`;return r==null?t+=` Received ${r}`:typeof r=="function"&&r.name?t+=` Received function ${r.name}`:typeof r=="object"&&r!=null&&r.constructor?.name&&(t+=` Received an instance of ${r.constructor.name}`),t}const Et=(t,...r)=>Or("Key must be ",t,...r);function zr(t,r,...e){return Or(`Key for the ${t} algorithm must be `,r,...e)}const Fr=t=>St(t)?!0:t?.[Symbol.toStringTag]==="KeyObject",bt=["CryptoKey"];async function In(t,r,e,i,s,n){if(!(r instanceof Uint8Array))throw new TypeError(Et(r,"Uint8Array"));const a=parseInt(t.slice(1,4),10),o=await ct.subtle.importKey("raw",r.subarray(a>>3),"AES-CBC",!1,["decrypt"]),l=await ct.subtle.importKey("raw",r.subarray(0,a>>3),{hash:`SHA-${a<<1}`,name:"HMAC"},!1,["sign"]),p=Ot(n,i,e,Rr(n.length<<3)),w=new Uint8Array((await ct.subtle.sign("HMAC",l,p)).slice(0,a>>3));let _;try{_=Sn(s,w)}catch{}if(!_)throw new oe;let b;try{b=new Uint8Array(await ct.subtle.decrypt({iv:i,name:"AES-CBC"},o,e))}catch{}if(!b)throw new oe;return b}async function Tn(t,r,e,i,s,n){let a;r instanceof Uint8Array?a=await ct.subtle.importKey("raw",r,"AES-GCM",!1,["decrypt"]):(Dt(r,t,"decrypt"),a=r);try{return new Uint8Array(await ct.subtle.decrypt({additionalData:n,iv:i,name:"AES-GCM",tagLength:128},a,Ot(e,s)))}catch{throw new oe}}const Mr=async(t,r,e,i,s,n)=>{if(!St(r)&&!(r instanceof Uint8Array))throw new TypeError(Et(r,...bt,"Uint8Array"));if(!i)throw new X("JWE Initialization Vector missing");if(!s)throw new X("JWE Authentication Tag missing");switch(Dr(t,i),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&ce(r,parseInt(t.slice(-3),10)),In(t,r,e,i,s,n);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&ce(r,parseInt(t.slice(1,4),10)),Tn(t,r,e,i,s,n);default:throw new yt("Unsupported JWE Content Encryption Algorithm")}},Lr=(...t)=>{const r=t.filter(Boolean);if(r.length===0||r.length===1)return!0;let e;for(const i of r){const s=Object.keys(i);if(!e||e.size===0){e=new Set(s);continue}for(const n of s){if(e.has(n))return!1;e.add(n)}}return!0};function Bn(t){return typeof t=="object"&&t!==null}function zt(t){if(!Bn(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let r=t;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}const de=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function Nr(t,r){if(t.algorithm.length!==parseInt(r.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${r}`)}function Kr(t,r,e){if(St(t))return Dt(t,r,e),t;if(t instanceof Uint8Array)return ct.subtle.importKey("raw",t,"AES-KW",!0,[e]);throw new TypeError(Et(t,...bt,"Uint8Array"))}const Ne=async(t,r,e)=>{const i=await Kr(r,t,"wrapKey");Nr(i,t);const s=await ct.subtle.importKey("raw",e,...de);return new Uint8Array(await ct.subtle.wrapKey("raw",s,i,"AES-KW"))},Ke=async(t,r,e)=>{const i=await Kr(r,t,"unwrapKey");Nr(i,t);const s=await ct.subtle.unwrapKey("raw",e,i,"AES-KW",...de);return new Uint8Array(await ct.subtle.exportKey("raw",s))};async function Ur(t,r,e,i,s=new Uint8Array(0),n=new Uint8Array(0)){if(!St(t))throw new TypeError(Et(t,...bt));if(Dt(t,"ECDH"),!St(r))throw new TypeError(Et(r,...bt));Dt(r,"ECDH","deriveBits");const a=Ot(he(Bt.encode(e)),he(s),he(n),We(i));let o;t.algorithm.name==="X25519"?o=256:t.algorithm.name==="X448"?o=448:o=Math.ceil(parseInt(t.algorithm.namedCurve.substr(-3),10)/8)<<3;const l=new Uint8Array(await ct.subtle.deriveBits({name:t.algorithm.name,public:t},r,o));return un(l,i,a)}async function Rn(t){if(!St(t))throw new TypeError(Et(t,...bt));return ct.subtle.generateKey(t.algorithm,!0,["deriveBits"])}function Wr(t){if(!St(t))throw new TypeError(Et(t,...bt));return["P-256","P-384","P-521"].includes(t.algorithm.namedCurve)||t.algorithm.name==="X25519"||t.algorithm.name==="X448"}function xn(t){if(!(t instanceof Uint8Array)||t.length<8)throw new X("PBES2 Salt Input must be 8 or more octets")}function Pn(t,r){if(t instanceof Uint8Array)return ct.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits"]);if(St(t))return Dt(t,r,"deriveBits","deriveKey"),t;throw new TypeError(Et(t,...bt,"Uint8Array"))}async function Hr(t,r,e,i){xn(t);const s=ln(r,t),n=parseInt(r.slice(13,16),10),a={hash:`SHA-${r.slice(8,11)}`,iterations:e,name:"PBKDF2",salt:s},o={length:n,name:"AES-KW"},l=await Pn(i,r);if(l.usages.includes("deriveBits"))return new Uint8Array(await ct.subtle.deriveBits(a,l,n));if(l.usages.includes("deriveKey"))return ct.subtle.deriveKey(a,l,o,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const Dn=async(t,r,e,i=2048,s=He(new Uint8Array(16)))=>{const n=await Hr(s,t,i,r);return{encryptedKey:await Ne(t.slice(-6),n,e),p2c:i,p2s:At(s)}},On=async(t,r,e,i,s)=>{const n=await Hr(s,t,i,r);return Ke(t.slice(-6),n,e)};function le(t){switch(t){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new yt(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}const Jr=(t,r)=>{if(t.startsWith("RS")||t.startsWith("PS")){const{modulusLength:e}=r.algorithm;if(typeof e!="number"||e<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}},zn=async(t,r,e)=>{if(!St(r))throw new TypeError(Et(r,...bt));if(Dt(r,t,"encrypt","wrapKey"),Jr(t,r),r.usages.includes("encrypt"))return new Uint8Array(await ct.subtle.encrypt(le(t),r,e));if(r.usages.includes("wrapKey")){const i=await ct.subtle.importKey("raw",e,...de);return new Uint8Array(await ct.subtle.wrapKey("raw",i,r,le(t)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},Fn=async(t,r,e)=>{if(!St(r))throw new TypeError(Et(r,...bt));if(Dt(r,t,"decrypt","unwrapKey"),Jr(t,r),r.usages.includes("decrypt"))return new Uint8Array(await ct.subtle.decrypt(le(t),r,e));if(r.usages.includes("unwrapKey")){const i=await ct.subtle.unwrapKey("raw",e,r,le(t),...de);return new Uint8Array(await ct.subtle.exportKey("raw",i))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function Zt(t){return zt(t)&&typeof t.kty=="string"}function Mn(t){return t.kty!=="oct"&&typeof t.d=="string"}function Ln(t){return t.kty!=="oct"&&typeof t.d>"u"}function Nn(t){return Zt(t)&&t.kty==="oct"&&typeof t.k=="string"}function Kn(t){let r,e;switch(t.kty){case"RSA":{switch(t.alg){case"PS256":case"PS384":case"PS512":r={name:"RSA-PSS",hash:`SHA-${t.alg.slice(-3)}`},e=t.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":r={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.alg.slice(-3)}`},e=t.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":r={name:"RSA-OAEP",hash:`SHA-${parseInt(t.alg.slice(-3),10)||1}`},e=t.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new yt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(t.alg){case"ES256":r={name:"ECDSA",namedCurve:"P-256"},e=t.d?["sign"]:["verify"];break;case"ES384":r={name:"ECDSA",namedCurve:"P-384"},e=t.d?["sign"]:["verify"];break;case"ES512":r={name:"ECDSA",namedCurve:"P-521"},e=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":r={name:"ECDH",namedCurve:t.crv},e=t.d?["deriveBits"]:[];break;default:throw new yt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(t.alg){case"Ed25519":r={name:"Ed25519"},e=t.d?["sign"]:["verify"];break;case"EdDSA":r={name:t.crv},e=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":r={name:t.crv},e=t.d?["deriveBits"]:[];break;default:throw new yt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new yt('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:r,keyUsages:e}}const Gr=async t=>{if(!t.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:r,keyUsages:e}=Kn(t),i=[r,t.ext??!1,t.key_ops??e],s={...t};return delete s.alg,delete s.use,ct.subtle.importKey("jwk",s,...i)},$r=t=>wt(t);let Lt,Nt;const qr=t=>t?.[Symbol.toStringTag]==="KeyObject",ue=async(t,r,e,i,s=!1)=>{let n=t.get(r);if(n?.[i])return n[i];const a=await Gr({...e,alg:i});return s&&Object.freeze(r),n?n[i]=a:t.set(r,{[i]:a}),a},Un=(t,r)=>{if(qr(t)){let e=t.export({format:"jwk"});return delete e.d,delete e.dp,delete e.dq,delete e.p,delete e.q,delete e.qi,e.k?$r(e.k):(Nt||(Nt=new WeakMap),ue(Nt,t,e,r))}return Zt(t)?t.k?wt(t.k):(Nt||(Nt=new WeakMap),ue(Nt,t,t,r,!0)):t},Wn=(t,r)=>{if(qr(t)){let e=t.export({format:"jwk"});return e.k?$r(e.k):(Lt||(Lt=new WeakMap),ue(Lt,t,e,r))}return Zt(t)?t.k?wt(t.k):(Lt||(Lt=new WeakMap),ue(Lt,t,t,r,!0)):t},Vr={normalizePublicKey:Un,normalizePrivateKey:Wn};function Je(t){switch(t){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new yt(`Unsupported JWE Algorithm: ${t}`)}}const Ut=t=>He(new Uint8Array(Je(t)>>3));async function Hn(t,r){if(!zt(t))throw new TypeError("JWK must be an object");switch(r||(r=t.alg),t.kty){case"oct":if(typeof t.k!="string"||!t.k)throw new TypeError('missing "k" (Key Value) Parameter value');return wt(t.k);case"RSA":if("oth"in t&&t.oth!==void 0)throw new yt('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Gr({...t,alg:r});default:throw new yt('Unsupported "kty" (Key Type) Parameter value')}}const Wt=t=>t?.[Symbol.toStringTag],Ue=(t,r,e)=>{if(r.use!==void 0&&r.use!=="sig")throw new TypeError("Invalid key for this operation, when present its use must be sig");if(r.key_ops!==void 0&&r.key_ops.includes?.(e)!==!0)throw new TypeError(`Invalid key for this operation, when present its key_ops must include ${e}`);if(r.alg!==void 0&&r.alg!==t)throw new TypeError(`Invalid key for this operation, when present its alg must be ${t}`);return!0},Jn=(t,r,e,i)=>{if(!(r instanceof Uint8Array)){if(i&&Zt(r)){if(Nn(r)&&Ue(t,r,e))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!Fr(r))throw new TypeError(zr(t,r,...bt,"Uint8Array",i?"JSON Web Key":null));if(r.type!=="secret")throw new TypeError(`${Wt(r)} instances for symmetric algorithms must be of type "secret"`)}},Gn=(t,r,e,i)=>{if(i&&Zt(r))switch(e){case"sign":if(Mn(r)&&Ue(t,r,e))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(Ln(r)&&Ue(t,r,e))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!Fr(r))throw new TypeError(zr(t,r,...bt,i?"JSON Web Key":null));if(r.type==="secret")throw new TypeError(`${Wt(r)} instances for asymmetric algorithms must not be of type "secret"`);if(e==="sign"&&r.type==="public")throw new TypeError(`${Wt(r)} instances for asymmetric algorithm signing must be of type "private"`);if(e==="decrypt"&&r.type==="public")throw new TypeError(`${Wt(r)} instances for asymmetric algorithm decryption must be of type "private"`);if(r.algorithm&&e==="verify"&&r.type==="private")throw new TypeError(`${Wt(r)} instances for asymmetric algorithm verifying must be of type "public"`);if(r.algorithm&&e==="encrypt"&&r.type==="private")throw new TypeError(`${Wt(r)} instances for asymmetric algorithm encryption must be of type "public"`)};function Zr(t,r,e,i){r.startsWith("HS")||r==="dir"||r.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(r)?Jn(r,e,i,t):Gn(r,e,i,t)}const jr=Zr.bind(void 0,!1);Zr.bind(void 0,!0);async function $n(t,r,e,i,s){if(!(e instanceof Uint8Array))throw new TypeError(Et(e,"Uint8Array"));const n=parseInt(t.slice(1,4),10),a=await ct.subtle.importKey("raw",e.subarray(n>>3),"AES-CBC",!1,["encrypt"]),o=await ct.subtle.importKey("raw",e.subarray(0,n>>3),{hash:`SHA-${n<<1}`,name:"HMAC"},!1,["sign"]),l=new Uint8Array(await ct.subtle.encrypt({iv:i,name:"AES-CBC"},a,r)),p=Ot(s,i,l,Rr(s.length<<3)),w=new Uint8Array((await ct.subtle.sign("HMAC",o,p)).slice(0,n>>3));return{ciphertext:l,tag:w,iv:i}}async function qn(t,r,e,i,s){let n;e instanceof Uint8Array?n=await ct.subtle.importKey("raw",e,"AES-GCM",!1,["encrypt"]):(Dt(e,t,"encrypt"),n=e);const a=new Uint8Array(await ct.subtle.encrypt({additionalData:s,iv:i,name:"AES-GCM",tagLength:128},n,r)),o=a.slice(-16);return{ciphertext:a.slice(0,-16),tag:o,iv:i}}const Yr=async(t,r,e,i,s)=>{if(!St(e)&&!(e instanceof Uint8Array))throw new TypeError(Et(e,...bt,"Uint8Array"));switch(i?Dr(t,i):i=An(t),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return e instanceof Uint8Array&&ce(e,parseInt(t.slice(-3),10)),$n(t,r,e,i,s);case"A128GCM":case"A192GCM":case"A256GCM":return e instanceof Uint8Array&&ce(e,parseInt(t.slice(1,4),10)),qn(t,r,e,i,s);default:throw new yt("Unsupported JWE Content Encryption Algorithm")}};async function Vn(t,r,e,i){const s=t.slice(0,7),n=await Yr(s,e,r,i,new Uint8Array(0));return{encryptedKey:n.ciphertext,iv:At(n.iv),tag:At(n.tag)}}async function Zn(t,r,e,i,s){const n=t.slice(0,7);return Mr(n,r,e,i,s,new Uint8Array(0))}async function jn(t,r,e,i,s){switch(jr(t,r,"decrypt"),r=await Vr.normalizePrivateKey?.(r,t)||r,t){case"dir":{if(e!==void 0)throw new X("Encountered unexpected JWE Encrypted Key");return r}case"ECDH-ES":if(e!==void 0)throw new X("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!zt(i.epk))throw new X('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!Wr(r))throw new yt("ECDH with the provided key is not allowed or not supported by your javascript runtime");const n=await Hn(i.epk,t);let a,o;if(i.apu!==void 0){if(typeof i.apu!="string")throw new X('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{a=wt(i.apu)}catch{throw new X("Failed to base64url decode the apu")}}if(i.apv!==void 0){if(typeof i.apv!="string")throw new X('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{o=wt(i.apv)}catch{throw new X("Failed to base64url decode the apv")}}const l=await Ur(n,r,t==="ECDH-ES"?i.enc:t,t==="ECDH-ES"?Je(i.enc):parseInt(t.slice(-5,-2),10),a,o);if(t==="ECDH-ES")return l;if(e===void 0)throw new X("JWE Encrypted Key missing");return Ke(t.slice(-6),l,e)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(e===void 0)throw new X("JWE Encrypted Key missing");return Fn(t,r,e)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(e===void 0)throw new X("JWE Encrypted Key missing");if(typeof i.p2c!="number")throw new X('JOSE Header "p2c" (PBES2 Count) missing or invalid');if(i.p2c>1e4)throw new X('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof i.p2s!="string")throw new X('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let a;try{a=wt(i.p2s)}catch{throw new X("Failed to base64url decode the p2s")}return On(t,r,e,i.p2c,a)}case"A128KW":case"A192KW":case"A256KW":{if(e===void 0)throw new X("JWE Encrypted Key missing");return Ke(t,r,e)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(e===void 0)throw new X("JWE Encrypted Key missing");if(typeof i.iv!="string")throw new X('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof i.tag!="string")throw new X('JOSE Header "tag" (Authentication Tag) missing or invalid');let n;try{n=wt(i.iv)}catch{throw new X("Failed to base64url decode the iv")}let a;try{a=wt(i.tag)}catch{throw new X("Failed to base64url decode the tag")}return Zn(t,r,e,n,a)}default:throw new yt('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function Xr(t,r,e,i,s){if(s.crit!==void 0&&i?.crit===void 0)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||i.crit===void 0)return new Set;if(!Array.isArray(i.crit)||i.crit.length===0||i.crit.some(a=>typeof a!="string"||a.length===0))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let n;e!==void 0?n=new Map([...Object.entries(e),...r.entries()]):n=r;for(const a of i.crit){if(!n.has(a))throw new yt(`Extension Header Parameter "${a}" is not recognized`);if(s[a]===void 0)throw new t(`Extension Header Parameter "${a}" is missing`);if(n.get(a)&&i[a]===void 0)throw new t(`Extension Header Parameter "${a}" MUST be integrity protected`)}return new Set(i.crit)}async function Yn(t,r,e){if(!zt(t))throw new X("Flattened JWE must be an object");if(t.protected===void 0&&t.header===void 0&&t.unprotected===void 0)throw new X("JOSE Header missing");if(t.iv!==void 0&&typeof t.iv!="string")throw new X("JWE Initialization Vector incorrect type");if(typeof t.ciphertext!="string")throw new X("JWE Ciphertext missing or incorrect type");if(t.tag!==void 0&&typeof t.tag!="string")throw new X("JWE Authentication Tag incorrect type");if(t.protected!==void 0&&typeof t.protected!="string")throw new X("JWE Protected Header incorrect type");if(t.encrypted_key!==void 0&&typeof t.encrypted_key!="string")throw new X("JWE Encrypted Key incorrect type");if(t.aad!==void 0&&typeof t.aad!="string")throw new X("JWE AAD incorrect type");if(t.header!==void 0&&!zt(t.header))throw new X("JWE Shared Unprotected Header incorrect type");if(t.unprotected!==void 0&&!zt(t.unprotected))throw new X("JWE Per-Recipient Unprotected Header incorrect type");let i;if(t.protected)try{const h=wt(t.protected);i=JSON.parse(Vt.decode(h))}catch{throw new X("JWE Protected Header is invalid")}if(!Lr(i,t.header,t.unprotected))throw new X("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const s={...i,...t.header,...t.unprotected};if(Xr(X,new Map,e?.crit,i,s),s.zip!==void 0)throw new yt('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:n,enc:a}=s;if(typeof n!="string"||!n)throw new X("missing JWE Algorithm (alg) in JWE Header");if(typeof a!="string"||!a)throw new X("missing JWE Encryption Algorithm (enc) in JWE Header");if(n.startsWith("PBES2"))throw new xr('"alg" (Algorithm) Header Parameter value not allowed');let o;if(t.encrypted_key!==void 0)try{o=wt(t.encrypted_key)}catch{throw new X("Failed to base64url decode the encrypted_key")}let l=!1;typeof r=="function"&&(r=await r(i,t),l=!0);let p;try{p=await jn(n,r,o,s,e)}catch(h){if(h instanceof TypeError||h instanceof X||h instanceof yt)throw h;p=Ut(a)}let w,_;if(t.iv!==void 0)try{w=wt(t.iv)}catch{throw new X("Failed to base64url decode the iv")}if(t.tag!==void 0)try{_=wt(t.tag)}catch{throw new X("Failed to base64url decode the tag")}const b=Bt.encode(t.protected??"");let d;t.aad!==void 0?d=Ot(b,Bt.encode("."),Bt.encode(t.aad)):d=b;let m;try{m=wt(t.ciphertext)}catch{throw new X("Failed to base64url decode the ciphertext")}const g={plaintext:await Mr(a,p,m,w,_,d)};if(t.protected!==void 0&&(g.protectedHeader=i),t.aad!==void 0)try{g.additionalAuthenticatedData=wt(t.aad)}catch{throw new X("Failed to base64url decode the aad")}return t.unprotected!==void 0&&(g.sharedUnprotectedHeader=t.unprotected),t.header!==void 0&&(g.unprotectedHeader=t.header),l?{...g,key:r}:g}async function Xn(t,r,e){if(t instanceof Uint8Array&&(t=Vt.decode(t)),typeof t!="string")throw new X("Compact JWE must be a string or Uint8Array");const{0:i,1:s,2:n,3:a,4:o,length:l}=t.split(".");if(l!==5)throw new X("Invalid Compact JWE");const p=await Yn({ciphertext:a,iv:n||void 0,protected:i,tag:o||void 0,encrypted_key:s||void 0},r,e),w={plaintext:p.plaintext,protectedHeader:p.protectedHeader};return typeof r=="function"?{...w,key:p.key}:w}const Qn=Symbol(),ti=async t=>{if(t instanceof Uint8Array)return{kty:"oct",k:At(t)};if(!St(t))throw new TypeError(Et(t,...bt,"Uint8Array"));if(!t.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:r,key_ops:e,alg:i,use:s,...n}=await ct.subtle.exportKey("jwk",t);return n};async function ei(t){return ti(t)}async function ri(t,r,e,i,s={}){let n,a,o;switch(jr(t,e,"encrypt"),e=await Vr.normalizePublicKey?.(e,t)||e,t){case"dir":{o=e;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!Wr(e))throw new yt("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:l,apv:p}=s;let{epk:w}=s;w||(w=(await Rn(e)).privateKey);const{x:_,y:b,crv:d,kty:m}=await ei(w),f=await Ur(e,w,t==="ECDH-ES"?r:t,t==="ECDH-ES"?Je(r):parseInt(t.slice(-5,-2),10),l,p);if(a={epk:{x:_,crv:d,kty:m}},m==="EC"&&(a.epk.y=b),l&&(a.apu=At(l)),p&&(a.apv=At(p)),t==="ECDH-ES"){o=f;break}o=i||Ut(r);const g=t.slice(-6);n=await Ne(g,f,o);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{o=i||Ut(r),n=await zn(t,e,o);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{o=i||Ut(r);const{p2c:l,p2s:p}=s;({encryptedKey:n,...a}=await Dn(t,e,o,l,p));break}case"A128KW":case"A192KW":case"A256KW":{o=i||Ut(r),n=await Ne(t,e,o);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{o=i||Ut(r);const{iv:l}=s;({encryptedKey:n,...a}=await Vn(t,e,o,l));break}default:throw new yt('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:o,encryptedKey:n,parameters:a}}class ni{constructor(r){if(!(r instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=r}setKeyManagementParameters(r){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=r,this}setProtectedHeader(r){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=r,this}setSharedUnprotectedHeader(r){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=r,this}setUnprotectedHeader(r){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=r,this}setAdditionalAuthenticatedData(r){return this._aad=r,this}setContentEncryptionKey(r){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=r,this}setInitializationVector(r){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=r,this}async encrypt(r,e){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new X("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!Lr(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new X("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const i={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(Xr(X,new Map,e?.crit,this._protectedHeader,i),i.zip!==void 0)throw new yt('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:s,enc:n}=i;if(typeof s!="string"||!s)throw new X('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof n!="string"||!n)throw new X('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let a;if(this._cek&&(s==="dir"||s==="ECDH-ES"))throw new TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${s}`);let o;{let f;({cek:o,encryptedKey:a,parameters:f}=await ri(s,n,r,this._cek,this._keyManagementParameters)),f&&(e&&Qn in e?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...f}:this.setUnprotectedHeader(f):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...f}:this.setProtectedHeader(f))}let l,p,w;this._protectedHeader?p=Bt.encode(At(JSON.stringify(this._protectedHeader))):p=Bt.encode(""),this._aad?(w=At(this._aad),l=Ot(p,Bt.encode("."),Bt.encode(w))):l=p;const{ciphertext:_,tag:b,iv:d}=await Yr(n,this._plaintext,o,this._iv,l),m={ciphertext:At(_)};return d&&(m.iv=At(d)),b&&(m.tag=At(b)),a&&(m.encrypted_key=At(a)),w&&(m.aad=w),this._protectedHeader&&(m.protected=Vt.decode(p)),this._sharedUnprotectedHeader&&(m.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(m.header=this._unprotectedHeader),m}}class ii{constructor(r){this._flattened=new ni(r)}setContentEncryptionKey(r){return this._flattened.setContentEncryptionKey(r),this}setInitializationVector(r){return this._flattened.setInitializationVector(r),this}setProtectedHeader(r){return this._flattened.setProtectedHeader(r),this}setKeyManagementParameters(r){return this._flattened.setKeyManagementParameters(r),this}async encrypt(r,e){const i=await this._flattened.encrypt(r,e);return[i.protected,i.encrypted_key,i.iv,i.ciphertext,i.tag].join(".")}}const si=wt;function Qt(t){let r;if(typeof t=="string"){const e=t.split(".");(e.length===3||e.length===5)&&([r]=e)}else if(typeof t=="object"&&t)if("protected"in t)r=t.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof r!="string"||!r)throw new Error;const e=JSON.parse(Vt.decode(si(r)));if(!zt(e))throw new Error;return e}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}var te=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kt={},pe,je;function ai(){return je||(je=1,pe=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),pe}var me={},Pt={},Ye;function Ft(){if(Ye)return Pt;Ye=1;let t;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Pt.getSymbolSize=function(i){if(!i)throw new Error('"version" cannot be null or undefined');if(i<1||i>40)throw new Error('"version" should be in range from 1 to 40');return i*4+17},Pt.getSymbolTotalCodewords=function(i){return r[i]},Pt.getBCHDigit=function(e){let i=0;for(;e!==0;)i++,e>>>=1;return i},Pt.setToSJISFunction=function(i){if(typeof i!="function")throw new Error('"toSJISFunc" is not a valid function.');t=i},Pt.isKanjiModeEnabled=function(){return typeof t<"u"},Pt.toSJIS=function(i){return t(i)},Pt}var ge={},Xe;function Ge(){return Xe||(Xe=1,(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function r(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,s){if(t.isValid(i))return i;try{return r(i)}catch{return s}}})(ge)),ge}var ye,Qe;function oi(){if(Qe)return ye;Qe=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(r){const e=Math.floor(r/8);return(this.buffer[e]>>>7-r%8&1)===1},put:function(r,e){for(let i=0;i<e;i++)this.putBit((r>>>e-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),r&&(this.buffer[e]|=128>>>this.length%8),this.length++}},ye=t,ye}var we,tr;function ci(){if(tr)return we;tr=1;function t(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}return t.prototype.set=function(r,e,i,s){const n=r*this.size+e;this.data[n]=i,s&&(this.reservedBit[n]=!0)},t.prototype.get=function(r,e){return this.data[r*this.size+e]},t.prototype.xor=function(r,e,i){this.data[r*this.size+e]^=i},t.prototype.isReserved=function(r,e){return this.reservedBit[r*this.size+e]},we=t,we}var _e={},er;function li(){return er||(er=1,(function(t){const r=Ft().getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const s=Math.floor(i/7)+2,n=r(i),a=n===145?26:Math.ceil((n-13)/(2*s-2))*2,o=[n-7];for(let l=1;l<s-1;l++)o[l]=o[l-1]-a;return o.push(6),o.reverse()},t.getPositions=function(i){const s=[],n=t.getRowColCoords(i),a=n.length;for(let o=0;o<a;o++)for(let l=0;l<a;l++)o===0&&l===0||o===0&&l===a-1||o===a-1&&l===0||s.push([n[o],n[l]]);return s}})(_e)),_e}var Ee={},rr;function ui(){if(rr)return Ee;rr=1;const t=Ft().getSymbolSize,r=7;return Ee.getPositions=function(i){const s=t(i);return[[0,0],[s-r,0],[0,s-r]]},Ee}var be={},nr;function di(){return nr||(nr=1,(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const r={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const n=s.size;let a=0,o=0,l=0,p=null,w=null;for(let _=0;_<n;_++){o=l=0,p=w=null;for(let b=0;b<n;b++){let d=s.get(_,b);d===p?o++:(o>=5&&(a+=r.N1+(o-5)),p=d,o=1),d=s.get(b,_),d===w?l++:(l>=5&&(a+=r.N1+(l-5)),w=d,l=1)}o>=5&&(a+=r.N1+(o-5)),l>=5&&(a+=r.N1+(l-5))}return a},t.getPenaltyN2=function(s){const n=s.size;let a=0;for(let o=0;o<n-1;o++)for(let l=0;l<n-1;l++){const p=s.get(o,l)+s.get(o,l+1)+s.get(o+1,l)+s.get(o+1,l+1);(p===4||p===0)&&a++}return a*r.N2},t.getPenaltyN3=function(s){const n=s.size;let a=0,o=0,l=0;for(let p=0;p<n;p++){o=l=0;for(let w=0;w<n;w++)o=o<<1&2047|s.get(p,w),w>=10&&(o===1488||o===93)&&a++,l=l<<1&2047|s.get(w,p),w>=10&&(l===1488||l===93)&&a++}return a*r.N3},t.getPenaltyN4=function(s){let n=0;const a=s.data.length;for(let l=0;l<a;l++)n+=s.data[l];return Math.abs(Math.ceil(n*100/a/5)-10)*r.N4};function e(i,s,n){switch(i){case t.Patterns.PATTERN000:return(s+n)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return n%3===0;case t.Patterns.PATTERN011:return(s+n)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(n/3))%2===0;case t.Patterns.PATTERN101:return s*n%2+s*n%3===0;case t.Patterns.PATTERN110:return(s*n%2+s*n%3)%2===0;case t.Patterns.PATTERN111:return(s*n%3+(s+n)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(s,n){const a=n.size;for(let o=0;o<a;o++)for(let l=0;l<a;l++)n.isReserved(l,o)||n.xor(l,o,e(s,l,o))},t.getBestMask=function(s,n){const a=Object.keys(t.Patterns).length;let o=0,l=1/0;for(let p=0;p<a;p++){n(p),t.applyMask(p,s);const w=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(p,s),w<l&&(l=w,o=p)}return o}})(be)),be}var ee={},ir;function tn(){if(ir)return ee;ir=1;const t=Ge(),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],e=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return ee.getBlocksCount=function(s,n){switch(n){case t.L:return r[(s-1)*4+0];case t.M:return r[(s-1)*4+1];case t.Q:return r[(s-1)*4+2];case t.H:return r[(s-1)*4+3];default:return}},ee.getTotalCodewordsCount=function(s,n){switch(n){case t.L:return e[(s-1)*4+0];case t.M:return e[(s-1)*4+1];case t.Q:return e[(s-1)*4+2];case t.H:return e[(s-1)*4+3];default:return}},ee}var ve={},$t={},sr;function fi(){if(sr)return $t;sr=1;const t=new Uint8Array(512),r=new Uint8Array(256);return(function(){let i=1;for(let s=0;s<255;s++)t[s]=i,r[i]=s,i<<=1,i&256&&(i^=285);for(let s=255;s<512;s++)t[s]=t[s-255]})(),$t.log=function(i){if(i<1)throw new Error("log("+i+")");return r[i]},$t.exp=function(i){return t[i]},$t.mul=function(i,s){return i===0||s===0?0:t[r[i]+r[s]]},$t}var ar;function hi(){return ar||(ar=1,(function(t){const r=fi();t.mul=function(i,s){const n=new Uint8Array(i.length+s.length-1);for(let a=0;a<i.length;a++)for(let o=0;o<s.length;o++)n[a+o]^=r.mul(i[a],s[o]);return n},t.mod=function(i,s){let n=new Uint8Array(i);for(;n.length-s.length>=0;){const a=n[0];for(let l=0;l<s.length;l++)n[l]^=r.mul(s[l],a);let o=0;for(;o<n.length&&n[o]===0;)o++;n=n.slice(o)}return n},t.generateECPolynomial=function(i){let s=new Uint8Array([1]);for(let n=0;n<i;n++)s=t.mul(s,new Uint8Array([1,r.exp(n)]));return s}})(ve)),ve}var Ae,or;function pi(){if(or)return Ae;or=1;const t=hi();function r(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}return r.prototype.initialize=function(i){this.degree=i,this.genPoly=t.generateECPolynomial(this.degree)},r.prototype.encode=function(i){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(i.length+this.degree);s.set(i);const n=t.mod(s,this.genPoly),a=this.degree-n.length;if(a>0){const o=new Uint8Array(this.degree);return o.set(n,a),o}return n},Ae=r,Ae}var Se={},Ce={},ke={},cr;function en(){return cr||(cr=1,ke.isValid=function(r){return!isNaN(r)&&r>=1&&r<=40}),ke}var Tt={},lr;function rn(){if(lr)return Tt;lr=1;const t="[0-9]+",r="[A-Z $%*+\\-./:]+";let e="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";e=e.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+e+`)(?:.|[\r
]))+`;Tt.KANJI=new RegExp(e,"g"),Tt.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Tt.BYTE=new RegExp(i,"g"),Tt.NUMERIC=new RegExp(t,"g"),Tt.ALPHANUMERIC=new RegExp(r,"g");const s=new RegExp("^"+e+"$"),n=new RegExp("^"+t+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Tt.testKanji=function(l){return s.test(l)},Tt.testNumeric=function(l){return n.test(l)},Tt.testAlphanumeric=function(l){return a.test(l)},Tt}var ur;function Mt(){return ur||(ur=1,(function(t){const r=en(),e=rn();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(n,a){if(!n.ccBits)throw new Error("Invalid mode: "+n);if(!r.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?n.ccBits[0]:a<27?n.ccBits[1]:n.ccBits[2]},t.getBestModeForData=function(n){return e.testNumeric(n)?t.NUMERIC:e.testAlphanumeric(n)?t.ALPHANUMERIC:e.testKanji(n)?t.KANJI:t.BYTE},t.toString=function(n){if(n&&n.id)return n.id;throw new Error("Invalid mode")},t.isValid=function(n){return n&&n.bit&&n.ccBits};function i(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(n,a){if(t.isValid(n))return n;try{return i(n)}catch{return a}}})(Ce)),Ce}var dr;function mi(){return dr||(dr=1,(function(t){const r=Ft(),e=tn(),i=Ge(),s=Mt(),n=en(),a=7973,o=r.getBCHDigit(a);function l(b,d,m){for(let f=1;f<=40;f++)if(d<=t.getCapacity(f,m,b))return f}function p(b,d){return s.getCharCountIndicator(b,d)+4}function w(b,d){let m=0;return b.forEach(function(f){const g=p(f.mode,d);m+=g+f.getBitsLength()}),m}function _(b,d){for(let m=1;m<=40;m++)if(w(b,m)<=t.getCapacity(m,d,s.MIXED))return m}t.from=function(d,m){return n.isValid(d)?parseInt(d,10):m},t.getCapacity=function(d,m,f){if(!n.isValid(d))throw new Error("Invalid QR Code version");typeof f>"u"&&(f=s.BYTE);const g=r.getSymbolTotalCodewords(d),h=e.getTotalCodewordsCount(d,m),E=(g-h)*8;if(f===s.MIXED)return E;const S=E-p(f,d);switch(f){case s.NUMERIC:return Math.floor(S/10*3);case s.ALPHANUMERIC:return Math.floor(S/11*2);case s.KANJI:return Math.floor(S/13);case s.BYTE:default:return Math.floor(S/8)}},t.getBestVersionForData=function(d,m){let f;const g=i.from(m,i.M);if(Array.isArray(d)){if(d.length>1)return _(d,g);if(d.length===0)return 1;f=d[0]}else f=d;return l(f.mode,f.getLength(),g)},t.getEncodedBits=function(d){if(!n.isValid(d)||d<7)throw new Error("Invalid QR Code version");let m=d<<12;for(;r.getBCHDigit(m)-o>=0;)m^=a<<r.getBCHDigit(m)-o;return d<<12|m}})(Se)),Se}var Ie={},fr;function gi(){if(fr)return Ie;fr=1;const t=Ft(),r=1335,e=21522,i=t.getBCHDigit(r);return Ie.getEncodedBits=function(n,a){const o=n.bit<<3|a;let l=o<<10;for(;t.getBCHDigit(l)-i>=0;)l^=r<<t.getBCHDigit(l)-i;return(o<<10|l)^e},Ie}var Te={},Be,hr;function yi(){if(hr)return Be;hr=1;const t=Mt();function r(e){this.mode=t.NUMERIC,this.data=e.toString()}return r.getBitsLength=function(i){return 10*Math.floor(i/3)+(i%3?i%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(i){let s,n,a;for(s=0;s+3<=this.data.length;s+=3)n=this.data.substr(s,3),a=parseInt(n,10),i.put(a,10);const o=this.data.length-s;o>0&&(n=this.data.substr(s),a=parseInt(n,10),i.put(a,o*3+1))},Be=r,Be}var Re,pr;function wi(){if(pr)return Re;pr=1;const t=Mt(),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function e(i){this.mode=t.ALPHANUMERIC,this.data=i}return e.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(s){let n;for(n=0;n+2<=this.data.length;n+=2){let a=r.indexOf(this.data[n])*45;a+=r.indexOf(this.data[n+1]),s.put(a,11)}this.data.length%2&&s.put(r.indexOf(this.data[n]),6)},Re=e,Re}var xe,mr;function _i(){if(mr)return xe;mr=1;const t=Mt();function r(e){this.mode=t.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}return r.getBitsLength=function(i){return i*8},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){for(let i=0,s=this.data.length;i<s;i++)e.put(this.data[i],8)},xe=r,xe}var Pe,gr;function Ei(){if(gr)return Pe;gr=1;const t=Mt(),r=Ft();function e(i){this.mode=t.KANJI,this.data=i}return e.getBitsLength=function(s){return s*13},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(i){let s;for(s=0;s<this.data.length;s++){let n=r.toSJIS(this.data[s]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),i.put(n,13)}},Pe=e,Pe}var De={exports:{}},yr;function bi(){return yr||(yr=1,(function(t){var r={single_source_shortest_paths:function(e,i,s){var n={},a={};a[i]=0;var o=r.PriorityQueue.make();o.push(i,0);for(var l,p,w,_,b,d,m,f,g;!o.empty();){l=o.pop(),p=l.value,_=l.cost,b=e[p]||{};for(w in b)b.hasOwnProperty(w)&&(d=b[w],m=_+d,f=a[w],g=typeof a[w]>"u",(g||f>m)&&(a[w]=m,o.push(w,m),n[w]=p))}if(typeof s<"u"&&typeof a[s]>"u"){var h=["Could not find a path from ",i," to ",s,"."].join("");throw new Error(h)}return n},extract_shortest_path_from_predecessor_list:function(e,i){for(var s=[],n=i;n;)s.push(n),e[n],n=e[n];return s.reverse(),s},find_path:function(e,i,s){var n=r.single_source_shortest_paths(e,i,s);return r.extract_shortest_path_from_predecessor_list(n,s)},PriorityQueue:{make:function(e){var i=r.PriorityQueue,s={},n;e=e||{};for(n in i)i.hasOwnProperty(n)&&(s[n]=i[n]);return s.queue=[],s.sorter=e.sorter||i.default_sorter,s},default_sorter:function(e,i){return e.cost-i.cost},push:function(e,i){var s={value:e,cost:i};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=r})(De)),De.exports}var wr;function vi(){return wr||(wr=1,(function(t){const r=Mt(),e=yi(),i=wi(),s=_i(),n=Ei(),a=rn(),o=Ft(),l=bi();function p(h){return unescape(encodeURIComponent(h)).length}function w(h,E,S){const C=[];let I;for(;(I=h.exec(S))!==null;)C.push({data:I[0],index:I.index,mode:E,length:I[0].length});return C}function _(h){const E=w(a.NUMERIC,r.NUMERIC,h),S=w(a.ALPHANUMERIC,r.ALPHANUMERIC,h);let C,I;return o.isKanjiModeEnabled()?(C=w(a.BYTE,r.BYTE,h),I=w(a.KANJI,r.KANJI,h)):(C=w(a.BYTE_KANJI,r.BYTE,h),I=[]),E.concat(S,C,I).sort(function(R,z){return R.index-z.index}).map(function(R){return{data:R.data,mode:R.mode,length:R.length}})}function b(h,E){switch(E){case r.NUMERIC:return e.getBitsLength(h);case r.ALPHANUMERIC:return i.getBitsLength(h);case r.KANJI:return n.getBitsLength(h);case r.BYTE:return s.getBitsLength(h)}}function d(h){return h.reduce(function(E,S){const C=E.length-1>=0?E[E.length-1]:null;return C&&C.mode===S.mode?(E[E.length-1].data+=S.data,E):(E.push(S),E)},[])}function m(h){const E=[];for(let S=0;S<h.length;S++){const C=h[S];switch(C.mode){case r.NUMERIC:E.push([C,{data:C.data,mode:r.ALPHANUMERIC,length:C.length},{data:C.data,mode:r.BYTE,length:C.length}]);break;case r.ALPHANUMERIC:E.push([C,{data:C.data,mode:r.BYTE,length:C.length}]);break;case r.KANJI:E.push([C,{data:C.data,mode:r.BYTE,length:p(C.data)}]);break;case r.BYTE:E.push([{data:C.data,mode:r.BYTE,length:p(C.data)}])}}return E}function f(h,E){const S={},C={start:{}};let I=["start"];for(let x=0;x<h.length;x++){const R=h[x],z=[];for(let k=0;k<R.length;k++){const M=R[k],W=""+x+k;z.push(W),S[W]={node:M,lastCount:0},C[W]={};for(let v=0;v<I.length;v++){const B=I[v];S[B]&&S[B].node.mode===M.mode?(C[B][W]=b(S[B].lastCount+M.length,M.mode)-b(S[B].lastCount,M.mode),S[B].lastCount+=M.length):(S[B]&&(S[B].lastCount=M.length),C[B][W]=b(M.length,M.mode)+4+r.getCharCountIndicator(M.mode,E))}}I=z}for(let x=0;x<I.length;x++)C[I[x]].end=0;return{map:C,table:S}}function g(h,E){let S;const C=r.getBestModeForData(h);if(S=r.from(E,C),S!==r.BYTE&&S.bit<C.bit)throw new Error('"'+h+'" cannot be encoded with mode '+r.toString(S)+`.
 Suggested mode is: `+r.toString(C));switch(S===r.KANJI&&!o.isKanjiModeEnabled()&&(S=r.BYTE),S){case r.NUMERIC:return new e(h);case r.ALPHANUMERIC:return new i(h);case r.KANJI:return new n(h);case r.BYTE:return new s(h)}}t.fromArray=function(E){return E.reduce(function(S,C){return typeof C=="string"?S.push(g(C,null)):C.data&&S.push(g(C.data,C.mode)),S},[])},t.fromString=function(E,S){const C=_(E,o.isKanjiModeEnabled()),I=m(C),x=f(I,S),R=l.find_path(x.map,"start","end"),z=[];for(let k=1;k<R.length-1;k++)z.push(x.table[R[k]].node);return t.fromArray(d(z))},t.rawSplit=function(E){return t.fromArray(_(E,o.isKanjiModeEnabled()))}})(Te)),Te}var _r;function Ai(){if(_r)return me;_r=1;const t=Ft(),r=Ge(),e=oi(),i=ci(),s=li(),n=ui(),a=di(),o=tn(),l=pi(),p=mi(),w=gi(),_=Mt(),b=vi();function d(x,R){const z=x.size,k=n.getPositions(R);for(let M=0;M<k.length;M++){const W=k[M][0],v=k[M][1];for(let B=-1;B<=7;B++)if(!(W+B<=-1||z<=W+B))for(let u=-1;u<=7;u++)v+u<=-1||z<=v+u||(B>=0&&B<=6&&(u===0||u===6)||u>=0&&u<=6&&(B===0||B===6)||B>=2&&B<=4&&u>=2&&u<=4?x.set(W+B,v+u,!0,!0):x.set(W+B,v+u,!1,!0))}}function m(x){const R=x.size;for(let z=8;z<R-8;z++){const k=z%2===0;x.set(z,6,k,!0),x.set(6,z,k,!0)}}function f(x,R){const z=s.getPositions(R);for(let k=0;k<z.length;k++){const M=z[k][0],W=z[k][1];for(let v=-2;v<=2;v++)for(let B=-2;B<=2;B++)v===-2||v===2||B===-2||B===2||v===0&&B===0?x.set(M+v,W+B,!0,!0):x.set(M+v,W+B,!1,!0)}}function g(x,R){const z=x.size,k=p.getEncodedBits(R);let M,W,v;for(let B=0;B<18;B++)M=Math.floor(B/3),W=B%3+z-8-3,v=(k>>B&1)===1,x.set(M,W,v,!0),x.set(W,M,v,!0)}function h(x,R,z){const k=x.size,M=w.getEncodedBits(R,z);let W,v;for(W=0;W<15;W++)v=(M>>W&1)===1,W<6?x.set(W,8,v,!0):W<8?x.set(W+1,8,v,!0):x.set(k-15+W,8,v,!0),W<8?x.set(8,k-W-1,v,!0):W<9?x.set(8,15-W-1+1,v,!0):x.set(8,15-W-1,v,!0);x.set(k-8,8,1,!0)}function E(x,R){const z=x.size;let k=-1,M=z-1,W=7,v=0;for(let B=z-1;B>0;B-=2)for(B===6&&B--;;){for(let u=0;u<2;u++)if(!x.isReserved(M,B-u)){let L=!1;v<R.length&&(L=(R[v]>>>W&1)===1),x.set(M,B-u,L),W--,W===-1&&(v++,W=7)}if(M+=k,M<0||z<=M){M-=k,k=-k;break}}}function S(x,R,z){const k=new e;z.forEach(function(u){k.put(u.mode.bit,4),k.put(u.getLength(),_.getCharCountIndicator(u.mode,x)),u.write(k)});const M=t.getSymbolTotalCodewords(x),W=o.getTotalCodewordsCount(x,R),v=(M-W)*8;for(k.getLengthInBits()+4<=v&&k.put(0,4);k.getLengthInBits()%8!==0;)k.putBit(0);const B=(v-k.getLengthInBits())/8;for(let u=0;u<B;u++)k.put(u%2?17:236,8);return C(k,x,R)}function C(x,R,z){const k=t.getSymbolTotalCodewords(R),M=o.getTotalCodewordsCount(R,z),W=k-M,v=o.getBlocksCount(R,z),B=k%v,u=v-B,L=Math.floor(k/v),rt=Math.floor(W/v),J=rt+1,st=L-rt,G=new l(st);let et=0;const O=new Array(v),D=new Array(v);let Y=0;const Z=new Uint8Array(x.buffer);for(let at=0;at<v;at++){const ht=at<u?rt:J;O[at]=Z.slice(et,et+ht),D[at]=G.encode(O[at]),et+=ht,Y=Math.max(Y,ht)}const V=new Uint8Array(k);let ft=0,ut,it;for(ut=0;ut<Y;ut++)for(it=0;it<v;it++)ut<O[it].length&&(V[ft++]=O[it][ut]);for(ut=0;ut<st;ut++)for(it=0;it<v;it++)V[ft++]=D[it][ut];return V}function I(x,R,z,k){let M;if(Array.isArray(x))M=b.fromArray(x);else if(typeof x=="string"){let L=R;if(!L){const rt=b.rawSplit(x);L=p.getBestVersionForData(rt,z)}M=b.fromString(x,L||40)}else throw new Error("Invalid data");const W=p.getBestVersionForData(M,z);if(!W)throw new Error("The amount of data is too big to be stored in a QR Code");if(!R)R=W;else if(R<W)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+W+`.
`);const v=S(R,z,M),B=t.getSymbolSize(R),u=new i(B);return d(u,R),m(u),f(u,R),h(u,z,0),R>=7&&g(u,R),E(u,v),isNaN(k)&&(k=a.getBestMask(u,h.bind(null,u,z))),a.applyMask(k,u),h(u,z,k),{modules:u,version:R,errorCorrectionLevel:z,maskPattern:k,segments:M}}return me.create=function(R,z){if(typeof R>"u"||R==="")throw new Error("No input text");let k=r.M,M,W;return typeof z<"u"&&(k=r.from(z.errorCorrectionLevel,r.M),M=p.from(z.version),W=a.from(z.maskPattern),z.toSJISFunc&&t.setToSJISFunction(z.toSJISFunc)),I(R,M,k,W)},me}var Oe={},ze={},Er;function nn(){return Er||(Er=1,(function(t){function r(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let i=e.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+e);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(n){return[n,n]}))),i.length===6&&i.push("F","F");const s=parseInt(i.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const s=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,n=i.width&&i.width>=21?i.width:void 0,a=i.scale||4;return{width:n,scale:n?4:a,margin:s,color:{dark:r(i.color.dark||"#000000ff"),light:r(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,s){return s.width&&s.width>=i+s.margin*2?s.width/(i+s.margin*2):s.scale},t.getImageWidth=function(i,s){const n=t.getScale(i,s);return Math.floor((i+s.margin*2)*n)},t.qrToImageData=function(i,s,n){const a=s.modules.size,o=s.modules.data,l=t.getScale(a,n),p=Math.floor((a+n.margin*2)*l),w=n.margin*l,_=[n.color.light,n.color.dark];for(let b=0;b<p;b++)for(let d=0;d<p;d++){let m=(b*p+d)*4,f=n.color.light;if(b>=w&&d>=w&&b<p-w&&d<p-w){const g=Math.floor((b-w)/l),h=Math.floor((d-w)/l);f=_[o[g*a+h]?1:0]}i[m++]=f.r,i[m++]=f.g,i[m++]=f.b,i[m]=f.a}}})(ze)),ze}var br;function Si(){return br||(br=1,(function(t){const r=nn();function e(s,n,a){s.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=a,n.width=a,n.style.height=a+"px",n.style.width=a+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(n,a,o){let l=o,p=a;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),a||(p=i()),l=r.getOptions(l);const w=r.getImageWidth(n.modules.size,l),_=p.getContext("2d"),b=_.createImageData(w,w);return r.qrToImageData(b.data,n,l),e(_,p,w),_.putImageData(b,0,0),p},t.renderToDataURL=function(n,a,o){let l=o;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),l||(l={});const p=t.render(n,a,l),w=l.type||"image/png",_=l.rendererOpts||{};return p.toDataURL(w,_.quality)}})(Oe)),Oe}var Fe={},vr;function Ci(){if(vr)return Fe;vr=1;const t=nn();function r(s,n){const a=s.a/255,o=n+'="'+s.hex+'"';return a<1?o+" "+n+'-opacity="'+a.toFixed(2).slice(1)+'"':o}function e(s,n,a){let o=s+n;return typeof a<"u"&&(o+=" "+a),o}function i(s,n,a){let o="",l=0,p=!1,w=0;for(let _=0;_<s.length;_++){const b=Math.floor(_%n),d=Math.floor(_/n);!b&&!p&&(p=!0),s[_]?(w++,_>0&&b>0&&s[_-1]||(o+=p?e("M",b+a,.5+d+a):e("m",l,0),l=0,p=!1),b+1<n&&s[_+1]||(o+=e("h",w),w=0)):l++}return o}return Fe.render=function(n,a,o){const l=t.getOptions(a),p=n.modules.size,w=n.modules.data,_=p+l.margin*2,b=l.color.light.a?"<path "+r(l.color.light,"fill")+' d="M0 0h'+_+"v"+_+'H0z"/>':"",d="<path "+r(l.color.dark,"stroke")+' d="'+i(w,p,l.margin)+'"/>',m='viewBox="0 0 '+_+" "+_+'"',g='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+m+' shape-rendering="crispEdges">'+b+d+`</svg>
`;return typeof o=="function"&&o(null,g),g},Fe}var Ar;function ki(){if(Ar)return Kt;Ar=1;const t=ai(),r=Ai(),e=Si(),i=Ci();function s(n,a,o,l,p){const w=[].slice.call(arguments,1),_=w.length,b=typeof w[_-1]=="function";if(!b&&!t())throw new Error("Callback required as last argument");if(b){if(_<2)throw new Error("Too few arguments provided");_===2?(p=o,o=a,a=l=void 0):_===3&&(a.getContext&&typeof p>"u"?(p=l,l=void 0):(p=l,l=o,o=a,a=void 0))}else{if(_<1)throw new Error("Too few arguments provided");return _===1?(o=a,a=l=void 0):_===2&&!a.getContext&&(l=o,o=a,a=void 0),new Promise(function(d,m){try{const f=r.create(o,l);d(n(f,a,l))}catch(f){m(f)}})}try{const d=r.create(o,l);p(null,n(d,a,l))}catch(d){p(d)}}return Kt.create=r.create,Kt.toCanvas=s.bind(null,e.render),Kt.toDataURL=s.bind(null,e.renderToDataURL),Kt.toString=s.bind(null,function(n,a,o){return i.render(n,o)}),Kt}var Ii=ki();const Ti=Qr(Ii);function re(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Me={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Sr;function Bi(){return Sr||(Sr=1,(function(t,r){(function(e){t.exports=e()})(function(){return(function e(i,s,n){function a(p,w){if(!s[p]){if(!i[p]){var _=typeof re=="function"&&re;if(!w&&_)return _(p,!0);if(o)return o(p,!0);var b=new Error("Cannot find module '"+p+"'");throw b.code="MODULE_NOT_FOUND",b}var d=s[p]={exports:{}};i[p][0].call(d.exports,function(m){var f=i[p][1][m];return a(f||m)},d,d.exports,e,i,s,n)}return s[p].exports}for(var o=typeof re=="function"&&re,l=0;l<n.length;l++)a(n[l]);return a})({1:[function(e,i,s){var n=e("./utils"),a=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var p,w,_,b,d,m,f,g=[],h=0,E=l.length,S=E,C=n.getTypeOf(l)!=="string";h<l.length;)S=E-h,_=C?(p=l[h++],w=h<E?l[h++]:0,h<E?l[h++]:0):(p=l.charCodeAt(h++),w=h<E?l.charCodeAt(h++):0,h<E?l.charCodeAt(h++):0),b=p>>2,d=(3&p)<<4|w>>4,m=1<S?(15&w)<<2|_>>6:64,f=2<S?63&_:64,g.push(o.charAt(b)+o.charAt(d)+o.charAt(m)+o.charAt(f));return g.join("")},s.decode=function(l){var p,w,_,b,d,m,f=0,g=0,h="data:";if(l.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var E,S=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&S--,l.charAt(l.length-2)===o.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=a.uint8array?new Uint8Array(0|S):new Array(0|S);f<l.length;)p=o.indexOf(l.charAt(f++))<<2|(b=o.indexOf(l.charAt(f++)))>>4,w=(15&b)<<4|(d=o.indexOf(l.charAt(f++)))>>2,_=(3&d)<<6|(m=o.indexOf(l.charAt(f++))),E[g++]=p,d!==64&&(E[g++]=w),m!==64&&(E[g++]=_);return E}},{"./support":30,"./utils":32}],2:[function(e,i,s){var n=e("./external"),a=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),l=e("./stream/DataLengthProbe");function p(w,_,b,d,m){this.compressedSize=w,this.uncompressedSize=_,this.crc32=b,this.compression=d,this.compressedContent=m}p.prototype={getContentWorker:function(){var w=new a(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),_=this;return w.on("end",function(){if(this.streamInfo.data_length!==_.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),w},getCompressedWorker:function(){return new a(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(w,_,b){return w.pipe(new o).pipe(new l("uncompressedSize")).pipe(_.compressWorker(b)).pipe(new l("compressedSize")).withStreamInfo("compression",_)},i.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,i,s){var n=e("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},s.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,i,s){var n=e("./utils"),a=(function(){for(var o,l=[],p=0;p<256;p++){o=p;for(var w=0;w<8;w++)o=1&o?3988292384^o>>>1:o>>>1;l[p]=o}return l})();i.exports=function(o,l){return o!==void 0&&o.length?n.getTypeOf(o)!=="string"?(function(p,w,_,b){var d=a,m=b+_;p^=-1;for(var f=b;f<m;f++)p=p>>>8^d[255&(p^w[f])];return-1^p})(0|l,o,o.length,0):(function(p,w,_,b){var d=a,m=b+_;p^=-1;for(var f=b;f<m;f++)p=p>>>8^d[255&(p^w.charCodeAt(f))];return-1^p})(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(e,i,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(e,i,s){var n=null;n=typeof Promise<"u"?Promise:e("lie"),i.exports={Promise:n}},{lie:37}],7:[function(e,i,s){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=e("pako"),o=e("./utils"),l=e("./stream/GenericWorker"),p=n?"uint8array":"array";function w(_,b){l.call(this,"FlateWorker/"+_),this._pako=null,this._pakoAction=_,this._pakoOptions=b,this.meta={}}s.magic="\b\0",o.inherits(w,l),w.prototype.processChunk=function(_){this.meta=_.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(p,_.data),!1)},w.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},w.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},w.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _=this;this._pako.onData=function(b){_.push({data:b,meta:_.meta})}},s.compressWorker=function(_){return new w("Deflate",_)},s.uncompressWorker=function(){return new w("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,i,s){function n(d,m){var f,g="";for(f=0;f<m;f++)g+=String.fromCharCode(255&d),d>>>=8;return g}function a(d,m,f,g,h,E){var S,C,I=d.file,x=d.compression,R=E!==p.utf8encode,z=o.transformTo("string",E(I.name)),k=o.transformTo("string",p.utf8encode(I.name)),M=I.comment,W=o.transformTo("string",E(M)),v=o.transformTo("string",p.utf8encode(M)),B=k.length!==I.name.length,u=v.length!==M.length,L="",rt="",J="",st=I.dir,G=I.date,et={crc32:0,compressedSize:0,uncompressedSize:0};m&&!f||(et.crc32=d.crc32,et.compressedSize=d.compressedSize,et.uncompressedSize=d.uncompressedSize);var O=0;m&&(O|=8),R||!B&&!u||(O|=2048);var D=0,Y=0;st&&(D|=16),h==="UNIX"?(Y=798,D|=(function(V,ft){var ut=V;return V||(ut=ft?16893:33204),(65535&ut)<<16})(I.unixPermissions,st)):(Y=20,D|=(function(V){return 63&(V||0)})(I.dosPermissions)),S=G.getUTCHours(),S<<=6,S|=G.getUTCMinutes(),S<<=5,S|=G.getUTCSeconds()/2,C=G.getUTCFullYear()-1980,C<<=4,C|=G.getUTCMonth()+1,C<<=5,C|=G.getUTCDate(),B&&(rt=n(1,1)+n(w(z),4)+k,L+="up"+n(rt.length,2)+rt),u&&(J=n(1,1)+n(w(W),4)+v,L+="uc"+n(J.length,2)+J);var Z="";return Z+=`
\0`,Z+=n(O,2),Z+=x.magic,Z+=n(S,2),Z+=n(C,2),Z+=n(et.crc32,4),Z+=n(et.compressedSize,4),Z+=n(et.uncompressedSize,4),Z+=n(z.length,2),Z+=n(L.length,2),{fileRecord:_.LOCAL_FILE_HEADER+Z+z+L,dirRecord:_.CENTRAL_FILE_HEADER+n(Y,2)+Z+n(W.length,2)+"\0\0\0\0"+n(D,4)+n(g,4)+z+L+W}}var o=e("../utils"),l=e("../stream/GenericWorker"),p=e("../utf8"),w=e("../crc32"),_=e("../signature");function b(d,m,f,g){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=f,this.encodeFileName=g,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(b,l),b.prototype.push=function(d){var m=d.meta.percent||0,f=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,l.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:f?(m+100*(f-g-1))/f:100}}))},b.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var m=this.streamFiles&&!d.file.dir;if(m){var f=a(d,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:f.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(d){this.accumulate=!1;var m=this.streamFiles&&!d.file.dir,f=a(d,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(f.dirRecord),m)this.push({data:(function(g){return _.DATA_DESCRIPTOR+n(g.crc32,4)+n(g.compressedSize,4)+n(g.uncompressedSize,4)})(d),meta:{percent:100}});else for(this.push({data:f.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var d=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var f=this.bytesWritten-d,g=(function(h,E,S,C,I){var x=o.transformTo("string",I(C));return _.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(h,2)+n(h,2)+n(E,4)+n(S,4)+n(x.length,2)+x})(this.dirRecords.length,f,d,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(d){this._sources.push(d);var m=this;return d.on("data",function(f){m.processChunk(f)}),d.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),d.on("error",function(f){m.error(f)}),this},b.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(d){var m=this._sources;if(!l.prototype.error.call(this,d))return!1;for(var f=0;f<m.length;f++)try{m[f].error(d)}catch{}return!0},b.prototype.lock=function(){l.prototype.lock.call(this);for(var d=this._sources,m=0;m<d.length;m++)d[m].lock()},i.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,i,s){var n=e("../compressions"),a=e("./ZipFileWorker");s.generateWorker=function(o,l,p){var w=new a(l.streamFiles,p,l.platform,l.encodeFileName),_=0;try{o.forEach(function(b,d){_++;var m=(function(E,S){var C=E||S,I=n[C];if(!I)throw new Error(C+" is not a valid compression method !");return I})(d.options.compression,l.compression),f=d.options.compressionOptions||l.compressionOptions||{},g=d.dir,h=d.date;d._compressWorker(m,f).withStreamInfo("file",{name:b,dir:g,date:h,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(w)}),w.entriesCount=_}catch(b){w.error(b)}return w}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,i,s){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new n;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.10.1",n.loadAsync=function(a,o){return new n().loadAsync(a,o)},n.external=e("./external"),i.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,i,s){var n=e("./utils"),a=e("./external"),o=e("./utf8"),l=e("./zipEntries"),p=e("./stream/Crc32Probe"),w=e("./nodejsUtils");function _(b){return new a.Promise(function(d,m){var f=b.decompressed.getContentWorker().pipe(new p);f.on("error",function(g){m(g)}).on("end",function(){f.streamInfo.crc32!==b.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}i.exports=function(b,d){var m=this;return d=n.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),w.isNode&&w.isStream(b)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",b,!0,d.optimizedBinaryString,d.base64).then(function(f){var g=new l(d);return g.load(f),g}).then(function(f){var g=[a.Promise.resolve(f)],h=f.files;if(d.checkCRC32)for(var E=0;E<h.length;E++)g.push(_(h[E]));return a.Promise.all(g)}).then(function(f){for(var g=f.shift(),h=g.files,E=0;E<h.length;E++){var S=h[E],C=S.fileNameStr,I=n.resolve(S.fileNameStr);m.file(I,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:d.createFolders}),S.dir||(m.file(I).unsafeOriginalName=C)}return g.zipComment.length&&(m.comment=g.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,i,s){var n=e("../utils"),a=e("../stream/GenericWorker");function o(l,p){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(p)}n.inherits(o,a),o.prototype._bindStream=function(l){var p=this;(this._stream=l).pause(),l.on("data",function(w){p.push({data:w,meta:{percent:0}})}).on("error",function(w){p.isPaused?this.generatedError=w:p.error(w)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,i,s){var n=e("readable-stream").Readable;function a(o,l,p){n.call(this,l),this._helper=o;var w=this;o.on("data",function(_,b){w.push(_)||w._helper.pause(),p&&p(b)}).on("error",function(_){w.emit("error",_)}).on("end",function(){w.push(null)})}e("../utils").inherits(a,n),a.prototype._read=function(){this._helper.resume()},i.exports=a},{"../utils":32,"readable-stream":16}],14:[function(e,i,s){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,a);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,a)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var a=new Buffer(n);return a.fill(0),a},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(e,i,s){function n(I,x,R){var z,k=o.getTypeOf(x),M=o.extend(R||{},w);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(I=h(I)),M.createFolders&&(z=g(I))&&E.call(this,z,!0);var W=k==="string"&&M.binary===!1&&M.base64===!1;R&&R.binary!==void 0||(M.binary=!W),(x instanceof _&&x.uncompressedSize===0||M.dir||!x||x.length===0)&&(M.base64=!1,M.binary=!0,x="",M.compression="STORE",k="string");var v=null;v=x instanceof _||x instanceof l?x:m.isNode&&m.isStream(x)?new f(I,x):o.prepareContent(I,x,M.binary,M.optimizedBinaryString,M.base64);var B=new b(I,v,M);this.files[I]=B}var a=e("./utf8"),o=e("./utils"),l=e("./stream/GenericWorker"),p=e("./stream/StreamHelper"),w=e("./defaults"),_=e("./compressedObject"),b=e("./zipObject"),d=e("./generate"),m=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),g=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var x=I.lastIndexOf("/");return 0<x?I.substring(0,x):""},h=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},E=function(I,x){return x=x!==void 0?x:w.createFolders,I=h(I),this.files[I]||n.call(this,I,null,{dir:!0,createFolders:x}),this.files[I]};function S(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var x,R,z;for(x in this.files)z=this.files[x],(R=x.slice(this.root.length,x.length))&&x.slice(0,this.root.length)===this.root&&I(R,z)},filter:function(I){var x=[];return this.forEach(function(R,z){I(R,z)&&x.push(z)}),x},file:function(I,x,R){if(arguments.length!==1)return I=this.root+I,n.call(this,I,x,R),this;if(S(I)){var z=I;return this.filter(function(M,W){return!W.dir&&z.test(M)})}var k=this.files[this.root+I];return k&&!k.dir?k:null},folder:function(I){if(!I)return this;if(S(I))return this.filter(function(k,M){return M.dir&&I.test(k)});var x=this.root+I,R=E.call(this,x),z=this.clone();return z.root=R.name,z},remove:function(I){I=this.root+I;var x=this.files[I];if(x||(I.slice(-1)!=="/"&&(I+="/"),x=this.files[I]),x&&!x.dir)delete this.files[I];else for(var R=this.filter(function(k,M){return M.name.slice(0,I.length)===I}),z=0;z<R.length;z++)delete this.files[R[z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var x,R={};try{if((R=o.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");o.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var z=R.comment||this.comment||"";x=d.generateWorker(this,R,z)}catch(k){(x=new l("error")).error(k)}return new p(x,R.type||"string",R.mimeType)},generateAsync:function(I,x){return this.generateInternalStream(I).accumulate(x)},generateNodeStream:function(I,x){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(x)}};i.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,i,s){i.exports=e("stream")},{stream:void 0}],17:[function(e,i,s){var n=e("./DataReader");function a(o){n.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}e("../utils").inherits(a,n),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),p=o.charCodeAt(1),w=o.charCodeAt(2),_=o.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===l&&this.data[b+1]===p&&this.data[b+2]===w&&this.data[b+3]===_)return b-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),p=o.charCodeAt(1),w=o.charCodeAt(2),_=o.charCodeAt(3),b=this.readData(4);return l===b[0]&&p===b[1]&&w===b[2]&&_===b[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},i.exports=a},{"../utils":32,"./DataReader":18}],18:[function(e,i,s){var n=e("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,p=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)p=(p<<8)+this.byteAt(l);return this.index+=o,p},readString:function(o){return n.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},i.exports=a},{"../utils":32}],19:[function(e,i,s){var n=e("./Uint8ArrayReader");function a(o){n.call(this,o)}e("../utils").inherits(a,n),a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},i.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,i,s){var n=e("./DataReader");function a(o){n.call(this,o)}e("../utils").inherits(a,n),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},i.exports=a},{"../utils":32,"./DataReader":18}],21:[function(e,i,s){var n=e("./ArrayReader");function a(o){n.call(this,o)}e("../utils").inherits(a,n),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},i.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(e,i,s){var n=e("../utils"),a=e("../support"),o=e("./ArrayReader"),l=e("./StringReader"),p=e("./NodeBufferReader"),w=e("./Uint8ArrayReader");i.exports=function(_){var b=n.getTypeOf(_);return n.checkSupport(b),b!=="string"||a.uint8array?b==="nodebuffer"?new p(_):a.uint8array?new w(n.transformTo("uint8array",_)):new o(n.transformTo("array",_)):new l(_)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,i,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,i,s){var n=e("./GenericWorker"),a=e("../utils");function o(l){n.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,n),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},i.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,i,s){var n=e("./GenericWorker"),a=e("../crc32");function o(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,n),o.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},i.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,i,s){var n=e("../utils"),a=e("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}n.inherits(o,a),o.prototype.processChunk=function(l){if(l){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+l.data.length}a.prototype.processChunk.call(this,l)},i.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,i,s){var n=e("../utils"),a=e("./GenericWorker");function o(l){a.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(w){p.dataIsReady=!0,p.data=w,p.max=w&&w.length||0,p.type=n.getTypeOf(w),p.isPaused||p._tickAndRepeat()},function(w){p.error(w)})}n.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,p);break;case"uint8array":l=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":l=this.data.slice(this.index,p)}return this.index=p,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,i,s){function n(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},i.exports=n},{}],29:[function(e,i,s){var n=e("../utils"),a=e("./ConvertWorker"),o=e("./GenericWorker"),l=e("../base64"),p=e("../support"),w=e("../external"),_=null;if(p.nodestream)try{_=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(m,f){return new w.Promise(function(g,h){var E=[],S=m._internalType,C=m._outputType,I=m._mimeType;m.on("data",function(x,R){E.push(x),f&&f(R)}).on("error",function(x){E=[],h(x)}).on("end",function(){try{var x=(function(R,z,k){switch(R){case"blob":return n.newBlob(n.transformTo("arraybuffer",z),k);case"base64":return l.encode(z);default:return n.transformTo(R,z)}})(C,(function(R,z){var k,M=0,W=null,v=0;for(k=0;k<z.length;k++)v+=z[k].length;switch(R){case"string":return z.join("");case"array":return Array.prototype.concat.apply([],z);case"uint8array":for(W=new Uint8Array(v),k=0;k<z.length;k++)W.set(z[k],M),M+=z[k].length;return W;case"nodebuffer":return Buffer.concat(z);default:throw new Error("concat : unsupported type '"+R+"'")}})(S,E),I);g(x)}catch(R){h(R)}E=[]}).resume()})}function d(m,f,g){var h=f;switch(f){case"blob":case"arraybuffer":h="uint8array";break;case"base64":h="string"}try{this._internalType=h,this._outputType=f,this._mimeType=g,n.checkSupport(h),this._worker=m.pipe(new a(h)),m.lock()}catch(E){this._worker=new o("error"),this._worker.error(E)}}d.prototype={accumulate:function(m){return b(this,m)},on:function(m,f){var g=this;return m==="data"?this._worker.on(m,function(h){f.call(g,h.data,h.meta)}):this._worker.on(m,function(){n.delay(f,arguments,g)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new _(this,{objectMode:this._outputType!=="nodebuffer"},m)}},i.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,i,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var n=new ArrayBuffer(0);try{s.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(n),s.blob=a.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!e("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(e,i,s){for(var n=e("./utils"),a=e("./support"),o=e("./nodejsUtils"),l=e("./stream/GenericWorker"),p=new Array(256),w=0;w<256;w++)p[w]=252<=w?6:248<=w?5:240<=w?4:224<=w?3:192<=w?2:1;p[254]=p[254]=1;function _(){l.call(this,"utf-8 decode"),this.leftOver=null}function b(){l.call(this,"utf-8 encode")}s.utf8encode=function(d){return a.nodebuffer?o.newBufferFrom(d,"utf-8"):(function(m){var f,g,h,E,S,C=m.length,I=0;for(E=0;E<C;E++)(64512&(g=m.charCodeAt(E)))==55296&&E+1<C&&(64512&(h=m.charCodeAt(E+1)))==56320&&(g=65536+(g-55296<<10)+(h-56320),E++),I+=g<128?1:g<2048?2:g<65536?3:4;for(f=a.uint8array?new Uint8Array(I):new Array(I),E=S=0;S<I;E++)(64512&(g=m.charCodeAt(E)))==55296&&E+1<C&&(64512&(h=m.charCodeAt(E+1)))==56320&&(g=65536+(g-55296<<10)+(h-56320),E++),g<128?f[S++]=g:(g<2048?f[S++]=192|g>>>6:(g<65536?f[S++]=224|g>>>12:(f[S++]=240|g>>>18,f[S++]=128|g>>>12&63),f[S++]=128|g>>>6&63),f[S++]=128|63&g);return f})(d)},s.utf8decode=function(d){return a.nodebuffer?n.transformTo("nodebuffer",d).toString("utf-8"):(function(m){var f,g,h,E,S=m.length,C=new Array(2*S);for(f=g=0;f<S;)if((h=m[f++])<128)C[g++]=h;else if(4<(E=p[h]))C[g++]=65533,f+=E-1;else{for(h&=E===2?31:E===3?15:7;1<E&&f<S;)h=h<<6|63&m[f++],E--;1<E?C[g++]=65533:h<65536?C[g++]=h:(h-=65536,C[g++]=55296|h>>10&1023,C[g++]=56320|1023&h)}return C.length!==g&&(C.subarray?C=C.subarray(0,g):C.length=g),n.applyFromCharCode(C)})(d=n.transformTo(a.uint8array?"uint8array":"array",d))},n.inherits(_,l),_.prototype.processChunk=function(d){var m=n.transformTo(a.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var f=m;(m=new Uint8Array(f.length+this.leftOver.length)).set(this.leftOver,0),m.set(f,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var g=(function(E,S){var C;for((S=S||E.length)>E.length&&(S=E.length),C=S-1;0<=C&&(192&E[C])==128;)C--;return C<0||C===0?S:C+p[E[C]]>S?C:S})(m),h=m;g!==m.length&&(a.uint8array?(h=m.subarray(0,g),this.leftOver=m.subarray(g,m.length)):(h=m.slice(0,g),this.leftOver=m.slice(g,m.length))),this.push({data:s.utf8decode(h),meta:d.meta})},_.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=_,n.inherits(b,l),b.prototype.processChunk=function(d){this.push({data:s.utf8encode(d.data),meta:d.meta})},s.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,i,s){var n=e("./support"),a=e("./base64"),o=e("./nodejsUtils"),l=e("./external");function p(f){return f}function w(f,g){for(var h=0;h<f.length;++h)g[h]=255&f.charCodeAt(h);return g}e("setimmediate"),s.newBlob=function(f,g){s.checkSupport("blob");try{return new Blob([f],{type:g})}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return h.append(f),h.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var _={stringifyByChunk:function(f,g,h){var E=[],S=0,C=f.length;if(C<=h)return String.fromCharCode.apply(null,f);for(;S<C;)g==="array"||g==="nodebuffer"?E.push(String.fromCharCode.apply(null,f.slice(S,Math.min(S+h,C)))):E.push(String.fromCharCode.apply(null,f.subarray(S,Math.min(S+h,C)))),S+=h;return E.join("")},stringifyByChar:function(f){for(var g="",h=0;h<f.length;h++)g+=String.fromCharCode(f[h]);return g},applyCanBeUsed:{uint8array:(function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}})()}};function b(f){var g=65536,h=s.getTypeOf(f),E=!0;if(h==="uint8array"?E=_.applyCanBeUsed.uint8array:h==="nodebuffer"&&(E=_.applyCanBeUsed.nodebuffer),E)for(;1<g;)try{return _.stringifyByChunk(f,h,g)}catch{g=Math.floor(g/2)}return _.stringifyByChar(f)}function d(f,g){for(var h=0;h<f.length;h++)g[h]=f[h];return g}s.applyFromCharCode=b;var m={};m.string={string:p,array:function(f){return w(f,new Array(f.length))},arraybuffer:function(f){return m.string.uint8array(f).buffer},uint8array:function(f){return w(f,new Uint8Array(f.length))},nodebuffer:function(f){return w(f,o.allocBuffer(f.length))}},m.array={string:b,array:p,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return o.newBufferFrom(f)}},m.arraybuffer={string:function(f){return b(new Uint8Array(f))},array:function(f){return d(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:p,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return o.newBufferFrom(new Uint8Array(f))}},m.uint8array={string:b,array:function(f){return d(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:p,nodebuffer:function(f){return o.newBufferFrom(f)}},m.nodebuffer={string:b,array:function(f){return d(f,new Array(f.length))},arraybuffer:function(f){return m.nodebuffer.uint8array(f).buffer},uint8array:function(f){return d(f,new Uint8Array(f.length))},nodebuffer:p},s.transformTo=function(f,g){if(g=g||"",!f)return g;s.checkSupport(f);var h=s.getTypeOf(g);return m[h][f](g)},s.resolve=function(f){for(var g=f.split("/"),h=[],E=0;E<g.length;E++){var S=g[E];S==="."||S===""&&E!==0&&E!==g.length-1||(S===".."?h.pop():h.push(S))}return h.join("/")},s.getTypeOf=function(f){return typeof f=="string"?"string":Object.prototype.toString.call(f)==="[object Array]"?"array":n.nodebuffer&&o.isBuffer(f)?"nodebuffer":n.uint8array&&f instanceof Uint8Array?"uint8array":n.arraybuffer&&f instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(f){if(!n[f.toLowerCase()])throw new Error(f+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(f){var g,h,E="";for(h=0;h<(f||"").length;h++)E+="\\x"+((g=f.charCodeAt(h))<16?"0":"")+g.toString(16).toUpperCase();return E},s.delay=function(f,g,h){setImmediate(function(){f.apply(h||null,g||[])})},s.inherits=function(f,g){function h(){}h.prototype=g.prototype,f.prototype=new h},s.extend=function(){var f,g,h={};for(f=0;f<arguments.length;f++)for(g in arguments[f])Object.prototype.hasOwnProperty.call(arguments[f],g)&&h[g]===void 0&&(h[g]=arguments[f][g]);return h},s.prepareContent=function(f,g,h,E,S){return l.Promise.resolve(g).then(function(C){return n.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(I,x){var R=new FileReader;R.onload=function(z){I(z.target.result)},R.onerror=function(z){x(z.target.error)},R.readAsArrayBuffer(C)}):C}).then(function(C){var I=s.getTypeOf(C);return I?(I==="arraybuffer"?C=s.transformTo("uint8array",C):I==="string"&&(S?C=a.decode(C):h&&E!==!0&&(C=(function(x){return w(x,n.uint8array?new Uint8Array(x.length):new Array(x.length))})(C))),C):l.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,i,s){var n=e("./reader/readerFor"),a=e("./utils"),o=e("./signature"),l=e("./zipEntry"),p=e("./support");function w(_){this.files=[],this.loadOptions=_}w.prototype={checkSignature:function(_){if(!this.reader.readAndCheckSignature(_)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(b)+", expected "+a.pretty(_)+")")}},isSignature:function(_,b){var d=this.reader.index;this.reader.setIndex(_);var m=this.reader.readString(4)===b;return this.reader.setIndex(d),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _=this.reader.readData(this.zipCommentLength),b=p.uint8array?"uint8array":"array",d=a.transformTo(b,_);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _,b,d,m=this.zip64EndOfCentralSize-44;0<m;)_=this.reader.readInt(2),b=this.reader.readInt(4),d=this.reader.readData(b),this.zip64ExtensibleData[_]={id:_,length:b,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _,b;for(_=0;_<this.files.length;_++)b=this.files[_],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var _;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(_=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(_);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(_<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(_);var b=_;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(_=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var m=b-d;if(0<m)this.isSignature(b,o.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(_){this.reader=n(_)},load:function(_){this.prepareReader(_),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=w},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,i,s){var n=e("./reader/readerFor"),a=e("./utils"),o=e("./compressedObject"),l=e("./crc32"),p=e("./utf8"),w=e("./compressions"),_=e("./support");function b(d,m){this.options=d,this.loadOptions=m}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var m,f;if(d.skip(22),this.fileNameLength=d.readInt(2),f=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(f),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=(function(g){for(var h in w)if(Object.prototype.hasOwnProperty.call(w,h)&&w[h].magic===g)return w[h];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,m,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var m=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(m),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=n(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var m,f,g,h=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<h;)m=d.readInt(2),f=d.readInt(2),g=d.readData(f),this.extraFields[m]={id:m,length:f,value:g};d.setIndex(h)},handleUTF8:function(){var d=_.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var f=a.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(f)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var h=a.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(h)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var m=n(d.value);return m.readInt(1)!==1||l(this.fileName)!==m.readInt(4)?null:p.utf8decode(m.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var m=n(d.value);return m.readInt(1)!==1||l(this.fileComment)!==m.readInt(4)?null:p.utf8decode(m.readData(d.length-5))}return null}},i.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,i,s){function n(m,f,g){this.name=m,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=f,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var a=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),l=e("./utf8"),p=e("./compressedObject"),w=e("./stream/GenericWorker");n.prototype={internalStream:function(m){var f=null,g="string";try{if(!m)throw new Error("No output type specified.");var h=(g=m.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),f=this._decompressWorker();var E=!this._dataBinary;E&&!h&&(f=f.pipe(new l.Utf8EncodeWorker)),!E&&h&&(f=f.pipe(new l.Utf8DecodeWorker))}catch(S){(f=new w("error")).error(S)}return new a(f,g,"")},async:function(m,f){return this.internalStream(m).accumulate(f)},nodeStream:function(m,f){return this.internalStream(m||"nodebuffer").toNodejsStream(f)},_compressWorker:function(m,f){if(this._data instanceof p&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new l.Utf8EncodeWorker)),p.createWorkerFrom(g,m,f)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof w?this._data:new o(this._data)}};for(var _=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<_.length;d++)n.prototype[_[d]]=b;i.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,i,s){(function(n){var a,o,l=n.MutationObserver||n.WebKitMutationObserver;if(l){var p=0,w=new l(m),_=n.document.createTextNode("");w.observe(_,{characterData:!0}),a=function(){_.data=p=++p%2}}else if(n.setImmediate||n.MessageChannel===void 0)a="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var f=n.document.createElement("script");f.onreadystatechange=function(){m(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},n.document.documentElement.appendChild(f)}:function(){setTimeout(m,0)};else{var b=new n.MessageChannel;b.port1.onmessage=m,a=function(){b.port2.postMessage(0)}}var d=[];function m(){var f,g;o=!0;for(var h=d.length;h;){for(g=d,d=[],f=-1;++f<h;)g[f]();h=d.length}o=!1}i.exports=function(f){d.push(f)!==1||o||a()}}).call(this,typeof te<"u"?te:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,i,s){var n=e("immediate");function a(){}var o={},l=["REJECTED"],p=["FULFILLED"],w=["PENDING"];function _(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=w,this.queue=[],this.outcome=void 0,h!==a&&f(this,h)}function b(h,E,S){this.promise=h,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function d(h,E,S){n(function(){var C;try{C=E(S)}catch(I){return o.reject(h,I)}C===h?o.reject(h,new TypeError("Cannot resolve promise with itself")):o.resolve(h,C)})}function m(h){var E=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof E=="function")return function(){E.apply(h,arguments)}}function f(h,E){var S=!1;function C(R){S||(S=!0,o.reject(h,R))}function I(R){S||(S=!0,o.resolve(h,R))}var x=g(function(){E(I,C)});x.status==="error"&&C(x.value)}function g(h,E){var S={};try{S.value=h(E),S.status="success"}catch(C){S.status="error",S.value=C}return S}(i.exports=_).prototype.finally=function(h){if(typeof h!="function")return this;var E=this.constructor;return this.then(function(S){return E.resolve(h()).then(function(){return S})},function(S){return E.resolve(h()).then(function(){throw S})})},_.prototype.catch=function(h){return this.then(null,h)},_.prototype.then=function(h,E){if(typeof h!="function"&&this.state===p||typeof E!="function"&&this.state===l)return this;var S=new this.constructor(a);return this.state!==w?d(S,this.state===p?h:E,this.outcome):this.queue.push(new b(S,h,E)),S},b.prototype.callFulfilled=function(h){o.resolve(this.promise,h)},b.prototype.otherCallFulfilled=function(h){d(this.promise,this.onFulfilled,h)},b.prototype.callRejected=function(h){o.reject(this.promise,h)},b.prototype.otherCallRejected=function(h){d(this.promise,this.onRejected,h)},o.resolve=function(h,E){var S=g(m,E);if(S.status==="error")return o.reject(h,S.value);var C=S.value;if(C)f(h,C);else{h.state=p,h.outcome=E;for(var I=-1,x=h.queue.length;++I<x;)h.queue[I].callFulfilled(E)}return h},o.reject=function(h,E){h.state=l,h.outcome=E;for(var S=-1,C=h.queue.length;++S<C;)h.queue[S].callRejected(E);return h},_.resolve=function(h){return h instanceof this?h:o.resolve(new this(a),h)},_.reject=function(h){var E=new this(a);return o.reject(E,h)},_.all=function(h){var E=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=h.length,C=!1;if(!S)return this.resolve([]);for(var I=new Array(S),x=0,R=-1,z=new this(a);++R<S;)k(h[R],R);return z;function k(M,W){E.resolve(M).then(function(v){I[W]=v,++x!==S||C||(C=!0,o.resolve(z,I))},function(v){C||(C=!0,o.reject(z,v))})}},_.race=function(h){var E=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=h.length,C=!1;if(!S)return this.resolve([]);for(var I=-1,x=new this(a);++I<S;)R=h[I],E.resolve(R).then(function(z){C||(C=!0,o.resolve(x,z))},function(z){C||(C=!0,o.reject(x,z))});var R;return x}},{immediate:36}],38:[function(e,i,s){var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),i.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,i,s){var n=e("./zlib/deflate"),a=e("./utils/common"),o=e("./utils/strings"),l=e("./zlib/messages"),p=e("./zlib/zstream"),w=Object.prototype.toString,_=0,b=-1,d=0,m=8;function f(h){if(!(this instanceof f))return new f(h);this.options=a.assign({level:b,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},h||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var S=n.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(S!==_)throw new Error(l[S]);if(E.header&&n.deflateSetHeader(this.strm,E.header),E.dictionary){var C;if(C=typeof E.dictionary=="string"?o.string2buf(E.dictionary):w.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(S=n.deflateSetDictionary(this.strm,C))!==_)throw new Error(l[S]);this._dict_set=!0}}function g(h,E){var S=new f(E);if(S.push(h,!0),S.err)throw S.msg||l[S.err];return S.result}f.prototype.push=function(h,E){var S,C,I=this.strm,x=this.options.chunkSize;if(this.ended)return!1;C=E===~~E?E:E===!0?4:0,typeof h=="string"?I.input=o.string2buf(h):w.call(h)==="[object ArrayBuffer]"?I.input=new Uint8Array(h):I.input=h,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new a.Buf8(x),I.next_out=0,I.avail_out=x),(S=n.deflate(I,C))!==1&&S!==_)return this.onEnd(S),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(I.output,I.next_out))):this.onData(a.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&S!==1);return C===4?(S=n.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===_):C!==2||(this.onEnd(_),!(I.avail_out=0))},f.prototype.onData=function(h){this.chunks.push(h)},f.prototype.onEnd=function(h){h===_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},s.Deflate=f,s.deflate=g,s.deflateRaw=function(h,E){return(E=E||{}).raw=!0,g(h,E)},s.gzip=function(h,E){return(E=E||{}).gzip=!0,g(h,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,i,s){var n=e("./zlib/inflate"),a=e("./utils/common"),o=e("./utils/strings"),l=e("./zlib/constants"),p=e("./zlib/messages"),w=e("./zlib/zstream"),_=e("./zlib/gzheader"),b=Object.prototype.toString;function d(f){if(!(this instanceof d))return new d(f);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},f||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||f&&f.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&(15&g.windowBits)==0&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new w,this.strm.avail_out=0;var h=n.inflateInit2(this.strm,g.windowBits);if(h!==l.Z_OK)throw new Error(p[h]);this.header=new _,n.inflateGetHeader(this.strm,this.header)}function m(f,g){var h=new d(g);if(h.push(f,!0),h.err)throw h.msg||p[h.err];return h.result}d.prototype.push=function(f,g){var h,E,S,C,I,x,R=this.strm,z=this.options.chunkSize,k=this.options.dictionary,M=!1;if(this.ended)return!1;E=g===~~g?g:g===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof f=="string"?R.input=o.binstring2buf(f):b.call(f)==="[object ArrayBuffer]"?R.input=new Uint8Array(f):R.input=f,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new a.Buf8(z),R.next_out=0,R.avail_out=z),(h=n.inflate(R,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&k&&(x=typeof k=="string"?o.string2buf(k):b.call(k)==="[object ArrayBuffer]"?new Uint8Array(k):k,h=n.inflateSetDictionary(this.strm,x)),h===l.Z_BUF_ERROR&&M===!0&&(h=l.Z_OK,M=!1),h!==l.Z_STREAM_END&&h!==l.Z_OK)return this.onEnd(h),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&h!==l.Z_STREAM_END&&(R.avail_in!==0||E!==l.Z_FINISH&&E!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=o.utf8border(R.output,R.next_out),C=R.next_out-S,I=o.buf2string(R.output,S),R.next_out=C,R.avail_out=z-C,C&&a.arraySet(R.output,R.output,S,C,0),this.onData(I)):this.onData(a.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(M=!0)}while((0<R.avail_in||R.avail_out===0)&&h!==l.Z_STREAM_END);return h===l.Z_STREAM_END&&(E=l.Z_FINISH),E===l.Z_FINISH?(h=n.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===l.Z_OK):E!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(R.avail_out=0))},d.prototype.onData=function(f){this.chunks.push(f)},d.prototype.onEnd=function(f){f===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},s.Inflate=d,s.inflate=m,s.inflateRaw=function(f,g){return(g=g||{}).raw=!0,m(f,g)},s.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,i,s){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var w=p.shift();if(w){if(typeof w!="object")throw new TypeError(w+"must be non-object");for(var _ in w)w.hasOwnProperty(_)&&(l[_]=w[_])}}return l},s.shrinkBuf=function(l,p){return l.length===p?l:l.subarray?l.subarray(0,p):(l.length=p,l)};var a={arraySet:function(l,p,w,_,b){if(p.subarray&&l.subarray)l.set(p.subarray(w,w+_),b);else for(var d=0;d<_;d++)l[b+d]=p[w+d]},flattenChunks:function(l){var p,w,_,b,d,m;for(p=_=0,w=l.length;p<w;p++)_+=l[p].length;for(m=new Uint8Array(_),p=b=0,w=l.length;p<w;p++)d=l[p],m.set(d,b),b+=d.length;return m}},o={arraySet:function(l,p,w,_,b){for(var d=0;d<_;d++)l[b+d]=p[w+d]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,a)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,o))},s.setTyped(n)},{}],42:[function(e,i,s){var n=e("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new n.Buf8(256),p=0;p<256;p++)l[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function w(_,b){if(b<65537&&(_.subarray&&o||!_.subarray&&a))return String.fromCharCode.apply(null,n.shrinkBuf(_,b));for(var d="",m=0;m<b;m++)d+=String.fromCharCode(_[m]);return d}l[254]=l[254]=1,s.string2buf=function(_){var b,d,m,f,g,h=_.length,E=0;for(f=0;f<h;f++)(64512&(d=_.charCodeAt(f)))==55296&&f+1<h&&(64512&(m=_.charCodeAt(f+1)))==56320&&(d=65536+(d-55296<<10)+(m-56320),f++),E+=d<128?1:d<2048?2:d<65536?3:4;for(b=new n.Buf8(E),f=g=0;g<E;f++)(64512&(d=_.charCodeAt(f)))==55296&&f+1<h&&(64512&(m=_.charCodeAt(f+1)))==56320&&(d=65536+(d-55296<<10)+(m-56320),f++),d<128?b[g++]=d:(d<2048?b[g++]=192|d>>>6:(d<65536?b[g++]=224|d>>>12:(b[g++]=240|d>>>18,b[g++]=128|d>>>12&63),b[g++]=128|d>>>6&63),b[g++]=128|63&d);return b},s.buf2binstring=function(_){return w(_,_.length)},s.binstring2buf=function(_){for(var b=new n.Buf8(_.length),d=0,m=b.length;d<m;d++)b[d]=_.charCodeAt(d);return b},s.buf2string=function(_,b){var d,m,f,g,h=b||_.length,E=new Array(2*h);for(d=m=0;d<h;)if((f=_[d++])<128)E[m++]=f;else if(4<(g=l[f]))E[m++]=65533,d+=g-1;else{for(f&=g===2?31:g===3?15:7;1<g&&d<h;)f=f<<6|63&_[d++],g--;1<g?E[m++]=65533:f<65536?E[m++]=f:(f-=65536,E[m++]=55296|f>>10&1023,E[m++]=56320|1023&f)}return w(E,m)},s.utf8border=function(_,b){var d;for((b=b||_.length)>_.length&&(b=_.length),d=b-1;0<=d&&(192&_[d])==128;)d--;return d<0||d===0?b:d+l[_[d]]>b?d:b}},{"./common":41}],43:[function(e,i,s){i.exports=function(n,a,o,l){for(var p=65535&n|0,w=n>>>16&65535|0,_=0;o!==0;){for(o-=_=2e3<o?2e3:o;w=w+(p=p+a[l++]|0)|0,--_;);p%=65521,w%=65521}return p|w<<16|0}},{}],44:[function(e,i,s){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,i,s){var n=(function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var p=0;p<8;p++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o})();i.exports=function(a,o,l,p){var w=n,_=p+l;a^=-1;for(var b=p;b<_;b++)a=a>>>8^w[255&(a^o[b])];return-1^a}},{}],46:[function(e,i,s){var n,a=e("../utils/common"),o=e("./trees"),l=e("./adler32"),p=e("./crc32"),w=e("./messages"),_=0,b=4,d=0,m=-2,f=-1,g=4,h=2,E=8,S=9,C=286,I=30,x=19,R=2*C+1,z=15,k=3,M=258,W=M+k+1,v=42,B=113,u=1,L=2,rt=3,J=4;function st(c,N){return c.msg=w[N],N}function G(c){return(c<<1)-(4<c?9:0)}function et(c){for(var N=c.length;0<=--N;)c[N]=0}function O(c){var N=c.state,F=N.pending;F>c.avail_out&&(F=c.avail_out),F!==0&&(a.arraySet(c.output,N.pending_buf,N.pending_out,F,c.next_out),c.next_out+=F,N.pending_out+=F,c.total_out+=F,c.avail_out-=F,N.pending-=F,N.pending===0&&(N.pending_out=0))}function D(c,N){o._tr_flush_block(c,0<=c.block_start?c.block_start:-1,c.strstart-c.block_start,N),c.block_start=c.strstart,O(c.strm)}function Y(c,N){c.pending_buf[c.pending++]=N}function Z(c,N){c.pending_buf[c.pending++]=N>>>8&255,c.pending_buf[c.pending++]=255&N}function V(c,N){var F,A,y=c.max_chain_length,T=c.strstart,U=c.prev_length,H=c.nice_match,P=c.strstart>c.w_size-W?c.strstart-(c.w_size-W):0,$=c.window,j=c.w_mask,q=c.prev,Q=c.strstart+M,dt=$[T+U-1],ot=$[T+U];c.prev_length>=c.good_match&&(y>>=2),H>c.lookahead&&(H=c.lookahead);do if($[(F=N)+U]===ot&&$[F+U-1]===dt&&$[F]===$[T]&&$[++F]===$[T+1]){T+=2,F++;do;while($[++T]===$[++F]&&$[++T]===$[++F]&&$[++T]===$[++F]&&$[++T]===$[++F]&&$[++T]===$[++F]&&$[++T]===$[++F]&&$[++T]===$[++F]&&$[++T]===$[++F]&&T<Q);if(A=M-(Q-T),T=Q-M,U<A){if(c.match_start=N,H<=(U=A))break;dt=$[T+U-1],ot=$[T+U]}}while((N=q[N&j])>P&&--y!=0);return U<=c.lookahead?U:c.lookahead}function ft(c){var N,F,A,y,T,U,H,P,$,j,q=c.w_size;do{if(y=c.window_size-c.lookahead-c.strstart,c.strstart>=q+(q-W)){for(a.arraySet(c.window,c.window,q,q,0),c.match_start-=q,c.strstart-=q,c.block_start-=q,N=F=c.hash_size;A=c.head[--N],c.head[N]=q<=A?A-q:0,--F;);for(N=F=q;A=c.prev[--N],c.prev[N]=q<=A?A-q:0,--F;);y+=q}if(c.strm.avail_in===0)break;if(U=c.strm,H=c.window,P=c.strstart+c.lookahead,$=y,j=void 0,j=U.avail_in,$<j&&(j=$),F=j===0?0:(U.avail_in-=j,a.arraySet(H,U.input,U.next_in,j,P),U.state.wrap===1?U.adler=l(U.adler,H,j,P):U.state.wrap===2&&(U.adler=p(U.adler,H,j,P)),U.next_in+=j,U.total_in+=j,j),c.lookahead+=F,c.lookahead+c.insert>=k)for(T=c.strstart-c.insert,c.ins_h=c.window[T],c.ins_h=(c.ins_h<<c.hash_shift^c.window[T+1])&c.hash_mask;c.insert&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[T+k-1])&c.hash_mask,c.prev[T&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=T,T++,c.insert--,!(c.lookahead+c.insert<k)););}while(c.lookahead<W&&c.strm.avail_in!==0)}function ut(c,N){for(var F,A;;){if(c.lookahead<W){if(ft(c),c.lookahead<W&&N===_)return u;if(c.lookahead===0)break}if(F=0,c.lookahead>=k&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+k-1])&c.hash_mask,F=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),F!==0&&c.strstart-F<=c.w_size-W&&(c.match_length=V(c,F)),c.match_length>=k)if(A=o._tr_tally(c,c.strstart-c.match_start,c.match_length-k),c.lookahead-=c.match_length,c.match_length<=c.max_lazy_match&&c.lookahead>=k){for(c.match_length--;c.strstart++,c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+k-1])&c.hash_mask,F=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart,--c.match_length!=0;);c.strstart++}else c.strstart+=c.match_length,c.match_length=0,c.ins_h=c.window[c.strstart],c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+1])&c.hash_mask;else A=o._tr_tally(c,0,c.window[c.strstart]),c.lookahead--,c.strstart++;if(A&&(D(c,!1),c.strm.avail_out===0))return u}return c.insert=c.strstart<k-1?c.strstart:k-1,N===b?(D(c,!0),c.strm.avail_out===0?rt:J):c.last_lit&&(D(c,!1),c.strm.avail_out===0)?u:L}function it(c,N){for(var F,A,y;;){if(c.lookahead<W){if(ft(c),c.lookahead<W&&N===_)return u;if(c.lookahead===0)break}if(F=0,c.lookahead>=k&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+k-1])&c.hash_mask,F=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),c.prev_length=c.match_length,c.prev_match=c.match_start,c.match_length=k-1,F!==0&&c.prev_length<c.max_lazy_match&&c.strstart-F<=c.w_size-W&&(c.match_length=V(c,F),c.match_length<=5&&(c.strategy===1||c.match_length===k&&4096<c.strstart-c.match_start)&&(c.match_length=k-1)),c.prev_length>=k&&c.match_length<=c.prev_length){for(y=c.strstart+c.lookahead-k,A=o._tr_tally(c,c.strstart-1-c.prev_match,c.prev_length-k),c.lookahead-=c.prev_length-1,c.prev_length-=2;++c.strstart<=y&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+k-1])&c.hash_mask,F=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),--c.prev_length!=0;);if(c.match_available=0,c.match_length=k-1,c.strstart++,A&&(D(c,!1),c.strm.avail_out===0))return u}else if(c.match_available){if((A=o._tr_tally(c,0,c.window[c.strstart-1]))&&D(c,!1),c.strstart++,c.lookahead--,c.strm.avail_out===0)return u}else c.match_available=1,c.strstart++,c.lookahead--}return c.match_available&&(A=o._tr_tally(c,0,c.window[c.strstart-1]),c.match_available=0),c.insert=c.strstart<k-1?c.strstart:k-1,N===b?(D(c,!0),c.strm.avail_out===0?rt:J):c.last_lit&&(D(c,!1),c.strm.avail_out===0)?u:L}function at(c,N,F,A,y){this.good_length=c,this.max_lazy=N,this.nice_length=F,this.max_chain=A,this.func=y}function ht(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*R),this.dyn_dtree=new a.Buf16(2*(2*I+1)),this.bl_tree=new a.Buf16(2*(2*x+1)),et(this.dyn_ltree),et(this.dyn_dtree),et(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(z+1),this.heap=new a.Buf16(2*C+1),et(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*C+1),et(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function mt(c){var N;return c&&c.state?(c.total_in=c.total_out=0,c.data_type=h,(N=c.state).pending=0,N.pending_out=0,N.wrap<0&&(N.wrap=-N.wrap),N.status=N.wrap?v:B,c.adler=N.wrap===2?0:1,N.last_flush=_,o._tr_init(N),d):st(c,m)}function kt(c){var N=mt(c);return N===d&&(function(F){F.window_size=2*F.w_size,et(F.head),F.max_lazy_match=n[F.level].max_lazy,F.good_match=n[F.level].good_length,F.nice_match=n[F.level].nice_length,F.max_chain_length=n[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=k-1,F.match_available=0,F.ins_h=0})(c.state),N}function Ct(c,N,F,A,y,T){if(!c)return m;var U=1;if(N===f&&(N=6),A<0?(U=0,A=-A):15<A&&(U=2,A-=16),y<1||S<y||F!==E||A<8||15<A||N<0||9<N||T<0||g<T)return st(c,m);A===8&&(A=9);var H=new ht;return(c.state=H).strm=c,H.wrap=U,H.gzhead=null,H.w_bits=A,H.w_size=1<<H.w_bits,H.w_mask=H.w_size-1,H.hash_bits=y+7,H.hash_size=1<<H.hash_bits,H.hash_mask=H.hash_size-1,H.hash_shift=~~((H.hash_bits+k-1)/k),H.window=new a.Buf8(2*H.w_size),H.head=new a.Buf16(H.hash_size),H.prev=new a.Buf16(H.w_size),H.lit_bufsize=1<<y+6,H.pending_buf_size=4*H.lit_bufsize,H.pending_buf=new a.Buf8(H.pending_buf_size),H.d_buf=1*H.lit_bufsize,H.l_buf=3*H.lit_bufsize,H.level=N,H.strategy=T,H.method=F,kt(c)}n=[new at(0,0,0,0,function(c,N){var F=65535;for(F>c.pending_buf_size-5&&(F=c.pending_buf_size-5);;){if(c.lookahead<=1){if(ft(c),c.lookahead===0&&N===_)return u;if(c.lookahead===0)break}c.strstart+=c.lookahead,c.lookahead=0;var A=c.block_start+F;if((c.strstart===0||c.strstart>=A)&&(c.lookahead=c.strstart-A,c.strstart=A,D(c,!1),c.strm.avail_out===0)||c.strstart-c.block_start>=c.w_size-W&&(D(c,!1),c.strm.avail_out===0))return u}return c.insert=0,N===b?(D(c,!0),c.strm.avail_out===0?rt:J):(c.strstart>c.block_start&&(D(c,!1),c.strm.avail_out),u)}),new at(4,4,8,4,ut),new at(4,5,16,8,ut),new at(4,6,32,32,ut),new at(4,4,16,16,it),new at(8,16,32,32,it),new at(8,16,128,128,it),new at(8,32,128,256,it),new at(32,128,258,1024,it),new at(32,258,258,4096,it)],s.deflateInit=function(c,N){return Ct(c,N,E,15,8,0)},s.deflateInit2=Ct,s.deflateReset=kt,s.deflateResetKeep=mt,s.deflateSetHeader=function(c,N){return c&&c.state?c.state.wrap!==2?m:(c.state.gzhead=N,d):m},s.deflate=function(c,N){var F,A,y,T;if(!c||!c.state||5<N||N<0)return c?st(c,m):m;if(A=c.state,!c.output||!c.input&&c.avail_in!==0||A.status===666&&N!==b)return st(c,c.avail_out===0?-5:m);if(A.strm=c,F=A.last_flush,A.last_flush=N,A.status===v)if(A.wrap===2)c.adler=0,Y(A,31),Y(A,139),Y(A,8),A.gzhead?(Y(A,(A.gzhead.text?1:0)+(A.gzhead.hcrc?2:0)+(A.gzhead.extra?4:0)+(A.gzhead.name?8:0)+(A.gzhead.comment?16:0)),Y(A,255&A.gzhead.time),Y(A,A.gzhead.time>>8&255),Y(A,A.gzhead.time>>16&255),Y(A,A.gzhead.time>>24&255),Y(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),Y(A,255&A.gzhead.os),A.gzhead.extra&&A.gzhead.extra.length&&(Y(A,255&A.gzhead.extra.length),Y(A,A.gzhead.extra.length>>8&255)),A.gzhead.hcrc&&(c.adler=p(c.adler,A.pending_buf,A.pending,0)),A.gzindex=0,A.status=69):(Y(A,0),Y(A,0),Y(A,0),Y(A,0),Y(A,0),Y(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),Y(A,3),A.status=B);else{var U=E+(A.w_bits-8<<4)<<8;U|=(2<=A.strategy||A.level<2?0:A.level<6?1:A.level===6?2:3)<<6,A.strstart!==0&&(U|=32),U+=31-U%31,A.status=B,Z(A,U),A.strstart!==0&&(Z(A,c.adler>>>16),Z(A,65535&c.adler)),c.adler=1}if(A.status===69)if(A.gzhead.extra){for(y=A.pending;A.gzindex<(65535&A.gzhead.extra.length)&&(A.pending!==A.pending_buf_size||(A.gzhead.hcrc&&A.pending>y&&(c.adler=p(c.adler,A.pending_buf,A.pending-y,y)),O(c),y=A.pending,A.pending!==A.pending_buf_size));)Y(A,255&A.gzhead.extra[A.gzindex]),A.gzindex++;A.gzhead.hcrc&&A.pending>y&&(c.adler=p(c.adler,A.pending_buf,A.pending-y,y)),A.gzindex===A.gzhead.extra.length&&(A.gzindex=0,A.status=73)}else A.status=73;if(A.status===73)if(A.gzhead.name){y=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>y&&(c.adler=p(c.adler,A.pending_buf,A.pending-y,y)),O(c),y=A.pending,A.pending===A.pending_buf_size)){T=1;break}T=A.gzindex<A.gzhead.name.length?255&A.gzhead.name.charCodeAt(A.gzindex++):0,Y(A,T)}while(T!==0);A.gzhead.hcrc&&A.pending>y&&(c.adler=p(c.adler,A.pending_buf,A.pending-y,y)),T===0&&(A.gzindex=0,A.status=91)}else A.status=91;if(A.status===91)if(A.gzhead.comment){y=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>y&&(c.adler=p(c.adler,A.pending_buf,A.pending-y,y)),O(c),y=A.pending,A.pending===A.pending_buf_size)){T=1;break}T=A.gzindex<A.gzhead.comment.length?255&A.gzhead.comment.charCodeAt(A.gzindex++):0,Y(A,T)}while(T!==0);A.gzhead.hcrc&&A.pending>y&&(c.adler=p(c.adler,A.pending_buf,A.pending-y,y)),T===0&&(A.status=103)}else A.status=103;if(A.status===103&&(A.gzhead.hcrc?(A.pending+2>A.pending_buf_size&&O(c),A.pending+2<=A.pending_buf_size&&(Y(A,255&c.adler),Y(A,c.adler>>8&255),c.adler=0,A.status=B)):A.status=B),A.pending!==0){if(O(c),c.avail_out===0)return A.last_flush=-1,d}else if(c.avail_in===0&&G(N)<=G(F)&&N!==b)return st(c,-5);if(A.status===666&&c.avail_in!==0)return st(c,-5);if(c.avail_in!==0||A.lookahead!==0||N!==_&&A.status!==666){var H=A.strategy===2?(function(P,$){for(var j;;){if(P.lookahead===0&&(ft(P),P.lookahead===0)){if($===_)return u;break}if(P.match_length=0,j=o._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++,j&&(D(P,!1),P.strm.avail_out===0))return u}return P.insert=0,$===b?(D(P,!0),P.strm.avail_out===0?rt:J):P.last_lit&&(D(P,!1),P.strm.avail_out===0)?u:L})(A,N):A.strategy===3?(function(P,$){for(var j,q,Q,dt,ot=P.window;;){if(P.lookahead<=M){if(ft(P),P.lookahead<=M&&$===_)return u;if(P.lookahead===0)break}if(P.match_length=0,P.lookahead>=k&&0<P.strstart&&(q=ot[Q=P.strstart-1])===ot[++Q]&&q===ot[++Q]&&q===ot[++Q]){dt=P.strstart+M;do;while(q===ot[++Q]&&q===ot[++Q]&&q===ot[++Q]&&q===ot[++Q]&&q===ot[++Q]&&q===ot[++Q]&&q===ot[++Q]&&q===ot[++Q]&&Q<dt);P.match_length=M-(dt-Q),P.match_length>P.lookahead&&(P.match_length=P.lookahead)}if(P.match_length>=k?(j=o._tr_tally(P,1,P.match_length-k),P.lookahead-=P.match_length,P.strstart+=P.match_length,P.match_length=0):(j=o._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++),j&&(D(P,!1),P.strm.avail_out===0))return u}return P.insert=0,$===b?(D(P,!0),P.strm.avail_out===0?rt:J):P.last_lit&&(D(P,!1),P.strm.avail_out===0)?u:L})(A,N):n[A.level].func(A,N);if(H!==rt&&H!==J||(A.status=666),H===u||H===rt)return c.avail_out===0&&(A.last_flush=-1),d;if(H===L&&(N===1?o._tr_align(A):N!==5&&(o._tr_stored_block(A,0,0,!1),N===3&&(et(A.head),A.lookahead===0&&(A.strstart=0,A.block_start=0,A.insert=0))),O(c),c.avail_out===0))return A.last_flush=-1,d}return N!==b?d:A.wrap<=0?1:(A.wrap===2?(Y(A,255&c.adler),Y(A,c.adler>>8&255),Y(A,c.adler>>16&255),Y(A,c.adler>>24&255),Y(A,255&c.total_in),Y(A,c.total_in>>8&255),Y(A,c.total_in>>16&255),Y(A,c.total_in>>24&255)):(Z(A,c.adler>>>16),Z(A,65535&c.adler)),O(c),0<A.wrap&&(A.wrap=-A.wrap),A.pending!==0?d:1)},s.deflateEnd=function(c){var N;return c&&c.state?(N=c.state.status)!==v&&N!==69&&N!==73&&N!==91&&N!==103&&N!==B&&N!==666?st(c,m):(c.state=null,N===B?st(c,-3):d):m},s.deflateSetDictionary=function(c,N){var F,A,y,T,U,H,P,$,j=N.length;if(!c||!c.state||(T=(F=c.state).wrap)===2||T===1&&F.status!==v||F.lookahead)return m;for(T===1&&(c.adler=l(c.adler,N,j,0)),F.wrap=0,j>=F.w_size&&(T===0&&(et(F.head),F.strstart=0,F.block_start=0,F.insert=0),$=new a.Buf8(F.w_size),a.arraySet($,N,j-F.w_size,F.w_size,0),N=$,j=F.w_size),U=c.avail_in,H=c.next_in,P=c.input,c.avail_in=j,c.next_in=0,c.input=N,ft(F);F.lookahead>=k;){for(A=F.strstart,y=F.lookahead-(k-1);F.ins_h=(F.ins_h<<F.hash_shift^F.window[A+k-1])&F.hash_mask,F.prev[A&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=A,A++,--y;);F.strstart=A,F.lookahead=k-1,ft(F)}return F.strstart+=F.lookahead,F.block_start=F.strstart,F.insert=F.lookahead,F.lookahead=0,F.match_length=F.prev_length=k-1,F.match_available=0,c.next_in=H,c.input=P,c.avail_in=U,F.wrap=T,d},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,i,s){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,i,s){i.exports=function(n,a){var o,l,p,w,_,b,d,m,f,g,h,E,S,C,I,x,R,z,k,M,W,v,B,u,L;o=n.state,l=n.next_in,u=n.input,p=l+(n.avail_in-5),w=n.next_out,L=n.output,_=w-(a-n.avail_out),b=w+(n.avail_out-257),d=o.dmax,m=o.wsize,f=o.whave,g=o.wnext,h=o.window,E=o.hold,S=o.bits,C=o.lencode,I=o.distcode,x=(1<<o.lenbits)-1,R=(1<<o.distbits)-1;t:do{S<15&&(E+=u[l++]<<S,S+=8,E+=u[l++]<<S,S+=8),z=C[E&x];e:for(;;){if(E>>>=k=z>>>24,S-=k,(k=z>>>16&255)===0)L[w++]=65535&z;else{if(!(16&k)){if((64&k)==0){z=C[(65535&z)+(E&(1<<k)-1)];continue e}if(32&k){o.mode=12;break t}n.msg="invalid literal/length code",o.mode=30;break t}M=65535&z,(k&=15)&&(S<k&&(E+=u[l++]<<S,S+=8),M+=E&(1<<k)-1,E>>>=k,S-=k),S<15&&(E+=u[l++]<<S,S+=8,E+=u[l++]<<S,S+=8),z=I[E&R];r:for(;;){if(E>>>=k=z>>>24,S-=k,!(16&(k=z>>>16&255))){if((64&k)==0){z=I[(65535&z)+(E&(1<<k)-1)];continue r}n.msg="invalid distance code",o.mode=30;break t}if(W=65535&z,S<(k&=15)&&(E+=u[l++]<<S,(S+=8)<k&&(E+=u[l++]<<S,S+=8)),d<(W+=E&(1<<k)-1)){n.msg="invalid distance too far back",o.mode=30;break t}if(E>>>=k,S-=k,(k=w-_)<W){if(f<(k=W-k)&&o.sane){n.msg="invalid distance too far back",o.mode=30;break t}if(B=h,(v=0)===g){if(v+=m-k,k<M){for(M-=k;L[w++]=h[v++],--k;);v=w-W,B=L}}else if(g<k){if(v+=m+g-k,(k-=g)<M){for(M-=k;L[w++]=h[v++],--k;);if(v=0,g<M){for(M-=k=g;L[w++]=h[v++],--k;);v=w-W,B=L}}}else if(v+=g-k,k<M){for(M-=k;L[w++]=h[v++],--k;);v=w-W,B=L}for(;2<M;)L[w++]=B[v++],L[w++]=B[v++],L[w++]=B[v++],M-=3;M&&(L[w++]=B[v++],1<M&&(L[w++]=B[v++]))}else{for(v=w-W;L[w++]=L[v++],L[w++]=L[v++],L[w++]=L[v++],2<(M-=3););M&&(L[w++]=L[v++],1<M&&(L[w++]=L[v++]))}break}}break}}while(l<p&&w<b);l-=M=S>>3,E&=(1<<(S-=M<<3))-1,n.next_in=l,n.next_out=w,n.avail_in=l<p?p-l+5:5-(l-p),n.avail_out=w<b?b-w+257:257-(w-b),o.hold=E,o.bits=S}},{}],49:[function(e,i,s){var n=e("../utils/common"),a=e("./adler32"),o=e("./crc32"),l=e("./inffast"),p=e("./inftrees"),w=1,_=2,b=0,d=-2,m=1,f=852,g=592;function h(v){return(v>>>24&255)+(v>>>8&65280)+((65280&v)<<8)+((255&v)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(v){var B;return v&&v.state?(B=v.state,v.total_in=v.total_out=B.total=0,v.msg="",B.wrap&&(v.adler=1&B.wrap),B.mode=m,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new n.Buf32(f),B.distcode=B.distdyn=new n.Buf32(g),B.sane=1,B.back=-1,b):d}function C(v){var B;return v&&v.state?((B=v.state).wsize=0,B.whave=0,B.wnext=0,S(v)):d}function I(v,B){var u,L;return v&&v.state?(L=v.state,B<0?(u=0,B=-B):(u=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?d:(L.window!==null&&L.wbits!==B&&(L.window=null),L.wrap=u,L.wbits=B,C(v))):d}function x(v,B){var u,L;return v?(L=new E,(v.state=L).window=null,(u=I(v,B))!==b&&(v.state=null),u):d}var R,z,k=!0;function M(v){if(k){var B;for(R=new n.Buf32(512),z=new n.Buf32(32),B=0;B<144;)v.lens[B++]=8;for(;B<256;)v.lens[B++]=9;for(;B<280;)v.lens[B++]=7;for(;B<288;)v.lens[B++]=8;for(p(w,v.lens,0,288,R,0,v.work,{bits:9}),B=0;B<32;)v.lens[B++]=5;p(_,v.lens,0,32,z,0,v.work,{bits:5}),k=!1}v.lencode=R,v.lenbits=9,v.distcode=z,v.distbits=5}function W(v,B,u,L){var rt,J=v.state;return J.window===null&&(J.wsize=1<<J.wbits,J.wnext=0,J.whave=0,J.window=new n.Buf8(J.wsize)),L>=J.wsize?(n.arraySet(J.window,B,u-J.wsize,J.wsize,0),J.wnext=0,J.whave=J.wsize):(L<(rt=J.wsize-J.wnext)&&(rt=L),n.arraySet(J.window,B,u-L,rt,J.wnext),(L-=rt)?(n.arraySet(J.window,B,u-L,L,0),J.wnext=L,J.whave=J.wsize):(J.wnext+=rt,J.wnext===J.wsize&&(J.wnext=0),J.whave<J.wsize&&(J.whave+=rt))),0}s.inflateReset=C,s.inflateReset2=I,s.inflateResetKeep=S,s.inflateInit=function(v){return x(v,15)},s.inflateInit2=x,s.inflate=function(v,B){var u,L,rt,J,st,G,et,O,D,Y,Z,V,ft,ut,it,at,ht,mt,kt,Ct,c,N,F,A,y=0,T=new n.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!v||!v.state||!v.output||!v.input&&v.avail_in!==0)return d;(u=v.state).mode===12&&(u.mode=13),st=v.next_out,rt=v.output,et=v.avail_out,J=v.next_in,L=v.input,G=v.avail_in,O=u.hold,D=u.bits,Y=G,Z=et,N=b;t:for(;;)switch(u.mode){case m:if(u.wrap===0){u.mode=13;break}for(;D<16;){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}if(2&u.wrap&&O===35615){T[u.check=0]=255&O,T[1]=O>>>8&255,u.check=o(u.check,T,2,0),D=O=0,u.mode=2;break}if(u.flags=0,u.head&&(u.head.done=!1),!(1&u.wrap)||(((255&O)<<8)+(O>>8))%31){v.msg="incorrect header check",u.mode=30;break}if((15&O)!=8){v.msg="unknown compression method",u.mode=30;break}if(D-=4,c=8+(15&(O>>>=4)),u.wbits===0)u.wbits=c;else if(c>u.wbits){v.msg="invalid window size",u.mode=30;break}u.dmax=1<<c,v.adler=u.check=1,u.mode=512&O?10:12,D=O=0;break;case 2:for(;D<16;){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}if(u.flags=O,(255&u.flags)!=8){v.msg="unknown compression method",u.mode=30;break}if(57344&u.flags){v.msg="unknown header flags set",u.mode=30;break}u.head&&(u.head.text=O>>8&1),512&u.flags&&(T[0]=255&O,T[1]=O>>>8&255,u.check=o(u.check,T,2,0)),D=O=0,u.mode=3;case 3:for(;D<32;){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}u.head&&(u.head.time=O),512&u.flags&&(T[0]=255&O,T[1]=O>>>8&255,T[2]=O>>>16&255,T[3]=O>>>24&255,u.check=o(u.check,T,4,0)),D=O=0,u.mode=4;case 4:for(;D<16;){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}u.head&&(u.head.xflags=255&O,u.head.os=O>>8),512&u.flags&&(T[0]=255&O,T[1]=O>>>8&255,u.check=o(u.check,T,2,0)),D=O=0,u.mode=5;case 5:if(1024&u.flags){for(;D<16;){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}u.length=O,u.head&&(u.head.extra_len=O),512&u.flags&&(T[0]=255&O,T[1]=O>>>8&255,u.check=o(u.check,T,2,0)),D=O=0}else u.head&&(u.head.extra=null);u.mode=6;case 6:if(1024&u.flags&&(G<(V=u.length)&&(V=G),V&&(u.head&&(c=u.head.extra_len-u.length,u.head.extra||(u.head.extra=new Array(u.head.extra_len)),n.arraySet(u.head.extra,L,J,V,c)),512&u.flags&&(u.check=o(u.check,L,V,J)),G-=V,J+=V,u.length-=V),u.length))break t;u.length=0,u.mode=7;case 7:if(2048&u.flags){if(G===0)break t;for(V=0;c=L[J+V++],u.head&&c&&u.length<65536&&(u.head.name+=String.fromCharCode(c)),c&&V<G;);if(512&u.flags&&(u.check=o(u.check,L,V,J)),G-=V,J+=V,c)break t}else u.head&&(u.head.name=null);u.length=0,u.mode=8;case 8:if(4096&u.flags){if(G===0)break t;for(V=0;c=L[J+V++],u.head&&c&&u.length<65536&&(u.head.comment+=String.fromCharCode(c)),c&&V<G;);if(512&u.flags&&(u.check=o(u.check,L,V,J)),G-=V,J+=V,c)break t}else u.head&&(u.head.comment=null);u.mode=9;case 9:if(512&u.flags){for(;D<16;){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}if(O!==(65535&u.check)){v.msg="header crc mismatch",u.mode=30;break}D=O=0}u.head&&(u.head.hcrc=u.flags>>9&1,u.head.done=!0),v.adler=u.check=0,u.mode=12;break;case 10:for(;D<32;){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}v.adler=u.check=h(O),D=O=0,u.mode=11;case 11:if(u.havedict===0)return v.next_out=st,v.avail_out=et,v.next_in=J,v.avail_in=G,u.hold=O,u.bits=D,2;v.adler=u.check=1,u.mode=12;case 12:if(B===5||B===6)break t;case 13:if(u.last){O>>>=7&D,D-=7&D,u.mode=27;break}for(;D<3;){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}switch(u.last=1&O,D-=1,3&(O>>>=1)){case 0:u.mode=14;break;case 1:if(M(u),u.mode=20,B!==6)break;O>>>=2,D-=2;break t;case 2:u.mode=17;break;case 3:v.msg="invalid block type",u.mode=30}O>>>=2,D-=2;break;case 14:for(O>>>=7&D,D-=7&D;D<32;){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}if((65535&O)!=(O>>>16^65535)){v.msg="invalid stored block lengths",u.mode=30;break}if(u.length=65535&O,D=O=0,u.mode=15,B===6)break t;case 15:u.mode=16;case 16:if(V=u.length){if(G<V&&(V=G),et<V&&(V=et),V===0)break t;n.arraySet(rt,L,J,V,st),G-=V,J+=V,et-=V,st+=V,u.length-=V;break}u.mode=12;break;case 17:for(;D<14;){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}if(u.nlen=257+(31&O),O>>>=5,D-=5,u.ndist=1+(31&O),O>>>=5,D-=5,u.ncode=4+(15&O),O>>>=4,D-=4,286<u.nlen||30<u.ndist){v.msg="too many length or distance symbols",u.mode=30;break}u.have=0,u.mode=18;case 18:for(;u.have<u.ncode;){for(;D<3;){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}u.lens[U[u.have++]]=7&O,O>>>=3,D-=3}for(;u.have<19;)u.lens[U[u.have++]]=0;if(u.lencode=u.lendyn,u.lenbits=7,F={bits:u.lenbits},N=p(0,u.lens,0,19,u.lencode,0,u.work,F),u.lenbits=F.bits,N){v.msg="invalid code lengths set",u.mode=30;break}u.have=0,u.mode=19;case 19:for(;u.have<u.nlen+u.ndist;){for(;at=(y=u.lencode[O&(1<<u.lenbits)-1])>>>16&255,ht=65535&y,!((it=y>>>24)<=D);){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}if(ht<16)O>>>=it,D-=it,u.lens[u.have++]=ht;else{if(ht===16){for(A=it+2;D<A;){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}if(O>>>=it,D-=it,u.have===0){v.msg="invalid bit length repeat",u.mode=30;break}c=u.lens[u.have-1],V=3+(3&O),O>>>=2,D-=2}else if(ht===17){for(A=it+3;D<A;){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}D-=it,c=0,V=3+(7&(O>>>=it)),O>>>=3,D-=3}else{for(A=it+7;D<A;){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}D-=it,c=0,V=11+(127&(O>>>=it)),O>>>=7,D-=7}if(u.have+V>u.nlen+u.ndist){v.msg="invalid bit length repeat",u.mode=30;break}for(;V--;)u.lens[u.have++]=c}}if(u.mode===30)break;if(u.lens[256]===0){v.msg="invalid code -- missing end-of-block",u.mode=30;break}if(u.lenbits=9,F={bits:u.lenbits},N=p(w,u.lens,0,u.nlen,u.lencode,0,u.work,F),u.lenbits=F.bits,N){v.msg="invalid literal/lengths set",u.mode=30;break}if(u.distbits=6,u.distcode=u.distdyn,F={bits:u.distbits},N=p(_,u.lens,u.nlen,u.ndist,u.distcode,0,u.work,F),u.distbits=F.bits,N){v.msg="invalid distances set",u.mode=30;break}if(u.mode=20,B===6)break t;case 20:u.mode=21;case 21:if(6<=G&&258<=et){v.next_out=st,v.avail_out=et,v.next_in=J,v.avail_in=G,u.hold=O,u.bits=D,l(v,Z),st=v.next_out,rt=v.output,et=v.avail_out,J=v.next_in,L=v.input,G=v.avail_in,O=u.hold,D=u.bits,u.mode===12&&(u.back=-1);break}for(u.back=0;at=(y=u.lencode[O&(1<<u.lenbits)-1])>>>16&255,ht=65535&y,!((it=y>>>24)<=D);){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}if(at&&(240&at)==0){for(mt=it,kt=at,Ct=ht;at=(y=u.lencode[Ct+((O&(1<<mt+kt)-1)>>mt)])>>>16&255,ht=65535&y,!(mt+(it=y>>>24)<=D);){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}O>>>=mt,D-=mt,u.back+=mt}if(O>>>=it,D-=it,u.back+=it,u.length=ht,at===0){u.mode=26;break}if(32&at){u.back=-1,u.mode=12;break}if(64&at){v.msg="invalid literal/length code",u.mode=30;break}u.extra=15&at,u.mode=22;case 22:if(u.extra){for(A=u.extra;D<A;){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}u.length+=O&(1<<u.extra)-1,O>>>=u.extra,D-=u.extra,u.back+=u.extra}u.was=u.length,u.mode=23;case 23:for(;at=(y=u.distcode[O&(1<<u.distbits)-1])>>>16&255,ht=65535&y,!((it=y>>>24)<=D);){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}if((240&at)==0){for(mt=it,kt=at,Ct=ht;at=(y=u.distcode[Ct+((O&(1<<mt+kt)-1)>>mt)])>>>16&255,ht=65535&y,!(mt+(it=y>>>24)<=D);){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}O>>>=mt,D-=mt,u.back+=mt}if(O>>>=it,D-=it,u.back+=it,64&at){v.msg="invalid distance code",u.mode=30;break}u.offset=ht,u.extra=15&at,u.mode=24;case 24:if(u.extra){for(A=u.extra;D<A;){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}u.offset+=O&(1<<u.extra)-1,O>>>=u.extra,D-=u.extra,u.back+=u.extra}if(u.offset>u.dmax){v.msg="invalid distance too far back",u.mode=30;break}u.mode=25;case 25:if(et===0)break t;if(V=Z-et,u.offset>V){if((V=u.offset-V)>u.whave&&u.sane){v.msg="invalid distance too far back",u.mode=30;break}ft=V>u.wnext?(V-=u.wnext,u.wsize-V):u.wnext-V,V>u.length&&(V=u.length),ut=u.window}else ut=rt,ft=st-u.offset,V=u.length;for(et<V&&(V=et),et-=V,u.length-=V;rt[st++]=ut[ft++],--V;);u.length===0&&(u.mode=21);break;case 26:if(et===0)break t;rt[st++]=u.length,et--,u.mode=21;break;case 27:if(u.wrap){for(;D<32;){if(G===0)break t;G--,O|=L[J++]<<D,D+=8}if(Z-=et,v.total_out+=Z,u.total+=Z,Z&&(v.adler=u.check=u.flags?o(u.check,rt,Z,st-Z):a(u.check,rt,Z,st-Z)),Z=et,(u.flags?O:h(O))!==u.check){v.msg="incorrect data check",u.mode=30;break}D=O=0}u.mode=28;case 28:if(u.wrap&&u.flags){for(;D<32;){if(G===0)break t;G--,O+=L[J++]<<D,D+=8}if(O!==(4294967295&u.total)){v.msg="incorrect length check",u.mode=30;break}D=O=0}u.mode=29;case 29:N=1;break t;case 30:N=-3;break t;case 31:return-4;case 32:default:return d}return v.next_out=st,v.avail_out=et,v.next_in=J,v.avail_in=G,u.hold=O,u.bits=D,(u.wsize||Z!==v.avail_out&&u.mode<30&&(u.mode<27||B!==4))&&W(v,v.output,v.next_out,Z-v.avail_out)?(u.mode=31,-4):(Y-=v.avail_in,Z-=v.avail_out,v.total_in+=Y,v.total_out+=Z,u.total+=Z,u.wrap&&Z&&(v.adler=u.check=u.flags?o(u.check,rt,Z,v.next_out-Z):a(u.check,rt,Z,v.next_out-Z)),v.data_type=u.bits+(u.last?64:0)+(u.mode===12?128:0)+(u.mode===20||u.mode===15?256:0),(Y==0&&Z===0||B===4)&&N===b&&(N=-5),N)},s.inflateEnd=function(v){if(!v||!v.state)return d;var B=v.state;return B.window&&(B.window=null),v.state=null,b},s.inflateGetHeader=function(v,B){var u;return v&&v.state?(2&(u=v.state).wrap)==0?d:((u.head=B).done=!1,b):d},s.inflateSetDictionary=function(v,B){var u,L=B.length;return v&&v.state?(u=v.state).wrap!==0&&u.mode!==11?d:u.mode===11&&a(1,B,L,0)!==u.check?-3:W(v,B,L,L)?(u.mode=31,-4):(u.havedict=1,b):d},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,i,s){var n=e("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(w,_,b,d,m,f,g,h){var E,S,C,I,x,R,z,k,M,W=h.bits,v=0,B=0,u=0,L=0,rt=0,J=0,st=0,G=0,et=0,O=0,D=null,Y=0,Z=new n.Buf16(16),V=new n.Buf16(16),ft=null,ut=0;for(v=0;v<=15;v++)Z[v]=0;for(B=0;B<d;B++)Z[_[b+B]]++;for(rt=W,L=15;1<=L&&Z[L]===0;L--);if(L<rt&&(rt=L),L===0)return m[f++]=20971520,m[f++]=20971520,h.bits=1,0;for(u=1;u<L&&Z[u]===0;u++);for(rt<u&&(rt=u),v=G=1;v<=15;v++)if(G<<=1,(G-=Z[v])<0)return-1;if(0<G&&(w===0||L!==1))return-1;for(V[1]=0,v=1;v<15;v++)V[v+1]=V[v]+Z[v];for(B=0;B<d;B++)_[b+B]!==0&&(g[V[_[b+B]]++]=B);if(R=w===0?(D=ft=g,19):w===1?(D=a,Y-=257,ft=o,ut-=257,256):(D=l,ft=p,-1),v=u,x=f,st=B=O=0,C=-1,I=(et=1<<(J=rt))-1,w===1&&852<et||w===2&&592<et)return 1;for(;;){for(z=v-st,M=g[B]<R?(k=0,g[B]):g[B]>R?(k=ft[ut+g[B]],D[Y+g[B]]):(k=96,0),E=1<<v-st,u=S=1<<J;m[x+(O>>st)+(S-=E)]=z<<24|k<<16|M|0,S!==0;);for(E=1<<v-1;O&E;)E>>=1;if(E!==0?(O&=E-1,O+=E):O=0,B++,--Z[v]==0){if(v===L)break;v=_[b+g[B]]}if(rt<v&&(O&I)!==C){for(st===0&&(st=rt),x+=u,G=1<<(J=v-st);J+st<L&&!((G-=Z[J+st])<=0);)J++,G<<=1;if(et+=1<<J,w===1&&852<et||w===2&&592<et)return 1;m[C=O&I]=rt<<24|J<<16|x-f|0}}return O!==0&&(m[x+O]=v-st<<24|64<<16|0),h.bits=rt,0}},{"../utils/common":41}],51:[function(e,i,s){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,i,s){var n=e("../utils/common"),a=0,o=1;function l(y){for(var T=y.length;0<=--T;)y[T]=0}var p=0,w=29,_=256,b=_+1+w,d=30,m=19,f=2*b+1,g=15,h=16,E=7,S=256,C=16,I=17,x=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=new Array(2*(b+2));l(W);var v=new Array(2*d);l(v);var B=new Array(512);l(B);var u=new Array(256);l(u);var L=new Array(w);l(L);var rt,J,st,G=new Array(d);function et(y,T,U,H,P){this.static_tree=y,this.extra_bits=T,this.extra_base=U,this.elems=H,this.max_length=P,this.has_stree=y&&y.length}function O(y,T){this.dyn_tree=y,this.max_code=0,this.stat_desc=T}function D(y){return y<256?B[y]:B[256+(y>>>7)]}function Y(y,T){y.pending_buf[y.pending++]=255&T,y.pending_buf[y.pending++]=T>>>8&255}function Z(y,T,U){y.bi_valid>h-U?(y.bi_buf|=T<<y.bi_valid&65535,Y(y,y.bi_buf),y.bi_buf=T>>h-y.bi_valid,y.bi_valid+=U-h):(y.bi_buf|=T<<y.bi_valid&65535,y.bi_valid+=U)}function V(y,T,U){Z(y,U[2*T],U[2*T+1])}function ft(y,T){for(var U=0;U|=1&y,y>>>=1,U<<=1,0<--T;);return U>>>1}function ut(y,T,U){var H,P,$=new Array(g+1),j=0;for(H=1;H<=g;H++)$[H]=j=j+U[H-1]<<1;for(P=0;P<=T;P++){var q=y[2*P+1];q!==0&&(y[2*P]=ft($[q]++,q))}}function it(y){var T;for(T=0;T<b;T++)y.dyn_ltree[2*T]=0;for(T=0;T<d;T++)y.dyn_dtree[2*T]=0;for(T=0;T<m;T++)y.bl_tree[2*T]=0;y.dyn_ltree[2*S]=1,y.opt_len=y.static_len=0,y.last_lit=y.matches=0}function at(y){8<y.bi_valid?Y(y,y.bi_buf):0<y.bi_valid&&(y.pending_buf[y.pending++]=y.bi_buf),y.bi_buf=0,y.bi_valid=0}function ht(y,T,U,H){var P=2*T,$=2*U;return y[P]<y[$]||y[P]===y[$]&&H[T]<=H[U]}function mt(y,T,U){for(var H=y.heap[U],P=U<<1;P<=y.heap_len&&(P<y.heap_len&&ht(T,y.heap[P+1],y.heap[P],y.depth)&&P++,!ht(T,H,y.heap[P],y.depth));)y.heap[U]=y.heap[P],U=P,P<<=1;y.heap[U]=H}function kt(y,T,U){var H,P,$,j,q=0;if(y.last_lit!==0)for(;H=y.pending_buf[y.d_buf+2*q]<<8|y.pending_buf[y.d_buf+2*q+1],P=y.pending_buf[y.l_buf+q],q++,H===0?V(y,P,T):(V(y,($=u[P])+_+1,T),(j=R[$])!==0&&Z(y,P-=L[$],j),V(y,$=D(--H),U),(j=z[$])!==0&&Z(y,H-=G[$],j)),q<y.last_lit;);V(y,S,T)}function Ct(y,T){var U,H,P,$=T.dyn_tree,j=T.stat_desc.static_tree,q=T.stat_desc.has_stree,Q=T.stat_desc.elems,dt=-1;for(y.heap_len=0,y.heap_max=f,U=0;U<Q;U++)$[2*U]!==0?(y.heap[++y.heap_len]=dt=U,y.depth[U]=0):$[2*U+1]=0;for(;y.heap_len<2;)$[2*(P=y.heap[++y.heap_len]=dt<2?++dt:0)]=1,y.depth[P]=0,y.opt_len--,q&&(y.static_len-=j[2*P+1]);for(T.max_code=dt,U=y.heap_len>>1;1<=U;U--)mt(y,$,U);for(P=Q;U=y.heap[1],y.heap[1]=y.heap[y.heap_len--],mt(y,$,1),H=y.heap[1],y.heap[--y.heap_max]=U,y.heap[--y.heap_max]=H,$[2*P]=$[2*U]+$[2*H],y.depth[P]=(y.depth[U]>=y.depth[H]?y.depth[U]:y.depth[H])+1,$[2*U+1]=$[2*H+1]=P,y.heap[1]=P++,mt(y,$,1),2<=y.heap_len;);y.heap[--y.heap_max]=y.heap[1],(function(ot,vt){var Ht,It,Jt,gt,jt,fe,Rt=vt.dyn_tree,$e=vt.max_code,sn=vt.stat_desc.static_tree,an=vt.stat_desc.has_stree,on=vt.stat_desc.extra_bits,qe=vt.stat_desc.extra_base,Gt=vt.stat_desc.max_length,Yt=0;for(gt=0;gt<=g;gt++)ot.bl_count[gt]=0;for(Rt[2*ot.heap[ot.heap_max]+1]=0,Ht=ot.heap_max+1;Ht<f;Ht++)Gt<(gt=Rt[2*Rt[2*(It=ot.heap[Ht])+1]+1]+1)&&(gt=Gt,Yt++),Rt[2*It+1]=gt,$e<It||(ot.bl_count[gt]++,jt=0,qe<=It&&(jt=on[It-qe]),fe=Rt[2*It],ot.opt_len+=fe*(gt+jt),an&&(ot.static_len+=fe*(sn[2*It+1]+jt)));if(Yt!==0){do{for(gt=Gt-1;ot.bl_count[gt]===0;)gt--;ot.bl_count[gt]--,ot.bl_count[gt+1]+=2,ot.bl_count[Gt]--,Yt-=2}while(0<Yt);for(gt=Gt;gt!==0;gt--)for(It=ot.bl_count[gt];It!==0;)$e<(Jt=ot.heap[--Ht])||(Rt[2*Jt+1]!==gt&&(ot.opt_len+=(gt-Rt[2*Jt+1])*Rt[2*Jt],Rt[2*Jt+1]=gt),It--)}})(y,T),ut($,dt,y.bl_count)}function c(y,T,U){var H,P,$=-1,j=T[1],q=0,Q=7,dt=4;for(j===0&&(Q=138,dt=3),T[2*(U+1)+1]=65535,H=0;H<=U;H++)P=j,j=T[2*(H+1)+1],++q<Q&&P===j||(q<dt?y.bl_tree[2*P]+=q:P!==0?(P!==$&&y.bl_tree[2*P]++,y.bl_tree[2*C]++):q<=10?y.bl_tree[2*I]++:y.bl_tree[2*x]++,$=P,dt=(q=0)===j?(Q=138,3):P===j?(Q=6,3):(Q=7,4))}function N(y,T,U){var H,P,$=-1,j=T[1],q=0,Q=7,dt=4;for(j===0&&(Q=138,dt=3),H=0;H<=U;H++)if(P=j,j=T[2*(H+1)+1],!(++q<Q&&P===j)){if(q<dt)for(;V(y,P,y.bl_tree),--q!=0;);else P!==0?(P!==$&&(V(y,P,y.bl_tree),q--),V(y,C,y.bl_tree),Z(y,q-3,2)):q<=10?(V(y,I,y.bl_tree),Z(y,q-3,3)):(V(y,x,y.bl_tree),Z(y,q-11,7));$=P,dt=(q=0)===j?(Q=138,3):P===j?(Q=6,3):(Q=7,4)}}l(G);var F=!1;function A(y,T,U,H){Z(y,(p<<1)+(H?1:0),3),(function(P,$,j,q){at(P),Y(P,j),Y(P,~j),n.arraySet(P.pending_buf,P.window,$,j,P.pending),P.pending+=j})(y,T,U)}s._tr_init=function(y){F||((function(){var T,U,H,P,$,j=new Array(g+1);for(P=H=0;P<w-1;P++)for(L[P]=H,T=0;T<1<<R[P];T++)u[H++]=P;for(u[H-1]=P,P=$=0;P<16;P++)for(G[P]=$,T=0;T<1<<z[P];T++)B[$++]=P;for($>>=7;P<d;P++)for(G[P]=$<<7,T=0;T<1<<z[P]-7;T++)B[256+$++]=P;for(U=0;U<=g;U++)j[U]=0;for(T=0;T<=143;)W[2*T+1]=8,T++,j[8]++;for(;T<=255;)W[2*T+1]=9,T++,j[9]++;for(;T<=279;)W[2*T+1]=7,T++,j[7]++;for(;T<=287;)W[2*T+1]=8,T++,j[8]++;for(ut(W,b+1,j),T=0;T<d;T++)v[2*T+1]=5,v[2*T]=ft(T,5);rt=new et(W,R,_+1,b,g),J=new et(v,z,0,d,g),st=new et(new Array(0),k,0,m,E)})(),F=!0),y.l_desc=new O(y.dyn_ltree,rt),y.d_desc=new O(y.dyn_dtree,J),y.bl_desc=new O(y.bl_tree,st),y.bi_buf=0,y.bi_valid=0,it(y)},s._tr_stored_block=A,s._tr_flush_block=function(y,T,U,H){var P,$,j=0;0<y.level?(y.strm.data_type===2&&(y.strm.data_type=(function(q){var Q,dt=4093624447;for(Q=0;Q<=31;Q++,dt>>>=1)if(1&dt&&q.dyn_ltree[2*Q]!==0)return a;if(q.dyn_ltree[18]!==0||q.dyn_ltree[20]!==0||q.dyn_ltree[26]!==0)return o;for(Q=32;Q<_;Q++)if(q.dyn_ltree[2*Q]!==0)return o;return a})(y)),Ct(y,y.l_desc),Ct(y,y.d_desc),j=(function(q){var Q;for(c(q,q.dyn_ltree,q.l_desc.max_code),c(q,q.dyn_dtree,q.d_desc.max_code),Ct(q,q.bl_desc),Q=m-1;3<=Q&&q.bl_tree[2*M[Q]+1]===0;Q--);return q.opt_len+=3*(Q+1)+5+5+4,Q})(y),P=y.opt_len+3+7>>>3,($=y.static_len+3+7>>>3)<=P&&(P=$)):P=$=U+5,U+4<=P&&T!==-1?A(y,T,U,H):y.strategy===4||$===P?(Z(y,2+(H?1:0),3),kt(y,W,v)):(Z(y,4+(H?1:0),3),(function(q,Q,dt,ot){var vt;for(Z(q,Q-257,5),Z(q,dt-1,5),Z(q,ot-4,4),vt=0;vt<ot;vt++)Z(q,q.bl_tree[2*M[vt]+1],3);N(q,q.dyn_ltree,Q-1),N(q,q.dyn_dtree,dt-1)})(y,y.l_desc.max_code+1,y.d_desc.max_code+1,j+1),kt(y,y.dyn_ltree,y.dyn_dtree)),it(y),H&&at(y)},s._tr_tally=function(y,T,U){return y.pending_buf[y.d_buf+2*y.last_lit]=T>>>8&255,y.pending_buf[y.d_buf+2*y.last_lit+1]=255&T,y.pending_buf[y.l_buf+y.last_lit]=255&U,y.last_lit++,T===0?y.dyn_ltree[2*U]++:(y.matches++,T--,y.dyn_ltree[2*(u[U]+_+1)]++,y.dyn_dtree[2*D(T)]++),y.last_lit===y.lit_bufsize-1},s._tr_align=function(y){Z(y,2,3),V(y,S,W),(function(T){T.bi_valid===16?(Y(T,T.bi_buf),T.bi_buf=0,T.bi_valid=0):8<=T.bi_valid&&(T.pending_buf[T.pending++]=255&T.bi_buf,T.bi_buf>>=8,T.bi_valid-=8)})(y)}},{"../utils/common":41}],53:[function(e,i,s){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,i,s){(function(n){(function(a,o){if(!a.setImmediate){var l,p,w,_,b=1,d={},m=!1,f=a.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(a);g=g&&g.setTimeout?g:a,l={}.toString.call(a.process)==="[object process]"?function(C){process.nextTick(function(){E(C)})}:(function(){if(a.postMessage&&!a.importScripts){var C=!0,I=a.onmessage;return a.onmessage=function(){C=!1},a.postMessage("","*"),a.onmessage=I,C}})()?(_="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",S,!1):a.attachEvent("onmessage",S),function(C){a.postMessage(_+C,"*")}):a.MessageChannel?((w=new MessageChannel).port1.onmessage=function(C){E(C.data)},function(C){w.port2.postMessage(C)}):f&&"onreadystatechange"in f.createElement("script")?(p=f.documentElement,function(C){var I=f.createElement("script");I.onreadystatechange=function(){E(C),I.onreadystatechange=null,p.removeChild(I),I=null},p.appendChild(I)}):function(C){setTimeout(E,0,C)},g.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var I=new Array(arguments.length-1),x=0;x<I.length;x++)I[x]=arguments[x+1];var R={callback:C,args:I};return d[b]=R,l(b),b++},g.clearImmediate=h}function h(C){delete d[C]}function E(C){if(m)setTimeout(E,0,C);else{var I=d[C];if(I){m=!0;try{(function(x){var R=x.callback,z=x.args;switch(z.length){case 0:R();break;case 1:R(z[0]);break;case 2:R(z[0],z[1]);break;case 3:R(z[0],z[1],z[2]);break;default:R.apply(o,z)}})(I)}finally{h(C),m=!1}}}}function S(C){C.source===a&&typeof C.data=="string"&&C.data.indexOf(_)===0&&E(+C.data.slice(_.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof te<"u"?te:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Me)),Me.exports}var Ri=Bi();const Cr=Qr(Ri);function kr(t){return btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Ir(t){t=(t||"").replace(/-/g,"+").replace(/_/g,"/");const r=t.length%4===0?"":"=".repeat(4-t.length%4),e=atob(t+r),i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i}async function ne(t,r,e){if(e.name===nt.KDF_ARGON2){if(!await pt.checkArgon2Ready())throw new Error("Argon2 函式庫未成功載入，無法執行。");const{hash:i}=await window.argon2.hash({pass:t,salt:r,time:e.iterations,mem:e.memory,parallelism:e.parallelism,hashLen:32,type:window.argon2.ArgonType.Argon2id});return i}if(e.name===nt.KDF_PBKDF2){const i=await crypto.subtle.importKey("raw",new TextEncoder().encode(t),{name:nt.KDF_PBKDF2},!1,["deriveBits"]),s=await crypto.subtle.deriveBits({name:nt.KDF_PBKDF2,salt:r,iterations:e.iterations,hash:nt.HASH_SHA256},i,nt.KEY_LENGTH_BITS);return new Uint8Array(s)}throw new Error("不支援的金鑰衍生演算法。")}async function Tr(t,r,e){return await new ii(t).setProtectedHeader(e).encrypt(r)}async function ie(t,r){try{const{plaintext:e}=await Xn(t,r);return e}catch{throw new Error("密碼短語不正確，或密文在傳輸過程中已被竄改 (完整性驗證失敗)。")}}async function xi(t){return new Promise((r,e)=>{gzip(t,(i,s)=>{i?e(new Error("Gzip 壓縮失敗")):r(s)})})}async function Pi(t){return new Promise((r,e)=>{gunzip(t,(i,s)=>{i?e(new Error("Gzip 解壓縮失敗")):r(s)})})}const qt={async encryptText(){const t=K.mnemonic.value.trim(),r=K.passphraseEncrypt.value;if(!t||!r)return pt.showToast("❌ 明文和密碼短語不能為空。");if(!pt.runSecurityChecks(r,tt.selectedKDF))return;lt.setOutput("info","⏳ 正在加密，請稍候..."),await new Promise(i=>setTimeout(i,50));const e=performance.now();try{const i=crypto.getRandomValues(new Uint8Array(nt.SALT_BYTES)),s={name:tt.selectedKDF},n={alg:"dir",enc:nt.ALGO_AES_GCM,kdf:s.name,salt:kr(i)};tt.selectedKDF===nt.KDF_ARGON2?(s.iterations=n.t=parseInt(K.argon2Iterations.value,10),s.memory=n.m=parseInt(K.argon2Memory.value,10)*1024,s.parallelism=n.p=parseInt(K.argon2Parallelism.value,10)):s.iterations=n.i=parseInt(K.pbkdf2Iterations.value,10);const a=await ne(r,i,s),o=new TextEncoder().encode(t),l=await Tr(o,a,n),p=((performance.now()-e)/1e3).toFixed(3);if(tt.lastEncryptedOutput=l,lt.setOutput("success",`✅ 加密成功！ (處理時間：${p} 秒)`),K.selfVerifyCheckbox.checked){lt.setOutput("info","✅ 加密成功！<br>...正在進行自我驗證..."),await new Promise(w=>setTimeout(w,20));try{await ie(l,a),lt.setOutput("success",`✅ 加密與驗證均成功！ (總時間：${((performance.now()-e)/1e3).toFixed(3)} 秒)`)}catch(w){lt.setOutput("error",`❌ 嚴重錯誤：加密後驗證失敗！請勿使用此密文，並回報此問題。<br>錯誤訊息：${w.message}`);return}}K.base64ResultView.value=l,K.jsonView.value=JSON.stringify(Qt(l),null,2),K.qrCanvas.hidden=l.length>=nt.QR_CODE_MAX_BYTES,K.qrCanvas.hidden||Ti.toCanvas(K.qrCanvas,l,{errorCorrectionLevel:"L",width:320})}catch(i){lt.setOutput("error",`❌ 加密失敗：${i.message}`)}},async decryptText(){const t=K.ciphertextInput.value.trim(),r=K.passphraseDecrypt.value;if(!t||!r)return pt.showToast("❌ 密文和密碼短語不能為空。");lt.setOutput("info","⏳ 正在解密，請稍候..."),await new Promise(i=>setTimeout(i,50));const e=performance.now();try{const i=Qt(t),s=Ir(i.salt),n={name:i.kdf};if(i.kdf===nt.KDF_ARGON2)n.iterations=i.t,n.memory=i.m,n.parallelism=i.p;else if(i.kdf===nt.KDF_PBKDF2)n.iterations=i.i;else throw new Error(`不支援的 KDF: ${i.kdf}`);const a=await ne(r,s,n),o=await ie(t,a),l=((performance.now()-e)/1e3).toFixed(3),p=new TextDecoder().decode(o);tt.lastDecryptedText=p,lt.setOutput("success",`✅ 解密成功 (處理時間：${l} 秒)<br><br><strong style="font-size: 1.1em; white-space: pre-wrap; word-break: break-word;">${p}</strong>`)}catch(i){lt.setOutput("error",`❌ 解密失敗：${i.message}`)}},async _encryptSingleFile(t,r,e,i){let s=await se.readFileAsArrayBuffer(t);const n={alg:"dir",enc:nt.ALGO_AES_GCM,kdf:i.name,salt:i.saltB64,...i.params};tt.isCompressionEnabled&&(s=await xi(new Uint8Array(s)));const a=await Tr(new Uint8Array(s),e,n);return K.selfVerifyFileCheckbox.checked&&await ie(a,e),{filename:t.name+nt.DOWNLOAD_FILENAME_SUFFIX,content:a}},async batchEncryptFiles(){if(tt.filesToEncrypt.length===0)return pt.showToast("❌ 請先選擇要加密的檔案。");const t=K.passphraseFileEncrypt.value;if(!t)return pt.showToast("❌ 請輸入密碼短語。");if(!pt.runSecurityChecks(t,tt.selectedKDF))return;lt.setOutput("info",`⏳ 準備加密 ${tt.filesToEncrypt.length} 個檔案...`),await new Promise(e=>setTimeout(e,50));const r=performance.now();try{const e=crypto.getRandomValues(new Uint8Array(nt.SALT_BYTES)),i={name:tt.selectedKDF,saltB64:kr(e),params:{}};tt.selectedKDF===nt.KDF_ARGON2?(i.iterations=i.params.t=parseInt(K.argon2Iterations.value,10),i.memory=i.params.m=parseInt(K.argon2Memory.value,10)*1024,i.parallelism=i.params.p=parseInt(K.argon2Parallelism.value,10)):i.iterations=i.params.i=parseInt(K.pbkdf2Iterations.value,10);const s=await ne(t,e,i),n=new Cr;for(const l of tt.filesToEncrypt){lt.setOutput("info",`⏳ 正在加密檔案: ${l.name}...`);const p=await this._encryptSingleFile(l,t,s,i);n.file(p.filename,p.content)}const a=await n.generateAsync({type:"blob"}),o=((performance.now()-r)/1e3).toFixed(3);pt.downloadAsFile(a,`encrypted_files_${Date.now()}.zip`),lt.setOutput("success",`✅ ${tt.filesToEncrypt.length} 個檔案全部加密成功並已打包下載！(總耗時: ${o} 秒)`)}catch(e){lt.setOutput("error",`❌ 檔案加密失敗：${e.message}`)}},async _decryptSingleFile(t,r){const e=await se.readFileAsText(t),i=Qt(e),s=Ir(i.salt),n={name:i.kdf};if(i.kdf===nt.KDF_ARGON2)n.iterations=i.t,n.memory=i.m,n.parallelism=i.p;else if(i.kdf===nt.KDF_PBKDF2)n.iterations=i.i;else throw new Error(`檔案 ${t.name} 包含不支援的 KDF: ${i.kdf}`);const a=await ne(r,s,n);let o=await ie(e,a);return i.zip==="gzip"&&(o=await Pi(o)),{filename:t.name.endsWith(nt.DOWNLOAD_FILENAME_SUFFIX)?t.name.slice(0,-4):`decrypted-${t.name}`,content:new Blob([o])}},async batchDecryptFiles(){if(tt.filesToDecrypt.length===0)return pt.showToast("❌ 請先選擇要解密的檔案。");const t=K.passphraseFileDecrypt.value;if(!t)return pt.showToast("❌ 請輸入密碼短語。");lt.setOutput("info",`⏳ 準備解密 ${tt.filesToDecrypt.length} 個檔案...`),await new Promise(e=>setTimeout(e,50));const r=performance.now();try{const e=new Cr;for(const n of tt.filesToDecrypt){lt.setOutput("info",`⏳ 正在解密檔案: ${n.name}...`);const a=await this._decryptSingleFile(n,t);e.file(a.filename,a.content)}const i=await e.generateAsync({type:"blob"}),s=((performance.now()-r)/1e3).toFixed(3);pt.downloadAsFile(i,`decrypted_files_${Date.now()}.zip`),lt.setOutput("success",`✅ ${tt.filesToDecrypt.length} 個檔案全部解密成功並已打包下載！(總耗時: ${s} 秒)`)}catch(e){lt.setOutput("error",`❌ 解密失敗：${e.message}`)}},async parseParameters(){const t=K.ciphertextInput.value.trim();if(!t)return pt.showToast("請先貼上 JWE 密文");try{const e=Qt(t);let i=`${e.kdf}`;e.kdf===nt.KDF_PBKDF2?i+=` (SHA-256, ${e.i.toLocaleString("en-US")} 迭代)`:e.kdf===nt.KDF_ARGON2&&(i+=` (mem: ${e.m/1024}MB, iter: ${e.t}, parallel: ${e.p})`);const s=`v${nt.VERSION} (JWE)`;K.paramsDisplayArea.innerHTML=`<p>格式版本：<span>${s}</span></p><p>金鑰衍生：<span>${i}</span></p><p>加密演算法：<span>${e.enc}</span></p><p style="color: var(--success-color);">狀態：<span>JWE Header 已載入 ✅</span></p>`,K.paramsDisplayArea.hidden=!1}catch{K.paramsDisplayArea.innerHTML='<p style="color: var(--error-color);">❌ 解析失敗：無效的 JWE 格式。</p>',K.paramsDisplayArea.hidden=!1}}},Br={init(){const t=localStorage.getItem("my-app-theme")||"dark";this.apply(t)},apply(t){document.documentElement.setAttribute("data-theme",t),K.themeToggleBtn.textContent=t==="dark"?"☀️":"🌙",localStorage.setItem("my-app-theme",t)},toggle(){const t=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";this.apply(t)}},Di={toggle(t){const r=t.classList.contains("active");t.classList.toggle("active"),t.setAttribute("aria-expanded",!r),t.nextElementSibling.setAttribute("aria-hidden",r)}},Oi={async run(){if(!await pt.checkArgon2Ready())return pt.showToast("❌ Argon2 函式庫未就緒，無法測試。");K.benchmarkBtn.disabled=!0,K.encryptBtn.disabled=!0,K.benchmarkStatus.textContent="⏱️ 正在執行基準測試，請稍候...";try{const e=navigator.hardwareConcurrency||4,i=[1024,512,256,128,64,32];let s=256;for(const n of i){const a=n*1024,o=performance.now();if(await window.argon2.hash({pass:"benchmark",salt:"benchmark-salt",time:4,mem:a,parallelism:e,hashLen:32,type:window.argon2.ArgonType.Argon2id}),performance.now()-o<1e3){s=n;break}await new Promise(p=>setTimeout(p,50))}K.argon2Memory.value=s,K.argon2Iterations.value=4,K.argon2Parallelism.value=e,K.benchmarkStatus.textContent="✅ 測試完成！",pt.showToast("✅ 建議參數已產生並填入！")}catch(t){K.benchmarkStatus.textContent="❌ 測試失敗",pt.showToast(`❌ 基準測試失敗: ${t.message}`)}finally{K.benchmarkBtn.disabled=!1,K.encryptBtn.disabled=!1,setTimeout(()=>{K.benchmarkStatus.textContent=""},4e3)}}};function zi(){K.currentYear.textContent=new Date().getFullYear(),Br.init(),tt.currentAppMode=nt.MODE_TEXT,tt.selectedAlgorithm=nt.ALGO_AES_GCM,tt.selectedKDF=nt.KDF_ARGON2,lt.setAppMode(tt.currentAppMode),pt.checkArgon2Ready(),K.themeToggleBtn.addEventListener("click",()=>Br.toggle()),K.scrollTopBtn.addEventListener("click",()=>window.scrollTo({top:0,behavior:"smooth"})),window.addEventListener("scroll",()=>K.scrollTopBtn.classList.toggle("active",window.scrollY>300)),K.appModeSelector.addEventListener("click",r=>{const e=r.target.closest(".option");e?.dataset.appMode&&lt.setAppMode(e.dataset.appMode)}),K.modeSelector.addEventListener("click",r=>{const e=r.target.closest(".option");e?.dataset.mode&&lt.setMode(e.dataset.mode)}),K.algoSelectionGroup.addEventListener("click",r=>{const e=r.target.closest(".option");e&&e.style.cursor==="not-allowed"||lt.handleOptionSelection(r,"selectedAlgorithm")}),K.kdfSelectionGroup.addEventListener("click",r=>{lt.handleOptionSelection(r,"selectedKDF")&&lt.toggleKdfParams(tt.selectedKDF)}),K.passphraseEncrypt.addEventListener("input",r=>lt.updatePasswordStrength(r.target.value,"encrypt")),K.passphraseFileEncrypt.addEventListener("input",r=>lt.updatePasswordStrength(r.target.value,"file")),K.encryptBtn.addEventListener("click",()=>qt.encryptText()),K.decryptBtn.addEventListener("click",()=>qt.decryptText()),K.parseBtn.addEventListener("click",()=>qt.parseParameters()),K.benchmarkBtn.addEventListener("click",()=>Oi.run()),K.fileEncryptInput.addEventListener("change",r=>se.handleFileSelect(r,nt.OP_ENCRYPT)),K.fileDecryptInput.addEventListener("change",r=>se.handleFileSelect(r,nt.OP_DECRYPT)),K.encryptFileBtn.addEventListener("click",()=>qt.batchEncryptFiles()),K.decryptFileBtn.addEventListener("click",()=>qt.batchDecryptFiles()),K.resetBtn.addEventListener("click",()=>lt.resetAll()),K.pasteBtn.addEventListener("click",()=>pt.pasteTo("ciphertextInput")),K.copyBtn.addEventListener("click",()=>pt.copyFromResult()),K.copyDecryptedBtn.addEventListener("click",()=>pt.copyDecryptedResult()),K.downloadBtn.addEventListener("click",()=>{tt.lastEncryptedOutput&&pt.downloadAsFile(tt.lastEncryptedOutput,`encrypted-v4-${Date.now()}${nt.DOWNLOAD_FILENAME_SUFFIX}`)}),K.passwordToggles.forEach(r=>{r.innerHTML=nt.SVG_EYE_OPEN,r.addEventListener("click",e=>lt.togglePasswordVisibility(e.currentTarget))});const t=(r,e)=>{r&&(["dragenter","dragover","dragleave","drop"].forEach(i=>{r.addEventListener(i,s=>{s.preventDefault(),s.stopPropagation()})}),["dragenter","dragover"].forEach(i=>r.addEventListener(i,()=>r.classList.add("drag-over"))),["dragleave","drop"].forEach(i=>r.addEventListener(i,()=>r.classList.remove("drag-over"))),r.addEventListener("drop",i=>{i.dataTransfer.files.length>0&&(e.files=i.dataTransfer.files,e.dispatchEvent(new Event("change",{bubbles:!0})))}))};t(K.fileEncryptInput.closest(".file-input-wrapper"),K.fileEncryptInput),t(K.fileDecryptInput.closest(".file-input-wrapper"),K.fileDecryptInput),K.accordionContainer&&K.accordionContainer.addEventListener("click",r=>{const e=r.target.closest(".accordion-header");e&&Di.toggle(e)})}document.addEventListener("DOMContentLoaded",zi);
