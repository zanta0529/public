(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}})();class d{calculateUnitPrice(t,s){return t<=0||s<=0?null:t/s}compare(t,s,i,e){const n=this.calculateUnitPrice(t,s),r=this.calculateUnitPrice(i,e);let o=null;return n!==null&&r!==null?n<r?o="A":r<n?o="B":o="tie":n!==null?o="A":r!==null&&(o="B"),{unitPriceA:n,unitPriceB:r,bestBuy:o}}}class h{constructor(t){this.comparator=t,this.elements={},this.selectElements()}selectElements(){["priceA","unitA","priceB","unitB","resultA","resultB","cardA","cardB","resetBtn","iconA","iconB"].forEach(s=>{this.elements[s]=document.getElementById(s)})}init(){[this.elements.priceA,this.elements.unitA,this.elements.priceB,this.elements.unitB].forEach(s=>{s.addEventListener("input",this.handleInput.bind(this))}),this.elements.resetBtn.addEventListener("click",this.resetAll.bind(this))}parseInputValues(){return{priceA:parseFloat(this.elements.priceA.value)||0,unitA:parseFloat(this.elements.unitA.value)||0,priceB:parseFloat(this.elements.priceB.value)||0,unitB:parseFloat(this.elements.unitB.value)||0}}handleInput(){const{priceA:t,unitA:s,priceB:i,unitB:e}=this.parseInputValues(),n=this.comparator.compare(t,s,i,e);this.updateView(n)}updateView(t){const{unitPriceA:s,unitPriceB:i,bestBuy:e}=t,{resultA:n,resultB:r,cardA:o,cardB:c,iconA:u,iconB:a}=this.elements;n.textContent=this.formatUnitPrice(s),r.textContent=this.formatUnitPrice(i),o.classList.remove("best-buy","worst-buy"),c.classList.remove("best-buy","worst-buy"),u.textContent="",a.textContent="",e==="A"?(o.classList.add("best-buy"),c.classList.add("worst-buy"),u.textContent="âœ”",a.textContent="âœ–"):e==="B"?(c.classList.add("best-buy"),o.classList.add("worst-buy"),a.textContent="âœ”",u.textContent="âœ–"):e==="tie"&&s!==null&&(o.classList.add("best-buy"),c.classList.add("best-buy"),u.textContent="âœ”",a.textContent="âœ”")}formatUnitPrice(t){return t===null||!isFinite(t)?"--":t.toFixed(3)}resetAll(){this.elements.priceA.value="",this.elements.unitA.value="",this.elements.priceB.value="",this.elements.unitB.value="",this.handleInput()}}class m{constructor(t){this.toggleButton=t,this.currentTheme=localStorage.getItem("theme")||"dark",document.documentElement.setAttribute("data-theme",this.currentTheme),this.updateButtonIcon()}init(){this.toggleButton.addEventListener("click",this.toggleTheme.bind(this))}toggleTheme(){this.currentTheme=this.currentTheme==="dark"?"light":"dark",document.documentElement.setAttribute("data-theme",this.currentTheme),localStorage.setItem("theme",this.currentTheme),this.updateButtonIcon()}updateButtonIcon(){this.toggleButton.textContent=this.currentTheme==="dark"?"â˜€ï¸":"ðŸŒ™",this.toggleButton.title=this.currentTheme==="dark"?"åˆ‡æ›è‡³æ·ºè‰²ä¸»é¡Œ":"åˆ‡æ›è‡³æ·±è‰²ä¸»é¡Œ"}}document.addEventListener("DOMContentLoaded",()=>{const l=new d;new h(l).init();const s=document.getElementById("themeToggleBtn");s&&new m(s).init();const i=document.getElementById("currentYear");i&&(i.textContent=new Date().getFullYear())});
